import{C as _a,B as i0,Z as a0,E as o0,D as lp,o as s0,f as l0,a as up,w as cp,F as u0,b as hu,t as c0}from"./app-2ef27ec4.js";import{_ as f0}from"./AuthenticatedLayout-c06ebd4a.js";import{_ as h0}from"./_plugin-vue_export-helper-c27b6911.js";var dp={exports:{}},_f={exports:{}},fp;function p0(){return fp||(fp=1,function(dn,pr){/*! For license information please see plotly.min.js.LICENSE.txt */(function(_r,Ir){dn.exports=Ir()})(self,function(){return function(){var _r={98847:function($,P,t){var A=t(71828),M={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var l in M){var _=l.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");A.addStyleRule(_,M[l])}},98222:function($,P,t){$.exports=t(82887)},27206:function($,P,t){$.exports=t(60822)},59893:function($,P,t){$.exports=t(23381)},5224:function($,P,t){$.exports=t(83832)},59509:function($,P,t){$.exports=t(72201)},75557:function($,P,t){$.exports=t(91815)},40338:function($,P,t){$.exports=t(21462)},35080:function($,P,t){$.exports=t(51319)},61396:function($,P,t){$.exports=t(57516)},40549:function($,P,t){$.exports=t(98128)},49866:function($,P,t){$.exports=t(99442)},36089:function($,P,t){$.exports=t(93740)},19548:function($,P,t){$.exports=t(8729)},35831:function($,P,t){$.exports=t(93814)},61039:function($,P,t){$.exports=t(14382)},97040:function($,P,t){$.exports=t(51759)},77986:function($,P,t){$.exports=t(10421)},24296:function($,P,t){$.exports=t(43102)},58872:function($,P,t){$.exports=t(92165)},29626:function($,P,t){$.exports=t(3325)},65591:function($,P,t){$.exports=t(36071)},69738:function($,P,t){$.exports=t(43905)},92650:function($,P,t){$.exports=t(35902)},35630:function($,P,t){$.exports=t(69816)},73434:function($,P,t){$.exports=t(94507)},27909:function($,P,t){var A=t(19548);A.register([t(27206),t(5224),t(58872),t(65591),t(69738),t(92650),t(49866),t(25743),t(6197),t(97040),t(85461),t(73434),t(54201),t(81299),t(47645),t(35630),t(77986),t(83043),t(93005),t(96881),t(4534),t(50581),t(40549),t(77900),t(47582),t(35080),t(21641),t(17280),t(5861),t(29626),t(10021),t(65317),t(96268),t(61396),t(35831),t(16122),t(46163),t(40344),t(40338),t(48131),t(36089),t(55334),t(75557),t(19440),t(99488),t(59893),t(97393),t(98222),t(61039),t(24296),t(66398),t(59509)]),$.exports=A},46163:function($,P,t){$.exports=t(15154)},96881:function($,P,t){$.exports=t(64943)},50581:function($,P,t){$.exports=t(21164)},55334:function($,P,t){$.exports=t(54186)},65317:function($,P,t){$.exports=t(94873)},10021:function($,P,t){$.exports=t(67618)},54201:function($,P,t){$.exports=t(58810)},5861:function($,P,t){$.exports=t(20593)},16122:function($,P,t){$.exports=t(29396)},83043:function($,P,t){$.exports=t(13551)},48131:function($,P,t){$.exports=t(46858)},47582:function($,P,t){$.exports=t(17988)},21641:function($,P,t){$.exports=t(68868)},96268:function($,P,t){$.exports=t(20467)},19440:function($,P,t){$.exports=t(91271)},99488:function($,P,t){$.exports=t(21461)},97393:function($,P,t){$.exports=t(85956)},25743:function($,P,t){$.exports=t(52979)},66398:function($,P,t){$.exports=t(32275)},17280:function($,P,t){$.exports=t(6419)},77900:function($,P,t){$.exports=t(61510)},81299:function($,P,t){$.exports=t(87619)},93005:function($,P,t){$.exports=t(93601)},40344:function($,P,t){$.exports=t(96595)},47645:function($,P,t){$.exports=t(70954)},6197:function($,P,t){$.exports=t(47462)},4534:function($,P,t){$.exports=t(17659)},85461:function($,P,t){$.exports=t(19990)},82884:function($){$.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},50215:function($,P,t){var A=t(82884),M=t(41940),l=t(85555),_=t(44467).templatedArray;t(24695),$.exports=_("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:M({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:A.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",l.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:M({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},3749:function($,P,t){var A=t(71828),M=t(89298),l=t(92605).draw;function _(f){var o=f._fullLayout;A.filterVisible(o.annotations).forEach(function(e){var i=M.getFromId(f,e.xref),r=M.getFromId(f,e.yref),n=M.getRefType(e.xref),s=M.getRefType(e.yref);e._extremes={},n==="range"&&m(e,i),s==="range"&&m(e,r)})}function m(f,o){var e,i=o._id,r=i.charAt(0),n=f[r],s=f["a"+r],a=f[r+"ref"],u=f["a"+r+"ref"],p=f["_"+r+"padplus"],c=f["_"+r+"padminus"],x={x:1,y:-1}[r]*f[r+"shift"],g=3*f.arrowsize*f.arrowwidth||0,h=g+x,b=g-x,v=3*f.startarrowsize*f.arrowwidth||0,y=v+x,w=v-x;if(u===a){var d=M.findExtremes(o,[o.r2c(n)],{ppadplus:h,ppadminus:b}),S=M.findExtremes(o,[o.r2c(s)],{ppadplus:Math.max(p,y),ppadminus:Math.max(c,w)});e={min:[d.min[0],S.min[0]],max:[d.max[0],S.max[0]]}}else y=s?y+s:y,w=s?w-s:w,e=M.findExtremes(o,[o.r2c(n)],{ppadplus:Math.max(p,h,y),ppadminus:Math.max(c,b,w)});f._extremes[i]=e}$.exports=function(f){var o=f._fullLayout;if(A.filterVisible(o.annotations).length&&f._fullData.length)return A.syncOrAsync([l,_],f)}},44317:function($,P,t){var A=t(71828),M=t(73972),l=t(44467).arrayEditor;function _(f,o){var e,i,r,n,s,a,u,p=f._fullLayout.annotations,c=[],x=[],g=[],h=(o||[]).length;for(e=0;e<p.length;e++)if(n=(r=p[e]).clicktoshow){for(i=0;i<h;i++)if(a=(s=o[i]).xaxis,u=s.yaxis,a._id===r.xref&&u._id===r.yref&&a.d2r(s.x)===m(r._xclick,a)&&u.d2r(s.y)===m(r._yclick,u)){(r.visible?n==="onout"?x:g:c).push(e);break}i===h&&r.visible&&n==="onout"&&x.push(e)}return{on:c,off:x,explicitOff:g}}function m(f,o){return o.type==="log"?o.l2r(f):o.d2r(f)}$.exports={hasClickToShow:function(f,o){var e=_(f,o);return e.on.length>0||e.explicitOff.length>0},onClick:function(f,o){var e,i,r=_(f,o),n=r.on,s=r.off.concat(r.explicitOff),a={},u=f._fullLayout.annotations;if(n.length||s.length){for(e=0;e<n.length;e++)(i=l(f.layout,"annotations",u[n[e]])).modifyItem("visible",!0),A.extendFlat(a,i.getUpdateObj());for(e=0;e<s.length;e++)(i=l(f.layout,"annotations",u[s[e]])).modifyItem("visible",!1),A.extendFlat(a,i.getUpdateObj());return M.call("update",f,{},a)}}}},25625:function($,P,t){var A=t(71828),M=t(7901);$.exports=function(l,_,m,f){f("opacity");var o=f("bgcolor"),e=f("bordercolor"),i=M.opacity(e);f("borderpad");var r=f("borderwidth"),n=f("showarrow");if(f("text",n?" ":m._dfltTitle.annotation),f("textangle"),A.coerceFont(f,"font",m.font),f("width"),f("align"),f("height")&&f("valign"),n){var s,a,u=f("arrowside");u.indexOf("end")!==-1&&(s=f("arrowhead"),a=f("arrowsize")),u.indexOf("start")!==-1&&(f("startarrowhead",s),f("startarrowsize",a)),f("arrowcolor",i?_.bordercolor:M.defaultLine),f("arrowwidth",2*(i&&r||1)),f("standoff"),f("startstandoff")}var p=f("hovertext"),c=m.hoverlabel||{};if(p){var x=f("hoverlabel.bgcolor",c.bgcolor||(M.opacity(o)?M.rgb(o):M.defaultLine)),g=f("hoverlabel.bordercolor",c.bordercolor||M.contrast(x));A.coerceFont(f,"hoverlabel.font",{family:c.font.family,size:c.font.size,color:c.font.color||g})}f("captureevents",!!p)}},94128:function($,P,t){var A=t(92770),M=t(58163);$.exports=function(l,_,m,f){_=_||{};var o=m==="log"&&_.type==="linear",e=m==="linear"&&_.type==="log";if(o||e)for(var i,r,n=l._fullLayout.annotations,s=_._id.charAt(0),a=0;a<n.length;a++)i=n[a],r="annotations["+a+"].",i[s+"ref"]===_._id&&u(s),i["a"+s+"ref"]===_._id&&u("a"+s);function u(p){var c=i[p],x=null;x=o?M(c,_.range):Math.pow(10,c),A(x)||(x=null),f(r+p,x)}}},84046:function($,P,t){var A=t(71828),M=t(89298),l=t(85501),_=t(25625),m=t(50215);function f(o,e,i){function r(S,T){return A.coerce(o,e,m,S,T)}var n=r("visible"),s=r("clicktoshow");if(n||s){_(o,e,i,r);for(var a=e.showarrow,u=["x","y"],p=[-10,-30],c={_fullLayout:i},x=0;x<2;x++){var g=u[x],h=M.coerceRef(o,e,c,g,"","paper");if(h!=="paper"&&M.getFromId(c,h)._annIndices.push(e._index),M.coercePosition(e,c,r,h,g,.5),a){var b="a"+g,v=M.coerceRef(o,e,c,b,"pixel",["pixel","paper"]);v!=="pixel"&&v!==h&&(v=e[b]="pixel");var y=v==="pixel"?p[x]:.4;M.coercePosition(e,c,r,v,b,y)}r(g+"anchor"),r(g+"shift")}if(A.noneOrAll(o,e,["x","y"]),a&&A.noneOrAll(o,e,["ax","ay"]),s){var w=r("xclick"),d=r("yclick");e._xclick=w===void 0?e.x:M.cleanPosition(w,c,e.xref),e._yclick=d===void 0?e.y:M.cleanPosition(d,c,e.yref)}}}$.exports=function(o,e){l(o,e,{name:"annotations",handleItemDefaults:f})}},92605:function($,P,t){var A=t(39898),M=t(73972),l=t(74875),_=t(71828),m=_.strTranslate,f=t(89298),o=t(7901),e=t(91424),i=t(30211),r=t(63893),n=t(6964),s=t(28569),a=t(44467).arrayEditor,u=t(13011);function p(g,h){var b=g._fullLayout.annotations[h]||{},v=f.getFromId(g,b.xref),y=f.getFromId(g,b.yref);v&&v.setScale(),y&&y.setScale(),x(g,b,h,!1,v,y)}function c(g,h,b,v,y){var w=y[b],d=y[b+"ref"],S=b.indexOf("y")!==-1,T=f.getRefType(d)==="domain",E=S?v.h:v.w;return g?T?w+(S?-h:h)/g._length:g.p2r(g.r2p(w)+h):w+(S?-h:h)/E}function x(g,h,b,v,y,w){var d,S,T=g._fullLayout,E=g._fullLayout._size,C=g._context.edits;v?(d="annotation-"+v,S=v+".annotations"):(d="annotation",S="annotations");var L=a(g.layout,S,h),O=L.modifyBase,z=L.modifyItem,G=L.getUpdateObj;T._infolayer.selectAll("."+d+'[data-index="'+b+'"]').remove();var I="clip"+T._uid+"_ann"+b;if(h._input&&h.visible!==!1){var H={x:{},y:{}},N=+h.textangle||0,F=T._infolayer.append("g").classed(d,!0).attr("data-index",String(b)).style("opacity",h.opacity),V=F.append("g").classed("annotation-text-g",!0),W=C[h.showarrow?"annotationTail":"annotationPosition"],te=h.captureevents||C.annotationText||W,Q=V.append("g").style("pointer-events",te?"all":null).call(n,"pointer").on("click",function(){g._dragging=!1,g.emit("plotly_clickannotation",de(A.event))});h.hovertext&&Q.on("mouseover",function(){var ve=h.hoverlabel,Le=ve.font,Ae=this.getBoundingClientRect(),we=g.getBoundingClientRect();i.loneHover({x0:Ae.left-we.left,x1:Ae.right-we.left,y:(Ae.top+Ae.bottom)/2-we.top,text:h.hovertext,color:ve.bgcolor,borderColor:ve.bordercolor,fontFamily:Le.family,fontSize:Le.size,fontColor:Le.color},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:g})}).on("mouseout",function(){i.loneUnhover(T._hoverlayer.node())});var X=h.borderwidth,q=h.borderpad,Z=X+q,J=Q.append("rect").attr("class","bg").style("stroke-width",X+"px").call(o.stroke,h.bordercolor).call(o.fill,h.bgcolor),ne=h.width||h.height,re=T._topclips.selectAll("#"+I).data(ne?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",I).append("rect"),re.exit().remove();var ae=h.font,ue=T._meta?_.templateString(h.text,T._meta):h.text,he=Q.append("text").classed("annotation-text",!0).text(ue);C.annotationText?he.call(r.makeEditable,{delegate:Q,gd:g}).call(xe).on("edit",function(ve){h.text=ve,this.call(xe),z("text",ve),y&&y.autorange&&O(y._name+".autorange",!0),w&&w.autorange&&O(w._name+".autorange",!0),M.call("_guiRelayout",g,G())}):he.call(xe)}else A.selectAll("#"+I).remove();function de(ve){var Le={index:b,annotation:h._input,fullAnnotation:h,event:ve};return v&&(Le.subplotId=v),Le}function xe(ve){return ve.call(e.font,ae).attr({"text-anchor":{left:"start",right:"end"}[h.align]||"middle"}),r.convertToTspans(ve,g,me),ve}function me(){var ve=he.selectAll("a");ve.size()===1&&ve.text()===he.text()&&Q.insert("a",":first-child").attr({"xlink:xlink:href":ve.attr("xlink:href"),"xlink:xlink:show":ve.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(J.node());var Le=Q.select(".annotation-text-math-group"),Ae=!Le.empty(),we=e.bBox((Ae?Le:he).node()),se=we.width,oe=we.height,fe=h.width||se,Se=h.height||oe,Me=Math.round(fe+2*Z),be=Math.round(Se+2*Z);function Ie(mt,ft){return ft==="auto"&&(ft=mt<.3333333333333333?"left":mt>.6666666666666666?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ft]}for(var Be=!1,ce=["x","y"],Te=0;Te<ce.length;Te++){var ye,Pe,Re,ze,He,We=ce[Te],Je=h[We+"ref"]||We,lt=h["a"+We+"ref"],et={x:y,y:w}[We],yt=(N+(We==="x"?0:-90))*Math.PI/180,_t=Me*Math.cos(yt),xt=be*Math.sin(yt),at=Math.abs(_t)+Math.abs(xt),ot=h[We+"anchor"],At=h[We+"shift"]*(We==="x"?1:-1),Ct=H[We],zt=f.getRefType(Je);if(et&&zt!=="domain"){var St=et.r2fraction(h[We]);(St<0||St>1)&&(lt===Je?((St=et.r2fraction(h["a"+We]))<0||St>1)&&(Be=!0):Be=!0),ye=et._offset+et.r2p(h[We]),ze=.5}else{var qe=zt==="domain";We==="x"?(Re=h[We],ye=qe?et._offset+et._length*Re:ye=E.l+E.w*Re):(Re=1-h[We],ye=qe?et._offset+et._length*Re:ye=E.t+E.h*Re),ze=h.showarrow?.5:Re}if(h.showarrow){Ct.head=ye;var Xe=h["a"+We];if(He=_t*Ie(.5,h.xanchor)-xt*Ie(.5,h.yanchor),lt===Je){var Ve=f.getRefType(lt);Ve==="domain"?(We==="y"&&(Xe=1-Xe),Ct.tail=et._offset+et._length*Xe):Ve==="paper"?We==="y"?(Xe=1-Xe,Ct.tail=E.t+E.h*Xe):Ct.tail=E.l+E.w*Xe:Ct.tail=et._offset+et.r2p(Xe),Pe=He}else Ct.tail=ye+Xe,Pe=He+Xe;Ct.text=Ct.tail+He;var Ze=T[We==="x"?"width":"height"];if(Je==="paper"&&(Ct.head=_.constrain(Ct.head,1,Ze-1)),lt==="pixel"){var st=-Math.max(Ct.tail-3,Ct.text),nt=Math.min(Ct.tail+3,Ct.text)-Ze;st>0?(Ct.tail+=st,Ct.text+=st):nt>0&&(Ct.tail-=nt,Ct.text-=nt)}Ct.tail+=At,Ct.head+=At}else Pe=He=at*Ie(ze,ot),Ct.text=ye+He;Ct.text+=At,He+=At,Pe+=At,h["_"+We+"padplus"]=at/2+Pe,h["_"+We+"padminus"]=at/2-Pe,h["_"+We+"size"]=at,h["_"+We+"shift"]=He}if(Be)Q.remove();else{var De=0,Fe=0;if(h.align!=="left"&&(De=(fe-se)*(h.align==="center"?.5:1)),h.valign!=="top"&&(Fe=(Se-oe)*(h.valign==="middle"?.5:1)),Ae)Le.select("svg").attr({x:Z+De-1,y:Z+Fe}).call(e.setClipUrl,ne?I:null,g);else{var rt=Z+Fe-we.top,tt=Z+De-we.left;he.call(r.positionText,tt,rt).call(e.setClipUrl,ne?I:null,g)}re.select("rect").call(e.setRect,Z,Z,fe,Se),J.call(e.setRect,X/2,X/2,Me-X,be-X),Q.call(e.setTranslate,Math.round(H.x.text-Me/2),Math.round(H.y.text-be/2)),V.attr({transform:"rotate("+N+","+H.x.text+","+H.y.text+")"});var gt,dt=function(mt,ft){F.selectAll(".annotation-arrow-g").remove();var kt=H.x.head,ht=H.y.head,pt=H.x.tail+mt,wt=H.y.tail+ft,Ft=H.x.text+mt,Nt=H.y.text+ft,Gt=_.rotationXYMatrix(N,Ft,Nt),an=_.apply2DTransform(Gt),Wt=_.apply2DTransform2(Gt),Yt=+J.attr("width"),en=+J.attr("height"),Tn=Ft-.5*Yt,Bn=Tn+Yt,mn=Nt-.5*en,Kt=mn+en,cn=[[Tn,mn,Tn,Kt],[Tn,Kt,Bn,Kt],[Bn,Kt,Bn,mn],[Bn,mn,Tn,mn]].map(Wt);if(!cn.reduce(function(ir,$n){return ir^!!_.segmentsIntersect(kt,ht,kt+1e6,ht+1e6,$n[0],$n[1],$n[2],$n[3])},!1)){cn.forEach(function(ir){var $n=_.segmentsIntersect(pt,wt,kt,ht,ir[0],ir[1],ir[2],ir[3]);$n&&(pt=$n.x,wt=$n.y)});var tn=h.arrowwidth,un=h.arrowcolor,yn=h.arrowside,En=F.append("g").style({opacity:o.opacity(un)}).classed("annotation-arrow-g",!0),Sn=En.append("path").attr("d","M"+pt+","+wt+"L"+kt+","+ht).style("stroke-width",tn+"px").call(o.stroke,o.rgb(un));if(u(Sn,yn,h),C.annotationPosition&&Sn.node().parentNode&&!v){var Nn=kt,_n=ht;if(h.standoff){var Pn=Math.sqrt(Math.pow(kt-pt,2)+Math.pow(ht-wt,2));Nn+=h.standoff*(pt-kt)/Pn,_n+=h.standoff*(wt-ht)/Pn}var tr,ur,lr=En.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(pt-Nn)+","+(wt-_n),transform:m(Nn,_n)}).style("stroke-width",tn+6+"px").call(o.stroke,"rgba(0,0,0,0)").call(o.fill,"rgba(0,0,0,0)");s.init({element:lr.node(),gd:g,prepFn:function(){var ir=e.getTranslate(Q);tr=ir.x,ur=ir.y,y&&y.autorange&&O(y._name+".autorange",!0),w&&w.autorange&&O(w._name+".autorange",!0)},moveFn:function(ir,$n){var vr=an(tr,ur),jt=vr[0]+ir,rn=vr[1]+$n;Q.call(e.setTranslate,jt,rn),z("x",c(y,ir,"x",E,h)),z("y",c(w,$n,"y",E,h)),h.axref===h.xref&&z("ax",c(y,ir,"ax",E,h)),h.ayref===h.yref&&z("ay",c(w,$n,"ay",E,h)),En.attr("transform",m(ir,$n)),V.attr({transform:"rotate("+N+","+jt+","+rn+")"})},doneFn:function(){M.call("_guiRelayout",g,G());var ir=document.querySelector(".js-notes-box-panel");ir&&ir.redraw(ir.selectedObj)}})}}};h.showarrow&&dt(0,0),W&&s.init({element:Q.node(),gd:g,prepFn:function(){gt=V.attr("transform")},moveFn:function(mt,ft){var kt="pointer";if(h.showarrow)h.axref===h.xref?z("ax",c(y,mt,"ax",E,h)):z("ax",h.ax+mt),h.ayref===h.yref?z("ay",c(w,ft,"ay",E.w,h)):z("ay",h.ay+ft),dt(mt,ft);else{if(v)return;var ht,pt;if(y)ht=c(y,mt,"x",E,h);else{var wt=h._xsize/E.w,Ft=h.x+(h._xshift-h.xshift)/E.w-wt/2;ht=s.align(Ft+mt/E.w,wt,0,1,h.xanchor)}if(w)pt=c(w,ft,"y",E,h);else{var Nt=h._ysize/E.h,Gt=h.y-(h._yshift+h.yshift)/E.h-Nt/2;pt=s.align(Gt-ft/E.h,Nt,0,1,h.yanchor)}z("x",ht),z("y",pt),y&&w||(kt=s.getCursor(y?.5:ht,w?.5:pt,h.xanchor,h.yanchor))}V.attr({transform:m(mt,ft)+gt}),n(Q,kt)},clickFn:function(mt,ft){h.captureevents&&g.emit("plotly_clickannotation",de(ft))},doneFn:function(){n(Q),M.call("_guiRelayout",g,G());var mt=document.querySelector(".js-notes-box-panel");mt&&mt.redraw(mt.selectedObj)}})}}}$.exports={draw:function(g){var h=g._fullLayout;h._infolayer.selectAll(".annotation").remove();for(var b=0;b<h.annotations.length;b++)h.annotations[b].visible&&p(g,b);return l.previousPromises(g)},drawOne:p,drawRaw:x}},13011:function($,P,t){var A=t(39898),M=t(7901),l=t(82884),_=t(71828),m=_.strScale,f=_.strRotate,o=_.strTranslate;$.exports=function(e,i,r){var n,s,a,u,p=e.node(),c=l[r.arrowhead||0],x=l[r.startarrowhead||0],g=(r.arrowwidth||1)*(r.arrowsize||1),h=(r.arrowwidth||1)*(r.startarrowsize||1),b=i.indexOf("start")>=0,v=i.indexOf("end")>=0,y=c.backoff*g+r.standoff,w=x.backoff*h+r.startstandoff;if(p.nodeName==="line"){n={x:+e.attr("x1"),y:+e.attr("y1")},s={x:+e.attr("x2"),y:+e.attr("y2")};var d=n.x-s.x,S=n.y-s.y;if(u=(a=Math.atan2(S,d))+Math.PI,y&&w&&y+w>Math.sqrt(d*d+S*S))return void F();if(y){if(y*y>d*d+S*S)return void F();var T=y*Math.cos(a),E=y*Math.sin(a);s.x+=T,s.y+=E,e.attr({x2:s.x,y2:s.y})}if(w){if(w*w>d*d+S*S)return void F();var C=w*Math.cos(a),L=w*Math.sin(a);n.x-=C,n.y-=L,e.attr({x1:n.x,y1:n.y})}}else if(p.nodeName==="path"){var O=p.getTotalLength(),z="";if(O<y+w)return void F();var G=p.getPointAtLength(0),I=p.getPointAtLength(.1);a=Math.atan2(G.y-I.y,G.x-I.x),n=p.getPointAtLength(Math.min(w,O)),z="0px,"+w+"px,";var H=p.getPointAtLength(O),N=p.getPointAtLength(O-.1);u=Math.atan2(H.y-N.y,H.x-N.x),s=p.getPointAtLength(Math.max(0,O-y)),z+=O-(z?w+y:y)+"px,"+O+"px",e.style("stroke-dasharray",z)}function F(){e.style("stroke-dasharray","0px,100px")}function V(W,te,Q,X){W.path&&(W.noRotate&&(Q=0),A.select(p.parentNode).append("path").attr({class:e.attr("class"),d:W.path,transform:o(te.x,te.y)+f(180*Q/Math.PI)+m(X)}).style({fill:M.rgb(r.arrowcolor),"stroke-width":0}))}b&&V(x,n,a,h),v&&V(c,s,u,g)}},32745:function($,P,t){var A=t(92605),M=t(44317);$.exports={moduleType:"component",name:"annotations",layoutAttributes:t(50215),supplyLayoutDefaults:t(84046),includeBasePlot:t(76325)("annotations"),calcAutorange:t(3749),draw:A.draw,drawOne:A.drawOne,drawRaw:A.drawRaw,hasClickToShow:M.hasClickToShow,onClick:M.onClick,convertCoords:t(94128)}},26997:function($,P,t){var A=t(50215),M=t(30962).overrideAll,l=t(44467).templatedArray;$.exports=M(l("annotation",{visible:A.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:A.xanchor,xshift:A.xshift,yanchor:A.yanchor,yshift:A.yshift,text:A.text,textangle:A.textangle,font:A.font,width:A.width,height:A.height,opacity:A.opacity,align:A.align,valign:A.valign,bgcolor:A.bgcolor,bordercolor:A.bordercolor,borderpad:A.borderpad,borderwidth:A.borderwidth,showarrow:A.showarrow,arrowcolor:A.arrowcolor,arrowhead:A.arrowhead,startarrowhead:A.startarrowhead,arrowside:A.arrowside,arrowsize:A.arrowsize,startarrowsize:A.startarrowsize,arrowwidth:A.arrowwidth,standoff:A.standoff,startstandoff:A.startstandoff,hovertext:A.hovertext,hoverlabel:A.hoverlabel,captureevents:A.captureevents}),"calc","from-root")},5485:function($,P,t){var A=t(71828),M=t(89298);function l(_,m){var f=m.fullSceneLayout.domain,o=m.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};_._xa={},A.extendFlat(_._xa,e),M.setConvert(_._xa),_._xa._offset=o.l+f.x[0]*o.w,_._xa.l2p=function(){return .5*(1+_._pdata[0]/_._pdata[3])*o.w*(f.x[1]-f.x[0])},_._ya={},A.extendFlat(_._ya,e),M.setConvert(_._ya),_._ya._offset=o.t+(1-f.y[1])*o.h,_._ya.l2p=function(){return .5*(1-_._pdata[1]/_._pdata[3])*o.h*(f.y[1]-f.y[0])}}$.exports=function(_){for(var m=_.fullSceneLayout.annotations,f=0;f<m.length;f++)l(m[f],_);_.fullLayout._infolayer.selectAll(".annotation-"+_.id).remove()}},20226:function($,P,t){var A=t(71828),M=t(89298),l=t(85501),_=t(25625),m=t(26997);function f(o,e,i,r){function n(a,u){return A.coerce(o,e,m,a,u)}function s(a){var u=a+"axis",p={_fullLayout:{}};return p._fullLayout[u]=i[u],M.coercePosition(e,p,n,a,a,.5)}n("visible")&&(_(o,e,r.fullLayout,n),s("x"),s("y"),s("z"),A.noneOrAll(o,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",n("ax",-10),n("ay",-30),A.noneOrAll(o,e,["ax","ay"])))}$.exports=function(o,e,i){l(o,e,{name:"annotations",handleItemDefaults:f,fullLayout:i.fullLayout})}},82188:function($,P,t){var A=t(92605).drawRaw,M=t(63538),l=["x","y","z"];$.exports=function(_){for(var m=_.fullSceneLayout,f=_.dataScale,o=m.annotations,e=0;e<o.length;e++){for(var i=o[e],r=!1,n=0;n<3;n++){var s=l[n],a=i[s],u=m[s+"axis"].r2fraction(a);if(u<0||u>1){r=!0;break}}r?_.fullLayout._infolayer.select(".annotation-"+_.id+'[data-index="'+e+'"]').remove():(i._pdata=M(_.glplot.cameraParams,[m.xaxis.r2l(i.x)*f[0],m.yaxis.r2l(i.y)*f[1],m.zaxis.r2l(i.z)*f[2]]),A(_.graphDiv,i,e,_.id,i._xa,i._ya))}}},2468:function($,P,t){var A=t(73972),M=t(71828);$.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(26997)}}},layoutAttributes:t(26997),handleDefaults:t(20226),includeBasePlot:function(l,_){var m=A.subplotsRegistry.gl3d;if(m)for(var f=m.attrRegex,o=Object.keys(l),e=0;e<o.length;e++){var i=o[e];f.test(i)&&(l[i].annotations||[]).length&&(M.pushUnique(_._basePlotModules,m),M.pushUnique(_._subplots.gl3d,i))}},convert:t(5485),draw:t(82188)}},7561:function($,P,t){$.exports=t(63489),t(94338),t(3961),t(38751),t(86825),t(37715),t(99384),t(43805),t(88874),t(83290),t(29108),t(55422),t(94320),t(31320),t(51367),t(21457)},72201:function($,P,t){var A=t(7561),M=t(71828),l=t(50606),_=l.EPOCHJD,m=l.ONEDAY,f={valType:"enumerated",values:M.sortObjectKeys(A.calendars),editType:"calc",dflt:"gregorian"},o=function(g,h,b,v){var y={};return y[b]=f,M.coerce(g,h,y,b,v)},e="##",i={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:e,w:e,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},r={};function n(g){var h=r[g];return h||(r[g]=A.instance(g))}function s(g){return M.extendFlat({},f,{description:g})}function a(g){return"Sets the calendar system to use with `"+g+"` date data."}var u={xcalendar:s(a("x"))},p=M.extendFlat({},u,{ycalendar:s(a("y"))}),c=M.extendFlat({},p,{zcalendar:s(a("z"))}),x=s(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));$.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:c,surface:c,mesh3d:c,scattergl:p,ohlc:u,candlestick:u},layout:{calendar:s(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:x},yaxis:{calendar:x},scene:{xaxis:{calendar:x},yaxis:{calendar:x},zaxis:{calendar:x}},polar:{radialaxis:{calendar:x}}},transforms:{filter:{valuecalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:s(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:f,handleDefaults:o,handleTraceDefaults:function(g,h,b,v){for(var y=0;y<b.length;y++)o(g,h,b[y]+"calendar",v.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:n,worldCalFmt:function(g,h,b){for(var v,y,w,d,S,T=Math.floor((h+.05)/m)+_,E=n(b).fromJD(T),C=0;(C=g.indexOf("%",C))!==-1;)(v=g.charAt(C+1))==="0"||v==="-"||v==="_"?(w=3,y=g.charAt(C+2),v==="_"&&(v="-")):(y=v,v="0",w=2),(d=i[y])?(S=d===e?e:E.formatDate(d[v]),g=g.substr(0,C)+S+g.substr(C+w),C+=S.length):C+=w;return g}}},22399:function($,P){P.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],P.defaultLine="#444",P.lightLine="#eee",P.background="#fff",P.borderLine="#BEC8D9",P.lightFraction=90.9090909090909},7901:function($,P,t){var A=t(84267),M=t(92770),l=t(73627).isTypedArray,_=$.exports={},m=t(22399);_.defaults=m.defaults;var f=_.defaultLine=m.defaultLine;_.lightLine=m.lightLine;var o=_.background=m.background;function e(i){if(M(i)||typeof i!="string")return i;var r=i.trim();if(r.substr(0,3)!=="rgb")return i;var n=r.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return i;var s=n[1].trim().split(/\s*[\s,]\s*/),a=r.charAt(3)==="a"&&s.length===4;if(!a&&s.length!==3)return i;for(var u=0;u<s.length;u++){if(!s[u].length||(s[u]=Number(s[u]),!(s[u]>=0)))return i;if(u===3)s[u]>1&&(s[u]=1);else if(s[u]>=1)return i}var p=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return a?"rgba("+p+", "+s[3]+")":"rgb("+p+")"}_.tinyRGB=function(i){var r=i.toRgb();return"rgb("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+")"},_.rgb=function(i){return _.tinyRGB(A(i))},_.opacity=function(i){return i?A(i).getAlpha():0},_.addOpacity=function(i,r){var n=A(i).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+r+")"},_.combine=function(i,r){var n=A(i).toRgb();if(n.a===1)return A(i).toRgbString();var s=A(r||o).toRgb(),a=s.a===1?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},u={r:a.r*(1-n.a)+n.r*n.a,g:a.g*(1-n.a)+n.g*n.a,b:a.b*(1-n.a)+n.b*n.a};return A(u).toRgbString()},_.contrast=function(i,r,n){var s=A(i);return s.getAlpha()!==1&&(s=A(_.combine(i,o))),(s.isDark()?r?s.lighten(r):o:n?s.darken(n):f).toString()},_.stroke=function(i,r){var n=A(r);i.style({stroke:_.tinyRGB(n),"stroke-opacity":n.getAlpha()})},_.fill=function(i,r){var n=A(r);i.style({fill:_.tinyRGB(n),"fill-opacity":n.getAlpha()})},_.clean=function(i){if(i&&typeof i=="object"){var r,n,s,a,u=Object.keys(i);for(r=0;r<u.length;r++)if(a=i[s=u[r]],s.substr(s.length-5)==="color")if(Array.isArray(a))for(n=0;n<a.length;n++)a[n]=e(a[n]);else i[s]=e(a);else if(s.substr(s.length-10)==="colorscale"&&Array.isArray(a))for(n=0;n<a.length;n++)Array.isArray(a[n])&&(a[n][1]=e(a[n][1]));else if(Array.isArray(a)){var p=a[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(n=0;n<a.length;n++)_.clean(a[n])}else a&&typeof a=="object"&&!l(a)&&_.clean(a)}}},63583:function($,P,t){var A=t(13838),M=t(41940),l=t(1426).extendFlat,_=t(30962).overrideAll;$.exports=_({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:A.linecolor,outlinewidth:A.linewidth,bordercolor:A.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:A.minor.tickmode,nticks:A.nticks,tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:l({},A.ticks,{dflt:""}),ticklabeloverflow:l({},A.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,labelalias:A.labelalias,tickfont:M({}),tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,tickprefix:A.tickprefix,showtickprefix:A.showtickprefix,ticksuffix:A.ticksuffix,showticksuffix:A.showticksuffix,separatethousands:A.separatethousands,exponentformat:A.exponentformat,minexponent:A.minexponent,showexponent:A.showexponent,title:{text:{valType:"string"},font:M({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:M({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},30939:function($){$.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},62499:function($,P,t){var A=t(71828),M=t(44467),l=t(26218),_=t(38701),m=t(96115),f=t(89426),o=t(63583);$.exports=function(e,i,r){var n=M.newContainer(i,"colorbar"),s=e.colorbar||{};function a(z,G){return A.coerce(s,n,o,z,G)}var u=r.margin||{t:0,b:0,l:0,r:0},p=r.width-u.l-u.r,c=r.height-u.t-u.b,x=a("orientation")==="v",g=a("thicknessmode");a("thickness",g==="fraction"?30/(x?p:c):30);var h=a("lenmode");a("len",h==="fraction"?1:x?c:p);var b,v,y,w=a("yref")==="paper",d=a("xref")==="paper",S="left";x?(y="middle",S=d?"left":"right",b=d?1.02:1,v=.5):(y=w?"bottom":"top",S="center",b=.5,v=w?1.02:1),A.coerce(s,n,{x:{valType:"number",min:d?-2:0,max:d?3:1,dflt:b}},"x"),A.coerce(s,n,{y:{valType:"number",min:w?-2:0,max:w?3:1,dflt:v}},"y"),a("xanchor",S),a("xpad"),a("yanchor",y),a("ypad"),A.noneOrAll(s,n,["x","y"]),a("outlinecolor"),a("outlinewidth"),a("bordercolor"),a("borderwidth"),a("bgcolor");var T=A.coerce(s,n,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");a("ticklabeloverflow",T.indexOf("inside")!==-1?"hide past domain":"hide past div"),l(s,n,a,"linear");var E=r.font,C={outerTicks:!1,font:E};T.indexOf("inside")!==-1&&(C.bgColor="black"),f(s,n,a,"linear",C),m(s,n,a,"linear",C),_(s,n,a,"linear",C),a("title.text",r._dfltTitle.colorbar);var L=n.showticklabels?n.tickfont:E,O=A.extendFlat({},L,{color:E.color,size:A.bigFont(L.size)});A.coerceFont(a,"title.font",O),a("title.side",x?"top":"right")}},98981:function($,P,t){var A=t(39898),M=t(84267),l=t(74875),_=t(73972),m=t(89298),f=t(28569),o=t(71828),e=o.strTranslate,i=t(1426).extendFlat,r=t(6964),n=t(91424),s=t(7901),a=t(92998),u=t(63893),p=t(52075).flipScale,c=t(71453),x=t(52830),g=t(13838),h=t(18783),b=h.LINE_SPACING,v=h.FROM_TL,y=h.FROM_BR,w=t(30939).cn;$.exports={draw:function(d){var S=d._fullLayout._infolayer.selectAll("g."+w.colorbar).data(function(T){var E,C,L,O,z=T._fullLayout,G=T.calcdata,I=[];function H(ne){return i(ne,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function N(){typeof O.calc=="function"?O.calc(T,L,E):(E._fillgradient=C.reversescale?p(C.colorscale):C.colorscale,E._zrange=[C[O.min],C[O.max]])}for(var F=0;F<G.length;F++){var V=G[F];if((L=V[0].trace)._module){var W=L._module.colorbar;if(L.visible===!0&&W)for(var te=Array.isArray(W),Q=te?W:[W],X=0;X<Q.length;X++){var q=(O=Q[X]).container;(C=q?L[q]:L)&&C.showscale&&((E=H(C.colorbar))._id="cb"+L.uid+(te&&q?"-"+q:""),E._traceIndex=L.index,E._propPrefix=(q?q+".":"")+"colorbar.",E._meta=L._meta,N(),I.push(E))}}}for(var Z in z._colorAxes)if((C=z[Z]).showscale){var J=z._colorAxes[Z];(E=H(C.colorbar))._id="cb"+Z,E._propPrefix=Z+".colorbar.",E._meta=z._meta,O={min:"cmin",max:"cmax"},J[0]!=="heatmap"&&(L=J[1],O.calc=L._module.colorbar.calc),N(),I.push(E)}return I}(d),function(T){return T._id});S.enter().append("g").attr("class",function(T){return T._id}).classed(w.colorbar,!0),S.each(function(T){var E=A.select(this);o.ensureSingle(E,"rect",w.cbbg),o.ensureSingle(E,"g",w.cbfills),o.ensureSingle(E,"g",w.cblines),o.ensureSingle(E,"g",w.cbaxis,function(L){L.classed(w.crisp,!0)}),o.ensureSingle(E,"g",w.cbtitleunshift,function(L){L.append("g").classed(w.cbtitle,!0)}),o.ensureSingle(E,"rect",w.cboutline);var C=function(L,O,z){var G=O.orientation==="v",I=O.len,H=O.lenmode,N=O.thickness,F=O.thicknessmode,V=O.outlinewidth,W=O.borderwidth,te=O.bgcolor,Q=O.xanchor,X=O.yanchor,q=O.xpad,Z=O.ypad,J=O.x,ne=G?O.y:1-O.y,re=O.yref==="paper",ae=O.xref==="paper",ue=z._fullLayout,he=ue._size,de=O._fillcolor,xe=O._line,me=O.title,ve=me.side,Le=O._zrange||A.extent((typeof de=="function"?de:xe.color).domain()),Ae=typeof xe.color=="function"?xe.color:function(){return xe.color},we=typeof de=="function"?de:function(){return de},se=O._levels,oe=function(Ve,Ze,st){var nt,De,Fe=Ze._levels,rt=[],tt=[],gt=Fe.end+Fe.size/100,dt=Fe.size,mt=1.001*st[0]-.001*st[1],ft=1.001*st[1]-.001*st[0];for(De=0;De<1e5&&(nt=Fe.start+De*dt,!(dt>0?nt>=gt:nt<=gt));De++)nt>mt&&nt<ft&&rt.push(nt);if(Ze._fillgradient)tt=[0];else if(typeof Ze._fillcolor=="function"){var kt=Ze._filllevels;if(kt)for(gt=kt.end+kt.size/100,dt=kt.size,De=0;De<1e5&&(nt=kt.start+De*dt,!(dt>0?nt>=gt:nt<=gt));De++)nt>st[0]&&nt<st[1]&&tt.push(nt);else(tt=rt.map(function(ht){return ht-Fe.size/2})).push(tt[tt.length-1]+Fe.size)}else Ze._fillcolor&&typeof Ze._fillcolor=="string"&&(tt=[0]);return Fe.size<0&&(rt.reverse(),tt.reverse()),{line:rt,fill:tt}}(0,O,Le),fe=oe.fill,Se=oe.line,Me=Math.round(N*(F==="fraction"?G?he.w:he.h:1)),be=Me/(G?he.w:he.h),Ie=Math.round(I*(H==="fraction"?G?he.h:he.w:1)),Be=Ie/(G?he.h:he.w),ce=ae?he.w:z._fullLayout.width,Te=re?he.h:z._fullLayout.height,ye=Math.round(G?J*ce+q:ne*Te+Z),Pe={center:.5,right:1}[Q]||0,Re={top:1,middle:.5}[X]||0,ze=G?J-Pe*be:ne-Re*be,He=G?ne-Re*Be:J-Pe*Be,We=Math.round(G?Te*(1-He):ce*He);O._lenFrac=Be,O._thickFrac=be,O._uFrac=ze,O._vFrac=He;var Je=O._axis=function(Ve,Ze,st){var nt=Ve._fullLayout,De=Ze.orientation==="v",Fe={type:"linear",range:st,tickmode:Ze.tickmode,nticks:Ze.nticks,tick0:Ze.tick0,dtick:Ze.dtick,tickvals:Ze.tickvals,ticktext:Ze.ticktext,ticks:Ze.ticks,ticklen:Ze.ticklen,tickwidth:Ze.tickwidth,tickcolor:Ze.tickcolor,showticklabels:Ze.showticklabels,labelalias:Ze.labelalias,ticklabelposition:Ze.ticklabelposition,ticklabeloverflow:Ze.ticklabeloverflow,ticklabelstep:Ze.ticklabelstep,tickfont:Ze.tickfont,tickangle:Ze.tickangle,tickformat:Ze.tickformat,exponentformat:Ze.exponentformat,minexponent:Ze.minexponent,separatethousands:Ze.separatethousands,showexponent:Ze.showexponent,showtickprefix:Ze.showtickprefix,tickprefix:Ze.tickprefix,showticksuffix:Ze.showticksuffix,ticksuffix:Ze.ticksuffix,title:Ze.title,showline:!0,anchor:"free",side:De?"right":"bottom",position:1},rt=De?"y":"x",tt={type:"linear",_id:rt+Ze._id},gt={letter:rt,font:nt.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:nt.calendar};function dt(mt,ft){return o.coerce(Fe,tt,g,mt,ft)}return c(Fe,tt,dt,gt,nt),x(Fe,tt,dt,gt),tt}(z,O,Le);Je.position=be+(G?J+q/he.w:ne+Z/he.h);var lt=["top","bottom"].indexOf(ve)!==-1;if(G&&lt&&(Je.title.side=ve,Je.titlex=J+q/he.w,Je.titley=He+(me.side==="top"?Be-Z/he.h:Z/he.h)),G||lt||(Je.title.side=ve,Je.titley=ne+Z/he.h,Je.titlex=He+q/he.w),xe.color&&O.tickmode==="auto"){Je.tickmode="linear",Je.tick0=se.start;var et=se.size,yt=o.constrain(Ie/50,4,15)+1,_t=(Le[1]-Le[0])/((O.nticks||yt)*et);if(_t>1){var xt=Math.pow(10,Math.floor(Math.log(_t)/Math.LN10));et*=xt*o.roundUp(_t/xt,[2,5,10]),(Math.abs(se.start)/se.size+1e-6)%1<2e-6&&(Je.tick0=0)}Je.dtick=et}Je.domain=G?[He+Z/he.h,He+Be-Z/he.h]:[He+q/he.w,He+Be-q/he.w],Je.setScale(),L.attr("transform",e(Math.round(he.l),Math.round(he.t)));var at,ot=L.select("."+w.cbtitleunshift).attr("transform",e(-Math.round(he.l),-Math.round(he.t))),At=Je.ticklabelposition,Ct=Je.title.font.size,zt=L.select("."+w.cbaxis),St=0,qe=0;function Xe(Ve,Ze){var st={propContainer:Je,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ue._dfltTitle.colorbar,containerGroup:L.select("."+w.cbtitle)},nt=Ve.charAt(0)==="h"?Ve.substr(1):"h"+Ve;L.selectAll("."+nt+",."+nt+"-math-group").remove(),a.draw(z,Ve,i(st,Ze||{}))}return o.syncOrAsync([l.previousPromises,function(){var Ve,Ze;(G&&lt||!G&&!lt)&&(ve==="top"&&(Ve=q+he.l+ce*J,Ze=Z+he.t+Te*(1-He-Be)+3+.75*Ct),ve==="bottom"&&(Ve=q+he.l+ce*J,Ze=Z+he.t+Te*(1-He)-3-.25*Ct),ve==="right"&&(Ze=Z+he.t+Te*ne+3+.75*Ct,Ve=q+he.l+ce*He),Xe(Je._id+"title",{attributes:{x:Ve,y:Ze,"text-anchor":G?"start":"middle"}}))},function(){if(!G&&!lt||G&&lt){var Ve,Ze=L.select("."+w.cbtitle),st=Ze.select("text"),nt=[-V/2,V/2],De=Ze.select(".h"+Je._id+"title-math-group").node(),Fe=15.6;if(st.node()&&(Fe=parseInt(st.node().style.fontSize,10)*b),De?(Ve=n.bBox(De),qe=Ve.width,(St=Ve.height)>Fe&&(nt[1]-=(St-Fe)/2)):st.node()&&!st.classed(w.jsPlaceholder)&&(Ve=n.bBox(st.node()),qe=Ve.width,St=Ve.height),G){if(St){if(St+=5,ve==="top")Je.domain[1]-=St/he.h,nt[1]*=-1;else{Je.domain[0]+=St/he.h;var rt=u.lineCount(st);nt[1]+=(1-rt)*Fe}Ze.attr("transform",e(nt[0],nt[1])),Je.setScale()}}else qe&&(ve==="right"&&(Je.domain[0]+=(qe+Ct/2)/he.w),Ze.attr("transform",e(nt[0],nt[1])),Je.setScale())}L.selectAll("."+w.cbfills+",."+w.cblines).attr("transform",G?e(0,Math.round(he.h*(1-Je.domain[1]))):e(Math.round(he.w*Je.domain[0]),0)),zt.attr("transform",G?e(0,Math.round(-he.t)):e(Math.round(-he.l),0));var tt=L.select("."+w.cbfills).selectAll("rect."+w.cbfill).attr("style","").data(fe);tt.enter().append("rect").classed(w.cbfill,!0).attr("style",""),tt.exit().remove();var gt=Le.map(Je.c2p).map(Math.round).sort(function(ht,pt){return ht-pt});tt.each(function(ht,pt){var wt=[pt===0?Le[0]:(fe[pt]+fe[pt-1])/2,pt===fe.length-1?Le[1]:(fe[pt]+fe[pt+1])/2].map(Je.c2p).map(Math.round);G&&(wt[1]=o.constrain(wt[1]+(wt[1]>wt[0])?1:-1,gt[0],gt[1]));var Ft=A.select(this).attr(G?"x":"y",ye).attr(G?"y":"x",A.min(wt)).attr(G?"width":"height",Math.max(Me,2)).attr(G?"height":"width",Math.max(A.max(wt)-A.min(wt),2));if(O._fillgradient)n.gradient(Ft,z,O._id,G?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var Nt=we(ht).replace("e-","");Ft.attr("fill",M(Nt).toHexString())}});var dt=L.select("."+w.cblines).selectAll("path."+w.cbline).data(xe.color&&xe.width?Se:[]);dt.enter().append("path").classed(w.cbline,!0),dt.exit().remove(),dt.each(function(ht){var pt=ye,wt=Math.round(Je.c2p(ht))+xe.width/2%1;A.select(this).attr("d","M"+(G?pt+","+wt:wt+","+pt)+(G?"h":"v")+Me).call(n.lineGroupStyle,xe.width,Ae(ht),xe.dash)}),zt.selectAll("g."+Je._id+"tick,path").remove();var mt=ye+Me+(V||0)/2-(O.ticks==="outside"?1:0),ft=m.calcTicks(Je),kt=m.getTickSigns(Je)[2];return m.drawTicks(z,Je,{vals:Je.ticks==="inside"?m.clipEnds(Je,ft):ft,layer:zt,path:m.makeTickPath(Je,mt,kt),transFn:m.makeTransTickFn(Je)}),m.drawLabels(z,Je,{vals:ft,layer:zt,transFn:m.makeTransTickLabelFn(Je),labelFns:m.makeLabelFns(Je,mt)})},function(){if(G&&!lt||!G&&lt){var Ve,Ze,st=Je.position||0,nt=Je._offset+Je._length/2;if(ve==="right")Ze=nt,Ve=he.l+ce*st+10+Ct*(Je.showticklabels?1:.5);else if(Ve=nt,ve==="bottom"&&(Ze=he.t+Te*st+10+(At.indexOf("inside")===-1?Je.tickfont.size:0)+(Je.ticks!=="intside"&&O.ticklen||0)),ve==="top"){var De=me.text.split("<br>").length;Ze=he.t+Te*st+10-Me-b*Ct*De}Xe((G?"h":"v")+Je._id+"title",{avoid:{selection:A.select(z).selectAll("g."+Je._id+"tick"),side:ve,offsetTop:G?0:he.t,offsetLeft:G?he.l:0,maxShift:G?ue.width:ue.height},attributes:{x:Ve,y:Ze,"text-anchor":"middle"},transform:{rotate:G?-90:0,offset:0}})}},l.previousPromises,function(){var Ve,Ze=Me+V/2;At.indexOf("inside")===-1&&(Ve=n.bBox(zt.node()),Ze+=G?Ve.width:Ve.height),at=ot.select("text");var st=0,nt=G&&ve==="top",De=!G&&ve==="right",Fe=0;if(at.node()&&!at.classed(w.jsPlaceholder)){var rt,tt=ot.select(".h"+Je._id+"title-math-group").node();tt&&(G&&lt||!G&&!lt)?(st=(Ve=n.bBox(tt)).width,rt=Ve.height):(st=(Ve=n.bBox(ot.node())).right-he.l-(G?ye:We),rt=Ve.bottom-he.t-(G?We:ye),G||ve!=="top"||(Ze+=Ve.height,Fe=Ve.height)),De&&(at.attr("transform",e(st/2+Ct/2,0)),st*=2),Ze=Math.max(Ze,G?st:rt)}var gt=2*(G?q:Z)+Ze+W+V/2,dt=0;!G&&me.text&&X==="bottom"&&ne<=0&&(gt+=dt=gt/2,Fe+=dt),ue._hColorbarMoveTitle=dt,ue._hColorbarMoveCBTitle=Fe;var mt=W+V,ft=(G?ye:We)-mt/2-(G?q:0),kt=(G?We:ye)-(G?Ie:Z+Fe-dt);L.select("."+w.cbbg).attr("x",ft).attr("y",kt).attr(G?"width":"height",Math.max(gt-dt,2)).attr(G?"height":"width",Math.max(Ie+mt,2)).call(s.fill,te).call(s.stroke,O.bordercolor).style("stroke-width",W);var ht=De?Math.max(st-10,0):0;L.selectAll("."+w.cboutline).attr("x",(G?ye:We+q)+ht).attr("y",(G?We+Z-Ie:ye)+(nt?St:0)).attr(G?"width":"height",Math.max(Me,2)).attr(G?"height":"width",Math.max(Ie-(G?2*Z+St:2*q+ht),2)).call(s.stroke,O.outlinecolor).style({fill:"none","stroke-width":V});var pt=G?Pe*gt:0,wt=G?0:(1-Re)*gt-Fe;if(pt=ae?he.l-pt:-pt,wt=re?he.t-wt:-wt,L.attr("transform",e(pt,wt)),!G&&(W||M(te).getAlpha()&&!M.equals(ue.paper_bgcolor,te))){var Ft=zt.selectAll("text"),Nt=Ft[0].length,Gt=L.select("."+w.cbbg).node(),an=n.bBox(Gt),Wt=n.getTranslate(L);Ft.each(function(yn,En){var Sn=Nt-1;if(En===0||En===Sn){var Nn,_n=n.bBox(this),Pn=n.getTranslate(this);if(En===Sn){var tr=_n.right+Pn.x;(Nn=an.right+Wt.x+We-W-2+J-tr)>0&&(Nn=0)}else if(En===0){var ur=_n.left+Pn.x;(Nn=an.left+Wt.x+We+W+2-ur)<0&&(Nn=0)}Nn&&(Nt<3?this.setAttribute("transform","translate("+Nn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Yt={},en=v[Q],Tn=y[Q],Bn=v[X],mn=y[X],Kt=gt-Me;G?(H==="pixels"?(Yt.y=ne,Yt.t=Ie*Bn,Yt.b=Ie*mn):(Yt.t=Yt.b=0,Yt.yt=ne+I*Bn,Yt.yb=ne-I*mn),F==="pixels"?(Yt.x=J,Yt.l=gt*en,Yt.r=gt*Tn):(Yt.l=Kt*en,Yt.r=Kt*Tn,Yt.xl=J-N*en,Yt.xr=J+N*Tn)):(H==="pixels"?(Yt.x=J,Yt.l=Ie*en,Yt.r=Ie*Tn):(Yt.l=Yt.r=0,Yt.xl=J+I*en,Yt.xr=J-I*Tn),F==="pixels"?(Yt.y=1-ne,Yt.t=gt*Bn,Yt.b=gt*mn):(Yt.t=Kt*Bn,Yt.b=Kt*mn,Yt.yt=ne-N*Bn,Yt.yb=ne+N*mn));var cn=O.y<.5?"b":"t",tn=O.x<.5?"l":"r";z._fullLayout._reservedMargin[O._id]={};var un={r:ue.width-ft-pt,l:ft+Yt.r,b:ue.height-kt-wt,t:kt+Yt.b};ae&&re?l.autoMargin(z,O._id,Yt):ae?z._fullLayout._reservedMargin[O._id][cn]=un[cn]:re||G?z._fullLayout._reservedMargin[O._id][tn]=un[tn]:z._fullLayout._reservedMargin[O._id][cn]=un[cn]}],z)}(E,T,d);C&&C.then&&(d._promises||[]).push(C),d._context.edits.colorbarPosition&&function(L,O,z){var G,I,H,N=O.orientation==="v",F=z._fullLayout._size;f.init({element:L.node(),gd:z,prepFn:function(){G=L.attr("transform"),r(L)},moveFn:function(V,W){L.attr("transform",G+e(V,W)),I=f.align((N?O._uFrac:O._vFrac)+V/F.w,N?O._thickFrac:O._lenFrac,0,1,O.xanchor),H=f.align((N?O._vFrac:1-O._uFrac)-W/F.h,N?O._lenFrac:O._thickFrac,0,1,O.yanchor);var te=f.getCursor(I,H,O.xanchor,O.yanchor);r(L,te)},doneFn:function(){if(r(L),I!==void 0&&H!==void 0){var V={};V[O._propPrefix+"x"]=I,V[O._propPrefix+"y"]=H,O._traceIndex!==void 0?_.call("_guiRestyle",z,V,O._traceIndex):_.call("_guiRelayout",z,V)}}})}(E,T,d)}),S.exit().each(function(T){l.autoMargin(d,T._id)}).remove(),S.order()}}},76228:function($,P,t){var A=t(71828);$.exports=function(M){return A.isPlainObject(M.colorbar)}},12311:function($,P,t){$.exports={moduleType:"component",name:"colorbar",attributes:t(63583),supplyDefaults:t(62499),draw:t(98981).draw,hasColorbar:t(76228)}},50693:function($,P,t){var A=t(63583),M=t(30587).counter,l=t(78607),_=t(63282).scales;function m(f){return"`"+f+"`"}l(_),$.exports=function(f,o){f=f||"";var e,i=(o=o||{}).cLetter||"c",r=("onlyIfNumerical"in o&&o.onlyIfNumerical,"noScale"in o?o.noScale:f==="marker.line"),n="showScaleDflt"in o?o.showScaleDflt:i==="z",s=typeof o.colorscaleDflt=="string"?_[o.colorscaleDflt]:null,a=o.editTypeOverride||"",u=f?f+".":"";"colorAttr"in o?(e=o.colorAttr,o.colorAttr):m(u+(e={z:"z",c:"color"}[i]));var p=i+"auto",c=i+"min",x=i+"max",g=i+"mid",h={};h[c]=h[x]=void 0;var b={};b[p]=!1;var v={};return e==="color"&&(v.color={valType:"color",arrayOk:!0,editType:a||"style"},o.anim&&(v.color.anim=!0)),v[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:h},v[c]={valType:"number",dflt:null,editType:a||"plot",impliedEdits:b},v[x]={valType:"number",dflt:null,editType:a||"plot",impliedEdits:b},v[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:h},v.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},v.autocolorscale={valType:"boolean",dflt:o.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},v.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(v.showscale={valType:"boolean",dflt:n,editType:"calc"},v.colorbar=A),o.noColorAxis||(v.coloraxis={valType:"subplotid",regex:M("coloraxis"),dflt:null,editType:"calc"}),v}},78803:function($,P,t){var A=t(92770),M=t(71828),l=t(52075).extractOpts;$.exports=function(_,m,f){var o,e=_._fullLayout,i=f.vals,r=f.containerStr,n=r?M.nestedProperty(m,r).get():m,s=l(n),a=s.auto!==!1,u=s.min,p=s.max,c=s.mid,x=function(){return M.aggNums(Math.min,null,i)},g=function(){return M.aggNums(Math.max,null,i)};u===void 0?u=x():a&&(u=n._colorAx&&A(u)?Math.min(u,x()):x()),p===void 0?p=g():a&&(p=n._colorAx&&A(p)?Math.max(p,g()):g()),a&&c!==void 0&&(p-c>c-u?u=c-(p-c):p-c<c-u&&(p=c+(c-u))),u===p&&(u-=.5,p+=.5),s._sync("min",u),s._sync("max",p),s.autocolorscale&&(o=u*p<0?e.colorscale.diverging:u>=0?e.colorscale.sequential:e.colorscale.sequentialminus,s._sync("colorscale",o))}},33046:function($,P,t){var A=t(71828),M=t(52075).hasColorscale,l=t(52075).extractOpts;$.exports=function(_,m){function f(a,u){var p=a["_"+u];p!==void 0&&(a[u]=p)}function o(a,u){var p=u.container?A.nestedProperty(a,u.container).get():a;if(p)if(p.coloraxis)p._colorAx=m[p.coloraxis];else{var c=l(p),x=c.auto;(x||c.min===void 0)&&f(p,u.min),(x||c.max===void 0)&&f(p,u.max),c.autocolorscale&&f(p,"colorscale")}}for(var e=0;e<_.length;e++){var i=_[e],r=i._module.colorbar;if(r)if(Array.isArray(r))for(var n=0;n<r.length;n++)o(i,r[n]);else o(i,r);M(i,"marker.line")&&o(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in m._colorAxes)o(m[s],{min:"cmin",max:"cmax"})}},1586:function($,P,t){var A=t(92770),M=t(71828),l=t(76228),_=t(62499),m=t(63282).isValid,f=t(73972).traceIs;function o(e,i){var r=i.slice(0,i.length-1);return i?M.nestedProperty(e,r).get()||{}:e}$.exports=function e(i,r,n,s,a){var u=a.prefix,p=a.cLetter,c="_module"in r,x=o(i,u),g=o(r,u),h=o(r._template||{},u)||{},b=function(){return delete i.coloraxis,delete r.coloraxis,e(i,r,n,s,a)};if(c){var v=n._colorAxes||{},y=s(u+"coloraxis");if(y){var w=f(r,"contour")&&M.nestedProperty(r,"contours.coloring").get()||"heatmap",d=v[y];return void(d?(d[2].push(b),d[0]!==w&&(d[0]=!1,M.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):v[y]=[w,r,[b]])}}var S=x[p+"min"],T=x[p+"max"],E=A(S)&&A(T)&&S<T;s(u+p+"auto",!E)?s(u+p+"mid"):(s(u+p+"min"),s(u+p+"max"));var C,L,O=x.colorscale,z=h.colorscale;O!==void 0&&(C=!m(O)),z!==void 0&&(C=!m(z)),s(u+"autocolorscale",C),s(u+"colorscale"),s(u+"reversescale"),u!=="marker.line."&&(u&&c&&(L=l(x)),s(u+"showscale",L)&&(u&&h&&(g._template=h),_(x,g,n)))}},52075:function($,P,t){var A=t(39898),M=t(84267),l=t(92770),_=t(71828),m=t(7901),f=t(63282).isValid,o=["showscale","autocolorscale","colorscale","reversescale","colorbar"],e=["min","max","mid","auto"];function i(u){var p,c,x,g=u._colorAx,h=g||u,b={};for(c=0;c<o.length;c++)b[x=o[c]]=h[x];if(g)for(p="c",c=0;c<e.length;c++)b[x=e[c]]=h["c"+x];else{var v;for(c=0;c<e.length;c++)((v="c"+(x=e[c]))in h||(v="z"+x)in h)&&(b[x]=h[v]);p=v.charAt(0)}return b._sync=function(y,w){var d=e.indexOf(y)!==-1?p+y:y;h[d]=h["_"+d]=w},b}function r(u){for(var p=i(u),c=p.min,x=p.max,g=p.reversescale?n(p.colorscale):p.colorscale,h=g.length,b=new Array(h),v=new Array(h),y=0;y<h;y++){var w=g[y];b[y]=c+w[0]*(x-c),v[y]=w[1]}return{domain:b,range:v}}function n(u){for(var p=u.length,c=new Array(p),x=p-1,g=0;x>=0;x--,g++){var h=u[x];c[g]=[1-h[0],h[1]]}return c}function s(u,p){p=p||{};for(var c=u.domain,x=u.range,g=x.length,h=new Array(g),b=0;b<g;b++){var v=M(x[b]).toRgb();h[b]=[v.r,v.g,v.b,v.a]}var y,w=A.scale.linear().domain(c).range(h).clamp(!0),d=p.noNumericCheck,S=p.returnArray;return(y=d&&S?w:d?function(T){return a(w(T))}:S?function(T){return l(T)?w(T):M(T).isValid()?T:m.defaultLine}:function(T){return l(T)?a(w(T)):M(T).isValid()?T:m.defaultLine}).domain=w.domain,y.range=function(){return x},y}function a(u){var p={r:u[0],g:u[1],b:u[2],a:u[3]};return M(p).toRgbString()}$.exports={hasColorscale:function(u,p,c){var x=p?_.nestedProperty(u,p).get()||{}:u,g=x[c||"color"],h=!1;if(_.isArrayOrTypedArray(g)){for(var b=0;b<g.length;b++)if(l(g[b])){h=!0;break}}return _.isPlainObject(x)&&(h||x.showscale===!0||l(x.cmin)&&l(x.cmax)||f(x.colorscale)||_.isPlainObject(x.colorbar))},extractOpts:i,extractScale:r,flipScale:n,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(u,p){return s(r(u),p)}}},21081:function($,P,t){var A=t(63282),M=t(52075);$.exports={moduleType:"component",name:"colorscale",attributes:t(50693),layoutAttributes:t(72673),supplyLayoutDefaults:t(30959),handleDefaults:t(1586),crossTraceDefaults:t(33046),calc:t(78803),scales:A.scales,defaultScale:A.defaultScale,getScale:A.get,isValidScale:A.isValid,hasColorscale:M.hasColorscale,extractOpts:M.extractOpts,extractScale:M.extractScale,flipScale:M.flipScale,makeColorScaleFunc:M.makeColorScaleFunc,makeColorScaleFuncFromTrace:M.makeColorScaleFuncFromTrace}},72673:function($,P,t){var A=t(1426).extendFlat,M=t(50693),l=t(63282).scales;$.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:l.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:l.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:l.RdBu,editType:"calc"}},coloraxis:A({_isSubplotObj:!0,editType:"calc"},M("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},30959:function($,P,t){var A=t(71828),M=t(44467),l=t(72673),_=t(1586);$.exports=function(m,f){function o(p,c){return A.coerce(m,f,l,p,c)}o("colorscale.sequential"),o("colorscale.sequentialminus"),o("colorscale.diverging");var e,i,r=f._colorAxes;function n(p,c){return A.coerce(e,i,l.coloraxis,p,c)}for(var s in r){var a=r[s];if(a[0])e=m[s]||{},(i=M.newContainer(f,s,"coloraxis"))._name=s,_(e,i,f,n,{prefix:"",cLetter:"c"});else{for(var u=0;u<a[2].length;u++)a[2][u]();delete f._colorAxes[s]}}}},63282:function($,P,t){var A=t(84267),M={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},l=M.RdBu;function _(m){var f=0;if(!Array.isArray(m)||m.length<2||!m[0]||!m[m.length-1]||+m[0][0]!=0||+m[m.length-1][0]!=1)return!1;for(var o=0;o<m.length;o++){var e=m[o];if(e.length!==2||+e[0]<f||!A(e[1]).isValid())return!1;f=+e[0]}return!0}$.exports={scales:M,defaultScale:l,get:function(m,f){if(f||(f=l),!m)return f;function o(){try{m=M[m]||JSON.parse(m)}catch{m=f}}return typeof m=="string"&&(o(),typeof m=="string"&&o()),_(m)?m:f},isValid:function(m){return M[m]!==void 0||_(m)}}},92807:function($){$.exports=function(P,t,A,M,l){var _=(P-A)/(M-A),m=_+t/(M-A),f=(_+m)/2;return l==="left"||l==="bottom"?_:l==="center"||l==="middle"?f:l==="right"||l==="top"?m:_<.6666666666666666-f?_:m>1.3333333333333333-f?m:f}},70461:function($,P,t){var A=t(71828),M=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];$.exports=function(l,_,m,f){return l=m==="left"?0:m==="center"?1:m==="right"?2:A.constrain(Math.floor(3*l),0,2),_=f==="bottom"?0:f==="middle"?1:f==="top"?2:A.constrain(Math.floor(3*_),0,2),M[_][l]}},64505:function($,P){P.selectMode=function(t){return t==="lasso"||t==="select"},P.drawMode=function(t){return t==="drawclosedpath"||t==="drawopenpath"||t==="drawline"||t==="drawrect"||t==="drawcircle"},P.openMode=function(t){return t==="drawline"||t==="drawopenpath"},P.rectMode=function(t){return t==="select"||t==="drawline"||t==="drawrect"||t==="drawcircle"},P.freeMode=function(t){return t==="lasso"||t==="drawclosedpath"||t==="drawopenpath"},P.selectingOrDrawing=function(t){return P.freeMode(t)||P.rectMode(t)}},28569:function($,P,t){var A=t(48956),M=t(57035),l=t(38520),_=t(71828).removeElement,m=t(85555),f=$.exports={};f.align=t(92807),f.getCursor=t(70461);var o=t(26041);function e(){var r=document.createElement("div");r.className="dragcover";var n=r.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(r),r}function i(r){return A(r.changedTouches?r.changedTouches[0]:r,document.body)}f.unhover=o.wrapped,f.unhoverRaw=o.raw,f.init=function(r){var n,s,a,u,p,c,x,g,h=r.gd,b=1,v=h._context.doubleClickDelay,y=r.element;h._mouseDownTime||(h._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=d,l?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=d,y.addEventListener("touchstart",d,{passive:!1})):y.ontouchstart=d;var w=r.clampFn||function(E,C,L){return Math.abs(E)<L&&(E=0),Math.abs(C)<L&&(C=0),[E,C]};function d(E){h._dragged=!1,h._dragging=!0;var C=i(E);n=C[0],s=C[1],x=E.target,c=E,g=E.buttons===2||E.ctrlKey,E.clientX===void 0&&E.clientY===void 0&&(E.clientX=n,E.clientY=s),(a=new Date().getTime())-h._mouseDownTime<v?b+=1:(b=1,h._mouseDownTime=a),r.prepFn&&r.prepFn(E,n,s),M&&!g?(p=e()).style.cursor=window.getComputedStyle(y).cursor:M||(p=document,u=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",T),document.addEventListener("touchend",T),r.dragmode!==!1&&(E.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(E){E.preventDefault();var C=i(E),L=r.minDrag||m.MINDRAG,O=w(C[0]-n,C[1]-s,L),z=O[0],G=O[1];(z||G)&&(h._dragged=!0,f.unhover(h,E)),h._dragged&&r.moveFn&&!g&&(h._dragdata={element:y,dx:z,dy:G},r.moveFn(z,G))}function T(E){if(delete h._dragdata,r.dragmode!==!1&&(E.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",T),document.removeEventListener("touchend",T),M?_(p):u&&(p.documentElement.style.cursor=u,u=null),h._dragging){if(h._dragging=!1,new Date().getTime()-h._mouseDownTime>v&&(b=Math.max(b-1,1)),h._dragged)r.doneFn&&r.doneFn();else if(r.clickFn&&r.clickFn(b,c),!g){var C;try{C=new MouseEvent("click",E)}catch{var L=i(E);(C=document.createEvent("MouseEvents")).initMouseEvent("click",E.bubbles,E.cancelable,E.view,E.detail,E.screenX,E.screenY,L[0],L[1],E.ctrlKey,E.altKey,E.shiftKey,E.metaKey,E.button,E.relatedTarget)}x.dispatchEvent(C)}h._dragging=!1,h._dragged=!1}else h._dragged=!1}},f.coverSlip=e},26041:function($,P,t){var A=t(11086),M=t(79990),l=t(24401).getGraphDiv,_=t(26675),m=$.exports={};m.wrapped=function(f,o,e){(f=l(f))._fullLayout&&M.clear(f._fullLayout._uid+_.HOVERID),m.raw(f,o,e)},m.raw=function(f,o){var e=f._fullLayout,i=f._hoverdata;o||(o={}),o.target&&!f._dragged&&A.triggerHandler(f,"plotly_beforehover",o)===!1||(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),f._hoverdata=void 0,o.target&&i&&f.emit("plotly_unhover",{event:o,points:i}))}},79952:function($,P){P.P={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},P.u={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},91424:function($,P,t){var A=t(39898),M=t(71828),l=M.numberFormat,_=t(92770),m=t(84267),f=t(73972),o=t(7901),e=t(21081),i=M.strTranslate,r=t(63893),n=t(77922),s=t(18783).LINE_SPACING,a=t(37822).DESELECTDIM,u=t(34098),p=t(39984),c=t(23469).appendArrayPointValue,x=$.exports={};function g(Ae,we,se){var oe=we.fillpattern,fe=oe&&x.getPatternAttr(oe.shape,0,"");if(fe){var Se=x.getPatternAttr(oe.bgcolor,0,null),Me=x.getPatternAttr(oe.fgcolor,0,null),be=oe.fgopacity,Ie=x.getPatternAttr(oe.size,0,8),Be=x.getPatternAttr(oe.solidity,0,.3),ce=we.uid;x.pattern(Ae,"point",se,ce,fe,Ie,Be,void 0,oe.fillmode,Se,Me,be)}else we.fillcolor&&Ae.call(o.fill,we.fillcolor)}x.font=function(Ae,we,se,oe){M.isPlainObject(we)&&(oe=we.color,se=we.size,we=we.family),we&&Ae.style("font-family",we),se+1&&Ae.style("font-size",se+"px"),oe&&Ae.call(o.fill,oe)},x.setPosition=function(Ae,we,se){Ae.attr("x",we).attr("y",se)},x.setSize=function(Ae,we,se){Ae.attr("width",we).attr("height",se)},x.setRect=function(Ae,we,se,oe,fe){Ae.call(x.setPosition,we,se).call(x.setSize,oe,fe)},x.translatePoint=function(Ae,we,se,oe){var fe=se.c2p(Ae.x),Se=oe.c2p(Ae.y);return!!(_(fe)&&_(Se)&&we.node())&&(we.node().nodeName==="text"?we.attr("x",fe).attr("y",Se):we.attr("transform",i(fe,Se)),!0)},x.translatePoints=function(Ae,we,se){Ae.each(function(oe){var fe=A.select(this);x.translatePoint(oe,fe,we,se)})},x.hideOutsideRangePoint=function(Ae,we,se,oe,fe,Se){we.attr("display",se.isPtWithinRange(Ae,fe)&&oe.isPtWithinRange(Ae,Se)?null:"none")},x.hideOutsideRangePoints=function(Ae,we){if(we._hasClipOnAxisFalse){var se=we.xaxis,oe=we.yaxis;Ae.each(function(fe){var Se=fe[0].trace,Me=Se.xcalendar,be=Se.ycalendar,Ie=f.traceIs(Se,"bar-like")?".bartext":".point,.textpoint";Ae.selectAll(Ie).each(function(Be){x.hideOutsideRangePoint(Be,A.select(this),se,oe,Me,be)})})}},x.crispRound=function(Ae,we,se){return we&&_(we)?Ae._context.staticPlot?we:we<1?1:Math.round(we):se||0},x.singleLineStyle=function(Ae,we,se,oe,fe){we.style("fill","none");var Se=(((Ae||[])[0]||{}).trace||{}).line||{},Me=se||Se.width||0,be=fe||Se.dash||"";o.stroke(we,oe||Se.color),x.dashLine(we,be,Me)},x.lineGroupStyle=function(Ae,we,se,oe){Ae.style("fill","none").each(function(fe){var Se=(((fe||[])[0]||{}).trace||{}).line||{},Me=we||Se.width||0,be=oe||Se.dash||"";A.select(this).call(o.stroke,se||Se.color).call(x.dashLine,be,Me)})},x.dashLine=function(Ae,we,se){se=+se||0,we=x.dashStyle(we,se),Ae.style({"stroke-dasharray":we,"stroke-width":se+"px"})},x.dashStyle=function(Ae,we){we=+we||1;var se=Math.max(we,3);return Ae==="solid"?Ae="":Ae==="dot"?Ae=se+"px,"+se+"px":Ae==="dash"?Ae=3*se+"px,"+3*se+"px":Ae==="longdash"?Ae=5*se+"px,"+5*se+"px":Ae==="dashdot"?Ae=3*se+"px,"+se+"px,"+se+"px,"+se+"px":Ae==="longdashdot"&&(Ae=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),Ae},x.singleFillStyle=function(Ae,we){var se=A.select(Ae.node());g(Ae,((se.data()[0]||[])[0]||{}).trace||{},we)},x.fillGroupStyle=function(Ae,we){Ae.style("stroke-width",0).each(function(se){var oe=A.select(this);se[0].trace&&g(oe,se[0].trace,we)})};var h=t(90998);x.symbolNames=[],x.symbolFuncs=[],x.symbolBackOffs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(h).forEach(function(Ae){var we=h[Ae],se=we.n;x.symbolList.push(se,String(se),Ae,se+100,String(se+100),Ae+"-open"),x.symbolNames[se]=Ae,x.symbolFuncs[se]=we.f,x.symbolBackOffs[se]=we.backoff||0,we.needLine&&(x.symbolNeedLines[se]=!0),we.noDot?x.symbolNoDot[se]=!0:x.symbolList.push(se+200,String(se+200),Ae+"-dot",se+300,String(se+300),Ae+"-open-dot"),we.noFill&&(x.symbolNoFill[se]=!0)});var b=x.symbolNames.length;function v(Ae,we,se,oe){var fe=Ae%100;return x.symbolFuncs[fe](we,se,oe)+(Ae>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}x.symbolNumber=function(Ae){if(_(Ae))Ae=+Ae;else if(typeof Ae=="string"){var we=0;Ae.indexOf("-open")>0&&(we=100,Ae=Ae.replace("-open","")),Ae.indexOf("-dot")>0&&(we+=200,Ae=Ae.replace("-dot","")),(Ae=x.symbolNames.indexOf(Ae))>=0&&(Ae+=we)}return Ae%100>=b||Ae>=400?0:Math.floor(Math.max(Ae,0))};var y={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},d=l("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:y},horizontalreversed:{node:"linearGradient",attrs:y,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};x.gradient=function(Ae,we,se,oe,fe,Se){for(var Me=fe.length,be=S[oe],Ie=new Array(Me),Be=0;Be<Me;Be++)be.reversed?Ie[Me-1-Be]=[d(100*(1-fe[Be][0])),fe[Be][1]]:Ie[Be]=[d(100*fe[Be][0]),fe[Be][1]];var ce=we._fullLayout,Te="g"+ce._uid+"-"+se,ye=ce._defs.select(".gradients").selectAll("#"+Te).data([oe+Ie.join(";")],M.identity);ye.exit().remove(),ye.enter().append(be.node).each(function(){var Pe=A.select(this);be.attrs&&Pe.attr(be.attrs),Pe.attr("id",Te);var Re=Pe.selectAll("stop").data(Ie);Re.exit().remove(),Re.enter().append("stop"),Re.each(function(ze){var He=m(ze[1]);A.select(this).attr({offset:ze[0]+"%","stop-color":o.tinyRGB(He),"stop-opacity":He.getAlpha()})})}),Ae.style(Se,Q(Te,we)).style(Se+"-opacity",null),Ae.classed("gradient_filled",!0)},x.pattern=function(Ae,we,se,oe,fe,Se,Me,be,Ie,Be,ce,Te){var ye=we==="legend";be&&(Ie==="overlay"?(Be=be,ce=o.contrast(Be)):(Be=void 0,ce=be));var Pe,Re,ze,He,We,Je,lt,et,yt,_t=se._fullLayout,xt="p"+_t._uid+"-"+oe,at={},ot=m(ce),At=o.tinyRGB(ot),Ct=Te*ot.getAlpha();switch(fe){case"/":Pe=Se*Math.sqrt(2),Re=Se*Math.sqrt(2),Je="path",at={d:ze="M-"+Pe/4+","+Re/4+"l"+Pe/2+",-"+Re/2+"M0,"+Re+"L"+Pe+",0M"+Pe/4*3+","+Re/4*5+"l"+Pe/2+",-"+Re/2,opacity:Ct,stroke:At,"stroke-width":(He=Me*Se)+"px"};break;case"\\":Pe=Se*Math.sqrt(2),Re=Se*Math.sqrt(2),Je="path",at={d:ze="M"+Pe/4*3+",-"+Re/4+"l"+Pe/2+","+Re/2+"M0,0L"+Pe+","+Re+"M-"+Pe/4+","+Re/4*3+"l"+Pe/2+","+Re/2,opacity:Ct,stroke:At,"stroke-width":(He=Me*Se)+"px"};break;case"x":Pe=Se*Math.sqrt(2),Re=Se*Math.sqrt(2),ze="M-"+Pe/4+","+Re/4+"l"+Pe/2+",-"+Re/2+"M0,"+Re+"L"+Pe+",0M"+Pe/4*3+","+Re/4*5+"l"+Pe/2+",-"+Re/2+"M"+Pe/4*3+",-"+Re/4+"l"+Pe/2+","+Re/2+"M0,0L"+Pe+","+Re+"M-"+Pe/4+","+Re/4*3+"l"+Pe/2+","+Re/2,He=Se-Se*Math.sqrt(1-Me),Je="path",at={d:ze,opacity:Ct,stroke:At,"stroke-width":He+"px"};break;case"|":Je="path",Je="path",at={d:ze="M"+(Pe=Se)/2+",0L"+Pe/2+","+(Re=Se),opacity:Ct,stroke:At,"stroke-width":(He=Me*Se)+"px"};break;case"-":Je="path",Je="path",at={d:ze="M0,"+(Re=Se)/2+"L"+(Pe=Se)+","+Re/2,opacity:Ct,stroke:At,"stroke-width":(He=Me*Se)+"px"};break;case"+":Je="path",ze="M"+(Pe=Se)/2+",0L"+Pe/2+","+(Re=Se)+"M0,"+Re/2+"L"+Pe+","+Re/2,He=Se-Se*Math.sqrt(1-Me),Je="path",at={d:ze,opacity:Ct,stroke:At,"stroke-width":He+"px"};break;case".":Pe=Se,Re=Se,Me<Math.PI/4?We=Math.sqrt(Me*Se*Se/Math.PI):(lt=Me,et=Math.PI/4,We=(yt=Se/2)+(Se/Math.sqrt(2)-yt)*(lt-et)/(1-et)),Je="circle",at={cx:Pe/2,cy:Re/2,r:We,opacity:Ct,fill:At}}var zt=[fe||"noSh",Be||"noBg",ce||"noFg",Se,Me].join(";"),St=_t._defs.select(".patterns").selectAll("#"+xt).data([zt],M.identity);St.exit().remove(),St.enter().append("pattern").each(function(){var qe=A.select(this);if(qe.attr({id:xt,width:Pe+"px",height:Re+"px",patternUnits:"userSpaceOnUse",patternTransform:ye?"scale(0.8)":""}),Be){var Xe=m(Be),Ve=o.tinyRGB(Xe),Ze=Xe.getAlpha(),st=qe.selectAll("rect").data([0]);st.exit().remove(),st.enter().append("rect").attr({width:Pe+"px",height:Re+"px",fill:Ve,"fill-opacity":Ze})}var nt=qe.selectAll(Je).data([0]);nt.exit().remove(),nt.enter().append(Je).attr(at)}),Ae.style("fill",Q(xt,se)).style("fill-opacity",null),Ae.classed("pattern_filled",!0)},x.initGradients=function(Ae){var we=Ae._fullLayout;M.ensureSingle(we._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),A.select(Ae).selectAll(".gradient_filled").classed("gradient_filled",!1)},x.initPatterns=function(Ae){var we=Ae._fullLayout;M.ensureSingle(we._defs,"g","patterns").selectAll("pattern").remove(),A.select(Ae).selectAll(".pattern_filled").classed("pattern_filled",!1)},x.getPatternAttr=function(Ae,we,se){return Ae&&M.isArrayOrTypedArray(Ae)?we<Ae.length?Ae[we]:se:Ae},x.pointStyle=function(Ae,we,se,oe){if(Ae.size()){var fe=x.makePointStyleFns(we);Ae.each(function(Se){x.singlePointStyle(Se,A.select(this),we,fe,se,oe)})}},x.singlePointStyle=function(Ae,we,se,oe,fe,Se){var Me=se.marker,be=Me.line;if(Se&&Se.i>=0&&Ae.i===void 0&&(Ae.i=Se.i),we.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(Ae):Ae.mo===void 0?Me.opacity:Ae.mo),oe.ms2mrc){var Ie;Ie=Ae.ms==="various"||Me.size==="various"?3:oe.ms2mrc(Ae.ms),Ae.mrc=Ie,oe.selectedSizeFn&&(Ie=Ae.mrc=oe.selectedSizeFn(Ae));var Be=x.symbolNumber(Ae.mx||Me.symbol)||0;Ae.om=Be%200>=100;var ce=Le(Ae,se),Te=Z(Ae,se);we.attr("d",v(Be,Ie,ce,Te))}var ye,Pe,Re,ze=!1;if(Ae.so)Re=be.outlierwidth,Pe=be.outliercolor,ye=Me.outliercolor;else{var He=(be||{}).width;Re=(Ae.mlw+1||He+1||(Ae.trace?(Ae.trace.marker.line||{}).width:0)+1)-1||0,Pe="mlc"in Ae?Ae.mlcc=oe.lineScale(Ae.mlc):M.isArrayOrTypedArray(be.color)?o.defaultLine:be.color,M.isArrayOrTypedArray(Me.color)&&(ye=o.defaultLine,ze=!0),ye="mc"in Ae?Ae.mcc=oe.markerScale(Ae.mc):Me.color||Me.colors||"rgba(0,0,0,0)",oe.selectedColorFn&&(ye=oe.selectedColorFn(Ae))}if(Ae.om)we.call(o.stroke,ye).style({"stroke-width":(Re||1)+"px",fill:"none"});else{we.style("stroke-width",(Ae.isBlank?0:Re)+"px");var We=Me.gradient,Je=Ae.mgt;Je?ze=!0:Je=We&&We.type,M.isArrayOrTypedArray(Je)&&(Je=Je[0],S[Je]||(Je=0));var lt=Me.pattern,et=lt&&x.getPatternAttr(lt.shape,Ae.i,"");if(Je&&Je!=="none"){var yt=Ae.mgc;yt?ze=!0:yt=We.color;var _t=se.uid;ze&&(_t+="-"+Ae.i),x.gradient(we,fe,_t,Je,[[0,yt],[1,ye]],"fill")}else if(et){var xt=!1,at=lt.fgcolor;!at&&Se&&Se.color&&(at=Se.color,xt=!0);var ot=x.getPatternAttr(at,Ae.i,Se&&Se.color||null),At=x.getPatternAttr(lt.bgcolor,Ae.i,null),Ct=lt.fgopacity,zt=x.getPatternAttr(lt.size,Ae.i,8),St=x.getPatternAttr(lt.solidity,Ae.i,.3);xt=xt||Ae.mcc||M.isArrayOrTypedArray(lt.shape)||M.isArrayOrTypedArray(lt.bgcolor)||M.isArrayOrTypedArray(lt.fgcolor)||M.isArrayOrTypedArray(lt.size)||M.isArrayOrTypedArray(lt.solidity);var qe=se.uid;xt&&(qe+="-"+Ae.i),x.pattern(we,"point",fe,qe,et,zt,St,Ae.mcc,lt.fillmode,At,ot,Ct)}else M.isArrayOrTypedArray(ye)?o.fill(we,ye[Ae.i]):o.fill(we,ye);Re&&o.stroke(we,Pe)}},x.makePointStyleFns=function(Ae){var we={},se=Ae.marker;return we.markerScale=x.tryColorscale(se,""),we.lineScale=x.tryColorscale(se,"line"),f.traceIs(Ae,"symbols")&&(we.ms2mrc=u.isBubble(Ae)?p(Ae):function(){return(se.size||6)/2}),Ae.selectedpoints&&M.extendFlat(we,x.makeSelectedPointStyleFns(Ae)),we},x.makeSelectedPointStyleFns=function(Ae){var we={},se=Ae.selected||{},oe=Ae.unselected||{},fe=Ae.marker||{},Se=se.marker||{},Me=oe.marker||{},be=fe.opacity,Ie=Se.opacity,Be=Me.opacity,ce=Ie!==void 0,Te=Be!==void 0;(M.isArrayOrTypedArray(be)||ce||Te)&&(we.selectedOpacityFn=function(et){var yt=et.mo===void 0?fe.opacity:et.mo;return et.selected?ce?Ie:yt:Te?Be:a*yt});var ye=fe.color,Pe=Se.color,Re=Me.color;(Pe||Re)&&(we.selectedColorFn=function(et){var yt=et.mcc||ye;return et.selected?Pe||yt:Re||yt});var ze=fe.size,He=Se.size,We=Me.size,Je=He!==void 0,lt=We!==void 0;return f.traceIs(Ae,"symbols")&&(Je||lt)&&(we.selectedSizeFn=function(et){var yt=et.mrc||ze/2;return et.selected?Je?He/2:yt:lt?We/2:yt}),we},x.makeSelectedTextStyleFns=function(Ae){var we={},se=Ae.selected||{},oe=Ae.unselected||{},fe=Ae.textfont||{},Se=se.textfont||{},Me=oe.textfont||{},be=fe.color,Ie=Se.color,Be=Me.color;return we.selectedTextColorFn=function(ce){var Te=ce.tc||be;return ce.selected?Ie||Te:Be||(Ie?Te:o.addOpacity(Te,a))},we},x.selectedPointStyle=function(Ae,we){if(Ae.size()&&we.selectedpoints){var se=x.makeSelectedPointStyleFns(we),oe=we.marker||{},fe=[];se.selectedOpacityFn&&fe.push(function(Se,Me){Se.style("opacity",se.selectedOpacityFn(Me))}),se.selectedColorFn&&fe.push(function(Se,Me){o.fill(Se,se.selectedColorFn(Me))}),se.selectedSizeFn&&fe.push(function(Se,Me){var be=Me.mx||oe.symbol||0,Ie=se.selectedSizeFn(Me);Se.attr("d",v(x.symbolNumber(be),Ie,Le(Me,we),Z(Me,we))),Me.mrc2=Ie}),fe.length&&Ae.each(function(Se){for(var Me=A.select(this),be=0;be<fe.length;be++)fe[be](Me,Se)})}},x.tryColorscale=function(Ae,we){var se=we?M.nestedProperty(Ae,we).get():Ae;if(se){var oe=se.color;if((se.colorscale||se._colorAx)&&M.isArrayOrTypedArray(oe))return e.makeColorScaleFuncFromTrace(se)}return M.identity};var T,E,C={start:1,end:-1,middle:0,bottom:1,top:-1};function L(Ae,we,se,oe,fe){var Se=A.select(Ae.node().parentNode),Me=we.indexOf("top")!==-1?"top":we.indexOf("bottom")!==-1?"bottom":"middle",be=we.indexOf("left")!==-1?"end":we.indexOf("right")!==-1?"start":"middle",Ie=oe?oe/.8+1:0,Be=(r.lineCount(Ae)-1)*s+1,ce=C[be]*Ie,Te=.75*se+C[Me]*Ie+(C[Me]-1)*Be*se/2;Ae.attr("text-anchor",be),fe||Se.attr("transform",i(ce,Te))}function O(Ae,we){var se=Ae.ts||we.textfont.size;return _(se)&&se>0?se:0}function z(Ae,we,se){return se&&(Ae=V(Ae)),we?I(Ae[1]):G(Ae[0])}function G(Ae){var we=A.round(Ae,2);return T=we,we}function I(Ae){var we=A.round(Ae,2);return E=we,we}function H(Ae,we,se,oe){var fe=Ae[0]-we[0],Se=Ae[1]-we[1],Me=se[0]-we[0],be=se[1]-we[1],Ie=Math.pow(fe*fe+Se*Se,.25),Be=Math.pow(Me*Me+be*be,.25),ce=(Be*Be*fe-Ie*Ie*Me)*oe,Te=(Be*Be*Se-Ie*Ie*be)*oe,ye=3*Be*(Ie+Be),Pe=3*Ie*(Ie+Be);return[[G(we[0]+(ye&&ce/ye)),I(we[1]+(ye&&Te/ye))],[G(we[0]-(Pe&&ce/Pe)),I(we[1]-(Pe&&Te/Pe))]]}x.textPointStyle=function(Ae,we,se){if(Ae.size()){var oe;if(we.selectedpoints){var fe=x.makeSelectedTextStyleFns(we);oe=fe.selectedTextColorFn}var Se=we.texttemplate,Me=se._fullLayout;Ae.each(function(be){var Ie=A.select(this),Be=Se?M.extractOption(be,we,"txt","texttemplate"):M.extractOption(be,we,"tx","text");if(Be||Be===0){if(Se){var ce=we._module.formatLabels,Te=ce?ce(be,we,Me):{},ye={};c(ye,we,be.i);var Pe=we._meta||{};Be=M.texttemplateString(Be,Te,Me._d3locale,ye,be,Pe)}var Re=be.tp||we.textposition,ze=O(be,we),He=oe?oe(be):be.tc||we.textfont.color;Ie.call(x.font,be.tf||we.textfont.family,ze,He).text(Be).call(r.convertToTspans,se).call(L,Re,ze,be.mrc)}else Ie.remove()})}},x.selectedTextStyle=function(Ae,we){if(Ae.size()&&we.selectedpoints){var se=x.makeSelectedTextStyleFns(we);Ae.each(function(oe){var fe=A.select(this),Se=se.selectedTextColorFn(oe),Me=oe.tp||we.textposition,be=O(oe,we);o.fill(fe,Se);var Ie=f.traceIs(we,"bar-like");L(fe,Me,be,oe.mrc2||oe.mrc,Ie)})}},x.smoothopen=function(Ae,we){if(Ae.length<3)return"M"+Ae.join("L");var se,oe="M"+Ae[0],fe=[];for(se=1;se<Ae.length-1;se++)fe.push(H(Ae[se-1],Ae[se],Ae[se+1],we));for(oe+="Q"+fe[0][0]+" "+Ae[1],se=2;se<Ae.length-1;se++)oe+="C"+fe[se-2][1]+" "+fe[se-1][0]+" "+Ae[se];return oe+"Q"+fe[Ae.length-3][1]+" "+Ae[Ae.length-1]},x.smoothclosed=function(Ae,we){if(Ae.length<3)return"M"+Ae.join("L")+"Z";var se,oe="M"+Ae[0],fe=Ae.length-1,Se=[H(Ae[fe],Ae[0],Ae[1],we)];for(se=1;se<fe;se++)Se.push(H(Ae[se-1],Ae[se],Ae[se+1],we));for(Se.push(H(Ae[fe-1],Ae[fe],Ae[0],we)),se=1;se<=fe;se++)oe+="C"+Se[se-1][1]+" "+Se[se][0]+" "+Ae[se];return oe+"C"+Se[fe][1]+" "+Se[0][0]+" "+Ae[0]+"Z"};var N={hv:function(Ae,we,se){return"H"+G(we[0])+"V"+z(we,1,se)},vh:function(Ae,we,se){return"V"+I(we[1])+"H"+z(we,0,se)},hvh:function(Ae,we,se){return"H"+G((Ae[0]+we[0])/2)+"V"+I(we[1])+"H"+z(we,0,se)},vhv:function(Ae,we,se){return"V"+I((Ae[1]+we[1])/2)+"H"+G(we[0])+"V"+z(we,1,se)}},F=function(Ae,we,se){return"L"+z(we,0,se)+","+z(we,1,se)};function V(Ae,we){var se=Ae.backoff,oe=Ae.trace,fe=Ae.d,Se=Ae.i;if(se&&oe&&oe.marker&&oe.marker.angle%360==0&&oe.line&&oe.line.shape!=="spline"){var Me=M.isArrayOrTypedArray(se),be=Ae,Ie=we?we[0]:T||0,Be=we?we[1]:E||0,ce=be[0],Te=be[1],ye=ce-Ie,Pe=Te-Be,Re=Math.atan2(Pe,ye),ze=Me?se[Se]:se;if(ze==="auto"){var He=be.i;oe.type==="scatter"&&He--;var We=be.marker,Je=We.symbol;M.isArrayOrTypedArray(Je)&&(Je=Je[He]);var lt=We.size;M.isArrayOrTypedArray(lt)&&(lt=lt[He]),ze=We?x.symbolBackOffs[x.symbolNumber(Je)]*lt:0,ze+=x.getMarkerStandoff(fe[He],oe)||0}var et=ce-ze*Math.cos(Re),yt=Te-ze*Math.sin(Re);(et<=ce&&et>=Ie||et>=ce&&et<=Ie)&&(yt<=Te&&yt>=Be||yt>=Te&&yt<=Be)&&(Ae=[et,yt])}return Ae}x.steps=function(Ae){var we=N[Ae]||F;return function(se){for(var oe="M"+G(se[0][0])+","+I(se[0][1]),fe=se.length,Se=1;Se<fe;Se++)oe+=we(se[Se-1],se[Se],Se===fe-1);return oe}},x.applyBackoff=V,x.makeTester=function(){var Ae=M.ensureSingleById(A.select("body"),"svg","js-plotly-tester",function(se){se.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),we=M.ensureSingle(Ae,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=Ae,x.testref=we},x.savedBBoxes={};var W=0;function te(Ae){var we=Ae.getAttribute("data-unformatted");if(we!==null)return we+Ae.getAttribute("data-math")+Ae.getAttribute("text-anchor")+Ae.getAttribute("style")}function Q(Ae,we){if(!Ae)return null;var se=we._context,oe=se._exportedPlot?"":se._baseUrl||"";return oe?"url('"+oe+"#"+Ae+"')":"url(#"+Ae+")"}x.bBox=function(Ae,we,se){var oe,fe,Se;if(se||(se=te(Ae)),se){if(oe=x.savedBBoxes[se])return M.extendFlat({},oe)}else if(Ae.childNodes.length===1){var Me=Ae.childNodes[0];if(se=te(Me)){var be=+Me.getAttribute("x")||0,Ie=+Me.getAttribute("y")||0,Be=Me.getAttribute("transform");if(!Be){var ce=x.bBox(Me,!1,se);return be&&(ce.left+=be,ce.right+=be),Ie&&(ce.top+=Ie,ce.bottom+=Ie),ce}if(se+="~"+be+"~"+Ie+"~"+Be,oe=x.savedBBoxes[se])return M.extendFlat({},oe)}}we?fe=Ae:(Se=x.tester.node(),fe=Ae.cloneNode(!0),Se.appendChild(fe)),A.select(fe).attr("transform",null).call(r.positionText,0,0);var Te=fe.getBoundingClientRect(),ye=x.testref.node().getBoundingClientRect();we||Se.removeChild(fe);var Pe={height:Te.height,width:Te.width,left:Te.left-ye.left,top:Te.top-ye.top,right:Te.right-ye.left,bottom:Te.bottom-ye.top};return W>=1e4&&(x.savedBBoxes={},W=0),se&&(x.savedBBoxes[se]=Pe),W++,M.extendFlat({},Pe)},x.setClipUrl=function(Ae,we,se){Ae.attr("clip-path",Q(we,se))},x.getTranslate=function(Ae){var we=(Ae[Ae.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(se,oe,fe){return[oe,fe].join(" ")}).split(" ");return{x:+we[0]||0,y:+we[1]||0}},x.setTranslate=function(Ae,we,se){var oe=Ae.attr?"attr":"getAttribute",fe=Ae.attr?"attr":"setAttribute",Se=Ae[oe]("transform")||"";return we=we||0,se=se||0,Se=Se.replace(/(\btranslate\(.*?\);?)/,"").trim(),Se=(Se+=i(we,se)).trim(),Ae[fe]("transform",Se),Se},x.getScale=function(Ae){var we=(Ae[Ae.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(se,oe,fe){return[oe,fe].join(" ")}).split(" ");return{x:+we[0]||1,y:+we[1]||1}},x.setScale=function(Ae,we,se){var oe=Ae.attr?"attr":"getAttribute",fe=Ae.attr?"attr":"setAttribute",Se=Ae[oe]("transform")||"";return we=we||1,se=se||1,Se=Se.replace(/(\bscale\(.*?\);?)/,"").trim(),Se=(Se+="scale("+we+","+se+")").trim(),Ae[fe]("transform",Se),Se};var X=/\s*sc.*/;x.setPointGroupScale=function(Ae,we,se){if(we=we||1,se=se||1,Ae){var oe=we===1&&se===1?"":"scale("+we+","+se+")";Ae.each(function(){var fe=(this.getAttribute("transform")||"").replace(X,"");fe=(fe+=oe).trim(),this.setAttribute("transform",fe)})}};var q=/translate\([^)]*\)\s*$/;function Z(Ae,we){var se;return Ae&&(se=Ae.mf),se===void 0&&(se=we.marker&&we.marker.standoff||0),we._geo||we._xA?se:-se}x.setTextPointsScale=function(Ae,we,se){Ae&&Ae.each(function(){var oe,fe=A.select(this),Se=fe.select("text");if(Se.node()){var Me=parseFloat(Se.attr("x")||0),be=parseFloat(Se.attr("y")||0),Ie=(fe.attr("transform")||"").match(q);oe=we===1&&se===1?[]:[i(Me,be),"scale("+we+","+se+")",i(-Me,-be)],Ie&&oe.push(Ie),fe.attr("transform",oe.join(""))}})},x.getMarkerStandoff=Z;var J,ne,re,ae,ue,he,de=Math.atan2,xe=Math.cos,me=Math.sin;function ve(Ae,we){var se=we[0],oe=we[1];return[se*xe(Ae)-oe*me(Ae),se*me(Ae)+oe*xe(Ae)]}function Le(Ae,we){var se,oe,fe=Ae.ma;fe===void 0&&(fe=we.marker.angle||0);var Se=we.marker.angleref;if(Se==="previous"||Se==="north"){if(we._geo){var Me=we._geo.project(Ae.lonlat);se=Me[0],oe=Me[1]}else{var be=we._xA,Ie=we._yA;if(!be||!Ie)return 90;se=be.c2p(Ae.x),oe=Ie.c2p(Ae.y)}if(we._geo){var Be,ce=Ae.lonlat[0],Te=Ae.lonlat[1],ye=we._geo.project([ce,Te+1e-5]),Pe=we._geo.project([ce+1e-5,Te]),Re=de(Pe[1]-oe,Pe[0]-se),ze=de(ye[1]-oe,ye[0]-se);if(Se==="north")Be=fe/180*Math.PI;else if(Se==="previous"){var He=ce/180*Math.PI,We=Te/180*Math.PI,Je=J/180*Math.PI,lt=ne/180*Math.PI,et=Je-He,yt=xe(lt)*me(et),_t=me(lt)*xe(We)-xe(lt)*me(We)*xe(et);Be=-de(yt,_t)-Math.PI,J=ce,ne=Te}var xt=ve(Re,[xe(Be),0]),at=ve(ze,[me(Be),0]);fe=de(xt[1]+at[1],xt[0]+at[0])/Math.PI*180,Se!=="previous"||he===we.uid&&Ae.i===ue+1||(fe=null)}if(Se==="previous"&&!we._geo)if(he===we.uid&&Ae.i===ue+1&&_(se)&&_(oe)){var ot=se-re,At=oe-ae,Ct=we.line&&we.line.shape||"",zt=Ct.slice(Ct.length-1);zt==="h"&&(At=0),zt==="v"&&(ot=0),fe+=de(At,ot)/Math.PI*180+90}else fe=null}return re=se,ae=oe,ue=Ae.i,he=we.uid,fe}x.getMarkerAngle=Le},90998:function($,P,t){var A,M,l,_,m=t(95616),f=t(39898).round,o="M0,0Z",e=Math.sqrt(2),i=Math.sqrt(3),r=Math.PI,n=Math.cos,s=Math.sin;function a(p){return p===null}function u(p,c,x){if(!(p&&p%360!=0||c))return x;if(l===p&&_===c&&A===x)return M;function g(z,G){var I=n(z),H=s(z),N=G[0],F=G[1]+(c||0);return[N*I-F*H,N*H+F*I]}l=p,_=c,A=x;for(var h=p/180*r,b=0,v=0,y=m(x),w="",d=0;d<y.length;d++){var S=y[d],T=S[0],E=b,C=v;if(T==="M"||T==="L")b=+S[1],v=+S[2];else if(T==="m"||T==="l")b+=+S[1],v+=+S[2];else if(T==="H")b=+S[1];else if(T==="h")b+=+S[1];else if(T==="V")v=+S[1];else if(T==="v")v+=+S[1];else if(T==="A"){b=+S[1],v=+S[2];var L=g(h,[+S[6],+S[7]]);S[6]=L[0],S[7]=L[1],S[3]=+S[3]+p}T!=="H"&&T!=="V"||(T="L"),T!=="h"&&T!=="v"||(T="l"),T!=="m"&&T!=="l"||(b-=E,v-=C);var O=g(h,[b,v]);T!=="H"&&T!=="V"||(T="L"),T!=="M"&&T!=="L"&&T!=="m"&&T!=="l"||(S[1]=O[0],S[2]=O[1]),S[0]=T,w+=S[0]+S.slice(1).join(",")}return M=w,w}$.exports={circle:{n:0,f:function(p,c,x){if(a(c))return o;var g=f(p,2),h="M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z";return x?u(c,x,h):h}},square:{n:1,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")}},diamond:{n:2,f:function(p,c,x){if(a(c))return o;var g=f(1.3*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"Z")}},cross:{n:3,f:function(p,c,x){if(a(c))return o;var g=f(.4*p,2),h=f(1.2*p,2);return u(c,x,"M"+h+","+g+"H"+g+"V"+h+"H-"+g+"V"+g+"H-"+h+"V-"+g+"H-"+g+"V-"+h+"H"+g+"V-"+g+"H"+h+"Z")}},x:{n:4,f:function(p,c,x){if(a(c))return o;var g=f(.8*p/e,2),h="l"+g+","+g,b="l"+g+",-"+g,v="l-"+g+",-"+g,y="l-"+g+","+g;return u(c,x,"M0,"+g+h+b+v+b+v+y+v+y+h+y+h+"Z")}},"triangle-up":{n:5,f:function(p,c,x){if(a(c))return o;var g=f(2*p/i,2);return u(c,x,"M-"+g+","+f(p/2,2)+"H"+g+"L0,-"+f(p,2)+"Z")}},"triangle-down":{n:6,f:function(p,c,x){if(a(c))return o;var g=f(2*p/i,2);return u(c,x,"M-"+g+",-"+f(p/2,2)+"H"+g+"L0,"+f(p,2)+"Z")}},"triangle-left":{n:7,f:function(p,c,x){if(a(c))return o;var g=f(2*p/i,2);return u(c,x,"M"+f(p/2,2)+",-"+g+"V"+g+"L-"+f(p,2)+",0Z")}},"triangle-right":{n:8,f:function(p,c,x){if(a(c))return o;var g=f(2*p/i,2);return u(c,x,"M-"+f(p/2,2)+",-"+g+"V"+g+"L"+f(p,2)+",0Z")}},"triangle-ne":{n:9,f:function(p,c,x){if(a(c))return o;var g=f(.6*p,2),h=f(1.2*p,2);return u(c,x,"M-"+h+",-"+g+"H"+g+"V"+h+"Z")}},"triangle-se":{n:10,f:function(p,c,x){if(a(c))return o;var g=f(.6*p,2),h=f(1.2*p,2);return u(c,x,"M"+g+",-"+h+"V"+g+"H-"+h+"Z")}},"triangle-sw":{n:11,f:function(p,c,x){if(a(c))return o;var g=f(.6*p,2),h=f(1.2*p,2);return u(c,x,"M"+h+","+g+"H-"+g+"V-"+h+"Z")}},"triangle-nw":{n:12,f:function(p,c,x){if(a(c))return o;var g=f(.6*p,2),h=f(1.2*p,2);return u(c,x,"M-"+g+","+h+"V-"+g+"H"+h+"Z")}},pentagon:{n:13,f:function(p,c,x){if(a(c))return o;var g=f(.951*p,2),h=f(.588*p,2),b=f(-p,2),v=f(-.309*p,2);return u(c,x,"M"+g+","+v+"L"+h+","+f(.809*p,2)+"H-"+h+"L-"+g+","+v+"L0,"+b+"Z")}},hexagon:{n:14,f:function(p,c,x){if(a(c))return o;var g=f(p,2),h=f(p/2,2),b=f(p*i/2,2);return u(c,x,"M"+b+",-"+h+"V"+h+"L0,"+g+"L-"+b+","+h+"V-"+h+"L0,-"+g+"Z")}},hexagon2:{n:15,f:function(p,c,x){if(a(c))return o;var g=f(p,2),h=f(p/2,2),b=f(p*i/2,2);return u(c,x,"M-"+h+","+b+"H"+h+"L"+g+",0L"+h+",-"+b+"H-"+h+"L-"+g+",0Z")}},octagon:{n:16,f:function(p,c,x){if(a(c))return o;var g=f(.924*p,2),h=f(.383*p,2);return u(c,x,"M-"+h+",-"+g+"H"+h+"L"+g+",-"+h+"V"+h+"L"+h+","+g+"H-"+h+"L-"+g+","+h+"V-"+h+"Z")}},star:{n:17,f:function(p,c,x){if(a(c))return o;var g=1.4*p,h=f(.225*g,2),b=f(.951*g,2),v=f(.363*g,2),y=f(.588*g,2),w=f(-g,2),d=f(-.309*g,2),S=f(.118*g,2),T=f(.809*g,2);return u(c,x,"M"+h+","+d+"H"+b+"L"+v+","+S+"L"+y+","+T+"L0,"+f(.382*g,2)+"L-"+y+","+T+"L-"+v+","+S+"L-"+b+","+d+"H-"+h+"L0,"+w+"Z")}},hexagram:{n:18,f:function(p,c,x){if(a(c))return o;var g=f(.66*p,2),h=f(.38*p,2),b=f(.76*p,2);return u(c,x,"M-"+b+",0l-"+h+",-"+g+"h"+b+"l"+h+",-"+g+"l"+h+","+g+"h"+b+"l-"+h+","+g+"l"+h+","+g+"h-"+b+"l-"+h+","+g+"l-"+h+",-"+g+"h-"+b+"Z")}},"star-triangle-up":{n:19,f:function(p,c,x){if(a(c))return o;var g=f(p*i*.8,2),h=f(.8*p,2),b=f(1.6*p,2),v=f(4*p,2),y="A "+v+","+v+" 0 0 1 ";return u(c,x,"M-"+g+","+h+y+g+","+h+y+"0,-"+b+y+"-"+g+","+h+"Z")}},"star-triangle-down":{n:20,f:function(p,c,x){if(a(c))return o;var g=f(p*i*.8,2),h=f(.8*p,2),b=f(1.6*p,2),v=f(4*p,2),y="A "+v+","+v+" 0 0 1 ";return u(c,x,"M"+g+",-"+h+y+"-"+g+",-"+h+y+"0,"+b+y+g+",-"+h+"Z")}},"star-square":{n:21,f:function(p,c,x){if(a(c))return o;var g=f(1.1*p,2),h=f(2*p,2),b="A "+h+","+h+" 0 0 1 ";return u(c,x,"M-"+g+",-"+g+b+"-"+g+","+g+b+g+","+g+b+g+",-"+g+b+"-"+g+",-"+g+"Z")}},"star-diamond":{n:22,f:function(p,c,x){if(a(c))return o;var g=f(1.4*p,2),h=f(1.9*p,2),b="A "+h+","+h+" 0 0 1 ";return u(c,x,"M-"+g+",0"+b+"0,"+g+b+g+",0"+b+"0,-"+g+b+"-"+g+",0Z")}},"diamond-tall":{n:23,f:function(p,c,x){if(a(c))return o;var g=f(.7*p,2),h=f(1.4*p,2);return u(c,x,"M0,"+h+"L"+g+",0L0,-"+h+"L-"+g+",0Z")}},"diamond-wide":{n:24,f:function(p,c,x){if(a(c))return o;var g=f(1.4*p,2),h=f(.7*p,2);return u(c,x,"M0,"+h+"L"+g+",0L0,-"+h+"L-"+g+",0Z")}},hourglass:{n:25,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+","+g+"H-"+g+"L"+g+",-"+g+"H-"+g+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+","+g+"V-"+g+"L-"+g+","+g+"V-"+g+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,x){if(a(c))return o;var g=f(p,2),h=f(p/e,2);return u(c,x,"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h+"M"+g+",0A"+g+","+g+" 0 1,1 0,-"+g+"A"+g+","+g+" 0 0,1 "+g+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g+"M"+g+","+g+"H-"+g+"V-"+g+"H"+g+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,x){if(a(c))return o;var g=f(1.3*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM0,-"+g+"V"+g+"M-"+g+",0H"+g)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,x){if(a(c))return o;var g=f(1.3*p,2),h=f(.65*p,2);return u(c,x,"M"+g+",0L0,"+g+"L-"+g+",0L0,-"+g+"ZM-"+h+",-"+h+"L"+h+","+h+"M-"+h+","+h+"L"+h+",-"+h)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,x){if(a(c))return o;var g=f(1.4*p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g+"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,x){if(a(c))return o;var g=f(1.2*p,2),h=f(.85*p,2);return u(c,x,"M0,"+g+"V-"+g+"M"+g+",0H-"+g+"M"+h+","+h+"L-"+h+",-"+h+"M"+h+",-"+h+"L-"+h+","+h)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,x){if(a(c))return o;var g=f(p/2,2),h=f(p,2);return u(c,x,"M"+g+","+h+"V-"+h+"M"+(g-h)+",-"+h+"V"+h+"M"+h+","+g+"H-"+h+"M-"+h+","+(g-h)+"H"+h)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,x){if(a(c))return o;var g=f(1.2*p,2),h=f(1.6*p,2),b=f(.8*p,2);return u(c,x,"M-"+g+","+b+"L0,0M"+g+","+b+"L0,0M0,-"+h+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,x){if(a(c))return o;var g=f(1.2*p,2),h=f(1.6*p,2),b=f(.8*p,2);return u(c,x,"M-"+g+",-"+b+"L0,0M"+g+",-"+b+"L0,0M0,"+h+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,x){if(a(c))return o;var g=f(1.2*p,2),h=f(1.6*p,2),b=f(.8*p,2);return u(c,x,"M"+b+","+g+"L0,0M"+b+",-"+g+"L0,0M-"+h+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,x){if(a(c))return o;var g=f(1.2*p,2),h=f(1.6*p,2),b=f(.8*p,2);return u(c,x,"M-"+b+","+g+"L0,0M-"+b+",-"+g+"L0,0M"+h+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,x){if(a(c))return o;var g=f(1.4*p,2);return u(c,x,"M"+g+",0H-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,x){if(a(c))return o;var g=f(1.4*p,2);return u(c,x,"M0,"+g+"V-"+g)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+",-"+g+"L-"+g+","+g)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M"+g+","+g+"L-"+g+",-"+g)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M0,0L-"+g+","+f(2*p,2)+"H"+g+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M0,0L-"+g+",-"+f(2*p,2)+"H"+g+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,x){if(a(c))return o;var g=f(2*p,2),h=f(p,2);return u(c,x,"M0,0L"+g+",-"+h+"V"+h+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,x){if(a(c))return o;var g=f(2*p,2),h=f(p,2);return u(c,x,"M0,0L-"+g+",-"+h+"V"+h+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+","+f(2*p,2)+"H"+g+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,x){if(a(c))return o;var g=f(p,2);return u(c,x,"M-"+g+",0H"+g+"M0,0L-"+g+",-"+f(2*p,2)+"H"+g+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,x){if(a(c))return o;var g=f(2*p,2),h=f(p,2);return u(c,x,"M0,-"+h+"V"+h+"M0,0L"+g+",-"+h+"V"+h+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,x){if(a(c))return o;var g=f(2*p,2),h=f(p,2);return u(c,x,"M0,-"+h+"V"+h+"M0,0L-"+g+",-"+h+"V"+h+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,x){if(a(c))return o;var g=r/2.5,h=2*p*n(g),b=2*p*s(g);return u(c,x,"M0,0L"+-h+","+b+"L"+h+","+b+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,x){if(a(c))return o;var g=r/4,h=2*p*n(g),b=2*p*s(g);return u(c,x,"M0,0L"+-h+","+b+"A "+2*p+","+2*p+" 0 0 1 "+h+","+b+"Z")},backoff:.4,noDot:!0}}},25673:function($){$.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},84532:function($,P,t){var A=t(92770),M=t(73972),l=t(89298),_=t(71828),m=t(45827);function f(o,e,i,r){var n=e["error_"+r]||{},s=[];if(n.visible&&["linear","log"].indexOf(i.type)!==-1){for(var a=m(n),u=0;u<o.length;u++){var p=o[u],c=p.i;if(c===void 0)c=u;else if(c===null)continue;var x=p[r];if(A(i.c2l(x))){var g=a(x,c);if(A(g[0])&&A(g[1])){var h=p[r+"s"]=x-g[0],b=p[r+"h"]=x+g[1];s.push(h,b)}}}var v=i._id,y=e._extremes[v],w=l.findExtremes(i,s,_.extendFlat({tozero:y.opts.tozero},{padded:!0}));y.min=y.min.concat(w.min),y.max=y.max.concat(w.max)}}$.exports=function(o){for(var e=o.calcdata,i=0;i<e.length;i++){var r=e[i],n=r[0].trace;if(n.visible===!0&&M.traceIs(n,"errorBarsOK")){var s=l.getFromId(o,n.xaxis),a=l.getFromId(o,n.yaxis);f(r,n,s,"x"),f(r,n,a,"y")}}}},45827:function($){function P(t,A){return t==="percent"?function(M){return Math.abs(M*A/100)}:t==="constant"?function(){return Math.abs(A)}:t==="sqrt"?function(M){return Math.sqrt(Math.abs(M))}:void 0}$.exports=function(t){var A=t.type,M=t.symmetric;if(A==="data"){var l=t.array||[];if(M)return function(o,e){var i=+l[e];return[i,i]};var _=t.arrayminus||[];return function(o,e){var i=+l[e],r=+_[e];return isNaN(i)&&isNaN(r)?[NaN,NaN]:[r||0,i||0]}}var m=P(A,t.value),f=P(A,t.valueminus);return M||t.valueminus===void 0?function(o){var e=m(o);return[e,e]}:function(o){return[f(o),m(o)]}}},97587:function($,P,t){var A=t(92770),M=t(73972),l=t(71828),_=t(44467),m=t(25673);$.exports=function(f,o,e,i){var r="error_"+i.axis,n=_.newContainer(o,r),s=f[r]||{};function a(x,g){return l.coerce(s,n,m,x,g)}if(a("visible",s.array!==void 0||s.value!==void 0||s.type==="sqrt")!==!1){var u=a("type","array"in s?"data":"percent"),p=!0;u!=="sqrt"&&(p=a("symmetric",!((u==="data"?"arrayminus":"valueminus")in s))),u==="data"?(a("array"),a("traceref"),p||(a("arrayminus"),a("tracerefminus"))):u!=="percent"&&u!=="constant"||(a("value"),p||a("valueminus"));var c="copy_"+i.inherit+"style";i.inherit&&(o["error_"+i.inherit]||{}).visible&&a(c,!(s.color||A(s.thickness)||A(s.width))),i.inherit&&n[c]||(a("color",e),a("thickness"),a("width",M.traceIs(o,"gl3d")?0:4))}}},37369:function($,P,t){var A=t(71828),M=t(30962).overrideAll,l=t(25673),_={error_x:A.extendFlat({},l),error_y:A.extendFlat({},l)};delete _.error_x.copy_zstyle,delete _.error_y.copy_zstyle,delete _.error_y.copy_ystyle;var m={error_x:A.extendFlat({},l),error_y:A.extendFlat({},l),error_z:A.extendFlat({},l)};delete m.error_x.copy_ystyle,delete m.error_y.copy_ystyle,delete m.error_z.copy_ystyle,delete m.error_z.copy_zstyle,$.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_,bar:_,histogram:_,scatter3d:M(m,"calc","nested"),scattergl:M(_,"calc","nested")}},supplyDefaults:t(97587),calc:t(84532),makeComputeError:t(45827),plot:t(19398),style:t(62662),hoverInfo:function(f,o,e){(o.error_y||{}).visible&&(e.yerr=f.yh-f.y,o.error_y.symmetric||(e.yerrneg=f.y-f.ys)),(o.error_x||{}).visible&&(e.xerr=f.xh-f.x,o.error_x.symmetric||(e.xerrneg=f.x-f.xs))}}},19398:function($,P,t){var A=t(39898),M=t(92770),l=t(91424),_=t(34098);$.exports=function(m,f,o,e){var i=o.xaxis,r=o.yaxis,n=e&&e.duration>0,s=m._context.staticPlot;f.each(function(a){var u,p=a[0].trace,c=p.error_x||{},x=p.error_y||{};p.ids&&(u=function(v){return v.id});var g=_.hasMarkers(p)&&p.marker.maxdisplayed>0;x.visible||c.visible||(a=[]);var h=A.select(this).selectAll("g.errorbar").data(a,u);if(h.exit().remove(),a.length){c.visible||h.selectAll("path.xerror").remove(),x.visible||h.selectAll("path.yerror").remove(),h.style("opacity",1);var b=h.enter().append("g").classed("errorbar",!0);n&&b.style("opacity",0).transition().duration(e.duration).style("opacity",1),l.setClipUrl(h,o.layerClipId,m),h.each(function(v){var y=A.select(this),w=function(L,O,z){var G={x:O.c2p(L.x),y:z.c2p(L.y)};return L.yh!==void 0&&(G.yh=z.c2p(L.yh),G.ys=z.c2p(L.ys),M(G.ys)||(G.noYS=!0,G.ys=z.c2p(L.ys,!0))),L.xh!==void 0&&(G.xh=O.c2p(L.xh),G.xs=O.c2p(L.xs),M(G.xs)||(G.noXS=!0,G.xs=O.c2p(L.xs,!0))),G}(v,i,r);if(!g||v.vis){var d,S=y.select("path.yerror");if(x.visible&&M(w.x)&&M(w.yh)&&M(w.ys)){var T=x.width;d="M"+(w.x-T)+","+w.yh+"h"+2*T+"m-"+T+",0V"+w.ys,w.noYS||(d+="m-"+T+",0h"+2*T),S.size()?n&&(S=S.transition().duration(e.duration).ease(e.easing)):S=y.append("path").style("vector-effect",s?"none":"non-scaling-stroke").classed("yerror",!0),S.attr("d",d)}else S.remove();var E=y.select("path.xerror");if(c.visible&&M(w.y)&&M(w.xh)&&M(w.xs)){var C=(c.copy_ystyle?x:c).width;d="M"+w.xh+","+(w.y-C)+"v"+2*C+"m0,-"+C+"H"+w.xs,w.noXS||(d+="m0,-"+C+"v"+2*C),E.size()?n&&(E=E.transition().duration(e.duration).ease(e.easing)):E=y.append("path").style("vector-effect",s?"none":"non-scaling-stroke").classed("xerror",!0),E.attr("d",d)}else E.remove()}})}})}},62662:function($,P,t){var A=t(39898),M=t(7901);$.exports=function(l){l.each(function(_){var m=_[0].trace,f=m.error_y||{},o=m.error_x||{},e=A.select(this);e.selectAll("path.yerror").style("stroke-width",f.thickness+"px").call(M.stroke,f.color),o.copy_ystyle&&(o=f),e.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(M.stroke,o.color)})}},77914:function($,P,t){var A=t(41940),M=t(528).hoverlabel,l=t(1426).extendFlat;$.exports={hoverlabel:{bgcolor:l({},M.bgcolor,{arrayOk:!0}),bordercolor:l({},M.bordercolor,{arrayOk:!0}),font:A({arrayOk:!0,editType:"none"}),align:l({},M.align,{arrayOk:!0}),namelength:l({},M.namelength,{arrayOk:!0}),editType:"none"}}},30732:function($,P,t){var A=t(71828),M=t(73972);function l(_,m,f,o){o=o||A.identity,Array.isArray(_)&&(m[0][f]=o(_))}$.exports=function(_){var m=_.calcdata,f=_._fullLayout;function o(s){return function(a){return A.coerceHoverinfo({hoverinfo:a},{_module:s._module},f)}}for(var e=0;e<m.length;e++){var i=m[e],r=i[0].trace;if(!M.traceIs(r,"pie-like")){var n=M.traceIs(r,"2dMap")?l:A.fillArray;n(r.hoverinfo,i,"hi",o(r)),r.hovertemplate&&n(r.hovertemplate,i,"ht"),r.hoverlabel&&(n(r.hoverlabel.bgcolor,i,"hbg"),n(r.hoverlabel.bordercolor,i,"hbc"),n(r.hoverlabel.font.size,i,"hts"),n(r.hoverlabel.font.color,i,"htc"),n(r.hoverlabel.font.family,i,"htf"),n(r.hoverlabel.namelength,i,"hnl"),n(r.hoverlabel.align,i,"hta"))}}}},75914:function($,P,t){var A=t(73972),M=t(88335).hover;$.exports=function(l,_,m){var f=A.getComponentMethod("annotations","onClick")(l,l._hoverdata);function o(){l.emit("plotly_click",{points:l._hoverdata,event:_})}m!==void 0&&M(l,_,m,!0),l._hoverdata&&_&&_.target&&(f&&f.then?f.then(o):o(),_.stopImmediatePropagation&&_.stopImmediatePropagation())}},26675:function($){$.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},54268:function($,P,t){var A=t(71828),M=t(77914),l=t(38048);$.exports=function(_,m,f,o){var e=A.extendFlat({},o.hoverlabel);m.hovertemplate&&(e.namelength=-1),l(_,m,function(i,r){return A.coerce(_,m,M,i,r)},e)}},23469:function($,P,t){var A=t(71828);P.getSubplot=function(o){return o.subplot||o.xaxis+o.yaxis||o.geo},P.isTraceInSubplots=function(o,e){if(o.type==="splom"){for(var i=o.xaxes||[],r=o.yaxes||[],n=0;n<i.length;n++)for(var s=0;s<r.length;s++)if(e.indexOf(i[n]+r[s])!==-1)return!0;return!1}return e.indexOf(P.getSubplot(o))!==-1},P.flat=function(o,e){for(var i=new Array(o.length),r=0;r<o.length;r++)i[r]=e;return i},P.p2c=function(o,e){for(var i=new Array(o.length),r=0;r<o.length;r++)i[r]=o[r].p2c(e);return i},P.getDistanceFunction=function(o,e,i,r){return o==="closest"?r||P.quadrature(e,i):o.charAt(0)==="x"?e:i},P.getClosest=function(o,e,i){if(i.index!==!1)i.index>=0&&i.index<o.length?i.distance=0:i.index=!1;else for(var r=0;r<o.length;r++){var n=e(o[r]);n<=i.distance&&(i.index=r,i.distance=n)}return i},P.inbox=function(o,e,i){return o*e<0||o===0?i:1/0},P.quadrature=function(o,e){return function(i){var r=o(i),n=e(i);return Math.sqrt(r*r+n*n)}},P.makeEventData=function(o,e,i){var r="index"in o?o.index:o.pointNumber,n={data:e._input,fullData:e,curveNumber:e.index,pointNumber:r};if(e._indexToPoints){var s=e._indexToPoints[r];s.length===1?n.pointIndex=s[0]:n.pointIndices=s}else n.pointIndex=r;return e._module.eventData?n=e._module.eventData(n,o,e,i,r):("xVal"in o?n.x=o.xVal:"x"in o&&(n.x=o.x),"yVal"in o?n.y=o.yVal:"y"in o&&(n.y=o.y),o.xa&&(n.xaxis=o.xa),o.ya&&(n.yaxis=o.ya),o.zLabelVal!==void 0&&(n.z=o.zLabelVal)),P.appendArrayPointValue(n,e,r),n},P.appendArrayPointValue=function(o,e,i){var r=e._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var s=r[n],a=l(s);if(o[a]===void 0){var u=_(A.nestedProperty(e,s).get(),i);u!==void 0&&(o[a]=u)}}},P.appendArrayMultiPointValues=function(o,e,i){var r=e._arrayAttrs;if(r)for(var n=0;n<r.length;n++){var s=r[n],a=l(s);if(o[a]===void 0){for(var u=A.nestedProperty(e,s).get(),p=new Array(i.length),c=0;c<i.length;c++)p[c]=_(u,i[c]);o[a]=p}}};var M={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function l(o){return M[o]||o}function _(o,e){return Array.isArray(e)?Array.isArray(o)&&Array.isArray(o[e[0]])?o[e[0]][e[1]]:void 0:o[e]}var m={x:!0,y:!0},f={"x unified":!0,"y unified":!0};P.isUnifiedHover=function(o){return typeof o=="string"&&!!f[o]},P.isXYhover=function(o){return typeof o=="string"&&!!m[o]}},88335:function($,P,t){var A=t(39898),M=t(92770),l=t(84267),_=t(71828),m=_.strTranslate,f=_.strRotate,o=t(11086),e=t(63893),i=t(39918),r=t(91424),n=t(7901),s=t(28569),a=t(89298),u=t(73972),p=t(23469),c=t(26675),x=t(99017),g=t(43969),h=c.YANGLE,b=Math.PI*h/180,v=1/Math.sin(b),y=Math.cos(b),w=Math.sin(b),d=c.HOVERARROWSIZE,S=c.HOVERTEXTPAD,T={box:!0,ohlc:!0,violin:!0,candlestick:!0},E={scatter:!0,scattergl:!0,splom:!0};function C(q){return[q.trace.index,q.index,q.x0,q.y0,q.name,q.attr,q.xa?q.xa._id:"",q.ya?q.ya._id:""].join(",")}P.hover=function(q,Z,J,ne){q=_.getGraphDiv(q);var re=Z.target;_.throttle(q._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){(function(ae,ue,he,de,xe){he||(he="xy");var me=Array.isArray(he)?he:[he],ve=ae._fullLayout,Le=ve._plots||[],Ae=Le[he],we=ve._has("cartesian");if(Ae){var se=Ae.overlays.map(function(jt){return jt.id});me=me.concat(se)}for(var oe=me.length,fe=new Array(oe),Se=new Array(oe),Me=!1,be=0;be<oe;be++){var Ie=me[be];if(Le[Ie])Me=!0,fe[be]=Le[Ie].xaxis,Se[be]=Le[Ie].yaxis;else{if(!ve[Ie]||!ve[Ie]._subplot)return void _.warn("Unrecognized subplot: "+Ie);var Be=ve[Ie]._subplot;fe[be]=Be.xaxis,Se[be]=Be.yaxis}}var ce=ue.hovermode||ve.hovermode;if(ce&&!Me&&(ce="closest"),["x","y","closest","x unified","y unified"].indexOf(ce)===-1||!ae.calcdata||ae.querySelector(".zoombox")||ae._dragging)return s.unhoverRaw(ae,ue);var Te=ve.hoverdistance;Te===-1&&(Te=1/0);var ye=ve.spikedistance;ye===-1&&(ye=1/0);var Pe,Re,ze,He,We,Je,lt,et,yt,_t,xt,at,ot,At=[],Ct=[],zt={hLinePoint:null,vLinePoint:null},St=!1;if(Array.isArray(ue))for(ce="array",ze=0;ze<ue.length;ze++)(We=ae.calcdata[ue[ze].curveNumber||0])&&(Je=We[0].trace,We[0].trace.hoverinfo!=="skip"&&(Ct.push(We),Je.orientation==="h"&&(St=!0)));else{for(He=0;He<ae.calcdata.length;He++)We=ae.calcdata[He],(Je=We[0].trace).hoverinfo!=="skip"&&p.isTraceInSubplots(Je,me)&&(Ct.push(We),Je.orientation==="h"&&(St=!0));var qe,Xe;if(xe){if(o.triggerHandler(ae,"plotly_beforehover",ue)===!1)return;var Ve=xe.getBoundingClientRect();qe=ue.clientX-Ve.left,Xe=ue.clientY-Ve.top,ve._calcInverseTransform(ae);var Ze=_.apply3DTransform(ve._invTransform)(qe,Xe);if(qe=Ze[0],Xe=Ze[1],qe<0||qe>fe[0]._length||Xe<0||Xe>Se[0]._length)return s.unhoverRaw(ae,ue)}else qe="xpx"in ue?ue.xpx:fe[0]._length/2,Xe="ypx"in ue?ue.ypx:Se[0]._length/2;if(ue.pointerX=qe+fe[0]._offset,ue.pointerY=Xe+Se[0]._offset,Pe="xval"in ue?p.flat(me,ue.xval):p.p2c(fe,qe),Re="yval"in ue?p.flat(me,ue.yval):p.p2c(Se,Xe),!M(Pe[0])||!M(Re[0]))return _.warn("Fx.hover failed",ue,ae),s.unhoverRaw(ae,ue)}var st=1/0;function nt(jt,rn){for(He=0;He<Ct.length;He++)if((We=Ct[He])&&We[0]&&We[0].trace&&(Je=We[0].trace).visible===!0&&Je._length!==0&&["carpet","contourcarpet"].indexOf(Je._module.name)===-1){if(Je.type==="splom"?lt=me[et=0]:(lt=p.getSubplot(Je),et=me.indexOf(lt)),yt=ce,p.isUnifiedHover(yt)&&(yt=yt.charAt(0)),at={cd:We,trace:Je,xa:fe[et],ya:Se[et],maxHoverDistance:Te,maxSpikeDistance:ye,index:!1,distance:Math.min(st,Te),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:n.defaultLine,name:Je.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ve[lt]&&(at.subplot=ve[lt]._subplot),ve._splomScenes&&ve._splomScenes[Je.uid]&&(at.scene=ve._splomScenes[Je.uid]),ot=At.length,yt==="array"){var fn=ue[He];"pointNumber"in fn?(at.index=fn.pointNumber,yt="closest"):(yt="","xval"in fn&&(_t=fn.xval,yt="x"),"yval"in fn&&(xt=fn.yval,yt=yt?"closest":"y"))}else jt!==void 0&&rn!==void 0?(_t=jt,xt=rn):(_t=Pe[et],xt=Re[et]);if(Te!==0)if(Je._module&&Je._module.hoverPoints){var xn=Je._module.hoverPoints(at,_t,xt,yt,{finiteRange:!0,hoverLayer:ve._hoverlayer});if(xn)for(var Ln,Xn=0;Xn<xn.length;Xn++)Ln=xn[Xn],M(Ln.x0)&&M(Ln.y0)&&At.push(H(Ln,ce))}else _.log("Unrecognized trace type in hover:",Je);if(ce==="closest"&&At.length>ot&&(At.splice(0,ot),st=At[0].distance),we&&ye!==0&&At.length===0){at.distance=ye,at.index=!1;var Un=Je._module.hoverPoints(at,_t,xt,"closest",{hoverLayer:ve._hoverlayer});if(Un&&(Un=Un.filter(function(Xt){return Xt.spikeDistance<=ye})),Un&&Un.length){var Hn,Kn=Un.filter(function(Xt){return Xt.xa.showspikes&&Xt.xa.spikesnap!=="hovered data"});if(Kn.length){var qt=Kn[0];M(qt.x0)&&M(qt.y0)&&(Hn=Fe(qt),(!zt.vLinePoint||zt.vLinePoint.spikeDistance>Hn.spikeDistance)&&(zt.vLinePoint=Hn))}var On=Un.filter(function(Xt){return Xt.ya.showspikes&&Xt.ya.spikesnap!=="hovered data"});if(On.length){var Et=On[0];M(Et.x0)&&M(Et.y0)&&(Hn=Fe(Et),(!zt.hLinePoint||zt.hLinePoint.spikeDistance>Hn.spikeDistance)&&(zt.hLinePoint=Hn))}}}}}function De(jt,rn,fn){for(var xn,Ln=null,Xn=1/0,Un=0;Un<jt.length;Un++)xn=jt[Un].spikeDistance,fn&&Un===0&&(xn=-1/0),xn<=Xn&&xn<=rn&&(Ln=jt[Un],Xn=xn);return Ln}function Fe(jt){return jt?{xa:jt.xa,ya:jt.ya,x:jt.xSpike!==void 0?jt.xSpike:(jt.x0+jt.x1)/2,y:jt.ySpike!==void 0?jt.ySpike:(jt.y0+jt.y1)/2,distance:jt.distance,spikeDistance:jt.spikeDistance,curveNumber:jt.trace.index,color:jt.color,pointNumber:jt.index}:null}nt();var rt={fullLayout:ve,container:ve._hoverlayer,event:ue},tt=ae._spikepoints,gt={vLinePoint:zt.vLinePoint,hLinePoint:zt.hLinePoint};ae._spikepoints=gt;var dt=function(){At.sort(function(jt,rn){return jt.distance-rn.distance}),At=function(jt,rn){for(var fn=rn.charAt(0),xn=[],Ln=[],Xn=[],Un=0;Un<jt.length;Un++){var Hn=jt[Un];u.traceIs(Hn.trace,"bar-like")||u.traceIs(Hn.trace,"box-violin")?Xn.push(Hn):Hn.trace[fn+"period"]?Ln.push(Hn):xn.push(Hn)}return xn.concat(Ln).concat(Xn)}(At,ce)};dt();var mt=ce.charAt(0),ft=(mt==="x"||mt==="y")&&At[0]&&E[At[0].trace.type];if(we&&ye!==0&&At.length!==0){var kt=De(At.filter(function(jt){return jt.ya.showspikes}),ye,ft);zt.hLinePoint=Fe(kt);var ht=De(At.filter(function(jt){return jt.xa.showspikes}),ye,ft);zt.vLinePoint=Fe(ht)}if(At.length===0){var pt=s.unhoverRaw(ae,ue);return!we||zt.hLinePoint===null&&zt.vLinePoint===null||F(tt)&&N(ae,zt,rt),pt}if(we&&F(tt)&&N(ae,zt,rt),p.isXYhover(yt)&&At[0].length!==0&&At[0].trace.type!=="splom"){var wt=At[0],Ft=(At=T[wt.trace.type]?At.filter(function(jt){return jt.trace.index===wt.trace.index}):[wt]).length;nt(W("x",wt,ve),W("y",wt,ve));var Nt,Gt=[],an={},Wt=0,Yt=function(jt){var rn=T[jt.trace.type]?C(jt):jt.trace.index;if(an[rn]){var fn=an[rn]-1,xn=Gt[fn];fn>0&&Math.abs(jt.distance)<Math.abs(xn.distance)&&(Gt[fn]=jt)}else Wt++,an[rn]=Wt,Gt.push(jt)};for(Nt=0;Nt<Ft;Nt++)Yt(At[Nt]);for(Nt=At.length-1;Nt>Ft-1;Nt--)Yt(At[Nt]);At=Gt,dt()}var en=ae._hoverdata,Tn=[],Bn=te(ae),mn=Q(ae);for(ze=0;ze<At.length;ze++){var Kt=At[ze],cn=p.makeEventData(Kt,Kt.trace,Kt.cd);if(Kt.hovertemplate!==!1){var tn=!1;Kt.cd[Kt.index]&&Kt.cd[Kt.index].ht&&(tn=Kt.cd[Kt.index].ht),Kt.hovertemplate=tn||Kt.trace.hovertemplate||!1}if(Kt.xa&&Kt.ya){var un=Kt.x0+Kt.xa._offset,yn=Kt.x1+Kt.xa._offset,En=Kt.y0+Kt.ya._offset,Sn=Kt.y1+Kt.ya._offset,Nn=Math.min(un,yn),_n=Math.max(un,yn),Pn=Math.min(En,Sn),tr=Math.max(En,Sn);cn.bbox={x0:Nn+mn,x1:_n+mn,y0:Pn+Bn,y1:tr+Bn}}Kt.eventData=[cn],Tn.push(cn)}ae._hoverdata=Tn;var ur=ce==="y"&&(Ct.length>1||At.length>1)||ce==="closest"&&St&&At.length>1,lr=n.combine(ve.plot_bgcolor||n.background,ve.paper_bgcolor),ir=O(At,{gd:ae,hovermode:ce,rotateLabels:ur,bgColor:lr,container:ve._hoverlayer,outerContainer:ve._paper.node(),commonLabelOpts:ve.hoverlabel,hoverdistance:ve.hoverdistance}),$n=ir.hoverLabels;if(p.isUnifiedHover(ce)||(function(jt,rn,fn,xn){var Ln,Xn,Un,Hn,Kn,qt,On,Et=rn?"xa":"ya",Xt=rn?"ya":"xa",nn=0,An=1,Cn=jt.size(),Rn=new Array(Cn),gn=0,$t=xn.minX,Qt=xn.maxX,hn=xn.minY,vn=xn.maxY,Fn=function(wn){return wn*fn._invScaleX},In=function(wn){return wn*fn._invScaleY};function Qn(wn){var jn=wn[0],bn=wn[wn.length-1];if(Xn=jn.pmin-jn.pos-jn.dp+jn.size,Un=bn.pos+bn.dp+bn.size-jn.pmax,Xn>.01){for(Kn=wn.length-1;Kn>=0;Kn--)wn[Kn].dp+=Xn;Ln=!1}if(!(Un<.01)){if(Xn<-.01){for(Kn=wn.length-1;Kn>=0;Kn--)wn[Kn].dp-=Un;Ln=!1}if(Ln){var qn=0;for(Hn=0;Hn<wn.length;Hn++)(qt=wn[Hn]).pos+qt.dp+qt.size>jn.pmax&&qn++;for(Hn=wn.length-1;Hn>=0&&!(qn<=0);Hn--)(qt=wn[Hn]).pos>jn.pmax-1&&(qt.del=!0,qn--);for(Hn=0;Hn<wn.length&&!(qn<=0);Hn++)if((qt=wn[Hn]).pos<jn.pmin+1)for(qt.del=!0,qn--,Un=2*qt.size,Kn=wn.length-1;Kn>=0;Kn--)wn[Kn].dp-=Un;for(Hn=wn.length-1;Hn>=0&&!(qn<=0);Hn--)(qt=wn[Hn]).pos+qt.dp+qt.size>jn.pmax&&(qt.del=!0,qn--)}}}for(jt.each(function(wn){var jn=wn[Et],bn=wn[Xt],qn=jn._id.charAt(0)==="x",or=jn.range;gn===0&&or&&or[0]>or[1]!==qn&&(An=-1);var ar=0,mr=qn?fn.width:fn.height;if(fn.hovermode==="x"||fn.hovermode==="y"){var kr,Cr,Br=G(wn,rn),Wr=wn.anchor,fi=Wr==="end"?-1:1;if(Wr==="middle")Cr=(kr=wn.crossPos+(qn?In(Br.y-wn.by/2):Fn(wn.bx/2+wn.tx2width/2)))+(qn?In(wn.by):Fn(wn.bx));else if(qn)Cr=(kr=wn.crossPos+In(d+Br.y)-In(wn.by/2-d))+In(wn.by);else{var pi=Fn(fi*d+Br.x),bi=pi+Fn(fi*wn.bx);kr=wn.crossPos+Math.min(pi,bi),Cr=wn.crossPos+Math.max(pi,bi)}qn?hn!==void 0&&vn!==void 0&&Math.min(Cr,vn)-Math.max(kr,hn)>1&&(bn.side==="left"?(ar=bn._mainLinePosition,mr=fn.width):mr=bn._mainLinePosition):$t!==void 0&&Qt!==void 0&&Math.min(Cr,Qt)-Math.max(kr,$t)>1&&(bn.side==="top"?(ar=bn._mainLinePosition,mr=fn.height):mr=bn._mainLinePosition)}Rn[gn++]=[{datum:wn,traceIndex:wn.trace.index,dp:0,pos:wn.pos,posref:wn.posref,size:wn.by*(qn?v:1)/2,pmin:ar,pmax:mr}]}),Rn.sort(function(wn,jn){return wn[0].posref-jn[0].posref||An*(jn[0].traceIndex-wn[0].traceIndex)});!Ln&&nn<=Cn;){for(nn++,Ln=!0,Hn=0;Hn<Rn.length-1;){var Wn=Rn[Hn],Ke=Rn[Hn+1],it=Wn[Wn.length-1],Mt=Ke[0];if((Xn=it.pos+it.dp+it.size-Mt.pos-Mt.dp+Mt.size)>.01&&it.pmin===Mt.pmin&&it.pmax===Mt.pmax){for(Kn=Ke.length-1;Kn>=0;Kn--)Ke[Kn].dp+=Xn;for(Wn.push.apply(Wn,Ke),Rn.splice(Hn+1,1),On=0,Kn=Wn.length-1;Kn>=0;Kn--)On+=Wn[Kn].dp;for(Un=On/Wn.length,Kn=Wn.length-1;Kn>=0;Kn--)Wn[Kn].dp-=Un;Ln=!1}else Hn++}Rn.forEach(Qn)}for(Hn=Rn.length-1;Hn>=0;Hn--){var Lt=Rn[Hn];for(Kn=Lt.length-1;Kn>=0;Kn--){var Bt=Lt[Kn],ln=Bt.datum;ln.offset=Bt.dp,ln.del=Bt.del}}}($n,ur,ve,ir.commonLabelBoundingBox),I($n,ur,ve._invScaleX,ve._invScaleY)),xe&&xe.tagName){var vr=u.getComponentMethod("annotations","hasClickToShow")(ae,Tn);i(A.select(xe),vr?"pointer":"")}xe&&!de&&function(jt,rn,fn){if(!fn||fn.length!==jt._hoverdata.length)return!0;for(var xn=fn.length-1;xn>=0;xn--){var Ln=fn[xn],Xn=jt._hoverdata[xn];if(Ln.curveNumber!==Xn.curveNumber||String(Ln.pointNumber)!==String(Xn.pointNumber)||String(Ln.pointNumbers)!==String(Xn.pointNumbers))return!0}return!1}(ae,0,en)&&(en&&ae.emit("plotly_unhover",{event:ue,points:en}),ae.emit("plotly_hover",{event:ue,points:ae._hoverdata,xaxes:fe,yaxes:Se,xvals:Pe,yvals:Re}))})(q,Z,J,ne,re)})},P.loneHover=function(q,Z){var J=!0;Array.isArray(q)||(J=!1,q=[q]);var ne=Z.gd,re=te(ne),ae=Q(ne),ue=O(q.map(function(xe){var me=xe._x0||xe.x0||xe.x||0,ve=xe._x1||xe.x1||xe.x||0,Le=xe._y0||xe.y0||xe.y||0,Ae=xe._y1||xe.y1||xe.y||0,we=xe.eventData;if(we){var se=Math.min(me,ve),oe=Math.max(me,ve),fe=Math.min(Le,Ae),Se=Math.max(Le,Ae),Me=xe.trace;if(u.traceIs(Me,"gl3d")){var be=ne._fullLayout[Me.scene]._scene.container,Ie=be.offsetLeft,Be=be.offsetTop;se+=Ie,oe+=Ie,fe+=Be,Se+=Be}we.bbox={x0:se+ae,x1:oe+ae,y0:fe+re,y1:Se+re},Z.inOut_bbox&&Z.inOut_bbox.push(we.bbox)}else we=!1;return{color:xe.color||n.defaultLine,x0:xe.x0||xe.x||0,x1:xe.x1||xe.x||0,y0:xe.y0||xe.y||0,y1:xe.y1||xe.y||0,xLabel:xe.xLabel,yLabel:xe.yLabel,zLabel:xe.zLabel,text:xe.text,name:xe.name,idealAlign:xe.idealAlign,borderColor:xe.borderColor,fontFamily:xe.fontFamily,fontSize:xe.fontSize,fontColor:xe.fontColor,nameLength:xe.nameLength,textAlign:xe.textAlign,trace:xe.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:xe.hovertemplate||!1,hovertemplateLabels:xe.hovertemplateLabels||!1,eventData:we}}),{gd:ne,hovermode:"closest",rotateLabels:!1,bgColor:Z.bgColor||n.background,container:A.select(Z.container),outerContainer:Z.outerContainer||Z.container}).hoverLabels,he=0,de=0;return ue.sort(function(xe,me){return xe.y0-me.y0}).each(function(xe,me){var ve=xe.y0-xe.by/2;xe.offset=ve-5<he?he-ve+5:0,he=ve+xe.by+xe.offset,me===Z.anchorIndex&&(de=xe.offset)}).each(function(xe){xe.offset-=de}),I(ue,!1,ne._fullLayout._invScaleX,ne._fullLayout._invScaleY),J?ue:ue.node()};var L=/<extra>([\s\S]*)<\/extra>/;function O(q,Z){var J=Z.gd,ne=J._fullLayout,re=Z.hovermode,ae=Z.rotateLabels,ue=Z.bgColor,he=Z.container,de=Z.outerContainer,xe=Z.commonLabelOpts||{};if(q.length===0)return[[]];var me=Z.fontFamily||c.HOVERFONT,ve=Z.fontSize||c.HOVERFONTSIZE,Le=q[0],Ae=Le.xa,we=Le.ya,se=re.charAt(0),oe=se+"Label",fe=Le[oe];if(fe===void 0&&Ae.type==="multicategory")for(var Se=0;Se<q.length&&(fe=q[Se][oe])===void 0;Se++);var Me=X(J,de),be=Me.top,Ie=Me.width,Be=Me.height,ce=fe!==void 0&&Le.distance<=Z.hoverdistance&&(re==="x"||re==="y");if(ce){var Te,ye,Pe=!0;for(Te=0;Te<q.length;Te++)if(Pe&&q[Te].zLabel===void 0&&(Pe=!1),ye=q[Te].hoverinfo||q[Te].trace.hoverinfo){var Re=Array.isArray(ye)?ye:ye.split("+");if(Re.indexOf("all")===-1&&Re.indexOf(re)===-1){ce=!1;break}}Pe&&(ce=!1)}var ze=he.selectAll("g.axistext").data(ce?[0]:[]);ze.enter().append("g").classed("axistext",!0),ze.exit().remove();var He={minX:0,maxX:0,minY:0,maxY:0};if(ze.each(function(){var pt=A.select(this),wt=_.ensureSingle(pt,"path","",function(Pn){Pn.style({"stroke-width":"1px"})}),Ft=_.ensureSingle(pt,"text","",function(Pn){Pn.attr("data-notex",1)}),Nt=xe.bgcolor||n.defaultLine,Gt=xe.bordercolor||n.contrast(Nt),an=n.contrast(Nt),Wt={family:xe.font.family||me,size:xe.font.size||ve,color:xe.font.color||an};wt.style({fill:Nt,stroke:Gt}),Ft.text(fe).call(r.font,Wt).call(e.positionText,0,0).call(e.convertToTspans,J),pt.attr("transform","");var Yt,en,Tn=X(J,Ft.node());if(re==="x"){var Bn=Ae.side==="top"?"-":"";Ft.attr("text-anchor","middle").call(e.positionText,0,Ae.side==="top"?be-Tn.bottom-d-S:be-Tn.top+d+S),Yt=Ae._offset+(Le.x0+Le.x1)/2,en=we._offset+(Ae.side==="top"?0:we._length);var mn=Tn.width/2+S;Yt<mn?(Yt=mn,wt.attr("d","M-"+(mn-d)+",0L-"+(mn-2*d)+","+Bn+d+"H"+mn+"v"+Bn+(2*S+Tn.height)+"H-"+mn+"V"+Bn+d+"Z")):Yt>ne.width-mn?(Yt=ne.width-mn,wt.attr("d","M"+(mn-d)+",0L"+mn+","+Bn+d+"v"+Bn+(2*S+Tn.height)+"H-"+mn+"V"+Bn+d+"H"+(mn-2*d)+"Z")):wt.attr("d","M0,0L"+d+","+Bn+d+"H"+mn+"v"+Bn+(2*S+Tn.height)+"H-"+mn+"V"+Bn+d+"H-"+d+"Z"),He.minX=Yt-mn,He.maxX=Yt+mn,Ae.side==="top"?(He.minY=en-(2*S+Tn.height),He.maxY=en-S):(He.minY=en+S,He.maxY=en+(2*S+Tn.height))}else{var Kt,cn,tn;we.side==="right"?(Kt="start",cn=1,tn="",Yt=Ae._offset+Ae._length):(Kt="end",cn=-1,tn="-",Yt=Ae._offset),en=we._offset+(Le.y0+Le.y1)/2,Ft.attr("text-anchor",Kt),wt.attr("d","M0,0L"+tn+d+","+d+"V"+(S+Tn.height/2)+"h"+tn+(2*S+Tn.width)+"V-"+(S+Tn.height/2)+"H"+tn+d+"V-"+d+"Z"),He.minY=en-(S+Tn.height/2),He.maxY=en+(S+Tn.height/2),we.side==="right"?(He.minX=Yt+d,He.maxX=Yt+d+(2*S+Tn.width)):(He.minX=Yt-d-(2*S+Tn.width),He.maxX=Yt-d);var un,yn=Tn.height/2,En=be-Tn.top-yn,Sn="clip"+ne._uid+"commonlabel"+we._id;if(Yt<Tn.width+2*S+d){un="M-"+(d+S)+"-"+yn+"h-"+(Tn.width-S)+"V"+yn+"h"+(Tn.width-S)+"Z";var Nn=Tn.width-Yt+S;e.positionText(Ft,Nn,En),Kt==="end"&&Ft.selectAll("tspan").each(function(){var Pn=A.select(this),tr=r.tester.append("text").text(Pn.text()).call(r.font,Wt),ur=X(J,tr.node());Math.round(ur.width)<Math.round(Tn.width)&&Pn.attr("x",Nn-ur.width),tr.remove()})}else e.positionText(Ft,cn*(S+d),En),un=null;var _n=ne._topclips.selectAll("#"+Sn).data(un?[0]:[]);_n.enter().append("clipPath").attr("id",Sn).append("path"),_n.exit().remove(),_n.select("path").attr("d",un),r.setClipUrl(Ft,un?Sn:null,J)}pt.attr("transform",m(Yt,en))}),p.isUnifiedHover(re)){he.selectAll("g.hovertext").remove();var We=q.filter(function(pt){return pt.hoverinfo!=="none"});if(We.length===0)return[];var Je=ne.hoverlabel,lt=Je.font,et={showlegend:!0,legend:{title:{text:fe,font:lt},font:lt,bgcolor:Je.bgcolor,bordercolor:Je.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ne.legend?ne.legend.traceorder:void 0,orientation:"v"}},yt={font:lt};x(et,yt,J._fullData);var _t=yt.legend;_t.entries=[];for(var xt=0;xt<We.length;xt++){var at=We[xt];if(at.hoverinfo!=="none"){var ot=z(at,!0,re,ne,fe),At=ot[0],Ct=ot[1];at.name=Ct,at.text=Ct!==""?Ct+" : "+At:At;var zt=at.cd[at.index];zt&&(zt.mc&&(at.mc=zt.mc),zt.mcc&&(at.mc=zt.mcc),zt.mlc&&(at.mlc=zt.mlc),zt.mlcc&&(at.mlc=zt.mlcc),zt.mlw&&(at.mlw=zt.mlw),zt.mrc&&(at.mrc=zt.mrc),zt.dir&&(at.dir=zt.dir)),at._distinct=!0,_t.entries.push([at])}}_t.entries.sort(function(pt,wt){return pt[0].trace.index-wt[0].trace.index}),_t.layer=he,_t._inHover=!0,_t._groupTitleFont=Je.grouptitlefont,g(J,_t);var St,qe,Xe,Ve,Ze=he.select("g.legend"),st=X(J,Ze.node()),nt=st.width+2*S,De=st.height+2*S,Fe=We[0],rt=(Fe.x0+Fe.x1)/2,tt=(Fe.y0+Fe.y1)/2,gt=!(u.traceIs(Fe.trace,"bar-like")||u.traceIs(Fe.trace,"box-violin"));se==="y"?gt?(qe=tt-S,St=tt+S):(qe=Math.min.apply(null,We.map(function(pt){return Math.min(pt.y0,pt.y1)})),St=Math.max.apply(null,We.map(function(pt){return Math.max(pt.y0,pt.y1)}))):qe=St=_.mean(We.map(function(pt){return(pt.y0+pt.y1)/2}))-De/2,se==="x"?gt?(Xe=rt+S,Ve=rt-S):(Xe=Math.max.apply(null,We.map(function(pt){return Math.max(pt.x0,pt.x1)})),Ve=Math.min.apply(null,We.map(function(pt){return Math.min(pt.x0,pt.x1)}))):Xe=Ve=_.mean(We.map(function(pt){return(pt.x0+pt.x1)/2}))-nt/2;var dt,mt,ft=Ae._offset,kt=we._offset;return Ve+=ft-nt,qe+=kt-De,dt=(Xe+=ft)+nt<Ie&&Xe>=0?Xe:Ve+nt<Ie&&Ve>=0?Ve:ft+nt<Ie?ft:Xe-rt<rt-Ve+nt?Ie-nt:0,dt+=S,mt=(St+=kt)+De<Be&&St>=0?St:qe+De<Be&&qe>=0?qe:kt+De<Be?kt:St-tt<tt-qe+De?Be-De:0,mt+=S,Ze.attr("transform",m(dt-1,mt-1)),Ze}var ht=he.selectAll("g.hovertext").data(q,function(pt){return C(pt)});return ht.enter().append("g").classed("hovertext",!0).each(function(){var pt=A.select(this);pt.append("rect").call(n.fill,n.addOpacity(ue,.8)),pt.append("text").classed("name",!0),pt.append("path").style("stroke-width","1px"),pt.append("text").classed("nums",!0).call(r.font,me,ve)}),ht.exit().remove(),ht.each(function(pt){var wt=A.select(this).attr("transform",""),Ft=pt.color;Array.isArray(Ft)&&(Ft=Ft[pt.eventData[0].pointNumber]);var Nt=pt.bgcolor||Ft,Gt=n.combine(n.opacity(Nt)?Nt:n.defaultLine,ue),an=n.combine(n.opacity(Ft)?Ft:n.defaultLine,ue),Wt=pt.borderColor||n.contrast(Gt),Yt=z(pt,ce,re,ne,fe,wt),en=Yt[0],Tn=Yt[1],Bn=wt.select("text.nums").call(r.font,pt.fontFamily||me,pt.fontSize||ve,pt.fontColor||Wt).text(en).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,J),mn=wt.select("text.name"),Kt=0,cn=0;if(Tn&&Tn!==en){mn.call(r.font,pt.fontFamily||me,pt.fontSize||ve,an).text(Tn).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,J);var tn=X(J,mn.node());Kt=tn.width+2*S,cn=tn.height+2*S}else mn.remove(),wt.select("rect").remove();wt.select("path").style({fill:Gt,stroke:Wt});var un=pt.xa._offset+(pt.x0+pt.x1)/2,yn=pt.ya._offset+(pt.y0+pt.y1)/2,En=Math.abs(pt.x1-pt.x0),Sn=Math.abs(pt.y1-pt.y0),Nn=X(J,Bn.node()),_n=Nn.width/ne._invScaleX,Pn=Nn.height/ne._invScaleY;pt.ty0=(be-Nn.top)/ne._invScaleY,pt.bx=_n+2*S,pt.by=Math.max(Pn+2*S,cn),pt.anchor="start",pt.txwidth=_n,pt.tx2width=Kt,pt.offset=0;var tr,ur,lr=(_n+d+S+Kt)*ne._invScaleX;if(ae)pt.pos=un,tr=yn+Sn/2+lr<=Be,ur=yn-Sn/2-lr>=0,pt.idealAlign!=="top"&&tr||!ur?tr?(yn+=Sn/2,pt.anchor="start"):pt.anchor="middle":(yn-=Sn/2,pt.anchor="end"),pt.crossPos=yn;else{if(pt.pos=yn,tr=un+En/2+lr<=Ie,ur=un-En/2-lr>=0,pt.idealAlign!=="left"&&tr||!ur)if(tr)un+=En/2,pt.anchor="start";else{pt.anchor="middle";var ir=lr/2,$n=un+ir-Ie,vr=un-ir;$n>0&&(un-=$n),vr<0&&(un+=-vr)}else un-=En/2,pt.anchor="end";pt.crossPos=un}Bn.attr("text-anchor",pt.anchor),Kt&&mn.attr("text-anchor",pt.anchor),wt.attr("transform",m(un,yn)+(ae?f(h):""))}),{hoverLabels:ht,commonLabelBoundingBox:He}}function z(q,Z,J,ne,re,ae){var ue="",he="";q.nameOverride!==void 0&&(q.name=q.nameOverride),q.name&&(q.trace._meta&&(q.name=_.templateString(q.name,q.trace._meta)),ue=V(q.name,q.nameLength));var de=J.charAt(0),xe=de==="x"?"y":"x";q.zLabel!==void 0?(q.xLabel!==void 0&&(he+="x: "+q.xLabel+"<br>"),q.yLabel!==void 0&&(he+="y: "+q.yLabel+"<br>"),q.trace.type!=="choropleth"&&q.trace.type!=="choroplethmapbox"&&(he+=(he?"z: ":"")+q.zLabel)):Z&&q[de+"Label"]===re?he=q[xe+"Label"]||"":q.xLabel===void 0?q.yLabel!==void 0&&q.trace.type!=="scattercarpet"&&(he=q.yLabel):he=q.yLabel===void 0?q.xLabel:"("+q.xLabel+", "+q.yLabel+")",!q.text&&q.text!==0||Array.isArray(q.text)||(he+=(he?"<br>":"")+q.text),q.extraText!==void 0&&(he+=(he?"<br>":"")+q.extraText),ae&&he===""&&!q.hovertemplate&&(ue===""&&ae.remove(),he=ue);var me=q.hovertemplate||!1;if(me){var ve=q.hovertemplateLabels||q;q[de+"Label"]!==re&&(ve[de+"other"]=ve[de+"Val"],ve[de+"otherLabel"]=ve[de+"Label"]),he=(he=_.hovertemplateString(me,ve,ne._d3locale,q.eventData[0]||{},q.trace._meta)).replace(L,function(Le,Ae){return ue=V(Ae,q.nameLength),""})}return[he,ue]}function G(q,Z){var J=0,ne=q.offset;return Z&&(ne*=-w,J=q.offset*y),{x:J,y:ne}}function I(q,Z,J,ne){var re=function(ue){return ue*J},ae=function(ue){return ue*ne};q.each(function(ue){var he=A.select(this);if(ue.del)return he.remove();var de,xe,me,ve,Le=he.select("text.nums"),Ae=ue.anchor,we=Ae==="end"?-1:1,se=(ve=(me=(xe={start:1,end:-1,middle:0}[(de=ue).anchor])*(d+S))+xe*(de.txwidth+S),de.anchor==="middle"&&(me-=de.tx2width/2,ve+=de.txwidth/2+S),{alignShift:xe,textShiftX:me,text2ShiftX:ve}),oe=G(ue,Z),fe=oe.x,Se=oe.y,Me=Ae==="middle";he.select("path").attr("d",Me?"M-"+re(ue.bx/2+ue.tx2width/2)+","+ae(Se-ue.by/2)+"h"+re(ue.bx)+"v"+ae(ue.by)+"h-"+re(ue.bx)+"Z":"M0,0L"+re(we*d+fe)+","+ae(d+Se)+"v"+ae(ue.by/2-d)+"h"+re(we*ue.bx)+"v-"+ae(ue.by)+"H"+re(we*d+fe)+"V"+ae(Se-d)+"Z");var be=fe+se.textShiftX,Ie=Se+ue.ty0-ue.by/2+S,Be=ue.textAlign||"auto";Be!=="auto"&&(Be==="left"&&Ae!=="start"?(Le.attr("text-anchor","start"),be=Me?-ue.bx/2-ue.tx2width/2+S:-ue.bx-S):Be==="right"&&Ae!=="end"&&(Le.attr("text-anchor","end"),be=Me?ue.bx/2-ue.tx2width/2-S:ue.bx+S)),Le.call(e.positionText,re(be),ae(Ie)),ue.tx2width&&(he.select("text.name").call(e.positionText,re(se.text2ShiftX+se.alignShift*S+fe),ae(Se+ue.ty0-ue.by/2+S)),he.select("rect").call(r.setRect,re(se.text2ShiftX+(se.alignShift-1)*ue.tx2width/2+fe),ae(Se-ue.by/2-1),re(ue.tx2width),ae(ue.by+2)))})}function H(q,Z){var J=q.index,ne=q.trace||{},re=q.cd[0],ae=q.cd[J]||{};function ue(Le){return Le||M(Le)&&Le===0}var he=Array.isArray(J)?function(Le,Ae){var we=_.castOption(re,J,Le);return ue(we)?we:_.extractOption({},ne,"",Ae)}:function(Le,Ae){return _.extractOption(ae,ne,Le,Ae)};function de(Le,Ae,we){var se=he(Ae,we);ue(se)&&(q[Le]=se)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),q.posref=Z==="y"||Z==="closest"&&ne.orientation==="h"?q.xa._offset+(q.x0+q.x1)/2:q.ya._offset+(q.y0+q.y1)/2,q.x0=_.constrain(q.x0,0,q.xa._length),q.x1=_.constrain(q.x1,0,q.xa._length),q.y0=_.constrain(q.y0,0,q.ya._length),q.y1=_.constrain(q.y1,0,q.ya._length),q.xLabelVal!==void 0&&(q.xLabel="xLabel"in q?q.xLabel:a.hoverLabelText(q.xa,q.xLabelVal,ne.xhoverformat),q.xVal=q.xa.c2d(q.xLabelVal)),q.yLabelVal!==void 0&&(q.yLabel="yLabel"in q?q.yLabel:a.hoverLabelText(q.ya,q.yLabelVal,ne.yhoverformat),q.yVal=q.ya.c2d(q.yLabelVal)),q.zLabelVal!==void 0&&q.zLabel===void 0&&(q.zLabel=String(q.zLabelVal)),!(isNaN(q.xerr)||q.xa.type==="log"&&q.xerr<=0)){var xe=a.tickText(q.xa,q.xa.c2l(q.xerr),"hover").text;q.xerrneg!==void 0?q.xLabel+=" +"+xe+" / -"+a.tickText(q.xa,q.xa.c2l(q.xerrneg),"hover").text:q.xLabel+="  "+xe,Z==="x"&&(q.distance+=1)}if(!(isNaN(q.yerr)||q.ya.type==="log"&&q.yerr<=0)){var me=a.tickText(q.ya,q.ya.c2l(q.yerr),"hover").text;q.yerrneg!==void 0?q.yLabel+=" +"+me+" / -"+a.tickText(q.ya,q.ya.c2l(q.yerrneg),"hover").text:q.yLabel+="  "+me,Z==="y"&&(q.distance+=1)}var ve=q.hoverinfo||q.trace.hoverinfo;return ve&&ve!=="all"&&((ve=Array.isArray(ve)?ve:ve.split("+")).indexOf("x")===-1&&(q.xLabel=void 0),ve.indexOf("y")===-1&&(q.yLabel=void 0),ve.indexOf("z")===-1&&(q.zLabel=void 0),ve.indexOf("text")===-1&&(q.text=void 0),ve.indexOf("name")===-1&&(q.name=void 0)),q}function N(q,Z,J){var ne,re,ae=J.container,ue=J.fullLayout,he=ue._size,de=J.event,xe=!!Z.hLinePoint,me=!!Z.vLinePoint;if(ae.selectAll(".spikeline").remove(),me||xe){var ve=n.combine(ue.plot_bgcolor,ue.paper_bgcolor);if(xe){var Le,Ae,we=Z.hLinePoint;ne=we&&we.xa,(re=we&&we.ya).spikesnap==="cursor"?(Le=de.pointerX,Ae=de.pointerY):(Le=ne._offset+we.x,Ae=re._offset+we.y);var se,oe,fe=l.readability(we.color,ve)<1.5?n.contrast(ve):we.color,Se=re.spikemode,Me=re.spikethickness,be=re.spikecolor||fe,Ie=a.getPxPosition(q,re);if(Se.indexOf("toaxis")!==-1||Se.indexOf("across")!==-1){if(Se.indexOf("toaxis")!==-1&&(se=Ie,oe=Le),Se.indexOf("across")!==-1){var Be=re._counterDomainMin,ce=re._counterDomainMax;re.anchor==="free"&&(Be=Math.min(Be,re.position),ce=Math.max(ce,re.position)),se=he.l+Be*he.w,oe=he.l+ce*he.w}ae.insert("line",":first-child").attr({x1:se,x2:oe,y1:Ae,y2:Ae,"stroke-width":Me,stroke:be,"stroke-dasharray":r.dashStyle(re.spikedash,Me)}).classed("spikeline",!0).classed("crisp",!0),ae.insert("line",":first-child").attr({x1:se,x2:oe,y1:Ae,y2:Ae,"stroke-width":Me+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}Se.indexOf("marker")!==-1&&ae.insert("circle",":first-child").attr({cx:Ie+(re.side!=="right"?Me:-Me),cy:Ae,r:Me,fill:be}).classed("spikeline",!0)}if(me){var Te,ye,Pe=Z.vLinePoint;ne=Pe&&Pe.xa,re=Pe&&Pe.ya,ne.spikesnap==="cursor"?(Te=de.pointerX,ye=de.pointerY):(Te=ne._offset+Pe.x,ye=re._offset+Pe.y);var Re,ze,He=l.readability(Pe.color,ve)<1.5?n.contrast(ve):Pe.color,We=ne.spikemode,Je=ne.spikethickness,lt=ne.spikecolor||He,et=a.getPxPosition(q,ne);if(We.indexOf("toaxis")!==-1||We.indexOf("across")!==-1){if(We.indexOf("toaxis")!==-1&&(Re=et,ze=ye),We.indexOf("across")!==-1){var yt=ne._counterDomainMin,_t=ne._counterDomainMax;ne.anchor==="free"&&(yt=Math.min(yt,ne.position),_t=Math.max(_t,ne.position)),Re=he.t+(1-_t)*he.h,ze=he.t+(1-yt)*he.h}ae.insert("line",":first-child").attr({x1:Te,x2:Te,y1:Re,y2:ze,"stroke-width":Je,stroke:lt,"stroke-dasharray":r.dashStyle(ne.spikedash,Je)}).classed("spikeline",!0).classed("crisp",!0),ae.insert("line",":first-child").attr({x1:Te,x2:Te,y1:Re,y2:ze,"stroke-width":Je+2,stroke:ve}).classed("spikeline",!0).classed("crisp",!0)}We.indexOf("marker")!==-1&&ae.insert("circle",":first-child").attr({cx:Te,cy:et-(ne.side!=="top"?Je:-Je),r:Je,fill:lt}).classed("spikeline",!0)}}}function F(q,Z){return!Z||Z.vLinePoint!==q._spikepoints.vLinePoint||Z.hLinePoint!==q._spikepoints.hLinePoint}function V(q,Z){return e.plainText(q||"",{len:Z,allowedTags:["br","sub","sup","b","i","em"]})}function W(q,Z,J){var ne=Z[q+"a"],re=Z[q+"Val"],ae=Z.cd[0];if(ne.type==="category"||ne.type==="multicategory")re=ne._categoriesMap[re];else if(ne.type==="date"){var ue=Z.trace[q+"periodalignment"];if(ue){var he=Z.cd[Z.index],de=he[q+"Start"];de===void 0&&(de=he[q]);var xe=he[q+"End"];xe===void 0&&(xe=he[q]);var me=xe-de;ue==="end"?re+=me:ue==="middle"&&(re+=me/2)}re=ne.d2c(re)}return ae&&ae.t&&ae.t.posLetter===ne._id&&(J.boxmode!=="group"&&J.violinmode!=="group"||(re+=ae.t.dPos)),re}function te(q){return q.offsetTop+q.clientTop}function Q(q){return q.offsetLeft+q.clientLeft}function X(q,Z){var J=q._fullLayout,ne=Z.getBoundingClientRect(),re=ne.left,ae=ne.top,ue=re+ne.width,he=ae+ne.height,de=_.apply3DTransform(J._invTransform)(re,ae),xe=_.apply3DTransform(J._invTransform)(ue,he),me=de[0],ve=de[1],Le=xe[0],Ae=xe[1];return{x:me,y:ve,width:Le-me,height:Ae-ve,top:Math.min(ve,Ae),left:Math.min(me,Le),right:Math.max(me,Le),bottom:Math.max(ve,Ae)}}},38048:function($,P,t){var A=t(71828),M=t(7901),l=t(23469).isUnifiedHover;$.exports=function(_,m,f,o){o=o||{};var e=m.legend;function i(r){o.font[r]||(o.font[r]=e?m.legend.font[r]:m.font[r])}m&&l(m.hovermode)&&(o.font||(o.font={}),i("size"),i("family"),i("color"),e?(o.bgcolor||(o.bgcolor=M.combine(m.legend.bgcolor,m.paper_bgcolor)),o.bordercolor||(o.bordercolor=m.legend.bordercolor)):o.bgcolor||(o.bgcolor=m.paper_bgcolor)),f("hoverlabel.bgcolor",o.bgcolor),f("hoverlabel.bordercolor",o.bordercolor),f("hoverlabel.namelength",o.namelength),A.coerceFont(f,"hoverlabel.font",o.font),f("hoverlabel.align",o.align)}},98212:function($,P,t){var A=t(71828),M=t(528);$.exports=function(l,_){function m(f,o){return _[f]!==void 0?_[f]:A.coerce(l,_,M,f,o)}return m("clickmode"),m("hovermode")}},30211:function($,P,t){var A=t(39898),M=t(71828),l=t(28569),_=t(23469),m=t(528),f=t(88335);$.exports={moduleType:"component",name:"fx",constants:t(26675),schema:{layout:m},attributes:t(77914),layoutAttributes:m,supplyLayoutGlobalDefaults:t(22774),supplyDefaults:t(54268),supplyLayoutDefaults:t(34938),calc:t(30732),getDistanceFunction:_.getDistanceFunction,getClosest:_.getClosest,inbox:_.inbox,quadrature:_.quadrature,appendArrayPointValue:_.appendArrayPointValue,castHoverOption:function(o,e,i){return M.castOption(o,e,"hoverlabel."+i)},castHoverinfo:function(o,e,i){return M.castOption(o,i,"hoverinfo",function(r){return M.coerceHoverinfo({hoverinfo:r},{_module:o._module},e)})},hover:f.hover,unhover:l.unhover,loneHover:f.loneHover,loneUnhover:function(o){var e=M.isD3Selection(o)?o:A.select(o);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t(75914)}},528:function($,P,t){var A=t(26675),M=t(41940),l=M({editType:"none"});l.family.dflt=A.HOVERFONT,l.size.dflt=A.HOVERFONTSIZE,$.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:l,grouptitlefont:M({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},34938:function($,P,t){var A=t(71828),M=t(528),l=t(98212),_=t(38048);$.exports=function(m,f){function o(n,s){return A.coerce(m,f,M,n,s)}l(m,f)&&(o("hoverdistance"),o("spikedistance")),o("dragmode")==="select"&&o("selectdirection");var e=f._has("mapbox"),i=f._has("geo"),r=f._basePlotModules.length;f.dragmode==="zoom"&&((e||i)&&r===1||e&&i&&r===2)&&(f.dragmode="pan"),_(m,f,o),A.coerceFont(o,"hoverlabel.grouptitlefont",f.hoverlabel.font)}},22774:function($,P,t){var A=t(71828),M=t(38048),l=t(528);$.exports=function(_,m){M(_,m,function(f,o){return A.coerce(_,m,l,f,o)})}},83312:function($,P,t){var A=t(71828),M=t(30587).counter,l=t(27670).Y,_=t(85555).idRegex,m=t(44467),f={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[M("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:l({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function o(r,n,s){var a=n[s+"axes"],u=Object.keys((r._splomAxes||{})[s]||{});return Array.isArray(a)?a:u.length?u:void 0}function e(r,n,s,a,u,p){var c=n(r+"gap",s),x=n("domain."+r);n(r+"side",a);for(var g=new Array(u),h=x[0],b=(x[1]-h)/(u-c),v=b*(1-c),y=0;y<u;y++){var w=h+b*y;g[p?u-1-y:y]=[w,w+v]}return g}function i(r,n,s,a,u){var p,c=new Array(s);function x(g,h){n.indexOf(h)!==-1&&a[h]===void 0?(c[g]=h,a[h]=g):c[g]=""}if(Array.isArray(r))for(p=0;p<s;p++)x(p,r[p]);else for(x(0,u),p=1;p<s;p++)x(p,u+(p+1));return c}$.exports={moduleType:"component",name:"grid",schema:{layout:{grid:f}},layoutAttributes:f,sizeDefaults:function(r,n){var s=r.grid||{},a=o(n,s,"x"),u=o(n,s,"y");if(r.grid||a||u){var p,c,x=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),g=Array.isArray(a),h=Array.isArray(u),b=g&&a!==s.xaxes&&h&&u!==s.yaxes;x?(p=s.subplots.length,c=s.subplots[0].length):(h&&(p=u.length),g&&(c=a.length));var v=m.newContainer(n,"grid"),y=L("rows",p),w=L("columns",c);if(y*w>1){x||g||h||L("pattern")==="independent"&&(x=!0),v._hasSubplotGrid=x;var d,S,T=L("roworder")==="top to bottom",E=x?.2:.1,C=x?.3:.1;b&&n._splomGridDflt&&(d=n._splomGridDflt.xside,S=n._splomGridDflt.yside),v._domains={x:e("x",L,E,d,w),y:e("y",L,C,S,y,T)}}else delete n.grid}function L(O,z){return A.coerce(s,v,f,O,z)}},contentDefaults:function(r,n){var s=n.grid;if(s&&s._domains){var a,u,p,c,x,g,h,b=r.grid||{},v=n._subplots,y=s._hasSubplotGrid,w=s.rows,d=s.columns,S=s.pattern==="independent",T=s._axisMap={};if(y){var E=b.subplots||[];g=s.subplots=new Array(w);var C=1;for(a=0;a<w;a++){var L=g[a]=new Array(d),O=E[a]||[];for(u=0;u<d;u++)if(S?(x=C===1?"xy":"x"+C+"y"+C,C++):x=O[u],L[u]="",v.cartesian.indexOf(x)!==-1){if(h=x.indexOf("y"),p=x.slice(0,h),c=x.slice(h),T[p]!==void 0&&T[p]!==u||T[c]!==void 0&&T[c]!==a)continue;L[u]=x,T[p]=u,T[c]=a}}}else{var z=o(n,b,"x"),G=o(n,b,"y");s.xaxes=i(z,v.xaxis,d,T,"x"),s.yaxes=i(G,v.yaxis,w,T,"y")}var I=s._anchors={},H=s.roworder==="top to bottom";for(var N in T){var F,V,W,te=N.charAt(0),Q=s[te+"side"];if(Q.length<8)I[N]="free";else if(te==="x"){if(Q.charAt(0)==="t"===H?(F=0,V=1,W=w):(F=w-1,V=-1,W=-1),y){var X=T[N];for(a=F;a!==W;a+=V)if((x=g[a][X])&&(h=x.indexOf("y"),x.slice(0,h)===N)){I[N]=x.slice(h);break}}else for(a=F;a!==W;a+=V)if(c=s.yaxes[a],v.cartesian.indexOf(N+c)!==-1){I[N]=c;break}}else if(Q.charAt(0)==="l"?(F=0,V=1,W=d):(F=d-1,V=-1,W=-1),y){var q=T[N];for(a=F;a!==W;a+=V)if((x=g[q][a])&&(h=x.indexOf("y"),x.slice(h)===N)){I[N]=x.slice(0,h);break}}else for(a=F;a!==W;a+=V)if(p=s.xaxes[a],v.cartesian.indexOf(p+N)!==-1){I[N]=p;break}}}}}},69819:function($,P,t){var A=t(85555),M=t(44467).templatedArray;t(24695),$.exports=M("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},75378:function($,P,t){var A=t(92770),M=t(58163);$.exports=function(l,_,m,f){_=_||{};var o=m==="log"&&_.type==="linear",e=m==="linear"&&_.type==="log";if(o||e){for(var i,r,n=l._fullLayout.images,s=_._id.charAt(0),a=0;a<n.length;a++)if(r="images["+a+"].",(i=n[a])[s+"ref"]===_._id){var u=i[s],p=i["size"+s],c=null,x=null;if(o){c=M(u,_.range);var g=p/Math.pow(10,c)/2;x=2*Math.log(g+Math.sqrt(1+g*g))/Math.LN10}else x=(c=Math.pow(10,u))*(Math.pow(10,p/2)-Math.pow(10,-p/2));A(c)?A(x)||(x=null):(c=null,x=null),f(r+s,c),f(r+"size"+s,x)}}}},81603:function($,P,t){var A=t(71828),M=t(89298),l=t(85501),_=t(69819);function m(f,o,e){function i(c,x){return A.coerce(f,o,_,c,x)}var r=i("source");if(!i("visible",!!r))return o;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var n={_fullLayout:e},s=["x","y"],a=0;a<2;a++){var u=s[a],p=M.coerceRef(f,o,n,u,"paper",void 0);p!=="paper"&&M.getFromId(n,p)._imgIndices.push(o._index),M.coercePosition(o,n,i,p,u,0)}return o}$.exports=function(f,o){l(f,o,{name:"images",handleItemDefaults:m})}},80750:function($,P,t){var A=t(39898),M=t(91424),l=t(89298),_=t(41675),m=t(77922);$.exports=function(f){var o,e,i=f._fullLayout,r=[],n={},s=[];for(e=0;e<i.images.length;e++){var a=i.images[e];if(a.visible)if(a.layer==="below"&&a.xref!=="paper"&&a.yref!=="paper"){o=_.ref2id(a.xref)+_.ref2id(a.yref);var u=i._plots[o];if(!u){s.push(a);continue}u.mainplot&&(o=u.mainplot.id),n[o]||(n[o]=[]),n[o].push(a)}else a.layer==="above"?r.push(a):s.push(a)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},c={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function x(d){var S=A.select(this);if(this._imgSrc!==d.source)if(S.attr("xmlns",m.svg),d.source&&d.source.slice(0,5)==="data:")S.attr("xlink:href",d.source),this._imgSrc=d.source;else{var T=new Promise((function(E){var C=new Image;function L(){S.remove(),E()}this.img=C,C.setAttribute("crossOrigin","anonymous"),C.onerror=L,C.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height,O.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var z=O.toDataURL("image/png");S.attr("xlink:href",z),E()},S.on("error",L),C.src=d.source,this._imgSrc=d.source}).bind(this));f._promises.push(T)}}function g(d){var S,T,E=A.select(this),C=l.getFromId(f,d.xref),L=l.getFromId(f,d.yref),O=l.getRefType(d.xref)==="domain",z=l.getRefType(d.yref)==="domain",G=i._size;S=C!==void 0?typeof d.xref=="string"&&O?C._length*d.sizex:Math.abs(C.l2p(d.sizex)-C.l2p(0)):d.sizex*G.w,T=L!==void 0?typeof d.yref=="string"&&z?L._length*d.sizey:Math.abs(L.l2p(d.sizey)-L.l2p(0)):d.sizey*G.h;var I,H,N=S*p[d.xanchor].offset,F=T*c[d.yanchor].offset,V=p[d.xanchor].sizing+c[d.yanchor].sizing;switch(I=C!==void 0?typeof d.xref=="string"&&O?C._length*d.x+C._offset:C.r2p(d.x)+C._offset:d.x*G.w+G.l,I+=N,H=L!==void 0?typeof d.yref=="string"&&z?L._length*(1-d.y)+L._offset:L.r2p(d.y)+L._offset:G.h-d.y*G.h+G.t,H+=F,d.sizing){case"fill":V+=" slice";break;case"stretch":V="none"}E.attr({x:I,y:H,width:S,height:T,preserveAspectRatio:V,opacity:d.opacity});var W=(C&&l.getRefType(d.xref)!=="domain"?C._id:"")+(L&&l.getRefType(d.yref)!=="domain"?L._id:"");M.setClipUrl(E,W?"clip"+i._uid+W:null,f)}var h=i._imageLowerLayer.selectAll("image").data(s),b=i._imageUpperLayer.selectAll("image").data(r);h.enter().append("image"),b.enter().append("image"),h.exit().remove(),b.exit().remove(),h.each(function(d){x.bind(this)(d),g.bind(this)(d)}),b.each(function(d){x.bind(this)(d),g.bind(this)(d)});var v=Object.keys(i._plots);for(e=0;e<v.length;e++){o=v[e];var y=i._plots[o];if(y.imagelayer){var w=y.imagelayer.selectAll("image").data(n[o]||[]);w.enter().append("image"),w.exit().remove(),w.each(function(d){x.bind(this)(d),g.bind(this)(d)})}}}},68804:function($,P,t){$.exports={moduleType:"component",name:"images",layoutAttributes:t(69819),supplyLayoutDefaults:t(81603),includeBasePlot:t(76325)("images"),draw:t(80750),convertCoords:t(75378)}},33030:function($,P,t){var A=t(41940),M=t(22399);$.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:A({editType:"legend"}),grouptitlefont:A({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:A({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},14928:function($){$.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},99017:function($,P,t){var A=t(73972),M=t(71828),l=t(44467),_=t(9012),m=t(33030),f=t(10820),o=t(10130);function e(i,r,n,s){var a=r[i]||{},u=l.newContainer(n,i);function p(V,W){return M.coerce(a,u,m,V,W)}var c=M.coerceFont(p,"font",n.font);if(p("bgcolor",n.paper_bgcolor),p("bordercolor"),p("visible")){for(var x,g=function(V,W){var te=x._input,Q=x;return M.coerce(te,Q,_,V,W)},h=n.font||{},b=M.coerceFont(p,"grouptitlefont",M.extendFlat({},h,{size:Math.round(1.1*h.size)})),v=0,y=!1,w="normal",d=(n.shapes||[]).filter(function(V){return V.showlegend}),S=s.concat(d).filter(function(V){return i===(V.legend||"legend")}),T=0;T<S.length;T++)if((x=S[T]).visible){var E=x._isShape;(x.showlegend||x._dfltShowLegend&&!(x._module&&x._module.attributes&&x._module.attributes.showlegend&&x._module.attributes.showlegend.dflt===!1))&&(v++,x.showlegend&&(y=!0,(!E&&A.traceIs(x,"pie-like")||x._input.showlegend===!0)&&v++),M.coerceFont(g,"legendgrouptitle.font",b)),(!E&&A.traceIs(x,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(x.fill)!==-1)&&(w=o.isGrouped({traceorder:w})?"grouped+reversed":"reversed"),x.legendgroup!==void 0&&x.legendgroup!==""&&(w=o.isReversed({traceorder:w})?"reversed+grouped":"grouped")}var C=M.coerce(r,n,f,"showlegend",y&&v>(i==="legend"?1:0));if(C===!1&&(n[i]=void 0),(C!==!1||a.uirevision)&&(p("uirevision",n.uirevision),C!==!1)){p("borderwidth");var L,O,z,G=p("orientation")==="h",I=p("yref")==="paper",H=p("xref")==="paper",N="left";if(G?(L=0,A.getComponentMethod("rangeslider","isVisible")(r.xaxis)?I?(O=1.1,z="bottom"):(O=1,z="top"):I?(O=-.1,z="top"):(O=0,z="bottom")):(O=1,z="auto",H?L=1.02:(L=1,N="right")),M.coerce(a,u,{x:{valType:"number",editType:"legend",min:H?-2:0,max:H?3:1,dflt:L}},"x"),M.coerce(a,u,{y:{valType:"number",editType:"legend",min:I?-2:0,max:I?3:1,dflt:O}},"y"),p("traceorder",w),o.isGrouped(n[i])&&p("tracegroupgap"),p("entrywidth"),p("entrywidthmode"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("xanchor",N),p("yanchor",z),p("valign"),M.noneOrAll(a,u,["x","y"]),p("title.text")){p("title.side",G?"left":"top");var F=M.extendFlat({},c,{size:M.bigFont(c.size)});M.coerceFont(p,"title.font",F)}}}}$.exports=function(i,r,n){var s,a=n.slice(),u=r.shapes;if(u)for(s=0;s<u.length;s++){var p=u[s];if(p.showlegend){var c={_input:p._input,visible:p.visible,showlegend:p.showlegend,legend:p.legend};a.push(c)}}var x=["legend"];for(s=0;s<a.length;s++)M.pushUnique(x,a[s].legend);for(r._legends=[],s=0;s<x.length;s++){var g=x[s];e(g,i,r,a),r[g]&&r[g].visible&&(r[g]._id=g),r._legends.push(g)}}},43969:function($,P,t){var A=t(39898),M=t(71828),l=t(74875),_=t(73972),m=t(11086),f=t(28569),o=t(91424),e=t(7901),i=t(63893),r=t(85167),n=t(14928),s=t(18783),a=s.LINE_SPACING,u=s.FROM_TL,p=s.FROM_BR,c=t(82424),x=t(53630),g=t(10130),h=1,b=/^legend[0-9]*$/;function v(z,G){var I,H,N=G||{},F=z._fullLayout,V=O(N),W=N._inHover;if(W?(H=N.layer,I="hover"):(H=F._infolayer,I=V),H){var te;if(I+=F._uid,z._legendMouseDownTime||(z._legendMouseDownTime=0),W){if(!N.entries)return;te=c(N.entries,N)}else{for(var Q=(z.calcdata||[]).slice(),X=F.shapes,q=0;q<X.length;q++){var Z=X[q];if(Z.showlegend){var J={_isShape:!0,_fullInput:Z,index:Z._index,name:Z.name||Z.label.text||"shape "+Z._index,legend:Z.legend,legendgroup:Z.legendgroup,legendgrouptitle:Z.legendgrouptitle,legendrank:Z.legendrank,legendwidth:Z.legendwidth,showlegend:Z.showlegend,visible:Z.visible,opacity:Z.opacity,mode:Z.type==="line"?"lines":"markers",line:Z.line,marker:{line:Z.line,color:Z.fillcolor,size:12,symbol:Z.type==="rect"?"square":Z.type==="circle"?"circle":"hexagon2"}};Q.push([{trace:J}])}}te=F.showlegend&&c(Q,N,F._legends.length>1)}var ne=F.hiddenlabels||[];if(!(W||F.showlegend&&te.length))return H.selectAll("."+V).remove(),F._topdefs.select("#"+I).remove(),l.autoMargin(z,V);var re=M.ensureSingle(H,"g",V,function(Ae){W||Ae.attr("pointer-events","all")}),ae=M.ensureSingleById(F._topdefs,"clipPath",I,function(Ae){Ae.append("rect")}),ue=M.ensureSingle(re,"rect","bg",function(Ae){Ae.attr("shape-rendering","crispEdges")});ue.call(e.stroke,N.bordercolor).call(e.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");var he,de=M.ensureSingle(re,"g","scrollbox"),xe=N.title;N._titleWidth=0,N._titleHeight=0,xe.text?((he=M.ensureSingle(de,"text",V+"titletext")).attr("text-anchor","start").call(o.font,xe.font).text(xe.text),E(he,de,z,N,h)):de.selectAll("."+V+"titletext").remove();var me=M.ensureSingle(re,"rect","scrollbar",function(Ae){Ae.attr(n.scrollBarEnterAttrs).call(e.fill,n.scrollBarColor)}),ve=de.selectAll("g.groups").data(te);ve.enter().append("g").attr("class","groups"),ve.exit().remove();var Le=ve.selectAll("g.traces").data(M.identity);Le.enter().append("g").attr("class","traces"),Le.exit().remove(),Le.style("opacity",function(Ae){var we=Ae[0].trace;return _.traceIs(we,"pie-like")?ne.indexOf(Ae[0].label)!==-1?.5:1:we.visible==="legendonly"?.5:1}).each(function(){A.select(this).call(d,z,N)}).call(x,z,N).each(function(){W||A.select(this).call(T,z,V)}),M.syncOrAsync([l.previousPromises,function(){return function(Ae,we,se,oe){var fe=Ae._fullLayout,Se=O(oe);oe||(oe=fe[Se]);var Me=fe._size,be=g.isVertical(oe),Ie=g.isGrouped(oe),Be=oe.entrywidthmode==="fraction",ce=oe.borderwidth,Te=2*ce,ye=n.itemGap,Pe=oe.itemwidth+2*ye,Re=2*(ce+ye),ze=L(oe),He=oe.y<0||oe.y===0&&ze==="top",We=oe.y>1||oe.y===1&&ze==="bottom",Je=oe.tracegroupgap,lt={};oe._maxHeight=Math.max(He||We?fe.height/2:Me.h,30);var et=0;oe._width=0,oe._height=0;var yt=function(dt){var mt=0,ft=0,kt=dt.title.side;return kt&&(kt.indexOf("left")!==-1&&(mt=dt._titleWidth),kt.indexOf("top")!==-1&&(ft=dt._titleHeight)),[mt,ft]}(oe);if(be)se.each(function(dt){var mt=dt[0].height;o.setTranslate(this,ce+yt[0],ce+yt[1]+oe._height+mt/2+ye),oe._height+=mt,oe._width=Math.max(oe._width,dt[0].width)}),et=Pe+oe._width,oe._width+=ye+Pe+Te,oe._height+=Re,Ie&&(we.each(function(dt,mt){o.setTranslate(this,0,mt*oe.tracegroupgap)}),oe._height+=(oe._lgroupsLength-1)*oe.tracegroupgap);else{var _t=C(oe),xt=oe.x<0||oe.x===0&&_t==="right",at=oe.x>1||oe.x===1&&_t==="left",ot=We||He,At=fe.width/2;oe._maxWidth=Math.max(xt?ot&&_t==="left"?Me.l+Me.w:At:at?ot&&_t==="right"?Me.r+Me.w:At:Me.w,2*Pe);var Ct=0,zt=0;se.each(function(dt){var mt=y(dt,oe,Pe);Ct=Math.max(Ct,mt),zt+=mt}),et=null;var St=0;if(Ie){var qe=0,Xe=0,Ve=0;we.each(function(){var dt=0,mt=0;A.select(this).selectAll("g.traces").each(function(kt){var ht=y(kt,oe,Pe),pt=kt[0].height;o.setTranslate(this,yt[0],yt[1]+ce+ye+pt/2+mt),mt+=pt,dt=Math.max(dt,ht),lt[kt[0].trace.legendgroup]=dt});var ft=dt+ye;Xe>0&&ft+ce+Xe>oe._maxWidth?(St=Math.max(St,Xe),Xe=0,Ve+=qe+Je,qe=mt):qe=Math.max(qe,mt),o.setTranslate(this,Xe,Ve),Xe+=ft}),oe._width=Math.max(St,Xe)+ce,oe._height=Ve+qe+Re}else{var Ze=se.size(),st=zt+Te+(Ze-1)*ye<oe._maxWidth,nt=0,De=0,Fe=0,rt=0;se.each(function(dt){var mt=dt[0].height,ft=y(dt,oe,Pe),kt=st?ft:Ct;Be||(kt+=ye),kt+ce+De-ye>=oe._maxWidth&&(St=Math.max(St,rt),De=0,Fe+=nt,oe._height+=nt,nt=0),o.setTranslate(this,yt[0]+ce+De,yt[1]+ce+Fe+mt/2+ye),rt=De+ft+ye,De+=kt,nt=Math.max(nt,mt)}),st?(oe._width=De+Te,oe._height=nt+Re):(oe._width=Math.max(St,rt)+Te,oe._height+=nt+Re)}}oe._width=Math.ceil(Math.max(oe._width+yt[0],oe._titleWidth+2*(ce+n.titlePad))),oe._height=Math.ceil(Math.max(oe._height+yt[1],oe._titleHeight+2*(ce+n.itemGap))),oe._effHeight=Math.min(oe._height,oe._maxHeight);var tt=Ae._context.edits,gt=tt.legendText||tt.legendPosition;se.each(function(dt){var mt=A.select(this).select("."+Se+"toggle"),ft=dt[0].height,kt=dt[0].trace.legendgroup,ht=y(dt,oe,Pe);Ie&&kt!==""&&(ht=lt[kt]);var pt=gt?Pe:et||ht;be||Be||(pt+=ye/2),o.setRect(mt,0,-ft/2,pt,ft)})}(z,ve,Le,N)},function(){var Ae,we,se,oe,fe=F._size,Se=N.borderwidth,Me=N.xref==="paper",be=N.yref==="paper";if(xe.text&&function(ot,At,Ct){if(At.title.side==="top center"||At.title.side==="top right"){var zt=At.title.font.size*a,St=0,qe=ot.node(),Xe=o.bBox(qe).width;At.title.side==="top center"?St=.5*(At._width-2*Ct-2*n.titlePad-Xe):At.title.side==="top right"&&(St=At._width-2*Ct-2*n.titlePad-Xe),i.positionText(ot,Ct+n.titlePad+St,Ct+zt)}}(he,N,Se),!W){var Ie,Be;Ie=Me?fe.l+fe.w*N.x-u[C(N)]*N._width:F.width*N.x-u[C(N)]*N._width,Be=be?fe.t+fe.h*(1-N.y)-u[L(N)]*N._effHeight:F.height*(1-N.y)-u[L(N)]*N._effHeight;var ce=function(ot,At,Ct,zt){var St=ot._fullLayout,qe=St[At],Xe=C(qe),Ve=L(qe),Ze=qe.xref==="paper",st=qe.yref==="paper";ot._fullLayout._reservedMargin[At]={};var nt=qe.y<.5?"b":"t",De=qe.x<.5?"l":"r",Fe={r:St.width-Ct,l:Ct+qe._width,b:St.height-zt,t:zt+qe._effHeight};if(Ze&&st)return l.autoMargin(ot,At,{x:qe.x,y:qe.y,l:qe._width*u[Xe],r:qe._width*p[Xe],b:qe._effHeight*p[Ve],t:qe._effHeight*u[Ve]});Ze?ot._fullLayout._reservedMargin[At][nt]=Fe[nt]:st||qe.orientation==="v"?ot._fullLayout._reservedMargin[At][De]=Fe[De]:ot._fullLayout._reservedMargin[At][nt]=Fe[nt]}(z,V,Ie,Be);if(ce)return;if(F.margin.autoexpand){var Te=Ie,ye=Be;Ie=Me?M.constrain(Ie,0,F.width-N._width):Te,Be=be?M.constrain(Be,0,F.height-N._effHeight):ye,Ie!==Te&&M.log("Constrain "+V+".x to make legend fit inside graph"),Be!==ye&&M.log("Constrain "+V+".y to make legend fit inside graph")}o.setTranslate(re,Ie,Be)}if(me.on(".drag",null),re.on("wheel",null),W||N._height<=N._maxHeight||z._context.staticPlot){var Pe=N._effHeight;W&&(Pe=N._height),ue.attr({width:N._width-Se,height:Pe-Se,x:Se/2,y:Se/2}),o.setTranslate(de,0,0),ae.select("rect").attr({width:N._width-2*Se,height:Pe-2*Se,x:Se,y:Se}),o.setClipUrl(de,I,z),o.setRect(me,0,0,0,0),delete N._scrollY}else{var Re,ze,He,We=Math.max(n.scrollBarMinHeight,N._effHeight*N._effHeight/N._height),Je=N._effHeight-We-2*n.scrollBarMargin,lt=N._height-N._effHeight,et=Je/lt,yt=Math.min(N._scrollY||0,lt);ue.attr({width:N._width-2*Se+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-Se,x:Se/2,y:Se/2}),ae.select("rect").attr({width:N._width-2*Se+n.scrollBarWidth+n.scrollBarMargin,height:N._effHeight-2*Se,x:Se,y:Se+yt}),o.setClipUrl(de,I,z),at(yt,We,et),re.on("wheel",function(){at(yt=M.constrain(N._scrollY+A.event.deltaY/Je*lt,0,lt),We,et),yt!==0&&yt!==lt&&A.event.preventDefault()});var _t=A.behavior.drag().on("dragstart",function(){var ot=A.event.sourceEvent;Re=ot.type==="touchstart"?ot.changedTouches[0].clientY:ot.clientY,He=yt}).on("drag",function(){var ot=A.event.sourceEvent;ot.buttons===2||ot.ctrlKey||(ze=ot.type==="touchmove"?ot.changedTouches[0].clientY:ot.clientY,yt=function(At,Ct,zt){var St=(zt-Ct)/et+At;return M.constrain(St,0,lt)}(He,Re,ze),at(yt,We,et))});me.call(_t);var xt=A.behavior.drag().on("dragstart",function(){var ot=A.event.sourceEvent;ot.type==="touchstart"&&(Re=ot.changedTouches[0].clientY,He=yt)}).on("drag",function(){var ot=A.event.sourceEvent;ot.type==="touchmove"&&(ze=ot.changedTouches[0].clientY,yt=function(At,Ct,zt){var St=(Ct-zt)/et+At;return M.constrain(St,0,lt)}(He,Re,ze),at(yt,We,et))});de.call(xt)}function at(ot,At,Ct){N._scrollY=z._fullLayout[V]._scrollY=ot,o.setTranslate(de,0,-ot),o.setRect(me,N._width,n.scrollBarMargin+ot*Ct,n.scrollBarWidth,At),ae.select("rect").attr("y",Se+ot)}z._context.edits.legendPosition&&(re.classed("cursor-move",!0),f.init({element:re.node(),gd:z,prepFn:function(){var ot=o.getTranslate(re);se=ot.x,oe=ot.y},moveFn:function(ot,At){var Ct=se+ot,zt=oe+At;o.setTranslate(re,Ct,zt),Ae=f.align(Ct,N._width,fe.l,fe.l+fe.w,N.xanchor),we=f.align(zt+N._height,-N._height,fe.t+fe.h,fe.t,N.yanchor)},doneFn:function(){if(Ae!==void 0&&we!==void 0){var ot={};ot[V+".x"]=Ae,ot[V+".y"]=we,_.call("_guiRelayout",z,ot)}},clickFn:function(ot,At){var Ct=H.selectAll("g.traces").filter(function(){var zt=this.getBoundingClientRect();return At.clientX>=zt.left&&At.clientX<=zt.right&&At.clientY>=zt.top&&At.clientY<=zt.bottom});Ct.size()>0&&w(z,re,Ct,ot,At)}}))}],z)}}function y(z,G,I){var H=z[0],N=H.width,F=G.entrywidthmode,V=H.trace.legendwidth||G.entrywidth;return F==="fraction"?G._maxWidth*V:I+(V||N)}function w(z,G,I,H,N){var F=I.data()[0][0].trace,V={event:N,node:I.node(),curveNumber:F.index,expandedIndex:F._expandedIndex,data:z.data,layout:z.layout,frames:z._transitionData._frames,config:z._context,fullData:z._fullData,fullLayout:z._fullLayout};F._group&&(V.group=F._group),_.traceIs(F,"pie-like")&&(V.label=I.datum()[0].label);var W=m.triggerHandler(z,"plotly_legendclick",V);if(H===1){if(W===!1)return;G._clickTimeout=setTimeout(function(){z._fullLayout&&r(I,z,H)},z._context.doubleClickDelay)}else H===2&&(G._clickTimeout&&clearTimeout(G._clickTimeout),z._legendMouseDownTime=0,m.triggerHandler(z,"plotly_legenddoubleclick",V)!==!1&&W!==!1&&r(I,z,H))}function d(z,G,I){var H,N,F=O(I),V=z.data()[0][0],W=V.trace,te=_.traceIs(W,"pie-like"),Q=!I._inHover&&G._context.edits.legendText&&!te,X=I._maxNameLength;V.groupTitle?(H=V.groupTitle.text,N=V.groupTitle.font):(N=I.font,I.entries?H=V.text:(H=te?V.label:W.name,W._meta&&(H=M.templateString(H,W._meta))));var q=M.ensureSingle(z,"text",F+"text");q.attr("text-anchor","start").call(o.font,N).text(Q?S(H,X):H);var Z=I.itemwidth+2*n.itemGap;i.positionText(q,Z,0),Q?q.call(i.makeEditable,{gd:G,text:H}).call(E,z,G,I).on("edit",function(J){this.text(S(J,X)).call(E,z,G,I);var ne=V.trace._fullInput||{},re={};if(_.hasTransform(ne,"groupby")){var ae=_.getTransformIndices(ne,"groupby"),ue=ae[ae.length-1],he=M.keyedContainer(ne,"transforms["+ue+"].styles","target","value.name");he.set(V.trace._group,J),re=he.constructUpdate()}else re.name=J;return ne._isShape?_.call("_guiRelayout",G,"shapes["+W.index+"].name",re.name):_.call("_guiRestyle",G,re,W.index)}):E(q,z,G,I)}function S(z,G){var I=Math.max(4,G);if(z&&z.trim().length>=I/2)return z;for(var H=I-(z=z||"").length;H>0;H--)z+=" ";return z}function T(z,G,I){var H,N=G._context.doubleClickDelay,F=1,V=M.ensureSingle(z,"rect",I+"toggle",function(W){G._context.staticPlot||W.style("cursor","pointer").attr("pointer-events","all"),W.call(e.fill,"rgba(0,0,0,0)")});G._context.staticPlot||(V.on("mousedown",function(){(H=new Date().getTime())-G._legendMouseDownTime<N?F+=1:(F=1,G._legendMouseDownTime=H)}),V.on("mouseup",function(){if(!G._dragged&&!G._editing){var W=G._fullLayout[I];new Date().getTime()-G._legendMouseDownTime>N&&(F=Math.max(F-1,1)),w(G,W,z,F,A.event)}}))}function E(z,G,I,H,N){H._inHover&&z.attr("data-notex",!0),i.convertToTspans(z,I,function(){(function(F,V,W,te){var Q=F.data()[0][0];if(W._inHover||!Q||Q.trace.showlegend){var X=F.select("g[class*=math-group]"),q=X.node(),Z=O(W);W||(W=V._fullLayout[Z]);var J,ne,re=W.borderwidth,ae=(te===h?W.title.font:Q.groupTitle?Q.groupTitle.font:W.font).size*a;if(q){var ue=o.bBox(q);J=ue.height,ne=ue.width,te===h?o.setTranslate(X,re,re+.75*J):o.setTranslate(X,0,.25*J)}else{var he="."+Z+(te===h?"title":"")+"text",de=F.select(he),xe=i.lineCount(de),me=de.node();if(J=ae*xe,ne=me?o.bBox(me).width:0,te===h)W.title.side==="left"&&(ne+=2*n.itemGap),i.positionText(de,re+n.titlePad,re+ae);else{var ve=2*n.itemGap+W.itemwidth;Q.groupTitle&&(ve=n.itemGap,ne-=W.itemwidth),i.positionText(de,ve,-ae*((xe-1)/2-.3))}}te===h?(W._titleWidth=ne,W._titleHeight=J):(Q.lineHeight=ae,Q.height=Math.max(J,16)+3,Q.width=ne)}else F.remove()})(G,I,H,N)})}function C(z){return M.isRightAnchor(z)?"right":M.isCenterAnchor(z)?"center":"left"}function L(z){return M.isBottomAnchor(z)?"bottom":M.isMiddleAnchor(z)?"middle":"top"}function O(z){return z._id||"legend"}$.exports=function(z,G){if(G)v(z,G);else{var I=z._fullLayout,H=I._legends;I._infolayer.selectAll('[class^="legend"]').each(function(){var V=A.select(this),W=V.attr("class").split(" ")[0];W.match(b)&&H.indexOf(W)===-1&&V.remove()});for(var N=0;N<H.length;N++){var F=H[N];v(z,z._fullLayout[F])}}}},82424:function($,P,t){var A=t(73972),M=t(10130);$.exports=function(l,_,m){var f,o,e=_._inHover,i=M.isGrouped(_),r=M.isReversed(_),n={},s=[],a=!1,u={},p=0,c=0;function x(H,N,F){if(_.visible!==!1&&(!m||H===_._id))if(N!==""&&M.isGrouped(_))s.indexOf(N)===-1?(s.push(N),a=!0,n[N]=[F]):n[N].push(F);else{var V="~~i"+p;s.push(V),n[V]=[F],p++}}for(f=0;f<l.length;f++){var g=l[f],h=g[0],b=h.trace,v=b.legend,y=b.legendgroup;if(e||b.visible&&b.showlegend)if(A.traceIs(b,"pie-like"))for(u[y]||(u[y]={}),o=0;o<g.length;o++){var w=g[o].label;u[y][w]||(x(v,y,{label:w,color:g[o].color,i:g[o].i,trace:b,pts:g[o].pts}),u[y][w]=!0,c=Math.max(c,(w||"").length))}else x(v,y,h),c=Math.max(c,(b.name||"").length)}if(!s.length)return[];var d=!a||!i,S=[];for(f=0;f<s.length;f++){var T=n[s[f]];d?S.push(T[0]):S.push(T)}for(d&&(S=[S]),f=0;f<S.length;f++){var E=1/0;for(o=0;o<S[f].length;o++){var C=S[f][o].trace.legendrank;E>C&&(E=C)}S[f][0]._groupMinRank=E,S[f][0]._preGroupSort=f}var L=function(H,N){return H.trace.legendrank-N.trace.legendrank||H._preSort-N._preSort};for(S.forEach(function(H,N){H[0]._preGroupSort=N}),S.sort(function(H,N){return H[0]._groupMinRank-N[0]._groupMinRank||H[0]._preGroupSort-N[0]._preGroupSort}),f=0;f<S.length;f++){S[f].forEach(function(H,N){H._preSort=N}),S[f].sort(L);var O=S[f][0].trace,z=null;for(o=0;o<S[f].length;o++){var G=S[f][o].trace.legendgrouptitle;if(G&&G.text){z=G,e&&(G.font=_._groupTitleFont);break}}if(r&&S[f].reverse(),z){var I=!1;for(o=0;o<S[f].length;o++)if(A.traceIs(S[f][o].trace,"pie-like")){I=!0;break}S[f].unshift({i:-1,groupTitle:z,noClick:I,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:_.groupclick==="toggleitem"||O.visible}})}for(o=0;o<S[f].length;o++)S[f][o]=[S[f][o]]}return _._lgroupsLength=S.length,_._maxNameLength=c,S}},85167:function($,P,t){var A=t(73972),M=t(71828),l=M.pushUnique,_=!0;$.exports=function(m,f,o){var e=f._fullLayout;if(!f._dragged&&!f._editing){var i,r=e.legend.itemclick,n=e.legend.itemdoubleclick,s=e.legend.groupclick;if(o===1&&r==="toggle"&&n==="toggleothers"&&_&&f.data&&f._context.showTips&&M.notifier(M._(f,"Double-click on legend to isolate one trace"),"long"),_=!1,o===1?i=r:o===2&&(i=n),i){var a=s==="togglegroup",u=e.hiddenlabels?e.hiddenlabels.slice():[],p=m.data()[0][0];if(!p.groupTitle||!p.noClick){var c=f._fullData,x=(e.shapes||[]).filter(function(we){return we.showlegend}),g=c.concat(x),h=p.trace;h._isShape&&(h=h._fullInput);var b,v,y,w,d,S=h.legendgroup,T={},E=[],C=[],L=[],O=(e.shapes||[]).map(function(we){return we._input}),z=!1,G=h.legend,I=h._fullInput;if(I&&I._isShape||!A.traceIs(h,"pie-like")){var H,N=S&&S.length,F=[];if(N)for(b=0;b<g.length;b++)(H=g[b]).visible&&H.legendgroup===S&&F.push(b);if(i==="toggle"){var V;switch(h.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(N)if(a)for(b=0;b<g.length;b++){var W=g[b];W.visible!==!1&&W.legendgroup===S&&Ae(W,V)}else Ae(h,V);else Ae(h,V)}else if(i==="toggleothers"){var te,Q,X,q,Z=!0;for(b=0;b<g.length;b++)if(te=(q=g[b])===h,Q=q.showlegend!==!0,!(te||Q||N&&q.legendgroup===S||q.legend!==G||q.visible!==!0||A.traceIs(q,"notLegendIsolatable"))){Z=!1;break}for(b=0;b<g.length;b++)if((q=g[b]).visible!==!1&&q.legend===G&&!A.traceIs(q,"notLegendIsolatable"))switch(h.visible){case"legendonly":Ae(q,!0);break;case!0:X=!!Z||"legendonly",te=q===h,Q=q.showlegend!==!0&&!q.legendgroup,Ae(q,!!(te||N&&q.legendgroup===S||Q)||X)}}for(b=0;b<C.length;b++)if(y=C[b]){var J=y.constructUpdate(),ne=Object.keys(J);for(v=0;v<ne.length;v++)w=ne[v],(T[w]=T[w]||[])[L[b]]=J[w]}for(d=Object.keys(T),b=0;b<d.length;b++)for(w=d[b],v=0;v<E.length;v++)T[w].hasOwnProperty(v)||(T[w][v]=void 0);z?A.call("_guiUpdate",f,T,{shapes:O},E):A.call("_guiRestyle",f,T,E)}else{var re=p.label,ae=u.indexOf(re);if(i==="toggle")ae===-1?u.push(re):u.splice(ae,1);else if(i==="toggleothers"){var ue=ae!==-1,he=[];for(b=0;b<f.calcdata.length;b++){var de=f.calcdata[b];for(v=0;v<de.length;v++){var xe=de[v].label;G===de[0].trace.legend&&re!==xe&&(u.indexOf(xe)===-1&&(ue=!0),l(u,xe),he.push(xe))}}if(!ue)for(var me=0;me<he.length;me++){var ve=u.indexOf(he[me]);ve!==-1&&u.splice(ve,1)}}A.call("_guiRelayout",f,"hiddenlabels",u)}}}}function Le(we,se){var oe=E.indexOf(we),fe=T.visible;return fe||(fe=T.visible=[]),E.indexOf(we)===-1&&(E.push(we),oe=E.length-1),fe[oe]=se,oe}function Ae(we,se){if(!p.groupTitle||a){var oe,fe=we._fullInput||we,Se=fe._isShape,Me=fe.index;if(Me===void 0&&(Me=fe._index),A.hasTransform(fe,"groupby")){var be=C[Me];if(!be){var Ie=A.getTransformIndices(fe,"groupby"),Be=Ie[Ie.length-1];be=M.keyedContainer(fe,"transforms["+Be+"].styles","target","value.visible"),C[Me]=be}var ce=be.get(we._group);ce===void 0&&(ce=!0),ce!==!1&&be.set(we._group,se),L[Me]=Le(Me,fe.visible!==!1)}else{var Te=fe.visible!==!1&&se;Se?(oe=Te,O[Me].visible=oe,z=!0):Le(Me,Te)}}}}},10130:function($,P){P.isGrouped=function(t){return(t.traceorder||"").indexOf("grouped")!==-1},P.isVertical=function(t){return t.orientation!=="h"},P.isReversed=function(t){return(t.traceorder||"").indexOf("reversed")!==-1}},2199:function($,P,t){$.exports={moduleType:"component",name:"legend",layoutAttributes:t(33030),supplyLayoutDefaults:t(99017),draw:t(43969),style:t(53630)}},53630:function($,P,t){var A=t(39898),M=t(73972),l=t(71828),_=l.strTranslate,m=t(91424),f=t(7901),o=t(52075).extractOpts,e=t(34098),i=t(63463),r=t(53581).castOption,n=t(14928);function s(p,c){return(c?"radial":"horizontal")+(p?"":"reversed")}function a(p){var c=p[0].trace,x=c.contours,g=e.hasLines(c),h=e.hasMarkers(c),b=c.visible&&c.fill&&c.fill!=="none",v=!1,y=!1;if(x){var w=x.coloring;w==="lines"?v=!0:g=w==="none"||w==="heatmap"||x.showlines,x.type==="constraint"?b=x._operation!=="=":w!=="fill"&&w!=="heatmap"||(y=!0)}return{showMarker:h,showLine:g,showFill:b,showGradientLine:v,showGradientFill:y,anyLine:g||v,anyFill:b||y}}function u(p,c,x){return p&&l.isArrayOrTypedArray(p)?c:p>x?x:p}$.exports=function(p,c,x){var g=c._fullLayout;x||(x=g.legend);var h=x.itemsizing==="constant",b=x.itemwidth,v=(b+2*n.itemGap)/2,y=_(v,0),w=function(T,E,C,L){var O;if(T+1)O=T;else{if(!(E&&E.width>0))return 0;O=E.width}return h?L:Math.min(O,C)};function d(T,E,C){var L=T[0].trace,O=L.marker||{},z=O.line||{},G=C?L.visible&&L.type===C:M.traceIs(L,"bar"),I=A.select(E).select("g.legendpoints").selectAll("path.legend"+C).data(G?[T]:[]);I.enter().append("path").classed("legend"+C,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),I.exit().remove(),I.each(function(H){var N=A.select(this),F=H[0],V=w(F.mlw,O.line,5,2);N.style("stroke-width",V+"px");var W=F.mcc;if(!x._inHover&&"mc"in F){var te=o(O),Q=te.mid;Q===void 0&&(Q=(te.max+te.min)/2),W=m.tryColorscale(O,"")(Q)}var X=W||F.mc||O.color,q=O.pattern,Z=q&&m.getPatternAttr(q.shape,0,"");if(Z){var J=m.getPatternAttr(q.bgcolor,0,null),ne=m.getPatternAttr(q.fgcolor,0,null),re=q.fgopacity,ae=u(q.size,8,10),ue=u(q.solidity,.5,1),he="legend-"+L.uid;N.call(m.pattern,"legend",c,he,Z,ae,ue,W,q.fillmode,J,ne,re)}else N.call(f.fill,X);V&&f.stroke(N,F.mlc||z.color)})}function S(T,E,C){var L=T[0],O=L.trace,z=C?O.visible&&O.type===C:M.traceIs(O,C),G=A.select(E).select("g.legendpoints").selectAll("path.legend"+C).data(z?[T]:[]);if(G.enter().append("path").classed("legend"+C,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),G.exit().remove(),G.size()){var I=O.marker||{},H=w(r(I.line.width,L.pts),I.line,5,2),N="pieLike",F=l.minExtend(O,{marker:{line:{width:H}}},N),V=l.minExtend(L,{trace:F},N);i(G,V,F,c)}}p.each(function(T){var E=A.select(this),C=l.ensureSingle(E,"g","layers");C.style("opacity",T[0].trace.opacity);var L=x.valign,O=T[0].lineHeight,z=T[0].height;if(L!=="middle"&&O&&z){var G={top:1,bottom:-1}[L]*(.5*(O-z+3));C.attr("transform",_(0,G))}else C.attr("transform",null);C.selectAll("g.legendfill").data([T]).enter().append("g").classed("legendfill",!0),C.selectAll("g.legendlines").data([T]).enter().append("g").classed("legendlines",!0);var I=C.selectAll("g.legendsymbols").data([T]);I.enter().append("g").classed("legendsymbols",!0),I.selectAll("g.legendpoints").data([T]).enter().append("g").classed("legendpoints",!0)}).each(function(T){var E,C=T[0].trace,L=[];if(C.visible)switch(C.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],E=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],E=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],E="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],E=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],E=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],E=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],E=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],E=!1}var O=A.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);O.enter().append("path").classed("legend3dandfriends",!0).attr("transform",y).style("stroke-miterlimit",1),O.exit().remove(),O.each(function(z,G){var I,H=A.select(this),N=o(C),F=N.colorscale,V=N.reversescale;if(F){if(!E){var W=F.length;I=G===0?F[V?W-1:0][1]:G===1?F[V?0:W-1][1]:F[Math.floor((W-1)/2)][1]}}else{var te=C.vertexcolor||C.facecolor||C.color;I=l.isArrayOrTypedArray(te)?te[G]||te[0]:te}H.attr("d",z[0]),I?H.call(f.fill,I):H.call(function(Q){if(Q.size()){var X="legendfill-"+C.uid;m.gradient(Q,c,X,s(V,E==="radial"),F,"fill")}})})}).each(function(T){var E=T[0].trace,C=E.type==="waterfall";if(T[0]._distinct&&C){var L=T[0].trace[T[0].dir].marker;return T[0].mc=L.color,T[0].mlw=L.line.width,T[0].mlc=L.line.color,d(T,this,"waterfall")}var O=[];E.visible&&C&&(O=T[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var z=A.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(O);z.enter().append("path").classed("legendwaterfall",!0).attr("transform",y).style("stroke-miterlimit",1),z.exit().remove(),z.each(function(G){var I=A.select(this),H=E[G[0]].marker,N=w(void 0,H.line,5,2);I.attr("d",G[1]).style("stroke-width",N+"px").call(f.fill,H.color),N&&I.call(f.stroke,H.line.color)})}).each(function(T){d(T,this,"funnel")}).each(function(T){d(T,this)}).each(function(T){var E=T[0].trace,C=A.select(this).select("g.legendpoints").selectAll("path.legendbox").data(E.visible&&M.traceIs(E,"box-violin")?[T]:[]);C.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",y),C.exit().remove(),C.each(function(){var L=A.select(this);if(E.boxpoints!=="all"&&E.points!=="all"||f.opacity(E.fillcolor)!==0||f.opacity((E.line||{}).color)!==0){var O=w(void 0,E.line,5,2);L.style("stroke-width",O+"px").call(f.fill,E.fillcolor),O&&f.stroke(L,E.line.color)}else{var z=l.minExtend(E,{marker:{size:h?12:l.constrain(E.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});C.call(m.pointStyle,z,c)}})}).each(function(T){S(T,this,"funnelarea")}).each(function(T){S(T,this,"pie")}).each(function(T){var E,C,L=a(T),O=L.showFill,z=L.showLine,G=L.showGradientLine,I=L.showGradientFill,H=L.anyFill,N=L.anyLine,F=T[0],V=F.trace,W=o(V),te=W.colorscale,Q=W.reversescale,X=e.hasMarkers(V)||!H?"M5,0":N?"M5,-2":"M5,-3",q=A.select(this),Z=q.select(".legendfill").selectAll("path").data(O||I?[T]:[]);if(Z.enter().append("path").classed("js-fill",!0),Z.exit().remove(),Z.attr("d",X+"h"+b+"v6h-"+b+"z").call(function(re){if(re.size())if(O)m.fillGroupStyle(re,c);else{var ae="legendfill-"+V.uid;m.gradient(re,c,ae,s(Q),te,"fill")}}),z||G){var J=w(void 0,V.line,10,5);C=l.minExtend(V,{line:{width:J}}),E=[l.minExtend(F,{trace:C})]}var ne=q.select(".legendlines").selectAll("path").data(z||G?[E]:[]);ne.enter().append("path").classed("js-line",!0),ne.exit().remove(),ne.attr("d",X+(G?"l"+b+",0.0001":"h"+b)).call(z?m.lineGroupStyle:function(re){if(re.size()){var ae="legendline-"+V.uid;m.lineGroupStyle(re),m.gradient(re,c,ae,s(Q),te,"stroke")}})}).each(function(T){var E,C,L=a(T),O=L.anyFill,z=L.anyLine,G=L.showLine,I=L.showMarker,H=T[0],N=H.trace,F=!I&&!z&&!O&&e.hasText(N);function V(ne,re,ae,ue){var he=l.nestedProperty(N,ne).get(),de=l.isArrayOrTypedArray(he)&&re?re(he):he;if(h&&de&&ue!==void 0&&(de=ue),ae){if(de<ae[0])return ae[0];if(de>ae[1])return ae[1]}return de}function W(ne){return H._distinct&&H.index&&ne[H.index]?ne[H.index]:ne[0]}if(I||F||G){var te={},Q={};if(I){te.mc=V("marker.color",W),te.mx=V("marker.symbol",W),te.mo=V("marker.opacity",l.mean,[.2,1]),te.mlc=V("marker.line.color",W),te.mlw=V("marker.line.width",l.mean,[0,5],2),Q.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var X=V("marker.size",l.mean,[2,16],12);te.ms=X,Q.marker.size=X}G&&(Q.line={width:V("line.width",W,[0,10],5)}),F&&(te.tx="Aa",te.tp=V("textposition",W),te.ts=10,te.tc=V("textfont.color",W),te.tf=V("textfont.family",W)),E=[l.minExtend(H,te)],(C=l.minExtend(N,Q)).selectedpoints=null,C.texttemplate=null}var q=A.select(this).select("g.legendpoints"),Z=q.selectAll("path.scatterpts").data(I?E:[]);Z.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",y),Z.exit().remove(),Z.call(m.pointStyle,C,c),I&&(E[0].mrc=3);var J=q.selectAll("g.pointtext").data(F?E:[]);J.enter().append("g").classed("pointtext",!0).append("text").attr("transform",y),J.exit().remove(),J.selectAll("text").call(m.textPointStyle,C,c)}).each(function(T){var E=T[0].trace,C=A.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(E.visible&&E.type==="candlestick"?[T,T]:[]);C.enter().append("path").classed("legendcandle",!0).attr("d",function(L,O){return O?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",y).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(L,O){var z=A.select(this),G=E[O?"increasing":"decreasing"],I=w(void 0,G.line,5,2);z.style("stroke-width",I+"px").call(f.fill,G.fillcolor),I&&f.stroke(z,G.line.color)})}).each(function(T){var E=T[0].trace,C=A.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(E.visible&&E.type==="ohlc"?[T,T]:[]);C.enter().append("path").classed("legendohlc",!0).attr("d",function(L,O){return O?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",y).style("stroke-miterlimit",1),C.exit().remove(),C.each(function(L,O){var z=A.select(this),G=E[O?"increasing":"decreasing"],I=w(void 0,G.line,5,2);z.style("fill","none").call(m.dashLine,G.line.dash,I),I&&f.stroke(z,G.line.color)})})}},42068:function($,P,t){t(93348),$.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},26023:function($,P,t){var A=t(73972),M=t(74875),l=t(41675),_=t(24255),m=t(34031).eraseActiveShape,f=t(71828),o=f._,e=$.exports={};function i(g,h){var b,v,y=h.currentTarget,w=y.getAttribute("data-attr"),d=y.getAttribute("data-val")||!0,S=g._fullLayout,T={},E=l.list(g,null,!0),C=S._cartesianSpikesEnabled;if(w==="zoom"){var L,O=d==="in"?.5:2,z=(1+O)/2,G=(1-O)/2;for(v=0;v<E.length;v++)if(!(b=E[v]).fixedrange)if(L=b._name,d==="auto")T[L+".autorange"]=!0;else if(d==="reset")b._rangeInitial0===void 0&&b._rangeInitial1===void 0?T[L+".autorange"]=!0:b._rangeInitial0===void 0?(T[L+".autorange"]=b._autorangeInitial,T[L+".range"]=[null,b._rangeInitial1]):b._rangeInitial1===void 0?(T[L+".range"]=[b._rangeInitial0,null],T[L+".autorange"]=b._autorangeInitial):T[L+".range"]=[b._rangeInitial0,b._rangeInitial1],b._showSpikeInitial!==void 0&&(T[L+".showspikes"]=b._showSpikeInitial,C!=="on"||b._showSpikeInitial||(C="off"));else{var I=[b.r2l(b.range[0]),b.r2l(b.range[1])],H=[z*I[0]+G*I[1],z*I[1]+G*I[0]];T[L+".range[0]"]=b.l2r(H[0]),T[L+".range[1]"]=b.l2r(H[1])}}else w!=="hovermode"||d!=="x"&&d!=="y"||(d=S._isHoriz?"y":"x",y.setAttribute("data-val",d)),T[w]=d;S._cartesianSpikesEnabled=C,A.call("_guiRelayout",g,T)}function r(g,h){for(var b=h.currentTarget,v=b.getAttribute("data-attr"),y=b.getAttribute("data-val")||!0,w=g._fullLayout._subplots.gl3d||[],d={},S=v.split("."),T=0;T<w.length;T++)d[w[T]+"."+S[1]]=y;var E=y==="pan"?y:"zoom";d.dragmode=E,A.call("_guiRelayout",g,d)}function n(g,h){for(var b=h.currentTarget.getAttribute("data-attr"),v=b==="resetLastSave",y=b==="resetDefault",w=g._fullLayout,d=w._subplots.gl3d||[],S={},T=0;T<d.length;T++){var E,C=d[T],L=C+".camera",O=C+".aspectratio",z=C+".aspectmode",G=w[C]._scene;v?(S[L+".up"]=G.viewInitial.up,S[L+".eye"]=G.viewInitial.eye,S[L+".center"]=G.viewInitial.center,E=!0):y&&(S[L+".up"]=null,S[L+".eye"]=null,S[L+".center"]=null,E=!0),E&&(S[O+".x"]=G.viewInitial.aspectratio.x,S[O+".y"]=G.viewInitial.aspectratio.y,S[O+".z"]=G.viewInitial.aspectratio.z,S[z]=G.viewInitial.aspectmode)}A.call("_guiRelayout",g,S)}function s(g,h){var b=h.currentTarget,v=b._previousVal,y=g._fullLayout,w=y._subplots.gl3d||[],d=["xaxis","yaxis","zaxis"],S={},T={};if(v)T=v,b._previousVal=null;else{for(var E=0;E<w.length;E++){var C=w[E],L=y[C],O=C+".hovermode";S[O]=L.hovermode,T[O]=!1;for(var z=0;z<3;z++){var G=d[z],I=C+"."+G+".showspikes";T[I]=!1,S[I]=L[G].showspikes}}b._previousVal=S}return T}function a(g,h){for(var b=h.currentTarget,v=b.getAttribute("data-attr"),y=b.getAttribute("data-val")||!0,w=g._fullLayout,d=w._subplots.geo||[],S=0;S<d.length;S++){var T=d[S],E=w[T];if(v==="zoom"){var C=E.projection.scale,L=y==="in"?2*C:.5*C;A.call("_guiRelayout",g,T+".projection.scale",L)}}v==="reset"&&x(g,"geo")}function u(g){var h=g._fullLayout;return!h.hovermode&&(h._has("cartesian")?h._isHoriz?"y":"x":"closest")}function p(g){var h=u(g);A.call("_guiRelayout",g,"hovermode",h)}function c(g,h){for(var b=h.currentTarget.getAttribute("data-val"),v=g._fullLayout,y=v._subplots.mapbox||[],w={},d=0;d<y.length;d++){var S=y[d],T=v[S].zoom,E=b==="in"?1.05*T:T/1.05;w[S+".zoom"]=E}A.call("_guiRelayout",g,w)}function x(g,h){for(var b=g._fullLayout,v=b._subplots[h]||[],y={},w=0;w<v.length;w++)for(var d=v[w],S=b[d]._subplot.viewInitial,T=Object.keys(S),E=0;E<T.length;E++){var C=T[E];y[d+"."+C]=S[C]}A.call("_guiRelayout",g,y)}e.toImage={name:"toImage",title:function(g){var h=(g._context.toImageButtonOptions||{}).format||"png";return o(g,h==="png"?"Download plot as a png":"Download plot")},icon:_.camera,click:function(g){var h=g._context.toImageButtonOptions,b={format:h.format||"png"};f.notifier(o(g,"Taking snapshot - this may take a few seconds"),"long"),b.format!=="svg"&&f.isIE()&&(f.notifier(o(g,"IE only supports svg.  Changing format to svg."),"long"),b.format="svg"),["filename","width","height","scale"].forEach(function(v){v in h&&(b[v]=h[v])}),A.call("downloadImage",g,b).then(function(v){f.notifier(o(g,"Snapshot succeeded")+" - "+v,"long")}).catch(function(){f.notifier(o(g,"Sorry, there was a problem downloading your snapshot!"),"long")})}},e.sendDataToCloud={name:"sendDataToCloud",title:function(g){return o(g,"Edit in Chart Studio")},icon:_.disk,click:function(g){M.sendDataToCloud(g)}},e.editInChartStudio={name:"editInChartStudio",title:function(g){return o(g,"Edit in Chart Studio")},icon:_.pencil,click:function(g){M.sendDataToCloud(g)}},e.zoom2d={name:"zoom2d",_cat:"zoom",title:function(g){return o(g,"Zoom")},attr:"dragmode",val:"zoom",icon:_.zoombox,click:i},e.pan2d={name:"pan2d",_cat:"pan",title:function(g){return o(g,"Pan")},attr:"dragmode",val:"pan",icon:_.pan,click:i},e.select2d={name:"select2d",_cat:"select",title:function(g){return o(g,"Box Select")},attr:"dragmode",val:"select",icon:_.selectbox,click:i},e.lasso2d={name:"lasso2d",_cat:"lasso",title:function(g){return o(g,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_.lasso,click:i},e.drawclosedpath={name:"drawclosedpath",title:function(g){return o(g,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_.drawclosedpath,click:i},e.drawopenpath={name:"drawopenpath",title:function(g){return o(g,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_.drawopenpath,click:i},e.drawline={name:"drawline",title:function(g){return o(g,"Draw line")},attr:"dragmode",val:"drawline",icon:_.drawline,click:i},e.drawrect={name:"drawrect",title:function(g){return o(g,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_.drawrect,click:i},e.drawcircle={name:"drawcircle",title:function(g){return o(g,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_.drawcircle,click:i},e.eraseshape={name:"eraseshape",title:function(g){return o(g,"Erase active shape")},icon:_.eraseshape,click:m},e.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(g){return o(g,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:i},e.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(g){return o(g,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:i},e.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(g){return o(g,"Autoscale")},attr:"zoom",val:"auto",icon:_.autoscale,click:i},e.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(g){return o(g,"Reset axes")},attr:"zoom",val:"reset",icon:_.home,click:i},e.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(g){return o(g,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:i},e.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(g){return o(g,"Compare data on hover")},attr:"hovermode",val:function(g){return g._fullLayout._isHoriz?"y":"x"},icon:_.tooltip_compare,gravity:"ne",click:i},e.zoom3d={name:"zoom3d",_cat:"zoom",title:function(g){return o(g,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_.zoombox,click:r},e.pan3d={name:"pan3d",_cat:"pan",title:function(g){return o(g,"Pan")},attr:"scene.dragmode",val:"pan",icon:_.pan,click:r},e.orbitRotation={name:"orbitRotation",title:function(g){return o(g,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_["3d_rotate"],click:r},e.tableRotation={name:"tableRotation",title:function(g){return o(g,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_["z-axis"],click:r},e.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(g){return o(g,"Reset camera to default")},attr:"resetDefault",icon:_.home,click:n},e.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(g){return o(g,"Reset camera to last save")},attr:"resetLastSave",icon:_.movie,click:n},e.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(g){return o(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(g,h){var b=s(g,h);A.call("_guiRelayout",g,b)}},e.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(g){return o(g,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:a},e.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(g){return o(g,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:a},e.resetGeo={name:"resetGeo",_cat:"reset",title:function(g){return o(g,"Reset")},attr:"reset",val:null,icon:_.autoscale,click:a},e.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(g){return o(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:p},e.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(g){return o(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:p},e.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(g){return o(g,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:p},e.resetViewSankey={name:"resetSankeyGroup",title:function(g){return o(g,"Reset view")},icon:_.home,click:function(g){for(var h={"node.groups":[],"node.x":[],"node.y":[]},b=0;b<g._fullData.length;b++){var v=g._fullData[b]._viewInitial;h["node.groups"].push(v.node.groups.slice()),h["node.x"].push(v.node.x.slice()),h["node.y"].push(v.node.y.slice())}A.call("restyle",g,h)}},e.toggleHover={name:"toggleHover",title:function(g){return o(g,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(g,h){var b=s(g,h);b.hovermode=u(g),A.call("_guiRelayout",g,b)}},e.resetViews={name:"resetViews",title:function(g){return o(g,"Reset views")},icon:_.home,click:function(g,h){var b=h.currentTarget;b.setAttribute("data-attr","zoom"),b.setAttribute("data-val","reset"),i(g,h),b.setAttribute("data-attr","resetLastSave"),n(g,h),x(g,"geo"),x(g,"mapbox")}},e.toggleSpikelines={name:"toggleSpikelines",title:function(g){return o(g,"Toggle Spike Lines")},icon:_.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(g){var h=g._fullLayout,b=h._cartesianSpikesEnabled;h._cartesianSpikesEnabled=b==="on"?"off":"on",A.call("_guiRelayout",g,function(v){for(var y=v._fullLayout._cartesianSpikesEnabled==="on",w=l.list(v,null,!0),d={},S=0;S<w.length;S++){var T=w[S];d[T._name+".showspikes"]=!!y||T._showSpikeInitial}return d}(g))}},e.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(g){return o(g,"Reset view")},attr:"reset",icon:_.home,click:function(g){x(g,"mapbox")}},e.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(g){return o(g,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:c},e.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(g){return o(g,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:c}},93348:function($,P,t){var A=t(26023),M=Object.keys(A),l=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(l),m=[];M.forEach(function(f){(function(o){if(_.indexOf(o._cat||o.name)===-1){var e=o.name,i=(o._cat||o.name).toLowerCase();m.indexOf(e)===-1&&m.push(e),m.indexOf(i)===-1&&m.push(i)}})(A[f])}),m.sort(),$.exports={DRAW_MODES:l,backButtons:_,foreButtons:m}},35750:function($,P,t){var A=t(71828),M=t(7901),l=t(44467),_=t(42068);$.exports=function(m,f){var o=m.modebar||{},e=l.newContainer(f,"modebar");function i(n,s){return A.coerce(o,e,_,n,s)}i("orientation"),i("bgcolor",M.addOpacity(f.paper_bgcolor,.5));var r=M.contrast(M.rgb(f.modebar.bgcolor));i("color",M.addOpacity(r,.3)),i("activecolor",M.addOpacity(r,.7)),i("uirevision",f.uirevision),i("add"),i("remove")}},64168:function($,P,t){$.exports={moduleType:"component",name:"modebar",layoutAttributes:t(42068),supplyLayoutDefaults:t(35750),manage:t(14192)}},14192:function($,P,t){var A=t(41675),M=t(34098),l=t(73972),_=t(23469).isUnifiedHover,m=t(37676),f=t(26023),o=t(93348).DRAW_MODES,e=t(71828).extendDeep;$.exports=function(i){var r=i._fullLayout,n=i._context,s=r._modeBar;if(n.displayModeBar||n.watermark){if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,u=n.modeBarButtons;a=Array.isArray(u)&&u.length?function(p){for(var c=e([],p),x=0;x<c.length;x++)for(var g=c[x],h=0;h<g.length;h++){var b=g[h];if(typeof b=="string"){if(f[b]===void 0)throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));c[x][h]=f[b]}}return c}(u):!n.displayModeBar&&n.watermark?[]:function(p){var c=p._fullLayout,x=p._fullData,g=p._context;function h(he,de){if(typeof de=="string"){if(de.toLowerCase()===he.toLowerCase())return!0}else{var xe=de.name,me=de._cat||de.name;if(xe===he||me===he.toLowerCase())return!0}return!1}var b=c.modebar.add;typeof b=="string"&&(b=[b]);var v=c.modebar.remove;typeof v=="string"&&(v=[v]);var y=g.modeBarButtonsToAdd.concat(b.filter(function(he){for(var de=0;de<g.modeBarButtonsToRemove.length;de++)if(h(he,g.modeBarButtonsToRemove[de]))return!1;return!0})),w=g.modeBarButtonsToRemove.concat(v.filter(function(he){for(var de=0;de<g.modeBarButtonsToAdd.length;de++)if(h(he,g.modeBarButtonsToAdd[de]))return!1;return!0})),d=c._has("cartesian"),S=c._has("gl3d"),T=c._has("geo"),E=c._has("pie"),C=c._has("funnelarea"),L=c._has("gl2d"),O=c._has("ternary"),z=c._has("mapbox"),G=c._has("polar"),I=c._has("smith"),H=c._has("sankey"),N=function(he){for(var de=A.list({_fullLayout:he},null,!0),xe=0;xe<de.length;xe++)if(!de[xe].fixedrange)return!1;return!0}(c),F=_(c.hovermode),V=[];function W(he){if(he.length){for(var de=[],xe=0;xe<he.length;xe++){for(var me=he[xe],ve=f[me],Le=ve.name.toLowerCase(),Ae=(ve._cat||ve.name).toLowerCase(),we=!1,se=0;se<w.length;se++){var oe=w[se].toLowerCase();if(oe===Le||oe===Ae){we=!0;break}}we||de.push(f[me])}V.push(de)}}var te=["toImage"];g.showEditInChartStudio?te.push("editInChartStudio"):g.showSendToCloud&&te.push("sendDataToCloud"),W(te);var Q=[],X=[],q=[],Z=[];(d||L||E||C||O)+T+S+z+G+I>1?(X=["toggleHover"],q=["resetViews"]):T?(Q=["zoomInGeo","zoomOutGeo"],X=["hoverClosestGeo"],q=["resetGeo"]):S?(X=["hoverClosest3d"],q=["resetCameraDefault3d","resetCameraLastSave3d"]):z?(Q=["zoomInMapbox","zoomOutMapbox"],X=["toggleHover"],q=["resetViewMapbox"]):L?X=["hoverClosestGl2d"]:E?X=["hoverClosestPie"]:H?(X=["hoverClosestCartesian","hoverCompareCartesian"],q=["resetViewSankey"]):X=["toggleHover"],d&&(X=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(he){for(var de=0;de<he.length;de++)if(!l.traceIs(he[de],"noHover"))return!1;return!0}(x)||F)&&(X=[]),!d&&!L||N||(Q=["zoomIn2d","zoomOut2d","autoScale2d"],q[0]!=="resetViews"&&(q=["resetScale2d"])),S?Z=["zoom3d","pan3d","orbitRotation","tableRotation"]:(d||L)&&!N||O?Z=["zoom2d","pan2d"]:z||T?Z=["pan2d"]:G&&(Z=["zoom2d"]),function(he){for(var de=!1,xe=0;xe<he.length&&!de;xe++){var me=he[xe];me._module&&me._module.selectPoints&&(l.traceIs(me,"scatter-like")?(M.hasMarkers(me)||M.hasText(me))&&(de=!0):l.traceIs(me,"box-violin")&&me.boxpoints!=="all"&&me.points!=="all"||(de=!0))}return de}(x)&&Z.push("select2d","lasso2d");var J=[],ne=function(he){J.indexOf(he)===-1&&X.indexOf(he)!==-1&&J.push(he)};if(Array.isArray(y)){for(var re=[],ae=0;ae<y.length;ae++){var ue=y[ae];typeof ue=="string"?(ue=ue.toLowerCase(),o.indexOf(ue)!==-1?(c._has("mapbox")||c._has("cartesian"))&&Z.push(ue):ue==="togglespikelines"?ne("toggleSpikelines"):ue==="togglehover"?ne("toggleHover"):ue==="hovercompare"?ne("hoverCompareCartesian"):ue==="hoverclosest"?(ne("hoverClosestCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie")):ue==="v1hovermode"&&(ne("toggleHover"),ne("hoverClosestCartesian"),ne("hoverCompareCartesian"),ne("hoverClosestGeo"),ne("hoverClosest3d"),ne("hoverClosestGl2d"),ne("hoverClosestPie"))):re.push(ue)}y=re}return W(Z),W(Q.concat(q)),W(J),function(he,de){if(de.length)if(Array.isArray(de[0]))for(var xe=0;xe<de.length;xe++)he.push(de[xe]);else he.push(de);return he}(V,y)}(i),s?s.update(i,a):r._modeBar=m(i,a)}else s&&(s.destroy(),delete r._modeBar)}},37676:function($,P,t){var A=t(39898),M=t(92770),l=t(71828),_=t(24255),m=t(11506).version,f=new DOMParser;function o(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var e=o.prototype;e.update=function(i,r){this.graphInfo=i;var n=this.graphInfo._context,s=this.graphInfo._fullLayout,a="modebar-"+s._uid;this.element.setAttribute("id",a),this._uid=a,this.element.className="modebar",n.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",r=r.reverse());var u=s.modebar,p=n.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";l.deleteRelatedStyleRule(a),l.addRelatedStyleRule(a,p+"#"+a+" .modebar-group","background-color: "+u.bgcolor),l.addRelatedStyleRule(a,"#"+a+" .modebar-btn .icon path","fill: "+u.color),l.addRelatedStyleRule(a,"#"+a+" .modebar-btn:hover .icon path","fill: "+u.activecolor),l.addRelatedStyleRule(a,"#"+a+" .modebar-btn.active .icon path","fill: "+u.activecolor);var c=!this.hasButtons(r),x=this.hasLogo!==n.displaylogo,g=this.locale!==n.locale;if(this.locale=n.locale,(c||x||g)&&(this.removeAllButtons(),this.updateButtons(r),n.watermark||n.displaylogo)){var h=this.getLogo();n.watermark&&(h.className=h.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(h,this.element.childNodes[0]):this.element.appendChild(h),this.hasLogo=!0}this.updateActiveButton()},e.updateButtons=function(i){var r=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(n){var s=r.createGroup();n.forEach(function(a){var u=a.name;if(!u)throw new Error("must provide button 'name' in button config");if(r.buttonsNames.indexOf(u)!==-1)throw new Error("button name '"+u+"' is taken");r.buttonsNames.push(u);var p=r.createButton(a);r.buttonElements.push(p),s.appendChild(p)}),r.element.appendChild(s)})},e.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},e.createButton=function(i){var r=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var s=i.title;s===void 0?s=i.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&n.setAttribute("data-title",s),i.attr!==void 0&&n.setAttribute("data-attr",i.attr);var a=i.val;if(a!==void 0&&(typeof a=="function"&&(a=a(this.graphInfo)),n.setAttribute("data-val",a)),typeof i.click!="function")throw new Error("must provide button 'click' function in button config");n.addEventListener("click",function(p){i.click(r.graphInfo,p),r.updateActiveButton(p.currentTarget)}),n.setAttribute("data-toggle",i.toggle||!1),i.toggle&&A.select(n).classed("active",!0);var u=i.icon;return typeof u=="function"?n.appendChild(u()):n.appendChild(this.createIcon(u||_.question)),n.setAttribute("data-gravity",i.gravity||"n"),n},e.createIcon=function(i){var r,n=M(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(r=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,n].join(" ")),r.setAttribute("class","icon");var a=document.createElementNS(s,"path");a.setAttribute("d",i.path),i.transform?a.setAttribute("transform",i.transform):i.ascent!==void 0&&a.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),r.appendChild(a)}return i.svg&&(r=f.parseFromString(i.svg,"application/xml").childNodes[0]),r.setAttribute("height","1em"),r.setAttribute("width","1em"),r},e.updateActiveButton=function(i){var r=this.graphInfo._fullLayout,n=i!==void 0?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var a=s.getAttribute("data-val")||!0,u=s.getAttribute("data-attr"),p=s.getAttribute("data-toggle")==="true",c=A.select(s);if(p)u===n&&c.classed("active",!c.classed("active"));else{var x=u===null?u:l.nestedProperty(r,u).get();c.classed("active",x===a)}})},e.hasButtons=function(i){var r=this.buttons;if(!r||i.length!==r.length)return!1;for(var n=0;n<i.length;++n){if(i[n].length!==r[n].length)return!1;for(var s=0;s<i[n].length;s++)if(i[n][s].name!==r[n][s].name)return!1}return!0},e.getLogo=function(){var i=this.createGroup(),r=document.createElement("a");return r.href="https://plotly.com/",r.target="_blank",r.setAttribute("data-title",l._(this.graphInfo,"Produced with Plotly.js")+" (v"+m+")"),r.className="modebar-btn plotlyjsicon modebar-btn--logo",r.appendChild(this.createIcon(_.newplotlylogo)),i.appendChild(r),i},e.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},e.destroy=function(){l.removeElement(this.container.querySelector(".modebar")),l.deleteRelatedStyleRule(this._uid)},$.exports=function(i,r){var n=i._fullLayout,s=new o({graphInfo:i,container:n._modebardiv.node(),buttons:r});return n._privateplot&&A.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},37113:function($,P,t){var A=t(41940),M=t(22399),l=(0,t(44467).templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});$.exports={visible:{valType:"boolean",editType:"plot"},buttons:l,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:A({editType:"plot"}),bgcolor:{valType:"color",dflt:M.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:M.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},89573:function($){$.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},28674:function($,P,t){var A=t(71828),M=t(7901),l=t(44467),_=t(85501),m=t(37113),f=t(89573);function o(e,i,r,n){var s=n.calendar;function a(p,c){return A.coerce(e,i,m.buttons,p,c)}if(a("visible")){var u=a("step");u!=="all"&&(!s||s==="gregorian"||u!=="month"&&u!=="year"?a("stepmode"):i.stepmode="backward",a("count")),a("label")}}$.exports=function(e,i,r,n,s){var a=e.rangeselector||{},u=l.newContainer(i,"rangeselector");function p(g,h){return A.coerce(a,u,m,g,h)}if(p("visible",_(a,u,{name:"buttons",handleItemDefaults:o,calendar:s}).length>0)){var c=function(g,h,b){for(var v=b.filter(function(S){return h[S].anchor===g._id}),y=0,w=0;w<v.length;w++){var d=h[v[w]].domain;d&&(y=Math.max(d[1],y))}return[g.domain[0],y+f.yPad]}(i,r,n);p("x",c[0]),p("y",c[1]),A.noneOrAll(e,i,["x","y"]),p("xanchor"),p("yanchor"),A.coerceFont(p,"font",r.font);var x=p("bgcolor");p("activecolor",M.contrast(x,f.lightAmount,f.darkAmount)),p("bordercolor"),p("borderwidth")}}},21598:function($,P,t){var A=t(39898),M=t(73972),l=t(74875),_=t(7901),m=t(91424),f=t(71828),o=f.strTranslate,e=t(63893),i=t(41675),r=t(18783),n=r.LINE_SPACING,s=r.FROM_TL,a=r.FROM_BR,u=t(89573),p=t(70565);function c(h){return h._id}function x(h,b,v){var y=f.ensureSingle(h,"rect","selector-rect",function(w){w.attr("shape-rendering","crispEdges")});y.attr({rx:u.rx,ry:u.ry}),y.call(_.stroke,b.bordercolor).call(_.fill,function(w,d){return d._isActive||d._isHovered?w.activecolor:w.bgcolor}(b,v)).style("stroke-width",b.borderwidth+"px")}function g(h,b,v,y){var w,d;f.ensureSingle(h,"text","selector-text",function(S){S.attr("text-anchor","middle")}).call(m.font,b.font).text((w=v,d=y._fullLayout._meta,w.label?d?f.templateString(w.label,d):w.label:w.step==="all"?"all":w.count+w.step.charAt(0))).call(function(S){e.convertToTspans(S,y)})}$.exports=function(h){var b=h._fullLayout._infolayer.selectAll(".rangeselector").data(function(v){for(var y=i.list(v,"x",!0),w=[],d=0;d<y.length;d++){var S=y[d];S.rangeselector&&S.rangeselector.visible&&w.push(S)}return w}(h),c);b.enter().append("g").classed("rangeselector",!0),b.exit().remove(),b.style({cursor:"pointer","pointer-events":"all"}),b.each(function(v){var y=A.select(this),w=v,d=w.rangeselector,S=y.selectAll("g.button").data(f.filterVisible(d.buttons));S.enter().append("g").classed("button",!0),S.exit().remove(),S.each(function(T){var E=A.select(this),C=p(w,T);T._isActive=function(L,O,z){if(O.step==="all")return L.autorange===!0;var G=Object.keys(z);return L.range[0]===z[G[0]]&&L.range[1]===z[G[1]]}(w,T,C),E.call(x,d,T),E.call(g,d,T,h),E.on("click",function(){h._dragged||M.call("_guiRelayout",h,C)}),E.on("mouseover",function(){T._isHovered=!0,E.call(x,d,T)}),E.on("mouseout",function(){T._isHovered=!1,E.call(x,d,T)})}),function(T,E,C,L,O){var z=0,G=0,I=C.borderwidth;E.each(function(){var te=A.select(this).select(".selector-text"),Q=C.font.size*n,X=Math.max(Q*e.lineCount(te),16)+3;G=Math.max(G,X)}),E.each(function(){var te=A.select(this),Q=te.select(".selector-rect"),X=te.select(".selector-text"),q=X.node()&&m.bBox(X.node()).width,Z=C.font.size*n,J=e.lineCount(X),ne=Math.max(q+10,u.minButtonWidth);te.attr("transform",o(I+z,I)),Q.attr({x:0,y:0,width:ne,height:G}),e.positionText(X,ne/2,G/2-(J-1)*Z/2+3),z+=ne+5});var H=T._fullLayout._size,N=H.l+H.w*C.x,F=H.t+H.h*(1-C.y),V="left";f.isRightAnchor(C)&&(N-=z,V="right"),f.isCenterAnchor(C)&&(N-=z/2,V="center");var W="top";f.isBottomAnchor(C)&&(F-=G,W="bottom"),f.isMiddleAnchor(C)&&(F-=G/2,W="middle"),z=Math.ceil(z),G=Math.ceil(G),N=Math.round(N),F=Math.round(F),l.autoMargin(T,L+"-range-selector",{x:C.x,y:C.y,l:z*s[V],r:z*a[V],b:G*a[W],t:G*s[W]}),O.attr("transform",o(N,F))}(h,S,d,w._name,y)})}},70565:function($,P,t){var A=t(81041),M=t(71828).titleCase;$.exports=function(l,_){var m=l._name,f={};if(_.step==="all")f[m+".autorange"]=!0;else{var o=function(e,i){var r,n=e.range,s=new Date(e.r2l(n[1])),a=i.step,u=A["utc"+M(a)],p=i.count;switch(i.stepmode){case"backward":r=e.l2r(+u.offset(s,-p));break;case"todate":var c=u.offset(s,-p);r=e.l2r(+u.ceil(c))}return[r,n[1]]}(l,_);f[m+".range[0]"]=o[0],f[m+".range[1]"]=o[1]}return f}},97218:function($,P,t){$.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(37113)}}},layoutAttributes:t(37113),handleDefaults:t(28674),draw:t(21598)}},75148:function($,P,t){var A=t(22399);$.exports={bgcolor:{valType:"color",dflt:A.background,editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},88443:function($,P,t){var A=t(41675).list,M=t(71739).getAutoRange,l=t(73251);$.exports=function(_){for(var m=A(_,"x",!0),f=0;f<m.length;f++){var o=m[f],e=o[l.name];e&&e.visible&&e.autorange&&(e._input.autorange=!0,e._input.range=e.range=M(_,o))}}},73251:function($){$.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},26377:function($,P,t){var A=t(71828),M=t(44467),l=t(41675),_=t(75148),m=t(47850);$.exports=function(f,o,e){var i=f[e],r=o[e];if(i.rangeslider||o._requestRangeslider[r._id]){A.isPlainObject(i.rangeslider)||(i.rangeslider={});var n,s,a=i.rangeslider,u=M.newContainer(r,"rangeslider");if(y("visible")){y("bgcolor",o.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!r.isValidRange(a.range)),y("range");var p=o._subplots;if(p)for(var c=p.cartesian.filter(function(d){return d.substr(0,d.indexOf("y"))===l.name2id(e)}).map(function(d){return d.substr(d.indexOf("y"),d.length)}),x=A.simpleMap(c,l.id2name),g=0;g<x.length;g++){var h=x[g];n=a[h]||{},s=M.newContainer(u,h,"yaxis");var b,v=o[h];n.range&&v.isValidRange(n.range)&&(b="fixed"),w("rangemode",b)!=="match"&&w("range",v.range.slice())}u._input=a}}function y(d,S){return A.coerce(a,u,_,d,S)}function w(d,S){return A.coerce(n,s,m,d,S)}}},72413:function($,P,t){var A=t(39898),M=t(73972),l=t(74875),_=t(71828),m=_.strTranslate,f=t(91424),o=t(7901),e=t(92998),i=t(93612),r=t(41675),n=t(28569),s=t(6964),a=t(73251);function u(b,v,y,w){var d=_.ensureSingle(b,"rect",a.bgClassName,function(C){C.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),S=w.borderwidth%2==0?w.borderwidth:w.borderwidth-1,T=-w._offsetShift,E=f.crispRound(v,w.borderwidth);d.attr({width:w._width+S,height:w._height+S,transform:m(T,T),"stroke-width":E}).call(o.stroke,w.bordercolor).call(o.fill,w.bgcolor)}function p(b,v,y,w){var d=v._fullLayout;_.ensureSingleById(d._topdefs,"clipPath",w._clipId,function(S){S.append("rect").attr({x:0,y:0})}).select("rect").attr({width:w._width,height:w._height})}function c(b,v,y,w){var d,S=v.calcdata,T=b.selectAll("g."+a.rangePlotClassName).data(y._subplotsWith,_.identity);T.enter().append("g").attr("class",function(E){return a.rangePlotClassName+" "+E}).call(f.setClipUrl,w._clipId,v),T.order(),T.exit().remove(),T.each(function(E,C){var L=A.select(this),O=C===0,z=r.getFromId(v,E,"y"),G=z._name,I=w[G],H={data:[],layout:{xaxis:{type:y.type,domain:[0,1],range:w.range.slice(),calendar:y.calendar},width:w._width,height:w._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};y.rangebreaks&&(H.layout.xaxis.rangebreaks=y.rangebreaks),H.layout[G]={type:z.type,domain:[0,1],range:I.rangemode!=="match"?I.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(H.layout[G].rangebreaks=z.rangebreaks),l.supplyDefaults(H);var N=H._fullLayout.xaxis,F=H._fullLayout[G];N.clearCalc(),N.setScale(),F.clearCalc(),F.setScale();var V={id:E,plotgroup:L,xaxis:N,yaxis:F,isRangePlot:!0};O?d=V:(V.mainplot="xy",V.mainplotinfo=d),i.rangePlot(v,V,function(W,te){for(var Q=[],X=0;X<W.length;X++){var q=W[X],Z=q[0].trace;Z.xaxis+Z.yaxis===te&&Q.push(q)}return Q}(S,E))})}function x(b,v,y,w,d){_.ensureSingle(b,"rect",a.maskMinClassName,function(S){S.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(o.fill,a.maskColor),_.ensureSingle(b,"rect",a.maskMaxClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",w._height).call(o.fill,a.maskColor),d.rangemode!=="match"&&(_.ensureSingle(b,"rect",a.maskMinOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).call(o.fill,a.maskOppAxisColor),_.ensureSingle(b,"rect",a.maskMaxOppAxisClassName,function(S){S.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",w._width).style("border-top",a.maskOppBorder).call(o.fill,a.maskOppAxisColor))}function g(b,v,y,w){v._context.staticPlot||_.ensureSingle(b,"rect",a.slideBoxClassName,function(d){d.attr({y:0,cursor:a.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:w._height,fill:a.slideBoxFill})}function h(b,v,y,w){var d=_.ensureSingle(b,"g",a.grabberMinClassName),S=_.ensureSingle(b,"g",a.grabberMaxClassName),T={x:0,width:a.handleWidth,rx:a.handleRadius,fill:o.background,stroke:o.defaultLine,"stroke-width":a.handleStrokeWidth,"shape-rendering":"crispEdges"},E={y:Math.round(w._height/4),height:Math.round(w._height/2)};_.ensureSingle(d,"rect",a.handleMinClassName,function(L){L.attr(T)}).attr(E),_.ensureSingle(S,"rect",a.handleMaxClassName,function(L){L.attr(T)}).attr(E);var C={width:a.grabAreaWidth,x:0,y:0,fill:a.grabAreaFill,cursor:v._context.staticPlot?void 0:a.grabAreaCursor};_.ensureSingle(d,"rect",a.grabAreaMinClassName,function(L){L.attr(C)}).attr("height",w._height),_.ensureSingle(S,"rect",a.grabAreaMaxClassName,function(L){L.attr(C)}).attr("height",w._height)}$.exports=function(b){for(var v=b._fullLayout,y=v._rangeSliderData,w=0;w<y.length;w++){var d=y[w][a.name];d._clipId=d._id+"-"+v._uid}var S=v._infolayer.selectAll("g."+a.containerClassName).data(y,function(T){return T._name});S.exit().each(function(T){var E=T[a.name];v._topdefs.select("#"+E._clipId).remove()}).remove(),y.length!==0&&(S.enter().append("g").classed(a.containerClassName,!0).attr("pointer-events","all"),S.each(function(T){var E=A.select(this),C=T[a.name],L=v[r.id2name(T.anchor)],O=C[r.id2name(T.anchor)];if(C.range){var z,G=_.simpleMap(C.range,T.r2l),I=_.simpleMap(T.range,T.r2l);z=I[0]<I[1]?[Math.min(G[0],I[0]),Math.max(G[1],I[1])]:[Math.max(G[0],I[0]),Math.min(G[1],I[1])],C.range=C._input.range=_.simpleMap(z,T.l2r)}T.cleanRange("rangeslider.range");var H=v._size,N=T.domain;C._width=H.w*(N[1]-N[0]);var F=Math.round(H.l+H.w*N[0]),V=Math.round(H.t+H.h*(1-T._counterDomainMin)+(T.side==="bottom"?T._depth:0)+C._offsetShift+a.extraPad);E.attr("transform",m(F,V)),C._rl=_.simpleMap(C.range,T.r2l);var W=C._rl[0],te=C._rl[1],Q=te-W;if(C.p2d=function(he){return he/C._width*Q+W},C.d2p=function(he){return(he-W)/Q*C._width},T.rangebreaks){var X=T.locateBreaks(W,te);if(X.length){var q,Z,J=0;for(q=0;q<X.length;q++)J+=(Z=X[q]).max-Z.min;var ne=C._width/(te-W-J),re=[-ne*W];for(q=0;q<X.length;q++)Z=X[q],re.push(re[re.length-1]-ne*(Z.max-Z.min));for(C.d2p=function(he){for(var de=re[0],xe=0;xe<X.length;xe++){var me=X[xe];if(he>=me.max)de=re[xe+1];else if(he<me.min)break}return de+ne*he},q=0;q<X.length;q++)(Z=X[q]).pmin=C.d2p(Z.min),Z.pmax=C.d2p(Z.max);C.p2d=function(he){for(var de=re[0],xe=0;xe<X.length;xe++){var me=X[xe];if(he>=me.pmax)de=re[xe+1];else if(he<me.pmin)break}return(he-de)/ne}}}if(O.rangemode!=="match"){var ae=L.r2l(O.range[0]),ue=L.r2l(O.range[1])-ae;C.d2pOppAxis=function(he){return(he-ae)/ue*C._height}}E.call(u,b,T,C).call(p,b,T,C).call(c,b,T,C).call(x,b,T,C,O).call(g,b,T,C).call(h,b,T,C),function(he,de,xe,me){if(!de._context.staticPlot){var ve=he.select("rect."+a.slideBoxClassName).node(),Le=he.select("rect."+a.grabAreaMinClassName).node(),Ae=he.select("rect."+a.grabAreaMaxClassName).node();he.on("mousedown",we),he.on("touchstart",we)}function we(){var se=A.event,oe=se.target,fe=se.clientX||se.touches[0].clientX,Se=fe-he.node().getBoundingClientRect().left,Me=me.d2p(xe._rl[0]),be=me.d2p(xe._rl[1]),Ie=n.coverSlip();function Be(Te){var ye,Pe,Re,ze=+(Te.clientX||Te.touches[0].clientX)-fe;switch(oe){case ve:if(Re="ew-resize",Me+ze>xe._length||be+ze<0)return;ye=Me+ze,Pe=be+ze;break;case Le:if(Re="col-resize",Me+ze>xe._length)return;ye=Me+ze,Pe=be;break;case Ae:if(Re="col-resize",be+ze<0)return;ye=Me,Pe=be+ze;break;default:Re="ew-resize",ye=Se,Pe=Se+ze}if(Pe<ye){var He=Pe;Pe=ye,ye=He}me._pixelMin=ye,me._pixelMax=Pe,s(A.select(Ie),Re),function(We,Je,lt,et){function yt(at){return lt.l2r(_.constrain(at,et._rl[0],et._rl[1]))}var _t=yt(et.p2d(et._pixelMin)),xt=yt(et.p2d(et._pixelMax));window.requestAnimationFrame(function(){M.call("_guiRelayout",Je,lt._name+".range",[_t,xt])})}(0,de,xe,me)}function ce(){Ie.removeEventListener("mousemove",Be),Ie.removeEventListener("mouseup",ce),this.removeEventListener("touchmove",Be),this.removeEventListener("touchend",ce),_.removeElement(Ie)}this.addEventListener("touchmove",Be),this.addEventListener("touchend",ce),Ie.addEventListener("mousemove",Be),Ie.addEventListener("mouseup",ce)}}(E,b,T,C),function(he,de,xe,me,ve,Le){var Ae=a.handleWidth/2;function we(Te){return _.constrain(Te,0,me._width)}function se(Te){return _.constrain(Te,0,me._height)}function oe(Te){return _.constrain(Te,-Ae,me._width+Ae)}var fe=we(me.d2p(xe._rl[0])),Se=we(me.d2p(xe._rl[1]));if(he.select("rect."+a.slideBoxClassName).attr("x",fe).attr("width",Se-fe),he.select("rect."+a.maskMinClassName).attr("width",fe),he.select("rect."+a.maskMaxClassName).attr("x",Se).attr("width",me._width-Se),Le.rangemode!=="match"){var Me=me._height-se(me.d2pOppAxis(ve._rl[1])),be=me._height-se(me.d2pOppAxis(ve._rl[0]));he.select("rect."+a.maskMinOppAxisClassName).attr("x",fe).attr("height",Me).attr("width",Se-fe),he.select("rect."+a.maskMaxOppAxisClassName).attr("x",fe).attr("y",be).attr("height",me._height-be).attr("width",Se-fe),he.select("rect."+a.slideBoxClassName).attr("y",Me).attr("height",be-Me)}var Ie=.5,Be=Math.round(oe(fe-Ae))-Ie,ce=Math.round(oe(Se-Ae))+Ie;he.select("g."+a.grabberMinClassName).attr("transform",m(Be,Ie)),he.select("g."+a.grabberMaxClassName).attr("transform",m(ce,Ie))}(E,0,T,C,L,O),T.side==="bottom"&&e.draw(b,T._id+"title",{propContainer:T,propName:T._name+".title",placeholder:v._dfltTitle.x,attributes:{x:T._offset+T._length/2,y:V+C._height+C._offsetShift+10+1.5*T.title.font.size,"text-anchor":"middle"}})}))}},549:function($,P,t){var A=t(41675),M=t(63893),l=t(73251),_=t(18783).LINE_SPACING,m=l.name;function f(o){var e=o&&o[m];return e&&e.visible}P.isVisible=f,P.makeData=function(o){var e=A.list({_fullLayout:o},"x",!0),i=o.margin,r=[];if(!o._has("gl2d"))for(var n=0;n<e.length;n++){var s=e[n];if(f(s)){r.push(s);var a=s[m];a._id=m+s._id,a._height=(o.height-i.b-i.t)*a.thickness,a._offsetShift=Math.floor(a.borderwidth/2)}}o._rangeSliderData=r},P.autoMarginOpts=function(o,e){var i=o._fullLayout,r=e[m],n=e._id.charAt(0),s=0,a=0;return e.side==="bottom"&&(s=e._depth,e.title.text!==i._dfltTitle[n]&&(a=1.5*e.title.font.size+10+r._offsetShift,a+=(e.title.text.match(M.BR_TAG_ALL)||[]).length*e.title.font.size*_)),{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:r._height+s+Math.max(i.margin.b,a),pad:l.extraPad+2*r._offsetShift}}},13137:function($,P,t){var A=t(71828),M=t(75148),l=t(47850),_=t(549);$.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:A.extendFlat({},M,{yaxis:l})}}},layoutAttributes:t(75148),handleDefaults:t(26377),calcAutorange:t(88443),draw:t(72413),isVisible:_.isVisible,makeData:_.makeData,autoMarginOpts:_.autoMarginOpts}},47850:function($){$.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},8389:function($,P,t){var A=t(50215),M=t(82196).line,l=t(79952).P,_=t(1426).extendFlat,m=t(30962).overrideAll,f=t(44467).templatedArray;t(24695),$.exports=m(f("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:_({},A.xref,{}),yref:_({},A.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:M.color,width:_({},M.width,{min:1,dflt:1}),dash:_({},l,{dflt:"dot"})}}),"arraydraw","from-root")},34122:function($){$.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},59402:function($,P,t){var A=t(71828),M=t(89298),l=t(85501),_=t(8389),m=t(30477);function f(o,e,i){function r(E,C){return A.coerce(o,e,_,E,C)}var n=r("path"),s=r("type",n?"path":"rect")!=="path";s&&delete e.path,r("opacity"),r("line.color"),r("line.width"),r("line.dash");for(var a=["x","y"],u=0;u<2;u++){var p,c,x,g=a[u],h={_fullLayout:i},b=M.coerceRef(o,e,h,g);if((p=M.getFromId(h,b))._selectionIndices.push(e._index),x=m.rangeToShapePosition(p),c=m.shapePositionToRange(p),s){var v=g+"0",y=g+"1",w=o[v],d=o[y];o[v]=c(o[v],!0),o[y]=c(o[y],!0),M.coercePosition(e,h,r,b,v),M.coercePosition(e,h,r,b,y);var S=e[v],T=e[y];S!==void 0&&T!==void 0&&(e[v]=x(S),e[y]=x(T),o[v]=w,o[y]=d)}}s&&A.noneOrAll(o,e,["x0","x1","y0","y1"])}$.exports=function(o,e){l(o,e,{name:"selections",handleItemDefaults:f});for(var i=e.selections,r=0;r<i.length;r++){var n=i[r];n&&n.path===void 0&&(n.x0!==void 0&&n.x1!==void 0&&n.y0!==void 0&&n.y1!==void 0||(e.selections[r]=null))}}},32485:function($,P,t){var A=t(60165).readPaths,M=t(42359),l=t(51873).clearOutlineControllers,_=t(7901),m=t(91424),f=t(44467).arrayEditor,o=t(30477),e=o.getPathString;function i(u){var p=u._fullLayout;for(var c in l(u),p._selectionLayer.selectAll("path").remove(),p._plots){var x=p._plots[c].selectionLayer;x&&x.selectAll("path").remove()}for(var g=0;g<p.selections.length;g++)n(u,g)}function r(u){return u._context.editSelection}function n(u,p){u._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+p+'"]').remove();var c=o.makeSelectionsOptionsAndPlotinfo(u,p),x=c.options,g=c.plotinfo;x._input&&function(h){var b=e(u,x),v={"data-index":p,"fill-rule":"evenodd",d:b},y=x.opacity,w="rgba(0,0,0,0)",d=x.line.color||_.contrast(u._fullLayout.plot_bgcolor),S=x.line.width,T=x.line.dash;S||(S=5,T="solid");var E=r(u)&&u._fullLayout._activeSelectionIndex===p;E&&(w=u._fullLayout.activeselection.fillcolor,y=u._fullLayout.activeselection.opacity);for(var C=[],L=1;L>=0;L--){var O=h.append("path").attr(v).style("opacity",L?.1:y).call(_.stroke,d).call(_.fill,w).call(m.dashLine,L?"solid":T,L?4+S:S);if(s(O,u,x),E){var z=f(u.layout,"selections",x);O.style({cursor:"move"});var G={element:O.node(),plotinfo:g,gd:u,editHelpers:z,isActiveSelection:!0},I=A(b,u);M(I,O,G)}else O.style("pointer-events",L?"all":"none");C[L]=O}var H=C[0];C[1].node().addEventListener("click",function(){return function(N,F){if(r(N)){var V=+F.node().getAttribute("data-index");if(V>=0){if(V===N._fullLayout._activeSelectionIndex)return void a(N);N._fullLayout._activeSelectionIndex=V,N._fullLayout._deactivateSelection=a,i(N)}}}(u,H)})}(u._fullLayout._selectionLayer)}function s(u,p,c){var x=c.xref+c.yref;m.setClipUrl(u,"clip"+p._fullLayout._uid+x,p)}function a(u){r(u)&&u._fullLayout._activeSelectionIndex>=0&&(l(u),delete u._fullLayout._activeSelectionIndex,i(u))}$.exports={draw:i,drawOne:n,activateLastSelection:function(u){if(r(u)){var p=u._fullLayout.selections.length-1;u._fullLayout._activeSelectionIndex=p,u._fullLayout._deactivateSelection=a,i(u)}}}},53777:function($,P,t){var A=t(79952).P,M=t(1426).extendFlat;$.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:M({},A,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},90849:function($){$.exports=function(P,t,A){A("newselection.mode"),A("newselection.line.width")&&(A("newselection.line.color"),A("newselection.line.dash")),A("activeselection.fillcolor"),A("activeselection.opacity")}},35855:function($,P,t){var A=t(64505).selectMode,M=t(51873).clearOutline,l=t(60165),_=l.readPaths,m=l.writePaths,f=l.fixDatesForPaths;$.exports=function(o,e){if(o.length){var i=o[0][0];if(i){var r=i.getAttribute("d"),n=e.gd,s=n._fullLayout.newselection,a=e.plotinfo,u=a.xaxis,p=a.yaxis,c=e.isActiveSelection,x=e.dragmode,g=(n.layout||{}).selections||[];if(!A(x)&&c!==void 0){var h=n._fullLayout._activeSelectionIndex;if(h<g.length)switch(n._fullLayout.selections[h].type){case"rect":x="select";break;case"path":x="lasso"}}var b,v=_(r,n,a,c),y={xref:u._id,yref:p._id,opacity:s.opacity,line:{color:s.line.color,width:s.line.width,dash:s.line.dash}};v.length===1&&(b=v[0]),b&&b.length===5&&x==="select"?(y.type="rect",y.x0=b[0][1],y.y0=b[0][2],y.x1=b[2][1],y.y1=b[2][2]):(y.type="path",u&&p&&f(v,u,p),y.path=m(v),b=null),M(n);for(var w=e.editHelpers,d=(w||{}).modifyItem,S=[],T=0;T<g.length;T++){var E=n._fullLayout.selections[T];if(E){if(S[T]=E._input,c!==void 0&&T===n._fullLayout._activeSelectionIndex){var C=y;switch(E.type){case"rect":d("x0",C.x0),d("x1",C.x1),d("y0",C.y0),d("y1",C.y1);break;case"path":d("path",C.path)}}}else S[T]=E}return c===void 0?(S.push(y),S):w?w.getUpdateObj():{}}}}},75549:function($,P,t){var A=t(71828).strTranslate;function M(l,_){switch(l.type){case"log":return l.p2d(_);case"date":return l.p2r(_,0,l.calendar);default:return l.p2r(_)}}$.exports={p2r:M,r2p:function(l,_){switch(l.type){case"log":return l.d2p(_);case"date":return l.r2p(_,0,l.calendar);default:return l.r2p(_)}},axValue:function(l){var _=l._id.charAt(0)==="y"?1:0;return function(m){return M(l,m[_])}},getTransform:function(l){return A(l.xaxis._offset,l.yaxis._offset)}}},47322:function($,P,t){var A=t(32485),M=t(3937);$.exports={moduleType:"component",name:"selections",layoutAttributes:t(8389),supplyLayoutDefaults:t(59402),supplyDrawNewSelectionDefaults:t(90849),includeBasePlot:t(76325)("selections"),draw:A.draw,drawOne:A.drawOne,reselect:M.reselect,prepSelect:M.prepSelect,clearOutline:M.clearOutline,clearSelectionsCache:M.clearSelectionsCache,selectOnClick:M.selectOnClick}},3937:function($,P,t){var A=t(52142),M=t(38258),l=t(73972),_=t(91424).dashStyle,m=t(7901),f=t(30211),o=t(23469).makeEventData,e=t(64505),i=e.freeMode,r=e.rectMode,n=e.drawMode,s=e.openMode,a=e.selectMode,u=t(30477),p=t(21459),c=t(42359),x=t(51873).clearOutline,g=t(60165),h=g.handleEllipse,b=g.readPaths,v=t(90551).newShapes,y=t(35855),w=t(32485).activateLastSelection,d=t(71828),S=d.sorterAsc,T=t(61082),E=t(79990),C=t(41675).getFromId,L=t(33306),O=t(61549).redrawReglTraces,z=t(34122),G=z.MINSELECT,I=T.filter,H=T.tester,N=t(75549),F=N.p2r,V=N.axValue,W=N.getTransform;function te(ce){return ce.subplot!==void 0}function Q(ce,Te,ye,Pe,Re,ze,He){var We,Je,lt,et,yt,_t,xt,at,ot,At=Te._hoverdata,Ct=Te._fullLayout.clickmode.indexOf("event")>-1,zt=[];if(function(Ze){return Ze&&Array.isArray(Ze)&&Ze[0].hoverOnBox!==!0}(At)){J(ce,Te,ze);var St=function(Ze,st){var nt,De,Fe=Ze[0],rt=-1,tt=[];for(De=0;De<st.length;De++)if(nt=st[De],Fe.fullData._expandedIndex===nt.cd[0].trace._expandedIndex){if(Fe.hoverOnBox===!0)break;Fe.pointNumber!==void 0?rt=Fe.pointNumber:Fe.binNumber!==void 0&&(rt=Fe.binNumber,tt=Fe.pointNumbers);break}return{pointNumber:rt,pointNumbers:tt,searchInfo:nt}}(At,We=ae(Te,ye,Pe,Re));if(St.pointNumbers.length>0?function(Ze,st){var nt,De,Fe,rt=[];for(Fe=0;Fe<Ze.length;Fe++)(nt=Ze[Fe]).cd[0].trace.selectedpoints&&nt.cd[0].trace.selectedpoints.length>0&&rt.push(nt);if(rt.length===1&&rt[0]===st.searchInfo&&(De=st.searchInfo.cd[0].trace).selectedpoints.length===st.pointNumbers.length){for(Fe=0;Fe<st.pointNumbers.length;Fe++)if(De.selectedpoints.indexOf(st.pointNumbers[Fe])<0)return!1;return!0}return!1}(We,St):function(Ze){var st,nt,De=0;for(nt=0;nt<Ze.length;nt++)if((st=Ze[nt].cd[0].trace).selectedpoints&&(st.selectedpoints.length>1||(De+=st.selectedpoints.length)>1))return!1;return De===1}(We)&&(_t=he(St))){for(He&&He.remove(),ot=0;ot<We.length;ot++)(Je=We[ot])._module.selectPoints(Je,!1);de(Te,We),ne(ze),Ct&&Be(Te)}else{for(xt=ce.shiftKey&&(_t!==void 0?_t:he(St)),lt=function(Ze,st,nt){return{pointNumber:Ze,searchInfo:st,subtract:!!nt}}(St.pointNumber,St.searchInfo,xt),et=Z(ze.selectionDefs.concat([lt])),ot=0;ot<We.length;ot++)if(yt=me(We[ot]._module.selectPoints(We[ot],et),We[ot]),zt.length)for(var qe=0;qe<yt.length;qe++)zt.push(yt[qe]);else zt=yt;if(de(Te,We,at={points:zt}),lt&&ze&&ze.selectionDefs.push(lt),He){var Xe=ze.mergedPolygons,Ve=s(ze.dragmode);c(ve(Xe,Ve),He,ze)}Ct&&Ie(Te,at)}}}function X(ce){return"pointNumber"in ce&&"searchInfo"in ce}function q(ce){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Te,ye,Pe,Re){var ze=ce.searchInfo.cd[0].trace._expandedIndex;return Re.cd[0].trace._expandedIndex===ze&&Pe===ce.pointNumber},isRect:!1,degenerate:!1,subtract:!!ce.subtract}}function Z(ce){if(ce.length){for(var Te=[],ye=X(ce[0])?0:ce[0][0][0],Pe=ye,Re=X(ce[0])?0:ce[0][0][1],ze=Re,He=0;He<ce.length;He++)if(X(ce[He]))Te.push(q(ce[He]));else{var We=H(ce[He]);We.subtract=!!ce[He].subtract,Te.push(We),ye=Math.min(ye,We.xmin),Pe=Math.max(Pe,We.xmax),Re=Math.min(Re,We.ymin),ze=Math.max(ze,We.ymax)}return{xmin:ye,xmax:Pe,ymin:Re,ymax:ze,pts:[],contains:function(Je,lt,et,yt){for(var _t=!1,xt=0;xt<Te.length;xt++)Te[xt].contains(Je,lt,et,yt)&&(_t=!Te[xt].subtract);return _t},isRect:!1,degenerate:!1}}}function J(ce,Te,ye){var Pe=Te._fullLayout,Re=ye.plotinfo,ze=ye.dragmode,He=Pe._lastSelectedSubplot&&Pe._lastSelectedSubplot===Re.id,We=(ce.shiftKey||ce.altKey)&&!(n(ze)&&s(ze));He&&We&&Re.selection&&Re.selection.selectionDefs&&!ye.selectionDefs?(ye.selectionDefs=Re.selection.selectionDefs,ye.mergedPolygons=Re.selection.mergedPolygons):We&&Re.selection||ne(ye),He||(x(Te),Pe._lastSelectedSubplot=Re.id)}function ne(ce,Te){var ye=ce.dragmode,Pe=ce.plotinfo,Re=ce.gd;(function(yt){return yt._fullLayout._activeShapeIndex>=0})(Re)&&Re._fullLayout._deactivateShape(Re),function(yt){return yt._fullLayout._activeSelectionIndex>=0}(Re)&&Re._fullLayout._deactivateSelection(Re);var ze=Re._fullLayout._zoomlayer,He=n(ye),We=a(ye);if(He||We){var Je,lt,et=ze.selectAll(".select-outline-"+Pe.id);et&&Re._fullLayout._outlining&&(He&&(Je=v(et,ce)),Je&&l.call("_guiRelayout",Re,{shapes:Je}),We&&!te(ce)&&(lt=y(et,ce)),lt&&(Re._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",Re,{selections:lt}).then(function(){Te&&w(Re)})),Re._fullLayout._outlining=!1)}Pe.selection={},Pe.selection.selectionDefs=ce.selectionDefs=[],Pe.selection.mergedPolygons=ce.mergedPolygons=[]}function re(ce){return ce._id}function ae(ce,Te,ye,Pe){if(!ce.calcdata)return[];var Re,ze,He,We=[],Je=Te.map(re),lt=ye.map(re);for(He=0;He<ce.calcdata.length;He++)if((ze=(Re=ce.calcdata[He])[0].trace).visible===!0&&ze._module&&ze._module.selectPoints)if(!te({subplot:Pe})||ze.subplot!==Pe&&ze.geo!==Pe)if(ze.type==="splom"){if(ze._xaxes[Je[0]]&&ze._yaxes[lt[0]]){var et=ue(ze._module,Re,Te[0],ye[0]);et.scene=ce._fullLayout._splomScenes[ze.uid],We.push(et)}}else if(ze.type==="sankey"){var yt=ue(ze._module,Re,Te[0],ye[0]);We.push(yt)}else{if(Je.indexOf(ze.xaxis)===-1||lt.indexOf(ze.yaxis)===-1)continue;We.push(ue(ze._module,Re,C(ce,ze.xaxis),C(ce,ze.yaxis)))}else We.push(ue(ze._module,Re,Te[0],ye[0]));return We}function ue(ce,Te,ye,Pe){return{_module:ce,cd:Te,xaxis:ye,yaxis:Pe}}function he(ce){var Te=ce.searchInfo.cd[0].trace,ye=ce.pointNumber,Pe=ce.pointNumbers,Re=Pe.length>0?Pe[0]:ye;return!!Te.selectedpoints&&Te.selectedpoints.indexOf(Re)>-1}function de(ce,Te,ye){var Pe,Re;for(Pe=0;Pe<Te.length;Pe++){var ze=Te[Pe].cd[0].trace._fullInput,He=ce._fullLayout._tracePreGUI[ze.uid]||{};He.selectedpoints===void 0&&(He.selectedpoints=ze._input.selectedpoints||null)}if(ye){var We=ye.points||[];for(Pe=0;Pe<Te.length;Pe++)(Re=Te[Pe].cd[0].trace)._input.selectedpoints=Re._fullInput.selectedpoints=[],Re._fullInput!==Re&&(Re.selectedpoints=[]);for(var Je=0;Je<We.length;Je++){var lt=We[Je],et=lt.data,yt=lt.fullData,_t=lt.pointIndex,xt=lt.pointIndices;xt?([].push.apply(et.selectedpoints,xt),Re._fullInput!==Re&&[].push.apply(yt.selectedpoints,xt)):(et.selectedpoints.push(_t),Re._fullInput!==Re&&yt.selectedpoints.push(_t))}}else for(Pe=0;Pe<Te.length;Pe++)delete(Re=Te[Pe].cd[0].trace).selectedpoints,delete Re._input.selectedpoints,Re._fullInput!==Re&&delete Re._fullInput.selectedpoints;(function(at,ot){for(var At=!1,Ct=0;Ct<ot.length;Ct++){var zt=ot[Ct],St=zt.cd;l.traceIs(St[0].trace,"regl")&&(At=!0);var qe=zt._module,Xe=qe.styleOnSelect||qe.style;Xe&&(Xe(at,St,St[0].node3),St[0].nodeRangePlot3&&Xe(at,St,St[0].nodeRangePlot3))}At&&(L(at),O(at))})(ce,Te)}function xe(ce,Te,ye){for(var Pe=(ye?A.difference:A.union)({regions:ce},{regions:[Te]}).regions.reverse(),Re=0;Re<Pe.length;Re++){var ze=Pe[Re];ze.subtract=fe(ze,Pe.slice(0,Re))}return Pe}function me(ce,Te){if(Array.isArray(ce))for(var ye=Te.cd,Pe=Te.cd[0].trace,Re=0;Re<ce.length;Re++)ce[Re]=o(ce[Re],Pe,ye);return ce}function ve(ce,Te){for(var ye=[],Pe=0;Pe<ce.length;Pe++){ye[Pe]=[];for(var Re=0;Re<ce[Pe].length;Re++){ye[Pe][Re]=[],ye[Pe][Re][0]=Re?"L":"M";for(var ze=0;ze<ce[Pe][Re].length;ze++)ye[Pe][Re].push(ce[Pe][Re][ze])}Te||ye[Pe].push(["Z",ye[Pe][0][1],ye[Pe][0][2]])}return ye}function Le(ce,Te){for(var ye,Pe,Re=[],ze=[],He=0;He<Te.length;He++){var We=Te[He];Pe=We._module.selectPoints(We,ce),ze.push(Pe),ye=me(Pe,We),Re=Re.concat(ye)}return Re}function Ae(ce,Te,ye,Pe,Re){var ze,He,We,Je=!!Pe;Re&&(ze=Re.plotinfo,He=Re.xaxes[0]._id,We=Re.yaxes[0]._id);var lt=[],et=[],yt=oe(ce),_t=ce._fullLayout;if(ze){var xt=_t._zoomlayer,at=_t.dragmode,ot=n(at),At=a(at);if(ot||At){var Ct=C(ce,He,"x"),zt=C(ce,We,"y");if(Ct&&zt){var St=xt.selectAll(".select-outline-"+ze.id);if(St&&ce._fullLayout._outlining&&St.length){for(var qe=St[0][0].getAttribute("d"),Xe=b(qe,ce,ze),Ve=[],Ze=0;Ze<Xe.length;Ze++){for(var st=Xe[Ze],nt=[],De=0;De<st.length;De++)nt.push([Se(Ct,st[De][1]),Se(zt,st[De][2])]);nt.xref=He,nt.yref=We,nt.subtract=fe(nt,Ve),Ve.push(nt)}yt=yt.concat(Ve)}}}}var Fe=He&&We?[He+We]:_t._subplots.cartesian;(function(Sn){var Nn=Sn.calcdata;if(Nn)for(var _n=0;_n<Nn.length;_n++){var Pn=Nn[_n][0].trace,tr=Sn._fullLayout._splomScenes;if(tr){var ur=tr[Pn.uid];ur&&(ur.selectBatch=[])}}})(ce);for(var rt={},tt=0;tt<Fe.length;tt++){var gt=Fe[tt],dt=gt.indexOf("y"),mt=gt.slice(0,dt),ft=gt.slice(dt),kt=He&&We?ye:void 0;if(kt=se(yt,mt,ft,kt)){var ht=Pe;if(!Je){var pt=C(ce,mt,"x"),wt=C(ce,ft,"y");ht=ae(ce,[pt],[wt],gt);for(var Ft=0;Ft<ht.length;Ft++){var Nt=ht[Ft],Gt=Nt.cd[0],an=Gt.trace;if(Nt._module.name==="scattergl"&&!Gt.t.xpx){var Wt=an.x,Yt=an.y,en=an._length;Gt.t.xpx=[],Gt.t.ypx=[];for(var Tn=0;Tn<en;Tn++)Gt.t.xpx[Tn]=pt.c2p(Wt[Tn]),Gt.t.ypx[Tn]=wt.c2p(Yt[Tn])}Nt._module.name==="splom"&&(rt[an.uid]||(rt[an.uid]=!0))}}var Bn=Le(kt,ht);lt=lt.concat(Bn),et=et.concat(ht)}}var mn={points:lt};de(ce,et,mn);var Kt=_t.clickmode.indexOf("event")>-1&&Te;if(!ze&&Te){var cn=oe(ce,!0);if(cn.length){var tn=cn[0].xref,un=cn[0].yref;if(tn&&un){var yn=Me(cn);be([C(ce,tn,"x"),C(ce,un,"y")])(mn,yn)}}ce._fullLayout._noEmitSelectedAtStart?ce._fullLayout._noEmitSelectedAtStart=!1:Kt&&Ie(ce,mn),_t._reselect=!1}if(!ze&&_t._deselect){var En=_t._deselect;(function(Sn,Nn,_n){for(var Pn=0;Pn<_n.length;Pn++){var tr=_n[Pn];if(tr.xaxis&&tr.xaxis._id===Sn&&tr.yaxis&&tr.yaxis._id===Nn)return!0}return!1})(He=En.xref,We=En.yref,et)||we(ce,He,We,Pe),Kt&&(mn.points.length?Ie(ce,mn):Be(ce)),_t._deselect=!1}return{eventData:mn,selectionTesters:ye}}function we(ce,Te,ye,Pe){Pe=ae(ce,[C(ce,Te,"x")],[C(ce,ye,"y")],Te+ye);for(var Re=0;Re<Pe.length;Re++){var ze=Pe[Re];ze._module.selectPoints(ze,!1)}de(ce,Pe)}function se(ce,Te,ye,Pe){for(var Re,ze=0;ze<ce.length;ze++){var He=ce[ze];Te===He.xref&&ye===He.yref&&(Re?Pe=Z(Re=xe(Re,He,!!He.subtract)):(Re=[He],Pe=H(He)))}return Pe}function oe(ce,Te){for(var ye=[],Pe=ce._fullLayout,Re=Pe.selections,ze=Re.length,He=0;He<ze;He++)if(!Te||He===Pe._activeSelectionIndex){var We=Re[He];if(We){var Je,lt,et,yt,_t,xt=We.xref,at=We.yref,ot=C(ce,xt,"x"),At=C(ce,at,"y");if(We.type==="rect"){_t=[];var Ct=Se(ot,We.x0),zt=Se(ot,We.x1),St=Se(At,We.y0),qe=Se(At,We.y1);_t=[[Ct,St],[Ct,qe],[zt,qe],[zt,St]],Je=Math.min(Ct,zt),lt=Math.max(Ct,zt),et=Math.min(St,qe),yt=Math.max(St,qe),_t.xmin=Je,_t.xmax=lt,_t.ymin=et,_t.ymax=yt,_t.xref=xt,_t.yref=at,_t.subtract=!1,_t.isRect=!0,ye.push(_t)}else if(We.type==="path")for(var Xe=We.path.split("Z"),Ve=[],Ze=0;Ze<Xe.length;Ze++){var st=Xe[Ze];if(st){st+="Z";var nt=u.extractPathCoords(st,p.paramIsX,"raw"),De=u.extractPathCoords(st,p.paramIsY,"raw");Je=1/0,lt=-1/0,et=1/0,yt=-1/0,_t=[];for(var Fe=0;Fe<nt.length;Fe++){var rt=Se(ot,nt[Fe]),tt=Se(At,De[Fe]);_t.push([rt,tt]),Je=Math.min(rt,Je),lt=Math.max(rt,lt),et=Math.min(tt,et),yt=Math.max(tt,yt)}_t.xmin=Je,_t.xmax=lt,_t.ymin=et,_t.ymax=yt,_t.xref=xt,_t.yref=at,_t.subtract=fe(_t,Ve),Ve.push(_t),ye.push(_t)}}}}return ye}function fe(ce,Te){for(var ye=!1,Pe=0;Pe<Te.length;Pe++)for(var Re=Te[Pe],ze=0;ze<ce.length;ze++)if(M(ce[ze],Re)){ye=!ye;break}return ye}function Se(ce,Te){return ce.type==="date"&&(Te=Te.replace("_"," ")),ce.type==="log"?ce.c2p(Te):ce.r2p(Te,null,ce.calendar)}function Me(ce){for(var Te=ce.length,ye=[],Pe=0;Pe<Te;Pe++){var Re=ce[Pe];ye=(ye=ye.concat(Re)).concat([Re[0]])}return(ze=ye).isRect=ze.length===5&&ze[0][0]===ze[4][0]&&ze[0][1]===ze[4][1]&&ze[0][0]===ze[1][0]&&ze[2][0]===ze[3][0]&&ze[0][1]===ze[3][1]&&ze[1][1]===ze[2][1]||ze[0][1]===ze[1][1]&&ze[2][1]===ze[3][1]&&ze[0][0]===ze[3][0]&&ze[1][0]===ze[2][0],ze.isRect&&(ze.xmin=Math.min(ze[0][0],ze[2][0]),ze.xmax=Math.max(ze[0][0],ze[2][0]),ze.ymin=Math.min(ze[0][1],ze[2][1]),ze.ymax=Math.max(ze[0][1],ze[2][1])),ze;var ze}function be(ce){return function(Te,ye){for(var Pe,Re,ze=0;ze<ce.length;ze++){var He=ce[ze],We=He._id,Je=We.charAt(0);if(ye.isRect){Pe||(Pe={});var lt=ye[Je+"min"],et=ye[Je+"max"];lt!==void 0&&et!==void 0&&(Pe[We]=[F(He,lt),F(He,et)].sort(S))}else Re||(Re={}),Re[We]=ye.map(V(He))}Pe&&(Te.range=Pe),Re&&(Te.lassoPoints=Re)}}function Ie(ce,Te){Te&&(Te.selections=(ce.layout||{}).selections||[]),ce.emit("plotly_selected",Te)}function Be(ce){ce.emit("plotly_deselect",null)}$.exports={reselect:Ae,prepSelect:function(ce,Te,ye,Pe,Re){var ze=!te(Pe),He=i(Re),We=r(Re),Je=s(Re),lt=n(Re),et=a(Re),yt=Re==="drawcircle",_t=Re==="drawline"||yt,xt=Pe.gd,at=xt._fullLayout,ot=et&&at.newselection.mode==="immediate"&&ze,At=at._zoomlayer,Ct=Pe.element.getBoundingClientRect(),zt=Pe.plotinfo,St=W(zt),qe=Te-Ct.left,Xe=ye-Ct.top;at._calcInverseTransform(xt);var Ve=d.apply3DTransform(at._invTransform)(qe,Xe);qe=Ve[0],Xe=Ve[1];var Ze,st,nt,De,Fe,rt,tt,gt=at._invScaleX,dt=at._invScaleY,mt=qe,ft=Xe,kt="M"+qe+","+Xe,ht=Pe.xaxes[0],pt=Pe.yaxes[0],wt=ht._length,Ft=pt._length,Nt=ce.altKey&&!(n(Re)&&Je);J(ce,xt,Pe),He&&(Ze=I([[qe,Xe]],z.BENDPX));var Gt=At.selectAll("path.select-outline-"+zt.id).data([1]),an=lt?at.newshape:at.newselection;lt&&(Pe.hasText=an.label.text||an.label.texttemplate);var Wt=lt&&!Je?an.fillcolor:"rgba(0,0,0,0)",Yt=an.line.color||(ze?m.contrast(xt._fullLayout.plot_bgcolor):"#7f7f7f");Gt.enter().append("path").attr("class","select-outline select-outline-"+zt.id).style({opacity:lt?an.opacity/2:1,"stroke-dasharray":_(an.line.dash,an.line.width),"stroke-width":an.line.width+"px","shape-rendering":"crispEdges"}).call(m.stroke,Yt).call(m.fill,Wt).attr("fill-rule","evenodd").classed("cursor-move",!!lt).attr("transform",St).attr("d",kt+"Z");var en=At.append("path").attr("class","zoombox-corners").style({fill:m.background,stroke:m.defaultLine,"stroke-width":1}).attr("transform",St).attr("d","M0,0Z");if(lt&&Pe.hasText){var Tn=At.select(".label-temp");Tn.empty()&&(Tn=At.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var Bn=at._uid+z.SELECTID,mn=[],Kt=ae(xt,Pe.xaxes,Pe.yaxes,Pe.subplot);ot&&!ce.shiftKey&&(Pe._clearSubplotSelections=function(){if(ze){var tn=ht._id,un=pt._id;we(xt,tn,un,Kt);for(var yn=(xt.layout||{}).selections||[],En=[],Sn=!1,Nn=0;Nn<yn.length;Nn++){var _n=at.selections[Nn];_n.xref!==tn||_n.yref!==un?En.push(yn[Nn]):Sn=!0}Sn&&(xt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",xt,{selections:En}))}});var cn=function(tn){return tn.plotinfo.fillRangeItems||be(tn.xaxes.concat(tn.yaxes))}(Pe);Pe.moveFn=function(tn,un){Pe._clearSubplotSelections&&(Pe._clearSubplotSelections(),Pe._clearSubplotSelections=void 0),mt=Math.max(0,Math.min(wt,gt*tn+qe)),ft=Math.max(0,Math.min(Ft,dt*un+Xe));var yn=Math.abs(mt-qe),En=Math.abs(ft-Xe);if(We){var Sn,Nn,_n;if(et){var Pn=at.selectdirection;switch(Sn=Pn==="any"?En<Math.min(.6*yn,G)?"h":yn<Math.min(.6*En,G)?"v":"d":Pn){case"h":Nn=yt?Ft/2:0,_n=Ft;break;case"v":Nn=yt?wt/2:0,_n=wt}}if(lt)switch(at.newshape.drawdirection){case"vertical":Sn="h",Nn=yt?Ft/2:0,_n=Ft;break;case"horizontal":Sn="v",Nn=yt?wt/2:0,_n=wt;break;case"ortho":yn<En?(Sn="h",Nn=Xe,_n=ft):(Sn="v",Nn=qe,_n=mt);break;default:Sn="d"}Sn==="h"?((De=_t?h(yt,[mt,Nn],[mt,_n]):[[qe,Nn],[qe,_n],[mt,_n],[mt,Nn]]).xmin=_t?mt:Math.min(qe,mt),De.xmax=_t?mt:Math.max(qe,mt),De.ymin=Math.min(Nn,_n),De.ymax=Math.max(Nn,_n),en.attr("d","M"+De.xmin+","+(Xe-G)+"h-4v"+2*G+"h4ZM"+(De.xmax-1)+","+(Xe-G)+"h4v"+2*G+"h-4Z")):Sn==="v"?((De=_t?h(yt,[Nn,ft],[_n,ft]):[[Nn,Xe],[Nn,ft],[_n,ft],[_n,Xe]]).xmin=Math.min(Nn,_n),De.xmax=Math.max(Nn,_n),De.ymin=_t?ft:Math.min(Xe,ft),De.ymax=_t?ft:Math.max(Xe,ft),en.attr("d","M"+(qe-G)+","+De.ymin+"v-4h"+2*G+"v4ZM"+(qe-G)+","+(De.ymax-1)+"v4h"+2*G+"v-4Z")):Sn==="d"&&((De=_t?h(yt,[qe,Xe],[mt,ft]):[[qe,Xe],[qe,ft],[mt,ft],[mt,Xe]]).xmin=Math.min(qe,mt),De.xmax=Math.max(qe,mt),De.ymin=Math.min(Xe,ft),De.ymax=Math.max(Xe,ft),en.attr("d","M0,0Z"))}else He&&(Ze.addPt([mt,ft]),De=Ze.filtered);if(Pe.selectionDefs&&Pe.selectionDefs.length?(nt=xe(Pe.mergedPolygons,De,Nt),De.subtract=Nt,st=Z(Pe.selectionDefs.concat([De]))):(nt=[De],st=H(De)),c(ve(nt,Je),Gt,Pe),et){var tr,ur=Ae(xt,!1),lr=ur.eventData?ur.eventData.points.slice():[];ur=Ae(xt,!1,st,Kt,Pe),st=ur.selectionTesters,tt=ur.eventData,tr=Ze?Ze.filtered:Me(nt),E.throttle(Bn,z.SELECTDELAY,function(){for(var ir=(mn=Le(st,Kt)).slice(),$n=0;$n<lr.length;$n++){for(var vr=lr[$n],jt=!1,rn=0;rn<ir.length;rn++)if(ir[rn].curveNumber===vr.curveNumber&&ir[rn].pointNumber===vr.pointNumber){jt=!0;break}jt||ir.push(vr)}ir.length&&(tt||(tt={}),tt.points=ir),cn(tt,tr),function(fn,xn){fn.emit("plotly_selecting",xn)}(xt,tt)})}},Pe.clickFn=function(tn,un){if(en.remove(),xt._fullLayout._activeShapeIndex>=0)xt._fullLayout._deactivateShape(xt);else if(!lt){var yn=at.clickmode;E.done(Bn).then(function(){if(E.clear(Bn),tn===2){for(Gt.remove(),Fe=0;Fe<Kt.length;Fe++)(rt=Kt[Fe])._module.selectPoints(rt,!1);if(de(xt,Kt),ne(Pe),Be(xt),Kt.length){var En=Kt[0].xaxis,Sn=Kt[0].yaxis;if(En&&Sn){for(var Nn=[],_n=xt._fullLayout.selections,Pn=0;Pn<_n.length;Pn++){var tr=_n[Pn];tr&&(tr.xref===En._id&&tr.yref===Sn._id||Nn.push(tr))}Nn.length<_n.length&&(xt._fullLayout._noEmitSelectedAtStart=!0,l.call("_guiRelayout",xt,{selections:Nn}))}}}else yn.indexOf("select")>-1&&Q(un,xt,Pe.xaxes,Pe.yaxes,Pe.subplot,Pe,Gt),yn==="event"&&Ie(xt,void 0);f.click(xt,un,zt.id)}).catch(d.error)}},Pe.doneFn=function(){en.remove(),E.done(Bn).then(function(){E.clear(Bn),!ot&&De&&Pe.selectionDefs&&(De.subtract=Nt,Pe.selectionDefs.push(De),Pe.mergedPolygons.length=0,[].push.apply(Pe.mergedPolygons,nt)),(ot||lt)&&ne(Pe,ot),Pe.doneFnCompleted&&Pe.doneFnCompleted(mn),et&&Ie(xt,tt)}).catch(d.error)}},clearOutline:x,clearSelectionsCache:ne,selectOnClick:Q}},89827:function($,P,t){var A=t(50215),M=t(41940),l=t(82196).line,_=t(79952).P,m=t(1426).extendFlat,f=t(44467).templatedArray,o=(t(24695),t(9012)),e=t(5386).R,i=t(37281);$.exports=f("shape",{visible:m({},o.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:m({},o.legend,{editType:"calc+arraydraw"}),legendgroup:m({},o.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:m({},o.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:M({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:m({},o.legendrank,{editType:"calc+arraydraw"}),legendwidth:m({},o.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:m({},A.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:m({},A.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:m({},l.color,{editType:"arraydraw"}),width:m({},l.width,{editType:"calc+arraydraw"}),dash:m({},_,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:e({},{keys:Object.keys(i)}),font:M({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},5627:function($,P,t){var A=t(71828),M=t(89298),l=t(21459),_=t(30477);function m(i){return o(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function f(i){return o(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function o(i,r,n,s,a,u){var p=i/2,c=u;if(r==="pixel"){var x=a?_.extractPathCoords(a,u?l.paramIsY:l.paramIsX):[n,s],g=A.aggNums(Math.max,null,x),h=A.aggNums(Math.min,null,x),b=h<0?Math.abs(h)+p:p,v=g>0?g+p:p;return{ppad:p,ppadplus:c?b:v,ppadminus:c?v:b}}return{ppad:p}}function e(i,r,n,s,a){var u=i.type==="category"||i.type==="multicategory"?i.r2c:i.d2c;if(r!==void 0)return[u(r),u(n)];if(s){var p,c,x,g,h=1/0,b=-1/0,v=s.match(l.segmentRE);for(i.type==="date"&&(u=_.decodeDate(u)),p=0;p<v.length;p++)(c=a[v[p].charAt(0)].drawn)!==void 0&&(!(x=v[p].substr(1).match(l.paramRE))||x.length<c||((g=u(x[c]))<h&&(h=g),g>b&&(b=g)));return b>=h?[h,b]:void 0}}$.exports=function(i){var r=i._fullLayout,n=A.filterVisible(r.shapes);if(n.length&&i._fullData.length)for(var s=0;s<n.length;s++){var a,u,p=n[s];p._extremes={};var c=M.getRefType(p.xref),x=M.getRefType(p.yref);if(p.xref!=="paper"&&c!=="domain"){var g=p.xsizemode==="pixel"?p.xanchor:p.x0,h=p.xsizemode==="pixel"?p.xanchor:p.x1;(u=e(a=M.getFromId(i,p.xref),g,h,p.path,l.paramIsX))&&(p._extremes[a._id]=M.findExtremes(a,u,m(p)))}if(p.yref!=="paper"&&x!=="domain"){var b=p.ysizemode==="pixel"?p.yanchor:p.y0,v=p.ysizemode==="pixel"?p.yanchor:p.y1;(u=e(a=M.getFromId(i,p.yref),b,v,p.path,l.paramIsY))&&(p._extremes[a._id]=M.findExtremes(a,u,f(p)))}}}},21459:function($){$.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},84726:function($,P,t){var A=t(71828),M=t(89298),l=t(85501),_=t(89827),m=t(30477);function f(o,e,i){function r(N,F){return A.coerce(o,e,_,N,F)}if(e._isShape=!0,r("visible")){r("showlegend")&&(r("legend"),r("legendwidth"),r("legendgroup"),r("legendgrouptitle.text"),A.coerceFont(r,"legendgrouptitle.font"),r("legendrank"));var n=r("path"),s=r("type",n?"path":"rect"),a=s!=="path";a&&delete e.path,r("editable"),r("layer"),r("opacity"),r("fillcolor"),r("fillrule"),r("line.width")&&(r("line.color"),r("line.dash"));for(var u=r("xsizemode"),p=r("ysizemode"),c=["x","y"],x=0;x<2;x++){var g,h,b,v=c[x],y=v+"anchor",w=v==="x"?u:p,d={_fullLayout:i},S=M.coerceRef(o,e,d,v,void 0,"paper");if(M.getRefType(S)==="range"?((g=M.getFromId(d,S))._shapeIndices.push(e._index),b=m.rangeToShapePosition(g),h=m.shapePositionToRange(g)):h=b=A.identity,a){var T=v+"0",E=v+"1",C=o[T],L=o[E];o[T]=h(o[T],!0),o[E]=h(o[E],!0),w==="pixel"?(r(T,0),r(E,10)):(M.coercePosition(e,d,r,S,T,.25),M.coercePosition(e,d,r,S,E,.75)),e[T]=b(e[T]),e[E]=b(e[E]),o[T]=C,o[E]=L}if(w==="pixel"){var O=o[y];o[y]=h(o[y],!0),M.coercePosition(e,d,r,S,y,.25),e[y]=b(e[y]),o[y]=O}}a&&A.noneOrAll(o,e,["x0","x1","y0","y1"]);var z,G,I=s==="line";if(a&&(z=r("label.texttemplate")),z||(G=r("label.text")),G||z){r("label.textangle");var H=r("label.textposition",I?"middle":"middle center");r("label.xanchor"),r("label.yanchor",function(N,F){return N?"bottom":F.indexOf("top")!==-1?"top":F.indexOf("bottom")!==-1?"bottom":"middle"}(I,H)),r("label.padding"),A.coerceFont(r,"label.font",i.font)}}}$.exports=function(o,e){l(o,e,{name:"shapes",handleItemDefaults:f})}},48100:function($,P,t){var A=t(71828),M=t(89298),l=t(63893),_=t(91424),m=t(60165).readPaths,f=t(30477),o=f.getPathString,e=t(37281),i=t(18783).FROM_TL;$.exports=function(r,n,s,a){if(a.selectAll(".shape-label").remove(),s.label.text||s.label.texttemplate){var u;if(s.label.texttemplate){var p={};if(s.type!=="path"){var c=M.getFromId(r,s.xref),x=M.getFromId(r,s.yref);for(var g in e){var h=e[g](s,c,x);h!==void 0&&(p[g]=h)}}u=A.texttemplateStringForShapes(s.label.texttemplate,{},r._fullLayout._d3locale,p)}else u=s.label.text;var b,v,y,w,d={"data-index":n},S=s.label.font,T=a.append("g").attr(d).classed("shape-label",!0).append("text").attr({"data-notex":1}).classed("shape-label-text",!0).text(u);if(s.path){var E=o(r,s),C=m(E,r);b=1/0,y=1/0,v=-1/0,w=-1/0;for(var L=0;L<C.length;L++)for(var O=0;O<C[L].length;O++)for(var z=C[L][O],G=1;G<z.length;G+=2){var I=z[G],H=z[G+1];b=Math.min(b,I),v=Math.max(v,I),y=Math.min(y,H),w=Math.max(w,H)}}else{var N=M.getFromId(r,s.xref),F=M.getRefType(s.xref),V=M.getFromId(r,s.yref),W=M.getRefType(s.yref),te=f.getDataToPixel(r,N,!1,F),Q=f.getDataToPixel(r,V,!0,W);b=te(s.x0),v=te(s.x1),y=Q(s.y0),w=Q(s.y1)}var X=s.label.textangle;X==="auto"&&(X=s.type==="line"?function(re,ae,ue,he){var de,xe;return xe=Math.abs(ue-re),de=ue>=re?ae-he:he-ae,-180/Math.PI*Math.atan2(de,xe)}(b,y,v,w):0),T.call(function(re){return re.call(_.font,S).attr({}),l.convertToTspans(re,r),re});var q=function(re,ae,ue,he,de,xe,me){var ve,Le,Ae,we,se=de.label.textposition,oe=de.label.textangle,fe=de.label.padding,Se=de.type,Me=Math.PI/180*xe,be=Math.sin(Me),Ie=Math.cos(Me),Be=de.label.xanchor,ce=de.label.yanchor;if(Se==="line"){se==="start"?(ve=re,Le=ae):se==="end"?(ve=ue,Le=he):(ve=(re+ue)/2,Le=(ae+he)/2),Be==="auto"&&(Be=se==="start"?oe==="auto"?ue>re?"left":ue<re?"right":"center":ue>re?"right":ue<re?"left":"center":se==="end"?oe==="auto"?ue>re?"right":ue<re?"left":"center":ue>re?"left":ue<re?"right":"center":"center");var Te={bottom:-1,middle:0,top:1};if(oe==="auto"){var ye=Te[ce];Ae=-fe*be*ye,we=fe*Ie*ye}else Ae=fe*{left:1,center:0,right:-1}[Be],we=fe*Te[ce];ve+=Ae,Le+=we}else Ae=fe+3,se.indexOf("right")!==-1?(ve=Math.max(re,ue)-Ae,Be==="auto"&&(Be="right")):se.indexOf("left")!==-1?(ve=Math.min(re,ue)+Ae,Be==="auto"&&(Be="left")):(ve=(re+ue)/2,Be==="auto"&&(Be="center")),Le=se.indexOf("top")!==-1?Math.min(ae,he):se.indexOf("bottom")!==-1?Math.max(ae,he):(ae+he)/2,we=fe,ce==="bottom"?Le-=we:ce==="top"&&(Le+=we);var Pe=i[ce],Re=de.label.font.size,ze=me.height;return{textx:ve+(ze*Pe-Re)*be,texty:Le+-(ze*Pe-Re)*Ie,xanchor:Be}}(b,y,v,w,s,X,_.bBox(T.node())),Z=q.textx,J=q.texty,ne=q.xanchor;T.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[ne],y:J,x:Z,transform:"rotate("+X+","+Z+","+J+")"}).call(l.positionText,Z,J)}}},42359:function($,P,t){var A=t(71828).strTranslate,M=t(28569),l=t(64505),_=l.drawMode,m=l.selectMode,f=t(73972),o=t(7901),e=t(89995),i=e.i000,r=e.i090,n=e.i180,s=e.i270,a=t(51873).clearOutlineControllers,u=t(60165),p=u.pointsOnRectangle,c=u.pointsOnEllipse,x=u.writePaths,g=t(90551).newShapes,h=t(90551).createShapeObj,b=t(35855),v=t(48100);function y(w,d){var S,T,E,C=w[d][1],L=w[d][2],O=w.length;return T=w[S=(d+1)%O][1],E=w[S][2],T===C&&E===L&&(T=w[S=(d+2)%O][1],E=w[S][2]),[S,T,E]}$.exports=function w(d,S,T,E){E||(E=0);var C=T.gd;function L(){w(d,S,T,E++),(c(d[0])||T.hasText)&&O({redrawing:!0})}function O(de){var xe={};T.isActiveShape!==void 0&&(T.isActiveShape=!1,xe=g(S,T)),T.isActiveSelection!==void 0&&(T.isActiveSelection=!1,xe=b(S,T),C._fullLayout._reselect=!0),Object.keys(xe).length&&f.call((de||{}).redrawing?"relayout":"_guiRelayout",C,xe)}var z,G,I,H,N,F=C._fullLayout._zoomlayer,V=T.dragmode,W=_(V),te=m(V);if((W||te)&&(C._fullLayout._outlining=!0),a(C),S.attr("d",x(d)),E||!T.isActiveShape&&!T.isActiveSelection||(N=function(de,xe){for(var me=0;me<xe.length;me++){var ve=xe[me];de[me]=[];for(var Le=0;Le<ve.length;Le++){de[me][Le]=[];for(var Ae=0;Ae<ve[Le].length;Ae++)de[me][Le][Ae]=ve[Le][Ae]}}return de}([],d),function(de){z=[];for(var xe=0;xe<d.length;xe++){var me=d[xe],ve=p(me),Le=!ve&&c(me);z[xe]=[];for(var Ae=me.length,we=0;we<Ae;we++)if(me[we][0]!=="Z"&&(!Le||we===i||we===r||we===n||we===s)){var se,oe=ve&&T.isActiveSelection;oe&&(se=y(me,we));var fe=me[we][1],Se=me[we][2],Me=de.append(oe?"rect":"circle").attr("data-i",xe).attr("data-j",we).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(oe){var be=se[1]-fe,Ie=se[2]-Se,Be=Ie?5:Math.max(Math.min(25,Math.abs(be)-5),5),ce=be?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);Me.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Be).attr("height",ce).attr("x",fe-Be/2).attr("y",Se-ce/2).attr("transform",A(be/2,Ie/2))}else Me.classed("cursor-grab",!0).attr("r",5).attr("cx",fe).attr("cy",Se);z[xe][we]={element:Me.node(),gd:C,prepFn:q,doneFn:J,clickFn:ne},M.init(z[xe][we])}}}(F.append("g").attr("class","outline-controllers")),function(){G=[],d.length&&(G[0]={element:S[0][0],gd:C,prepFn:ae,doneFn:ue,clickFn:he},M.init(G[0]))}()),W&&T.hasText){var Q=F.select(".label-temp"),X=h(S,T,T.dragmode);v(C,"label-temp",X,Q)}function q(de){I=+de.srcElement.getAttribute("data-i"),H=+de.srcElement.getAttribute("data-j"),z[I][H].moveFn=Z}function Z(de,xe){if(d.length){var me=N[I][H][1],ve=N[I][H][2],Le=d[I],Ae=Le.length;if(p(Le)){var we=de,se=xe;T.isActiveSelection&&(y(Le,H)[1]===Le[H][1]?se=0:we=0);for(var oe=0;oe<Ae;oe++)if(oe!==H){var fe=Le[oe];fe[1]===Le[H][1]&&(fe[1]=me+we),fe[2]===Le[H][2]&&(fe[2]=ve+se)}if(Le[H][1]=me+we,Le[H][2]=ve+se,!p(Le))for(var Se=0;Se<Ae;Se++)for(var Me=0;Me<Le[Se].length;Me++)Le[Se][Me]=N[I][Se][Me]}else Le[H][1]=me+de,Le[H][2]=ve+xe;L()}}function J(){O()}function ne(de,xe){if(de===2){I=+xe.srcElement.getAttribute("data-i"),H=+xe.srcElement.getAttribute("data-j");var me=d[I];p(me)||c(me)||function(){if(d.length&&d[I]&&d[I].length){for(var ve=[],Le=0;Le<d[I].length;Le++)Le!==H&&ve.push(d[I][Le]);ve.length>1&&(ve.length!==2||ve[1][0]!=="Z")&&(H===0&&(ve[0][0]="M"),d[I]=ve,L(),O())}}()}}function re(de,xe){(function(me,ve){if(d.length)for(var Le=0;Le<d.length;Le++)for(var Ae=0;Ae<d[Le].length;Ae++)for(var we=0;we+2<d[Le][Ae].length;we+=2)d[Le][Ae][we+1]=N[Le][Ae][we+1]+me,d[Le][Ae][we+2]=N[Le][Ae][we+2]+ve})(de,xe),L()}function ae(de){(I=+de.srcElement.getAttribute("data-i"))||(I=0),G[I].moveFn=re}function ue(){O()}function he(de){de===2&&function(xe){if(m(xe._fullLayout.dragmode)){a(xe);var me=xe._fullLayout._activeSelectionIndex,ve=(xe.layout||{}).selections||[];if(me<ve.length){for(var Le=[],Ae=0;Ae<ve.length;Ae++)Ae!==me&&Le.push(ve[Ae]);delete xe._fullLayout._activeSelectionIndex;var we=xe._fullLayout.selections[me];xe._fullLayout._deselect={xref:we.xref,yref:we.yref},f.call("_guiRelayout",xe,{selections:Le})}}}(C)}}},34031:function($,P,t){var A=t(39898),M=t(73972),l=t(71828),_=t(89298),m=t(60165).readPaths,f=t(42359),o=t(48100),e=t(51873).clearOutlineControllers,i=t(7901),r=t(91424),n=t(44467).arrayEditor,s=t(28569),a=t(6964),u=t(21459),p=t(30477),c=p.getPathString;function x(d){var S=d._fullLayout;for(var T in S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove(),S._shapeUpperLayer.selectAll("text").remove(),S._shapeLowerLayer.selectAll("text").remove(),S._plots){var E=S._plots[T].shapelayer;E&&(E.selectAll("path").remove(),E.selectAll("text").remove())}for(var C=0;C<S.shapes.length;C++)S.shapes[C].visible===!0&&b(d,C)}function g(d){return!!d._fullLayout._outlining}function h(d){return!d._context.edits.shapePosition}function b(d,S){d._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var T=p.makeShapesOptionsAndPlotinfo(d,S),E=T.options,C=T.plotinfo;function L(O){var z=c(d,E),G={"data-index":S,"fill-rule":E.fillrule,d:z},I=E.opacity,H=E.fillcolor,N=E.line.width?E.line.color:"rgba(0,0,0,0)",F=E.line.width,V=E.line.dash;F||E.editable!==!0||(F=5,V="solid");var W=z[z.length-1]!=="Z",te=h(d)&&E.editable&&d._fullLayout._activeShapeIndex===S;te&&(H=W?"rgba(0,0,0,0)":d._fullLayout.activeshape.fillcolor,I=d._fullLayout.activeshape.opacity);var Q,X=O.append("g").classed("shape-group",!0).attr({"data-index":S}),q=X.append("path").attr(G).style("opacity",I).call(i.stroke,N).call(i.fill,H).call(r.dashLine,V,F);if(v(X,d,E),o(d,S,E,X),(te||d._context.edits.shapePosition)&&(Q=n(d.layout,"shapes",E)),te){q.style({cursor:"move"});var Z={element:q.node(),plotinfo:C,gd:d,editHelpers:Q,hasText:E.label.text||E.label.texttemplate,isActiveShape:!0},J=m(z,d);f(J,q,Z)}else d._context.edits.shapePosition?function(ne,re,ae,ue,he,de){var xe,me,ve,Le,Ae,we,se,oe,fe,Se,Me,be,Ie,Be,ce,Te,ye=10,Pe=10,Re=ae.xsizemode==="pixel",ze=ae.ysizemode==="pixel",He=ae.type==="line",We=ae.type==="path",Je=de.modifyItem,lt=A.select(re.node().parentNode),et=_.getFromId(ne,ae.xref),yt=_.getRefType(ae.xref),_t=_.getFromId(ne,ae.yref),xt=_.getRefType(ae.yref),at=p.getDataToPixel(ne,et,!1,yt),ot=p.getDataToPixel(ne,_t,!0,xt),At=p.getPixelToData(ne,et,!1,yt),Ct=p.getPixelToData(ne,_t,!0,xt),zt=He?function(){var nt=10,De=Math.max(ae.line.width,nt),Fe=he.append("g").attr("data-index",ue).attr("drag-helper",!0);Fe.append("path").attr("d",re.attr("d")).style({cursor:"move","stroke-width":De,"stroke-opacity":"0"});var rt={"fill-opacity":"0"},tt=Math.max(De/2,nt);return Fe.append("circle").attr({"data-line-point":"start-point",cx:Re?at(ae.xanchor)+ae.x0:at(ae.x0),cy:ze?ot(ae.yanchor)-ae.y0:ot(ae.y0),r:tt}).style(rt).classed("cursor-grab",!0),Fe.append("circle").attr({"data-line-point":"end-point",cx:Re?at(ae.xanchor)+ae.x1:at(ae.x1),cy:ze?ot(ae.yanchor)-ae.y1:ot(ae.y1),r:tt}).style(rt).classed("cursor-grab",!0),Fe}():re,St={element:zt.node(),gd:ne,prepFn:function(nt){g(ne)||(Re&&(Ae=at(ae.xanchor)),ze&&(we=ot(ae.yanchor)),ae.type==="path"?ce=ae.path:(xe=Re?ae.x0:at(ae.x0),me=ze?ae.y0:ot(ae.y0),ve=Re?ae.x1:at(ae.x1),Le=ze?ae.y1:ot(ae.y1)),xe<ve?(fe=xe,Ie="x0",Se=ve,Be="x1"):(fe=ve,Ie="x1",Se=xe,Be="x0"),!ze&&me<Le||ze&&me>Le?(se=me,Me="y0",oe=Le,be="y1"):(se=Le,Me="y1",oe=me,be="y0"),qe(nt),Ze(he,ae),function(De,Fe,rt){var tt=Fe.xref,gt=Fe.yref,dt=_.getFromId(rt,tt),mt=_.getFromId(rt,gt),ft="";tt==="paper"||dt.autorange||(ft+=tt),gt==="paper"||mt.autorange||(ft+=gt),r.setClipUrl(De,ft?"clip"+rt._fullLayout._uid+ft:null,rt)}(re,ae,ne),St.moveFn=Te==="move"?Xe:Ve,St.altKey=nt.altKey)},doneFn:function(){g(ne)||(a(re),st(he),v(re,ne,ae),M.call("_guiRelayout",ne,de.getUpdateObj()))},clickFn:function(){g(ne)||st(he)}};function qe(nt){if(g(ne))Te=null;else if(He)Te=nt.target.tagName==="path"?"move":nt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var De=St.element.getBoundingClientRect(),Fe=De.right-De.left,rt=De.bottom-De.top,tt=nt.clientX-De.left,gt=nt.clientY-De.top,dt=!We&&Fe>ye&&rt>Pe&&!nt.shiftKey?s.getCursor(tt/Fe,1-gt/rt):"move";a(re,dt),Te=dt.split("-")[0]}}function Xe(nt,De){if(ae.type==="path"){var Fe=function(gt){return gt},rt=Fe,tt=Fe;Re?Je("xanchor",ae.xanchor=At(Ae+nt)):(rt=function(gt){return At(at(gt)+nt)},et&&et.type==="date"&&(rt=p.encodeDate(rt))),ze?Je("yanchor",ae.yanchor=Ct(we+De)):(tt=function(gt){return Ct(ot(gt)+De)},_t&&_t.type==="date"&&(tt=p.encodeDate(tt))),Je("path",ae.path=y(ce,rt,tt))}else Re?Je("xanchor",ae.xanchor=At(Ae+nt)):(Je("x0",ae.x0=At(xe+nt)),Je("x1",ae.x1=At(ve+nt))),ze?Je("yanchor",ae.yanchor=Ct(we+De)):(Je("y0",ae.y0=Ct(me+De)),Je("y1",ae.y1=Ct(Le+De)));re.attr("d",c(ne,ae)),Ze(he,ae),o(ne,ue,ae,lt)}function Ve(nt,De){if(We){var Fe=function(Yt){return Yt},rt=Fe,tt=Fe;Re?Je("xanchor",ae.xanchor=At(Ae+nt)):(rt=function(Yt){return At(at(Yt)+nt)},et&&et.type==="date"&&(rt=p.encodeDate(rt))),ze?Je("yanchor",ae.yanchor=Ct(we+De)):(tt=function(Yt){return Ct(ot(Yt)+De)},_t&&_t.type==="date"&&(tt=p.encodeDate(tt))),Je("path",ae.path=y(ce,rt,tt))}else if(He){if(Te==="resize-over-start-point"){var gt=xe+nt,dt=ze?me-De:me+De;Je("x0",ae.x0=Re?gt:At(gt)),Je("y0",ae.y0=ze?dt:Ct(dt))}else if(Te==="resize-over-end-point"){var mt=ve+nt,ft=ze?Le-De:Le+De;Je("x1",ae.x1=Re?mt:At(mt)),Je("y1",ae.y1=ze?ft:Ct(ft))}}else{var kt=function(Yt){return Te.indexOf(Yt)!==-1},ht=kt("n"),pt=kt("s"),wt=kt("w"),Ft=kt("e"),Nt=ht?se+De:se,Gt=pt?oe+De:oe,an=wt?fe+nt:fe,Wt=Ft?Se+nt:Se;ze&&(ht&&(Nt=se-De),pt&&(Gt=oe-De)),(!ze&&Gt-Nt>Pe||ze&&Nt-Gt>Pe)&&(Je(Me,ae[Me]=ze?Nt:Ct(Nt)),Je(be,ae[be]=ze?Gt:Ct(Gt))),Wt-an>ye&&(Je(Ie,ae[Ie]=Re?an:At(an)),Je(Be,ae[Be]=Re?Wt:At(Wt)))}re.attr("d",c(ne,ae)),Ze(he,ae),o(ne,ue,ae,lt)}function Ze(nt,De){(Re||ze)&&function(){var Fe=De.type!=="path",rt=nt.selectAll(".visual-cue").data([0]);rt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var tt=at(Re?De.xanchor:l.midRange(Fe?[De.x0,De.x1]:p.extractPathCoords(De.path,u.paramIsX))),gt=ot(ze?De.yanchor:l.midRange(Fe?[De.y0,De.y1]:p.extractPathCoords(De.path,u.paramIsY)));if(tt=p.roundPositionForSharpStrokeRendering(tt,1),gt=p.roundPositionForSharpStrokeRendering(gt,1),Re&&ze){var dt="M"+(tt-1-1)+","+(gt-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";rt.attr("d",dt)}else if(Re){var mt="M"+(tt-1-1)+","+(gt-9-1)+"v18 h2 v-18 Z";rt.attr("d",mt)}else{var ft="M"+(tt-9-1)+","+(gt-1-1)+"h18 v2 h-18 Z";rt.attr("d",ft)}}()}function st(nt){nt.selectAll(".visual-cue").remove()}s.init(St),zt.node().onmousemove=qe}(d,q,E,S,O,Q):E.editable===!0&&q.style("pointer-events",W||i.opacity(H)*I<=.5?"stroke":"all");q.node().addEventListener("click",function(){return function(ne,re){if(h(ne)){var ae=+re.node().getAttribute("data-index");if(ae>=0){if(ae===ne._fullLayout._activeShapeIndex)return void w(ne);ne._fullLayout._activeShapeIndex=ae,ne._fullLayout._deactivateShape=w,x(ne)}}}(d,q)})}E._input&&E.visible===!0&&(E.layer!=="below"?L(d._fullLayout._shapeUpperLayer):E.xref==="paper"||E.yref==="paper"?L(d._fullLayout._shapeLowerLayer):C._hadPlotinfo?L((C.mainplotinfo||C).shapelayer):L(d._fullLayout._shapeLowerLayer))}function v(d,S,T){var E=(T.xref+T.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(d,E?"clip"+S._fullLayout._uid+E:null,S)}function y(d,S,T){return d.replace(u.segmentRE,function(E){var C=0,L=E.charAt(0),O=u.paramIsX[L],z=u.paramIsY[L],G=u.numParams[L];return L+E.substr(1).replace(u.paramRE,function(I){return C>=G||(O[C]?I=S(I):z[C]&&(I=T(I)),C++),I})})}function w(d){h(d)&&d._fullLayout._activeShapeIndex>=0&&(e(d),delete d._fullLayout._activeShapeIndex,x(d))}$.exports={draw:x,drawOne:b,eraseActiveShape:function(d){if(h(d)){e(d);var S=d._fullLayout._activeShapeIndex,T=(d.layout||{}).shapes||[];if(S<T.length){for(var E=[],C=0;C<T.length;C++)C!==S&&E.push(T[C]);return delete d._fullLayout._activeShapeIndex,M.call("_guiRelayout",d,{shapes:E})}}},drawLabel:o}},29241:function($,P,t){var A=t(30962).overrideAll,M=t(9012),l=t(41940),_=t(79952).P,m=t(1426).extendFlat,f=t(5386).R,o=t(37281);$.exports=A({newshape:{visible:m({},M.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:m({},M.legend,{}),legendgroup:m({},M.legendgroup,{}),legendgrouptitle:{text:m({},M.legendgrouptitle.text,{}),font:l({})},legendrank:m({},M.legendrank,{}),legendwidth:m({},M.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:m({},_,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:m({},M.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:f({newshape:!0},{keys:Object.keys(o)}),font:l({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},89995:function($){$.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},45547:function($,P,t){var A=t(7901),M=t(71828);$.exports=function(l,_,m){if(m("newshape.visible"),m("newshape.name"),m("newshape.showlegend"),m("newshape.legend"),m("newshape.legendwidth"),m("newshape.legendgroup"),m("newshape.legendgrouptitle.text"),M.coerceFont(m,"newshape.legendgrouptitle.font"),m("newshape.legendrank"),m("newshape.drawdirection"),m("newshape.layer"),m("newshape.fillcolor"),m("newshape.fillrule"),m("newshape.opacity"),m("newshape.line.width")){var f=(l||{}).plot_bgcolor||"#FFF";m("newshape.line.color",A.contrast(f)),m("newshape.line.dash")}var o=l.dragmode==="drawline",e=m("newshape.label.text"),i=m("newshape.label.texttemplate");if(e||i){m("newshape.label.textangle");var r=m("newshape.label.textposition",o?"middle":"middle center");m("newshape.label.xanchor"),m("newshape.label.yanchor",function(n,s){return n?"bottom":s.indexOf("top")!==-1?"top":s.indexOf("bottom")!==-1?"bottom":"middle"}(o,r)),m("newshape.label.padding"),M.coerceFont(m,"newshape.label.font",_.font)}m("activeshape.fillcolor"),m("activeshape.opacity")}},60165:function($,P,t){var A=t(95616),M=t(89995),l=M.CIRCLE_SIDES,_=M.SQRT2,m=t(75549),f=m.p2r,o=m.r2p,e=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function r(s,a){return Math.abs(s-a)<=1e-6}function n(s,a){var u=a[1]-s[1],p=a[2]-s[2];return Math.sqrt(u*u+p*p)}P.writePaths=function(s){var a=s.length;if(!a)return"M0,0Z";for(var u="",p=0;p<a;p++)for(var c=s[p].length,x=0;x<c;x++){var g=s[p][x][0];if(g==="Z")u+="Z";else for(var h=s[p][x].length,b=0;b<h;b++){var v=b;g==="Q"||g==="S"?v=i[b]:g==="C"&&(v=e[b]),u+=s[p][x][v],b>0&&b<h-1&&(u+=",")}}return u},P.readPaths=function(s,a,u,p){var c,x,g,h=A(s),b=[],v=-1,y=0,w=0,d=function(){x=y,g=w};d();for(var S=0;S<h.length;S++){var T,E,C,L,O=[],z=h[S][0],G=z;switch(z){case"M":b[++v]=[],y=+h[S][1],w=+h[S][2],O.push([G,y,w]),d();break;case"Q":case"S":T=+h[S][1],C=+h[S][2],y=+h[S][3],w=+h[S][4],O.push([G,y,w,T,C]);break;case"C":T=+h[S][1],C=+h[S][2],E=+h[S][3],L=+h[S][4],y=+h[S][5],w=+h[S][6],O.push([G,y,w,T,C,E,L]);break;case"T":case"L":y=+h[S][1],w=+h[S][2],O.push([G,y,w]);break;case"H":G="L",y=+h[S][1],O.push([G,y,w]);break;case"V":G="L",w=+h[S][1],O.push([G,y,w]);break;case"A":G="L";var I=+h[S][1],H=+h[S][2];+h[S][4]||(I=-I,H=-H);var N=y-I,F=w;for(c=1;c<=l/2;c++){var V=2*Math.PI*c/l;O.push([G,N+I*Math.cos(V),F+H*Math.sin(V)])}break;case"Z":y===x&&w===g||(y=x,w=g,O.push([G,y,w]))}for(var W=(u||{}).domain,te=a._fullLayout._size,Q=u&&u.xsizemode==="pixel",X=u&&u.ysizemode==="pixel",q=p===!1,Z=0;Z<O.length;Z++){for(c=0;c+2<7;c+=2){var J=O[Z][c+1],ne=O[Z][c+2];J!==void 0&&ne!==void 0&&(y=J,w=ne,u&&(u.xaxis&&u.xaxis.p2r?(q&&(J-=u.xaxis._offset),J=Q?o(u.xaxis,u.xanchor)+J:f(u.xaxis,J)):(q&&(J-=te.l),W?J=W.x[0]+J/te.w:J/=te.w),u.yaxis&&u.yaxis.p2r?(q&&(ne-=u.yaxis._offset),ne=X?o(u.yaxis,u.yanchor)-ne:f(u.yaxis,ne)):(q&&(ne-=te.t),ne=W?W.y[1]-ne/te.h:1-ne/te.h)),O[Z][c+1]=J,O[Z][c+2]=ne)}b[v].push(O[Z].slice())}}return b},P.pointsOnRectangle=function(s){if(s.length!==5)return!1;for(var a=1;a<3;a++)if(!r(s[0][a]-s[1][a],s[3][a]-s[2][a])||!r(s[0][a]-s[3][a],s[1][a]-s[2][a]))return!1;return!(!r(s[0][1],s[1][1])&&!r(s[0][1],s[3][1])||!(n(s[0],s[1])*n(s[0],s[3])))},P.pointsOnEllipse=function(s){var a=s.length;if(a!==l+1)return!1;a=l;for(var u=0;u<a;u++){var p=(2*a-u)%a,c=(a/2+p)%a,x=(a/2+u)%a;if(!r(n(s[u],s[x]),n(s[p],s[c])))return!1}return!0},P.handleEllipse=function(s,a,u){if(!s)return[a,u];var p=P.ellipseOver({x0:a[0],y0:a[1],x1:u[0],y1:u[1]}),c=(p.x1+p.x0)/2,x=(p.y1+p.y0)/2,g=(p.x1-p.x0)/2,h=(p.y1-p.y0)/2;g||(g=h/=_),h||(h=g/=_);for(var b=[],v=0;v<l;v++){var y=2*v*Math.PI/l;b.push([c+g*Math.cos(y),x+h*Math.sin(y)])}return b},P.ellipseOver=function(s){var a=s.x0,u=s.y0,p=s.x1,c=s.y1,x=p-a,g=c-u,h=((a-=x)+p)/2,b=((u-=g)+c)/2;return{x0:h-(x*=_),y0:b-(g*=_),x1:h+x,y1:b+g}},P.fixDatesForPaths=function(s,a,u){var p=a.type==="date",c=u.type==="date";if(!p&&!c)return s;for(var x=0;x<s.length;x++)for(var g=0;g<s[x].length;g++)for(var h=0;h+2<s[x][g].length;h+=2)p&&(s[x][g][h+1]=s[x][g][h+1].replace(" ","_")),c&&(s[x][g][h+2]=s[x][g][h+2].replace(" ","_"));return s}},90551:function($,P,t){var A=t(64505),M=A.drawMode,l=A.openMode,_=t(89995),m=_.i000,f=_.i090,o=_.i180,e=_.i270,i=_.cos45,r=_.sin45,n=t(75549),s=n.p2r,a=n.r2p,u=t(51873).clearOutline,p=t(60165),c=p.readPaths,x=p.writePaths,g=p.ellipseOver,h=p.fixDatesForPaths;function b(v,y,w){var d,S=v[0][0],T=y.gd,E=S.getAttribute("d"),C=T._fullLayout.newshape,L=y.plotinfo,O=y.isActiveShape,z=L.xaxis,G=L.yaxis,I=!!L.domain||!L.xaxis,H=!!L.domain||!L.yaxis,N=l(w),F=c(E,T,L,O),V={editable:!0,visible:C.visible,name:C.name,showlegend:C.showlegend,legend:C.legend,legendwidth:C.legendwidth,legendgroup:C.legendgroup,legendgrouptitle:{text:C.legendgrouptitle.text,font:C.legendgrouptitle.font},legendrank:C.legendrank,label:C.label,xref:I?"paper":z._id,yref:H?"paper":G._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(N||(V.fillcolor=C.fillcolor,V.fillrule=C.fillrule),F.length===1&&(d=F[0]),d&&d.length===5&&w==="drawrect")V.type="rect",V.x0=d[0][1],V.y0=d[0][2],V.x1=d[2][1],V.y1=d[2][2];else if(d&&w==="drawline")V.type="line",V.x0=d[0][1],V.y0=d[0][2],V.x1=d[1][1],V.y1=d[1][2];else if(d&&w==="drawcircle"){V.type="circle";var W=d[m][1],te=d[f][1],Q=d[o][1],X=d[e][1],q=d[m][2],Z=d[f][2],J=d[o][2],ne=d[e][2],re=L.xaxis&&(L.xaxis.type==="date"||L.xaxis.type==="log"),ae=L.yaxis&&(L.yaxis.type==="date"||L.yaxis.type==="log");re&&(W=a(L.xaxis,W),te=a(L.xaxis,te),Q=a(L.xaxis,Q),X=a(L.xaxis,X)),ae&&(q=a(L.yaxis,q),Z=a(L.yaxis,Z),J=a(L.yaxis,J),ne=a(L.yaxis,ne));var ue=(te+X)/2,he=(q+J)/2,de=g({x0:ue,y0:he,x1:ue+(X-te+Q-W)/2*i,y1:he+(ne-Z+J-q)/2*r});re&&(de.x0=s(L.xaxis,de.x0),de.x1=s(L.xaxis,de.x1)),ae&&(de.y0=s(L.yaxis,de.y0),de.y1=s(L.yaxis,de.y1)),V.x0=de.x0,V.y0=de.y0,V.x1=de.x1,V.y1=de.y1}else V.type="path",z&&G&&h(F,z,G),V.path=x(F),d=null;return V}$.exports={newShapes:function(v,y){if(v.length&&v[0][0]){var w=y.gd,d=y.isActiveShape,S=y.dragmode,T=(w.layout||{}).shapes||[];if(!M(S)&&d!==void 0){var E=w._fullLayout._activeShapeIndex;if(E<T.length)switch(w._fullLayout.shapes[E].type){case"rect":S="drawrect";break;case"circle":S="drawcircle";break;case"line":S="drawline";break;case"path":var C=T[E].path||"";S=C[C.length-1]==="Z"?"drawclosedpath":"drawopenpath"}}var L=b(v,y,S);u(w);for(var O=y.editHelpers,z=(O||{}).modifyItem,G=[],I=0;I<T.length;I++){var H=w._fullLayout.shapes[I];if(G[I]=H._input,d!==void 0&&I===w._fullLayout._activeShapeIndex){var N=L;switch(H.type){case"line":case"rect":case"circle":z("x0",N.x0),z("x1",N.x1),z("y0",N.y0),z("y1",N.y1);break;case"path":z("path",N.path)}}}return d===void 0?(G.push(L),G):O?O.getUpdateObj():{}}},createShapeObj:b}},51873:function($){$.exports={clearOutlineControllers:function(P){var t=P._fullLayout._zoomlayer;t&&t.selectAll(".outline-controllers").remove()},clearOutline:function(P){var t=P._fullLayout._zoomlayer;t&&t.selectAll(".select-outline").remove(),P._fullLayout._outlining=!1}}},30477:function($,P,t){var A=t(21459),M=t(71828),l=t(89298);P.rangeToShapePosition=function(_){return _.type==="log"?_.r2d:function(m){return m}},P.shapePositionToRange=function(_){return _.type==="log"?_.d2r:function(m){return m}},P.decodeDate=function(_){return function(m){return m.replace&&(m=m.replace("_"," ")),_(m)}},P.encodeDate=function(_){return function(m){return _(m).replace(" ","_")}},P.extractPathCoords=function(_,m,f){var o=[];return _.match(A.segmentRE).forEach(function(e){var i=m[e.charAt(0)].drawn;if(i!==void 0){var r=e.substr(1).match(A.paramRE);if(r&&!(r.length<i)){var n=r[i],s=f?n:M.cleanNumber(n);o.push(s)}}}),o},P.getDataToPixel=function(_,m,f,o){var e,i=_._fullLayout._size;if(m)if(o==="domain")e=function(n){return m._length*(f?1-n:n)+m._offset};else{var r=P.shapePositionToRange(m);e=function(n){return m._offset+m.r2p(r(n,!0))},m.type==="date"&&(e=P.decodeDate(e))}else e=f?function(n){return i.t+i.h*(1-n)}:function(n){return i.l+i.w*n};return e},P.getPixelToData=function(_,m,f,o){var e,i=_._fullLayout._size;if(m)if(o==="domain")e=function(n){var s=(n-m._offset)/m._length;return f?1-s:s};else{var r=P.rangeToShapePosition(m);e=function(n){return r(m.p2r(n-m._offset))}}else e=f?function(n){return 1-(n-i.t)/i.h}:function(n){return(n-i.l)/i.w};return e},P.roundPositionForSharpStrokeRendering=function(_,m){var f=Math.round(m%2)===1,o=Math.round(_);return f?o+.5:o},P.makeShapesOptionsAndPlotinfo=function(_,m){var f=_._fullLayout.shapes[m]||{},o=_._fullLayout._plots[f.xref+f.yref];return o?o._hadPlotinfo=!0:(o={},f.xref&&f.xref!=="paper"&&(o.xaxis=_._fullLayout[f.xref+"axis"]),f.yref&&f.yref!=="paper"&&(o.yaxis=_._fullLayout[f.yref+"axis"])),o.xsizemode=f.xsizemode,o.ysizemode=f.ysizemode,o.xanchor=f.xanchor,o.yanchor=f.yanchor,{options:f,plotinfo:o}},P.makeSelectionsOptionsAndPlotinfo=function(_,m){var f=_._fullLayout.selections[m]||{},o=_._fullLayout._plots[f.xref+f.yref];return o?o._hadPlotinfo=!0:(o={},f.xref&&(o.xaxis=_._fullLayout[f.xref+"axis"]),f.yref&&(o.yaxis=_._fullLayout[f.yref+"axis"])),{options:f,plotinfo:o}},P.getPathString=function(_,m){var f,o,e,i,r,n,s,a,u=m.type,p=l.getRefType(m.xref),c=l.getRefType(m.yref),x=l.getFromId(_,m.xref),g=l.getFromId(_,m.yref),h=_._fullLayout._size;if(x?p==="domain"?o=function(C){return x._offset+x._length*C}:(f=P.shapePositionToRange(x),o=function(C){return x._offset+x.r2p(f(C,!0))}):o=function(C){return h.l+h.w*C},g?c==="domain"?i=function(C){return g._offset+g._length*(1-C)}:(e=P.shapePositionToRange(g),i=function(C){return g._offset+g.r2p(e(C,!0))}):i=function(C){return h.t+h.h*(1-C)},u==="path")return x&&x.type==="date"&&(o=P.decodeDate(o)),g&&g.type==="date"&&(i=P.decodeDate(i)),function(C,L,O){var z=C.path,G=C.xsizemode,I=C.ysizemode,H=C.xanchor,N=C.yanchor;return z.replace(A.segmentRE,function(F){var V=0,W=F.charAt(0),te=A.paramIsX[W],Q=A.paramIsY[W],X=A.numParams[W],q=F.substr(1).replace(A.paramRE,function(Z){return te[V]?Z=G==="pixel"?L(H)+Number(Z):L(Z):Q[V]&&(Z=I==="pixel"?O(N)-Number(Z):O(Z)),++V>X&&(Z="X"),Z});return V>X&&(q=q.replace(/[\s,]*X.*/,""),M.log("Ignoring extra params in segment "+F)),W+q})}(m,o,i);if(m.xsizemode==="pixel"){var b=o(m.xanchor);r=b+m.x0,n=b+m.x1}else r=o(m.x0),n=o(m.x1);if(m.ysizemode==="pixel"){var v=i(m.yanchor);s=v-m.y0,a=v-m.y1}else s=i(m.y0),a=i(m.y1);if(u==="line")return"M"+r+","+s+"L"+n+","+a;if(u==="rect")return"M"+r+","+s+"H"+n+"V"+a+"H"+r+"Z";var y=(r+n)/2,w=(s+a)/2,d=Math.abs(y-r),S=Math.abs(w-s),T="A"+d+","+S,E=y+d+","+w;return"M"+E+T+" 0 1,1 "+y+","+(w-S)+T+" 0 0,1 "+E+"Z"}},89853:function($,P,t){var A=t(34031);$.exports={moduleType:"component",name:"shapes",layoutAttributes:t(89827),supplyLayoutDefaults:t(84726),supplyDrawNewShapeDefaults:t(45547),includeBasePlot:t(76325)("shapes"),calcAutorange:t(5627),draw:A.draw,drawOne:A.drawOne}},37281:function($){function P(l,_){return _?_.d2l(l):l}function t(l,_){return _?_.l2d(l):l}function A(l,_){return P(l.x1,_)-P(l.x0,_)}function M(l,_,m){return P(l.y1,m)-P(l.y0,m)}$.exports={x0:function(l){return l.x0},x1:function(l){return l.x1},y0:function(l){return l.y0},y1:function(l){return l.y1},slope:function(l,_,m){return l.type!=="line"?void 0:M(l,0,m)/A(l,_)},dx:A,dy:M,width:function(l,_){return Math.abs(A(l,_))},height:function(l,_,m){return Math.abs(M(l,0,m))},length:function(l,_,m){return l.type!=="line"?void 0:Math.sqrt(Math.pow(A(l,_),2)+Math.pow(M(l,0,m),2))},xcenter:function(l,_){return t((P(l.x1,_)+P(l.x0,_))/2,_)},ycenter:function(l,_,m){return t((P(l.y1,m)+P(l.y0,m))/2,m)}}},75067:function($,P,t){var A=t(41940),M=t(35025),l=t(1426).extendDeepAll,_=t(30962).overrideAll,m=t(85594),f=t(44467).templatedArray,o=t(98292),e=f("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});$.exports=_(f("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:e,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:l(M({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:m.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:A({})},font:A({}),activebgcolor:{valType:"color",dflt:o.gripBgActiveColor},bgcolor:{valType:"color",dflt:o.railBgColor},bordercolor:{valType:"color",dflt:o.railBorderColor},borderwidth:{valType:"number",min:0,dflt:o.railBorderWidth},ticklen:{valType:"number",min:0,dflt:o.tickLength},tickcolor:{valType:"color",dflt:o.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:o.minorTickLength}}),"arraydraw","from-root")},98292:function($){$.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},12343:function($,P,t){var A=t(71828),M=t(85501),l=t(75067),_=t(98292).name,m=l.steps;function f(e,i,r){function n(c,x){return A.coerce(e,i,l,c,x)}for(var s=M(e,i,{name:"steps",handleItemDefaults:o}),a=0,u=0;u<s.length;u++)s[u].visible&&a++;if(a<2?i.visible=!1:n("visible")){i._stepCount=a;var p=i._visibleSteps=A.filterVisible(s);(s[n("active")]||{}).visible||(i.active=p[0]._index),n("x"),n("y"),A.noneOrAll(e,i,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),A.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),A.coerceFont(n,"currentvalue.font",i.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen")}}function o(e,i){function r(s,a){return A.coerce(e,i,m,s,a)}if(e.method==="skip"||Array.isArray(e.args)?r("visible"):i.visible=!1){r("method"),r("args");var n=r("label","step-"+i._index);r("value",n),r("execute")}}$.exports=function(e,i){M(e,i,{name:_,handleItemDefaults:f})}},44504:function($,P,t){var A=t(39898),M=t(74875),l=t(7901),_=t(91424),m=t(71828),f=m.strTranslate,o=t(63893),e=t(44467).arrayEditor,i=t(98292),r=t(18783),n=r.LINE_SPACING,s=r.FROM_TL,a=r.FROM_BR;function u(O){return i.autoMarginIdRoot+O._index}function p(O){return O._index}function c(O,z){var G=_.tester.selectAll("g."+i.labelGroupClass).data(z._visibleSteps);G.enter().append("g").classed(i.labelGroupClass,!0);var I=0,H=0;G.each(function(Z){var J=h(A.select(this),{step:Z},z).node();if(J){var ne=_.bBox(J);H=Math.max(H,ne.height),I=Math.max(I,ne.width)}}),G.remove();var N=z._dims={};N.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var F=O._fullLayout._size;N.lx=F.l+F.w*z.x,N.ly=F.t+F.h*(1-z.y),z.lenmode==="fraction"?N.outerLength=Math.round(F.w*z.len):N.outerLength=z.len,N.inputAreaStart=0,N.inputAreaLength=Math.round(N.outerLength-z.pad.l-z.pad.r);var V=(N.inputAreaLength-2*i.stepInset)/(z._stepCount-1),W=I+i.labelPadding;if(N.labelStride=Math.max(1,Math.ceil(W/V)),N.labelHeight=H,N.currentValueMaxWidth=0,N.currentValueHeight=0,N.currentValueTotalHeight=0,N.currentValueMaxLines=1,z.currentvalue.visible){var te=_.tester.append("g");G.each(function(Z){var J=x(te,z,Z.label),ne=J.node()&&_.bBox(J.node())||{width:0,height:0},re=o.lineCount(J);N.currentValueMaxWidth=Math.max(N.currentValueMaxWidth,Math.ceil(ne.width)),N.currentValueHeight=Math.max(N.currentValueHeight,Math.ceil(ne.height)),N.currentValueMaxLines=Math.max(N.currentValueMaxLines,re)}),N.currentValueTotalHeight=N.currentValueHeight+z.currentvalue.offset,te.remove()}N.height=N.currentValueTotalHeight+i.tickOffset+z.ticklen+i.labelOffset+N.labelHeight+z.pad.t+z.pad.b;var Q="left";m.isRightAnchor(z)&&(N.lx-=N.outerLength,Q="right"),m.isCenterAnchor(z)&&(N.lx-=N.outerLength/2,Q="center");var X="top";m.isBottomAnchor(z)&&(N.ly-=N.height,X="bottom"),m.isMiddleAnchor(z)&&(N.ly-=N.height/2,X="middle"),N.outerLength=Math.ceil(N.outerLength),N.height=Math.ceil(N.height),N.lx=Math.round(N.lx),N.ly=Math.round(N.ly);var q={y:z.y,b:N.height*a[X],t:N.height*s[X]};z.lenmode==="fraction"?(q.l=0,q.xl=z.x-z.len*s[Q],q.r=0,q.xr=z.x+z.len*a[Q]):(q.x=z.x,q.l=N.outerLength*s[Q],q.r=N.outerLength*a[Q]),M.autoMargin(O,u(z),q)}function x(O,z,G){if(z.currentvalue.visible){var I,H,N=z._dims;switch(z.currentvalue.xanchor){case"right":I=N.inputAreaLength-i.currentValueInset-N.currentValueMaxWidth,H="left";break;case"center":I=.5*N.inputAreaLength,H="middle";break;default:I=i.currentValueInset,H="left"}var F=m.ensureSingle(O,"text",i.labelClass,function(q){q.attr({"text-anchor":H,"data-notex":1})}),V=z.currentvalue.prefix?z.currentvalue.prefix:"";if(typeof G=="string")V+=G;else{var W=z.steps[z.active].label,te=z._gd._fullLayout._meta;te&&(W=m.templateString(W,te)),V+=W}z.currentvalue.suffix&&(V+=z.currentvalue.suffix),F.call(_.font,z.currentvalue.font).text(V).call(o.convertToTspans,z._gd);var Q=o.lineCount(F),X=(N.currentValueMaxLines+1-Q)*z.currentvalue.font.size*n;return o.positionText(F,I,X),F}}function g(O,z,G){m.ensureSingle(O,"rect",i.gripRectClass,function(I){I.call(w,z,O,G).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(l.stroke,G.bordercolor).call(l.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px")}function h(O,z,G){var I=m.ensureSingle(O,"text",i.labelClass,function(F){F.attr({"text-anchor":"middle","data-notex":1})}),H=z.step.label,N=G._gd._fullLayout._meta;return N&&(H=m.templateString(H,N)),I.call(_.font,G.font).text(H).call(o.convertToTspans,G._gd),I}function b(O,z){var G=m.ensureSingle(O,"g",i.labelsClass),I=z._dims,H=G.selectAll("g."+i.labelGroupClass).data(I.labelSteps);H.enter().append("g").classed(i.labelGroupClass,!0),H.exit().remove(),H.each(function(N){var F=A.select(this);F.call(h,N,z),_.setTranslate(F,T(z,N.fraction),i.tickOffset+z.ticklen+z.font.size*n+i.labelOffset+I.currentValueTotalHeight)})}function v(O,z,G,I,H){var N=Math.round(I*(G._stepCount-1)),F=G._visibleSteps[N]._index;F!==G.active&&y(O,z,G,F,!0,H)}function y(O,z,G,I,H,N){var F=G.active;G.active=I,e(O.layout,i.name,G).applyUpdate("active",I);var V=G.steps[G.active];z.call(S,G,N),z.call(x,G),O.emit("plotly_sliderchange",{slider:G,step:G.steps[G.active],interaction:H,previousActive:F}),V&&V.method&&H&&(z._nextMethod?(z._nextMethod.step=V,z._nextMethod.doCallback=H,z._nextMethod.doTransition=N):(z._nextMethod={step:V,doCallback:H,doTransition:N},z._nextMethodRaf=window.requestAnimationFrame(function(){var W=z._nextMethod.step;W.method&&(W.execute&&M.executeAPICommand(O,W.method,W.args),z._nextMethod=null,z._nextMethodRaf=null)})))}function w(O,z,G){if(!z._context.staticPlot){var I=G.node(),H=A.select(z);O.on("mousedown",F),O.on("touchstart",F)}function N(){return G.data()[0]}function F(){var V=N();z.emit("plotly_sliderstart",{slider:V});var W=G.select("."+i.gripRectClass);A.event.stopPropagation(),A.event.preventDefault(),W.call(l.fill,V.activebgcolor);var te=E(V,A.mouse(I)[0]);function Q(){var q=N(),Z=E(q,A.mouse(I)[0]);v(z,G,q,Z,!1)}function X(){var q=N();q._dragging=!1,W.call(l.fill,q.bgcolor),H.on("mouseup",null),H.on("mousemove",null),H.on("touchend",null),H.on("touchmove",null),z.emit("plotly_sliderend",{slider:q,step:q.steps[q.active]})}v(z,G,V,te,!0),V._dragging=!0,H.on("mousemove",Q),H.on("touchmove",Q),H.on("mouseup",X),H.on("touchend",X)}}function d(O,z){var G=O.selectAll("rect."+i.tickRectClass).data(z._visibleSteps),I=z._dims;G.enter().append("rect").classed(i.tickRectClass,!0),G.exit().remove(),G.attr({width:z.tickwidth+"px","shape-rendering":"crispEdges"}),G.each(function(H,N){var F=N%I.labelStride==0,V=A.select(this);V.attr({height:F?z.ticklen:z.minorticklen}).call(l.fill,z.tickcolor),_.setTranslate(V,T(z,N/(z._stepCount-1))-.5*z.tickwidth,(F?i.tickOffset:i.minorTickOffset)+I.currentValueTotalHeight)})}function S(O,z,G){for(var I=O.select("rect."+i.gripRectClass),H=0,N=0;N<z._stepCount;N++)if(z._visibleSteps[N]._index===z.active){H=N;break}var F=T(z,H/(z._stepCount-1));if(!z._invokingCommand){var V=I;G&&z.transition.duration>0&&(V=V.transition().duration(z.transition.duration).ease(z.transition.easing)),V.attr("transform",f(F-.5*i.gripWidth,z._dims.currentValueTotalHeight))}}function T(O,z){var G=O._dims;return G.inputAreaStart+i.stepInset+(G.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,z))}function E(O,z){var G=O._dims;return Math.min(1,Math.max(0,(z-i.stepInset-G.inputAreaStart)/(G.inputAreaLength-2*i.stepInset-2*G.inputAreaStart)))}function C(O,z,G){var I=G._dims,H=m.ensureSingle(O,"rect",i.railTouchRectClass,function(N){N.call(w,z,O,G).style("pointer-events","all")});H.attr({width:I.inputAreaLength,height:Math.max(I.inputAreaWidth,i.tickOffset+G.ticklen+I.labelHeight)}).call(l.fill,G.bgcolor).attr("opacity",0),_.setTranslate(H,0,I.currentValueTotalHeight)}function L(O,z){var G=z._dims,I=G.inputAreaLength-2*i.railInset,H=m.ensureSingle(O,"rect",i.railRectClass);H.attr({width:I,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(l.stroke,z.bordercolor).call(l.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px"),_.setTranslate(H,i.railInset,.5*(G.inputAreaWidth-i.railWidth)+G.currentValueTotalHeight)}$.exports=function(O){var z=O._context.staticPlot,G=O._fullLayout,I=function(te,Q){for(var X=te[i.name],q=[],Z=0;Z<X.length;Z++){var J=X[Z];J.visible&&(J._gd=Q,q.push(J))}return q}(G,O),H=G._infolayer.selectAll("g."+i.containerClassName).data(I.length>0?[0]:[]);function N(te){te._commandObserver&&(te._commandObserver.remove(),delete te._commandObserver),M.autoMargin(O,u(te))}if(H.enter().append("g").classed(i.containerClassName,!0).style("cursor",z?null:"ew-resize"),H.exit().each(function(){A.select(this).selectAll("g."+i.groupClassName).each(N)}).remove(),I.length!==0){var F=H.selectAll("g."+i.groupClassName).data(I,p);F.enter().append("g").classed(i.groupClassName,!0),F.exit().each(N).remove();for(var V=0;V<I.length;V++){var W=I[V];c(O,W)}F.each(function(te){var Q=A.select(this);(function(X){var q=X._dims;q.labelSteps=[];for(var Z=X._stepCount,J=0;J<Z;J+=q.labelStride)q.labelSteps.push({fraction:J/(Z-1),step:X._visibleSteps[J]})})(te),M.manageCommandObserver(O,te,te._visibleSteps,function(X){var q=Q.data()[0];q.active!==X.index&&(q._dragging||y(O,Q,q,X.index,!1,!0))}),function(X,q,Z){(Z.steps[Z.active]||{}).visible||(Z.active=Z._visibleSteps[0]._index),q.call(x,Z).call(L,Z).call(b,Z).call(d,Z).call(C,X,Z).call(g,X,Z);var J=Z._dims;_.setTranslate(q,J.lx+Z.pad.l,J.ly+Z.pad.t),q.call(S,Z,!1),q.call(x,Z)}(O,A.select(this),te)})}}},23243:function($,P,t){var A=t(98292);$.exports={moduleType:"component",name:A.name,layoutAttributes:t(75067),supplyLayoutDefaults:t(12343),draw:t(44504)}},92998:function($,P,t){var A=t(39898),M=t(92770),l=t(74875),_=t(73972),m=t(71828),f=m.strTranslate,o=t(91424),e=t(7901),i=t(63893),r=t(37822),n=t(18783).OPPOSITE_SIDE,s=/ [XY][0-9]* /;$.exports={draw:function(a,u,p){var c,x=p.propContainer,g=p.propName,h=p.placeholder,b=p.traceIndex,v=p.avoid||{},y=p.attributes,w=p.transform,d=p.containerGroup,S=a._fullLayout,T=1,E=!1,C=x.title,L=(C&&C.text?C.text:"").trim(),O=C&&C.font?C.font:{},z=O.family,G=O.size,I=O.color;g==="title.text"?c="titleText":g.indexOf("axis")!==-1?c="axisTitleText":g.indexOf(!0)&&(c="colorbarTitleText");var H=a._context.edits[c];L===""?T=0:L.replace(s," % ")===h.replace(s," % ")&&(T=.2,E=!0,H||(L="")),p._meta?L=m.templateString(L,p._meta):S._meta&&(L=m.templateString(L,S._meta));var N,F=L||H;d||(d=m.ensureSingle(S._infolayer,"g","g-"+u),N=S._hColorbarMoveTitle);var V=d.selectAll("text").data(F?[0]:[]);if(V.enter().append("text"),V.text(L).attr("class",u),V.exit().remove(),!F)return d;function W(X){m.syncOrAsync([te,Q],X)}function te(X){var q;return!w&&N&&(w={}),w?(q="",w.rotate&&(q+="rotate("+[w.rotate,y.x,y.y]+")"),(w.offset||N)&&(q+=f(0,(w.offset||0)-(N||0)))):q=null,X.attr("transform",q),X.style({"font-family":z,"font-size":A.round(G,2)+"px",fill:e.rgb(I),opacity:T*e.opacity(I),"font-weight":l.fontWeight}).attr(y).call(i.convertToTspans,a),l.previousPromises(a)}function Q(X){var q=A.select(X.node().parentNode);if(v&&v.selection&&v.side&&L){q.attr("transform",null);var Z=n[v.side],J=v.side==="left"||v.side==="top"?-1:1,ne=M(v.pad)?v.pad:2,re=o.bBox(q.node()),ae={t:0,b:0,l:0,r:0},ue=a._fullLayout._reservedMargin;for(var he in ue)for(var de in ue[he]){var xe=ue[he][de];ae[de]=Math.max(ae[de],xe)}var me={left:ae.l,top:ae.t,right:S.width-ae.r,bottom:S.height-ae.b},ve=v.maxShift||J*(me[v.side]-re[v.side]),Le=0;if(ve<0)Le=ve;else{var Ae=v.offsetLeft||0,we=v.offsetTop||0;re.left-=Ae,re.right-=Ae,re.top-=we,re.bottom-=we,v.selection.each(function(){var oe=o.bBox(this);m.bBoxIntersect(re,oe,ne)&&(Le=Math.max(Le,J*(oe[v.side]-re[Z])+ne))}),Le=Math.min(ve,Le),x._titleScoot=Math.abs(Le)}if(Le>0||ve<0){var se={left:[-Le,0],right:[Le,0],top:[0,-Le],bottom:[0,Le]}[v.side];q.attr("transform",f(se[0],se[1]))}}}return V.call(W),H&&(L?V.on(".opacity",null):(T=0,E=!0,V.text(h).on("mouseover.opacity",function(){A.select(this).transition().duration(r.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){A.select(this).transition().duration(r.HIDE_PLACEHOLDER).style("opacity",0)})),V.call(i.makeEditable,{gd:a}).on("edit",function(X){b!==void 0?_.call("_guiRestyle",a,g,X,b):_.call("_guiRelayout",a,g,X)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(W)}).on("input",function(X){this.text(X||" ").call(i.positionText,y.x,y.y)})),V.classed("js-placeholder",E),d}}},7163:function($,P,t){var A=t(41940),M=t(22399),l=t(1426).extendFlat,_=t(30962).overrideAll,m=t(35025),f=t(44467).templatedArray,o=f("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});$.exports=_(f("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:o,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:l(m({editType:"arraydraw"}),{}),font:A({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:M.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},75909:function($){$.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"",right:"",up:"",down:""}}},64897:function($,P,t){var A=t(71828),M=t(85501),l=t(7163),_=t(75909).name,m=l.buttons;function f(e,i,r){function n(s,a){return A.coerce(e,i,l,s,a)}n("visible",M(e,i,{name:"buttons",handleItemDefaults:o}).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),A.noneOrAll(e,i,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),A.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}function o(e,i){function r(n,s){return A.coerce(e,i,m,n,s)}r("visible",e.method==="skip"||Array.isArray(e.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}$.exports=function(e,i){M(e,i,{name:_,handleItemDefaults:f})}},13689:function($,P,t){var A=t(39898),M=t(74875),l=t(7901),_=t(91424),m=t(71828),f=t(63893),o=t(44467).arrayEditor,e=t(18783).LINE_SPACING,i=t(75909),r=t(25849);function n(T){return T._index}function s(T,E){return+T.attr(i.menuIndexAttrName)===E._index}function a(T,E,C,L,O,z,G,I){E.active=G,o(T.layout,i.name,E).applyUpdate("active",G),E.type==="buttons"?p(T,L,null,null,E):E.type==="dropdown"&&(O.attr(i.menuIndexAttrName,"-1"),u(T,L,O,z,E),I||p(T,L,O,z,E))}function u(T,E,C,L,O){var z=m.ensureSingle(E,"g",i.headerClassName,function(V){V.style("pointer-events","all")}),G=O._dims,I=O.active,H=O.buttons[I]||i.blankHeaderOpts,N={y:O.pad.t,yPad:0,x:O.pad.l,xPad:0,index:0},F={width:G.headerWidth,height:G.headerHeight};z.call(c,O,H,T).call(d,O,N,F),m.ensureSingle(E,"text",i.headerArrowClassName,function(V){V.attr("text-anchor","end").call(_.font,O.font).text(i.arrowSymbol[O.direction])}).attr({x:G.headerWidth-i.arrowOffsetX+O.pad.l,y:G.headerHeight/2+i.textOffsetY+O.pad.t}),z.on("click",function(){C.call(S,String(s(C,O)?-1:O._index)),p(T,E,C,L,O)}),z.on("mouseover",function(){z.call(b)}),z.on("mouseout",function(){z.call(v,O)}),_.setTranslate(E,G.lx,G.ly)}function p(T,E,C,L,O){C||(C=E).attr("pointer-events","all");var z=function(q){return+q.attr(i.menuIndexAttrName)==-1}(C)&&O.type!=="buttons"?[]:O.buttons,G=O.type==="dropdown"?i.dropdownButtonClassName:i.buttonClassName,I=C.selectAll("g."+G).data(m.filterVisible(z)),H=I.enter().append("g").classed(G,!0),N=I.exit();O.type==="dropdown"?(H.attr("opacity","0").transition().attr("opacity","1"),N.transition().attr("opacity","0").remove()):N.remove();var F=0,V=0,W=O._dims,te=["up","down"].indexOf(O.direction)!==-1;O.type==="dropdown"&&(te?V=W.headerHeight+i.gapButtonHeader:F=W.headerWidth+i.gapButtonHeader),O.type==="dropdown"&&O.direction==="up"&&(V=-i.gapButtonHeader+i.gapButton-W.openHeight),O.type==="dropdown"&&O.direction==="left"&&(F=-i.gapButtonHeader+i.gapButton-W.openWidth);var Q={x:W.lx+F+O.pad.l,y:W.ly+V+O.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},X={l:Q.x+O.borderwidth,t:Q.y+O.borderwidth};I.each(function(q,Z){var J=A.select(this);J.call(c,O,q,T).call(d,O,Q),J.on("click",function(){A.event.defaultPrevented||(q.execute&&(q.args2&&O.active===Z?(a(T,O,0,E,C,L,-1),M.executeAPICommand(T,q.method,q.args2)):(a(T,O,0,E,C,L,Z),M.executeAPICommand(T,q.method,q.args))),T.emit("plotly_buttonclicked",{menu:O,button:q,active:O.active}))}),J.on("mouseover",function(){J.call(b)}),J.on("mouseout",function(){J.call(v,O),I.call(h,O)})}),I.call(h,O),te?(X.w=Math.max(W.openWidth,W.headerWidth),X.h=Q.y-X.t):(X.w=Q.x-X.l,X.h=Math.max(W.openHeight,W.headerHeight)),X.direction=O.direction,L&&(I.size()?function(q,Z,J,ne,re,ae){var ue,he,de,xe=re.direction,me=xe==="up"||xe==="down",ve=re._dims,Le=re.active;if(me)for(he=0,de=0;de<Le;de++)he+=ve.heights[de]+i.gapButton;else for(ue=0,de=0;de<Le;de++)ue+=ve.widths[de]+i.gapButton;ne.enable(ae,ue,he),ne.hbar&&ne.hbar.attr("opacity","0").transition().attr("opacity","1"),ne.vbar&&ne.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,L,O,X):function(q){var Z=!!q.hbar,J=!!q.vbar;Z&&q.hbar.transition().attr("opacity","0").each("end",function(){Z=!1,J||q.disable()}),J&&q.vbar.transition().attr("opacity","0").each("end",function(){J=!1,Z||q.disable()})}(L))}function c(T,E,C,L){T.call(x,E).call(g,E,C,L)}function x(T,E){m.ensureSingle(T,"rect",i.itemRectClassName,function(C){C.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(l.stroke,E.bordercolor).call(l.fill,E.bgcolor).style("stroke-width",E.borderwidth+"px")}function g(T,E,C,L){var O=m.ensureSingle(T,"text",i.itemTextClassName,function(I){I.attr({"text-anchor":"start","data-notex":1})}),z=C.label,G=L._fullLayout._meta;G&&(z=m.templateString(z,G)),O.call(_.font,E.font).text(z).call(f.convertToTspans,L)}function h(T,E){var C=E.active;T.each(function(L,O){var z=A.select(this);O===C&&E.showactive&&z.select("rect."+i.itemRectClassName).call(l.fill,i.activeColor)})}function b(T){T.select("rect."+i.itemRectClassName).call(l.fill,i.hoverColor)}function v(T,E){T.select("rect."+i.itemRectClassName).call(l.fill,E.bgcolor)}function y(T,E){var C=E._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=_.tester.selectAll("g."+i.dropdownButtonClassName).data(m.filterVisible(E.buttons));L.enter().append("g").classed(i.dropdownButtonClassName,!0);var O=["up","down"].indexOf(E.direction)!==-1;L.each(function(F,V){var W=A.select(this);W.call(c,E,F,T);var te=W.select("."+i.itemTextClassName),Q=te.node()&&_.bBox(te.node()).width,X=Math.max(Q+i.textPadX,i.minWidth),q=E.font.size*e,Z=f.lineCount(te),J=Math.max(q*Z,i.minHeight)+i.textOffsetY;J=Math.ceil(J),X=Math.ceil(X),C.widths[V]=X,C.heights[V]=J,C.height1=Math.max(C.height1,J),C.width1=Math.max(C.width1,X),O?(C.totalWidth=Math.max(C.totalWidth,X),C.openWidth=C.totalWidth,C.totalHeight+=J+i.gapButton,C.openHeight+=J+i.gapButton):(C.totalWidth+=X+i.gapButton,C.openWidth+=X+i.gapButton,C.totalHeight=Math.max(C.totalHeight,J),C.openHeight=C.totalHeight)}),O?C.totalHeight-=i.gapButton:C.totalWidth-=i.gapButton,C.headerWidth=C.width1+i.arrowPadX,C.headerHeight=C.height1,E.type==="dropdown"&&(O?(C.width1+=i.arrowPadX,C.totalHeight=C.height1):C.totalWidth=C.width1,C.totalWidth+=i.arrowPadX),L.remove();var z=C.totalWidth+E.pad.l+E.pad.r,G=C.totalHeight+E.pad.t+E.pad.b,I=T._fullLayout._size;C.lx=I.l+I.w*E.x,C.ly=I.t+I.h*(1-E.y);var H="left";m.isRightAnchor(E)&&(C.lx-=z,H="right"),m.isCenterAnchor(E)&&(C.lx-=z/2,H="center");var N="top";m.isBottomAnchor(E)&&(C.ly-=G,N="bottom"),m.isMiddleAnchor(E)&&(C.ly-=G/2,N="middle"),C.totalWidth=Math.ceil(C.totalWidth),C.totalHeight=Math.ceil(C.totalHeight),C.lx=Math.round(C.lx),C.ly=Math.round(C.ly),M.autoMargin(T,w(E),{x:E.x,y:E.y,l:z*({right:1,center:.5}[H]||0),r:z*({left:1,center:.5}[H]||0),b:G*({top:1,middle:.5}[N]||0),t:G*({bottom:1,middle:.5}[N]||0)})}function w(T){return i.autoMarginIdRoot+T._index}function d(T,E,C,L){L=L||{};var O=T.select("."+i.itemRectClassName),z=T.select("."+i.itemTextClassName),G=E.borderwidth,I=C.index,H=E._dims;_.setTranslate(T,G+C.x,G+C.y);var N=["up","down"].indexOf(E.direction)!==-1,F=L.height||(N?H.heights[I]:H.height1);O.attr({x:0,y:0,width:L.width||(N?H.width1:H.widths[I]),height:F});var V=E.font.size*e,W=(f.lineCount(z)-1)*V/2;f.positionText(z,i.textOffsetX,F/2-W+i.textOffsetY),N?C.y+=H.heights[I]+C.yPad:C.x+=H.widths[I]+C.xPad,C.index++}function S(T,E){T.attr(i.menuIndexAttrName,E||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}$.exports=function(T){var E=T._fullLayout,C=m.filterVisible(E[i.name]);function L(V){M.autoMargin(T,w(V))}var O=E._menulayer.selectAll("g."+i.containerClassName).data(C.length>0?[0]:[]);if(O.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){A.select(this).selectAll("g."+i.headerGroupClassName).each(L)}).remove(),C.length!==0){var z=O.selectAll("g."+i.headerGroupClassName).data(C,n);z.enter().append("g").classed(i.headerGroupClassName,!0);for(var G=m.ensureSingle(O,"g",i.dropdownButtonGroupClassName,function(V){V.style("pointer-events","all")}),I=0;I<C.length;I++){var H=C[I];y(T,H)}var N="updatemenus"+E._uid,F=new r(T,G,N);z.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(S)),z.exit().each(function(V){G.call(S),L(V)}).remove(),z.each(function(V){var W=A.select(this),te=V.type==="dropdown"?G:null;M.manageCommandObserver(T,V,V.buttons,function(Q){a(T,V,V.buttons[Q.index],W,te,F,Q.index,!0)}),V.type==="dropdown"?(u(T,W,G,F,V),s(G,V)&&p(T,W,G,F,V)):p(T,W,null,null,V)})}}},20763:function($,P,t){var A=t(75909);$.exports={moduleType:"component",name:A.name,layoutAttributes:t(7163),supplyLayoutDefaults:t(64897),draw:t(13689)}},25849:function($,P,t){$.exports=m;var A=t(39898),M=t(7901),l=t(91424),_=t(71828);function m(f,o,e){this.gd=f,this.container=o,this.id=e,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}m.barWidth=2,m.barLength=20,m.barRadius=2,m.barPad=1,m.barColor="#808BA4",m.prototype.enable=function(f,o,e){var i=this.gd._fullLayout,r=i.width,n=i.height;this.position=f;var s,a,u,p,c=this.position.l,x=this.position.w,g=this.position.t,h=this.position.h,b=this.position.direction,v=b==="down",y=b==="left",w=b==="up",d=x,S=h;v||y||b==="right"||w||(this.position.direction="down",v=!0),v||w?(a=(s=c)+d,v?(u=g,S=(p=Math.min(u+S,n))-u):S=(p=g+S)-(u=Math.max(p-S,0))):(p=(u=g)+S,y?d=(a=c+d)-(s=Math.max(a-d,0)):(s=c,d=(a=Math.min(s+d,r))-s)),this._box={l:s,t:u,w:d,h:S};var T=x>d,E=m.barLength+2*m.barPad,C=m.barWidth+2*m.barPad,L=c,O=g+h;O+C>n&&(O=n-C);var z=this.container.selectAll("rect.scrollbar-horizontal").data(T?[0]:[]);z.exit().on(".drag",null).remove(),z.enter().append("rect").classed("scrollbar-horizontal",!0).call(M.fill,m.barColor),T?(this.hbar=z.attr({rx:m.barRadius,ry:m.barRadius,x:L,y:O,width:E,height:C}),this._hbarXMin=L+E/2,this._hbarTranslateMax=d-E):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var G=h>S,I=m.barWidth+2*m.barPad,H=m.barLength+2*m.barPad,N=c+x,F=g;N+I>r&&(N=r-I);var V=this.container.selectAll("rect.scrollbar-vertical").data(G?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-vertical",!0).call(M.fill,m.barColor),G?(this.vbar=V.attr({rx:m.barRadius,ry:m.barRadius,x:N,y:F,width:I,height:H}),this._vbarYMin=F+H/2,this._vbarTranslateMax=S-H):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var W=this.id,te=s-.5,Q=G?a+I+.5:a+.5,X=u-.5,q=T?p+C+.5:p+.5,Z=i._topdefs.selectAll("#"+W).data(T||G?[0]:[]);if(Z.exit().remove(),Z.enter().append("clipPath").attr("id",W).append("rect"),T||G?(this._clipRect=Z.select("rect").attr({x:Math.floor(te),y:Math.floor(X),width:Math.ceil(Q)-Math.floor(te),height:Math.ceil(q)-Math.floor(X)}),this.container.call(l.setClipUrl,W,this.gd),this.bg.attr({x:c,y:g,width:x,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),T||G){var J=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(J);var ne=A.behavior.drag().on("dragstart",function(){A.event.sourceEvent.preventDefault(),A.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));T&&this.hbar.on(".drag",null).call(ne),G&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(o,e)},m.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(l.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},m.prototype._onBoxDrag=function(){var f=this.translateX,o=this.translateY;this.hbar&&(f-=A.event.dx),this.vbar&&(o-=A.event.dy),this.setTranslate(f,o)},m.prototype._onBoxWheel=function(){var f=this.translateX,o=this.translateY;this.hbar&&(f+=A.event.deltaY),this.vbar&&(o+=A.event.deltaY),this.setTranslate(f,o)},m.prototype._onBarDrag=function(){var f=this.translateX,o=this.translateY;if(this.hbar){var e=f+this._hbarXMin,i=e+this._hbarTranslateMax;f=(_.constrain(A.event.x,e,i)-e)/(i-e)*(this.position.w-this._box.w)}if(this.vbar){var r=o+this._vbarYMin,n=r+this._vbarTranslateMax;o=(_.constrain(A.event.y,r,n)-r)/(n-r)*(this.position.h-this._box.h)}this.setTranslate(f,o)},m.prototype.setTranslate=function(f,o){var e=this.position.w-this._box.w,i=this.position.h-this._box.h;if(f=_.constrain(f||0,0,e),o=_.constrain(o||0,0,i),this.translateX=f,this.translateY=o,this.container.call(l.setTranslate,this._box.l-this.position.l-f,this._box.t-this.position.t-o),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+f-.5),y:Math.floor(this.position.t+o-.5)}),this.hbar){var r=f/e;this.hbar.call(l.setTranslate,f+r*this._hbarTranslateMax,o)}if(this.vbar){var n=o/i;this.vbar.call(l.setTranslate,f,o+n*this._vbarTranslateMax)}}},18783:function($){$.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},24695:function($){$.exports={axisRefDescription:function(P,t,A){return["If set to a",P,"axis id (e.g. *"+P+"* or","*"+P+"2*), the `"+P+"` position refers to a",P,"coordinate. If set to *paper*, the `"+P+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+A+"). If set to a",P,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+P+"2 domain* refers to the domain of the second",P," axis and a",P,"position of 0.5 refers to the","point between the",t,"and the",A,"of the domain of the","second",P,"axis."].join(" ")}}},22372:function($){$.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:""},DECREASING:{COLOR:"#FF4136",SYMBOL:""}}},31562:function($){$.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},74808:function($){$.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},29659:function($){$.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87381:function($){$.exports={circle:"","circle-open":"",square:"","square-open":"",diamond:"","diamond-open":"",cross:"+",x:""}},37822:function($){$.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},50606:function($){$.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:""}},32396:function($,P){P.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],P.STYLE=P.CSS_DECLARATIONS.map(function(t){return t.join(": ")+"; "}).join("")},77922:function($,P){P.xmlns="http://www.w3.org/2000/xmlns/",P.svg="http://www.w3.org/2000/svg",P.xlink="http://www.w3.org/1999/xlink",P.svgAttrs={xmlns:P.svg,"xmlns:xlink":P.xlink}},8729:function($,P,t){P.version=t(11506).version,t(7417),t(98847);for(var A=t(73972),M=P.register=A.register,l=t(10641),_=Object.keys(l),m=0;m<_.length;m++){var f=_[m];f.charAt(0)!=="_"&&(P[f]=l[f]),M({moduleType:"apiMethod",name:f,fn:l[f]})}M(t(67368)),M([t(32745),t(2468),t(47322),t(89853),t(68804),t(20763),t(23243),t(13137),t(97218),t(83312),t(37369),t(21081),t(12311),t(2199),t(30211),t(64168)]),M([t(92177),t(37815)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(M(window.PlotlyLocales),delete window.PlotlyLocales),P.Icons=t(24255);var o=t(30211),e=t(74875);P.Plots={resize:e.resize,graphJson:e.graphJson,sendDataToCloud:e.sendDataToCloud},P.Fx={hover:o.hover,unhover:o.unhover,loneHover:o.loneHover,loneUnhover:o.loneUnhover},P.Snapshot=t(44511),P.PlotSchema=t(86281)},24255:function($){$.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},99863:function($,P){P.isLeftAnchor=function(t){return t.xanchor==="left"||t.xanchor==="auto"&&t.x<=.3333333333333333},P.isCenterAnchor=function(t){return t.xanchor==="center"||t.xanchor==="auto"&&t.x>.3333333333333333&&t.x<.6666666666666666},P.isRightAnchor=function(t){return t.xanchor==="right"||t.xanchor==="auto"&&t.x>=.6666666666666666},P.isTopAnchor=function(t){return t.yanchor==="top"||t.yanchor==="auto"&&t.y>=.6666666666666666},P.isMiddleAnchor=function(t){return t.yanchor==="middle"||t.yanchor==="auto"&&t.y>.3333333333333333&&t.y<.6666666666666666},P.isBottomAnchor=function(t){return t.yanchor==="bottom"||t.yanchor==="auto"&&t.y<=.3333333333333333}},26348:function($,P,t){var A=t(64872),M=A.mod,l=A.modHalf,_=Math.PI,m=2*_;function f(r){return Math.abs(r[1]-r[0])>m-1e-14}function o(r,n){return l(n-r,m)}function e(r,n){if(f(n))return!0;var s,a;n[0]<n[1]?(s=n[0],a=n[1]):(s=n[1],a=n[0]),(s=M(s,m))>(a=M(a,m))&&(a+=m);var u=M(r,m),p=u+m;return u>=s&&u<=a||p>=s&&p<=a}function i(r,n,s,a,u,p,c){u=u||0,p=p||0;var x,g,h,b,v,y=f([s,a]);function w(E,C){return[E*Math.cos(C)+u,p-E*Math.sin(C)]}y?(x=0,g=_,h=m):s<a?(x=s,h=a):(x=a,h=s),r<n?(b=r,v=n):(b=n,v=r);var d,S=Math.abs(h-x)<=_?0:1;function T(E,C,L){return"A"+[E,E]+" "+[0,S,L]+" "+w(E,C)}return y?d=b===null?"M"+w(v,x)+T(v,g,0)+T(v,h,0)+"Z":"M"+w(b,x)+T(b,g,0)+T(b,h,0)+"ZM"+w(v,x)+T(v,g,1)+T(v,h,1)+"Z":b===null?(d="M"+w(v,x)+T(v,h,0),c&&(d+="L0,0Z")):d="M"+w(b,x)+"L"+w(v,x)+T(v,h,0)+"L"+w(b,h)+T(b,x,1)+"Z",d}$.exports={deg2rad:function(r){return r/180*_},rad2deg:function(r){return r/_*180},angleDelta:o,angleDist:function(r,n){return Math.abs(o(r,n))},isFullCircle:f,isAngleInsideSector:e,isPtInsideSector:function(r,n,s,a){return!!e(n,a)&&(s[0]<s[1]?(u=s[0],p=s[1]):(u=s[1],p=s[0]),r>=u&&r<=p);var u,p},pathArc:function(r,n,s,a,u){return i(null,r,n,s,a,u,0)},pathSector:function(r,n,s,a,u){return i(null,r,n,s,a,u,1)},pathAnnulus:function(r,n,s,a,u,p){return i(r,n,s,a,u,p,1)}}},73627:function($,P){var t=Array.isArray,A=ArrayBuffer,M=DataView;function l(f){return A.isView(f)&&!(f instanceof M)}function _(f){return t(f)||l(f)}function m(f,o,e){if(_(f)){if(_(f[0])){for(var i=e,r=0;r<f.length;r++)i=o(i,f[r].length);return i}return f.length}return 0}P.isTypedArray=l,P.isArrayOrTypedArray=_,P.isArray1D=function(f){return!_(f[0])},P.ensureArray=function(f,o){return t(f)||(f=[]),f.length=o,f},P.concat=function(){var f,o,e,i,r,n,s,a,u=[],p=!0,c=0;for(e=0;e<arguments.length;e++)(n=(i=arguments[e]).length)&&(o?u.push(i):(o=i,r=n),t(i)?f=!1:(p=!1,c?f!==i.constructor&&(f=!1):f=i.constructor),c+=n);if(!c)return[];if(!u.length)return o;if(p)return o.concat.apply(o,u);if(f){for((s=new f(c)).set(o),e=0;e<u.length;e++)i=u[e],s.set(i,r),r+=i.length;return s}for(s=new Array(c),a=0;a<o.length;a++)s[a]=o[a];for(e=0;e<u.length;e++){for(i=u[e],a=0;a<i.length;a++)s[r+a]=i[a];r+=a}return s},P.maxRowLength=function(f){return m(f,Math.max,0)},P.minRowLength=function(f){return m(f,Math.min,1/0)}},95218:function($,P,t){var A=t(92770),M=t(50606).BADNUM,l=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;$.exports=function(_){return typeof _=="string"&&(_=_.replace(l,"")),A(_)?Number(_):M}},33306:function($){$.exports=function(P){var t=P._fullLayout;t._glcanvas&&t._glcanvas.size()&&t._glcanvas.each(function(A){A.regl&&A.regl.clear({color:!0,depth:!0})})}},86367:function($){$.exports=function(P){P._responsiveChartHandler&&(window.removeEventListener("resize",P._responsiveChartHandler),delete P._responsiveChartHandler)}},96554:function($,P,t){var A=t(92770),M=t(84267),l=t(9012),_=t(63282),m=t(7901),f=t(37822).DESELECTDIM,o=t(65487),e=t(30587).counter,i=t(64872).modHalf,r=t(73627).isArrayOrTypedArray;function n(s,a){var u=P.valObjectMeta[a.valType];if(a.arrayOk&&r(s))return!0;if(u.validateFunction)return u.validateFunction(s,a);var p={},c=p,x={set:function(g){c=g}};return u.coerceFunction(s,x,p,a),c!==p}P.valObjectMeta={data_array:{coerceFunction:function(s,a,u){r(s)?a.set(s):u!==void 0&&a.set(u)}},enumerated:{coerceFunction:function(s,a,u,p){p.coerceNumber&&(s=+s),p.values.indexOf(s)===-1?a.set(u):a.set(s)},validateFunction:function(s,a){a.coerceNumber&&(s=+s);for(var u=a.values,p=0;p<u.length;p++){var c=String(u[p]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){if(new RegExp(c.substr(1,c.length-2)).test(s))return!0}else if(s===u[p])return!0}return!1}},boolean:{coerceFunction:function(s,a,u){s===!0||s===!1?a.set(s):a.set(u)}},number:{coerceFunction:function(s,a,u,p){!A(s)||p.min!==void 0&&s<p.min||p.max!==void 0&&s>p.max?a.set(u):a.set(+s)}},integer:{coerceFunction:function(s,a,u,p){s%1||!A(s)||p.min!==void 0&&s<p.min||p.max!==void 0&&s>p.max?a.set(u):a.set(+s)}},string:{coerceFunction:function(s,a,u,p){if(typeof s!="string"){var c=typeof s=="number";p.strict!==!0&&c?a.set(String(s)):a.set(u)}else p.noBlank&&!s?a.set(u):a.set(s)}},color:{coerceFunction:function(s,a,u){M(s).isValid()?a.set(s):a.set(u)}},colorlist:{coerceFunction:function(s,a,u){Array.isArray(s)&&s.length&&s.every(function(p){return M(p).isValid()})?a.set(s):a.set(u)}},colorscale:{coerceFunction:function(s,a,u){a.set(_.get(s,u))}},angle:{coerceFunction:function(s,a,u){s==="auto"?a.set("auto"):A(s)?a.set(i(+s,360)):a.set(u)}},subplotid:{coerceFunction:function(s,a,u,p){var c=p.regex||e(u);typeof s=="string"&&c.test(s)?a.set(s):a.set(u)},validateFunction:function(s,a){var u=a.dflt;return s===u||typeof s=="string"&&!!e(u).test(s)}},flaglist:{coerceFunction:function(s,a,u,p){if((p.extras||[]).indexOf(s)===-1)if(typeof s=="string"){for(var c=s.split("+"),x=0;x<c.length;){var g=c[x];p.flags.indexOf(g)===-1||c.indexOf(g)<x?c.splice(x,1):x++}c.length?a.set(c.join("+")):a.set(u)}else a.set(u);else a.set(s)}},any:{coerceFunction:function(s,a,u){s===void 0?a.set(u):a.set(s)}},info_array:{coerceFunction:function(s,a,u,p){function c(O,z,G){var I,H={set:function(N){I=N}};return G===void 0&&(G=z.dflt),P.valObjectMeta[z.valType].coerceFunction(O,H,G,z),I}var x=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var g,h,b,v,y,w,d=p.items,S=[],T=Array.isArray(d),E=T&&x&&Array.isArray(d[0]),C=x&&T&&!E,L=T&&!C?d.length:s.length;if(u=Array.isArray(u)?u:[],x)for(g=0;g<L;g++)for(S[g]=[],b=Array.isArray(s[g])?s[g]:[],y=C?d.length:T?d[g].length:b.length,h=0;h<y;h++)v=C?d[h]:T?d[g][h]:d,(w=c(b[h],v,(u[g]||[])[h]))!==void 0&&(S[g][h]=w);else for(g=0;g<L;g++)(w=c(s[g],T?d[g]:d,u[g]))!==void 0&&(S[g]=w);a.set(S)}else a.set(u)},validateFunction:function(s,a){if(!Array.isArray(s))return!1;var u=a.items,p=Array.isArray(u),c=a.dimensions===2;if(!a.freeLength&&s.length!==u.length)return!1;for(var x=0;x<s.length;x++)if(c){if(!Array.isArray(s[x])||!a.freeLength&&s[x].length!==u[x].length)return!1;for(var g=0;g<s[x].length;g++)if(!n(s[x][g],p?u[x][g]:u))return!1}else if(!n(s[x],p?u[x]:u))return!1;return!0}}},P.coerce=function(s,a,u,p,c){var x=o(u,p).get(),g=o(s,p),h=o(a,p),b=g.get(),v=a._template;if(b===void 0&&v&&(b=o(v,p).get(),v=0),c===void 0&&(c=x.dflt),x.arrayOk&&r(b))return h.set(b),b;var y=P.valObjectMeta[x.valType].coerceFunction;y(b,h,c,x);var w=h.get();return v&&w===c&&!n(b,x)&&(y(b=o(v,p).get(),h,c,x),w=h.get()),w},P.coerce2=function(s,a,u,p,c){var x=o(s,p),g=P.coerce(s,a,u,p,c);return x.get()!=null&&g},P.coerceFont=function(s,a,u){var p={};return u=u||{},p.family=s(a+".family",u.family),p.size=s(a+".size",u.size),p.color=s(a+".color",u.color),p},P.coercePattern=function(s,a,u,p){if(s(a+".shape")){s(a+".solidity"),s(a+".size");var c=s(a+".fillmode")==="overlay";if(!p){var x=s(a+".bgcolor",c?u:void 0);s(a+".fgcolor",c?m.contrast(x):u)}s(a+".fgopacity",c?.5:1)}},P.coerceHoverinfo=function(s,a,u){var p,c=a._module.attributes,x=c.hoverinfo?c:l,g=x.hoverinfo;if(u._dataLength===1){var h=g.dflt==="all"?g.flags.slice():g.dflt.split("+");h.splice(h.indexOf("name"),1),p=h.join("+")}return P.coerce(s,a,x,"hoverinfo",p)},P.coerceSelectionMarkerOpacity=function(s,a){if(s.marker){var u,p,c=s.marker.opacity;c!==void 0&&(r(c)||s.selected||s.unselected||(u=c,p=f*c),a("selected.marker.opacity",u),a("unselected.marker.opacity",p))}},P.validate=n},41631:function($,P,t){var A,M,l=t(84096).i$,_=t(92770),m=t(47769),f=t(64872).mod,o=t(50606),e=o.BADNUM,i=o.ONEDAY,r=o.ONEHOUR,n=o.ONEMIN,s=o.ONESEC,a=o.EPOCHJD,u=t(73972),p=t(84096).g0,c=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,x=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=new Date().getFullYear()-70;function h(z){return z&&u.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}function b(z,G){return String(z+Math.pow(10,G)).substr(1)}P.dateTick0=function(z,G){var I=function(N,F){return h(N)?F?u.getComponentMethod("calendars","CANONICAL_SUNDAY")[N]:u.getComponentMethod("calendars","CANONICAL_TICK")[N]:F?"2000-01-02":"2000-01-01"}(z,!!G);if(G<2)return I;var H=P.dateTime2ms(I,z);return H+=i*(G-1),P.ms2DateTime(H,0,z)},P.dfltRange=function(z){return h(z)?u.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},P.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"},P.dateTime2ms=function(z,G){if(P.isJSDate(z)){var I=z.getTimezoneOffset()*n,H=(z.getUTCMinutes()-z.getMinutes())*n+(z.getUTCSeconds()-z.getSeconds())*s+(z.getUTCMilliseconds()-z.getMilliseconds());if(H){var N=3*n;I=I-N/2+f(H-I+N/2,N)}return(z=Number(z)-I)>=A&&z<=M?z:e}if(typeof z!="string"&&typeof z!="number")return e;z=String(z);var F=h(G),V=z.charAt(0);!F||V!=="G"&&V!=="g"||(z=z.substr(1),G="");var W=F&&G.substr(0,7)==="chinese",te=z.match(W?x:c);if(!te)return e;var Q=te[1],X=te[3]||"1",q=Number(te[5]||1),Z=Number(te[7]||0),J=Number(te[9]||0),ne=Number(te[11]||0);if(F){if(Q.length===2)return e;var re;Q=Number(Q);try{var ae=u.getComponentMethod("calendars","getCal")(G);if(W){var ue=X.charAt(X.length-1)==="i";X=parseInt(X,10),re=ae.newDate(Q,ae.toMonthIndex(Q,X,ue),q)}else re=ae.newDate(Q,Number(X),q)}catch{return e}return re?(re.toJD()-a)*i+Z*r+J*n+ne*s:e}Q=Q.length===2?(Number(Q)+2e3-g)%100+g:Number(Q),X-=1;var he=new Date(Date.UTC(2e3,X,q,Z,J));return he.setUTCFullYear(Q),he.getUTCMonth()!==X||he.getUTCDate()!==q?e:he.getTime()+ne*s},A=P.MIN_MS=P.dateTime2ms("-9999"),M=P.MAX_MS=P.dateTime2ms("9999-12-31 23:59:59.9999"),P.isDateTime=function(z,G){return P.dateTime2ms(z,G)!==e};var v=90*i,y=3*r,w=5*n;function d(z,G,I,H,N){if((G||I||H||N)&&(z+=" "+b(G,2)+":"+b(I,2),(H||N)&&(z+=":"+b(H,2),N))){for(var F=4;N%10==0;)F-=1,N/=10;z+="."+b(N,F)}return z}P.ms2DateTime=function(z,G,I){if(typeof z!="number"||!(z>=A&&z<=M))return e;G||(G=0);var H,N,F,V,W,te,Q=Math.floor(10*f(z+.05,1)),X=Math.round(z-Q/10);if(h(I)){var q=Math.floor(X/i)+a,Z=Math.floor(f(z,i));try{H=u.getComponentMethod("calendars","getCal")(I).fromJD(q).formatDate("yyyy-mm-dd")}catch{H=p("G%Y-%m-%d")(new Date(X))}if(H.charAt(0)==="-")for(;H.length<11;)H="-0"+H.substr(1);else for(;H.length<10;)H="0"+H;N=G<v?Math.floor(Z/r):0,F=G<v?Math.floor(Z%r/n):0,V=G<y?Math.floor(Z%n/s):0,W=G<w?Z%s*10+Q:0}else te=new Date(X),H=p("%Y-%m-%d")(te),N=G<v?te.getUTCHours():0,F=G<v?te.getUTCMinutes():0,V=G<y?te.getUTCSeconds():0,W=G<w?10*te.getUTCMilliseconds()+Q:0;return d(H,N,F,V,W)},P.ms2DateTimeLocal=function(z){if(!(z>=A+i&&z<=M-i))return e;var G=Math.floor(10*f(z+.05,1)),I=new Date(Math.round(z-G/10));return d(l("%Y-%m-%d")(I),I.getHours(),I.getMinutes(),I.getSeconds(),10*I.getUTCMilliseconds()+G)},P.cleanDate=function(z,G,I){if(z===e)return G;if(P.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(h(I))return m.error("JS Dates and milliseconds are incompatible with world calendars",z),G;if(!(z=P.ms2DateTimeLocal(+z))&&G!==void 0)return G}else if(!P.isDateTime(z,I))return m.error("unrecognized date",z),G;return z};var S=/%\d?f/g,T=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function C(z,G,I,H){z=z.replace(S,function(F){var V=Math.min(+F.charAt(1)||6,6);return(G/1e3%1+2).toFixed(V).substr(2).replace(/0+$/,"")||"0"});var N=new Date(Math.floor(G+.05));if(z=z.replace(T,function(){return E[I("%q")(N)]}),h(H))try{z=u.getComponentMethod("calendars","worldCalFmt")(z,G,H)}catch{return"Invalid"}return I(z)(N)}var L=[59,59.9,59.99,59.999,59.9999];P.formatDate=function(z,G,I,H,N,F){if(N=h(N)&&N,!G)if(I==="y")G=F.year;else if(I==="m")G=F.month;else{if(I!=="d")return function(V,W){var te=f(V+.05,i),Q=b(Math.floor(te/r),2)+":"+b(f(Math.floor(te/n),60),2);if(W!=="M"){_(W)||(W=0);var X=(100+Math.min(f(V/s,60),L[W])).toFixed(W).substr(1);W>0&&(X=X.replace(/0+$/,"").replace(/[\.]$/,"")),Q+=":"+X}return Q}(z,I)+`
`+C(F.dayMonthYear,z,H,N);G=F.dayMonth+`
`+F.year}return C(G,z,H,N)};var O=3*i;P.incrementMonth=function(z,G,I){I=h(I)&&I;var H=f(z,i);if(z=Math.round(z-H),I)try{var N=Math.round(z/i)+a,F=u.getComponentMethod("calendars","getCal")(I),V=F.fromJD(N);return G%12?F.add(V,G,"m"):F.add(V,G/12,"y"),(V.toJD()-a)*i+H}catch{m.error("invalid ms "+z+" in calendar "+I)}var W=new Date(z+O);return W.setUTCMonth(W.getUTCMonth()+G)+H-O},P.findExactDates=function(z,G){for(var I,H,N=0,F=0,V=0,W=0,te=h(G)&&u.getComponentMethod("calendars","getCal")(G),Q=0;Q<z.length;Q++)if(H=z[Q],_(H)){if(!(H%i))if(te)try{(I=te.fromJD(H/i+a)).day()===1?I.month()===1?N++:F++:V++}catch{}else(I=new Date(H)).getUTCDate()===1?I.getUTCMonth()===0?N++:F++:V++}else W++;V+=F+=N;var X=z.length-W;return{exactYears:N/X,exactMonths:F/X,exactDays:V/X}}},24401:function($,P,t){var A=t(39898),M=t(47769),l=t(35657),_=t(79576);function m(r){var n=r&&r.parentNode;n&&n.removeChild(r)}function f(r,n,s){var a="plotly.js-style-"+r,u=document.getElementById(a);u||((u=document.createElement("style")).setAttribute("id",a),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var p=u.sheet;p.insertRule?p.insertRule(n+"{"+s+"}",0):p.addRule?p.addRule(n,s,0):M.warn("addStyleRule failed")}function o(r){var n=window.getComputedStyle(r,null),s=n.getPropertyValue("-webkit-transform")||n.getPropertyValue("-moz-transform")||n.getPropertyValue("-ms-transform")||n.getPropertyValue("-o-transform")||n.getPropertyValue("transform");return s==="none"?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(a){return+a})}function e(r){for(var n=[];i(r);)n.push(r),r=r.parentNode;return n}function i(r){return r&&(r instanceof Element||r instanceof HTMLElement)}$.exports={getGraphDiv:function(r){var n;if(typeof r=="string"){if((n=document.getElementById(r))===null)throw new Error("No DOM element with id '"+r+"' exists on the page.");return n}if(r==null)throw new Error("DOM element provided is null or undefined");return r},isPlotDiv:function(r){var n=A.select(r);return n.node()instanceof HTMLElement&&n.size()&&n.classed("js-plotly-plot")},removeElement:m,addStyleRule:function(r,n){f("global",r,n)},addRelatedStyleRule:f,deleteRelatedStyleRule:function(r){var n="plotly.js-style-"+r,s=document.getElementById(n);s&&m(s)},getFullTransformMatrix:function(r){var n=e(r),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return n.forEach(function(a){var u=o(a);if(u){var p=l.convertCssMatrix(u);s=_.multiply(s,s,p)}}),s},getElementTransformMatrix:o,getElementAndAncestors:e,equalDomRects:function(r,n){return r&&n&&r.top===n.top&&r.left===n.left&&r.right===n.right&&r.bottom===n.bottom}}},11086:function($,P,t){var A=t(15398).EventEmitter,M={init:function(l){if(l._ev instanceof A)return l;var _=new A,m=new A;return l._ev=_,l._internalEv=m,l.on=_.on.bind(_),l.once=_.once.bind(_),l.removeListener=_.removeListener.bind(_),l.removeAllListeners=_.removeAllListeners.bind(_),l._internalOn=m.on.bind(m),l._internalOnce=m.once.bind(m),l._removeInternalListener=m.removeListener.bind(m),l._removeAllInternalListeners=m.removeAllListeners.bind(m),l.emit=function(f,o){typeof jQuery<"u"&&jQuery(l).trigger(f,o),_.emit(f,o),m.emit(f,o)},l},triggerHandler:function(l,_,m){var f,o;typeof jQuery<"u"&&(f=jQuery(l).triggerHandler(_,m));var e=l._ev;if(!e)return f;var i,r=e._events[_];if(!r)return f;function n(s){return s.listener?(e.removeListener(_,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(e,[m]))):s.apply(e,[m])}for(r=Array.isArray(r)?r:[r],i=0;i<r.length-1;i++)n(r[i]);return o=n(r[i]),f!==void 0?f:o},purge:function(l){return delete l._ev,delete l.on,delete l.once,delete l.removeListener,delete l.removeAllListeners,delete l.emit,delete l._ev,delete l._internalEv,delete l._internalOn,delete l._internalOnce,delete l._removeInternalListener,delete l._removeAllInternalListeners,l}};$.exports=M},1426:function($,P,t){var A=t(41965),M=Array.isArray;function l(_,m,f,o){var e,i,r,n,s,a,u,p=_[0],c=_.length;if(c===2&&M(p)&&M(_[1])&&p.length===0){if(u=function(g,h){var b,v;for(b=0;b<g.length;b++){if((v=g[b])!==null&&typeof v=="object")return!1;v!==void 0&&(h[b]=v)}return!0}(_[1],p),u)return p;p.splice(0,p.length)}for(var x=1;x<c;x++)for(i in e=_[x])r=p[i],n=e[i],o&&M(n)?p[i]=n:m&&n&&(A(n)||(s=M(n)))?(s?(s=!1,a=r&&M(r)?r:[]):a=r&&A(r)?r:{},p[i]=l([a,n],m,f,o)):(n!==void 0||f)&&(p[i]=n);return p}P.extendFlat=function(){return l(arguments,!1,!1,!1)},P.extendDeep=function(){return l(arguments,!0,!1,!1)},P.extendDeepAll=function(){return l(arguments,!0,!0,!1)},P.extendDeepNoArrays=function(){return l(arguments,!0,!1,!0)}},75744:function($){$.exports=function(P){for(var t={},A=[],M=0,l=0;l<P.length;l++){var _=P[l];t[_]!==1&&(t[_]=1,A[M++]=_)}return A}},76756:function($){function P(A){return A.visible===!0}function t(A){var M=A[0].trace;return M.visible===!0&&M._length!==0}$.exports=function(A){for(var M,l=(M=A,Array.isArray(M)&&Array.isArray(M[0])&&M[0][0]&&M[0][0].trace?t:P),_=[],m=0;m<A.length;m++){var f=A[m];l(f)&&_.push(f)}return _}},41327:function($,P,t){var A=t(39898),M=t(24138),l=t(30774),_=t(29261),m=t(85268),f=t(23389),o=t(47769),e=t(41965),i=t(65487),r=t(61082),n=Object.keys(M),s={"ISO-3":f,"USA-states":f,"country names":function(u){for(var p=0;p<n.length;p++){var c=n[p];if(new RegExp(M[c]).test(u.trim().toLowerCase()))return c}return o.log("Unrecognized country name: "+u+"."),!1}};function a(u){var p=u.geojson,c=window.PlotlyGeoAssets||{},x=typeof p=="string"?c[p]:p;return e(x)?x:(o.error("Oops ... something went wrong when fetching "+p),!1)}$.exports={locationToFeature:function(u,p,c){if(!p||typeof p!="string")return!1;var x,g,h,b=s[u](p);if(b){if(u==="USA-states")for(x=[],h=0;h<c.length;h++)(g=c[h]).properties&&g.properties.gu&&g.properties.gu==="USA"&&x.push(g);else x=c;for(h=0;h<x.length;h++)if((g=x[h]).id===b)return g;o.log(["Location with id",b,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(u){var p,c,x,g,h=u.geometry,b=h.coordinates,v=u.id,y=[];function w(d){for(var S=0;S<d.length-1;S++)if(d[S][0]>0&&d[S+1][0]<0)return S;return null}switch(p=v==="RUS"||v==="FJI"?function(d){var S;if(w(d)===null)S=d;else for(S=new Array(d.length),g=0;g<d.length;g++)S[g]=[d[g][0]<0?d[g][0]+360:d[g][0],d[g][1]];y.push(r.tester(S))}:v==="ATA"?function(d){var S=w(d);if(S===null)return y.push(r.tester(d));var T=new Array(d.length+1),E=0;for(g=0;g<d.length;g++)g>S?T[E++]=[d[g][0]+360,d[g][1]]:g===S?(T[E++]=d[g],T[E++]=[d[g][0],-90]):T[E++]=d[g];var C=r.tester(T);C.pts.pop(),y.push(C)}:function(d){y.push(r.tester(d))},h.type){case"MultiPolygon":for(c=0;c<b.length;c++)for(x=0;x<b[c].length;x++)p(b[c][x]);break;case"Polygon":for(c=0;c<b.length;c++)p(b[c])}return y},getTraceGeojson:a,extractTraceFeature:function(u){var p=u[0].trace,c=a(p);if(!c)return!1;var x,g={},h=[];for(x=0;x<p._length;x++){var b=u[x];(b.loc||b.loc===0)&&(g[b.loc]=b)}function v(d){var S=i(d,p.featureidkey||"id").get(),T=g[S];if(T){var E=d.geometry;if(E.type==="Polygon"||E.type==="MultiPolygon"){var C={type:"Feature",id:S,geometry:E,properties:{}};C.properties.ct=function(L){var O,z=L.geometry;if(z.type==="MultiPolygon")for(var G=z.coordinates,I=0,H=0;H<G.length;H++){var N={type:"Polygon",coordinates:G[H]},F=l.default(N);F>I&&(I=F,O=N)}else O=z;return _.default(O).geometry.coordinates}(C),T.fIn=d,T.fOut=C,h.push(C)}else o.log(["Location",T.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete g[S]}switch(c.type){case"FeatureCollection":var y=c.features;for(x=0;x<y.length;x++)v(y[x]);break;case"Feature":v(c);break;default:return o.warn(["Invalid GeoJSON type",(c.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var w in g)o.log(["Location *"+w+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return h},fetchTraceGeoData:function(u){var p=window.PlotlyGeoAssets||{},c=[];function x(v){return new Promise(function(y,w){A.json(v,function(d,S){if(d){delete p[v];var T=d.status===404?'GeoJSON at URL "'+v+'" does not exist.':"Unexpected error while fetching from "+v;return w(new Error(T))}return p[v]=S,y(S)})})}function g(v){return new Promise(function(y,w){var d=0,S=setInterval(function(){return p[v]&&p[v]!=="pending"?(clearInterval(S),y(p[v])):d>100?(clearInterval(S),w("Unexpected error while fetching from "+v)):void d++},50)})}for(var h=0;h<u.length;h++){var b=u[h][0].trace.geojson;typeof b=="string"&&(p[b]?p[b]==="pending"&&c.push(g(b)):(p[b]="pending",c.push(x(b))))}return c},computeBbox:function(u){return m.default(u)}}},18214:function($,P,t){var A=t(50606).BADNUM;P.calcTraceToLineCoords=function(M){for(var l=M[0].trace.connectgaps,_=[],m=[],f=0;f<M.length;f++){var o=M[f].lonlat;o[0]!==A?m.push(o):!l&&m.length>0&&(_.push(m),m=[])}return m.length>0&&_.push(m),_},P.makeLine=function(M){return M.length===1?{type:"LineString",coordinates:M[0]}:{type:"MultiLineString",coordinates:M}},P.makePolygon=function(M){if(M.length===1)return{type:"Polygon",coordinates:M};for(var l=new Array(M.length),_=0;_<M.length;_++)l[_]=[M[_]];return{type:"MultiPolygon",coordinates:l}},P.makeBlank=function(){return{type:"Point",coordinates:[]}}},87642:function($,P,t){var A,M,l,_=t(64872).mod;function m(o,e,i,r,n,s,a,u){var p=i-o,c=n-o,x=a-n,g=r-e,h=s-e,b=u-s,v=p*b-x*g;if(v===0)return null;var y=(c*b-x*h)/v,w=(c*g-p*h)/v;return w<0||w>1||y<0||y>1?null:{x:o+p*y,y:e+g*y}}function f(o,e,i,r,n){var s=r*o+n*e;if(s<0)return r*r+n*n;if(s>i){var a=r-o,u=n-e;return a*a+u*u}var p=r*e-n*o;return p*p/i}P.segmentsIntersect=m,P.segmentDistance=function(o,e,i,r,n,s,a,u){if(m(o,e,i,r,n,s,a,u))return 0;var p=i-o,c=r-e,x=a-n,g=u-s,h=p*p+c*c,b=x*x+g*g,v=Math.min(f(p,c,h,n-o,s-e),f(p,c,h,a-o,u-e),f(x,g,b,o-n,e-s),f(x,g,b,i-n,r-s));return Math.sqrt(v)},P.getTextLocation=function(o,e,i,r){if(o===M&&r===l||(A={},M=o,l=r),A[i])return A[i];var n=o.getPointAtLength(_(i-r/2,e)),s=o.getPointAtLength(_(i+r/2,e)),a=Math.atan((s.y-n.y)/(s.x-n.x)),u=o.getPointAtLength(_(i,e)),p={x:(4*u.x+n.x+s.x)/6,y:(4*u.y+n.y+s.y)/6,theta:a};return A[i]=p,p},P.clearLocationCache=function(){M=null},P.getVisibleSegment=function(o,e,i){var r,n,s=e.left,a=e.right,u=e.top,p=e.bottom,c=0,x=o.getTotalLength(),g=x;function h(v){var y=o.getPointAtLength(v);v===0?r=y:v===x&&(n=y);var w=y.x<s?s-y.x:y.x>a?y.x-a:0,d=y.y<u?u-y.y:y.y>p?y.y-p:0;return Math.sqrt(w*w+d*d)}for(var b=h(c);b;){if((c+=b+i)>g)return;b=h(c)}for(b=h(g);b;){if(c>(g-=b+i))return;b=h(g)}return{min:c,max:g,len:g-c,total:x,isClosed:c===0&&g===x&&Math.abs(r.x-n.x)<.1&&Math.abs(r.y-n.y)<.1}},P.findPointOnPath=function(o,e,i,r){for(var n,s,a,u=(r=r||{}).pathLength||o.getTotalLength(),p=r.tolerance||.001,c=r.iterationLimit||30,x=o.getPointAtLength(0)[i]>o.getPointAtLength(u)[i]?-1:1,g=0,h=0,b=u;g<c;){if(n=(h+b)/2,a=(s=o.getPointAtLength(n))[i]-e,Math.abs(a)<p)return s;x*a>0?b=n:h=n,g++}return s}},81697:function($,P,t){var A=t(92770),M=t(84267),l=t(25075),_=t(21081),m=t(22399).defaultLine,f=t(73627).isArrayOrTypedArray,o=l(m);function e(n,s){var a=n;return a[3]*=s,a}function i(n){if(A(n))return o;var s=l(n);return s.length?s:o}function r(n){return A(n)?n:1}$.exports={formatColor:function(n,s,a){var u,p,c,x,g,h=n.color,b=f(h),v=f(s),y=_.extractOpts(n),w=[];if(u=y.colorscale!==void 0?_.makeColorScaleFuncFromTrace(n):i,p=b?function(S,T){return S[T]===void 0?o:l(u(S[T]))}:i,c=v?function(S,T){return S[T]===void 0?1:r(S[T])}:r,b||v)for(var d=0;d<a;d++)x=p(h,d),g=c(s,d),w[d]=e(x,g);else w=e(l(h),s);return w},parseColorScale:function(n){var s=_.extractOpts(n),a=s.colorscale;return s.reversescale&&(a=_.flipScale(s.colorscale)),a.map(function(u){var p=u[0],c=M(u[1]).toRgb();return{index:p,rgb:[c.r,c.g,c.b,c.a]}})}}},28984:function($,P,t){var A=t(23389);function M(l){return[l]}$.exports={keyFun:function(l){return l.key},repeat:M,descend:A,wrap:M,unwrap:function(l){return l[0]}}},23389:function($){$.exports=function(P){return P}},39240:function($){$.exports=function(P,t){if(!t)return P;var A=1/Math.abs(t),M=A>1?(A*P+A*t)/A:P+t,l=String(M).length;if(l>16){var _=String(t).length;if(l>=String(P).length+_){var m=parseFloat(M).toPrecision(12);m.indexOf("e+")===-1&&(M=+m)}}return M}},71828:function($,P,t){var A=t(39898),M=t(84096).g0,l=t(60721).WU,_=t(92770),m=t(50606),f=m.FP_SAFE,o=-f,e=m.BADNUM,i=$.exports={};i.adjustFormat=function(Z){return!Z||/^\d[.]\df/.test(Z)||/[.]\d%/.test(Z)?Z:Z==="0.f"?"~f":/^\d%/.test(Z)?"~%":/^\ds/.test(Z)?"~s":!/^[~,.0$]/.test(Z)&&/[&fps]/.test(Z)?"~"+Z:Z};var r={};i.warnBadFormat=function(Z){var J=String(Z);r[J]||(r[J]=1,i.warn('encountered bad format: "'+J+'"'))},i.noFormat=function(Z){return String(Z)},i.numberFormat=function(Z){var J;try{J=l(i.adjustFormat(Z))}catch{return i.warnBadFormat(Z),i.noFormat}return J},i.nestedProperty=t(65487),i.keyedContainer=t(66636),i.relativeAttr=t(6962),i.isPlainObject=t(41965),i.toLogRange=t(58163),i.relinkPrivateKeys=t(51332);var n=t(73627);i.isTypedArray=n.isTypedArray,i.isArrayOrTypedArray=n.isArrayOrTypedArray,i.isArray1D=n.isArray1D,i.ensureArray=n.ensureArray,i.concat=n.concat,i.maxRowLength=n.maxRowLength,i.minRowLength=n.minRowLength;var s=t(64872);i.mod=s.mod,i.modHalf=s.modHalf;var a=t(96554);i.valObjectMeta=a.valObjectMeta,i.coerce=a.coerce,i.coerce2=a.coerce2,i.coerceFont=a.coerceFont,i.coercePattern=a.coercePattern,i.coerceHoverinfo=a.coerceHoverinfo,i.coerceSelectionMarkerOpacity=a.coerceSelectionMarkerOpacity,i.validate=a.validate;var u=t(41631);i.dateTime2ms=u.dateTime2ms,i.isDateTime=u.isDateTime,i.ms2DateTime=u.ms2DateTime,i.ms2DateTimeLocal=u.ms2DateTimeLocal,i.cleanDate=u.cleanDate,i.isJSDate=u.isJSDate,i.formatDate=u.formatDate,i.incrementMonth=u.incrementMonth,i.dateTick0=u.dateTick0,i.dfltRange=u.dfltRange,i.findExactDates=u.findExactDates,i.MIN_MS=u.MIN_MS,i.MAX_MS=u.MAX_MS;var p=t(65888);i.findBin=p.findBin,i.sorterAsc=p.sorterAsc,i.sorterDes=p.sorterDes,i.distinctVals=p.distinctVals,i.roundUp=p.roundUp,i.sort=p.sort,i.findIndexOfMin=p.findIndexOfMin,i.sortObjectKeys=t(78607);var c=t(80038);i.aggNums=c.aggNums,i.len=c.len,i.mean=c.mean,i.median=c.median,i.midRange=c.midRange,i.variance=c.variance,i.stdev=c.stdev,i.interp=c.interp;var x=t(35657);i.init2dArray=x.init2dArray,i.transposeRagged=x.transposeRagged,i.dot=x.dot,i.translationMatrix=x.translationMatrix,i.rotationMatrix=x.rotationMatrix,i.rotationXYMatrix=x.rotationXYMatrix,i.apply3DTransform=x.apply3DTransform,i.apply2DTransform=x.apply2DTransform,i.apply2DTransform2=x.apply2DTransform2,i.convertCssMatrix=x.convertCssMatrix,i.inverseTransformMatrix=x.inverseTransformMatrix;var g=t(26348);i.deg2rad=g.deg2rad,i.rad2deg=g.rad2deg,i.angleDelta=g.angleDelta,i.angleDist=g.angleDist,i.isFullCircle=g.isFullCircle,i.isAngleInsideSector=g.isAngleInsideSector,i.isPtInsideSector=g.isPtInsideSector,i.pathArc=g.pathArc,i.pathSector=g.pathSector,i.pathAnnulus=g.pathAnnulus;var h=t(99863);i.isLeftAnchor=h.isLeftAnchor,i.isCenterAnchor=h.isCenterAnchor,i.isRightAnchor=h.isRightAnchor,i.isTopAnchor=h.isTopAnchor,i.isMiddleAnchor=h.isMiddleAnchor,i.isBottomAnchor=h.isBottomAnchor;var b=t(87642);i.segmentsIntersect=b.segmentsIntersect,i.segmentDistance=b.segmentDistance,i.getTextLocation=b.getTextLocation,i.clearLocationCache=b.clearLocationCache,i.getVisibleSegment=b.getVisibleSegment,i.findPointOnPath=b.findPointOnPath;var v=t(1426);i.extendFlat=v.extendFlat,i.extendDeep=v.extendDeep,i.extendDeepAll=v.extendDeepAll,i.extendDeepNoArrays=v.extendDeepNoArrays;var y=t(47769);i.log=y.log,i.warn=y.warn,i.error=y.error;var w=t(30587);i.counterRegex=w.counter;var d=t(79990);i.throttle=d.throttle,i.throttleDone=d.done,i.clearThrottle=d.clear;var S=t(24401);function T(Z){var J={};for(var ne in Z)for(var re=Z[ne],ae=0;ae<re.length;ae++)J[re[ae]]=+ne;return J}i.getGraphDiv=S.getGraphDiv,i.isPlotDiv=S.isPlotDiv,i.removeElement=S.removeElement,i.addStyleRule=S.addStyleRule,i.addRelatedStyleRule=S.addRelatedStyleRule,i.deleteRelatedStyleRule=S.deleteRelatedStyleRule,i.getFullTransformMatrix=S.getFullTransformMatrix,i.getElementTransformMatrix=S.getElementTransformMatrix,i.getElementAndAncestors=S.getElementAndAncestors,i.equalDomRects=S.equalDomRects,i.clearResponsive=t(86367),i.preserveDrawingBuffer=t(45142),i.makeTraceGroups=t(77310),i._=t(15867),i.notifier=t(75046),i.filterUnique=t(75744),i.filterVisible=t(76756),i.pushUnique=t(75138),i.increment=t(39240),i.cleanNumber=t(95218),i.ensureNumber=function(Z){return _(Z)?(Z=Number(Z))>f||Z<o?e:Z:e},i.isIndex=function(Z,J){return!(J!==void 0&&Z>=J)&&_(Z)&&Z>=0&&Z%1==0},i.noop=t(64213),i.identity=t(23389),i.repeat=function(Z,J){for(var ne=new Array(J),re=0;re<J;re++)ne[re]=Z;return ne},i.swapAttrs=function(Z,J,ne,re){ne||(ne="x"),re||(re="y");for(var ae=0;ae<J.length;ae++){var ue=J[ae],he=i.nestedProperty(Z,ue.replace("?",ne)),de=i.nestedProperty(Z,ue.replace("?",re)),xe=he.get();he.set(de.get()),de.set(xe)}},i.raiseToTop=function(Z){Z.parentNode.appendChild(Z)},i.cancelTransition=function(Z){return Z.transition().duration(0)},i.constrain=function(Z,J,ne){return J>ne?Math.max(ne,Math.min(J,Z)):Math.max(J,Math.min(ne,Z))},i.bBoxIntersect=function(Z,J,ne){return ne=ne||0,Z.left<=J.right+ne&&J.left<=Z.right+ne&&Z.top<=J.bottom+ne&&J.top<=Z.bottom+ne},i.simpleMap=function(Z,J,ne,re,ae){for(var ue=Z.length,he=new Array(ue),de=0;de<ue;de++)he[de]=J(Z[de],ne,re,ae);return he},i.randstr=function Z(J,ne,re,ae){if(re||(re=16),ne===void 0&&(ne=24),ne<=0)return"0";var ue,he,de=Math.log(Math.pow(2,ne))/Math.log(re),xe="";for(ue=2;de===1/0;ue*=2)de=Math.log(Math.pow(2,ne/ue))/Math.log(re)*ue;var me=de-Math.floor(de);for(ue=0;ue<Math.floor(de);ue++)xe=Math.floor(Math.random()*re).toString(re)+xe;me&&(he=Math.pow(re,me),xe=Math.floor(Math.random()*he).toString(re)+xe);var ve=parseInt(xe,re);return J&&J[xe]||ve!==1/0&&ve>=Math.pow(2,ne)?ae>10?(i.warn("randstr failed uniqueness"),xe):Z(J,ne,re,(ae||0)+1):xe},i.OptionControl=function(Z,J){Z||(Z={}),J||(J="opt");var ne={optionList:[],_newoption:function(re){re[J]=Z,ne[re.name]=re,ne.optionList.push(re)}};return ne["_"+J]=Z,ne},i.smooth=function(Z,J){if((J=Math.round(J)||0)<2)return Z;var ne,re,ae,ue,he=Z.length,de=2*he,xe=2*J-1,me=new Array(xe),ve=new Array(he);for(ne=0;ne<xe;ne++)me[ne]=(1-Math.cos(Math.PI*(ne+1)/J))/(2*J);for(ne=0;ne<he;ne++){for(ue=0,re=0;re<xe;re++)(ae=ne+re+1-J)<-he?ae-=de*Math.round(ae/de):ae>=de&&(ae-=de*Math.floor(ae/de)),ae<0?ae=-1-ae:ae>=he&&(ae=de-1-ae),ue+=Z[ae]*me[re];ve[ne]=ue}return ve},i.syncOrAsync=function(Z,J,ne){var re;function ae(){return i.syncOrAsync(Z,J,ne)}for(;Z.length;)if((re=(0,Z.splice(0,1)[0])(J))&&re.then)return re.then(ae);return ne&&ne(J)},i.stripTrailingSlash=function(Z){return Z.substr(-1)==="/"?Z.substr(0,Z.length-1):Z},i.noneOrAll=function(Z,J,ne){if(Z){var re,ae=!1,ue=!0;for(re=0;re<ne.length;re++)Z[ne[re]]!=null?ae=!0:ue=!1;if(ae&&!ue)for(re=0;re<ne.length;re++)Z[ne[re]]=J[ne[re]]}},i.mergeArray=function(Z,J,ne,re){var ae=typeof re=="function";if(i.isArrayOrTypedArray(Z))for(var ue=Math.min(Z.length,J.length),he=0;he<ue;he++){var de=Z[he];J[he][ne]=ae?re(de):de}},i.mergeArrayCastPositive=function(Z,J,ne){return i.mergeArray(Z,J,ne,function(re){var ae=+re;return isFinite(ae)&&ae>0?ae:0})},i.fillArray=function(Z,J,ne,re){if(re=re||i.identity,i.isArrayOrTypedArray(Z))for(var ae=0;ae<J.length;ae++)J[ae][ne]=re(Z[ae])},i.castOption=function(Z,J,ne,re){re=re||i.identity;var ae=i.nestedProperty(Z,ne).get();return i.isArrayOrTypedArray(ae)?Array.isArray(J)&&i.isArrayOrTypedArray(ae[J[0]])?re(ae[J[0]][J[1]]):re(ae[J]):ae},i.extractOption=function(Z,J,ne,re){if(ne in Z)return Z[ne];var ae=i.nestedProperty(J,re).get();return Array.isArray(ae)?void 0:ae},i.tagSelected=function(Z,J,ne){var re,ae,ue=J.selectedpoints,he=J._indexToPoints;he&&(re=T(he));for(var de=0;de<ue.length;de++){var xe=ue[de];if(i.isIndex(xe)||i.isArrayOrTypedArray(xe)&&i.isIndex(xe[0])&&i.isIndex(xe[1])){var me=re?re[xe]:xe,ve=ne?ne[me]:me;(ae=ve)!==void 0&&ae<Z.length&&(Z[ve].selected=1)}}},i.selIndices2selPoints=function(Z){var J=Z.selectedpoints,ne=Z._indexToPoints;if(ne){for(var re=T(ne),ae=[],ue=0;ue<J.length;ue++){var he=J[ue];if(i.isIndex(he)){var de=re[he];i.isIndex(de)&&ae.push(de)}}return ae}return J},i.getTargetArray=function(Z,J){var ne=J.target;if(typeof ne=="string"&&ne){var re=i.nestedProperty(Z,ne).get();return!!Array.isArray(re)&&re}return!!Array.isArray(ne)&&ne},i.minExtend=function Z(J,ne,re){var ae={};typeof ne!="object"&&(ne={});var ue,he,de,xe=re==="pieLike"?-1:3,me=Object.keys(J);for(ue=0;ue<me.length;ue++)de=J[he=me[ue]],he.charAt(0)!=="_"&&typeof de!="function"&&(he==="module"?ae[he]=de:Array.isArray(de)?ae[he]=he==="colorscale"||xe===-1?de.slice():de.slice(0,xe):i.isTypedArray(de)?ae[he]=xe===-1?de.subarray():de.subarray(0,xe):ae[he]=de&&typeof de=="object"?Z(J[he],ne[he],re):de);for(me=Object.keys(ne),ue=0;ue<me.length;ue++)typeof(de=ne[he=me[ue]])=="object"&&he in ae&&typeof ae[he]=="object"||(ae[he]=de);return ae},i.titleCase=function(Z){return Z.charAt(0).toUpperCase()+Z.substr(1)},i.containsAny=function(Z,J){for(var ne=0;ne<J.length;ne++)if(Z.indexOf(J[ne])!==-1)return!0;return!1},i.isIE=function(){return window.navigator.msSaveBlob!==void 0};var E=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return E.test(window.navigator.userAgent)};var C=/iPad|iPhone|iPod/;i.isIOS=function(){return C.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var Z=L.exec(window.navigator.userAgent);if(Z&&Z.length===2){var J=parseInt(Z[1]);if(!isNaN(J))return J}return null},i.isD3Selection=function(Z){return Z instanceof A.selection},i.ensureSingle=function(Z,J,ne,re){var ae=Z.select(J+(ne?"."+ne:""));if(ae.size())return ae;var ue=Z.append(J);return ne&&ue.classed(ne,!0),re&&ue.call(re),ue},i.ensureSingleById=function(Z,J,ne,re){var ae=Z.select(J+"#"+ne);if(ae.size())return ae;var ue=Z.append(J).attr("id",ne);return re&&ue.call(re),ue},i.objectFromPath=function(Z,J){for(var ne,re=Z.split("."),ae=ne={},ue=0;ue<re.length;ue++){var he=re[ue],de=null,xe=re[ue].match(/(.*)\[([0-9]+)\]/);xe?(he=xe[1],de=xe[2],ne=ne[he]=[],ue===re.length-1?ne[de]=J:ne[de]={},ne=ne[de]):(ue===re.length-1?ne[he]=J:ne[he]={},ne=ne[he])}return ae};var O=/^([^\[\.]+)\.(.+)?/,z=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function G(Z){return Z.slice(0,2)==="__"}i.expandObjectPaths=function(Z){var J,ne,re,ae,ue,he,de;if(typeof Z=="object"&&!Array.isArray(Z)){for(ne in Z)if(Z.hasOwnProperty(ne))if(J=ne.match(O)){if(ae=Z[ne],G(re=J[1]))continue;delete Z[ne],Z[re]=i.extendDeepNoArrays(Z[re]||{},i.objectFromPath(ne,i.expandObjectPaths(ae))[re])}else if(J=ne.match(z)){if(ae=Z[ne],G(re=J[1]))continue;if(ue=parseInt(J[2]),delete Z[ne],Z[re]=Z[re]||[],J[3]===".")de=J[4],he=Z[re][ue]=Z[re][ue]||{},i.extendDeepNoArrays(he,i.objectFromPath(de,i.expandObjectPaths(ae)));else{if(G(re))continue;Z[re][ue]=i.expandObjectPaths(ae)}}else{if(G(ne))continue;Z[ne]=i.expandObjectPaths(Z[ne])}}return Z},i.numSeparate=function(Z,J,ne){if(ne||(ne=!1),typeof J!="string"||J.length===0)throw new Error("Separator string required for formatting!");typeof Z=="number"&&(Z=String(Z));var re=/(\d+)(\d{3})/,ae=J.charAt(0),ue=J.charAt(1),he=Z.split("."),de=he[0],xe=he.length>1?ae+he[1]:"";if(ue&&(he.length>1||de.length>4||ne))for(;re.test(de);)de=de.replace(re,"$1"+ue+"$2");return de+xe},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var I=/^\w*$/;i.templateString=function(Z,J){var ne={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(re,ae){var ue;return I.test(ae)?ue=J[ae]:(ne[ae]=ne[ae]||i.nestedProperty(J,ae).get,ue=ne[ae]()),i.isValidTextValue(ue)?ue:""})};var H={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return te.apply(H,arguments)};var N={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return te.apply(N,arguments)};var F=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/,V={max:10,count:0,name:"texttemplate",parseMultDiv:!0};i.texttemplateStringForShapes=function(){return te.apply(V,arguments)};var W=/^[:|\|]/;function te(Z,J,ne){var re=this,ae=arguments;J||(J={});var ue={};return Z.replace(i.TEMPLATE_STRING_REGEX,function(he,de,xe){var me=de==="_xother"||de==="_yother",ve=de==="_xother_"||de==="_yother_",Le=de==="xother_"||de==="yother_",Ae=de==="xother"||de==="yother"||me||Le||ve,we=de;(me||ve)&&(we=we.substring(1)),(Le||ve)&&(we=we.substring(0,we.length-1));var se,oe,fe,Se=null,Me=null;if(re.parseMultDiv){var be=function(Te){var ye=Te.match(F);return ye?{key:ye[1],op:ye[2],number:Number(ye[3])}:{key:Te,op:null,number:null}}(we);we=be.key,Se=be.op,Me=be.number}if(Ae){if((se=J[we])===void 0)return""}else for(fe=3;fe<ae.length;fe++)if(oe=ae[fe]){if(oe.hasOwnProperty(we)){se=oe[we];break}if(I.test(we)||(se=i.nestedProperty(oe,we).get(),(se=ue[we]||i.nestedProperty(oe,we).get())&&(ue[we]=se)),se!==void 0)break}if(se!==void 0&&(Se==="*"&&(se*=Me),Se==="/"&&(se/=Me)),se===void 0&&re)return re.count<re.max&&(i.warn("Variable '"+we+"' in "+re.name+" could not be found!"),se=he),re.count===re.max&&i.warn("Too many "+re.name+" warnings - additional warnings will be suppressed"),re.count++,he;if(xe){var Ie;if(xe[0]===":"&&(se=(Ie=ne?ne.numberFormat:i.numberFormat)(xe.replace(W,""))(se)),xe[0]==="|"){Ie=ne?ne.timeFormat:M;var Be=i.dateTime2ms(se);se=i.formatDate(Be,xe.replace(W,""),!1,Ie)}}else{var ce=we+"Label";J.hasOwnProperty(ce)&&(se=J[ce])}return Ae&&(se="("+se+")",(me||ve)&&(se=" "+se),(Le||ve)&&(se+=" ")),se})}i.subplotSort=function(Z,J){for(var ne=Math.min(Z.length,J.length)+1,re=0,ae=0,ue=0;ue<ne;ue++){var he=Z.charCodeAt(ue)||0,de=J.charCodeAt(ue)||0,xe=he>=48&&he<=57,me=de>=48&&de<=57;if(xe&&(re=10*re+he-48),me&&(ae=10*ae+de-48),!xe||!me){if(re!==ae)return re-ae;if(he!==de)return he-de}}return ae-re};var Q=2e9;i.seedPseudoRandom=function(){Q=2e9},i.pseudoRandom=function(){var Z=Q;return Q=(69069*Q+1)%4294967296,Math.abs(Q-Z)<429496729?i.pseudoRandom():Q/4294967296},i.fillText=function(Z,J,ne){var re=Array.isArray(ne)?function(he){ne.push(he)}:function(he){ne.text=he},ae=i.extractOption(Z,J,"htx","hovertext");if(i.isValidTextValue(ae))return re(ae);var ue=i.extractOption(Z,J,"tx","text");return i.isValidTextValue(ue)?re(ue):void 0},i.isValidTextValue=function(Z){return Z||Z===0},i.formatPercent=function(Z,J){J=J||0;for(var ne=(Math.round(100*Z*Math.pow(10,J))*Math.pow(.1,J)).toFixed(J)+"%",re=0;re<J;re++)ne.indexOf(".")!==-1&&(ne=(ne=ne.replace("0%","%")).replace(".%","%"));return ne},i.isHidden=function(Z){var J=window.getComputedStyle(Z).display;return!J||J==="none"},i.strTranslate=function(Z,J){return Z||J?"translate("+Z+","+J+")":""},i.strRotate=function(Z){return Z?"rotate("+Z+")":""},i.strScale=function(Z){return Z!==1?"scale("+Z+")":""},i.getTextTransform=function(Z){var J=Z.noCenter,ne=Z.textX,re=Z.textY,ae=Z.targetX,ue=Z.targetY,he=Z.anchorX||0,de=Z.anchorY||0,xe=Z.rotate,me=Z.scale;return me?me>1&&(me=1):me=0,i.strTranslate(ae-me*(ne+he),ue-me*(re+de))+i.strScale(me)+(xe?"rotate("+xe+(J?"":" "+ne+" "+re)+")":"")},i.setTransormAndDisplay=function(Z,J){Z.attr("transform",i.getTextTransform(J)),Z.style("display",J.scale?null:"none")},i.ensureUniformFontSize=function(Z,J){var ne=i.extendFlat({},J);return ne.size=Math.max(J.size,Z._fullLayout.uniformtext.minsize||0),ne},i.join2=function(Z,J,ne){var re=Z.length;return re>1?Z.slice(0,-1).join(J)+ne+Z[re-1]:Z.join(J)},i.bigFont=function(Z){return Math.round(1.2*Z)};var X=i.getFirefoxVersion(),q=X!==null&&X<86;i.getPositionFromD3Event=function(){return q?[A.event.layerX,A.event.layerY]:[A.event.offsetX,A.event.offsetY]}},41965:function($){$.exports=function(P){return window&&window.process&&window.process.versions?Object.prototype.toString.call(P)==="[object Object]":Object.prototype.toString.call(P)==="[object Object]"&&Object.getPrototypeOf(P).hasOwnProperty("hasOwnProperty")}},66636:function($,P,t){var A=t(65487),M=/^\w*$/;$.exports=function(l,_,m,f){var o,e,i;m=m||"name",f=f||"value";var r={};_&&_.length?(i=A(l,_),e=i.get()):e=l,_=_||"";var n={};if(e)for(o=0;o<e.length;o++)n[e[o][m]]=o;var s=M.test(f),a={set:function(u,p){var c=p===null?4:0;if(!e){if(!i||c===4)return;e=[],i.set(e)}var x=n[u];if(x===void 0){if(c===4)return;c|=3,x=e.length,n[u]=x}else p!==(s?e[x][f]:A(e[x],f).get())&&(c|=2);var g=e[x]=e[x]||{};return g[m]=u,s?g[f]=p:A(g,f).set(p),p!==null&&(c&=-5),r[x]=r[x]|c,a},get:function(u){if(e){var p=n[u];return p===void 0?void 0:s?e[p][f]:A(e[p],f).get()}},rename:function(u,p){var c=n[u];return c===void 0||(r[c]=1|r[c],n[p]=c,delete n[u],e[c][m]=p),a},remove:function(u){var p=n[u];if(p===void 0)return a;var c=e[p];if(Object.keys(c).length>2)return r[p]=2|r[p],a.set(u,null);if(s){for(o=p;o<e.length;o++)r[o]=3|r[o];for(o=p;o<e.length;o++)n[e[o][m]]--;e.splice(p,1),delete n[u]}else A(c,f).set(null),r[p]=6|r[p];return a},constructUpdate:function(){for(var u,p,c={},x=Object.keys(r),g=0;g<x.length;g++)p=x[g],u=_+"["+p+"]",e[p]?(1&r[p]&&(c[u+"."+m]=e[p][m]),2&r[p]&&(c[u+"."+f]=s?4&r[p]?null:e[p][f]:4&r[p]?null:A(e[p],f).get())):c[u]=null;return c}};return a}},15867:function($,P,t){var A=t(73972);$.exports=function(M,l){for(var _=M._context.locale,m=0;m<2;m++){for(var f=M._context.locales,o=0;o<2;o++){var e=(f[_]||{}).dictionary;if(e){var i=e[l];if(i)return i}f=A.localeRegistry}var r=_.split("-")[0];if(r===_)break;_=r}return l}},47769:function($,P,t){var A=t(72075).dfltConfig,M=t(75046),l=$.exports={};l.log=function(){var _;if(A.logging>1){var m=["LOG:"];for(_=0;_<arguments.length;_++)m.push(arguments[_]);console.trace.apply(console,m)}if(A.notifyOnLogging>1){var f=[];for(_=0;_<arguments.length;_++)f.push(arguments[_]);M(f.join("<br>"),"long")}},l.warn=function(){var _;if(A.logging>0){var m=["WARN:"];for(_=0;_<arguments.length;_++)m.push(arguments[_]);console.trace.apply(console,m)}if(A.notifyOnLogging>0){var f=[];for(_=0;_<arguments.length;_++)f.push(arguments[_]);M(f.join("<br>"),"stick")}},l.error=function(){var _;if(A.logging>0){var m=["ERROR:"];for(_=0;_<arguments.length;_++)m.push(arguments[_]);console.error.apply(console,m)}if(A.notifyOnLogging>0){var f=[];for(_=0;_<arguments.length;_++)f.push(arguments[_]);M(f.join("<br>"),"stick")}}},77310:function($,P,t){var A=t(39898);$.exports=function(M,l,_){var m=M.selectAll("g."+_.replace(/\s/g,".")).data(l,function(o){return o[0].trace.uid});m.exit().remove(),m.enter().append("g").attr("class",_),m.order();var f=M.classed("rangeplot")?"nodeRangePlot3":"node3";return m.each(function(o){o[0][f]=A.select(this)}),m}},35657:function($,P,t){var A=t(79576);P.init2dArray=function(M,l){for(var _=new Array(M),m=0;m<M;m++)_[m]=new Array(l);return _},P.transposeRagged=function(M){var l,_,m=0,f=M.length;for(l=0;l<f;l++)m=Math.max(m,M[l].length);var o=new Array(m);for(l=0;l<m;l++)for(o[l]=new Array(f),_=0;_<f;_++)o[l][_]=M[_][l];return o},P.dot=function(M,l){if(!M.length||!l.length||M.length!==l.length)return null;var _,m,f=M.length;if(M[0].length)for(_=new Array(f),m=0;m<f;m++)_[m]=P.dot(M[m],l);else if(l[0].length){var o=P.transposeRagged(l);for(_=new Array(o.length),m=0;m<o.length;m++)_[m]=P.dot(M,o[m])}else for(_=0,m=0;m<f;m++)_+=M[m]*l[m];return _},P.translationMatrix=function(M,l){return[[1,0,M],[0,1,l],[0,0,1]]},P.rotationMatrix=function(M){var l=M*Math.PI/180;return[[Math.cos(l),-Math.sin(l),0],[Math.sin(l),Math.cos(l),0],[0,0,1]]},P.rotationXYMatrix=function(M,l,_){return P.dot(P.dot(P.translationMatrix(l,_),P.rotationMatrix(M)),P.translationMatrix(-l,-_))},P.apply3DTransform=function(M){return function(){var l=arguments,_=arguments.length===1?l[0]:[l[0],l[1],l[2]||0];return P.dot(M,[_[0],_[1],_[2],1]).slice(0,3)}},P.apply2DTransform=function(M){return function(){var l=arguments;l.length===3&&(l=l[0]);var _=arguments.length===1?l[0]:[l[0],l[1]];return P.dot(M,[_[0],_[1],1]).slice(0,2)}},P.apply2DTransform2=function(M){var l=P.apply2DTransform(M);return function(_){return l(_.slice(0,2)).concat(l(_.slice(2,4)))}},P.convertCssMatrix=function(M){if(M){var l=M.length;if(l===16)return M;if(l===6)return[M[0],M[1],0,0,M[2],M[3],0,0,0,0,1,0,M[4],M[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},P.inverseTransformMatrix=function(M){var l=[];return A.invert(l,M),[[l[0],l[1],l[2],l[3]],[l[4],l[5],l[6],l[7]],[l[8],l[9],l[10],l[11]],[l[12],l[13],l[14],l[15]]]}},64872:function($){$.exports={mod:function(P,t){var A=P%t;return A<0?A+t:A},modHalf:function(P,t){return Math.abs(P)>t/2?P-Math.round(P/t)*t:P}}},65487:function($,P,t){var A=t(92770),M=t(73627).isArrayOrTypedArray;function l(r,n){return function(){var s,a,u,p,c,x=r;for(p=0;p<n.length-1;p++){if((s=n[p])===-1){for(a=!0,u=[],c=0;c<x.length;c++)u[c]=l(x[c],n.slice(p+1))(),u[c]!==u[0]&&(a=!1);return a?u[0]:u}if(typeof s=="number"&&!M(x)||typeof(x=x[s])!="object"||x===null)return}if(typeof x=="object"&&x!==null&&(u=x[n[p]])!==null)return u}}$.exports=function(r,n){if(A(n))n=String(n);else if(typeof n!="string"||n.substr(n.length-4)==="[-1]")throw"bad property string";var s,a,u,p,c=n.split(".");for(p=0;p<c.length;p++)if(String(c[p]).slice(0,2)==="__")throw"bad property string";for(p=0;p<c.length;){if(s=String(c[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])c[p]=s[1];else{if(p!==0)throw"bad property string";c.splice(0,1)}for(a=s[2].substr(1,s[2].length-2).split("]["),u=0;u<a.length;u++)p++,c.splice(p,0,Number(a[u]))}p++}return typeof r!="object"?function(x,g,h){return{set:function(){throw"bad container"},get:function(){},astr:g,parts:h,obj:x}}(r,n,c):{set:f(r,c,n),get:l(r,c),astr:n,parts:c,obj:r}};var _=/(^|\.)args\[/;function m(r,n){return r===void 0||r===null&&!n.match(_)}function f(r,n,s){return function(a){var u,p,c=r,x="",g=m(a,s);for(p=0;p<n.length-1;p++){if(typeof(u=n[p])=="number"&&!M(c))throw"array index but container is not an array";if(u===-1){if(g=!e(c,n.slice(p+1),a,s))break;return}if(!i(c,u,n[p+1],g))break;if(typeof(c=c[u])!="object"||c===null)throw"container is not an object";x=o(x,u)}if(g){if(p===n.length-1&&(delete c[n[p]],Array.isArray(c)&&+n[p]==c.length-1))for(;c.length&&c[c.length-1]===void 0;)c.pop()}else c[n[p]]=a}}function o(r,n){var s=n;return A(n)?s="["+n+"]":r&&(s="."+n),r+s}function e(r,n,s,a){var u,p=M(s),c=!0,x=s,g=a.replace("-1",0),h=!p&&m(s,g),b=n[0];for(u=0;u<r.length;u++)g=a.replace("-1",u),p&&(h=m(x=s[u%s.length],g)),h&&(c=!1),i(r,u,b,h)&&f(r[u],n,a.replace("-1",u))(x);return c}function i(r,n,s,a){if(r[n]===void 0){if(a)return!1;r[n]=typeof s=="number"?[]:{}}return!0}},64213:function($){$.exports=function(){}},75046:function($,P,t){var A=t(39898),M=t(92770),l=[];$.exports=function(_,m){if(l.indexOf(_)===-1){l.push(_);var f=1e3;M(m)?f=m:m==="long"&&(f=3e3);var o=A.select("body").selectAll(".plotly-notifier").data([0]);o.enter().append("div").classed("plotly-notifier",!0),o.selectAll(".notifier-note").data(l).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var r=A.select(this);r.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){r.transition().call(e)});for(var n=r.append("p"),s=i.split(/<br\s*\/?>/g),a=0;a<s.length;a++)a&&n.append("br"),n.append("span").text(s[a]);m==="stick"?r.transition().duration(350).style("opacity",1):r.transition().duration(700).style("opacity",1).transition().delay(f).call(e)})}function e(i){i.duration(700).style("opacity",0).each("end",function(r){var n=l.indexOf(r);n!==-1&&l.splice(n,1),A.select(this).remove()})}}},39918:function($,P,t){var A=t(6964),M="data-savedcursor";$.exports=function(l,_){var m=l.attr(M);if(_){if(!m){for(var f=(l.attr("class")||"").split(" "),o=0;o<f.length;o++){var e=f[o];e.indexOf("cursor-")===0&&l.attr(M,e.substr(7)).classed(e,!1)}l.attr(M)||l.attr(M,"!!")}A(l,_)}else m&&(l.attr(M,null),m==="!!"?A(l):A(l,m))}},61082:function($,P,t){var A=t(35657).dot,M=t(50606).BADNUM,l=$.exports={};l.tester=function(_){var m,f=_.slice(),o=f[0][0],e=o,i=f[0][1],r=i;for(f[f.length-1][0]===f[0][0]&&f[f.length-1][1]===f[0][1]||f.push(f[0]),m=1;m<f.length;m++)o=Math.min(o,f[m][0]),e=Math.max(e,f[m][0]),i=Math.min(i,f[m][1]),r=Math.max(r,f[m][1]);var n,s=!1;f.length===5&&(f[0][0]===f[1][0]?f[2][0]===f[3][0]&&f[0][1]===f[3][1]&&f[1][1]===f[2][1]&&(s=!0,n=function(p){return p[0]===f[0][0]}):f[0][1]===f[1][1]&&f[2][1]===f[3][1]&&f[0][0]===f[3][0]&&f[1][0]===f[2][0]&&(s=!0,n=function(p){return p[1]===f[0][1]}));var a=!0,u=f[0];for(m=1;m<f.length;m++)if(u[0]!==f[m][0]||u[1]!==f[m][1]){a=!1;break}return{xmin:o,xmax:e,ymin:i,ymax:r,pts:f,contains:s?function(p,c){var x=p[0],g=p[1];return!(x===M||x<o||x>e||g===M||g<i||g>r||c&&n(p))}:function(p,c){var x=p[0],g=p[1];if(x===M||x<o||x>e||g===M||g<i||g>r)return!1;var h,b,v,y,w,d=f.length,S=f[0][0],T=f[0][1],E=0;for(h=1;h<d;h++)if(b=S,v=T,S=f[h][0],T=f[h][1],!(x<(y=Math.min(b,S))||x>Math.max(b,S)||g>Math.max(v,T)))if(g<Math.min(v,T))x!==y&&E++;else{if(g===(w=S===b?g:v+(x-b)*(T-v)/(S-b)))return h!==1||!c;g<=w&&x!==y&&E++}return E%2==1},isRect:s,degenerate:a}},l.isSegmentBent=function(_,m,f,o){var e,i,r,n=_[m],s=[_[f][0]-n[0],_[f][1]-n[1]],a=A(s,s),u=Math.sqrt(a),p=[-s[1]/u,s[0]/u];for(e=m+1;e<f;e++)if(i=[_[e][0]-n[0],_[e][1]-n[1]],(r=A(i,s))<0||r>a||Math.abs(A(i,p))>o)return!0;return!1},l.filter=function(_,m){var f=[_[0]],o=0,e=0;function i(r){_.push(r);var n=f.length,s=o;f.splice(e+1);for(var a=s+1;a<_.length;a++)(a===_.length-1||l.isSegmentBent(_,s,a+1,m))&&(f.push(_[a]),f.length<n-2&&(o=a,e=f.length-1),s=a)}return _.length>1&&i(_.pop()),{addPt:i,raw:_,filtered:f}}},79749:function($,P,t){var A=t(58617),M=t(98580);$.exports=function(l,_,m){var f=l._fullLayout,o=!0;return f._glcanvas.each(function(e){if(e.regl)e.regl.preloadCachedCode(m);else if(!e.pick||f._has("parcoords")){try{e.regl=M({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:!0},pixelRatio:l._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:_||[],cachedCode:m||{}})}catch{o=!1}e.regl||(o=!1),o&&this.addEventListener("webglcontextlost",function(i){l&&l.emit&&l.emit("plotly_webglcontextlost",{event:i,layer:e.key})},!1)}}),o||A({container:f._glcontainer.node()}),o}},45142:function($,P,t){var A=t(92770),M=t(35791);$.exports=function(l){var _;if(typeof(_=l&&l.hasOwnProperty("userAgent")?l.userAgent:function(){var n;return typeof navigator<"u"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),n}())!="string")return!0;var m=M({ua:{headers:{"user-agent":_}},tablet:!0,featureDetect:!1});if(!m){for(var f=_.split(" "),o=1;o<f.length;o++)if(f[o].indexOf("Safari")!==-1)for(var e=o-1;e>-1;e--){var i=f[e];if(i.substr(0,8)==="Version/"){var r=i.substr(8).split(".")[0];if(A(r)&&(r=+r),r>=13)return!0}}}return m}},75138:function($){$.exports=function(P,t){if(t instanceof RegExp){for(var A=t.toString(),M=0;M<P.length;M++)if(P[M]instanceof RegExp&&P[M].toString()===A)return P;P.push(t)}else!t&&t!==0||P.indexOf(t)!==-1||P.push(t);return P}},10847:function($,P,t){var A=t(71828),M=t(72075).dfltConfig,l={add:function(_,m,f,o,e){var i,r;_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},r=_.undoQueue.index,_.autoplay?_.undoQueue.inSequence||(_.autoplay=!1):(!_.undoQueue.sequence||_.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},_.undoQueue.queue.splice(r,_.undoQueue.queue.length-r,i),_.undoQueue.index+=1):i=_.undoQueue.queue[r-1],_.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(m),i.undo.args.unshift(f),i.redo.calls.push(o),i.redo.args.push(e)),_.undoQueue.queue.length>M.queueLength&&(_.undoQueue.queue.shift(),_.undoQueue.index--))},startSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!0,_.undoQueue.beginSequence=!0},stopSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!1,_.undoQueue.beginSequence=!1},undo:function(_){var m,f;if(!(_.undoQueue===void 0||isNaN(_.undoQueue.index)||_.undoQueue.index<=0)){for(_.undoQueue.index--,m=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,f=0;f<m.undo.calls.length;f++)l.plotDo(_,m.undo.calls[f],m.undo.args[f]);_.undoQueue.inSequence=!1,_.autoplay=!1}},redo:function(_){var m,f;if(!(_.undoQueue===void 0||isNaN(_.undoQueue.index)||_.undoQueue.index>=_.undoQueue.queue.length)){for(m=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,f=0;f<m.redo.calls.length;f++)l.plotDo(_,m.redo.calls[f],m.redo.args[f]);_.undoQueue.inSequence=!1,_.autoplay=!1,_.undoQueue.index++}},plotDo:function(_,m,f){_.autoplay=!0,f=function(o,e){for(var i,r=[],n=0;n<e.length;n++)i=e[n],r[n]=i===o?i:typeof i=="object"?Array.isArray(i)?A.extendDeep([],i):A.extendDeepAll({},i):i;return r}(_,f),m.apply(null,f)}};$.exports=l},30587:function($,P){P.counter=function(t,A,M,l){var _=(A||"")+(M?"":"$"),m=l===!1?"":"^";return t==="xy"?new RegExp(m+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+_):new RegExp(m+t+"([2-9]|[1-9][0-9]+)?"+_)}},6962:function($){var P=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;$.exports=function(A,M){for(;M;){var l=A.match(P);if(l)A=l[1];else{if(!A.match(t))throw new Error("bad relativeAttr call:"+[A,M]);A=""}if(M.charAt(0)!=="^")break;M=M.slice(1)}return A&&M.charAt(0)!=="["?A+"."+M:A+M}},51332:function($,P,t){var A=t(73627).isArrayOrTypedArray,M=t(41965);$.exports=function l(_,m){for(var f in m){var o=m[f],e=_[f];if(e!==o)if(f.charAt(0)==="_"||typeof o=="function"){if(f in _)continue;_[f]=o}else if(A(o)&&A(e)&&M(o[0])){if(f==="customdata"||f==="ids")continue;for(var i=Math.min(o.length,e.length),r=0;r<i;r++)e[r]!==o[r]&&M(o[r])&&M(e[r])&&l(e[r],o[r])}else M(o)&&M(e)&&(l(e,o),Object.keys(e).length||delete _[f])}}},65888:function($,P,t){var A=t(92770),M=t(47769),l=t(23389),_=t(50606).BADNUM,m=1e-9;function f(r,n){return r<n}function o(r,n){return r<=n}function e(r,n){return r>n}function i(r,n){return r>=n}P.findBin=function(r,n,s){if(A(n.start))return s?Math.ceil((r-n.start)/n.size-m)-1:Math.floor((r-n.start)/n.size+m);var a,u,p=0,c=n.length,x=0,g=c>1?(n[c-1]-n[0])/(c-1):1;for(u=g>=0?s?f:o:s?i:e,r+=g*m*(s?-1:1)*(g>=0?1:-1);p<c&&x++<100;)u(n[a=Math.floor((p+c)/2)],r)?p=a+1:c=a;return x>90&&M.log("Long binary search..."),p-1},P.sorterAsc=function(r,n){return r-n},P.sorterDes=function(r,n){return n-r},P.distinctVals=function(r){var n,s=r.slice();for(s.sort(P.sorterAsc),n=s.length-1;n>-1&&s[n]===_;n--);for(var a,u=s[n]-s[0]||1,p=u/(n||1)/1e4,c=[],x=0;x<=n;x++){var g=s[x],h=g-a;a===void 0?(c.push(g),a=g):h>p&&(u=Math.min(u,h),c.push(g),a=g)}return{vals:c,minDiff:u}},P.roundUp=function(r,n,s){for(var a,u=0,p=n.length-1,c=0,x=s?0:1,g=s?1:0,h=s?Math.ceil:Math.floor;u<p&&c++<100;)n[a=h((u+p)/2)]<=r?u=a+x:p=a-g;return n[u]},P.sort=function(r,n){for(var s=0,a=0,u=1;u<r.length;u++){var p=n(r[u],r[u-1]);if(p<0?s=1:p>0&&(a=1),s&&a)return r.sort(n)}return a?r:r.reverse()},P.findIndexOfMin=function(r,n){n=n||l;for(var s,a=1/0,u=0;u<r.length;u++){var p=n(r[u]);p<a&&(a=p,s=u)}return s}},6964:function($){$.exports=function(P,t){(P.attr("class")||"").split(" ").forEach(function(A){A.indexOf("cursor-")===0&&P.classed(A,!1)}),t&&P.classed("cursor-"+t,!0)}},58617:function($,P,t){var A=t(7901),M=function(){};$.exports=function(l){for(var _ in l)typeof l[_]=="function"&&(l[_]=M);l.destroy=function(){l.container.parentNode.removeChild(l.container)};var m=document.createElement("div");m.className="no-webgl",m.style.cursor="pointer",m.style.fontSize="24px",m.style.color=A.defaults[0],m.style.position="absolute",m.style.left=m.style.top="0px",m.style.width=m.style.height="100%",m.style["background-color"]=A.lightLine,m.style["z-index"]=30;var f=document.createElement("p");return f.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",f.style.position="relative",f.style.top="50%",f.style.left="50%",f.style.height="30%",f.style.width="50%",f.style.margin="-15% 0 0 -25%",m.appendChild(f),l.container.appendChild(m),l.container.style.background="#FFFFFF",l.container.onclick=function(){window.open("https://get.webgl.org")},!1}},78607:function($){$.exports=function(P){return Object.keys(P).sort()}},80038:function($,P,t){var A=t(92770),M=t(73627).isArrayOrTypedArray;P.aggNums=function(l,_,m,f){var o,e;if((!f||f>m.length)&&(f=m.length),A(_)||(_=!1),M(m[0])){for(e=new Array(f),o=0;o<f;o++)e[o]=P.aggNums(l,_,m[o]);m=e}for(o=0;o<f;o++)A(_)?A(m[o])&&(_=l(+_,+m[o])):_=m[o];return _},P.len=function(l){return P.aggNums(function(_){return _+1},0,l)},P.mean=function(l,_){return _||(_=P.len(l)),P.aggNums(function(m,f){return m+f},0,l)/_},P.midRange=function(l){if(l!==void 0&&l.length!==0)return(P.aggNums(Math.max,null,l)+P.aggNums(Math.min,null,l))/2},P.variance=function(l,_,m){return _||(_=P.len(l)),A(m)||(m=P.mean(l,_)),P.aggNums(function(f,o){return f+Math.pow(o-m,2)},0,l)/_},P.stdev=function(l,_,m){return Math.sqrt(P.variance(l,_,m))},P.median=function(l){var _=l.slice().sort();return P.interp(_,.5)},P.interp=function(l,_){if(!A(_))throw"n should be a finite number";if((_=_*l.length-.5)<0)return l[0];if(_>l.length-1)return l[l.length-1];var m=_%1;return m*l[Math.ceil(_)]+(1-m)*l[Math.floor(_)]}},78614:function($,P,t){var A=t(25075);$.exports=function(M){return M?A(M):[0,0,0,1]}},3883:function($,P,t){var A=t(32396),M=t(91424),l=t(71828),_=null;$.exports=function(){if(_!==null)return _;_=!1;var m=l.isIE()||l.isSafari()||l.isIOS();if(window.navigator.userAgent&&!m){var f=Array.from(A.CSS_DECLARATIONS).reverse(),o=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof o=="function")_=f.some(function(r){return o.apply(null,r)});else{var e=M.tester.append("image").attr("style",A.STYLE),i=window.getComputedStyle(e.node()).imageRendering;_=f.some(function(r){var n=r[1];return i===n||i===n.toLowerCase()}),e.remove()}}return _}},63893:function($,P,t){var A=t(39898),M=t(71828),l=M.strTranslate,_=t(77922),m=t(18783).LINE_SPACING,f=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;P.convertToTspans=function(z,G,I){var H=z.text(),N=!z.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&H.match(f),F=A.select(z.node().parentNode);if(!F.empty()){var V=z.attr("class")?z.attr("class").split(" ")[0]:"text";return V+="-math",F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove(),z.style("display",null).attr({"data-unformatted":H,"data-math":"N"}),N?(G&&G._promises||[]).push(new Promise(function(te){z.style("display","none");var Q=parseInt(z.node().style.fontSize,10),X={fontSize:Q};(function(q,Z,J){var ne,re,ae,ue,he=parseInt((MathJax.version||"").split(".")[0]);if(he===2||he===3){var de=function(){var me="math-output-"+M.randstr({},64),ve=(ue=A.select("body").append("div").attr({id:me}).style({visibility:"hidden",position:"absolute","font-size":Z.fontSize+"px"}).text(q.replace(o,"\\lt ").replace(e,"\\gt "))).node();return he===2?MathJax.Hub.Typeset(ve):MathJax.typeset([ve])},xe=function(){var me=ue.select(he===2?".MathJax_SVG":".MathJax"),ve=!me.empty()&&ue.select("svg").node();if(ve){var Le,Ae=ve.getBoundingClientRect();Le=he===2?A.select("body").select("#MathJax_SVG_glyphs"):me.select("defs"),J(me,Le,Ae)}else M.log("There was an error in the tex syntax.",q),J();ue.remove()};he===2?MathJax.Hub.Queue(function(){return re=M.extendDeepAll({},MathJax.Hub.config),ae=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if((ne=MathJax.Hub.config.menuSettings.renderer)!=="SVG")return MathJax.Hub.setRenderer("SVG")},de,xe,function(){if(ne!=="SVG")return MathJax.Hub.setRenderer(ne)},function(){return ae!==void 0&&(MathJax.Hub.processSectionDelay=ae),MathJax.Hub.Config(re)}):he===3&&(re=M.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,(ne=MathJax.config.startup.output)!=="svg"&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){de(),xe(),ne!=="svg"&&(MathJax.config.startup.output=ne),MathJax.config=re}))}else M.warn("No MathJax version:",MathJax.version)})(N[2],X,function(q,Z,J){F.selectAll("svg."+V).remove(),F.selectAll("g."+V+"-group").remove();var ne=q&&q.select("svg");if(!ne||!ne.node())return W(),void te();var re=F.append("g").classed(V+"-group",!0).attr({"pointer-events":"none","data-unformatted":H,"data-math":"Y"});re.node().appendChild(ne.node()),Z&&Z.node()&&ne.node().insertBefore(Z.node().cloneNode(!0),ne.node().firstChild);var ae=J.width,ue=J.height;ne.attr({class:V,height:ue,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var he=z.node().style.fill||"black",de=ne.select("g");de.attr({fill:he,stroke:he});var xe=de.node().getBoundingClientRect(),me=xe.width,ve=xe.height;(me>ae||ve>ue)&&(ne.style("overflow","hidden"),me=(xe=ne.node().getBoundingClientRect()).width,ve=xe.height);var Le=+z.attr("x"),Ae=+z.attr("y"),we=-(Q||z.node().getBoundingClientRect().height)/4;if(V[0]==="y")re.attr({transform:"rotate("+[-90,Le,Ae]+")"+l(-me/2,we-ve/2)});else if(V[0]==="l")Ae=we-ve/2;else if(V[0]==="a"&&V.indexOf("atitle")!==0)Le=0,Ae=we;else{var se=z.attr("text-anchor");Le-=me*(se==="middle"?.5:se==="end"?1:0),Ae=Ae+we-ve/2}ne.attr({x:Le,y:Ae}),I&&I.call(z,re),te(re)})})):W(),z}function W(){F.empty()||(V=z.attr("class")+"-math",F.select("svg."+V).remove()),z.text("").style("white-space","pre");var te=function(Q,X){X=X.replace(p," ");var q,Z=!1,J=[],ne=-1;function re(){ne++;var Me=document.createElementNS(_.svg,"tspan");A.select(Me).attr({class:"line",dy:ne*m+"em"}),Q.appendChild(Me),q=Me;var be=J;if(J=[{node:Me}],be.length>1)for(var Ie=1;Ie<be.length;Ie++)ae(be[Ie])}function ae(Me){var be,Ie=Me.type,Be={};if(Ie==="a"){be="a";var ce=Me.target,Te=Me.href,ye=Me.popup;Te&&(Be={"xlink:xlink:show":ce==="_blank"||ce.charAt(0)!=="_"?"new":"replace",target:ce,"xlink:xlink:href":Te},ye&&(Be.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+ye+'");return false;'))}else be="tspan";Me.style&&(Be.style=Me.style);var Pe=document.createElementNS(_.svg,be);if(Ie==="sup"||Ie==="sub"){ue(q,a),q.appendChild(Pe);var Re=document.createElementNS(_.svg,"tspan");ue(Re,a),A.select(Re).attr("dy",s[Ie]),Be.dy=n[Ie],q.appendChild(Pe),q.appendChild(Re)}else q.appendChild(Pe);A.select(Pe).attr(Be),q=Me.node=Pe,J.push(Me)}function ue(Me,be){Me.appendChild(document.createTextNode(be))}function he(Me){if(J.length!==1){var be=J.pop();Me!==be.type&&M.log("Start tag <"+be.type+"> doesnt match end tag <"+Me+">. Pretending it did match.",X),q=J[J.length-1].node}else M.log("Ignoring unexpected end tag </"+Me+">.",X)}g.test(X)?re():(q=Q,J=[{node:Q}]);for(var de=X.split(c),xe=0;xe<de.length;xe++){var me=de[xe],ve=me.match(x),Le=ve&&ve[2].toLowerCase(),Ae=r[Le];if(Le==="br")re();else if(Ae===void 0)ue(q,E(me));else if(ve[1])he(Le);else{var we=ve[4],se={type:Le},oe=w(we,h);if(oe?(oe=oe.replace(d,"$1 fill:"),Ae&&(oe+=";"+Ae)):Ae&&(oe=Ae),oe&&(se.style=oe),Le==="a"){Z=!0;var fe=w(we,b);if(fe){var Se=C(fe);Se&&(se.href=Se,se.target=w(we,v)||"_blank",se.popup=w(we,y))}}ae(se)}}return Z}(z.node(),H);te&&z.style("pointer-events","all"),P.positionText(z),I&&I.call(z)}};var o=/(<|&lt;|&#60;)/g,e=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],r={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},n={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},a="",u=["http:","https:","mailto:","",void 0,":"],p=P.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,g=/<br(\s+.*)?>/i;P.BR_TAG_ALL=/<br(\s+.*)?>/gi;var h=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,b=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,v=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(z,G){if(!z)return null;var I=z.match(G),H=I&&(I[3]||I[4]);return H&&E(H)}var d=/(^|;)\s*color:/;P.plainText=function(z,G){for(var I=(G=G||{}).len!==void 0&&G.len!==-1?G.len:1/0,H=G.allowedTags!==void 0?G.allowedTags:["br"],N=z.split(c),F=[],V="",W=0,te=0;te<N.length;te++){var Q=N[te],X=Q.match(x),q=X&&X[2].toLowerCase();if(q)H.indexOf(q)!==-1&&(F.push(Q),V=q);else{var Z=Q.length;if(W+Z<I)F.push(Q),W+=Z;else if(W<I){var J=I-W;V&&(V!=="br"||J<=3||Z<=3)&&F.pop(),I>3?F.push(Q.substr(0,J-3)+"..."):F.push(Q.substr(0,J));break}V=""}}return F.join("")};var S={mu:"",amp:"&",lt:"<",gt:">",nbsp:"",times:"",plusmn:"",deg:""},T=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(z){return z.replace(T,function(G,I){return(I.charAt(0)==="#"?function(H){if(!(H>1114111)){var N=String.fromCodePoint;if(N)return N(H);var F=String.fromCharCode;return H<=65535?F(H):F(55232+(H>>10),H%1024+56320)}}(I.charAt(1)==="x"?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):S[I])||G})}function C(z){var G=encodeURI(decodeURI(z)),I=document.createElement("a"),H=document.createElement("a");I.href=z,H.href=G;var N=I.protocol,F=H.protocol;return u.indexOf(N)!==-1&&u.indexOf(F)!==-1?G:""}function L(z,G,I){var H,N,F,V=I.horizontalAlign,W=I.verticalAlign||"top",te=z.node().getBoundingClientRect(),Q=G.node().getBoundingClientRect();return N=W==="bottom"?function(){return te.bottom-H.height}:W==="middle"?function(){return te.top+(te.height-H.height)/2}:function(){return te.top},F=V==="right"?function(){return te.right-H.width}:V==="center"?function(){return te.left+(te.width-H.width)/2}:function(){return te.left},function(){H=this.node().getBoundingClientRect();var X=F()-Q.left,q=N()-Q.top,Z=I.gd||{};if(I.gd){Z._fullLayout._calcInverseTransform(Z);var J=M.apply3DTransform(Z._fullLayout._invTransform)(X,q);X=J[0],q=J[1]}return this.style({top:q+"px",left:X+"px","z-index":1e3}),this}}P.convertEntities=E,P.sanitizeHTML=function(z){z=z.replace(p," ");for(var G=document.createElement("p"),I=G,H=[],N=z.split(c),F=0;F<N.length;F++){var V=N[F],W=V.match(x),te=W&&W[2].toLowerCase();if(te in r)if(W[1])H.length&&(I=H.pop());else{var Q=W[4],X=w(Q,h),q=X?{style:X}:{};if(te==="a"){var Z=w(Q,b);if(Z){var J=C(Z);if(J){q.href=J;var ne=w(Q,v);ne&&(q.target=ne)}}}var re=document.createElement(te);I.appendChild(re),A.select(re).attr(q),I=re,H.push(re)}else I.appendChild(document.createTextNode(E(V)))}return G.innerHTML},P.lineCount=function(z){return z.selectAll("tspan.line").size()||1},P.positionText=function(z,G,I){return z.each(function(){var H=A.select(this);function N(W,te){return te===void 0?(te=H.attr(W))===null&&(H.attr(W,0),te=0):H.attr(W,te),te}var F=N("x",G),V=N("y",I);this.nodeName==="text"&&H.selectAll("tspan.line").attr({x:F,y:V})})};var O="1px ";P.makeTextShadow=function(z){return O+O+O+z+", -"+O+"-"+O+O+z+", "+O+"-"+O+O+z+", -"+O+O+O+z},P.makeEditable=function(z,G){var I=G.gd,H=G.delegate,N=A.dispatch("edit","input","cancel"),F=H||z;if(z.style({"pointer-events":H?"none":"all"}),z.size()!==1)throw new Error("boo");function V(){var te,Q,X,q,Z;te=A.select(I).select(".svg-container"),Q=te.append("div"),X=z.node().style,q=parseFloat(X.fontSize||12),(Z=G.text)===void 0&&(Z=z.attr("data-unformatted")),Q.classed("plugin-editable editable",!0).style({position:"absolute","font-family":X.fontFamily||"Arial","font-size":q,color:G.fill||X.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(L(z,te,G)).on("blur",function(){I._editing=!1,z.text(this.textContent).style({opacity:1});var re,ae=A.select(this).attr("class");(re=ae?"."+ae.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(z.node().parentNode).select(re).style({opacity:0});var ue=this.textContent;A.select(this).transition().duration(0).remove(),A.select(document).on("mouseup",null),N.edit.call(z,ue)}).on("focus",function(){var re=this;I._editing=!0,A.select(document).on("mouseup",function(){if(A.event.target===re)return!1;document.activeElement===Q.node()&&Q.node().blur()})}).on("keyup",function(){A.event.which===27?(I._editing=!1,z.style({opacity:1}),A.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),N.cancel.call(z,this.textContent)):(N.input.call(z,this.textContent),A.select(this).call(L(z,te,G)))}).on("keydown",function(){A.event.which===13&&this.blur()}).call(W),z.style({opacity:0});var J,ne=F.attr("class");(J=ne?"."+ne.split(" ")[0]+"-math-group":"[class*=-math-group]")&&A.select(z.node().parentNode).select(J).style({opacity:0})}function W(te){var Q=te.node(),X=document.createRange();X.selectNodeContents(Q);var q=window.getSelection();q.removeAllRanges(),q.addRange(X),Q.focus()}return G.immediate?V():F.on("click",V),A.rebind(z,N,"on")}},79990:function($,P){var t={};function A(M){M&&M.timer!==null&&(clearTimeout(M.timer),M.timer=null)}P.throttle=function(M,l,_){var m=t[M],f=Date.now();if(!m){for(var o in t)t[o].ts<f-6e4&&delete t[o];m=t[M]={ts:0,timer:null}}function e(){_(),m.ts=Date.now(),m.onDone&&(m.onDone(),m.onDone=null)}A(m),f>m.ts+l?e():m.timer=setTimeout(function(){e(),m.timer=null},l)},P.done=function(M){var l=t[M];return l&&l.timer?new Promise(function(_){var m=l.onDone;l.onDone=function(){m&&m(),_(),l.onDone=null}}):Promise.resolve()},P.clear=function(M){if(M)A(t[M]),delete t[M];else for(var l in t)P.clear(l)}},58163:function($,P,t){var A=t(92770);$.exports=function(M,l){if(M>0)return Math.log(M)/Math.LN10;var _=Math.log(Math.min(l[0],l[1]))/Math.LN10;return A(_)||(_=Math.log(Math.max(l[0],l[1]))/Math.LN10-6),_}},90973:function($,P,t){var A=$.exports={},M=t(78776).locationmodeToLayer,l=t(96892).zL;A.getTopojsonName=function(_){return[_.scope.replace(/ /g,"-"),"_",_.resolution.toString(),"m"].join("")},A.getTopojsonPath=function(_,m){return _+m+".json"},A.getTopojsonFeatures=function(_,m){var f=M[_.locationmode],o=m.objects[f];return l(m,o).features}},37815:function($){$.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},92177:function($){$.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},14458:function($,P,t){var A=t(73972);$.exports=function(M){for(var l,_,m=A.layoutArrayContainers,f=A.layoutArrayRegexes,o=M.split("[")[0],e=0;e<f.length;e++)if((_=M.match(f[e]))&&_.index===0){l=_[0];break}if(l||(l=m[m.indexOf(o)]),!l)return!1;var i=M.substr(l.length);return i?!!(_=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:l,index:Number(_[1]),property:_[3]||""}:{array:l,index:"",property:""}}},30962:function($,P,t){var A=t(1426).extendFlat,M=t(41965),l={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},_={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},m=l.flags.slice().concat(["fullReplot"]),f=_.flags.slice().concat("layoutReplot");function o(r){for(var n={},s=0;s<r.length;s++)n[r[s]]=!1;return n}function e(r,n,s){var a=A({},r);for(var u in a){var p=a[u];M(p)&&(a[u]=i(p,n,0,u))}return s==="from-root"&&(a.editType=n),a}function i(r,n,s,a){if(r.valType){var u=A({},r);if(u.editType=n,Array.isArray(r.items)){u.items=new Array(r.items.length);for(var p=0;p<r.items.length;p++)u.items[p]=i(r.items[p],n)}return u}return e(r,n,a.charAt(0)==="_"?"nested":"from-root")}$.exports={traces:l,layout:_,traceFlags:function(){return o(m)},layoutFlags:function(){return o(f)},update:function(r,n){var s=n.editType;if(s&&s!=="none")for(var a=s.split("+"),u=0;u<a.length;u++)r[a[u]]=!0},overrideAll:e}},58377:function($,P,t){var A=t(92770),M=t(27812),l=t(73972),_=t(71828),m=t(74875),f=t(41675),o=t(7901),e=f.cleanId,i=f.getFromTrace,r=l.traceIs;function n(b,v){var y=b[v],w=v.charAt(0);y&&y!=="paper"&&(b[v]=e(y,w,!0))}function s(b){function v(y,w){var d=b[y],S=b.title&&b.title[w];d&&!S&&(b.title||(b.title={}),b.title[w]=b[y],delete b[y])}b&&(typeof b.title!="string"&&typeof b.title!="number"||(b.title={text:b.title}),v("titlefont","font"),v("titleposition","position"),v("titleside","side"),v("titleoffset","offset"))}function a(b){if(!_.isPlainObject(b))return!1;var v=b.name;return delete b.name,delete b.showlegend,(typeof v=="string"||typeof v=="number")&&String(v)}function u(b,v,y,w){if(y&&!w)return b;if(w&&!y||!b.trim())return v;if(!v.trim())return b;var d,S=Math.min(b.length,v.length);for(d=0;d<S&&b.charAt(d)===v.charAt(d);d++);return b.substr(0,d).trim()}function p(b){var v="middle",y="center";return typeof b=="string"&&(b.indexOf("top")!==-1?v="top":b.indexOf("bottom")!==-1&&(v="bottom"),b.indexOf("left")!==-1?y="left":b.indexOf("right")!==-1&&(y="right")),v+" "+y}function c(b,v){return v in b&&typeof b[v]=="object"&&Object.keys(b[v]).length===0}P.clearPromiseQueue=function(b){Array.isArray(b._promises)&&b._promises.length>0&&_.log("Clearing previous rejected promises from queue."),b._promises=[]},P.cleanLayout=function(b){var v,y;b||(b={}),b.xaxis1&&(b.xaxis||(b.xaxis=b.xaxis1),delete b.xaxis1),b.yaxis1&&(b.yaxis||(b.yaxis=b.yaxis1),delete b.yaxis1),b.scene1&&(b.scene||(b.scene=b.scene1),delete b.scene1);var w=(m.subplotsRegistry.cartesian||{}).attrRegex,d=(m.subplotsRegistry.polar||{}).attrRegex,S=(m.subplotsRegistry.ternary||{}).attrRegex,T=(m.subplotsRegistry.gl3d||{}).attrRegex,E=Object.keys(b);for(v=0;v<E.length;v++){var C=E[v];if(w&&w.test(C)){var L=b[C];L.anchor&&L.anchor!=="free"&&(L.anchor=e(L.anchor)),L.overlaying&&(L.overlaying=e(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":L.isdate===!1&&L.islog===!1&&(L.type="linear")),L.autorange!=="withzero"&&L.autorange!=="tozero"||(L.autorange=!0,L.rangemode="tozero"),L.insiderange&&delete L.range,delete L.islog,delete L.isdate,delete L.categories,c(L,"domain")&&delete L.domain,L.autotick!==void 0&&(L.tickmode===void 0&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),s(L)}else if(d&&d.test(C))s(b[C].radialaxis);else if(S&&S.test(C)){var O=b[C];s(O.aaxis),s(O.baxis),s(O.caxis)}else if(T&&T.test(C)){var z=b[C],G=z.cameraposition;if(Array.isArray(G)&&G[0].length===4){var I=G[0],H=G[1],N=G[2],F=M([],I),V=[];for(y=0;y<3;++y)V[y]=H[y]+N*F[2+4*y];z.camera={eye:{x:V[0],y:V[1],z:V[2]},center:{x:H[0],y:H[1],z:H[2]},up:{x:0,y:0,z:1}},delete z.cameraposition}s(z.xaxis),s(z.yaxis),s(z.zaxis)}}var W=Array.isArray(b.annotations)?b.annotations.length:0;for(v=0;v<W;v++){var te=b.annotations[v];_.isPlainObject(te)&&(te.ref&&(te.ref==="paper"?(te.xref="paper",te.yref="paper"):te.ref==="data"&&(te.xref="x",te.yref="y"),delete te.ref),n(te,"xref"),n(te,"yref"))}var Q=Array.isArray(b.shapes)?b.shapes.length:0;for(v=0;v<Q;v++){var X=b.shapes[v];_.isPlainObject(X)&&(n(X,"xref"),n(X,"yref"))}var q=Array.isArray(b.images)?b.images.length:0;for(v=0;v<q;v++){var Z=b.images[v];_.isPlainObject(Z)&&(n(Z,"xref"),n(Z,"yref"))}var J=b.legend;return J&&(J.x>3?(J.x=1.02,J.xanchor="left"):J.x<-2&&(J.x=-.02,J.xanchor="right"),J.y>3?(J.y=1.02,J.yanchor="bottom"):J.y<-2&&(J.y=-.02,J.yanchor="top")),s(b),b.dragmode==="rotate"&&(b.dragmode="orbit"),o.clean(b),b.template&&b.template.layout&&P.cleanLayout(b.template.layout),b},P.cleanData=function(b){for(var v=0;v<b.length;v++){var y,w=b[v];if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var d=o.defaults,S=w.error_y.color||(r(w,"bar")?o.defaultLine:d[v%d.length]);w.error_y.color=o.addOpacity(o.rgb(S),o.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir!=="h"||!r(w,"bar")&&w.type.substr(0,9)!=="histogram"||(w.orientation="h",P.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&P.swapXYData(w),w.type!=="histogramx"&&w.type!=="histogramy"||(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=e(w.xaxis,"x")),w.yaxis&&(w.yaxis=e(w.yaxis,"y")),r(w,"gl3d")&&w.scene&&(w.scene=m.subplotsRegistry.gl3d.cleanId(w.scene)),!r(w,"pie-like")&&!r(w,"bar-like"))if(Array.isArray(w.textposition))for(y=0;y<w.textposition.length;y++)w.textposition[y]=p(w.textposition[y]);else w.textposition&&(w.textposition=p(w.textposition));var T=l.getModule(w);if(T&&T.colorbar){var E=T.colorbar.container,C=E?w[E]:w;C&&C.colorscale&&(C.colorscale==="YIGnBu"&&(C.colorscale="YlGnBu"),C.colorscale==="YIOrRd"&&(C.colorscale="YlOrRd"))}if(w.type==="surface"&&_.isPlainObject(w.contours)){var L=["x","y","z"];for(y=0;y<L.length;y++){var O=w.contours[L[y]];_.isPlainObject(O)&&(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var z=(w.increasing||{}).showlegend!==!1,G=(w.decreasing||{}).showlegend!==!1,I=a(w.increasing),H=a(w.decreasing);if(I!==!1&&H!==!1){var N=u(I,H,z,G);N&&(w.name=N)}else!I&&!H||w.name||(w.name=I||H)}if(Array.isArray(w.transforms)){var F=w.transforms;for(y=0;y<F.length;y++){var V=F[y];if(_.isPlainObject(V))switch(V.type){case"filter":V.filtersrc&&(V.target=V.filtersrc,delete V.filtersrc),V.calendar&&(V.valuecalendar||(V.valuecalendar=V.calendar),delete V.calendar);break;case"groupby":if(V.styles=V.styles||V.style,V.styles&&!Array.isArray(V.styles)){var W=V.styles,te=Object.keys(W);V.styles=[];for(var Q=0;Q<te.length;Q++)V.styles.push({target:te[Q],value:W[te[Q]]})}}}}c(w,"line")&&delete w.line,"marker"in w&&(c(w.marker,"line")&&delete w.marker.line,c(w,"marker")&&delete w.marker),o.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),s(w),w.colorbar&&s(w.colorbar),w.marker&&w.marker.colorbar&&s(w.marker.colorbar),w.line&&w.line.colorbar&&s(w.line.colorbar),w.aaxis&&s(w.aaxis),w.baxis&&s(w.baxis)}},P.swapXYData=function(b){var v;if(_.swapAttrs(b,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(b.z)&&Array.isArray(b.z[0])&&(b.transpose?delete b.transpose:b.transpose=!0),b.error_x&&b.error_y){var y=b.error_y,w="copy_ystyle"in y?y.copy_ystyle:!(y.color||y.thickness||y.width);_.swapAttrs(b,["error_?.copy_ystyle"]),w&&_.swapAttrs(b,["error_?.color","error_?.thickness","error_?.width"])}if(typeof b.hoverinfo=="string"){var d=b.hoverinfo.split("+");for(v=0;v<d.length;v++)d[v]==="x"?d[v]="y":d[v]==="y"&&(d[v]="x");b.hoverinfo=d.join("+")}},P.coerceTraceIndices=function(b,v){if(A(v))return[v];if(!Array.isArray(v)||!v.length)return b.data.map(function(d,S){return S});if(Array.isArray(v)){for(var y=[],w=0;w<v.length;w++)_.isIndex(v[w],b.data.length)?y.push(v[w]):_.warn("trace index (",v[w],") is not a number or is out of bounds");return y}return v},P.manageArrayContainers=function(b,v,y){var w=b.obj,d=b.parts,S=d.length,T=d[S-1],E=A(T);if(E&&v===null){var C=d.slice(0,S-1).join(".");_.nestedProperty(w,C).get().splice(T,1)}else E&&b.get()===void 0&&b.get()===void 0&&(y[b.astr]=null),b.set(v)};var x=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(b){var v=b.search(x);if(v>0)return b.substr(0,v)}P.hasParent=function(b,v){for(var y=g(v);y;){if(y in b)return!0;y=g(y)}return!1};var h=["x","y","z"];P.clearAxisTypes=function(b,v,y){for(var w=0;w<v.length;w++)for(var d=b._fullData[w],S=0;S<3;S++){var T=i(b,d,h[S]);if(T&&T.type!=="log"){var E=T._name,C=T._id.substr(1);if(C.substr(0,5)==="scene"){if(y[C]!==void 0)continue;E=C+"."+E}var L=E+".type";y[E]===void 0&&y[L]===void 0&&_.nestedProperty(b.layout,L).set(null)}}}},10641:function($,P,t){var A=t(72391);P._doPlot=A._doPlot,P.newPlot=A.newPlot,P.restyle=A.restyle,P.relayout=A.relayout,P.redraw=A.redraw,P.update=A.update,P._guiRestyle=A._guiRestyle,P._guiRelayout=A._guiRelayout,P._guiUpdate=A._guiUpdate,P._storeDirectGUIEdit=A._storeDirectGUIEdit,P.react=A.react,P.extendTraces=A.extendTraces,P.prependTraces=A.prependTraces,P.addTraces=A.addTraces,P.deleteTraces=A.deleteTraces,P.moveTraces=A.moveTraces,P.purge=A.purge,P.addFrames=A.addFrames,P.deleteFrames=A.deleteFrames,P.animate=A.animate,P.setPlotConfig=A.setPlotConfig;var M=t(24401).getGraphDiv,l=t(34031).eraseActiveShape;P.deleteActiveShape=function(m){return l(M(m))},P.toImage=t(403),P.validate=t(84936),P.downloadImage=t(7239);var _=t(96318);P.makeTemplate=_.makeTemplate,P.validateTemplate=_.validateTemplate},6611:function($,P,t){var A=t(41965),M=t(64213),l=t(47769),_=t(65888).sorterAsc,m=t(73972);P.containerArrayMatch=t(14458);var f=P.isAddVal=function(e){return e==="add"||A(e)},o=P.isRemoveVal=function(e){return e===null||e==="remove"};P.applyContainerArrayChanges=function(e,i,r,n,s){var a=i.astr,u=m.getComponentMethod(a,"supplyLayoutDefaults"),p=m.getComponentMethod(a,"draw"),c=m.getComponentMethod(a,"drawOne"),x=n.replot||n.recalc||u===M||p===M,g=e.layout,h=e._fullLayout;if(r[""]){Object.keys(r).length>1&&l.warn("Full array edits are incompatible with other edits",a);var b=r[""][""];if(o(b))i.set(null);else{if(!Array.isArray(b))return l.warn("Unrecognized full array edit value",a,b),!0;i.set(b)}return!x&&(u(g,h),p(e),!0)}var v,y,w,d,S,T,E,C,L=Object.keys(r).map(Number).sort(_),O=i.get(),z=O||[],G=s(h,a).get(),I=[],H=-1,N=z.length;for(v=0;v<L.length;v++)if(d=r[w=L[v]],S=Object.keys(d),T=d[""],E=f(T),w<0||w>z.length-(E?0:1))l.warn("index out of range",a,w);else if(T!==void 0)S.length>1&&l.warn("Insertion & removal are incompatible with edits to the same index.",a,w),o(T)?I.push(w):E?(T==="add"&&(T={}),z.splice(w,0,T),G&&G.splice(w,0,{})):l.warn("Unrecognized full object edit value",a,w,T),H===-1&&(H=w);else for(y=0;y<S.length;y++)C=a+"["+w+"].",s(z[w],S[y],C).set(d[S[y]]);for(v=I.length-1;v>=0;v--)z.splice(I[v],1),G&&G.splice(I[v],1);if(z.length?O||i.set(z):i.set(null),x)return!1;if(u(g,h),c!==M){var F;if(H===-1)F=L;else{for(N=Math.max(z.length,N),F=[],v=0;v<L.length&&!((w=L[v])>=H);v++)F.push(w);for(v=H;v<N;v++)F.push(v)}for(v=0;v<F.length;v++)c(e,F[v])}else p(e);return!0}},72391:function($,P,t){var A=t(39898),M=t(92770),l=t(57035),_=t(71828),m=_.nestedProperty,f=t(11086),o=t(10847),e=t(73972),i=t(86281),r=t(74875),n=t(89298),s=t(23608),a=t(13838),u=t(91424),p=t(7901),c=t(4305).initInteractions,x=t(77922),g=t(47322).clearOutline,h=t(72075).dfltConfig,b=t(6611),v=t(58377),y=t(61549),w=t(30962),d=t(85555).AX_NAME_PATTERN,S=0;function T(Me){var be=Me._fullLayout;be._redrawFromAutoMarginCount?be._redrawFromAutoMarginCount--:Me.emit("plotly_afterplot")}function E(Me,be){try{Me._fullLayout._paper.style("background",be)}catch(Ie){_.error(Ie)}}function C(Me,be){E(Me,p.combine(be,"white"))}function L(Me,be){if(!Me._context){Me._context=_.extendDeep({},h);var Ie=A.select("base");Me._context._baseUrl=Ie.size()&&Ie.attr("href")?window.location.href.split("#")[0]:""}var Be,ce,Te,ye=Me._context;if(be){for(ce=Object.keys(be),Be=0;Be<ce.length;Be++)(Te=ce[Be])!=="editable"&&Te!=="edits"&&Te in ye&&(Te==="setBackground"&&be[Te]==="opaque"?ye[Te]=C:ye[Te]=be[Te]);be.plot3dPixelRatio&&!ye.plotGlPixelRatio&&(ye.plotGlPixelRatio=ye.plot3dPixelRatio);var Pe=be.editable;if(Pe!==void 0)for(ye.editable=Pe,ce=Object.keys(ye.edits),Be=0;Be<ce.length;Be++)ye.edits[ce[Be]]=Pe;if(be.edits)for(ce=Object.keys(be.edits),Be=0;Be<ce.length;Be++)(Te=ce[Be])in ye.edits&&(ye.edits[Te]=be.edits[Te]);ye._exportedPlot=be._exportedPlot}ye.staticPlot&&(ye.editable=!1,ye.edits={},ye.autosizable=!1,ye.scrollZoom=!1,ye.doubleClick=!1,ye.showTips=!1,ye.showLink=!1,ye.displayModeBar=!1),ye.displayModeBar!=="hover"||l||(ye.displayModeBar=!0),ye.setBackground!=="transparent"&&typeof ye.setBackground=="function"||(ye.setBackground=E),ye._hasZeroHeight=ye._hasZeroHeight||Me.clientHeight===0,ye._hasZeroWidth=ye._hasZeroWidth||Me.clientWidth===0;var Re=ye.scrollZoom,ze=ye._scrollZoom={};if(Re===!0)ze.cartesian=1,ze.gl3d=1,ze.geo=1,ze.mapbox=1;else if(typeof Re=="string"){var He=Re.split("+");for(Be=0;Be<He.length;Be++)ze[He[Be]]=1}else Re!==!1&&(ze.gl3d=1,ze.geo=1,ze.mapbox=1)}function O(Me,be){var Ie,Be,ce=be+1,Te=[];for(Ie=0;Ie<Me.length;Ie++)(Be=Me[Ie])<0?Te.push(ce+Be):Te.push(Be);return Te}function z(Me,be,Ie){var Be,ce;for(Be=0;Be<be.length;Be++){if((ce=be[Be])!==parseInt(ce,10))throw new Error("all values in "+Ie+" must be integers");if(ce>=Me.data.length||ce<-Me.data.length)throw new Error(Ie+" must be valid indices for gd.data.");if(be.indexOf(ce,Be+1)>-1||ce>=0&&be.indexOf(-Me.data.length+ce)>-1||ce<0&&be.indexOf(Me.data.length+ce)>-1)throw new Error("each index in "+Ie+" must be unique.")}}function G(Me,be,Ie){if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(be===void 0)throw new Error("currentIndices is a required argument.");if(Array.isArray(be)||(be=[be]),z(Me,be,"currentIndices"),Ie===void 0||Array.isArray(Ie)||(Ie=[Ie]),Ie!==void 0&&z(Me,Ie,"newIndices"),Ie!==void 0&&be.length!==Ie.length)throw new Error("current and new indices must be of equal length.")}function I(Me,be,Ie,Be,ce){(function(Je,lt,et,yt){var _t=_.isPlainObject(yt);if(!Array.isArray(Je.data))throw new Error("gd.data must be an array");if(!_.isPlainObject(lt))throw new Error("update must be a key:value object");if(et===void 0)throw new Error("indices must be an integer or array of integers");for(var xt in z(Je,et,"indices"),lt){if(!Array.isArray(lt[xt])||lt[xt].length!==et.length)throw new Error("attribute "+xt+" must be an array of length equal to indices array length");if(_t&&(!(xt in yt)||!Array.isArray(yt[xt])||yt[xt].length!==lt[xt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}})(Me,be,Ie,Be);for(var Te=function(Je,lt,et,yt){var _t,xt,at,ot,At,Ct=_.isPlainObject(yt),zt=[];for(var St in Array.isArray(et)||(et=[et]),et=O(et,Je.data.length-1),lt)for(var qe=0;qe<et.length;qe++){if(_t=Je.data[et[qe]],xt=(at=m(_t,St)).get(),ot=lt[St][qe],!_.isArrayOrTypedArray(ot))throw new Error("attribute: "+St+" index: "+qe+" must be an array");if(!_.isArrayOrTypedArray(xt))throw new Error("cannot extend missing or non-array attribute: "+St);if(xt.constructor!==ot.constructor)throw new Error("cannot extend array with an array of a different type: "+St);At=Ct?yt[St][qe]:yt,M(At)||(At=-1),zt.push({prop:at,target:xt,insert:ot,maxp:Math.floor(At)})}return zt}(Me,be,Ie,Be),ye={},Pe={},Re=0;Re<Te.length;Re++){var ze=Te[Re].prop,He=Te[Re].maxp,We=ce(Te[Re].target,Te[Re].insert,He);ze.set(We[0]),Array.isArray(ye[ze.astr])||(ye[ze.astr]=[]),ye[ze.astr].push(We[1]),Array.isArray(Pe[ze.astr])||(Pe[ze.astr]=[]),Pe[ze.astr].push(Te[Re].target.length)}return{update:ye,maxPoints:Pe}}function H(Me,be){var Ie=new Me.constructor(Me.length+be.length);return Ie.set(Me),Ie.set(be,Me.length),Ie}function N(Me,be,Ie,Be){Me=_.getGraphDiv(Me),v.clearPromiseQueue(Me);var ce={};if(typeof be=="string")ce[be]=Ie;else{if(!_.isPlainObject(be))return _.warn("Restyle fail.",be,Ie,Be),Promise.reject();ce=_.extendFlat({},be),Be===void 0&&(Be=Ie)}Object.keys(ce).length&&(Me.changed=!0);var Te=v.coerceTraceIndices(Me,Be),ye=te(Me,ce,Te),Pe=ye.flags;Pe.calc&&(Me.calcdata=void 0),Pe.clearAxisTypes&&v.clearAxisTypes(Me,Te,{});var Re=[];Pe.fullReplot?Re.push(P._doPlot):(Re.push(r.previousPromises),r.supplyDefaults(Me),Pe.markerSize&&(r.doCalcdata(Me),Z(Re)),Pe.style&&Re.push(y.doTraceStyle),Pe.colorbars&&Re.push(y.doColorBars),Re.push(T)),Re.push(r.rehover,r.redrag,r.reselect),o.add(Me,N,[Me,ye.undoit,ye.traces],N,[Me,ye.redoit,ye.traces]);var ze=_.syncOrAsync(Re,Me);return ze&&ze.then||(ze=Promise.resolve()),ze.then(function(){return Me.emit("plotly_restyle",ye.eventData),Me})}function F(Me){return Me===void 0?null:Me}function V(Me,be){return be?function(Ie,Be,ce){var Te=m(Ie,Be),ye=Te.set;return Te.set=function(Pe){W((ce||"")+Be,Te.get(),Pe,Me),ye(Pe)},Te}:m}function W(Me,be,Ie,Be){if(Array.isArray(be)||Array.isArray(Ie))for(var ce=Array.isArray(be)?be:[],Te=Array.isArray(Ie)?Ie:[],ye=Math.max(ce.length,Te.length),Pe=0;Pe<ye;Pe++)W(Me+"["+Pe+"]",ce[Pe],Te[Pe],Be);else if(_.isPlainObject(be)||_.isPlainObject(Ie)){var Re=_.isPlainObject(be)?be:{},ze=_.isPlainObject(Ie)?Ie:{},He=_.extendFlat({},Re,ze);for(var We in He)W(Me+"."+We,Re[We],ze[We],Be)}else Be[Me]===void 0&&(Be[Me]=F(be))}function te(Me,be,Ie){var Be,ce=Me._fullLayout,Te=Me._fullData,ye=Me.data,Pe=ce._guiEditing,Re=V(ce._preGUI,Pe),ze=_.extendDeepAll({},be);Q(be);var He,We=w.traceFlags(),Je={},lt={};function et(){return Ie.map(function(){})}function yt(Wt){var Yt=n.id2name(Wt);He.indexOf(Yt)===-1&&He.push(Yt)}function _t(Wt){return"LAYOUT"+Wt+".autorange"}function xt(Wt){return"LAYOUT"+Wt+".range"}function at(Wt){for(var Yt=Wt;Yt<Te.length;Yt++)if(Te[Yt]._input===ye[Wt])return Te[Yt]}function ot(Wt,Yt,en){if(Array.isArray(Wt))Wt.forEach(function(mn){ot(mn,Yt,en)});else if(!(Wt in be)&&!v.hasParent(be,Wt)){var Tn;if(Wt.substr(0,6)==="LAYOUT")Tn=Re(Me.layout,Wt.replace("LAYOUT",""));else{var Bn=Ie[en];Tn=V(ce._tracePreGUI[at(Bn)._fullInput.uid],Pe)(ye[Bn],Wt)}Wt in lt||(lt[Wt]=et()),lt[Wt][en]===void 0&&(lt[Wt][en]=F(Tn.get())),Yt!==void 0&&Tn.set(Yt)}}function At(Wt){return function(Yt){return Te[Yt][Wt]}}function Ct(Wt){return function(Yt,en){return Yt===!1?Te[Ie[en]][Wt]:null}}for(var zt in be){if(v.hasParent(be,zt))throw new Error("cannot set "+zt+" and a parent attribute simultaneously");var St,qe,Xe,Ve,Ze,st,nt=be[zt];if(zt!=="autobinx"&&zt!=="autobiny"||(zt=zt.charAt(zt.length-1)+"bins",nt=Array.isArray(nt)?nt.map(Ct(zt)):nt===!1?Ie.map(At(zt)):null),Je[zt]=nt,zt.substr(0,6)!=="LAYOUT"){for(lt[zt]=et(),Be=0;Be<Ie.length;Be++)if(St=ye[Ie[Be]],qe=at(Ie[Be]),Ve=(Xe=V(ce._tracePreGUI[qe._fullInput.uid],Pe)(St,zt)).get(),(Ze=Array.isArray(nt)?nt[Be%nt.length]:nt)!==void 0){var De=Xe.parts[Xe.parts.length-1],Fe=zt.substr(0,zt.length-De.length-1),rt=Fe?Fe+".":"",tt=Fe?m(qe,Fe).get():qe;if((st=i.getTraceValObject(qe,Xe.parts))&&st.impliedEdits&&Ze!==null)for(var gt in st.impliedEdits)ot(_.relativeAttr(zt,gt),st.impliedEdits[gt],Be);else if(De!=="thicknessmode"&&De!=="lenmode"||Ve===Ze||Ze!=="fraction"&&Ze!=="pixels"||!tt){if(zt==="type"&&(Ze==="pie"!=(Ve==="pie")||Ze==="funnelarea"!=(Ve==="funnelarea"))){var dt="x",mt="y";Ze!=="bar"&&Ve!=="bar"||St.orientation!=="h"||(dt="y",mt="x"),_.swapAttrs(St,["?","?src"],"labels",dt),_.swapAttrs(St,["d?","?0"],"label",dt),_.swapAttrs(St,["?","?src"],"values",mt),Ve==="pie"||Ve==="funnelarea"?(m(St,"marker.color").set(m(St,"marker.colors").get()),ce._pielayer.selectAll("g.trace").remove()):e.traceIs(St,"cartesian")&&m(St,"marker.colors").set(m(St,"marker.color").get())}}else{var ft=ce._size,kt=tt.orient,ht=kt==="top"||kt==="bottom";if(De==="thicknessmode"){var pt=ht?ft.h:ft.w;ot(rt+"thickness",tt.thickness*(Ze==="fraction"?1/pt:pt),Be)}else{var wt=ht?ft.w:ft.h;ot(rt+"len",tt.len*(Ze==="fraction"?1/wt:wt),Be)}}if(lt[zt][Be]=F(Ve),["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(zt)!==-1){if(zt==="orientation"){Xe.set(Ze);var Ft=St.x&&!St.y?"h":"v";if((Xe.get()||Ft)===qe.orientation)continue}else zt==="orientationaxes"&&(St.orientation={v:"h",h:"v"}[qe.orientation]);v.swapXYData(St),We.calc=We.clearAxisTypes=!0}else r.dataArrayContainers.indexOf(Xe.parts[0])!==-1?(v.manageArrayContainers(Xe,Ze,lt),We.calc=!0):(st?st.arrayOk&&!e.traceIs(qe,"regl")&&(_.isArrayOrTypedArray(Ze)||_.isArrayOrTypedArray(Ve))?We.calc=!0:w.update(We,st):We.calc=!0,Xe.set(Ze))}if(["swapxyaxes","orientationaxes"].indexOf(zt)!==-1&&n.swap(Me,Ie),zt==="orientationaxes"){var Nt=m(Me.layout,"hovermode"),Gt=Nt.get();Gt==="x"?Nt.set("y"):Gt==="y"?Nt.set("x"):Gt==="x unified"?Nt.set("y unified"):Gt==="y unified"&&Nt.set("x unified")}if(["orientation","type"].indexOf(zt)!==-1){for(He=[],Be=0;Be<Ie.length;Be++){var an=ye[Ie[Be]];e.traceIs(an,"cartesian")&&(yt(an.xaxis||"x"),yt(an.yaxis||"y"))}ot(He.map(_t),!0,0),ot(He.map(xt),[0,1],0)}}else Xe=Re(Me.layout,zt.replace("LAYOUT","")),lt[zt]=[F(Xe.get())],Xe.set(Array.isArray(nt)?nt[0]:nt),We.calc=!0}return(We.calc||We.plot)&&(We.fullReplot=!0),{flags:We,undoit:lt,redoit:Je,traces:Ie,eventData:_.extendDeepNoArrays([],[ze,Ie])}}function Q(Me){var be,Ie,Be,ce=_.counterRegex("axis",".title",!1,!1),Te=/colorbar\.title$/,ye=Object.keys(Me);for(be=0;be<ye.length;be++)Ie=ye[be],Be=Me[Ie],Ie!=="title"&&!ce.test(Ie)&&!Te.test(Ie)||typeof Be!="string"&&typeof Be!="number"?Ie.indexOf("titlefont")>-1&&Ie.indexOf("grouptitlefont")===-1?Pe(Ie,Ie.replace("titlefont","title.font")):Ie.indexOf("titleposition")>-1?Pe(Ie,Ie.replace("titleposition","title.position")):Ie.indexOf("titleside")>-1?Pe(Ie,Ie.replace("titleside","title.side")):Ie.indexOf("titleoffset")>-1&&Pe(Ie,Ie.replace("titleoffset","title.offset")):Pe(Ie,Ie.replace("title","title.text"));function Pe(Re,ze){Me[ze]=Me[Re],delete Me[Re]}}function X(Me,be,Ie){Me=_.getGraphDiv(Me),v.clearPromiseQueue(Me);var Be={};if(typeof be=="string")Be[be]=Ie;else{if(!_.isPlainObject(be))return _.warn("Relayout fail.",be,Ie),Promise.reject();Be=_.extendFlat({},be)}Object.keys(Be).length&&(Me.changed=!0);var ce=ae(Me,Be),Te=ce.flags;Te.calc&&(Me.calcdata=void 0);var ye=[r.previousPromises];Te.layoutReplot?ye.push(y.layoutReplot):Object.keys(Be).length&&(q(Me,Te,ce)||r.supplyDefaults(Me),Te.legend&&ye.push(y.doLegend),Te.layoutstyle&&ye.push(y.layoutStyles),Te.axrange&&Z(ye,ce.rangesAltered),Te.ticks&&ye.push(y.doTicksRelayout),Te.modebar&&ye.push(y.doModeBar),Te.camera&&ye.push(y.doCamera),Te.colorbars&&ye.push(y.doColorBars),ye.push(T)),ye.push(r.rehover,r.redrag,r.reselect),o.add(Me,X,[Me,ce.undoit],X,[Me,ce.redoit]);var Pe=_.syncOrAsync(ye,Me);return Pe&&Pe.then||(Pe=Promise.resolve(Me)),Pe.then(function(){return Me.emit("plotly_relayout",ce.eventData),Me})}function q(Me,be,Ie){var Be,ce,Te=Me._fullLayout;if(!be.axrange)return!1;for(var ye in be)if(ye!=="axrange"&&be[ye])return!1;var Pe=function(lt,et){return _.coerce(Be,ce,a,lt,et)},Re={};for(var ze in Ie.rangesAltered){var He=n.id2name(ze);if(Be=Me.layout[He],ce=Te[He],s(Be,ce,Pe,Re),ce._matchGroup){for(var We in ce._matchGroup)if(We!==ze){var Je=Te[n.id2name(We)];Je.autorange=ce.autorange,Je.range=ce.range.slice(),Je._input.range=ce.range.slice()}}}return!0}function Z(Me,be){var Ie=be?function(Be){var ce=[];for(var Te in be){var ye=n.getFromId(Be,Te);if(ce.push(Te),(ye.ticklabelposition||"").indexOf("inside")!==-1&&ye._anchorAxis&&ce.push(ye._anchorAxis._id),ye._matchGroup)for(var Pe in ye._matchGroup)be[Pe]||ce.push(Pe)}return n.draw(Be,ce,{skipTitle:!0})}:function(Be){return n.draw(Be,"redraw")};Me.push(g,y.doAutoRangeAndConstraints,Ie,y.drawData,y.finalDraw)}var J=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ne=/^[xyz]axis[0-9]*\.autorange$/,re=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ae(Me,be){var Ie,Be,ce,Te=Me.layout,ye=Me._fullLayout,Pe=ye._guiEditing,Re=V(ye._preGUI,Pe),ze=Object.keys(be),He=n.list(Me),We=_.extendDeepAll({},be),Je={};for(Q(be),ze=Object.keys(be),Be=0;Be<ze.length;Be++)if(ze[Be].indexOf("allaxes")===0){for(ce=0;ce<He.length;ce++){var lt=He[ce]._id.substr(1),et=lt.indexOf("scene")!==-1?lt+".":"",yt=ze[Be].replace("allaxes",et+He[ce]._name);be[yt]||(be[yt]=be[ze[Be]])}delete be[ze[Be]]}var _t=w.layoutFlags(),xt={},at={};function ot(mn,Kt){if(Array.isArray(mn))mn.forEach(function(tn){ot(tn,Kt)});else if(!(mn in be)&&!v.hasParent(be,mn)){var cn=Re(Te,mn);mn in at||(at[mn]=F(cn.get())),Kt!==void 0&&cn.set(Kt)}}var At,Ct={};function zt(mn){var Kt=n.name2id(mn.split(".")[0]);return Ct[Kt]=1,Kt}for(var St in be){if(v.hasParent(be,St))throw new Error("cannot set "+St+" and a parent attribute simultaneously");for(var qe=Re(Te,St),Xe=be[St],Ve=qe.parts.length-1;Ve>0&&typeof qe.parts[Ve]!="string";)Ve--;var Ze=qe.parts[Ve],st=qe.parts[Ve-1]+"."+Ze,nt=qe.parts.slice(0,Ve).join("."),De=m(Me.layout,nt).get(),Fe=m(ye,nt).get(),rt=qe.get();if(Xe!==void 0){xt[St]=Xe,at[St]=Ze==="reverse"?Xe:F(rt);var tt=i.getLayoutValObject(ye,qe.parts);if(tt&&tt.impliedEdits&&Xe!==null)for(var gt in tt.impliedEdits)ot(_.relativeAttr(St,gt),tt.impliedEdits[gt]);if(["width","height"].indexOf(St)!==-1)if(Xe){ot("autosize",null);var dt=St==="height"?"width":"height";ot(dt,ye[dt])}else ye[St]=Me._initialAutoSize[St];else if(St==="autosize")ot("width",Xe?null:ye.width),ot("height",Xe?null:ye.height);else if(st.match(J))zt(st),m(ye,nt+"._inputRange").set(null);else if(st.match(ne)){zt(st),m(ye,nt+"._inputRange").set(null);var mt=m(ye,nt).get();mt._inputDomain&&(mt._input.domain=mt._inputDomain.slice())}else st.match(re)&&m(ye,nt+"._inputDomain").set(null);if(Ze==="type"){At=De;var ft=Fe.type==="linear"&&Xe==="log",kt=Fe.type==="log"&&Xe==="linear";if(ft||kt){if(At&&At.range)if(Fe.autorange)ft&&(At.range=At.range[1]>At.range[0]?[1,2]:[2,1]);else{var ht=At.range[0],pt=At.range[1];ft?(ht<=0&&pt<=0&&ot(nt+".autorange",!0),ht<=0?ht=pt/1e6:pt<=0&&(pt=ht/1e6),ot(nt+".range[0]",Math.log(ht)/Math.LN10),ot(nt+".range[1]",Math.log(pt)/Math.LN10)):(ot(nt+".range[0]",Math.pow(10,ht)),ot(nt+".range[1]",Math.pow(10,pt)))}else ot(nt+".autorange",!0);Array.isArray(ye._subplots.polar)&&ye._subplots.polar.length&&ye[qe.parts[0]]&&qe.parts[1]==="radialaxis"&&delete ye[qe.parts[0]]._subplot.viewInitial["radialaxis.range"],e.getComponentMethod("annotations","convertCoords")(Me,Fe,Xe,ot),e.getComponentMethod("images","convertCoords")(Me,Fe,Xe,ot)}else ot(nt+".autorange",!0),ot(nt+".range",null);m(ye,nt+"._inputRange").set(null)}else if(Ze.match(d)){var wt=m(ye,St).get(),Ft=(Xe||{}).type;Ft&&Ft!=="-"||(Ft="linear"),e.getComponentMethod("annotations","convertCoords")(Me,wt,Ft,ot),e.getComponentMethod("images","convertCoords")(Me,wt,Ft,ot)}var Nt=b.containerArrayMatch(St);if(Nt){Ie=Nt.array,Be=Nt.index;var Gt=Nt.property,an=tt||{editType:"calc"};Be!==""&&Gt===""&&(b.isAddVal(Xe)?at[St]=null:b.isRemoveVal(Xe)?at[St]=(m(Te,Ie).get()||[])[Be]:_.warn("unrecognized full object value",be)),w.update(_t,an),Je[Ie]||(Je[Ie]={});var Wt=Je[Ie][Be];Wt||(Wt=Je[Ie][Be]={}),Wt[Gt]=Xe,delete be[St]}else Ze==="reverse"?(De.range?De.range.reverse():(ot(nt+".autorange",!0),De.range=[1,0]),Fe.autorange?_t.calc=!0:_t.plot=!0):(St==="dragmode"&&(Xe===!1&&rt!==!1||Xe!==!1&&rt===!1)||ye._has("scatter-like")&&ye._has("regl")&&St==="dragmode"&&(Xe==="lasso"||Xe==="select")&&rt!=="lasso"&&rt!=="select"||ye._has("gl2d")?_t.plot=!0:tt?w.update(_t,tt):_t.calc=!0,qe.set(Xe))}}for(Ie in Je)b.applyContainerArrayChanges(Me,Re(Te,Ie),Je[Ie],_t,Re)||(_t.plot=!0);for(var Yt in Ct){var en=(At=n.getFromId(Me,Yt))&&At._constraintGroup;if(en)for(var Tn in _t.calc=!0,en)Ct[Tn]||(n.getFromId(Me,Tn)._constraintShrinkable=!0)}(ue(Me)||be.height||be.width)&&(_t.plot=!0);var Bn=ye.shapes;for(Be=0;Be<Bn.length;Be++)if(Bn[Be].showlegend){_t.calc=!0;break}return(_t.plot||_t.calc)&&(_t.layoutReplot=!0),{flags:_t,rangesAltered:Ct,undoit:at,redoit:xt,eventData:We}}function ue(Me){var be=Me._fullLayout,Ie=be.width,Be=be.height;return Me.layout.autosize&&r.plotAutoSize(Me,Me.layout,be),be.width!==Ie||be.height!==Be}function he(Me,be,Ie,Be){Me=_.getGraphDiv(Me),v.clearPromiseQueue(Me),_.isPlainObject(be)||(be={}),_.isPlainObject(Ie)||(Ie={}),Object.keys(be).length&&(Me.changed=!0),Object.keys(Ie).length&&(Me.changed=!0);var ce=v.coerceTraceIndices(Me,Be),Te=te(Me,_.extendFlat({},be),ce),ye=Te.flags,Pe=ae(Me,_.extendFlat({},Ie)),Re=Pe.flags;(ye.calc||Re.calc)&&(Me.calcdata=void 0),ye.clearAxisTypes&&v.clearAxisTypes(Me,ce,Ie);var ze=[];Re.layoutReplot?ze.push(y.layoutReplot):ye.fullReplot?ze.push(P._doPlot):(ze.push(r.previousPromises),q(Me,Re,Pe)||r.supplyDefaults(Me),ye.style&&ze.push(y.doTraceStyle),(ye.colorbars||Re.colorbars)&&ze.push(y.doColorBars),Re.legend&&ze.push(y.doLegend),Re.layoutstyle&&ze.push(y.layoutStyles),Re.axrange&&Z(ze,Pe.rangesAltered),Re.ticks&&ze.push(y.doTicksRelayout),Re.modebar&&ze.push(y.doModeBar),Re.camera&&ze.push(y.doCamera),ze.push(T)),ze.push(r.rehover,r.redrag,r.reselect),o.add(Me,he,[Me,Te.undoit,Pe.undoit,Te.traces],he,[Me,Te.redoit,Pe.redoit,Te.traces]);var He=_.syncOrAsync(ze,Me);return He&&He.then||(He=Promise.resolve(Me)),He.then(function(){return Me.emit("plotly_update",{data:Te.eventData,layout:Pe.eventData}),Me})}function de(Me){return function(be){be._fullLayout._guiEditing=!0;var Ie=Me.apply(null,arguments);return be._fullLayout._guiEditing=!1,Ie}}var xe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],me=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function ve(Me,be){for(var Ie=0;Ie<be.length;Ie++){var Be=be[Ie],ce=Me.match(Be.pattern);if(ce){var Te=ce[1]||"";return{head:Te,tail:Me.substr(Te.length+1),attr:Be.attr}}}}function Le(Me,be){var Ie=m(be,Me).get();if(Ie!==void 0)return Ie;var Be=Me.split(".");for(Be.pop();Be.length>1;)if(Be.pop(),(Ie=m(be,Be.join(".")+".uirevision").get())!==void 0)return Ie;return be.uirevision}function Ae(Me,be){for(var Ie=0;Ie<be.length;Ie++)if(be[Ie]._fullInput.uid===Me)return Ie;return-1}function we(Me,be,Ie){for(var Be=0;Be<be.length;Be++)if(be[Be].uid===Me)return Be;return!be[Ie]||be[Ie].uid?-1:Ie}function se(Me,be){var Ie=_.isPlainObject(Me),Be=Array.isArray(Me);return Ie||Be?(Ie&&_.isPlainObject(be)||Be&&Array.isArray(be))&&JSON.stringify(Me)===JSON.stringify(be):Me===be}function oe(Me,be,Ie,Be){var ce,Te,ye,Pe=Be.getValObject,Re=Be.flags,ze=Be.immutable,He=Be.inArray,We=Be.arrayIndex;function Je(){var De=ce.editType;He&&De.indexOf("arraydraw")!==-1?_.pushUnique(Re.arrays[He],We):(w.update(Re,ce),De!=="none"&&Re.nChanges++,Be.transition&&ce.anim&&Re.nChangesAnim++,(J.test(ye)||ne.test(ye))&&(Re.rangesAltered[Ie[0]]=1),re.test(ye)&&m(be,"_inputDomain").set(null),Te==="datarevision"&&(Re.newDataRevision=1))}function lt(De){return De.valType==="data_array"||De.arrayOk}for(Te in Me){if(Re.calc&&!Be.transition)return;var et=Me[Te],yt=be[Te],_t=Ie.concat(Te);if(ye=_t.join("."),Te.charAt(0)!=="_"&&typeof et!="function"&&et!==yt){if((Te==="tick0"||Te==="dtick")&&Ie[0]!=="geo"){var xt=be.tickmode;if(xt==="auto"||xt==="array"||!xt)continue}if((Te!=="range"||!be.autorange)&&(Te!=="zmin"&&Te!=="zmax"||be.type!=="contourcarpet")&&(ce=Pe(_t))&&(!ce._compareAsJSON||JSON.stringify(et)!==JSON.stringify(yt))){var at,ot=ce.valType,At=lt(ce),Ct=Array.isArray(et),zt=Array.isArray(yt);if(Ct&&zt){var St="_input_"+Te,qe=Me[St],Xe=be[St];if(Array.isArray(qe)&&qe===Xe)continue}if(yt===void 0)At&&Ct?Re.calc=!0:Je();else if(ce._isLinkedToArray){var Ve=[],Ze=!1;He||(Re.arrays[Te]=Ve);var st=Math.min(et.length,yt.length),nt=Math.max(et.length,yt.length);if(st!==nt){if(ce.editType!=="arraydraw"){Je();continue}Ze=!0}for(at=0;at<st;at++)oe(et[at],yt[at],_t.concat(at),_.extendFlat({inArray:Te,arrayIndex:at},Be));if(Ze)for(at=st;at<nt;at++)Ve.push(at)}else!ot&&_.isPlainObject(et)?oe(et,yt,_t,Be):At?Ct&&zt?(ze&&(Re.calc=!0),(ze||Be.newDataRevision)&&Je()):Ct!==zt?Re.calc=!0:Je():Ct&&zt&&et.length===yt.length&&String(et)===String(yt)||Je()}}}for(Te in be)if(!(Te in Me)&&Te.charAt(0)!=="_"&&typeof be[Te]!="function"){if(lt(ce=Pe(Ie.concat(Te)))&&Array.isArray(be[Te]))return void(Re.calc=!0);Je()}}function fe(Me,be){var Ie;for(Ie in Me)if(Ie.charAt(0)!=="_"){var Be=Me[Ie],ce=be[Ie];if(Be!==ce)if(_.isPlainObject(Be)&&_.isPlainObject(ce)){if(fe(Be,ce))return!0}else{if(!Array.isArray(Be)||!Array.isArray(ce)||Be.length!==ce.length)return!0;for(var Te=0;Te<Be.length;Te++)if(Be[Te]!==ce[Te]&&(!_.isPlainObject(Be[Te])||!_.isPlainObject(ce[Te])||fe(Be[Te],ce[Te])))return!0}}}function Se(Me){var be=Me._fullLayout,Ie=Me.getBoundingClientRect();if(!_.equalDomRects(Ie,be._lastBBox)){var Be=be._invTransform=_.inverseTransformMatrix(_.getFullTransformMatrix(Me));be._invScaleX=Math.sqrt(Be[0][0]*Be[0][0]+Be[0][1]*Be[0][1]+Be[0][2]*Be[0][2]),be._invScaleY=Math.sqrt(Be[1][0]*Be[1][0]+Be[1][1]*Be[1][1]+Be[1][2]*Be[1][2]),be._lastBBox=Ie}}P.animate=function(Me,be,Ie){if(Me=_.getGraphDiv(Me),!_.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Be=Me._transitionData;Be._frameQueue||(Be._frameQueue=[]);var ce=(Ie=r.supplyAnimationDefaults(Ie)).transition,Te=Ie.frame;function ye(ze){return Array.isArray(ce)?ze>=ce.length?ce[0]:ce[ze]:ce}function Pe(ze){return Array.isArray(Te)?ze>=Te.length?Te[0]:Te[ze]:Te}function Re(ze,He){var We=0;return function(){if(ze&&++We===He)return ze()}}return Be._frameWaitingCnt===void 0&&(Be._frameWaitingCnt=0),new Promise(function(ze,He){function We(){Me.emit("plotly_animating"),Be._lastFrameAt=-1/0,Be._timeToNext=0,Be._runningTransitions=0,Be._currentFrame=null;var St=function(){Be._animationRaf=window.requestAnimationFrame(St),Date.now()-Be._lastFrameAt>Be._timeToNext&&function(){Be._currentFrame&&Be._currentFrame.onComplete&&Be._currentFrame.onComplete();var qe=Be._currentFrame=Be._frameQueue.shift();if(qe){var Xe=qe.name?qe.name.toString():null;Me._fullLayout._currentFrame=Xe,Be._lastFrameAt=Date.now(),Be._timeToNext=qe.frameOpts.duration,r.transition(Me,qe.frame.data,qe.frame.layout,v.coerceTraceIndices(Me,qe.frame.traces),qe.frameOpts,qe.transitionOpts).then(function(){qe.onComplete&&qe.onComplete()}),Me.emit("plotly_animatingframe",{name:Xe,frame:qe.frame,animation:{frame:qe.frameOpts,transition:qe.transitionOpts}})}else Me.emit("plotly_animated"),window.cancelAnimationFrame(Be._animationRaf),Be._animationRaf=null}()};St()}var Je,lt,et=0;function yt(St){return Array.isArray(ce)?et>=ce.length?St.transitionOpts=ce[et]:St.transitionOpts=ce[0]:St.transitionOpts=ce,et++,St}var _t=[],xt=be==null,at=Array.isArray(be);if(xt||at||!_.isPlainObject(be)){if(xt||["string","number"].indexOf(typeof be)!==-1)for(Je=0;Je<Be._frames.length;Je++)(lt=Be._frames[Je])&&(xt||String(lt.group)===String(be))&&_t.push({type:"byname",name:String(lt.name),data:yt({name:lt.name})});else if(at)for(Je=0;Je<be.length;Je++){var ot=be[Je];["number","string"].indexOf(typeof ot)!==-1?(ot=String(ot),_t.push({type:"byname",name:ot,data:yt({name:ot})})):_.isPlainObject(ot)&&_t.push({type:"object",data:yt(_.extendFlat({},ot))})}}else _t.push({type:"object",data:yt(_.extendFlat({},be))});for(Je=0;Je<_t.length;Je++)if((lt=_t[Je]).type==="byname"&&!Be._frameHash[lt.data.name])return _.warn('animate failure: frame not found: "'+lt.data.name+'"'),void He();["next","immediate"].indexOf(Ie.mode)!==-1&&function(){if(Be._frameQueue.length!==0){for(;Be._frameQueue.length;){var St=Be._frameQueue.pop();St.onInterrupt&&St.onInterrupt()}Me.emit("plotly_animationinterrupted",[])}}(),Ie.direction==="reverse"&&_t.reverse();var At=Me._fullLayout._currentFrame;if(At&&Ie.fromcurrent){var Ct=-1;for(Je=0;Je<_t.length;Je++)if((lt=_t[Je]).type==="byname"&&lt.name===At){Ct=Je;break}if(Ct>0&&Ct<_t.length-1){var zt=[];for(Je=0;Je<_t.length;Je++)lt=_t[Je],(_t[Je].type!=="byname"||Je>Ct)&&zt.push(lt);_t=zt}}_t.length>0?function(St){if(St.length!==0){for(var qe=0;qe<St.length;qe++){var Xe;Xe=St[qe].type==="byname"?r.computeFrame(Me,St[qe].name):St[qe].data;var Ve=Pe(qe),Ze=ye(qe);Ze.duration=Math.min(Ze.duration,Ve.duration);var st={frame:Xe,name:St[qe].name,frameOpts:Ve,transitionOpts:Ze};qe===St.length-1&&(st.onComplete=Re(ze,2),st.onInterrupt=He),Be._frameQueue.push(st)}Ie.mode==="immediate"&&(Be._lastFrameAt=-1/0),Be._animationRaf||We()}}(_t):(Me.emit("plotly_animated"),ze())})},P.addFrames=function(Me,be,Ie){if(Me=_.getGraphDiv(Me),be==null)return Promise.resolve();if(!_.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Be,ce,Te,ye,Pe=Me._transitionData._frames,Re=Me._transitionData._frameHash;if(!Array.isArray(be))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+be);var ze=Pe.length+2*be.length,He=[],We={};for(Be=be.length-1;Be>=0;Be--)if(_.isPlainObject(be[Be])){var Je=be[Be].name,lt=(Re[Je]||We[Je]||{}).name,et=be[Be].name,yt=Re[lt]||We[lt];lt&&et&&typeof et=="number"&&yt&&S<5&&(S++,_.warn('addFrames: overwriting frame "'+(Re[lt]||We[lt]).name+'" with a frame whose name of type "number" also equates to "'+lt+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===5&&_.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),We[Je]={name:Je},He.push({frame:r.supplyFrameDefaults(be[Be]),index:Ie&&Ie[Be]!==void 0&&Ie[Be]!==null?Ie[Be]:ze+Be})}He.sort(function(St,qe){return St.index>qe.index?-1:St.index<qe.index?1:0});var _t=[],xt=[],at=Pe.length;for(Be=He.length-1;Be>=0;Be--){if(typeof(ce=He[Be].frame).name=="number"&&_.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!ce.name)for(;Re[ce.name="frame "+Me._transitionData._counter++];);if(Re[ce.name]){for(Te=0;Te<Pe.length&&(Pe[Te]||{}).name!==ce.name;Te++);_t.push({type:"replace",index:Te,value:ce}),xt.unshift({type:"replace",index:Te,value:Pe[Te]})}else ye=Math.max(0,Math.min(He[Be].index,at)),_t.push({type:"insert",index:ye,value:ce}),xt.unshift({type:"delete",index:ye}),at++}var ot=r.modifyFrames,At=r.modifyFrames,Ct=[Me,xt],zt=[Me,_t];return o&&o.add(Me,ot,Ct,At,zt),r.modifyFrames(Me,_t)},P.deleteFrames=function(Me,be){if(Me=_.getGraphDiv(Me),!_.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);var Ie,Be,ce=Me._transitionData._frames,Te=[],ye=[];if(!be)for(be=[],Ie=0;Ie<ce.length;Ie++)be.push(Ie);for((be=be.slice()).sort(),Ie=be.length-1;Ie>=0;Ie--)Be=be[Ie],Te.push({type:"delete",index:Be}),ye.unshift({type:"insert",index:Be,value:ce[Be]});var Pe=r.modifyFrames,Re=r.modifyFrames,ze=[Me,ye],He=[Me,Te];return o&&o.add(Me,Pe,ze,Re,He),r.modifyFrames(Me,Te)},P.addTraces=function Me(be,Ie,Be){be=_.getGraphDiv(be);var ce,Te,ye=[],Pe=P.deleteTraces,Re=Me,ze=[be,ye],He=[be,Ie];for(function(We,Je,lt){var et,yt;if(!Array.isArray(We.data))throw new Error("gd.data must be an array.");if(Je===void 0)throw new Error("traces must be defined.");for(Array.isArray(Je)||(Je=[Je]),et=0;et<Je.length;et++)if(typeof(yt=Je[et])!="object"||Array.isArray(yt)||yt===null)throw new Error("all values in traces array must be non-array objects");if(lt===void 0||Array.isArray(lt)||(lt=[lt]),lt!==void 0&&lt.length!==Je.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(be,Ie,Be),Array.isArray(Ie)||(Ie=[Ie]),Ie=Ie.map(function(We){return _.extendFlat({},We)}),v.cleanData(Ie),ce=0;ce<Ie.length;ce++)be.data.push(Ie[ce]);for(ce=0;ce<Ie.length;ce++)ye.push(-Ie.length+ce);if(Be===void 0)return Te=P.redraw(be),o.add(be,Pe,ze,Re,He),Te;Array.isArray(Be)||(Be=[Be]);try{G(be,ye,Be)}catch(We){throw be.data.splice(be.data.length-Ie.length,Ie.length),We}return o.startSequence(be),o.add(be,Pe,ze,Re,He),Te=P.moveTraces(be,ye,Be),o.stopSequence(be),Te},P.deleteTraces=function Me(be,Ie){be=_.getGraphDiv(be);var Be,ce,Te=[],ye=P.addTraces,Pe=Me,Re=[be,Te,Ie],ze=[be,Ie];if(Ie===void 0)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ie)||(Ie=[Ie]),z(be,Ie,"indices"),(Ie=O(Ie,be.data.length-1)).sort(_.sorterDes),Be=0;Be<Ie.length;Be+=1)ce=be.data.splice(Ie[Be],1)[0],Te.push(ce);var He=P.redraw(be);return o.add(be,ye,Re,Pe,ze),He},P.extendTraces=function Me(be,Ie,Be,ce){var Te=I(be=_.getGraphDiv(be),Ie,Be,ce,function(Re,ze,He){var We,Je;if(_.isTypedArray(Re))if(He<0){var lt=new Re.constructor(0),et=H(Re,ze);He<0?(We=et,Je=lt):(We=lt,Je=et)}else if(We=new Re.constructor(He),Je=new Re.constructor(Re.length+ze.length-He),He===ze.length)We.set(ze),Je.set(Re);else if(He<ze.length){var yt=ze.length-He;We.set(ze.subarray(yt)),Je.set(Re),Je.set(ze.subarray(0,yt),Re.length)}else{var _t=He-ze.length,xt=Re.length-_t;We.set(Re.subarray(xt)),We.set(ze,_t),Je.set(Re.subarray(0,xt))}else We=Re.concat(ze),Je=He>=0&&He<We.length?We.splice(0,We.length-He):[];return[We,Je]}),ye=P.redraw(be),Pe=[be,Te.update,Be,Te.maxPoints];return o.add(be,P.prependTraces,Pe,Me,arguments),ye},P.moveTraces=function Me(be,Ie,Be){var ce,Te=[],ye=[],Pe=Me,Re=Me,ze=[be=_.getGraphDiv(be),Be,Ie],He=[be,Ie,Be];if(G(be,Ie,Be),Ie=Array.isArray(Ie)?Ie:[Ie],Be===void 0)for(Be=[],ce=0;ce<Ie.length;ce++)Be.push(-Ie.length+ce);for(Be=Array.isArray(Be)?Be:[Be],Ie=O(Ie,be.data.length-1),Be=O(Be,be.data.length-1),ce=0;ce<be.data.length;ce++)Ie.indexOf(ce)===-1&&Te.push(be.data[ce]);for(ce=0;ce<Ie.length;ce++)ye.push({newIndex:Be[ce],trace:be.data[Ie[ce]]});for(ye.sort(function(Je,lt){return Je.newIndex-lt.newIndex}),ce=0;ce<ye.length;ce+=1)Te.splice(ye[ce].newIndex,0,ye[ce].trace);be.data=Te;var We=P.redraw(be);return o.add(be,Pe,ze,Re,He),We},P.prependTraces=function Me(be,Ie,Be,ce){var Te=I(be=_.getGraphDiv(be),Ie,Be,ce,function(Re,ze,He){var We,Je;if(_.isTypedArray(Re))if(He<=0){var lt=new Re.constructor(0),et=H(ze,Re);He<0?(We=et,Je=lt):(We=lt,Je=et)}else if(We=new Re.constructor(He),Je=new Re.constructor(Re.length+ze.length-He),He===ze.length)We.set(ze),Je.set(Re);else if(He<ze.length){var yt=ze.length-He;We.set(ze.subarray(0,yt)),Je.set(ze.subarray(yt)),Je.set(Re,yt)}else{var _t=He-ze.length;We.set(ze),We.set(Re.subarray(0,_t),ze.length),Je.set(Re.subarray(_t))}else We=ze.concat(Re),Je=He>=0&&He<We.length?We.splice(He,We.length):[];return[We,Je]}),ye=P.redraw(be),Pe=[be,Te.update,Be,Te.maxPoints];return o.add(be,P.extendTraces,Pe,Me,arguments),ye},P.newPlot=function(Me,be,Ie,Be){return Me=_.getGraphDiv(Me),r.cleanPlot([],{},Me._fullData||[],Me._fullLayout||{}),r.purge(Me),P._doPlot(Me,be,Ie,Be)},P._doPlot=function(Me,be,Ie,Be){var ce;if(Me=_.getGraphDiv(Me),f.init(Me),_.isPlainObject(be)){var Te=be;be=Te.data,Ie=Te.layout,Be=Te.config,ce=Te.frames}if(f.triggerHandler(Me,"plotly_beforeplot",[be,Ie,Be])===!1)return Promise.reject();be||Ie||_.isPlotDiv(Me)||_.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Me),L(Me,Be),Ie||(Ie={}),A.select(Me).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(Me._promises)||(Me._promises=[]);var ye=(Me.data||[]).length===0&&Array.isArray(be);Array.isArray(be)&&(v.cleanData(be),ye?Me.data=be:Me.data.push.apply(Me.data,be),Me.empty=!1),Me.layout&&!ye||(Me.layout=v.cleanLayout(Ie)),r.supplyDefaults(Me);var Pe=Me._fullLayout,Re=Pe._has("cartesian");Pe._replotting=!0,(ye||Pe._shouldCreateBgLayer)&&(function(xt){var at=A.select(xt),ot=xt._fullLayout;if(ot._calcInverseTransform=Se,ot._calcInverseTransform(xt),ot._container=at.selectAll(".plot-container").data([0]),ot._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ot._paperdiv=ot._container.selectAll(".svg-container").data([0]),ot._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ot._glcontainer=ot._paperdiv.selectAll(".gl-container").data([{}]),ot._glcontainer.enter().append("div").classed("gl-container",!0),ot._paperdiv.selectAll(".main-svg").remove(),ot._paperdiv.select(".modebar-container").remove(),ot._paper=ot._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ot._toppaper=ot._paperdiv.append("svg").classed("main-svg",!0),ot._modebardiv=ot._paperdiv.append("div"),delete ot._modeBar,ot._hoverpaper=ot._paperdiv.append("svg").classed("main-svg",!0),!ot._uid){var At={};A.selectAll("defs").each(function(){this.id&&(At[this.id.split("-")[1]]=1)}),ot._uid=_.randstr(At)}ot._paperdiv.selectAll(".main-svg").attr(x.svgAttrs),ot._defs=ot._paper.append("defs").attr("id","defs-"+ot._uid),ot._clips=ot._defs.append("g").classed("clips",!0),ot._topdefs=ot._toppaper.append("defs").attr("id","topdefs-"+ot._uid),ot._topclips=ot._topdefs.append("g").classed("clips",!0),ot._bgLayer=ot._paper.append("g").classed("bglayer",!0),ot._draggers=ot._paper.append("g").classed("draglayer",!0);var Ct=ot._paper.append("g").classed("layer-below",!0);ot._imageLowerLayer=Ct.append("g").classed("imagelayer",!0),ot._shapeLowerLayer=Ct.append("g").classed("shapelayer",!0),ot._cartesianlayer=ot._paper.append("g").classed("cartesianlayer",!0),ot._polarlayer=ot._paper.append("g").classed("polarlayer",!0),ot._smithlayer=ot._paper.append("g").classed("smithlayer",!0),ot._ternarylayer=ot._paper.append("g").classed("ternarylayer",!0),ot._geolayer=ot._paper.append("g").classed("geolayer",!0),ot._funnelarealayer=ot._paper.append("g").classed("funnelarealayer",!0),ot._pielayer=ot._paper.append("g").classed("pielayer",!0),ot._iciclelayer=ot._paper.append("g").classed("iciclelayer",!0),ot._treemaplayer=ot._paper.append("g").classed("treemaplayer",!0),ot._sunburstlayer=ot._paper.append("g").classed("sunburstlayer",!0),ot._indicatorlayer=ot._toppaper.append("g").classed("indicatorlayer",!0),ot._glimages=ot._paper.append("g").classed("glimages",!0);var zt=ot._toppaper.append("g").classed("layer-above",!0);ot._imageUpperLayer=zt.append("g").classed("imagelayer",!0),ot._shapeUpperLayer=zt.append("g").classed("shapelayer",!0),ot._selectionLayer=ot._toppaper.append("g").classed("selectionlayer",!0),ot._infolayer=ot._toppaper.append("g").classed("infolayer",!0),ot._menulayer=ot._toppaper.append("g").classed("menulayer",!0),ot._zoomlayer=ot._toppaper.append("g").classed("zoomlayer",!0),ot._hoverlayer=ot._hoverpaper.append("g").classed("hoverlayer",!0),ot._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),xt.emit("plotly_framework")}(Me),Pe._shouldCreateBgLayer&&delete Pe._shouldCreateBgLayer),u.initGradients(Me),u.initPatterns(Me),ye&&n.saveShowSpikeInitial(Me);var ze=!Me.calcdata||Me.calcdata.length!==(Me._fullData||[]).length;ze&&r.doCalcdata(Me);for(var He=0;He<Me.calcdata.length;He++)Me.calcdata[He][0].trace=Me._fullData[He];Me._context.responsive?Me._responsiveChartHandler||(Me._responsiveChartHandler=function(){_.isHidden(Me)||r.resize(Me)},window.addEventListener("resize",Me._responsiveChartHandler)):_.clearResponsive(Me);var We=_.extendFlat({},Pe._size),Je=0;function lt(){if(r.clearAutoMarginIds(Me),y.drawMarginPushers(Me),n.allowAutoMargin(Me),Me._fullLayout.title.text&&Me._fullLayout.title.automargin&&r.allowAutoMargin(Me,"title.automargin"),Pe._has("pie"))for(var xt=Me._fullData,at=0;at<xt.length;at++){var ot=xt[at];ot.type==="pie"&&ot.automargin&&r.allowAutoMargin(Me,"pie."+ot.uid+".automargin")}return r.doAutoMargin(Me),r.previousPromises(Me)}function et(){Me._transitioning||(y.doAutoRangeAndConstraints(Me),ye&&n.saveRangeInitial(Me),e.getComponentMethod("rangeslider","calcAutorange")(Me))}var yt=[r.previousPromises,function(){if(ce)return P.addFrames(Me,ce)},function xt(){for(var at=Pe._basePlotModules,ot=0;ot<at.length;ot++)at[ot].drawFramework&&at[ot].drawFramework(Me);!Pe._glcanvas&&Pe._has("gl")&&(Pe._glcanvas=Pe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(St){return St.key}),Pe._glcanvas.enter().append("canvas").attr("class",function(St){return"gl-canvas gl-canvas-"+St.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var At=Me._context.plotGlPixelRatio;if(Pe._glcanvas){Pe._glcanvas.attr("width",Pe.width*At).attr("height",Pe.height*At).style("width",Pe.width+"px").style("height",Pe.height+"px");var Ct=Pe._glcanvas.data()[0].regl;if(Ct&&(Math.floor(Pe.width*At)!==Ct._gl.drawingBufferWidth||Math.floor(Pe.height*At)!==Ct._gl.drawingBufferHeight)){var zt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!Je)return _.log(zt+" Clearing graph and plotting again."),r.cleanPlot([],{},Me._fullData,Pe),r.supplyDefaults(Me),Pe=Me._fullLayout,r.doCalcdata(Me),Je++,xt();_.error(zt)}}return Pe.modebar.orientation==="h"?Pe._modebardiv.style("height",null).style("width","100%"):Pe._modebardiv.style("width",null).style("height",Pe.height+"px"),r.previousPromises(Me)},lt,function(){if(r.didMarginChange(We,Pe._size))return _.syncOrAsync([lt,y.layoutStyles],Me)}];Re&&yt.push(function(){if(ze)return _.syncOrAsync([e.getComponentMethod("shapes","calcAutorange"),e.getComponentMethod("annotations","calcAutorange"),et],Me);et()}),yt.push(y.layoutStyles),Re&&yt.push(function(){return n.draw(Me,ye?"":"redraw")},function(xt){var at=xt._fullLayout._insideTickLabelsUpdaterange;if(at)return xt._fullLayout._insideTickLabelsUpdaterange=void 0,X(xt,at).then(function(){n.saveRangeInitial(xt,!0)})}),yt.push(y.drawData,y.finalDraw,c,r.addLinks,r.rehover,r.redrag,r.reselect,r.doAutoMargin,r.previousPromises);var _t=_.syncOrAsync(yt,Me);return _t&&_t.then||(_t=Promise.resolve()),_t.then(function(){return T(Me),Me})},P.purge=function(Me){var be=(Me=_.getGraphDiv(Me))._fullLayout||{},Ie=Me._fullData||[];return r.cleanPlot([],{},Ie,be),r.purge(Me),f.purge(Me),be._container&&be._container.remove(),delete Me._context,Me},P.react=function(Me,be,Ie,Be){var ce,Te;Me=_.getGraphDiv(Me),v.clearPromiseQueue(Me);var ye=Me._fullData,Pe=Me._fullLayout;if(_.isPlotDiv(Me)&&ye&&Pe){if(_.isPlainObject(be)){var Re=be;be=Re.data,Ie=Re.layout,Be=Re.config,ce=Re.frames}var ze=!1;if(Be){var He=_.extendDeep({},Me._context);Me._context=void 0,L(Me,Be),ze=fe(He,Me._context)}Me.data=be||[],v.cleanData(Me.data),Me.layout=Ie||{},v.cleanLayout(Me.layout),function(nt,De,Fe,rt){var tt,gt,dt,mt,ft,kt,ht,pt,wt,Ft,Nt=rt._preGUI,Gt=[],an={},Wt={};for(tt in Nt){if(ft=ve(tt,xe)){if(wt=ft.head,Ft=ft.tail,gt=ft.attr||wt+".uirevision",(mt=(dt=m(rt,gt).get())&&Le(gt,De))&&mt===dt){if((kt=Nt[tt])===null&&(kt=void 0),se(pt=(ht=m(De,tt)).get(),kt)){pt===void 0&&Ft==="autorange"&&Gt.push(wt),ht.set(F(m(rt,tt).get()));continue}if(Ft==="autorange"||Ft.substr(0,6)==="range["){var Yt=Nt[wt+".range[0]"],en=Nt[wt+".range[1]"],Tn=Nt[wt+".autorange"];if(Tn||Tn===null&&Yt===null&&en===null){if(!(wt in an)){var Bn=m(De,wt).get();an[wt]=Bn&&(Bn.autorange||Bn.autorange!==!1&&(!Bn.range||Bn.range.length!==2))}if(an[wt]){ht.set(F(m(rt,tt).get()));continue}}}}}else _.warn("unrecognized GUI edit: "+tt);delete Nt[tt],ft&&ft.tail.substr(0,6)==="range["&&(Wt[ft.head]=1)}for(var mn=0;mn<Gt.length;mn++){var Kt=Gt[mn];if(Wt[Kt]){var cn=m(De,Kt).get();cn&&delete cn.autorange}}var tn=rt._tracePreGUI;for(var un in tn){var yn,En=tn[un],Sn=null;for(tt in En){if(!Sn){var Nn=Ae(un,Fe);if(Nn<0){delete tn[un];break}var _n=we(un,nt,(yn=Fe[Nn]._fullInput).index);if(_n<0){delete tn[un];break}Sn=nt[_n]}if(ft=ve(tt,me)){if(ft.attr?mt=(dt=m(rt,ft.attr).get())&&Le(ft.attr,De):(dt=yn.uirevision,(mt=Sn.uirevision)===void 0&&(mt=De.uirevision)),mt&&mt===dt&&((kt=En[tt])===null&&(kt=void 0),se(pt=(ht=m(Sn,tt)).get(),kt))){ht.set(F(m(yn,tt).get()));continue}}else _.warn("unrecognized GUI edit: "+tt+" in trace uid "+un);delete En[tt]}}}(Me.data,Me.layout,ye,Pe),r.supplyDefaults(Me,{skipUpdateCalc:!0});var We=Me._fullData,Je=Me._fullLayout,lt=Je.datarevision===void 0,et=Je.transition,yt=function(nt,De,Fe,rt,tt){var gt=w.layoutFlags();return gt.arrays={},gt.rangesAltered={},gt.nChanges=0,gt.nChangesAnim=0,oe(De,Fe,[],{getValObject:function(dt){return i.getLayoutValObject(Fe,dt)},flags:gt,immutable:rt,transition:tt,gd:nt}),(gt.plot||gt.calc)&&(gt.layoutReplot=!0),tt&&gt.nChanges&&gt.nChangesAnim&&(gt.anim=gt.nChanges===gt.nChangesAnim?"all":"some"),gt}(Me,Pe,Je,lt,et),_t=yt.newDataRevision,xt=function(nt,De,Fe,rt,tt,gt){var dt=De.length===Fe.length;if(!tt&&!dt)return{fullReplot:!0,calc:!0};var mt,ft,kt=w.traceFlags();kt.arrays={},kt.nChanges=0,kt.nChangesAnim=0;var ht={getValObject:function(wt){var Ft=i.getTraceValObject(ft,wt);return!ft._module.animatable&&Ft.anim&&(Ft.anim=!1),Ft},flags:kt,immutable:rt,transition:tt,newDataRevision:gt,gd:nt},pt={};for(mt=0;mt<De.length;mt++)if(Fe[mt]){if(ft=Fe[mt]._fullInput,r.hasMakesDataTransform(ft)&&(ft=Fe[mt]),pt[ft.uid])continue;pt[ft.uid]=1,oe(De[mt]._fullInput,ft,[],ht)}return(kt.calc||kt.plot)&&(kt.fullReplot=!0),tt&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim&&dt?"all":"some"),kt}(Me,ye,We,lt,et,_t);if(ue(Me)&&(yt.layoutReplot=!0),xt.calc||yt.calc){Me.calcdata=void 0;for(var at=Object.getOwnPropertyNames(Je),ot=0;ot<at.length;ot++){var At=at[ot],Ct=At.substring(0,5);if(Ct==="xaxis"||Ct==="yaxis"){var zt=Je[At]._emptyCategories;zt&&zt()}}}else r.supplyDefaultsUpdateCalc(Me.calcdata,We);var St=[];if(ce&&(Me._transitionData={},r.createTransitionData(Me),St.push(function(){return P.addFrames(Me,ce)})),Je.transition&&!ze&&(xt.anim||yt.anim))yt.ticks&&St.push(y.doTicksRelayout),r.doCalcdata(Me),y.doAutoRangeAndConstraints(Me),St.push(function(){return r.transitionFromReact(Me,xt,yt,Pe)});else if(xt.fullReplot||yt.layoutReplot||ze)Me._fullLayout._skipDefaults=!0,St.push(P._doPlot);else{for(var qe in yt.arrays){var Xe=yt.arrays[qe];if(Xe.length){var Ve=e.getComponentMethod(qe,"drawOne");if(Ve!==_.noop)for(var Ze=0;Ze<Xe.length;Ze++)Ve(Me,Xe[Ze]);else{var st=e.getComponentMethod(qe,"draw");if(st===_.noop)throw new Error("cannot draw components: "+qe);st(Me)}}}St.push(r.previousPromises),xt.style&&St.push(y.doTraceStyle),(xt.colorbars||yt.colorbars)&&St.push(y.doColorBars),yt.legend&&St.push(y.doLegend),yt.layoutstyle&&St.push(y.layoutStyles),yt.axrange&&Z(St),yt.ticks&&St.push(y.doTicksRelayout),yt.modebar&&St.push(y.doModeBar),yt.camera&&St.push(y.doCamera),St.push(T)}St.push(r.rehover,r.redrag,r.reselect),(Te=_.syncOrAsync(St,Me))&&Te.then||(Te=Promise.resolve(Me))}else Te=P.newPlot(Me,be,Ie,Be);return Te.then(function(){return Me.emit("plotly_react",{data:be,layout:Ie}),Me})},P.redraw=function(Me){if(Me=_.getGraphDiv(Me),!_.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);return v.cleanData(Me.data),v.cleanLayout(Me.layout),Me.calcdata=void 0,P._doPlot(Me).then(function(){return Me.emit("plotly_redraw"),Me})},P.relayout=X,P.restyle=N,P.setPlotConfig=function(Me){return _.extendFlat(h,Me)},P.update=he,P._guiRelayout=de(X),P._guiRestyle=de(N),P._guiUpdate=de(he),P._storeDirectGUIEdit=function(Me,be,Ie){for(var Be in Ie)W(Be,m(Me,Be).get(),Ie[Be],be)}},72075:function($){var P={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};(function A(M,l){for(var _ in M){var m=M[_];m.valType?l[_]=m.dflt:(l[_]||(l[_]={}),A(m,l[_]))}})(P,t),$.exports={configAttributes:P,dfltConfig:t}},86281:function($,P,t){var A=t(73972),M=t(71828),l=t(9012),_=t(10820),m=t(31391),f=t(85594),o=t(72075).configAttributes,e=t(30962),i=M.extendDeepAll,r=M.isPlainObject,n=M.isArrayOrTypedArray,s=M.nestedProperty,a=M.valObjectMeta,u="_isSubplotObj",p="_isLinkedToArray",c="_deprecated",x=[u,p,"_arrayAttrRegexps",c];function g(d,S,T){if(!d)return!1;if(d._isLinkedToArray){if(h(S[T]))T++;else if(T<S.length)return!1}for(;T<S.length;T++){var E=d[S[T]];if(!r(E)||(d=E,T===S.length-1))break;if(d._isLinkedToArray){if(!h(S[++T]))return!1}else if(d.valType==="info_array"){var C=S[++T];if(!h(C))return!1;var L=d.items;if(Array.isArray(L)){if(C>=L.length)return!1;if(d.dimensions===2){if(T++,S.length===T)return d;var O=S[T];if(!h(O))return!1;d=L[C][O]}else d=L[C]}else d=L}}return d}function h(d){return d===Math.round(d)&&d>=0}function b(){var d,S,T={};for(d in i(T,_),A.subplotsRegistry)if((S=A.subplotsRegistry[d]).layoutAttributes)if(Array.isArray(S.attr))for(var E=0;E<S.attr.length;E++)y(T,S,S.attr[E]);else y(T,S,S.attr==="subplot"?S.name:S.attr);for(d in A.componentsRegistry){var C=(S=A.componentsRegistry[d]).schema;if(C&&(C.subplots||C.layout)){var L=C.subplots;if(L&&L.xaxis&&!L.yaxis)for(var O in L.xaxis)delete T.yaxis[O];delete T.xaxis.shift,delete T.xaxis.autoshift}else S.name==="colorscale"?i(T,S.layoutAttributes):S.layoutAttributes&&w(T,S.layoutAttributes,S.name)}return{layoutAttributes:v(T)}}function v(d){return function(S){P.crawl(S,function(T,E,C){P.isValObject(T)?T.arrayOk!==!0&&T.valType!=="data_array"||(C[E+"src"]={valType:"string",editType:"none"}):r(T)&&(T.role="object")})}(d),function(S){P.crawl(S,function(T,E,C){if(T){var L=T[p];L&&(delete T[p],C[E]={items:{}},C[E].items[L]=T,C[E].role="object")}})}(d),function(S){(function T(E){for(var C in E)if(r(E[C]))T(E[C]);else if(Array.isArray(E[C]))for(var L=0;L<E[C].length;L++)T(E[C][L]);else E[C]instanceof RegExp&&(E[C]=E[C].toString())})(S)}(d),d}function y(d,S,T){var E=s(d,T),C=i({},S.layoutAttributes);C[u]=!0,E.set(C)}function w(d,S,T){var E=s(d,T);E.set(i(E.get()||{},S))}P.IS_SUBPLOT_OBJ=u,P.IS_LINKED_TO_ARRAY=p,P.DEPRECATED=c,P.UNDERSCORE_ATTRS=x,P.get=function(){var d={};A.allTypes.forEach(function(E){d[E]=function(C){var L,O;O=(L=A.modules[C]._module).basePlotModule;var z={type:null},G=i({},l),I=i({},L.attributes);P.crawl(I,function(F,V,W,te,Q){s(G,Q).set(void 0),F===void 0&&s(I,Q).set(void 0)}),i(z,G),A.traceIs(C,"noOpacity")&&delete z.opacity,A.traceIs(C,"showLegend")||(delete z.showlegend,delete z.legendgroup),A.traceIs(C,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),L.selectPoints||delete z.selectedpoints,i(z,I),O.attributes&&i(z,O.attributes),z.type=C;var H={meta:L.meta||{},categories:L.categories||{},animatable:!!L.animatable,type:C,attributes:v(z)};if(L.layoutAttributes){var N={};i(N,L.layoutAttributes),H.layoutAttributes=v(N)}return L.animatable||P.crawl(H,function(F){P.isValObject(F)&&"anim"in F&&delete F.anim}),H}(E)});var S,T={};return Object.keys(A.transformsRegistry).forEach(function(E){T[E]=function(C){var L=A.transformsRegistry[C],O=i({},L.attributes);return Object.keys(A.componentsRegistry).forEach(function(z){var G=A.componentsRegistry[z];G.schema&&G.schema.transforms&&G.schema.transforms[C]&&Object.keys(G.schema.transforms[C]).forEach(function(I){w(O,G.schema.transforms[C][I],I)})}),{attributes:v(O)}}(E)}),{defs:{valObjects:a,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:e.traces,layout:e.layout},impliedEdits:{}},traces:d,layout:b(),transforms:T,frames:(S={frames:i({},m)},v(S),S.frames),animation:v(f),config:v(o)}},P.crawl=function(d,S,T,E){var C=T||0;E=E||"",Object.keys(d).forEach(function(L){var O=d[L];if(x.indexOf(L)===-1){var z=(E?E+".":"")+L;S(O,L,d,C,z),P.isValObject(O)||r(O)&&L!=="impliedEdits"&&P.crawl(O,S,C+1,z)}})},P.isValObject=function(d){return d&&d.valType!==void 0},P.findArrayAttributes=function(d){var S,T,E=[],C=[],L=[];function O(F,V,W,te){C=C.slice(0,te).concat([V]),L=L.slice(0,te).concat([F&&F._isLinkedToArray]),F&&(F.valType==="data_array"||F.arrayOk===!0)&&(C[te-1]!=="colorbar"||V!=="ticktext"&&V!=="tickvals")&&z(S,0,"")}function z(F,V,W){var te=F[C[V]],Q=W+C[V];if(V===C.length-1)n(te)&&E.push(T+Q);else if(L[V]){if(Array.isArray(te))for(var X=0;X<te.length;X++)r(te[X])&&z(te[X],V+1,Q+"["+X+"].")}else r(te)&&z(te,V+1,Q+".")}S=d,T="",P.crawl(l,O),d._module&&d._module.attributes&&P.crawl(d._module.attributes,O);var G=d.transforms;if(G)for(var I=0;I<G.length;I++){var H=G[I],N=H._module;N&&(T="transforms["+I+"].",S=H,P.crawl(N.attributes,O))}return E},P.getTraceValObject=function(d,S){var T,E,C=S[0],L=1;if(C==="transforms"){if(S.length===1)return l.transforms;var O=d.transforms;if(!Array.isArray(O)||!O.length)return!1;var z=S[1];if(!h(z)||z>=O.length)return!1;E=(T=(A.transformsRegistry[O[z].type]||{}).attributes)&&T[S[2]],L=3}else{var G=d._module;if(G||(G=(A.modules[d.type||l.type.dflt]||{})._module),!G)return!1;if(!(E=(T=G.attributes)&&T[C])){var I=G.basePlotModule;I&&I.attributes&&(E=I.attributes[C])}E||(E=l[C])}return g(E,S,L)},P.getLayoutValObject=function(d,S){var T=function(E,C){var L,O,z,G,I=E._basePlotModules;if(I){var H;for(L=0;L<I.length;L++){if((z=I[L]).attrRegex&&z.attrRegex.test(C)){if(z.layoutAttrOverrides)return z.layoutAttrOverrides;!H&&z.layoutAttributes&&(H=z.layoutAttributes)}var N=z.baseLayoutAttrOverrides;if(N&&C in N)return N[C]}if(H)return H}var F=E._modules;if(F){for(L=0;L<F.length;L++)if((G=F[L].layoutAttributes)&&C in G)return G[C]}for(O in A.componentsRegistry){if((z=A.componentsRegistry[O]).name==="colorscale"&&C.indexOf("coloraxis")===0)return z.layoutAttributes[C];if(!z.schema&&C===z.name)return z.layoutAttributes}return C in _&&_[C]}(d,S[0]);return g(T,S,1)}},44467:function($,P,t){var A=t(71828),M=t(9012),l="templateitemname",_={name:{valType:"string",editType:"none"}};function m(o){return o&&typeof o=="string"}function f(o){var e=o.length-1;return o.charAt(e)!=="s"&&A.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}_[l]={valType:"string",editType:"calc"},P.templatedArray=function(o,e){return e._isLinkedToArray=o,e.name=_.name,e[l]=_[l],e},P.traceTemplater=function(o){var e,i,r={};for(e in o)i=o[e],Array.isArray(i)&&i.length&&(r[e]=0);return{newTrace:function(n){var s={type:e=A.coerce(n,{},M,"type"),_template:null};if(e in r){i=o[e];var a=r[e]%i.length;r[e]++,s._template=i[a]}return s}}},P.newContainer=function(o,e,i){var r=o._template,n=r&&(r[e]||i&&r[i]);return A.isPlainObject(n)||(n=null),o[e]={_template:n}},P.arrayTemplater=function(o,e,i){var r=o._template,n=r&&r[f(e)],s=r&&r[e];Array.isArray(s)&&s.length||(s=[]);var a={};return{newItem:function(u){var p={name:u.name,_input:u},c=p[l]=u[l];if(!m(c))return p._template=n,p;for(var x=0;x<s.length;x++){var g=s[x];if(g.name===c)return a[c]=1,p._template=g,p}return p[i]=u[i]||!1,p._template=!1,p},defaultItems:function(){for(var u=[],p=0;p<s.length;p++){var c=s[p],x=c.name;if(m(x)&&!a[x]){var g={_template:c,name:x,_input:{_templateitemname:x}};g[l]=c[l],u.push(g),a[x]=1}}return u}}},P.arrayDefaultKey=f,P.arrayEditor=function(o,e,i){var r=(A.nestedProperty(o,e).get()||[]).length,n=i._index,s=n>=r&&(i._input||{})._templateitemname;s&&(n=r);var a,u=e+"["+n+"]";function p(){a={},s&&(a[u]={},a[u][l]=s)}function c(g,h){s?A.nestedProperty(a[u],g).set(h):a[u+"."+g]=h}function x(){var g=a;return p(),g}return p(),{modifyBase:function(g,h){a[g]=h},modifyItem:c,getUpdateObj:x,applyUpdate:function(g,h){g&&c(g,h);var b=x();for(var v in b)A.nestedProperty(o,v).set(b[v])}}}},61549:function($,P,t){var A=t(39898),M=t(73972),l=t(74875),_=t(71828),m=t(63893),f=t(33306),o=t(7901),e=t(91424),i=t(92998),r=t(64168),n=t(89298),s=t(18783),a=t(99082),u=a.enforce,p=a.clean,c=t(71739).doAutoRange,x="start";function g(w,d,S){for(var T=0;T<S.length;T++){var E=S[T][0],C=S[T][1];if(!(E[0]>=w[1]||E[1]<=w[0])&&C[0]<d[1]&&C[1]>d[0])return!0}return!1}function h(w){var d,S,T,E,C,L,O=w._fullLayout,z=O._size,G=z.p,I=n.list(w,"",!0);if(O._paperdiv.style({width:w._context.responsive&&O.autosize&&!w._context._hasZeroWidth&&!w.layout.width?"100%":O.width+"px",height:w._context.responsive&&O.autosize&&!w._context._hasZeroHeight&&!w.layout.height?"100%":O.height+"px"}).selectAll(".main-svg").call(e.setSize,O.width,O.height),w._context.setBackground(w,O.paper_bgcolor),P.drawMainTitle(w),r.manage(w),!O._has("cartesian"))return l.previousPromises(w);function H(ze,He,We){var Je=ze._lw/2;return ze._id.charAt(0)==="x"?He?We==="top"?He._offset-G-Je:He._offset+He._length+G+Je:z.t+z.h*(1-(ze.position||0))+Je%1:He?We==="right"?He._offset+He._length+G+Je:He._offset-G-Je:z.l+z.w*(ze.position||0)+Je%1}for(d=0;d<I.length;d++){var N=(E=I[d])._anchorAxis;E._linepositions={},E._lw=e.crispRound(w,E.linewidth,1),E._mainLinePosition=H(E,N,E.side),E._mainMirrorPosition=E.mirror&&N?H(E,N,s.OPPOSITE_SIDE[E.side]):null}var F=[],V=[],W=[],te=o.opacity(O.paper_bgcolor)===1&&o.opacity(O.plot_bgcolor)===1&&O.paper_bgcolor===O.plot_bgcolor;for(S in O._plots)if((T=O._plots[S]).mainplot)T.bg&&T.bg.remove(),T.bg=void 0;else{var Q=T.xaxis.domain,X=T.yaxis.domain,q=T.plotgroup;if(g(Q,X,W)){var Z=q.node(),J=T.bg=_.ensureSingle(q,"rect","bg");Z.insertBefore(J.node(),Z.childNodes[0]),V.push(S)}else q.select("rect.bg").remove(),W.push([Q,X]),te||(F.push(S),V.push(S))}var ne,re,ae,ue,he,de,xe,me,ve,Le,Ae,we,se,oe=O._bgLayer.selectAll(".bg").data(F);for(oe.enter().append("rect").classed("bg",!0),oe.exit().remove(),oe.each(function(ze){O._plots[ze].bg=A.select(this)}),d=0;d<V.length;d++)T=O._plots[V[d]],C=T.xaxis,L=T.yaxis,T.bg&&C._offset!==void 0&&L._offset!==void 0&&T.bg.call(e.setRect,C._offset-G,L._offset-G,C._length+2*G,L._length+2*G).call(o.fill,O.plot_bgcolor).style("stroke-width",0);if(!O._hasOnlyLargeSploms)for(S in O._plots){T=O._plots[S],C=T.xaxis,L=T.yaxis;var fe,Se,Me=T.clipId="clip"+O._uid+S+"plot",be=_.ensureSingleById(O._clips,"clipPath",Me,function(ze){ze.classed("plotclip",!0).append("rect")});T.clipRect=be.select("rect").attr({width:C._length,height:L._length}),e.setTranslate(T.plot,C._offset,L._offset),T._hasClipOnAxisFalse?(fe=null,Se=Me):(fe=Me,Se=null),e.setClipUrl(T.plot,fe,w),T.layerClipId=Se}function Ie(ze){return"M"+ne+","+ze+"H"+re}function Be(ze){return"M"+C._offset+","+ze+"h"+C._length}function ce(ze){return"M"+ze+","+me+"V"+xe}function Te(ze){return L._shift!==void 0&&(ze+=L._shift),"M"+ze+","+L._offset+"v"+L._length}function ye(ze,He,We){if(!ze.showline||S!==ze._mainSubplot)return"";if(!ze._anchorAxis)return We(ze._mainLinePosition);var Je=He(ze._mainLinePosition);return ze.mirror&&(Je+=He(ze._mainMirrorPosition)),Je}for(S in O._plots){T=O._plots[S],C=T.xaxis,L=T.yaxis;var Pe="M0,0";b(C,S)&&(he=y(C,"left",L,I),ne=C._offset-(he?G+he:0),de=y(C,"right",L,I),re=C._offset+C._length+(de?G+de:0),ae=H(C,L,"bottom"),ue=H(C,L,"top"),!(se=!C._anchorAxis||S!==C._mainSubplot)||C.mirror!=="allticks"&&C.mirror!=="all"||(C._linepositions[S]=[ae,ue]),Pe=ye(C,Ie,Be),se&&C.showline&&(C.mirror==="all"||C.mirror==="allticks")&&(Pe+=Ie(ae)+Ie(ue)),T.xlines.style("stroke-width",C._lw+"px").call(o.stroke,C.showline?C.linecolor:"rgba(0,0,0,0)")),T.xlines.attr("d",Pe);var Re="M0,0";b(L,S)&&(Ae=y(L,"bottom",C,I),xe=L._offset+L._length+(Ae?G:0),we=y(L,"top",C,I),me=L._offset-(we?G:0),ve=H(L,C,"left"),Le=H(L,C,"right"),!(se=!L._anchorAxis||S!==L._mainSubplot)||L.mirror!=="allticks"&&L.mirror!=="all"||(L._linepositions[S]=[ve,Le]),Re=ye(L,ce,Te),se&&L.showline&&(L.mirror==="all"||L.mirror==="allticks")&&(Re+=ce(ve)+ce(Le)),T.ylines.style("stroke-width",L._lw+"px").call(o.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),T.ylines.attr("d",Re)}return n.makeClipPaths(w),l.previousPromises(w)}function b(w,d){return(w.ticks||w.showline)&&(d===w._mainSubplot||w.mirror==="all"||w.mirror==="allticks")}function v(w,d,S){if(!S.showline||!S._lw)return!1;if(S.mirror==="all"||S.mirror==="allticks")return!0;var T=S._anchorAxis;if(!T)return!1;var E=s.FROM_BL[d];return S.side===d?T.domain[E]===w.domain[E]:S.mirror&&T.domain[1-E]===w.domain[1-E]}function y(w,d,S,T){if(v(w,d,S))return S._lw;for(var E=0;E<T.length;E++){var C=T[E];if(C._mainAxis===S._mainAxis&&v(w,d,C))return C._lw}return 0}P.layoutStyles=function(w){return _.syncOrAsync([l.doAutoMargin,h],w)},P.drawMainTitle=function(w){var d,S=w._fullLayout.title,T=w._fullLayout,E=function(H){var N=H.title,F="middle";return _.isRightAnchor(N)?F="end":_.isLeftAnchor(N)&&(F=x),F}(T),C=function(H){var N=H.title,F="0em";return _.isTopAnchor(N)?F=s.CAP_SHIFT+"em":_.isMiddleAnchor(N)&&(F=s.MID_SHIFT+"em"),F}(T),L=function(H,N){var F=H.title,V=H._size,W=0;return N!=="0em"&&N?N===s.CAP_SHIFT+"em"&&(W=F.pad.t):W=-F.pad.b,F.y==="auto"?V.t/2:F.yref==="paper"?V.t+V.h-V.h*F.y+W:H.height-H.height*F.y+W}(T,C),O=function(H,N){var F=H.title,V=H._size,W=0;return N===x?W=F.pad.l:N==="end"&&(W=-F.pad.r),F.xref==="paper"?V.l+V.w*F.x+W:H.width*F.x+W}(T,E);if(i.draw(w,"gtitle",{propContainer:T,propName:"title.text",placeholder:T._dfltTitle.plot,attributes:{x:O,y:L,"text-anchor":E,dy:C}}),S.text&&S.automargin){var z=A.selectAll(".gtitle"),G=e.bBox(z.node()).height,I=function(H,N,F){var V=N.y,W=N.yanchor,te=V>.5?"t":"b",Q=H._fullLayout.margin[te],X=0;return N.yref==="paper"?X=F+N.pad.t+N.pad.b:N.yref==="container"&&(X=function(q,Z,J,ne,re){var ae=0;return J==="middle"&&(ae+=re/2),q==="t"?(J==="top"&&(ae+=re),ae+=ne-Z*ne):(J==="bottom"&&(ae+=re),ae+=Z*ne),ae}(te,V,W,H._fullLayout.height,F)+N.pad.t+N.pad.b),X>Q?X:0}(w,S,G);I>0&&(function(H,N,F,V){var W="title.automargin",te=H._fullLayout.title,Q=te.y>.5?"t":"b",X={x:te.x,y:te.y,t:0,b:0},q={};te.yref==="paper"&&function(Z,J,ne,re,ae){var ue=J.yref==="paper"?Z._fullLayout._size.h:Z._fullLayout.height,he=_.isTopAnchor(J)?re:re-ae,de=ne==="b"?ue-he:he;return!(_.isTopAnchor(J)&&ne==="t"||_.isBottomAnchor(J)&&ne==="b")&&de<ae}(H,te,Q,N,V)?X[Q]=F:te.yref==="container"&&(q[Q]=F,H._fullLayout._reservedMargin[W]=q),l.allowAutoMargin(H,W),l.autoMargin(H,W,X)}(w,L,I,G),z.attr({x:O,y:L,"text-anchor":E,dy:(d=S.yanchor,d==="top"?s.CAP_SHIFT+.3+"em":d==="bottom"?"-0.3em":s.MID_SHIFT+"em")}).call(m.positionText,O,L))}},P.doTraceStyle=function(w){var d,S=w.calcdata,T=[];for(d=0;d<S.length;d++){var E=S[d],C=E[0]||{},L=C.trace||{},O=L._module||{},z=O.arraysToCalcdata;z&&z(E,L);var G=O.editStyle;G&&T.push({fn:G,cd0:C})}if(T.length){for(d=0;d<T.length;d++){var I=T[d];I.fn(w,I.cd0)}f(w),P.redrawReglTraces(w)}return l.style(w),M.getComponentMethod("legend","draw")(w),l.previousPromises(w)},P.doColorBars=function(w){return M.getComponentMethod("colorbar","draw")(w),l.previousPromises(w)},P.layoutReplot=function(w){var d=w.layout;return w.layout=void 0,M.call("_doPlot",w,"",d)},P.doLegend=function(w){return M.getComponentMethod("legend","draw")(w),l.previousPromises(w)},P.doTicksRelayout=function(w){return n.draw(w,"redraw"),w._fullLayout._hasOnlyLargeSploms&&(M.subplotsRegistry.splom.updateGrid(w),f(w),P.redrawReglTraces(w)),P.drawMainTitle(w),l.previousPromises(w)},P.doModeBar=function(w){var d=w._fullLayout;r.manage(w);for(var S=0;S<d._basePlotModules.length;S++){var T=d._basePlotModules[S].updateFx;T&&T(w)}return l.previousPromises(w)},P.doCamera=function(w){for(var d=w._fullLayout,S=d._subplots.gl3d,T=0;T<S.length;T++){var E=d[S[T]];E._scene.setViewport(E)}},P.drawData=function(w){var d=w._fullLayout;f(w);for(var S=d._basePlotModules,T=0;T<S.length;T++)S[T].plot(w);return P.redrawReglTraces(w),l.style(w),M.getComponentMethod("selections","draw")(w),M.getComponentMethod("shapes","draw")(w),M.getComponentMethod("annotations","draw")(w),M.getComponentMethod("images","draw")(w),d._replotting=!1,l.previousPromises(w)},P.redrawReglTraces=function(w){var d=w._fullLayout;if(d._has("regl")){var S,T,E=w._fullData,C=[],L=[];for(d._hasOnlyLargeSploms&&d._splomGrid.draw(),S=0;S<E.length;S++){var O=E[S];O.visible===!0&&O._length!==0&&(O.type==="splom"?d._splomScenes[O.uid].draw():O.type==="scattergl"?_.pushUnique(C,O.xaxis+O.yaxis):O.type==="scatterpolargl"&&_.pushUnique(L,O.subplot))}for(S=0;S<C.length;S++)(T=d._plots[C[S]])._scene&&T._scene.draw();for(S=0;S<L.length;S++)(T=d[L[S]]._subplot)._scene&&T._scene.draw()}},P.doAutoRangeAndConstraints=function(w){for(var d,S=n.list(w,"",!0),T={},E=0;E<S.length;E++)if(!T[(d=S[E])._id]){T[d._id]=1,p(w,d),c(w,d);var C=d._matchGroup;if(C)for(var L in C){var O=n.getFromId(w,L);c(w,O,d.range),T[L]=1}}u(w)},P.finalDraw=function(w){M.getComponentMethod("rangeslider","draw")(w),M.getComponentMethod("rangeselector","draw")(w)},P.drawMarginPushers=function(w){M.getComponentMethod("legend","draw")(w),M.getComponentMethod("rangeselector","draw")(w),M.getComponentMethod("sliders","draw")(w),M.getComponentMethod("updatemenus","draw")(w),M.getComponentMethod("colorbar","draw")(w)}},96318:function($,P,t){var A=t(71828),M=A.isPlainObject,l=t(86281),_=t(74875),m=t(9012),f=t(44467),o=t(72075).dfltConfig;function e(c,x){c=A.extendDeep({},c);var g,h,b=Object.keys(c).sort();function v(T,E,C){if(M(E)&&M(T))e(T,E);else if(Array.isArray(E)&&Array.isArray(T)){var L=f.arrayTemplater({_template:c},C);for(h=0;h<E.length;h++){var O=E[h],z=L.newItem(O)._template;z&&e(z,O)}var G=L.defaultItems();for(h=0;h<G.length;h++)E.push(G[h]._template);for(h=0;h<E.length;h++)delete E[h].templateitemname}}for(g=0;g<b.length;g++){var y=b[g],w=c[y];if(y in x?v(w,x[y],y):x[y]=w,i(y)===y)for(var d in x){var S=i(d);d===S||S!==y||d in c||v(w,x[d],y)}}}function i(c){return c.replace(/[0-9]+$/,"")}function r(c,x,g,h,b){var v=b&&g(b);for(var y in c){var w=c[y],d=a(c,y,h),S=a(c,y,b),T=g(S);if(!T){var E=i(y);E!==y&&(T=g(S=a(c,E,b)))}if(!(v&&v===T||!T||T._noTemplating||T.valType==="data_array"||T.arrayOk&&Array.isArray(w)))if(!T.valType&&M(w))r(w,x,g,d,S);else if(T._isLinkedToArray&&Array.isArray(w))for(var C=!1,L=0,O={},z=0;z<w.length;z++){var G=w[z];if(M(G)){var I=G.name;if(I)O[I]||(r(G,x,g,a(w,L,d),a(w,L,S)),L++,O[I]=1);else if(!C){var H=a(c,f.arrayDefaultKey(y),h),N=a(w,L,d);r(G,x,g,N,a(w,L,S));var F=A.nestedProperty(x,N);A.nestedProperty(x,H).set(F.get()),F.set(null),C=!0}}}else A.nestedProperty(x,d).set(w)}}function n(c,x){return l.getLayoutValObject(c,A.nestedProperty({},x).parts)}function s(c,x){return l.getTraceValObject(c,A.nestedProperty({},x).parts)}function a(c,x,g){return g?Array.isArray(c)?g+"["+x+"]":g+"."+x:x}function u(c){for(var x=0;x<c.length;x++)if(M(c[x]))return!0}function p(c){var x;switch(c.code){case"data":x="The template has no key data.";break;case"layout":x="The template has no key layout.";break;case"missing":x=c.path?"There are no templates for item "+c.path+" with name "+c.templateitemname:"There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":x=c.path?"The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?"Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":"The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":x="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type."}return c.msg=x,c}P.makeTemplate=function(c){c=A.isPlainObject(c)?c:A.getGraphDiv(c),c=A.extendDeep({_context:o},{data:c.data,layout:c.layout}),_.supplyDefaults(c);var x=c.data||[],g=c.layout||{};g._basePlotModules=c._fullLayout._basePlotModules,g._modules=c._fullLayout._modules;var h={data:{},layout:{}};x.forEach(function(L){var O={};r(L,O,s.bind(null,L));var z=A.coerce(L,{},m,"type"),G=h.data[z];G||(G=h.data[z]=[]),G.push(O)}),r(g,h.layout,n.bind(null,g)),delete h.layout.template;var b=g.template;if(M(b)){var v,y,w,d,S,T,E=b.layout;M(E)&&e(E,h.layout);var C=b.data;if(M(C)){for(y in h.data)if(w=C[y],Array.isArray(w)){for(T=(S=h.data[y]).length,d=w.length,v=0;v<T;v++)e(w[v%d],S[v]);for(v=T;v<d;v++)S.push(A.extendDeep({},w[v]))}for(y in C)y in h.data||(h.data[y]=A.extendDeep([],C[y]))}}return h},P.validateTemplate=function(c,x){var g=A.extendDeep({},{_context:o,data:c.data,layout:c.layout}),h=g.layout||{};M(x)||(x=h.template||{});var b=x.layout,v=x.data,y=[];g.layout=h,g.layout.template=x,_.supplyDefaults(g);var w=g._fullLayout,d=g._fullData,S={};if(M(b)?(function G(I,H){for(var N in I)if(N.charAt(0)!=="_"&&M(I[N])){var F,V=i(N),W=[];for(F=0;F<H.length;F++)W.push(a(I,N,H[F])),V!==N&&W.push(a(I,V,H[F]));for(F=0;F<W.length;F++)S[W[F]]=1;G(I[N],W)}}(w,["layout"]),function G(I,H){for(var N in I)if(N.indexOf("defaults")===-1&&M(I[N])){var F=a(I,N,H);S[F]?G(I[N],F):y.push({code:"unused",path:F})}}(b,"layout")):y.push({code:"layout"}),M(v)){for(var T,E={},C=0;C<d.length;C++){var L=d[C];E[T=L.type]=(E[T]||0)+1,L._fullInput._template||y.push({code:"missing",index:L._fullInput.index,traceType:T})}for(T in v){var O=v[T].length,z=E[T]||0;O>z?y.push({code:"unused",traceType:T,templateCount:O,dataCount:z}):z>O&&y.push({code:"reused",traceType:T,templateCount:O,dataCount:z})}}else y.push({code:"data"});if(function G(I,H){for(var N in I)if(N.charAt(0)!=="_"){var F=I[N],V=a(I,N,H);M(F)?(Array.isArray(I)&&F._template===!1&&F.templateitemname&&y.push({code:"missing",path:V,templateitemname:F.templateitemname}),G(F,V)):Array.isArray(F)&&u(F)&&G(F,V)}}({data:d,layout:w},""),y.length)return y.map(p)}},403:function($,P,t){var A=t(92770),M=t(72391),l=t(74875),_=t(71828),m=t(25095),f=t(5900),o=t(70942),e=t(11506).version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};$.exports=function(r,n){var s,a,u,p;function c(z){return!(z in n)||_.validate(n[z],i[z])}if(n=n||{},_.isPlainObject(r)?(s=r.data||[],a=r.layout||{},u=r.config||{},p={}):(r=_.getGraphDiv(r),s=_.extendDeep([],r.data),a=_.extendDeep({},r.layout),u=r._context,p=r._fullLayout||{}),!c("width")&&n.width!==null||!c("height")&&n.height!==null)throw new Error("Height and width should be pixel values.");if(!c("format"))throw new Error("Export format is not "+_.join2(i.format.values,", "," or ")+".");var x={};function g(z,G){return _.coerce(n,x,i,z,G)}var h=g("format"),b=g("width"),v=g("height"),y=g("scale"),w=g("setBackground"),d=g("imageDataOnly"),S=document.createElement("div");S.style.position="absolute",S.style.left="-5000px",document.body.appendChild(S);var T=_.extendFlat({},a);b?T.width=b:n.width===null&&A(p.width)&&(T.width=p.width),v?T.height=v:n.height===null&&A(p.height)&&(T.height=p.height);var E=_.extendFlat({},u,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),C=m.getRedrawFunc(S);function L(){return new Promise(function(z){setTimeout(z,m.getDelay(S._fullLayout))})}function O(){return new Promise(function(z,G){var I=f(S,h,y),H=S._fullLayout.width,N=S._fullLayout.height;function F(){M.purge(S),document.body.removeChild(S)}if(h==="full-json"){var V=l.graphJson(S,!1,"keepdata","object",!0,!0);return V.version=e,V=JSON.stringify(V),F(),z(d?V:m.encodeJSON(V))}if(F(),h==="svg")return z(d?I:m.encodeSVG(I));var W=document.createElement("canvas");W.id=_.randstr(),o({format:h,width:H,height:N,scale:y,canvas:W,svg:I,promise:!0}).then(z).catch(G)})}return new Promise(function(z,G){M.newPlot(S,s,T,E).then(C).then(L).then(O).then(function(I){z(function(H){return d?H.replace(m.IMAGE_URL_PREFIX,""):H}(I))}).catch(function(I){G(I)})})}},84936:function($,P,t){var A=t(71828),M=t(74875),l=t(86281),_=t(72075).dfltConfig,m=A.isPlainObject,f=Array.isArray,o=A.isArrayOrTypedArray;function e(c,x,g,h,b,v){v=v||[];for(var y=Object.keys(c),w=0;w<y.length;w++){var d=y[w];if(d!=="transforms"){var S=v.slice();S.push(d);var T=c[d],E=x[d],C=a(g,d),L=(C||{}).valType,O=L==="info_array",z=L==="colorscale",G=(C||{}).items;if(s(g,d))if(m(T)&&m(E)&&L!=="any")e(T,E,C,h,b,S);else if(O&&f(T)){T.length>E.length&&h.push(n("unused",b,S.concat(E.length)));var I,H,N,F,V,W=E.length,te=Array.isArray(G);if(te&&(W=Math.min(W,G.length)),C.dimensions===2)for(H=0;H<W;H++)if(f(T[H])){T[H].length>E[H].length&&h.push(n("unused",b,S.concat(H,E[H].length)));var Q=E[H].length;for(I=0;I<(te?Math.min(Q,G[H].length):Q);I++)N=te?G[H][I]:G,F=T[H][I],V=E[H][I],A.validate(F,N)?V!==F&&V!==+F&&h.push(n("dynamic",b,S.concat(H,I),F,V)):h.push(n("value",b,S.concat(H,I),F))}else h.push(n("array",b,S.concat(H),T[H]));else for(H=0;H<W;H++)N=te?G[H]:G,F=T[H],V=E[H],A.validate(F,N)?V!==F&&V!==+F&&h.push(n("dynamic",b,S.concat(H),F,V)):h.push(n("value",b,S.concat(H),F))}else if(C.items&&!O&&f(T)){var X,q,Z=G[Object.keys(G)[0]],J=[];for(X=0;X<E.length;X++){var ne=E[X]._index||X;if((q=S.slice()).push(ne),m(T[ne])&&m(E[X])){J.push(ne);var re=T[ne],ae=E[X];m(re)&&re.visible!==!1&&ae.visible===!1?h.push(n("invisible",b,q)):e(re,ae,Z,h,b,q)}}for(X=0;X<T.length;X++)(q=S.slice()).push(X),m(T[X])?J.indexOf(X)===-1&&h.push(n("unused",b,q)):h.push(n("object",b,q,T[X]))}else!m(T)&&m(E)?h.push(n("object",b,S,T)):o(T)||!o(E)||O||z?d in x?A.validate(T,C)?C.valType==="enumerated"&&(C.coerceNumber&&T!==+E||T!==E)&&h.push(n("dynamic",b,S,T,E)):h.push(n("value",b,S,T)):h.push(n("unused",b,S,T)):h.push(n("array",b,S,T));else h.push(n("schema",b,S))}}return h}$.exports=function(c,x){c===void 0&&(c=[]),x===void 0&&(x={});var g,h,b=l.get(),v=[],y={_context:A.extendFlat({},_)};f(c)?(y.data=A.extendDeep([],c),g=c):(y.data=[],g=[],v.push(n("array","data"))),m(x)?(y.layout=A.extendDeep({},x),h=x):(y.layout={},h={},arguments.length>1&&v.push(n("object","layout"))),M.supplyDefaults(y);for(var w=y._fullData,d=g.length,S=0;S<d;S++){var T=g[S],E=["data",S];if(m(T)){var C=w[S],L=C.type,O=b.traces[L].attributes;O.type={valType:"enumerated",values:[L]},C.visible===!1&&T.visible!==!1&&v.push(n("invisible",E)),e(T,C,O,v,E);var z=T.transforms,G=C.transforms;if(z){f(z)||v.push(n("array",E,["transforms"])),E.push("transforms");for(var I=0;I<z.length;I++){var H=["transforms",I],N=z[I].type;if(m(z[I])){var F=b.transforms[N]?b.transforms[N].attributes:{};F.type={valType:"enumerated",values:Object.keys(b.transforms)},e(z[I],G[I],F,v,E,H)}else v.push(n("object",E,H))}}}else v.push(n("object",E))}var V=y._fullLayout,W=function(te,Q){for(var X=te.layout.layoutAttributes,q=0;q<Q.length;q++){var Z=Q[q],J=te.traces[Z.type],ne=J.layoutAttributes;ne&&(Z.subplot?A.extendFlat(X[J.attributes.subplot.dflt],ne):A.extendFlat(X,ne))}return X}(b,w);return e(h,V,W,v,"layout"),v.length===0?void 0:v};var i={object:function(c,x){return(c==="layout"&&x===""?"The layout argument":c[0]==="data"&&x===""?"Trace "+c[1]+" in the data argument":r(c)+"key "+x)+" must be linked to an object container"},array:function(c,x){return(c==="data"?"The data argument":r(c)+"key "+x)+" must be linked to an array container"},schema:function(c,x){return r(c)+"key "+x+" is not part of the schema"},unused:function(c,x,g){var h=m(g)?"container":"key";return r(c)+h+" "+x+" did not get coerced"},dynamic:function(c,x,g,h){return[r(c)+"key",x,"(set to '"+g+"')","got reset to","'"+h+"'","during defaults."].join(" ")},invisible:function(c,x){return(x?r(c)+"item "+x:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,x,g){return[r(c)+"key "+x,"is set to an invalid value ("+g+")"].join(" ")}};function r(c){return f(c)?"In data trace "+c[1]+", ":"In "+c+", "}function n(c,x,g,h,b){var v,y;g=g||"",f(x)?(v=x[0],y=x[1]):(v=x,y=null);var w=function(S){if(!f(S))return String(S);for(var T="",E=0;E<S.length;E++){var C=S[E];typeof C=="number"?T=T.substr(0,T.length-1)+"["+C+"]":T+=C,E<S.length-1&&(T+=".")}return T}(g),d=i[c](x,w,h,b);return A.log(d),{code:c,container:v,trace:y,path:g,astr:w,msg:d}}function s(c,x){var g=p(x),h=g.keyMinusId,b=g.id;return!!(h in c&&c[h]._isSubplotObj&&b)||x in c}function a(c,x){return x in c?c[x]:c[p(x).keyMinusId]}var u=A.counterRegex("([a-z]+)");function p(c){var x=c.match(u);return{keyMinusId:x&&x[1],id:x&&x[2]}}},85594:function($){$.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},85501:function($,P,t){var A=t(71828),M=t(44467);$.exports=function(l,_,m){var f,o,e=m.name,i=m.inclusionAttr||"visible",r=_[e],n=A.isArrayOrTypedArray(l[e])?l[e]:[],s=_[e]=[],a=M.arrayTemplater(_,e,i);for(f=0;f<n.length;f++){var u=n[f];A.isPlainObject(u)?o=a.newItem(u):(o=a.newItem({}))[i]=!1,o._index=f,o[i]!==!1&&m.handleItemDefaults(u,o,_,m),s.push(o)}var p=a.defaultItems();for(f=0;f<p.length;f++)(o=p[f])._index=s.length,m.handleItemDefaults({},o,_,m,{}),s.push(o);if(A.isArrayOrTypedArray(r)){var c=Math.min(r.length,s.length);for(f=0;f<c;f++)A.relinkPrivateKeys(s[f],r[f])}return s}},9012:function($,P,t){var A=t(41940),M=t(77914);$.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:A({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:M.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},42973:function($,P,t){var A=t(92770),M=t(71828),l=M.dateTime2ms,_=M.incrementMonth,m=t(50606).ONEAVGMONTH;$.exports=function(f,o,e,i){if(o.type!=="date")return{vals:i};var r=f[e+"periodalignment"];if(!r)return{vals:i};var n,s=f[e+"period"];if(A(s)){if((s=+s)<=0)return{vals:i}}else if(typeof s=="string"&&s.charAt(0)==="M"){var a=+s.substring(1);if(!(a>0&&Math.round(a)===a))return{vals:i};n=a}for(var u=o.calendar,p=r==="start",c=r==="end",x=f[e+"period0"],g=l(x,u)||0,h=[],b=[],v=[],y=i.length,w=0;w<y;w++){var d,S,T,E=i[w];if(n){for(d=Math.round((E-g)/(n*m)),T=_(g,n*d,u);T>E;)T=_(T,-n,u);for(;T<=E;)T=_(T,n,u);S=_(T,-n,u)}else{for(T=g+(d=Math.round((E-g)/s))*s;T>E;)T-=s;for(;T<=E;)T+=s;S=T-s}h[w]=p?S:c?T:(S+T)/2,b[w]=S,v[w]=T}return{vals:h,starts:b,ends:v}}},89502:function($){$.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},71739:function($,P,t){var A=t(39898),M=t(92770),l=t(71828),_=t(50606).FP_SAFE,m=t(73972),f=t(91424),o=t(41675),e=o.getFromId,i=o.isLinked;function r(w,d){var S,T,E=[],C=w._fullLayout,L=s(C,d,0),O=s(C,d,1),z=u(w,d),G=z.min,I=z.max;if(G.length===0||I.length===0)return l.simpleMap(d.range,d.r2l);var H=G[0].val,N=I[0].val;for(S=1;S<G.length&&H===N;S++)H=Math.min(H,G[S].val);for(S=1;S<I.length&&H===N;S++)N=Math.max(N,I[S].val);var F=d.autorange,V=F==="reversed"||F==="min reversed"||F==="max reversed";if(!V&&d.range){var W=l.simpleMap(d.range,d.r2l);V=W[1]<W[0]}d.autorange==="reversed"&&(d.autorange=!0);var te,Q,X,q,Z,J,ne=d.rangemode,re=ne==="tozero",ae=ne==="nonnegative",ue=d._length,he=ue/10,de=0;for(S=0;S<G.length;S++)for(te=G[S],T=0;T<I.length;T++)(J=(Q=I[T]).val-te.val-n(d,te.val,Q.val))>0&&((Z=ue-L(te)-O(Q))>he?J/Z>de&&(X=te,q=Q,de=J/Z):J/ue>de&&(X={val:te.val,nopad:1},q={val:Q.val,nopad:1},de=J/ue));if(H===N){var xe=H-1,me=H+1;if(re)if(H===0)E=[0,1];else{var ve=(H>0?I:G).reduce(function(Ae,we){return Math.max(Ae,O(we))},0),Le=H/(1-Math.min(.5,ve/ue));E=H>0?[0,Le]:[Le,0]}else E=ae?[Math.max(0,xe),Math.max(1,me)]:[xe,me]}else re?(X.val>=0&&(X={val:0,nopad:1}),q.val<=0&&(q={val:0,nopad:1})):ae&&(X.val-de*L(X)<0&&(X={val:0,nopad:1}),q.val<=0&&(q={val:1,nopad:1})),de=(q.val-X.val-n(d,te.val,Q.val))/(ue-L(X)-O(q)),E=[X.val-de*L(X),q.val+de*O(q)];return E=y(E,d),d.limitRange&&d.limitRange(),V&&E.reverse(),l.simpleMap(E,d.l2r||Number)}function n(w,d,S){var T=0;if(w.rangebreaks)for(var E=w.locateBreaks(d,S),C=0;C<E.length;C++){var L=E[C];T+=L.max-L.min}return T}function s(w,d,S){var T=.05*d._length,E=d._anchorAxis||{};if((d.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var C=d.isReversed();if(!C){var L=l.simpleMap(d.range,d.r2l);C=L[1]<L[0]}C&&(S=!S)}var O=0;return i(w,d._id)||(O=function(z,G,I){var H=0,N=G._id.charAt(0)==="x";for(var F in z._plots){var V=z._plots[F];if(G._id===V.xaxis._id||G._id===V.yaxis._id){var W=(N?V.yaxis:V.xaxis)||{};if((W.ticklabelposition||"").indexOf("inside")!==-1&&(!I&&(W.side==="left"||W.side==="bottom")||I&&(W.side==="top"||W.side==="right"))){if(W._vals){var te=l.deg2rad(W._tickAngles[W._id+"tick"]||0),Q=Math.abs(Math.cos(te)),X=Math.abs(Math.sin(te));if(!W._vals[0].bb){var q=W._id+"tick";W._selections[q].each(function(ae){var ue=A.select(this);ue.select(".text-math-group").empty()&&(ae.bb=f.bBox(ue.node()))})}for(var Z=0;Z<W._vals.length;Z++){var J=W._vals[Z].bb;if(J){var ne=2*a+J.width,re=2*a+J.height;H=Math.max(H,N?Math.max(ne*Q,re*X):Math.max(re*Q,ne*X))}}}W.ticks==="inside"&&W.ticklabelposition==="inside"&&(H+=W.ticklen||0)}}}return H}(w,d,S)),T=Math.max(O,T),d.constrain==="domain"&&d._inputDomain&&(T*=(d._inputDomain[1]-d._inputDomain[0])/(d.domain[1]-d.domain[0])),function(z){return z.nopad?0:z.pad+(z.extrapad?T:O)}}$.exports={applyAutorangeOptions:y,getAutoRange:r,makePadFn:s,doAutoRange:function(w,d,S){if(d.setScale(),d.autorange){d.range=S?S.slice():r(w,d),d._r=d.range.slice(),d._rl=l.simpleMap(d._r,d.r2l);var T=d._input,E={};E[d._attr+".range"]=d.range,E[d._attr+".autorange"]=d.autorange,m.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,E),T.range=d.range.slice(),T.autorange=d.autorange}var C=d._anchorAxis;if(C&&C.rangeslider){var L=C.rangeslider[d._name];L&&L.rangemode==="auto"&&(L.range=r(w,d)),C._input.rangeslider[d._name]=l.extendFlat({},L)}},findExtremes:function(w,d,S){S||(S={}),w._m||w.setScale();var T,E,C,L,O,z,G,I,H,N=[],F=[],V=d.length,W=S.padded||!1,te=S.tozero&&(w.type==="linear"||w.type==="-"),Q=w.type==="log",X=!1,q=S.vpadLinearized||!1;function Z(xe){if(Array.isArray(xe))return X=!0,function(ve){return Math.max(Number(xe[ve]||0),0)};var me=Math.max(Number(xe||0),0);return function(){return me}}var J=Z((w._m>0?S.ppadplus:S.ppadminus)||S.ppad||0),ne=Z((w._m>0?S.ppadminus:S.ppadplus)||S.ppad||0),re=Z(S.vpadplus||S.vpad),ae=Z(S.vpadminus||S.vpad);if(!X){if(I=1/0,H=-1/0,Q)for(T=0;T<V;T++)(E=d[T])<I&&E>0&&(I=E),E>H&&E<_&&(H=E);else for(T=0;T<V;T++)(E=d[T])<I&&E>-_&&(I=E),E>H&&E<_&&(H=E);d=[I,H],V=2}var ue={tozero:te,extrapad:W};function he(xe){C=d[xe],M(C)&&(z=J(xe),G=ne(xe),q?(L=w.c2l(C)-ae(xe),O=w.c2l(C)+re(xe)):(I=C-ae(xe),H=C+re(xe),Q&&I<H/10&&(I=H/10),L=w.c2l(I),O=w.c2l(H)),te&&(L=Math.min(0,L),O=Math.max(0,O)),g(L)&&p(N,L,G,ue),g(O)&&c(F,O,z,ue))}var de=Math.min(6,V);for(T=0;T<de;T++)he(T);for(T=V-1;T>=de;T--)he(T);return{min:N,max:F,opts:S}},concatExtremes:u};var a=3;function u(w,d,S){var T,E,C,L=d._id,O=w._fullData,z=w._fullLayout,G=[],I=[];function H(te,Q){for(T=0;T<Q.length;T++){var X=te[Q[T]],q=(X._extremes||{})[L];if(X.visible===!0&&q){for(E=0;E<q.min.length;E++)C=q.min[E],p(G,C.val,C.pad,{extrapad:C.extrapad});for(E=0;E<q.max.length;E++)C=q.max[E],c(I,C.val,C.pad,{extrapad:C.extrapad})}}}if(H(O,d._traceIndices),H(z.annotations||[],d._annIndices||[]),H(z.shapes||[],d._shapeIndices||[]),d._matchGroup&&!S){for(var N in d._matchGroup)if(N!==d._id){var F=e(w,N),V=u(w,F,!0),W=d._length/F._length;for(E=0;E<V.min.length;E++)C=V.min[E],p(G,C.val,C.pad*W,{extrapad:C.extrapad});for(E=0;E<V.max.length;E++)C=V.max[E],c(I,C.val,C.pad*W,{extrapad:C.extrapad})}}return{min:G,max:I}}function p(w,d,S,T){x(w,d,S,T,h)}function c(w,d,S,T){x(w,d,S,T,b)}function x(w,d,S,T,E){for(var C=T.tozero,L=T.extrapad,O=!0,z=0;z<w.length&&O;z++){var G=w[z];if(E(G.val,d)&&G.pad>=S&&(G.extrapad||!L)){O=!1;break}E(d,G.val)&&G.pad<=S&&(L||!G.extrapad)&&(w.splice(z,1),z--)}if(O){var I=C&&d===0;w.push({val:d,pad:I?0:S,extrapad:!I&&L})}}function g(w){return M(w)&&Math.abs(w)<_}function h(w,d){return w<=d}function b(w,d){return w>=d}function v(w,d,S){return d===void 0||S===void 0||(d=w.d2l(d))<w.d2l(S)}function y(w,d){if(!d||!d.autorangeoptions)return w;var S=w[0],T=w[1],E=d.autorangeoptions.include;if(E!==void 0){var C=d.d2l(S),L=d.d2l(T);l.isArrayOrTypedArray(E)||(E=[E]);for(var O=0;O<E.length;O++){var z=d.d2l(E[O]);C>=z&&(C=z,S=z),L<=z&&(L=z,T=z)}}return S=function(G,I){var H=I.autorangeoptions;return H&&H.minallowed!==void 0&&v(I,H.minallowed,H.maxallowed)?H.minallowed:H&&H.clipmin!==void 0&&v(I,H.clipmin,H.clipmax)?Math.max(G,I.d2l(H.clipmin)):G}(S,d),T=function(G,I){var H=I.autorangeoptions;return H&&H.maxallowed!==void 0&&v(I,H.minallowed,H.maxallowed)?H.maxallowed:H&&H.clipmax!==void 0&&v(I,H.clipmin,H.clipmax)?Math.min(G,I.d2l(H.clipmax)):G}(T,d),[S,T]}},23074:function($){$.exports=function(P,t,A){var M,l;if(A){var _=t==="reversed"||t==="min reversed"||t==="max reversed";M=A[_?1:0],l=A[_?0:1]}var m=P("autorangeoptions.minallowed",l===null?M:void 0),f=P("autorangeoptions.maxallowed",M===null?l:void 0);m===void 0&&P("autorangeoptions.clipmin"),f===void 0&&P("autorangeoptions.clipmax"),P("autorangeoptions.include")}},89298:function($,P,t){var A=t(39898),M=t(92770),l=t(74875),_=t(73972),m=t(71828),f=m.strTranslate,o=t(63893),e=t(92998),i=t(7901),r=t(91424),n=t(13838),s=t(66287),a=t(50606),u=a.ONEMAXYEAR,p=a.ONEAVGYEAR,c=a.ONEMINYEAR,x=a.ONEMAXQUARTER,g=a.ONEAVGQUARTER,h=a.ONEMINQUARTER,b=a.ONEMAXMONTH,v=a.ONEAVGMONTH,y=a.ONEMINMONTH,w=a.ONEWEEK,d=a.ONEDAY,S=d/2,T=a.ONEHOUR,E=a.ONEMIN,C=a.ONESEC,L=a.MINUS_SIGN,O=a.BADNUM,z={K:"zeroline"},G={K:"gridline",L:"path"},I={K:"minor-gridline",L:"path"},H={K:"tick",L:"path"},N={K:"tick",L:"text"},F={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},V=t(18783),W=V.MID_SHIFT,te=V.CAP_SHIFT,Q=V.LINE_SPACING,X=V.OPPOSITE_SIDE,q=$.exports={};q.setConvert=t(21994);var Z=t(4322),J=t(41675),ne=J.idSort,re=J.isLinked;q.id2name=J.id2name,q.name2id=J.name2id,q.cleanId=J.cleanId,q.list=J.list,q.listIds=J.listIds,q.getFromId=J.getFromId,q.getFromTrace=J.getFromTrace;var ae=t(71739);q.getAutoRange=ae.getAutoRange,q.findExtremes=ae.findExtremes;var ue=1e-4;function he(De){var Fe=(De[1]-De[0])*ue;return[De[0]-Fe,De[1]+Fe]}q.coerceRef=function(De,Fe,rt,tt,gt,dt){var mt=tt.charAt(tt.length-1),ft=rt._fullLayout._subplots[mt+"axis"],kt=tt+"ref",ht={};return gt||(gt=ft[0]||(typeof dt=="string"?dt:dt[0])),dt||(dt=gt),ft=ft.concat(ft.map(function(pt){return pt+" domain"})),ht[kt]={valType:"enumerated",values:ft.concat(dt?typeof dt=="string"?[dt]:dt:[]),dflt:gt},m.coerce(De,Fe,ht,kt)},q.getRefType=function(De){return De===void 0?De:De==="paper"?"paper":De==="pixel"?"pixel":/( domain)$/.test(De)?"domain":"range"},q.coercePosition=function(De,Fe,rt,tt,gt,dt){var mt,ft;if(q.getRefType(tt)!=="range")mt=m.ensureNumber,ft=rt(gt,dt);else{var kt=q.getFromId(Fe,tt);ft=rt(gt,dt=kt.fraction2r(dt)),mt=kt.cleanPos}De[gt]=mt(ft)},q.cleanPosition=function(De,Fe,rt){return(rt==="paper"||rt==="pixel"?m.ensureNumber:q.getFromId(Fe,rt).cleanPos)(De)},q.redrawComponents=function(De,Fe){Fe=Fe||q.listIds(De);var rt=De._fullLayout;function tt(gt,dt,mt,ft){for(var kt=_.getComponentMethod(gt,dt),ht={},pt=0;pt<Fe.length;pt++)for(var wt=rt[q.id2name(Fe[pt])][mt],Ft=0;Ft<wt.length;Ft++){var Nt=wt[Ft];if(!ht[Nt]&&(kt(De,Nt),ht[Nt]=1,ft))return}}tt("annotations","drawOne","_annIndices"),tt("shapes","drawOne","_shapeIndices"),tt("images","draw","_imgIndices",!0),tt("selections","drawOne","_selectionIndices")};var de=q.getDataConversions=function(De,Fe,rt,tt){var gt,dt=rt==="x"||rt==="y"||rt==="z"?rt:tt;if(Array.isArray(dt)){if(gt={type:Z(tt,void 0,{autotypenumbers:De._fullLayout.autotypenumbers}),_categories:[]},q.setConvert(gt),gt.type==="category")for(var mt=0;mt<tt.length;mt++)gt.d2c(tt[mt])}else gt=q.getFromTrace(De,Fe,dt);return gt?{d2c:gt.d2c,c2d:gt.c2d}:dt==="ids"?{d2c:me,c2d:me}:{d2c:xe,c2d:xe}};function xe(De){return+De}function me(De){return String(De)}function ve(De,Fe){return Math.abs((De/Fe+.5)%1-.5)<.001}function Le(De,Fe){return Math.abs(De/Fe-1)<.001}function Ae(De){return+De.substring(1)}function we(De,Fe){return De.rangebreaks&&(Fe=Fe.filter(function(rt){return De.maskBreaks(rt.x)!==O})),Fe}function se(De){var Fe=De._mainAxis,rt=[];if(Fe._vals){for(var tt=0;tt<Fe._vals.length;tt++)if(!Fe._vals[tt].noTick){var gt=Fe.l2p(Fe._vals[tt].x),dt=De.p2l(gt),mt=q.tickText(De,dt);Fe._vals[tt].minor&&(mt.minor=!0,mt.text=""),rt.push(mt)}}return we(De,rt)}function oe(De){var Fe=he(m.simpleMap(De.range,De.r2l)),rt=Math.min(Fe[0],Fe[1]),tt=Math.max(Fe[0],Fe[1]),gt=De.type==="category"?De.d2l_noadd:De.d2l;De.type==="log"&&String(De.dtick).charAt(0)!=="L"&&(De.dtick="L"+Math.pow(10,Math.floor(Math.min(De.range[0],De.range[1]))-1));for(var dt=[],mt=0;mt<=1;mt++)if(!mt||De.minor){var ft=mt?De.minor.tickvals:De.tickvals,kt=mt?[]:De.ticktext;if(ft){Array.isArray(kt)||(kt=[]);for(var ht=0;ht<ft.length;ht++){var pt=gt(ft[ht]);if(pt>rt&&pt<tt){var wt=kt[ht]===void 0?q.tickText(De,pt):Pe(De,pt,String(kt[ht]));mt&&(wt.minor=!0,wt.text=""),dt.push(wt)}}}}return we(De,dt)}q.getDataToCoordFunc=function(De,Fe,rt,tt){return de(De,Fe,rt,tt).d2c},q.counterLetter=function(De){var Fe=De.charAt(0);return Fe==="x"?"y":Fe==="y"?"x":void 0},q.minDtick=function(De,Fe,rt,tt){["log","category","multicategory"].indexOf(De.type)===-1&&tt?De._minDtick===void 0?(De._minDtick=Fe,De._forceTick0=rt):De._minDtick&&((De._minDtick/Fe+1e-6)%1<2e-6&&((rt-De._forceTick0)/Fe%1+1.000001)%1<2e-6?(De._minDtick=Fe,De._forceTick0=rt):((Fe/De._minDtick+1e-6)%1>2e-6||((rt-De._forceTick0)/De._minDtick%1+1.000001)%1>2e-6)&&(De._minDtick=0)):De._minDtick=0},q.saveRangeInitial=function(De,Fe){for(var rt=q.list(De,"",!0),tt=!1,gt=0;gt<rt.length;gt++){var dt=rt[gt],mt=dt._rangeInitial0===void 0&&dt._rangeInitial1===void 0,ft=mt||dt.range[0]!==dt._rangeInitial0||dt.range[1]!==dt._rangeInitial1,kt=dt.autorange;(mt&&kt!==!0||Fe&&ft)&&(dt._rangeInitial0=kt==="min"||kt==="max reversed"?void 0:dt.range[0],dt._rangeInitial1=kt==="max"||kt==="min reversed"?void 0:dt.range[1],dt._autorangeInitial=kt,tt=!0)}return tt},q.saveShowSpikeInitial=function(De,Fe){for(var rt=q.list(De,"",!0),tt=!1,gt="on",dt=0;dt<rt.length;dt++){var mt=rt[dt],ft=mt._showSpikeInitial===void 0,kt=ft||mt.showspikes!==mt._showspikes;(ft||Fe&&kt)&&(mt._showSpikeInitial=mt.showspikes,tt=!0),gt!=="on"||mt.showspikes||(gt="off")}return De._fullLayout._cartesianSpikesEnabled=gt,tt},q.autoBin=function(De,Fe,rt,tt,gt,dt){var mt,ft=m.aggNums(Math.min,null,De),kt=m.aggNums(Math.max,null,De);if(Fe.type==="category"||Fe.type==="multicategory")return{start:ft-.5,end:kt+.5,size:Math.max(1,Math.round(dt)||1),_dataSpan:kt-ft};if(gt||(gt=Fe.calendar),mt=Fe.type==="log"?{type:"linear",range:[ft,kt]}:{type:Fe.type,range:m.simpleMap([ft,kt],Fe.c2r,0,gt),calendar:gt},q.setConvert(mt),dt=dt&&s.dtick(dt,mt.type))mt.dtick=dt,mt.tick0=s.tick0(void 0,mt.type,gt);else{var ht;if(rt)ht=(kt-ft)/rt;else{var pt=m.distinctVals(De),wt=Math.pow(10,Math.floor(Math.log(pt.minDiff)/Math.LN10)),Ft=wt*m.roundUp(pt.minDiff/wt,[.9,1.9,4.9,9.9],!0);ht=Math.max(Ft,2*m.stdev(De)/Math.pow(De.length,tt?.25:.4)),M(ht)||(ht=1)}q.autoTicks(mt,ht)}var Nt,Gt=mt.dtick,an=q.tickIncrement(q.tickFirst(mt),Gt,"reverse",gt);if(typeof Gt=="number")an=function(Wt,Yt,en,Tn,Bn){var mn=0,Kt=0,cn=0,tn=0;function un(Nn){return(1+100*(Nn-Wt)/en.dtick)%100<2}for(var yn=0;yn<Yt.length;yn++)Yt[yn]%1==0?cn++:M(Yt[yn])||tn++,un(Yt[yn])&&mn++,un(Yt[yn]+en.dtick/2)&&Kt++;var En=Yt.length-tn;if(cn===En&&en.type!=="date")en.dtick<1?Wt=Tn-.5*en.dtick:(Wt-=.5)+en.dtick<Tn&&(Wt+=en.dtick);else if(Kt<.1*En&&(mn>.3*En||un(Tn)||un(Bn))){var Sn=en.dtick/2;Wt+=Wt+Sn<Tn?Sn:-Sn}return Wt}(an,De,mt,ft,kt),Nt=an+(1+Math.floor((kt-an)/Gt))*Gt;else for(mt.dtick.charAt(0)==="M"&&(an=function(Wt,Yt,en,Tn,Bn){var mn=m.findExactDates(Yt,Bn);if(mn.exactDays>.8){var Kt=Number(en.substr(1));mn.exactYears>.8&&Kt%12==0?Wt=q.tickIncrement(Wt,"M6","reverse")+1.5*d:mn.exactMonths>.8?Wt=q.tickIncrement(Wt,"M1","reverse")+15.5*d:Wt-=S;var cn=q.tickIncrement(Wt,en);if(cn<=Tn)return cn}return Wt}(an,De,Gt,ft,gt)),Nt=an;Nt<=kt;)Nt=q.tickIncrement(Nt,Gt,!1,gt);return{start:Fe.c2r(an,0,gt),end:Fe.c2r(Nt,0,gt),size:Gt,_dataSpan:kt-ft}},q.prepMinorTicks=function(De,Fe,rt){if(!Fe.minor.dtick){delete De.dtick;var tt,gt=Fe.dtick&&M(Fe._tmin);if(gt){var dt=q.tickIncrement(Fe._tmin,Fe.dtick,!0);tt=[Fe._tmin,.99*dt+.01*Fe._tmin]}else{var mt=m.simpleMap(Fe.range,Fe.r2l);tt=[mt[0],.8*mt[0]+.2*mt[1]]}if(De.range=m.simpleMap(tt,Fe.l2r),De._isMinor=!0,q.prepTicks(De,rt),gt){var ft=M(Fe.dtick),kt=M(De.dtick),ht=ft?Fe.dtick:+Fe.dtick.substring(1),pt=kt?De.dtick:+De.dtick.substring(1);ft&&kt?ve(ht,pt)?ht===2*w&&pt===2*d&&(De.dtick=w):ht===2*w&&pt===3*d?De.dtick=w:ht!==w||(Fe._input.minor||{}).nticks?Le(ht/pt,2.5)?De.dtick=ht/2:De.dtick=ht:De.dtick=d:String(Fe.dtick).charAt(0)==="M"?kt?De.dtick="M1":ve(ht,pt)?ht>=12&&pt===2&&(De.dtick="M3"):De.dtick=Fe.dtick:String(De.dtick).charAt(0)==="L"?String(Fe.dtick).charAt(0)==="L"?ve(ht,pt)||(De.dtick=Le(ht/pt,2.5)?Fe.dtick/2:Fe.dtick):De.dtick="D1":De.dtick==="D2"&&+Fe.dtick>1&&(De.dtick=1)}De.range=Fe.range}Fe.minor._tick0Init===void 0&&(De.tick0=Fe.tick0)},q.prepTicks=function(De,Fe){var rt=m.simpleMap(De.range,De.r2l,void 0,void 0,Fe);if(De.tickmode==="auto"||!De.dtick){var tt,gt=De.nticks;gt||(De.type==="category"||De.type==="multicategory"?(tt=De.tickfont?m.bigFont(De.tickfont.size||12):15,gt=De._length/tt):(tt=De._id.charAt(0)==="y"?40:80,gt=m.constrain(De._length/tt,4,9)+1),De._name==="radialaxis"&&(gt*=2)),De.minor&&De.minor.tickmode!=="array"||De.tickmode==="array"&&(gt*=100),De._roughDTick=Math.abs(rt[1]-rt[0])/gt,q.autoTicks(De,De._roughDTick),De._minDtick>0&&De.dtick<2*De._minDtick&&(De.dtick=De._minDtick,De.tick0=De.l2r(De._forceTick0))}De.ticklabelmode==="period"&&function(dt){var mt;function ft(){return!(M(dt.dtick)||dt.dtick.charAt(0)!=="M")}var kt=ft(),ht=q.getTickFormat(dt);if(ht){var pt=dt._dtickInit!==dt.dtick;/%[fLQsSMX]/.test(ht)||(/%[HI]/.test(ht)?(mt=T,pt&&!kt&&dt.dtick<T&&(dt.dtick=T)):/%p/.test(ht)?(mt=S,pt&&!kt&&dt.dtick<S&&(dt.dtick=S)):/%[Aadejuwx]/.test(ht)?(mt=d,pt&&!kt&&dt.dtick<d&&(dt.dtick=d)):/%[UVW]/.test(ht)?(mt=w,pt&&!kt&&dt.dtick<w&&(dt.dtick=w)):/%[Bbm]/.test(ht)?(mt=v,pt&&(kt?Ae(dt.dtick)<1:dt.dtick<y)&&(dt.dtick="M1")):/%[q]/.test(ht)?(mt=g,pt&&(kt?Ae(dt.dtick)<3:dt.dtick<h)&&(dt.dtick="M3")):/%[Yy]/.test(ht)&&(mt=p,pt&&(kt?Ae(dt.dtick)<12:dt.dtick<c)&&(dt.dtick="M12")))}(kt=ft())&&dt.tick0===dt._dowTick0&&(dt.tick0=dt._rawTick0),dt._definedDelta=mt}(De),De.tick0||(De.tick0=De.type==="date"?"2000-01-01":0),De.type==="date"&&De.dtick<.1&&(De.dtick=.1),ye(De)},q.calcTicks=function(De,Fe){for(var rt,tt,gt=De.type,dt=De.calendar,mt=De.ticklabelstep,ft=De.ticklabelmode==="period",kt=m.simpleMap(De.range,De.r2l,void 0,void 0,Fe),ht=kt[1]<kt[0],pt=Math.min(kt[0],kt[1]),wt=Math.max(kt[0],kt[1]),Ft=Math.max(1e3,De._length||0),Nt=[],Gt=[],an=[],Wt=[],Yt=De.minor&&(De.minor.ticks||De.minor.showgrid),en=1;en>=(Yt?0:1);en--){var Tn=!en;en?(De._dtickInit=De.dtick,De._tick0Init=De.tick0):(De.minor._dtickInit=De.minor.dtick,De.minor._tick0Init=De.minor.tick0);var Bn=en?De:m.extendFlat({},De,De.minor);if(Tn?q.prepMinorTicks(Bn,De,Fe):q.prepTicks(Bn,Fe),Bn.tickmode!=="array")if(Bn.tickmode!=="sync"){var mn=he(kt),Kt=mn[0],cn=mn[1],tn=M(Bn.dtick),un=gt==="log"&&!(tn||Bn.dtick.charAt(0)==="L"),yn=q.tickFirst(Bn,Fe);if(en){if(De._tmin=yn,yn<Kt!==ht)break;gt!=="category"&&gt!=="multicategory"||(cn=ht?Math.max(-.5,cn):Math.min(De._categories.length-.5,cn))}var En,Sn,Nn=null,_n=yn;en&&(tn?Sn=De.dtick:gt==="date"?typeof De.dtick=="string"&&De.dtick.charAt(0)==="M"&&(Sn=v*De.dtick.substring(1)):Sn=De._roughDTick,En=Math.round((De.r2l(_n)-De.r2l(De.tick0))/Sn)-1);var Pn=Bn.dtick;for(Bn.rangebreaks&&Bn._tick0Init!==Bn.tick0&&(_n=Ve(_n,De),ht||(_n=q.tickIncrement(_n,Pn,!ht,dt))),en&&ft&&(_n=q.tickIncrement(_n,Pn,!ht,dt),En--);ht?_n>=cn:_n<=cn;_n=q.tickIncrement(_n,Pn,ht,dt)){if(en&&En++,Bn.rangebreaks&&!ht){if(_n<Kt)continue;if(Bn.maskBreaks(_n)===O&&Ve(_n,Bn)>=wt)break}if(an.length>Ft||_n===Nn)break;Nn=_n;var tr={value:_n};en?(un&&_n!==(0|_n)&&(tr.simpleLabel=!0),mt>1&&En%mt&&(tr.skipLabel=!0),an.push(tr)):(tr.minor=!0,Wt.push(tr))}}else an=[],Nt=se(De);else en?(an=[],Nt=oe(De)):(Wt=[],Gt=oe(De))}if(Yt&&!(De.minor.ticks==="inside"&&De.ticks==="outside"||De.minor.ticks==="outside"&&De.ticks==="inside")){for(var ur=an.map(function(Et){return Et.value}),lr=[],ir=0;ir<Wt.length;ir++){var $n=Wt[ir],vr=$n.value;if(ur.indexOf(vr)===-1){for(var jt=!1,rn=0;!jt&&rn<an.length;rn++)1e7+an[rn].value===1e7+vr&&(jt=!0);jt||lr.push($n)}}Wt=lr}if(ft&&function(Et,Xt,nn){for(var An=0;An<Et.length;An++){var Cn=Et[An].value,Rn=An,gn=An+1;An<Et.length-1?(Rn=An,gn=An+1):An>0?(Rn=An-1,gn=An):(Rn=An,gn=An);var $t,Qt=Et[Rn].value,hn=Et[gn].value,vn=Math.abs(hn-Qt),Fn=nn||vn,In=0;Fn>=c?In=vn>=c&&vn<=u?vn:p:nn===g&&Fn>=h?In=vn>=h&&vn<=x?vn:g:Fn>=y?In=vn>=y&&vn<=b?vn:v:nn===w&&Fn>=w?In=w:Fn>=d?In=d:nn===S&&Fn>=S?In=S:nn===T&&Fn>=T&&(In=T),In>=vn&&(In=vn,$t=!0);var Qn=Cn+In;if(Xt.rangebreaks&&In>0){for(var Wn=0,Ke=0;Ke<84;Ke++){var it=(Ke+.5)/84;Xt.maskBreaks(Cn*(1-it)+it*Qn)!==O&&Wn++}(In*=Wn/84)||(Et[An].drop=!0),$t&&vn>w&&(In=vn)}(In>0||An===0)&&(Et[An].periodX=Cn+In/2)}}(an,De,De._definedDelta),De.rangebreaks){var fn=De._id.charAt(0)==="y",xn=1;De.tickmode==="auto"&&(xn=De.tickfont?De.tickfont.size:12);var Ln=NaN;for(rt=an.length-1;rt>-1;rt--)if(an[rt].drop)an.splice(rt,1);else{an[rt].value=Ve(an[rt].value,De);var Xn=De.c2p(an[rt].value);(fn?Ln>Xn-xn:Ln<Xn+xn)?an.splice(ht?rt+1:rt,1):Ln=Xn}}Xe(De)&&Math.abs(kt[1]-kt[0])===360&&an.pop(),De._tmax=(an[an.length-1]||{}).value,De._prevDateHead="",De._inCalcTicks=!0;var Un,Hn,Kn=function(Et){Et.text="",De._prevDateHead=tt};for(an=an.concat(Wt),rt=0;rt<an.length;rt++){var qt=an[rt].minor,On=an[rt].value;qt?Gt.push({x:On,minor:!0}):(tt=De._prevDateHead,Un=q.tickText(De,On,!1,an[rt].simpleLabel),(Hn=an[rt].periodX)!==void 0&&(Un.periodX=Hn,(Hn>wt||Hn<pt)&&(Hn>wt&&(Un.periodX=wt),Hn<pt&&(Un.periodX=pt),Kn(Un))),an[rt].skipLabel&&Kn(Un),Nt.push(Un))}return Nt=Nt.concat(Gt),De._inCalcTicks=!1,ft&&Nt.length&&(Nt[0].noTick=!0),Nt};var fe=[2,5,10],Se=[1,2,3,6,12],Me=[1,2,5,10,15,30],be=[1,2,3,7,14],Ie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Be=[-.301,0,.301,.699,1],ce=[15,30,45,90,180];function Te(De,Fe,rt){return Fe*m.roundUp(De/Fe,rt)}function ye(De){var Fe=De.dtick;if(De._tickexponent=0,M(Fe)||typeof Fe=="string"||(Fe=1),De.type!=="category"&&De.type!=="multicategory"||(De._tickround=null),De.type==="date"){var rt=De.r2l(De.tick0),tt=De.l2r(rt).replace(/(^-|i)/g,""),gt=tt.length;if(String(Fe).charAt(0)==="M")gt>10||tt.substr(5)!=="01-01"?De._tickround="d":De._tickround=+Fe.substr(1)%12==0?"y":"m";else if(Fe>=d&&gt<=10||Fe>=15*d)De._tickround="d";else if(Fe>=E&&gt<=16||Fe>=T)De._tickround="M";else if(Fe>=C&&gt<=19||Fe>=E)De._tickround="S";else{var dt=De.l2r(rt+Fe).replace(/^-/,"").length;De._tickround=Math.max(gt,dt)-20,De._tickround<0&&(De._tickround=4)}}else if(M(Fe)||Fe.charAt(0)==="L"){var mt=De.range.map(De.r2d||Number);M(Fe)||(Fe=Number(Fe.substr(1))),De._tickround=2-Math.floor(Math.log(Fe)/Math.LN10+.01);var ft=Math.max(Math.abs(mt[0]),Math.abs(mt[1])),kt=Math.floor(Math.log(ft)/Math.LN10+.01),ht=De.minexponent===void 0?3:De.minexponent;Math.abs(kt)>ht&&(ze(De.exponentformat)&&!He(kt)?De._tickexponent=3*Math.round((kt-1)/3):De._tickexponent=kt)}else De._tickround=null}function Pe(De,Fe,rt){var tt=De.tickfont||{};return{x:Fe,dx:0,dy:0,text:rt||"",fontSize:tt.size,font:tt.family,fontColor:tt.color}}q.autoTicks=function(De,Fe,rt){var tt;function gt(wt){return Math.pow(wt,Math.floor(Math.log(Fe)/Math.LN10))}if(De.type==="date"){De.tick0=m.dateTick0(De.calendar,0);var dt=2*Fe;if(dt>p)Fe/=p,tt=gt(10),De.dtick="M"+12*Te(Fe,tt,fe);else if(dt>v)Fe/=v,De.dtick="M"+Te(Fe,1,Se);else if(dt>d){if(De.dtick=Te(Fe,d,De._hasDayOfWeekBreaks?[1,2,7,14]:be),!rt){var mt=q.getTickFormat(De),ft=De.ticklabelmode==="period";ft&&(De._rawTick0=De.tick0),/%[uVW]/.test(mt)?De.tick0=m.dateTick0(De.calendar,2):De.tick0=m.dateTick0(De.calendar,1),ft&&(De._dowTick0=De.tick0)}}else dt>T?De.dtick=Te(Fe,T,Se):dt>E?De.dtick=Te(Fe,E,Me):dt>C?De.dtick=Te(Fe,C,Me):(tt=gt(10),De.dtick=Te(Fe,tt,fe))}else if(De.type==="log"){De.tick0=0;var kt=m.simpleMap(De.range,De.r2l);if(De._isMinor&&(Fe*=1.5),Fe>.7)De.dtick=Math.ceil(Fe);else if(Math.abs(kt[1]-kt[0])<1){var ht=1.5*Math.abs((kt[1]-kt[0])/Fe);Fe=Math.abs(Math.pow(10,kt[1])-Math.pow(10,kt[0]))/ht,tt=gt(10),De.dtick="L"+Te(Fe,tt,fe)}else De.dtick=Fe>.3?"D2":"D1"}else De.type==="category"||De.type==="multicategory"?(De.tick0=0,De.dtick=Math.ceil(Math.max(Fe,1))):Xe(De)?(De.tick0=0,tt=1,De.dtick=Te(Fe,tt,ce)):(De.tick0=0,tt=gt(10),De.dtick=Te(Fe,tt,fe));if(De.dtick===0&&(De.dtick=1),!M(De.dtick)&&typeof De.dtick!="string"){var pt=De.dtick;throw De.dtick=1,"ax.dtick error: "+String(pt)}},q.tickIncrement=function(De,Fe,rt,tt){var gt=rt?-1:1;if(M(Fe))return m.increment(De,gt*Fe);var dt=Fe.charAt(0),mt=gt*Number(Fe.substr(1));if(dt==="M")return m.incrementMonth(De,mt,tt);if(dt==="L")return Math.log(Math.pow(10,De)+mt)/Math.LN10;if(dt==="D"){var ft=Fe==="D2"?Be:Ie,kt=De+.01*gt,ht=m.roundUp(m.mod(kt,1),ft,rt);return Math.floor(kt)+Math.log(A.round(Math.pow(10,ht),1))/Math.LN10}throw"unrecognized dtick "+String(Fe)},q.tickFirst=function(De,Fe){var rt=De.r2l||Number,tt=m.simpleMap(De.range,rt,void 0,void 0,Fe),gt=tt[1]<tt[0],dt=gt?Math.floor:Math.ceil,mt=he(tt)[0],ft=De.dtick,kt=rt(De.tick0);if(M(ft)){var ht=dt((mt-kt)/ft)*ft+kt;return De.type!=="category"&&De.type!=="multicategory"||(ht=m.constrain(ht,0,De._categories.length-1)),ht}var pt=ft.charAt(0),wt=Number(ft.substr(1));if(pt==="M"){for(var Ft,Nt,Gt,an=0,Wt=kt;an<10;){if(((Ft=q.tickIncrement(Wt,ft,gt,De.calendar))-mt)*(Wt-mt)<=0)return gt?Math.min(Wt,Ft):Math.max(Wt,Ft);Nt=(mt-(Wt+Ft)/2)/(Ft-Wt),Gt=pt+(Math.abs(Math.round(Nt))||1)*wt,Wt=q.tickIncrement(Wt,Gt,Nt<0?!gt:gt,De.calendar),an++}return m.error("tickFirst did not converge",De),Wt}if(pt==="L")return Math.log(dt((Math.pow(10,mt)-kt)/wt)*wt+kt)/Math.LN10;if(pt==="D"){var Yt=ft==="D2"?Be:Ie,en=m.roundUp(m.mod(mt,1),Yt,gt);return Math.floor(mt)+Math.log(A.round(Math.pow(10,en),1))/Math.LN10}throw"unrecognized dtick "+String(ft)},q.tickText=function(De,Fe,rt,tt){var gt,dt=Pe(De,Fe),mt=De.tickmode==="array",ft=rt||mt,kt=De.type,ht=kt==="category"?De.d2l_noadd:De.d2l;if(mt&&Array.isArray(De.ticktext)){var pt=m.simpleMap(De.range,De.r2l),wt=(Math.abs(pt[1]-pt[0])-(De._lBreaks||0))/1e4;for(gt=0;gt<De.ticktext.length&&!(Math.abs(Fe-ht(De.tickvals[gt]))<wt);gt++);if(gt<De.ticktext.length)return dt.text=String(De.ticktext[gt]),dt}function Ft(Wt){if(Wt===void 0)return!0;if(rt)return Wt==="none";var Yt={first:De._tmin,last:De._tmax}[Wt];return Wt!=="all"&&Fe!==Yt}var Nt=rt?"never":De.exponentformat!=="none"&&Ft(De.showexponent)?"hide":"";if(kt==="date"?function(Wt,Yt,en,Tn){var Bn=Wt._tickround,mn=en&&Wt.hoverformat||q.getTickFormat(Wt);(Tn=!mn&&Tn)&&(Bn=M(Bn)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Bn]);var Kt,cn=m.formatDate(Yt.x,mn,Bn,Wt._dateFormat,Wt.calendar,Wt._extraFormat),tn=cn.indexOf(`
`);if(tn!==-1&&(Kt=cn.substr(tn+1),cn=cn.substr(0,tn)),Tn&&(Kt===void 0||cn!=="00:00:00"&&cn!=="00:00"?cn.length===8&&(cn=cn.replace(/:00$/,"")):(cn=Kt,Kt="")),Kt)if(en)Bn==="d"?cn+=", "+Kt:cn=Kt+(cn?", "+cn:"");else if(Wt._inCalcTicks&&Wt._prevDateHead===Kt){var un=Ze(Wt),yn=Wt._trueSide||Wt.side;(!un&&yn==="top"||un&&yn==="bottom")&&(cn+="<br> ")}else Wt._prevDateHead=Kt,cn+="<br>"+Kt;Yt.text=cn}(De,dt,rt,ft):kt==="log"?function(Wt,Yt,en,Tn,Bn){var mn=Wt.dtick,Kt=Yt.x,cn=Wt.tickformat,tn=typeof mn=="string"&&mn.charAt(0);if(Bn==="never"&&(Bn=""),Tn&&tn!=="L"&&(mn="L3",tn="L"),cn||tn==="L")Yt.text=We(Math.pow(10,Kt),Wt,Bn,Tn);else if(M(mn)||tn==="D"&&m.mod(Kt+.01,1)<.1){var un=Math.round(Kt),yn=Math.abs(un),En=Wt.exponentformat;En==="power"||ze(En)&&He(un)?(Yt.text=un===0?1:un===1?"10":"10<sup>"+(un>1?"":L)+yn+"</sup>",Yt.fontSize*=1.25):(En==="e"||En==="E")&&yn>2?Yt.text="1"+En+(un>0?"+":L)+yn:(Yt.text=We(Math.pow(10,Kt),Wt,"","fakehover"),mn==="D1"&&Wt._id.charAt(0)==="y"&&(Yt.dy-=Yt.fontSize/6))}else{if(tn!=="D")throw"unrecognized dtick "+String(mn);Yt.text=String(Math.round(Math.pow(10,m.mod(Kt,1)))),Yt.fontSize*=.75}if(Wt.dtick==="D1"){var Sn=String(Yt.text).charAt(0);Sn!=="0"&&Sn!=="1"||(Wt._id.charAt(0)==="y"?Yt.dx-=Yt.fontSize/4:(Yt.dy+=Yt.fontSize/2,Yt.dx+=(Wt.range[1]>Wt.range[0]?1:-1)*Yt.fontSize*(Kt<0?.5:.25)))}}(De,dt,0,ft,Nt):kt==="category"?function(Wt,Yt){var en=Wt._categories[Math.round(Yt.x)];en===void 0&&(en=""),Yt.text=String(en)}(De,dt):kt==="multicategory"?function(Wt,Yt,en){var Tn=Math.round(Yt.x),Bn=Wt._categories[Tn]||[],mn=Bn[1]===void 0?"":String(Bn[1]),Kt=Bn[0]===void 0?"":String(Bn[0]);en?Yt.text=Kt+" - "+mn:(Yt.text=mn,Yt.text2=Kt)}(De,dt,rt):Xe(De)?function(Wt,Yt,en,Tn,Bn){if(Wt.thetaunit!=="radians"||en)Yt.text=We(Yt.x,Wt,Bn,Tn);else{var mn=Yt.x/180;if(mn===0)Yt.text="0";else{var Kt=function(tn){function un(Nn,_n){return Math.abs(Nn-_n)<=1e-6}var yn=function(Nn){for(var _n=1;!un(Math.round(Nn*_n)/_n,Nn);)_n*=10;return _n}(tn),En=tn*yn,Sn=Math.abs(function Nn(_n,Pn){return un(Pn,0)?_n:Nn(Pn,_n%Pn)}(En,yn));return[Math.round(En/Sn),Math.round(yn/Sn)]}(mn);if(Kt[1]>=100)Yt.text=We(m.deg2rad(Yt.x),Wt,Bn,Tn);else{var cn=Yt.x<0;Kt[1]===1?Kt[0]===1?Yt.text="":Yt.text=Kt[0]+"":Yt.text=["<sup>",Kt[0],"</sup>","","<sub>",Kt[1],"</sub>",""].join(""),cn&&(Yt.text=L+Yt.text)}}}}(De,dt,rt,ft,Nt):function(Wt,Yt,en,Tn,Bn){Bn==="never"?Bn="":Wt.showexponent==="all"&&Math.abs(Yt.x/Wt.dtick)<1e-6&&(Bn="hide"),Yt.text=We(Yt.x,Wt,Bn,Tn)}(De,dt,0,ft,Nt),tt||(De.tickprefix&&!Ft(De.showtickprefix)&&(dt.text=De.tickprefix+dt.text),De.ticksuffix&&!Ft(De.showticksuffix)&&(dt.text+=De.ticksuffix)),De.labelalias&&De.labelalias.hasOwnProperty(dt.text)){var Gt=De.labelalias[dt.text];typeof Gt=="string"&&(dt.text=Gt)}if(De.tickson==="boundaries"||De.showdividers){var an=function(Wt){var Yt=De.l2p(Wt);return Yt>=0&&Yt<=De._length?Wt:null};dt.xbnd=[an(dt.x-.5),an(dt.x+De.dtick-.5)]}return dt},q.hoverLabelText=function(De,Fe,rt){rt&&(De=m.extendFlat({},De,{hoverformat:rt}));var tt=Array.isArray(Fe)?Fe[0]:Fe,gt=Array.isArray(Fe)?Fe[1]:void 0;if(gt!==void 0&&gt!==tt)return q.hoverLabelText(De,tt,rt)+" - "+q.hoverLabelText(De,gt,rt);var dt=De.type==="log"&&tt<=0,mt=q.tickText(De,De.c2l(dt?-tt:tt),"hover").text;return dt?tt===0?"0":L+mt:mt};var Re=["f","p","n","","m","","k","M","G","T"];function ze(De){return De==="SI"||De==="B"}function He(De){return De>14||De<-15}function We(De,Fe,rt,tt){var gt=De<0,dt=Fe._tickround,mt=rt||Fe.exponentformat||"B",ft=Fe._tickexponent,kt=q.getTickFormat(Fe),ht=Fe.separatethousands;if(tt){var pt={exponentformat:mt,minexponent:Fe.minexponent,dtick:Fe.showexponent==="none"?Fe.dtick:M(De)&&Math.abs(De)||1,range:Fe.showexponent==="none"?Fe.range.map(Fe.r2d):[0,De||1]};ye(pt),dt=(Number(pt._tickround)||0)+4,ft=pt._tickexponent,Fe.hoverformat&&(kt=Fe.hoverformat)}if(kt)return Fe._numFormat(kt)(De).replace(/-/g,L);var wt,Ft=Math.pow(10,-dt)/2;if(mt==="none"&&(ft=0),(De=Math.abs(De))<Ft)De="0",gt=!1;else{if(De+=Ft,ft&&(De*=Math.pow(10,-ft),dt+=ft),dt===0)De=String(Math.floor(De));else if(dt<0){De=(De=String(Math.round(De))).substr(0,De.length+dt);for(var Nt=dt;Nt<0;Nt++)De+="0"}else{var Gt=(De=String(De)).indexOf(".")+1;Gt&&(De=De.substr(0,Gt+dt).replace(/\.?0+$/,""))}De=m.numSeparate(De,Fe._separators,ht)}return ft&&mt!=="hide"&&(ze(mt)&&He(ft)&&(mt="power"),wt=ft<0?L+-ft:mt!=="power"?"+"+ft:String(ft),mt==="e"||mt==="E"?De+=mt+wt:mt==="power"?De+="10<sup>"+wt+"</sup>":mt==="B"&&ft===9?De+="B":ze(mt)&&(De+=Re[ft/3+5])),gt?L+De:De}function Je(De,Fe){if(De){var rt=Object.keys(F).reduce(function(tt,gt){return Fe.indexOf(gt)!==-1&&F[gt].forEach(function(dt){tt[dt]=1}),tt},{});Object.keys(De).forEach(function(tt){rt[tt]||(tt.length===1?De[tt]=0:delete De[tt])})}}function lt(De,Fe){for(var rt=[],tt={},gt=0;gt<Fe.length;gt++){var dt=Fe[gt];tt[dt.text2]?tt[dt.text2].push(dt.x):tt[dt.text2]=[dt.x]}for(var mt in tt)rt.push(Pe(De,m.interp(tt[mt],.5),mt));return rt}function et(De){return De.periodX!==void 0?De.periodX:De.x}function yt(De){return[De.text,De.x,De.axInfo,De.font,De.fontSize,De.fontColor].join("_")}function _t(De){var Fe=De.title.font.size,rt=(De.title.text.match(o.BR_TAG_ALL)||[]).length;return De.title.hasOwnProperty("standoff")?rt?Fe*(te+rt*Q):Fe*te:rt?Fe*(rt+1)*Q:Fe}function xt(De,Fe){var rt=De.l2p(Fe);return rt>1&&rt<De._length-1}function at(De){var Fe=A.select(De),rt=Fe.select(".text-math-group");return rt.empty()?Fe.select("text"):rt}function ot(De){return De._id+".automargin"}function At(De){return ot(De)+".mirror"}function Ct(De){return De._id+".rangeslider"}function zt(De,Fe){for(var rt=0;rt<Fe.length;rt++)De.indexOf(Fe[rt])===-1&&De.push(Fe[rt])}function St(De,Fe,rt){var tt,gt,dt=[],mt=[],ft=De.layout;for(tt=0;tt<Fe.length;tt++)dt.push(q.getFromId(De,Fe[tt]));for(tt=0;tt<rt.length;tt++)mt.push(q.getFromId(De,rt[tt]));var kt=Object.keys(n),ht=["anchor","domain","overlaying","position","side","tickangle","editType"],pt=["linear","log"];for(tt=0;tt<kt.length;tt++){var wt=kt[tt],Ft=dt[0][wt],Nt=mt[0][wt],Gt=!0,an=!1,Wt=!1;if(wt.charAt(0)!=="_"&&typeof Ft!="function"&&ht.indexOf(wt)===-1){for(gt=1;gt<dt.length&&Gt;gt++){var Yt=dt[gt][wt];wt==="type"&&pt.indexOf(Ft)!==-1&&pt.indexOf(Yt)!==-1&&Ft!==Yt?an=!0:Yt!==Ft&&(Gt=!1)}for(gt=1;gt<mt.length&&Gt;gt++){var en=mt[gt][wt];wt==="type"&&pt.indexOf(Nt)!==-1&&pt.indexOf(en)!==-1&&Nt!==en?Wt=!0:mt[gt][wt]!==Nt&&(Gt=!1)}Gt&&(an&&(ft[dt[0]._name].type="linear"),Wt&&(ft[mt[0]._name].type="linear"),qe(ft,wt,dt,mt,De._fullLayout._dfltTitle))}}for(tt=0;tt<De._fullLayout.annotations.length;tt++){var Tn=De._fullLayout.annotations[tt];Fe.indexOf(Tn.xref)!==-1&&rt.indexOf(Tn.yref)!==-1&&m.swapAttrs(ft.annotations[tt],["?"])}}function qe(De,Fe,rt,tt,gt){var dt,mt=m.nestedProperty,ft=mt(De[rt[0]._name],Fe).get(),kt=mt(De[tt[0]._name],Fe).get();for(Fe==="title"&&(ft&&ft.text===gt.x&&(ft.text=gt.y),kt&&kt.text===gt.y&&(kt.text=gt.x)),dt=0;dt<rt.length;dt++)mt(De,rt[dt]._name+"."+Fe).set(kt);for(dt=0;dt<tt.length;dt++)mt(De,tt[dt]._name+"."+Fe).set(ft)}function Xe(De){return De._id==="angularaxis"}function Ve(De,Fe){for(var rt=Fe._rangebreaks.length,tt=0;tt<rt;tt++){var gt=Fe._rangebreaks[tt];if(De>=gt.min&&De<gt.max)return gt.max}return De}function Ze(De){return(De.ticklabelposition||"").indexOf("inside")!==-1}function st(De,Fe){Ze(De._anchorAxis||{})&&De._hideCounterAxisInsideTickLabels&&De._hideCounterAxisInsideTickLabels(Fe)}function nt(De,Fe,rt,tt){var gt,dt=De.anchor==="free"||De.overlaying!==void 0&&De.overlaying!==!1?De.overlaying:De._id;gt=tt?De.side==="right"?Fe:-Fe:Fe,dt in rt||(rt[dt]={}),De.side in rt[dt]||(rt[dt][De.side]=0),rt[dt][De.side]+=gt}q.getTickFormat=function(De){var Fe,rt,tt,gt,dt,mt,ft,kt;function ht(Ft){return typeof Ft!="string"?Ft:Number(Ft.replace("M",""))*v}function pt(Ft,Nt){var Gt=["L","D"];if(typeof Ft==typeof Nt){if(typeof Ft=="number")return Ft-Nt;var an=Gt.indexOf(Ft.charAt(0)),Wt=Gt.indexOf(Nt.charAt(0));return an===Wt?Number(Ft.replace(/(L|D)/g,""))-Number(Nt.replace(/(L|D)/g,"")):an-Wt}return typeof Ft=="number"?1:-1}function wt(Ft,Nt){var Gt=Nt[0]===null,an=Nt[1]===null,Wt=pt(Ft,Nt[0])>=0,Yt=pt(Ft,Nt[1])<=0;return(Gt||Wt)&&(an||Yt)}if(De.tickformatstops&&De.tickformatstops.length>0)switch(De.type){case"date":case"linear":for(Fe=0;Fe<De.tickformatstops.length;Fe++)if((tt=De.tickformatstops[Fe]).enabled&&(gt=De.dtick,dt=tt.dtickrange,mt=void 0,ft=void 0,kt=void 0,mt=ht||function(Ft){return Ft},ft=dt[0],kt=dt[1],(!ft&&typeof ft!="number"||mt(ft)<=mt(gt))&&(!kt&&typeof kt!="number"||mt(kt)>=mt(gt)))){rt=tt;break}break;case"log":for(Fe=0;Fe<De.tickformatstops.length;Fe++)if((tt=De.tickformatstops[Fe]).enabled&&wt(De.dtick,tt.dtickrange)){rt=tt;break}}return rt?rt.value:De.tickformat},q.getSubplots=function(De,Fe){var rt=De._fullLayout._subplots,tt=rt.cartesian.concat(rt.gl2d||[]),gt=Fe?q.findSubplotsWithAxis(tt,Fe):tt;return gt.sort(function(dt,mt){var ft=dt.substr(1).split("y"),kt=mt.substr(1).split("y");return ft[0]===kt[0]?+ft[1]-+kt[1]:+ft[0]-+kt[0]}),gt},q.findSubplotsWithAxis=function(De,Fe){for(var rt=new RegExp(Fe._id.charAt(0)==="x"?"^"+Fe._id+"y":Fe._id+"$"),tt=[],gt=0;gt<De.length;gt++){var dt=De[gt];rt.test(dt)&&tt.push(dt)}return tt},q.makeClipPaths=function(De){var Fe=De._fullLayout;if(!Fe._hasOnlyLargeSploms){var rt,tt,gt={_offset:0,_length:Fe.width,_id:""},dt={_offset:0,_length:Fe.height,_id:""},mt=q.list(De,"x",!0),ft=q.list(De,"y",!0),kt=[];for(rt=0;rt<mt.length;rt++)for(kt.push({x:mt[rt],y:dt}),tt=0;tt<ft.length;tt++)rt===0&&kt.push({x:gt,y:ft[tt]}),kt.push({x:mt[rt],y:ft[tt]});var ht=Fe._clips.selectAll(".axesclip").data(kt,function(pt){return pt.x._id+pt.y._id});ht.enter().append("clipPath").classed("axesclip",!0).attr("id",function(pt){return"clip"+Fe._uid+pt.x._id+pt.y._id}).append("rect"),ht.exit().remove(),ht.each(function(pt){A.select(this).select("rect").attr({x:pt.x._offset||0,y:pt.y._offset||0,width:pt.x._length||1,height:pt.y._length||1})})}},q.draw=function(De,Fe,rt){var tt=De._fullLayout;Fe==="redraw"&&tt._paper.selectAll("g.subplot").each(function(ft){var kt=ft[0],ht=tt._plots[kt];if(ht){var pt=ht.xaxis,wt=ht.yaxis;ht.xaxislayer.selectAll("."+pt._id+"tick").remove(),ht.yaxislayer.selectAll("."+wt._id+"tick").remove(),ht.xaxislayer.selectAll("."+pt._id+"tick2").remove(),ht.yaxislayer.selectAll("."+wt._id+"tick2").remove(),ht.xaxislayer.selectAll("."+pt._id+"divider").remove(),ht.yaxislayer.selectAll("."+wt._id+"divider").remove(),ht.minorGridlayer&&ht.minorGridlayer.selectAll("path").remove(),ht.gridlayer&&ht.gridlayer.selectAll("path").remove(),ht.zerolinelayer&&ht.zerolinelayer.selectAll("path").remove(),tt._infolayer.select(".g-"+pt._id+"title").remove(),tt._infolayer.select(".g-"+wt._id+"title").remove()}});var gt=Fe&&Fe!=="redraw"?Fe:q.listIds(De),dt=q.list(De).filter(function(ft){return ft.autoshift}).map(function(ft){return ft.overlaying});gt.map(function(ft){var kt=q.getFromId(De,ft);if(kt.tickmode==="sync"&&kt.overlaying){var ht=gt.findIndex(function(pt){return pt===kt.overlaying});ht>=0&&gt.unshift(gt.splice(ht,1).shift())}});var mt={false:{left:0,right:0}};return m.syncOrAsync(gt.map(function(ft){return function(){if(ft){var kt=q.getFromId(De,ft);rt||(rt={}),rt.axShifts=mt,rt.overlayingShiftedAx=dt;var ht=q.drawOne(De,kt,rt);return kt._shiftPusher&&nt(kt,kt._fullDepth||0,mt,!0),kt._r=kt.range.slice(),kt._rl=m.simpleMap(kt._r,kt.r2l),ht}}}))},q.drawOne=function(De,Fe,rt){var tt,gt,dt,mt=(rt=rt||{}).axShifts||{},ft=rt.overlayingShiftedAx||[];Fe.setScale();var kt=De._fullLayout,ht=Fe._id,pt=ht.charAt(0),wt=q.counterLetter(ht),Ft=kt._plots[Fe._mainSubplot];if(Ft){if(Fe._shiftPusher=Fe.autoshift||ft.indexOf(Fe._id)!==-1||ft.indexOf(Fe.overlaying)!==-1,Fe._shiftPusher&Fe.anchor==="free"){var Nt=Fe.linewidth/2||0;Fe.ticks==="inside"&&(Nt+=Fe.ticklen),nt(Fe,Nt,mt,!0),nt(Fe,Fe.shift||0,mt,!1)}rt.skipTitle===!0&&Fe._shift!==void 0||(Fe._shift=function(gn,$t){return gn.autoshift?$t[gn.overlaying][gn.side]:gn.shift||0}(Fe,mt));var Gt=Ft[pt+"axislayer"],an=Fe._mainLinePosition,Wt=an+=Fe._shift,Yt=Fe._mainMirrorPosition,en=Fe._vals=q.calcTicks(Fe),Tn=[Fe.mirror,Wt,Yt].join("_");for(tt=0;tt<en.length;tt++)en[tt].axInfo=Tn;Fe._selections={},Fe._tickAngles&&(Fe._prevTickAngles=Fe._tickAngles),Fe._tickAngles={},Fe._depth=null;var Bn={};if(Fe.visible){var mn,Kt,cn=q.makeTransTickFn(Fe),tn=q.makeTransTickLabelFn(Fe),un=Fe.ticks==="inside",yn=Fe.ticks==="outside";if(Fe.tickson==="boundaries"){var En=function(gn,$t){var Qt,hn=[],vn=function(Fn,In){var Qn=Fn.xbnd[In];Qn!==null&&hn.push(m.extendFlat({},Fn,{x:Qn}))};if($t.length){for(Qt=0;Qt<$t.length;Qt++)vn($t[Qt],0);vn($t[Qt-1],1)}return hn}(0,en);Kt=q.clipEnds(Fe,En),mn=un?Kt:En}else Kt=q.clipEnds(Fe,en),mn=un&&Fe.ticklabelmode!=="period"?Kt:en;var Sn,Nn=Fe._gridVals=Kt,_n=function(gn,$t){var Qt,hn,vn=[],Fn=$t.length&&$t[$t.length-1].x<$t[0].x,In=function(Wn,Ke){var it=Wn.xbnd[Ke];it!==null&&vn.push(m.extendFlat({},Wn,{x:it}))};if(gn.showdividers&&$t.length){for(Qt=0;Qt<$t.length;Qt++){var Qn=$t[Qt];Qn.text2!==hn&&In(Qn,Fn?1:0),hn=Qn.text2}In($t[Qt-1],Fn?0:1)}return vn}(Fe,en);if(!kt._hasOnlyLargeSploms){var Pn=Fe._subplotsWith,tr={};for(tt=0;tt<Pn.length;tt++){gt=Pn[tt];var ur=(dt=kt._plots[gt])[wt+"axis"],lr=ur._mainAxis._id;if(!tr[lr]){tr[lr]=1;var ir=pt==="x"?"M0,"+ur._offset+"v"+ur._length:"M"+ur._offset+",0h"+ur._length;q.drawGrid(De,Fe,{vals:Nn,counterAxis:ur,layer:dt.gridlayer.select("."+ht),minorLayer:dt.minorGridlayer.select("."+ht),path:ir,transFn:cn}),q.drawZeroLine(De,Fe,{counterAxis:ur,layer:dt.zerolinelayer,path:ir,transFn:cn})}}}var $n=q.getTickSigns(Fe),vr=q.getTickSigns(Fe,"minor");if(Fe.ticks||Fe.minor&&Fe.minor.ticks){var jt,rn,fn,xn,Ln=q.makeTickPath(Fe,Wt,$n[2]),Xn=q.makeTickPath(Fe,Wt,vr[2],{minor:!0});if(Fe._anchorAxis&&Fe.mirror&&Fe.mirror!==!0?(jt=q.makeTickPath(Fe,Yt,$n[3]),rn=q.makeTickPath(Fe,Yt,vr[3],{minor:!0}),fn=Ln+jt,xn=Xn+rn):(jt="",rn="",fn=Ln,xn=Xn),Fe.showdividers&&yn&&Fe.tickson==="boundaries"){var Un={};for(tt=0;tt<_n.length;tt++)Un[_n[tt].x]=1;Sn=function(gn){return Un[gn.x]?jt:fn}}else Sn=function(gn){return gn.minor?xn:fn}}if(q.drawTicks(De,Fe,{vals:mn,layer:Gt,path:Sn,transFn:cn}),Fe.mirror==="allticks"){var Hn=Object.keys(Fe._linepositions||{});for(tt=0;tt<Hn.length;tt++){gt=Hn[tt],dt=kt._plots[gt];var Kn=Fe._linepositions[gt]||[],qt=Kn[0],On=Kn[1],Et=Kn[2],Xt=q.makeTickPath(Fe,qt,Et?$n[0]:vr[0],{minor:Et})+q.makeTickPath(Fe,On,Et?$n[1]:vr[1],{minor:Et});q.drawTicks(De,Fe,{vals:mn,layer:dt[pt+"axislayer"],path:Xt,transFn:cn})}}var nn=[];if(nn.push(function(){return q.drawLabels(De,Fe,{vals:en,layer:Gt,plotinfo:dt,transFn:tn,labelFns:q.makeLabelFns(Fe,Wt)})}),Fe.type==="multicategory"){var An={x:2,y:10}[pt];nn.push(function(){var gn={x:"height",y:"width"}[pt],$t=Rn()[gn]+An+(Fe._tickAngles[ht+"tick"]?Fe.tickfont.size*Q:0);return q.drawLabels(De,Fe,{vals:lt(Fe,en),layer:Gt,cls:ht+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:cn,labelFns:q.makeLabelFns(Fe,Wt+$t*$n[4])})}),nn.push(function(){return Fe._depth=$n[4]*(Rn("tick2")[Fe.side]-Wt),function(gn,$t,Qt){var hn=$t._id+"divider",vn=Qt.vals,Fn=Qt.layer.selectAll("path."+hn).data(vn,yt);Fn.exit().remove(),Fn.enter().insert("path",":first-child").classed(hn,1).classed("crisp",1).call(i.stroke,$t.dividercolor).style("stroke-width",r.crispRound(gn,$t.dividerwidth,1)+"px"),Fn.attr("transform",Qt.transFn).attr("d",Qt.path)}(De,Fe,{vals:_n,layer:Gt,path:q.makeTickPath(Fe,Wt,$n[4],{len:Fe._depth}),transFn:cn})})}else Fe.title.hasOwnProperty("standoff")&&nn.push(function(){Fe._depth=$n[4]*(Rn()[Fe.side]-Wt)});var Cn=_.getComponentMethod("rangeslider","isVisible")(Fe);return rt.skipTitle||Cn&&Fe.side==="bottom"||nn.push(function(){return function(gn,$t){var Qt,hn=gn._fullLayout,vn=$t._id,Fn=vn.charAt(0),In=$t.title.font.size;if($t.title.hasOwnProperty("standoff"))Qt=$t._depth+$t.title.standoff+_t($t);else{var Qn=Ze($t);if($t.type==="multicategory")Qt=$t._depth;else{var Wn=1.5*In;Qn&&(Wn=.5*In,$t.ticks==="outside"&&(Wn+=$t.ticklen)),Qt=10+Wn+($t.linewidth?$t.linewidth-1:0)}Qn||(Qt+=Fn==="x"?$t.side==="top"?In*($t.showticklabels?1:0):In*($t.showticklabels?1.5:.5):$t.side==="right"?In*($t.showticklabels?1:.5):In*($t.showticklabels?.5:0))}var Ke,it,Mt,Lt,Bt=q.getPxPosition(gn,$t);if(Fn==="x"?(it=$t._offset+$t._length/2,Mt=$t.side==="top"?Bt-Qt:Bt+Qt):(Mt=$t._offset+$t._length/2,it=$t.side==="right"?Bt+Qt:Bt-Qt,Ke={rotate:"-90",offset:0}),$t.type!=="multicategory"){var ln=$t._selections[$t._id+"tick"];if(Lt={selection:ln,side:$t.side},ln&&ln.node()&&ln.node().parentNode){var wn=r.getTranslate(ln.node().parentNode);Lt.offsetLeft=wn.x,Lt.offsetTop=wn.y}$t.title.hasOwnProperty("standoff")&&(Lt.pad=0)}return $t._titleStandoff=Qt,e.draw(gn,vn+"title",{propContainer:$t,propName:$t._name+".title.text",placeholder:hn._dfltTitle[Fn],avoid:Lt,transform:Ke,attributes:{x:it,y:Mt,"text-anchor":"middle"}})}(De,Fe)}),nn.push(function(){var gn,$t,Qt,hn,vn=Fe.side.charAt(0),Fn=X[Fe.side].charAt(0),In=q.getPxPosition(De,Fe),Qn=yn?Fe.ticklen:0;(Fe.automargin||Cn||Fe._shiftPusher)&&(Fe.type==="multicategory"?gn=Rn("tick2"):(gn=Rn(),pt==="x"&&vn==="b"&&(Fe._depth=Math.max(gn.width>0?gn.bottom-In:0,Qn))));var Wn=0,Ke=0;if(Fe._shiftPusher&&(Wn=Math.max(Qn,gn.height>0?vn==="l"?In-gn.left:gn.right-In:0),Fe.title.text!==kt._dfltTitle[pt]&&(Ke=(Fe._titleStandoff||0)+(Fe._titleScoot||0),vn==="l"&&(Ke+=_t(Fe))),Fe._fullDepth=Math.max(Wn,Ke)),Fe.automargin){$t={x:0,y:0,r:0,l:0,t:0,b:0};var it=[0,1],Mt=typeof Fe._shift=="number"?Fe._shift:0;if(pt==="x"){if(vn==="b"?$t[vn]=Fe._depth:($t[vn]=Fe._depth=Math.max(gn.width>0?In-gn.top:0,Qn),it.reverse()),gn.width>0){var Lt=gn.right-(Fe._offset+Fe._length);Lt>0&&($t.xr=1,$t.r=Lt);var Bt=Fe._offset-gn.left;Bt>0&&($t.xl=0,$t.l=Bt)}}else if(vn==="l"?(Fe._depth=Math.max(gn.height>0?In-gn.left:0,Qn),$t[vn]=Fe._depth-Mt):(Fe._depth=Math.max(gn.height>0?gn.right-In:0,Qn),$t[vn]=Fe._depth+Mt,it.reverse()),gn.height>0){var ln=gn.bottom-(Fe._offset+Fe._length);ln>0&&($t.yb=0,$t.b=ln);var wn=Fe._offset-gn.top;wn>0&&($t.yt=1,$t.t=wn)}$t[wt]=Fe.anchor==="free"?Fe.position:Fe._anchorAxis.domain[it[0]],Fe.title.text!==kt._dfltTitle[pt]&&($t[vn]+=_t(Fe)+(Fe.title.standoff||0)),Fe.mirror&&Fe.anchor!=="free"&&((Qt={x:0,y:0,r:0,l:0,t:0,b:0})[Fn]=Fe.linewidth,Fe.mirror&&Fe.mirror!==!0&&(Qt[Fn]+=Qn),Fe.mirror===!0||Fe.mirror==="ticks"?Qt[wt]=Fe._anchorAxis.domain[it[1]]:Fe.mirror!=="all"&&Fe.mirror!=="allticks"||(Qt[wt]=[Fe._counterDomainMin,Fe._counterDomainMax][it[1]]))}Cn&&(hn=_.getComponentMethod("rangeslider","autoMarginOpts")(De,Fe)),typeof Fe.automargin=="string"&&(Je($t,Fe.automargin),Je(Qt,Fe.automargin)),l.autoMargin(De,ot(Fe),$t),l.autoMargin(De,At(Fe),Qt),l.autoMargin(De,Ct(Fe),hn)}),m.syncOrAsync(nn)}}function Rn(gn){var $t=ht+(gn||"tick");return Bn[$t]||(Bn[$t]=function(Qt,hn){var vn,Fn,In,Qn;return Qt._selections[hn].size()?(vn=1/0,Fn=-1/0,In=1/0,Qn=-1/0,Qt._selections[hn].each(function(){var Wn=at(this),Ke=r.bBox(Wn.node().parentNode);vn=Math.min(vn,Ke.top),Fn=Math.max(Fn,Ke.bottom),In=Math.min(In,Ke.left),Qn=Math.max(Qn,Ke.right)})):(vn=0,Fn=0,In=0,Qn=0),{top:vn,bottom:Fn,left:In,right:Qn,height:Fn-vn,width:Qn-In}}(Fe,$t)),Bn[$t]}},q.getTickSigns=function(De,Fe){var rt=De._id.charAt(0),tt={x:"top",y:"right"}[rt],gt=De.side===tt?1:-1,dt=[-1,1,gt,-gt];return(Fe?(De.minor||{}).ticks:De.ticks)!=="inside"==(rt==="x")&&(dt=dt.map(function(mt){return-mt})),De.side&&dt.push({l:-1,t:-1,r:1,b:1}[De.side.charAt(0)]),dt},q.makeTransTickFn=function(De){return De._id.charAt(0)==="x"?function(Fe){return f(De._offset+De.l2p(Fe.x),0)}:function(Fe){return f(0,De._offset+De.l2p(Fe.x))}},q.makeTransTickLabelFn=function(De){var Fe=function(gt){var dt=gt.ticklabelposition||"",mt=function(Yt){return dt.indexOf(Yt)!==-1},ft=mt("top"),kt=mt("left"),ht=mt("right"),pt=mt("bottom"),wt=mt("inside"),Ft=pt||kt||ft||ht;if(!Ft&&!wt)return[0,0];var Nt=gt.side,Gt=Ft?(gt.tickwidth||0)/2:0,an=3,Wt=gt.tickfont?gt.tickfont.size:12;return(pt||ft)&&(Gt+=Wt*te,an+=(gt.linewidth||0)/2),(kt||ht)&&(Gt+=(gt.linewidth||0)/2,an+=3),wt&&Nt==="top"&&(an-=Wt*(1-te)),(kt||ft)&&(Gt=-Gt),Nt!=="bottom"&&Nt!=="right"||(an=-an),[Ft?Gt:0,wt?an:0]}(De),rt=Fe[0],tt=Fe[1];return De._id.charAt(0)==="x"?function(gt){return f(rt+De._offset+De.l2p(et(gt)),tt)}:function(gt){return f(tt,rt+De._offset+De.l2p(et(gt)))}},q.makeTickPath=function(De,Fe,rt,tt){tt||(tt={});var gt=tt.minor;if(gt&&!De.minor)return"";var dt=tt.len!==void 0?tt.len:gt?De.minor.ticklen:De.ticklen,mt=De._id.charAt(0),ft=(De.linewidth||1)/2;return mt==="x"?"M0,"+(Fe+ft*rt)+"v"+dt*rt:"M"+(Fe+ft*rt)+",0h"+dt*rt},q.makeLabelFns=function(De,Fe,rt){var tt=De.ticklabelposition||"",gt=function(En){return tt.indexOf(En)!==-1},dt=gt("top"),mt=gt("left"),ft=gt("right"),kt=gt("bottom")||mt||dt||ft,ht=gt("inside"),pt=tt==="inside"&&De.ticks==="inside"||!ht&&De.ticks==="outside"&&De.tickson!=="boundaries",wt=0,Ft=0,Nt=pt?De.ticklen:0;if(ht?Nt*=-1:kt&&(Nt=0),pt&&(wt+=Nt,rt)){var Gt=m.deg2rad(rt);wt=Nt*Math.cos(Gt)+1,Ft=Nt*Math.sin(Gt)}De.showticklabels&&(pt||De.showline)&&(wt+=.2*De.tickfont.size);var an,Wt,Yt,en,Tn,Bn={labelStandoff:wt+=(De.linewidth||1)/2*(ht?-1:1),labelShift:Ft},mn=0,Kt=De.side,cn=De._id.charAt(0),tn=De.tickangle;if(cn==="x")en=(Tn=!ht&&Kt==="bottom"||ht&&Kt==="top")?1:-1,ht&&(en*=-1),an=Ft*en,Wt=Fe+wt*en,Yt=Tn?1:-.2,Math.abs(tn)===90&&(ht?Yt+=W:Yt=tn===-90&&Kt==="bottom"?te:tn===90&&Kt==="top"?W:.5,mn=W/2*(tn/90)),Bn.xFn=function(En){return En.dx+an+mn*En.fontSize},Bn.yFn=function(En){return En.dy+Wt+En.fontSize*Yt},Bn.anchorFn=function(En,Sn){if(kt){if(mt)return"end";if(ft)return"start"}return M(Sn)&&Sn!==0&&Sn!==180?Sn*en<0!==ht?"end":"start":"middle"},Bn.heightFn=function(En,Sn,Nn){return Sn<-60||Sn>60?-.5*Nn:De.side==="top"!==ht?-Nn:0};else if(cn==="y"){if(en=(Tn=!ht&&Kt==="left"||ht&&Kt==="right")?1:-1,ht&&(en*=-1),an=wt,Wt=Ft*en,Yt=0,ht||Math.abs(tn)!==90||(Yt=tn===-90&&Kt==="left"||tn===90&&Kt==="right"?te:.5),ht){var un=M(tn)?+tn:0;if(un!==0){var yn=m.deg2rad(un);mn=Math.abs(Math.sin(yn))*te*en,Yt=0}}Bn.xFn=function(En){return En.dx+Fe-(an+En.fontSize*Yt)*en+mn*En.fontSize},Bn.yFn=function(En){return En.dy+Wt+En.fontSize*W},Bn.anchorFn=function(En,Sn){return M(Sn)&&Math.abs(Sn)===90?"middle":Tn?"end":"start"},Bn.heightFn=function(En,Sn,Nn){return De.side==="right"&&(Sn*=-1),Sn<-30?-Nn:Sn<30?-.5*Nn:0}}return Bn},q.drawTicks=function(De,Fe,rt){rt=rt||{};var tt=Fe._id+"tick",gt=[].concat(Fe.minor&&Fe.minor.ticks?rt.vals.filter(function(mt){return mt.minor&&!mt.noTick}):[]).concat(Fe.ticks?rt.vals.filter(function(mt){return!mt.minor&&!mt.noTick}):[]),dt=rt.layer.selectAll("path."+tt).data(gt,yt);dt.exit().remove(),dt.enter().append("path").classed(tt,1).classed("ticks",1).classed("crisp",rt.crisp!==!1).each(function(mt){return i.stroke(A.select(this),mt.minor?Fe.minor.tickcolor:Fe.tickcolor)}).style("stroke-width",function(mt){return r.crispRound(De,mt.minor?Fe.minor.tickwidth:Fe.tickwidth,1)+"px"}).attr("d",rt.path).style("display",null),st(Fe,[H]),dt.attr("transform",rt.transFn)},q.drawGrid=function(De,Fe,rt){if(rt=rt||{},Fe.tickmode!=="sync"){var tt=Fe._id+"grid",gt=Fe.minor&&Fe.minor.showgrid,dt=gt?rt.vals.filter(function(Yt){return Yt.minor}):[],mt=Fe.showgrid?rt.vals.filter(function(Yt){return!Yt.minor}):[],ft=rt.counterAxis;if(ft&&q.shouldShowZeroLine(De,Fe,ft))for(var kt=Fe.tickmode==="array",ht=0;ht<mt.length;ht++){var pt=mt[ht].x;if(kt?!pt:Math.abs(pt)<Fe.dtick/100){if(mt=mt.slice(0,ht).concat(mt.slice(ht+1)),!kt)break;ht--}}Fe._gw=r.crispRound(De,Fe.gridwidth,1);for(var wt=gt?r.crispRound(De,Fe.minor.gridwidth,1):0,Ft=rt.layer,Nt=rt.minorLayer,Gt=1;Gt>=0;Gt--){var an=Gt?Ft:Nt;if(an){var Wt=an.selectAll("path."+tt).data(Gt?mt:dt,yt);Wt.exit().remove(),Wt.enter().append("path").classed(tt,1).classed("crisp",rt.crisp!==!1),Wt.attr("transform",rt.transFn).attr("d",rt.path).each(function(Yt){return i.stroke(A.select(this),Yt.minor?Fe.minor.gridcolor:Fe.gridcolor||"#ddd")}).style("stroke-dasharray",function(Yt){return r.dashStyle(Yt.minor?Fe.minor.griddash:Fe.griddash,Yt.minor?Fe.minor.gridwidth:Fe.gridwidth)}).style("stroke-width",function(Yt){return(Yt.minor?wt:Fe._gw)+"px"}).style("display",null),typeof rt.path=="function"&&Wt.attr("d",rt.path)}}st(Fe,[G,I])}},q.drawZeroLine=function(De,Fe,rt){rt=rt||rt;var tt=Fe._id+"zl",gt=q.shouldShowZeroLine(De,Fe,rt.counterAxis),dt=rt.layer.selectAll("path."+tt).data(gt?[{x:0,id:Fe._id}]:[]);dt.exit().remove(),dt.enter().append("path").classed(tt,1).classed("zl",1).classed("crisp",rt.crisp!==!1).each(function(){rt.layer.selectAll("path").sort(function(mt,ft){return ne(mt.id,ft.id)})}),dt.attr("transform",rt.transFn).attr("d",rt.path).call(i.stroke,Fe.zerolinecolor||i.defaultLine).style("stroke-width",r.crispRound(De,Fe.zerolinewidth,Fe._gw||1)+"px").style("display",null),st(Fe,[z])},q.drawLabels=function(De,Fe,rt){rt=rt||{};var tt=De._fullLayout,gt=Fe._id,dt=gt.charAt(0),mt=rt.cls||gt+"tick",ft=rt.vals.filter(function(Sn){return Sn.text}),kt=rt.labelFns,ht=rt.secondary?0:Fe.tickangle,pt=(Fe._prevTickAngles||{})[mt],wt=rt.layer.selectAll("g."+mt).data(Fe.showticklabels?ft:[],yt),Ft=[];function Nt(Sn,Nn){Sn.each(function(_n){var Pn=A.select(this),tr=Pn.select(".text-math-group"),ur=kt.anchorFn(_n,Nn),lr=rt.transFn.call(Pn.node(),_n)+(M(Nn)&&+Nn!=0?" rotate("+Nn+","+kt.xFn(_n)+","+(kt.yFn(_n)-_n.fontSize/2)+")":""),ir=o.lineCount(Pn),$n=Q*_n.fontSize,vr=kt.heightFn(_n,M(Nn)?+Nn:0,(ir-1)*$n);if(vr&&(lr+=f(0,vr)),tr.empty()){var jt=Pn.select("text");jt.attr({transform:lr,"text-anchor":ur}),jt.style("opacity",1),Fe._adjustTickLabelsOverflow&&Fe._adjustTickLabelsOverflow()}else{var rn=r.bBox(tr.node()).width*{end:-.5,start:.5}[ur];tr.attr("transform",lr+f(rn,0))}})}wt.enter().append("g").classed(mt,1).append("text").attr("text-anchor","middle").each(function(Sn){var Nn=A.select(this),_n=De._promises.length;Nn.call(o.positionText,kt.xFn(Sn),kt.yFn(Sn)).call(r.font,Sn.font,Sn.fontSize,Sn.fontColor).text(Sn.text).call(o.convertToTspans,De),De._promises[_n]?Ft.push(De._promises.pop().then(function(){Nt(Nn,ht)})):Nt(Nn,ht)}),st(Fe,[N]),wt.exit().remove(),rt.repositionOnUpdate&&wt.each(function(Sn){A.select(this).select("text").call(o.positionText,kt.xFn(Sn),kt.yFn(Sn))}),Fe._adjustTickLabelsOverflow=function(){var Sn=Fe.ticklabeloverflow;if(Sn&&Sn!=="allow"){var Nn=Sn.indexOf("hide")!==-1,_n=Fe._id.charAt(0)==="x",Pn=0,tr=_n?De._fullLayout.width:De._fullLayout.height;if(Sn.indexOf("domain")!==-1){var ur=m.simpleMap(Fe.range,Fe.r2l);Pn=Fe.l2p(ur[0])+Fe._offset,tr=Fe.l2p(ur[1])+Fe._offset}var lr=Math.min(Pn,tr),ir=Math.max(Pn,tr),$n=Fe.side,vr=1/0,jt=-1/0;for(var rn in wt.each(function(Ln){var Xn=A.select(this);if(Xn.select(".text-math-group").empty()){var Un=r.bBox(Xn.node()),Hn=0;_n?(Un.right>ir||Un.left<lr)&&(Hn=1):(Un.bottom>ir||Un.top+(Fe.tickangle?0:Ln.fontSize/4)<lr)&&(Hn=1);var Kn=Xn.select("text");Hn?Nn&&Kn.style("opacity",0):(Kn.style("opacity",1),vr=$n==="bottom"||$n==="right"?Math.min(vr,_n?Un.top:Un.left):-1/0,jt=$n==="top"||$n==="left"?Math.max(jt,_n?Un.bottom:Un.right):1/0)}}),tt._plots){var fn=tt._plots[rn];if(Fe._id===fn.xaxis._id||Fe._id===fn.yaxis._id){var xn=_n?fn.yaxis:fn.xaxis;xn&&(xn["_visibleLabelMin_"+Fe._id]=vr,xn["_visibleLabelMax_"+Fe._id]=jt)}}}},Fe._hideCounterAxisInsideTickLabels=function(Sn){var Nn=Fe._id.charAt(0)==="x",_n=[];for(var Pn in tt._plots){var tr=tt._plots[Pn];Fe._id!==tr.xaxis._id&&Fe._id!==tr.yaxis._id||_n.push(Nn?tr.yaxis:tr.xaxis)}_n.forEach(function(ur,lr){ur&&Ze(ur)&&(Sn||[z,I,G,H,N]).forEach(function(ir){var $n=ir.K==="tick"&&ir.L==="text"&&Fe.ticklabelmode==="period",vr=tt._plots[Fe._mainSubplot];(ir.K===z.K?vr.zerolinelayer.selectAll("."+Fe._id+"zl"):ir.K===I.K?vr.minorGridlayer.selectAll("."+Fe._id):ir.K===G.K?vr.gridlayer.selectAll("."+Fe._id):vr[Fe._id.charAt(0)+"axislayer"]).each(function(){var jt=A.select(this);ir.L&&(jt=jt.selectAll(ir.L)),jt.each(function(rn){var fn=Fe.l2p($n?et(rn):rn.x)+Fe._offset,xn=A.select(this);fn<Fe["_visibleLabelMax_"+ur._id]&&fn>Fe["_visibleLabelMin_"+ur._id]?xn.style("display","none"):ir.K!=="tick"||lr||xn.style("display",null)})})})})},Nt(wt,pt+1?pt:ht);var Gt=null;Fe._selections&&(Fe._selections[mt]=wt);var an=[function(){return Ft.length&&Promise.all(Ft)}];Fe.automargin&&tt._redrawFromAutoMarginCount&&pt===90?(Gt=90,an.push(function(){Nt(wt,pt)})):an.push(function(){if(Nt(wt,ht),ft.length&&dt==="x"&&!M(ht)&&(Fe.type!=="log"||String(Fe.dtick).charAt(0)!=="D")){Gt=0;var Sn,Nn=0,_n=[];if(wt.each(function(Xn){Nn=Math.max(Nn,Xn.fontSize);var Un=Fe.l2p(Xn.x),Hn=at(this),Kn=r.bBox(Hn.node());_n.push({top:0,bottom:10,height:10,left:Un-Kn.width/2,right:Un+Kn.width/2+2,width:Kn.width+2})}),Fe.tickson!=="boundaries"&&!Fe.showdividers||rt.secondary){var Pn=ft.length,tr=Math.abs((ft[Pn-1].x-ft[0].x)*Fe._m)/(Pn-1),ur=Fe.ticklabelposition||"",lr=function(Xn){return ur.indexOf(Xn)!==-1},ir=lr("top"),$n=lr("left"),vr=lr("right"),jt=lr("bottom")||$n||ir||vr?(Fe.tickwidth||0)+6:0,rn=tr<2.5*Nn||Fe.type==="multicategory"||Fe._name==="realaxis";for(Sn=0;Sn<_n.length-1;Sn++)if(m.bBoxIntersect(_n[Sn],_n[Sn+1],jt)){Gt=rn?90:30;break}}else{var fn=2;for(Fe.ticks&&(fn+=Fe.tickwidth/2),Sn=0;Sn<_n.length;Sn++){var xn=ft[Sn].xbnd,Ln=_n[Sn];if(xn[0]!==null&&Ln.left-Fe.l2p(xn[0])<fn||xn[1]!==null&&Fe.l2p(xn[1])-Ln.right<fn){Gt=90;break}}}Gt&&Nt(wt,Gt)}}),Fe._tickAngles&&an.push(function(){Fe._tickAngles[mt]=Gt===null?M(ht)?ht:0:Gt});var Wt=function(){var Sn=0,Nn=0;return wt.each(function(_n,Pn){var tr,ur=at(this);ur.select(".text-math-group").empty()&&(Fe._vals[Pn]&&(tr=Fe._vals[Pn].bb||r.bBox(ur.node()),Fe._vals[Pn].bb=tr),Sn=Math.max(Sn,tr.width),Nn=Math.max(Nn,tr.height))}),{labelsMaxW:Sn,labelsMaxH:Nn}},Yt=Fe._anchorAxis;if(Yt&&(Yt.autorange||Yt.insiderange)&&Ze(Fe)&&!re(tt,Fe._id)&&(tt._insideTickLabelsUpdaterange||(tt._insideTickLabelsUpdaterange={}),Yt.autorange&&(tt._insideTickLabelsUpdaterange[Yt._name+".autorange"]=Yt.autorange,an.push(Wt)),Yt.insiderange)){var en=Wt(),Tn=Fe._id.charAt(0)==="y"?en.labelsMaxW:en.labelsMaxH;Tn+=6,Fe.ticklabelposition==="inside"&&(Tn+=Fe.ticklen||0);var Bn=Fe.side==="right"||Fe.side==="top"?1:-1,mn=Bn===1?1:0,Kt=Bn===1?0:1,cn=[];cn[Kt]=Yt.range[Kt];var tn=Yt.d2p(Yt.range[mn]),un=Yt.d2p(Yt.range[Kt]),yn=Math.abs(un-tn);yn-Tn>0?Tn*=1+Tn/(yn-=Tn):Tn=0,Fe._id.charAt(0)!=="y"&&(Tn=-Tn),cn[mn]=Yt.p2d(Yt.d2p(Yt.range[mn])+Bn*Tn),Yt.autorange==="min"||Yt.autorange==="max reversed"?(cn[0]=null,Yt._rangeInitial0=void 0,Yt._rangeInitial1=void 0):Yt.autorange!=="max"&&Yt.autorange!=="min reversed"||(cn[1]=null,Yt._rangeInitial0=void 0,Yt._rangeInitial1=void 0),tt._insideTickLabelsUpdaterange[Yt._name+".range"]=cn}var En=m.syncOrAsync(an);return En&&En.then&&De._promises.push(En),En},q.getPxPosition=function(De,Fe){var rt,tt=De._fullLayout._size,gt=Fe._id.charAt(0),dt=Fe.side;return Fe.anchor!=="free"?rt=Fe._anchorAxis:gt==="x"?rt={_offset:tt.t+(1-(Fe.position||0))*tt.h,_length:0}:gt==="y"&&(rt={_offset:tt.l+(Fe.position||0)*tt.w+Fe._shift,_length:0}),dt==="top"||dt==="left"?rt._offset:dt==="bottom"||dt==="right"?rt._offset+rt._length:void 0},q.shouldShowZeroLine=function(De,Fe,rt){var tt=m.simpleMap(Fe.range,Fe.r2l);return tt[0]*tt[1]<=0&&Fe.zeroline&&(Fe.type==="linear"||Fe.type==="-")&&!(Fe.rangebreaks&&Fe.maskBreaks(0)===O)&&(xt(Fe,0)||!function(gt,dt,mt,ft){var kt=mt._mainAxis;if(kt){var ht=gt._fullLayout,pt=dt._id.charAt(0),wt=q.counterLetter(dt._id),Ft=dt._offset+(Math.abs(ft[0])<Math.abs(ft[1])==(pt==="x")?0:dt._length),Nt=ht._plots[mt._mainSubplot];if(!(Nt.mainplotinfo||Nt).overlays.length)return Yt(mt);for(var Gt=q.list(gt,wt),an=0;an<Gt.length;an++){var Wt=Gt[an];if(Wt._mainAxis===kt&&Yt(Wt))return!0}}function Yt(en){if(!en.showline||!en.linewidth)return!1;var Tn=Math.max((en.linewidth+dt.zerolinewidth)/2,1);function Bn(cn){return typeof cn=="number"&&Math.abs(cn-Ft)<Tn}if(Bn(en._mainLinePosition)||Bn(en._mainMirrorPosition))return!0;var mn=en._linepositions||{};for(var Kt in mn)if(Bn(mn[Kt][0])||Bn(mn[Kt][1]))return!0}}(De,Fe,rt,tt)||function(gt,dt){for(var mt=gt._fullData,ft=dt._mainSubplot,kt=dt._id.charAt(0),ht=0;ht<mt.length;ht++){var pt=mt[ht];if(pt.visible===!0&&pt.xaxis+pt.yaxis===ft&&(_.traceIs(pt,"bar-like")&&pt.orientation==={x:"h",y:"v"}[kt]||pt.fill&&pt.fill.charAt(pt.fill.length-1)===kt))return!0}return!1}(De,Fe))},q.clipEnds=function(De,Fe){return Fe.filter(function(rt){return xt(De,rt.x)})},q.allowAutoMargin=function(De){for(var Fe=q.list(De,"",!0),rt=0;rt<Fe.length;rt++){var tt=Fe[rt];tt.automargin&&(l.allowAutoMargin(De,ot(tt)),tt.mirror&&l.allowAutoMargin(De,At(tt))),_.getComponentMethod("rangeslider","isVisible")(tt)&&l.allowAutoMargin(De,Ct(tt))}},q.swap=function(De,Fe){for(var rt=function(gt,dt){var mt,ft,kt=[];for(mt=0;mt<dt.length;mt++){var ht=[],pt=gt._fullData[dt[mt]].xaxis,wt=gt._fullData[dt[mt]].yaxis;if(pt&&wt){for(ft=0;ft<kt.length;ft++)kt[ft].x.indexOf(pt)===-1&&kt[ft].y.indexOf(wt)===-1||ht.push(ft);if(ht.length){var Ft,Nt=kt[ht[0]];if(ht.length>1)for(ft=1;ft<ht.length;ft++)Ft=kt[ht[ft]],zt(Nt.x,Ft.x),zt(Nt.y,Ft.y);zt(Nt.x,[pt]),zt(Nt.y,[wt])}else kt.push({x:[pt],y:[wt]})}}return kt}(De,Fe),tt=0;tt<rt.length;tt++)St(De,rt[tt].x,rt[tt].y)}},4322:function($,P,t){var A=t(92770),M=t(71828),l=t(50606).BADNUM,_=M.isArrayOrTypedArray,m=M.isDateTime,f=M.cleanNumber,o=Math.round;function e(r,n){return n?A(r):typeof r=="number"}function i(r){return Math.max(1,(r-1)/1e3)}$.exports=function(r,n,s){var a=r,u=s.noMultiCategory;if(_(a)&&!a.length)return"-";if(!u&&function(h){return _(h[0])&&_(h[1])}(a))return"multicategory";if(u&&Array.isArray(a[0])){for(var p=[],c=0;c<a.length;c++)if(_(a[c]))for(var x=0;x<a[c].length;x++)p.push(a[c][x]);a=p}if(function(h,b){for(var v=h.length,y=i(v),w=0,d=0,S={},T=0;T<v;T+=y){var E=h[o(T)],C=String(E);S[C]||(S[C]=1,m(E,b)&&w++,A(E)&&d++)}return w>2*d}(a,n))return"date";var g=s.autotypenumbers!=="strict";return function(h,b){for(var v=h.length,y=i(v),w=0,d=0,S={},T=0;T<v;T+=y){var E=h[o(T)],C=String(E);if(!S[C]){S[C]=1;var L=typeof E;L==="boolean"?d++:(b?f(E)!==l:L==="number")?w++:L==="string"&&d++}}return d>2*w}(a,g)?"category":function(h,b){for(var v=h.length,y=0;y<v;y++)if(e(h[y],b))return!0;return!1}(a,g)?"linear":"-"}},71453:function($,P,t){var A=t(92770),M=t(73972),l=t(71828),_=t(44467),m=t(85501),f=t(13838),o=t(26218),e=t(38701),i=t(96115),r=t(89426),n=t(15258),s=t(92128),a=t(23608),u=t(21994),p=t(85555).WEEKDAY_PATTERN,c=t(85555).HOUR_PATTERN;function x(b,v,y){function w(z,G){return l.coerce(b,v,f.rangebreaks,z,G)}if(w("enabled")){var d=w("bounds");if(d&&d.length>=2){var S,T,E="";if(d.length===2){for(S=0;S<2;S++)if(T=h(d[S])){E=p;break}}var C=w("pattern",E);if(C===p)for(S=0;S<2;S++)(T=h(d[S]))&&(v.bounds[S]=d[S]=T-1);if(C)for(S=0;S<2;S++)switch(T=d[S],C){case p:if(!A(T)||(T=+T)!==Math.floor(T)||T<0||T>=7)return void(v.enabled=!1);v.bounds[S]=d[S]=T;break;case c:if(!A(T)||(T=+T)<0||T>24)return void(v.enabled=!1);v.bounds[S]=d[S]=T}if(y.autorange===!1){var L=y.range;if(L[0]<L[1]){if(d[0]<L[0]&&d[1]>L[1])return void(v.enabled=!1)}else if(d[0]>L[0]&&d[1]<L[1])return void(v.enabled=!1)}}else{var O=w("values");if(!O||!O.length)return void(v.enabled=!1);w("dvalue")}}}$.exports=function(b,v,y,w,d){var S,T=w.letter,E=w.font||{},C=w.splomStash||{},L=y("visible",!w.visibleDflt),O=v._template||{},z=v.type||O.type||"-";z==="date"&&(M.getComponentMethod("calendars","handleDefaults")(b,v,"calendar",w.calendar),w.noTicklabelmode||(S=y("ticklabelmode")));var G="";w.noTicklabelposition&&z!=="multicategory"||(G=l.coerce(b,v,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:S==="period"?["outside","inside"]:T==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||y("ticklabeloverflow",G.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),u(v,d),a(b,v,y,w),n(b,v,y,w),z==="category"||w.noHover||y("hoverformat");var I=y("color"),H=I!==f.color.dflt?I:E.color,N=C.label||d._dfltTitle[T];if(r(b,v,y,z,w),!L)return v;y("title.text",N),l.coerceFont(y,"title.font",{family:E.family,size:l.bigFont(E.size),color:H}),o(b,v,y,z);var F=w.hasMinor;if(F&&(_.newContainer(v,"minor"),o(b,v,y,z,{isMinor:!0})),i(b,v,y,z,w),e(b,v,y,w),F){var V=w.isMinor;w.isMinor=!0,e(b,v,y,w),w.isMinor=V}s(b,v,y,{dfltColor:I,bgColor:w.bgColor,showGrid:w.showGrid,hasMinor:F,attributes:f}),!F||v.minor.ticks||v.minor.showgrid||delete v.minor,(v.showline||v.ticks)&&y("mirror");var W,te=z==="multicategory";if(w.noTickson||z!=="category"&&!te||!v.ticks&&!v.showgrid||(te&&(W="boundaries"),y("tickson",W)==="boundaries"&&delete v.ticklabelposition),te&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),z==="date")if(m(b,v,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:x}),v.rangebreaks.length){for(var Q=0;Q<v.rangebreaks.length;Q++)if(v.rangebreaks[Q].pattern===p){v._hasDayOfWeekBreaks=!0;break}if(u(v,d),d._has("scattergl")||d._has("splom"))for(var X=0;X<w.data.length;X++){var q=w.data[X];q.type!=="scattergl"&&q.type!=="splom"||(q.visible=!1,l.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}else delete v.rangebreaks;return v};var g={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function h(b){if(typeof b=="string")return g[b.substr(0,3).toLowerCase()]}},12663:function($,P,t){var A=t(31562),M=A.FORMAT_LINK,l=A.DATE_FORMAT_LINK;function _(f,o){return["Sets the "+f+" formatting rule"+(o?"for `"+o+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+M+"."].join(" ")}function m(f,o){return _(f,o)+[" And for dates see: "+l+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}$.exports={axisHoverFormat:function(f,o){return{valType:"string",dflt:"",editType:"none",description:(o?_:m)("hover text",f)+["By default the values are formatted using "+(o?"generic number format":"`"+f+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:_,descriptionWithDates:m}},41675:function($,P,t){var A=t(73972),M=t(85555);function l(_,m){if(m&&m.length){for(var f=0;f<m.length;f++)if(m[f][_])return!0}return!1}P.id2name=function(_){if(typeof _=="string"&&_.match(M.AX_ID_PATTERN)){var m=_.split(" ")[0].substr(1);return m==="1"&&(m=""),_.charAt(0)+"axis"+m}},P.name2id=function(_){if(_.match(M.AX_NAME_PATTERN)){var m=_.substr(5);return m==="1"&&(m=""),_.charAt(0)+m}},P.cleanId=function(_,m,f){var o=/( domain)$/.test(_);if(typeof _=="string"&&_.match(M.AX_ID_PATTERN)&&(!m||_.charAt(0)===m)&&(!o||f)){var e=_.split(" ")[0].substr(1).replace(/^0+/,"");return e==="1"&&(e=""),_.charAt(0)+e+(o&&f?" domain":"")}},P.list=function(_,m,f){var o=_._fullLayout;if(!o)return[];var e,i=P.listIds(_,m),r=new Array(i.length);for(e=0;e<i.length;e++){var n=i[e];r[e]=o[n.charAt(0)+"axis"+n.substr(1)]}if(!f){var s=o._subplots.gl3d||[];for(e=0;e<s.length;e++){var a=o[s[e]];m?r.push(a[m+"axis"]):r.push(a.xaxis,a.yaxis,a.zaxis)}}return r},P.listIds=function(_,m){var f=_._fullLayout;if(!f)return[];var o=f._subplots;return m?o[m+"axis"]:o.xaxis.concat(o.yaxis)},P.getFromId=function(_,m,f){var o=_._fullLayout;return m=m===void 0||typeof m!="string"?m:m.replace(" domain",""),f==="x"?m=m.replace(/y[0-9]*/,""):f==="y"&&(m=m.replace(/x[0-9]*/,"")),o[P.id2name(m)]},P.getFromTrace=function(_,m,f){var o=_._fullLayout,e=null;if(A.traceIs(m,"gl3d")){var i=m.scene;i.substr(0,5)==="scene"&&(e=o[i][f+"axis"])}else e=P.getFromId(_,m[f+"axis"]||f);return e},P.idSort=function(_,m){var f=_.charAt(0),o=m.charAt(0);return f!==o?f>o?1:-1:+(_.substr(1)||1)-+(m.substr(1)||1)},P.ref2id=function(_){return!!/^[xyz]/.test(_)&&_.split(" ")[0]},P.isLinked=function(_,m){return l(m,_._axisMatchGroups)||l(m,_._axisConstraintGroups)}},15258:function($){$.exports=function(P,t,A,M){if(t.type==="category"){var l,_=P.categoryarray,m=Array.isArray(_)&&_.length>0;m&&(l="array");var f,o=A("categoryorder",l);o==="array"&&(f=A("categoryarray")),m||o!=="array"||(o=t.categoryorder="trace"),o==="trace"?t._initialCategories=[]:o==="array"?t._initialCategories=f.slice():(f=function(e,i){var r,n,s,a=i.dataAttr||e._id.charAt(0),u={};if(i.axData)r=i.axData;else for(r=[],n=0;n<i.data.length;n++){var p=i.data[n];p[a+"axis"]===e._id&&r.push(p)}for(n=0;n<r.length;n++){var c=r[n][a];for(s=0;s<c.length;s++){var x=c[s];x!=null&&(u[x]=1)}}return Object.keys(u)}(t,M).sort(),o==="category ascending"?t._initialCategories=f:o==="category descending"&&(t._initialCategories=f.reverse()))}}},66287:function($,P,t){var A=t(92770),M=t(71828),l=t(50606),_=l.ONEDAY,m=l.ONEWEEK;P.dtick=function(f,o){var e=o==="log",i=o==="date",r=o==="category",n=i?_:1;if(!f)return n;if(A(f))return(f=Number(f))<=0?n:r?Math.max(1,Math.round(f)):i?Math.max(.1,f):f;if(typeof f!="string"||!i&&!e)return n;var s=f.charAt(0),a=f.substr(1);return(a=A(a)?Number(a):0)<=0||!(i&&s==="M"&&a===Math.round(a)||e&&s==="L"||e&&s==="D"&&(a===1||a===2))?n:f},P.tick0=function(f,o,e,i){return o==="date"?M.cleanDate(f,M.dateTick0(e,i%m==0?1:0)):i!=="D1"&&i!=="D2"?A(f)?Number(f):0:void 0}},85555:function($,P,t){var A=t(30587).counter;$.exports={idRegex:{x:A("x","( domain)?"),y:A("y","( domain)?")},attrRegex:A("[xy]axis"),xAxisMatch:A("xaxis"),yAxisMatch:A("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},99082:function($,P,t){var A=t(71828),M=t(71739),l=t(41675).id2name,_=t(13838),m=t(42449),f=t(21994),o=t(50606).ALMOST_EQUAL,e=t(18783).FROM_BL;function i(c,x,g){var h=g.axIds,b=g.layoutOut,v=g.hasImage,y=b._axisConstraintGroups,w=b._axisMatchGroups,d=x._id,S=d.charAt(0),T=((b._splomAxes||{})[S]||{})[d]||{},E=x._id,C=E.charAt(0)==="x";function L(Z,J){return A.coerce(c,x,_,Z,J)}x._matchGroup=null,x._constraintGroup=null,L("constrain",v?"domain":"range"),A.coerce(c,x,{constraintoward:{valType:"enumerated",values:C?["left","center","right"]:["bottom","middle","top"],dflt:C?"center":"middle"}},"constraintoward");var O,z,G=x.type,I=[];for(O=0;O<h.length;O++)(z=h[O])!==E&&b[l(z)].type===G&&I.push(z);var H=n(y,E);if(H){var N=[];for(O=0;O<I.length;O++)H[z=I[O]]||N.push(z);I=N}var F,V,W=I.length;W&&(c.matches||T.matches)&&(F=A.coerce(c,x,{matches:{valType:"enumerated",values:I,dflt:I.indexOf(T.matches)!==-1?T.matches:void 0}},"matches"));var te=v&&!C?x.anchor:void 0;if(W&&!F&&(c.scaleanchor||te)&&(V=A.coerce(c,x,{scaleanchor:{valType:"enumerated",values:I.concat([!1])}},"scaleanchor",te)),F){x._matchGroup=s(w,E,F,1);var Q=b[l(F)],X=r(b,x)/r(b,Q);C!==(F.charAt(0)==="x")&&(X=(C?"x":"y")+X),s(y,E,F,X)}else c.matches&&h.indexOf(c.matches)!==-1&&A.warn("ignored "+x._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(V){var q=L("scaleratio");q||(q=x.scaleratio=1),s(y,E,V,q)}else c.scaleanchor&&h.indexOf(c.scaleanchor)!==-1&&A.warn("ignored "+x._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function r(c,x){var g=x.domain;return g||(g=c[l(x.overlaying)].domain),g[1]-g[0]}function n(c,x){for(var g=0;g<c.length;g++)if(c[g][x])return c[g];return null}function s(c,x,g,h){var b,v,y,w,d,S=n(c,x);S===null?((S={})[x]=1,d=c.length,c.push(S)):d=c.indexOf(S);var T=Object.keys(S);for(b=0;b<c.length;b++)if(y=c[b],b!==d&&y[g]){var E=y[g];for(v=0;v<T.length;v++)y[w=T[v]]=a(E,a(h,S[w]));return void c.splice(d,1)}if(h!==1)for(v=0;v<T.length;v++){var C=T[v];S[C]=a(h,S[C])}S[g]=1}function a(c,x){var g,h,b="",v="";typeof c=="string"&&(g=(b=c.match(/^[xy]*/)[0]).length,c=+c.substr(g)),typeof x=="string"&&(h=(v=x.match(/^[xy]*/)[0]).length,x=+x.substr(h));var y=c*x;return g||h?g&&h&&b.charAt(0)!==v.charAt(0)?g===h?y:(g>h?b.substr(h):v.substr(g))+y:b+v+c*x:y}function u(c,x){for(var g=x._size,h=g.h/g.w,b={},v=Object.keys(c),y=0;y<v.length;y++){var w=v[y],d=c[w];if(typeof d=="string"){var S=d.match(/^[xy]*/)[0],T=S.length;d=+d.substr(T);for(var E=S.charAt(0)==="y"?h:1/h,C=0;C<T;C++)d*=E}b[w]=d}return b}function p(c,x){var g=c._inputDomain,h=e[c.constraintoward],b=g[0]+(g[1]-g[0])*h;c.domain=c._input.domain=[b+(g[0]-b)/x,b+(g[1]-b)/x],c.setScale()}P.handleDefaults=function(c,x,g){var h,b,v,y,w,d,S,T,E=g.axIds,C=g.axHasImage,L=x._axisConstraintGroups=[],O=x._axisMatchGroups=[];for(h=0;h<E.length;h++)i(w=c[y=l(E[h])],d=x[y],{axIds:E,layoutOut:x,hasImage:C[y]});function z(Q,X){for(h=0;h<Q.length;h++)for(v in b=Q[h])x[l(v)][X]=b}for(z(O,"_matchGroup"),h=0;h<L.length;h++)for(v in b=L[h])if((d=x[l(v)]).fixedrange){for(var G in b){var I=l(G);(c[I]||{}).fixedrange===!1&&A.warn("fixedrange was specified as false for axis "+I+" but was overridden because another axis in its constraint group has fixedrange true"),x[I].fixedrange=!0}break}for(h=0;h<L.length;){for(v in b=L[h]){(d=x[l(v)])._matchGroup&&Object.keys(d._matchGroup).length===Object.keys(b).length&&(L.splice(h,1),h--);break}h++}z(L,"_constraintGroup");var H=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],N=!1,F=!1;function V(){T=d[S],S==="rangebreaks"&&(F=d._hasDayOfWeekBreaks)}for(h=0;h<O.length;h++){b=O[h];for(var W=0;W<H.length;W++){var te;for(v in S=H[W],T=null,b)if(w=c[y=l(v)],d=x[y],S in d){if(!d.matches&&(te=d,S in w)){V();break}T===null&&S in w&&V()}if(S==="range"&&T&&w.range&&w.range.length===2&&w.range[0]!==null&&w.range[1]!==null&&(N=!0),S==="autorange"&&T===null&&N&&(T=!1),T===null&&S in te&&(T=te[S]),T!==null)for(v in b)(d=x[l(v)])[S]=S==="range"?T.slice():T,S==="rangebreaks"&&(d._hasDayOfWeekBreaks=F,f(d,x))}}},P.enforce=function(c){var x,g,h,b,v,y,w,d,S=c._fullLayout,T=S._axisConstraintGroups||[];for(x=0;x<T.length;x++){h=u(T[x],S);var E=Object.keys(h),C=1/0,L=0,O=1/0,z={},G={},I=!1;for(g=0;g<E.length;g++)G[b=E[g]]=v=S[l(b)],v._inputDomain?v.domain=v._inputDomain.slice():v._inputDomain=v.domain.slice(),v._inputRange||(v._inputRange=v.range.slice()),v.setScale(),z[b]=y=Math.abs(v._m)/h[b],C=Math.min(C,y),v.constrain!=="domain"&&v._constraintShrinkable||(O=Math.min(O,y)),delete v._constraintShrinkable,L=Math.max(L,y),v.constrain==="domain"&&(I=!0);if(!(C>o*L)||I){for(g=0;g<E.length;g++)if(y=z[b=E[g]],w=(v=G[b]).constrain,y!==O||w==="domain")if(d=y/O,w==="range")m(v,d);else{var H=v._inputDomain,N=(v.domain[1]-v.domain[0])/(H[1]-H[0]),F=(v.r2l(v.range[1])-v.r2l(v.range[0]))/(v.r2l(v._inputRange[1])-v.r2l(v._inputRange[0]));if((d/=N)*F<1){v.domain=v._input.domain=H.slice(),m(v,d);continue}if(F<1&&(v.range=v._input.range=v._inputRange.slice(),d*=F),v.autorange){var V=v.r2l(v.range[0]),W=v.r2l(v.range[1]),te=(V+W)/2,Q=te,X=te,q=Math.abs(W-te),Z=te-q*d*1.0001,J=te+q*d*1.0001,ne=M.makePadFn(S,v,0),re=M.makePadFn(S,v,1);p(v,d);var ae,ue,he=Math.abs(v._m),de=M.concatExtremes(c,v),xe=de.min,me=de.max;for(ue=0;ue<xe.length;ue++)(ae=xe[ue].val-ne(xe[ue])/he)>Z&&ae<Q&&(Q=ae);for(ue=0;ue<me.length;ue++)(ae=me[ue].val+re(me[ue])/he)<J&&ae>X&&(X=ae);d/=(X-Q)/(2*q),Q=v.l2r(Q),X=v.l2r(X),v.range=v._input.range=V<W?[Q,X]:[X,Q]}p(v,d)}}}},P.getAxisGroup=function(c,x){for(var g=c._axisMatchGroups,h=0;h<g.length;h++)if(g[h][x])return"g"+h;return x},P.clean=function(c,x){if(x._inputDomain){for(var g=!1,h=x._id,b=c._fullLayout._axisConstraintGroups,v=0;v<b.length;v++)if(b[v][h]){g=!0;break}g&&x.constrain==="domain"||(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}}},29323:function($,P,t){var A=t(39898),M=t(71828),l=M.numberFormat,_=t(84267),m=t(38520),f=t(73972),o=M.strTranslate,e=t(63893),i=t(7901),r=t(91424),n=t(30211),s=t(89298),a=t(6964),u=t(28569),p=t(64505),c=p.selectingOrDrawing,x=p.freeMode,g=t(18783).FROM_TL,h=t(33306),b=t(61549).redrawReglTraces,v=t(74875),y=t(41675).getFromId,w=t(47322).prepSelect,d=t(47322).clearOutline,S=t(47322).selectOnClick,T=t(42449),E=t(85555),C=E.MINDRAG,L=E.MINZOOM,O=!0;function z(ae,ue,he,de){var xe=M.ensureSingle(ae.draglayer,ue,he,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ae.id)});return xe.call(a,de),xe.node()}function G(ae,ue,he,de,xe,me,ve){var Le=z(ae,"rect",ue,he);return A.select(Le).call(r.setRect,de,xe,me,ve),Le}function I(ae,ue){for(var he=0;he<ae.length;he++)if(!ae[he].fixedrange)return ue;return""}function H(ae,ue,he,de,xe){for(var me=0;me<ae.length;me++){var ve=ae[me];if(!ve.fixedrange)if(ve.rangebreaks){var Le=ve._id.charAt(0)==="y",Ae=Le?1-ue:ue,we=Le?1-he:he;de[ve._name+".range[0]"]=ve.l2r(ve.p2l(Ae*ve._length)),de[ve._name+".range[1]"]=ve.l2r(ve.p2l(we*ve._length))}else{var se=ve._rl[0],oe=ve._rl[1]-se;de[ve._name+".range[0]"]=ve.l2r(se+oe*ue),de[ve._name+".range[1]"]=ve.l2r(se+oe*he)}}if(xe&&xe.length){var fe=(ue+(1-he))/2;H(xe,fe,1-fe,de,[])}}function N(ae,ue){for(var he=0;he<ae.length;he++){var de=ae[he];if(!de.fixedrange){if(de.rangebreaks){var xe=de._length,me=(de.p2l(0+ue)-de.p2l(0)+(de.p2l(xe+ue)-de.p2l(xe)))/2;de.range=[de.l2r(de._rl[0]-me),de.l2r(de._rl[1]-me)]}else de.range=[de.l2r(de._rl[0]-ue/de._m),de.l2r(de._rl[1]-ue/de._m)];de.limitRange&&de.limitRange()}}}function F(ae){return 1-(ae>=0?Math.min(ae,.9):1/(1/Math.max(ae,-.3)+3.222))}function V(ae,ue,he,de,xe){return ae.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",o(he,de)).attr("d",xe+"Z")}function W(ae,ue,he){return ae.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",o(ue,he)).attr("d","M0,0Z")}function te(ae,ue,he,de,xe,me){ae.attr("d",de+"M"+he.l+","+he.t+"v"+he.h+"h"+he.w+"v-"+he.h+"h-"+he.w+"Z"),Q(ae,ue,xe,me)}function Q(ae,ue,he,de){he||(ae.transition().style("fill",de>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function X(ae){A.select(ae).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function q(ae){O&&ae.data&&ae._context.showTips&&(M.notifier(M._(ae,"Double-click to zoom back out"),"long"),O=!1)}function Z(ae){var ue=Math.floor(Math.min(ae.b-ae.t,ae.r-ae.l,L)/2);return"M"+(ae.l-3.5)+","+(ae.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(ae.r+3.5)+","+(ae.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(ae.l-3.5)+","+(ae.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function J(ae,ue,he,de,xe){for(var me,ve,Le,Ae,we=!1,se={},oe={},fe=(xe||{}).xaHash,Se=(xe||{}).yaHash,Me=0;Me<ue.length;Me++){var be=ue[Me];for(me in he)if(be[me]){for(Le in be)xe&&(fe[Le]||Se[Le])||(Le.charAt(0)==="x"?he:de)[Le]||(se[Le]=me);for(ve in de)xe&&(fe[ve]||Se[ve])||!be[ve]||(we=!0)}for(ve in de)if(be[ve])for(Ae in be)xe&&(fe[Ae]||Se[Ae])||(Ae.charAt(0)==="x"?he:de)[Ae]||(oe[Ae]=ve)}we&&(M.extendFlat(se,oe),oe={});var Ie={},Be=[];for(Le in se){var ce=y(ae,Le);Be.push(ce),Ie[ce._id]=ce}var Te={},ye=[];for(Ae in oe){var Pe=y(ae,Ae);ye.push(Pe),Te[Pe._id]=Pe}return{xaHash:Ie,yaHash:Te,xaxes:Be,yaxes:ye,xLinks:se,yLinks:oe,isSubplotConstrained:we}}function ne(ae,ue){if(m){var he=ae.onwheel!==void 0?"wheel":"mousewheel";ae._onwheel&&ae.removeEventListener(he,ae._onwheel),ae._onwheel=ue,ae.addEventListener(he,ue,{passive:!1})}else ae.onwheel!==void 0?ae.onwheel=ue:ae.onmousewheel!==void 0?ae.onmousewheel=ue:ae.isAddedWheelEvent||(ae.isAddedWheelEvent=!0,ae.addEventListener("wheel",ue,{passive:!1}))}function re(ae){var ue=[];for(var he in ae)ue.push(ae[he]);return ue}$.exports={makeDragBox:function(ae,ue,he,de,xe,me,ve,Le){var Ae,we,se,oe,fe,Se,Me,be,Ie,Be,ce,Te,ye,Pe,Re,ze,He,We,Je,lt,et,yt,_t,xt=ae._fullLayout._zoomlayer,at=ve+Le==="nsew",ot=(ve+Le).length===1;function At(){if(Ae=ue.xaxis,we=ue.yaxis,Ie=Ae._length,Be=we._length,Me=Ae._offset,be=we._offset,(se={})[Ae._id]=Ae,(oe={})[we._id]=we,ve&&Le)for(var Kt=ue.overlays,cn=0;cn<Kt.length;cn++){var tn=Kt[cn].xaxis;se[tn._id]=tn;var un=Kt[cn].yaxis;oe[un._id]=un}fe=re(se),Se=re(oe),ye=I(fe,Le),Pe=I(Se,ve),Re=!Pe&&!ye,Te=J(ae,ae._fullLayout._axisMatchGroups,se,oe);var yn=(ce=J(ae,ae._fullLayout._axisConstraintGroups,se,oe,Te)).isSubplotConstrained||Te.isSubplotConstrained;ze=Le||yn,He=ve||yn;var En=ae._fullLayout;We=En._has("scattergl"),Je=En._has("splom"),lt=En._has("svg")}he+=ue.yaxis._shift,At();var Ct=function(Kt,cn,tn){return Kt?Kt==="nsew"?tn?"":cn==="pan"?"move":"crosshair":Kt.toLowerCase()+"-resize":"pointer"}(Pe+ye,ae._fullLayout.dragmode,at),zt=G(ue,ve+Le+"drag",Ct,he,de,xe,me);if(Re&&!at)return zt.onmousedown=null,zt.style.pointerEvents="none",zt;var St,qe,Xe,Ve,Ze,st,nt,De,Fe,rt,tt={element:zt,gd:ae,plotinfo:ue};function gt(){tt.plotinfo.selection=!1,d(ae)}function dt(Kt,cn){var tn=tt.gd;if(tn._fullLayout._activeShapeIndex>=0)tn._fullLayout._deactivateShape(tn);else{var un=tn._fullLayout.clickmode;if(X(tn),Kt!==2||ot||Wt(),at)un.indexOf("select")>-1&&S(cn,tn,fe,Se,ue.id,tt),un.indexOf("event")>-1&&n.click(tn,cn,ue.id);else if(Kt===1&&ot){var yn=ve?we:Ae,En=ve==="s"||Le==="w"?0:1,Sn=yn._name+".range["+En+"]",Nn=function(tr,ur){var lr,ir=tr.range[ur],$n=Math.abs(ir-tr.range[1-ur]);return tr.type==="date"?ir:tr.type==="log"?(lr=Math.ceil(Math.max(0,-Math.log($n)/Math.LN10))+3,l("."+lr+"g")(Math.pow(10,ir))):(lr=Math.floor(Math.log(Math.abs(ir))/Math.LN10)-Math.floor(Math.log($n)/Math.LN10)+4,l("."+String(lr)+"g")(ir))}(yn,En),_n="left",Pn="middle";if(yn.fixedrange)return;ve?(Pn=ve==="n"?"top":"bottom",yn.side==="right"&&(_n="right")):Le==="e"&&(_n="right"),tn._context.showAxisRangeEntryBoxes&&A.select(zt).call(e.makeEditable,{gd:tn,immediate:!0,background:tn._fullLayout.paper_bgcolor,text:String(Nn),fill:yn.tickfont?yn.tickfont.color:"#444",horizontalAlign:_n,verticalAlign:Pn}).on("edit",function(tr){var ur=yn.d2r(tr);ur!==void 0&&f.call("_guiRelayout",tn,Sn,ur)})}}}function mt(Kt,cn){if(ae._transitioningWithDuration)return!1;var tn=Math.max(0,Math.min(Ie,yt*Kt+St)),un=Math.max(0,Math.min(Be,_t*cn+qe)),yn=Math.abs(tn-St),En=Math.abs(un-qe);function Sn(){nt="",Xe.r=Xe.l,Xe.t=Xe.b,Fe.attr("d","M0,0Z")}if(Xe.l=Math.min(St,tn),Xe.r=Math.max(St,tn),Xe.t=Math.min(qe,un),Xe.b=Math.max(qe,un),ce.isSubplotConstrained)yn>L||En>L?(nt="xy",yn/Ie>En/Be?(En=yn*Be/Ie,qe>un?Xe.t=qe-En:Xe.b=qe+En):(yn=En*Ie/Be,St>tn?Xe.l=St-yn:Xe.r=St+yn),Fe.attr("d",Z(Xe))):Sn();else if(Te.isSubplotConstrained)if(yn>L||En>L){nt="xy";var Nn=Math.min(Xe.l/Ie,(Be-Xe.b)/Be),_n=Math.max(Xe.r/Ie,(Be-Xe.t)/Be);Xe.l=Nn*Ie,Xe.r=_n*Ie,Xe.b=(1-Nn)*Be,Xe.t=(1-_n)*Be,Fe.attr("d",Z(Xe))}else Sn();else!Pe||En<Math.min(Math.max(.6*yn,C),L)?yn<C||!ye?Sn():(Xe.t=0,Xe.b=Be,nt="x",Fe.attr("d",function(Pn,tr){return"M"+(Pn.l-.5)+","+(tr-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(Pn.r+.5)+","+(tr-L-.5)+"h3v"+(2*L+1)+"h-3Z"}(Xe,qe))):!ye||yn<Math.min(.6*En,L)?(Xe.l=0,Xe.r=Ie,nt="y",Fe.attr("d",function(Pn,tr){return"M"+(tr-L-.5)+","+(Pn.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(tr-L-.5)+","+(Pn.b+.5)+"v3h"+(2*L+1)+"v-3Z"}(Xe,St))):(nt="xy",Fe.attr("d",Z(Xe)));Xe.w=Xe.r-Xe.l,Xe.h=Xe.b-Xe.t,nt&&(rt=!0),ae._dragged=rt,te(De,Fe,Xe,Ze,st,Ve),ft(),ae.emit("plotly_relayouting",et),st=!0}function ft(){et={},nt!=="xy"&&nt!=="x"||(H(fe,Xe.l/Ie,Xe.r/Ie,et,ce.xaxes),Gt("x",et)),nt!=="xy"&&nt!=="y"||(H(Se,(Be-Xe.b)/Be,(Be-Xe.t)/Be,et,ce.yaxes),Gt("y",et))}function kt(){ft(),X(ae),Yt(),q(ae)}tt.prepFn=function(Kt,cn,tn){var un=tt.dragmode,yn=ae._fullLayout.dragmode;yn!==un&&(tt.dragmode=yn),At(),yt=ae._fullLayout._invScaleX,_t=ae._fullLayout._invScaleY,Re||(at?Kt.shiftKey?yn==="pan"?yn="zoom":c(yn)||(yn="pan"):Kt.ctrlKey&&(yn="pan"):yn="pan"),x(yn)?tt.minDrag=1:tt.minDrag=void 0,c(yn)?(tt.xaxes=fe,tt.yaxes=Se,w(Kt,cn,tn,tt,yn)):(tt.clickFn=dt,c(un)&&gt(),Re||(yn==="zoom"?(tt.moveFn=mt,tt.doneFn=kt,tt.minDrag=1,function(En,Sn,Nn){var _n=zt.getBoundingClientRect();St=Sn-_n.left,qe=Nn-_n.top,ae._fullLayout._calcInverseTransform(ae);var Pn=M.apply3DTransform(ae._fullLayout._invTransform)(St,qe);St=Pn[0],qe=Pn[1],Xe={l:St,r:St,w:0,t:qe,b:qe,h:0},Ve=ae._hmpixcount?ae._hmlumcount/ae._hmpixcount:_(ae._fullLayout.plot_bgcolor).getLuminance(),st=!1,nt="xy",rt=!1,De=V(xt,Ve,Me,be,Ze="M0,0H"+Ie+"V"+Be+"H0V0"),Fe=W(xt,Me,be)}(0,cn,tn)):yn==="pan"&&(tt.moveFn=Nt,tt.doneFn=Yt))),ae._fullLayout._redrag=function(){var En=ae._dragdata;if(En&&En.element===zt){var Sn=ae._fullLayout.dragmode;c(Sn)||(At(),en([0,0,Ie,Be]),tt.moveFn(En.dx,En.dy))}}},u.init(tt);var ht=[0,0,Ie,Be],pt=null,wt=E.REDRAWDELAY,Ft=ue.mainplot?ae._fullLayout._plots[ue.mainplot]:ue;function Nt(Kt,cn){if(Kt*=yt,cn*=_t,!ae._transitioningWithDuration){if(ae._fullLayout._replotting=!0,ye==="ew"||Pe==="ns"){var tn=ye?-Kt:0,un=Pe?-cn:0;if(Te.isSubplotConstrained){if(ye&&Pe){var yn=(Kt/Ie-cn/Be)/2;tn=-(Kt=yn*Ie),un=-(cn=-yn*Be)}Pe?tn=-un*Ie/Be:un=-tn*Be/Ie}return ye&&(N(fe,Kt),Gt("x")),Pe&&(N(Se,cn),Gt("y")),en([tn,un,Ie,Be]),an(),void ae.emit("plotly_relayouting",et)}var En,Sn,Nn=ye==="w"==(Pe==="n")?1:-1;if(ye&&Pe&&(ce.isSubplotConstrained||Te.isSubplotConstrained)){var _n=(Kt/Ie+Nn*cn/Be)/2;Kt=_n*Ie,cn=Nn*_n*Be}if(ye==="w"?Kt=lr(fe,0,Kt):ye==="e"?Kt=lr(fe,1,-Kt):ye||(Kt=0),Pe==="n"?cn=lr(Se,1,cn):Pe==="s"?cn=lr(Se,0,-cn):Pe||(cn=0),En=ye==="w"?Kt:0,Sn=Pe==="n"?cn:0,ce.isSubplotConstrained&&!Te.isSubplotConstrained||Te.isSubplotConstrained&&ye&&Pe&&Nn>0){var Pn;if(Te.isSubplotConstrained||!ye&&Pe.length===1){for(Pn=0;Pn<fe.length;Pn++)fe[Pn].range=fe[Pn]._r.slice(),T(fe[Pn],1-cn/Be);En=(Kt=cn*Ie/Be)/2}if(Te.isSubplotConstrained||!Pe&&ye.length===1){for(Pn=0;Pn<Se.length;Pn++)Se[Pn].range=Se[Pn]._r.slice(),T(Se[Pn],1-Kt/Ie);Sn=(cn=Kt*Be/Ie)/2}}Te.isSubplotConstrained&&Pe||Gt("x"),Te.isSubplotConstrained&&ye||Gt("y");var tr=Ie-Kt,ur=Be-cn;!Te.isSubplotConstrained||ye&&Pe||(ye?(Sn=En?0:Kt*Be/Ie,ur=tr*Be/Ie):(En=Sn?0:cn*Ie/Be,tr=ur*Ie/Be)),en([En,Sn,tr,ur]),an(),ae.emit("plotly_relayouting",et)}function lr(ir,$n,vr){for(var jt,rn,fn=1-$n,xn=0;xn<ir.length;xn++){var Ln=ir[xn];if(!Ln.fixedrange){jt=Ln,rn=Ln._rl[fn]+(Ln._rl[$n]-Ln._rl[fn])/F(vr/Ln._length);var Xn=Ln.l2r(rn);Xn!==!1&&Xn!==void 0&&(Ln.range[$n]=Xn)}}return jt._length*(jt._rl[$n]-rn)/(jt._rl[$n]-jt._rl[fn])}}function Gt(Kt,cn){for(var tn=Te.isSubplotConstrained?{x:Se,y:fe}[Kt]:Te[Kt+"axes"],un=Te.isSubplotConstrained?{x:fe,y:Se}[Kt]:[],yn=0;yn<tn.length;yn++){var En=tn[yn],Sn=En._id,Nn=Te.xLinks[Sn]||Te.yLinks[Sn],_n=un[0]||se[Nn]||oe[Nn];_n&&(cn?(cn[En._name+".range[0]"]=cn[_n._name+".range[0]"],cn[En._name+".range[1]"]=cn[_n._name+".range[1]"]):En.range=_n.range.slice())}}function an(){var Kt,cn=[];function tn(Sn){for(Kt=0;Kt<Sn.length;Kt++)Sn[Kt].fixedrange||cn.push(Sn[Kt]._id)}function un(Sn,Nn){for(Kt=0;Kt<Sn.length;Kt++){var _n=Sn[Kt],Pn=_n[Nn];_n.fixedrange||Pn.tickmode!=="sync"||cn.push(Pn._id)}}for(ze&&(tn(fe),tn(ce.xaxes),tn(Te.xaxes),un(ue.overlays,"xaxis")),He&&(tn(Se),tn(ce.yaxes),tn(Te.yaxes),un(ue.overlays,"yaxis")),et={},Kt=0;Kt<cn.length;Kt++){var yn=cn[Kt],En=y(ae,yn);s.drawOne(ae,En,{skipTitle:!0}),et[En._name+".range[0]"]=En.range[0],et[En._name+".range[1]"]=En.range[1]}s.redrawComponents(ae,cn)}function Wt(){if(!ae._transitioningWithDuration){var Kt=ae._context.doubleClick,cn=[];ye&&(cn=cn.concat(fe)),Pe&&(cn=cn.concat(Se)),Te.xaxes&&(cn=cn.concat(Te.xaxes)),Te.yaxes&&(cn=cn.concat(Te.yaxes));var tn,un,yn={};if(Kt==="reset+autosize")for(Kt="autosize",un=0;un<cn.length;un++){var En=(tn=cn[un])._rangeInitial0,Sn=tn._rangeInitial1,Nn=En!==void 0||Sn!==void 0;if(Nn&&(En!==void 0&&En!==tn.range[0]||Sn!==void 0&&Sn!==tn.range[1])||!Nn&&tn.autorange!==!0){Kt="reset";break}}if(Kt==="autosize")for(un=0;un<cn.length;un++)(tn=cn[un]).fixedrange||(yn[tn._name+".autorange"]=!0);else if(Kt==="reset"){for((ye||ce.isSubplotConstrained)&&(cn=cn.concat(ce.xaxes)),Pe&&!ce.isSubplotConstrained&&(cn=cn.concat(ce.yaxes)),ce.isSubplotConstrained&&(ye?Pe||(cn=cn.concat(Se)):cn=cn.concat(fe)),un=0;un<cn.length;un++)if(!(tn=cn[un]).fixedrange){var _n=tn._name,Pn=tn._autorangeInitial;tn._rangeInitial0===void 0&&tn._rangeInitial1===void 0?yn[_n+".autorange"]=!0:tn._rangeInitial0===void 0?(yn[_n+".autorange"]=Pn,yn[_n+".range"]=[null,tn._rangeInitial1]):tn._rangeInitial1===void 0?(yn[_n+".range"]=[tn._rangeInitial0,null],yn[_n+".autorange"]=Pn):yn[_n+".range"]=[tn._rangeInitial0,tn._rangeInitial1]}}ae.emit("plotly_doubleclick",null),f.call("_guiRelayout",ae,yn)}}function Yt(){en([0,0,Ie,Be]),M.syncOrAsync([v.previousPromises,function(){ae._fullLayout._replotting=!1,f.call("_guiRelayout",ae,et)}],ae)}function en(Kt){var cn,tn,un,yn,En=ae._fullLayout,Sn=En._plots,Nn=En._subplots.cartesian;if(Je&&f.subplotsRegistry.splom.drag(ae),We){for(cn=0;cn<Nn.length;cn++)if(un=(tn=Sn[Nn[cn]]).xaxis,yn=tn.yaxis,tn._scene){var _n=M.simpleMap(un.range,un.r2l),Pn=M.simpleMap(yn.range,yn.r2l);un.limitRange&&un.limitRange(),yn.limitRange&&yn.limitRange(),_n=un.range,Pn=yn.range,tn._scene.update({range:[_n[0],Pn[0],_n[1],Pn[1]]})}}if((Je||We)&&(h(ae),b(ae)),lt){var tr=Kt[2]/Ae._length,ur=Kt[3]/we._length;for(cn=0;cn<Nn.length;cn++){un=(tn=Sn[Nn[cn]]).xaxis,yn=tn.yaxis;var lr,ir,$n,vr,jt=(ze||Te.isSubplotConstrained)&&!un.fixedrange&&se[un._id],rn=(He||Te.isSubplotConstrained)&&!yn.fixedrange&&oe[yn._id];if(jt?(lr=tr,$n=Le||Te.isSubplotConstrained?Kt[0]:mn(un,lr)):Te.xaHash[un._id]?(lr=tr,$n=Kt[0]*un._length/Ae._length):Te.yaHash[un._id]?(lr=ur,$n=Pe==="ns"?-Kt[1]*un._length/we._length:mn(un,lr,{n:"top",s:"bottom"}[Pe])):$n=Bn(un,lr=Tn(un,tr,ur)),lr>1&&(un.maxallowed!==void 0&&ze===(un.range[0]<un.range[1]?"e":"w")||un.minallowed!==void 0&&ze===(un.range[0]<un.range[1]?"w":"e"))&&(lr=1,$n=0),rn?(ir=ur,vr=ve||Te.isSubplotConstrained?Kt[1]:mn(yn,ir)):Te.yaHash[yn._id]?(ir=ur,vr=Kt[1]*yn._length/we._length):Te.xaHash[yn._id]?(ir=tr,vr=ye==="ew"?-Kt[0]*yn._length/Ae._length:mn(yn,ir,{e:"right",w:"left"}[ye])):vr=Bn(yn,ir=Tn(yn,tr,ur)),ir>1&&(yn.maxallowed!==void 0&&He===(yn.range[0]<yn.range[1]?"n":"s")||yn.minallowed!==void 0&&He===(yn.range[0]<yn.range[1]?"s":"n"))&&(ir=1,vr=0),lr||ir){lr||(lr=1),ir||(ir=1);var fn=un._offset-$n/lr,xn=yn._offset-vr/ir;tn.clipRect.call(r.setTranslate,$n,vr).call(r.setScale,lr,ir),tn.plot.call(r.setTranslate,fn,xn).call(r.setScale,1/lr,1/ir),lr===tn.xScaleFactor&&ir===tn.yScaleFactor||(r.setPointGroupScale(tn.zoomScalePts,lr,ir),r.setTextPointsScale(tn.zoomScaleTxt,lr,ir)),r.hideOutsideRangePoints(tn.clipOnAxisFalseTraces,tn),tn.xScaleFactor=lr,tn.yScaleFactor=ir}}}}function Tn(Kt,cn,tn){return Kt.fixedrange?0:ze&&ce.xaHash[Kt._id]?cn:He&&(ce.isSubplotConstrained?ce.xaHash:ce.yaHash)[Kt._id]?tn:0}function Bn(Kt,cn){return cn?(Kt.range=Kt._r.slice(),T(Kt,cn),mn(Kt,cn)):0}function mn(Kt,cn,tn){return Kt._length*(1-cn)*g[tn||Kt.constraintoward||"middle"]}return ve.length*Le.length!=1&&ne(zt,function(Kt){if(ae._context._scrollZoom.cartesian||ae._fullLayout._enablescrollzoom){if(gt(),ae._transitioningWithDuration)return Kt.preventDefault(),void Kt.stopPropagation();At(),clearTimeout(pt);var cn=-Kt.deltaY;if(isFinite(cn)||(cn=Kt.wheelDelta/10),isFinite(cn)){var tn,un=Math.exp(-Math.min(Math.max(cn,-20),20)/200),yn=Ft.draglayer.select(".nsewdrag").node().getBoundingClientRect(),En=(Kt.clientX-yn.left)/yn.width,Sn=(yn.bottom-Kt.clientY)/yn.height;if(ze){for(Le||(En=.5),tn=0;tn<fe.length;tn++)Nn(fe[tn],En,un);Gt("x"),ht[2]*=un,ht[0]+=ht[2]*En*(1/un-1)}if(He){for(ve||(Sn=.5),tn=0;tn<Se.length;tn++)Nn(Se[tn],Sn,un);Gt("y"),ht[3]*=un,ht[1]+=ht[3]*(1-Sn)*(1/un-1)}en(ht),an(),ae.emit("plotly_relayouting",et),pt=setTimeout(function(){ae._fullLayout&&(ht=[0,0,Ie,Be],Yt())},wt),Kt.preventDefault()}else M.log("Did not find wheel motion attributes: ",Kt)}function Nn(_n,Pn,tr){if(!_n.fixedrange){var ur=M.simpleMap(_n.range,_n.r2l),lr=ur[0]+(ur[1]-ur[0])*Pn;_n.range=ur.map(function(ir){return _n.l2r(lr+(ir-lr)*tr)})}}}),zt},makeDragger:z,makeRectDragger:G,makeZoombox:V,makeCorners:W,updateZoombox:te,xyCorners:Z,transitionZoombox:Q,removeZoombox:X,showDoubleClickNotifier:q,attachWheelEventHandler:ne}},4305:function($,P,t){var A=t(39898),M=t(30211),l=t(28569),_=t(6964),m=t(29323).makeDragBox,f=t(85555).DRAGGERSIZE;P.initInteractions=function(o){var e=o._fullLayout;if(o._context.staticPlot)A.select(o).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(r,n){if((e._plots[r].mainplot&&!0)===(e._plots[n].mainplot&&!0)){var s=r.split("y"),a=n.split("y");return s[0]===a[0]?Number(s[1]||1)-Number(a[1]||1):Number(s[0]||1)-Number(a[0]||1)}return e._plots[r].mainplot?1:-1}).forEach(function(r){var n=e._plots[r],s=n.xaxis,a=n.yaxis;if(!n.mainplot){var u=m(o,n,s._offset,a._offset,s._length,a._length,"ns","ew");u.onmousemove=function(x){o._fullLayout._rehover=function(){o._fullLayout._hoversubplot===r&&o._fullLayout._plots[r]&&M.hover(o,x,r)},M.hover(o,x,r),o._fullLayout._lasthover=u,o._fullLayout._hoversubplot=r},u.onmouseout=function(x){o._dragging||(o._fullLayout._hoversubplot=null,l.unhover(o,x))},o._context.showAxisDragHandles&&(m(o,n,s._offset-f,a._offset-f,f,f,"n","w"),m(o,n,s._offset+s._length,a._offset-f,f,f,"n","e"),m(o,n,s._offset-f,a._offset+a._length,f,f,"s","w"),m(o,n,s._offset+s._length,a._offset+a._length,f,f,"s","e"))}if(o._context.showAxisDragHandles){if(r===s._mainSubplot){var p=s._mainLinePosition;s.side==="top"&&(p-=f),m(o,n,s._offset+.1*s._length,p,.8*s._length,f,"","ew"),m(o,n,s._offset,p,.1*s._length,f,"","w"),m(o,n,s._offset+.9*s._length,p,.1*s._length,f,"","e")}if(r===a._mainSubplot){var c=a._mainLinePosition;a.side!=="right"&&(c-=f),m(o,n,c,a._offset+.1*a._length,f,.8*a._length,"ns",""),m(o,n,c,a._offset+.9*a._length,f,.1*a._length,"s",""),m(o,n,c,a._offset,f,.1*a._length,"n","")}}});var i=e._hoverlayer.node();i.onmousemove=function(r){r.target=o._fullLayout._lasthover,M.hover(o,r,e._hoversubplot)},i.onclick=function(r){r.target=o._fullLayout._lasthover,M.click(o,r)},i.onmousedown=function(r){o._fullLayout._lasthover.onmousedown(r)},P.updateFx(o)}},P.updateFx=function(o){var e=o._fullLayout,i=e.dragmode==="pan"?"move":"crosshair";_(e._draggers,i)}},76325:function($,P,t){var A=t(73972),M=t(71828),l=t(41675);$.exports=function(_){return function(m,f){var o=m[_];if(Array.isArray(o))for(var e=A.subplotsRegistry.cartesian,i=e.idRegex,r=f._subplots,n=r.xaxis,s=r.yaxis,a=r.cartesian,u=f._has("cartesian")||f._has("gl2d"),p=0;p<o.length;p++){var c=o[p];if(M.isPlainObject(c)){var x=l.cleanId(c.xref,"x",!1),g=l.cleanId(c.yref,"y",!1),h=i.x.test(x),b=i.y.test(g);if(h||b){u||M.pushUnique(f._basePlotModules,e);var v=!1;h&&n.indexOf(x)===-1&&(n.push(x),v=!0),b&&s.indexOf(g)===-1&&(s.push(g),v=!0),v&&h&&b&&a.push(x+g)}}}}}},93612:function($,P,t){var A=t(39898),M=t(73972),l=t(71828),_=t(74875),m=t(91424),f=t(27659).a0,o=t(41675),e=t(85555),i=t(77922),r=l.ensureSingle;function n(c,x,g){return l.ensureSingle(c,x,g,function(h){h.datum(g)})}function s(c,x,g,h,b){for(var v,y,w,d=e.traceLayerClasses,S=c._fullLayout,T=S._modules,E=[],C=[],L=0;L<T.length;L++){var O=(v=T[L]).name,z=M.modules[O].categories;if(z.svg){var G=v.layerName||O+"layer",I=v.plot;w=(y=f(g,I))[0],g=y[1],w.length&&E.push({i:d.indexOf(G),className:G,plotMethod:I,cdModule:w}),z.zoomScale&&C.push("."+G)}}E.sort(function(F,V){return F.i-V.i});var H=x.plot.selectAll("g.mlayer").data(E,function(F){return F.className});if(H.enter().append("g").attr("class",function(F){return F.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),H.exit().remove(),H.order(),H.each(function(F){var V=A.select(this),W=F.className;F.plotMethod(c,x,F.cdModule,V,h,b),e.clipOnAxisFalseQuery.indexOf("."+W)===-1&&m.setClipUrl(V,x.layerClipId,c)}),S._has("scattergl")&&(v=M.getModule("scattergl"),w=f(g,v)[0],v.plot(c,x,w)),!c._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(e.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),C.length)){var N=x.plot.selectAll(C.join(",")).selectAll(".trace");x.zoomScalePts=N.selectAll("path.point"),x.zoomScaleTxt=N.selectAll(".textpoint")}}function a(c,x){var g=x.plotgroup,h=x.id,b=e.layerValue2layerClass[x.xaxis.layer],v=e.layerValue2layerClass[x.yaxis.layer],y=c._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var w=x.mainplotinfo,d=w.plotgroup,S=h+"-x",T=h+"-y";x.minorGridlayer=w.minorGridlayer,x.gridlayer=w.gridlayer,x.zerolinelayer=w.zerolinelayer,r(w.overlinesBelow,"path",S),r(w.overlinesBelow,"path",T),r(w.overaxesBelow,"g",S),r(w.overaxesBelow,"g",T),x.plot=r(w.overplot,"g",h),r(w.overlinesAbove,"path",S),r(w.overlinesAbove,"path",T),r(w.overaxesAbove,"g",S),r(w.overaxesAbove,"g",T),x.xlines=d.select(".overlines-"+b).select("."+S),x.ylines=d.select(".overlines-"+v).select("."+T),x.xaxislayer=d.select(".overaxes-"+b).select("."+S),x.yaxislayer=d.select(".overaxes-"+v).select("."+T)}else if(y)x.xlines=r(g,"path","xlines-above"),x.ylines=r(g,"path","ylines-above"),x.xaxislayer=r(g,"g","xaxislayer-above"),x.yaxislayer=r(g,"g","yaxislayer-above");else{var E=r(g,"g","layer-subplot");x.shapelayer=r(E,"g","shapelayer"),x.imagelayer=r(E,"g","imagelayer"),x.minorGridlayer=r(g,"g","minor-gridlayer"),x.gridlayer=r(g,"g","gridlayer"),x.zerolinelayer=r(g,"g","zerolinelayer"),r(g,"path","xlines-below"),r(g,"path","ylines-below"),x.overlinesBelow=r(g,"g","overlines-below"),r(g,"g","xaxislayer-below"),r(g,"g","yaxislayer-below"),x.overaxesBelow=r(g,"g","overaxes-below"),x.plot=r(g,"g","plot"),x.overplot=r(g,"g","overplot"),x.xlines=r(g,"path","xlines-above"),x.ylines=r(g,"path","ylines-above"),x.overlinesAbove=r(g,"g","overlines-above"),r(g,"g","xaxislayer-above"),r(g,"g","yaxislayer-above"),x.overaxesAbove=r(g,"g","overaxes-above"),x.xlines=g.select(".xlines-"+b),x.ylines=g.select(".ylines-"+v),x.xaxislayer=g.select(".xaxislayer-"+b),x.yaxislayer=g.select(".yaxislayer-"+v)}y||(n(x.minorGridlayer,"g",x.xaxis._id),n(x.minorGridlayer,"g",x.yaxis._id),x.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(o.idSort),n(x.gridlayer,"g",x.xaxis._id),n(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(o.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function u(c,x){if(c){var g={};for(var h in c.each(function(w){var d=w[0];A.select(this).remove(),p(d,x),g[d]=!0}),x._plots)for(var b=x._plots[h].overlays||[],v=0;v<b.length;v++){var y=b[v];g[y.id]&&y.plot.selectAll(".trace").remove()}}}function p(c,x){x._draggers.selectAll("g."+c).remove(),x._defs.select("#clip"+x._uid+c+"plot").remove()}P.name="cartesian",P.attr=["xaxis","yaxis"],P.idRoot=["x","y"],P.idRegex=e.idRegex,P.attrRegex=e.attrRegex,P.attributes=t(89502),P.layoutAttributes=t(13838),P.supplyLayoutDefaults=t(86763),P.transitionAxes=t(66847),P.finalizeSubplots=function(c,x){var g,h,b,v=x._subplots,y=v.xaxis,w=v.yaxis,d=v.cartesian,S=d.concat(v.gl2d||[]),T={},E={};for(g=0;g<S.length;g++){var C=S[g].split("y");T[C[0]]=1,E["y"+C[1]]=1}for(g=0;g<y.length;g++)T[h=y[g]]||(b=(c[o.id2name(h)]||{}).anchor,e.idRegex.y.test(b)||(b="y"),d.push(h+b),S.push(h+b),E[b]||(E[b]=1,l.pushUnique(w,b)));for(g=0;g<w.length;g++)E[b=w[g]]||(h=(c[o.id2name(b)]||{}).anchor,e.idRegex.x.test(h)||(h="x"),d.push(h+b),S.push(h+b),T[h]||(T[h]=1,l.pushUnique(y,h)));if(!S.length){for(var L in h="",b="",c)e.attrRegex.test(L)&&(L.charAt(0)==="x"?(!h||+L.substr(5)<+h.substr(5))&&(h=L):(!b||+L.substr(5)<+b.substr(5))&&(b=L));h=h?o.name2id(h):"x",b=b?o.name2id(b):"y",y.push(h),w.push(b),d.push(h+b)}},P.plot=function(c,x,g,h){var b,v=c._fullLayout,y=v._subplots.cartesian,w=c.calcdata;if(!Array.isArray(x))for(x=[],b=0;b<w.length;b++)x.push(b);for(b=0;b<y.length;b++){for(var d,S=y[b],T=v._plots[S],E=[],C=0;C<w.length;C++){var L=w[C],O=L[0].trace;O.xaxis+O.yaxis===S&&((x.indexOf(O.index)!==-1||O.carpet)&&(d&&d[0].trace.xaxis+d[0].trace.yaxis===S&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&E.indexOf(d)===-1&&E.push(d),E.push(L)),d=L)}s(c,T,E,g,h)}},P.clean=function(c,x,g,h){var b,v,y,w=h._plots||{},d=x._plots||{},S=h._subplots||{};if(h._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(y in w)(b=w[y]).plotgroup&&b.plotgroup.remove();var T=h._has&&h._has("gl"),E=x._has&&x._has("gl");if(T&&!E)for(y in w)(b=w[y])._scene&&b._scene.destroy();if(S.xaxis&&S.yaxis){var C=o.listIds({_fullLayout:h});for(v=0;v<C.length;v++){var L=C[v];x[o.id2name(L)]||h._infolayer.selectAll(".g-"+L+"title").remove()}}var O=h._has&&h._has("cartesian"),z=x._has&&x._has("cartesian");if(O&&!z)u(h._cartesianlayer.selectAll(".subplot"),h),h._defs.selectAll(".axesclip").remove(),delete h._axisConstraintGroups,delete h._axisMatchGroups;else if(S.cartesian)for(v=0;v<S.cartesian.length;v++){var G=S.cartesian[v];if(!d[G]){var I="."+G+",."+G+"-x,."+G+"-y";h._cartesianlayer.selectAll(I).remove(),p(G,h)}}},P.drawFramework=function(c){var x=c._fullLayout,g=function(b){var v,y,w,d,S,T,E=b._fullLayout,C=E._subplots.cartesian,L=C.length,O=[],z=[];for(v=0;v<L;v++){w=C[v],S=(d=E._plots[w]).xaxis,T=d.yaxis;var G=S._mainAxis,I=T._mainAxis,H=G._id+I._id,N=E._plots[H];d.overlays=[],H!==w&&N?(d.mainplot=H,d.mainplotinfo=N,z.push(w)):(d.mainplot=void 0,d.mainplotinfo=void 0,O.push(w))}for(v=0;v<z.length;v++)w=z[v],(d=E._plots[w]).mainplotinfo.overlays.push(d);var F=O.concat(z),V=new Array(L);for(v=0;v<L;v++){w=F[v],S=(d=E._plots[w]).xaxis,T=d.yaxis;var W=[w,S.layer,T.layer,S.overlaying||"",T.overlaying||""];for(y=0;y<d.overlays.length;y++)W.push(d.overlays[y].id);V[v]=W}return V}(c),h=x._cartesianlayer.selectAll(".subplot").data(g,String);h.enter().append("g").attr("class",function(b){return"subplot "+b[0]}),h.order(),h.exit().call(u,x),h.each(function(b){var v=b[0],y=x._plots[v];y.plotgroup=A.select(this),a(c,y),y.draglayer=r(x._draggers,"g",v)})},P.rangePlot=function(c,x,g){a(c,x),s(c,x,g),_.style(c)},P.toSVG=function(c){var x=c._fullLayout._glimages,g=A.select(c).selectAll(".svg-container");g.filter(function(h,b){return b===g.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var h=this,b=h.toDataURL("image/png");x.append("svg:image").attr({xmlns:i.svg,"xlink:href":b,preserveAspectRatio:"none",x:0,y:0,width:h.style.width,height:h.style.height})})},P.updateFx=t(4305).updateFx},13838:function($,P,t){var A=t(41940),M=t(22399),l=t(79952).P,_=t(1426).extendFlat,m=t(44467).templatedArray,f=t(12663).descriptionWithDates,o=t(50606).ONEDAY,e=t(85555),i=e.HOUR_PATTERN,r=e.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},s=_({},n,{values:n.values.slice().concat(["sync"])});function a(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},c={valType:"data_array",editType:"ticks"},x={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function g(S){var T={valType:"number",min:0,editType:"ticks"};return S||(T.dflt=5),T}function h(S){var T={valType:"number",min:0,editType:"ticks"};return S||(T.dflt=1),T}var b={valType:"color",dflt:M.defaultLine,editType:"ticks"},v={valType:"color",dflt:M.lightLine,editType:"ticks"};function y(S){var T={valType:"number",min:0,editType:"ticks"};return S||(T.dflt=1),T}var w=_({},l,{editType:"ticks"}),d={valType:"boolean",editType:"ticks"};$.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:M.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:A({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"calc"},rangebreaks:m("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[r,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:o},editType:"calc"}),tickmode:s,nticks:a(),tick0:u,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:c,ticktext:{valType:"data_array",editType:"ticks"},ticks:x,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:g(),tickwidth:h(),tickcolor:b,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_({},l,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:A({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:f("tick label")},tickformatstops:m("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:f("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:M.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:d,gridcolor:v,gridwidth:y(),griddash:w,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:M.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:M.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",e.idRegex.x.toString(),e.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:a("minor"),tick0:u,dtick:p,tickvals:c,ticks:x,ticklen:g("minor"),tickwidth:h("minor"),tickcolor:b,gridcolor:v,gridwidth:y("minor"),griddash:w,showgrid:d,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:A({editType:"ticks"})}}},86763:function($,P,t){var A=t(71828),M=t(7901),l=t(23469).isUnifiedHover,_=t(98212),m=t(44467),f=t(10820),o=t(13838),e=t(951),i=t(71453),r=t(99082),n=t(52830),s=t(41675),a=s.id2name,u=s.name2id,p=t(85555).AX_ID_PATTERN,c=t(73972),x=c.traceIs,g=c.getComponentMethod;function h(b,v,y){Array.isArray(b[v])?b[v].push(y):b[v]=[y]}$.exports=function(b,v,y){var w,d,S=v.autotypenumbers,T={},E={},C={},L={},O={},z={},G={},I={},H={},N={};for(w=0;w<y.length;w++){var F=y[w];if(x(F,"cartesian")||x(F,"gl2d")){var V,W;if(F.xaxis)V=a(F.xaxis),h(T,V,F);else if(F.xaxes)for(d=0;d<F.xaxes.length;d++)h(T,a(F.xaxes[d]),F);if(F.yaxis)W=a(F.yaxis),h(T,W,F);else if(F.yaxes)for(d=0;d<F.yaxes.length;d++)h(T,a(F.yaxes[d]),F);F.type==="funnel"?F.orientation==="h"?(V&&(E[V]=!0),W&&(G[W]=!0)):W&&(C[W]=!0):F.type==="image"?(W&&(I[W]=!0),V&&(I[V]=!0)):(W&&(O[W]=!0,z[W]=!0),x(F,"carpet")&&(F.type!=="carpet"||F._cheater)||V&&(L[V]=!0)),F.type==="carpet"&&F._cheater&&V&&(E[V]=!0),x(F,"2dMap")&&(H[V]=!0,H[W]=!0),x(F,"oriented")&&(N[F.orientation==="h"?W:V]=!0)}}var te=v._subplots,Q=te.xaxis,X=te.yaxis,q=A.simpleMap(Q,a),Z=A.simpleMap(X,a),J=q.concat(Z),ne=M.background;Q.length&&X.length&&(ne=A.coerce(b,v,f,"plot_bgcolor"));var re,ae,ue,he,de,xe=M.combine(ne,v.paper_bgcolor);function me(){var ot=T[re]||[];de._traceIndices=ot.map(function(At){return At._expandedIndex}),de._annIndices=[],de._shapeIndices=[],de._selectionIndices=[],de._imgIndices=[],de._subplotsWith=[],de._counterAxes=[],de._name=de._attr=re,de._id=ae}function ve(ot,At){return A.coerce(he,de,o,ot,At)}function Le(ot,At){return A.coerce2(he,de,o,ot,At)}function Ae(ot){return ot==="x"?X:Q}function we(ot,At){for(var Ct=ot==="x"?q:Z,zt=[],St=0;St<Ct.length;St++){var qe=Ct[St];qe===At||(b[qe]||{}).overlaying||zt.push(u(qe))}return zt}var se={x:Ae("x"),y:Ae("y")},oe=se.x.concat(se.y),fe={},Se=[];function Me(){var ot=he.matches;p.test(ot)&&oe.indexOf(ot)===-1&&(fe[ot]=he.type,Se=Object.keys(fe))}var be=_(b,v),Ie=l(be);for(w=0;w<J.length;w++){re=J[w],ae=u(re),ue=re.charAt(0),A.isPlainObject(b[re])||(b[re]={}),he=b[re],de=m.newContainer(v,re,ue+"axis"),me();var Be=ue==="x"&&!L[re]&&E[re]||ue==="y"&&!O[re]&&C[re],ce=ue==="y"&&(!z[re]&&G[re]||I[re]),Te={hasMinor:!0,letter:ue,font:v.font,outerTicks:H[re],showGrid:!N[re],data:T[re]||[],bgColor:xe,calendar:v.calendar,automargin:!0,visibleDflt:Be,reverseDflt:ce,autotypenumbersDflt:S,splomStash:((v._splomAxes||{})[ue]||{})[ae]};ve("uirevision",v.uirevision),e(he,de,ve,Te),i(he,de,ve,Te,v);var ye=Ie&&ue===be.charAt(0),Pe=Le("spikecolor",Ie?de.color:void 0),Re=Le("spikethickness",Ie?1.5:void 0),ze=Le("spikedash",Ie?"dot":void 0),He=Le("spikemode",Ie?"across":void 0),We=Le("spikesnap");ve("showspikes",!!(ye||Pe||Re||ze||He||We))||(delete de.spikecolor,delete de.spikethickness,delete de.spikedash,delete de.spikemode,delete de.spikesnap);var Je=a(he.overlaying),lt=[0,1];if(v[Je]!==void 0){var et=a(v[Je].anchor);v[et]!==void 0&&(lt=v[et].domain)}n(he,de,ve,{letter:ue,counterAxes:se[ue],overlayableAxes:we(ue,re),grid:v.grid,overlayingDomain:lt}),ve("title.standoff"),Me(),de._input=he}for(w=0;w<Se.length;){ae=Se[w++],ue=(re=a(ae)).charAt(0),A.isPlainObject(b[re])||(b[re]={}),he=b[re],de=m.newContainer(v,re,ue+"axis"),me();var yt={letter:ue,font:v.font,outerTicks:H[re],showGrid:!N[re],data:[],bgColor:xe,calendar:v.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:S,splomStash:((v._splomAxes||{})[ue]||{})[ae]};ve("uirevision",v.uirevision),de.type=fe[ae]||"linear",i(he,de,ve,yt,v),n(he,de,ve,{letter:ue,counterAxes:se[ue],overlayableAxes:we(ue,re),grid:v.grid}),ve("fixedrange"),Me(),de._input=he}var _t=g("rangeslider","handleDefaults"),xt=g("rangeselector","handleDefaults");for(w=0;w<q.length;w++)re=q[w],he=b[re],de=v[re],_t(b,v,re),de.type==="date"&&xt(he,de,v,Z,de.calendar),ve("fixedrange");for(w=0;w<Z.length;w++){re=Z[w],he=b[re],de=v[re];var at=v[a(de.anchor)];ve("fixedrange",g("rangeslider","isVisible")(at))}r.handleDefaults(b,v,{axIds:oe.concat(Se).sort(s.idSort),axHasImage:I})}},92128:function($,P,t){var A=t(84267).mix,M=t(22399),l=t(71828);$.exports=function(_,m,f,o){var e=(o=o||{}).dfltColor;function i(b,v){return l.coerce2(_,m,o.attributes,b,v)}var r=i("linecolor",e),n=i("linewidth");f("showline",o.showLine||!!r||!!n)||(delete m.linecolor,delete m.linewidth);var s=i("gridcolor",A(e,o.bgColor,o.blend||M.lightFraction).toRgbString()),a=i("gridwidth"),u=i("griddash");if(f("showgrid",o.showGrid||!!s||!!a||!!u)||(delete m.gridcolor,delete m.gridwidth,delete m.griddash),o.hasMinor){var p=i("minor.gridcolor",A(m.gridcolor,o.bgColor,67).toRgbString()),c=i("minor.gridwidth",m.gridwidth||1),x=i("minor.griddash",m.griddash||"solid");f("minor.showgrid",!!p||!!c||!!x)||(delete m.minor.gridcolor,delete m.minor.gridwidth,delete m.minor.griddash)}if(!o.noZeroLine){var g=i("zerolinecolor",e),h=i("zerolinewidth");f("zeroline",o.showGrid||!!g||!!h)||(delete m.zerolinecolor,delete m.zerolinewidth)}}},52830:function($,P,t){var A=t(92770),M=t(71828);$.exports=function(l,_,m,f){var o,e,i,r,n,s,a=f.counterAxes||[],u=f.overlayableAxes||[],p=f.letter,c=f.grid,x=f.overlayingDomain;c&&(e=c._domains[p][c._axisMap[_._id]],o=c._anchors[_._id],e&&(i=c[p+"side"].split(" ")[0],r=c.domain[p][i==="right"||i==="top"?1:0])),e=e||[0,1],o=o||(A(l.position)?"free":a[0]||"free"),i=i||(p==="x"?"bottom":"left"),r=r||0,n=0,s=!1;var g=M.coerce(l,_,{anchor:{valType:"enumerated",values:["free"].concat(a),dflt:o}},"anchor"),h=M.coerce(l,_,{side:{valType:"enumerated",values:p==="x"?["bottom","top"]:["left","right"],dflt:i}},"side");g==="free"&&(p==="y"&&(m("autoshift")&&(r=h==="left"?x[0]:x[1],s=!_.automargin||_.automargin,n=h==="left"?-3:3),m("shift",n)),m("position",r)),m("automargin",s);var b=!1;if(u.length&&(b=M.coerce(l,_,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!b){var v=m("domain",e);v[0]>v[1]-.000244140625&&(_.domain=e),M.noneOrAll(l.domain,_.domain,e),_.tickmode==="sync"&&(_.tickmode="auto")}return m("layer"),_}},89426:function($,P,t){var A=t(59652);$.exports=function(M,l,_,m,f){f||(f={});var o=f.tickSuffixDflt,e=A(M);_("tickprefix")&&_("showtickprefix",e),_("ticksuffix",o)&&_("showticksuffix",e)}},23608:function($,P,t){var A=t(23074);$.exports=function(M,l,_,m){var f=l._template||{},o=l.type||f.type||"-";_("minallowed"),_("maxallowed");var e,i=_("range");i||m.noInsiderange||o==="log"||(!(e=_("insiderange"))||e[0]!==null&&e[1]!==null||(l.insiderange=!1,e=void 0),e&&(i=_("range",e)));var r,n=l.getAutorangeDflt(i,m),s=_("autorange",n);!i||(i[0]!==null||i[1]!==null)&&(i[0]!==null&&i[1]!==null||s!=="reversed"&&s!==!0)&&(i[0]===null||s!=="min"&&s!=="max reversed")&&(i[1]===null||s!=="max"&&s!=="min reversed")||(i=void 0,delete l.range,l.autorange=!0,r=!0),r||(s=_("autorange",n=l.getAutorangeDflt(i,m))),s&&(A(_,s,i),o!=="linear"&&o!=="-"||_("rangemode")),l.cleanRange()}},42449:function($,P,t){var A=t(18783).FROM_BL;$.exports=function(M,l,_){_===void 0&&(_=A[M.constraintoward||"center"]);var m=[M.r2l(M.range[0]),M.r2l(M.range[1])],f=m[0]+(m[1]-m[0])*_;M.range=M._input.range=[M.l2r(f+(m[0]-f)*l),M.l2r(f+(m[1]-f)*l)],M.setScale()}},21994:function($,P,t){var A=t(39898),M=t(84096).g0,l=t(71828),_=l.numberFormat,m=t(92770),f=l.cleanNumber,o=l.ms2DateTime,e=l.dateTime2ms,i=l.ensureNumber,r=l.isArrayOrTypedArray,n=t(50606),s=n.FP_SAFE,a=n.BADNUM,u=n.LOG_CLIP,p=n.ONEWEEK,c=n.ONEDAY,x=n.ONEHOUR,g=n.ONEMIN,h=n.ONESEC,b=t(41675),v=t(85555),y=v.HOUR_PATTERN,w=v.WEEKDAY_PATTERN;function d(T){return Math.pow(10,T)}function S(T){return T!=null}$.exports=function(T,E){E=E||{};var C=T._id||"x",L=C.charAt(0);function O(J,ne){if(J>0)return Math.log(J)/Math.LN10;if(J<=0&&ne&&T.range&&T.range.length===2){var re=T.range[0],ae=T.range[1];return .5*(re+ae-2*u*Math.abs(re-ae))}return a}function z(J,ne,re,ae){if((ae||{}).msUTC&&m(J))return+J;var ue=e(J,re||T.calendar);if(ue===a){if(!m(J))return a;J=+J;var he=Math.floor(10*l.mod(J+.05,1)),de=Math.round(J-he/10);ue=e(new Date(de))+he/10}return ue}function G(J,ne,re){return o(J,ne,re||T.calendar)}function I(J){return T._categories[Math.round(J)]}function H(J){if(S(J)){if(T._categoriesMap===void 0&&(T._categoriesMap={}),T._categoriesMap[J]!==void 0)return T._categoriesMap[J];T._categories.push(typeof J=="number"?String(J):J);var ne=T._categories.length-1;return T._categoriesMap[J]=ne,ne}return a}function N(J){if(T._categoriesMap)return T._categoriesMap[J]}function F(J){var ne=N(J);return ne!==void 0?ne:m(J)?+J:void 0}function V(J){return m(J)?+J:N(J)}function W(J,ne,re){return A.round(re+ne*J,2)}function te(J,ne,re){return(J-re)/ne}var Q=function(J){return m(J)?W(J,T._m,T._b):a},X=function(J){return te(J,T._m,T._b)};if(T.rangebreaks){var q=L==="y";Q=function(J){if(!m(J))return a;var ne=T._rangebreaks.length;if(!ne)return W(J,T._m,T._b);var re=q;T.range[0]>T.range[1]&&(re=!re);for(var ae=re?-1:1,ue=ae*J,he=0,de=0;de<ne;de++){var xe=ae*T._rangebreaks[de].min,me=ae*T._rangebreaks[de].max;if(ue<xe)break;if(!(ue>me)){he=ue<(xe+me)/2?de:de+1;break}he=de+1}var ve=T._B[he]||0;return isFinite(ve)?W(J,T._m2,ve):0},X=function(J){var ne=T._rangebreaks.length;if(!ne)return te(J,T._m,T._b);for(var re=0,ae=0;ae<ne&&!(J<T._rangebreaks[ae].pmin);ae++)J>T._rangebreaks[ae].pmax&&(re=ae+1);return te(J,T._m2,T._B[re])}}T.c2l=T.type==="log"?O:i,T.l2c=T.type==="log"?d:i,T.l2p=Q,T.p2l=X,T.c2p=T.type==="log"?function(J,ne){return Q(O(J,ne))}:Q,T.p2c=T.type==="log"?function(J){return d(X(J))}:X,["linear","-"].indexOf(T.type)!==-1?(T.d2r=T.r2d=T.d2c=T.r2c=T.d2l=T.r2l=f,T.c2d=T.c2r=T.l2d=T.l2r=i,T.d2p=T.r2p=function(J){return T.l2p(f(J))},T.p2d=T.p2r=X,T.cleanPos=i):T.type==="log"?(T.d2r=T.d2l=function(J,ne){return O(f(J),ne)},T.r2d=T.r2c=function(J){return d(f(J))},T.d2c=T.r2l=f,T.c2d=T.l2r=i,T.c2r=O,T.l2d=d,T.d2p=function(J,ne){return T.l2p(T.d2r(J,ne))},T.p2d=function(J){return d(X(J))},T.r2p=function(J){return T.l2p(f(J))},T.p2r=X,T.cleanPos=i):T.type==="date"?(T.d2r=T.r2d=l.identity,T.d2c=T.r2c=T.d2l=T.r2l=z,T.c2d=T.c2r=T.l2d=T.l2r=G,T.d2p=T.r2p=function(J,ne,re){return T.l2p(z(J,0,re))},T.p2d=T.p2r=function(J,ne,re){return G(X(J),ne,re)},T.cleanPos=function(J){return l.cleanDate(J,a,T.calendar)}):T.type==="category"?(T.d2c=T.d2l=H,T.r2d=T.c2d=T.l2d=I,T.d2r=T.d2l_noadd=F,T.r2c=function(J){var ne=V(J);return ne!==void 0?ne:T.fraction2r(.5)},T.l2r=T.c2r=i,T.r2l=V,T.d2p=function(J){return T.l2p(T.r2c(J))},T.p2d=function(J){return I(X(J))},T.r2p=T.d2p,T.p2r=X,T.cleanPos=function(J){return typeof J=="string"&&J!==""?J:i(J)}):T.type==="multicategory"&&(T.r2d=T.c2d=T.l2d=I,T.d2r=T.d2l_noadd=F,T.r2c=function(J){var ne=F(J);return ne!==void 0?ne:T.fraction2r(.5)},T.r2c_just_indices=N,T.l2r=T.c2r=i,T.r2l=F,T.d2p=function(J){return T.l2p(T.r2c(J))},T.p2d=function(J){return I(X(J))},T.r2p=T.d2p,T.p2r=X,T.cleanPos=function(J){return Array.isArray(J)||typeof J=="string"&&J!==""?J:i(J)},T.setupMultiCategory=function(J){var ne,re,ae=T._traceIndices,ue=T._matchGroup;if(ue&&T._categories.length===0){for(var he in ue)if(he!==C){var de=E[b.id2name(he)];ae=ae.concat(de._traceIndices)}}var xe=[[0,{}],[0,{}]],me=[];for(ne=0;ne<ae.length;ne++){var ve=J[ae[ne]];if(L in ve){var Le=ve[L],Ae=ve._length||l.minRowLength(Le);if(r(Le[0])&&r(Le[1]))for(re=0;re<Ae;re++){var we=Le[0][re],se=Le[1][re];S(we)&&S(se)&&(me.push([we,se]),we in xe[0][1]||(xe[0][1][we]=xe[0][0]++),se in xe[1][1]||(xe[1][1][se]=xe[1][0]++))}}}for(me.sort(function(oe,fe){var Se=xe[0][1],Me=Se[oe[0]]-Se[fe[0]];if(Me)return Me;var be=xe[1][1];return be[oe[1]]-be[fe[1]]}),ne=0;ne<me.length;ne++)H(me[ne])}),T.fraction2r=function(J){var ne=T.r2l(T.range[0]),re=T.r2l(T.range[1]);return T.l2r(ne+J*(re-ne))},T.r2fraction=function(J){var ne=T.r2l(T.range[0]),re=T.r2l(T.range[1]);return(T.r2l(J)-ne)/(re-ne)},T.limitRange=function(J){var ne=T.minallowed,re=T.maxallowed;if(ne!==void 0||re!==void 0){J||(J="range");var ae=l.nestedProperty(T,J).get(),ue=l.simpleMap(ae,T.r2l),he=ue[1]<ue[0];he&&ue.reverse();var de=l.simpleMap([ne,re],T.r2l);ne!==void 0&&ue[0]<de[0]&&(ae[he?1:0]=ne),re!==void 0&&ue[1]>de[1]&&(ae[he?0:1]=re)}},T.cleanRange=function(J,ne){T._cleanRange(J,ne),T.limitRange(J)},T._cleanRange=function(J,ne){ne||(ne={}),J||(J="range");var re,ae,ue=l.nestedProperty(T,J).get();if(ae=(ae=T.type==="date"?l.dfltRange(T.calendar):L==="y"?v.DFLTRANGEY:T._name==="realaxis"?[0,1]:ne.dfltRange||v.DFLTRANGEX).slice(),T.rangemode!=="tozero"&&T.rangemode!=="nonnegative"||(ae[0]=0),ue&&ue.length===2){var he=ue[0]===null,de=ue[1]===null;for(T.type!=="date"||T.autorange||(ue[0]=l.cleanDate(ue[0],a,T.calendar),ue[1]=l.cleanDate(ue[1],a,T.calendar)),re=0;re<2;re++)if(T.type==="date"){if(!l.isDateTime(ue[re],T.calendar)){T[J]=ae;break}if(T.r2l(ue[0])===T.r2l(ue[1])){var xe=l.constrain(T.r2l(ue[0]),l.MIN_MS+1e3,l.MAX_MS-1e3);ue[0]=T.l2r(xe-1e3),ue[1]=T.l2r(xe+1e3);break}}else{if(!m(ue[re])){if(he||de||!m(ue[1-re])){T[J]=ae;break}ue[re]=ue[1-re]*(re?10:.1)}if(ue[re]<-s?ue[re]=-s:ue[re]>s&&(ue[re]=s),ue[0]===ue[1]){var me=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=me,ue[1]+=me}}}else l.nestedProperty(T,J).set(ae)},T.setScale=function(J){var ne=E._size;if(T.overlaying){var re=b.getFromId({_fullLayout:E},T.overlaying);T.domain=re.domain}var ae=J&&T._r?"_r":"range",ue=T.calendar;T.cleanRange(ae);var he,de,xe=T.r2l(T[ae][0],ue),me=T.r2l(T[ae][1],ue),ve=L==="y";if(ve?(T._offset=ne.t+(1-T.domain[1])*ne.h,T._length=ne.h*(T.domain[1]-T.domain[0]),T._m=T._length/(xe-me),T._b=-T._m*me):(T._offset=ne.l+T.domain[0]*ne.w,T._length=ne.w*(T.domain[1]-T.domain[0]),T._m=T._length/(me-xe),T._b=-T._m*xe),T._rangebreaks=[],T._lBreaks=0,T._m2=0,T._B=[],T.rangebreaks&&(T._rangebreaks=T.locateBreaks(Math.min(xe,me),Math.max(xe,me)),T._rangebreaks.length)){for(he=0;he<T._rangebreaks.length;he++)de=T._rangebreaks[he],T._lBreaks+=Math.abs(de.max-de.min);var Le=ve;xe>me&&(Le=!Le),Le&&T._rangebreaks.reverse();var Ae=Le?-1:1;for(T._m2=Ae*T._length/(Math.abs(me-xe)-T._lBreaks),T._B.push(-T._m2*(ve?me:xe)),he=0;he<T._rangebreaks.length;he++)de=T._rangebreaks[he],T._B.push(T._B[T._B.length-1]-Ae*T._m2*(de.max-de.min));for(he=0;he<T._rangebreaks.length;he++)(de=T._rangebreaks[he]).pmin=Q(de.min),de.pmax=Q(de.max)}if(!isFinite(T._m)||!isFinite(T._b)||T._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},T.maskBreaks=function(J){var ne,re,ae,ue,he,de=T.rangebreaks||[];de._cachedPatterns||(de._cachedPatterns=de.map(function(we){return we.enabled&&we.bounds?l.simpleMap(we.bounds,we.pattern?f:T.d2c):null})),de._cachedValues||(de._cachedValues=de.map(function(we){return we.enabled&&we.values?l.simpleMap(we.values,T.d2c).sort(l.sorterAsc):null}));for(var xe=0;xe<de.length;xe++){var me=de[xe];if(me.enabled){if(me.bounds){var ve=me.pattern;switch(re=(ne=de._cachedPatterns[xe])[0],ae=ne[1],ve){case w:ue=(he=new Date(J)).getUTCDay(),re>ae&&(ae+=7,ue<re&&(ue+=7));break;case y:ue=(he=new Date(J)).getUTCHours()+(he.getUTCMinutes()/60+he.getUTCSeconds()/3600+he.getUTCMilliseconds()/36e5),re>ae&&(ae+=24,ue<re&&(ue+=24));break;case"":ue=J}if(ue>=re&&ue<ae)return a}else for(var Le=de._cachedValues[xe],Ae=0;Ae<Le.length;Ae++)if(ae=(re=Le[Ae])+me.dvalue,J>=re&&J<ae)return a}}return J},T.locateBreaks=function(J,ne){var re,ae,ue,he,de=[];if(!T.rangebreaks)return de;var xe=T.rangebreaks.slice().sort(function(be,Ie){return be.pattern===w&&Ie.pattern===y?-1:Ie.pattern===w&&be.pattern===y?1:0}),me=function(be,Ie){if((be=l.constrain(be,J,ne))!==(Ie=l.constrain(Ie,J,ne))){for(var Be=!0,ce=0;ce<de.length;ce++){var Te=de[ce];be<Te.max&&Ie>=Te.min&&(be<Te.min&&(Te.min=be),Ie>Te.max&&(Te.max=Ie),Be=!1)}Be&&de.push({min:be,max:Ie})}};for(re=0;re<xe.length;re++){var ve=xe[re];if(ve.enabled)if(ve.bounds){var Le=J,Ae=ne;ve.pattern&&(Le=Math.floor(Le)),ue=(ae=l.simpleMap(ve.bounds,ve.pattern?f:T.r2l))[0],he=ae[1];var we,se,oe=new Date(Le);switch(ve.pattern){case w:se=p,we=(he-ue+(he<ue?7:0))*c,Le+=ue*c-(oe.getUTCDay()*c+oe.getUTCHours()*x+oe.getUTCMinutes()*g+oe.getUTCSeconds()*h+oe.getUTCMilliseconds());break;case y:se=c,we=(he-ue+(he<ue?24:0))*x,Le+=ue*x-(oe.getUTCHours()*x+oe.getUTCMinutes()*g+oe.getUTCSeconds()*h+oe.getUTCMilliseconds());break;default:Le=Math.min(ae[0],ae[1]),we=se=(Ae=Math.max(ae[0],ae[1]))-Le}for(var fe=Le;fe<Ae;fe+=se)me(fe,fe+we)}else for(var Se=l.simpleMap(ve.values,T.d2c),Me=0;Me<Se.length;Me++)me(ue=Se[Me],he=ue+ve.dvalue)}return de.sort(function(be,Ie){return be.min-Ie.min}),de},T.makeCalcdata=function(J,ne,re){var ae,ue,he,de,xe=T.type,me=xe==="date"&&J[ne+"calendar"];if(ne in J){if(ae=J[ne],de=J._length||l.minRowLength(ae),l.isTypedArray(ae)&&(xe==="linear"||xe==="log")){if(de===ae.length)return ae;if(ae.subarray)return ae.subarray(0,de)}if(xe==="multicategory")return function(Ae,we){for(var se=new Array(we),oe=0;oe<we;oe++){var fe=(Ae[0]||[])[oe],Se=(Ae[1]||[])[oe];se[oe]=N([fe,Se])}return se}(ae,de);for(ue=new Array(de),he=0;he<de;he++)ue[he]=T.d2c(ae[he],0,me,re)}else{var ve=ne+"0"in J?T.d2c(J[ne+"0"],0,me):0,Le=J["d"+ne]?Number(J["d"+ne]):1;for(ae=J[{x:"y",y:"x"}[ne]],de=J._length||ae.length,ue=new Array(de),he=0;he<de;he++)ue[he]=ve+he*Le}if(T.rangebreaks)for(he=0;he<de;he++)ue[he]=T.maskBreaks(ue[he]);return ue},T.isValidRange=function(J,ne){return Array.isArray(J)&&J.length===2&&(ne&&J[0]===null||m(T.r2l(J[0])))&&(ne&&J[1]===null||m(T.r2l(J[1])))},T.getAutorangeDflt=function(J,ne){var re=!T.isValidRange(J,"nullOk");return re&&ne&&ne.reverseDflt?re="reversed":J&&(J[0]===null&&J[1]===null?re=!0:J[0]===null&&J[1]!==null?re="min":J[0]!==null&&J[1]===null&&(re="max")),re},T.isReversed=function(){var J=T.autorange;return J==="reversed"||J==="min reversed"||J==="max reversed"},T.isPtWithinRange=function(J,ne){var re=T.c2l(J[L],null,ne),ae=T.r2l(T.range[0]),ue=T.r2l(T.range[1]);return ae<ue?ae<=re&&re<=ue:ue<=re&&re<=ae},T._emptyCategories=function(){T._categories=[],T._categoriesMap={}},T.clearCalc=function(){var J=T._matchGroup;if(J){var ne=null,re=null;for(var ae in J){var ue=E[b.id2name(ae)];if(ue._categories){ne=ue._categories,re=ue._categoriesMap;break}}ne&&re?(T._categories=ne,T._categoriesMap=re):T._emptyCategories()}else T._emptyCategories();if(T._initialCategories)for(var he=0;he<T._initialCategories.length;he++)H(T._initialCategories[he])},T.sortByInitialCategories=function(){var J=[];if(T._emptyCategories(),T._initialCategories)for(var ne=0;ne<T._initialCategories.length;ne++)H(T._initialCategories[ne]);J=J.concat(T._traceIndices);var re=T._matchGroup;for(var ae in re)if(C!==ae){var ue=E[b.id2name(ae)];ue._categories=T._categories,ue._categoriesMap=T._categoriesMap,J=J.concat(ue._traceIndices)}return J};var Z=E._d3locale;T.type==="date"&&(T._dateFormat=Z?Z.timeFormat:M,T._extraFormat=E._extraFormat),T._separators=E.separators,T._numFormat=Z?Z.numberFormat:_,delete T._minDtick,delete T._forceTick0}},59652:function($){$.exports=function(P){var t=["showexponent","showtickprefix","showticksuffix"].filter(function(A){return P[A]!==void 0});if(t.every(function(A){return P[A]===P[t[0]]})||t.length===1)return P[t[0]]}},96115:function($,P,t){var A=t(71828),M=t(7901).contrast,l=t(13838),_=t(59652),m=t(85501);function f(o,e){function i(r,n){return A.coerce(o,e,l.tickformatstops,r,n)}i("enabled")&&(i("dtickrange"),i("value"))}$.exports=function(o,e,i,r,n){n||(n={});var s=i("labelalias");A.isPlainObject(s)||delete e.labelalias;var a=_(o);if(i("showticklabels")){var u=n.font||{},p=e.color,c=(e.ticklabelposition||"").indexOf("inside")!==-1?M(n.bgColor):p&&p!==l.color.dflt?p:u.color;if(A.coerceFont(i,"tickfont",{family:u.family,size:u.size,color:c}),n.noTicklabelstep||r==="multicategory"||r==="log"||i("ticklabelstep"),n.noAng||i("tickangle"),r!=="category"){var x=i("tickformat");m(o,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:f}),e.tickformatstops.length||delete e.tickformatstops,n.noExp||x||r==="date"||(i("showexponent",a),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},38701:function($,P,t){var A=t(71828),M=t(13838);$.exports=function(l,_,m,f){var o=f.isMinor,e=o?l.minor||{}:l,i=o?_.minor:_,r=o?M.minor:M,n=o?"minor.":"",s=A.coerce2(e,i,r,"ticklen",o?.6*(_.ticklen||5):void 0),a=A.coerce2(e,i,r,"tickwidth",o?_.tickwidth||1:void 0),u=A.coerce2(e,i,r,"tickcolor",(o?_.tickcolor:void 0)||i.color);m(n+"ticks",!o&&f.outerTicks||s||a||u?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},26218:function($,P,t){var A=t(66287),M=t(71828).isArrayOrTypedArray;$.exports=function(l,_,m,f,o){o||(o={});var e=o.isMinor,i=e?l.minor||{}:l,r=e?_.minor:_,n=e?"minor.":"";function s(g){var h=i[g];return h!==void 0?h:(r._template||{})[g]}var a=s("tick0"),u=s("dtick"),p=s("tickvals"),c=m(n+"tickmode",M(p)?"array":u?"linear":"auto");if(c==="auto"||c==="sync")m(n+"nticks");else if(c==="linear"){var x=r.dtick=A.dtick(u,f);r.tick0=A.tick0(a,f,_.calendar,x)}else f!=="multicategory"&&(m(n+"tickvals")===void 0?r.tickmode="auto":e||m("ticktext"))}},66847:function($,P,t){var A=t(39898),M=t(73972),l=t(71828),_=t(91424),m=t(89298);$.exports=function(f,o,e,i){var r=f._fullLayout;if(o.length!==0){var n,s,a,u;i&&(n=i());var p=A.ease(e.easing);return f._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(u),u=null,function(){for(var g={},h=0;h<o.length;h++){var b=o[h],v=b.plotinfo.xaxis,y=b.plotinfo.yaxis;b.xr0&&(g[v._name+".range"]=b.xr0.slice()),b.yr0&&(g[y._name+".range"]=b.yr0.slice())}return M.call("relayout",f,g).then(function(){for(var w=0;w<o.length;w++)c(o[w].plotinfo)})}()}),s=Date.now(),u=window.requestAnimationFrame(function g(){a=Date.now();for(var h=Math.min(1,(a-s)/e.duration),b=p(h),v=0;v<o.length;v++)x(o[v],b);a-s>e.duration?(function(){for(var y={},w=0;w<o.length;w++){var d=o[w],S=d.plotinfo.xaxis,T=d.plotinfo.yaxis;d.xr1&&(y[S._name+".range"]=d.xr1.slice()),d.yr1&&(y[T._name+".range"]=d.yr1.slice())}n&&n(),M.call("relayout",f,y).then(function(){for(var E=0;E<o.length;E++)c(o[E].plotinfo)})}(),u=window.cancelAnimationFrame(g)):u=window.requestAnimationFrame(g)}),Promise.resolve()}function c(g){var h=g.xaxis,b=g.yaxis;r._defs.select("#"+g.clipId+"> rect").call(_.setTranslate,0,0).call(_.setScale,1,1),g.plot.call(_.setTranslate,h._offset,b._offset).call(_.setScale,1,1);var v=g.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(_.setPointGroupScale,1,1),v.selectAll(".textpoint").call(_.setTextPointsScale,1,1),v.call(_.hideOutsideRangePoints,g)}function x(g,h){var b=g.plotinfo,v=b.xaxis,y=b.yaxis,w=v._length,d=y._length,S=!!g.xr1,T=!!g.yr1,E=[];if(S){var C=l.simpleMap(g.xr0,v.r2l),L=l.simpleMap(g.xr1,v.r2l),O=C[1]-C[0],z=L[1]-L[0];E[0]=(C[0]*(1-h)+h*L[0]-C[0])/(C[1]-C[0])*w,E[2]=w*(1-h+h*z/O),v.range[0]=v.l2r(C[0]*(1-h)+h*L[0]),v.range[1]=v.l2r(C[1]*(1-h)+h*L[1])}else E[0]=0,E[2]=w;if(T){var G=l.simpleMap(g.yr0,y.r2l),I=l.simpleMap(g.yr1,y.r2l),H=G[1]-G[0],N=I[1]-I[0];E[1]=(G[1]*(1-h)+h*I[1]-G[1])/(G[0]-G[1])*d,E[3]=d*(1-h+h*N/H),y.range[0]=v.l2r(G[0]*(1-h)+h*I[0]),y.range[1]=y.l2r(G[1]*(1-h)+h*I[1])}else E[1]=0,E[3]=d;m.drawOne(f,v,{skipTitle:!0}),m.drawOne(f,y,{skipTitle:!0}),m.redrawComponents(f,[v._id,y._id]);var F=S?w/E[2]:1,V=T?d/E[3]:1,W=S?E[0]:0,te=T?E[1]:0,Q=S?E[0]/E[2]*w:0,X=T?E[1]/E[3]*d:0,q=v._offset-Q,Z=y._offset-X;b.clipRect.call(_.setTranslate,W,te).call(_.setScale,1/F,1/V),b.plot.call(_.setTranslate,q,Z).call(_.setScale,F,V),_.setPointGroupScale(b.zoomScalePts,1/F,1/V),_.setTextPointsScale(b.zoomScaleTxt,1/F,1/V)}m.redrawComponents(f)}},951:function($,P,t){var A=t(73972).traceIs,M=t(4322);function l(m){return{v:"x",h:"y"}[m.orientation||"v"]}function _(m,f){var o=l(m),e=A(m,"box-violin"),i=A(m._fullInput||{},"candlestick");return e&&!i&&f===o&&m[o]===void 0&&m[o+"0"]===void 0}$.exports=function(m,f,o,e){o("autotypenumbers",e.autotypenumbersDflt),o("type",(e.splomStash||{}).type)==="-"&&(function(i,r){if(i.type==="-"){var n,s=i._id,a=s.charAt(0);s.indexOf("scene")!==-1&&(s=a);var u=function(y,w,d){for(var S=0;S<y.length;S++){var T=y[S];if(T.type==="splom"&&T._length>0&&(T["_"+d+"axes"]||{})[w]||(T[d+"axis"]||d)===w&&(_(T,d)||(T[d]||[]).length||T[d+"0"]))return T}}(r,s,a);if(u)if(u.type!=="histogram"||a!=={v:"y",h:"x"}[u.orientation||"v"]){var p=a+"calendar",c=u[p],x={noMultiCategory:!A(u,"cartesian")||A(u,"noMultiCategory")};if(u.type==="box"&&u._hasPreCompStats&&a==={h:"x",v:"y"}[u.orientation||"v"]&&(x.noMultiCategory=!0),x.autotypenumbers=i.autotypenumbers,_(u,a)){var g=l(u),h=[];for(n=0;n<r.length;n++){var b=r[n];A(b,"box-violin")&&(b[a+"axis"]||a)===s&&(b[g]!==void 0?h.push(b[g][0]):b.name!==void 0?h.push(b.name):h.push("text"),b[p]!==c&&(c=void 0))}i.type=M(h,c,x)}else if(u.type==="splom"){var v=u.dimensions[u._axesDim[s]];v.visible&&(i.type=M(v.values,c,x))}else i.type=M(u[a]||[u[a+"0"]],c,x)}else i.type="linear"}}(f,e.data),f.type==="-"?f.type="linear":m.type=f.type)}},31137:function($,P,t){var A=t(73972),M=t(71828);function l(o,e,i){var r,n,s,a=!1;if(e.type==="data")r=o._fullData[e.traces!==null?e.traces[0]:0];else{if(e.type!=="layout")return!1;r=o._fullLayout}return n=M.nestedProperty(r,e.prop).get(),(s=i[e.type]=i[e.type]||{}).hasOwnProperty(e.prop)&&s[e.prop]!==n&&(a=!0),s[e.prop]=n,{changed:a,value:n}}function _(o,e){var i=[],r=e[0],n={};if(typeof r=="string")n[r]=e[1];else{if(!M.isPlainObject(r))return i;n=r}return f(n,function(s,a,u){i.push({type:"layout",prop:s,value:u})},"",0),i}function m(o,e){var i,r,n,s,a=[];if(r=e[0],n=e[1],i=e[2],s={},typeof r=="string")s[r]=n;else{if(!M.isPlainObject(r))return a;s=r,i===void 0&&(i=n)}return i===void 0&&(i=null),f(s,function(u,p,c){var x,g;if(Array.isArray(c)){g=c.slice();var h=Math.min(g.length,o.data.length);i&&(h=Math.min(h,i.length)),x=[];for(var b=0;b<h;b++)x[b]=i?i[b]:b}else g=c,x=i?i.slice():null;if(x===null)Array.isArray(g)&&(g=g[0]);else if(Array.isArray(x)){if(!Array.isArray(g)){var v=g;g=[];for(var y=0;y<x.length;y++)g[y]=v}g.length=Math.min(x.length,g.length)}a.push({type:"data",prop:u,traces:x,value:g})},"",0),a}function f(o,e,i,r){Object.keys(o).forEach(function(n){var s=o[n];if(n[0]!=="_"){var a=i+(r>0?".":"")+n;M.isPlainObject(s)?f(s,e,a,r+1):e(a,n,s)}})}P.manageCommandObserver=function(o,e,i,r){var n={},s=!0;e&&e._commandObserver&&(n=e._commandObserver),n.cache||(n.cache={}),n.lookupTable={};var a=P.hasSimpleAPICommandBindings(o,i,n.lookupTable);if(e&&e._commandObserver){if(a)return n;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,n}if(a){l(o,a,n.cache),n.check=function(){if(s){var c=l(o,a,n.cache);return c.changed&&r&&n.lookupTable[c.value]!==void 0&&(n.disable(),Promise.resolve(r({value:c.value,type:a.type,prop:a.prop,traces:a.traces,index:n.lookupTable[c.value]})).then(n.enable,n.enable)),c.changed}};for(var u=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<u.length;p++)o._internalOn(u[p],n.check);n.remove=function(){for(var c=0;c<u.length;c++)o._removeInternalListener(u[c],n.check)}}else M.log("Unable to automatically bind plot updates to API command"),n.lookupTable={},n.remove=function(){};return n.disable=function(){s=!1},n.enable=function(){s=!0},e&&(e._commandObserver=n),n},P.hasSimpleAPICommandBindings=function(o,e,i){var r,n,s=e.length;for(r=0;r<s;r++){var a,u=e[r],p=u.method,c=u.args;if(Array.isArray(c)||(c=[]),!p)return!1;var x=P.computeAPICommandBindings(o,p,c);if(x.length!==1)return!1;if(n){if((a=x[0]).type!==n.type||a.prop!==n.prop)return!1;if(Array.isArray(n.traces)){if(!Array.isArray(a.traces))return!1;a.traces.sort();for(var g=0;g<n.traces.length;g++)if(n.traces[g]!==a.traces[g])return!1}else if(a.prop!==n.prop)return!1}else n=x[0],Array.isArray(n.traces)&&n.traces.sort();var h=(a=x[0]).value;if(Array.isArray(h)){if(h.length!==1)return!1;h=h[0]}i&&(i[h]=r)}return n},P.executeAPICommand=function(o,e,i){if(e==="skip")return Promise.resolve();var r=A.apiMethodRegistry[e],n=[o];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)n.push(i[s]);return r.apply(null,n).catch(function(a){return M.warn("API call to Plotly."+e+" rejected.",a),Promise.reject(a)})},P.computeAPICommandBindings=function(o,e,i){var r;switch(Array.isArray(i)||(i=[]),e){case"restyle":r=m(o,i);break;case"relayout":r=_(0,i);break;case"update":r=m(o,[i[0],i[2]]).concat(_(0,[i[1]]));break;case"animate":r=function(n,s){return Array.isArray(s[0])&&s[0].length===1&&["string","number"].indexOf(typeof s[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[]}(0,i);break;default:r=[]}return r}},27670:function($,P,t){var A=t(1426).extendFlat;P.Y=function(M,l){l=l||{};var _={valType:"info_array",editType:(M=M||{}).editType,items:[{valType:"number",min:0,max:1,editType:M.editType},{valType:"number",min:0,max:1,editType:M.editType}],dflt:[0,1]},m=(M.name&&M.name,M.trace,l.description&&l.description,{x:A({},_,{}),y:A({},_,{}),editType:M.editType});return M.noGridCell||(m.row={valType:"integer",min:0,dflt:0,editType:M.editType},m.column={valType:"integer",min:0,dflt:0,editType:M.editType}),m},P.c=function(M,l,_,m){var f=m&&m.x||[0,1],o=m&&m.y||[0,1],e=l.grid;if(e){var i=_("domain.column");i!==void 0&&(i<e.columns?f=e._domains.x[i]:delete M.domain.column);var r=_("domain.row");r!==void 0&&(r<e.rows?o=e._domains.y[r]:delete M.domain.row)}var n=_("domain.x",f),s=_("domain.y",o);n[0]<n[1]||(M.domain.x=f.slice()),s[0]<s[1]||(M.domain.y=o.slice())}},41940:function($){$.exports=function(P){var t=P.editType,A=P.colorEditType;A===void 0&&(A=t);var M={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:A},editType:t};return P.autoSize&&(M.size.dflt="auto"),P.autoColor&&(M.color.dflt="auto"),P.arrayOk&&(M.family.arrayOk=!0,M.size.arrayOk=!0,M.color.arrayOk=!0),M}},31391:function($){$.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},78776:function($,P){P.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},P.axesNames=["lonaxis","lataxis"],P.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},P.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},P.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},P.clipPad=.001,P.precision=.1,P.landColor="#F0DC82",P.waterColor="#3399FF",P.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},P.sphereSVG={type:"Sphere"},P.fillLayers={ocean:1,land:1,lakes:1},P.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},P.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],P.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],P.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},69082:function($,P,t){var A=t(39898),M=t(27362),l=M.geoPath,_=M.geoDistance,m=t(65704),f=t(73972),o=t(71828),e=o.strTranslate,i=t(7901),r=t(91424),n=t(30211),s=t(74875),a=t(89298),u=t(71739).getAutoRange,p=t(28569),c=t(47322).prepSelect,x=t(47322).clearOutline,g=t(47322).selectOnClick,h=t(74455),b=t(78776),v=t(41327),y=t(90973),w=t(96892).zL;function d(E){this.id=E.id,this.graphDiv=E.graphDiv,this.container=E.container,this.topojsonURL=E.topojsonURL,this.isStatic=E.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=d.prototype;function T(E,C){var L=b.clipPad,O=E[0]+L,z=E[1]-L,G=C[0]+L,I=C[1]-L;O>0&&z<0&&(z+=360);var H=(z-O)/4;return{type:"Polygon",coordinates:[[[O,G],[O,I],[O+H,I],[O+2*H,I],[O+3*H,I],[z,I],[z,G],[z-H,G],[z-2*H,G],[z-3*H,G],[O,G]]]}}$.exports=function(E){return new d(E)},S.plot=function(E,C,L,O){var z=this;if(O)return z.update(E,C,!0);z._geoCalcData=E,z._fullLayout=C;var G=C[this.id],I=[],H=!1;for(var N in b.layerNameToAdjective)if(N!=="frame"&&G["show"+N]){H=!0;break}for(var F=!1,V=0;V<E.length;V++){var W=E[0][0].trace;W._geo=z,W.locationmode&&(H=!0);var te=W.marker;if(te){var Q=te.angle,X=te.angleref;(Q||X==="north"||X==="previous")&&(F=!0)}}if(this._hasMarkerAngles=F,H){var q=y.getTopojsonName(G);z.topojson!==null&&q===z.topojsonName||(z.topojsonName=q,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&I.push(z.fetchTopojson()))}I=I.concat(v.fetchTraceGeoData(E)),L.push(new Promise(function(Z,J){Promise.all(I).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(E,C),Z()}).catch(J)}))},S.fetchTopojson=function(){var E=this,C=y.getTopojsonPath(E.topojsonURL,E.topojsonName);return new Promise(function(L,O){A.json(C,function(z,G){if(z)return z.status===404?O(new Error(["plotly.js could not find topojson file at",C+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",C].join(" ")));PlotlyGeoAssets.topojson[E.topojsonName]=G,L()})})},S.update=function(E,C,L){var O=C[this.id];this.hasChoropleth=!1;for(var z=0;z<E.length;z++){var G=E[z],I=G[0].trace;I.type==="choropleth"&&(this.hasChoropleth=!0),I.visible===!0&&I._length>0&&I._module.calcGeoJSON(G,C)}if(!L){if(this.updateProjection(E,C))return;this.viewInitial&&this.scope===O.scope||this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(C,O),this.updateDims(C,O),this.updateFx(C,O),s.generalUpdatePerTraceModule(this.graphDiv,this,E,O);var H=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=H.selectAll(".point"),this.dataPoints.text=H.selectAll("text"),this.dataPaths.line=H.selectAll(".js-line");var N=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=N.selectAll("path"),this._render()},S.updateProjection=function(E,C){var L=this.graphDiv,O=C[this.id],z=C._size,G=O.domain,I=O.projection,H=O.lonaxis,N=O.lataxis,F=H._ax,V=N._ax,W=this.projection=function(oe){var fe=oe.projection,Se=fe.type,Me=b.projNames[Se];Me="geo"+o.titleCase(Me);for(var be=(M[Me]||m[Me])(),Ie=oe._isSatellite?180*Math.acos(1/fe.distance)/Math.PI:oe._isClipped?b.lonaxisSpan[Se]/2:null,Be=["center","rotate","parallels","clipExtent"],ce=function(Pe){return Pe?be:[]},Te=0;Te<Be.length;Te++){var ye=Be[Te];typeof be[ye]!="function"&&(be[ye]=ce)}return be.isLonLatOverEdges=function(Pe){if(be(Pe)===null)return!0;if(Ie){var Re=be.rotate();return _(Pe,[-Re[0],-Re[1]])>Ie*Math.PI/180}return!1},be.getPath=function(){return l().projection(be)},be.getBounds=function(Pe){return be.getPath().bounds(Pe)},be.precision(b.precision),oe._isSatellite&&be.tilt(fe.tilt).distance(fe.distance),Ie&&be.clipAngle(Ie-b.clipPad),be}(O),te=[[z.l+z.w*G.x[0],z.t+z.h*(1-G.y[1])],[z.l+z.w*G.x[1],z.t+z.h*(1-G.y[0])]],Q=O.center||{},X=I.rotation||{},q=H.range||[],Z=N.range||[];if(O.fitbounds){F._length=te[1][0]-te[0][0],V._length=te[1][1]-te[0][1],F.range=u(L,F),V.range=u(L,V);var J=(F.range[0]+F.range[1])/2,ne=(V.range[0]+V.range[1])/2;if(O._isScoped)Q={lon:J,lat:ne};else if(O._isClipped){Q={lon:J,lat:ne},X={lon:J,lat:ne,roll:X.roll};var re=I.type,ae=b.lonaxisSpan[re]/2||180,ue=b.lataxisSpan[re]/2||90;q=[J-ae,J+ae],Z=[ne-ue,ne+ue]}else Q={lon:J,lat:ne},X={lon:J,lat:X.lat,roll:X.roll}}W.center([Q.lon-X.lon,Q.lat-X.lat]).rotate([-X.lon,-X.lat,X.roll]).parallels(I.parallels);var he=T(q,Z);W.fitExtent(te,he);var de=this.bounds=W.getBounds(he),xe=this.fitScale=W.scale(),me=W.translate();if(O.fitbounds){var ve=W.getBounds(T(F.range,V.range)),Le=Math.min((de[1][0]-de[0][0])/(ve[1][0]-ve[0][0]),(de[1][1]-de[0][1])/(ve[1][1]-ve[0][1]));isFinite(Le)?W.scale(Le*xe):o.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(I.scale*xe);var Ae=this.midPt=[(de[0][0]+de[1][0])/2,(de[0][1]+de[1][1])/2];if(W.translate([me[0]+(Ae[0]-me[0]),me[1]+(Ae[1]-me[1])]).clipExtent(de),O._isAlbersUsa){var we=W([Q.lon,Q.lat]),se=W.translate();W.translate([se[0]-(we[0]-se[0]),se[1]-(we[1]-se[1])])}},S.updateBaseLayers=function(E,C){var L=this,O=L.topojson,z=L.layers,G=L.basePaths;function I(W){return W==="lonaxis"||W==="lataxis"}function H(W){return!!b.lineLayers[W]}function N(W){return!!b.fillLayers[W]}var F=(this.hasChoropleth?b.layersForChoropleth:b.layers).filter(function(W){return H(W)||N(W)?C["show"+W]:!I(W)||C[W].showgrid}),V=L.framework.selectAll(".layer").data(F,String);V.exit().each(function(W){delete z[W],delete G[W],A.select(this).remove()}),V.enter().append("g").attr("class",function(W){return"layer "+W}).each(function(W){var te=z[W]=A.select(this);W==="bg"?L.bgRect=te.append("rect").style("pointer-events","all"):I(W)?G[W]=te.append("path").style("fill","none"):W==="backplot"?te.append("g").classed("choroplethlayer",!0):W==="frontplot"?te.append("g").classed("scatterlayer",!0):H(W)?G[W]=te.append("path").style("fill","none").style("stroke-miterlimit",2):N(W)&&(G[W]=te.append("path").style("stroke","none"))}),V.order(),V.each(function(W){var te=G[W],Q=b.layerNameToAdjective[W];W==="frame"?te.datum(b.sphereSVG):H(W)||N(W)?te.datum(w(O,O.objects[W])):I(W)&&te.datum(function(X,q,Z){var J,ne,re,ae=q[X],ue=b.scopeDefaults[q.scope];X==="lonaxis"?(J=ue.lonaxisRange,ne=ue.lataxisRange,re=function(se,oe){return[se,oe]}):X==="lataxis"&&(J=ue.lataxisRange,ne=ue.lonaxisRange,re=function(se,oe){return[oe,se]});var he={type:"linear",range:[J[0],J[1]-1e-6],tick0:ae.tick0,dtick:ae.dtick};a.setConvert(he,Z);var de=a.calcTicks(he);q.isScoped||X!=="lonaxis"||de.pop();for(var xe=de.length,me=new Array(xe),ve=0;ve<xe;ve++)for(var Le=de[ve].x,Ae=me[ve]=[],we=ne[0];we<ne[1]+2.5;we+=2.5)Ae.push(re(Le,we));return{type:"MultiLineString",coordinates:me}}(W,C,E)).call(i.stroke,C[W].gridcolor).call(r.dashLine,C[W].griddash,C[W].gridwidth),H(W)?te.call(i.stroke,C[Q+"color"]).call(r.dashLine,"",C[Q+"width"]):N(W)&&te.call(i.fill,C[Q+"color"])})},S.updateDims=function(E,C){var L=this.bounds,O=(C.framewidth||0)/2,z=L[0][0]-O,G=L[0][1]-O,I=L[1][0]-z+O,H=L[1][1]-G+O;r.setRect(this.clipRect,z,G,I,H),this.bgRect.call(r.setRect,z,G,I,H).call(i.fill,C.bgcolor),this.xaxis._offset=z,this.xaxis._length=I,this.yaxis._offset=G,this.yaxis._length=H},S.updateFx=function(E,C){var L=this,O=L.graphDiv,z=L.bgRect,G=E.dragmode,I=E.clickmode;if(!L.isStatic){var H={element:L.bgRect.node(),gd:O,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:function(F,V){V.isRect?(F.range={})[L.id]=[N([V.xmin,V.ymin]),N([V.xmax,V.ymax])]:(F.lassoPoints={})[L.id]=V.map(N)}},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function(F){F===2&&x(O)}};G==="pan"?(z.node().onmousedown=null,z.call(h(L,C)),z.on("dblclick.zoom",function(){var F=L.viewInitial,V={};for(var W in F)V[L.id+"."+W]=F[W];f.call("_guiRelayout",O,V),O.emit("plotly_doubleclick",null)}),O._context._scrollZoom.geo||z.on("wheel.zoom",null)):G!=="select"&&G!=="lasso"||(z.on(".zoom",null),H.prepFn=function(F,V,W){c(F,V,W,H,G)},p.init(H)),z.on("mousemove",function(){var F=L.projection.invert(o.getPositionFromD3Event());if(!F)return p.unhover(O,A.event);L.xaxis.p2c=function(){return F[0]},L.yaxis.p2c=function(){return F[1]},n.hover(O,A.event,L.id)}),z.on("mouseout",function(){O._dragging||p.unhover(O,A.event)}),z.on("click",function(){G!=="select"&&G!=="lasso"&&(I.indexOf("select")>-1&&g(A.event,O,[L.xaxis],[L.yaxis],L.id,H),I.indexOf("event")>-1&&n.click(O,A.event))})}function N(F){return L.projection.invert([F[0]+L.xaxis._offset,F[1]+L.yaxis._offset])}},S.makeFramework=function(){var E=this,C=E.graphDiv,L=C._fullLayout,O="clip"+L._uid+E.id;E.clipDef=L._clips.append("clipPath").attr("id",O),E.clipRect=E.clipDef.append("rect"),E.framework=A.select(E.container).append("g").attr("class","geo "+E.id).call(r.setClipUrl,O,C),E.project=function(z){var G=E.projection(z);return G?[G[0]-E.xaxis._offset,G[1]-E.yaxis._offset]:[null,null]},E.xaxis={_id:"x",c2p:function(z){return E.project(z)[0]}},E.yaxis={_id:"y",c2p:function(z){return E.project(z)[1]}},E.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},a.setConvert(E.mockAxis,L)},S.saveViewInitial=function(E){var C,L=E.center||{},O=E.projection,z=O.rotation||{};this.viewInitial={fitbounds:E.fitbounds,"projection.scale":O.scale},C=E._isScoped?{"center.lon":L.lon,"center.lat":L.lat}:E._isClipped?{"projection.rotation.lon":z.lon,"projection.rotation.lat":z.lat}:{"center.lon":L.lon,"center.lat":L.lat,"projection.rotation.lon":z.lon},o.extendFlat(this.viewInitial,C)},S.render=function(E){this._hasMarkerAngles&&E?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var E,C=this.projection,L=C.getPath();function O(G){var I=C(G.lonlat);return I?e(I[0],I[1]):null}function z(G){return C.isLonLatOverEdges(G.lonlat)?"none":null}for(E in this.basePaths)this.basePaths[E].attr("d",L);for(E in this.dataPaths)this.dataPaths[E].attr("d",function(G){return L(G.geojson)});for(E in this.dataPoints)this.dataPoints[E].attr("display",z).attr("transform",O)}},44622:function($,P,t){var A=t(27659).AU,M=t(71828).counterRegex,l=t(69082),_="geo",m=M(_),f={};f[_]={valType:"subplotid",dflt:_,editType:"calc"},$.exports={attr:_,name:_,idRoot:_,idRegex:m,attrRegex:m,attributes:f,layoutAttributes:t(77519),supplyLayoutDefaults:t(82161),plot:function(o){for(var e=o._fullLayout,i=o.calcdata,r=e._subplots[_],n=0;n<r.length;n++){var s=r[n],a=A(i,_,s),u=e[s]._subplot;u||(u=l({id:s,graphDiv:o,container:e._geolayer.node(),topojsonURL:o._context.topojsonURL,staticPlot:o._context.staticPlot}),e[s]._subplot=u),u.plot(a,e,o._promises)}},updateFx:function(o){for(var e=o._fullLayout,i=e._subplots[_],r=0;r<i.length;r++){var n=e[i[r]];n._subplot.updateFx(e,n)}},clean:function(o,e,i,r){for(var n=r._subplots[_]||[],s=0;s<n.length;s++){var a=n[s],u=r[a]._subplot;!e[a]&&u&&(u.framework.remove(),u.clipDef.remove())}}}},77519:function($,P,t){var A=t(22399),M=t(27670).Y,l=t(79952).P,_=t(78776),m=t(30962).overrideAll,f=t(78607),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:A.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:l};($.exports=m({domain:M({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:f(_.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:f(_.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:A.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:_.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:_.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:_.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:_.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:A.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:A.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:A.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:A.background},lonaxis:o,lataxis:o},"plot","from-root")).uirevision={valType:"any",editType:"none"}},82161:function($,P,t){var A=t(71828),M=t(49119),l=t(27659).NG,_=t(78776),m=t(77519),f=_.axesNames;function o(e,i,r,n){var s=l(n.fullData,"geo",n.id).map(function(X){return X._expandedIndex}),a=r("resolution"),u=r("scope"),p=_.scopeDefaults[u],c=r("projection.type",p.projType),x=i._isAlbersUsa=c==="albers usa";x&&(u=i.scope="usa");var g=i._isScoped=u!=="world",h=i._isSatellite=c==="satellite",b=i._isConic=c.indexOf("conic")!==-1||c==="albers",v=i._isClipped=!!_.lonaxisSpan[c];if(e.visible===!1){var y=A.extendDeep({},i._template);y.showcoastlines=!1,y.showcountries=!1,y.showframe=!1,y.showlakes=!1,y.showland=!1,y.showocean=!1,y.showrivers=!1,y.showsubunits=!1,y.lonaxis&&(y.lonaxis.showgrid=!1),y.lataxis&&(y.lataxis.showgrid=!1),i._template=y}for(var w=r("visible"),d=0;d<f.length;d++){var S,T=f[d],E=[30,10][d];if(g)S=p[T+"Range"];else{var C=_[T+"Span"],L=(C[c]||C["*"])/2,O=r("projection.rotation."+T.substr(0,3),p.projRotate[d]);S=[O-L,O+L]}var z=r(T+".range",S);r(T+".tick0"),r(T+".dtick",E),r(T+".showgrid",!!w&&void 0)&&(r(T+".gridcolor"),r(T+".gridwidth"),r(T+".griddash")),i[T]._ax={type:"linear",_id:T.slice(0,3),_traceIndices:s,setScale:A.identity,c2l:A.identity,r2l:A.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var G=i.lonaxis.range,I=i.lataxis.range,H=G[0],N=G[1];H>0&&N<0&&(N+=360);var F,V,W,te=(H+N)/2;if(!x){var Q=g?p.projRotate:[te,0,0];F=r("projection.rotation.lon",Q[0]),r("projection.rotation.lat",Q[1]),r("projection.rotation.roll",Q[2]),r("showcoastlines",!g&&w)&&(r("coastlinecolor"),r("coastlinewidth")),r("showocean",!!w&&void 0)&&r("oceancolor")}x?(V=-96.6,W=38.7):(V=g?te:F,W=(I[0]+I[1])/2),r("center.lon",V),r("center.lat",W),h&&(r("projection.tilt"),r("projection.distance")),b&&r("projection.parallels",p.projParallels||[0,60]),r("projection.scale"),r("showland",!!w&&void 0)&&r("landcolor"),r("showlakes",!!w&&void 0)&&r("lakecolor"),r("showrivers",!!w&&void 0)&&(r("rivercolor"),r("riverwidth")),r("showcountries",g&&u!=="usa"&&w)&&(r("countrycolor"),r("countrywidth")),(u==="usa"||u==="north america"&&a===50)&&(r("showsubunits",w),r("subunitcolor"),r("subunitwidth")),g||r("showframe",w)&&(r("framecolor"),r("framewidth")),r("bgcolor"),r("fitbounds")&&(delete i.projection.scale,g?(delete i.center.lon,delete i.center.lat):v?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}$.exports=function(e,i,r){M(e,i,r,{type:"geo",attributes:m,handleDefaults:o,fullData:r,partition:"y"})}},74455:function($,P,t){var A=t(39898),M=t(71828),l=t(73972),_=Math.PI/180,m=180/Math.PI,f={cursor:"pointer"},o={cursor:"auto"};function e(g,h){return A.behavior.zoom().translate(h.translate()).scale(h.scale())}function i(g,h,b){var v=g.id,y=g.graphDiv,w=y.layout,d=w[v],S=y._fullLayout,T=S[v],E={},C={};function L(O,z){E[v+"."+O]=M.nestedProperty(d,O).get(),l.call("_storeDirectGUIEdit",w,S._preGUI,E);var G=M.nestedProperty(T,O);G.get()!==z&&(G.set(z),M.nestedProperty(d,O).set(z),C[v+"."+O]=z)}b(L),L("projection.scale",h.scale()/g.fitScale),L("fitbounds",!1),y.emit("plotly_relayout",C)}function r(g,h){var b=e(0,h);function v(y){var w=h.invert(g.midPt);y("center.lon",w[0]),y("center.lat",w[1])}return b.on("zoomstart",function(){A.select(this).style(f)}).on("zoom",function(){h.scale(A.event.scale).translate(A.event.translate),g.render(!0);var y=h.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":h.scale()/g.fitScale,"geo.center.lon":y[0],"geo.center.lat":y[1]})}).on("zoomend",function(){A.select(this).style(o),i(g,h,v)}),b}function n(g,h){var b,v,y,w,d,S,T,E,C,L=e(0,h);function O(G){return h.invert(G)}function z(G){var I=h.rotate(),H=h.invert(g.midPt);G("projection.rotation.lon",-I[0]),G("center.lon",H[0]),G("center.lat",H[1])}return L.on("zoomstart",function(){A.select(this).style(f),b=A.mouse(this),v=h.rotate(),y=h.translate(),w=v,d=O(b)}).on("zoom",function(){if(S=A.mouse(this),function(H){var N=O(H);if(!N)return!0;var F=h(N);return Math.abs(F[0]-H[0])>2||Math.abs(F[1]-H[1])>2}(b))return L.scale(h.scale()),void L.translate(h.translate());h.scale(A.event.scale),h.translate([y[0],A.event.translate[1]]),d?O(S)&&(E=O(S),T=[w[0]+(E[0]-d[0]),v[1],v[2]],h.rotate(T),w=T):d=O(b=S),C=!0,g.render(!0);var G=h.rotate(),I=h.invert(g.midPt);g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":h.scale()/g.fitScale,"geo.center.lon":I[0],"geo.center.lat":I[1],"geo.projection.rotation.lon":-G[0]})}).on("zoomend",function(){A.select(this).style(o),C&&i(g,h,z)}),L}function s(g,h){var b;h.rotate(),h.scale();var v=e(0,h),y=function(T){for(var E=0,C=arguments.length,L=[];++E<C;)L.push(arguments[E]);var O=A.dispatch.apply(null,L);return O.of=function(z,G){return function(I){var H;try{H=I.sourceEvent=A.event,I.target=T,A.event=I,O[I.type].apply(z,G)}finally{A.event=H}}},O}(v,"zoomstart","zoom","zoomend"),w=0,d=v.on;function S(T){var E=h.rotate();T("projection.rotation.lon",-E[0]),T("projection.rotation.lat",-E[1])}return v.on("zoomstart",function(){A.select(this).style(f);var T,E,C,L,O,z,G,I,H,N,F,V=A.mouse(this),W=h.rotate(),te=W,Q=h.translate(),X=(E=.5*(T=W)[0]*_,C=.5*T[1]*_,L=.5*T[2]*_,O=Math.sin(E),z=Math.cos(E),G=Math.sin(C),I=Math.cos(C),H=Math.sin(L),[z*I*(N=Math.cos(L))+O*G*H,O*I*N-z*G*H,z*G*N+O*I*H,z*I*H-O*G*N]);b=a(h,V),d.call(v,"zoom",function(){var q,Z,J,ne,re,ae,ue,he,de,xe,me=A.mouse(this);if(h.scale(A.event.scale),b){if(a(h,me)){h.rotate(W).translate(Q);var ve=a(h,me),Le=function(se,oe){if(se&&oe){var fe=function(Ie,Be){return[Ie[1]*Be[2]-Ie[2]*Be[1],Ie[2]*Be[0]-Ie[0]*Be[2],Ie[0]*Be[1]-Ie[1]*Be[0]]}(se,oe),Se=Math.sqrt(x(fe,fe)),Me=.5*Math.acos(Math.max(-1,Math.min(1,x(se,oe)))),be=Math.sin(Me)/Se;return Se&&[Math.cos(Me),fe[2]*be,-fe[1]*be,fe[0]*be]}}(b,ve),Ae=function(se){return[Math.atan2(2*(se[0]*se[1]+se[2]*se[3]),1-2*(se[1]*se[1]+se[2]*se[2]))*m,Math.asin(Math.max(-1,Math.min(1,2*(se[0]*se[2]-se[3]*se[1]))))*m,Math.atan2(2*(se[0]*se[3]+se[1]*se[2]),1-2*(se[2]*se[2]+se[3]*se[3]))*m]}((J=(q=X)[0],ne=q[1],re=q[2],ae=q[3],[J*(ue=(Z=Le)[0])-ne*(he=Z[1])-re*(de=Z[2])-ae*(xe=Z[3]),J*he+ne*ue+re*xe-ae*de,J*de-ne*xe+re*ue+ae*he,J*xe+ne*de-re*he+ae*ue])),we=function(se,oe,fe){var Se=c(oe,2,se[0]);Se=c(Se,1,se[1]),Se=c(Se,0,se[2]-fe[2]);var Me,be,Ie=oe[0],Be=oe[1],ce=oe[2],Te=Se[0],ye=Se[1],Pe=Se[2],Re=Math.atan2(Be,Ie)*m,ze=Math.sqrt(Ie*Ie+Be*Be);Math.abs(ye)>ze?(be=(ye>0?90:-90)-Re,Me=0):(be=Math.asin(ye/ze)*m-Re,Me=Math.sqrt(ze*ze-ye*ye));var He=180-be-2*Re,We=(Math.atan2(Pe,Te)-Math.atan2(ce,Me))*m,Je=(Math.atan2(Pe,Te)-Math.atan2(ce,-Me))*m;return u(fe[0],fe[1],be,We)<=u(fe[0],fe[1],He,Je)?[be,We,fe[2]]:[He,Je,fe[2]]}(Ae,b,te);isFinite(we[0])&&isFinite(we[1])&&isFinite(we[2])||(we=te),h.rotate(we),te=we}}else b=a(h,V=me);y.of(this,arguments)({type:"zoom"})}),F=y.of(this,arguments),w++||F({type:"zoomstart"})}).on("zoomend",function(){var T;A.select(this).style(o),d.call(v,"zoom",null),T=y.of(this,arguments),--w||T({type:"zoomend"}),i(g,h,S)}).on("zoom.redraw",function(){g.render(!0);var T=h.rotate();g.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":h.scale()/g.fitScale,"geo.projection.rotation.lon":-T[0],"geo.projection.rotation.lat":-T[1]})}),A.rebind(v,y,"on")}function a(g,h){var b=g.invert(h);return b&&isFinite(b[0])&&isFinite(b[1])&&function(v){var y=v[0]*_,w=v[1]*_,d=Math.cos(w);return[d*Math.cos(y),d*Math.sin(y),Math.sin(w)]}(b)}function u(g,h,b,v){var y=p(b-g),w=p(v-h);return Math.sqrt(y*y+w*w)}function p(g){return(g%360+540)%360-180}function c(g,h,b){var v=b*_,y=g.slice(),w=h===0?1:0,d=h===2?1:2,S=Math.cos(v),T=Math.sin(v);return y[w]=g[w]*S-g[d]*T,y[d]=g[d]*S+g[w]*T,y}function x(g,h){for(var b=0,v=0,y=g.length;v<y;++v)b+=g[v]*h[v];return b}$.exports=function(g,h){var b=g.projection;return(h._isScoped?r:h._isClipped?s:n)(g,b)}},27659:function($,P,t){var A=t(73972),M=t(85555).SUBPLOT_PATTERN;P.AU=function(l,_,m){var f=A.subplotsRegistry[_];if(!f)return[];for(var o=f.attr,e=[],i=0;i<l.length;i++){var r=l[i];r[0].trace[o]===m&&e.push(r)}return e},P.a0=function(l,_){var m,f=[],o=[];if(!(m=typeof _=="string"?A.getModule(_).plot:typeof _=="function"?_:_.plot))return[f,l];for(var e=0;e<l.length;e++){var i=l[e],r=i[0].trace;r.visible===!0&&r._length!==0&&(r._module&&r._module.plot===m?f.push(i):o.push(i))}return[f,o]},P.NG=function(l,_,m){if(!A.subplotsRegistry[_])return[];var f,o,e,i=A.subplotsRegistry[_].attr,r=[];if(_==="gl2d"){var n=m.match(M);o="x"+n[1],e="y"+n[2]}for(var s=0;s<l.length;s++)f=l[s],_==="gl2d"&&A.traceIs(f,"gl2d")?f[i[0]]===o&&f[i[1]]===e&&r.push(f):f[i]===m&&r.push(f);return r}},75071:function($,P,t){var A=t(16825),M=t(1195),l=t(48956),_=t(85555),m=t(38520);function f(o,e){this.element=o,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}$.exports=function(o){var e=o.mouseContainer,i=o.glplot,r=new f(e,i);function n(){o.xaxis.autorange=!1,o.yaxis.autorange=!1}function s(a,u,p){var c,x,g=o.calcDataBox(),h=i.viewBox,b=r.lastPos[0],v=r.lastPos[1],y=_.MINDRAG*i.pixelRatio,w=_.MINZOOM*i.pixelRatio;function d(O,z,G){var I=Math.min(z,G),H=Math.max(z,G);I!==H?(g[O]=I,g[O+2]=H,r.dataBox=g,o.setRanges(g)):(o.selectBox.selectBox=[0,0,1,1],o.glplot.setDirty())}switch(u*=i.pixelRatio,p*=i.pixelRatio,p=h[3]-h[1]-p,o.fullLayout.dragmode){case"zoom":if(a){var S=u/(h[2]-h[0])*(g[2]-g[0])+g[0],T=p/(h[3]-h[1])*(g[3]-g[1])+g[1];r.boxInited||(r.boxStart[0]=S,r.boxStart[1]=T,r.dragStart[0]=u,r.dragStart[1]=p),r.boxEnd[0]=S,r.boxEnd[1]=T,r.boxInited=!0,r.boxEnabled||r.boxStart[0]===r.boxEnd[0]&&r.boxStart[1]===r.boxEnd[1]||(r.boxEnabled=!0);var E=Math.abs(r.dragStart[0]-u)<w,C=Math.abs(r.dragStart[1]-p)<w;if(!function(){for(var O=o.graphDiv._fullLayout._axisConstraintGroups,z=o.xaxis._id,G=o.yaxis._id,I=0;I<O.length;I++)if(O[I][z]!==-1){if(O[I][G]!==-1)return!0;break}return!1}()||E&&C)E&&(r.boxEnd[0]=r.boxStart[0]),C&&(r.boxEnd[1]=r.boxStart[1]);else{c=r.boxEnd[0]-r.boxStart[0],x=r.boxEnd[1]-r.boxStart[1];var L=(g[3]-g[1])/(g[2]-g[0]);Math.abs(c*L)>Math.abs(x)?(r.boxEnd[1]=r.boxStart[1]+Math.abs(c)*L*(x>=0?1:-1),r.boxEnd[1]<g[1]?(r.boxEnd[1]=g[1],r.boxEnd[0]=r.boxStart[0]+(g[1]-r.boxStart[1])/Math.abs(L)):r.boxEnd[1]>g[3]&&(r.boxEnd[1]=g[3],r.boxEnd[0]=r.boxStart[0]+(g[3]-r.boxStart[1])/Math.abs(L))):(r.boxEnd[0]=r.boxStart[0]+Math.abs(x)/L*(c>=0?1:-1),r.boxEnd[0]<g[0]?(r.boxEnd[0]=g[0],r.boxEnd[1]=r.boxStart[1]+(g[0]-r.boxStart[0])*Math.abs(L)):r.boxEnd[0]>g[2]&&(r.boxEnd[0]=g[2],r.boxEnd[1]=r.boxStart[1]+(g[2]-r.boxStart[0])*Math.abs(L)))}}else r.boxEnabled?(c=r.boxStart[0]!==r.boxEnd[0],x=r.boxStart[1]!==r.boxEnd[1],c||x?(c&&(d(0,r.boxStart[0],r.boxEnd[0]),o.xaxis.autorange=!1),x&&(d(1,r.boxStart[1],r.boxEnd[1]),o.yaxis.autorange=!1),o.relayoutCallback()):o.glplot.setDirty(),r.boxEnabled=!1,r.boxInited=!1):r.boxInited&&(r.boxInited=!1);break;case"pan":r.boxEnabled=!1,r.boxInited=!1,a?(r.panning||(r.dragStart[0]=u,r.dragStart[1]=p),Math.abs(r.dragStart[0]-u)<y&&(u=r.dragStart[0]),Math.abs(r.dragStart[1]-p)<y&&(p=r.dragStart[1]),c=(b-u)*(g[2]-g[0])/(i.viewBox[2]-i.viewBox[0]),x=(v-p)*(g[3]-g[1])/(i.viewBox[3]-i.viewBox[1]),g[0]+=c,g[2]+=c,g[1]+=x,g[3]+=x,o.setRanges(g),r.panning=!0,r.lastInputTime=Date.now(),n(),o.cameraChanged(),o.handleAnnotations()):r.panning&&(r.panning=!1,o.relayoutCallback())}r.lastPos[0]=u,r.lastPos[1]=p}return r.mouseListener=A(e,s),e.addEventListener("touchstart",function(a){var u=l(a.changedTouches[0],e);s(0,u[0],u[1]),s(1,u[0],u[1]),a.preventDefault()},!!m&&{passive:!1}),e.addEventListener("touchmove",function(a){a.preventDefault();var u=l(a.changedTouches[0],e);s(1,u[0],u[1]),a.preventDefault()},!!m&&{passive:!1}),e.addEventListener("touchend",function(a){s(0,r.lastPos[0],r.lastPos[1]),a.preventDefault()},!!m&&{passive:!1}),r.wheelListener=M(e,function(a,u){if(!o.scrollZoom)return!1;var p=o.calcDataBox(),c=i.viewBox,x=r.lastPos[0],g=r.lastPos[1],h=Math.exp(5*u/(c[3]-c[1])),b=x/(c[2]-c[0])*(p[2]-p[0])+p[0],v=g/(c[3]-c[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-b)*h+b,p[2]=(p[2]-b)*h+b,p[1]=(p[1]-v)*h+v,p[3]=(p[3]-v)*h+v,o.setRanges(p),r.lastInputTime=Date.now(),n(),o.cameraChanged(),o.handleAnnotations(),o.relayoutCallback(),!0},!0),r}},82961:function($,P,t){var A=t(89298),M=t(78614);function l(f){this.scene=f,this.gl=f.gl,this.pixelRatio=f.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var _=l.prototype,m=["xaxis","yaxis"];_.merge=function(f){var o,e,i,r,n,s,a,u,p,c,x;for(this.titleEnable=!1,this.backgroundColor=M(f.plot_bgcolor),c=0;c<2;++c){var g=(o=m[c]).charAt(0);for(i=(e=f[this.scene[o]._name]).title.text===this.scene.fullLayout._dfltTitle[g]?"":e.title.text,x=0;x<=2;x+=2)this.labelEnable[c+x]=!1,this.labels[c+x]=i,this.labelColor[c+x]=M(e.title.font.color),this.labelFont[c+x]=e.title.font.family,this.labelSize[c+x]=e.title.font.size,this.labelPad[c+x]=this.getLabelPad(o,e),this.tickEnable[c+x]=!1,this.tickColor[c+x]=M((e.tickfont||{}).color),this.tickAngle[c+x]=e.tickangle==="auto"?0:Math.PI*-e.tickangle/180,this.tickPad[c+x]=this.getTickPad(e),this.tickMarkLength[c+x]=0,this.tickMarkWidth[c+x]=e.tickwidth||0,this.tickMarkColor[c+x]=M(e.tickcolor),this.borderLineEnable[c+x]=!1,this.borderLineColor[c+x]=M(e.linecolor),this.borderLineWidth[c+x]=e.linewidth||0;a=this.hasSharedAxis(e),n=this.hasAxisInDfltPos(o,e)&&!a,s=this.hasAxisInAltrPos(o,e)&&!a,r=e.mirror||!1,u=a?String(r).indexOf("all")!==-1:!!r,p=a?r==="allticks":String(r).indexOf("ticks")!==-1,n?this.labelEnable[c]=!0:s&&(this.labelEnable[c+2]=!0),n?this.tickEnable[c]=e.showticklabels:s&&(this.tickEnable[c+2]=e.showticklabels),(n||u)&&(this.borderLineEnable[c]=e.showline),(s||u)&&(this.borderLineEnable[c+2]=e.showline),(n||p)&&(this.tickMarkLength[c]=this.getTickMarkLength(e)),(s||p)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(e)),this.gridLineEnable[c]=e.showgrid,this.gridLineColor[c]=M(e.gridcolor),this.gridLineWidth[c]=e.gridwidth,this.zeroLineEnable[c]=e.zeroline,this.zeroLineColor[c]=M(e.zerolinecolor),this.zeroLineWidth[c]=e.zerolinewidth}},_.hasSharedAxis=function(f){var o=this.scene,e=o.fullLayout._subplots.gl2d;return A.findSubplotsWithAxis(e,f).indexOf(o.id)!==0},_.hasAxisInDfltPos=function(f,o){var e=o.side;return f==="xaxis"?e==="bottom":f==="yaxis"?e==="left":void 0},_.hasAxisInAltrPos=function(f,o){var e=o.side;return f==="xaxis"?e==="top":f==="yaxis"?e==="right":void 0},_.getLabelPad=function(f,o){var e=1.5,i=o.title.font.size,r=o.showticklabels;return f==="xaxis"?o.side==="top"?i*(e+(r?1:0))-10:i*(e+(r?.5:0))-10:f==="yaxis"?o.side==="right"?10+i*(e+(r?1:.5)):10+i*(e+(r?.5:0)):void 0},_.getTickPad=function(f){return f.ticks==="outside"?10+f.ticklen:15},_.getTickMarkLength=function(f){if(!f.ticks)return 0;var o=f.ticklen;return f.ticks==="inside"?-o:o},$.exports=function(f){return new l(f)}},4796:function($,P,t){var A=t(30962).overrideAll,M=t(92918),l=t(10820),_=t(77922),m=t(85555),f=t(93612),o=t(528),e=t(27659).NG;P.name="gl2d",P.attr=["xaxis","yaxis"],P.idRoot=["x","y"],P.idRegex=m.idRegex,P.attrRegex=m.attrRegex,P.attributes=t(89502),P.supplyLayoutDefaults=function(i,r,n){r._has("cartesian")||f.supplyLayoutDefaults(i,r,n)},P.layoutAttrOverrides=A(f.layoutAttributes,"plot","from-root"),P.baseLayoutAttrOverrides=A({plot_bgcolor:l.plot_bgcolor,hoverlabel:o.hoverlabel},"plot","nested"),P.plot=function(i){for(var r=i._fullLayout,n=i._fullData,s=r._subplots.gl2d,a=0;a<s.length;a++){var u=s[a],p=r._plots[u],c=e(n,"gl2d",u),x=p._scene2d;x===void 0&&(x=new M({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},r),p._scene2d=x),x.plot(c,i.calcdata,r,i.layout)}},P.clean=function(i,r,n,s){for(var a=s._subplots.gl2d||[],u=0;u<a.length;u++){var p=a[u],c=s._plots[p];c._scene2d&&e(i,"gl2d",p).length===0&&(c._scene2d.destroy(),delete s._plots[p])}f.clean.apply(this,arguments)},P.drawFramework=function(i){i._context.staticPlot||f.drawFramework(i)},P.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,s=0;s<n.length;s++){var a=r._plots[n[s]]._scene2d,u=a.toImage("png");r._glimages.append("svg:image").attr({xmlns:_.svg,"xlink:href":u,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}},P.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots.gl2d,s=0;s<n.length;s++)r._plots[n[s]]._scene2d.updateFx(r.dragmode)}},92918:function($,P,t){var A,M,l=t(73972),_=t(89298),m=t(30211),f=t(9330).gl_plot2d,o=t(9330).gl_spikes2d,e=t(9330).gl_select_box,i=t(40372),r=t(82961),n=t(75071),s=t(58617),a=t(99082),u=a.enforce,p=a.clean,c=t(71739).doAutoRange,x=t(64505),g=x.drawMode,h=x.selectMode,b=["xaxis","yaxis"],v=t(85555).SUBPLOT_PATTERN;function y(d,S){this.container=d.container,this.graphDiv=d.graphDiv,this.pixelRatio=d.plotGlPixelRatio||window.devicePixelRatio,this.id=d.id,this.staticPlot=!!d.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(S),this.makeFramework(),this.stopped||(this.glplotOptions=r(this),this.glplotOptions.merge(S),this.glplot=f(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=o(this.glplot),this.selectBox=e(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}$.exports=y;var w=y.prototype;w.makeFramework=function(){if(this.staticPlot){if(!(M||(A=document.createElement("canvas"),M=i({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=M}else{var d=this.container.querySelector(".gl-canvas-focus"),S=i({canvas:d,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!S)return s(this),void(this.stopped=!0);this.canvas=d,this.gl=S}var T=this.canvas;T.style.width="100%",T.style.height="100%",T.style.position="absolute",T.style.top="0px",T.style.left="0px",T.style["pointer-events"]="none",this.updateSize(T);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var C=this.mouseContainer=document.createElement("div");C.style.position="absolute",C.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var L=this.container;L.appendChild(E),L.appendChild(C);var O=this;C.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),C.addEventListener("mouseover",function(){O.isMouseOver=!0})},w.toImage=function(d){d||(d="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var S=this.glplot.gl,T=S.drawingBufferWidth,E=S.drawingBufferHeight;S.clearColor(1,1,1,0),S.clear(S.COLOR_BUFFER_BIT|S.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),S.bindFramebuffer(S.FRAMEBUFFER,null);var C=new Uint8Array(T*E*4);S.readPixels(0,0,T,E,S.RGBA,S.UNSIGNED_BYTE,C);for(var L=0,O=E-1;L<O;++L,--O)for(var z=0;z<T;++z)for(var G=0;G<4;++G){var I=C[4*(T*L+z)+G];C[4*(T*L+z)+G]=C[4*(T*O+z)+G],C[4*(T*O+z)+G]=I}var H=document.createElement("canvas");H.width=T,H.height=E;var N,F=H.getContext("2d",{willReadFrequently:!0}),V=F.createImageData(T,E);switch(V.data.set(C),F.putImageData(V,0,0),d){case"jpeg":N=H.toDataURL("image/jpeg");break;case"webp":N=H.toDataURL("image/webp");break;default:N=H.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),N},w.updateSize=function(d){d||(d=this.canvas);var S=this.pixelRatio,T=this.fullLayout,E=T.width,C=T.height,L=0|Math.ceil(S*E),O=0|Math.ceil(S*C);return d.width===L&&d.height===O||(d.width=L,d.height=O),d},w.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var d=[_.calcTicks(this.xaxis),_.calcTicks(this.yaxis)],S=0;S<2;++S)for(var T=0;T<d[S].length;++T)d[S][T].text=d[S][T].text+"";return d},w.updateRefs=function(d){this.fullLayout=d;var S=this.id.match(v),T="xaxis"+S[1],E="yaxis"+S[2];this.xaxis=this.fullLayout[T],this.yaxis=this.fullLayout[E]},w.relayoutCallback=function(){var d=this.graphDiv,S=this.xaxis,T=this.yaxis,E=d.layout,C={},L=C[S._name+".range"]=S.range.slice(),O=C[T._name+".range"]=T.range.slice();C[S._name+".autorange"]=S.autorange,C[T._name+".autorange"]=T.autorange,l.call("_storeDirectGUIEdit",d.layout,d._fullLayout._preGUI,C);var z=E[S._name];z.range=L,z.autorange=S.autorange;var G=E[T._name];G.range=O,G.autorange=T.autorange,C.lastInputTime=this.camera.lastInputTime,d.emit("plotly_relayout",C)},w.cameraChanged=function(){var d=this.camera;this.glplot.setDataBox(this.calcDataBox());var S=this.computeTickMarks();(function(T,E){for(var C=0;C<2;++C){var L=T[C],O=E[C];if(L.length!==O.length)return!0;for(var z=0;z<L.length;++z)if(L[z].x!==O[z].x)return!0}return!1})(S,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=S,this.glplotOptions.dataBox=d.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},w.handleAnnotations=function(){for(var d=this.graphDiv,S=this.fullLayout.annotations,T=0;T<S.length;T++){var E=S[T];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(d,T)}},w.destroy=function(){if(this.glplot){var d=this.traces;d&&Object.keys(d).map(function(S){d[S].dispose(),delete d[S]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},w.plot=function(d,S,T){var E=this.glplot;this.updateRefs(T),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(d,S),this.updateFx(T.dragmode);var C=T.width,L=T.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(T),O.screenBox=[0,0,C,L];var z={_fullLayout:{_axisConstraintGroups:T._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:T._size}};p(z,this.xaxis),p(z,this.yaxis);var G,I,H=T._size,N=this.xaxis.domain,F=this.yaxis.domain;for(O.viewBox=[H.l+N[0]*H.w,H.b+F[0]*H.h,C-H.r-(1-N[1])*H.w,L-H.t-(1-F[1])*H.h],this.mouseContainer.style.width=H.w*(N[1]-N[0])+"px",this.mouseContainer.style.height=H.h*(F[1]-F[0])+"px",this.mouseContainer.height=H.h*(F[1]-F[0]),this.mouseContainer.style.left=H.l+N[0]*H.w+"px",this.mouseContainer.style.top=H.t+(1-F[1])*H.h+"px",I=0;I<2;++I)(G=this[b[I]])._length=O.viewBox[I+2]-O.viewBox[I],c(this.graphDiv,G),G.setScale();u(z),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(T),E.update(O),this.glplot.draw()},w.calcDataBox=function(){var d=this.xaxis,S=this.yaxis,T=d.range,E=S.range,C=d.r2l,L=S.r2l;return[C(T[0]),L(E[0]),C(T[1]),L(E[1])]},w.setRanges=function(d){var S=this.xaxis,T=this.yaxis,E=S.l2r,C=T.l2r;S.range=[E(d[0]),E(d[2])],T.range=[C(d[1]),C(d[3])]},w.updateTraces=function(d,S){var T,E,C,L=Object.keys(this.traces);this.fullData=d;e:for(T=0;T<L.length;T++){var O=L[T],z=this.traces[O];for(E=0;E<d.length;E++)if((C=d[E]).uid===O&&C.type===z.type)continue e;z.dispose(),delete this.traces[O]}for(T=0;T<d.length;T++){C=d[T];var G=S[T],I=this.traces[C.uid];I?I.update(C,G):(I=C._module.plot(this,C,G),this.traces[C.uid]=I)}this.glplot.objects.sort(function(H,N){return H._trace.index-N._trace.index})},w.updateFx=function(d){h(d)||g(d)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor=d==="pan"?"move":d==="zoom"?"crosshair":null},w.emitPointAction=function(d,S){for(var T,E=d.trace.uid,C=d.pointIndex,L=0;L<this.fullData.length;L++)this.fullData[L].uid===E&&(T=this.fullData[L]);var O={x:d.traceCoord[0],y:d.traceCoord[1],curveNumber:T.index,pointNumber:C,data:T._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(O,T,C),this.graphDiv.emit(S,{points:[O]})},w.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var d=this.glplot,S=this.camera,T=S.mouseListener,E=this.lastButtonState===1&&T.buttons===0,C=this.fullLayout;this.lastButtonState=T.buttons,this.cameraChanged();var L,O=T.x*d.pixelRatio,z=this.canvas.height-d.pixelRatio*T.y;if(S.boxEnabled&&C.dragmode==="zoom"){this.selectBox.enabled=!0;for(var G=this.selectBox.selectBox=[Math.min(S.boxStart[0],S.boxEnd[0]),Math.min(S.boxStart[1],S.boxEnd[1]),Math.max(S.boxStart[0],S.boxEnd[0]),Math.max(S.boxStart[1],S.boxEnd[1])],I=0;I<2;I++)S.boxStart[I]===S.boxEnd[I]&&(G[I]=d.dataBox[I],G[I+2]=d.dataBox[I+2]);d.setDirty()}else if(!S.panning&&this.isMouseOver){this.selectBox.enabled=!1;var H=C._size,N=this.xaxis.domain,F=this.yaxis.domain,V=(L=d.pick(O/d.pixelRatio+H.l+N[0]*H.w,z/d.pixelRatio-(H.t+(1-F[1])*H.h)))&&L.object._trace.handlePick(L);if(V&&E&&this.emitPointAction(V,"plotly_click"),L&&L.object._trace.hoverinfo!=="skip"&&C.hovermode&&V&&(!this.lastPickResult||this.lastPickResult.traceUid!==V.trace.uid||this.lastPickResult.dataCoord[0]!==V.dataCoord[0]||this.lastPickResult.dataCoord[1]!==V.dataCoord[1])){var W=V;this.lastPickResult={traceUid:V.trace?V.trace.uid:null,dataCoord:V.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),W.screenCoord=[((d.viewBox[2]-d.viewBox[0])*(L.dataCoord[0]-d.dataBox[0])/(d.dataBox[2]-d.dataBox[0])+d.viewBox[0])/d.pixelRatio,(this.canvas.height-(d.viewBox[3]-d.viewBox[1])*(L.dataCoord[1]-d.dataBox[1])/(d.dataBox[3]-d.dataBox[1])-d.viewBox[1])/d.pixelRatio],this.emitPointAction(V,"plotly_hover");var te=this.fullData[W.trace.index]||{},Q=W.pointIndex,X=m.castHoverinfo(te,C,Q);if(X&&X!=="all"){var q=X.split("+");q.indexOf("x")===-1&&(W.traceCoord[0]=void 0),q.indexOf("y")===-1&&(W.traceCoord[1]=void 0),q.indexOf("z")===-1&&(W.traceCoord[2]=void 0),q.indexOf("text")===-1&&(W.textLabel=void 0),q.indexOf("name")===-1&&(W.name=void 0)}m.loneHover({x:W.screenCoord[0],y:W.screenCoord[1],xLabel:this.hoverFormatter("xaxis",W.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",W.traceCoord[1]),zLabel:W.traceCoord[2],text:W.textLabel,name:W.name,color:m.castHoverOption(te,Q,"bgcolor")||W.color,borderColor:m.castHoverOption(te,Q,"bordercolor"),fontFamily:m.castHoverOption(te,Q,"font.family"),fontSize:m.castHoverOption(te,Q,"font.size"),fontColor:m.castHoverOption(te,Q,"font.color"),nameLength:m.castHoverOption(te,Q,"namelength"),textAlign:m.castHoverOption(te,Q,"align")},{container:this.svgContainer,gd:this.graphDiv})}}L||this.unhover(),d.draw()}},w.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))},w.hoverFormatter=function(d,S){if(S!==void 0){var T=this[d];return _.tickText(T,T.c2l(S),"hover").text}}},58547:function($,P,t){var A=t(30962).overrideAll,M=t(528),l=t(33539),_=t(27659).NG,m=t(71828),f=t(77922),o="gl3d",e="scene";P.name=o,P.attr=e,P.idRoot=e,P.idRegex=P.attrRegex=m.counterRegex("scene"),P.attributes=t(59084),P.layoutAttributes=t(65500),P.baseLayoutAttrOverrides=A({hoverlabel:M.hoverlabel},"plot","nested"),P.supplyLayoutDefaults=t(24682),P.plot=function(i){for(var r=i._fullLayout,n=i._fullData,s=r._subplots[o],a=0;a<s.length;a++){var u=s[a],p=_(n,o,u),c=r[u],x=c.camera,g=c._scene;g||(g=new l({id:u,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio,camera:x},r),c._scene=g),g.viewInitial||(g.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),g.plot(p,r,i.layout)}},P.clean=function(i,r,n,s){for(var a=s._subplots[o]||[],u=0;u<a.length;u++){var p=a[u];!r[p]&&s[p]._scene&&(s[p]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+p).remove())}},P.toSVG=function(i){for(var r=i._fullLayout,n=r._subplots[o],s=r._size,a=0;a<n.length;a++){var u=r[n[a]],p=u.domain,c=u._scene,x=c.toImage("png");r._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":x,x:s.l+s.w*p.x[0],y:s.t+s.h*(1-p.y[1]),width:s.w*(p.x[1]-p.x[0]),height:s.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},P.cleanId=function(i){if(i.match(/^scene[0-9]*$/)){var r=i.substr(5);return r==="1"&&(r=""),e+r}},P.updateFx=function(i){for(var r=i._fullLayout,n=r._subplots[o],s=0;s<n.length;s++)r[n[s]]._scene.updateFx(r.dragmode,r.hovermode)}},59084:function($){$.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},77894:function($,P,t){var A=t(7901),M=t(13838),l=t(1426).extendFlat,_=t(30962).overrideAll;$.exports=_({visible:M.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:A.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:M.color,categoryorder:M.categoryorder,categoryarray:M.categoryarray,title:{text:M.title.text,font:M.title.font},type:l({},M.type,{values:["-","linear","log","date","category"]}),autotypenumbers:M.autotypenumbers,autorange:M.autorange,autorangeoptions:{minallowed:M.autorangeoptions.minallowed,maxallowed:M.autorangeoptions.maxallowed,clipmin:M.autorangeoptions.clipmin,clipmax:M.autorangeoptions.clipmax,include:M.autorangeoptions.include,editType:"plot"},rangemode:M.rangemode,minallowed:M.minallowed,maxallowed:M.maxallowed,range:l({},M.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,mirror:M.mirror,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,showticklabels:M.showticklabels,labelalias:M.labelalias,tickfont:M.tickfont,tickangle:M.tickangle,tickprefix:M.tickprefix,showtickprefix:M.showtickprefix,ticksuffix:M.ticksuffix,showticksuffix:M.showticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:M.showline,linecolor:M.linecolor,linewidth:M.linewidth,showgrid:M.showgrid,gridcolor:l({},M.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:M.gridwidth,zeroline:M.zeroline,zerolinecolor:M.zerolinecolor,zerolinewidth:M.zerolinewidth,_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},"plot","from-root")},3277:function($,P,t){var A=t(84267).mix,M=t(71828),l=t(44467),_=t(77894),m=t(951),f=t(71453),o=["xaxis","yaxis","zaxis"];$.exports=function(e,i,r){var n,s;function a(c,x){return M.coerce(n,s,_,c,x)}for(var u=0;u<o.length;u++){var p=o[u];n=e[p]||{},(s=l.newContainer(i,p))._id=p[0]+r.scene,s._name=p,m(n,s,a,r),f(n,s,a,{font:r.font,letter:p[0],data:r.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),a("gridcolor",A(s.color,r.bgColor,72.72727272727273).toRgbString()),a("title.text",p[0]),s.setScale=M.noop,a("showspikes")&&(a("spikesides"),a("spikethickness"),a("spikecolor",s.color)),a("showaxeslabels"),a("showbackground")&&a("backgroundcolor")}}},30422:function($,P,t){var A=t(78614),M=t(71828),l=["xaxis","yaxis","zaxis"];function _(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}_.prototype.merge=function(m,f){for(var o=this,e=0;e<3;++e){var i=f[l[e]];i.visible?(o.labels[e]=m._meta?M.templateString(i.title.text,m._meta):i.title.text,"font"in i.title&&(i.title.font.color&&(o.labelColor[e]=A(i.title.font.color)),i.title.font.family&&(o.labelFont[e]=i.title.font.family),i.title.font.size&&(o.labelSize[e]=i.title.font.size)),"showline"in i&&(o.lineEnable[e]=i.showline),"linecolor"in i&&(o.lineColor[e]=A(i.linecolor)),"linewidth"in i&&(o.lineWidth[e]=i.linewidth),"showgrid"in i&&(o.gridEnable[e]=i.showgrid),"gridcolor"in i&&(o.gridColor[e]=A(i.gridcolor)),"gridwidth"in i&&(o.gridWidth[e]=i.gridwidth),i.type==="log"?o.zeroEnable[e]=!1:"zeroline"in i&&(o.zeroEnable[e]=i.zeroline),"zerolinecolor"in i&&(o.zeroLineColor[e]=A(i.zerolinecolor)),"zerolinewidth"in i&&(o.zeroLineWidth[e]=i.zerolinewidth),"ticks"in i&&i.ticks?o.lineTickEnable[e]=!0:o.lineTickEnable[e]=!1,"ticklen"in i&&(o.lineTickLength[e]=o._defaultLineTickLength[e]=i.ticklen),"tickcolor"in i&&(o.lineTickColor[e]=A(i.tickcolor)),"tickwidth"in i&&(o.lineTickWidth[e]=i.tickwidth),"tickangle"in i&&(o.tickAngle[e]=i.tickangle==="auto"?-3600:Math.PI*-i.tickangle/180),"showticklabels"in i&&(o.tickEnable[e]=i.showticklabels),"tickfont"in i&&(i.tickfont.color&&(o.tickColor[e]=A(i.tickfont.color)),i.tickfont.family&&(o.tickFont[e]=i.tickfont.family),i.tickfont.size&&(o.tickSize[e]=i.tickfont.size)),"mirror"in i?["ticks","all","allticks"].indexOf(i.mirror)!==-1?(o.lineTickMirror[e]=!0,o.lineMirror[e]=!0):i.mirror===!0?(o.lineTickMirror[e]=!1,o.lineMirror[e]=!0):(o.lineTickMirror[e]=!1,o.lineMirror[e]=!1):o.lineMirror[e]=!1,"showbackground"in i&&i.showbackground!==!1?(o.backgroundEnable[e]=!0,o.backgroundColor[e]=A(i.backgroundcolor)):o.backgroundEnable[e]=!1):(o.tickEnable[e]=!1,o.labelEnable[e]=!1,o.lineEnable[e]=!1,o.lineTickEnable[e]=!1,o.gridEnable[e]=!1,o.zeroEnable[e]=!1,o.backgroundEnable[e]=!1)}},$.exports=function(m,f){var o=new _;return o.merge(m,f),o}},24682:function($,P,t){var A=t(71828),M=t(7901),l=t(73972),_=t(49119),m=t(3277),f=t(65500),o=t(27659).NG,e="gl3d";function i(r,n,s,a){for(var u=s("bgcolor"),p=M.combine(u,a.paper_bgcolor),c=["up","center","eye"],x=0;x<c.length;x++)s("camera."+c[x]+".x"),s("camera."+c[x]+".y"),s("camera."+c[x]+".z");s("camera.projection.type");var g=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),h=s("aspectmode",g?"manual":"auto");g||(r.aspectratio=n.aspectratio={x:1,y:1,z:1},h==="manual"&&(n.aspectmode="auto"),r.aspectmode=n.aspectmode);var b=o(a.fullData,e,a.id);m(r,n,{font:a.font,scene:a.id,data:b,bgColor:p,calendar:a.calendar,autotypenumbersDflt:a.autotypenumbersDflt,fullLayout:a.fullLayout}),l.getComponentMethod("annotations3d","handleDefaults")(r,n,a);var v=a.getDfltFromLayout("dragmode");if(v!==!1&&!v)if(v="orbit",r.camera&&r.camera.up){var y=r.camera.up.x,w=r.camera.up.y,d=r.camera.up.z;d!==0&&(y&&w&&d?d/Math.sqrt(y*y+w*w+d*d)>.999&&(v="turntable"):v="turntable")}else v="turntable";s("dragmode",v),s("hovermode",a.getDfltFromLayout("hovermode"))}$.exports=function(r,n,s){var a=n._basePlotModules.length>1;_(r,n,s,{type:e,attributes:f,handleDefaults:i,fullLayout:n,font:n.font,fullData:s,getDfltFromLayout:function(u){if(!a)return A.validate(r[u],f[u])?r[u]:void 0},autotypenumbersDflt:n.autotypenumbers,paper_bgcolor:n.paper_bgcolor,calendar:n.calendar})}},65500:function($,P,t){var A=t(77894),M=t(27670).Y,l=t(1426).extendFlat,_=t(71828).counterRegex;function m(f,o,e){return{x:{valType:"number",dflt:f,editType:"camera"},y:{valType:"number",dflt:o,editType:"camera"},z:{valType:"number",dflt:e,editType:"camera"},editType:"camera"}}$.exports={_arrayAttrRegexps:[_("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:l(m(0,0,1),{}),center:l(m(0,0,0),{}),eye:l(m(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:M({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:A,yaxis:A,zaxis:A,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},13133:function($,P,t){var A=t(78614),M=["xaxis","yaxis","zaxis"];function l(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}l.prototype.merge=function(_){for(var m=0;m<3;++m){var f=_[M[m]];f.visible?(this.enabled[m]=f.showspikes,this.colors[m]=A(f.spikecolor),this.drawSides[m]=f.spikesides,this.lineWidth[m]=f.spikethickness):(this.enabled[m]=!1,this.drawSides[m]=!1)}},$.exports=function(_){var m=new l;return m.merge(_),m}},96085:function($,P,t){$.exports=function(m){for(var f=m.axesOptions,o=m.glplot.axesPixels,e=m.fullSceneLayout,i=[[],[],[]],r=0;r<3;++r){var n=e[l[r]];if(n._length=(o[r].hi-o[r].lo)*o[r].pixelsPerDataUnit/m.dataScale[r],Math.abs(n._length)===1/0||isNaN(n._length))i[r]=[];else{n._input_range=n.range.slice(),n.range[0]=o[r].lo/m.dataScale[r],n.range[1]=o[r].hi/m.dataScale[r],n._m=1/(m.dataScale[r]*o[r].pixelsPerDataUnit),n.range[0]===n.range[1]&&(n.range[0]-=1,n.range[1]+=1);var s=n.tickmode;if(n.tickmode==="auto"){n.tickmode="linear";var a=n.nticks||M.constrain(n._length/40,4,9);A.autoTicks(n,Math.abs(n.range[1]-n.range[0])/a)}for(var u=A.calcTicks(n,{msUTC:!0}),p=0;p<u.length;++p)u[p].x=u[p].x*m.dataScale[r],n.type==="date"&&(u[p].text=u[p].text.replace(/\<br\>/g," "));i[r]=u,n.tickmode=s}}for(f.ticks=i,r=0;r<3;++r)for(_[r]=.5*(m.glplot.bounds[0][r]+m.glplot.bounds[1][r]),p=0;p<2;++p)f.bounds[p][r]=m.glplot.bounds[p][r];m.contourLevels=function(c){for(var x=new Array(3),g=0;g<3;++g){for(var h=c[g],b=new Array(h.length),v=0;v<h.length;++v)b[v]=h[v].x;x[g]=b}return x}(i)};var A=t(89298),M=t(71828),l=["xaxis","yaxis","zaxis"],_=[0,0,0]},63538:function($){function P(t,A){var M,l,_=[0,0,0,0];for(M=0;M<4;++M)for(l=0;l<4;++l)_[l]+=t[4*M+l]*A[M];return _}$.exports=function(t,A){return P(t.projection,P(t.view,P(t.model,[A[0],A[1],A[2],1])))}},33539:function($,P,t){var A,M,l=t(9330).gl_plot3d,_=l.createCamera,m=l.createScene,f=t(40372),o=t(38520),e=t(73972),i=t(71828),r=i.preserveDrawingBuffer(),n=t(89298),s=t(30211),a=t(78614),u=t(58617),p=t(63538),c=t(30422),x=t(13133),g=t(96085),h=t(71739).applyAutorangeOptions,b=!1;function v(T,E){var C=document.createElement("div"),L=T.container;this.graphDiv=T.graphDiv;var O=document.createElementNS("http://www.w3.org/2000/svg","svg");O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",O.style["z-index"]=20,O.style["pointer-events"]="none",C.appendChild(O),this.svgContainer=O,C.id=T.id,C.style.position="absolute",C.style.top=C.style.left="0px",C.style.width=C.style.height="100%",L.appendChild(C),this.fullLayout=E,this.id=T.id||"scene",this.fullSceneLayout=E[this.id],this.plotArgs=[[],{},{}],this.axesOptions=c(E,E[this.id]),this.spikeOptions=x(E[this.id]),this.container=C,this.staticMode=!!T.staticPlot,this.pixelRatio=this.pixelRatio||T.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=e.getComponentMethod("annotations3d","convert"),this.drawAnnotations=e.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=v.prototype;y.prepareOptions=function(){var T=this,E={canvas:T.canvas,gl:T.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:T.container,axes:T.axesOptions,spikes:T.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:T.camera,pixelRatio:T.pixelRatio};if(T.staticMode){if(!(M||(A=document.createElement("canvas"),M=f({canvas:A,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=M,E.canvas=A}return E};var w=!0;y.tryCreatePlot=function(){var T=this,E=T.prepareOptions(),C=!0;try{T.glplot=m(E)}catch{if(T.staticMode||!w||r)C=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=E.glOptions.preserveDrawingBuffer=!0,T.glplot=m(E)}catch{r=E.glOptions.preserveDrawingBuffer=!1,C=!1}}}return w=!1,C},y.initializeGLCamera=function(){var T=this,E=T.fullSceneLayout.camera,C=E.projection.type==="orthographic";T.camera=_(T.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:C,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var T=this;if(T.initializeGLCamera(),!T.tryCreatePlot())return u(T);T.traces={},T.make4thDimension();var E=T.graphDiv,C=E.layout,L=function(){var z={};return T.isCameraChanged(C)&&(z[T.id+".camera"]=T.getCamera()),T.isAspectChanged(C)&&(z[T.id+".aspectratio"]=T.glplot.getAspectratio(),C[T.id].aspectmode!=="manual"&&(T.fullSceneLayout.aspectmode=C[T.id].aspectmode=z[T.id+".aspectmode"]="manual")),z},O=function(z){if(z.fullSceneLayout.dragmode!==!1){var G=L();z.saveLayout(C),z.graphDiv.emit("plotly_relayout",G)}};return T.glplot.canvas&&(T.glplot.canvas.addEventListener("mouseup",function(){O(T)}),T.glplot.canvas.addEventListener("touchstart",function(){b=!0}),T.glplot.canvas.addEventListener("wheel",function(z){if(E._context._scrollZoom.gl3d){if(T.camera._ortho){var G=z.deltaX>z.deltaY?1.1:.9090909090909091,I=T.glplot.getAspectratio();T.glplot.setAspectratio({x:G*I.x,y:G*I.y,z:G*I.z})}O(T)}},!!o&&{passive:!1}),T.glplot.canvas.addEventListener("mousemove",function(){if(T.fullSceneLayout.dragmode!==!1&&T.camera.mouseListener.buttons!==0){var z=L();T.graphDiv.emit("plotly_relayouting",z)}}),T.staticMode||T.glplot.canvas.addEventListener("webglcontextlost",function(z){E&&E.emit&&E.emit("plotly_webglcontextlost",{event:z,layer:T.id})},!1)),T.glplot.oncontextloss=function(){T.recoverContext()},T.glplot.onrender=function(){T.render()},!0},y.render=function(){var T,E=this,C=E.graphDiv,L=E.svgContainer,O=E.container.getBoundingClientRect();C._fullLayout._calcInverseTransform(C);var z=C._fullLayout._invScaleX,G=C._fullLayout._invScaleY,I=O.width*z,H=O.height*G;L.setAttributeNS(null,"viewBox","0 0 "+I+" "+H),L.setAttributeNS(null,"width",I),L.setAttributeNS(null,"height",H),g(E),E.glplot.axes.update(E.axesOptions);for(var N=Object.keys(E.traces),F=null,V=E.glplot.selection,W=0;W<N.length;++W)(T=E.traces[N[W]]).data.hoverinfo!=="skip"&&T.handlePick(V)&&(F=T),T.setContourLevels&&T.setContourLevels();function te(me,ve,Le){var Ae=E.fullSceneLayout[me+"axis"];return Ae.type!=="log"&&(ve=Ae.d2l(ve)),n.hoverLabelText(Ae,ve,Le)}if(F!==null){var Q=p(E.glplot.cameraParams,V.dataCoordinate);T=F.data;var X,q=C._fullData[T.index],Z=V.index,J={xLabel:te("x",V.traceCoordinate[0],T.xhoverformat),yLabel:te("y",V.traceCoordinate[1],T.yhoverformat),zLabel:te("z",V.traceCoordinate[2],T.zhoverformat)},ne=s.castHoverinfo(q,E.fullLayout,Z),re=(ne||"").split("+"),ae=ne&&ne==="all";q.hovertemplate||ae||(re.indexOf("x")===-1&&(J.xLabel=void 0),re.indexOf("y")===-1&&(J.yLabel=void 0),re.indexOf("z")===-1&&(J.zLabel=void 0),re.indexOf("text")===-1&&(V.textLabel=void 0),re.indexOf("name")===-1&&(F.name=void 0));var ue=[];T.type==="cone"||T.type==="streamtube"?(J.uLabel=te("x",V.traceCoordinate[3],T.uhoverformat),(ae||re.indexOf("u")!==-1)&&ue.push("u: "+J.uLabel),J.vLabel=te("y",V.traceCoordinate[4],T.vhoverformat),(ae||re.indexOf("v")!==-1)&&ue.push("v: "+J.vLabel),J.wLabel=te("z",V.traceCoordinate[5],T.whoverformat),(ae||re.indexOf("w")!==-1)&&ue.push("w: "+J.wLabel),J.normLabel=V.traceCoordinate[6].toPrecision(3),(ae||re.indexOf("norm")!==-1)&&ue.push("norm: "+J.normLabel),T.type==="streamtube"&&(J.divergenceLabel=V.traceCoordinate[7].toPrecision(3),(ae||re.indexOf("divergence")!==-1)&&ue.push("divergence: "+J.divergenceLabel)),V.textLabel&&ue.push(V.textLabel),X=ue.join("<br>")):T.type==="isosurface"||T.type==="volume"?(J.valueLabel=n.hoverLabelText(E._mockAxis,E._mockAxis.d2l(V.traceCoordinate[3]),T.valuehoverformat),ue.push("value: "+J.valueLabel),V.textLabel&&ue.push(V.textLabel),X=ue.join("<br>")):X=V.textLabel;var he={x:V.traceCoordinate[0],y:V.traceCoordinate[1],z:V.traceCoordinate[2],data:q._input,fullData:q,curveNumber:q.index,pointNumber:Z};s.appendArrayPointValue(he,q,Z),T._module.eventData&&(he=q._module.eventData(he,V,q,{},Z));var de={points:[he]};if(E.fullSceneLayout.hovermode){var xe=[];s.loneHover({trace:q,x:(.5+.5*Q[0]/Q[3])*I,y:(.5-.5*Q[1]/Q[3])*H,xLabel:J.xLabel,yLabel:J.yLabel,zLabel:J.zLabel,text:X,name:F.name,color:s.castHoverOption(q,Z,"bgcolor")||F.color,borderColor:s.castHoverOption(q,Z,"bordercolor"),fontFamily:s.castHoverOption(q,Z,"font.family"),fontSize:s.castHoverOption(q,Z,"font.size"),fontColor:s.castHoverOption(q,Z,"font.color"),nameLength:s.castHoverOption(q,Z,"namelength"),textAlign:s.castHoverOption(q,Z,"align"),hovertemplate:i.castOption(q,Z,"hovertemplate"),hovertemplateLabels:i.extendFlat({},he,J),eventData:[he]},{container:L,gd:C,inOut_bbox:xe}),he.bbox=xe[0]}V.distance<5&&(V.buttons||b)?C.emit("plotly_click",de):C.emit("plotly_hover",de),this.oldEventData=de}else s.loneUnhover(L),this.oldEventData&&C.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;E.drawAnnotations(E)},y.recoverContext=function(){var T=this;T.glplot.dispose();var E=function(){T.glplot.gl.isContextLost()?requestAnimationFrame(E):T.initializeGLPlot()?T.plot.apply(T,T.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(E)};var d=["xaxis","yaxis","zaxis"];function S(T,E,C){for(var L=T.fullSceneLayout,O=0;O<3;O++){var z=d[O],G=z.charAt(0),I=L[z],H=E[G],N=E[G+"calendar"],F=E["_"+G+"length"];if(i.isArrayOrTypedArray(H))for(var V,W=0;W<(F||H.length);W++)if(i.isArrayOrTypedArray(H[W]))for(var te=0;te<H[W].length;++te)V=I.d2l(H[W][te],0,N),!isNaN(V)&&isFinite(V)&&(C[0][O]=Math.min(C[0][O],V),C[1][O]=Math.max(C[1][O],V));else V=I.d2l(H[W],0,N),!isNaN(V)&&isFinite(V)&&(C[0][O]=Math.min(C[0][O],V),C[1][O]=Math.max(C[1][O],V));else C[0][O]=Math.min(C[0][O],0),C[1][O]=Math.max(C[1][O],F-1)}}y.plot=function(T,E,C){var L=this;if(L.plotArgs=[T,E,C],!L.glplot.contextLost){var O,z,G,I,H,N,F=E[L.id],V=C[L.id];L.fullLayout=E,L.fullSceneLayout=F,L.axesOptions.merge(E,F),L.spikeOptions.merge(F),L.setViewport(F),L.updateFx(F.dragmode,F.hovermode),L.camera.enableWheel=L.graphDiv._context._scrollZoom.gl3d,L.glplot.setClearColor(a(F.bgcolor)),L.setConvert(H),T?Array.isArray(T)||(T=[T]):T=[];var W=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(G=0;G<T.length;++G)(O=T[G]).visible===!0&&O._length!==0&&S(this,O,W);(function(Ie,Be){for(var ce=Ie.fullSceneLayout,Te=ce.annotations||[],ye=0;ye<3;ye++)for(var Pe=d[ye],Re=Pe.charAt(0),ze=ce[Pe],He=0;He<Te.length;He++){var We=Te[He];if(We.visible){var Je=ze.r2l(We[Re]);!isNaN(Je)&&isFinite(Je)&&(Be[0][ye]=Math.min(Be[0][ye],Je),Be[1][ye]=Math.max(Be[1][ye],Je))}}})(this,W);var te=[1,1,1];for(I=0;I<3;++I)W[1][I]===W[0][I]?te[I]=1:te[I]=1/(W[1][I]-W[0][I]);for(L.dataScale=te,L.convertAnnotations(this),G=0;G<T.length;++G)(O=T[G]).visible===!0&&O._length!==0&&((z=L.traces[O.uid])?z.data.type===O.type?z.update(O):(z.dispose(),z=O._module.plot(this,O),L.traces[O.uid]=z):(z=O._module.plot(this,O),L.traces[O.uid]=z),z.name=O.name);var Q=Object.keys(L.traces);e:for(G=0;G<Q.length;++G){for(I=0;I<T.length;++I)if(T[I].uid===Q[G]&&T[I].visible===!0&&T[I]._length!==0)continue e;(z=L.traces[Q[G]]).dispose(),delete L.traces[Q[G]]}L.glplot.objects.sort(function(Ie,Be){return Ie._trace.data.index-Be._trace.data.index});var X,q=[[0,0,0],[0,0,0]],Z=[],J={};for(G=0;G<3;++G){var ne;if((N=(H=F[d[G]]).type)in J?(J[N].acc*=te[G],J[N].count+=1):J[N]={acc:te[G],count:1},H.autorange){q[0][G]=1/0,q[1][G]=-1/0;var re=L.glplot.objects,ae=L.fullSceneLayout.annotations||[],ue=H._name.charAt(0);for(I=0;I<re.length;I++){var he=re[I],de=he.bounds,xe=he._trace.data._pad||0;he.constructor.name==="ErrorBars"&&H._lowerLogErrorBound?q[0][G]=Math.min(q[0][G],H._lowerLogErrorBound):q[0][G]=Math.min(q[0][G],de[0][G]/te[G]-xe),q[1][G]=Math.max(q[1][G],de[1][G]/te[G]+xe)}for(I=0;I<ae.length;I++){var me=ae[I];if(me.visible){var ve=H.r2l(me[ue]);q[0][G]=Math.min(q[0][G],ve),q[1][G]=Math.max(q[1][G],ve)}}if("rangemode"in H&&H.rangemode==="tozero"&&(q[0][G]=Math.min(q[0][G],0),q[1][G]=Math.max(q[1][G],0)),q[0][G]>q[1][G])q[0][G]=-1,q[1][G]=1;else{var Le=q[1][G]-q[0][G];q[0][G]-=Le/32,q[1][G]+=Le/32}if(ne=[q[0][G],q[1][G]],ne=h(ne,H),q[0][G]=ne[0],q[1][G]=ne[1],H.isReversed()){var Ae=q[0][G];q[0][G]=q[1][G],q[1][G]=Ae}}else ne=H.range,q[0][G]=H.r2l(ne[0]),q[1][G]=H.r2l(ne[1]);q[0][G]===q[1][G]&&(q[0][G]-=1,q[1][G]+=1),Z[G]=q[1][G]-q[0][G],H.range=[q[0][G],q[1][G]],H.limitRange(),L.glplot.setBounds(G,{min:H.range[0]*te[G],max:H.range[1]*te[G]})}var we=F.aspectmode;if(we==="cube")X=[1,1,1];else if(we==="manual"){var se=F.aspectratio;X=[se.x,se.y,se.z]}else{if(we!=="auto"&&we!=="data")throw new Error("scene.js aspectRatio was not one of the enumerated types");var oe=[1,1,1];for(G=0;G<3;++G){var fe=J[N=(H=F[d[G]]).type];oe[G]=Math.pow(fe.acc,1/fe.count)/te[G]}X=we==="data"||Math.max.apply(null,oe)/Math.min.apply(null,oe)<=4?oe:[1,1,1]}F.aspectratio.x=V.aspectratio.x=X[0],F.aspectratio.y=V.aspectratio.y=X[1],F.aspectratio.z=V.aspectratio.z=X[2],L.glplot.setAspectratio(F.aspectratio),L.viewInitial.aspectratio||(L.viewInitial.aspectratio={x:F.aspectratio.x,y:F.aspectratio.y,z:F.aspectratio.z}),L.viewInitial.aspectmode||(L.viewInitial.aspectmode=F.aspectmode);var Se=F.domain||null,Me=E._size||null;if(Se&&Me){var be=L.container.style;be.position="absolute",be.left=Me.l+Se.x[0]*Me.w+"px",be.top=Me.t+(1-Se.y[1])*Me.h+"px",be.width=Me.w*(Se.x[1]-Se.x[0])+"px",be.height=Me.h*(Se.y[1]-Se.y[0])+"px"}L.glplot.redraw()}},y.destroy=function(){var T=this;T.glplot&&(T.camera.mouseListener.enabled=!1,T.container.removeEventListener("wheel",T.camera.wheelListener),T.camera=null,T.glplot.dispose(),T.container.parentNode.removeChild(T.container),T.glplot=null)},y.getCamera=function(){var T,E=this;return E.camera.view.recalcMatrix(E.camera.view.lastT()),{up:{x:(T=E.camera).up[0],y:T.up[1],z:T.up[2]},center:{x:T.center[0],y:T.center[1],z:T.center[2]},eye:{x:T.eye[0],y:T.eye[1],z:T.eye[2]},projection:{type:T._ortho===!0?"orthographic":"perspective"}}},y.setViewport=function(T){var E,C=this,L=T.camera;C.camera.lookAt.apply(this,[[(E=L).eye.x,E.eye.y,E.eye.z],[E.center.x,E.center.y,E.center.z],[E.up.x,E.up.y,E.up.z]]),C.glplot.setAspectratio(T.aspectratio),L.projection.type==="orthographic"!==C.camera._ortho&&(C.glplot.redraw(),C.glplot.clearRGBA(),C.glplot.dispose(),C.initializeGLPlot())},y.isCameraChanged=function(T){var E=this.getCamera(),C=i.nestedProperty(T,this.id+".camera").get();function L(I,H,N,F){var V=["up","center","eye"],W=["x","y","z"];return H[V[N]]&&I[V[N]][W[F]]===H[V[N]][W[F]]}var O=!1;if(C===void 0)O=!0;else{for(var z=0;z<3;z++)for(var G=0;G<3;G++)if(!L(E,C,z,G)){O=!0;break}(!C.projection||E.projection&&E.projection.type!==C.projection.type)&&(O=!0)}return O},y.isAspectChanged=function(T){var E=this.glplot.getAspectratio(),C=i.nestedProperty(T,this.id+".aspectratio").get();return C===void 0||C.x!==E.x||C.y!==E.y||C.z!==E.z},y.saveLayout=function(T){var E,C,L,O,z,G,I=this,H=I.fullLayout,N=I.isCameraChanged(T),F=I.isAspectChanged(T),V=N||F;if(V){var W={};N&&(E=I.getCamera(),L=(C=i.nestedProperty(T,I.id+".camera")).get(),W[I.id+".camera"]=L),F&&(O=I.glplot.getAspectratio(),G=(z=i.nestedProperty(T,I.id+".aspectratio")).get(),W[I.id+".aspectratio"]=G),e.call("_storeDirectGUIEdit",T,H._preGUI,W),N&&(C.set(E),i.nestedProperty(H,I.id+".camera").set(E)),F&&(z.set(O),i.nestedProperty(H,I.id+".aspectratio").set(O),I.glplot.redraw())}return V},y.updateFx=function(T,E){var C=this,L=C.camera;if(L)if(T==="orbit")L.mode="orbit",L.keyBindingMode="rotate";else if(T==="turntable"){L.up=[0,0,1],L.mode="turntable",L.keyBindingMode="rotate";var O=C.graphDiv,z=O._fullLayout,G=C.fullSceneLayout.camera,I=G.up.x,H=G.up.y,N=G.up.z;if(N/Math.sqrt(I*I+H*H+N*N)<.999){var F=C.id+".camera.up",V={x:0,y:0,z:1},W={};W[F]=V;var te=O.layout;e.call("_storeDirectGUIEdit",te,z._preGUI,W),G.up=V,i.nestedProperty(te,F).set(V)}}else L.keyBindingMode=T;C.fullSceneLayout.hovermode=E},y.toImage=function(T){var E=this;T||(T="png"),E.staticMode&&E.container.appendChild(A),E.glplot.redraw();var C=E.glplot.gl,L=C.drawingBufferWidth,O=C.drawingBufferHeight;C.bindFramebuffer(C.FRAMEBUFFER,null);var z=new Uint8Array(L*O*4);C.readPixels(0,0,L,O,C.RGBA,C.UNSIGNED_BYTE,z),function(F,V,W){for(var te=0,Q=W-1;te<Q;++te,--Q)for(var X=0;X<V;++X)for(var q=0;q<4;++q){var Z=4*(V*te+X)+q,J=4*(V*Q+X)+q,ne=F[Z];F[Z]=F[J],F[J]=ne}}(z,L,O),function(F,V,W){for(var te=0;te<W;++te)for(var Q=0;Q<V;++Q){var X=4*(V*te+Q),q=F[X+3];if(q>0)for(var Z=255/q,J=0;J<3;++J)F[X+J]=Math.min(Z*F[X+J],255)}}(z,L,O);var G=document.createElement("canvas");G.width=L,G.height=O;var I,H=G.getContext("2d",{willReadFrequently:!0}),N=H.createImageData(L,O);switch(N.data.set(z),H.putImageData(N,0,0),T){case"jpeg":I=G.toDataURL("image/jpeg");break;case"webp":I=G.toDataURL("image/webp");break;default:I=G.toDataURL("image/png")}return E.staticMode&&E.container.removeChild(A),I},y.setConvert=function(){for(var T=0;T<3;T++){var E=this.fullSceneLayout[d[T]];n.setConvert(E,this.fullLayout),E.setScale=i.noop}},y.make4thDimension=function(){var T=this,E=T.graphDiv._fullLayout;T._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(T._mockAxis,E)},$.exports=v},90060:function($){$.exports=function(P,t,A,M){M=M||P.length;for(var l=new Array(M),_=0;_<M;_++)l[_]=[P[_],t[_],A[_]];return l}},10820:function($,P,t){var A=t(41940),M=t(85594),l=t(22399),_=t(29241),m=t(53777),f=t(35025),o=t(1426).extendFlat,e=A({editType:"calc"});e.family.dflt='"Open Sans", verdana, arial, sans-serif',e.size.dflt=12,e.color.dflt=l.defaultLine,$.exports={font:e,title:{text:{valType:"string",editType:"layoutstyle"},font:A({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(f({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:l.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:l.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:l.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:_.newshape,activeshape:_.activeshape,newselection:m.newselection,activeselection:m.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},M.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:A({editType:"layoutstyle"})}}},77734:function($,P,t){var A=t(78607),M="1.10.1",l=' <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',_=[' <a target="_blank" href="https://carto.com/">Carto</a>',l].join(" "),m=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),f={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:l,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:_,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:m,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:m,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},o=A(f);$.exports={requiredVersion:M,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:f,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+M+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},13056:function($,P,t){var A=t(71828);$.exports=function(M,l){var _=M.split(" "),m=_[0],f=_[1],o=A.isArrayOrTypedArray(l)?A.mean(l):l,e=.5+o/100,i=1.5+o/100,r=["",""],n=[0,0];switch(m){case"top":r[0]="top",n[1]=-i;break;case"bottom":r[0]="bottom",n[1]=i}switch(f){case"left":r[1]="right",n[0]=-e;break;case"right":r[1]="left",n[0]=e}return{anchor:r[0]&&r[1]?r.join("-"):r[0]?r[0]:r[1]?r[1]:"center",offset:n}}},50101:function($,P,t){var A=t(44517),M=t(71828),l=M.strTranslate,_=M.strScale,m=t(27659).AU,f=t(77922),o=t(39898),e=t(91424),i=t(63893),r=t(10481),n="mapbox",s=P.constants=t(77734);function a(u){return typeof u=="string"&&(s.styleValuesMapbox.indexOf(u)!==-1||u.indexOf("mapbox://")===0)}P.name=n,P.attr="subplot",P.idRoot=n,P.idRegex=P.attrRegex=M.counterRegex(n),P.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},P.layoutAttributes=t(23585),P.supplyLayoutDefaults=t(77882),P.plot=function(u){var p=u._fullLayout,c=u.calcdata,x=p._subplots[n];if(A.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var g=function(d,S){var T=d._fullLayout;if(d._context.mapboxAccessToken==="")return"";for(var E=[],C=[],L=!1,O=!1,z=0;z<S.length;z++){var G=T[S[z]],I=G.accesstoken;a(G.style)&&(I?M.pushUnique(E,I):(a(G._input.style)&&(M.error("Uses Mapbox map style, but did not set an access token."),L=!0),O=!0)),I&&M.pushUnique(C,I)}if(O){var H=L?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw M.error(H),new Error(H)}return E.length?(E.length>1&&M.warn(s.multipleTokensErrorMsg),E[0]):(C.length&&M.log(["Listed mapbox access token(s)",C.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(u,x);A.accessToken=g;for(var h=0;h<x.length;h++){var b=x[h],v=m(c,n,b),y=p[b],w=y._subplot;w||(w=new r(u,b),p[b]._subplot=w),w.viewInitial||(w.viewInitial={center:M.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),w.plot(v,p,u._promises)}},P.clean=function(u,p,c,x){for(var g=x._subplots[n]||[],h=0;h<g.length;h++){var b=g[h];!p[b]&&x[b]._subplot&&x[b]._subplot.destroy()}},P.toSVG=function(u){for(var p=u._fullLayout,c=p._subplots[n],x=p._size,g=0;g<c.length;g++){var h=p[c[g]],b=h.domain,v=h._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:f.svg,"xlink:href":v,x:x.l+x.w*b.x[0],y:x.t+x.h*(1-b.y[1]),width:x.w*(b.x[1]-b.x[0]),height:x.h*(b.y[1]-b.y[0]),preserveAspectRatio:"none"});var y=o.select(h._subplot.div);if(y.select(".mapboxgl-ctrl-logo").node().offsetParent!==null){var w=p._glimages.append("g");w.attr("transform",l(x.l+x.w*b.x[0]+10,x.t+x.h*(1-b.y[0])-31)),w.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),w.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),w.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),w.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var d=y.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),S=p._glimages.append("g"),T=S.append("text");T.text(d).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":d});var E=e.bBox(T.node()),C=x.w*(b.x[1]-b.x[0]);if(E.width>C/2){var L=d.split("|").join("<br>");T.text(L).attr("data-unformatted",L).call(i.convertToTspans,u),E=e.bBox(T.node())}T.attr("transform",l(-3,8-E.height)),S.insert("rect",".static-attribution").attr({x:-E.width-6,y:-E.height-3,width:E.width+6,height:E.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;E.width+6>C&&(O=C/(E.width+6));var z=[x.l+x.w*b.x[1],x.t+x.h*(1-b.y[0])];S.attr("transform",l(z[0],z[1])+_(O))}},P.updateFx=function(u){for(var p=u._fullLayout,c=p._subplots[n],x=0;x<c.length;x++)p[c[x]]._subplot.updateFx(p)}},67911:function($,P,t){var A=t(71828),M=t(63893).sanitizeHTML,l=t(13056),_=t(77734);function m(i,r){this.subplot=i,this.uid=i.uid+"-"+r,this.index=r,this.idSource="source-"+this.uid,this.idLayer=_.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var f=m.prototype;function o(i){if(!i.visible)return!1;var r=i.source;if(Array.isArray(r)&&r.length>0){for(var n=0;n<r.length;n++)if(typeof r[n]!="string"||r[n].length===0)return!1;return!0}return A.isPlainObject(r)||typeof r=="string"&&r.length>0}function e(i){var r={},n={};switch(i.type){case"circle":A.extendFlat(n,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":A.extendFlat(n,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":A.extendFlat(n,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var s=i.symbol,a=l(s.textposition,s.iconsize);A.extendFlat(r,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":a.anchor,"text-offset":a.offset,"symbol-placement":s.placement}),A.extendFlat(n,{"icon-color":i.color,"text-color":s.textfont.color,"text-opacity":i.opacity});break;case"raster":A.extendFlat(n,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:r,paint:n}}f.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=o(i)},f.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&this.sourceType==="image"&&i.sourcetype==="image"&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},f.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},f.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},f.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},f.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var r=this.findFollowingMapboxLayerId(this.lookupBelow());r!==null&&this.subplot.map.moveLayer(this.idLayer,r)},f.updateSource=function(i){var r=this.subplot.map;if(r.getSource(this.idSource)&&r.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,o(i)){var n=function(s){var a,u=s.sourcetype,p=s.source,c={type:u};return u==="geojson"?a="data":u==="vector"?a=typeof p=="string"?"url":"tiles":u==="raster"?(a="tiles",c.tileSize=256):u==="image"&&(a="url",c.coordinates=s.coordinates),c[a]=p,s.sourceattribution&&(c.attribution=M(s.sourceattribution)),c}(i);r.addSource(this.idSource,n)}},f.findFollowingMapboxLayerId=function(i){if(i==="traces")for(var r=this.subplot.getMapLayers(),n=0;n<r.length;n++){var s=r[n].id;if(typeof s=="string"&&s.indexOf(_.traceLayerPrefix)===0){i=s;break}}return i},f.updateLayer=function(i){var r=this.subplot,n=e(i),s=this.lookupBelow(),a=this.findFollowingMapboxLayerId(s);this.removeLayer(),o(i)&&r.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:n.layout,paint:n.paint},a),this.layerType=i.type,this.below=s},f.updateStyle=function(i){if(o(i)){var r=e(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",r.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",r.paint)}},f.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},f.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},$.exports=function(i,r,n){var s=new m(i,r);return s.update(n),s}},23585:function($,P,t){var A=t(71828),M=t(7901).defaultLine,l=t(27670).Y,_=t(41940),m=t(82196).textposition,f=t(30962).overrideAll,o=t(44467).templatedArray,e=t(77734),i=_({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",($.exports=f({_arrayAttrRegexps:[A.counterRegex("mapbox",".layers",!0)],domain:l({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:e.styleValuesMapbox.concat(e.styleValuesNonMapbox),dflt:e.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:o("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:M},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:M}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:A.extendFlat({},m,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},77882:function($,P,t){var A=t(71828),M=t(49119),l=t(85501),_=t(23585);function m(o,e,i,r){i("accesstoken",r.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch");var n=i("bounds.west"),s=i("bounds.east"),a=i("bounds.south"),u=i("bounds.north");n!==void 0&&s!==void 0&&a!==void 0&&u!==void 0||delete e.bounds,l(o,e,{name:"layers",handleItemDefaults:f}),e._input=o}function f(o,e){function i(u,p){return A.coerce(o,e,_.layers,u,p)}if(i("visible")){var r,n=i("sourcetype"),s=n==="raster"||n==="image";i("source"),i("sourceattribution"),n==="vector"&&i("sourcelayer"),n==="image"&&i("coordinates"),s&&(r="raster");var a=i("type",r);s&&a!=="raster"&&(a=e.type="raster",A.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),a==="circle"&&i("circle.radius"),a==="line"&&(i("line.width"),i("line.dash")),a==="fill"&&i("fill.outlinecolor"),a==="symbol"&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),A.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}$.exports=function(o,e,i){M(o,e,i,{type:"mapbox",attributes:_,handleDefaults:m,partition:"y",accessToken:e._mapboxAccessToken})}},10481:function($,P,t){var A=t(44517),M=t(71828),l=t(41327),_=t(73972),m=t(89298),f=t(28569),o=t(30211),e=t(64505),i=e.drawMode,r=e.selectMode,n=t(47322).prepSelect,s=t(47322).clearOutline,a=t(47322).clearSelectionsCache,u=t(47322).selectOnClick,p=t(77734),c=t(67911);function x(w,d){this.id=d,this.gd=w;var S=w._fullLayout,T=w._context;this.container=S._glcontainer.node(),this.isStatic=T.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var g=x.prototype;g.plot=function(w,d,S){var T,E=this,C=d[E.id];E.map&&C.accesstoken!==E.accessToken&&(E.map.remove(),E.map=null,E.styleObj=null,E.traceHash={},E.layerList=[]),T=E.map?new Promise(function(L,O){E.updateMap(w,d,L,O)}):new Promise(function(L,O){E.createMap(w,d,L,O)}),S.push(T)},g.createMap=function(w,d,S,T){var E=this,C=d[E.id],L=E.styleObj=b(C.style);E.accessToken=C.accesstoken;var O=C.bounds,z=O?[[O.west,O.south],[O.east,O.north]]:null,G=E.map=new A.Map({container:E.div,style:L.style,center:y(C.center),zoom:C.zoom,bearing:C.bearing,pitch:C.pitch,maxBounds:z,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new A.AttributionControl({compact:!0}));G._canvas.style.left="0px",G._canvas.style.top="0px",E.rejectOnError(T),E.isStatic||E.initFx(w,d);var I=[];I.push(new Promise(function(H){G.once("load",H)})),I=I.concat(l.fetchTraceGeoData(w)),Promise.all(I).then(function(){E.fillBelowLookup(w,d),E.updateData(w),E.updateLayout(d),E.resolveOnRender(S)}).catch(T)},g.updateMap=function(w,d,S,T){var E=this,C=E.map,L=d[this.id];E.rejectOnError(T);var O=[],z=b(L.style);JSON.stringify(E.styleObj)!==JSON.stringify(z)&&(E.styleObj=z,C.setStyle(z.style),E.traceHash={},O.push(new Promise(function(G){C.once("styledata",G)}))),O=O.concat(l.fetchTraceGeoData(w)),Promise.all(O).then(function(){E.fillBelowLookup(w,d),E.updateData(w),E.updateLayout(d),E.resolveOnRender(S)}).catch(T)},g.fillBelowLookup=function(w,d){var S,T,E=d[this.id].layers,C=this.belowLookup={},L=!1;for(S=0;S<w.length;S++){var O=w[S][0].trace,z=O._module;typeof O.below=="string"?T=O.below:z.getBelow&&(T=z.getBelow(O,this)),T===""&&(L=!0),C["trace-"+O.uid]=T||""}for(S=0;S<E.length;S++){var G=E[S];T=typeof G.below=="string"?G.below:L?"traces":"",C["layout-"+S]=T}var I,H,N={};for(I in C)N[T=C[I]]?N[T].push(I):N[T]=[I];for(T in N){var F=N[T];if(F.length>1)for(S=0;S<F.length;S++)(I=F[S]).indexOf("trace-")===0?(H=I.split("trace-")[1],this.traceHash[H]&&(this.traceHash[H].below=null)):I.indexOf("layout-")===0&&(H=I.split("layout-")[1],this.layerList[H]&&(this.layerList[H].below=null))}};var h={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function b(w){var d={};return M.isPlainObject(w)?(d.id=w.id,d.style=w):typeof w=="string"?(d.id=w,p.styleValuesMapbox.indexOf(w)!==-1?d.style=v(w):p.stylesNonMapbox[w]?d.style=p.stylesNonMapbox[w]:d.style=w):(d.id=p.styleValueDflt,d.style=v(p.styleValueDflt)),d.transition={duration:0,delay:0},d}function v(w){return p.styleUrlPrefix+w+"-"+p.styleUrlSuffix}function y(w){return[w.lon,w.lat]}g.updateData=function(w){var d,S,T,E,C=this.traceHash,L=w.slice().sort(function(H,N){return h[H[0].trace.type]-h[N[0].trace.type]});for(T=0;T<L.length;T++){var O=L[T],z=!1;(d=C[(S=O[0].trace).uid])&&(d.type===S.type?(d.update(O),z=!0):d.dispose()),!z&&S._module&&(C[S.uid]=S._module.plot(this,O))}var G=Object.keys(C);e:for(T=0;T<G.length;T++){var I=G[T];for(E=0;E<w.length;E++)if(I===(S=w[E][0].trace).uid)continue e;(d=C[I]).dispose(),delete C[I]}},g.updateLayout=function(w){var d=this.map,S=w[this.id];this.dragging||this.wheeling||(d.setCenter(y(S.center)),d.setZoom(S.zoom),d.setBearing(S.bearing),d.setPitch(S.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?d.scrollZoom.enable():d.scrollZoom.disable()},g.resolveOnRender=function(w){var d=this.map;d.on("render",function S(){d.loaded()&&(d.off("render",S),setTimeout(w,10))})},g.rejectOnError=function(w){var d=this.map;function S(){w(new Error(p.mapOnErrorMsg))}d.once("error",S),d.once("style.error",S),d.once("source.error",S),d.once("tile.error",S),d.once("layer.error",S)},g.createFramework=function(w){var d=this,S=d.div=document.createElement("div");S.id=d.uid,S.style.position="absolute",d.container.appendChild(S),d.xaxis={_id:"x",c2p:function(T){return d.project(T).x}},d.yaxis={_id:"y",c2p:function(T){return d.project(T).y}},d.updateFramework(w),d.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},m.setConvert(d.mockAxis,w)},g.initFx=function(w,d){var S=this,T=S.gd,E=S.map;function C(){o.loneUnhover(d._hoverlayer)}function L(){var O=S.getView();T.emit("plotly_relayouting",S.getViewEditsWithDerived(O))}E.on("moveend",function(O){if(S.map){var z=T._fullLayout;if(O.originalEvent||S.wheeling){var G=z[S.id];_.call("_storeDirectGUIEdit",T.layout,z._preGUI,S.getViewEdits(G));var I=S.getView();G._input.center=G.center=I.center,G._input.zoom=G.zoom=I.zoom,G._input.bearing=G.bearing=I.bearing,G._input.pitch=G.pitch=I.pitch,T.emit("plotly_relayout",S.getViewEditsWithDerived(I))}O.originalEvent&&O.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),z._rehover&&z._rehover()}}),E.on("wheel",function(){S.wheeling=!0}),E.on("mousemove",function(O){var z=S.div.getBoundingClientRect(),G=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return z},S.xaxis.p2c=function(){return E.unproject(G).lng},S.yaxis.p2c=function(){return E.unproject(G).lat},T._fullLayout._rehover=function(){T._fullLayout._hoversubplot===S.id&&T._fullLayout[S.id]&&o.hover(T,O,S.id)},o.hover(T,O,S.id),T._fullLayout._hoversubplot=S.id}),E.on("dragstart",function(){S.dragging=!0,C()}),E.on("zoomstart",C),E.on("mouseout",function(){T._fullLayout._hoversubplot=null}),E.on("drag",L),E.on("zoom",L),E.on("dblclick",function(){var O=T._fullLayout[S.id];_.call("_storeDirectGUIEdit",T.layout,T._fullLayout._preGUI,S.getViewEdits(O));var z=S.viewInitial;E.setCenter(y(z.center)),E.setZoom(z.zoom),E.setBearing(z.bearing),E.setPitch(z.pitch);var G=S.getView();O._input.center=O.center=G.center,O._input.zoom=O.zoom=G.zoom,O._input.bearing=O.bearing=G.bearing,O._input.pitch=O.pitch=G.pitch,T.emit("plotly_doubleclick",null),T.emit("plotly_relayout",S.getViewEditsWithDerived(G))}),S.clearOutline=function(){a(S.dragOptions),s(S.dragOptions.gd)},S.onClickInPanFn=function(O){return function(z){var G=T._fullLayout.clickmode;G.indexOf("select")>-1&&u(z.originalEvent,T,[S.xaxis],[S.yaxis],S.id,O),G.indexOf("event")>-1&&o.click(T,z.originalEvent)}}},g.updateFx=function(w){var d=this,S=d.map,T=d.gd;if(!d.isStatic){var E,C=w.dragmode;E=function(z,G){G.isRect?(z.range={})[d.id]=[O([G.xmin,G.ymin]),O([G.xmax,G.ymax])]:(z.lassoPoints={})[d.id]=G.map(O)};var L=d.dragOptions;d.dragOptions=M.extendDeep(L||{},{dragmode:w.dragmode,element:d.div,gd:T,plotinfo:{id:d.id,domain:w[d.id].domain,xaxis:d.xaxis,yaxis:d.yaxis,fillRangeItems:E},xaxes:[d.xaxis],yaxes:[d.yaxis],subplot:d.id}),S.off("click",d.onClickInPanHandler),r(C)||i(C)?(S.dragPan.disable(),S.on("zoomstart",d.clearOutline),d.dragOptions.prepFn=function(z,G,I){n(z,G,I,d.dragOptions,C)},f.init(d.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",d.clearOutline),d.div.onmousedown=null,d.div.ontouchstart=null,d.div.removeEventListener("touchstart",d.div._ontouchstart),d.onClickInPanHandler=d.onClickInPanFn(d.dragOptions),S.on("click",d.onClickInPanHandler))}function O(z){var G=d.map.unproject(z);return[G.lng,G.lat]}},g.updateFramework=function(w){var d=w[this.id].domain,S=w._size,T=this.div.style;T.width=S.w*(d.x[1]-d.x[0])+"px",T.height=S.h*(d.y[1]-d.y[0])+"px",T.left=S.l+d.x[0]*S.w+"px",T.top=S.t+(1-d.y[1])*S.h+"px",this.xaxis._offset=S.l+d.x[0]*S.w,this.xaxis._length=S.w*(d.x[1]-d.x[0]),this.yaxis._offset=S.t+(1-d.y[1])*S.h,this.yaxis._length=S.h*(d.y[1]-d.y[0])},g.updateLayers=function(w){var d,S=w[this.id].layers,T=this.layerList;if(S.length!==T.length){for(d=0;d<T.length;d++)T[d].dispose();for(T=this.layerList=[],d=0;d<S.length;d++)T.push(c(this,d,S[d]))}else for(d=0;d<S.length;d++)T[d].update(S[d])},g.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},g.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},g.setOptions=function(w,d,S){for(var T in S)this.map[d](w,T,S[T])},g.getMapLayers=function(){return this.map.getStyle().layers},g.addLayer=function(w,d){var S=this.map;if(typeof d=="string"){if(d==="")return void S.addLayer(w,d);for(var T=this.getMapLayers(),E=0;E<T.length;E++)if(d===T[E].id)return void S.addLayer(w,d);M.warn(["Trying to add layer with *below* value",d,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(w)},g.project=function(w){return this.map.project(new A.LngLat(w[0],w[1]))},g.getView=function(){var w=this.map,d=w.getCenter(),S={lon:d.lng,lat:d.lat},T=w.getCanvas(),E=parseInt(T.style.width),C=parseInt(T.style.height);return{center:S,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([E,0]).toArray(),w.unproject([E,C]).toArray(),w.unproject([0,C]).toArray()]}}},g.getViewEdits=function(w){for(var d=this.id,S=["center","zoom","bearing","pitch"],T={},E=0;E<S.length;E++){var C=S[E];T[d+"."+C]=w[C]}return T},g.getViewEditsWithDerived=function(w){var d=this.id,S=this.getViewEdits(w);return S[d+"._derived"]=w._derived,S},$.exports=x},35025:function($){$.exports=function(P){var t=P.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},74875:function($,P,t){var A=t(39898),M=t(84096).Dq,l=t(60721).FF,_=t(92770),m=t(73972),f=t(86281),o=t(44467),e=t(71828),i=t(7901),r=t(50606).BADNUM,n=t(41675),s=t(51873).clearOutline,a=t(21479),u=t(85594),p=t(31391),c=t(27659).a0,x=e.relinkPrivateKeys,g=e._,h=$.exports={};e.extendFlat(h,m),h.attributes=t(9012),h.attributes.type.values=h.allTypes,h.fontAttrs=t(41940),h.layoutAttributes=t(10820),h.fontWeight="normal";var b=h.transformsRegistry,v=t(31137);h.executeAPICommand=v.executeAPICommand,h.computeAPICommandBindings=v.computeAPICommandBindings,h.manageCommandObserver=v.manageCommandObserver,h.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,h.redrawText=function(N){return N=e.getGraphDiv(N),new Promise(function(F){setTimeout(function(){N._fullLayout&&(m.getComponentMethod("annotations","draw")(N),m.getComponentMethod("legend","draw")(N),m.getComponentMethod("colorbar","draw")(N),F(h.previousPromises(N)))},300)})},h.resize=function(N){var F;N=e.getGraphDiv(N);var V=new Promise(function(W,te){N&&!e.isHidden(N)||te(new Error("Resize must be passed a displayed plot div element.")),N._redrawTimer&&clearTimeout(N._redrawTimer),N._resolveResize&&(F=N._resolveResize),N._resolveResize=W,N._redrawTimer=setTimeout(function(){if(!N.layout||N.layout.width&&N.layout.height||e.isHidden(N))W(N);else{delete N.layout.width,delete N.layout.height;var Q=N.changed;N.autoplay=!0,m.call("relayout",N,{autosize:!0}).then(function(){N.changed=Q,N._resolveResize===W&&(delete N._resolveResize,W(N))})}},100)});return F&&F(V),V},h.previousPromises=function(N){if((N._promises||[]).length)return Promise.all(N._promises).then(function(){N._promises=[]})},h.addLinks=function(N){if(N._context.showLink||N._context.showSources){var F=N._fullLayout,V=e.ensureSingle(F._paper,"text","js-plot-link-container",function(Z){Z.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var J=A.select(this);J.append("tspan").classed("js-link-to-tool",!0),J.append("tspan").classed("js-link-spacer",!0),J.append("tspan").classed("js-sourcelinks",!0)})}),W=V.node(),te={y:F._paper.attr("height")-9};document.body.contains(W)&&W.getComputedTextLength()>=F.width-20?(te["text-anchor"]="start",te.x=5):(te["text-anchor"]="end",te.x=F._paper.attr("width")-7),V.attr(te);var Q=V.select(".js-link-to-tool"),X=V.select(".js-link-spacer"),q=V.select(".js-sourcelinks");N._context.showSources&&N._context.showSources(N),N._context.showLink&&function(Z,J){J.text("");var ne=J.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Z._context.linkText+" "+String.fromCharCode(187));if(Z._context.sendData)ne.on("click",function(){h.sendDataToCloud(Z)});else{var re=window.location.pathname.split("/"),ae=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+re[2].split(".")[0]+"/"+re[1]+ae})}}(N,Q),X.text(Q.text()&&q.text()?" - ":"")}},h.sendDataToCloud=function(N){var F=(window.PLOTLYENV||{}).BASE_URL||N._context.plotlyServerURL;if(F){N.emit("plotly_beforeexport");var V=A.select(N).append("div").attr("id","hiddenform").style("display","none"),W=V.append("form").attr({action:F+"/external",method:"post",target:"_blank"});return W.append("input").attr({type:"text",name:"data"}).node().value=h.graphJson(N,!1,"keepdata"),W.node().submit(),V.remove(),N.emit("plotly_afterexport"),!1}};var y=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],w=["year","month","dayMonth","dayMonthYear"];function d(N,F){var V=N._context.locale;V||(V="en-US");var W=!1,te={};function Q(re){for(var ae=!0,ue=0;ue<F.length;ue++){var he=F[ue];te[he]||(re[he]?te[he]=re[he]:ae=!1)}ae&&(W=!0)}for(var X=0;X<2;X++){for(var q=N._context.locales,Z=0;Z<2;Z++){var J=(q[V]||{}).format;if(J&&(Q(J),W))break;q=m.localeRegistry}var ne=V.split("-")[0];if(W||ne===V)break;V=ne}return W||Q(m.localeRegistry.en.format),te}function S(N,F){var V={_fullLayout:F},W=N._id.charAt(0)==="x",te=N._mainAxis._anchorAxis,Q="",X="",q="";if(te&&(q=te._mainAxis._id,Q=W?N._id+q:q+N._id),!Q||!F._plots[Q]){Q="";for(var Z=N._counterAxes,J=0;J<Z.length;J++){var ne=Z[J],re=W?N._id+ne:ne+N._id;X||(X=re);var ae=n.getFromId(V,ne);if(q&&ae.overlaying===q){Q=re;break}}}return Q||X}function T(N){var F=N.transforms;if(Array.isArray(F)&&F.length)for(var V=0;V<F.length;V++){var W=F[V],te=W._module||b[W.type];if(te&&te.makesData)return!0}return!1}function E(N,F,V,W){for(var te=N.transforms,Q=[N],X=0;X<te.length;X++){var q=te[X],Z=b[q.type];Z&&Z.transform&&(Q=Z.transform(Q,{transform:q,fullTrace:N,fullData:F,layout:V,fullLayout:W,transformIndex:X}))}return Q}function C(N){return typeof N=="string"&&N.substr(N.length-2)==="px"&&parseFloat(N)}function L(N){var F=N.margin;if(!N._size){var V=N._size={l:Math.round(F.l),r:Math.round(F.r),t:Math.round(F.t),b:Math.round(F.b),p:Math.round(F.pad)};V.w=Math.round(N.width)-V.l-V.r,V.h=Math.round(N.height)-V.t-V.b}N._pushmargin||(N._pushmargin={}),N._pushmarginIds||(N._pushmarginIds={}),N._reservedMargin||(N._reservedMargin={})}h.supplyDefaults=function(N,F){var V=F&&F.skipUpdateCalc,W=N._fullLayout||{};if(W._skipDefaults)delete W._skipDefaults;else{var te,Q=N._fullLayout={},X=N.layout||{},q=N._fullData||[],Z=N._fullData=[],J=N.data||[],ne=N.calcdata||[],re=N._context||{};N._transitionData||h.createTransitionData(N),Q._dfltTitle={plot:g(N,"Click to enter Plot title"),x:g(N,"Click to enter X axis title"),y:g(N,"Click to enter Y axis title"),colorbar:g(N,"Click to enter Colorscale title"),annotation:g(N,"new text")},Q._traceWord=g(N,"trace");var ae=d(N,y);if(Q._mapboxAccessToken=re.mapboxAccessToken,W._initialAutoSizeIsDone){var ue=W.width,he=W.height;h.supplyLayoutGlobalDefaults(X,Q,ae),X.width||(Q.width=ue),X.height||(Q.height=he),h.sanitizeMargins(Q)}else{h.supplyLayoutGlobalDefaults(X,Q,ae);var de=!X.width||!X.height,xe=Q.autosize,me=re.autosizable;de&&(xe||me)?h.plotAutoSize(N,X,Q):de&&h.sanitizeMargins(Q),!xe&&de&&(X.width=Q.width,X.height=Q.height)}Q._d3locale=function(Re,ze){return Re.decimal=ze.charAt(0),Re.thousands=ze.charAt(1),{numberFormat:function(He){try{He=l(Re).format(e.adjustFormat(He))}catch{return e.warnBadFormat(He),e.noFormat}return He},timeFormat:M(Re).utcFormat}}(ae,Q.separators),Q._extraFormat=d(N,w),Q._initialAutoSizeIsDone=!0,Q._dataLength=J.length,Q._modules=[],Q._visibleModules=[],Q._basePlotModules=[];var ve=Q._subplots=function(){var Re,ze,He=m.collectableSubplotTypes,We={};if(!He){He=[];var Je=m.subplotsRegistry;for(var lt in Je){var et=Je[lt].attr;if(et&&(He.push(lt),Array.isArray(et)))for(ze=0;ze<et.length;ze++)e.pushUnique(He,et[ze])}}for(Re=0;Re<He.length;Re++)We[He[Re]]=[];return We}(),Le=Q._splomAxes={x:{},y:{}},Ae=Q._splomSubplots={};Q._splomGridDflt={},Q._scatterStackOpts={},Q._firstScatter={},Q._alignmentOpts={},Q._colorAxes={},Q._requestRangeslider={},Q._traceUids=function(Re,ze){var He,We,Je=ze.length,lt=[];for(He=0;He<Re.length;He++){var et=Re[He]._fullInput;et!==We&&lt.push(et),We=et}var yt=lt.length,_t=new Array(Je),xt={};function at(Ct,zt){_t[zt]=Ct,xt[Ct]=1}function ot(Ct,zt){if(Ct&&typeof Ct=="string"&&!xt[Ct])return at(Ct,zt),!0}for(He=0;He<Je;He++){var At=ze[He].uid;typeof At=="number"&&(At=String(At)),ot(At,He)||He<yt&&ot(lt[He].uid,He)||at(e.randstr(xt),He)}return _t}(q,J),Q._globalTransforms=(N._context||{}).globalTransforms,h.supplyDataDefaults(J,Z,X,Q);var we=Object.keys(Le.x),se=Object.keys(Le.y);if(we.length>1&&se.length>1){for(m.getComponentMethod("grid","sizeDefaults")(X,Q),te=0;te<we.length;te++)e.pushUnique(ve.xaxis,we[te]);for(te=0;te<se.length;te++)e.pushUnique(ve.yaxis,se[te]);for(var oe in Ae)e.pushUnique(ve.cartesian,oe)}if(Q._has=h._hasPlotType.bind(Q),q.length===Z.length)for(te=0;te<Z.length;te++)x(Z[te],q[te]);h.supplyLayoutModuleDefaults(X,Q,Z,N._transitionData);var fe=Q._visibleModules,Se=[];for(te=0;te<fe.length;te++){var Me=fe[te].crossTraceDefaults;Me&&e.pushUnique(Se,Me)}for(te=0;te<Se.length;te++)Se[te](Z,Q);Q._hasOnlyLargeSploms=Q._basePlotModules.length===1&&Q._basePlotModules[0].name==="splom"&&we.length>15&&se.length>15&&Q.shapes.length===0&&Q.images.length===0,h.linkSubplots(Z,Q,q,W),h.cleanPlot(Z,Q,q,W);var be=!(!W._has||!W._has("gl2d")),Ie=!(!Q._has||!Q._has("gl2d")),Be=!(!W._has||!W._has("cartesian"))||be,ce=!(!Q._has||!Q._has("cartesian"))||Ie;Be&&!ce?W._bgLayer.remove():ce&&!Be&&(Q._shouldCreateBgLayer=!0),W._zoomlayer&&!N._dragging&&s({_fullLayout:W}),function(Re,ze){var He,We=[];ze.meta&&(He=ze._meta={meta:ze.meta,layout:{meta:ze.meta}});for(var Je=0;Je<Re.length;Je++){var lt=Re[Je];lt.meta?We[lt.index]=lt._meta={meta:lt.meta}:ze.meta&&(lt._meta={meta:ze.meta}),ze.meta&&(lt._meta.layout={meta:ze.meta})}We.length&&(He||(He=ze._meta={}),He.data=We)}(Z,Q),x(Q,W),m.getComponentMethod("colorscale","crossTraceDefaults")(Z,Q),Q._preGUI||(Q._preGUI={}),Q._tracePreGUI||(Q._tracePreGUI={});var Te,ye=Q._tracePreGUI,Pe={};for(Te in ye)Pe[Te]="old";for(te=0;te<Z.length;te++)Pe[Te=Z[te]._fullInput.uid]||(ye[Te]={}),Pe[Te]="new";for(Te in Pe)Pe[Te]==="old"&&delete ye[Te];L(Q),m.getComponentMethod("rangeslider","makeData")(Q),V||ne.length!==Z.length||h.supplyDefaultsUpdateCalc(ne,Z)}},h.supplyDefaultsUpdateCalc=function(N,F){for(var V=0;V<F.length;V++){var W=F[V],te=(N[V]||[])[0];if(te&&te.trace){var Q=te.trace;if(Q._hasCalcTransform){var X,q,Z,J=Q._arrayAttrs;for(X=0;X<J.length;X++)q=J[X],Z=e.nestedProperty(Q,q).get().slice(),e.nestedProperty(W,q).set(Z)}te.trace=W}}},h.createTransitionData=function(N){N._transitionData||(N._transitionData={}),N._transitionData._frames||(N._transitionData._frames=[]),N._transitionData._frameHash||(N._transitionData._frameHash={}),N._transitionData._counter||(N._transitionData._counter=0),N._transitionData._interruptCallbacks||(N._transitionData._interruptCallbacks=[])},h._hasPlotType=function(N){var F,V=this._basePlotModules||[];for(F=0;F<V.length;F++)if(V[F].name===N)return!0;var W=this._modules||[];for(F=0;F<W.length;F++){var te=W[F].name;if(te===N)return!0;var Q=m.modules[te];if(Q&&Q.categories[N])return!0}return!1},h.cleanPlot=function(N,F,V,W){var te,Q,X=W._basePlotModules||[];for(te=0;te<X.length;te++){var q=X[te];q.clean&&q.clean(N,F,V,W)}var Z=W._has&&W._has("gl"),J=F._has&&F._has("gl");Z&&!J&&W._glcontainer!==void 0&&(W._glcontainer.selectAll(".gl-canvas").remove(),W._glcontainer.selectAll(".no-webgl").remove(),W._glcanvas=null);var ne=!!W._infolayer;e:for(te=0;te<V.length;te++){var re=V[te].uid;for(Q=0;Q<N.length;Q++)if(re===N[Q].uid)continue e;ne&&W._infolayer.select(".cb"+re).remove()}},h.linkSubplots=function(N,F,V,W){var te,Q,X=W._plots||{},q=F._plots={},Z=F._subplots,J={_fullData:N,_fullLayout:F},ne=Z.cartesian.concat(Z.gl2d||[]);for(te=0;te<ne.length;te++){var re,ae=ne[te],ue=X[ae],he=n.getFromId(J,ae,"x"),de=n.getFromId(J,ae,"y");for(ue?re=q[ae]=ue:(re=q[ae]={}).id=ae,he._counterAxes.push(de._id),de._counterAxes.push(he._id),he._subplotsWith.push(ae),de._subplotsWith.push(ae),re.xaxis=he,re.yaxis=de,re._hasClipOnAxisFalse=!1,Q=0;Q<N.length;Q++){var xe=N[Q];if(xe.xaxis===re.xaxis._id&&xe.yaxis===re.yaxis._id&&xe.cliponaxis===!1){re._hasClipOnAxisFalse=!0;break}}}var me,ve=n.list(J,null,!0);for(te=0;te<ve.length;te++){var Le=null;(me=ve[te]).overlaying&&(Le=n.getFromId(J,me.overlaying))&&Le.overlaying&&(me.overlaying=!1,Le=null),me._mainAxis=Le||me,Le&&(me.domain=Le.domain.slice()),me._anchorAxis=me.anchor==="free"?null:n.getFromId(J,me.anchor)}for(te=0;te<ve.length;te++)if((me=ve[te])._counterAxes.sort(n.idSort),me._subplotsWith.sort(e.subplotSort),me._mainSubplot=S(me,F),me._counterAxes.length&&(me.spikemode&&me.spikemode.indexOf("across")!==-1||me.automargin&&me.mirror&&me.anchor!=="free"||m.getComponentMethod("rangeslider","isVisible")(me))){var Ae=1,we=0;for(Q=0;Q<me._counterAxes.length;Q++){var se=n.getFromId(J,me._counterAxes[Q]);Ae=Math.min(Ae,se.domain[0]),we=Math.max(we,se.domain[1])}Ae<we&&(me._counterDomainMin=Ae,me._counterDomainMax=we)}},h.clearExpandedTraceDefaultColors=function(N){var F,V,W;for(V=[],(F=N._module._colorAttrs)||(N._module._colorAttrs=F=[],f.crawl(N._module.attributes,function(te,Q,X,q){V[q]=Q,V.length=q+1,te.valType==="color"&&te.dflt===void 0&&F.push(V.join("."))})),W=0;W<F.length;W++)e.nestedProperty(N,"_input."+F[W]).get()||e.nestedProperty(N,F[W]).set(null)},h.supplyDataDefaults=function(N,F,V,W){var te,Q,X,q=W._modules,Z=W._visibleModules,J=W._basePlotModules,ne=0,re=0;function ae(oe){F.push(oe);var fe=oe._module;fe&&(e.pushUnique(q,fe),oe.visible===!0&&e.pushUnique(Z,fe),e.pushUnique(J,oe._module.basePlotModule),ne++,oe._input.visible!==!1&&re++)}W._transformModules=[];var ue={},he=[],de=(V.template||{}).data||{},xe=o.traceTemplater(de);for(te=0;te<N.length;te++){if(X=N[te],(Q=xe.newTrace(X)).uid=W._traceUids[te],h.supplyTraceDefaults(X,Q,re,W,te),Q.index=te,Q._input=X,Q._expandedIndex=ne,Q.transforms&&Q.transforms.length)for(var me=X.visible!==!1&&Q.visible===!1,ve=E(Q,F,V,W),Le=0;Le<ve.length;Le++){var Ae=ve[Le],we={_template:Q._template,type:Q.type,uid:Q.uid+Le};me&&Ae.visible===!1&&delete Ae.visible,h.supplyTraceDefaults(Ae,we,ne,W,te),x(we,Ae),we.index=te,we._input=X,we._fullInput=Q,we._expandedIndex=ne,we._expandedInput=Ae,ae(we)}else Q._fullInput=Q,Q._expandedInput=Q,ae(Q);m.traceIs(Q,"carpetAxis")&&(ue[Q.carpet]=Q),m.traceIs(Q,"carpetDependent")&&he.push(te)}for(te=0;te<he.length;te++)if((Q=F[he[te]]).visible){var se=ue[Q.carpet];Q._carpet=se,se&&se.visible?(Q.xaxis=se.xaxis,Q.yaxis=se.yaxis):Q.visible=!1}},h.supplyAnimationDefaults=function(N){var F;N=N||{};var V={};function W(te,Q){return e.coerce(N||{},V,u,te,Q)}if(W("mode"),W("direction"),W("fromcurrent"),Array.isArray(N.frame))for(V.frame=[],F=0;F<N.frame.length;F++)V.frame[F]=h.supplyAnimationFrameDefaults(N.frame[F]||{});else V.frame=h.supplyAnimationFrameDefaults(N.frame||{});if(Array.isArray(N.transition))for(V.transition=[],F=0;F<N.transition.length;F++)V.transition[F]=h.supplyAnimationTransitionDefaults(N.transition[F]||{});else V.transition=h.supplyAnimationTransitionDefaults(N.transition||{});return V},h.supplyAnimationFrameDefaults=function(N){var F={};function V(W,te){return e.coerce(N||{},F,u.frame,W,te)}return V("duration"),V("redraw"),F},h.supplyAnimationTransitionDefaults=function(N){var F={};function V(W,te){return e.coerce(N||{},F,u.transition,W,te)}return V("duration"),V("easing"),F},h.supplyFrameDefaults=function(N){var F={};function V(W,te){return e.coerce(N,F,p,W,te)}return V("group"),V("name"),V("traces"),V("baseframe"),V("data"),V("layout"),F},h.supplyTraceDefaults=function(N,F,V,W,te){var Q,X=W.colorway||i.defaults,q=X[V%X.length];function Z(ve,Le){return e.coerce(N,F,h.attributes,ve,Le)}var J=Z("visible");Z("type"),Z("name",W._traceWord+" "+te),Z("uirevision",W.uirevision);var ne=h.getModule(F);if(F._module=ne,ne){var re=ne.basePlotModule,ae=re.attr,ue=re.attributes;if(ae&&ue){var he=W._subplots,de="";if(J||re.name!=="gl2d"){if(Array.isArray(ae))for(Q=0;Q<ae.length;Q++){var xe=ae[Q],me=e.coerce(N,F,ue,xe);he[xe]&&e.pushUnique(he[xe],me),de+=me}else de=e.coerce(N,F,ue,ae);he[re.name]&&e.pushUnique(he[re.name],de)}}}return J&&(Z("customdata"),Z("ids"),Z("meta"),m.traceIs(F,"showLegend")?(e.coerce(N,F,ne.attributes.showlegend?ne.attributes:h.attributes,"showlegend"),Z("legend"),Z("legendwidth"),Z("legendgroup"),Z("legendgrouptitle.text"),Z("legendrank"),F._dfltShowLegend=!0):F._dfltShowLegend=!1,ne&&ne.supplyDefaults(N,F,q,W),m.traceIs(F,"noOpacity")||Z("opacity"),m.traceIs(F,"notLegendIsolatable")&&(F.visible=!!F.visible),m.traceIs(F,"noHover")||(F.hovertemplate||e.coerceHoverinfo(N,F,W),F.type!=="parcats"&&m.getComponentMethod("fx","supplyDefaults")(N,F,q,W)),ne&&ne.selectPoints&&Z("selectedpoints"),h.supplyTransformDefaults(N,F,W)),F},h.hasMakesDataTransform=T,h.supplyTransformDefaults=function(N,F,V){if(F._length||T(N)){var W=V._globalTransforms||[],te=V._transformModules||[];if(Array.isArray(N.transforms)||W.length!==0)for(var Q=N.transforms||[],X=W.concat(Q),q=F.transforms=[],Z=0;Z<X.length;Z++){var J,ne=X[Z],re=ne.type,ae=b[re],ue=!(ne._module&&ne._module===ae),he=ae&&typeof ae.transform=="function";ae||e.warn("Unrecognized transform type "+re+"."),ae&&ae.supplyDefaults&&(ue||he)?((J=ae.supplyDefaults(ne,F,V,N)).type=re,J._module=ae,e.pushUnique(te,ae)):J=e.extendFlat({},ne),q.push(J)}}},h.supplyLayoutGlobalDefaults=function(N,F,V){function W(ne,re){return e.coerce(N,F,h.layoutAttributes,ne,re)}var te=N.template;e.isPlainObject(te)&&(F.template=te,F._template=te.layout,F._dataTemplate=te.data),W("autotypenumbers");var Q=e.coerceFont(W,"font"),X=Q.size;e.coerceFont(W,"title.font",e.extendFlat({},Q,{size:Math.round(1.4*X)})),W("title.text",F._dfltTitle.plot),W("title.xref");var q=W("title.yref");W("title.pad.t"),W("title.pad.r"),W("title.pad.b"),W("title.pad.l");var Z=W("title.automargin");W("title.x"),W("title.xanchor"),W("title.y"),W("title.yanchor"),Z&&(q==="paper"&&(F.title.y!==0&&(F.title.y=1),F.title.yanchor==="auto"&&(F.title.yanchor=F.title.y===0?"top":"bottom")),q==="container"&&(F.title.y==="auto"&&(F.title.y=1),F.title.yanchor==="auto"&&(F.title.yanchor=F.title.y<.5?"bottom":"top"))),W("uniformtext.mode")&&W("uniformtext.minsize"),W("autosize",!(N.width&&N.height)),W("width"),W("height"),W("minreducedwidth"),W("minreducedheight"),W("margin.l"),W("margin.r"),W("margin.t"),W("margin.b"),W("margin.pad"),W("margin.autoexpand"),N.width&&N.height&&h.sanitizeMargins(F),m.getComponentMethod("grid","sizeDefaults")(N,F),W("paper_bgcolor"),W("separators",V.decimal+V.thousands),W("hidesources"),W("colorway"),W("datarevision");var J=W("uirevision");W("editrevision",J),W("selectionrevision",J),m.getComponentMethod("modebar","supplyLayoutDefaults")(N,F),m.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(N,F,W),m.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(N,F,W),W("meta"),e.isPlainObject(N.transition)&&(W("transition.duration"),W("transition.easing"),W("transition.ordering")),m.getComponentMethod("calendars","handleDefaults")(N,F,"calendar"),m.getComponentMethod("fx","supplyLayoutGlobalDefaults")(N,F,W),e.coerce(N,F,a,"scattermode")},h.plotAutoSize=function(N,F,V){var W,te,Q=N._context||{},X=Q.frameMargins,q=e.isPlotDiv(N);if(q&&N.emit("plotly_autosize"),Q.fillFrame)W=window.innerWidth,te=window.innerHeight,document.body.style.overflow="hidden";else{var Z=q?window.getComputedStyle(N):{};if(W=C(Z.width)||C(Z.maxWidth)||V.width,te=C(Z.height)||C(Z.maxHeight)||V.height,_(X)&&X>0){var J=1-2*X;W=Math.round(J*W),te=Math.round(J*te)}}var ne=h.layoutAttributes.width.min,re=h.layoutAttributes.height.min;W<ne&&(W=ne),te<re&&(te=re);var ae=!F.width&&Math.abs(V.width-W)>1,ue=!F.height&&Math.abs(V.height-te)>1;(ue||ae)&&(ae&&(V.width=W),ue&&(V.height=te)),N._initialAutoSize||(N._initialAutoSize={width:W,height:te}),h.sanitizeMargins(V)},h.supplyLayoutModuleDefaults=function(N,F,V,W){var te,Q,X,q=m.componentsRegistry,Z=F._basePlotModules,J=m.subplotsRegistry.cartesian;for(te in q)(X=q[te]).includeBasePlot&&X.includeBasePlot(N,F);for(var ne in Z.length||Z.push(J),F._has("cartesian")&&(m.getComponentMethod("grid","contentDefaults")(N,F),J.finalizeSubplots(N,F)),F._subplots)F._subplots[ne].sort(e.subplotSort);for(Q=0;Q<Z.length;Q++)(X=Z[Q]).supplyLayoutDefaults&&X.supplyLayoutDefaults(N,F,V);var re=F._modules;for(Q=0;Q<re.length;Q++)(X=re[Q]).supplyLayoutDefaults&&X.supplyLayoutDefaults(N,F,V);var ae=F._transformModules;for(Q=0;Q<ae.length;Q++)(X=ae[Q]).supplyLayoutDefaults&&X.supplyLayoutDefaults(N,F,V,W);for(te in q)(X=q[te]).supplyLayoutDefaults&&X.supplyLayoutDefaults(N,F,V)},h.purge=function(N){var F=N._fullLayout||{};F._glcontainer!==void 0&&(F._glcontainer.selectAll(".gl-canvas").remove(),F._glcontainer.remove(),F._glcanvas=null),F._modeBar&&F._modeBar.destroy(),N._transitionData&&(N._transitionData._interruptCallbacks&&(N._transitionData._interruptCallbacks.length=0),N._transitionData._animationRaf&&window.cancelAnimationFrame(N._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(N),delete N.data,delete N.layout,delete N._fullData,delete N._fullLayout,delete N.calcdata,delete N.empty,delete N.fid,delete N.undoqueue,delete N.undonum,delete N.autoplay,delete N.changed,delete N._promises,delete N._redrawTimer,delete N._hmlumcount,delete N._hmpixcount,delete N._transitionData,delete N._transitioning,delete N._initialAutoSize,delete N._transitioningWithDuration,delete N._dragging,delete N._dragged,delete N._dragdata,delete N._hoverdata,delete N._snapshotInProgress,delete N._editing,delete N._mouseDownTime,delete N._legendMouseDownTime,N.removeAllListeners&&N.removeAllListeners()},h.style=function(N){var F,V=N._fullLayout._visibleModules,W=[];for(F=0;F<V.length;F++){var te=V[F];te.style&&e.pushUnique(W,te.style)}for(F=0;F<W.length;F++)W[F](N)},h.sanitizeMargins=function(N){if(N&&N.margin){var F,V=N.width,W=N.height,te=N.margin,Q=V-(te.l+te.r),X=W-(te.t+te.b);Q<0&&(F=(V-1)/(te.l+te.r),te.l=Math.floor(F*te.l),te.r=Math.floor(F*te.r)),X<0&&(F=(W-1)/(te.t+te.b),te.t=Math.floor(F*te.t),te.b=Math.floor(F*te.b))}},h.clearAutoMarginIds=function(N){N._fullLayout._pushmarginIds={}},h.allowAutoMargin=function(N,F){N._fullLayout._pushmarginIds[F]=1},h.autoMargin=function(N,F,V){var W=N._fullLayout,te=W.width,Q=W.height,X=W.margin,q=W.minreducedwidth,Z=W.minreducedheight,J=e.constrain(te-X.l-X.r,2,q),ne=e.constrain(Q-X.t-X.b,2,Z),re=Math.max(0,te-J),ae=Math.max(0,Q-ne),ue=W._pushmargin,he=W._pushmarginIds;if(X.autoexpand!==!1){if(V){var de=V.pad;if(de===void 0&&(de=Math.min(12,X.l,X.r,X.t,X.b)),re){var xe=(V.l+V.r)/re;xe>1&&(V.l/=xe,V.r/=xe)}if(ae){var me=(V.t+V.b)/ae;me>1&&(V.t/=me,V.b/=me)}var ve=V.xl!==void 0?V.xl:V.x,Le=V.xr!==void 0?V.xr:V.x,Ae=V.yt!==void 0?V.yt:V.y,we=V.yb!==void 0?V.yb:V.y;ue[F]={l:{val:ve,size:V.l+de},r:{val:Le,size:V.r+de},b:{val:we,size:V.b+de},t:{val:Ae,size:V.t+de}},he[F]=1}else delete ue[F],delete he[F];if(!W._replotting)return h.doAutoMargin(N)}},h.doAutoMargin=function(N){var F=N._fullLayout,V=F.width,W=F.height;F._size||(F._size={}),L(F);var te=F._size,Q=F.margin,X={t:0,b:0,l:0,r:0},q=e.extendFlat({},te),Z=Q.l,J=Q.r,ne=Q.t,re=Q.b,ae=F._pushmargin,ue=F._pushmarginIds,he=F.minreducedwidth,de=F.minreducedheight;if(Q.autoexpand!==!1){for(var xe in ae)ue[xe]||delete ae[xe];var me=N._fullLayout._reservedMargin;for(var ve in me)for(var Le in me[ve]){var Ae=me[ve][Le];X[Le]=Math.max(X[Le],Ae)}for(var we in ae.base={l:{val:0,size:Z},r:{val:1,size:J},t:{val:1,size:ne},b:{val:0,size:re}},X){var se=0;for(var oe in ae)oe!=="base"&&_(ae[oe][we].size)&&(se=ae[oe][we].size>se?ae[oe][we].size:se);var fe=Math.max(0,Q[we]-se);X[we]=Math.max(0,X[we]-fe)}for(var Se in ae){var Me=ae[Se].l||{},be=ae[Se].b||{},Ie=Me.val,Be=Me.size,ce=be.val,Te=be.size,ye=V-X.r-X.l,Pe=W-X.t-X.b;for(var Re in ae){if(_(Be)&&ae[Re].r){var ze=ae[Re].r.val,He=ae[Re].r.size;if(ze>Ie){var We=(Be*ze+(He-ye)*Ie)/(ze-Ie),Je=(He*(1-Ie)+(Be-ye)*(1-ze))/(ze-Ie);We+Je>Z+J&&(Z=We,J=Je)}}if(_(Te)&&ae[Re].t){var lt=ae[Re].t.val,et=ae[Re].t.size;if(lt>ce){var yt=(Te*lt+(et-Pe)*ce)/(lt-ce),_t=(et*(1-ce)+(Te-Pe)*(1-lt))/(lt-ce);yt+_t>re+ne&&(re=yt,ne=_t)}}}}}var xt=e.constrain(V-Q.l-Q.r,2,he),at=e.constrain(W-Q.t-Q.b,2,de),ot=Math.max(0,V-xt),At=Math.max(0,W-at);if(ot){var Ct=(Z+J)/ot;Ct>1&&(Z/=Ct,J/=Ct)}if(At){var zt=(re+ne)/At;zt>1&&(re/=zt,ne/=zt)}if(te.l=Math.round(Z)+X.l,te.r=Math.round(J)+X.r,te.t=Math.round(ne)+X.t,te.b=Math.round(re)+X.b,te.p=Math.round(Q.pad),te.w=Math.round(V)-te.l-te.r,te.h=Math.round(W)-te.t-te.b,!F._replotting&&(h.didMarginChange(q,te)||function(qe){if("_redrawFromAutoMarginCount"in qe._fullLayout)return!1;var Xe=n.list(qe,"",!0);for(var Ve in Xe)if(Xe[Ve].autoshift||Xe[Ve].shift)return!0;return!1}(N))){"_redrawFromAutoMarginCount"in F?F._redrawFromAutoMarginCount++:F._redrawFromAutoMarginCount=1;var St=3*(1+Object.keys(ue).length);if(F._redrawFromAutoMarginCount<St)return m.call("_doPlot",N);F._size=q,e.warn("Too many auto-margin redraws.")}(function(qe){var Xe=n.list(qe,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ve){for(var Ze=0;Ze<Xe.length;Ze++){var st=Xe[Ze][Ve];st&&st()}})})(N)};var O=["l","r","t","b","p","w","h"];function z(N,F,V){var W=!1,te=[h.previousPromises,function(){if(N._transitionData)return N._transitioning=!1,function(X){var q=Promise.resolve();if(!X)return q;for(;X.length;)q=q.then(X.shift());return q}(N._transitionData._interruptCallbacks)},V.prepareFn,h.rehover,h.reselect,function(){return N.emit("plotly_transitioning",[]),new Promise(function(X){N._transitioning=!0,F.duration>0&&(N._transitioningWithDuration=!0),N._transitionData._interruptCallbacks.push(function(){W=!0}),V.redraw&&N._transitionData._interruptCallbacks.push(function(){return m.call("redraw",N)}),N._transitionData._interruptCallbacks.push(function(){N.emit("plotly_transitioninterrupted",[])});var q=0,Z=0;function J(){return q++,function(){var ne;Z++,W||Z!==q||(ne=X,N._transitionData&&(function(re){if(re)for(;re.length;)re.shift()}(N._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(V.redraw)return m.call("redraw",N)}).then(function(){N._transitioning=!1,N._transitioningWithDuration=!1,N.emit("plotly_transitioned",[])}).then(ne)))}}V.runFn(J),setTimeout(J())})}],Q=e.syncOrAsync(te,N);return Q&&Q.then||(Q=Promise.resolve()),Q.then(function(){return N})}h.didMarginChange=function(N,F){for(var V=0;V<O.length;V++){var W=O[V],te=N[W],Q=F[W];if(!_(te)||Math.abs(Q-te)>1)return!0}return!1},h.graphJson=function(N,F,V,W,te,Q){(te&&F&&!N._fullData||te&&!F&&!N._fullLayout)&&h.supplyDefaults(N);var X=te?N._fullData:N.data,q=te?N._fullLayout:N.layout,Z=(N._transitionData||{})._frames;function J(ae,ue){if(typeof ae=="function")return ue?"_function_":null;if(e.isPlainObject(ae)){var he,de={};return Object.keys(ae).sort().forEach(function(xe){if(["_","["].indexOf(xe.charAt(0))===-1)if(typeof ae[xe]!="function"){if(V==="keepdata"){if(xe.substr(xe.length-3)==="src")return}else if(V==="keepstream"){if(typeof(he=ae[xe+"src"])=="string"&&he.indexOf(":")>0&&!e.isPlainObject(ae.stream))return}else if(V!=="keepall"&&typeof(he=ae[xe+"src"])=="string"&&he.indexOf(":")>0)return;de[xe]=J(ae[xe],ue)}else ue&&(de[xe]="_function")}),de}return Array.isArray(ae)?ae.map(function(xe){return J(xe,ue)}):e.isTypedArray(ae)?e.simpleMap(ae,e.identity):e.isJSDate(ae)?e.ms2DateTimeLocal(+ae):ae}var ne={data:(X||[]).map(function(ae){var ue=J(ae);return F&&delete ue.fit,ue})};if(!F&&(ne.layout=J(q),te)){var re=q._size;ne.layout.computed={margin:{b:re.b,l:re.l,r:re.r,t:re.t}}}return Z&&(ne.frames=J(Z)),Q&&(ne.config=J(N._context,!0)),W==="object"?ne:JSON.stringify(ne)},h.modifyFrames=function(N,F){var V,W,te,Q=N._transitionData._frames,X=N._transitionData._frameHash;for(V=0;V<F.length;V++)switch((W=F[V]).type){case"replace":te=W.value;var q=(Q[W.index]||{}).name,Z=te.name;Q[W.index]=X[Z]=te,Z!==q&&(delete X[q],X[Z]=te);break;case"insert":X[(te=W.value).name]=te,Q.splice(W.index,0,te);break;case"delete":delete X[(te=Q[W.index]).name],Q.splice(W.index,1)}return Promise.resolve()},h.computeFrame=function(N,F){var V,W,te,Q,X=N._transitionData._frameHash;if(!F)throw new Error("computeFrame must be given a string frame name");var q=X[F.toString()];if(!q)return!1;for(var Z=[q],J=[q.name];q.baseframe&&(q=X[q.baseframe.toString()])&&J.indexOf(q.name)===-1;)Z.push(q),J.push(q.name);for(var ne={};q=Z.pop();)if(q.layout&&(ne.layout=h.extendLayout(ne.layout,q.layout)),q.data){if(ne.data||(ne.data=[]),!(W=q.traces))for(W=[],V=0;V<q.data.length;V++)W[V]=V;for(ne.traces||(ne.traces=[]),V=0;V<q.data.length;V++)(te=W[V])!=null&&((Q=ne.traces.indexOf(te))===-1&&(Q=ne.data.length,ne.traces[Q]=te),ne.data[Q]=h.extendTrace(ne.data[Q],q.data[V]))}return ne},h.recomputeFrameHash=function(N){for(var F=N._transitionData._frameHash={},V=N._transitionData._frames,W=0;W<V.length;W++){var te=V[W];te&&te.name&&(F[te.name]=te)}},h.extendObjectWithContainers=function(N,F,V){var W,te,Q,X,q,Z,J,ne=e.extendDeepNoArrays({},F||{}),re=e.expandObjectPaths(ne),ae={};if(V&&V.length)for(Q=0;Q<V.length;Q++)(te=(W=e.nestedProperty(re,V[Q])).get())===void 0?e.nestedProperty(ae,V[Q]).set(null):(W.set(null),e.nestedProperty(ae,V[Q]).set(te));if(N=e.extendDeepNoArrays(N||{},re),V&&V.length){for(Q=0;Q<V.length;Q++)if(Z=e.nestedProperty(ae,V[Q]).get()){for(J=(q=e.nestedProperty(N,V[Q])).get(),Array.isArray(J)||(J=[],q.set(J)),X=0;X<Z.length;X++){var ue=Z[X];J[X]=ue===null?null:h.extendObjectWithContainers(J[X],ue)}q.set(J)}}return N},h.dataArrayContainers=["transforms","dimensions"],h.layoutArrayContainers=m.layoutArrayContainers,h.extendTrace=function(N,F){return h.extendObjectWithContainers(N,F,h.dataArrayContainers)},h.extendLayout=function(N,F){return h.extendObjectWithContainers(N,F,h.layoutArrayContainers)},h.transition=function(N,F,V,W,te,Q){var X={redraw:te.redraw},q={},Z=[];return X.prepareFn=function(){for(var J=Array.isArray(F)?F.length:0,ne=W.slice(0,J),re=0;re<ne.length;re++){var ae=ne[re],ue=N._fullData[ae]._module;if(ue){if(ue.animatable){var he=ue.basePlotModule.name;q[he]||(q[he]=[]),q[he].push(ae)}N.data[ne[re]]=h.extendTrace(N.data[ne[re]],F[re])}}var de=e.expandObjectPaths(e.extendDeepNoArrays({},V)),xe=/^[xy]axis[0-9]*$/;for(var me in de)xe.test(me)&&delete de[me].range;h.extendLayout(N.layout,de),delete N.calcdata,h.supplyDefaults(N),h.doCalcdata(N);var ve=e.expandObjectPaths(V);if(ve){var Le=N._fullLayout._plots;for(var Ae in Le){var we=Le[Ae],se=we.xaxis,oe=we.yaxis,fe=se.range.slice(),Se=oe.range.slice(),Me=null,be=null,Ie=null,Be=null;Array.isArray(ve[se._name+".range"])?Me=ve[se._name+".range"].slice():Array.isArray((ve[se._name]||{}).range)&&(Me=ve[se._name].range.slice()),Array.isArray(ve[oe._name+".range"])?be=ve[oe._name+".range"].slice():Array.isArray((ve[oe._name]||{}).range)&&(be=ve[oe._name].range.slice()),fe&&Me&&(se.r2l(fe[0])!==se.r2l(Me[0])||se.r2l(fe[1])!==se.r2l(Me[1]))&&(Ie={xr0:fe,xr1:Me}),Se&&be&&(oe.r2l(Se[0])!==oe.r2l(be[0])||oe.r2l(Se[1])!==oe.r2l(be[1]))&&(Be={yr0:Se,yr1:be}),(Ie||Be)&&Z.push(e.extendFlat({plotinfo:we},Ie,Be))}}return Promise.resolve()},X.runFn=function(J){var ne,re,ae=N._fullLayout._basePlotModules,ue=Z.length;if(V)for(re=0;re<ae.length;re++)ae[re].transitionAxes&&ae[re].transitionAxes(N,Z,Q,J);for(var he in ue?((ne=e.extendFlat({},Q)).duration=0,delete q.cartesian):ne=Q,q){var de=q[he];N._fullData[de[0]]._module.basePlotModule.plot(N,de,ne,J)}},z(N,Q,X)},h.transitionFromReact=function(N,F,V,W){var te=N._fullLayout,Q=te.transition,X={},q=[];return X.prepareFn=function(){var Z=te._plots;for(var J in X.redraw=!1,F.anim==="some"&&(X.redraw=!0),V.anim==="some"&&(X.redraw=!0),Z){var ne=Z[J],re=ne.xaxis,ae=ne.yaxis,ue=W[re._name].range.slice(),he=W[ae._name].range.slice(),de=re.range.slice(),xe=ae.range.slice();re.setScale(),ae.setScale();var me=null,ve=null;re.r2l(ue[0])===re.r2l(de[0])&&re.r2l(ue[1])===re.r2l(de[1])||(me={xr0:ue,xr1:de}),ae.r2l(he[0])===ae.r2l(xe[0])&&ae.r2l(he[1])===ae.r2l(xe[1])||(ve={yr0:he,yr1:xe}),(me||ve)&&q.push(e.extendFlat({plotinfo:ne},me,ve))}return Promise.resolve()},X.runFn=function(Z){for(var J,ne,re,ae=N._fullData,ue=N._fullLayout._basePlotModules,he=[],de=0;de<ae.length;de++)he.push(de);function xe(){if(N._fullLayout)for(var ve=0;ve<ue.length;ve++)ue[ve].transitionAxes&&ue[ve].transitionAxes(N,q,J,Z)}function me(){if(N._fullLayout)for(var ve=0;ve<ue.length;ve++)ue[ve].plot(N,re,ne,Z)}q.length&&F.anim?Q.ordering==="traces first"?(J=e.extendFlat({},Q,{duration:0}),re=he,ne=Q,setTimeout(xe,Q.duration),me()):(J=Q,re=null,ne=e.extendFlat({},Q,{duration:0}),setTimeout(me,J.duration),xe()):q.length?(J=Q,xe()):F.anim&&(re=he,ne=Q,me())},z(N,Q,X)},h.doCalcdata=function(N,F){var V,W,te,Q,X=n.list(N),q=N._fullData,Z=N._fullLayout,J=new Array(q.length),ne=(N.calcdata||[]).slice();for(N.calcdata=J,Z._numBoxes=0,Z._numViolins=0,Z._violinScaleGroupStats={},N._hmpixcount=0,N._hmlumcount=0,Z._piecolormap={},Z._sunburstcolormap={},Z._treemapcolormap={},Z._iciclecolormap={},Z._funnelareacolormap={},te=0;te<q.length;te++)Array.isArray(F)&&F.indexOf(te)===-1&&(J[te]=ne[te]);for(te=0;te<q.length;te++)(V=q[te])._arrayAttrs=f.findArrayAttributes(V),V._extremes={};var re=Z._subplots.polar||[];for(te=0;te<re.length;te++)X.push(Z[re[te]].radialaxis,Z[re[te]].angularaxis);for(var ae in Z._colorAxes){var ue=Z[ae];ue.cauto!==!1&&(delete ue.cmin,delete ue.cmax)}var he=!1;function de(ve){if(V=q[ve],W=V._module,V.visible===!0&&V.transforms){if(W&&W.calc){var Le=W.calc(N,V);Le[0]&&Le[0].t&&Le[0].t._scene&&delete Le[0].t._scene.dirty}for(Q=0;Q<V.transforms.length;Q++){var Ae=V.transforms[Q];(W=b[Ae.type])&&W.calcTransform&&(V._hasCalcTransform=!0,he=!0,W.calcTransform(N,V,Ae))}}}function xe(ve,Le){if(V=q[ve],!!(W=V._module).isContainer===Le){var Ae=[];if(V.visible===!0&&V._length!==0){delete V._indexToPoints;var we=V.transforms||[];for(Q=we.length-1;Q>=0;Q--)if(we[Q].enabled){V._indexToPoints=we[Q]._indexToPoints;break}W&&W.calc&&(Ae=W.calc(N,V))}Array.isArray(Ae)&&Ae[0]||(Ae=[{x:r,y:r}]),Ae[0].t||(Ae[0].t={}),Ae[0].trace=V,J[ve]=Ae}}for(I(X,q,Z),te=0;te<q.length;te++)xe(te,!0);for(te=0;te<q.length;te++)de(te);for(he&&I(X,q,Z),te=0;te<q.length;te++)xe(te,!0);for(te=0;te<q.length;te++)xe(te,!1);H(N);var me=function(ve,Le){var Ae,we,se,oe,fe,Se=[];function Me(Ve,Ze,st){var nt=Ze._id.charAt(0);if(Ve==="histogram2dcontour"){var De=Ze._counterAxes[0],Fe=n.getFromId(Le,De),rt=nt==="x"||De==="x"&&Fe.type==="category",tt=nt==="y"||De==="y"&&Fe.type==="category";return function(gt,dt){return gt===0||dt===0||rt&&gt===st[dt].length-1||tt&&dt===st.length-1?-1:(nt==="y"?dt:gt)-1}}return function(gt,dt){return nt==="y"?dt:gt}}var be={min:function(Ve){return e.aggNums(Math.min,null,Ve)},max:function(Ve){return e.aggNums(Math.max,null,Ve)},sum:function(Ve){return e.aggNums(function(Ze,st){return Ze+st},null,Ve)},total:function(Ve){return e.aggNums(function(Ze,st){return Ze+st},null,Ve)},mean:function(Ve){return e.mean(Ve)},median:function(Ve){return e.median(Ve)}};function Ie(Ve,Ze){return Ve[1]-Ze[1]}function Be(Ve,Ze){return Ze[1]-Ve[1]}for(Ae=0;Ae<ve.length;Ae++){var ce=ve[Ae];if(ce.type==="category"){var Te=ce.categoryorder.match(G);if(Te){var ye=Te[1],Pe=Te[2],Re=ce._id.charAt(0),ze=Re==="x",He=[];for(we=0;we<ce._categories.length;we++)He.push([ce._categories[we],[]]);for(we=0;we<ce._traceIndices.length;we++){var We=ce._traceIndices[we],Je=Le._fullData[We];if(Je.visible===!0){var lt=Je.type;m.traceIs(Je,"histogram")&&(delete Je._xautoBinFinished,delete Je._yautoBinFinished);var et=lt==="splom",yt=lt==="scattergl",_t=Le.calcdata[We];for(se=0;se<_t.length;se++){var xt,at,ot=_t[se];if(et){var At=Je._axesDim[ce._id];if(!ze){var Ct=Je._diag[At][0];Ct&&(ce=Le._fullLayout[n.id2name(Ct)])}var zt=ot.trace.dimensions[At].values;for(oe=0;oe<zt.length;oe++)for(xt=ce._categoriesMap[zt[oe]],fe=0;fe<ot.trace.dimensions.length;fe++)if(fe!==At){var St=ot.trace.dimensions[fe];He[xt][1].push(St.values[oe])}}else if(yt){for(oe=0;oe<ot.t.x.length;oe++)ze?(xt=ot.t.x[oe],at=ot.t.y[oe]):(xt=ot.t.y[oe],at=ot.t.x[oe]),He[xt][1].push(at);ot.t&&ot.t._scene&&delete ot.t._scene.dirty}else if(ot.hasOwnProperty("z")){at=ot.z;var qe=Me(Je.type,ce,at);for(oe=0;oe<at.length;oe++)for(fe=0;fe<at[oe].length;fe++)(xt=qe(fe,oe))+1&&He[xt][1].push(at[oe][fe])}else for((xt=ot.p)===void 0&&(xt=ot[Re]),(at=ot.s)===void 0&&(at=ot.v),at===void 0&&(at=ze?ot.y:ot.x),Array.isArray(at)||(at=at===void 0?[]:[at]),oe=0;oe<at.length;oe++)He[xt][1].push(at[oe])}}}ce._categoriesValue=He;var Xe=[];for(we=0;we<He.length;we++)Xe.push([He[we][0],be[ye](He[we][1])]);Xe.sort(Pe==="descending"?Be:Ie),ce._categoriesAggregatedValue=Xe,ce._initialCategories=Xe.map(function(Ve){return Ve[0]}),Se=Se.concat(ce.sortByInitialCategories())}}}return Se}(X,N);if(me.length){for(Z._numBoxes=0,Z._numViolins=0,te=0;te<me.length;te++)xe(me[te],!0);for(te=0;te<me.length;te++)xe(me[te],!1);H(N)}m.getComponentMethod("fx","calc")(N),m.getComponentMethod("errorbars","calc")(N)};var G=/(total|sum|min|max|mean|median) (ascending|descending)/;function I(N,F,V){var W={};function te(Z){Z.clearCalc(),Z.type==="multicategory"&&Z.setupMultiCategory(F),W[Z._id]=1}e.simpleMap(N,te);for(var Q=V._axisMatchGroups||[],X=0;X<Q.length;X++)for(var q in Q[X])W[q]||te(V[n.id2name(q)])}function H(N){var F,V,W,te=N._fullLayout,Q=te._visibleModules,X={};for(V=0;V<Q.length;V++){var q=Q[V],Z=q.crossTraceCalc;if(Z){var J=q.basePlotModule.name;X[J]?e.pushUnique(X[J],Z):X[J]=[Z]}}for(W in X){var ne=X[W],re=te._subplots[W];if(Array.isArray(re))for(F=0;F<re.length;F++){var ae=re[F],ue=W==="cartesian"?te._plots[ae]:te[ae];for(V=0;V<ne.length;V++)ne[V](N,ue,ae)}else for(V=0;V<ne.length;V++)ne[V](N)}}h.rehover=function(N){N._fullLayout._rehover&&N._fullLayout._rehover()},h.redrag=function(N){N._fullLayout._redrag&&N._fullLayout._redrag()},h.reselect=function(N){var F=N._fullLayout,V=(N.layout||{}).selections,W=F._previousSelections;F._previousSelections=V;var te=F._reselect||JSON.stringify(V)!==JSON.stringify(W);m.getComponentMethod("selections","reselect")(N,te)},h.generalUpdatePerTraceModule=function(N,F,V,W){var te,Q=F.traceHash,X={};for(te=0;te<V.length;te++){var q=V[te],Z=q[0].trace;Z.visible&&(X[Z.type]=X[Z.type]||[],X[Z.type].push(q))}for(var J in Q)if(!X[J]){var ne=Q[J][0];ne[0].trace.visible=!1,X[J]=[ne]}for(var re in X){var ae=X[re];ae[0][0].trace._module.plot(N,F,e.filterVisible(ae),W)}F.traceHash=X},h.plotBasePlot=function(N,F,V,W,te){var Q=m.getModule(N),X=c(F.calcdata,Q)[0];Q.plot(F,X,W,te)},h.cleanBasePlot=function(N,F,V,W,te){var Q=te._has&&te._has(N),X=V._has&&V._has(N);Q&&!X&&te["_"+N+"layer"].selectAll("g.trace").remove()}},9813:function($){$.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},10869:function($,P,t){var A=t(71828),M=t(61082).tester,l=A.findIndexOfMin,_=A.isAngleInsideSector,m=A.angleDelta,f=A.angleDist;function o(n,s,a,u){var p,c,x=u[0],g=u[1],h=i(Math.sin(s)-Math.sin(n)),b=i(Math.cos(s)-Math.cos(n)),v=Math.tan(a),y=i(1/v),w=h/b,d=g-w*x;return y?h&&b?c=v*(p=d/(v-w)):b?(p=g*y,c=g):(p=x,c=x*v):h&&b?(p=0,c=d):b?(p=0,c=g):p=c=NaN,[p,c]}function e(n,s,a,u){return A.isFullCircle([s,a])?function(p,c){var x,g=c.length,h=new Array(g+1);for(x=0;x<g;x++){var b=c[x];h[x]=[p*Math.cos(b),p*Math.sin(b)]}return h[x]=h[0].slice(),h}(n,u):function(p,c,x,g){var h,b,v=g.length,y=[];function w(G){return[p*Math.cos(G),p*Math.sin(G)]}function d(G,I,H){return o(G,I,H,w(G))}function S(G){return A.mod(G,v)}function T(G){return _(G,[c,x])}var E=l(g,function(G){return T(G)?f(G,c):1/0}),C=d(g[E],g[S(E-1)],c);for(y.push(C),h=E,b=0;b<v;h++,b++){var L=g[S(h)];if(!T(L))break;y.push(w(L))}var O=l(g,function(G){return T(G)?f(G,x):1/0}),z=d(g[O],g[S(O+1)],x);return y.push(z),y.push([0,0]),y.push(y[0].slice()),y}(n,s,a,u)}function i(n){return Math.abs(n)>1e-10?n:0}function r(n,s,a){s=s||0,a=a||0;for(var u=n.length,p=new Array(u),c=0;c<u;c++){var x=n[c];p[c]=[s+x[0],a-x[1]]}return p}$.exports={isPtInsidePolygon:function(n,s,a,u,p){if(!_(s,u))return!1;var c,x;a[0]<a[1]?(c=a[0],x=a[1]):(c=a[1],x=a[0]);var g=M(e(c,u[0],u[1],p)),h=M(e(x,u[0],u[1],p)),b=[n*Math.cos(s),n*Math.sin(s)];return h.contains(b)&&!g.contains(b)},findPolygonOffset:function(n,s,a,u){for(var p=1/0,c=1/0,x=e(n,s,a,u),g=0;g<x.length;g++){var h=x[g];p=Math.min(p,h[0]),c=Math.min(c,-h[1])}return[p,c]},findEnclosingVertexAngles:function(n,s){var a=l(s,function(p){var c=m(p,n);return c>0?c:1/0}),u=A.mod(a+1,s.length);return[s[a],s[u]]},findIntersectionXY:o,findXYatLength:function(n,s,a,u){var p=-s*a,c=s*s+1,x=2*(s*p-a),g=p*p+a*a-n*n,h=Math.sqrt(x*x-4*c*g),b=(-x+h)/(2*c),v=(-x-h)/(2*c);return[[b,s*b+p+u],[v,s*v+p+u]]},clampTiny:i,pathPolygon:function(n,s,a,u,p,c){return"M"+r(e(n,s,a,u),p,c).join("L")},pathPolygonAnnulus:function(n,s,a,u,p,c,x){var g,h;n<s?(g=n,h=s):(g=s,h=n);var b=r(e(g,a,u,p),c,x);return"M"+r(e(h,a,u,p),c,x).reverse().join("L")+"M"+b.join("L")}}},23580:function($,P,t){var A=t(27659).AU,M=t(71828).counterRegex,l=t(77997),_=t(9813),m=_.attr,f=_.name,o=M(f),e={};e[m]={valType:"subplotid",dflt:f,editType:"calc"},$.exports={attr:m,name:f,idRoot:f,idRegex:o,attrRegex:o,attributes:e,layoutAttributes:t(73812),supplyLayoutDefaults:t(68993),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,s=r._subplots[f],a=0;a<s.length;a++){var u=s[a],p=A(n,f,u),c=r[u]._subplot;c||(c=l(i,u),r[u]._subplot=c),c.plot(p,r,i._promises)}},clean:function(i,r,n,s){for(var a=s._subplots[f]||[],u=s._has&&s._has("gl"),p=r._has&&r._has("gl"),c=u&&!p,x=0;x<a.length;x++){var g=a[x],h=s[g]._subplot;if(!r[g]&&h)for(var b in h.framework.remove(),h.layers["radial-axis-title"].remove(),h.clipPaths)h.clipPaths[b].remove();c&&h._scene&&(h._scene.destroy(),h._scene=null)}},toSVG:t(93612).toSVG}},73812:function($,P,t){var A=t(22399),M=t(13838),l=t(27670).Y,_=t(71828).extendFlat,m=t(30962).overrideAll,f=m({color:M.color,showline:_({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:_({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash},"plot","from-root"),o=m({tickmode:M.minor.tickmode,nticks:M.nticks,tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,labelalias:M.labelalias,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,layer:M.layer},"plot","from-root"),e={visible:_({},M.visible,{dflt:!0}),type:_({},M.type,{values:["-","linear","log","date","category"]}),autotypenumbers:M.autotypenumbers,autorangeoptions:{minallowed:M.autorangeoptions.minallowed,maxallowed:M.autorangeoptions.maxallowed,clipmin:M.autorangeoptions.clipmin,clipmax:M.autorangeoptions.clipmax,include:M.autorangeoptions.include,editType:"plot"},autorange:_({},M.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:_({},M.minallowed,{editType:"plot"}),maxallowed:_({},M.maxallowed,{editType:"plot"}),range:_({},M.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:M.categoryorder,categoryarray:M.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:_({},M.title.text,{editType:"plot",dflt:""}),font:_({},M.title.font,{editType:"plot"}),editType:"plot"},hoverformat:M.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}};_(e,f,o);var i={visible:_({},M.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:M.autotypenumbers,categoryorder:M.categoryorder,categoryarray:M.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:M.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};_(i,f,o),$.exports={domain:l({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:A.background},radialaxis:e,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},68993:function($,P,t){var A=t(71828),M=t(7901),l=t(44467),_=t(49119),m=t(27659).NG,f=t(26218),o=t(38701),e=t(96115),i=t(89426),r=t(15258),n=t(92128),s=t(23074),a=t(4322),u=t(73812),p=t(12101),c=t(9813),x=c.axisNames;function g(b,v,y,w){var d=y("bgcolor");w.bgColor=M.combine(d,w.paper_bgcolor);var S=y("sector");y("hole");var T,E=m(w.fullData,c.name,w.id),C=w.layoutOut;function L(ae,ue){return y(T+"."+ae,ue)}for(var O=0;O<x.length;O++){T=x[O],A.isPlainObject(b[T])||(b[T]={});var z=b[T],G=l.newContainer(v,T);G._id=G._name=T,G._attr=w.id+"."+T,G._traceIndices=E.map(function(ae){return ae._expandedIndex});var I=c.axisName2dataArray[T],H=h(z,G,L,E,I,w);r(z,G,L,{axData:E,dataAttr:I});var N=L("visible");switch(p(G,v,C),L("uirevision",v.uirevision),G._m=1,T){case"radialaxis":L("minallowed"),L("maxallowed");var F,V=L("range"),W=G.getAutorangeDflt(V),te=L("autorange",W);!V||(V[0]!==null||V[1]!==null)&&(V[0]!==null&&V[1]!==null||te!=="reversed"&&te!==!0)&&(V[0]===null||te!=="min"&&te!=="max reversed")&&(V[1]===null||te!=="max"&&te!=="min reversed")||(V=void 0,delete G.range,G.autorange=!0,F=!0),F||(te=L("autorange",W=G.getAutorangeDflt(V))),z.autorange=te,te&&(s(L,te,V),H!=="linear"&&H!=="-"||L("rangemode"),G.isReversed()&&(G._m=-1)),G.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(H==="date"){A.log("Polar plots do not support date angular axes yet.");for(var Q=0;Q<E.length;Q++)E[Q].visible=!1;H=z.type=G.type="linear"}L(H==="linear"?"thetaunit":"period");var X=L("direction");L("rotation",{counterclockwise:0,clockwise:90}[X])}if(i(z,G,L,G.type,{tickSuffixDflt:G.thetaunit==="degrees"?"":void 0}),N){var q,Z,J,ne,re=w.font||{};Z=(q=L("color"))===z.color?q:re.color,J=re.size,ne=re.family,f(z,G,L,G.type),e(z,G,L,G.type,{font:{color:Z,size:J,family:ne}}),o(z,G,L,{outerTicks:!0}),n(z,G,L,{dfltColor:q,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[T]}),L("layer"),T==="radialaxis"&&(L("side"),L("angle",S[0]),L("title.text"),A.coerceFont(L,"title.font",{color:Z,size:A.bigFont(J),family:ne}))}H!=="category"&&L("hoverformat"),G._input=z}v.angularaxis.type==="category"&&y("gridshape")}function h(b,v,y,w,d,S){var T=y("autotypenumbers",S.autotypenumbersDflt);if(y("type")==="-"){for(var E,C=0;C<w.length;C++)if(w[C].visible){E=w[C];break}E&&E[d]&&(v.type=a(E[d],"gregorian",{noMultiCategory:!0,autotypenumbers:T})),v.type==="-"?v.type="linear":b.type=v.type}return v.type}$.exports=function(b,v,y){_(b,v,y,{type:c.name,attributes:u,handleDefaults:g,font:v.font,autotypenumbersDflt:v.autotypenumbers,paper_bgcolor:v.paper_bgcolor,fullData:y,layoutOut:v})}},77997:function($,P,t){var A=t(39898),M=t(84267),l=t(73972),_=t(71828),m=_.strRotate,f=_.strTranslate,o=t(7901),e=t(91424),i=t(74875),r=t(89298),n=t(21994),s=t(12101),a=t(71739).doAutoRange,u=t(29323),p=t(28569),c=t(30211),x=t(92998),g=t(47322).prepSelect,h=t(47322).selectOnClick,b=t(47322).clearOutline,v=t(6964),y=t(33306),w=t(61549).redrawReglTraces,d=t(18783).MID_SHIFT,S=t(9813),T=t(10869),E=t(23893),C=E.smith,L=E.reactanceArc,O=E.resistanceArc,z=E.smithTransform,G=_._,I=_.mod,H=_.deg2rad,N=_.rad2deg;function F(X,q,Z){this.isSmith=Z||!1,this.id=q,this.gd=X,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var J=X._fullLayout,ne="clip"+J._uid+q;this.clipIds.forTraces=ne+"-for-traces",this.clipPaths.forTraces=J._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=J["_"+(Z?"smith":"polar")+"layer"].append("g").attr("class",q),this.getHole=function(re){return this.isSmith?0:re.hole},this.getSector=function(re){return this.isSmith?[0,360]:re.sector},this.getRadial=function(re){return this.isSmith?re.realaxis:re.radialaxis},this.getAngular=function(re){return this.isSmith?re.imaginaryaxis:re.angularaxis},Z||(this.radialTickLayout=null,this.angularTickLayout=null)}var V=F.prototype;function W(X){var q=X.ticks+String(X.ticklen)+String(X.showticklabels);return"side"in X&&(q+=X.side),q}function te(X,q){return q[_.findIndexOfMin(q,function(Z){return _.angleDist(X,Z)})]}function Q(X,q,Z){return q?(X.attr("display",null),X.attr(Z)):X&&X.attr("display","none"),X}$.exports=function(X,q,Z){return new F(X,q,Z)},V.plot=function(X,q){for(var Z=this,J=q[Z.id],ne=!1,re=0;re<X.length;re++)if(X[re][0].trace.cliponaxis===!1){ne=!0;break}Z._hasClipOnAxisFalse=ne,Z.updateLayers(q,J),Z.updateLayout(q,J),i.generalUpdatePerTraceModule(Z.gd,Z,X,J),Z.updateFx(q,J),Z.isSmith&&(delete J.realaxis.range,delete J.imaginaryaxis.range)},V.updateLayers=function(X,q){var Z=this,J=Z.isSmith,ne=Z.layers,re=Z.getRadial(q),ae=Z.getAngular(q),ue=S.layerNames,he=ue.indexOf("frontplot"),de=ue.slice(0,he),xe=ae.layer==="below traces",me=re.layer==="below traces";xe&&de.push("angular-line"),me&&de.push("radial-line"),xe&&de.push("angular-axis"),me&&de.push("radial-axis"),de.push("frontplot"),xe||de.push("angular-line"),me||de.push("radial-line"),xe||de.push("angular-axis"),me||de.push("radial-axis");var ve=(J?"smith":"polar")+"sublayer",Le=Z.framework.selectAll("."+ve).data(de,String);Le.enter().append("g").attr("class",function(Ae){return ve+" "+Ae}).each(function(Ae){var we=ne[Ae]=A.select(this);switch(Ae){case"frontplot":J||we.append("g").classed("barlayer",!0),we.append("g").classed("scatterlayer",!0);break;case"backplot":we.append("g").classed("maplayer",!0);break;case"plotbg":ne.bg=we.append("path");break;case"radial-grid":case"angular-grid":we.style("fill","none");break;case"radial-line":we.append("line").style("fill","none");break;case"angular-line":we.append("path").style("fill","none")}}),Le.order()},V.updateLayout=function(X,q){var Z=this,J=Z.layers,ne=X._size,re=Z.getRadial(q),ae=Z.getAngular(q),ue=q.domain.x,he=q.domain.y;Z.xOffset=ne.l+ne.w*ue[0],Z.yOffset=ne.t+ne.h*(1-he[1]);var de=Z.xLength=ne.w*(ue[1]-ue[0]),xe=Z.yLength=ne.h*(he[1]-he[0]),me=Z.getSector(q);Z.sectorInRad=me.map(H);var ve,Le,Ae,we,se,oe=Z.sectorBBox=function(lt){var et,yt=lt[0],_t=lt[1]-yt,xt=I(yt,360),at=xt+_t,ot=Math.cos(H(xt)),At=Math.sin(H(xt)),Ct=Math.cos(H(at)),zt=Math.sin(H(at));return et=xt<=90&&at>=90||xt>90&&at>=450?1:At<=0&&zt<=0?0:Math.max(At,zt),[xt<=180&&at>=180||xt>180&&at>=540?-1:ot>=0&&Ct>=0?0:Math.min(ot,Ct),xt<=270&&at>=270||xt>270&&at>=630?-1:At>=0&&zt>=0?0:Math.min(At,zt),at>=360?1:ot<=0&&Ct<=0?0:Math.max(ot,Ct),et]}(me),fe=oe[2]-oe[0],Se=oe[3]-oe[1],Me=xe/de,be=Math.abs(Se/fe);Me>be?(ve=de,se=(xe-(Le=de*be))/ne.h/2,Ae=[ue[0],ue[1]],we=[he[0]+se,he[1]-se]):(Le=xe,se=(de-(ve=xe/be))/ne.w/2,Ae=[ue[0]+se,ue[1]-se],we=[he[0],he[1]]),Z.xLength2=ve,Z.yLength2=Le,Z.xDomain2=Ae,Z.yDomain2=we;var Ie,Be=Z.xOffset2=ne.l+ne.w*Ae[0],ce=Z.yOffset2=ne.t+ne.h*(1-we[1]),Te=Z.radius=ve/fe,ye=Z.innerRadius=Z.getHole(q)*Te,Pe=Z.cx=Be-Te*oe[0],Re=Z.cy=ce+Te*oe[3],ze=Z.cxx=Pe-Be,He=Z.cyy=Re-ce,We=re.side;We==="counterclockwise"?(Ie=We,We="top"):We==="clockwise"&&(Ie=We,We="bottom"),Z.radialAxis=Z.mockAxis(X,q,re,{_id:"x",side:We,_trueSide:Ie,domain:[ye/ne.w,Te/ne.w]}),Z.angularAxis=Z.mockAxis(X,q,ae,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(X,q),Z.updateAngularAxis(X,q),Z.updateRadialAxis(X,q),Z.updateRadialAxisTitle(X,q),Z.xaxis=Z.mockCartesianAxis(X,q,{_id:"x",domain:Ae}),Z.yaxis=Z.mockCartesianAxis(X,q,{_id:"y",domain:we});var Je=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",Je).attr("transform",f(ze,He)),J.frontplot.attr("transform",f(Be,ce)).call(e.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),J.bg.attr("d",Je).attr("transform",f(Pe,Re)).call(o.fill,q.bgcolor)},V.mockAxis=function(X,q,Z,J){var ne=_.extendFlat({},Z,J);return s(ne,q,X),ne},V.mockCartesianAxis=function(X,q,Z){var J=this,ne=J.isSmith,re=Z._id,ae=_.extendFlat({type:"linear"},Z);n(ae,X);var ue={x:[0,2],y:[1,3]};return ae.setRange=function(){var he=J.sectorBBox,de=ue[re],xe=J.radialAxis._rl,me=(xe[1]-xe[0])/(1-J.getHole(q));ae.range=[he[de[0]]*me,he[de[1]]*me]},ae.isPtWithinRange=re!=="x"||ne?function(){return!0}:function(he){return J.isPtInside(he)},ae.setRange(),ae.setScale(),ae},V.doAutoRange=function(X,q){var Z=this,J=Z.gd,ne=Z.radialAxis,re=Z.getRadial(q);a(J,ne);var ae=ne.range;re.range=ae.slice(),re._input.range=ae.slice(),ne._rl=[ne.r2l(ae[0],null,"gregorian"),ne.r2l(ae[1],null,"gregorian")]},V.updateRadialAxis=function(X,q){var Z=this,J=Z.gd,ne=Z.layers,re=Z.radius,ae=Z.innerRadius,ue=Z.cx,he=Z.cy,de=Z.getRadial(q),xe=I(Z.getSector(q)[0],360),me=Z.radialAxis,ve=ae<re,Le=Z.isSmith;Le||(Z.fillViewInitialKey("radialaxis.angle",de.angle),Z.fillViewInitialKey("radialaxis.range",me.range.slice()),me.setGeometry()),me.tickangle==="auto"&&xe>90&&xe<=270&&(me.tickangle=180);var Ae=Le?function(ce){var Te=z(Z,C([ce.x,0]));return f(Te[0]-ue,Te[1]-he)}:function(ce){return f(me.l2p(ce.x)+ae,0)},we=Le?function(ce){return O(Z,ce.x,-1/0,1/0)}:function(ce){return Z.pathArc(me.r2p(ce.x)+ae)},se=W(de);if(Z.radialTickLayout!==se&&(ne["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=se),ve){me.setScale();var oe=0,fe=Le?(me.tickvals||[]).filter(function(ce){return ce>=0}).map(function(ce){return r.tickText(me,ce,!0,!1)}):r.calcTicks(me),Se=Le?fe:r.clipEnds(me,fe),Me=r.getTickSigns(me)[2];Le&&((me.ticks==="top"&&me.side==="bottom"||me.ticks==="bottom"&&me.side==="top")&&(Me=-Me),me.ticks==="top"&&me.side==="top"&&(oe=-me.ticklen),me.ticks==="bottom"&&me.side==="bottom"&&(oe=me.ticklen)),r.drawTicks(J,me,{vals:fe,layer:ne["radial-axis"],path:r.makeTickPath(me,0,Me),transFn:Ae,crisp:!1}),r.drawGrid(J,me,{vals:Se,layer:ne["radial-grid"],path:we,transFn:_.noop,crisp:!1}),r.drawLabels(J,me,{vals:fe,layer:ne["radial-axis"],transFn:Ae,labelFns:r.makeLabelFns(me,oe)})}var be=Z.radialAxisAngle=Z.vangles?N(te(H(de.angle),Z.vangles)):de.angle,Ie=f(ue,he),Be=Ie+m(-be);Q(ne["radial-axis"],ve&&(de.showticklabels||de.ticks),{transform:Be}),Q(ne["radial-grid"],ve&&de.showgrid,{transform:Le?"":Ie}),Q(ne["radial-line"].select("line"),ve&&de.showline,{x1:Le?-re:ae,y1:0,x2:re,y2:0,transform:Be}).attr("stroke-width",de.linewidth).call(o.stroke,de.linecolor)},V.updateRadialAxisTitle=function(X,q,Z){if(!this.isSmith){var J=this,ne=J.gd,re=J.radius,ae=J.cx,ue=J.cy,he=J.getRadial(q),de=J.id+"title",xe=0;if(he.title){var me=e.bBox(J.layers["radial-axis"].node()).height,ve=he.title.font.size,Le=he.side;xe=Le==="top"?ve:Le==="counterclockwise"?-(me+.4*ve):me+.8*ve}var Ae=Z!==void 0?Z:J.radialAxisAngle,we=H(Ae),se=Math.cos(we),oe=Math.sin(we),fe=ae+re/2*se+xe*oe,Se=ue-re/2*oe+xe*se;J.layers["radial-axis-title"]=x.draw(ne,de,{propContainer:he,propName:J.id+".radialaxis.title",placeholder:G(ne,"Click to enter radial axis title"),attributes:{x:fe,y:Se,"text-anchor":"middle"},transform:{rotate:-Ae}})}},V.updateAngularAxis=function(X,q){var Z=this,J=Z.gd,ne=Z.layers,re=Z.radius,ae=Z.innerRadius,ue=Z.cx,he=Z.cy,de=Z.getAngular(q),xe=Z.angularAxis,me=Z.isSmith;me||(Z.fillViewInitialKey("angularaxis.rotation",de.rotation),xe.setGeometry(),xe.setScale());var ve=me?function(ce){var Te=z(Z,C([0,ce.x]));return Math.atan2(Te[0]-ue,Te[1]-he)-Math.PI/2}:function(ce){return xe.t2g(ce.x)};xe.type==="linear"&&xe.thetaunit==="radians"&&(xe.tick0=N(xe.tick0),xe.dtick=N(xe.dtick));var Le=function(ce){return f(ue+re*Math.cos(ce),he-re*Math.sin(ce))},Ae=me?function(ce){var Te=z(Z,C([0,ce.x]));return f(Te[0],Te[1])}:function(ce){return Le(ve(ce))},we=me?function(ce){var Te=z(Z,C([0,ce.x])),ye=Math.atan2(Te[0]-ue,Te[1]-he)-Math.PI/2;return f(Te[0],Te[1])+m(-N(ye))}:function(ce){var Te=ve(ce);return Le(Te)+m(-N(Te))},se=me?function(ce){return L(Z,ce.x,0,1/0)}:function(ce){var Te=ve(ce),ye=Math.cos(Te),Pe=Math.sin(Te);return"M"+[ue+ae*ye,he-ae*Pe]+"L"+[ue+re*ye,he-re*Pe]},oe=r.makeLabelFns(xe,0).labelStandoff,fe={xFn:function(ce){var Te=ve(ce);return Math.cos(Te)*oe},yFn:function(ce){var Te=ve(ce),ye=Math.sin(Te)>0?.2:1;return-Math.sin(Te)*(oe+ce.fontSize*ye)+Math.abs(Math.cos(Te))*(ce.fontSize*d)},anchorFn:function(ce){var Te=ve(ce),ye=Math.cos(Te);return Math.abs(ye)<.1?"middle":ye>0?"start":"end"},heightFn:function(ce,Te,ye){var Pe=ve(ce);return-.5*(1+Math.sin(Pe))*ye}},Se=W(de);Z.angularTickLayout!==Se&&(ne["angular-axis"].selectAll("."+xe._id+"tick").remove(),Z.angularTickLayout=Se);var Me,be=me?[1/0].concat(xe.tickvals||[]).map(function(ce){return r.tickText(xe,ce,!0,!1)}):r.calcTicks(xe);if(me&&(be[0].text="",be[0].fontSize*=1.75),q.gridshape==="linear"?(Me=be.map(ve),_.angleDelta(Me[0],Me[1])<0&&(Me=Me.slice().reverse())):Me=null,Z.vangles=Me,xe.type==="category"&&(be=be.filter(function(ce){return _.isAngleInsideSector(ve(ce),Z.sectorInRad)})),xe.visible){var Ie=xe.ticks==="inside"?-1:1,Be=(xe.linewidth||1)/2;r.drawTicks(J,xe,{vals:be,layer:ne["angular-axis"],path:"M"+Ie*Be+",0h"+Ie*xe.ticklen,transFn:we,crisp:!1}),r.drawGrid(J,xe,{vals:be,layer:ne["angular-grid"],path:se,transFn:_.noop,crisp:!1}),r.drawLabels(J,xe,{vals:be,layer:ne["angular-axis"],repositionOnUpdate:!0,transFn:Ae,labelFns:fe})}Q(ne["angular-line"].select("path"),de.showline,{d:Z.pathSubplot(),transform:f(ue,he)}).attr("stroke-width",de.linewidth).call(o.stroke,de.linecolor)},V.updateFx=function(X,q){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(X),this.updateRadialDrag(X,q,0),this.updateRadialDrag(X,q,1)),this.updateHoverAndMainDrag(X))},V.updateHoverAndMainDrag=function(X){var q,Z,J=this,ne=J.isSmith,re=J.gd,ae=J.layers,ue=X._zoomlayer,he=S.MINZOOM,de=S.OFFEDGE,xe=J.radius,me=J.innerRadius,ve=J.cx,Le=J.cy,Ae=J.cxx,we=J.cyy,se=J.sectorInRad,oe=J.vangles,fe=J.radialAxis,Se=T.clampTiny,Me=T.findXYatLength,be=T.findEnclosingVertexAngles,Ie=S.cornerHalfWidth,Be=S.cornerLen/2,ce=u.makeDragger(ae,"path","maindrag",X.dragmode===!1?"none":"crosshair");A.select(ce).attr("d",J.pathSubplot()).attr("transform",f(ve,Le)),ce.onmousemove=function(nt){c.hover(re,nt,J.id),re._fullLayout._lasthover=ce,re._fullLayout._hoversubplot=J.id},ce.onmouseout=function(nt){re._dragging||p.unhover(re,nt)};var Te,ye,Pe,Re,ze,He,We,Je,lt,et={element:ce,gd:re,subplot:J.id,plotinfo:{id:J.id,xaxis:J.xaxis,yaxis:J.yaxis},xaxes:[J.xaxis],yaxes:[J.yaxis]};function yt(nt,De){return Math.sqrt(nt*nt+De*De)}function _t(nt,De){return yt(nt-Ae,De-we)}function xt(nt,De){return Math.atan2(we-De,nt-Ae)}function at(nt,De){return[nt*Math.cos(De),nt*Math.sin(-De)]}function ot(nt,De){if(nt===0)return J.pathSector(2*Ie);var Fe=Be/nt,rt=De-Fe,tt=De+Fe,gt=Math.max(0,Math.min(nt,xe)),dt=gt-Ie,mt=gt+Ie;return"M"+at(dt,rt)+"A"+[dt,dt]+" 0,0,0 "+at(dt,tt)+"L"+at(mt,tt)+"A"+[mt,mt]+" 0,0,1 "+at(mt,rt)+"Z"}function At(nt,De,Fe){if(nt===0)return J.pathSector(2*Ie);var rt,tt,gt=at(nt,De),dt=at(nt,Fe),mt=Se((gt[0]+dt[0])/2),ft=Se((gt[1]+dt[1])/2);if(mt&&ft){var kt=ft/mt,ht=-1/kt,pt=Me(Ie,kt,mt,ft);rt=Me(Be,ht,pt[0][0],pt[0][1]),tt=Me(Be,ht,pt[1][0],pt[1][1])}else{var wt,Ft;ft?(wt=Be,Ft=Ie):(wt=Ie,Ft=Be),rt=[[mt-wt,ft-Ft],[mt+wt,ft-Ft]],tt=[[mt-wt,ft+Ft],[mt+wt,ft+Ft]]}return"M"+rt.join("L")+"L"+tt.reverse().join("L")+"Z"}function Ct(nt,De){return De=Math.max(Math.min(De,xe),me),nt<de?nt=0:xe-nt<de?nt=xe:De<de?De=0:xe-De<de&&(De=xe),Math.abs(De-nt)>he?(nt<De?(Pe=nt,Re=De):(Pe=De,Re=nt),!0):(Pe=null,Re=null,!1)}function zt(nt,De){nt=nt||ze,De=De||"M0,0Z",Je.attr("d",nt),lt.attr("d",De),u.transitionZoombox(Je,lt,He,We),He=!0;var Fe={};Ze(Fe),re.emit("plotly_relayouting",Fe)}function St(nt,De){var Fe,rt,tt=Te+(nt*=q),gt=ye+(De*=Z),dt=_t(Te,ye),mt=Math.min(_t(tt,gt),xe),ft=xt(Te,ye);Ct(dt,mt)&&(Fe=ze+J.pathSector(Re),Pe&&(Fe+=J.pathSector(Pe)),rt=ot(Pe,ft)+ot(Re,ft)),zt(Fe,rt)}function qe(nt,De,Fe,rt){var tt=T.findIntersectionXY(Fe,rt,Fe,[nt-Ae,we-De]);return yt(tt[0],tt[1])}function Xe(nt,De){var Fe,rt,tt=Te+nt,gt=ye+De,dt=xt(Te,ye),mt=xt(tt,gt),ft=be(dt,oe),kt=be(mt,oe);Ct(qe(Te,ye,ft[0],ft[1]),Math.min(qe(tt,gt,kt[0],kt[1]),xe))&&(Fe=ze+J.pathSector(Re),Pe&&(Fe+=J.pathSector(Pe)),rt=[At(Pe,ft[0],ft[1]),At(Re,ft[0],ft[1])].join(" ")),zt(Fe,rt)}function Ve(){if(u.removeZoombox(re),Pe!==null&&Re!==null){var nt={};Ze(nt),u.showDoubleClickNotifier(re),l.call("_guiRelayout",re,nt)}}function Ze(nt){var De=fe._rl,Fe=(De[1]-De[0])/(1-me/xe)/xe,rt=[De[0]+(Pe-me)*Fe,De[0]+(Re-me)*Fe];nt[J.id+".radialaxis.range"]=rt}function st(nt,De){var Fe=re._fullLayout.clickmode;if(u.removeZoombox(re),nt===2){var rt={};for(var tt in J.viewInitial)rt[J.id+"."+tt]=J.viewInitial[tt];re.emit("plotly_doubleclick",null),l.call("_guiRelayout",re,rt)}Fe.indexOf("select")>-1&&nt===1&&h(De,re,[J.xaxis],[J.yaxis],J.id,et),Fe.indexOf("event")>-1&&c.click(re,De,J.id)}et.prepFn=function(nt,De,Fe){var rt=re._fullLayout.dragmode,tt=ce.getBoundingClientRect();re._fullLayout._calcInverseTransform(re);var gt=re._fullLayout._invTransform;q=re._fullLayout._invScaleX,Z=re._fullLayout._invScaleY;var dt=_.apply3DTransform(gt)(De-tt.left,Fe-tt.top);if(Te=dt[0],ye=dt[1],oe){var mt=T.findPolygonOffset(xe,se[0],se[1],oe);Te+=Ae+mt[0],ye+=we+mt[1]}switch(rt){case"zoom":et.clickFn=st,ne||(et.moveFn=oe?Xe:St,et.doneFn=Ve,function(){Pe=null,Re=null,ze=J.pathSubplot(),He=!1;var ft=re._fullLayout[J.id];We=M(ft.bgcolor).getLuminance(),(Je=u.makeZoombox(ue,We,ve,Le,ze)).attr("fill-rule","evenodd"),lt=u.makeCorners(ue,ve,Le),b(re)}());break;case"select":case"lasso":g(nt,De,Fe,et,rt)}},p.init(et)},V.updateRadialDrag=function(X,q,Z){var J=this,ne=J.gd,re=J.layers,ae=J.radius,ue=J.innerRadius,he=J.cx,de=J.cy,xe=J.radialAxis,me=S.radialDragBoxSize,ve=me/2;if(xe.visible){var Le,Ae,we,se=H(J.radialAxisAngle),oe=xe._rl,fe=oe[0],Se=oe[1],Me=oe[Z],be=.75*(oe[1]-oe[0])/(1-J.getHole(q))/ae;Z?(Le=he+(ae+ve)*Math.cos(se),Ae=de-(ae+ve)*Math.sin(se),we="radialdrag"):(Le=he+(ue-ve)*Math.cos(se),Ae=de-(ue-ve)*Math.sin(se),we="radialdrag-inner");var Ie,Be,ce,Te=u.makeRectDragger(re,we,"crosshair",-ve,-ve,me,me),ye={element:Te,gd:ne};X.dragmode===!1&&(ye.dragmode=!1),Q(A.select(Te),xe.visible&&ue<ae,{transform:f(Le,Ae)}),ye.prepFn=function(){Ie=null,Be=null,ce=null,ye.moveFn=Pe,ye.doneFn=Re,b(ne)},ye.clampFn=function(We,Je){return Math.sqrt(We*We+Je*Je)<S.MINDRAG&&(We=0,Je=0),[We,Je]},p.init(ye)}function Pe(We,Je){if(Ie)Ie(We,Je);else{var lt=[We,-Je],et=[Math.cos(se),Math.sin(se)],yt=Math.abs(_.dot(lt,et)/Math.sqrt(_.dot(lt,lt)));isNaN(yt)||(Ie=yt<.5?ze:He)}var _t={};(function(xt){Be!==null?xt[J.id+".radialaxis.angle"]=Be:ce!==null&&(xt[J.id+".radialaxis.range["+Z+"]"]=ce)})(_t),ne.emit("plotly_relayouting",_t)}function Re(){Be!==null?l.call("_guiRelayout",ne,J.id+".radialaxis.angle",Be):ce!==null&&l.call("_guiRelayout",ne,J.id+".radialaxis.range["+Z+"]",ce)}function ze(We,Je){if(Z!==0){var lt=Le+We,et=Ae+Je;Be=Math.atan2(de-et,lt-he),J.vangles&&(Be=te(Be,J.vangles)),Be=N(Be);var yt=f(he,de)+m(-Be);re["radial-axis"].attr("transform",yt),re["radial-line"].select("line").attr("transform",yt);var _t=J.gd._fullLayout,xt=_t[J.id];J.updateRadialAxisTitle(_t,xt,Be)}}function He(We,Je){var lt=_.dot([We,-Je],[Math.cos(se),Math.sin(se)]);if(ce=Me-be*lt,be>0==(Z?ce>fe:ce<Se)){var et=ne._fullLayout,yt=et[J.id];xe.range[Z]=ce,xe._rl[Z]=ce,J.updateRadialAxis(et,yt),J.xaxis.setRange(),J.xaxis.setScale(),J.yaxis.setRange(),J.yaxis.setScale();var _t=!1;for(var xt in J.traceHash){var at=J.traceHash[xt],ot=_.filterVisible(at);at[0][0].trace._module.plot(ne,J,ot,yt),l.traceIs(xt,"gl")&&ot.length&&(_t=!0)}_t&&(y(ne),w(ne))}else ce=null}},V.updateAngularDrag=function(X){var q=this,Z=q.gd,J=q.layers,ne=q.radius,re=q.angularAxis,ae=q.cx,ue=q.cy,he=q.cxx,de=q.cyy,xe=S.angularDragBoxSize,me=u.makeDragger(J,"path","angulardrag",X.dragmode===!1?"none":"move"),ve={element:me,gd:Z};function Le(ye,Pe){return Math.atan2(de+xe-Pe,ye-he-xe)}X.dragmode===!1?ve.dragmode=!1:A.select(me).attr("d",q.pathAnnulus(ne,ne+xe)).attr("transform",f(ae,ue)).call(v,"move");var Ae,we,se,oe,fe,Se,Me=J.frontplot.select(".scatterlayer").selectAll(".trace"),be=Me.selectAll(".point"),Ie=Me.selectAll(".textpoint");function Be(ye,Pe){var Re=q.gd._fullLayout,ze=Re[q.id],He=Le(Ae+ye*X._invScaleX,we+Pe*X._invScaleY),We=N(He-Se);if(oe=se+We,J.frontplot.attr("transform",f(q.xOffset2,q.yOffset2)+m([-We,he,de])),q.vangles){fe=q.radialAxisAngle+We;var Je=f(ae,ue)+m(-We),lt=f(ae,ue)+m(-fe);J.bg.attr("transform",Je),J["radial-grid"].attr("transform",Je),J["radial-axis"].attr("transform",lt),J["radial-line"].select("line").attr("transform",lt),q.updateRadialAxisTitle(Re,ze,fe)}else q.clipPaths.forTraces.select("path").attr("transform",f(he,de)+m(We));be.each(function(){var ot=A.select(this),At=e.getTranslate(ot);ot.attr("transform",f(At.x,At.y)+m([We]))}),Ie.each(function(){var ot=A.select(this),At=ot.select("text"),Ct=e.getTranslate(ot);ot.attr("transform",m([We,At.attr("x"),At.attr("y")])+f(Ct.x,Ct.y))}),re.rotation=_.modHalf(oe,360),q.updateAngularAxis(Re,ze),q._hasClipOnAxisFalse&&!_.isFullCircle(q.sectorInRad)&&Me.call(e.hideOutsideRangePoints,q);var et=!1;for(var yt in q.traceHash)if(l.traceIs(yt,"gl")){var _t=q.traceHash[yt],xt=_.filterVisible(_t);_t[0][0].trace._module.plot(Z,q,xt,ze),xt.length&&(et=!0)}et&&(y(Z),w(Z));var at={};ce(at),Z.emit("plotly_relayouting",at)}function ce(ye){ye[q.id+".angularaxis.rotation"]=oe,q.vangles&&(ye[q.id+".radialaxis.angle"]=fe)}function Te(){Ie.select("text").attr("transform",null);var ye={};ce(ye),l.call("_guiRelayout",Z,ye)}ve.prepFn=function(ye,Pe,Re){var ze=X[q.id];se=ze.angularaxis.rotation;var He=me.getBoundingClientRect();Ae=Pe-He.left,we=Re-He.top,Z._fullLayout._calcInverseTransform(Z);var We=_.apply3DTransform(X._invTransform)(Ae,we);Ae=We[0],we=We[1],Se=Le(Ae,we),ve.moveFn=Be,ve.doneFn=Te,b(Z)},q.vangles&&!_.isFullCircle(q.sectorInRad)&&(ve.prepFn=_.noop,v(A.select(me),null)),p.init(ve)},V.isPtInside=function(X){if(this.isSmith)return!0;var q=this.sectorInRad,Z=this.vangles,J=this.angularAxis.c2g(X.theta),ne=this.radialAxis,re=ne.c2l(X.r),ae=ne._rl;return(Z?T.isPtInsidePolygon:_.isPtInsideSector)(re,J,ae,q,Z)},V.pathArc=function(X){var q=this.sectorInRad,Z=this.vangles;return(Z?T.pathPolygon:_.pathArc)(X,q[0],q[1],Z)},V.pathSector=function(X){var q=this.sectorInRad,Z=this.vangles;return(Z?T.pathPolygon:_.pathSector)(X,q[0],q[1],Z)},V.pathAnnulus=function(X,q){var Z=this.sectorInRad,J=this.vangles;return(J?T.pathPolygonAnnulus:_.pathAnnulus)(X,q,Z[0],Z[1],J)},V.pathSubplot=function(){var X=this.innerRadius,q=this.radius;return X?this.pathAnnulus(X,q):this.pathSector(q)},V.fillViewInitialKey=function(X,q){X in this.viewInitial||(this.viewInitial[X]=q)}},12101:function($,P,t){var A=t(71828),M=t(21994),l=A.deg2rad,_=A.rad2deg;$.exports=function(m,f,o){switch(M(m,o),m._id){case"x":case"radialaxis":(function(e,i){var r=i._subplot;e.setGeometry=function(){var n=e._rl[0],s=e._rl[1],a=r.innerRadius,u=(r.radius-a)/(s-n),p=a/u,c=n>s?function(x){return x<=0}:function(x){return x>=0};e.c2g=function(x){var g=e.c2l(x)-n;return(c(g)?g:0)+p},e.g2c=function(x){return e.l2c(x+n-p)},e.g2p=function(x){return x*u},e.c2p=function(x){return e.g2p(e.c2g(x))}}})(m,f);break;case"angularaxis":(function(e,i){var r=e.type;if(r==="linear"){var n=e.d2c,s=e.c2d;e.d2c=function(a,u){return function(p,c){return c==="degrees"?l(p):p}(n(a),u)},e.c2d=function(a,u){return s(function(p,c){return c==="degrees"?_(p):p}(a,u))}}e.makeCalcdata=function(a,u){var p,c,x=a[u],g=a._length,h=function(d){return e.d2c(d,a.thetaunit)};if(x){if(A.isTypedArray(x)&&r==="linear"){if(g===x.length)return x;if(x.subarray)return x.subarray(0,g)}for(p=new Array(g),c=0;c<g;c++)p[c]=h(x[c])}else{var b=u+"0",v="d"+u,y=b in a?h(a[b]):0,w=a[v]?h(a[v]):(e.period||2*Math.PI)/g;for(p=new Array(g),c=0;c<g;c++)p[c]=y+c*w}return p},e.setGeometry=function(){var a,u,p,c,x=i.sector,g=x.map(l),h={clockwise:-1,counterclockwise:1}[e.direction],b=l(e.rotation),v=function(S){return h*S+b},y=function(S){return(S-b)/h};switch(r){case"linear":u=a=A.identity,c=l,p=_,e.range=A.isFullCircle(g)?[x[0],x[0]+360]:g.map(y).map(_);break;case"category":var w=e._categories.length,d=e.period?Math.max(e.period,w):w;d===0&&(d=1),u=c=function(S){return 2*S*Math.PI/d},a=p=function(S){return S*d/Math.PI/2},e.range=[0,d]}e.c2g=function(S){return v(u(S))},e.g2c=function(S){return a(y(S))},e.t2g=function(S){return v(c(S))},e.g2t=function(S){return p(y(S))}}})(m,f)}}},39779:function($){$.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},23893:function($){function P(l){return l<0?-1:l>0?1:0}function t(l){var _=l[0],m=l[1];if(!isFinite(_)||!isFinite(m))return[1,0];var f=(_+1)*(_+1)+m*m;return[(_*_+m*m-1)/f,2*m/f]}function A(l,_){var m=_[0],f=_[1];return[m*l.radius+l.cx,-f*l.radius+l.cy]}function M(l,_){return _*l.radius}$.exports={smith:t,reactanceArc:function(l,_,m,f){var o=A(l,t([m,_])),e=o[0],i=o[1],r=A(l,t([f,_])),n=r[0],s=r[1];if(_===0)return["M"+e+","+i,"L"+n+","+s].join(" ");var a=M(l,1/Math.abs(_));return["M"+e+","+i,"A"+a+","+a+" 0 0,"+(_<0?1:0)+" "+n+","+s].join(" ")},resistanceArc:function(l,_,m,f){var o=M(l,1/(_+1)),e=A(l,t([_,m])),i=e[0],r=e[1],n=A(l,t([_,f])),s=n[0],a=n[1];if(P(m)!==P(f)){var u=A(l,t([_,0]));return["M"+i+","+r,"A"+o+","+o+" 0 0,"+(0<m?0:1)+" "+u[0]+","+u[1],"A"+o+","+o+" 0 0,"+(f<0?0:1)+s+","+a].join(" ")}return["M"+i+","+r,"A"+o+","+o+" 0 0,"+(f<m?0:1)+" "+s+","+a].join(" ")},smithTransform:A}},7504:function($,P,t){var A=t(27659).AU,M=t(71828).counterRegex,l=t(77997),_=t(39779),m=_.attr,f=_.name,o=M(f),e={};e[m]={valType:"subplotid",dflt:f,editType:"calc"},$.exports={attr:m,name:f,idRoot:f,idRegex:o,attrRegex:o,attributes:e,layoutAttributes:t(33419),supplyLayoutDefaults:t(9558),plot:function(i){for(var r=i._fullLayout,n=i.calcdata,s=r._subplots[f],a=0;a<s.length;a++){var u=s[a],p=A(n,f,u),c=r[u]._subplot;c||(c=l(i,u,!0),r[u]._subplot=c),c.plot(p,r,i._promises)}},clean:function(i,r,n,s){for(var a=s._subplots[f]||[],u=0;u<a.length;u++){var p=a[u],c=s[p]._subplot;if(!r[p]&&c)for(var x in c.framework.remove(),c.clipPaths)c.clipPaths[x].remove()}},toSVG:t(93612).toSVG}},33419:function($,P,t){var A=t(22399),M=t(13838),l=t(27670).Y,_=t(71828).extendFlat,m=t(30962).overrideAll,f=m({color:M.color,showline:_({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:_({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash},"plot","from-root"),o=m({ticklen:M.ticklen,tickwidth:_({},M.tickwidth,{dflt:2}),tickcolor:M.tickcolor,showticklabels:M.showticklabels,labelalias:M.labelalias,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,tickfont:M.tickfont,tickformat:M.tickformat,hoverformat:M.hoverformat,layer:M.layer},"plot","from-root"),e=_({visible:_({},M.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:_({},M.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},f,o),i=_({visible:_({},M.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:M.ticks,editType:"calc"},f,o);$.exports={domain:l({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:A.background},realaxis:e,imaginaryaxis:i,editType:"calc"}},9558:function($,P,t){var A,M,l,_=t(71828),m=t(7901),f=t(44467),o=t(49119),e=t(27659).NG,i=t(89426),r=t(96115),n=t(92128),s=t(21994),a=t(33419),u=t(39779),p=u.axisNames,c=(A=function(g){return g.slice().reverse().map(function(h){return-h}).concat([0]).concat(g)},M=String,l={},function(g){var h=M?M(g):g;if(h in l)return l[h];var b=A(g);return l[h]=b,b});function x(g,h,b,v){var y=b("bgcolor");v.bgColor=m.combine(y,v.paper_bgcolor);var w,d=e(v.fullData,u.name,v.id),S=v.layoutOut;function T(V,W){return b(w+"."+V,W)}for(var E=0;E<p.length;E++){w=p[E],_.isPlainObject(g[w])||(g[w]={});var C=g[w],L=f.newContainer(h,w);L._id=L._name=w,L._attr=v.id+"."+w,L._traceIndices=d.map(function(V){return V._expandedIndex});var O=T("visible");if(L.type="linear",s(L,S),i(C,L,T,L.type),O){var z,G,I,H,N=w==="realaxis";N&&T("side"),N?T("tickvals"):T("tickvals",c(h.realaxis.tickvals||a.realaxis.tickvals.dflt));var F=v.font||{};O&&(G=(z=T("color"))===C.color?z:F.color,I=F.size,H=F.family),r(C,L,T,L.type,{noTicklabelstep:!0,noAng:!N,noExp:!0,font:{color:G,size:I,family:H}}),_.coerce2(g,h,a,w+".ticklen"),_.coerce2(g,h,a,w+".tickwidth"),_.coerce2(g,h,a,w+".tickcolor",h.color),T("ticks")||(delete h[w].ticklen,delete h[w].tickwidth,delete h[w].tickcolor),n(C,L,T,{dfltColor:z,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:a[w]}),T("layer")}T("hoverformat"),delete L.type,L._input=C}}$.exports=function(g,h,b){o(g,h,b,{noUirevision:!0,type:u.name,attributes:a,handleDefaults:x,font:h.font,paper_bgcolor:h.paper_bgcolor,fullData:b,layoutOut:h})}},49119:function($,P,t){var A=t(71828),M=t(44467),l=t(27670).c;$.exports=function(_,m,f,o){var e,i,r=o.type,n=o.attributes,s=o.handleDefaults,a=o.partition||"x",u=m._subplots[r],p=u.length,c=p&&u[0].replace(/\d+$/,"");function x(v,y){return A.coerce(e,i,n,v,y)}for(var g=0;g<p;g++){var h=u[g];e=_[h]?_[h]:_[h]={},i=M.newContainer(m,h,c),o.noUirevision||x("uirevision",m.uirevision);var b={};b[a]=[g/p,(g+1)/p],l(i,m,x,b),o.id=h,s(e,i,x,o)}}},5386:function($,P,t){var A=t(31562);function M(l){var _=l.description?" "+l.description:"",m=l.keys||[];if(m.length>0){for(var f=[],o=0;o<m.length;o++)f[o]="`"+m[o]+"`";_+="Finally, the template string has access to ",_=m.length===1?_+"variable "+f[0]:_+"variables "+f.slice(0,-1).join(", ")+" and "+f.slice(-1)+"."}return _}A.FORMAT_LINK,A.DATE_FORMAT_LINK,P.fF=function(l,_){l=l||{},M(_=_||{});var m={valType:"string",dflt:"",editType:l.editType||"none"};return l.arrayOk!==!1&&(m.arrayOk=!0),m},P.si=function(l,_){l=l||{},M(_=_||{});var m={valType:"string",dflt:"",editType:l.editType||"calc"};return l.arrayOk!==!1&&(m.arrayOk=!0),m},P.R=function(l,_){return _=_||{},(l=l||{}).newshape,M(_),{valType:"string",dflt:"",editType:l.editType||"arraydraw"}}},61639:function($,P,t){var A=t(64380),M=t(27659).AU,l=t(71828).counterRegex,_="ternary";P.name=_;var m=P.attr="subplot";P.idRoot=_,P.idRegex=P.attrRegex=l(_),(P.attributes={})[m]={valType:"subplotid",dflt:"ternary",editType:"calc"},P.layoutAttributes=t(81367),P.supplyLayoutDefaults=t(25369),P.plot=function(f){for(var o=f._fullLayout,e=f.calcdata,i=o._subplots[_],r=0;r<i.length;r++){var n=i[r],s=M(e,_,n),a=o[n]._subplot;a||(a=new A({id:n,graphDiv:f,container:o._ternarylayer.node()},o),o[n]._subplot=a),a.plot(s,o,f._promises)}},P.clean=function(f,o,e,i){for(var r=i._subplots[_]||[],n=0;n<r.length;n++){var s=r[n],a=i[s]._subplot;!o[s]&&a&&(a.plotContainer.remove(),a.clipDef.remove(),a.clipDefRelative.remove(),a.layers["a-title"].remove(),a.layers["b-title"].remove(),a.layers["c-title"].remove())}}},81367:function($,P,t){var A=t(22399),M=t(27670).Y,l=t(13838),_=t(30962).overrideAll,m=t(1426).extendFlat,f={title:{text:l.title.text,font:l.title.font},color:l.color,tickmode:l.minor.tickmode,nticks:m({},l.nticks,{dflt:6,min:1}),tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:l.ticks,ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,ticklabelstep:l.ticklabelstep,showticklabels:l.showticklabels,labelalias:l.labelalias,showtickprefix:l.showtickprefix,tickprefix:l.tickprefix,showticksuffix:l.showticksuffix,ticksuffix:l.ticksuffix,showexponent:l.showexponent,exponentformat:l.exponentformat,minexponent:l.minexponent,separatethousands:l.separatethousands,tickfont:l.tickfont,tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,hoverformat:l.hoverformat,showline:m({},l.showline,{dflt:!0}),linecolor:l.linecolor,linewidth:l.linewidth,showgrid:m({},l.showgrid,{dflt:!0}),gridcolor:l.gridcolor,gridwidth:l.gridwidth,griddash:l.griddash,layer:l.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:l._deprecated.title,titlefont:l._deprecated.titlefont}},o=$.exports=_({domain:M({name:"ternary"}),bgcolor:{valType:"color",dflt:A.background},sum:{valType:"number",dflt:1,min:0},aaxis:f,baxis:f,caxis:f},"plot","from-root");o.uirevision={valType:"any",editType:"none"},o.aaxis.uirevision=o.baxis.uirevision=o.caxis.uirevision={valType:"any",editType:"none"}},25369:function($,P,t){var A=t(7901),M=t(44467),l=t(71828),_=t(49119),m=t(96115),f=t(89426),o=t(38701),e=t(26218),i=t(92128),r=t(81367),n=["aaxis","baxis","caxis"];function s(u,p,c,x){var g,h,b,v=c("bgcolor"),y=c("sum");x.bgColor=A.combine(v,x.paper_bgcolor);for(var w=0;w<n.length;w++)h=u[g=n[w]]||{},(b=M.newContainer(p,g))._name=g,a(h,b,x,p);var d=p.aaxis,S=p.baxis,T=p.caxis;d.min+S.min+T.min>=y&&(d.min=0,S.min=0,T.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function a(u,p,c,x){var g=r[p._name];function h(S,T){return l.coerce(u,p,g,S,T)}h("uirevision",x.uirevision),p.type="linear";var b=h("color"),v=b!==g.color.dflt?b:c.font.color,y=p._name.charAt(0).toUpperCase(),w="Component "+y,d=h("title.text",w);p._hovertitle=d===w?d:y,l.coerceFont(h,"title.font",{family:c.font.family,size:l.bigFont(c.font.size),color:v}),h("min"),e(u,p,h,"linear"),f(u,p,h,"linear"),m(u,p,h,"linear"),o(u,p,h,{outerTicks:!0}),h("showticklabels")&&(l.coerceFont(h,"tickfont",{family:c.font.family,size:c.font.size,color:v}),h("tickangle"),h("tickformat")),i(u,p,h,{dfltColor:b,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),h("hoverformat"),h("layer")}$.exports=function(u,p,c){_(u,p,c,{type:"ternary",attributes:r,handleDefaults:s,font:p.font,paper_bgcolor:p.paper_bgcolor})}},64380:function($,P,t){var A=t(39898),M=t(84267),l=t(73972),_=t(71828),m=_.strTranslate,f=_._,o=t(7901),e=t(91424),i=t(21994),r=t(1426).extendFlat,n=t(74875),s=t(89298),a=t(28569),u=t(30211),p=t(64505),c=p.freeMode,x=p.rectMode,g=t(92998),h=t(47322).prepSelect,b=t(47322).selectOnClick,v=t(47322).clearOutline,y=t(47322).clearSelectionsCache,w=t(85555);function d(I,H){this.id=I.id,this.graphDiv=I.graphDiv,this.init(H),this.makeFramework(H),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}$.exports=d;var S=d.prototype;S.init=function(I){this.container=I._ternarylayer,this.defs=I._defs,this.layoutId=I._uid,this.traceHash={},this.layers={}},S.plot=function(I,H){var N=this,F=H[N.id],V=H._size;N._hasClipOnAxisFalse=!1;for(var W=0;W<I.length;W++)if(I[W][0].trace.cliponaxis===!1){N._hasClipOnAxisFalse=!0;break}N.updateLayers(F),N.adjustLayout(F,V),n.generalUpdatePerTraceModule(N.graphDiv,N,I,F),N.layers.plotbg.select("path").call(o.fill,F.bgcolor)},S.makeFramework=function(I){var H=this,N=H.graphDiv,F=I[H.id],V=H.clipId="clip"+H.layoutId+H.id,W=H.clipIdRelative="clip-relative"+H.layoutId+H.id;H.clipDef=_.ensureSingleById(I._clips,"clipPath",V,function(te){te.append("path").attr("d","M0,0Z")}),H.clipDefRelative=_.ensureSingleById(I._clips,"clipPath",W,function(te){te.append("path").attr("d","M0,0Z")}),H.plotContainer=_.ensureSingle(H.container,"g",H.id),H.updateLayers(F),e.setClipUrl(H.layers.backplot,V,N),e.setClipUrl(H.layers.grids,V,N)},S.updateLayers=function(I){var H=this.layers,N=["draglayer","plotbg","backplot","grids"];I.aaxis.layer==="below traces"&&N.push("aaxis","aline"),I.baxis.layer==="below traces"&&N.push("baxis","bline"),I.caxis.layer==="below traces"&&N.push("caxis","cline"),N.push("frontplot"),I.aaxis.layer==="above traces"&&N.push("aaxis","aline"),I.baxis.layer==="above traces"&&N.push("baxis","bline"),I.caxis.layer==="above traces"&&N.push("caxis","cline");var F=this.plotContainer.selectAll("g.toplevel").data(N,String),V=["agrid","bgrid","cgrid"];F.enter().append("g").attr("class",function(W){return"toplevel "+W}).each(function(W){var te=A.select(this);H[W]=te,W==="frontplot"?te.append("g").classed("scatterlayer",!0):W==="backplot"?te.append("g").classed("maplayer",!0):W==="plotbg"?te.append("path").attr("d","M0,0Z"):W==="aline"||W==="bline"||W==="cline"?te.append("path"):W==="grids"&&V.forEach(function(Q){H[Q]=te.append("g").classed("grid "+Q,!0)})}),F.order()};var T=Math.sqrt(4/3);S.adjustLayout=function(I,H){var N,F,V,W,te,Q,X=this,q=I.domain,Z=(q.x[0]+q.x[1])/2,J=(q.y[0]+q.y[1])/2,ne=q.x[1]-q.x[0],re=q.y[1]-q.y[0],ae=ne*H.w,ue=re*H.h,he=I.sum,de=I.aaxis.min,xe=I.baxis.min,me=I.caxis.min;ae>T*ue?V=(W=ue)*T:W=(V=ae)/T,te=ne*V/ae,Q=re*W/ue,N=H.l+H.w*Z-V/2,F=H.t+H.h*(1-J)-W/2,X.x0=N,X.y0=F,X.w=V,X.h=W,X.sum=he,X.xaxis={type:"linear",range:[de+2*me-he,he-de-2*xe],domain:[Z-te/2,Z+te/2],_id:"x"},i(X.xaxis,X.graphDiv._fullLayout),X.xaxis.setScale(),X.xaxis.isPtWithinRange=function(Ie){return Ie.a>=X.aaxis.range[0]&&Ie.a<=X.aaxis.range[1]&&Ie.b>=X.baxis.range[1]&&Ie.b<=X.baxis.range[0]&&Ie.c>=X.caxis.range[1]&&Ie.c<=X.caxis.range[0]},X.yaxis={type:"linear",range:[de,he-xe-me],domain:[J-Q/2,J+Q/2],_id:"y"},i(X.yaxis,X.graphDiv._fullLayout),X.yaxis.setScale(),X.yaxis.isPtWithinRange=function(){return!0};var ve=X.yaxis.domain[0],Le=X.aaxis=r({},I.aaxis,{range:[de,he-xe-me],side:"left",tickangle:(+I.aaxis.tickangle||0)-30,domain:[ve,ve+Q*T],anchor:"free",position:0,_id:"y",_length:V});i(Le,X.graphDiv._fullLayout),Le.setScale();var Ae=X.baxis=r({},I.baxis,{range:[he-de-me,xe],side:"bottom",domain:X.xaxis.domain,anchor:"free",position:0,_id:"x",_length:V});i(Ae,X.graphDiv._fullLayout),Ae.setScale();var we=X.caxis=r({},I.caxis,{range:[he-de-xe,me],side:"right",tickangle:(+I.caxis.tickangle||0)+30,domain:[ve,ve+Q*T],anchor:"free",position:0,_id:"y",_length:V});i(we,X.graphDiv._fullLayout),we.setScale();var se="M"+N+","+(F+W)+"h"+V+"l-"+V/2+",-"+W+"Z";X.clipDef.select("path").attr("d",se),X.layers.plotbg.select("path").attr("d",se);var oe="M0,"+W+"h"+V+"l-"+V/2+",-"+W+"Z";X.clipDefRelative.select("path").attr("d",oe);var fe=m(N,F);X.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",fe),X.clipDefRelative.select("path").attr("transform",null);var Se=m(N-Ae._offset,F+W);X.layers.baxis.attr("transform",Se),X.layers.bgrid.attr("transform",Se);var Me=m(N+V/2,F)+"rotate(30)"+m(0,-Le._offset);X.layers.aaxis.attr("transform",Me),X.layers.agrid.attr("transform",Me);var be=m(N+V/2,F)+"rotate(-30)"+m(0,-we._offset);X.layers.caxis.attr("transform",be),X.layers.cgrid.attr("transform",be),X.drawAxes(!0),X.layers.aline.select("path").attr("d",Le.showline?"M"+N+","+(F+W)+"l"+V/2+",-"+W:"M0,0").call(o.stroke,Le.linecolor||"#000").style("stroke-width",(Le.linewidth||0)+"px"),X.layers.bline.select("path").attr("d",Ae.showline?"M"+N+","+(F+W)+"h"+V:"M0,0").call(o.stroke,Ae.linecolor||"#000").style("stroke-width",(Ae.linewidth||0)+"px"),X.layers.cline.select("path").attr("d",we.showline?"M"+(N+V/2)+","+F+"l"+V/2+","+W:"M0,0").call(o.stroke,we.linecolor||"#000").style("stroke-width",(we.linewidth||0)+"px"),X.graphDiv._context.staticPlot||X.initInteractions(),e.setClipUrl(X.layers.frontplot,X._hasClipOnAxisFalse?null:X.clipId,X.graphDiv)},S.drawAxes=function(I){var H=this,N=H.graphDiv,F=H.id.substr(7)+"title",V=H.layers,W=H.aaxis,te=H.baxis,Q=H.caxis;if(H.drawAx(W),H.drawAx(te),H.drawAx(Q),I){var X=Math.max(W.showticklabels?W.tickfont.size/2:0,(Q.showticklabels?.75*Q.tickfont.size:0)+(Q.ticks==="outside"?.87*Q.ticklen:0)),q=(te.showticklabels?te.tickfont.size:0)+(te.ticks==="outside"?te.ticklen:0)+3;V["a-title"]=g.draw(N,"a"+F,{propContainer:W,propName:H.id+".aaxis.title",placeholder:f(N,"Click to enter Component A title"),attributes:{x:H.x0+H.w/2,y:H.y0-W.title.font.size/3-X,"text-anchor":"middle"}}),V["b-title"]=g.draw(N,"b"+F,{propContainer:te,propName:H.id+".baxis.title",placeholder:f(N,"Click to enter Component B title"),attributes:{x:H.x0-q,y:H.y0+H.h+.83*te.title.font.size+q,"text-anchor":"middle"}}),V["c-title"]=g.draw(N,"c"+F,{propContainer:Q,propName:H.id+".caxis.title",placeholder:f(N,"Click to enter Component C title"),attributes:{x:H.x0+H.w+q,y:H.y0+H.h+.83*Q.title.font.size+q,"text-anchor":"middle"}})}},S.drawAx=function(I){var H,N=this,F=N.graphDiv,V=I._name,W=V.charAt(0),te=I._id,Q=N.layers[V],X=W+"tickLayout",q=(H=I).ticks+String(H.ticklen)+String(H.showticklabels);N[X]!==q&&(Q.selectAll("."+te+"tick").remove(),N[X]=q),I.setScale();var Z=s.calcTicks(I),J=s.clipEnds(I,Z),ne=s.makeTransTickFn(I),re=s.getTickSigns(I)[2],ae=_.deg2rad(30),ue=re*(I.linewidth||1)/2,he=re*I.ticklen,de=N.w,xe=N.h,me=W==="b"?"M0,"+ue+"l"+Math.sin(ae)*he+","+Math.cos(ae)*he:"M"+ue+",0l"+Math.cos(ae)*he+","+-Math.sin(ae)*he,ve={a:"M0,0l"+xe+",-"+de/2,b:"M0,0l-"+de/2+",-"+xe,c:"M0,0l-"+xe+","+de/2}[W];s.drawTicks(F,I,{vals:I.ticks==="inside"?J:Z,layer:Q,path:me,transFn:ne,crisp:!1}),s.drawGrid(F,I,{vals:J,layer:N.layers[W+"grid"],path:ve,transFn:ne,crisp:!1}),s.drawLabels(F,I,{vals:Z,layer:Q,transFn:ne,labelFns:s.makeLabelFns(I,0,30)})};var E=w.MINZOOM/2+.87,C="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(.87*E+4.5)+"l2.6,1.5l-"+E/2+","+.87*E+"Z",L="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-2.6,1.5l"+E/2+","+.87*E+"Z",O="m0,1l"+E/2+","+.87*E+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(.87*E+4.5)+"l-"+(E/2+2.6)+","+(.87*E+4.5)+"l2.6,1.5l"+E/2+",-"+.87*E+"Z",z=!0;function G(I){A.select(I).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}S.clearOutline=function(){y(this.dragOptions),v(this.dragOptions.gd)},S.initInteractions=function(){var I,H,N,F,V,W,te,Q,X,q,Z,J,ne=this,re=ne.layers.plotbg.select("path").node(),ae=ne.graphDiv,ue=ae._fullLayout._zoomlayer;function he(oe){var fe={};return fe[ne.id+".aaxis.min"]=oe.a,fe[ne.id+".baxis.min"]=oe.b,fe[ne.id+".caxis.min"]=oe.c,fe}function de(oe,fe){var Se=ae._fullLayout.clickmode;G(ae),oe===2&&(ae.emit("plotly_doubleclick",null),l.call("_guiRelayout",ae,he({a:0,b:0,c:0}))),Se.indexOf("select")>-1&&oe===1&&b(fe,ae,[ne.xaxis],[ne.yaxis],ne.id,ne.dragOptions),Se.indexOf("event")>-1&&u.click(ae,fe,ne.id)}function xe(oe,fe){return 1-fe/ne.h}function me(oe,fe){return 1-(oe+(ne.h-fe)/Math.sqrt(3))/ne.w}function ve(oe,fe){return(oe-(ne.h-fe)/Math.sqrt(3))/ne.w}function Le(oe,fe){var Se=N+oe*I,Me=F+fe*H,be=Math.max(0,Math.min(1,xe(0,F),xe(0,Me))),Ie=Math.max(0,Math.min(1,me(N,F),me(Se,Me))),Be=Math.max(0,Math.min(1,ve(N,F),ve(Se,Me))),ce=(be/2+Be)*ne.w,Te=(1-be/2-Ie)*ne.w,ye=(ce+Te)/2,Pe=Te-ce,Re=(1-be)*ne.h,ze=Re-Pe/T;Pe<w.MINZOOM?(te=V,Z.attr("d",X),J.attr("d","M0,0Z")):(te={a:V.a+be*W,b:V.b+Ie*W,c:V.c+Be*W},Z.attr("d",X+"M"+ce+","+Re+"H"+Te+"L"+ye+","+ze+"L"+ce+","+Re+"Z"),J.attr("d","M"+N+","+F+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+ce+","+Re+C+"M"+Te+","+Re+L+"M"+ye+","+ze+O)),q||(Z.transition().style("fill",Q>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),J.transition().style("opacity",1).duration(200),q=!0),ae.emit("plotly_relayouting",he(te))}function Ae(){G(ae),te!==V&&(l.call("_guiRelayout",ae,he(te)),z&&ae.data&&ae._context.showTips&&(_.notifier(f(ae,"Double-click to zoom back out"),"long"),z=!1))}function we(oe,fe){var Se=oe/ne.xaxis._m,Me=fe/ne.yaxis._m,be=[(te={a:V.a-Me,b:V.b+(Se+Me)/2,c:V.c-(Se-Me)/2}).a,te.b,te.c].sort(_.sorterAsc),Ie=be.indexOf(te.a),Be=be.indexOf(te.b),ce=be.indexOf(te.c);be[0]<0&&(be[1]+be[0]/2<0?(be[2]+=be[0]+be[1],be[0]=be[1]=0):(be[2]+=be[0]/2,be[1]+=be[0]/2,be[0]=0),te={a:be[Ie],b:be[Be],c:be[ce]},fe=(V.a-te.a)*ne.yaxis._m,oe=(V.c-te.c-V.b+te.b)*ne.xaxis._m);var Te=m(ne.x0+oe,ne.y0+fe);ne.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te);var ye=m(-oe,-fe);ne.clipDefRelative.select("path").attr("transform",ye),ne.aaxis.range=[te.a,ne.sum-te.b-te.c],ne.baxis.range=[ne.sum-te.a-te.c,te.b],ne.caxis.range=[ne.sum-te.a-te.b,te.c],ne.drawAxes(!1),ne._hasClipOnAxisFalse&&ne.plotContainer.select(".scatterlayer").selectAll(".trace").call(e.hideOutsideRangePoints,ne),ae.emit("plotly_relayouting",he(te))}function se(){l.call("_guiRelayout",ae,he(te))}this.dragOptions={element:re,gd:ae,plotinfo:{id:ne.id,domain:ae._fullLayout[ne.id].domain,xaxis:ne.xaxis,yaxis:ne.yaxis},subplot:ne.id,prepFn:function(oe,fe,Se){ne.dragOptions.xaxes=[ne.xaxis],ne.dragOptions.yaxes=[ne.yaxis],I=ae._fullLayout._invScaleX,H=ae._fullLayout._invScaleY;var Me=ne.dragOptions.dragmode=ae._fullLayout.dragmode;c(Me)?ne.dragOptions.minDrag=1:ne.dragOptions.minDrag=void 0,Me==="zoom"?(ne.dragOptions.moveFn=Le,ne.dragOptions.clickFn=de,ne.dragOptions.doneFn=Ae,function(be,Ie,Be){var ce=re.getBoundingClientRect();N=Ie-ce.left,F=Be-ce.top,ae._fullLayout._calcInverseTransform(ae);var Te=ae._fullLayout._invTransform,ye=_.apply3DTransform(Te)(N,F);N=ye[0],F=ye[1],V={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},te=V,W=ne.aaxis.range[1]-V.a,Q=M(ne.graphDiv._fullLayout[ne.id].bgcolor).getLuminance(),X="M0,"+ne.h+"L"+ne.w/2+", 0L"+ne.w+","+ne.h+"Z",q=!1,Z=ue.append("path").attr("class","zoombox").attr("transform",m(ne.x0,ne.y0)).style({fill:Q>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",X),J=ue.append("path").attr("class","zoombox-corners").attr("transform",m(ne.x0,ne.y0)).style({fill:o.background,stroke:o.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),ne.clearOutline(ae)}(0,fe,Se)):Me==="pan"?(ne.dragOptions.moveFn=we,ne.dragOptions.clickFn=de,ne.dragOptions.doneFn=se,V={a:ne.aaxis.range[0],b:ne.baxis.range[1],c:ne.caxis.range[1]},te=V,ne.clearOutline(ae)):(x(Me)||c(Me))&&h(oe,fe,Se,ne.dragOptions,Me)}},re.onmousemove=function(oe){u.hover(ae,oe,ne.id),ae._fullLayout._lasthover=re,ae._fullLayout._hoversubplot=ne.id},re.onmouseout=function(oe){ae._dragging||a.unhover(ae,oe)},a.init(this.dragOptions)}},73972:function($,P,t){var A=t(47769),M=t(64213),l=t(75138),_=t(41965),m=t(24401).addStyleRule,f=t(1426),o=t(9012),e=t(10820),i=f.extendFlat,r=f.extendDeepAll;function n(b){var v=b.name,y=b.categories,w=b.meta;if(P.modules[v])A.log("Type "+v+" already registered");else{P.subplotsRegistry[b.basePlotModule.name]||function(z){var G=z.name;if(P.subplotsRegistry[G])A.log("Plot type "+G+" already registered.");else for(var I in p(z),P.subplotsRegistry[G]=z,P.componentsRegistry)g(I,z.name)}(b.basePlotModule);for(var d={},S=0;S<y.length;S++)d[y[S]]=!0,P.allCategories[y[S]]=!0;for(var T in P.modules[v]={_module:b,categories:d},w&&Object.keys(w).length&&(P.modules[v].meta=w),P.allTypes.push(v),P.componentsRegistry)c(T,v);b.layoutAttributes&&i(P.traceLayoutAttributes,b.layoutAttributes);var E=b.basePlotModule,C=E.name;if(C==="mapbox"){var L=E.constants.styleRules;for(var O in L)m(".js-plotly-plot .plotly .mapboxgl-"+O,L[O])}C!=="geo"&&C!=="mapbox"||window.PlotlyGeoAssets!==void 0||(window.PlotlyGeoAssets={topojson:{}})}}function s(b){if(typeof b.name!="string")throw new Error("Component module *name* must be a string.");var v=b.name;for(var y in P.componentsRegistry[v]=b,b.layoutAttributes&&(b.layoutAttributes._isLinkedToArray&&l(P.layoutArrayContainers,v),p(b)),P.modules)c(v,y);for(var w in P.subplotsRegistry)g(v,w);for(var d in P.transformsRegistry)x(v,d);b.schema&&b.schema.layout&&r(e,b.schema.layout)}function a(b){if(typeof b.name!="string")throw new Error("Transform module *name* must be a string.");var v="Transform module "+b.name,y=typeof b.transform=="function",w=typeof b.calcTransform=="function";if(!y&&!w)throw new Error(v+" is missing a *transform* or *calcTransform* method.");for(var d in y&&w&&A.log([v+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),_(b.attributes)||A.log(v+" registered without an *attributes* object."),typeof b.supplyDefaults!="function"&&A.log(v+" registered without a *supplyDefaults* method."),P.transformsRegistry[b.name]=b,P.componentsRegistry)x(d,b.name)}function u(b){var v=b.name,y=v.split("-")[0],w=b.dictionary,d=b.format,S=w&&Object.keys(w).length,T=d&&Object.keys(d).length,E=P.localeRegistry,C=E[v];if(C||(E[v]=C={}),y!==v){var L=E[y];L||(E[y]=L={}),S&&L.dictionary===C.dictionary&&(L.dictionary=w),T&&L.format===C.format&&(L.format=d)}S&&(C.dictionary=w),T&&(C.format=d)}function p(b){if(b.layoutAttributes){var v=b.layoutAttributes._arrayAttrRegexps;if(v)for(var y=0;y<v.length;y++)l(P.layoutArrayRegexes,v[y])}}function c(b,v){var y=P.componentsRegistry[b].schema;if(y&&y.traces){var w=y.traces[v];w&&r(P.modules[v]._module.attributes,w)}}function x(b,v){var y=P.componentsRegistry[b].schema;if(y&&y.transforms){var w=y.transforms[v];w&&r(P.transformsRegistry[v].attributes,w)}}function g(b,v){var y=P.componentsRegistry[b].schema;if(y&&y.subplots){var w=P.subplotsRegistry[v],d=w.layoutAttributes,S=w.attr==="subplot"?w.name:w.attr;Array.isArray(S)&&(S=S[0]);var T=y.subplots[S];d&&T&&r(d,T)}}function h(b){return typeof b=="object"&&(b=b.type),b}P.modules={},P.allCategories={},P.allTypes=[],P.subplotsRegistry={},P.transformsRegistry={},P.componentsRegistry={},P.layoutArrayContainers=[],P.layoutArrayRegexes=[],P.traceLayoutAttributes={},P.localeRegistry={},P.apiMethodRegistry={},P.collectableSubplotTypes=null,P.register=function(b){if(P.collectableSubplotTypes=null,!b)throw new Error("No argument passed to Plotly.register.");b&&!Array.isArray(b)&&(b=[b]);for(var v=0;v<b.length;v++){var y=b[v];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":n(y);break;case"transform":a(y);break;case"component":s(y);break;case"locale":u(y);break;case"apiMethod":var w=y.name;P.apiMethodRegistry[w]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},P.getModule=function(b){var v=P.modules[h(b)];return!!v&&v._module},P.traceIs=function(b,v){if((b=h(b))==="various")return!1;var y=P.modules[b];return y||(b&&A.log("Unrecognized trace type "+b+"."),y=P.modules[o.type.dflt]),!!y.categories[v]},P.getTransformIndices=function(b,v){for(var y=[],w=b.transforms||[],d=0;d<w.length;d++)w[d].type===v&&y.push(d);return y},P.hasTransform=function(b,v){for(var y=b.transforms||[],w=0;w<y.length;w++)if(y[w].type===v)return!0;return!1},P.getComponentMethod=function(b,v){var y=P.componentsRegistry[b];return y&&y[v]||M},P.call=function(){var b=arguments[0],v=[].slice.call(arguments,1);return P.apiMethodRegistry[b].apply(null,v)}},61914:function($,P,t){var A=t(73972),M=t(71828),l=M.extendFlat,_=M.extendDeep;function m(f){var o;switch(f){case"themes__thumb":o={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":o={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:o={}}return o}$.exports=function(f,o){var e,i,r=f.data,n=f.layout,s=_([],r),a=_({},n,m(o.tileClass)),u=f._context||{};if(o.width&&(a.width=o.width),o.height&&(a.height=o.height),o.tileClass==="thumbnail"||o.tileClass==="themes__thumb"){a.annotations=[];var p=Object.keys(a);for(e=0;e<p.length;e++)i=p[e],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(a[p[e]].title={text:""});for(e=0;e<s.length;e++){var c=s[e];c.showscale=!1,c.marker&&(c.marker.showscale=!1),A.traceIs(c,"pie-like")&&(c.textposition="none")}}if(Array.isArray(o.annotations))for(e=0;e<o.annotations.length;e++)a.annotations.push(o.annotations[e]);var x=Object.keys(a).filter(function(y){return y.match(/^scene\d*$/)});if(x.length){var g={};for(o.tileClass==="thumbnail"&&(g={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),e=0;e<x.length;e++){var h=a[x[e]];h.xaxis||(h.xaxis={}),h.yaxis||(h.yaxis={}),h.zaxis||(h.zaxis={}),l(h.xaxis,g),l(h.yaxis,g),l(h.zaxis,g),h._scene=null}}var b=document.createElement("div");o.tileClass&&(b.className=o.tileClass);var v={gd:b,td:b,layout:a,data:s,config:{staticPlot:o.staticPlot===void 0||o.staticPlot,plotGlPixelRatio:o.plotGlPixelRatio===void 0?2:o.plotGlPixelRatio,displaylogo:o.displaylogo||!1,showLink:o.showLink||!1,showTips:o.showTips||!1,mapboxAccessToken:u.mapboxAccessToken}};return o.setBackground!=="transparent"&&(v.config.setBackground=o.setBackground||"opaque"),v.gd.defaultLayout=m(o.tileClass),v}},7239:function($,P,t){var A=t(71828),M=t(403),l=t(22435),_=t(25095);$.exports=function(m,f){var o;return A.isPlainObject(m)||(o=A.getGraphDiv(m)),(f=f||{}).format=f.format||"png",f.width=f.width||null,f.height=f.height||null,f.imageDataOnly=!0,new Promise(function(e,i){o&&o._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),A.isIE()&&f.format!=="svg"&&i(new Error(_.MSG_IE_BAD_FORMAT)),o&&(o._snapshotInProgress=!0);var r=M(m,f),n=f.filename||m.fn||"newplot";n+="."+f.format.replace("-","."),r.then(function(s){return o&&(o._snapshotInProgress=!1),l(s,n,f.format)}).then(function(s){e(s)}).catch(function(s){o&&(o._snapshotInProgress=!1),i(s)})})}},22435:function($,P,t){var A=t(71828),M=t(25095);$.exports=function(l,_,m){var f=document.createElement("a"),o="download"in f;return new Promise(function(e,i){var r,n;if(A.isIE())return r=M.createBlob(l,"svg"),window.navigator.msSaveBlob(r,_),r=null,e(_);if(o)return r=M.createBlob(l,m),n=M.createObjectURL(r),f.href=n,f.download=_,document.body.appendChild(f),f.click(),document.body.removeChild(f),M.revokeObjectURL(n),r=null,e(_);if(A.isSafari()){var s=m==="svg"?",":";base64,";return M.octetStream(s+encodeURIComponent(l)),e(_)}i(new Error("download error"))})}},25095:function($,P,t){var A=t(73972);P.getDelay=function(l){return l._has&&(l._has("gl3d")||l._has("gl2d")||l._has("mapbox"))?500:0},P.getRedrawFunc=function(l){return function(){A.getComponentMethod("colorbar","draw")(l)}},P.encodeSVG=function(l){return"data:image/svg+xml,"+encodeURIComponent(l)},P.encodeJSON=function(l){return"data:application/json,"+encodeURIComponent(l)};var M=window.URL||window.webkitURL;P.createObjectURL=function(l){return M.createObjectURL(l)},P.revokeObjectURL=function(l){return M.revokeObjectURL(l)},P.createBlob=function(l,_){if(_==="svg")return new window.Blob([l],{type:"image/svg+xml;charset=utf-8"});if(_==="full-json")return new window.Blob([l],{type:"application/json;charset=utf-8"});var m=function(f){for(var o=f.length,e=new ArrayBuffer(o),i=new Uint8Array(e),r=0;r<o;r++)i[r]=f.charCodeAt(r);return e}(window.atob(l));return new window.Blob([m],{type:"image/"+_})},P.octetStream=function(l){document.location.href="data:application/octet-stream"+l},P.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,P.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},44511:function($,P,t){var A=t(25095),M={getDelay:A.getDelay,getRedrawFunc:A.getRedrawFunc,clone:t(61914),toSVG:t(5900),svgToImg:t(70942),toImage:t(56395),downloadImage:t(7239)};$.exports=M},70942:function($,P,t){var A=t(71828),M=t(15398).EventEmitter,l=t(25095);$.exports=function(_){var m=_.emitter||new M,f=new Promise(function(o,e){var i=window.Image,r=_.svg,n=_.format||"png";if(A.isIE()&&n!=="svg"){var s=new Error(l.MSG_IE_BAD_FORMAT);return e(s),_.promise?f:m.emit("error",s)}var a,u,p=_.canvas,c=_.scale||1,x=_.width||300,g=_.height||150,h=c*x,b=c*g,v=p.getContext("2d",{willReadFrequently:!0}),y=new i;n==="svg"||A.isSafari()?u=l.encodeSVG(r):(a=l.createBlob(r,"svg"),u=l.createObjectURL(a)),p.width=h,p.height=b,y.onload=function(){var w;switch(a=null,l.revokeObjectURL(u),n!=="svg"&&v.drawImage(y,0,0,h,b),n){case"jpeg":w=p.toDataURL("image/jpeg");break;case"png":w=p.toDataURL("image/png");break;case"webp":w=p.toDataURL("image/webp");break;case"svg":w=u;break;default:var d="Image format is not jpeg, png, svg or webp.";if(e(new Error(d)),!_.promise)return m.emit("error",d)}o(w),_.promise||m.emit("success",w)},y.onerror=function(w){if(a=null,l.revokeObjectURL(u),e(w),!_.promise)return m.emit("error",w)},y.src=u});return _.promise?f:m}},56395:function($,P,t){var A=t(15398).EventEmitter,M=t(73972),l=t(71828),_=t(25095),m=t(61914),f=t(5900),o=t(70942);$.exports=function(e,i){var r=new A,n=m(e,{format:"png"}),s=n.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var a=_.getRedrawFunc(s);return M.call("_doPlot",s,n.data,n.layout,n.config).then(a).then(function(){var u=_.getDelay(s._fullLayout);setTimeout(function(){var p=f(s),c=document.createElement("canvas");c.id=l.randstr(),(r=o({format:i.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:c,emitter:r,svg:p})).clean=function(){s&&document.body.removeChild(s)}},u)}).catch(function(u){r.emit("error",u)}),r}},5900:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(7901),m=t(77922),f=/"/g,o="TOBESTRIPPED",e=new RegExp('("'+o+")|("+o+'")',"g");$.exports=function(i,r,n){var s,a=i._fullLayout,u=a._paper,p=a._toppaper,c=a.width,x=a.height;u.insert("rect",":first-child").call(l.setRect,0,0,c,x).call(_.fill,a.paper_bgcolor);var g=a._basePlotModules||[];for(s=0;s<g.length;s++){var h=g[s];h.toSVG&&h.toSVG(i)}if(p){var b=p.node().childNodes,v=Array.prototype.slice.call(b);for(s=0;s<v.length;s++){var y=v[s];y.childNodes.length&&u.node().appendChild(y)}}a._draggers&&a._draggers.remove(),u.node().style.background="",u.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var d=A.select(this);if(this.style.visibility!=="hidden"&&this.style.display!=="none"){d.style({visibility:null,display:null});var S=this.style.fontFamily;S&&S.indexOf('"')!==-1&&d.style("font-family",S.replace(f,o))}else d.remove()}),u.selectAll(".gradient_filled,.pattern_filled").each(function(){var d=A.select(this),S=this.style.fill;S&&S.indexOf("url(")!==-1&&d.style("fill",S.replace(f,o));var T=this.style.stroke;T&&T.indexOf("url(")!==-1&&d.style("stroke",T.replace(f,o))}),r!=="pdf"&&r!=="eps"||u.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),u.node().setAttributeNS(m.xmlns,"xmlns",m.svg),u.node().setAttributeNS(m.xmlns,"xmlns:xlink",m.xlink),r==="svg"&&n&&(u.attr("width",n*c),u.attr("height",n*x),u.attr("viewBox","0 0 "+c+" "+x));var w=new window.XMLSerializer().serializeToString(u.node());return w=(w=(w=function(d){var S=A.select("body").append("div").style({display:"none"}).html(""),T=d.replace(/(&[^;]*;)/gi,function(E){return E==="&lt;"?"&#60;":E==="&rt;"?"&#62;":E.indexOf("<")!==-1||E.indexOf(">")!==-1?"":S.html(E).text()});return S.remove(),T}(w)).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(e,"'"),M.isIE()&&(w=(w=(w=w.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),w}},75341:function($,P,t){var A=t(71828);$.exports=function(M,l){for(var _=0;_<M.length;_++)M[_].i=_;A.mergeArray(l.text,M,"tx"),A.mergeArray(l.hovertext,M,"htx");var m=l.marker;if(m){A.mergeArray(m.opacity,M,"mo",!0),A.mergeArray(m.color,M,"mc");var f=m.line;f&&(A.mergeArray(f.color,M,"mlc"),A.mergeArrayCastPositive(f.width,M,"mlw"))}}},1486:function($,P,t){var A=t(82196),M=t(12663).axisHoverFormat,l=t(5386).fF,_=t(5386).si,m=t(50693),f=t(41940),o=t(97313),e=t(79952).u,i=t(1426).extendFlat,r=f({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=i({},A.marker.line.width,{dflt:0}),s=i({width:n,editType:"calc"},m("marker.line")),a=i({line:s,editType:"calc"},m("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:e});$.exports={x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:A.text,texttemplate:_({editType:"plot"},{keys:o.eventDataKeys}),hovertext:A.hovertext,hovertemplate:l({},{keys:o.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},r,{}),insidetextfont:i({},r,{}),outsidetextfont:i({},r,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},A.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:a,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:{marker:{opacity:A.selected.marker.opacity,color:A.selected.marker.color,editType:"style"},textfont:A.selected.textfont,editType:"style"},unselected:{marker:{opacity:A.unselected.marker.opacity,color:A.unselected.marker.color,editType:"style"},textfont:A.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},92290:function($,P,t){var A=t(89298),M=t(42973),l=t(52075).hasColorscale,_=t(78803),m=t(75341),f=t(66279);$.exports=function(o,e){var i,r,n,s,a,u,p=A.getFromId(o,e.xaxis||"x"),c=A.getFromId(o,e.yaxis||"y"),x={msUTC:!(!e.base&&e.base!==0)};e.orientation==="h"?(i=p.makeCalcdata(e,"x",x),n=c.makeCalcdata(e,"y"),s=M(e,c,"y",n),a=!!e.yperiodalignment,u="y"):(i=c.makeCalcdata(e,"y",x),n=p.makeCalcdata(e,"x"),s=M(e,p,"x",n),a=!!e.xperiodalignment,u="x"),r=s.vals;for(var g=Math.min(r.length,i.length),h=new Array(g),b=0;b<g;b++)h[b]={p:r[b],s:i[b]},a&&(h[b].orig_p=n[b],h[b][u+"End"]=s.ends[b],h[b][u+"Start"]=s.starts[b]),e.ids&&(h[b].id=String(e.ids[b]));return l(e,"marker")&&_(o,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),l(e,"marker.line")&&_(o,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),m(h,e),f(h,e),h}},97313:function($){$.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},11661:function($,P,t){var A=t(92770),M=t(71828).isArrayOrTypedArray,l=t(50606).BADNUM,_=t(73972),m=t(89298),f=t(99082).getAxisGroup,o=t(61546);function e(g,h,b,v,y){if(v.length){var w,d,S,T;switch(function(E,C){var L,O;for(L=0;L<C.length;L++){var z,G=C[L],I=G[0].trace,H=I.type==="funnel"?I._base:I.base,N=I.orientation==="h"?I.xcalendar:I.ycalendar,F=E.type==="category"||E.type==="multicategory"?function(){return null}:E.d2c;if(M(H)){for(O=0;O<Math.min(H.length,G.length);O++)z=F(H[O],0,N),A(z)?(G[O].b=+z,G[O].hasB=1):G[O].b=0;for(;O<G.length;O++)G[O].b=0}else{z=F(H,0,N);var V=A(z);for(z=V?z:0,O=0;O<G.length;O++)G[O].b=z,V&&(G[O].hasB=1)}}}(b,v),y.mode){case"overlay":i(h,b,v,y);break;case"group":for(w=[],d=[],S=0;S<v.length;S++)(T=v[S])[0].trace.offset===void 0?d.push(T):w.push(T);d.length&&function(E,C,L,O,z){var G=new o(O,{posAxis:C,sepNegVal:!1,overlapNoMerge:!z.norm});(function(I,H,N,F){for(var V=I._fullLayout,W=N.positions,te=N.distinctPositions,Q=N.minDiff,X=N.traces,q=X.length,Z=W.length!==te.length,J=Q*(1-F.gap),ne=f(V,H._id)+X[0][0].trace.orientation,re=V._alignmentOpts[ne]||{},ae=0;ae<q;ae++){var ue,he,de=X[ae],xe=de[0].trace,me=re[xe.alignmentgroup]||{},ve=Object.keys(me.offsetGroups||{}).length,Le=(ue=ve?J/ve:Z?J/q:J)*(1-(F.groupgap||0));he=ve?((2*xe._offsetIndex+1-ve)*ue-Le)/2:Z?((2*ae+1-q)*ue-Le)/2:-Le/2;var Ae=de[0].t;Ae.barwidth=Le,Ae.poffset=he,Ae.bargroupwidth=J,Ae.bardelta=Q}N.binWidth=X[0][0].t.barwidth/100,n(N),s(H,N),a(H,N,Z)})(E,C,G,z),function(I,H){for(var N=I.traces,F=0;F<N.length;F++){var V=N[F];if(V[0].trace.base===void 0)for(var W=new o([V],{posAxis:H,sepNegVal:!0,overlapNoMerge:!0}),te=0;te<V.length;te++){var Q=V[te];if(Q.p!==l){var X=W.put(Q.p,Q.b+Q.s);X&&(Q.b=X)}}}}(G,C),z.norm?(p(G),c(L,G,z)):u(L,G)}(g,h,b,d,y),w.length&&i(h,b,w,y);break;case"stack":case"relative":for(w=[],d=[],S=0;S<v.length;S++)(T=v[S])[0].trace.base===void 0?d.push(T):w.push(T);d.length&&function(E,C,L,O,z){var G=new o(O,{posAxis:C,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});r(C,G,z),function(V,W,te){var Q,X,q,Z,J,ne,re=x(V),ae=W.traces;for(Z=0;Z<ae.length;Z++)if((X=(Q=ae[Z])[0].trace).type==="funnel")for(J=0;J<Q.length;J++)(ne=Q[J]).s!==l&&W.put(ne.p,-.5*ne.s);for(Z=0;Z<ae.length;Z++){q=(X=(Q=ae[Z])[0].trace).type==="funnel";var ue=[];for(J=0;J<Q.length;J++)if((ne=Q[J]).s!==l){var he;he=q?ne.s:ne.s+ne.b;var de=W.put(ne.p,he),xe=de+he;ne.b=de,ne[re]=xe,te.norm||(ue.push(xe),ne.hasB&&ue.push(de))}te.norm||(X._extremes[V._id]=m.findExtremes(V,ue,{tozero:!0,padded:!0}))}}(L,G,z);for(var I=0;I<O.length;I++)for(var H=O[I],N=0;N<H.length;N++){var F=H[N];F.s!==l&&F.b+F.s===G.get(F.p,F.s)&&(F._outmost=!0)}z.norm&&c(L,G,z)}(0,h,b,d,y),w.length&&i(h,b,w,y)}(function(E,C){var L,O,z,G=x(C),I={},H=1/0,N=-1/0;for(L=0;L<E.length;L++)for(z=E[L],O=0;O<z.length;O++){var F=z[O].p;A(F)&&(H=Math.min(H,F),N=Math.max(N,F))}var V=1e4/(N-H),W=I.round=function(ne){return String(Math.round(V*(ne-H)))};for(L=0;L<E.length;L++){(z=E[L])[0].t.extents=I;var te=z[0].t.poffset,Q=Array.isArray(te);for(O=0;O<z.length;O++){var X=z[O],q=X[G]-X.w/2;if(A(q)){var Z=X[G]+X.w/2,J=W(X.p);I[J]?I[J]=[Math.min(q,I[J][0]),Math.max(Z,I[J][1])]:I[J]=[q,Z]}X.p0=X.p+(Q?te[O]:te),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}})(v,h)}}function i(g,h,b,v){for(var y=0;y<b.length;y++){var w=b[y],d=new o([w],{posAxis:g,sepNegVal:!1,overlapNoMerge:!v.norm});r(g,d,v),v.norm?(p(d),c(h,d,v)):u(h,d)}}function r(g,h,b){for(var v=h.minDiff,y=h.traces,w=v*(1-b.gap),d=w*(1-(b.groupgap||0)),S=-d/2,T=0;T<y.length;T++){var E=y[T][0].t;E.barwidth=d,E.poffset=S,E.bargroupwidth=w,E.bardelta=v}h.binWidth=y[0][0].t.barwidth/100,n(h),s(g,h),a(g,h)}function n(g){var h,b,v=g.traces;for(h=0;h<v.length;h++){var y,w=v[h],d=w[0],S=d.trace,T=d.t,E=S._offset||S.offset,C=T.poffset;if(M(E)){for(y=Array.prototype.slice.call(E,0,w.length),b=0;b<y.length;b++)A(y[b])||(y[b]=C);for(b=y.length;b<w.length;b++)y.push(C);T.poffset=y}else E!==void 0&&(T.poffset=E);var L=S._width||S.width,O=T.barwidth;if(M(L)){var z=Array.prototype.slice.call(L,0,w.length);for(b=0;b<z.length;b++)A(z[b])||(z[b]=O);for(b=z.length;b<w.length;b++)z.push(O);if(T.barwidth=z,E===void 0){for(y=[],b=0;b<w.length;b++)y.push(C+(O-z[b])/2);T.poffset=y}}else L!==void 0&&(T.barwidth=L,E===void 0&&(T.poffset=C+(O-L)/2))}}function s(g,h){for(var b=h.traces,v=x(g),y=0;y<b.length;y++)for(var w=b[y],d=w[0].t,S=d.poffset,T=Array.isArray(S),E=d.barwidth,C=Array.isArray(E),L=0;L<w.length;L++){var O=w[L],z=O.w=C?E[L]:E;O.p===void 0&&(O.p=O[v],O["orig_"+v]=O[v]);var G=(T?S[L]:S)+z/2;O[v]=O.p+G}}function a(g,h,b){var v=h.traces,y=h.minDiff/2;m.minDtick(g,h.minDiff,h.distinctPositions[0],b);for(var w=0;w<v.length;w++){var d,S,T,E,C=v[w],L=C[0],O=L.trace,z=[];for(E=0;E<C.length;E++)S=(d=C[E]).p-y,T=d.p+y,z.push(S,T);if(O.width||O.offset){var G=L.t,I=G.poffset,H=G.barwidth,N=Array.isArray(I),F=Array.isArray(H);for(E=0;E<C.length;E++){d=C[E];var V=N?I[E]:I,W=F?H[E]:H;T=(S=d.p+V)+W,z.push(S,T)}}O._extremes[g._id]=m.findExtremes(g,z,{padded:!1})}}function u(g,h){for(var b=h.traces,v=x(g),y=0;y<b.length;y++){for(var w=b[y],d=w[0].trace,S=d.type==="scatter",T=d.orientation==="v",E=[],C=!1,L=0;L<w.length;L++){var O=w[L],z=S?0:O.b,G=S?T?O.y:O.x:z+O.s;O[v]=G,E.push(G),O.hasB&&E.push(z),O.hasB&&O.b||(C=!0)}d._extremes[g._id]=m.findExtremes(g,E,{tozero:C,padded:!0})}}function p(g){for(var h=g.traces,b=0;b<h.length;b++)for(var v=h[b],y=0;y<v.length;y++){var w=v[y];w.s!==l&&g.put(w.p,w.b+w.s)}}function c(g,h,b){var v=h.traces,y=x(g),w=b.norm==="fraction"?1:100,d=w/1e9,S=g.l2c(g.c2l(0)),T=b.mode==="stack"?w:S;function E(te){return A(g.c2l(te))&&(te<S-d||te>T+d||!A(S))}for(var C=0;C<v.length;C++){for(var L=v[C],O=L[0].trace,z=[],G=!1,I=!1,H=0;H<L.length;H++){var N=L[H];if(N.s!==l){var F=Math.abs(w/h.get(N.p,N.s));N.b*=F,N.s*=F;var V=N.b,W=V+N.s;N[y]=W,z.push(W),I=I||E(W),N.hasB&&(z.push(V),I=I||E(V)),N.hasB&&N.b||(G=!0)}}O._extremes[g._id]=m.findExtremes(g,z,{tozero:G,padded:I})}}function x(g){return g._id.charAt(0)}$.exports={crossTraceCalc:function(g,h){for(var b=h.xaxis,v=h.yaxis,y=g._fullLayout,w=g._fullData,d=g.calcdata,S=[],T=[],E=0;E<w.length;E++){var C=w[E];if(C.visible===!0&&_.traceIs(C,"bar")&&C.xaxis===b._id&&C.yaxis===v._id&&(C.orientation==="h"?S.push(d[E]):T.push(d[E]),C._computePh))for(var L=g.calcdata[E],O=0;O<L.length;O++)typeof L[O].ph0=="function"&&(L[O].ph0=L[O].ph0()),typeof L[O].ph1=="function"&&(L[O].ph1=L[O].ph1())}var z={xCat:b.type==="category"||b.type==="multicategory",yCat:v.type==="category"||v.type==="multicategory",mode:y.barmode,norm:y.barnorm,gap:y.bargap,groupgap:y.bargroupgap};e(g,b,v,T,z),e(g,v,b,S,z)},setGroupPositions:e}},90769:function($,P,t){var A=t(71828),M=t(7901),l=t(73972),_=t(67513),m=t(73927),f=t(98340),o=t(26125),e=t(1486),i=A.coerceFont;function r(n,s,a,u,p,c){var x=(c=c||{}).moduleHasSelected!==!1,g=c.moduleHasUnselected!==!1,h=c.moduleHasConstrain!==!1,b=c.moduleHasCliponaxis!==!1,v=c.moduleHasTextangle!==!1,y=c.moduleHasInsideanchor!==!1,w=!!c.hasPathbar,d=Array.isArray(p)||p==="auto",S=d||p==="inside",T=d||p==="outside";if(S||T){var E=i(u,"textfont",a.font),C=A.extendFlat({},E),L=!(n.textfont&&n.textfont.color);if(L&&delete C.color,i(u,"insidetextfont",C),w){var O=A.extendFlat({},E);L&&delete O.color,i(u,"pathbar.textfont",O)}T&&i(u,"outsidetextfont",E),x&&u("selected.textfont.color"),g&&u("unselected.textfont.color"),h&&u("constraintext"),b&&u("cliponaxis"),v&&u("textangle"),u("texttemplate")}S&&y&&u("insidetextanchor")}$.exports={supplyDefaults:function(n,s,a,u){function p(h,b){return A.coerce(n,s,e,h,b)}if(_(n,s,u,p)){m(n,s,u,p),p("xhoverformat"),p("yhoverformat"),p("orientation",s.x&&!s.y?"h":"v"),p("base"),p("offset"),p("width"),p("text"),p("hovertext"),p("hovertemplate");var c=p("textposition");r(n,0,u,p,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f(n,s,p,a,u);var x=(s.marker.line||{}).color,g=l.getComponentMethod("errorbars","supplyDefaults");g(n,s,x||M.defaultLine,{axis:"y"}),g(n,s,x||M.defaultLine,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(s,p)}else s.visible=!1},crossTraceDefaults:function(n,s){var a,u;function p(x){return A.coerce(u._input,u,e,x)}if(s.barmode==="group")for(var c=0;c<n.length;c++)(u=n[c]).type==="bar"&&(a=u._input,o(a,u,s,p))},handleText:r}},58065:function($){$.exports=function(P,t,A){return P.x="xVal"in t?t.xVal:t.x,P.y="yVal"in t?t.yVal:t.y,t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),A.orientation==="h"?(P.label=P.y,P.value=P.x):(P.label=P.x,P.value=P.y),P}},69383:function($,P,t){var A=t(92770),M=t(84267),l=t(71828).isArrayOrTypedArray;P.coerceString=function(_,m,f){if(typeof m=="string"){if(m||!_.noBlank)return m}else if((typeof m=="number"||m===!0)&&!_.strict)return String(m);return f!==void 0?f:_.dflt},P.coerceNumber=function(_,m,f){if(A(m)){m=+m;var o=_.min,e=_.max;if(!(o!==void 0&&m<o||e!==void 0&&m>e))return m}return f!==void 0?f:_.dflt},P.coerceColor=function(_,m,f){return M(m).isValid()?m:f!==void 0?f:_.dflt},P.coerceEnumerated=function(_,m,f){return _.coerceNumber&&(m=+m),_.values.indexOf(m)!==-1?m:f!==void 0?f:_.dflt},P.getValue=function(_,m){var f;return Array.isArray(_)?m<_.length&&(f=_[m]):f=_,f},P.getLineWidth=function(_,m){return 0<m.mlw?m.mlw:l(_.marker.line.width)?0:_.marker.line.width}},95423:function($,P,t){var A=t(30211),M=t(73972),l=t(7901),_=t(71828).fillText,m=t(69383).getLineWidth,f=t(89298).hoverLabelText,o=t(50606).BADNUM;function e(r,n,s,a,u){var p,c,x,g,h,b,v,y=r.cd,w=y[0].trace,d=y[0].t,S=a==="closest",T=w.type==="waterfall",E=r.maxHoverDistance,C=r.maxSpikeDistance;w.orientation==="h"?(p=s,c=n,x="y",g="x",h=Q,b=W):(p=n,c=s,x="x",g="y",b=Q,h=W);var L=w[x+"period"],O=S||L;function z(ue){return I(ue,-1)}function G(ue){return I(ue,1)}function I(ue,he){var de=ue.w;return ue[x]+he*de/2}function H(ue){return ue[x+"End"]-ue[x+"Start"]}var N=S?z:L?function(ue){return ue.p-H(ue)/2}:function(ue){return Math.min(z(ue),ue.p-d.bardelta/2)},F=S?G:L?function(ue){return ue.p+H(ue)/2}:function(ue){return Math.max(G(ue),ue.p+d.bardelta/2)};function V(ue,he,de){return u.finiteRange&&(de=0),A.inbox(ue-p,he-p,de+Math.min(1,Math.abs(he-ue)/v)-1)}function W(ue){return V(N(ue),F(ue),E)}function te(ue){var he=ue[g];if(T){var de=Math.abs(ue.rawS)||0;c>0?he+=de:c<0&&(he-=de)}return he}function Q(ue){var he=c,de=ue.b,xe=te(ue);return A.inbox(de-he,xe-he,E+(xe-he)/(xe-de)-1)}var X=r[x+"a"],q=r[g+"a"];v=Math.abs(X.r2c(X.range[1])-X.r2c(X.range[0]));var Z=A.getDistanceFunction(a,h,b,function(ue){return(h(ue)+b(ue))/2});if(A.getClosest(y,Z,r),r.index!==!1&&y[r.index].p!==o){O||(N=function(ue){return Math.min(z(ue),ue.p-d.bargroupwidth/2)},F=function(ue){return Math.max(G(ue),ue.p+d.bargroupwidth/2)});var J=y[r.index],ne=w.base?J.b+J.s:J.s;r[g+"0"]=r[g+"1"]=q.c2p(J[g],!0),r[g+"LabelVal"]=ne;var re=d.extents[d.extents.round(J.p)];r[x+"0"]=X.c2p(S?N(J):re[0],!0),r[x+"1"]=X.c2p(S?F(J):re[1],!0);var ae=J.orig_p!==void 0;return r[x+"LabelVal"]=ae?J.orig_p:J.p,r.labelLabel=f(X,r[x+"LabelVal"],w[x+"hoverformat"]),r.valueLabel=f(q,r[g+"LabelVal"],w[g+"hoverformat"]),r.baseLabel=f(q,J.b,w[g+"hoverformat"]),r.spikeDistance=(function(ue){var he=c,de=ue.b,xe=te(ue);return A.inbox(de-he,xe-he,C+(xe-he)/(xe-de)-1)}(J)+function(ue){return V(z(ue),G(ue),C)}(J))/2,r[x+"Spike"]=X.c2p(J.p,!0),_(J,w,r),r.hovertemplate=w.hovertemplate,r}}function i(r,n){var s=n.mcc||r.marker.color,a=n.mlcc||r.marker.line.color,u=m(r,n);return l.opacity(s)?s:l.opacity(a)&&u?a:void 0}$.exports={hoverPoints:function(r,n,s,a,u){var p=e(r,n,s,a,u);if(p){var c=p.cd,x=c[0].trace,g=c[p.index];return p.color=i(x,g),M.getComponentMethod("errorbars","hoverInfo")(g,x,p),[p]}},hoverOnBars:e,getTraceColor:i}},60822:function($,P,t){$.exports={attributes:t(1486),layoutAttributes:t(43641),supplyDefaults:t(90769).supplyDefaults,crossTraceDefaults:t(90769).crossTraceDefaults,supplyLayoutDefaults:t(13957),calc:t(92290),crossTraceCalc:t(11661).crossTraceCalc,colorbar:t(4898),arraysToCalcdata:t(75341),plot:t(17295).plot,style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(95423).hoverPoints,eventData:t(58065),selectPoints:t(81974),moduleType:"trace",name:"bar",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},43641:function($){$.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},13957:function($,P,t){var A=t(73972),M=t(89298),l=t(71828),_=t(43641);$.exports=function(m,f,o){function e(x,g){return l.coerce(m,f,_,x,g)}for(var i=!1,r=!1,n=!1,s={},a=e("barmode"),u=0;u<o.length;u++){var p=o[u];if(A.traceIs(p,"bar")&&p.visible){if(i=!0,a==="group"){var c=p.xaxis+p.yaxis;s[c]&&(n=!0),s[c]=!0}p.visible&&p.type==="histogram"&&M.getFromId({_fullLayout:f},p[p.orientation==="v"?"xaxis":"yaxis"]).type!=="category"&&(r=!0)}}i?(a!=="overlay"&&e("barnorm"),e("bargap",r&&!n?0:.2),e("bargroupgap")):delete f.barmode}},17295:function($,P,t){var A=t(39898),M=t(92770),l=t(71828),_=t(63893),m=t(7901),f=t(91424),o=t(73972),e=t(89298).tickText,i=t(72597),r=i.recordMinTextSize,n=i.clearMinTextSize,s=t(16688),a=t(69383),u=t(97313),p=t(1486),c=p.text,x=p.textposition,g=t(23469).appendArrayPointValue,h=u.TEXTPAD;function b(C){return C.id}function v(C){if(C.ids)return b}function y(C,L){return C<L?1:-1}function w(C,L,O,z){var G;return!L.uniformtext.mode&&d(O)?(z&&(G=z()),C.transition().duration(O.duration).ease(O.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()})):C}function d(C){return C&&C.duration>0}function S(C){return C==="auto"?0:C}function T(C,L){var O=Math.PI/180*L,z=Math.abs(Math.sin(O)),G=Math.abs(Math.cos(O));return{x:C.width*G+C.height*z,y:C.width*z+C.height*G}}function E(C,L,O,z,G,I){var H=!!I.isHorizontal,N=!!I.constrained,F=I.angle||0,V=I.anchor||"end",W=V==="end",te=V==="start",Q=((I.leftToRight||0)+1)/2,X=1-Q,q=G.width,Z=G.height,J=Math.abs(L-C),ne=Math.abs(z-O),re=J>2*h&&ne>2*h?h:0;J-=2*re,ne-=2*re;var ae=S(F);F!=="auto"||q<=J&&Z<=ne||!(q>J||Z>ne)||(q>ne||Z>J)&&q<Z==J<ne||(ae+=90);var ue=T(G,ae),he=1;N&&(he=Math.min(1,J/ue.x,ne/ue.y));var de=G.left*X+G.right*Q,xe=(G.top+G.bottom)/2,me=(C+h)*X+(L-h)*Q,ve=(O+z)/2,Le=0,Ae=0;if(te||W){var we=(H?ue.x:ue.y)/2,se=H?y(C,L):y(O,z);H?te?(me=C+se*re,Le=-se*we):(me=L-se*re,Le=se*we):te?(ve=O+se*re,Ae=-se*we):(ve=z-se*re,Ae=se*we)}return{textX:de,textY:xe,targetX:me,targetY:ve,anchorX:Le,anchorY:Ae,scale:he,rotate:ae}}$.exports={plot:function(C,L,O,z,G,I){var H=L.xaxis,N=L.yaxis,F=C._fullLayout,V=C._context.staticPlot;G||(G={mode:F.barmode,norm:F.barmode,gap:F.bargap,groupgap:F.bargroupgap},n("bar",F));var W=l.makeTraceGroups(z,O,"trace bars").each(function(te){var Q=A.select(this),X=te[0].trace,q=X.type==="waterfall",Z=X.type==="funnel",J=X.type==="bar"||Z,ne=0;q&&X.connector.visible&&X.connector.mode==="between"&&(ne=X.connector.line.width/2);var re=X.orientation==="h",ae=d(G),ue=l.ensureSingle(Q,"g","points"),he=v(X),de=ue.selectAll("g.point").data(l.identity,he);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(me,ve){var Le,Ae,we=A.select(this),se=function(Pe,Re,ze,He){var We=[],Je=[],lt=He?Re:ze,et=He?ze:Re;return We[0]=lt.c2p(Pe.s0,!0),Je[0]=et.c2p(Pe.p0,!0),We[1]=lt.c2p(Pe.s1,!0),Je[1]=et.c2p(Pe.p1,!0),He?[We,Je]:[Je,We]}(me,H,N,re),oe=se[0][0],fe=se[0][1],Se=se[1][0],Me=se[1][1],be=(re?fe-oe:Me-Se)==0;if(be&&J&&a.getLineWidth(X,me)&&(be=!1),be||(be=!(M(oe)&&M(fe)&&M(Se)&&M(Me))),me.isBlank=be,be&&(re?fe=oe:Me=Se),ne&&!be&&(re?(oe-=y(oe,fe)*ne,fe+=y(oe,fe)*ne):(Se-=y(Se,Me)*ne,Me+=y(Se,Me)*ne)),X.type==="waterfall"){if(!be){var Ie=X[me.dir].marker;Le=Ie.line.width,Ae=Ie.color}}else Le=a.getLineWidth(X,me),Ae=me.mc||X.marker.color;function Be(Pe){var Re=A.round(Le/2%1,2);return G.gap===0&&G.groupgap===0?A.round(Math.round(Pe)-Re,2):Pe}if(!C._context.staticPlot){var ce=m.opacity(Ae)<1||Le>.01?Be:function(Pe,Re,ze){return ze&&Pe===Re?Pe:Math.abs(Pe-Re)>=2?Be(Pe):Pe>Re?Math.ceil(Pe):Math.floor(Pe)};oe=ce(oe,fe,re),fe=ce(fe,oe,re),Se=ce(Se,Me,!re),Me=ce(Me,Se,!re)}var Te=w(l.ensureSingle(we,"path"),F,G,I);if(Te.style("vector-effect",V?"none":"non-scaling-stroke").attr("d",isNaN((fe-oe)*(Me-Se))||be&&C._context.staticPlot?"M0,0Z":"M"+oe+","+Se+"V"+Me+"H"+fe+"V"+Se+"Z").call(f.setClipUrl,L.layerClipId,C),!F.uniformtext.mode&&ae){var ye=f.makePointStyleFns(X);f.singlePointStyle(me,Te,X,ye,C)}(function(Pe,Re,ze,He,We,Je,lt,et,yt,_t,xt){var at,ot=Re.xaxis,At=Re.yaxis,Ct=Pe._fullLayout;function zt(an,Wt,Yt){return l.ensureSingle(an,"text").text(Wt).attr({class:"bartext bartext-"+at,"text-anchor":"middle","data-notex":1}).call(f.font,Yt).call(_.convertToTspans,Pe)}var St=He[0].trace,qe=St.orientation==="h",Xe=function(an,Wt,Yt,en,Tn){var Bn,mn=Wt[0].trace;return Bn=mn.texttemplate?function(Kt,cn,tn,un,yn){var En=cn[0].trace,Sn=l.castOption(En,tn,"texttemplate");if(!Sn)return"";var Nn,_n,Pn,tr,ur=En.type==="histogram",lr=En.type==="waterfall",ir=En.type==="funnel",$n=En.orientation==="h";function vr(Un){return e(tr,tr.c2l(Un),!0).text}$n?(Nn="y",_n=yn,Pn="x",tr=un):(Nn="x",_n=un,Pn="y",tr=yn);var jt,rn=cn[tn],fn={};fn.label=rn.p,fn.labelLabel=fn[Nn+"Label"]=(jt=rn.p,e(_n,_n.c2l(jt),!0).text);var xn=l.castOption(En,rn.i,"text");(xn===0||xn)&&(fn.text=xn),fn.value=rn.s,fn.valueLabel=fn[Pn+"Label"]=vr(rn.s);var Ln={};g(Ln,En,rn.i),(ur||Ln.x===void 0)&&(Ln.x=$n?fn.value:fn.label),(ur||Ln.y===void 0)&&(Ln.y=$n?fn.label:fn.value),(ur||Ln.xLabel===void 0)&&(Ln.xLabel=$n?fn.valueLabel:fn.labelLabel),(ur||Ln.yLabel===void 0)&&(Ln.yLabel=$n?fn.labelLabel:fn.valueLabel),lr&&(fn.delta=+rn.rawS||rn.s,fn.deltaLabel=vr(fn.delta),fn.final=rn.v,fn.finalLabel=vr(fn.final),fn.initial=fn.final-fn.delta,fn.initialLabel=vr(fn.initial)),ir&&(fn.value=rn.s,fn.valueLabel=vr(fn.value),fn.percentInitial=rn.begR,fn.percentInitialLabel=l.formatPercent(rn.begR),fn.percentPrevious=rn.difR,fn.percentPreviousLabel=l.formatPercent(rn.difR),fn.percentTotal=rn.sumR,fn.percenTotalLabel=l.formatPercent(rn.sumR));var Xn=l.castOption(En,rn.i,"customdata");return Xn&&(fn.customdata=Xn),l.texttemplateString(Sn,fn,Kt._d3locale,Ln,fn,En._meta||{})}(an,Wt,Yt,en,Tn):mn.textinfo?function(Kt,cn,tn,un){var yn=Kt[0].trace,En=yn.orientation==="h",Sn=yn.type==="waterfall",Nn=yn.type==="funnel";function _n(Xn){return e(En?tn:un,+Xn,!0).text}var Pn,tr,ur=yn.textinfo,lr=Kt[cn],ir=ur.split("+"),$n=[],vr=function(Xn){return ir.indexOf(Xn)!==-1};if(vr("label")&&$n.push((tr=Kt[cn].p,e(En?un:tn,tr,!0).text)),vr("text")&&((Pn=l.castOption(yn,lr.i,"text"))===0||Pn)&&$n.push(Pn),Sn){var jt=+lr.rawS||lr.s,rn=lr.v,fn=rn-jt;vr("initial")&&$n.push(_n(fn)),vr("delta")&&$n.push(_n(jt)),vr("final")&&$n.push(_n(rn))}if(Nn){vr("value")&&$n.push(_n(lr.s));var xn=0;vr("percent initial")&&xn++,vr("percent previous")&&xn++,vr("percent total")&&xn++;var Ln=xn>1;vr("percent initial")&&(Pn=l.formatPercent(lr.begR),Ln&&(Pn+=" of initial"),$n.push(Pn)),vr("percent previous")&&(Pn=l.formatPercent(lr.difR),Ln&&(Pn+=" of previous"),$n.push(Pn)),vr("percent total")&&(Pn=l.formatPercent(lr.sumR),Ln&&(Pn+=" of total"),$n.push(Pn))}return $n.join("<br>")}(Wt,Yt,en,Tn):a.getValue(mn.text,Yt),a.coerceString(c,Bn)}(Ct,He,We,ot,At);at=function(an,Wt){var Yt=a.getValue(an.textposition,Wt);return a.coerceEnumerated(x,Yt)}(St,We);var Ve=_t.mode==="stack"||_t.mode==="relative",Ze=He[We],st=!Ve||Ze._outmost;if(Xe&&at!=="none"&&(!Ze.isBlank&&Je!==lt&&et!==yt||at!=="auto"&&at!=="inside")){var nt=Ct.font,De=s.getBarColor(He[We],St),Fe=s.getInsideTextFont(St,We,nt,De),rt=s.getOutsideTextFont(St,We,nt),tt=ze.datum();qe?ot.type==="log"&&tt.s0<=0&&(Je=ot.range[0]<ot.range[1]?0:ot._length):At.type==="log"&&tt.s0<=0&&(et=At.range[0]<At.range[1]?At._length:0);var gt,dt,mt,ft,kt,ht=Math.abs(lt-Je)-2*h,pt=Math.abs(yt-et)-2*h;if(at==="outside"&&(st||Ze.hasB||(at="inside")),at==="auto"&&(st?(at="inside",gt=zt(ze,Xe,kt=l.ensureUniformFontSize(Pe,Fe)),mt=(dt=f.bBox(gt.node())).width,ft=dt.height,mt>0&&ft>0&&(mt<=ht&&ft<=pt||mt<=pt&&ft<=ht||(qe?ht>=mt*(pt/ft):pt>=ft*(ht/mt)))?at="inside":(at="outside",gt.remove(),gt=null)):at="inside"),!gt){var wt=(gt=zt(ze,Xe,kt=l.ensureUniformFontSize(Pe,at==="outside"?rt:Fe))).attr("transform");if(gt.attr("transform",""),mt=(dt=f.bBox(gt.node())).width,ft=dt.height,gt.attr("transform",wt),mt<=0||ft<=0)return void gt.remove()}var Ft,Nt=St.textangle;Ft=at==="outside"?function(an,Wt,Yt,en,Tn,Bn){var mn,Kt=!!Bn.isHorizontal,cn=!!Bn.constrained,tn=Bn.angle||0,un=Tn.width,yn=Tn.height,En=Math.abs(Wt-an),Sn=Math.abs(en-Yt);mn=Kt?Sn>2*h?h:0:En>2*h?h:0;var Nn=1;cn&&(Nn=Kt?Math.min(1,Sn/yn):Math.min(1,En/un));var _n=S(tn),Pn=T(Tn,_n),tr=(Kt?Pn.x:Pn.y)/2,ur=(Tn.left+Tn.right)/2,lr=(Tn.top+Tn.bottom)/2,ir=(an+Wt)/2,$n=(Yt+en)/2,vr=0,jt=0,rn=Kt?y(Wt,an):y(Yt,en);return Kt?(ir=Wt-rn*mn,vr=rn*tr):($n=en+rn*mn,jt=-rn*tr),{textX:ur,textY:lr,targetX:ir,targetY:$n,anchorX:vr,anchorY:jt,scale:Nn,rotate:_n}}(Je,lt,et,yt,dt,{isHorizontal:qe,constrained:St.constraintext==="both"||St.constraintext==="outside",angle:Nt}):E(Je,lt,et,yt,dt,{isHorizontal:qe,constrained:St.constraintext==="both"||St.constraintext==="inside",angle:Nt,anchor:St.insidetextanchor}),Ft.fontSize=kt.size,r(St.type==="histogram"?"bar":St.type,Ft,Ct),Ze.transform=Ft;var Gt=w(gt,Ct,_t,xt);l.setTransormAndDisplay(Gt,Ft)}else ze.select("text").remove()})(C,L,we,te,ve,oe,fe,Se,Me,G,I),L.layerClipId&&f.hideOutsideRangePoint(me,we.select("text"),H,N,X.xcalendar,X.ycalendar)});var xe=X.cliponaxis===!1;f.setClipUrl(Q,xe?null:L.layerClipId,C)});o.getComponentMethod("errorbars","plot")(C,W,L,G)},toMoveInsideBar:E}},81974:function($){function P(t,A,M,l,_){var m=A.c2p(l?t.s0:t.p0,!0),f=A.c2p(l?t.s1:t.p1,!0),o=M.c2p(l?t.p0:t.s0,!0),e=M.c2p(l?t.p1:t.s1,!0);return _?[(m+f)/2,(o+e)/2]:l?[f,(o+e)/2]:[(m+f)/2,e]}$.exports=function(t,A){var M,l=t.cd,_=t.xaxis,m=t.yaxis,f=l[0].trace,o=f.type==="funnel",e=f.orientation==="h",i=[];if(A===!1)for(M=0;M<l.length;M++)l[M].selected=0;else for(M=0;M<l.length;M++){var r=l[M],n="ct"in r?r.ct:P(r,_,m,e,o);A.contains(n,!1,M,t)?(i.push({pointNumber:M,x:_.c2d(r.x),y:m.c2d(r.y)}),r.selected=1):r.selected=0}return i}},61546:function($,P,t){$.exports=M;var A=t(71828).distinctVals;function M(l,_){this.traces=l,this.sepNegVal=_.sepNegVal,this.overlapNoMerge=_.overlapNoMerge;for(var m=1/0,f=_.posAxis._id.charAt(0),o=[],e=0;e<l.length;e++){for(var i=l[e],r=0;r<i.length;r++){var n=i[r],s=n.p;s===void 0&&(s=n[f]),s!==void 0&&o.push(s)}i[0]&&i[0].width1&&(m=Math.min(i[0].width1,m))}this.positions=o;var a=A(o);this.distinctPositions=a.vals,a.vals.length===1&&m!==1/0?this.minDiff=m:this.minDiff=Math.min(a.minDiff,m);var u=(_.posAxis||{}).type;u!=="category"&&u!=="multicategory"||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(l,_){var m=this.getLabel(l,_),f=this.bins[m]||0;return this.bins[m]=f+_,f},M.prototype.get=function(l,_){var m=this.getLabel(l,_);return this.bins[m]||0},M.prototype.getLabel=function(l,_){return(_<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?l:Math.round(l/this.binWidth))}},16688:function($,P,t){var A=t(39898),M=t(7901),l=t(91424),_=t(71828),m=t(73972),f=t(72597).resizeText,o=t(1486),e=o.textfont,i=o.insidetextfont,r=o.outsidetextfont,n=t(69383);function s(b,v,y){l.pointStyle(b.selectAll("path"),v,y),a(b,v,y)}function a(b,v,y){b.selectAll("text").each(function(w){var d=A.select(this),S=_.ensureUniformFontSize(y,u(d,w,v,y));l.font(d,S)})}function u(b,v,y,w){var d=w._fullLayout.font,S=y.textfont;if(b.classed("bartext-inside")){var T=h(v,y);S=c(y,v.i,d,T)}else b.classed("bartext-outside")&&(S=x(y,v.i,d));return S}function p(b,v,y){return g(e,b.textfont,v,y)}function c(b,v,y,w){var d=p(b,v,y);return(b._input.textfont===void 0||b._input.textfont.color===void 0||Array.isArray(b.textfont.color)&&b.textfont.color[v]===void 0)&&(d={color:M.contrast(w),family:d.family,size:d.size}),g(i,b.insidetextfont,v,d)}function x(b,v,y){var w=p(b,v,y);return g(r,b.outsidetextfont,v,w)}function g(b,v,y,w){v=v||{};var d=n.getValue(v.family,y),S=n.getValue(v.size,y),T=n.getValue(v.color,y);return{family:n.coerceString(b.family,d,w.family),size:n.coerceNumber(b.size,S,w.size),color:n.coerceColor(b.color,T,w.color)}}function h(b,v){return v.type==="waterfall"?v[b.dir].marker.color:b.mcc||b.mc||v.marker.color}$.exports={style:function(b){var v=A.select(b).selectAll("g.barlayer").selectAll("g.trace");f(b,v,"bar");var y=v.size(),w=b._fullLayout;v.style("opacity",function(d){return d[0].trace.opacity}).each(function(d){(w.barmode==="stack"&&y>1||w.bargap===0&&w.bargroupgap===0&&!d[0].trace.marker.line.width)&&A.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(d){s(A.select(this),d[0].trace,b)}),m.getComponentMethod("errorbars","style")(v)},styleTextPoints:a,styleOnSelect:function(b,v,y){var w=v[0].trace;w.selectedpoints?function(d,S,T){l.selectedPointStyle(d.selectAll("path"),S),function(E,C,L){E.each(function(O){var z,G=A.select(this);if(O.selected){z=_.ensureUniformFontSize(L,u(G,O,C,L));var I=C.selected.textfont&&C.selected.textfont.color;I&&(z.color=I),l.font(G,z)}else l.selectedTextStyle(G,C)})}(d.selectAll("text"),S,T)}(y,w,b):(s(y,w,b),m.getComponentMethod("errorbars","style")(y))},getInsideTextFont:c,getOutsideTextFont:x,getBarColor:h,resizeText:f}},98340:function($,P,t){var A=t(7901),M=t(52075).hasColorscale,l=t(1586),_=t(71828).coercePattern;$.exports=function(m,f,o,e,i){var r=o("marker.color",e),n=M(m,"marker");n&&l(m,f,i,o,{prefix:"marker.",cLetter:"c"}),o("marker.line.color",A.defaultLine),M(m,"marker.line")&&l(m,f,i,o,{prefix:"marker.line.",cLetter:"c"}),o("marker.line.width"),o("marker.opacity"),_(o,"marker.pattern",r,n),o("selected.marker.color"),o("unselected.marker.color")}},72597:function($,P,t){var A=t(39898),M=t(71828);function l(_){return"_"+_+"Text_minsize"}$.exports={recordMinTextSize:function(_,m,f){if(f.uniformtext.mode){var o=l(_),e=f.uniformtext.minsize,i=m.scale*m.fontSize;m.hide=i<e,f[o]=f[o]||1/0,m.hide||(f[o]=Math.min(f[o],Math.max(i,e)))}},clearMinTextSize:function(_,m){m[l(_)]=void 0},resizeText:function(_,m,f){var o=_._fullLayout,e=o["_"+f+"Text_minsize"];if(e){var i,r=o.uniformtext.mode==="hide";switch(f){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}m.selectAll(i).each(function(n){var s=n.transform;if(s){s.scale=r&&s.hide?0:e/s.fontSize;var a=A.select(this).select("text");M.setTransormAndDisplay(a,s)}})}}}},55023:function($,P,t){var A=t(5386).fF,M=t(1426).extendFlat,l=t(81245),_=t(1486);$.exports={r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,base:M({},_.base,{}),offset:M({},_.offset,{}),width:M({},_.width,{}),text:M({},_.text,{}),hovertext:M({},_.hovertext,{}),marker:_.marker,hoverinfo:l.hoverinfo,hovertemplate:A(),selected:_.selected,unselected:_.unselected}},74692:function($,P,t){var A=t(52075).hasColorscale,M=t(78803),l=t(75341),_=t(11661).setGroupPositions,m=t(66279),f=t(73972).traceIs,o=t(71828).extendFlat;$.exports={calc:function(e,i){for(var r=e._fullLayout,n=i.subplot,s=r[n].radialaxis,a=r[n].angularaxis,u=s.makeCalcdata(i,"r"),p=a.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=u,h=p,b=0;b<c;b++)x[b]={p:h[b],s:g[b]};function v(y){var w=i[y];w!==void 0&&(i["_"+y]=Array.isArray(w)?a.makeCalcdata(i,y):a.d2c(w,i.thetaunit))}return a.type==="linear"&&(v("width"),v("offset")),A(i,"marker")&&M(e,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),A(i,"marker.line")&&M(e,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),l(x,i),m(x,i),x},crossTraceCalc:function(e,i,r){for(var n=e.calcdata,s=[],a=0;a<n.length;a++){var u=n[a],p=u[0].trace;p.visible===!0&&f(p,"bar")&&p.subplot===r&&s.push(u)}var c=o({},i.radialaxis,{_id:"x"}),x=i.angularaxis;_(e,x,c,s,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},6135:function($,P,t){var A=t(71828),M=t(22184).handleRThetaDefaults,l=t(98340),_=t(55023);$.exports=function(m,f,o,e){function i(r,n){return A.coerce(m,f,_,r,n)}M(m,f,e,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),l(m,f,i,o,e),A.coerceSelectionMarkerOpacity(f,i)):f.visible=!1}},27379:function($,P,t){var A=t(30211),M=t(71828),l=t(95423).getTraceColor,_=M.fillText,m=t(59150).makeHoverPointText,f=t(10869).isPtInsidePolygon;$.exports=function(o,e,i){var r=o.cd,n=r[0].trace,s=o.subplot,a=s.radialAxis,u=s.angularAxis,p=s.vangles,c=p?f:M.isPtInsideSector,x=o.maxHoverDistance,g=u._period||2*Math.PI,h=Math.abs(a.g2p(Math.sqrt(e*e+i*i))),b=Math.atan2(i,e);if(a.range[0]>a.range[1]&&(b+=Math.PI),A.getClosest(r,function(w){return c(h,b,[w.rp0,w.rp1],[w.thetag0,w.thetag1],p)?x+Math.min(1,Math.abs(w.thetag1-w.thetag0)/g)-1+(w.rp1-h)/(w.rp1-w.rp0)-1:1/0},o),o.index!==!1){var v=r[o.index];o.x0=o.x1=v.ct[0],o.y0=o.y1=v.ct[1];var y=M.extendFlat({},v,{r:v.s,theta:v.p});return _(v,n,o),m(y,n,s,o),o.hovertemplate=n.hovertemplate,o.color=l(n,v),o.xLabelVal=o.yLabelVal=void 0,v.s<0&&(o.idealAlign="left"),[o]}}},23381:function($,P,t){$.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(23580),categories:["polar","bar","showLegend"],attributes:t(55023),layoutAttributes:t(40151),supplyDefaults:t(6135),supplyLayoutDefaults:t(19860),calc:t(74692).calc,crossTraceCalc:t(74692).crossTraceCalc,plot:t(60173),colorbar:t(4898),formatLabels:t(98608),style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,hoverPoints:t(27379),selectPoints:t(81974),meta:{}}},40151:function($){$.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},19860:function($,P,t){var A=t(71828),M=t(40151);$.exports=function(l,_,m){var f,o={};function e(n,s){return A.coerce(l[f]||{},_[f],M,n,s)}for(var i=0;i<m.length;i++){var r=m[i];r.type==="barpolar"&&r.visible===!0&&(o[f=r.subplot]||(e("barmode"),e("bargap"),o[f]=1))}}},60173:function($,P,t){var A=t(39898),M=t(92770),l=t(71828),_=t(91424),m=t(10869);$.exports=function(f,o,e){var i=f._context.staticPlot,r=o.xaxis,n=o.yaxis,s=o.radialAxis,a=o.angularAxis,u=function(c){var x=c.cxx,g=c.cyy;return c.vangles?function(h,b,v,y){var w,d;l.angleDelta(v,y)>0?(w=v,d=y):(w=y,d=v);var S=[m.findEnclosingVertexAngles(w,c.vangles)[0],(w+d)/2,m.findEnclosingVertexAngles(d,c.vangles)[1]];return m.pathPolygonAnnulus(h,b,w,d,S,x,g)}:function(h,b,v,y){return l.pathAnnulus(h,b,v,y,x,g)}}(o),p=o.layers.frontplot.select("g.barlayer");l.makeTraceGroups(p,e,"trace bars").each(function(){var c=A.select(this),x=l.ensureSingle(c,"g","points").selectAll("g.point").data(l.identity);x.enter().append("g").style("vector-effect",i?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(g){var h,b=A.select(this),v=g.rp0=s.c2p(g.s0),y=g.rp1=s.c2p(g.s1),w=g.thetag0=a.c2g(g.p0),d=g.thetag1=a.c2g(g.p1);if(M(v)&&M(y)&&M(w)&&M(d)&&v!==y&&w!==d){var S=s.c2g(g.s1),T=(w+d)/2;g.ct=[r.c2p(S*Math.cos(T)),n.c2p(S*Math.sin(T))],h=u(v,y,w,d)}else h="M0,0Z";l.ensureSingle(b,"path").attr("d",h)}),_.setClipUrl(c,o._hasClipOnAxisFalse?o.clipIds.forTraces:null,f)})}},53522:function($,P,t){var A=t(82196),M=t(1486),l=t(22399),_=t(12663).axisHoverFormat,m=t(5386).fF,f=t(1426).extendFlat,o=A.marker,e=o.line;$.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:f({},o.symbol,{arrayOk:!1,editType:"plot"}),opacity:f({},o.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:f({},o.angle,{arrayOk:!1,editType:"calc"}),size:f({},o.size,{arrayOk:!1,editType:"calc"}),color:f({},o.color,{arrayOk:!1,editType:"style"}),line:{color:f({},e.color,{arrayOk:!1,dflt:l.defaultLine,editType:"style"}),width:f({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup,selected:{marker:A.selected.marker,editType:"style"},unselected:{marker:A.unselected.marker,editType:"style"},text:f({},A.text,{}),hovertext:f({},A.hovertext,{}),hovertemplate:m({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},48518:function($,P,t){var A=t(92770),M=t(89298),l=t(42973),_=t(71828),m=t(50606).BADNUM,f=_._;$.exports=function(c,x){var g,h,b,v,y,w,d,S=c._fullLayout,T=M.getFromId(c,x.xaxis||"x"),E=M.getFromId(c,x.yaxis||"y"),C=[],L=x.type==="violin"?"_numViolins":"_numBoxes";x.orientation==="h"?(b=T,v="x",y=E,w="y",d=!!x.yperiodalignment):(b=E,v="y",y=T,w="x",d=!!x.xperiodalignment);var O,z,G,I,H,N,F=function(Re,ze,He,We){var Je,lt=ze+"0"in Re;if(ze in Re||lt&&"d"+ze in Re){var et=He.makeCalcdata(Re,ze);return[l(Re,He,ze,et).vals,et]}Je=lt?Re[ze+"0"]:"name"in Re&&(He.type==="category"||A(Re.name)&&["linear","log"].indexOf(He.type)!==-1||_.isDateTime(Re.name)&&He.type==="date")?Re.name:We;for(var yt=He.type==="multicategory"?He.r2c_just_indices(Je):He.d2c(Je,0,Re[ze+"calendar"]),_t=Re._length,xt=new Array(_t),at=0;at<_t;at++)xt[at]=yt;return[xt]}(x,w,y,S[L]),V=F[0],W=F[1],te=_.distinctVals(V,y),Q=te.vals,X=te.minDiff/2,q=(x.boxpoints||x.points)==="all"?_.identity:function(Re){return Re.v<O.lf||Re.v>O.uf};if(x._hasPreCompStats){var Z=x[v],J=function(Re){return b.d2c((x[Re]||[])[g])},ne=1/0,re=-1/0;for(g=0;g<x._length;g++){var ae=V[g];if(A(ae)){if((O={}).pos=O[w]=ae,d&&W&&(O.orig_p=W[g]),O.q1=J("q1"),O.med=J("median"),O.q3=J("q3"),z=[],Z&&_.isArrayOrTypedArray(Z[g]))for(h=0;h<Z[g].length;h++)(N=b.d2c(Z[g][h]))!==m&&(e(H={v:N,i:[g,h]},x,[g,h]),z.push(H));if(O.pts=z.sort(i),I=(G=O[v]=z.map(r)).length,O.med!==m&&O.q1!==m&&O.q3!==m&&O.med>=O.q1&&O.q3>=O.med){var ue=J("lowerfence");O.lf=ue!==m&&ue<=O.q1?ue:n(O,G,I);var he=J("upperfence");O.uf=he!==m&&he>=O.q3?he:s(O,G,I);var de=J("mean");O.mean=de!==m?de:I?_.mean(G,I):(O.q1+O.q3)/2;var xe=J("sd");O.sd=de!==m&&xe>=0?xe:I?_.stdev(G,I,O.mean):O.q3-O.q1,O.lo=a(O),O.uo=u(O);var me=J("notchspan");me=me!==m&&me>0?me:p(O,I),O.ln=O.med-me,O.un=O.med+me;var ve=O.lf,Le=O.uf;x.boxpoints&&G.length&&(ve=Math.min(ve,G[0]),Le=Math.max(Le,G[I-1])),x.notched&&(ve=Math.min(ve,O.ln),Le=Math.max(Le,O.un)),O.min=ve,O.max=Le}else{var Ae;_.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+O.q1,"median = "+O.med,"q3 = "+O.q3].join(`
`)),Ae=O.med!==m?O.med:O.q1!==m?O.q3!==m?(O.q1+O.q3)/2:O.q1:O.q3!==m?O.q3:0,O.med=Ae,O.q1=O.q3=Ae,O.lf=O.uf=Ae,O.mean=O.sd=Ae,O.ln=O.un=Ae,O.min=O.max=Ae}ne=Math.min(ne,O.min),re=Math.max(re,O.max),O.pts2=z.filter(q),C.push(O)}}x._extremes[b._id]=M.findExtremes(b,[ne,re],{padded:!0})}else{var we=b.makeCalcdata(x,v),se=function(Re,ze){for(var He=Re.length,We=new Array(He+1),Je=0;Je<He;Je++)We[Je]=Re[Je]-ze;return We[He]=Re[He-1]+ze,We}(Q,X),oe=Q.length,fe=function(Re){for(var ze=new Array(Re),He=0;He<Re;He++)ze[He]=[];return ze}(oe);for(g=0;g<x._length;g++)if(N=we[g],A(N)){var Se=_.findBin(V[g],se);Se>=0&&Se<oe&&(e(H={v:N,i:g},x,g),fe[Se].push(H))}var Me=1/0,be=-1/0,Ie=x.quartilemethod,Be=Ie==="exclusive",ce=Ie==="inclusive";for(g=0;g<oe;g++)if(fe[g].length>0){var Te,ye;(O={}).pos=O[w]=Q[g],z=O.pts=fe[g].sort(i),I=(G=O[v]=z.map(r)).length,O.min=G[0],O.max=G[I-1],O.mean=_.mean(G,I),O.sd=_.stdev(G,I,O.mean)*x.sdmultiple,O.med=_.interp(G,.5),I%2&&(Be||ce)?(Be?(Te=G.slice(0,I/2),ye=G.slice(I/2+1)):ce&&(Te=G.slice(0,I/2+1),ye=G.slice(I/2)),O.q1=_.interp(Te,.5),O.q3=_.interp(ye,.5)):(O.q1=_.interp(G,.25),O.q3=_.interp(G,.75)),O.lf=n(O,G,I),O.uf=s(O,G,I),O.lo=a(O),O.uo=u(O);var Pe=p(O,I);O.ln=O.med-Pe,O.un=O.med+Pe,Me=Math.min(Me,O.ln),be=Math.max(be,O.un),O.pts2=z.filter(q),C.push(O)}x._extremes[b._id]=M.findExtremes(b,x.notched?we.concat([Me,be]):we,{padded:!0})}return function(Re,ze){if(_.isArrayOrTypedArray(ze.selectedpoints))for(var He=0;He<Re.length;He++){for(var We=Re[He].pts||[],Je={},lt=0;lt<We.length;lt++)Je[We[lt].i]=lt;_.tagSelected(We,ze,Je)}}(C,x),C.length>0?(C[0].t={num:S[L],dPos:X,posLetter:w,valLetter:v,labels:{med:f(c,"median:"),min:f(c,"min:"),q1:f(c,"q1:"),q3:f(c,"q3:"),max:f(c,"max:"),mean:x.boxmean==="sd"||x.sizemode==="sd"?f(c,"mean  :").replace("",x.sdmultiple===1?"":x.sdmultiple+""):f(c,"mean:"),lf:f(c,"lower fence:"),uf:f(c,"upper fence:")}},S[L]++,C):[{t:{empty:!0}}]};var o={text:"tx",hovertext:"htx"};function e(c,x,g){for(var h in o)_.isArrayOrTypedArray(x[h])&&(Array.isArray(g)?_.isArrayOrTypedArray(x[h][g[0]])&&(c[o[h]]=x[h][g[0]][g[1]]):c[o[h]]=x[h][g])}function i(c,x){return c.v-x.v}function r(c){return c.v}function n(c,x,g){return g===0?c.q1:Math.min(c.q1,x[Math.min(_.findBin(2.5*c.q1-1.5*c.q3,x,!0)+1,g-1)])}function s(c,x,g){return g===0?c.q3:Math.max(c.q3,x[Math.max(_.findBin(2.5*c.q3-1.5*c.q1,x),0)])}function a(c){return 4*c.q1-3*c.q3}function u(c){return 4*c.q3-3*c.q1}function p(c,x){return x===0?0:1.57*(c.q3-c.q1)/Math.sqrt(x)}},37188:function($,P,t){var A=t(89298),M=t(71828),l=t(99082).getAxisGroup,_=["v","h"];function m(f,o,e,i){var r,n,s,a=o.calcdata,u=o._fullLayout,p=i._id,c=p.charAt(0),x=[],g=0;for(r=0;r<e.length;r++)for(s=a[e[r]],n=0;n<s.length;n++)x.push(i.c2l(s[n].pos,!0)),g+=(s[n].pts2||[]).length;if(x.length){var h=M.distinctVals(x);i.type!=="category"&&i.type!=="multicategory"||(h.minDiff=1);var b=h.minDiff/2;A.minDtick(i,h.minDiff,h.vals[0],!0);var v=u[f==="violin"?"_numViolins":"_numBoxes"],y=u[f+"mode"]==="group"&&v>1,w=1-u[f+"gap"],d=1-u[f+"groupgap"];for(r=0;r<e.length;r++){var S,T,E,C,L,O,z=(s=a[e[r]])[0].trace,G=s[0].t,I=z.width,H=z.side;if(I)S=T=C=I/2,E=0;else if(S=b,y){var N=l(u,i._id)+z.orientation,F=(u._alignmentOpts[N]||{})[z.alignmentgroup]||{},V=Object.keys(F.offsetGroups||{}).length,W=V||v;T=S*w*d/W,E=2*S*(((V?z._offsetIndex:G.num)+.5)/W-.5)*w,C=S*w/W}else T=S*w*d,E=0,C=S;G.dPos=S,G.bPos=E,G.bdPos=T,G.wHover=C;var te,Q,X,q,Z,J,ne=E+T,re=!!I;if(H==="positive"?(L=S*(I?1:.5),te=ne,O=te=E):H==="negative"?(L=te=E,O=S*(I?1:.5),Q=ne):(L=O=S,te=Q=ne),(z.boxpoints||z.points)&&g>0){var ae=z.pointpos,ue=z.jitter,he=z.marker.size/2,de=0;ae+ue>=0&&((de=ne*(ae+ue))>L?(re=!0,Z=he,X=de):de>te&&(Z=he,X=L)),de<=L&&(X=L);var xe=0;ae-ue<=0&&((xe=-ne*(ae-ue))>O?(re=!0,J=he,q=xe):xe>Q&&(J=he,q=O)),xe<=O&&(q=O)}else X=L,q=O;var me=new Array(s.length);for(n=0;n<s.length;n++)me[n]=s[n].pos;z._extremes[p]=A.findExtremes(i,me,{padded:re,vpadminus:q,vpadplus:X,vpadLinearized:!0,ppadminus:{x:J,y:Z}[c],ppadplus:{x:Z,y:J}[c]})}}}$.exports={crossTraceCalc:function(f,o){for(var e=f.calcdata,i=o.xaxis,r=o.yaxis,n=0;n<_.length;n++){for(var s=_[n],a=s==="h"?r:i,u=[],p=0;p<e.length;p++){var c=e[p],x=c[0].t,g=c[0].trace;g.visible!==!0||g.type!=="box"&&g.type!=="candlestick"||x.empty||(g.orientation||"v")!==s||g.xaxis!==i._id||g.yaxis!==r._id||u.push(p)}m("box",f,u,a)}},setPositionOffset:m}},36411:function($,P,t){var A=t(71828),M=t(73972),l=t(7901),_=t(73927),m=t(26125),f=t(4322),o=t(53522);function e(r,n,s,a){function u(H){var N=0;return H&&H.length&&(N+=1,A.isArrayOrTypedArray(H[0])&&H[0].length&&(N+=1)),N}function p(H){return A.validate(r[H],o[H])}var c,x=s("y"),g=s("x");if(n.type==="box"){var h=s("q1"),b=s("median"),v=s("q3");n._hasPreCompStats=h&&h.length&&b&&b.length&&v&&v.length,c=Math.min(A.minRowLength(h),A.minRowLength(b),A.minRowLength(v))}var y,w,d=u(x),S=u(g),T=d&&A.minRowLength(x),E=S&&A.minRowLength(g),C=a.calendar,L={autotypenumbers:a.autotypenumbers};if(n._hasPreCompStats)switch(String(S)+String(d)){case"00":var O=p("x0")||p("dx");y=!p("y0")&&!p("dy")||O?"v":"h",w=c;break;case"10":y="v",w=Math.min(c,E);break;case"20":y="h",w=Math.min(c,g.length);break;case"01":y="h",w=Math.min(c,T);break;case"02":y="v",w=Math.min(c,x.length);break;case"12":y="v",w=Math.min(c,E,x.length);break;case"21":y="h",w=Math.min(c,g.length,T);break;case"11":w=0;break;case"22":var z,G=!1;for(z=0;z<g.length;z++)if(f(g[z],C,L)==="category"){G=!0;break}if(G)y="v",w=Math.min(c,E,x.length);else{for(z=0;z<x.length;z++)if(f(x[z],C,L)==="category"){G=!0;break}G?(y="h",w=Math.min(c,g.length,T)):(y="v",w=Math.min(c,E,x.length))}}else d>0?(y="v",w=S>0?Math.min(E,T):Math.min(T)):S>0?(y="h",w=Math.min(E)):w=0;if(w){n._length=w;var I=s("orientation",y);n._hasPreCompStats?I==="v"&&S===0?(s("x0",0),s("dx",1)):I==="h"&&d===0&&(s("y0",0),s("dy",1)):I==="v"&&S===0?s("x0"):I==="h"&&d===0&&s("y0"),M.getComponentMethod("calendars","handleTraceDefaults")(r,n,["x","y"],a)}else n.visible=!1}function i(r,n,s,a){var u=a.prefix,p=A.coerce2(r,n,o,"marker.outliercolor"),c=s("marker.line.outliercolor"),x="outliers";n._hasPreCompStats?x="all":(p||c)&&(x="suspectedoutliers");var g=s(u+"points",x);g?(s("jitter",g==="all"?.3:0),s("pointpos",g==="all"?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.angle"),s("marker.color",n.line.color),s("marker.line.color"),s("marker.line.width"),g==="suspectedoutliers"&&(s("marker.line.outliercolor",n.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete n.marker;var h=s("hoveron");h!=="all"&&h.indexOf("points")===-1||s("hovertemplate"),A.coerceSelectionMarkerOpacity(n,s)}$.exports={supplyDefaults:function(r,n,s,a){function u(w,d){return A.coerce(r,n,o,w,d)}if(e(r,n,u,a),n.visible!==!1){_(r,n,a,u),u("xhoverformat"),u("yhoverformat");var p=n._hasPreCompStats;p&&(u("lowerfence"),u("upperfence")),u("line.color",(r.marker||{}).color||s),u("line.width"),u("fillcolor",l.addOpacity(n.line.color,.5));var c=!1;if(p){var x=u("mean"),g=u("sd");x&&x.length&&(c=!0,g&&g.length&&(c="sd"))}u("whiskerwidth");var h,b=u("sizemode");b==="quartiles"&&(h=u("boxmean",c)),u("showwhiskers",b==="quartiles"),b!=="sd"&&h!=="sd"||u("sdmultiple"),u("width"),u("quartilemethod");var v=!1;if(p){var y=u("notchspan");y&&y.length&&(v=!0)}else A.validate(r.notchwidth,o.notchwidth)&&(v=!0);u("notched",v)&&u("notchwidth"),i(r,n,u,{prefix:"box"})}},crossTraceDefaults:function(r,n){var s,a;function u(x){return A.coerce(a._input,a,o,x)}for(var p=0;p<r.length;p++){var c=(a=r[p]).type;c!=="box"&&c!=="violin"||(s=a._input,n[c+"mode"]==="group"&&m(s,a,n,u))}},handleSampleDefaults:e,handlePointsDefaults:i}},74907:function($){$.exports=function(P,t){return t.hoverOnBox&&(P.hoverOnBox=t.hoverOnBox),"xVal"in t&&(P.x=t.xVal),"yVal"in t&&(P.y=t.yVal),t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),P}},41868:function($,P,t){var A=t(89298),M=t(71828),l=t(30211),_=t(7901),m=M.fillText;function f(e,i,r,n){var s,a,u,p,c,x,g,h,b,v,y,w,d,S,T=e.cd,E=e.xa,C=e.ya,L=T[0].trace,O=T[0].t,z=L.type==="violin",G=O.bdPos,I=O.wHover,H=function(Ae){return u.c2l(Ae.pos)+O.bPos-u.c2l(x)};z&&L.side!=="both"?(L.side==="positive"&&(b=function(Ae){var we=H(Ae);return l.inbox(we,we+I,v)},w=G,d=0),L.side==="negative"&&(b=function(Ae){var we=H(Ae);return l.inbox(we-I,we,v)},w=0,d=G)):(b=function(Ae){var we=H(Ae);return l.inbox(we-I,we+I,v)},w=d=G),S=z?function(Ae){return l.inbox(Ae.span[0]-c,Ae.span[1]-c,v)}:function(Ae){return l.inbox(Ae.min-c,Ae.max-c,v)},L.orientation==="h"?(c=i,x=r,g=S,h=b,s="y",u=C,a="x",p=E):(c=r,x=i,g=b,h=S,s="x",u=E,a="y",p=C);var N=Math.min(1,G/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(Ae){return(g(Ae)+h(Ae))/2}v=e.maxHoverDistance-N,y=e.maxSpikeDistance-N;var V=l.getDistanceFunction(n,g,h,F);if(l.getClosest(T,V,e),e.index===!1)return[];var W=T[e.index],te=L.line.color,Q=(L.marker||{}).color;_.opacity(te)&&L.line.width?e.color=te:_.opacity(Q)&&L.boxpoints?e.color=Q:e.color=L.fillcolor,e[s+"0"]=u.c2p(W.pos+O.bPos-d,!0),e[s+"1"]=u.c2p(W.pos+O.bPos+w,!0),e[s+"LabelVal"]=W.orig_p!==void 0?W.orig_p:W.pos;var X=s+"Spike";e.spikeDistance=F(W)*y/v,e[X]=u.c2p(W.pos,!0);var q=L.boxmean||L.sizemode==="sd"||(L.meanline||{}).visible,Z=L.boxpoints||L.points,J=Z&&q?["max","uf","q3","med","mean","q1","lf","min"]:Z&&!q?["max","uf","q3","med","q1","lf","min"]:!Z&&q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],ne=p.range[1]<p.range[0];L.orientation===(ne?"v":"h")&&J.reverse();for(var re=e.spikeDistance,ae=e[X],ue=[],he=0;he<J.length;he++){var de=J[he];if(de in W){var xe=W[de],me=p.c2p(xe,!0),ve=M.extendFlat({},e);ve.attr=de,ve[a+"0"]=ve[a+"1"]=me,ve[a+"LabelVal"]=xe,ve[a+"Label"]=(O.labels?O.labels[de]+" ":"")+A.hoverLabelText(p,xe,L[a+"hoverformat"]),ve.hoverOnBox=!0,de!=="mean"||!("sd"in W)||L.boxmean!=="sd"&&L.sizemode!=="sd"||(ve[a+"err"]=W.sd),ve.hovertemplate=!1,ue.push(ve)}}e.name="",e.spikeDistance=void 0,e[X]=void 0;for(var Le=0;Le<ue.length;Le++)ue[Le].attr!=="med"?(ue[Le].name="",ue[Le].spikeDistance=void 0,ue[Le][X]=void 0):(ue[Le].spikeDistance=re,ue[Le][X]=ae);return ue}function o(e,i,r){for(var n,s,a,u=e.cd,p=e.xa,c=e.ya,x=u[0].trace,g=p.c2p(i),h=c.c2p(r),b=l.quadrature(function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(p.c2p(z.x)-g)-G,1-3/G)},function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(c.c2p(z.y)-h)-G,1-3/G)}),v=!1,y=0;y<u.length;y++){s=u[y];for(var w=0;w<(s.pts||[]).length;w++){var d=b(a=s.pts[w]);d<=e.distance&&(e.distance=d,v=[y,w])}}if(!v)return!1;a=(s=u[v[0]]).pts[v[1]];var S=p.c2p(a.x,!0),T=c.c2p(a.y,!0),E=a.mrc||1;n=M.extendFlat({},e,{index:a.i,color:(x.marker||{}).color,name:x.name,x0:S-E,x1:S+E,y0:T-E,y1:T+E,spikeDistance:e.distance,hovertemplate:x.hovertemplate});var C,L=s.orig_p,O=L!==void 0?L:s.pos;return x.orientation==="h"?(C=c,n.xLabelVal=a.x,n.yLabelVal=O):(C=p,n.xLabelVal=O,n.yLabelVal=a.y),n[C._id.charAt(0)+"Spike"]=C.c2p(s.pos,!0),m(a,x,n),n}$.exports={hoverPoints:function(e,i,r,n){var s,a=e.cd[0].trace.hoveron,u=[];return a.indexOf("boxes")!==-1&&(u=u.concat(f(e,i,r,n))),a.indexOf("points")!==-1&&(s=o(e,i,r)),n==="closest"?s?[s]:u:(s&&u.push(s),u)},hoverOnBoxes:f,hoverOnPoints:o}},83832:function($,P,t){$.exports={attributes:t(53522),layoutAttributes:t(40094),supplyDefaults:t(36411).supplyDefaults,crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(4199).supplyLayoutDefaults,calc:t(48518),crossTraceCalc:t(37188).crossTraceCalc,plot:t(86047).plot,style:t(58063).style,styleOnSelect:t(58063).styleOnSelect,hoverPoints:t(41868).hoverPoints,eventData:t(74907),selectPoints:t(24626),moduleType:"trace",name:"box",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},40094:function($){$.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},4199:function($,P,t){var A=t(73972),M=t(71828),l=t(40094);function _(m,f,o,e,i){for(var r=i+"Layout",n=!1,s=0;s<o.length;s++){var a=o[s];if(A.traceIs(a,r)){n=!0;break}}n&&(e(i+"mode"),e(i+"gap"),e(i+"groupgap"))}$.exports={supplyLayoutDefaults:function(m,f,o){_(0,0,o,function(e,i){return M.coerce(m,f,l,e,i)},"box")},_supply:_}},86047:function($,P,t){var A=t(39898),M=t(71828),l=t(91424);function _(o,e,i,r,n){var s,a,u=i.orientation==="h",p=e.val,c=e.pos,x=!!c.rangebreaks,g=r.bPos,h=r.wdPos||0,b=r.bPosPxOffset||0,v=i.whiskerwidth||0,y=i.showwhiskers!==!1,w=i.notched||!1,d=w?1-2*i.notchwidth:1;Array.isArray(r.bdPos)?(s=r.bdPos[0],a=r.bdPos[1]):(s=r.bdPos,a=r.bdPos);var S=o.selectAll("path.box").data(i.type!=="violin"||i.box.visible?M.identity:[]);S.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","box"),S.exit().remove(),S.each(function(T){if(T.empty)return A.select(this).attr("d","M0,0Z");var E=c.c2l(T.pos+g,!0),C=c.l2p(E-s)+b,L=c.l2p(E+a)+b,O=x?(C+L)/2:c.l2p(E)+b,z=i.whiskerwidth,G=x?C*z+(1-z)*O:c.l2p(E-h)+b,I=x?L*z+(1-z)*O:c.l2p(E+h)+b,H=c.l2p(E-s*d)+b,N=c.l2p(E+a*d)+b,F=i.sizemode==="sd",V=p.c2p(F?T.mean-T.sd:T.q1,!0),W=F?p.c2p(T.mean+T.sd,!0):p.c2p(T.q3,!0),te=M.constrain(F?p.c2p(T.mean,!0):p.c2p(T.med,!0),Math.min(V,W)+1,Math.max(V,W)-1),Q=T.lf===void 0||i.boxpoints===!1||F,X=p.c2p(Q?T.min:T.lf,!0),q=p.c2p(Q?T.max:T.uf,!0),Z=p.c2p(T.ln,!0),J=p.c2p(T.un,!0);u?A.select(this).attr("d","M"+te+","+H+"V"+N+"M"+V+","+C+"V"+L+(w?"H"+Z+"L"+te+","+N+"L"+J+","+L:"")+"H"+W+"V"+C+(w?"H"+J+"L"+te+","+H+"L"+Z+","+C:"")+"Z"+(y?"M"+V+","+O+"H"+X+"M"+W+","+O+"H"+q+(v===0?"":"M"+X+","+G+"V"+I+"M"+q+","+G+"V"+I):"")):A.select(this).attr("d","M"+H+","+te+"H"+N+"M"+C+","+V+"H"+L+(w?"V"+Z+"L"+N+","+te+"L"+L+","+J:"")+"V"+W+"H"+C+(w?"V"+J+"L"+H+","+te+"L"+C+","+Z:"")+"Z"+(y?"M"+O+","+V+"V"+X+"M"+O+","+W+"V"+q+(v===0?"":"M"+G+","+X+"H"+I+"M"+G+","+q+"H"+I):""))})}function m(o,e,i,r){var n=e.x,s=e.y,a=r.bdPos,u=r.bPos,p=i.boxpoints||i.points;M.seedPseudoRandom();var c=o.selectAll("g.points").data(p?function(g){return g.forEach(function(h){h.t=r,h.trace=i}),g}:[]);c.enter().append("g").attr("class","points"),c.exit().remove();var x=c.selectAll("path").data(function(g){var h,b,v=g.pts2,y=Math.max((g.max-g.min)/10,g.q3-g.q1),w=1e-9*y,d=.01*y,S=[],T=0;if(i.jitter){if(y===0)for(T=1,S=new Array(v.length),h=0;h<v.length;h++)S[h]=1;else for(h=0;h<v.length;h++){var E=Math.max(0,h-5),C=v[E].v,L=Math.min(v.length-1,h+5),O=v[L].v;p!=="all"&&(v[h].v<g.lf?O=Math.min(O,g.lf):C=Math.max(C,g.uf));var z=Math.sqrt(d*(L-E)/(O-C+w))||0;z=M.constrain(Math.abs(z),0,1),S.push(z),T=Math.max(z,T)}b=2*i.jitter/(T||1)}for(h=0;h<v.length;h++){var G=v[h],I=G.v,H=i.jitter?b*S[h]*(M.pseudoRandom()-.5):0,N=g.pos+u+a*(i.pointpos+H);i.orientation==="h"?(G.y=N,G.x=I):(G.x=N,G.y=I),p==="suspectedoutliers"&&I<g.uo&&I>g.lo&&(G.so=!0)}return v});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(l.translatePoints,n,s)}function f(o,e,i,r){var n,s,a=e.val,u=e.pos,p=!!u.rangebreaks,c=r.bPos,x=r.bPosPxOffset||0,g=i.boxmean||(i.meanline||{}).visible;Array.isArray(r.bdPos)?(n=r.bdPos[0],s=r.bdPos[1]):(n=r.bdPos,s=r.bdPos);var h=o.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?M.identity:[]);h.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),h.exit().remove(),h.each(function(b){var v=u.c2l(b.pos+c,!0),y=u.l2p(v-n)+x,w=u.l2p(v+s)+x,d=p?(y+w)/2:u.l2p(v)+x,S=a.c2p(b.mean,!0),T=a.c2p(b.mean-b.sd,!0),E=a.c2p(b.mean+b.sd,!0);i.orientation==="h"?A.select(this).attr("d","M"+S+","+y+"V"+w+(g==="sd"?"m0,0L"+T+","+d+"L"+S+","+y+"L"+E+","+d+"Z":"")):A.select(this).attr("d","M"+y+","+S+"H"+w+(g==="sd"?"m0,0L"+d+","+T+"L"+y+","+S+"L"+d+","+E+"Z":""))})}$.exports={plot:function(o,e,i,r){var n=o._context.staticPlot,s=e.xaxis,a=e.yaxis;M.makeTraceGroups(r,i,"trace boxes").each(function(u){var p,c,x=A.select(this),g=u[0],h=g.t,b=g.trace;h.wdPos=h.bdPos*b.whiskerwidth,b.visible!==!0||h.empty?x.remove():(b.orientation==="h"?(p=a,c=s):(p=s,c=a),_(x,{pos:p,val:c},b,h,n),m(x,{x:s,y:a},b,h),f(x,{pos:p,val:c},b,h))})},plotBoxAndWhiskers:_,plotPoints:m,plotBoxMean:f}},24626:function($){$.exports=function(P,t){var A,M,l=P.cd,_=P.xaxis,m=P.yaxis,f=[];if(t===!1)for(A=0;A<l.length;A++)for(M=0;M<(l[A].pts||[]).length;M++)l[A].pts[M].selected=0;else for(A=0;A<l.length;A++)for(M=0;M<(l[A].pts||[]).length;M++){var o=l[A].pts[M],e=_.c2p(o.x),i=m.c2p(o.y);t.contains([e,i],null,o.i,P)?(f.push({pointNumber:o.i,x:_.c2d(o.x),y:m.c2d(o.y)}),o.selected=1):o.selected=0}return f}},58063:function($,P,t){var A=t(39898),M=t(7901),l=t(91424);$.exports={style:function(_,m,f){var o=f||A.select(_).selectAll("g.trace.boxes");o.style("opacity",function(e){return e[0].trace.opacity}),o.each(function(e){var i=A.select(this),r=e[0].trace,n=r.line.width;function s(p,c,x,g){p.style("stroke-width",c+"px").call(M.stroke,x).call(M.fill,g)}var a=i.selectAll("path.box");if(r.type==="candlestick")a.each(function(p){if(!p.empty){var c=A.select(this),x=r[p.dir];s(c,x.line.width,x.line.color,x.fillcolor),c.style("opacity",r.selectedpoints&&!p.selected?.3:1)}});else{s(a,n,r.line.color,r.fillcolor),i.selectAll("path.mean").style({"stroke-width":n,"stroke-dasharray":2*n+"px,"+n+"px"}).call(M.stroke,r.line.color);var u=i.selectAll("path.point");l.pointStyle(u,r,_)}})},styleOnSelect:function(_,m,f){var o=m[0].trace,e=f.selectAll("path.point");o.selectedpoints?l.selectedPointStyle(e,o):l.pointStyle(e,o,_)}}},75343:function($,P,t){var A=t(71828).extendFlat,M=t(12663).axisHoverFormat,l=t(2522),_=t(53522);function m(f){return{line:{color:A({},_.line.color,{dflt:f}),width:_.line.width,editType:"style"},fillcolor:_.fillcolor,editType:"style"}}$.exports={xperiod:l.xperiod,xperiod0:l.xperiod0,xperiodalignment:l.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:l.x,open:l.open,high:l.high,low:l.low,close:l.close,line:{width:A({},_.line.width,{}),editType:"style"},increasing:m(l.increasing.line.color.dflt),decreasing:m(l.decreasing.line.color.dflt),text:l.text,hovertext:l.hovertext,whiskerwidth:A({},_.whiskerwidth,{dflt:0}),hoverlabel:l.hoverlabel}},41197:function($,P,t){var A=t(71828),M=t(89298),l=t(42973),_=t(3485).calcCommon;function m(f,o,e,i){return{min:e,q1:Math.min(f,i),med:i,q3:Math.max(f,i),max:o}}$.exports=function(f,o){var e=f._fullLayout,i=M.getFromId(f,o.xaxis),r=M.getFromId(f,o.yaxis),n=i.makeCalcdata(o,"x"),s=l(o,i,"x",n).vals,a=_(f,o,n,s,r,m);return a.length?(A.extendFlat(a[0].t,{num:e._numBoxes,dPos:A.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),e._numBoxes++,a):[{t:{empty:!0}}]}},1026:function($,P,t){var A=t(71828),M=t(7901),l=t(14555),_=t(73927),m=t(75343);function f(o,e,i,r){var n=i(r+".line.color");i(r+".line.width",e.line.width),i(r+".fillcolor",M.addOpacity(n,.5))}$.exports=function(o,e,i,r){function n(s,a){return A.coerce(o,e,m,s,a)}l(o,e,n,r)?(_(o,e,r,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),f(0,e,n,"increasing"),f(0,e,n,"decreasing"),n("text"),n("hovertext"),n("whiskerwidth"),r._requestRangeslider[e.xaxis]=!0):e.visible=!1}},91815:function($,P,t){$.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(93612),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(75343),layoutAttributes:t(40094),supplyLayoutDefaults:t(4199).supplyLayoutDefaults,crossTraceCalc:t(37188).crossTraceCalc,supplyDefaults:t(1026),calc:t(41197),plot:t(86047).plot,layerName:"boxlayer",style:t(58063).style,hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},13145:function($,P,t){var A=t(11500),M=t(44467);$.exports=function(l,_,m,f,o){f("a")||(f("da"),f("a0")),f("b")||(f("db"),f("b0")),function(e,i,r,n){["aaxis","baxis"].forEach(function(s){var a=s.charAt(0),u=e[s]||{},p=M.newContainer(i,s),c={noTicklabelstep:!0,tickfont:"x",id:a+"axis",letter:a,font:i.font,name:s,data:e[a],calendar:i.calendar,dfltColor:n,bgColor:r.paper_bgcolor,autotypenumbersDflt:r.autotypenumbers,fullLayout:r};A(u,p,c),p._categories=p._categories||[],e[s]||u.type==="-"||(e[s]={type:u.type})})}(l,_,m,o)}},402:function($,P,t){var A=t(71828).isArrayOrTypedArray;function M(l,_){if(!A(l)||_>=10)return null;for(var m=1/0,f=-1/0,o=l.length,e=0;e<o;e++){var i=l[e];if(A(i)){var r=M(i,_+1);r&&(m=Math.min(r[0],m),f=Math.max(r[1],f))}else m=Math.min(i,m),f=Math.max(i,f)}return[m,f]}$.exports=function(l){return M(l,0)}},99798:function($,P,t){var A=t(41940),M=t(1928),l=t(22399),_=A({editType:"calc"});_.family.dflt='"Open Sans", verdana, arial, sans-serif',_.size.dflt=12,_.color.dflt=l.defaultLine,$.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:M,baxis:M,font:_,color:{valType:"color",dflt:l.defaultLine,editType:"plot"},transforms:void 0}},4536:function($,P,t){var A=t(71828).isArrayOrTypedArray;$.exports=function(M,l,_,m){var f,o,e,i,r,n,s,a,u,p,c,x,g,h=A(_)?"a":"b",b=(h==="a"?M.aaxis:M.baxis).smoothing,v=h==="a"?M.a2i:M.b2j,y=h==="a"?_:m,w=h==="a"?m:_,d=h==="a"?l.a.length:l.b.length,S=h==="a"?l.b.length:l.a.length,T=Math.floor(h==="a"?M.b2j(w):M.a2i(w)),E=h==="a"?function(te){return M.evalxy([],te,T)}:function(te){return M.evalxy([],T,te)};b&&(e=Math.max(0,Math.min(S-2,T)),i=T-e,o=h==="a"?function(te,Q){return M.dxydi([],te,e,Q,i)}:function(te,Q){return M.dxydj([],e,te,i,Q)});var C=v(y[0]),L=v(y[1]),O=C<L?1:-1,z=1e-8*(L-C),G=O>0?Math.floor:Math.ceil,I=O>0?Math.ceil:Math.floor,H=O>0?Math.min:Math.max,N=O>0?Math.max:Math.min,F=G(C+z),V=I(L-z),W=[[s=E(C)]];for(f=F;f*O<V*O;f+=O)r=[],c=N(C,f),g=(x=H(L,f+O))-c,n=Math.max(0,Math.min(d-2,Math.floor(.5*(c+x)))),a=E(x),b&&(u=o(n,c-n),p=o(n,x-n),r.push([s[0]+u[0]/3*g,s[1]+u[1]/3*g]),r.push([a[0]-p[0]/3*g,a[1]-p[1]/3*g])),r.push(a),W.push(r),s=a;return W}},1928:function($,P,t){var A=t(41940),M=t(22399),l=t(13838),_=t(12663).descriptionWithDates,m=t(30962).overrideAll,f=t(79952).P,o=t(1426).extendFlat;$.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:A({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:l.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:o({},l.labelalias,{editType:"calc"}),tickfont:A({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:_("tick label")},tickformatstops:m(l.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:M.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:o({},f,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:o({},f,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:M.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:A({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},11500:function($,P,t){var A=t(99798),M=t(7901).addOpacity,l=t(73972),_=t(71828),m=t(26218),f=t(96115),o=t(89426),e=t(15258),i=t(21994),r=t(4322);$.exports=function(n,s,a){var u=a.letter,p=a.font||{},c=A[u+"axis"];function x(O,z){return _.coerce(n,s,c,O,z)}function g(O,z){return _.coerce2(n,s,c,O,z)}a.name&&(s._name=a.name,s._id=a.name),x("autotypenumbers",a.autotypenumbersDflt);var h=x("type");h==="-"&&(a.data&&function(O,z){if(O.type==="-"){var G=O._id.charAt(0),I=O[G+"calendar"];O.type=r(z,I,{autotypenumbers:O.autotypenumbers})}}(s,a.data),s.type==="-"?s.type="linear":h=n.type=s.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",u+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),s.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),s._hovertitle=u,h==="date"&&l.getComponentMethod("calendars","handleDefaults")(n,s,"calendar",a.calendar),i(s,a.fullLayout),s.c2p=_.identity;var b=x("color",a.dfltColor),v=b===n.color?b:p.color;x("title.text")&&(_.coerceFont(x,"title.font",{family:p.family,size:_.bigFont(p.size),color:v}),x("title.offset")),x("tickangle"),x("autorange",!s.isValidRange(n.range))&&x("rangemode"),x("range"),s.cleanRange(),x("fixedrange"),m(n,s,x,h),o(n,s,x,h,a),f(n,s,x,h,a),e(n,s,x,{data:a.data,dataAttr:u});var y=g("gridcolor",M(b,.3)),w=g("gridwidth"),d=g("griddash"),S=x("showgrid");S||(delete s.gridcolor,delete s.gridwidth,delete s.griddash);var T=g("startlinecolor",b),E=g("startlinewidth",w);x("startline",s.showgrid||!!T||!!E)||(delete s.startlinecolor,delete s.startlinewidth);var C=g("endlinecolor",b),L=g("endlinewidth",w);return x("endline",s.showgrid||!!C||!!L)||(delete s.endlinecolor,delete s.endlinewidth),S?(x("minorgridcount"),x("minorgridwidth",w),x("minorgriddash",d),x("minorgridcolor",M(y,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgriddash,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridwidth,delete s.griddash),s.showticklabels==="none"&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,x("tickmode"),s}},25281:function($,P,t){var A=t(89298),M=t(71828).isArray1D,l=t(53824),_=t(402),m=t(20347),f=t(83311),o=t(44807),e=t(4742),i=t(72505),r=t(68296),n=t(11435);$.exports=function(s,a){var u=A.getFromId(s,a.xaxis),p=A.getFromId(s,a.yaxis),c=a.aaxis,x=a.baxis,g=a.x,h=a.y,b=[];g&&M(g)&&b.push("x"),h&&M(h)&&b.push("y"),b.length&&r(a,c,x,"a","b",b);var v=a._a=a._a||a.a,y=a._b=a._b||a.b;g=a._x||a.x,h=a._y||a.y;var w={};if(a._cheater){var d=c.cheatertype==="index"?v.length:v,S=x.cheatertype==="index"?y.length:y;g=l(d,S,a.cheaterslope)}a._x=g=e(g),a._y=h=e(h),i(g,v,y),i(h,v,y),n(a),a.setScale();var T=_(g),E=_(h),C=.5*(T[1]-T[0]),L=.5*(T[1]+T[0]),O=.5*(E[1]-E[0]),z=.5*(E[1]+E[0]),G=1.3;return T=[L-C*G,L+C*G],E=[z-O*G,z+O*G],a._extremes[u._id]=A.findExtremes(u,T,{padded:!0}),a._extremes[p._id]=A.findExtremes(p,E,{padded:!0}),m(a,"a","b"),m(a,"b","a"),f(a,c),f(a,x),w.clipsegments=o(a._xctrl,a._yctrl,c,x),w.x=g,w.y=h,w.a=v,w.b=y,[w]}},44807:function($){$.exports=function(P,t,A,M){var l,_,m,f=[],o=!!A.smoothing,e=!!M.smoothing,i=P[0].length-1,r=P.length-1;for(l=0,_=[],m=[];l<=i;l++)_[l]=P[0][l],m[l]=t[0][l];for(f.push({x:_,y:m,bicubic:o}),l=0,_=[],m=[];l<=r;l++)_[l]=P[l][i],m[l]=t[l][i];for(f.push({x:_,y:m,bicubic:e}),l=i,_=[],m=[];l>=0;l--)_[i-l]=P[r][l],m[i-l]=t[r][l];for(f.push({x:_,y:m,bicubic:o}),l=r,_=[],m=[];l>=0;l--)_[r-l]=P[l][0],m[r-l]=t[l][0];return f.push({x:_,y:m,bicubic:e}),f}},20347:function($,P,t){var A=t(89298),M=t(1426).extendFlat;$.exports=function(l,_,m){var f,o,e,i,r,n,s,a,u,p,c,x,g,h,b=l["_"+_],v=l[_+"axis"],y=v._gridlines=[],w=v._minorgridlines=[],d=v._boundarylines=[],S=l["_"+m],T=l[m+"axis"];v.tickmode==="array"&&(v.tickvals=b.slice());var E=l._xctrl,C=l._yctrl,L=E[0].length,O=E.length,z=l._a.length,G=l._b.length;A.prepTicks(v),v.tickmode==="array"&&delete v.tickvals;var I=v.smoothing?3:1;function H(F){var V,W,te,Q,X,q,Z,J,ne,re,ae,ue,he=[],de=[],xe={};if(_==="b")for(W=l.b2j(F),te=Math.floor(Math.max(0,Math.min(G-2,W))),Q=W-te,xe.length=G,xe.crossLength=z,xe.xy=function(me){return l.evalxy([],me,W)},xe.dxy=function(me,ve){return l.dxydi([],me,te,ve,Q)},V=0;V<z;V++)q=Math.min(z-2,V),Z=V-q,J=l.evalxy([],V,W),T.smoothing&&V>0&&(ne=l.dxydi([],V-1,te,0,Q),he.push(X[0]+ne[0]/3),de.push(X[1]+ne[1]/3),re=l.dxydi([],V-1,te,1,Q),he.push(J[0]-re[0]/3),de.push(J[1]-re[1]/3)),he.push(J[0]),de.push(J[1]),X=J;else for(V=l.a2i(F),q=Math.floor(Math.max(0,Math.min(z-2,V))),Z=V-q,xe.length=z,xe.crossLength=G,xe.xy=function(me){return l.evalxy([],V,me)},xe.dxy=function(me,ve){return l.dxydj([],q,me,Z,ve)},W=0;W<G;W++)te=Math.min(G-2,W),Q=W-te,J=l.evalxy([],V,W),T.smoothing&&W>0&&(ae=l.dxydj([],q,W-1,Z,0),he.push(X[0]+ae[0]/3),de.push(X[1]+ae[1]/3),ue=l.dxydj([],q,W-1,Z,1),he.push(J[0]-ue[0]/3),de.push(J[1]-ue[1]/3)),he.push(J[0]),de.push(J[1]),X=J;return xe.axisLetter=_,xe.axis=v,xe.crossAxis=T,xe.value=F,xe.constvar=m,xe.index=a,xe.x=he,xe.y=de,xe.smoothing=T.smoothing,xe}function N(F){var V,W,te,Q,X,q=[],Z=[],J={};if(J.length=b.length,J.crossLength=S.length,_==="b")for(te=Math.max(0,Math.min(G-2,F)),X=Math.min(1,Math.max(0,F-te)),J.xy=function(ne){return l.evalxy([],ne,F)},J.dxy=function(ne,re){return l.dxydi([],ne,te,re,X)},V=0;V<L;V++)q[V]=E[F*I][V],Z[V]=C[F*I][V];else for(W=Math.max(0,Math.min(z-2,F)),Q=Math.min(1,Math.max(0,F-W)),J.xy=function(ne){return l.evalxy([],F,ne)},J.dxy=function(ne,re){return l.dxydj([],W,ne,Q,re)},V=0;V<O;V++)q[V]=E[V][F*I],Z[V]=C[V][F*I];return J.axisLetter=_,J.axis=v,J.crossAxis=T,J.value=b[F],J.constvar=m,J.index=F,J.x=q,J.y=Z,J.smoothing=T.smoothing,J}if(v.tickmode==="array"){for(i=5e-15,n=(r=[Math.floor((b.length-1-v.arraytick0)/v.arraydtick*(1+i)),Math.ceil(-v.arraytick0/v.arraydtick/(1+i))].sort(function(F,V){return F-V}))[0]-1,s=r[1]+1,a=n;a<s;a++)(o=v.arraytick0+v.arraydtick*a)<0||o>b.length-1||y.push(M(N(o),{color:v.gridcolor,width:v.gridwidth,dash:v.griddash}));for(a=n;a<s;a++)if(e=v.arraytick0+v.arraydtick*a,c=Math.min(e+v.arraydtick,b.length-1),!(e<0||e>b.length-1||c<0||c>b.length-1))for(x=b[e],g=b[c],f=0;f<v.minorgridcount;f++)(h=c-e)<=0||(p=x+(g-x)*(f+1)/(v.minorgridcount+1)*(v.arraydtick/h))<b[0]||p>b[b.length-1]||w.push(M(H(p),{color:v.minorgridcolor,width:v.minorgridwidth,dash:v.minorgriddash}));v.startline&&d.push(M(N(0),{color:v.startlinecolor,width:v.startlinewidth})),v.endline&&d.push(M(N(b.length-1),{color:v.endlinecolor,width:v.endlinewidth}))}else{for(i=5e-15,n=(r=[Math.floor((b[b.length-1]-v.tick0)/v.dtick*(1+i)),Math.ceil((b[0]-v.tick0)/v.dtick/(1+i))].sort(function(F,V){return F-V}))[0],s=r[1],a=n;a<=s;a++)u=v.tick0+v.dtick*a,y.push(M(H(u),{color:v.gridcolor,width:v.gridwidth,dash:v.griddash}));for(a=n-1;a<s+1;a++)for(u=v.tick0+v.dtick*a,f=0;f<v.minorgridcount;f++)(p=u+v.dtick*(f+1)/(v.minorgridcount+1))<b[0]||p>b[b.length-1]||w.push(M(H(p),{color:v.minorgridcolor,width:v.minorgridwidth,dash:v.minorgriddash}));v.startline&&d.push(M(H(b[0]),{color:v.startlinecolor,width:v.startlinewidth})),v.endline&&d.push(M(H(b[b.length-1]),{color:v.endlinecolor,width:v.endlinewidth}))}}},83311:function($,P,t){var A=t(89298),M=t(1426).extendFlat;$.exports=function(l,_){var m,f,o,e=_._labels=[],i=_._gridlines;for(m=0;m<i.length;m++)o=i[m],["start","both"].indexOf(_.showticklabels)!==-1&&(f=A.tickText(_,o.value),M(f,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:o.xy(0),dxy:o.dxy(0,0),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:m===0,isLast:m===i.length-1}),e.push(f)),["end","both"].indexOf(_.showticklabels)!==-1&&(f=A.tickText(_,o.value),M(f,{endAnchor:!1,xy:o.xy(o.crossLength-1),dxy:o.dxy(o.crossLength-2,1),axis:o.axis,length:o.crossAxis.length,font:o.axis.tickfont,isFirst:m===0,isLast:m===i.length-1}),e.push(f))}},42048:function($){$.exports=function(P,t,A,M){var l=P[0]-t[0],_=P[1]-t[1],m=A[0]-t[0],f=A[1]-t[1],o=Math.pow(l*l+_*_,.25),e=Math.pow(m*m+f*f,.25),i=(e*e*l-o*o*m)*M,r=(e*e*_-o*o*f)*M,n=e*(o+e)*3,s=o*(o+e)*3;return[[t[0]+(n&&i/n),t[1]+(n&&r/n)],[t[0]-(s&&i/s),t[1]-(s&&r/s)]]}},53824:function($,P,t){var A=t(71828).isArrayOrTypedArray;$.exports=function(M,l,_){var m,f,o,e,i,r,n=[],s=A(M)?M.length:M,a=A(l)?l.length:l,u=A(M)?M:null,p=A(l)?l:null;u&&(o=(u.length-1)/(u[u.length-1]-u[0])/(s-1)),p&&(e=(p.length-1)/(p[p.length-1]-p[0])/(a-1));var c=1/0,x=-1/0;for(f=0;f<a;f++)for(n[f]=[],i=p?(p[f]-p[0])*e:f/(a-1),m=0;m<s;m++)r=(u?(u[m]-u[0])*o:m/(s-1))-i*_,c=Math.min(r,c),x=Math.max(r,x),n[f][m]=r;var g=1/(x-c),h=-c*g;for(f=0;f<a;f++)for(m=0;m<s;m++)n[f][m]=g*n[f][m]+h;return n}},45664:function($,P,t){var A=t(42048),M=t(71828).ensureArray;function l(_,m,f){var o=-.5*f[0]+1.5*m[0],e=-.5*f[1]+1.5*m[1];return[(2*o+_[0])/3,(2*e+_[1])/3]}$.exports=function(_,m,f,o,e,i){var r,n,s,a,u,p,c,x,g,h,b=f[0].length,v=f.length,y=e?3*b-2:b,w=i?3*v-2:v;for(_=M(_,w),m=M(m,w),s=0;s<w;s++)_[s]=M(_[s],y),m[s]=M(m[s],y);for(n=0,a=0;n<v;n++,a+=i?3:1)for(u=_[a],p=m[a],c=f[n],x=o[n],r=0,s=0;r<b;r++,s+=e?3:1)u[s]=c[r],p[s]=x[r];if(e)for(n=0,a=0;n<v;n++,a+=i?3:1){for(r=1,s=3;r<b-1;r++,s+=3)g=A([f[n][r-1],o[n][r-1]],[f[n][r],o[n][r]],[f[n][r+1],o[n][r+1]],e),_[a][s-1]=g[0][0],m[a][s-1]=g[0][1],_[a][s+1]=g[1][0],m[a][s+1]=g[1][1];h=l([_[a][0],m[a][0]],[_[a][2],m[a][2]],[_[a][3],m[a][3]]),_[a][1]=h[0],m[a][1]=h[1],h=l([_[a][y-1],m[a][y-1]],[_[a][y-3],m[a][y-3]],[_[a][y-4],m[a][y-4]]),_[a][y-2]=h[0],m[a][y-2]=h[1]}if(i)for(s=0;s<y;s++){for(a=3;a<w-3;a+=3)g=A([_[a-3][s],m[a-3][s]],[_[a][s],m[a][s]],[_[a+3][s],m[a+3][s]],i),_[a-1][s]=g[0][0],m[a-1][s]=g[0][1],_[a+1][s]=g[1][0],m[a+1][s]=g[1][1];h=l([_[0][s],m[0][s]],[_[2][s],m[2][s]],[_[3][s],m[3][s]]),_[1][s]=h[0],m[1][s]=h[1],h=l([_[w-1][s],m[w-1][s]],[_[w-3][s],m[w-3][s]],[_[w-4][s],m[w-4][s]]),_[w-2][s]=h[0],m[w-2][s]=h[1]}if(e&&i)for(a=1;a<w;a+=(a+1)%3==0?2:1){for(s=3;s<y-3;s+=3)g=A([_[a][s-3],m[a][s-3]],[_[a][s],m[a][s]],[_[a][s+3],m[a][s+3]],e),_[a][s-1]=.5*(_[a][s-1]+g[0][0]),m[a][s-1]=.5*(m[a][s-1]+g[0][1]),_[a][s+1]=.5*(_[a][s+1]+g[1][0]),m[a][s+1]=.5*(m[a][s+1]+g[1][1]);h=l([_[a][0],m[a][0]],[_[a][2],m[a][2]],[_[a][3],m[a][3]]),_[a][1]=.5*(_[a][1]+h[0]),m[a][1]=.5*(m[a][1]+h[1]),h=l([_[a][y-1],m[a][y-1]],[_[a][y-3],m[a][y-3]],[_[a][y-4],m[a][y-4]]),_[a][y-2]=.5*(_[a][y-2]+h[0]),m[a][y-2]=.5*(m[a][y-2]+h[1])}return[_,m]}},35509:function($){$.exports={RELATIVE_CULL_TOLERANCE:1e-6}},54495:function($){$.exports=function(P,t,A){return t&&A?function(M,l,_,m,f){var o,e,i,r,n,s;M||(M=[]),l*=3,_*=3;var a=m*m,u=1-m,p=u*u,c=u*m*2,x=-3*p,g=3*(p-c),h=3*(c-a),b=3*a,v=f*f,y=v*f,w=1-f,d=w*w,S=d*w;for(s=0;s<P.length;s++)o=x*(n=P[s])[_][l]+g*n[_][l+1]+h*n[_][l+2]+b*n[_][l+3],e=x*n[_+1][l]+g*n[_+1][l+1]+h*n[_+1][l+2]+b*n[_+1][l+3],i=x*n[_+2][l]+g*n[_+2][l+1]+h*n[_+2][l+2]+b*n[_+2][l+3],r=x*n[_+3][l]+g*n[_+3][l+1]+h*n[_+3][l+2]+b*n[_+3][l+3],M[s]=S*o+3*(d*f*e+w*v*i)+y*r;return M}:t?function(M,l,_,m,f){var o,e,i,r;M||(M=[]),l*=3;var n=m*m,s=1-m,a=s*s,u=s*m*2,p=-3*a,c=3*(a-u),x=3*(u-n),g=3*n,h=1-f;for(i=0;i<P.length;i++)o=p*(r=P[i])[_][l]+c*r[_][l+1]+x*r[_][l+2]+g*r[_][l+3],e=p*r[_+1][l]+c*r[_+1][l+1]+x*r[_+1][l+2]+g*r[_+1][l+3],M[i]=h*o+f*e;return M}:A?function(M,l,_,m,f){var o,e,i,r,n,s;M||(M=[]),_*=3;var a=f*f,u=a*f,p=1-f,c=p*p,x=c*p;for(n=0;n<P.length;n++)o=(s=P[n])[_][l+1]-s[_][l],e=s[_+1][l+1]-s[_+1][l],i=s[_+2][l+1]-s[_+2][l],r=s[_+3][l+1]-s[_+3][l],M[n]=x*o+3*(c*f*e+p*a*i)+u*r;return M}:function(M,l,_,m,f){var o,e,i,r;M||(M=[]);var n=1-f;for(i=0;i<P.length;i++)o=(r=P[i])[_][l+1]-r[_][l],e=r[_+1][l+1]-r[_+1][l],M[i]=n*o+f*e;return M}}},73057:function($){$.exports=function(P,t,A){return t&&A?function(M,l,_,m,f){var o,e,i,r,n,s;M||(M=[]),l*=3,_*=3;var a=m*m,u=a*m,p=1-m,c=p*p,x=c*p,g=f*f,h=1-f,b=h*h,v=h*f*2,y=-3*b,w=3*(b-v),d=3*(v-g),S=3*g;for(s=0;s<P.length;s++)o=y*(n=P[s])[_][l]+w*n[_+1][l]+d*n[_+2][l]+S*n[_+3][l],e=y*n[_][l+1]+w*n[_+1][l+1]+d*n[_+2][l+1]+S*n[_+3][l+1],i=y*n[_][l+2]+w*n[_+1][l+2]+d*n[_+2][l+2]+S*n[_+3][l+2],r=y*n[_][l+3]+w*n[_+1][l+3]+d*n[_+2][l+3]+S*n[_+3][l+3],M[s]=x*o+3*(c*m*e+p*a*i)+u*r;return M}:t?function(M,l,_,m,f){var o,e,i,r,n,s;M||(M=[]),l*=3;var a=f*f,u=a*f,p=1-f,c=p*p,x=c*p;for(n=0;n<P.length;n++)o=(s=P[n])[_+1][l]-s[_][l],e=s[_+1][l+1]-s[_][l+1],i=s[_+1][l+2]-s[_][l+2],r=s[_+1][l+3]-s[_][l+3],M[n]=x*o+3*(c*f*e+p*a*i)+u*r;return M}:A?function(M,l,_,m,f){var o,e,i,r;M||(M=[]),_*=3;var n=1-m,s=f*f,a=1-f,u=a*a,p=a*f*2,c=-3*u,x=3*(u-p),g=3*(p-s),h=3*s;for(i=0;i<P.length;i++)o=c*(r=P[i])[_][l]+x*r[_+1][l]+g*r[_+2][l]+h*r[_+3][l],e=c*r[_][l+1]+x*r[_+1][l+1]+g*r[_+2][l+1]+h*r[_+3][l+1],M[i]=n*o+m*e;return M}:function(M,l,_,m,f){var o,e,i,r;M||(M=[]);var n=1-m;for(i=0;i<P.length;i++)o=(r=P[i])[_+1][l]-r[_][l],e=r[_+1][l+1]-r[_][l+1],M[i]=n*o+m*e;return M}}},20349:function($){$.exports=function(P,t,A,M,l){var _=t-2,m=A-2;return M&&l?function(f,o,e){var i,r,n,s,a,u;f||(f=[]);var p=Math.max(0,Math.min(Math.floor(o),_)),c=Math.max(0,Math.min(Math.floor(e),m)),x=Math.max(0,Math.min(1,o-p)),g=Math.max(0,Math.min(1,e-c));p*=3,c*=3;var h=x*x,b=h*x,v=1-x,y=v*v,w=y*v,d=g*g,S=d*g,T=1-g,E=T*T,C=E*T;for(u=0;u<P.length;u++)i=w*(a=P[u])[c][p]+3*(y*x*a[c][p+1]+v*h*a[c][p+2])+b*a[c][p+3],r=w*a[c+1][p]+3*(y*x*a[c+1][p+1]+v*h*a[c+1][p+2])+b*a[c+1][p+3],n=w*a[c+2][p]+3*(y*x*a[c+2][p+1]+v*h*a[c+2][p+2])+b*a[c+2][p+3],s=w*a[c+3][p]+3*(y*x*a[c+3][p+1]+v*h*a[c+3][p+2])+b*a[c+3][p+3],f[u]=C*i+3*(E*g*r+T*d*n)+S*s;return f}:M?function(f,o,e){f||(f=[]);var i,r,n,s,a,u,p=Math.max(0,Math.min(Math.floor(o),_)),c=Math.max(0,Math.min(Math.floor(e),m)),x=Math.max(0,Math.min(1,o-p)),g=Math.max(0,Math.min(1,e-c));p*=3;var h=x*x,b=h*x,v=1-x,y=v*v,w=y*v,d=1-g;for(a=0;a<P.length;a++)i=d*(u=P[a])[c][p]+g*u[c+1][p],r=d*u[c][p+1]+g*u[c+1][p+1],n=d*u[c][p+2]+g*u[c+1][p+1],s=d*u[c][p+3]+g*u[c+1][p+1],f[a]=w*i+3*(y*x*r+v*h*n)+b*s;return f}:l?function(f,o,e){f||(f=[]);var i,r,n,s,a,u,p=Math.max(0,Math.min(Math.floor(o),_)),c=Math.max(0,Math.min(Math.floor(e),m)),x=Math.max(0,Math.min(1,o-p)),g=Math.max(0,Math.min(1,e-c));c*=3;var h=g*g,b=h*g,v=1-g,y=v*v,w=y*v,d=1-x;for(a=0;a<P.length;a++)i=d*(u=P[a])[c][p]+x*u[c][p+1],r=d*u[c+1][p]+x*u[c+1][p+1],n=d*u[c+2][p]+x*u[c+2][p+1],s=d*u[c+3][p]+x*u[c+3][p+1],f[a]=w*i+3*(y*g*r+v*h*n)+b*s;return f}:function(f,o,e){f||(f=[]);var i,r,n,s,a=Math.max(0,Math.min(Math.floor(o),_)),u=Math.max(0,Math.min(Math.floor(e),m)),p=Math.max(0,Math.min(1,o-a)),c=Math.max(0,Math.min(1,e-u)),x=1-c,g=1-p;for(n=0;n<P.length;n++)i=g*(s=P[n])[u][a]+p*s[u][a+1],r=g*s[u+1][a]+p*s[u+1][a+1],f[n]=x*i+c*r;return f}}},92087:function($,P,t){var A=t(71828),M=t(19237),l=t(13145),_=t(99798),m=t(22399);$.exports=function(f,o,e,i){function r(s,a){return A.coerce(f,o,_,s,a)}o._clipPathId="clip"+o.uid+"carpet";var n=r("color",m.defaultLine);A.coerceFont(r,"font"),r("carpet"),l(f,o,i,r,n),o.a&&o.b?(o.a.length<3&&(o.aaxis.smoothing=0),o.b.length<3&&(o.baxis.smoothing=0),M(f,o,r)||(o.visible=!1),o._cheater&&r("cheaterslope")):o.visible=!1}},21462:function($,P,t){$.exports={attributes:t(99798),supplyDefaults:t(92087),plot:t(89740),calc:t(25281),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},22882:function($){$.exports=function(P,t){for(var A,M=P._fullData.length,l=0;l<M;l++){var _=P._fullData[l];if(_.index!==t.index&&_.type==="carpet"&&(A||(A=_),_.carpet===t.carpet))return _}return A}},67961:function($){$.exports=function(P,t,A){if(P.length===0)return"";var M,l=[],_=A?3:1;for(M=0;M<P.length;M+=_)l.push(P[M]+","+t[M]),A&&M<P.length-_&&(l.push("C"),l.push([P[M+1]+","+t[M+1],P[M+2]+","+t[M+2]+" "].join(" ")));return l.join(A?"":"L")}},27669:function($,P,t){var A=t(71828).isArrayOrTypedArray;$.exports=function(M,l,_){var m;for(A(M)?M.length>l.length&&(M=M.slice(0,l.length)):M=[],m=0;m<l.length;m++)M[m]=_(l[m]);return M}},11651:function($){$.exports=function(P,t,A,M,l,_){var m=l[0]*P.dpdx(t),f=l[1]*P.dpdy(A),o=1,e=1;if(_){var i=Math.sqrt(l[0]*l[0]+l[1]*l[1]),r=Math.sqrt(_[0]*_[0]+_[1]*_[1]),n=(l[0]*_[0]+l[1]*_[1])/i/r;e=Math.max(0,n)}var s=180*Math.atan2(f,m)/Math.PI;return s<-90?(s+=180,o=-o):s>90&&(s-=180,o=-o),{angle:s,flip:o,p:P.c2p(M,t,A),offsetMultplier:e}}},89740:function($,P,t){var A=t(39898),M=t(91424),l=t(27669),_=t(67961),m=t(11651),f=t(63893),o=t(71828),e=o.strRotate,i=o.strTranslate,r=t(18783);function n(c,x,g,h,b,v,y){var w="const-"+b+"-lines",d=g.selectAll("."+w).data(v);d.enter().append("path").classed(w,!0).style("vector-effect",y?"none":"non-scaling-stroke"),d.each(function(S){var T=S,E=T.x,C=T.y,L=l([],E,c.c2p),O=l([],C,x.c2p),z="M"+_(L,O,T.smoothing);A.select(this).attr("d",z).style("stroke-width",T.width).style("stroke",T.color).style("stroke-dasharray",M.dashStyle(T.dash,T.width)).style("fill","none")}),d.exit().remove()}function s(c,x,g,h,b,v,y,w){var d=v.selectAll("text."+w).data(y);d.enter().append("text").classed(w,!0);var S=0,T={};return d.each(function(E,C){var L;if(E.axis.tickangle==="auto")L=m(h,x,g,E.xy,E.dxy);else{var O=(E.axis.tickangle+180)*Math.PI/180;L=m(h,x,g,E.xy,[Math.cos(O),Math.sin(O)])}C||(T={angle:L.angle,flip:L.flip});var z=(E.endAnchor?-1:1)*L.flip,G=A.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(M.font,E.font).text(E.text).call(f.convertToTspans,c),I=M.bBox(this);G.attr("transform",i(L.p[0],L.p[1])+e(L.angle)+i(E.axis.labelpadding*z,.3*I.height)),S=Math.max(S,I.width+E.axis.labelpadding)}),d.exit().remove(),T.maxExtent=S,T}$.exports=function(c,x,g,h){var b=c._context.staticPlot,v=x.xaxis,y=x.yaxis,w=c._fullLayout._clips;o.makeTraceGroups(h,g,"trace").each(function(d){var S=A.select(this),T=d[0],E=T.trace,C=E.aaxis,L=E.baxis,O=o.ensureSingle(S,"g","minorlayer"),z=o.ensureSingle(S,"g","majorlayer"),G=o.ensureSingle(S,"g","boundarylayer"),I=o.ensureSingle(S,"g","labellayer");S.style("opacity",E.opacity),n(v,y,z,0,"a",C._gridlines,!0),n(v,y,z,0,"b",L._gridlines,!0),n(v,y,O,0,"a",C._minorgridlines,!0),n(v,y,O,0,"b",L._minorgridlines,!0),n(v,y,G,0,"a-boundary",C._boundarylines,b),n(v,y,G,0,"b-boundary",L._boundarylines,b);var H=s(c,v,y,E,0,I,C._labels,"a-label"),N=s(c,v,y,E,0,I,L._labels,"b-label");(function(F,V,W,te,Q,X,q,Z){var J,ne,re,ae,ue=o.aggNums(Math.min,null,W.a),he=o.aggNums(Math.max,null,W.a),de=o.aggNums(Math.min,null,W.b),xe=o.aggNums(Math.max,null,W.b);J=.5*(ue+he),ne=de,re=W.ab2xy(J,ne,!0),ae=W.dxyda_rough(J,ne),q.angle===void 0&&o.extendFlat(q,m(W,Q,X,re,W.dxydb_rough(J,ne))),p(F,V,W,0,re,ae,W.aaxis,Q,X,q,"a-title"),J=ue,ne=.5*(de+xe),re=W.ab2xy(J,ne,!0),ae=W.dxydb_rough(J,ne),Z.angle===void 0&&o.extendFlat(Z,m(W,Q,X,re,W.dxyda_rough(J,ne))),p(F,V,W,0,re,ae,W.baxis,Q,X,Z,"b-title")})(c,I,E,0,v,y,H,N),function(F,V,W,te,Q){var X,q,Z,J,ne=W.select("#"+F._clipPathId);ne.size()||(ne=W.append("clipPath").classed("carpetclip",!0));var re=o.ensureSingle(ne,"path","carpetboundary"),ae=V.clipsegments,ue=[];for(J=0;J<ae.length;J++)X=ae[J],q=l([],X.x,te.c2p),Z=l([],X.y,Q.c2p),ue.push(_(q,Z,X.bicubic));var he="M"+ue.join("L")+"Z";ne.attr("id",F._clipPathId),re.attr("d",he)}(E,T,w,v,y)})};var a=r.LINE_SPACING,u=(1-r.MID_SHIFT)/a+1;function p(c,x,g,h,b,v,y,w,d,S,T){var E=[];y.title.text&&E.push(y.title.text);var C=x.selectAll("text."+T).data(E),L=S.maxExtent;C.enter().append("text").classed(T,!0),C.each(function(){var O=m(g,w,d,b,v);["start","both"].indexOf(y.showticklabels)===-1&&(L=0);var z=y.title.font.size;L+=z+y.title.offset;var G=(S.angle+(S.flip<0?180:0)-O.angle+450)%360,I=G>90&&G<270,H=A.select(this);H.text(y.title.text).call(f.convertToTspans,c),I&&(L=(-f.lineCount(H)+u)*a*z-L),H.attr("transform",i(O.p[0],O.p[1])+e(O.angle)+i(0,L)).attr("text-anchor","middle").call(M.font,y.title.font)}),C.exit().remove()}},11435:function($,P,t){var A=t(35509),M=t(65888).findBin,l=t(45664),_=t(20349),m=t(54495),f=t(73057);$.exports=function(o){var e=o._a,i=o._b,r=e.length,n=i.length,s=o.aaxis,a=o.baxis,u=e[0],p=e[r-1],c=i[0],x=i[n-1],g=e[e.length-1]-e[0],h=i[i.length-1]-i[0],b=g*A.RELATIVE_CULL_TOLERANCE,v=h*A.RELATIVE_CULL_TOLERANCE;u-=b,p+=b,c-=v,x+=v,o.isVisible=function(y,w){return y>u&&y<p&&w>c&&w<x},o.isOccluded=function(y,w){return y<u||y>p||w<c||w>x},o.setScale=function(){var y=o._x,w=o._y,d=l(o._xctrl,o._yctrl,y,w,s.smoothing,a.smoothing);o._xctrl=d[0],o._yctrl=d[1],o.evalxy=_([o._xctrl,o._yctrl],r,n,s.smoothing,a.smoothing),o.dxydi=m([o._xctrl,o._yctrl],s.smoothing,a.smoothing),o.dxydj=f([o._xctrl,o._yctrl],s.smoothing,a.smoothing)},o.i2a=function(y){var w=Math.max(0,Math.floor(y[0]),r-2),d=y[0]-w;return(1-d)*e[w]+d*e[w+1]},o.j2b=function(y){var w=Math.max(0,Math.floor(y[1]),r-2),d=y[1]-w;return(1-d)*i[w]+d*i[w+1]},o.ij2ab=function(y){return[o.i2a(y[0]),o.j2b(y[1])]},o.a2i=function(y){var w=Math.max(0,Math.min(M(y,e),r-2)),d=e[w],S=e[w+1];return Math.max(0,Math.min(r-1,w+(y-d)/(S-d)))},o.b2j=function(y){var w=Math.max(0,Math.min(M(y,i),n-2)),d=i[w],S=i[w+1];return Math.max(0,Math.min(n-1,w+(y-d)/(S-d)))},o.ab2ij=function(y){return[o.a2i(y[0]),o.b2j(y[1])]},o.i2c=function(y,w){return o.evalxy([],y,w)},o.ab2xy=function(y,w,d){if(!d&&(y<e[0]||y>e[r-1]|w<i[0]||w>i[n-1]))return[!1,!1];var S=o.a2i(y),T=o.b2j(w),E=o.evalxy([],S,T);if(d){var C,L,O,z,G=0,I=0,H=[];y<e[0]?(C=0,L=0,G=(y-e[0])/(e[1]-e[0])):y>e[r-1]?(C=r-2,L=1,G=(y-e[r-1])/(e[r-1]-e[r-2])):L=S-(C=Math.max(0,Math.min(r-2,Math.floor(S)))),w<i[0]?(O=0,z=0,I=(w-i[0])/(i[1]-i[0])):w>i[n-1]?(O=n-2,z=1,I=(w-i[n-1])/(i[n-1]-i[n-2])):z=T-(O=Math.max(0,Math.min(n-2,Math.floor(T)))),G&&(o.dxydi(H,C,O,L,z),E[0]+=H[0]*G,E[1]+=H[1]*G),I&&(o.dxydj(H,C,O,L,z),E[0]+=H[0]*I,E[1]+=H[1]*I)}return E},o.c2p=function(y,w,d){return[w.c2p(y[0]),d.c2p(y[1])]},o.p2x=function(y,w,d){return[w.p2c(y[0]),d.p2c(y[1])]},o.dadi=function(y){var w=Math.max(0,Math.min(e.length-2,y));return e[w+1]-e[w]},o.dbdj=function(y){var w=Math.max(0,Math.min(i.length-2,y));return i[w+1]-i[w]},o.dxyda=function(y,w,d,S){var T=o.dxydi(null,y,w,d,S),E=o.dadi(y,d);return[T[0]/E,T[1]/E]},o.dxydb=function(y,w,d,S){var T=o.dxydj(null,y,w,d,S),E=o.dbdj(w,S);return[T[0]/E,T[1]/E]},o.dxyda_rough=function(y,w,d){var S=g*(d||.1),T=o.ab2xy(y+S,w,!0),E=o.ab2xy(y-S,w,!0);return[.5*(T[0]-E[0])/S,.5*(T[1]-E[1])/S]},o.dxydb_rough=function(y,w,d){var S=h*(d||.1),T=o.ab2xy(y,w+S,!0),E=o.ab2xy(y,w-S,!0);return[.5*(T[0]-E[0])/S,.5*(T[1]-E[1])/S]},o.dpdx=function(y){return y._m},o.dpdy=function(y){return y._m}}},72505:function($,P,t){var A=t(71828);$.exports=function(M,l,_){var m,f,o,e=[],i=[],r=M[0].length,n=M.length;function s(F,V){var W,te=0,Q=0;return F>0&&(W=M[V][F-1])!==void 0&&(Q++,te+=W),F<r-1&&(W=M[V][F+1])!==void 0&&(Q++,te+=W),V>0&&(W=M[V-1][F])!==void 0&&(Q++,te+=W),V<n-1&&(W=M[V+1][F])!==void 0&&(Q++,te+=W),te/Math.max(1,Q)}var a,u,p,c,x,g,h,b,v,y,w,d=0;for(m=0;m<r;m++)for(f=0;f<n;f++)M[f][m]===void 0&&(e.push(m),i.push(f),M[f][m]=s(m,f)),d=Math.max(d,Math.abs(M[f][m]));if(!e.length)return M;var S=0,T=0,E=e.length;do{for(S=0,o=0;o<E;o++){m=e[o],f=i[o];var C,L,O,z,G,I,H=0,N=0;m===0?(O=l[G=Math.min(r-1,2)],z=l[1],C=M[f][G],N+=(L=M[f][1])+(L-C)*(l[0]-z)/(z-O),H++):m===r-1&&(O=l[G=Math.max(0,r-3)],z=l[r-2],C=M[f][G],N+=(L=M[f][r-2])+(L-C)*(l[r-1]-z)/(z-O),H++),(m===0||m===r-1)&&f>0&&f<n-1&&(a=_[f+1]-_[f],N+=((u=_[f]-_[f-1])*M[f+1][m]+a*M[f-1][m])/(u+a),H++),f===0?(O=_[I=Math.min(n-1,2)],z=_[1],C=M[I][m],N+=(L=M[1][m])+(L-C)*(_[0]-z)/(z-O),H++):f===n-1&&(O=_[I=Math.max(0,n-3)],z=_[n-2],C=M[I][m],N+=(L=M[n-2][m])+(L-C)*(_[n-1]-z)/(z-O),H++),(f===0||f===n-1)&&m>0&&m<r-1&&(a=l[m+1]-l[m],N+=((u=l[m]-l[m-1])*M[f][m+1]+a*M[f][m-1])/(u+a),H++),H?N/=H:(p=l[m+1]-l[m],c=l[m]-l[m-1],b=(x=_[f+1]-_[f])*(g=_[f]-_[f-1])*(x+g),N=((h=p*c*(p+c))*(g*M[f+1][m]+x*M[f-1][m])+b*(c*M[f][m+1]+p*M[f][m-1]))/(b*(c+p)+h*(g+x))),S+=(y=(v=N-M[f][m])/d)*y,w=H?0:.85,M[f][m]+=v*(1+w)}S=Math.sqrt(S)}while(T++<100&&S>1e-5);return A.log("Smoother converged to",S,"after",T,"iterations"),M}},19237:function($,P,t){var A=t(71828).isArray1D;$.exports=function(M,l,_){var m=_("x"),f=m&&m.length,o=_("y"),e=o&&o.length;if(!f&&!e)return!1;if(l._cheater=!m,f&&!A(m)||e&&!A(o))l._length=null;else{var i=f?m.length:1/0;e&&(i=Math.min(i,o.length)),l.a&&l.a.length&&(i=Math.min(i,l.a.length)),l.b&&l.b.length&&(i=Math.min(i,l.b.length)),l._length=i}return!0}},69568:function($,P,t){var A=t(5386).fF,M=t(19316),l=t(50693),_=t(9012),m=t(22399).defaultLine,f=t(1426).extendFlat,o=M.marker.line;$.exports=f({locations:{valType:"data_array",editType:"calc"},locationmode:M.locationmode,z:{valType:"data_array",editType:"calc"},geojson:f({},M.geojson,{}),featureidkey:M.featureidkey,text:f({},M.text,{}),hovertext:f({},M.hovertext,{}),marker:{line:{color:f({},o.color,{dflt:m}),width:f({},o.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:M.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:M.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:f({},_.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:A(),showlegend:f({},_.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},38675:function($,P,t){var A=t(92770),M=t(50606).BADNUM,l=t(78803),_=t(75225),m=t(66279);function f(o){return o&&typeof o=="string"}$.exports=function(o,e){var i,r=e._length,n=new Array(r);i=e.geojson?function(c){return f(c)||A(c)}:f;for(var s=0;s<r;s++){var a=n[s]={},u=e.locations[s],p=e.z[s];i(u)&&A(p)?(a.loc=u,a.z=p):(a.loc=null,a.z=M),a.index=s}return _(n,e),l(o,e,{vals:e.z,containerStr:"",cLetter:"z"}),m(n,e),n}},61869:function($,P,t){var A=t(71828),M=t(1586),l=t(69568);$.exports=function(_,m,f,o){function e(a,u){return A.coerce(_,m,l,a,u)}var i=e("locations"),r=e("z");if(i&&i.length&&A.isArrayOrTypedArray(r)&&r.length){m._length=Math.min(i.length,r.length);var n,s=e("geojson");(typeof s=="string"&&s!==""||A.isPlainObject(s))&&(n="geojson-id"),e("locationmode",n)==="geojson-id"&&e("featureidkey"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.width")&&e("marker.line.color"),e("marker.opacity"),M(_,m,o,e,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(m,e)}else m.visible=!1}},92069:function($){$.exports=function(P,t,A,M,l){P.location=t.location,P.z=t.z;var _=M[l];return _.fIn&&_.fIn.properties&&(P.properties=_.fIn.properties),P.ct=_.ct,P}},42300:function($,P,t){var A=t(89298),M=t(69568),l=t(71828).fillText;$.exports=function(_,m,f){var o,e,i,r,n=_.cd,s=n[0].trace,a=_.subplot,u=[m,f],p=[m+360,f];for(e=0;e<n.length;e++)if(r=!1,(o=n[e])._polygons){for(i=0;i<o._polygons.length;i++)o._polygons[i].contains(u)&&(r=!r),o._polygons[i].contains(p)&&(r=!r);if(r)break}if(r&&o)return _.x0=_.x1=_.xa.c2p(o.ct),_.y0=_.y1=_.ya.c2p(o.ct),_.index=o.index,_.location=o.loc,_.z=o.z,_.zLabel=A.tickText(a.mockAxis,a.mockAxis.c2l(o.z),"hover").text,_.hovertemplate=o.hovertemplate,function(c,x,g){if(!x.hovertemplate){var h=g.hi||x.hoverinfo,b=String(g.loc),v=h==="all"?M.hoverinfo.flags:h.split("+"),y=v.indexOf("name")!==-1,w=v.indexOf("location")!==-1,d=v.indexOf("z")!==-1,S=v.indexOf("text")!==-1,T=[];!y&&w?c.nameOverride=b:(y&&(c.nameOverride=x.name),w&&T.push(b)),d&&T.push(c.zLabel),S&&l(g,x,T),c.extraText=T.join("<br>")}}(_,s,o),[_]}},51319:function($,P,t){$.exports={attributes:t(69568),supplyDefaults:t(61869),colorbar:t(61243),calc:t(38675),calcGeoJSON:t(99841).calcGeoJSON,plot:t(99841).plot,style:t(99636).style,styleOnSelect:t(99636).styleOnSelect,hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),moduleType:"trace",name:"choropleth",basePlotModule:t(44622),categories:["geo","noOpacity","showLegend"],meta:{}}},99841:function($,P,t){var A=t(39898),M=t(71828),l=t(41327),_=t(90973).getTopojsonFeatures,m=t(71739).findExtremes,f=t(99636).style;$.exports={calcGeoJSON:function(o,e){for(var i=o[0].trace,r=e[i.geo],n=r._subplot,s=i.locationmode,a=i._length,u=s==="geojson-id"?l.extractTraceFeature(o):_(i,n.topojson),p=[],c=[],x=0;x<a;x++){var g=o[x],h=s==="geojson-id"?g.fOut:l.locationToFeature(s,g.loc,u);if(h){g.geojson=h,g.ct=h.properties.ct,g._polygons=l.feature2polygons(h);var b=l.computeBbox(h);p.push(b[0],b[2]),c.push(b[1],b[3])}else g.geojson=null}if(r.fitbounds==="geojson"&&s==="geojson-id"){var v=l.computeBbox(l.getTraceGeojson(i));p=[v[0],v[2]],c=[v[1],v[3]]}var y={padded:!0};i._extremes.lon=m(r.lonaxis._ax,p,y),i._extremes.lat=m(r.lataxis._ax,c,y)},plot:function(o,e,i){var r=e.layers.backplot.select(".choroplethlayer");M.makeTraceGroups(r,i,"trace choropleth").each(function(n){var s=A.select(this).selectAll("path.choroplethlocation").data(M.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),f(o,n)})}}},81253:function($){$.exports=function(P,t){var A,M,l,_,m,f=P.cd,o=P.xaxis,e=P.yaxis,i=[];if(t===!1)for(A=0;A<f.length;A++)f[A].selected=0;else for(A=0;A<f.length;A++)(l=(M=f[A]).ct)&&(_=o.c2p(l),m=e.c2p(l),t.contains([_,m],null,A,P)?(i.push({pointNumber:A,lon:l[0],lat:l[1]}),M.selected=1):M.selected=0);return i}},99636:function($,P,t){var A=t(39898),M=t(7901),l=t(91424),_=t(21081);function m(f,o){var e=o[0].trace,i=o[0].node3.selectAll(".choroplethlocation"),r=e.marker||{},n=r.line||{},s=_.makeColorScaleFuncFromTrace(e);i.each(function(a){A.select(this).attr("fill",s(a.z)).call(M.stroke,a.mlc||n.color).call(l.dashLine,"",a.mlw||n.width||0).style("opacity",r.opacity)}),l.selectedPointStyle(i,e)}$.exports={style:function(f,o){o&&m(0,o)},styleOnSelect:function(f,o){var e=o[0].node3,i=o[0].trace;i.selectedpoints?l.selectedPointStyle(e.selectAll(".choroplethlocation"),i):m(0,o)}}},64496:function($,P,t){var A=t(69568),M=t(50693),l=t(5386).fF,_=t(9012),m=t(1426).extendFlat;$.exports=m({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:m({},A.featureidkey,{}),below:{valType:"string",editType:"plot"},text:A.text,hovertext:A.hovertext,marker:{line:{color:m({},A.marker.line.color,{editType:"plot"}),width:m({},A.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:m({},A.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:m({},A.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:m({},A.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:A.hoverinfo,hovertemplate:l({},{keys:["properties"]}),showlegend:m({},_.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},82004:function($,P,t){var A=t(92770),M=t(71828),l=t(21081),_=t(91424),m=t(18214).makeBlank,f=t(41327);function o(e){var i,r=e[0].trace,n=r._opts;if(r.selectedpoints){for(var s=_.makeSelectedPointStyleFns(r),a=0;a<e.length;a++){var u=e[a];u.fOut&&(u.fOut.properties.mo2=s.selectedOpacityFn(u))}i={type:"identity",property:"mo2"}}else i=M.isArrayOrTypedArray(r.marker.opacity)?{type:"identity",property:"mo"}:r.marker.opacity;return M.extendFlat(n.fill.paint,{"fill-opacity":i}),M.extendFlat(n.line.paint,{"line-opacity":i}),n}$.exports={convert:function(e){var i=e[0].trace,r=i.visible===!0&&i._length!==0,n={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},a=i._opts={fill:n,line:s,geojson:m()};if(!r)return a;var u=f.extractTraceFeature(e);if(!u)return a;var p,c,x,g=l.makeColorScaleFuncFromTrace(i),h=i.marker,b=h.line||{};M.isArrayOrTypedArray(h.opacity)&&(p=function(T){var E=T.mo;return A(E)?+M.constrain(E,0,1):0}),M.isArrayOrTypedArray(b.color)&&(c=function(T){return T.mlc}),M.isArrayOrTypedArray(b.width)&&(x=function(T){return T.mlw});for(var v=0;v<e.length;v++){var y=e[v],w=y.fOut;if(w){var d=w.properties;d.fc=g(y.z),p&&(d.mo=p(y)),c&&(d.mlc=c(y)),x&&(d.mlw=x(y)),y.ct=d.ct,y._polygons=f.feature2polygons(w)}}var S=p?{type:"identity",property:"mo"}:h.opacity;return M.extendFlat(n.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":S}),M.extendFlat(s.paint,{"line-color":c?{type:"identity",property:"mlc"}:b.color,"line-width":x?{type:"identity",property:"mlw"}:b.width,"line-opacity":S}),n.layout.visibility="visible",s.layout.visibility="visible",a.geojson={type:"FeatureCollection",features:u},o(e),a},convertOnSelect:o}},22654:function($,P,t){var A=t(71828),M=t(1586),l=t(64496);$.exports=function(_,m,f,o){function e(s,a){return A.coerce(_,m,l,s,a)}var i=e("locations"),r=e("z"),n=e("geojson");A.isArrayOrTypedArray(i)&&i.length&&A.isArrayOrTypedArray(r)&&r.length&&(typeof n=="string"&&n!==""||A.isPlainObject(n))?(e("featureidkey"),m._length=Math.min(i.length,r.length),e("below"),e("text"),e("hovertext"),e("hovertemplate"),e("marker.line.width")&&e("marker.line.color"),e("marker.opacity"),M(_,m,o,e,{prefix:"",cLetter:"z"}),A.coerceSelectionMarkerOpacity(m,e)):m.visible=!1}},57516:function($,P,t){$.exports={attributes:t(64496),supplyDefaults:t(22654),colorbar:t(61243),calc:t(38675),plot:t(7852),hoverPoints:t(42300),eventData:t(92069),selectPoints:t(81253),styleOnSelect:function(A,M){M&&M[0].trace._glTrace.updateOnSelect(M)},getBelow:function(A,M){for(var l=M.getMapLayers(),_=l.length-2;_>=0;_--){var m=l[_].id;if(typeof m=="string"&&m.indexOf("water")===0){for(var f=_+1;f<l.length;f++)if(typeof(m=l[f].id)=="string"&&m.indexOf("plotly-")===-1)return m}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(50101),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},7852:function($,P,t){var A=t(82004).convert,M=t(82004).convertOnSelect,l=t(77734).traceLayerPrefix;function _(f,o){this.type="choroplethmapbox",this.subplot=f,this.uid=o,this.sourceId="source-"+o,this.layerList=[["fill",l+o+"-fill"],["line",l+o+"-line"]],this.below=null}var m=_.prototype;m.update=function(f){this._update(A(f)),f[0].trace._glTrace=this},m.updateOnSelect=function(f){this._update(M(f))},m._update=function(f){var o=this.subplot,e=this.layerList,i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(f.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(f,i),this.below=i);for(var r=0;r<e.length;r++){var n=e[r],s=n[0],a=n[1],u=f[s];o.setOptions(a,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&o.setOptions(a,"setPaintProperty",u.paint)}},m._addLayers=function(f,o){for(var e=this.subplot,i=this.layerList,r=this.sourceId,n=0;n<i.length;n++){var s=i[n],a=s[0],u=f[a];e.addLayer({type:a,id:s[1],source:r,layout:u.layout,paint:u.paint},o)}},m._removeLayers=function(){for(var f=this.subplot.map,o=this.layerList,e=o.length-1;e>=0;e--)f.removeLayer(o[e][1])},m.dispose=function(){var f=this.subplot.map;this._removeLayers(),f.removeSource(this.sourceId)},$.exports=function(f,o){var e=o[0].trace,i=new _(f,e.uid),r=i.sourceId,n=A(o),s=i.below=f.belowLookup["trace-"+e.uid];return f.map.addSource(r,{type:"geojson",data:n.geojson}),i._addLayers(n,s),o[0].trace._glTrace=i,i}},12674:function($,P,t){var A=t(50693),M=t(12663).axisHoverFormat,l=t(5386).fF,_=t(2418),m=t(9012),f=t(1426).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["norm"]}),uhoverformat:M("u",1),vhoverformat:M("v",1),whoverformat:M("w",1),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),showlegend:f({},m.showlegend,{dflt:!1})};f(o,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){o[e]=_[e]}),o.hoverinfo=f({},m.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,$.exports=o},31371:function($,P,t){var A=t(78803);$.exports=function(M,l){for(var _=l.u,m=l.v,f=l.w,o=Math.min(l.x.length,l.y.length,l.z.length,_.length,m.length,f.length),e=-1/0,i=1/0,r=0;r<o;r++){var n=_[r],s=m[r],a=f[r],u=Math.sqrt(n*n+s*s+a*a);e=Math.max(e,u),i=Math.min(i,u)}l._len=o,l._normMax=e,A(M,l,{vals:[i,e],containerStr:"",cLetter:"c"})}},5453:function($,P,t){var A=t(9330).gl_cone3d,M=t(9330).gl_cone3d.createConeMesh,l=t(71828).simpleMap,_=t(81697).parseColorScale,m=t(21081).extractOpts,f=t(90060);function o(a,u){this.scene=a,this.uid=u,this.mesh=null,this.data=null}var e=o.prototype;e.handlePick=function(a){if(a.object===this.mesh){var u=a.index=a.data.index,p=this.data.x[u],c=this.data.y[u],x=this.data.z[u],g=this.data.u[u],h=this.data.v[u],b=this.data.w[u];a.traceCoordinate=[p,c,x,g,h,b,Math.sqrt(g*g+h*h+b*b)];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[u]!==void 0?a.textLabel=v[u]:v&&(a.textLabel=v),!0}};var i={xaxis:0,yaxis:1,zaxis:2},r={tip:1,tail:0,cm:.25,center:.5},n={tip:1,tail:1,cm:.75,center:.5};function s(a,u){var p=a.fullSceneLayout,c=a.dataScale,x={};function g(y,w){var d=p[w],S=c[i[w]];return l(y,function(T){return d.d2l(T)*S})}x.vectors=f(g(u.u,"xaxis"),g(u.v,"yaxis"),g(u.w,"zaxis"),u._len),x.positions=f(g(u.x,"xaxis"),g(u.y,"yaxis"),g(u.z,"zaxis"),u._len);var h=m(u);x.colormap=_(u),x.vertexIntensityBounds=[h.min/u._normMax,h.max/u._normMax],x.coneOffset=r[u.anchor],u.sizemode==="scaled"?x.coneSize=u.sizeref||.5:x.coneSize=u.sizeref&&u._normMax?u.sizeref/u._normMax:.5;var b=A(x),v=u.lightposition;return b.lightPosition=[v.x,v.y,v.z],b.ambient=u.lighting.ambient,b.diffuse=u.lighting.diffuse,b.specular=u.lighting.specular,b.roughness=u.lighting.roughness,b.fresnel=u.lighting.fresnel,b.opacity=u.opacity,u._pad=n[u.anchor]*b.vectorScale*b.coneScale*u._normMax,b}e.update=function(a){this.data=a;var u=s(this.scene,a);this.mesh.update(u)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(a,u){var p=a.glplot.gl,c=s(a,u),x=M(p,c),g=new o(a,u.uid);return g.mesh=x,g.data=u,x._trace=g,a.glplot.add(x),g}},91750:function($,P,t){var A=t(71828),M=t(1586),l=t(12674);$.exports=function(_,m,f,o){function e(p,c){return A.coerce(_,m,l,p,c)}var i=e("u"),r=e("v"),n=e("w"),s=e("x"),a=e("y"),u=e("z");i&&i.length&&r&&r.length&&n&&n.length&&s&&s.length&&a&&a.length&&u&&u.length?(e("sizeref"),e("sizemode"),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),M(_,m,o,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),m._length=null):m.visible=!1}},98128:function($,P,t){$.exports={moduleType:"trace",name:"cone",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(12674),supplyDefaults:t(91750),colorbar:{min:"cmin",max:"cmax"},calc:t(31371),plot:t(5453),eventData:function(A,M){return A.norm=M.traceCoordinate[6],A},meta:{}}},70600:function($,P,t){var A=t(21606),M=t(82196),l=t(12663),_=l.axisHoverFormat,m=l.descriptionOnlyNumbers,f=t(50693),o=t(79952).P,e=t(41940),i=t(1426).extendFlat,r=t(74808),n=r.COMPARISON_OPS2,s=r.INTERVAL_OPS,a=M.line;$.exports=i({z:A.z,x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,text:A.text,hovertext:A.hovertext,transpose:A.transpose,xtype:A.xtype,ytype:A.ytype,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:A.hovertemplate,texttemplate:i({},A.texttemplate,{}),textfont:i({},A.textfont,{}),hoverongaps:A.hoverongaps,connectgaps:i({},A.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:e({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:m("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},a.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:o,smoothing:i({},a.smoothing,{}),editType:"plot"}},f("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},27529:function($,P,t){var A=t(21081),M=t(90757),l=t(18670),_=t(53572);$.exports=function(m,f){var o=M(m,f),e=o[0].z;l(f,e);var i,r=f.contours,n=A.extractOpts(f);if(r.coloring==="heatmap"&&n.auto&&f.autocontour===!1){var s=r.start,a=_(r),u=r.size||1,p=Math.floor((a-s)/u)+1;isFinite(u)||(u=1,p=1);var c=s-u/2;i=[c,c+p*u]}else i=e;return A.calc(m,f,{vals:i,cLetter:"z"}),o}},20083:function($){$.exports=function(P,t){var A,M=P[0],l=M.z;switch(t.type){case"levels":var _=Math.min(l[0][0],l[0][1]);for(A=0;A<P.length;A++){var m=P[A];m.prefixBoundary=!m.edgepaths.length&&(_>m.level||m.starts.length&&_===m.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var f=M.x.length,o=M.y.length,e=-1/0,i=1/0;for(A=0;A<o;A++)i=Math.min(i,l[A][0]),i=Math.min(i,l[A][f-1]),e=Math.max(e,l[A][0]),e=Math.max(e,l[A][f-1]);for(A=1;A<f-1;A++)i=Math.min(i,l[0][A]),i=Math.min(i,l[o-1][A]),e=Math.max(e,l[0][A]),e=Math.max(e,l[o-1][A]);var r,n,s=t.value;switch(t._operation){case">":s>e&&(M.prefixBoundary=!0);break;case"<":(s<i||M.starts.length&&s===i)&&(M.prefixBoundary=!0);break;case"[]":r=Math.min(s[0],s[1]),((n=Math.max(s[0],s[1]))<i||r>e||M.starts.length&&n===i)&&(M.prefixBoundary=!0);break;case"][":r=Math.min(s[0],s[1]),n=Math.max(s[0],s[1]),r<i&&n>e&&(M.prefixBoundary=!0)}}}},90654:function($,P,t){var A=t(21081),M=t(86068),l=t(53572);$.exports={min:"zmin",max:"zmax",calc:function(_,m,f){var o=m.contours,e=m.line,i=o.size||1,r=o.coloring,n=M(m,{isColorbar:!0});if(r==="heatmap"){var s=A.extractOpts(m);f._fillgradient=s.reversescale?A.flipScale(s.colorscale):s.colorscale,f._zrange=[s.min,s.max]}else r==="fill"&&(f._fillcolor=n);f._line={color:r==="lines"?n:e.color,width:o.showlines!==!1?e.width:0,dash:e.dash},f._levels={start:o.start,end:l(o),size:i}}}},36914:function($){$.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},83179:function($,P,t){var A=t(92770),M=t(14523),l=t(7901),_=l.addOpacity,m=l.opacity,f=t(74808),o=f.CONSTRAINT_REDUCTION,e=f.COMPARISON_OPS2;$.exports=function(i,r,n,s,a,u){var p,c,x,g=r.contours,h=n("contours.operation");g._operation=o[h],function(b,v){var y;e.indexOf(v.operation)===-1?(b("contours.value",[0,1]),Array.isArray(v.value)?v.value.length>2?v.value=v.value.slice(2):v.length===0?v.value=[0,1]:v.length<2?(y=parseFloat(v.value[0]),v.value=[y,y+1]):v.value=[parseFloat(v.value[0]),parseFloat(v.value[1])]:A(v.value)&&(y=parseFloat(v.value),v.value=[y,y+1])):(b("contours.value",0),A(v.value)||(Array.isArray(v.value)?v.value=parseFloat(v.value[0]):v.value=0))}(n,g),h==="="?p=g.showlines=!0:(p=n("contours.showlines"),x=n("fillcolor",_((i.line||{}).color||a,.5))),p&&(c=n("line.color",x&&m(x)?_(r.fillcolor,1):a),n("line.width",2),n("line.dash")),n("line.smoothing"),M(n,s,c,u)}},64237:function($,P,t){var A=t(74808),M=t(92770);function l(f,o){var e,i=Array.isArray(o);function r(n){return M(n)?+n:null}return A.COMPARISON_OPS2.indexOf(f)!==-1?e=r(i?o[0]:o):A.INTERVAL_OPS.indexOf(f)!==-1?e=i?[r(o[0]),r(o[1])]:[r(o),r(o)]:A.SET_OPS.indexOf(f)!==-1&&(e=i?o.map(r):[r(o)]),e}function _(f){return function(o){o=l(f,o);var e=Math.min(o[0],o[1]),i=Math.max(o[0],o[1]);return{start:e,end:i,size:i-e}}}function m(f){return function(o){return{start:o=l(f,o),end:1/0,size:1/0}}}$.exports={"[]":_("[]"),"][":_("]["),">":m(">"),"<":m("<"),"=":m("=")}},67217:function($){$.exports=function(P,t,A,M){var l=M("contours.start"),_=M("contours.end"),m=l===!1||_===!1,f=A("contours.size");!(m?t.autocontour=!0:A("autocontour",!1))&&f||A("ncontours")}},84857:function($,P,t){var A=t(71828);function M(l){return A.extendFlat({},l,{edgepaths:A.extendDeep([],l.edgepaths),paths:A.extendDeep([],l.paths),starts:A.extendDeep([],l.starts)})}$.exports=function(l,_){var m,f,o,e=function(n){return n.reverse()},i=function(n){return n};switch(_){case"=":case"<":return l;case">":for(l.length!==1&&A.warn("Contour data invalid for the specified inequality operation."),f=l[0],m=0;m<f.edgepaths.length;m++)f.edgepaths[m]=e(f.edgepaths[m]);for(m=0;m<f.paths.length;m++)f.paths[m]=e(f.paths[m]);for(m=0;m<f.starts.length;m++)f.starts[m]=e(f.starts[m]);return l;case"][":var r=e;e=i,i=r;case"[]":for(l.length!==2&&A.warn("Contour data invalid for the specified inequality range operation."),f=M(l[0]),o=M(l[1]),m=0;m<f.edgepaths.length;m++)f.edgepaths[m]=e(f.edgepaths[m]);for(m=0;m<f.paths.length;m++)f.paths[m]=e(f.paths[m]);for(m=0;m<f.starts.length;m++)f.starts[m]=e(f.starts[m]);for(;o.edgepaths.length;)f.edgepaths.push(i(o.edgepaths.shift()));for(;o.paths.length;)f.paths.push(i(o.paths.shift()));for(;o.starts.length;)f.starts.push(i(o.starts.shift()));return[f]}}},13031:function($,P,t){var A=t(71828),M=t(67684),l=t(73927),_=t(83179),m=t(67217),f=t(8724),o=t(58623),e=t(70600);$.exports=function(i,r,n,s){function a(p,c){return A.coerce(i,r,e,p,c)}if(M(i,r,a,s)){l(i,r,s,a),a("xhoverformat"),a("yhoverformat"),a("text"),a("hovertext"),a("hoverongaps"),a("hovertemplate");var u=a("contours.type")==="constraint";a("connectgaps",A.isArray1D(r.z)),u?_(i,r,a,s,n):(m(i,r,a,function(p){return A.coerce2(i,r,e,p)}),f(i,r,a,s)),r.contours&&r.contours.coloring==="heatmap"&&o(a,s)}else r.visible=!1}},87558:function($,P,t){var A=t(71828),M=t(64237),l=t(53572);$.exports=function(_,m,f){for(var o=_.type==="constraint"?M[_._operation](_.value):_,e=o.size,i=[],r=l(o),n=f.trace._carpetTrace,s=n?{xaxis:n.aaxis,yaxis:n.baxis,x:f.a,y:f.b}:{xaxis:m.xaxis,yaxis:m.yaxis,x:f.x,y:f.y},a=o.start;a<r;a+=e)if(i.push(A.extendFlat({level:a,crossings:{},starts:[],edgepaths:[],paths:[],z:f.z,smoothing:f.trace.line.smoothing},s)),i.length>1e3){A.warn("Too many contours, clipping at 1000",_);break}return i}},53572:function($){$.exports=function(P){return P.end+P.size/1e6}},81696:function($,P,t){var A=t(71828),M=t(36914);function l(f,o,e,i){return Math.abs(f[0]-o[0])<e&&Math.abs(f[1]-o[1])<i}function _(f,o,e,i,r){var n,s=o.join(","),a=f.crossings[s],u=function(ne,re,ae){var ue=0,he=0;return ne>20&&re?ne===208||ne===1114?ue=ae[0]===0?1:-1:he=ae[1]===0?1:-1:M.BOTTOMSTART.indexOf(ne)!==-1?he=1:M.LEFTSTART.indexOf(ne)!==-1?ue=1:M.TOPSTART.indexOf(ne)!==-1?he=-1:ue=-1,[ue,he]}(a,e,o),p=[m(f,o,[-u[0],-u[1]])],c=f.z.length,x=f.z[0].length,g=o.slice(),h=u.slice();for(n=0;n<1e4;n++){if(a>20?(a=M.CHOOSESADDLE[a][(u[0]||u[1])<0?0:1],f.crossings[s]=M.SADDLEREMAINDER[a]):delete f.crossings[s],!(u=M.NEWDELTA[a])){A.log("Found bad marching index:",a,o,f.level);break}p.push(m(f,o,u)),o[0]+=u[0],o[1]+=u[1],s=o.join(","),l(p[p.length-1],p[p.length-2],i,r)&&p.pop();var b=u[0]&&(o[0]<0||o[0]>x-2)||u[1]&&(o[1]<0||o[1]>c-2);if(o[0]===g[0]&&o[1]===g[1]&&u[0]===h[0]&&u[1]===h[1]||e&&b)break;a=f.crossings[s]}n===1e4&&A.log("Infinite loop in contour?");var v,y,w,d,S,T,E,C,L,O,z,G,I,H,N,F=l(p[0],p[p.length-1],i,r),V=0,W=.2*f.smoothing,te=[],Q=0;for(n=1;n<p.length;n++)G=p[n],I=p[n-1],H=G[2]-I[2],N=G[3]-I[3],V+=E=Math.sqrt(H*H+N*N),te.push(E);var X=V/te.length*W;function q(ne){return p[ne%p.length]}for(n=p.length-2;n>=Q;n--)if((v=te[n])<X){for(w=0,y=n-1;y>=Q&&v+te[y]<X;y--)v+=te[y];if(F&&n===p.length-2)for(w=0;w<y&&v+te[w]<X;w++)v+=te[w];S=n-y+w+1,T=Math.floor((n+y+w+2)/2),d=F||n!==p.length-2?F||y!==-1?S%2?q(T):[(q(T)[0]+q(T+1)[0])/2,(q(T)[1]+q(T+1)[1])/2]:p[0]:p[p.length-1],p.splice(y+1,n-y+1,d),n=y+1,w&&(Q=w),F&&(n===p.length-2?p[w]=p[p.length-1]:n===0&&(p[p.length-1]=p[0]))}for(p.splice(0,Q),n=0;n<p.length;n++)p[n].length=2;if(!(p.length<2))if(F)p.pop(),f.paths.push(p);else{e||A.log("Unclosed interior contour?",f.level,g.join(","),p.join("L"));var Z=!1;for(C=0;C<f.edgepaths.length;C++)if(O=f.edgepaths[C],!Z&&l(O[0],p[p.length-1],i,r)){p.pop(),Z=!0;var J=!1;for(L=0;L<f.edgepaths.length;L++)if(l((z=f.edgepaths[L])[z.length-1],p[0],i,r)){J=!0,p.shift(),f.edgepaths.splice(C,1),L===C?f.paths.push(p.concat(z)):(L>C&&L--,f.edgepaths[L]=z.concat(p,O));break}J||(f.edgepaths[C]=p.concat(O))}for(C=0;C<f.edgepaths.length&&!Z;C++)l((O=f.edgepaths[C])[O.length-1],p[0],i,r)&&(p.shift(),f.edgepaths[C]=O.concat(p),Z=!0);Z||f.edgepaths.push(p)}}function m(f,o,e){var i=o[0]+Math.max(e[0],0),r=o[1]+Math.max(e[1],0),n=f.z[r][i],s=f.xaxis,a=f.yaxis;if(e[1]){var u=(f.level-n)/(f.z[r][i+1]-n),p=(u!==1?(1-u)*s.c2l(f.x[i]):0)+(u!==0?u*s.c2l(f.x[i+1]):0);return[s.c2p(s.l2c(p),!0),a.c2p(f.y[r],!0),i+u,r]}var c=(f.level-n)/(f.z[r+1][i]-n),x=(c!==1?(1-c)*a.c2l(f.y[r]):0)+(c!==0?c*a.c2l(f.y[r+1]):0);return[s.c2p(f.x[i],!0),a.c2p(a.l2c(x),!0),i,r+c]}$.exports=function(f,o,e){var i,r,n,s;for(o=o||.01,e=e||.01,r=0;r<f.length;r++){for(n=f[r],s=0;s<n.starts.length;s++)_(n,n.starts[s],"edge",o,e);for(i=0;Object.keys(n.crossings).length&&i<1e4;)i++,_(n,Object.keys(n.crossings)[0].split(",").map(Number),void 0,o,e);i===1e4&&A.log("Infinite loop in contour?")}}},52421:function($,P,t){var A=t(7901),M=t(46248);$.exports=function(l,_,m,f,o){o||(o={}),o.isContour=!0;var e=M(l,_,m,f,o);return e&&e.forEach(function(i){var r=i.trace;r.contours.type==="constraint"&&(r.fillcolor&&A.opacity(r.fillcolor)?i.color=A.addOpacity(r.fillcolor,1):r.contours.showlines&&A.opacity(r.line.color)&&(i.color=A.addOpacity(r.line.color,1)))}),e}},99442:function($,P,t){$.exports={attributes:t(70600),supplyDefaults:t(13031),calc:t(27529),plot:t(29854).plot,style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"contour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},14523:function($,P,t){var A=t(71828);$.exports=function(M,l,_,m){if(m||(m={}),M("contours.showlabels")){var f=l.font;A.coerceFont(M,"contours.labelfont",{family:f.family,size:f.size,color:_}),M("contours.labelformat")}m.hasHover!==!1&&M("zhoverformat")}},86068:function($,P,t){var A=t(39898),M=t(21081),l=t(53572);$.exports=function(_){var m=_.contours,f=m.start,o=l(m),e=m.size||1,i=Math.floor((o-f)/e)+1,r=m.coloring==="lines"?0:1,n=M.extractOpts(_);isFinite(e)||(e=1,i=1);var s,a,u=n.reversescale?M.flipScale(n.colorscale):n.colorscale,p=u.length,c=new Array(p),x=new Array(p),g=n.min,h=n.max;if(m.coloring==="heatmap"){for(a=0;a<p;a++)s=u[a],c[a]=s[0]*(h-g)+g,x[a]=s[1];var b=A.extent([g,h,m.start,m.start+e*(i-1)]),v=b[g<h?0:1],y=b[g<h?1:0];v!==g&&(c.splice(0,0,v),x.splice(0,0,x[0])),y!==h&&(c.push(y),x.push(x[x.length-1]))}else{var w=_._input&&typeof _._input.zmin=="number"&&typeof _._input.zmax=="number";for(w&&(f<=g||o>=h)&&(f<=g&&(f=g),o>=h&&(o=h),i=Math.floor((o-f)/e)+1,r=0),a=0;a<p;a++)s=u[a],c[a]=(s[0]*(i+r-1)-r/2)*e+f,x[a]=s[1];(w||_.autocontour)&&(c[0]>g&&(c.unshift(g),x.unshift(x[0])),c[c.length-1]<h&&(c.push(h),x.push(x[x.length-1])))}return M.makeColorScaleFunc({domain:c,range:x},{noNumericCheck:!0})}},87678:function($,P,t){var A=t(36914);function M(l,_){var m=(_[0][0]>l?0:1)+(_[0][1]>l?0:2)+(_[1][1]>l?0:4)+(_[1][0]>l?0:8);return m===5||m===10?l>(_[0][0]+_[0][1]+_[1][0]+_[1][1])/4?m===5?713:1114:m===5?104:208:m===15?0:m}$.exports=function(l){var _,m,f,o,e,i,r,n,s,a=l[0].z,u=a.length,p=a[0].length,c=u===2||p===2;for(m=0;m<u-1;m++)for(o=[],m===0&&(o=o.concat(A.BOTTOMSTART)),m===u-2&&(o=o.concat(A.TOPSTART)),_=0;_<p-1;_++)for(f=o.slice(),_===0&&(f=f.concat(A.LEFTSTART)),_===p-2&&(f=f.concat(A.RIGHTSTART)),e=_+","+m,i=[[a[m][_],a[m][_+1]],[a[m+1][_],a[m+1][_+1]]],s=0;s<l.length;s++)(r=M((n=l[s]).level,i))&&(n.crossings[e]=r,f.indexOf(r)!==-1&&(n.starts.push([_,m]),c&&f.indexOf(r,f.indexOf(r)+1)!==-1&&n.starts.push([_,m])))}},29854:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(21081),m=t(63893),f=t(89298),o=t(21994),e=t(50347),i=t(87678),r=t(81696),n=t(87558),s=t(84857),a=t(20083),u=t(36914),p=u.LABELOPTIMIZER;function c(h,b){var v,y,w,d,S,T,E,C="",L=0,O=h.edgepaths.map(function(F,V){return V}),z=!0;function G(F){return Math.abs(F[1]-b[2][1])<.01}function I(F){return Math.abs(F[0]-b[0][0])<.01}function H(F){return Math.abs(F[0]-b[2][0])<.01}for(;O.length;){for(T=l.smoothopen(h.edgepaths[L],h.smoothing),C+=z?T:T.replace(/^M/,"L"),O.splice(O.indexOf(L),1),v=h.edgepaths[L][h.edgepaths[L].length-1],d=-1,w=0;w<4;w++){if(!v){M.log("Missing end?",L,h);break}for(E=v,Math.abs(E[1]-b[0][1])<.01&&!H(v)?y=b[1]:I(v)?y=b[0]:G(v)?y=b[3]:H(v)&&(y=b[2]),S=0;S<h.edgepaths.length;S++){var N=h.edgepaths[S][0];Math.abs(v[0]-y[0])<.01?Math.abs(v[0]-N[0])<.01&&(N[1]-v[1])*(y[1]-N[1])>=0&&(y=N,d=S):Math.abs(v[1]-y[1])<.01?Math.abs(v[1]-N[1])<.01&&(N[0]-v[0])*(y[0]-N[0])>=0&&(y=N,d=S):M.log("endpt to newendpt is not vert. or horz.",v,y,N)}if(v=y,d>=0)break;C+="L"+y}if(d===h.edgepaths.length){M.log("unclosed perimeter path");break}L=d,(z=O.indexOf(L)===-1)&&(L=O[0],C+="Z")}for(L=0;L<h.paths.length;L++)C+=l.smoothclosed(h.paths[L],h.smoothing);return C}function x(h,b,v,y){var w=b.width/2,d=b.height/2,S=h.x,T=h.y,E=h.theta,C=Math.cos(E)*w,L=Math.sin(E)*w,O=(S>y.center?y.right-S:S-y.left)/(C+Math.abs(Math.sin(E)*d)),z=(T>y.middle?y.bottom-T:T-y.top)/(Math.abs(L)+Math.cos(E)*d);if(O<1||z<1)return 1/0;var G=p.EDGECOST*(1/(O-1)+1/(z-1));G+=p.ANGLECOST*E*E;for(var I=S-C,H=T-L,N=S+C,F=T+L,V=0;V<v.length;V++){var W=v[V],te=Math.cos(W.theta)*W.width/2,Q=Math.sin(W.theta)*W.width/2,X=2*M.segmentDistance(I,H,N,F,W.x-te,W.y-Q,W.x+te,W.y+Q)/(b.height+W.height),q=W.level===b.level,Z=q?p.SAMELEVELDISTANCE:1;if(X<=Z)return 1/0;G+=p.NEIGHBORCOST*(q?p.SAMELEVELFACTOR:1)/(X-Z)}return G}function g(h){var b,v,y=h.trace._emptypoints,w=[],d=h.z.length,S=h.z[0].length,T=[];for(b=0;b<S;b++)T.push(1);for(b=0;b<d;b++)w.push(T.slice());for(b=0;b<y.length;b++)w[(v=y[b])[0]][v[1]]=0;return h.zmask=w,w}P.plot=function(h,b,v,y){var w=b.xaxis,d=b.yaxis;M.makeTraceGroups(y,v,"contour").each(function(S){var T=A.select(this),E=S[0],C=E.trace,L=E.x,O=E.y,z=C.contours,G=n(z,b,E),I=M.ensureSingle(T,"g","heatmapcoloring"),H=[];z.coloring==="heatmap"&&(H=[S]),e(h,b,H,I),i(G),r(G);var N=w.c2p(L[0],!0),F=w.c2p(L[L.length-1],!0),V=d.c2p(O[0],!0),W=d.c2p(O[O.length-1],!0),te=[[N,W],[F,W],[F,V],[N,V]],Q=G;z.type==="constraint"&&(Q=s(G,z._operation)),function(X,q,Z){var J=M.ensureSingle(X,"g","contourbg").selectAll("path").data(Z.coloring==="fill"?[0]:[]);J.enter().append("path"),J.exit().remove(),J.attr("d","M"+q.join("L")+"Z").style("stroke","none")}(T,te,z),function(X,q,Z,J){var ne=J.coloring==="fill"||J.type==="constraint"&&J._operation!=="=",re="M"+Z.join("L")+"Z";ne&&a(q,J);var ae=M.ensureSingle(X,"g","contourfill").selectAll("path").data(ne?q:[]);ae.enter().append("path"),ae.exit().remove(),ae.each(function(ue){var he=(ue.prefixBoundary?re:"")+c(ue,Z);he?A.select(this).attr("d",he).style("stroke","none"):A.select(this).remove()})}(T,Q,te,z),function(X,q,Z,J,ne){var re=Z._context.staticPlot,ae=M.ensureSingle(X,"g","contourlines"),ue=ne.showlines!==!1,he=ne.showlabels,de=ue&&he,xe=P.createLines(ae,ue||he,q,re),me=P.createLineClip(ae,de,Z,J.trace.uid),ve=X.selectAll("g.contourlabels").data(he?[0]:[]);if(ve.exit().remove(),ve.enter().append("g").classed("contourlabels",!0),he){var Le=[],Ae=[];M.clearLocationCache();var we=P.labelFormatter(Z,J),se=l.tester.append("text").attr("data-notex",1).call(l.font,ne.labelfont),oe=q[0].xaxis,fe=q[0].yaxis,Se=oe._length,Me=fe._length,be=oe.range,Ie=fe.range,Be=M.aggNums(Math.min,null,J.x),ce=M.aggNums(Math.max,null,J.x),Te=M.aggNums(Math.min,null,J.y),ye=M.aggNums(Math.max,null,J.y),Pe=Math.max(oe.c2p(Be,!0),0),Re=Math.min(oe.c2p(ce,!0),Se),ze=Math.max(fe.c2p(ye,!0),0),He=Math.min(fe.c2p(Te,!0),Me),We={};be[0]<be[1]?(We.left=Pe,We.right=Re):(We.left=Re,We.right=Pe),Ie[0]<Ie[1]?(We.top=ze,We.bottom=He):(We.top=He,We.bottom=ze),We.middle=(We.top+We.bottom)/2,We.center=(We.left+We.right)/2,Le.push([[We.left,We.top],[We.right,We.top],[We.right,We.bottom],[We.left,We.bottom]]);var Je=Math.sqrt(Se*Se+Me*Me),lt=u.LABELDISTANCE*Je/Math.max(1,q.length/u.LABELINCREASE);xe.each(function(et){var yt=P.calcTextOpts(et.level,we,se,Z);A.select(this).selectAll("path").each(function(){var _t=M.getVisibleSegment(this,We,yt.height/2);if(_t&&!(_t.len<(yt.width+yt.height)*u.LABELMIN))for(var xt=Math.min(Math.ceil(_t.len/lt),u.LABELMAX),at=0;at<xt;at++){var ot=P.findBestTextLocation(this,_t,yt,Ae,We);if(!ot)break;P.addLabelData(ot,yt,Ae,Le)}})}),se.remove(),P.drawLabels(ve,Ae,Z,me,de?Le:null)}he&&!ue&&xe.remove()}(T,G,h,E,z),function(X,q,Z,J,ne){var re=J.trace,ae=Z._fullLayout._clips,ue="clip"+re.uid,he=ae.selectAll("#"+ue).data(re.connectgaps?[]:[0]);if(he.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),he.exit().remove(),re.connectgaps===!1){var de={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:q.xaxis,yaxis:q.yaxis,x:J.x,y:J.y,z:g(J),smoothing:0};i([de]),r([de]),a([de],{type:"levels"}),M.ensureSingle(he,"path","").attr("d",(de.prefixBoundary?"M"+ne.join("L")+"Z":"")+c(de,ne))}else ue=null;l.setClipUrl(X,ue,Z)}(T,b,h,E,te)})},P.createLines=function(h,b,v,y){var w=v[0].smoothing,d=h.selectAll("g.contourlevel").data(b?v:[]);if(d.exit().remove(),d.enter().append("g").classed("contourlevel",!0),b){var S=d.selectAll("path.openline").data(function(E){return E.pedgepaths||E.edgepaths});S.exit().remove(),S.enter().append("path").classed("openline",!0),S.attr("d",function(E){return l.smoothopen(E,w)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke");var T=d.selectAll("path.closedline").data(function(E){return E.ppaths||E.paths});T.exit().remove(),T.enter().append("path").classed("closedline",!0),T.attr("d",function(E){return l.smoothclosed(E,w)}).style("stroke-miterlimit",1).style("vector-effect",y?"none":"non-scaling-stroke")}return d},P.createLineClip=function(h,b,v,y){var w=b?"clipline"+y:null,d=v._fullLayout._clips.selectAll("#"+w).data(b?[0]:[]);return d.exit().remove(),d.enter().append("clipPath").classed("contourlineclip",!0).attr("id",w),l.setClipUrl(h,w,v),d},P.labelFormatter=function(h,b){var v=h._fullLayout,y=b.trace,w=y.contours,d={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(w.labelformat)d.tickformat=w.labelformat,o(d,v);else{var S=_.extractOpts(y);if(S&&S.colorbar&&S.colorbar._axis)d=S.colorbar._axis;else{if(w.type==="constraint"){var T=w.value;Array.isArray(T)?d.range=[T[0],T[T.length-1]]:d.range=[T,T]}else d.range=[w.start,w.end],d.nticks=(w.end-w.start)/w.size;d.range[0]===d.range[1]&&(d.range[1]+=d.range[0]||1),d.nticks||(d.nticks=1e3),o(d,v),f.prepTicks(d),d._tmin=null,d._tmax=null}}return function(E){return f.tickText(d,E).text}},P.calcTextOpts=function(h,b,v,y){var w=b(h);v.text(w).call(m.convertToTspans,y);var d=v.node(),S=l.bBox(d,!0);return{text:w,width:S.width,height:S.height,fontSize:+d.style["font-size"].replace("px",""),level:h,dy:(S.top+S.bottom)/2}},P.findBestTextLocation=function(h,b,v,y,w){var d,S,T,E,C,L=v.width;b.isClosed?(S=b.len/p.INITIALSEARCHPOINTS,d=b.min+S/2,T=b.max):(S=(b.len-L)/(p.INITIALSEARCHPOINTS+1),d=b.min+S+L/2,T=b.max-(S+L)/2);for(var O=1/0,z=0;z<p.ITERATIONS;z++){for(var G=d;G<T;G+=S){var I=M.getTextLocation(h,b.total,G,L),H=x(I,v,y,w);H<O&&(O=H,C=I,E=G)}if(O>2*p.MAXCOST)break;z&&(S/=2),T=(d=E-S/2)+1.5*S}if(O<=p.MAXCOST)return C},P.addLabelData=function(h,b,v,y){var w=b.fontSize,d=b.width+w/3,S=Math.max(0,b.height-w/3),T=h.x,E=h.y,C=h.theta,L=Math.sin(C),O=Math.cos(C),z=function(I,H){return[T+I*O-H*L,E+I*L+H*O]},G=[z(-d/2,-S/2),z(-d/2,S/2),z(d/2,S/2),z(d/2,-S/2)];v.push({text:b.text,x:T,y:E,dy:b.dy,theta:C,level:b.level,width:d,height:S}),y.push(G)},P.drawLabels=function(h,b,v,y,w){var d=h.selectAll("text").data(b,function(E){return E.text+","+E.x+","+E.y+","+E.theta});if(d.exit().remove(),d.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(E){var C=E.x+Math.sin(E.theta)*E.dy,L=E.y-Math.cos(E.theta)*E.dy;A.select(this).text(E.text).attr({x:C,y:L,transform:"rotate("+180*E.theta/Math.PI+" "+C+" "+L+")"}).call(m.convertToTspans,v)}),w){for(var S="",T=0;T<w.length;T++)S+="M"+w[T].join("L")+"Z";M.ensureSingle(y,"path","").attr("d",S)}}},18670:function($,P,t){var A=t(89298),M=t(71828);function l(_,m,f){var o={type:"linear",range:[_,m]};return A.autoTicks(o,(m-_)/(f||15)),o}$.exports=function(_,m){var f=_.contours;if(_.autocontour){var o=_.zmin,e=_.zmax;(_.zauto||o===void 0)&&(o=M.aggNums(Math.min,null,m)),(_.zauto||e===void 0)&&(e=M.aggNums(Math.max,null,m));var i=l(o,e,_.ncontours);f.size=i.dtick,f.start=A.tickFirst(i),i.range.reverse(),f.end=A.tickFirst(i),f.start===o&&(f.start+=f.size),f.end===e&&(f.end-=f.size),f.start>f.end&&(f.start=f.end=(f.start+f.end)/2),_._input.contours||(_._input.contours={}),M.extendFlat(_._input.contours,{start:f.start,end:f.end,size:f.size}),_._input.autocontour=!0}else if(f.type!=="constraint"){var r,n=f.start,s=f.end,a=_._input.contours;n>s&&(f.start=a.start=s,s=f.end=a.end=n,n=f.start),f.size>0||(r=n===s?1:l(n,s,_.ncontours).dtick,a.size=f.size=r)}}},84426:function($,P,t){var A=t(39898),M=t(91424),l=t(70035),_=t(86068);$.exports=function(m){var f=A.select(m).selectAll("g.contour");f.style("opacity",function(o){return o[0].trace.opacity}),f.each(function(o){var e=A.select(this),i=o[0].trace,r=i.contours,n=i.line,s=r.size||1,a=r.start,u=r.type==="constraint",p=!u&&r.coloring==="lines",c=!u&&r.coloring==="fill",x=p||c?_(i):null;e.selectAll("g.contourlevel").each(function(b){A.select(this).selectAll("path").call(M.lineGroupStyle,n.width,p?x(b.level):n.color,n.dash)});var g=r.labelfont;if(e.selectAll("g.contourlabels text").each(function(b){M.font(A.select(this),{family:g.family,size:g.size,color:g.color||(p?x(b.level):n.color)})}),u)e.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(c){var h;e.selectAll("g.contourfill path").style("fill",function(b){return h===void 0&&(h=b.level),x(b.level+.5*s)}),h===void 0&&(h=a),e.selectAll("g.contourbg path").style("fill",x(h-.5*s))}}),l(m)}},8724:function($,P,t){var A=t(1586),M=t(14523);$.exports=function(l,_,m,f,o){var e,i=m("contours.coloring"),r="";i==="fill"&&(e=m("contours.showlines")),e!==!1&&(i!=="lines"&&(r=m("line.color","#000")),m("line.width",.5),m("line.dash")),i!=="none"&&(l.showlegend!==!0&&(_.showlegend=!1),_._dfltShowLegend=!1,A(l,_,f,m,{prefix:"",cLetter:"z"})),m("line.smoothing"),M(m,f,r,o)}},88085:function($,P,t){var A=t(21606),M=t(70600),l=t(50693),_=t(1426).extendFlat,m=M.contours;$.exports=_({carpet:{valType:"string",editType:"calc"},z:A.z,a:A.x,a0:A.x0,da:A.dx,b:A.y,b0:A.y0,db:A.dy,text:A.text,hovertext:A.hovertext,transpose:A.transpose,atype:A.xtype,btype:A.ytype,fillcolor:M.fillcolor,autocontour:M.autocontour,ncontours:M.ncontours,contours:{type:m.type,start:m.start,end:m.end,size:m.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:m.showlines,showlabels:m.showlabels,labelfont:m.labelfont,labelformat:m.labelformat,operation:m.operation,value:m.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:M.line.color,width:M.line.width,dash:M.line.dash,smoothing:M.line.smoothing,editType:"plot"},transforms:void 0},l("",{cLetter:"z",autoColorDflt:!1}))},59885:function($,P,t){var A=t(78803),M=t(71828),l=t(68296),_=t(4742),m=t(824),f=t(43907),o=t(70769),e=t(75005),i=t(22882),r=t(18670);$.exports=function(n,s){var a=s._carpetTrace=i(n,s);if(a&&a.visible&&a.visible!=="legendonly"){if(!s.a||!s.b){var u=n.data[a.index],p=n.data[s.index];p.a||(p.a=u.a),p.b||(p.b=u.b),e(p,s,s._defaultColor,n._fullLayout)}var c=function(x,g){var h,b,v,y,w,d,S,T=g._carpetTrace,E=T.aaxis,C=T.baxis;E._minDtick=0,C._minDtick=0,M.isArray1D(g.z)&&l(g,E,C,"a","b",["z"]),h=g._a=g._a||g.a,y=g._b=g._b||g.b,h=h?E.makeCalcdata(g,"_a"):[],y=y?C.makeCalcdata(g,"_b"):[],b=g.a0||0,v=g.da||1,w=g.b0||0,d=g.db||1,S=g._z=_(g._z||g.z,g.transpose),g._emptypoints=f(S),m(S,g._emptypoints);var L=M.maxRowLength(S),O=g.xtype==="scaled"?"":h,z=o(g,O,b,v,L,E),G=g.ytype==="scaled"?"":y,I={a:z,b:o(g,G,w,d,S.length,C),z:S};return g.contours.type==="levels"&&g.contours.coloring!=="none"&&A(x,g,{vals:S,containerStr:"",cLetter:"z"}),[I]}(n,s);return r(s,s._z),c}}},75005:function($,P,t){var A=t(71828),M=t(67684),l=t(88085),_=t(83179),m=t(67217),f=t(8724);$.exports=function(o,e,i,r){function n(s,a){return A.coerce(o,e,l,s,a)}if(n("carpet"),o.a&&o.b){if(!M(o,e,n,r,"a","b"))return void(e.visible=!1);n("text"),n("contours.type")==="constraint"?_(o,e,n,r,i,{hasHover:!1}):(m(o,e,n,function(s){return A.coerce2(o,e,l,s)}),f(o,e,n,r,{hasHover:!1}))}else e._defaultColor=i,e._length=null}},93740:function($,P,t){$.exports={attributes:t(88085),supplyDefaults:t(75005),colorbar:t(90654),calc:t(59885),plot:t(51048),style:t(84426),moduleType:"trace",name:"contourcarpet",basePlotModule:t(93612),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},51048:function($,P,t){var A=t(39898),M=t(27669),l=t(67961),_=t(91424),m=t(71828),f=t(87678),o=t(81696),e=t(29854),i=t(36914),r=t(84857),n=t(87558),s=t(20083),a=t(22882),u=t(4536);function p(g,h,b){var v=g.getPointAtLength(h),y=g.getPointAtLength(b),w=y.x-v.x,d=y.y-v.y,S=Math.sqrt(w*w+d*d);return[w/S,d/S]}function c(g){var h=Math.sqrt(g[0]*g[0]+g[1]*g[1]);return[g[0]/h,g[1]/h]}function x(g,h){var b=Math.abs(g[0]*h[0]+g[1]*h[1]);return Math.sqrt(1-b*b)/b}$.exports=function(g,h,b,v){var y=h.xaxis,w=h.yaxis;m.makeTraceGroups(v,b,"contour").each(function(d){var S=A.select(this),T=d[0],E=T.trace,C=E._carpetTrace=a(g,E),L=g.calcdata[C.index][0];if(C.visible&&C.visible!=="legendonly"){var O=T.a,z=T.b,G=E.contours,I=n(G,h,T),H=G.type==="constraint",N=G._operation,F=H?N==="="?"lines":"fill":G.coloring,V=[[O[0],z[z.length-1]],[O[O.length-1],z[z.length-1]],[O[O.length-1],z[0]],[O[0],z[0]]];f(I);var W=1e-8*(O[O.length-1]-O[0]),te=1e-8*(z[z.length-1]-z[0]);o(I,W,te);var Q,X,q,Z,J=I;G.type==="constraint"&&(J=r(I,N)),function(ue,he){var de,xe,me,ve,Le,Ae,we,se,oe;for(de=0;de<ue.length;de++){for(Le=(ve=ue[de]).pedgepaths=[],Ae=ve.ppaths=[],xe=0;xe<ve.edgepaths.length;xe++){for(oe=ve.edgepaths[xe],we=[],me=0;me<oe.length;me++)we[me]=he(oe[me]);Le.push(we)}for(xe=0;xe<ve.paths.length;xe++){for(oe=ve.paths[xe],se=[],me=0;me<oe.length;me++)se[me]=he(oe[me]);Ae.push(se)}}}(I,ae);var ne=[];for(Z=L.clipsegments.length-1;Z>=0;Z--)Q=L.clipsegments[Z],X=M([],Q.x,y.c2p),q=M([],Q.y,w.c2p),X.reverse(),q.reverse(),ne.push(l(X,q,Q.bicubic));var re="M"+ne.join("L")+"Z";(function(ue,he,de,xe,me,ve){var Le,Ae,we,se,oe=m.ensureSingle(ue,"g","contourbg").selectAll("path").data(ve!=="fill"||me?[]:[0]);oe.enter().append("path"),oe.exit().remove();var fe=[];for(se=0;se<he.length;se++)Le=he[se],Ae=M([],Le.x,de.c2p),we=M([],Le.y,xe.c2p),fe.push(l(Ae,we,Le.bicubic));oe.attr("d","M"+fe.join("L")+"Z").style("stroke","none")})(S,L.clipsegments,y,w,H,F),function(ue,he,de,xe,me,ve,Le,Ae,we,se,oe){var fe=se==="fill";fe&&s(me,ue.contours);var Se=m.ensureSingle(he,"g","contourfill").selectAll("path").data(fe?me:[]);Se.enter().append("path"),Se.exit().remove(),Se.each(function(Me){var be=(Me.prefixBoundary?oe:"")+function(Ie,Be,ce,Te,ye,Pe,Re,ze){var He,We,Je,lt,et,yt,_t,xt="",at=Be.edgepaths.map(function(nt,De){return De}),ot=!0,At=1e-4*Math.abs(ce[0][0]-ce[2][0]),Ct=1e-4*Math.abs(ce[0][1]-ce[2][1]);function zt(nt){return Math.abs(nt[1]-ce[0][1])<Ct}function St(nt){return Math.abs(nt[1]-ce[2][1])<Ct}function qe(nt){return Math.abs(nt[0]-ce[0][0])<At}function Xe(nt){return Math.abs(nt[0]-ce[2][0])<At}function Ve(nt,De){var Fe,rt,tt,gt,dt="";for(zt(nt)&&!Xe(nt)||St(nt)&&!qe(nt)?(gt=ye.aaxis,tt=u(ye,Pe,[nt[0],De[0]],.5*(nt[1]+De[1]))):(gt=ye.baxis,tt=u(ye,Pe,.5*(nt[0]+De[0]),[nt[1],De[1]])),Fe=1;Fe<tt.length;Fe++)for(dt+=gt.smoothing?"C":"L",rt=0;rt<tt[Fe].length;rt++){var mt=tt[Fe][rt];dt+=[Re.c2p(mt[0]),ze.c2p(mt[1])]+" "}return dt}for(He=0,We=null;at.length;){var Ze=Be.edgepaths[He][0];for(We&&(xt+=Ve(We,Ze)),_t=_.smoothopen(Be.edgepaths[He].map(Te),Be.smoothing),xt+=ot?_t:_t.replace(/^M/,"L"),at.splice(at.indexOf(He),1),We=Be.edgepaths[He][Be.edgepaths[He].length-1],et=-1,lt=0;lt<4;lt++){if(!We){m.log("Missing end?",He,Be);break}for(zt(We)&&!Xe(We)?Je=ce[1]:qe(We)?Je=ce[0]:St(We)?Je=ce[3]:Xe(We)&&(Je=ce[2]),yt=0;yt<Be.edgepaths.length;yt++){var st=Be.edgepaths[yt][0];Math.abs(We[0]-Je[0])<At?Math.abs(We[0]-st[0])<At&&(st[1]-We[1])*(Je[1]-st[1])>=0&&(Je=st,et=yt):Math.abs(We[1]-Je[1])<Ct?Math.abs(We[1]-st[1])<Ct&&(st[0]-We[0])*(Je[0]-st[0])>=0&&(Je=st,et=yt):m.log("endpt to newendpt is not vert. or horz.",We,Je,st)}if(et>=0)break;xt+=Ve(We,Je),We=Je}if(et===Be.edgepaths.length){m.log("unclosed perimeter path");break}He=et,(ot=at.indexOf(He)===-1)&&(He=at[0],xt+=Ve(We,Je)+"Z",We=null)}for(He=0;He<Be.paths.length;He++)xt+=_.smoothclosed(Be.paths[He].map(Te),Be.smoothing);return xt}(0,Me,ve,Le,Ae,we,de,xe);be?A.select(this).attr("d",be).style("stroke","none"):A.select(this).remove()})}(E,S,y,w,J,V,ae,C,L,F,re),function(ue,he,de,xe,me,ve,Le){var Ae=de._context.staticPlot,we=m.ensureSingle(ue,"g","contourlines"),se=me.showlines!==!1,oe=me.showlabels,fe=se&&oe,Se=e.createLines(we,se||oe,he,Ae),Me=e.createLineClip(we,fe,de,xe.trace.uid),be=ue.selectAll("g.contourlabels").data(oe?[0]:[]);if(be.exit().remove(),be.enter().append("g").classed("contourlabels",!0),oe){var Ie=ve.xaxis,Be=ve.yaxis,ce=Ie._length,Te=Be._length,ye=[[[0,0],[ce,0],[ce,Te],[0,Te]]],Pe=[];m.clearLocationCache();var Re=e.labelFormatter(de,xe),ze=_.tester.append("text").attr("data-notex",1).call(_.font,me.labelfont),He={left:0,right:ce,center:ce/2,top:0,bottom:Te,middle:Te/2},We=Math.sqrt(ce*ce+Te*Te),Je=i.LABELDISTANCE*We/Math.max(1,he.length/i.LABELINCREASE);Se.each(function(lt){var et=e.calcTextOpts(lt.level,Re,ze,de);A.select(this).selectAll("path").each(function(yt){var _t=this,xt=m.getVisibleSegment(_t,He,et.height/2);if(xt&&(function(Ct,zt,St,qe,Xe,Ve){for(var Ze,st=0;st<St.pedgepaths.length;st++)zt===St.pedgepaths[st]&&(Ze=St.edgepaths[st]);if(Ze){var nt=Xe.a[0],De=Xe.a[Xe.a.length-1],Fe=Xe.b[0],rt=Xe.b[Xe.b.length-1],tt=p(Ct,0,1),gt=p(Ct,qe.total,qe.total-1),dt=ft(Ze[0],tt),mt=qe.total-ft(Ze[Ze.length-1],gt);qe.min<dt&&(qe.min=dt),qe.max>mt&&(qe.max=mt),qe.len=qe.max-qe.min}function ft(kt,ht){var pt,wt=0,Ft=.1;return(Math.abs(kt[0]-nt)<Ft||Math.abs(kt[0]-De)<Ft)&&(pt=c(Xe.dxydb_rough(kt[0],kt[1],Ft)),wt=Math.max(wt,Ve*x(ht,pt)/2)),(Math.abs(kt[1]-Fe)<Ft||Math.abs(kt[1]-rt)<Ft)&&(pt=c(Xe.dxyda_rough(kt[0],kt[1],Ft)),wt=Math.max(wt,Ve*x(ht,pt)/2)),wt}}(_t,yt,lt,xt,Le,et.height),!(xt.len<(et.width+et.height)*i.LABELMIN)))for(var at=Math.min(Math.ceil(xt.len/Je),i.LABELMAX),ot=0;ot<at;ot++){var At=e.findBestTextLocation(_t,xt,et,Pe,He);if(!At)break;e.addLabelData(At,et,Pe,ye)}})}),ze.remove(),e.drawLabels(be,Pe,de,Me,fe?ye:null)}oe&&!se&&Se.remove()}(S,I,g,T,G,h,C),_.setClipUrl(S,C._clipPathId,g)}function ae(ue){var he=C.ab2xy(ue[0],ue[1],!0);return[y.c2p(he[0]),w.c2p(he[1])]}})}},64096:function($,P,t){var A=t(50693),M=t(5386).fF,l=t(9012),_=t(99181),m=t(1426).extendFlat;$.exports=m({lon:_.lon,lat:_.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,hoverinfo:m({},l.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:M(),showlegend:m({},l.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},85070:function($,P,t){var A=t(92770),M=t(71828).isArrayOrTypedArray,l=t(50606).BADNUM,_=t(78803),m=t(71828)._;$.exports=function(f,o){for(var e=o._length,i=new Array(e),r=o.z,n=M(r)&&r.length,s=0;s<e;s++){var a=i[s]={},u=o.lon[s],p=o.lat[s];if(a.lonlat=A(u)&&A(p)?[+u,+p]:[l,l],n){var c=r[s];a.z=A(c)?c:l}}return _(f,o,{vals:n?r:[0,1],containerStr:"",cLetter:"z"}),e&&(i[0].t={labels:{lat:m(f,"lat:")+" ",lon:m(f,"lon:")+" "}}),i}},52414:function($,P,t){var A=t(92770),M=t(71828),l=t(7901),_=t(21081),m=t(50606).BADNUM,f=t(18214).makeBlank;$.exports=function(o){var e=o[0].trace,i=e.visible===!0&&e._length!==0,r=e._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:f()};if(!i)return r;var n,s=[],a=e.z,u=e.radius,p=M.isArrayOrTypedArray(a)&&a.length,c=M.isArrayOrTypedArray(u);for(n=0;n<o.length;n++){var x=o[n],g=x.lonlat;if(g[0]!==m){var h={};if(p){var b=x.z;h.z=b!==m?b:0}c&&(h.r=A(u[n])&&u[n]>0?+u[n]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:g},properties:h})}}var v=_.extractOpts(e),y=v.reversescale?_.flipScale(v.colorscale):v.colorscale,w=y[0][1],d=["interpolate",["linear"],["heatmap-density"],0,l.opacity(w)<1?w:l.addOpacity(w,0)];for(n=1;n<y.length;n++)d.push(y[n][0],y[n][1]);var S=["interpolate",["linear"],["get","z"],v.min,0,v.max,1];return M.extendFlat(r.heatmap.paint,{"heatmap-weight":p?S:1/(v.max-v.min),"heatmap-color":d,"heatmap-radius":c?{type:"identity",property:"r"}:e.radius,"heatmap-opacity":e.opacity}),r.geojson={type:"FeatureCollection",features:s},r.heatmap.layout.visibility="visible",r}},79429:function($,P,t){var A=t(71828),M=t(1586),l=t(64096);$.exports=function(_,m,f,o){function e(s,a){return A.coerce(_,m,l,s,a)}var i=e("lon")||[],r=e("lat")||[],n=Math.min(i.length,r.length);n?(m._length=n,e("z"),e("radius"),e("below"),e("text"),e("hovertext"),e("hovertemplate"),M(_,m,o,e,{prefix:"",cLetter:"z"})):m.visible=!1}},62474:function($){$.exports=function(P,t){return P.lon=t.lon,P.lat=t.lat,P.z=t.z,P}},84684:function($,P,t){var A=t(89298),M=t(28178).hoverPoints,l=t(28178).getExtraText;$.exports=function(_,m,f){var o=M(_,m,f);if(o){var e=o[0],i=e.cd,r=i[0].trace,n=i[e.index];if(delete e.color,"z"in n){var s=e.subplot.mockAxis;e.z=n.z,e.zLabel=A.tickText(s,s.c2l(n.z),"hover").text}return e.extraText=l(r,n,i[0].t.labels),[e]}}},93814:function($,P,t){$.exports={attributes:t(64096),supplyDefaults:t(79429),colorbar:t(61243),formatLabels:t(15636),calc:t(85070),plot:t(7336),hoverPoints:t(84684),eventData:t(62474),getBelow:function(A,M){for(var l=M.getMapLayers(),_=0;_<l.length;_++){var m=l[_],f=m.id;if(m.type==="symbol"&&typeof f=="string"&&f.indexOf("plotly-")===-1)return f}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(50101),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},7336:function($,P,t){var A=t(52414),M=t(77734).traceLayerPrefix;function l(m,f){this.type="densitymapbox",this.subplot=m,this.uid=f,this.sourceId="source-"+f,this.layerList=[["heatmap",M+f+"-heatmap"]],this.below=null}var _=l.prototype;_.update=function(m){var f=this.subplot,o=this.layerList,e=A(m),i=f.belowLookup["trace-"+this.uid];f.map.getSource(this.sourceId).setData(e.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(e,i),this.below=i);for(var r=0;r<o.length;r++){var n=o[r],s=n[0],a=n[1],u=e[s];f.setOptions(a,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&f.setOptions(a,"setPaintProperty",u.paint)}},_._addLayers=function(m,f){for(var o=this.subplot,e=this.layerList,i=this.sourceId,r=0;r<e.length;r++){var n=e[r],s=n[0],a=m[s];o.addLayer({type:s,id:n[1],source:i,layout:a.layout,paint:a.paint},f)}},_._removeLayers=function(){for(var m=this.subplot.map,f=this.layerList,o=f.length-1;o>=0;o--)m.removeLayer(f[o][1])},_.dispose=function(){var m=this.subplot.map;this._removeLayers(),m.removeSource(this.sourceId)},$.exports=function(m,f){var o=f[0].trace,e=new l(m,o.uid),i=e.sourceId,r=A(f),n=e.below=m.belowLookup["trace-"+o.uid];return m.map.addSource(i,{type:"geojson",data:r.geojson}),e._addLayers(r,n),e}},49789:function($,P,t){var A=t(71828);$.exports=function(M,l){for(var _=0;_<M.length;_++)M[_].i=_;A.mergeArray(l.text,M,"tx"),A.mergeArray(l.hovertext,M,"htx");var m=l.marker;if(m){A.mergeArray(m.opacity,M,"mo"),A.mergeArray(m.color,M,"mc");var f=m.line;f&&(A.mergeArray(f.color,M,"mlc"),A.mergeArrayCastPositive(f.width,M,"mlw"))}}},1285:function($,P,t){var A,M=t(1486),l=t(82196).line,_=t(9012),m=t(12663).axisHoverFormat,f=t(5386).fF,o=t(5386).si,e=t(18517),i=t(1426).extendFlat,r=t(7901);$.exports={x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),hovertext:M.hovertext,hovertemplate:f({},{keys:e.eventDataKeys}),hoverinfo:i({},_.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),text:M.text,textposition:M.textposition,insidetextanchor:i({},M.insidetextanchor,{dflt:"middle"}),textangle:i({},M.textangle,{dflt:0}),textfont:M.textfont,insidetextfont:M.insidetextfont,outsidetextfont:M.outsidetextfont,constraintext:M.constraintext,cliponaxis:M.cliponaxis,orientation:i({},M.orientation,{}),offset:i({},M.offset,{arrayOk:!1}),width:i({},M.width,{arrayOk:!1}),marker:(A=i({},M.marker),delete A.pattern,A),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},l.color,{dflt:r.defaultLine}),width:i({},l.width,{dflt:0,editType:"plot"}),dash:l.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:M.offsetgroup,alignmentgroup:M.alignmentgroup}},9532:function($,P,t){var A=t(89298),M=t(42973),l=t(49789),_=t(66279),m=t(50606).BADNUM;function f(o){return o===m?0:o}$.exports=function(o,e){var i,r,n,s,a,u,p,c,x=A.getFromId(o,e.xaxis||"x"),g=A.getFromId(o,e.yaxis||"y");e.orientation==="h"?(i=x.makeCalcdata(e,"x"),n=g.makeCalcdata(e,"y"),s=M(e,g,"y",n),a=!!e.yperiodalignment,u="y"):(i=g.makeCalcdata(e,"y"),n=x.makeCalcdata(e,"x"),s=M(e,x,"x",n),a=!!e.xperiodalignment,u="x"),r=s.vals;var h,b=Math.min(r.length,i.length),v=new Array(b);for(e._base=[],p=0;p<b;p++){i[p]<0&&(i[p]=m);var y=!1;i[p]!==m&&p+1<b&&i[p+1]!==m&&(y=!0),c=v[p]={p:r[p],s:i[p],cNext:y},e._base[p]=-.5*c.s,a&&(v[p].orig_p=n[p],v[p][u+"End"]=s.ends[p],v[p][u+"Start"]=s.starts[p]),e.ids&&(c.id=String(e.ids[p])),p===0&&(v[0].vTotal=0),v[0].vTotal+=f(c.s),c.begR=f(c.s)/f(v[0].s)}for(p=0;p<b;p++)(c=v[p]).s!==m&&(c.sumR=c.s/v[0].vTotal,c.difR=h!==void 0?c.s/h:1,h=c.s);return l(v,e),_(v,e),v}},18517:function($){$.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},8984:function($,P,t){var A=t(11661).setGroupPositions;$.exports=function(M,l){var _,m,f=M._fullLayout,o=M._fullData,e=M.calcdata,i=l.xaxis,r=l.yaxis,n=[],s=[],a=[];for(m=0;m<o.length;m++){var u=o[m],p=u.orientation==="h";u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="funnel"&&(_=e[m],p?a.push(_):s.push(_),n.push(_))}var c={mode:f.funnelmode,norm:f.funnelnorm,gap:f.funnelgap,groupgap:f.funnelgroupgap};for(A(M,i,r,s,c),A(M,r,i,a,c),m=0;m<n.length;m++){_=n[m];for(var x=0;x<_.length;x++)x+1<_.length&&(_[x].nextP0=_[x+1].p0,_[x].nextS0=_[x+1].s0,_[x].nextP1=_[x+1].p1,_[x].nextS1=_[x+1].s1)}}},26199:function($,P,t){var A=t(71828),M=t(26125),l=t(90769).handleText,_=t(67513),m=t(73927),f=t(1285),o=t(7901);$.exports={supplyDefaults:function(e,i,r,n){function s(c,x){return A.coerce(e,i,f,c,x)}if(_(e,i,n,s)){m(e,i,n,s),s("xhoverformat"),s("yhoverformat"),s("orientation",i.y&&!i.x?"v":"h"),s("offset"),s("width");var a=s("text");s("hovertext"),s("hovertemplate");var u=s("textposition");l(e,i,n,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition==="none"||i.texttemplate||s("textinfo",Array.isArray(a)?"text+value":"value");var p=s("marker.color",r);s("marker.line.color",o.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",function(c){var x=A.isArrayOrTypedArray(c)?"#000":c;return o.addOpacity(x,.5*o.opacity(x))}(p)),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash")))}else i.visible=!1},crossTraceDefaults:function(e,i){var r,n;function s(u){return A.coerce(n._input,n,f,u)}if(i.funnelmode==="group")for(var a=0;a<e.length;a++)r=(n=e[a])._input,M(r,n,i,s)}}},34598:function($){$.exports=function(P,t){return P.x="xVal"in t?t.xVal:t.x,P.y="yVal"in t?t.yVal:t.y,"percentInitial"in t&&(P.percentInitial=t.percentInitial),"percentPrevious"in t&&(P.percentPrevious=t.percentPrevious),"percentTotal"in t&&(P.percentTotal=t.percentTotal),t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),P}},63341:function($,P,t){var A=t(7901).opacity,M=t(95423).hoverOnBars,l=t(71828).formatPercent;$.exports=function(_,m,f,o,e){var i=M(_,m,f,o,e);if(i){var r=i.cd,n=r[0].trace,s=n.orientation==="h",a=r[i.index];i[(s?"x":"y")+"LabelVal"]=a.s,i.percentInitial=a.begR,i.percentInitialLabel=l(a.begR,1),i.percentPrevious=a.difR,i.percentPreviousLabel=l(a.difR,1),i.percentTotal=a.sumR,i.percentTotalLabel=l(a.sumR,1);var u=a.hi||n.hoverinfo,p=[];if(u&&u!=="none"&&u!=="skip"){var c=u==="all",x=u.split("+"),g=function(h){return c||x.indexOf(h)!==-1};g("percent initial")&&p.push(i.percentInitialLabel+" of initial"),g("percent previous")&&p.push(i.percentPreviousLabel+" of previous"),g("percent total")&&p.push(i.percentTotalLabel+" of total")}return i.extraText=p.join("<br>"),i.color=function(h,b){var v=h.marker,y=b.mc||v.color,w=b.mlc||v.line.color,d=b.mlw||v.line.width;return A(y)?y:A(w)&&d?w:void 0}(n,a),[i]}}},51759:function($,P,t){$.exports={attributes:t(1285),layoutAttributes:t(10440),supplyDefaults:t(26199).supplyDefaults,crossTraceDefaults:t(26199).crossTraceDefaults,supplyLayoutDefaults:t(93138),calc:t(9532),crossTraceCalc:t(8984),plot:t(80461),style:t(68266).style,hoverPoints:t(63341),eventData:t(34598),selectPoints:t(81974),moduleType:"trace",name:"funnel",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},10440:function($){$.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},93138:function($,P,t){var A=t(71828),M=t(10440);$.exports=function(l,_,m){var f=!1;function o(r,n){return A.coerce(l,_,M,r,n)}for(var e=0;e<m.length;e++){var i=m[e];if(i.visible&&i.type==="funnel"){f=!0;break}}f&&(o("funnelmode"),o("funnelgap",.2),o("funnelgroupgap"))}},80461:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(50606).BADNUM,m=t(17295),f=t(72597).clearMinTextSize;function o(e,i,r,n){var s=[],a=[],u=n?i:r,p=n?r:i;return s[0]=u.c2p(e.s0,!0),a[0]=p.c2p(e.p0,!0),s[1]=u.c2p(e.s1,!0),a[1]=p.c2p(e.p1,!0),s[2]=u.c2p(e.nextS0,!0),a[2]=p.c2p(e.nextP0,!0),s[3]=u.c2p(e.nextS1,!0),a[3]=p.c2p(e.nextP1,!0),n?[s,a]:[a,s]}$.exports=function(e,i,r,n){var s=e._fullLayout;f("funnel",s),function(a,u,p,c){var x=u.xaxis,g=u.yaxis;M.makeTraceGroups(c,p,"trace bars").each(function(h){var b=A.select(this),v=h[0].trace,y=M.ensureSingle(b,"g","regions");if(v.connector&&v.connector.visible){var w=v.orientation==="h",d=y.selectAll("g.region").data(M.identity);d.enter().append("g").classed("region",!0),d.exit().remove();var S=d.size();d.each(function(T,E){if(E===S-1||T.cNext){var C=o(T,x,g,w),L=C[0],O=C[1],z="";L[0]!==_&&O[0]!==_&&L[1]!==_&&O[1]!==_&&L[2]!==_&&O[2]!==_&&L[3]!==_&&O[3]!==_&&(z+=w?"M"+L[0]+","+O[1]+"L"+L[2]+","+O[2]+"H"+L[3]+"L"+L[1]+","+O[1]+"Z":"M"+L[1]+","+O[1]+"L"+L[2]+","+O[3]+"V"+O[2]+"L"+L[1]+","+O[0]+"Z"),z===""&&(z="M0,0Z"),M.ensureSingle(A.select(this),"path").attr("d",z).call(l.setClipUrl,u.layerClipId,a)}})}else y.remove()})}(e,i,r,n),function(a,u,p,c){var x=u.xaxis,g=u.yaxis;M.makeTraceGroups(c,p,"trace bars").each(function(h){var b=A.select(this),v=h[0].trace,y=M.ensureSingle(b,"g","lines");if(v.connector&&v.connector.visible&&v.connector.line.width){var w=v.orientation==="h",d=y.selectAll("g.line").data(M.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var S=d.size();d.each(function(T,E){if(E===S-1||T.cNext){var C=o(T,x,g,w),L=C[0],O=C[1],z="";L[3]!==void 0&&O[3]!==void 0&&(w?(z+="M"+L[0]+","+O[1]+"L"+L[2]+","+O[2],z+="M"+L[1]+","+O[1]+"L"+L[3]+","+O[2]):(z+="M"+L[1]+","+O[1]+"L"+L[2]+","+O[3],z+="M"+L[1]+","+O[0]+"L"+L[2]+","+O[2])),z===""&&(z="M0,0Z"),M.ensureSingle(A.select(this),"path").attr("d",z).call(l.setClipUrl,u.layerClipId,a)}})}else y.remove()})}(e,i,r,n),m.plot(e,i,r,n,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},68266:function($,P,t){var A=t(39898),M=t(91424),l=t(7901),_=t(37822).DESELECTDIM,m=t(16688),f=t(72597).resizeText,o=m.styleTextPoints;$.exports={style:function(e,i,r){var n=r||A.select(e).selectAll("g.funnellayer").selectAll("g.trace");f(e,n,"funnel"),n.style("opacity",function(s){return s[0].trace.opacity}),n.each(function(s){var a=A.select(this),u=s[0].trace;a.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u.marker;A.select(this).call(l.fill,p.mc||c.color).call(l.stroke,p.mlc||c.line.color).call(M.dashLine,c.line.dash,p.mlw||c.line.width).style("opacity",u.selectedpoints&&!p.selected?_:1)}}),o(a,u,e),a.selectAll(".regions").each(function(){A.select(this).selectAll("path").style("stroke-width",0).call(l.fill,u.connector.fillcolor)}),a.selectAll(".lines").each(function(){var p=u.connector.line;M.lineGroupStyle(A.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},86807:function($,P,t){var A=t(34e3),M=t(9012),l=t(27670).Y,_=t(5386).fF,m=t(5386).si,f=t(1426).extendFlat;$.exports={labels:A.labels,label0:A.label0,dlabel:A.dlabel,values:A.values,marker:{colors:A.marker.colors,line:{color:f({},A.marker.line.color,{dflt:null}),width:f({},A.marker.line.width,{dflt:1}),editType:"calc"},pattern:A.marker.pattern,editType:"calc"},text:A.text,hovertext:A.hovertext,scalegroup:f({},A.scalegroup,{}),textinfo:f({},A.textinfo,{flags:["label","text","value","percent"]}),texttemplate:m({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:f({},M.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","text","percent"]}),textposition:f({},A.textposition,{values:["inside","none"],dflt:"inside"}),textfont:A.textfont,insidetextfont:A.insidetextfont,title:{text:A.title.text,font:A.title.font,position:f({},A.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:l({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},6452:function($,P,t){var A=t(74875);P.name="funnelarea",P.plot=function(M,l,_,m){A.plotBasePlot(P.name,M,l,_,m)},P.clean=function(M,l,_,m){A.cleanBasePlot(P.name,M,l,_,m)}},89574:function($,P,t){var A=t(32354);$.exports={calc:function(M,l){return A.calc(M,l)},crossTraceCalc:function(M){A.crossTraceCalc(M,{type:"funnelarea"})}}},86282:function($,P,t){var A=t(71828),M=t(86807),l=t(27670).c,_=t(90769).handleText,m=t(37434).handleLabelsAndValues,f=t(37434).handleMarkerDefaults;$.exports=function(o,e,i,r){function n(b,v){return A.coerce(o,e,M,b,v)}var s=n("labels"),a=n("values"),u=m(s,a),p=u.len;if(e._hasLabels=u.hasLabels,e._hasValues=u.hasValues,!e._hasLabels&&e._hasValues&&(n("label0"),n("dlabel")),p){e._length=p,f(o,e,r,n),n("scalegroup");var c,x=n("text"),g=n("texttemplate");if(g||(c=n("textinfo",Array.isArray(x)?"text+percent":"percent")),n("hovertext"),n("hovertemplate"),g||c&&c!=="none"){var h=n("textposition");_(o,e,r,n,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}l(e,r,n),n("title.text")&&(n("title.position"),A.coerceFont(n,"title.font",r.font)),n("aspectratio"),n("baseratio")}else e.visible=!1}},10421:function($,P,t){$.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(6452),categories:["pie-like","funnelarea","showLegend"],attributes:t(86807),layoutAttributes:t(80097),supplyDefaults:t(86282),supplyLayoutDefaults:t(57402),calc:t(89574).calc,crossTraceCalc:t(89574).crossTraceCalc,plot:t(79187),style:t(71858),styleOne:t(63463),meta:{}}},80097:function($,P,t){var A=t(92774).hiddenlabels;$.exports={hiddenlabels:A,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57402:function($,P,t){var A=t(71828),M=t(80097);$.exports=function(l,_){function m(f,o){return A.coerce(l,_,M,f,o)}m("hiddenlabels"),m("funnelareacolorway",_.colorway),m("extendfunnelareacolors")}},79187:function($,P,t){var A=t(39898),M=t(91424),l=t(71828),_=l.strScale,m=l.strTranslate,f=t(63893),o=t(17295).toMoveInsideBar,e=t(72597),i=e.recordMinTextSize,r=e.clearMinTextSize,n=t(53581),s=t(14575),a=s.attachFxHandlers,u=s.determineInsideTextFont,p=s.layoutAreas,c=s.prerenderTitles,x=s.positionTitleOutside,g=s.formatSliceLabel;function h(b,v){return"l"+(v[0]-b[0])+","+(v[1]-b[1])}$.exports=function(b,v){var y=b._context.staticPlot,w=b._fullLayout;r("funnelarea",w),c(v,b),p(v,w._size),l.makeTraceGroups(w._funnelarealayer,v,"trace").each(function(d){var S=A.select(this),T=d[0],E=T.trace;(function(C){if(C.length){var L=C[0],O=L.trace,z=O.aspectratio,G=O.baseratio;G>.999&&(G=.999);var I,H,N,F=Math.pow(G,2),V=L.vTotal,W=V,te=V*F/(1-F)/V,Q=[];for(Q.push(we()),H=C.length-1;H>-1;H--)if(!(N=C[H]).hidden){var X=N.v/W;te+=X,Q.push(we())}var q=1/0,Z=-1/0;for(H=0;H<Q.length;H++)I=Q[H],q=Math.min(q,I[1]),Z=Math.max(Z,I[1]);for(H=0;H<Q.length;H++)Q[H][1]-=(Z+q)/2;var J=Q[Q.length-1][0],ne=L.r,re=(Z-q)/2,ae=ne/J,ue=ne/re*z;for(L.r=ue*re,H=0;H<Q.length;H++)Q[H][0]*=ae,Q[H][1]*=ue;var he,de,xe=[-(I=Q[0])[0],I[1]],me=[I[0],I[1]],ve=0;for(H=C.length-1;H>-1;H--)if(!(N=C[H]).hidden){var Le=Q[ve+=1][0],Ae=Q[ve][1];N.TL=[-Le,Ae],N.TR=[Le,Ae],N.BL=xe,N.BR=me,N.pxmid=(he=N.TR,de=N.BR,[.5*(he[0]+de[0]),.5*(he[1]+de[1])]),xe=N.TL,me=N.TR}}function we(){var se,oe={x:se=Math.sqrt(te),y:-se};return[oe.x,oe.y]}})(d),S.each(function(){var C=A.select(this).selectAll("g.slice").data(d);C.enter().append("g").classed("slice",!0),C.exit().remove(),C.each(function(O,z){if(O.hidden)A.select(this).selectAll("path,g").remove();else{O.pointNumber=O.i,O.curveNumber=E.index;var G=T.cx,I=T.cy,H=A.select(this),N=H.selectAll("path.surface").data([O]);N.enter().append("path").classed("surface",!0).style({"pointer-events":y?"none":"all"}),H.call(a,b,d);var F="M"+(G+O.TR[0])+","+(I+O.TR[1])+h(O.TR,O.BR)+h(O.BR,O.BL)+h(O.BL,O.TL)+"Z";N.attr("d",F),g(b,O,T);var V=n.castOption(E.textposition,O.pts),W=H.selectAll("g.slicetext").data(O.text&&V!=="none"?[0]:[]);W.enter().append("g").classed("slicetext",!0),W.exit().remove(),W.each(function(){var te=l.ensureSingle(A.select(this),"text","",function(ae){ae.attr("data-notex",1)}),Q=l.ensureUniformFontSize(b,u(E,O,w.font));te.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(M.font,Q).call(f.convertToTspans,b);var X,q,Z,J=M.bBox(te.node()),ne=Math.min(O.BL[1],O.BR[1])+I,re=Math.max(O.TL[1],O.TR[1])+I;q=Math.max(O.TL[0],O.BL[0])+G,Z=Math.min(O.TR[0],O.BR[0])+G,(X=o(q,Z,ne,re,J,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=Q.size,i(E.type,X,w),d[z].transform=X,l.setTransormAndDisplay(te,X)})}});var L=A.select(this).selectAll("g.titletext").data(E.title.text?[0]:[]);L.enter().append("g").classed("titletext",!0),L.exit().remove(),L.each(function(){var O=l.ensureSingle(A.select(this),"text","",function(I){I.attr("data-notex",1)}),z=E.title.text;E._meta&&(z=l.templateString(z,E._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(M.font,E.title.font).call(f.convertToTspans,b);var G=x(T,w._size);O.attr("transform",m(G.x,G.y)+_(Math.min(1,G.scale))+m(G.tx,G.ty))})})})}},71858:function($,P,t){var A=t(39898),M=t(63463),l=t(72597).resizeText;$.exports=function(_){var m=_._fullLayout._funnelarealayer.selectAll(".trace");l(_,m,"funnelarea"),m.each(function(f){var o=f[0].trace,e=A.select(this);e.style({opacity:o.opacity}),e.selectAll("path.surface").each(function(i){A.select(this).call(M,i,o,_)})})}},21606:function($,P,t){var A=t(82196),M=t(9012),l=t(41940),_=t(12663).axisHoverFormat,m=t(5386).fF,f=t(5386).si,o=t(50693),e=t(1426).extendFlat;$.exports=e({z:{valType:"data_array",editType:"calc"},x:e({},A.x,{impliedEdits:{xtype:"array"}}),x0:e({},A.x0,{impliedEdits:{xtype:"scaled"}}),dx:e({},A.dx,{impliedEdits:{xtype:"scaled"}}),y:e({},A.y,{impliedEdits:{ytype:"array"}}),y0:e({},A.y0,{impliedEdits:{ytype:"scaled"}}),dy:e({},A.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:e({},A.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:e({},A.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:e({},A.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:e({},A.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:e({},A.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:e({},A.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:m(),texttemplate:f({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:l({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:e({},M.showlegend,{dflt:!1})},{transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},90757:function($,P,t){var A=t(73972),M=t(71828),l=t(89298),_=t(42973),m=t(17562),f=t(78803),o=t(68296),e=t(4742),i=t(824),r=t(43907),n=t(70769),s=t(50606).BADNUM;function a(u){for(var p=[],c=u.length,x=0;x<c;x++){var g=u[x];g!==s&&p.push(g)}return p}$.exports=function(u,p){var c,x,g,h,b,v,y,w,d,S,T,E=l.getFromId(u,p.xaxis||"x"),C=l.getFromId(u,p.yaxis||"y"),L=A.traceIs(p,"contour"),O=A.traceIs(p,"histogram"),z=A.traceIs(p,"gl2d"),G=L?"best":p.zsmooth;if(E._minDtick=0,C._minDtick=0,O)h=(T=m(u,p)).orig_x,c=T.x,x=T.x0,g=T.dx,w=T.orig_y,b=T.y,v=T.y0,y=T.dy,d=T.z;else{var I=p.z;M.isArray1D(I)?(o(p,E,C,"x","y",["z"]),c=p._x,b=p._y,I=p._z):(h=p.x?E.makeCalcdata(p,"x"):[],w=p.y?C.makeCalcdata(p,"y"):[],c=_(p,E,"x",h).vals,b=_(p,C,"y",w).vals,p._x=c,p._y=b),x=p.x0,g=p.dx,v=p.y0,y=p.dy,d=e(I,p,E,C)}function H(Z){G=p._input.zsmooth=p.zsmooth=!1,M.warn('cannot use zsmooth: "fast": '+Z)}function N(Z){if(Z.length>1){var J=(Z[Z.length-1]-Z[0])/(Z.length-1),ne=Math.abs(J/100);for(S=0;S<Z.length-1;S++)if(Math.abs(Z[S+1]-Z[S]-J)>ne)return!1}return!0}(E.rangebreaks||C.rangebreaks)&&(d=function(Z,J,ne){for(var re=[],ae=-1,ue=0;ue<ne.length;ue++)if(J[ue]!==s){re[++ae]=[];for(var he=0;he<ne[ue].length;he++)Z[he]!==s&&re[ae].push(ne[ue][he])}return re}(c,b,d),O||(c=a(c),b=a(b),p._x=c,p._y=b)),O||!L&&!p.connectgaps||(p._emptypoints=r(d),i(d,p._emptypoints)),p._islinear=!1,E.type==="log"||C.type==="log"?G==="fast"&&H("log axis found"):N(c)?N(b)?p._islinear=!0:G==="fast"&&H("y scale is not linear"):G==="fast"&&H("x scale is not linear");var F=M.maxRowLength(d),V=p.xtype==="scaled"?"":c,W=n(p,V,x,g,F,E),te=p.ytype==="scaled"?"":b,Q=n(p,te,v,y,d.length,C);z||(p._extremes[E._id]=l.findExtremes(E,W),p._extremes[C._id]=l.findExtremes(C,Q));var X={x:W,y:Q,z:d,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&h&&(X.orig_x=h),p.yperiodalignment&&w&&(X.orig_y=w),V&&V.length===W.length-1&&(X.xCenter=V),te&&te.length===Q.length-1&&(X.yCenter=te),O&&(X.xRanges=T.xRanges,X.yRanges=T.yRanges,X.pts=T.pts),L||f(u,p,{vals:d,cLetter:"z"}),L&&p.contours&&p.contours.coloring==="heatmap"){var q={type:p.type==="contour"?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};X.xfill=n(q,V,x,g,F,E),X.yfill=n(q,te,v,y,d.length,C)}return[X]}},4742:function($,P,t){var A=t(92770),M=t(71828),l=t(50606).BADNUM;$.exports=function(_,m,f,o){var e,i,r,n,s,a;function u(b){if(A(b))return+b}if(m&&m.transpose){for(e=0,s=0;s<_.length;s++)e=Math.max(e,_[s].length);if(e===0)return!1;r=function(b){return b.length},n=function(b,v,y){return(b[y]||[])[v]}}else e=_.length,r=function(b,v){return b[v].length},n=function(b,v,y){return(b[v]||[])[y]};var p=function(b,v,y){return v===l||y===l?l:n(b,v,y)};function c(b){if(m&&m.type!=="carpet"&&m.type!=="contourcarpet"&&b&&b.type==="category"&&m["_"+b._id.charAt(0)].length){var v=b._id.charAt(0),y={},w=m["_"+v+"CategoryMap"]||m[v];for(s=0;s<w.length;s++)y[w[s]]=s;return function(d){var S=y[b._categories[d]];return S+1?S:l}}return M.identity}var x=c(f),g=c(o);o&&o.type==="category"&&(e=o._categories.length);var h=new Array(e);for(s=0;s<e;s++)for(i=f&&f.type==="category"?f._categories.length:r(_,s),h[s]=new Array(i),a=0;a<i;a++)h[s][a]=u(p(_,g(s),x(a)));return h}},61243:function($){$.exports={min:"zmin",max:"zmax"}},68296:function($,P,t){var A=t(71828),M=t(50606).BADNUM,l=t(42973);$.exports=function(_,m,f,o,e,i){var r=_._length,n=m.makeCalcdata(_,o),s=f.makeCalcdata(_,e);n=l(_,m,o,n).vals,s=l(_,f,e,s).vals;var a,u,p,c,x=_.text,g=x!==void 0&&A.isArray1D(x),h=_.hovertext,b=h!==void 0&&A.isArray1D(h),v=A.distinctVals(n),y=v.vals,w=A.distinctVals(s),d=w.vals,S=[],T=d.length,E=y.length;for(a=0;a<i.length;a++)S[a]=A.init2dArray(T,E);g&&(p=A.init2dArray(T,E)),b&&(c=A.init2dArray(T,E));var C=A.init2dArray(T,E);for(a=0;a<r;a++)if(n[a]!==M&&s[a]!==M){var L=A.findBin(n[a]+v.minDiff/2,y),O=A.findBin(s[a]+w.minDiff/2,d);for(u=0;u<i.length;u++){var z=_[i[u]];S[u][O][L]=z[a],C[O][L]=a}g&&(p[O][L]=x[a]),b&&(c[O][L]=h[a])}for(_["_"+o]=y,_["_"+e]=d,u=0;u<i.length;u++)_["_"+i[u]]=S[u];g&&(_._text=p),b&&(_._hovertext=c),m&&m.type==="category"&&(_["_"+o+"CategoryMap"]=y.map(function(G){return m._categories[G]})),f&&f.type==="category"&&(_["_"+e+"CategoryMap"]=d.map(function(G){return f._categories[G]})),_._after2before=C}},76382:function($,P,t){var A=t(71828),M=t(67684),l=t(58623),_=t(73927),m=t(49901),f=t(1586),o=t(21606);$.exports=function(e,i,r,n){function s(a,u){return A.coerce(e,i,o,a,u)}M(e,i,s,n)?(_(e,i,n,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),l(s,n),m(e,i,s,n),s("hoverongaps"),s("connectgaps",A.isArray1D(i.z)&&i.zsmooth!==!1),f(e,i,n,s,{prefix:"",cLetter:"z"})):i.visible=!1}},43907:function($,P,t){var A=t(71828).maxRowLength;$.exports=function(M){var l,_,m,f,o,e,i,r,n=[],s={},a=[],u=M[0],p=[],c=[0,0,0],x=A(M);for(_=0;_<M.length;_++)for(l=p,p=u,u=M[_+1]||[],m=0;m<x;m++)p[m]===void 0&&((e=(p[m-1]!==void 0?1:0)+(p[m+1]!==void 0?1:0)+(l[m]!==void 0?1:0)+(u[m]!==void 0?1:0))?(_===0&&e++,m===0&&e++,_===M.length-1&&e++,m===p.length-1&&e++,e<4&&(s[[_,m]]=[_,m,e]),n.push([_,m,e])):a.push([_,m]));for(;a.length;){for(i={},r=!1,o=a.length-1;o>=0;o--)(e=((s[[(_=(f=a[o])[0])-1,m=f[1]]]||c)[2]+(s[[_+1,m]]||c)[2]+(s[[_,m-1]]||c)[2]+(s[[_,m+1]]||c)[2])/20)&&(i[f]=[_,m,e],a.splice(o,1),r=!0);if(!r)throw"findEmpties iterated with no new neighbors";for(f in i)s[f]=i[f],n.push(i[f])}return n.sort(function(g,h){return h[2]-g[2]})}},46248:function($,P,t){var A=t(30211),M=t(71828),l=t(89298),_=t(21081).extractOpts;$.exports=function(m,f,o,e,i){i||(i={});var r,n,s,a,u=i.isContour,p=m.cd[0],c=p.trace,x=m.xa,g=m.ya,h=p.x,b=p.y,v=p.z,y=p.xCenter,w=p.yCenter,d=p.zmask,S=c.zhoverformat,T=h,E=b;if(m.index!==!1){try{s=Math.round(m.index[1]),a=Math.round(m.index[0])}catch{return void M.error("Error hovering on heatmap, pointNumber must be [row,col], found:",m.index)}if(s<0||s>=v[0].length||a<0||a>v.length)return}else{if(A.inbox(f-h[0],f-h[h.length-1],0)>0||A.inbox(o-b[0],o-b[b.length-1],0)>0)return;if(u){var C;for(T=[2*h[0]-h[1]],C=1;C<h.length;C++)T.push((h[C]+h[C-1])/2);for(T.push([2*h[h.length-1]-h[h.length-2]]),E=[2*b[0]-b[1]],C=1;C<b.length;C++)E.push((b[C]+b[C-1])/2);E.push([2*b[b.length-1]-b[b.length-2]])}s=Math.max(0,Math.min(T.length-2,M.findBin(f,T))),a=Math.max(0,Math.min(E.length-2,M.findBin(o,E)))}var L,O,z=x.c2p(h[s]),G=x.c2p(h[s+1]),I=g.c2p(b[a]),H=g.c2p(b[a+1]);u?(L=p.orig_x||h,O=p.orig_y||b,G=z,r=L[s],H=I,n=O[a]):(L=p.orig_x||y||h,O=p.orig_y||w||b,r=y?L[s]:(L[s]+L[s+1])/2,n=w?O[a]:(O[a]+O[a+1])/2,x&&x.type==="category"&&(r=h[s]),g&&g.type==="category"&&(n=b[a]),c.zsmooth&&(z=G=x.c2p(r),I=H=g.c2p(n)));var N=v[a][s];if(d&&!d[a][s]&&(N=void 0),N!==void 0||c.hoverongaps){var F;Array.isArray(p.hovertext)&&Array.isArray(p.hovertext[a])?F=p.hovertext[a][s]:Array.isArray(p.text)&&Array.isArray(p.text[a])&&(F=p.text[a][s]);var V=_(c),W={type:"linear",range:[V.min,V.max],hoverformat:S,_separators:x._separators,_numFormat:x._numFormat},te=l.tickText(W,N,"hover").text;return[M.extendFlat(m,{index:c._after2before?c._after2before[a][s]:[a,s],distance:m.maxHoverDistance,spikeDistance:m.maxSpikeDistance,x0:z,x1:G,y0:I,y1:H,xLabelVal:r,yLabelVal:n,zLabelVal:N,zLabel:te,text:F})]}}},92165:function($,P,t){$.exports={attributes:t(21606),supplyDefaults:t(76382),calc:t(90757),plot:t(50347),colorbar:t(61243),style:t(70035),hoverPoints:t(46248),moduleType:"trace",name:"heatmap",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},824:function($,P,t){var A=t(71828),M=[[-1,0],[1,0],[0,-1],[0,1]];function l(m){return .5-.25*Math.min(1,.5*m)}function _(m,f,o){var e,i,r,n,s,a,u,p,c,x,g,h,b,v=0;for(n=0;n<f.length;n++){for(i=(e=f[n])[0],r=e[1],g=m[i][r],x=0,c=0,s=0;s<4;s++)(u=m[i+(a=M[s])[0]])&&(p=u[r+a[1]])!==void 0&&(x===0?h=b=p:(h=Math.min(h,p),b=Math.max(b,p)),c++,x+=p);if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";m[i][r]=x/c,g===void 0?c<4&&(v=1):(m[i][r]=(1+o)*m[i][r]-o*g,b>h&&(v=Math.max(v,Math.abs(m[i][r]-g)/(b-h))))}return v}$.exports=function(m,f){var o,e=1;for(_(m,f),o=0;o<f.length&&!(f[o][2]<4);o++);for(f=f.slice(o),o=0;o<100&&e>.01;o++)e=_(m,f,l(e));return e>.01&&A.log("interp2d didn't converge quickly",e),m}},58623:function($,P,t){var A=t(71828);$.exports=function(M,l){M("texttemplate");var _=A.extendFlat({},l.font,{color:"auto",size:"auto"});A.coerceFont(M,"textfont",_)}},70769:function($,P,t){var A=t(73972),M=t(71828).isArrayOrTypedArray;$.exports=function(l,_,m,f,o,e){var i,r,n,s=[],a=A.traceIs(l,"contour"),u=A.traceIs(l,"histogram"),p=A.traceIs(l,"gl2d");if(M(_)&&_.length>1&&!u&&e.type!=="category"){var c=_.length;if(!(c<=o))return a?_.slice(0,o):_.slice(0,o+1);if(a||p)s=_.slice(0,o);else if(o===1)s=[_[0]-.5,_[0]+.5];else{for(s=[1.5*_[0]-.5*_[1]],n=1;n<c;n++)s.push(.5*(_[n-1]+_[n]));s.push(1.5*_[c-1]-.5*_[c-2])}if(c<o){var x=s[s.length-1],g=x-s[s.length-2];for(n=c;n<o;n++)x+=g,s.push(x)}}else{var h=l[e._id.charAt(0)+"calendar"];for(i=u?e.r2c(m,0,h):M(_)&&_.length===1?_[0]:m===void 0?0:(e.type==="log"?e.d2c:e.r2c)(m,0,h),r=f||1,n=a||p?0:-.5;n<o;n++)s.push(i+r*n)}return s}},50347:function($,P,t){var A=t(39898),M=t(84267),l=t(73972),_=t(91424),m=t(89298),f=t(71828),o=t(63893),e=t(8225),i=t(7901),r=t(21081).extractOpts,n=t(21081).makeColorScaleFuncFromTrace,s=t(77922),a=t(18783).LINE_SPACING,u=t(3883),p=t(32396).STYLE,c="heatmap-label";function x(y){return y.selectAll("g."+c)}function g(y){x(y).remove()}function h(y,w){var d=w.length-2,S=f.constrain(f.findBin(y,w),0,d),T=w[S],E=w[S+1],C=f.constrain(S+(y-T)/(E-T)-.5,0,d),L=Math.round(C),O=Math.abs(C-L);return C&&C!==d&&O?{bin0:L,frac:O,bin1:Math.round(L+O/(C-L))}:{bin0:L,bin1:L,frac:0}}function b(y,w){var d=w.length-1,S=f.constrain(f.findBin(y,w),0,d),T=w[S],E=(y-T)/(w[S+1]-T)||0;return E<=0?{bin0:S,bin1:S,frac:0}:E<.5?{bin0:S,bin1:S+1,frac:E}:{bin0:S+1,bin1:S,frac:1-E}}function v(y,w,d){y[w]=d[0],y[w+1]=d[1],y[w+2]=d[2],y[w+3]=Math.round(255*d[3])}$.exports=function(y,w,d,S){var T=w.xaxis,E=w.yaxis;f.makeTraceGroups(S,d,"hm").each(function(C){var L,O,z,G,I,H,N,F,V=A.select(this),W=C[0],te=W.trace,Q=te.xgap||0,X=te.ygap||0,q=W.z,Z=W.x,J=W.y,ne=W.xCenter,re=W.yCenter,ae=l.traceIs(te,"contour"),ue=ae?"best":te.zsmooth,he=q.length,de=f.maxRowLength(q),xe=!1,me=!1;for(H=0;L===void 0&&H<Z.length-1;)L=T.c2p(Z[H]),H++;for(H=Z.length-1;O===void 0&&H>0;)O=T.c2p(Z[H]),H--;for(O<L&&(z=O,O=L,L=z,xe=!0),H=0;G===void 0&&H<J.length-1;)G=E.c2p(J[H]),H++;for(H=J.length-1;I===void 0&&H>0;)I=E.c2p(J[H]),H--;I<G&&(z=G,G=I,I=z,me=!0),ae&&(ne=Z,re=J,Z=W.xfill,J=W.yfill);var ve="default";if(ue?ve=ue==="best"?"smooth":"fast":te._islinear&&Q===0&&X===0&&u()&&(ve="fast"),ve!=="fast"){var Le=ue==="best"?0:.5;L=Math.max(-Le*T._length,L),O=Math.min((1+Le)*T._length,O),G=Math.max(-Le*E._length,G),I=Math.min((1+Le)*E._length,I)}var Ae,we,se=Math.round(O-L),oe=Math.round(I-G);if(L>=T._length||O<=0||G>=E._length||I<=0)return V.selectAll("image").data([]).exit().remove(),void g(V);ve==="fast"?(Ae=de,we=he):(Ae=se,we=oe);var fe=document.createElement("canvas");fe.width=Ae,fe.height=we;var Se,Me,be=fe.getContext("2d",{willReadFrequently:!0}),Ie=n(te,{noNumericCheck:!0,returnArray:!0});ve==="fast"?(Se=xe?function(jt){return de-1-jt}:f.identity,Me=me?function(jt){return he-1-jt}:f.identity):(Se=function(jt){return f.constrain(Math.round(T.c2p(Z[jt])-L),0,se)},Me=function(jt){return f.constrain(Math.round(E.c2p(J[jt])-G),0,oe)});var Be,ce,Te,ye,Pe=Me(0),Re=[Pe,Pe],ze=xe?0:1,He=me?0:1,We=0,Je=0,lt=0,et=0;function yt(jt,rn){if(jt!==void 0){var fn=Ie(jt);return fn[0]=Math.round(fn[0]),fn[1]=Math.round(fn[1]),fn[2]=Math.round(fn[2]),We+=rn,Je+=fn[0]*rn,lt+=fn[1]*rn,et+=fn[2]*rn,fn}return[0,0,0,0]}function _t(jt,rn,fn,xn){var Ln=jt[fn.bin0];if(Ln===void 0)return yt(void 0,1);var Xn,Un=jt[fn.bin1],Hn=rn[fn.bin0],Kn=rn[fn.bin1],qt=Un-Ln||0,On=Hn-Ln||0;return Xn=Un===void 0?Kn===void 0?0:Hn===void 0?2*(Kn-Ln):2*(2*Kn-Hn-Ln)/3:Kn===void 0?Hn===void 0?0:2*(2*Ln-Un-Hn)/3:Hn===void 0?2*(2*Kn-Un-Ln)/3:Kn+Ln-Un-Hn,yt(Ln+fn.frac*qt+xn.frac*(On+fn.frac*Xn))}if(ve!=="default"){var xt,at=0;try{xt=new Uint8Array(Ae*we*4)}catch{xt=new Array(Ae*we*4)}if(ve==="smooth"){var ot,At,Ct,zt=ne||Z,St=re||J,qe=new Array(zt.length),Xe=new Array(St.length),Ve=new Array(se),Ze=ne?b:h,st=re?b:h;for(H=0;H<zt.length;H++)qe[H]=Math.round(T.c2p(zt[H])-L);for(H=0;H<St.length;H++)Xe[H]=Math.round(E.c2p(St[H])-G);for(H=0;H<se;H++)Ve[H]=Ze(H,qe);for(N=0;N<oe;N++)for(At=q[(ot=st(N,Xe)).bin0],Ct=q[ot.bin1],H=0;H<se;H++,at+=4)v(xt,at,ye=_t(At,Ct,Ve[H],ot))}else for(N=0;N<he;N++)for(Te=q[N],Re=Me(N),H=0;H<de;H++)ye=yt(Te[H],1),v(xt,at=4*(Re*de+Se(H)),ye);var nt=be.createImageData(Ae,we);try{nt.data.set(xt)}catch{var De=nt.data,Fe=De.length;for(N=0;N<Fe;N++)De[N]=xt[N]}be.putImageData(nt,0,0)}else{var rt=Math.floor(Q/2),tt=Math.floor(X/2);for(N=0;N<he;N++)if(Te=q[N],Re.reverse(),Re[He]=Me(N+1),Re[0]!==Re[1]&&Re[0]!==void 0&&Re[1]!==void 0)for(Be=[ce=Se(0),ce],H=0;H<de;H++)Be.reverse(),Be[ze]=Se(H+1),Be[0]!==Be[1]&&Be[0]!==void 0&&Be[1]!==void 0&&(ye=yt(Te[H],(Be[1]-Be[0])*(Re[1]-Re[0])),be.fillStyle="rgba("+ye.join(",")+")",be.fillRect(Be[0]+rt,Re[0]+tt,Be[1]-Be[0]-Q,Re[1]-Re[0]-X))}Je=Math.round(Je/We),lt=Math.round(lt/We),et=Math.round(et/We);var gt=M("rgb("+Je+","+lt+","+et+")");y._hmpixcount=(y._hmpixcount||0)+We,y._hmlumcount=(y._hmlumcount||0)+We*gt.getLuminance();var dt=V.selectAll("image").data(C);dt.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),dt.attr({height:oe,width:se,x:L,y:G,"xlink:href":fe.toDataURL("image/png")}),ve!=="fast"||ue||dt.attr("style",p),g(V);var mt=te.texttemplate;if(mt){var ft=r(te),kt={type:"linear",range:[ft.min,ft.max],_separators:T._separators,_numFormat:T._numFormat},ht=te.type==="histogram2dcontour",pt=te.type==="contour",wt=pt?he-1:he,Ft=pt?1:0,Nt=pt?de-1:de,Gt=[];for(H=pt?1:0;H<wt;H++){var an;if(pt)an=W.y[H];else if(ht){if(H===0||H===he-1)continue;an=W.y[H]}else if(W.yCenter)an=W.yCenter[H];else{if(H+1===he&&W.y[H+1]===void 0)continue;an=(W.y[H]+W.y[H+1])/2}var Wt=Math.round(E.c2p(an));if(!(0>Wt||Wt>E._length))for(N=Ft;N<Nt;N++){var Yt;if(pt)Yt=W.x[N];else if(ht){if(N===0||N===de-1)continue;Yt=W.x[N]}else if(W.xCenter)Yt=W.xCenter[N];else{if(N+1===de&&W.x[N+1]===void 0)continue;Yt=(W.x[N]+W.x[N+1])/2}var en=Math.round(T.c2p(Yt));if(!(0>en||en>T._length)){var Tn=e({x:Yt,y:an},te,y._fullLayout);Tn.x=Yt,Tn.y=an;var Bn=W.z[H][N];Bn===void 0?(Tn.z="",Tn.zLabel=""):(Tn.z=Bn,Tn.zLabel=m.tickText(kt,Bn,"hover").text);var mn=W.text&&W.text[H]&&W.text[H][N];mn!==void 0&&mn!==!1||(mn=""),Tn.text=mn;var Kt=f.texttemplateString(mt,Tn,y._fullLayout._d3locale,Tn,te._meta||{});if(Kt){var cn=Kt.split("<br>"),tn=cn.length,un=0;for(F=0;F<tn;F++)un=Math.max(un,cn[F].length);Gt.push({l:tn,c:un,t:Kt,x:en,y:Wt,z:Bn})}}}}var yn=te.textfont,En=yn.family,Sn=yn.size,Nn=y._fullLayout.font.size;if(!Sn||Sn==="auto"){var _n=1/0,Pn=1/0,tr=0,ur=0;for(F=0;F<Gt.length;F++){var lr=Gt[F];if(tr=Math.max(tr,lr.l),ur=Math.max(ur,lr.c),F<Gt.length-1){var ir=Gt[F+1],$n=Math.abs(ir.x-lr.x),vr=Math.abs(ir.y-lr.y);$n&&(_n=Math.min(_n,$n)),vr&&(Pn=Math.min(Pn,vr))}}isFinite(_n)&&isFinite(Pn)?(_n-=Q,Pn-=X,_n/=ur,Pn/=tr,_n/=a/2,Pn/=a,Sn=Math.min(Math.floor(_n),Math.floor(Pn),Nn)):Sn=Nn}if(Sn<=0||!isFinite(Sn))return;x(V).data(Gt).enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(jt){var rn=A.select(this),fn=yn.color;fn&&fn!=="auto"||(fn=i.contrast("rgba("+Ie(jt.z).join()+")")),rn.attr("data-notex",1).call(o.positionText,function(xn){return xn.x}(jt),function(xn){return xn.y-Sn*(xn.l*a/2-1)}(jt)).call(_.font,En,Sn,fn).text(jt.t).call(o.convertToTspans,y)})}})}},70035:function($,P,t){var A=t(39898);$.exports=function(M){A.select(M).selectAll(".hm image").style("opacity",function(l){return l.trace.opacity})}},49901:function($){$.exports=function(P,t,A){A("zsmooth")===!1&&(A("xgap"),A("ygap")),A("zhoverformat")}},67684:function($,P,t){var A=t(92770),M=t(71828),l=t(73972);function _(m,f){var o=f(m);return(o?f(m+"type","array"):"scaled")==="scaled"&&(f(m+"0"),f("d"+m)),o}$.exports=function(m,f,o,e,i,r){var n,s,a=o("z");if(i=i||"x",r=r||"y",a===void 0||!a.length)return 0;if(M.isArray1D(m.z)){n=o(i),s=o(r);var u=M.minRowLength(n),p=M.minRowLength(s);if(u===0||p===0)return 0;f._length=Math.min(u,p,a.length)}else{if(n=_(i,o),s=_(r,o),!function(c){for(var x,g=!0,h=!1,b=!1,v=0;v<c.length;v++){if(x=c[v],!M.isArrayOrTypedArray(x)){g=!1;break}x.length>0&&(h=!0);for(var y=0;y<x.length;y++)if(A(x[y])){b=!0;break}}return g&&h&&b}(a))return 0;o("transpose"),f._length=null}return m.type==="heatmapgl"||l.getComponentMethod("calendars","handleTraceDefaults")(m,f,[i,r],e),!0}},16063:function($,P,t){for(var A=t(21606),M=t(50693),l=t(1426).extendFlat,_=t(30962).overrideAll,m=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],f={},o=0;o<m.length;o++){var e=m[o];f[e]=A[e]}f.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},l(f,M("",{cLetter:"z",autoColorDflt:!1})),$.exports=_(f,"calc","nested")},59560:function($,P,t){var A=t(9330).gl_heatmap2d,M=t(89298),l=t(78614);function _(f,o){this.scene=f,this.uid=o,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=A(f.glplot,this.options),this.heatmap._trace=this}var m=_.prototype;m.handlePick=function(f){var o=this.options,e=o.shape,i=f.pointId,r=i%e[0],n=Math.floor(i/e[0]),s=i;return{trace:this,dataCoord:f.dataCoord,traceCoord:[o.x[r],o.y[n],o.z[s]],textLabel:this.textLabels[i],name:this.name,pointIndex:[n,r],hoverinfo:this.hoverinfo}},m.update=function(f,o){var e=o[0];this.index=f.index,this.name=f.name,this.hoverinfo=f.hoverinfo;var i=e.z;this.options.z=[].concat.apply([],i);var r=i[0].length,n=i.length;this.options.shape=[r,n],this.options.x=e.x,this.options.y=e.y,this.options.zsmooth=f.zsmooth;var s=function(x){for(var g=x.colorscale,h=x.zmin,b=x.zmax,v=g.length,y=new Array(v),w=new Array(4*v),d=0;d<v;d++){var S=g[d],T=l(S[1]);y[d]=h+S[0]*(b-h);for(var E=0;E<4;E++)w[4*d+E]=T[E]}return{colorLevels:y,colorValues:w}}(f);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],f.text),this.heatmap.update(this.options);var a,u,p=this.scene.xaxis,c=this.scene.yaxis;f.zsmooth===!1&&(a={ppad:e.x[1]-e.x[0]},u={ppad:e.y[1]-e.y[0]}),f._extremes[p._id]=M.findExtremes(p,e.x,a),f._extremes[c._id]=M.findExtremes(c,e.y,u)},m.dispose=function(){this.heatmap.dispose()},$.exports=function(f,o,e){var i=new _(f,o.uid);return i.update(o,e),i}},19600:function($,P,t){var A=t(71828),M=t(67684),l=t(1586),_=t(16063);$.exports=function(m,f,o,e){function i(r,n){return A.coerce(m,f,_,r,n)}M(m,f,i,e)?(i("text"),i("zsmooth"),l(m,f,e,i,{prefix:"",cLetter:"z"})):f.visible=!1}},3325:function($,P,t){$.exports={attributes:t(16063),supplyDefaults:t(19600),colorbar:t(61243),calc:t(90757),plot:t(59560),moduleType:"trace",name:"heatmapgl",basePlotModule:t(4796),categories:["gl","gl2d","2dMap"],meta:{}}},7745:function($,P,t){var A=t(1486),M=t(12663).axisHoverFormat,l=t(5386).fF,_=t(5386).si,m=t(41940),f=t(17656),o=t(72406),e=t(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:M("x"),yhoverformat:M("y"),text:e({},A.text,{}),hovertext:e({},A.hovertext,{}),orientation:A.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:f("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:f("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({},{keys:o.eventDataKeys}),texttemplate:_({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:e({},A.textposition,{arrayOk:!1}),textfont:m({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:m({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:m({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:A.insidetextanchor,textangle:A.textangle,cliponaxis:A.cliponaxis,constraintext:A.constraintext,marker:A.marker,offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,_deprecated:{bardir:A._deprecated.bardir}}},42174:function($){$.exports=function(P,t){for(var A=P.length,M=0,l=0;l<A;l++)t[l]?(P[l]/=t[l],M+=P[l]):P[l]=null;return M}},17656:function($){$.exports=function(P,t){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},59575:function($,P,t){var A=t(92770);$.exports={count:function(M,l,_){return _[M]++,1},sum:function(M,l,_,m){var f=m[l];return A(f)?(f=Number(f),_[M]+=f,f):0},avg:function(M,l,_,m,f){var o=m[l];return A(o)&&(o=Number(o),_[M]+=o,f[M]++),0},min:function(M,l,_,m){var f=m[l];if(A(f)){if(f=Number(f),!A(_[M]))return _[M]=f,f;if(_[M]>f){var o=f-_[M];return _[M]=f,o}}return 0},max:function(M,l,_,m){var f=m[l];if(A(f)){if(f=Number(f),!A(_[M]))return _[M]=f,f;if(_[M]<f){var o=f-_[M];return _[M]=f,o}}return 0}}},40965:function($,P,t){var A=t(50606),M=A.ONEAVGYEAR,l=A.ONEAVGMONTH,_=A.ONEDAY,m=A.ONEHOUR,f=A.ONEMIN,o=A.ONESEC,e=t(89298).tickIncrement;function i(a,u,p,c){if(a*u<=0)return 1/0;for(var x=Math.abs(u-a),g=p.type==="date",h=r(x,g),b=0;b<10;b++){var v=r(80*h,g);if(h===v||!n(v,a,u,g,p,c))break;h=v}return h}function r(a,u){return u&&a>o?a>_?a>1.1*M?M:a>1.1*l?l:_:a>m?m:a>f?f:o:Math.pow(10,Math.floor(Math.log(a)/Math.LN10))}function n(a,u,p,c,x,g){if(c&&a>_){var h=s(u,x,g),b=s(p,x,g),v=a===M?0:1;return h[v]!==b[v]}return Math.floor(p/a)-Math.floor(u/a)>.1}function s(a,u,p){var c=u.c2d(a,M,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}$.exports=function(a,u,p,c,x){var g,h,b=-1.1*u,v=-.1*u,y=a-v,w=p[0],d=p[1],S=Math.min(i(w+v,w+y,c,x),i(d+v,d+y,c,x)),T=Math.min(i(w+b,w+v,c,x),i(d+b,d+v,c,x));if(S>T&&T<Math.abs(d-w)/4e3?(g=S,h=!1):(g=Math.min(S,T),h=!0),c.type==="date"&&g>_){var E=g===M?1:6,C=g===M?"M12":"M1";return function(L,O){var z=c.c2d(L,M,x),G=z.indexOf("-",E);G>0&&(z=z.substr(0,G));var I=c.d2c(z,0,x);if(I<L){var H=e(I,C,!1,x);(I+H)/2<L+a&&(I=H)}return O&&h?e(I,C,!0,x):I}}return function(L,O){var z=g*Math.round(L/g);return z+g/10<L&&z+.9*g<L+a&&(z+=g),O&&h&&(z-=g),z}}},72138:function($,P,t){var A=t(92770),M=t(71828),l=t(73972),_=t(89298),m=t(75341),f=t(59575),o=t(36362),e=t(42174),i=t(40965);function r(n,s,a,u,p){var c,x,g,h,b,v,y,w=u+"bins",d=n._fullLayout,S=s["_"+u+"bingroup"],T=d._histogramBinOpts[S],E=d.barmode==="overlay",C=function(me){return a.r2c(me,0,h)},L=function(me){return a.c2r(me,0,h)},O=a.type==="date"?function(me){return me||me===0?M.cleanDate(me,null,h):null}:function(me){return A(me)?Number(me):null};function z(me,ve,Le){ve[me+"Found"]?(ve[me]=O(ve[me]),ve[me]===null&&(ve[me]=Le[me])):(v[me]=ve[me]=Le[me],M.nestedProperty(x[0],w+"."+me).set(Le[me]))}if(s["_"+u+"autoBinFinished"])delete s["_"+u+"autoBinFinished"];else{x=T.traces;var G=[],I=!0,H=!1,N=!1;for(c=0;c<x.length;c++)if((g=x[c]).visible){var F=T.dirs[c];b=g["_"+F+"pos0"]=a.makeCalcdata(g,F),G=M.concat(G,b),delete g["_"+u+"autoBinFinished"],s.visible===!0&&(I?I=!1:(delete g._autoBin,g["_"+u+"autoBinFinished"]=1),l.traceIs(g,"2dMap")&&(H=!0),g.type==="histogram2dcontour"&&(N=!0))}h=x[0][u+"calendar"];var V=_.autoBin(G,a,T.nbins,H,h,T.sizeFound&&T.size),W=x[0]._autoBin={};if(v=W[T.dirs[0]]={},N&&(T.size||(V.start=L(_.tickIncrement(C(V.start),V.size,!0,h))),T.end===void 0&&(V.end=L(_.tickIncrement(C(V.end),V.size,!1,h)))),E&&!l.traceIs(s,"2dMap")&&V._dataSpan===0&&a.type!=="category"&&a.type!=="multicategory"&&s.bingroup===""&&s.xbins===void 0){if(p)return[V,b,!0];V=function(me,ve,Le,Ae,we){var se,oe,fe,Se=me._fullLayout,Me=function(Je,lt){for(var et=lt.xaxis,yt=lt.yaxis,_t=lt.orientation,xt=[],at=Je._fullData,ot=0;ot<at.length;ot++){var At=at[ot];At.type==="histogram"&&At.visible===!0&&At.orientation===_t&&At.xaxis===et&&At.yaxis===yt&&xt.push(At)}return xt}(me,ve),be=!1,Ie=1/0,Be=[ve];for(se=0;se<Me.length;se++)if((oe=Me[se])===ve)be=!0;else if(be){var ce=r(me,oe,Le,Ae,!0),Te=ce[0],ye=ce[2];oe["_"+Ae+"autoBinFinished"]=1,oe["_"+Ae+"pos0"]=ce[1],ye?Be.push(oe):Ie=Math.min(Ie,Te.size)}else fe=Se._histogramBinOpts[oe["_"+Ae+"bingroup"]],Ie=Math.min(Ie,fe.size||oe[we].size);var Pe=new Array(Be.length);for(se=0;se<Be.length;se++)for(var Re=Be[se]["_"+Ae+"pos0"],ze=0;ze<Re.length;ze++)if(Re[ze]!==void 0){Pe[se]=Re[ze];break}for(isFinite(Ie)||(Ie=M.distinctVals(Pe).minDiff),se=0;se<Be.length;se++){var He=(oe=Be[se])[Ae+"calendar"],We={start:Le.c2r(Pe[se]-Ie/2,0,He),end:Le.c2r(Pe[se]+Ie/2,0,He),size:Ie};oe._input[we]=oe[we]=We,(fe=Se._histogramBinOpts[oe["_"+Ae+"bingroup"]])&&M.extendFlat(fe,We)}return ve[we]}(n,s,a,u,w)}(y=g.cumulative||{}).enabled&&y.currentbin!=="include"&&(y.direction==="decreasing"?V.start=L(_.tickIncrement(C(V.start),V.size,!0,h)):V.end=L(_.tickIncrement(C(V.end),V.size,!1,h))),T.size=V.size,T.sizeFound||(v.size=V.size,M.nestedProperty(x[0],w+".size").set(V.size)),z("start",T,V),z("end",T,V)}b=s["_"+u+"pos0"],delete s["_"+u+"pos0"];var te=s._input[w]||{},Q=M.extendFlat({},T),X=T.start,q=a.r2l(te.start),Z=q!==void 0;if((T.startFound||Z)&&q!==a.r2l(X)){var J=Z?q:M.aggNums(Math.min,null,b),ne={type:a.type==="category"||a.type==="multicategory"?"linear":a.type,r2l:a.r2l,dtick:T.size,tick0:X,calendar:h,range:[J,_.tickIncrement(J,T.size,!1,h)].map(a.l2r)},re=_.tickFirst(ne);re>a.r2l(J)&&(re=_.tickIncrement(re,T.size,!0,h)),Q.start=a.l2r(re),Z||M.nestedProperty(s,w+".start").set(Q.start)}var ae=T.end,ue=a.r2l(te.end),he=ue!==void 0;if((T.endFound||he)&&ue!==a.r2l(ae)){var de=he?ue:M.aggNums(Math.max,null,b);Q.end=a.l2r(de),he||M.nestedProperty(s,w+".start").set(Q.end)}var xe="autobin"+u;return s._input[xe]===!1&&(s._input[w]=M.extendFlat({},s[w]||{}),delete s._input[xe],delete s[xe]),[Q,b]}$.exports={calc:function(n,s){var a,u,p,c,x=[],g=[],h=s.orientation==="h",b=_.getFromId(n,h?s.yaxis:s.xaxis),v=h?"y":"x",y={x:"y",y:"x"}[v],w=s[v+"calendar"],d=s.cumulative,S=r(n,s,b,v),T=S[0],E=S[1],C=typeof T.size=="string",L=[],O=C?L:T,z=[],G=[],I=[],H=0,N=s.histnorm,F=s.histfunc,V=N.indexOf("density")!==-1;d.enabled&&V&&(N=N.replace(/ ?density$/,""),V=!1);var W,te=F==="max"||F==="min"?null:0,Q=f.count,X=o[N],q=!1,Z=function(oe){return b.r2c(oe,0,w)};for(M.isArrayOrTypedArray(s[y])&&F!=="count"&&(W=s[y],q=F==="avg",Q=f[F]),a=Z(T.start),p=Z(T.end)+(a-_.tickIncrement(a,T.size,!1,w))/1e6;a<p&&x.length<1e6&&(u=_.tickIncrement(a,T.size,!1,w),x.push((a+u)/2),g.push(te),I.push([]),L.push(a),V&&z.push(1/(u-a)),q&&G.push(0),!(u<=a));)a=u;L.push(a),C||b.type!=="date"||(O={start:Z(O.start),end:Z(O.end),size:O.size}),n._fullLayout._roundFnOpts||(n._fullLayout._roundFnOpts={});var J=s["_"+v+"bingroup"],ne={leftGap:1/0,rightGap:1/0};J&&(n._fullLayout._roundFnOpts[J]||(n._fullLayout._roundFnOpts[J]=ne),ne=n._fullLayout._roundFnOpts[J]);var re,ae=g.length,ue=!0,he=ne.leftGap,de=ne.rightGap,xe={};for(a=0;a<E.length;a++){var me=E[a];(c=M.findBin(me,O))>=0&&c<ae&&(H+=Q(c,a,g,W,G),ue&&I[c].length&&me!==E[I[c][0]]&&(ue=!1),I[c].push(a),xe[a]=c,he=Math.min(he,me-L[c]),de=Math.min(de,L[c+1]-me))}ne.leftGap=he,ne.rightGap=de,ue||(re=function(oe,fe){return function(){var Se=n._fullLayout._roundFnOpts[J];return i(Se.leftGap,Se.rightGap,L,b,w)(oe,fe)}}),q&&(H=e(g,G)),X&&X(g,H,z),d.enabled&&function(oe,fe,Se){var Me,be,Ie;function Be(Te){Ie=oe[Te],oe[Te]/=2}function ce(Te){be=oe[Te],oe[Te]=Ie+be/2,Ie+=be}if(Se==="half")if(fe==="increasing")for(Be(0),Me=1;Me<oe.length;Me++)ce(Me);else for(Be(oe.length-1),Me=oe.length-2;Me>=0;Me--)ce(Me);else if(fe==="increasing"){for(Me=1;Me<oe.length;Me++)oe[Me]+=oe[Me-1];Se==="exclude"&&(oe.unshift(0),oe.pop())}else{for(Me=oe.length-2;Me>=0;Me--)oe[Me]+=oe[Me+1];Se==="exclude"&&(oe.push(0),oe.shift())}}(g,d.direction,d.currentbin);var ve=Math.min(x.length,g.length),Le=[],Ae=0,we=ve-1;for(a=0;a<ve;a++)if(g[a]){Ae=a;break}for(a=ve-1;a>=Ae;a--)if(g[a]){we=a;break}for(a=Ae;a<=we;a++)if(A(x[a])&&A(g[a])){var se={p:x[a],s:g[a],b:0};d.enabled||(se.pts=I[a],ue?se.ph0=se.ph1=I[a].length?E[I[a][0]]:x[a]:(s._computePh=!0,se.ph0=re(L[a]),se.ph1=re(L[a+1],!0))),Le.push(se)}return Le.length===1&&(Le[0].width1=_.tickIncrement(Le[0].p,T.size,!1,w)-Le[0].p),m(Le,s),M.isArrayOrTypedArray(s.selectedpoints)&&M.tagSelected(Le,s,xe),Le},calcAllAutoBins:r}},72406:function($){$.exports={eventDataKeys:["binNumber"]}},82222:function($,P,t){var A=t(71828),M=t(41675),l=t(73972).traceIs,_=t(26125),m=A.nestedProperty,f=t(99082).getAxisGroup,o=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];$.exports=function(i,r){var n,s,a,u,p,c,x,g=r._histogramBinOpts={},h=[],b={},v=[];function y(V,W){return A.coerce(n._input,n,n._module.attributes,V,W)}function w(V){return V.orientation==="v"?"x":"y"}function d(V,W,te){var Q=V.uid+"__"+te;W||(W=Q);var X=function(ne,re){return M.getFromTrace({_fullLayout:r},ne,re).type}(V,te),q=V[te+"calendar"]||"",Z=g[W],J=!0;Z&&(X===Z.axType&&q===Z.calendar?(J=!1,Z.traces.push(V),Z.dirs.push(te)):(W=Q,X!==Z.axType&&A.warn(["Attempted to group the bins of trace",V.index,"set on a","type:"+X,"axis","with bins on","type:"+Z.axType,"axis."].join(" ")),q!==Z.calendar&&A.warn(["Attempted to group the bins of trace",V.index,"set with a",q,"calendar","with bins",Z.calendar?"on a "+Z.calendar+" calendar":"w/o a set calendar"].join(" ")))),J&&(g[W]={traces:[V],dirs:[te],axType:X,calendar:V[te+"calendar"]||""}),V["_"+te+"bingroup"]=W}for(p=0;p<i.length;p++)n=i[p],l(n,"histogram")&&(h.push(n),delete n._xautoBinFinished,delete n._yautoBinFinished,l(n,"2dMap")||_(n._input,n,r,y));var S=r._alignmentOpts||{};for(p=0;p<h.length;p++){if(n=h[p],a="",!l(n,"2dMap")){if(u=w(n),r.barmode==="group"&&n.alignmentgroup){var T=n[u+"axis"],E=f(r,T)+n.orientation;(S[E]||{})[n.alignmentgroup]&&(a=E)}a||r.barmode==="overlay"||(a=f(r,n.xaxis)+f(r,n.yaxis)+w(n))}a?(b[a]||(b[a]=[]),b[a].push(n)):v.push(n)}for(a in b)if((s=b[a]).length!==1){var C=!1;for(s.length&&(n=s[0],C=y("bingroup")),a=C||a,p=0;p<s.length;p++){var L=(n=s[p])._input.bingroup;L&&L!==a&&A.warn(["Trace",n.index,"must match","within bingroup",a+".","Ignoring its bingroup:",L,"setting."].join(" ")),n.bingroup=a,d(n,a,w(n))}}else v.push(s[0]);for(p=0;p<v.length;p++){n=v[p];var O=y("bingroup");if(l(n,"2dMap"))for(x=0;x<2;x++){var z=y((u=e[x])+"bingroup",O?O+"__"+u:null);d(n,z,u)}else d(n,O,w(n))}for(a in g){var G=g[a];for(s=G.traces,c=0;c<o.length;c++){var I,H,N=o[c],F=N.name;if(F!=="nbins"||!G.sizeFound){for(p=0;p<s.length;p++){if(n=s[p],u=G.dirs[p],I=N.aStr[u],m(n._input,I).get()!==void 0){G[F]=y(I),G[F+"Found"]=!0;break}(H=(n._autoBin||{})[u]||{})[F]&&m(n,I).set(H[F])}if(F==="start"||F==="end")for(;p<s.length;p++)(n=s[p])["_"+u+"bingroup"]&&y(I,(H=(n._autoBin||{})[u]||{})[F]);F!=="nbins"||G.sizeFound||G.nbinsFound||(n=s[0],G[F]=y(I))}}}}},11385:function($,P,t){var A=t(73972),M=t(71828),l=t(7901),_=t(90769).handleText,m=t(98340),f=t(7745);$.exports=function(o,e,i,r){function n(v,y){return M.coerce(o,e,f,v,y)}var s=n("x"),a=n("y");n("cumulative.enabled")&&(n("cumulative.direction"),n("cumulative.currentbin")),n("text");var u=n("textposition");_(o,e,r,n,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n("hovertext"),n("hovertemplate"),n("xhoverformat"),n("yhoverformat");var p=n("orientation",a&&!s?"h":"v"),c=p==="v"?"x":"y",x=p==="v"?"y":"x",g=s&&a?Math.min(M.minRowLength(s)&&M.minRowLength(a)):M.minRowLength(e[c]||[]);if(g){e._length=g,A.getComponentMethod("calendars","handleTraceDefaults")(o,e,["x","y"],r),e[x]&&n("histfunc"),n("histnorm"),n("autobin"+c),m(o,e,n,i,r),M.coerceSelectionMarkerOpacity(e,n);var h=(e.marker.line||{}).color,b=A.getComponentMethod("errorbars","supplyDefaults");b(o,e,h||l.defaultLine,{axis:"y"}),b(o,e,h||l.defaultLine,{axis:"x",inherit:"y"})}else e.visible=!1}},84402:function($){$.exports=function(P,t,A,M,l){if(P.x="xVal"in t?t.xVal:t.x,P.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(P.z=t.zLabelVal),t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),!(A.cumulative||{}).enabled){var _,m=Array.isArray(l)?M[0].pts[l[0]][l[1]]:M[l].pts;if(P.pointNumbers=m,P.binNumber=P.pointNumber,delete P.pointNumber,delete P.pointIndex,A._indexToPoints){_=[];for(var f=0;f<m.length;f++)_=_.concat(A._indexToPoints[m[f]])}else _=m;P.pointIndices=_}return P}},76440:function($,P,t){var A=t(95423).hoverPoints,M=t(89298).hoverLabelText;$.exports=function(l,_,m,f,o){var e=A(l,_,m,f,o);if(e){var i=(l=e[0]).cd[l.index],r=l.cd[0].trace;if(!r.cumulative.enabled){var n=r.orientation==="h"?"y":"x";l[n+"Label"]=M(l[n+"a"],[i.ph0,i.ph1],r[n+"hoverformat"])}return e}}},36071:function($,P,t){$.exports={attributes:t(7745),layoutAttributes:t(43641),supplyDefaults:t(11385),crossTraceDefaults:t(82222),supplyLayoutDefaults:t(13957),calc:t(72138).calc,crossTraceCalc:t(11661).crossTraceCalc,plot:t(17295).plot,layerName:"barlayer",style:t(16688).style,styleOnSelect:t(16688).styleOnSelect,colorbar:t(4898),hoverPoints:t(76440),selectPoints:t(81974),eventData:t(84402),moduleType:"trace",name:"histogram",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},36362:function($){$.exports={percent:function(P,t){for(var A=P.length,M=100/t,l=0;l<A;l++)P[l]*=M},probability:function(P,t){for(var A=P.length,M=0;M<A;M++)P[M]/=t},density:function(P,t,A,M){var l=P.length;M=M||1;for(var _=0;_<l;_++)P[_]*=A[_]*M},"probability density":function(P,t,A,M){var l=P.length;M&&(t/=M);for(var _=0;_<l;_++)P[_]*=A[_]/t}}},35361:function($,P,t){var A=t(7745),M=t(17656),l=t(21606),_=t(9012),m=t(12663).axisHoverFormat,f=t(5386).fF,o=t(5386).si,e=t(50693),i=t(1426).extendFlat;$.exports=i({x:A.x,y:A.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:M("x"),nbinsy:A.nbinsy,ybins:M("y"),autobinx:A.autobinx,autobiny:A.autobiny,bingroup:i({},A.bingroup,{}),xbingroup:i({},A.bingroup,{}),ybingroup:i({},A.bingroup,{}),xgap:l.xgap,ygap:l.ygap,zsmooth:l.zsmooth,xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z",1),hovertemplate:f({},{keys:"z"}),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:l.textfont,showlegend:i({},_.showlegend,{dflt:!1})},e("",{cLetter:"z",autoColorDflt:!1}))},17562:function($,P,t){var A=t(71828),M=t(89298),l=t(59575),_=t(36362),m=t(42174),f=t(40965),o=t(72138).calcAllAutoBins;function e(n,s,a,u){var p,c=new Array(n);if(u)for(p=0;p<n;p++)c[p]=1/(s[p+1]-s[p]);else{var x=1/a;for(p=0;p<n;p++)c[p]=x}return c}function i(n,s){return{start:n(s.start),end:n(s.end),size:s.size}}function r(n,s,a,u,p,c){var x,g=n.length-1,h=new Array(g),b=f(a,u,n,p,c);for(x=0;x<g;x++){var v=(s||[])[x];h[x]=v===void 0?[b(n[x]),b(n[x+1],!0)]:[v,v]}return h}$.exports=function(n,s){var a,u,p,c,x=M.getFromId(n,s.xaxis),g=M.getFromId(n,s.yaxis),h=s.xcalendar,b=s.ycalendar,v=function(yt){return x.r2c(yt,0,h)},y=function(yt){return g.r2c(yt,0,b)},w=o(n,s,x,"x"),d=w[0],S=w[1],T=o(n,s,g,"y"),E=T[0],C=T[1],L=s._length;S.length>L&&S.splice(L,S.length-L),C.length>L&&C.splice(L,C.length-L);var O=[],z=[],G=[],I=typeof d.size=="string",H=typeof E.size=="string",N=[],F=[],V=I?N:d,W=H?F:E,te=0,Q=[],X=[],q=s.histnorm,Z=s.histfunc,J=q.indexOf("density")!==-1,ne=Z==="max"||Z==="min"?null:0,re=l.count,ae=_[q],ue=!1,he=[],de=[],xe="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";xe&&Z!=="count"&&(ue=Z==="avg",re=l[Z]);var me=d.size,ve=v(d.start),Le=v(d.end)+(ve-M.tickIncrement(ve,me,!1,h))/1e6;for(a=ve;a<Le;a=M.tickIncrement(a,me,!1,h))z.push(ne),N.push(a),ue&&G.push(0);N.push(a);var Ae,we=z.length,se=(a-ve)/we,oe=(Ae=ve+se/2,x.c2r(Ae,0,h)),fe=E.size,Se=y(E.start),Me=y(E.end)+(Se-M.tickIncrement(Se,fe,!1,b))/1e6;for(a=Se;a<Me;a=M.tickIncrement(a,fe,!1,b)){O.push(z.slice()),F.push(a);var be=new Array(we);for(u=0;u<we;u++)be[u]=[];X.push(be),ue&&Q.push(G.slice())}F.push(a);var Ie=O.length,Be=(a-Se)/Ie,ce=function(yt){return g.c2r(yt,0,b)}(Se+Be/2);J&&(he=e(z.length,V,se,I),de=e(O.length,W,Be,H)),I||x.type!=="date"||(V=i(v,V)),H||g.type!=="date"||(W=i(y,W));var Te=!0,ye=!0,Pe=new Array(we),Re=new Array(Ie),ze=1/0,He=1/0,We=1/0,Je=1/0;for(a=0;a<L;a++){var lt=S[a],et=C[a];p=A.findBin(lt,V),c=A.findBin(et,W),p>=0&&p<we&&c>=0&&c<Ie&&(te+=re(p,a,O[c],xe,Q[c]),X[c][p].push(a),Te&&(Pe[p]===void 0?Pe[p]=lt:Pe[p]!==lt&&(Te=!1)),ye&&(Re[c]===void 0?Re[c]=et:Re[c]!==et&&(ye=!1)),ze=Math.min(ze,lt-N[p]),He=Math.min(He,N[p+1]-lt),We=Math.min(We,et-F[c]),Je=Math.min(Je,F[c+1]-et))}if(ue)for(c=0;c<Ie;c++)te+=m(O[c],Q[c]);if(ae)for(c=0;c<Ie;c++)ae(O[c],te,he,de[c]);return{x:S,xRanges:r(N,Te&&Pe,ze,He,x,h),x0:oe,dx:se,y:C,yRanges:r(F,ye&&Re,We,Je,g,b),y0:ce,dy:Be,z:O,pts:X}}},93888:function($,P,t){var A=t(71828),M=t(75238),l=t(49901),_=t(1586),m=t(58623),f=t(35361);$.exports=function(o,e,i,r){function n(s,a){return A.coerce(o,e,f,s,a)}M(o,e,n,r),e.visible!==!1&&(l(o,e,n,r),_(o,e,r,n,{prefix:"",cLetter:"z"}),n("hovertemplate"),m(n,r),n("xhoverformat"),n("yhoverformat"))}},76128:function($,P,t){var A=t(46248),M=t(89298).hoverLabelText;$.exports=function(l,_,m,f,o){var e=A(l,_,m,f,o);if(e){var i=(l=e[0]).index,r=i[0],n=i[1],s=l.cd[0],a=s.trace,u=s.xRanges[n],p=s.yRanges[r];return l.xLabel=M(l.xa,[u[0],u[1]],a.xhoverformat),l.yLabel=M(l.ya,[p[0],p[1]],a.yhoverformat),e}}},43905:function($,P,t){$.exports={attributes:t(35361),supplyDefaults:t(93888),crossTraceDefaults:t(82222),calc:t(90757),plot:t(50347),layerName:"heatmaplayer",colorbar:t(61243),style:t(70035),hoverPoints:t(76128),eventData:t(84402),moduleType:"trace",name:"histogram2d",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},75238:function($,P,t){var A=t(73972),M=t(71828);$.exports=function(l,_,m,f){var o=m("x"),e=m("y"),i=M.minRowLength(o),r=M.minRowLength(e);i&&r?(_._length=Math.min(i,r),A.getComponentMethod("calendars","handleTraceDefaults")(l,_,["x","y"],f),(m("z")||m("marker.color"))&&m("histfunc"),m("histnorm"),m("autobinx"),m("autobiny")):_.visible=!1}},99066:function($,P,t){var A=t(35361),M=t(70600),l=t(50693),_=t(12663).axisHoverFormat,m=t(1426).extendFlat;$.exports=m({x:A.x,y:A.y,z:A.z,marker:A.marker,histnorm:A.histnorm,histfunc:A.histfunc,nbinsx:A.nbinsx,xbins:A.xbins,nbinsy:A.nbinsy,ybins:A.ybins,autobinx:A.autobinx,autobiny:A.autobiny,bingroup:A.bingroup,xbingroup:A.xbingroup,ybingroup:A.ybingroup,autocontour:M.autocontour,ncontours:M.ncontours,contours:M.contours,line:{color:M.line.color,width:m({},M.line.width,{dflt:.5}),dash:M.line.dash,smoothing:M.line.smoothing,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:A.hovertemplate,texttemplate:M.texttemplate,textfont:M.textfont},l("",{cLetter:"z",editTypeOverride:"calc"}))},62654:function($,P,t){var A=t(71828),M=t(75238),l=t(67217),_=t(8724),m=t(58623),f=t(99066);$.exports=function(o,e,i,r){function n(s,a){return A.coerce(o,e,f,s,a)}M(o,e,n,r),e.visible!==!1&&(l(o,e,n,function(s){return A.coerce2(o,e,f,s)}),_(o,e,n,r),n("xhoverformat"),n("yhoverformat"),n("hovertemplate"),e.contours&&e.contours.coloring==="heatmap"&&m(n,r))}},35902:function($,P,t){$.exports={attributes:t(99066),supplyDefaults:t(62654),crossTraceDefaults:t(82222),calc:t(27529),plot:t(29854).plot,layerName:"contourlayer",style:t(84426),colorbar:t(90654),hoverPoints:t(52421),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},46291:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(50693),_=t(27670).Y,m=t(34e3),f=t(57564),o=t(45802),e=t(43473),i=t(1426).extendFlat,r=t(79952).u;$.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:o.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:f.marker.colors,line:f.marker.line,pattern:r,editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),leaf:f.leaf,pathbar:o.pathbar,text:m.text,textinfo:f.textinfo,texttemplate:M({editType:"plot"},{keys:e.eventDataKeys.concat(["label","value"])}),hovertext:m.hovertext,hoverinfo:f.hoverinfo,hovertemplate:A({},{keys:e.eventDataKeys}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:o.outsidetextfont,textposition:o.textposition,sort:m.sort,root:f.root,domain:_({name:"icicle",trace:!0,editType:"calc"})}},96346:function($,P,t){var A=t(74875);P.name="icicle",P.plot=function(M,l,_,m){A.plotBasePlot(P.name,M,l,_,m)},P.clean=function(M,l,_,m){A.cleanBasePlot(P.name,M,l,_,m)}},46584:function($,P,t){var A=t(52147);P.y=function(M,l){return A.calc(M,l)},P.T=function(M){return A._runCrossTraceCalc("icicle",M)}},56524:function($,P,t){var A=t(71828),M=t(46291),l=t(7901),_=t(27670).c,m=t(90769).handleText,f=t(97313).TEXTPAD,o=t(37434).handleMarkerDefaults,e=t(21081),i=e.hasColorscale,r=e.handleDefaults;$.exports=function(n,s,a,u){function p(y,w){return A.coerce(n,s,M,y,w)}var c=p("labels"),x=p("parents");if(c&&c.length&&x&&x.length){var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var h=p("text");p("texttemplate"),s.texttemplate||p("textinfo",Array.isArray(h)?"text+label":"label"),p("hovertext"),p("hovertemplate");var b=p("pathbar.visible");m(n,s,u,p,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),o(n,s,u,p);var v=s._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;v&&r(n,s,u,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",v?1:.7),s._hovered={marker:{line:{width:2,color:l.contrast(u.paper_bgcolor)}}},b&&(p("pathbar.thickness",s.pathbar.textfont.size+2*f),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(s,u,p),s._length=null}else s.visible=!1}},90666:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(63893),m=t(21538),f=t(82454).styleOne,o=t(43473),e=t(2791),i=t(83523),r=t(24714).formatSliceLabel,n=!1;$.exports=function(s,a,u,p,c){var x=c.width,g=c.height,h=c.viewX,b=c.viewY,v=c.pathSlice,y=c.toMoveInsideSlice,w=c.strTransform,d=c.hasTransition,S=c.handleSlicesExit,T=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,C=c.prevEntry,L=s._context.staticPlot,O=s._fullLayout,z=a[0].trace,G=z.textposition.indexOf("left")!==-1,I=z.textposition.indexOf("right")!==-1,H=z.textposition.indexOf("bottom")!==-1,N=m(u,[x,g],{flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,orientation:z.tiling.orientation,pad:{inner:z.tiling.pad},maxDepth:z._maxDepth}).descendants(),F=1/0,V=-1/0;N.forEach(function(q){var Z=q.depth;Z>=z._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(F=Math.min(F,Z),V=Math.max(V,Z))}),p=p.data(N,e.getPtId),z._maxVisibleLayers=isFinite(V)?V-F+1:0,p.enter().append("g").classed("slice",!0),S(p,n,{},[x,g],v),p.order();var W=null;if(d&&C){var te=e.getPtId(C);p.each(function(q){W===null&&e.getPtId(q)===te&&(W={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var Q=function(){return W||{x0:0,x1:x,y0:0,y1:g}},X=p;return d&&(X=X.transition().each("end",function(){var q=A.select(this);e.setSliceCursor(q,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),X.each(function(q){q._x0=h(q.x0),q._x1=h(q.x1),q._y0=b(q.y0),q._y1=b(q.y1),q._hoverX=h(q.x1-z.tiling.pad),q._hoverY=b(H?q.y1-z.tiling.pad/2:q.y0+z.tiling.pad/2);var Z=A.select(this),J=M.ensureSingle(Z,"path","surface",function(ue){ue.style("pointer-events",L?"none":"all")});d?J.transition().attrTween("d",function(ue){var he=T(ue,n,Q(),[x,g],{orientation:z.tiling.orientation,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1});return function(de){return v(he(de))}}):J.attr("d",v),Z.call(i,u,s,a,{styleOne:f,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,s,{isTransitioning:s._transitioning}),J.call(f,q,z,s,{hovered:!1}),q.x0===q.x1||q.y0===q.y1?q._text="":q._text=r(q,u,z,a,O)||"";var ne=M.ensureSingle(Z,"g","slicetext"),re=M.ensureSingle(ne,"text","",function(ue){ue.attr("data-notex",1)}),ae=M.ensureUniformFontSize(s,e.determineTextFont(z,q,O.font));re.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":G?"start":"middle").call(l.font,ae).call(_.convertToTspans,s),q.textBB=l.bBox(re.node()),q.transform=y(q,{fontSize:ae.size}),q.transform.fontSize=ae.size,d?re.transition().attrTween("transform",function(ue){var he=E(ue,n,Q(),[x,g]);return function(de){return w(he(de))}}):re.attr("transform",w(q))}),W}},69816:function($,P,t){$.exports={moduleType:"trace",name:"icicle",basePlotModule:t(96346),categories:[],animatable:!0,attributes:t(46291),layoutAttributes:t(92894),supplyDefaults:t(56524),supplyLayoutDefaults:t(21070),calc:t(46584).y,crossTraceCalc:t(46584).T,plot:t(85596),style:t(82454).style,colorbar:t(4898),meta:{}}},92894:function($){$.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},21070:function($,P,t){var A=t(71828),M=t(92894);$.exports=function(l,_){function m(f,o){return A.coerce(l,_,M,f,o)}m("iciclecolorway",_.colorway),m("extendiciclecolors")}},21538:function($,P,t){var A=t(674),M=t(14102);$.exports=function(l,_,m){var f=m.flipX,o=m.flipY,e=m.orientation==="h",i=m.maxDepth,r=_[0],n=_[1];i&&(r=(l.height+1)*_[0]/Math.min(l.height+1,i),n=(l.height+1)*_[1]/Math.min(l.height+1,i));var s=A.partition().padding(m.pad.inner).size(e?[_[1],r]:[_[0],n])(l);return(e||f||o)&&M(s,_,{swapXY:e,flipX:f,flipY:o}),s}},85596:function($,P,t){var A=t(80694),M=t(90666);$.exports=function(l,_,m,f){return A(l,_,m,f,{type:"icicle",drawDescendants:M})}},82454:function($,P,t){var A=t(39898),M=t(7901),l=t(71828),_=t(72597).resizeText,m=t(43467);function f(o,e,i,r){var n=e.data.data,s=!e.children,a=n.i,u=l.castOption(i,a,"marker.line.color")||M.defaultLine,p=l.castOption(i,a,"marker.line.width")||0;o.call(m,e,i,r).style("stroke-width",p).call(M.stroke,u).style("opacity",s?i.leaf.opacity:null)}$.exports={style:function(o){var e=o._fullLayout._iciclelayer.selectAll(".trace");_(o,e,"icicle"),e.each(function(i){var r=A.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(s){A.select(this).call(f,s,n,o)})})},styleOne:f}},17230:function($,P,t){for(var A=t(9012),M=t(5386).fF,l=t(1426).extendFlat,_=t(51877).colormodel,m=["rgb","rgba","rgba256","hsl","hsla"],f=[],o=[],e=0;e<m.length;e++){var i=_[m[e]];f.push("For the `"+m[e]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),o.push("For the `"+m[e]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}$.exports=l({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:m,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:l({},A.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:M({},{keys:["z","color","colormodel"]}),transforms:void 0})},71113:function($,P,t){var A=t(71828),M=t(51877),l=t(92770),_=t(89298),m=t(71828).maxRowLength,f=t(67395).A;function o(i,r,n,s){return function(a){return A.constrain((a-i)*r,n,s)}}function e(i,r){return function(n){return A.constrain(n,i,r)}}$.exports=function(i,r){var n,s;if(r._hasZ)n=r.z.length,s=m(r.z);else if(r._hasSource){var a=f(r.source);n=a.height,s=a.width}var u,p=_.getFromId(i,r.xaxis||"x"),c=_.getFromId(i,r.yaxis||"y"),x=p.d2c(r.x0)-r.dx/2,g=c.d2c(r.y0)-r.dy/2,h=[x,x+s*r.dx],b=[g,g+n*r.dy];if(p&&p.type==="log")for(u=0;u<s;u++)h.push(x+u*r.dx);if(c&&c.type==="log")for(u=0;u<n;u++)b.push(g+u*r.dy);return r._extremes[p._id]=_.findExtremes(p,h),r._extremes[c._id]=_.findExtremes(c,b),r._scaler=function(v){var y=M.colormodel[v.colormodel],w=(y.colormodel||v.colormodel).length;v._sArray=[];for(var d=0;d<w;d++)y.min[d]!==v.zmin[d]||y.max[d]!==v.zmax[d]?v._sArray.push(o(v.zmin[d],(y.max[d]-y.min[d])/(v.zmax[d]-v.zmin[d]),y.min[d],y.max[d])):v._sArray.push(e(y.min[d],y.max[d]));return function(S){for(var T=S.slice(0,w),E=0;E<w;E++){var C=T[E];if(!l(C))return!1;T[E]=v._sArray[E](C)}return T}}(r),[{x0:x,y0:g,z:r.z,w:s,h:n}]}},51877:function($){$.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(P){return P.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(P){return P.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(P){return P.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(P){var t=P.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(P){var t=P.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["","%","%",""]}}}},13245:function($,P,t){var A=t(71828),M=t(17230),l=t(51877),_=t(25095).IMAGE_URL_PREFIX;$.exports=function(m,f){function o(r,n){return A.coerce(m,f,M,r,n)}o("source"),f.source&&!f.source.match(_)&&delete f.source,f._hasSource=!!f.source;var e,i=o("z");f._hasZ=!(i===void 0||!i.length||!i[0]||!i[0].length),f._hasZ||f._hasSource?(o("x0"),o("y0"),o("dx"),o("dy"),f._hasZ?(o("colormodel","rgb"),o("zmin",(e=l.colormodel[f.colormodel]).zminDflt||e.min),o("zmax",e.zmaxDflt||e.max)):f._hasSource&&(f.colormodel="rgba256",e=l.colormodel[f.colormodel],f.zmin=e.zminDflt,f.zmax=e.zmaxDflt),o("zsmooth"),o("text"),o("hovertext"),o("hovertemplate"),f._length=null):f.visible=!1}},30835:function($){$.exports=function(P,t){return"xVal"in t&&(P.x=t.xVal),"yVal"in t&&(P.y=t.yVal),t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),P.color=t.color,P.colormodel=t.trace.colormodel,P.z||(P.z=t.color),P}},67395:function($,P,t){var A=t(33575),M=t(25095).IMAGE_URL_PREFIX,l=t(12856).Buffer;P.A=function(_){var m=_.replace(M,""),f=new l(m,"base64");return A(f)}},28749:function($,P,t){var A=t(30211),M=t(71828),l=t(51877);$.exports=function(_,m,f){var o=_.cd[0],e=o.trace,i=_.xa,r=_.ya;if(!(A.inbox(m-o.x0,m-(o.x0+o.w*e.dx),0)>0||A.inbox(f-o.y0,f-(o.y0+o.h*e.dy),0)>0)){var n,s=Math.floor((m-o.x0)/e.dx),a=Math.floor(Math.abs(f-o.y0)/e.dy);if(e._hasZ?n=o.z[a][s]:e._hasSource&&(n=e._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,a,1,1).data),n){var u,p=o.hi||e.hoverinfo;if(p){var c=p.split("+");c.indexOf("all")!==-1&&(c=["color"]),c.indexOf("color")!==-1&&(u=!0)}var x,g=l.colormodel[e.colormodel],h=g.colormodel||e.colormodel,b=h.length,v=e._scaler(n),y=g.suffix,w=[];(e.hovertemplate||u)&&(w.push("["+[v[0]+y[0],v[1]+y[1],v[2]+y[2]].join(", ")),b===4&&w.push(", "+v[3]+y[3]),w.push("]"),w=w.join(""),_.extraText=h.toUpperCase()+": "+w),Array.isArray(e.hovertext)&&Array.isArray(e.hovertext[a])?x=e.hovertext[a][s]:Array.isArray(e.text)&&Array.isArray(e.text[a])&&(x=e.text[a][s]);var d=r.c2p(o.y0+(a+.5)*e.dy),S=o.x0+(s+.5)*e.dx,T=o.y0+(a+.5)*e.dy,E="["+n.slice(0,e.colormodel.length).join(", ")+"]";return[M.extendFlat(_,{index:[a,s],x0:i.c2p(o.x0+s*e.dx),x1:i.c2p(o.x0+(s+1)*e.dx),y0:d,y1:d,color:v,xVal:S,xLabelVal:S,yVal:T,yLabelVal:T,zLabelVal:E,text:x,hovertemplateLabels:{zLabel:E,colorLabel:w,"color[0]Label":v[0]+y[0],"color[1]Label":v[1]+y[1],"color[2]Label":v[2]+y[2],"color[3]Label":v[3]+y[3]}})]}}}},94507:function($,P,t){$.exports={attributes:t(17230),supplyDefaults:t(13245),calc:t(71113),plot:t(60775),style:t(12826),hoverPoints:t(28749),eventData:t(30835),moduleType:"trace",name:"image",basePlotModule:t(93612),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},60775:function($,P,t){var A=t(39898),M=t(71828),l=M.strTranslate,_=t(77922),m=t(51877),f=t(3883),o=t(32396).STYLE;$.exports=function(e,i,r,n){var s=i.xaxis,a=i.yaxis,u=!e._context._exportedPlot&&f();M.makeTraceGroups(n,r,"im").each(function(p){var c=A.select(this),x=p[0],g=x.trace,h=(g.zsmooth==="fast"||g.zsmooth===!1&&u)&&!g._hasZ&&g._hasSource&&s.type==="linear"&&a.type==="linear";g._realImage=h;var b,v,y,w,d,S,T=x.z,E=x.x0,C=x.y0,L=x.w,O=x.h,z=g.dx,G=g.dy;for(S=0;b===void 0&&S<L;)b=s.c2p(E+S*z),S++;for(S=L;v===void 0&&S>0;)v=s.c2p(E+S*z),S--;for(S=0;w===void 0&&S<O;)w=a.c2p(C+S*G),S++;for(S=O;d===void 0&&S>0;)d=a.c2p(C+S*G),S--;v<b&&(y=v,v=b,b=y),d<w&&(y=w,w=d,d=y),h||(b=Math.max(-.5*s._length,b),v=Math.min(1.5*s._length,v),w=Math.max(-.5*a._length,w),d=Math.min(1.5*a._length,d));var I=Math.round(v-b),H=Math.round(d-w);if(I<=0||H<=0)c.selectAll("image").data([]).exit().remove();else{var N=c.selectAll("image").data([p]);N.enter().append("svg:image").attr({xmlns:_.svg,preserveAspectRatio:"none"}),N.exit().remove();var F=g.zsmooth===!1?o:"";if(h){var V=M.simpleMap(s.range,s.r2l),W=M.simpleMap(a.range,a.r2l),te=V[1]<V[0],Q=W[1]>W[0];if(te||Q){var X=b+I/2,q=w+H/2;F+="transform:"+l(X+"px",q+"px")+"scale("+(te?-1:1)+","+(Q?-1:1)+")"+l(-X+"px",-q+"px")+";"}}N.attr("style",F);var Z=new Promise(function(ne){if(g._hasZ)ne();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===L&&g._canvas.el.height===O&&g._canvas.source===g.source)ne();else{var re=document.createElement("canvas");re.width=L,re.height=O;var ae=re.getContext("2d",{willReadFrequently:!0});g._image=g._image||new Image;var ue=g._image;ue.onload=function(){ae.drawImage(ue,0,0),g._canvas={el:re,source:g.source},ne()},ue.setAttribute("src",g.source)}}).then(function(){var ne,re;if(g._hasZ)re=J(function(ue,he){return T[he][ue]}),ne=re.toDataURL("image/png");else if(g._hasSource)if(h)ne=g.source;else{var ae=g._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,L,O).data;re=J(function(ue,he){var de=4*(he*L+ue);return[ae[de],ae[de+1],ae[de+2],ae[de+3]]}),ne=re.toDataURL("image/png")}N.attr({"xlink:href":ne,height:H,width:I,x:b,y:w})});e._promises.push(Z)}function J(ne){var re=document.createElement("canvas");re.width=I,re.height=H;var ae,ue=re.getContext("2d",{willReadFrequently:!0}),he=function(fe){return M.constrain(Math.round(s.c2p(E+fe*z)-b),0,I)},de=function(fe){return M.constrain(Math.round(a.c2p(C+fe*G)-w),0,H)},xe=m.colormodel[g.colormodel],me=xe.colormodel||g.colormodel,ve=xe.fmt;for(S=0;S<x.w;S++){var Le=he(S),Ae=he(S+1);if(Ae!==Le&&!isNaN(Ae)&&!isNaN(Le))for(var we=0;we<x.h;we++){var se=de(we),oe=de(we+1);oe===se||isNaN(oe)||isNaN(se)||!ne(S,we)||(ae=g._scaler(ne(S,we)),ue.fillStyle=ae?me+"("+ve(ae).join(",")+")":"rgba(0,0,0,0)",ue.fillRect(Le,se,Ae-Le,oe-se))}}return re}})}},12826:function($,P,t){var A=t(39898);$.exports=function(M){A.select(M).selectAll(".im image").style("opacity",function(l){return l[0].trace.opacity})}},54846:function($,P,t){var A=t(1426).extendFlat,M=t(1426).extendDeep,l=t(30962).overrideAll,_=t(41940),m=t(22399),f=t(27670).Y,o=t(13838),e=t(44467).templatedArray,i=t(22372),r=t(12663).descriptionOnlyNumbers,n=_({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:m.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},a={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=e("step",M({},s,{range:a}));$.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:f({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:A({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:r("value")},font:A({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:r("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:A({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:M({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:l({range:a,visible:A({},o.visible,{dflt:!0}),tickmode:o.minor.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:A({},o.ticks,{dflt:"outside"}),ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,tickfont:_({}),tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,separatethousands:o.separatethousands,exponentformat:o.exponentformat,minexponent:o.minexponent,showexponent:o.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:A({},s.line.color,{}),width:A({},s.line.width,{dflt:1}),editType:"plot"},thickness:A({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},15970:function($,P,t){var A=t(74875);P.name="indicator",P.plot=function(M,l,_,m){A.plotBasePlot(P.name,M,l,_,m)},P.clean=function(M,l,_,m){A.cleanBasePlot(P.name,M,l,_,m)}},24667:function($){$.exports={calc:function(P,t){var A=[],M=t.value;typeof t._lastValue!="number"&&(t._lastValue=t.value);var l=t._lastValue,_=l;return t._hasDelta&&typeof t.delta.reference=="number"&&(_=t.delta.reference),A[0]={y:M,lastY:l,delta:M-_,relativeDelta:(M-_)/_},A}}},84577:function($){$.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},94425:function($,P,t){var A=t(71828),M=t(54846),l=t(27670).c,_=t(44467),m=t(85501),f=t(84577),o=t(26218),e=t(38701),i=t(96115),r=t(89426);function n(s,a){function u(p,c){return A.coerce(s,a,M.gauge.steps,p,c)}u("color"),u("line.color"),u("line.width"),u("range"),u("thickness")}$.exports={supplyDefaults:function(s,a,u,p){function c(C,L){return A.coerce(s,a,M,C,L)}l(a,p,c),c("mode"),a._hasNumber=a.mode.indexOf("number")!==-1,a._hasDelta=a.mode.indexOf("delta")!==-1,a._hasGauge=a.mode.indexOf("gauge")!==-1;var x=c("value");a._range=[0,typeof x=="number"?1.5*x:1];var g,h,b,v,y,w,d=new Array(2);function S(C,L){return A.coerce(b,v,M.gauge,C,L)}function T(C,L){return A.coerce(y,w,M.gauge.axis,C,L)}if(a._hasNumber&&(c("number.valueformat"),c("number.font.color",p.font.color),c("number.font.family",p.font.family),c("number.font.size"),a.number.font.size===void 0&&(a.number.font.size=f.defaultNumberFontSize,d[0]=!0),c("number.prefix"),c("number.suffix"),g=a.number.font.size),a._hasDelta&&(c("delta.font.color",p.font.color),c("delta.font.family",p.font.family),c("delta.font.size"),a.delta.font.size===void 0&&(a.delta.font.size=(a._hasNumber?.5:1)*(g||f.defaultNumberFontSize),d[1]=!0),c("delta.reference",a.value),c("delta.relative"),c("delta.valueformat",a.delta.relative?"2%":""),c("delta.increasing.symbol"),c("delta.increasing.color"),c("delta.decreasing.symbol"),c("delta.decreasing.color"),c("delta.position"),c("delta.prefix"),c("delta.suffix"),h=a.delta.font.size),a._scaleNumbers=(!a._hasNumber||d[0])&&(!a._hasDelta||d[1])||!1,c("title.font.color",p.font.color),c("title.font.family",p.font.family),c("title.font.size",.25*(g||h||f.defaultNumberFontSize)),c("title.text"),a._hasGauge){(b=s.gauge)||(b={}),v=_.newContainer(a,"gauge"),S("shape"),(a._isBullet=a.gauge.shape==="bullet")||c("title.align","center"),(a._isAngular=a.gauge.shape==="angular")||c("align","center"),S("bgcolor",p.paper_bgcolor),S("borderwidth"),S("bordercolor"),S("bar.color"),S("bar.line.color"),S("bar.line.width"),S("bar.thickness",f.valueThickness*(a.gauge.shape==="bullet"?.5:1)),m(b,v,{name:"steps",handleItemDefaults:n}),S("threshold.value"),S("threshold.thickness"),S("threshold.line.width"),S("threshold.line.color"),y={},b&&(y=b.axis||{}),w=_.newContainer(v,"axis"),T("visible"),a._range=T("range",a._range);var E={outerTicks:!0};o(y,w,T,"linear"),r(y,w,T,"linear",E),i(y,w,T,"linear",E),e(y,w,T,E)}else c("title.align","center"),c("align","center"),a._isAngular=a._isBullet=!1;a._length=null}}},15154:function($,P,t){$.exports={moduleType:"trace",name:"indicator",basePlotModule:t(15970),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(54846),supplyDefaults:t(94425).supplyDefaults,calc:t(24667).calc,plot:t(75634),meta:{}}},75634:function($,P,t){var A=t(39898),M=t(81684).sX,l=t(81684).k4,_=t(71828),m=_.strScale,f=_.strTranslate,o=_.rad2deg,e=t(18783).MID_SHIFT,i=t(91424),r=t(84577),n=t(63893),s=t(89298),a=t(71453),u=t(52830),p=t(13838),c=t(7901),x={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},h=/[yzafpnmkMGTPEZY]/;function b(T){return T&&T.duration>0}function v(T){T.each(function(E){c.stroke(A.select(this),E.line.color)}).each(function(E){c.fill(A.select(this),E.color)}).style("stroke-width",function(E){return E.line.width})}function y(T,E,C){var L=T._fullLayout,O=_.extendFlat({type:"linear",ticks:"outside",range:C,showline:!0},E),z={type:"linear",_id:"x"+E._id},G={letter:"x",font:L.font,noHover:!0,noTickson:!0};function I(H,N){return _.coerce(O,z,p,H,N)}return a(O,z,I,G,L),u(O,z,I,G),z}function w(T,E,C){return[Math.min(E/T.width,C/T.height),T,E+"x"+C]}function d(T,E,C,L){var O=document.createElementNS("http://www.w3.org/2000/svg","text"),z=A.select(O);return z.text(T).attr("x",0).attr("y",0).attr("text-anchor",C).attr("data-unformatted",T).call(n.convertToTspans,L).call(i.font,E),i.bBox(z.node())}function S(T,E,C,L,O,z){var G="_cache"+E;T[G]&&T[G].key===O||(T[G]={key:O,value:C});var I=_.aggNums(z,null,[T[G].value,L],2);return T[G].value=I,I}$.exports=function(T,E,C,L){var O,z=T._fullLayout;b(C)&&L&&(O=L()),_.makeTraceGroups(z._indicatorlayer,E,"trace").each(function(G){var I,H,N,F,V,W=G[0].trace,te=A.select(this),Q=W._hasGauge,X=W._isAngular,q=W._isBullet,Z=W.domain,J={w:z._size.w*(Z.x[1]-Z.x[0]),h:z._size.h*(Z.y[1]-Z.y[0]),l:z._size.l+z._size.w*Z.x[0],r:z._size.r+z._size.w*(1-Z.x[1]),t:z._size.t+z._size.h*(1-Z.y[1]),b:z._size.b+z._size.h*Z.y[0]},ne=J.l+J.w/2,re=J.t+J.h/2,ae=Math.min(J.w/2,J.h),ue=r.innerRadius*ae,he=W.align||"center";if(H=re,Q){if(X&&(I=ne,H=re+ae/2,N=function(se){return function(oe,fe){return[fe/Math.sqrt(oe.width/2*(oe.width/2)+oe.height*oe.height),oe,fe]}(se,.9*ue)}),q){var de=r.bulletPadding,xe=1-r.bulletNumberDomainSize+de;I=J.l+(xe+(1-xe)*g[he])*J.w,N=function(se){return w(se,(r.bulletNumberDomainSize-de)*J.w,J.h)}}}else I=J.l+g[he]*J.w,N=function(se){return w(se,J.w,J.h)};(function(se,oe,fe,Se){var Me,be,Ie,Be=fe[0].trace,ce=Se.numbersX,Te=Se.numbersY,ye=Be.align||"center",Pe=x[ye],Re=Se.transitionOpts,ze=Se.onComplete,He=_.ensureSingle(oe,"g","numbers"),We=[];Be._hasNumber&&We.push("number"),Be._hasDelta&&(We.push("delta"),Be.delta.position==="left"&&We.reverse());var Je=He.selectAll("text").data(We);function lt(Ct,zt,St,qe){if(!Ct.match("s")||St>=0==qe>=0||zt(St).slice(-1).match(h)||zt(qe).slice(-1).match(h))return zt;var Xe=Ct.slice().replace("s","f").replace(/\d+/,function(Ze){return parseInt(Ze)-1}),Ve=y(se,{tickformat:Xe});return function(Ze){return Math.abs(Ze)<1?s.tickText(Ve,Ze).text:zt(Ze)}}Je.enter().append("text"),Je.attr("text-anchor",function(){return Pe}).attr("class",function(Ct){return Ct}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Je.exit().remove();var et,yt=Be.mode+Be.align;if(Be._hasDelta&&(et=function(){var Ct=y(se,{tickformat:Be.delta.valueformat},Be._range);Ct.setScale(),s.prepTicks(Ct);var zt=function(De){return s.tickText(Ct,De).text},St=Be.delta.suffix,qe=Be.delta.prefix,Xe=function(De){return Be.delta.relative?De.relativeDelta:De.delta},Ve=function(De,Fe){return De===0||typeof De!="number"||isNaN(De)?"-":(De>0?Be.delta.increasing.symbol:Be.delta.decreasing.symbol)+qe+Fe(De)+St},Ze=function(De){return De.delta>=0?Be.delta.increasing.color:Be.delta.decreasing.color};Be._deltaLastValue===void 0&&(Be._deltaLastValue=Xe(fe[0]));var st=He.select("text.delta");function nt(){st.text(Ve(Xe(fe[0]),zt)).call(c.fill,Ze(fe[0])).call(n.convertToTspans,se)}return st.call(i.font,Be.delta.font).call(c.fill,Ze({delta:Be._deltaLastValue})),b(Re)?st.transition().duration(Re.duration).ease(Re.easing).tween("text",function(){var De=A.select(this),Fe=Xe(fe[0]),rt=Be._deltaLastValue,tt=lt(Be.delta.valueformat,zt,rt,Fe),gt=l(rt,Fe);return Be._deltaLastValue=Fe,function(dt){De.text(Ve(gt(dt),tt)),De.call(c.fill,Ze({delta:gt(dt)}))}}).each("end",function(){nt(),ze&&ze()}).each("interrupt",function(){nt(),ze&&ze()}):nt(),be=d(Ve(Xe(fe[0]),zt),Be.delta.font,Pe,se),st}(),yt+=Be.delta.position+Be.delta.font.size+Be.delta.font.family+Be.delta.valueformat,yt+=Be.delta.increasing.symbol+Be.delta.decreasing.symbol,Ie=be),Be._hasNumber&&(function(){var Ct=y(se,{tickformat:Be.number.valueformat},Be._range);Ct.setScale(),s.prepTicks(Ct);var zt=function(Ze){return s.tickText(Ct,Ze).text},St=Be.number.suffix,qe=Be.number.prefix,Xe=He.select("text.number");function Ve(){var Ze=typeof fe[0].y=="number"?qe+zt(fe[0].y)+St:"-";Xe.text(Ze).call(i.font,Be.number.font).call(n.convertToTspans,se)}b(Re)?Xe.transition().duration(Re.duration).ease(Re.easing).each("end",function(){Ve(),ze&&ze()}).each("interrupt",function(){Ve(),ze&&ze()}).attrTween("text",function(){var Ze=A.select(this),st=l(fe[0].lastY,fe[0].y);Be._lastValue=fe[0].y;var nt=lt(Be.number.valueformat,zt,fe[0].lastY,fe[0].y);return function(De){Ze.text(qe+nt(st(De))+St)}}):Ve(),Me=d(qe+zt(fe[0].y)+St,Be.number.font,Pe,se)}(),yt+=Be.number.font.size+Be.number.font.family+Be.number.valueformat+Be.number.suffix+Be.number.prefix,Ie=Me),Be._hasDelta&&Be._hasNumber){var _t,xt,at=[(Me.left+Me.right)/2,(Me.top+Me.bottom)/2],ot=[(be.left+be.right)/2,(be.top+be.bottom)/2],At=.75*Be.delta.font.size;Be.delta.position==="left"&&(_t=S(Be,"deltaPos",0,-1*(Me.width*g[Be.align]+be.width*(1-g[Be.align])+At),yt,Math.min),xt=at[1]-ot[1],Ie={width:Me.width+be.width+At,height:Math.max(Me.height,be.height),left:be.left+_t,right:Me.right,top:Math.min(Me.top,be.top+xt),bottom:Math.max(Me.bottom,be.bottom+xt)}),Be.delta.position==="right"&&(_t=S(Be,"deltaPos",0,Me.width*(1-g[Be.align])+be.width*g[Be.align]+At,yt,Math.max),xt=at[1]-ot[1],Ie={width:Me.width+be.width+At,height:Math.max(Me.height,be.height),left:Me.left,right:be.right+_t,top:Math.min(Me.top,be.top+xt),bottom:Math.max(Me.bottom,be.bottom+xt)}),Be.delta.position==="bottom"&&(_t=null,xt=be.height,Ie={width:Math.max(Me.width,be.width),height:Me.height+be.height,left:Math.min(Me.left,be.left),right:Math.max(Me.right,be.right),top:Me.bottom-Me.height,bottom:Me.bottom+be.height}),Be.delta.position==="top"&&(_t=null,xt=Me.top,Ie={width:Math.max(Me.width,be.width),height:Me.height+be.height,left:Math.min(Me.left,be.left),right:Math.max(Me.right,be.right),top:Me.bottom-Me.height-be.height,bottom:Me.bottom}),et.attr({dx:_t,dy:xt})}(Be._hasNumber||Be._hasDelta)&&He.attr("transform",function(){var Ct=Se.numbersScaler(Ie);yt+=Ct[2];var zt,St=S(Be,"numbersScale",1,Ct[0],yt,Math.min);Be._scaleNumbers||(St=1),zt=Be._isAngular?Te-St*Ie.bottom:Te-St*(Ie.top+Ie.bottom)/2,Be._numbersTop=St*Ie.top+zt;var qe=Ie[ye];ye==="center"&&(qe=(Ie.left+Ie.right)/2);var Xe=ce-St*qe;return Xe=S(Be,"numbersTranslate",0,Xe,yt,Math.max),f(Xe,zt)+m(St)})})(T,te,G,{numbersX:I,numbersY:H,numbersScaler:N,transitionOpts:C,onComplete:O}),Q&&(F={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},V={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var me=te.selectAll("g.angular").data(X?G:[]);me.exit().remove();var ve=te.selectAll("g.angularaxis").data(X?G:[]);ve.exit().remove(),X&&function(se,oe,fe,Se){var Me,be,Ie,Be,ce=fe[0].trace,Te=Se.size,ye=Se.radius,Pe=Se.innerRadius,Re=Se.gaugeBg,ze=Se.gaugeOutline,He=[Te.l+Te.w/2,Te.t+Te.h/2+ye/2],We=Se.gauge,Je=Se.layer,lt=Se.transitionOpts,et=Se.onComplete,yt=Math.PI/2;function _t(dt){var mt=ce.gauge.axis.range[0],ft=(dt-mt)/(ce.gauge.axis.range[1]-mt)*Math.PI-yt;return ft<-yt?-yt:ft>yt?yt:ft}function xt(dt){return A.svg.arc().innerRadius((Pe+ye)/2-dt/2*(ye-Pe)).outerRadius((Pe+ye)/2+dt/2*(ye-Pe)).startAngle(-yt)}function at(dt){dt.attr("d",function(mt){return xt(mt.thickness).startAngle(_t(mt.range[0])).endAngle(_t(mt.range[1]))()})}We.enter().append("g").classed("angular",!0),We.attr("transform",f(He[0],He[1])),Je.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Je.selectAll("g.xangularaxistick,path,text").remove(),(Me=y(se,ce.gauge.axis)).type="linear",Me.range=ce.gauge.axis.range,Me._id="xangularaxis",Me.ticklabeloverflow="allow",Me.setScale();var ot=function(dt){return(Me.range[0]-dt.x)/(Me.range[1]-Me.range[0])*Math.PI+Math.PI},At={},Ct=s.makeLabelFns(Me,0).labelStandoff;At.xFn=function(dt){var mt=ot(dt);return Math.cos(mt)*Ct},At.yFn=function(dt){var mt=ot(dt),ft=Math.sin(mt)>0?.2:1;return-Math.sin(mt)*(Ct+dt.fontSize*ft)+Math.abs(Math.cos(mt))*(dt.fontSize*e)},At.anchorFn=function(dt){var mt=ot(dt),ft=Math.cos(mt);return Math.abs(ft)<.1?"middle":ft>0?"start":"end"},At.heightFn=function(dt,mt,ft){var kt=ot(dt);return-.5*(1+Math.sin(kt))*ft};var zt=function(dt){return f(He[0]+ye*Math.cos(dt),He[1]-ye*Math.sin(dt))};if(Ie=function(dt){return zt(ot(dt))},be=s.calcTicks(Me),Be=s.getTickSigns(Me)[2],Me.visible){Be=Me.ticks==="inside"?-1:1;var St=(Me.linewidth||1)/2;s.drawTicks(se,Me,{vals:be,layer:Je,path:"M"+Be*St+",0h"+Be*Me.ticklen,transFn:function(dt){var mt=ot(dt);return zt(mt)+"rotate("+-o(mt)+")"}}),s.drawLabels(se,Me,{vals:be,layer:Je,transFn:Ie,labelFns:At})}var qe=[Re].concat(ce.gauge.steps),Xe=We.selectAll("g.bg-arc").data(qe);Xe.enter().append("g").classed("bg-arc",!0).append("path"),Xe.select("path").call(at).call(v),Xe.exit().remove();var Ve=xt(ce.gauge.bar.thickness),Ze=We.selectAll("g.value-arc").data([ce.gauge.bar]);Ze.enter().append("g").classed("value-arc",!0).append("path");var st,nt,De,Fe=Ze.select("path");b(lt)?(Fe.transition().duration(lt.duration).ease(lt.easing).each("end",function(){et&&et()}).each("interrupt",function(){et&&et()}).attrTween("d",(st=Ve,nt=_t(fe[0].lastY),De=_t(fe[0].y),function(){var dt=M(nt,De);return function(mt){return st.endAngle(dt(mt))()}})),ce._lastValue=fe[0].y):Fe.attr("d",typeof fe[0].y=="number"?Ve.endAngle(_t(fe[0].y)):"M0,0Z"),Fe.call(v),Ze.exit().remove(),qe=[];var rt=ce.gauge.threshold.value;(rt||rt===0)&&qe.push({range:[rt,rt],color:ce.gauge.threshold.color,line:{color:ce.gauge.threshold.line.color,width:ce.gauge.threshold.line.width},thickness:ce.gauge.threshold.thickness});var tt=We.selectAll("g.threshold-arc").data(qe);tt.enter().append("g").classed("threshold-arc",!0).append("path"),tt.select("path").call(at).call(v),tt.exit().remove();var gt=We.selectAll("g.gauge-outline").data([ze]);gt.enter().append("g").classed("gauge-outline",!0).append("path"),gt.select("path").call(at).call(v),gt.exit().remove()}(T,0,G,{radius:ae,innerRadius:ue,gauge:me,layer:ve,size:J,gaugeBg:F,gaugeOutline:V,transitionOpts:C,onComplete:O});var Le=te.selectAll("g.bullet").data(q?G:[]);Le.exit().remove();var Ae=te.selectAll("g.bulletaxis").data(q?G:[]);Ae.exit().remove(),q&&function(se,oe,fe,Se){var Me,be,Ie,Be,ce,Te=fe[0].trace,ye=Se.gauge,Pe=Se.layer,Re=Se.gaugeBg,ze=Se.gaugeOutline,He=Se.size,We=Te.domain,Je=Se.transitionOpts,lt=Se.onComplete;ye.enter().append("g").classed("bullet",!0),ye.attr("transform",f(He.l,He.t)),Pe.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Pe.selectAll("g.xbulletaxistick,path,text").remove();var et=He.h,yt=Te.gauge.bar.thickness*et,_t=We.x[0],xt=We.x[0]+(We.x[1]-We.x[0])*(Te._hasNumber||Te._hasDelta?1-r.bulletNumberDomainSize:1);function at(Xe){Xe.attr("width",function(Ve){return Math.max(0,Me.c2p(Ve.range[1])-Me.c2p(Ve.range[0]))}).attr("x",function(Ve){return Me.c2p(Ve.range[0])}).attr("y",function(Ve){return .5*(1-Ve.thickness)*et}).attr("height",function(Ve){return Ve.thickness*et})}(Me=y(se,Te.gauge.axis))._id="xbulletaxis",Me.domain=[_t,xt],Me.setScale(),be=s.calcTicks(Me),Ie=s.makeTransTickFn(Me),Be=s.getTickSigns(Me)[2],ce=He.t+He.h,Me.visible&&(s.drawTicks(se,Me,{vals:Me.ticks==="inside"?s.clipEnds(Me,be):be,layer:Pe,path:s.makeTickPath(Me,ce,Be),transFn:Ie}),s.drawLabels(se,Me,{vals:be,layer:Pe,transFn:Ie,labelFns:s.makeLabelFns(Me,ce)}));var ot=[Re].concat(Te.gauge.steps),At=ye.selectAll("g.bg-bullet").data(ot);At.enter().append("g").classed("bg-bullet",!0).append("rect"),At.select("rect").call(at).call(v),At.exit().remove();var Ct=ye.selectAll("g.value-bullet").data([Te.gauge.bar]);Ct.enter().append("g").classed("value-bullet",!0).append("rect"),Ct.select("rect").attr("height",yt).attr("y",(et-yt)/2).call(v),b(Je)?Ct.select("rect").transition().duration(Je.duration).ease(Je.easing).each("end",function(){lt&&lt()}).each("interrupt",function(){lt&&lt()}).attr("width",Math.max(0,Me.c2p(Math.min(Te.gauge.axis.range[1],fe[0].y)))):Ct.select("rect").attr("width",typeof fe[0].y=="number"?Math.max(0,Me.c2p(Math.min(Te.gauge.axis.range[1],fe[0].y))):0),Ct.exit().remove();var zt=fe.filter(function(){return Te.gauge.threshold.value||Te.gauge.threshold.value===0}),St=ye.selectAll("g.threshold-bullet").data(zt);St.enter().append("g").classed("threshold-bullet",!0).append("line"),St.select("line").attr("x1",Me.c2p(Te.gauge.threshold.value)).attr("x2",Me.c2p(Te.gauge.threshold.value)).attr("y1",(1-Te.gauge.threshold.thickness)/2*et).attr("y2",(1-(1-Te.gauge.threshold.thickness)/2)*et).call(c.stroke,Te.gauge.threshold.line.color).style("stroke-width",Te.gauge.threshold.line.width),St.exit().remove();var qe=ye.selectAll("g.gauge-outline").data([ze]);qe.enter().append("g").classed("gauge-outline",!0).append("rect"),qe.select("rect").call(at).call(v),qe.exit().remove()}(T,0,G,{gauge:Le,layer:Ae,size:J,gaugeBg:F,gaugeOutline:V,transitionOpts:C,onComplete:O});var we=te.selectAll("text.title").data(G);we.exit().remove(),we.enter().append("text").classed("title",!0),we.attr("text-anchor",function(){return q?x.right:x[W.title.align]}).text(W.title.text).call(i.font,W.title.font).call(n.convertToTspans,T),we.attr("transform",function(){var se,oe=J.l+J.w*g[W.title.align],fe=r.titlePadding,Se=i.bBox(we.node());return Q?(X&&(se=W.gauge.axis.visible?i.bBox(ve.node()).top-fe-Se.bottom:J.t+J.h/2-ae/2-Se.bottom-fe),q&&(se=H-(Se.top+Se.bottom)/2,oe=J.l-r.bulletPadding*J.w)):se=W._numbersTop-fe-Se.bottom,f(oe,se)})})}},16249:function($,P,t){var A=t(50693),M=t(12663).axisHoverFormat,l=t(5386).fF,_=t(2418),m=t(9012),f=t(1426).extendFlat,o=t(30962).overrideAll,e=$.exports=o(f({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:l(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),valuehoverformat:M("value",1),showlegend:f({},m.showlegend,{dflt:!1})},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,lightposition:_.lightposition,lighting:_.lighting,flatshading:_.flatshading,contour:_.contour,hoverinfo:f({},m.hoverinfo)}),"calc","nested");e.flatshading.dflt=!0,e.lighting.facenormalsepsilon.dflt=0,e.x.editType=e.y.editType=e.z.editType=e.value.editType="calc+clearAxisTypes",e.transforms=void 0},56959:function($,P,t){var A=t(78803),M=t(88489).processGrid,l=t(88489).filter;$.exports=function(_,m){m._len=Math.min(m.x.length,m.y.length,m.z.length,m.value.length),m._x=l(m.x,m._len),m._y=l(m.y,m._len),m._z=l(m.z,m._len),m._value=l(m.value,m._len);var f=M(m);m._gridFill=f.fill,m._Xs=f.Xs,m._Ys=f.Ys,m._Zs=f.Zs,m._len=f.len;for(var o=1/0,e=-1/0,i=0;i<m._len;i++){var r=m._value[i];o=Math.min(o,r),e=Math.max(e,r)}m._minValues=o,m._maxValues=e,m._vMin=m.isomin===void 0||m.isomin===null?o:m.isomin,m._vMax=m.isomax===void 0||m.isomin===null?e:m.isomax,A(_,m,{vals:[m._vMin,m._vMax],containerStr:"",cLetter:"c"})}},22674:function($,P,t){var A=t(9330).gl_mesh3d,M=t(81697).parseColorScale,l=t(78614),_=t(21081).extractOpts,m=t(90060),f=function(n,s){for(var a=s.length-1;a>0;a--){var u=Math.min(s[a],s[a-1]),p=Math.max(s[a],s[a-1]);if(p>u&&u<n&&n<=p)return{id:a,distRatio:(p-n)/(p-u)}}return{id:0,distRatio:0}};function o(n,s,a){this.scene=n,this.uid=a,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var e=o.prototype;e.handlePick=function(n){if(n.object===this.mesh){var s=n.data.index,a=this.data._meshX[s],u=this.data._meshY[s],p=this.data._meshZ[s],c=this.data._Ys.length,x=this.data._Zs.length,g=f(a,this.data._Xs).id,h=f(u,this.data._Ys).id,b=f(p,this.data._Zs).id,v=n.index=b+x*h+x*c*g;n.traceCoordinate=[this.data._meshX[v],this.data._meshY[v],this.data._meshZ[v],this.data._value[v]];var y=this.data.hovertext||this.data.text;return Array.isArray(y)&&y[v]!==void 0?n.textLabel=y[v]:y&&(n.textLabel=y),!0}},e.update=function(n){var s=this.scene,a=s.fullSceneLayout;function u(x,g,h,b){return g.map(function(v){return x.d2l(v,0,b)*h})}this.data=r(n);var p={positions:m(u(a.xaxis,n._meshX,s.dataScale[0],n.xcalendar),u(a.yaxis,n._meshY,s.dataScale[1],n.ycalendar),u(a.zaxis,n._meshZ,s.dataScale[2],n.zcalendar)),cells:m(n._meshI,n._meshJ,n._meshK),lightPosition:[n.lightposition.x,n.lightposition.y,n.lightposition.z],ambient:n.lighting.ambient,diffuse:n.lighting.diffuse,specular:n.lighting.specular,roughness:n.lighting.roughness,fresnel:n.lighting.fresnel,vertexNormalsEpsilon:n.lighting.vertexnormalsepsilon,faceNormalsEpsilon:n.lighting.facenormalsepsilon,opacity:n.opacity,contourEnable:n.contour.show,contourColor:l(n.contour.color).slice(0,3),contourWidth:n.contour.width,useFacetNormals:n.flatshading},c=_(n);p.vertexIntensity=n._meshIntensity,p.vertexIntensityBounds=[c.min,c.max],p.colormap=M(n),this.mesh.update(p)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function r(n){n._meshI=[],n._meshJ=[],n._meshK=[];var s,a,u,p,c,x,g,h=n.surface.show,b=n.spaceframe.show,v=n.surface.fill,y=n.spaceframe.fill,w=!1,d=!1,S=0,T=n._Xs,E=n._Ys,C=n._Zs,L=T.length,O=E.length,z=C.length,G=i.indexOf(n._gridFill.replace(/-/g,"").replace(/\+/g,"")),I=function(ye,Pe,Re){switch(G){case 5:return Re+z*Pe+z*O*ye;case 4:return Re+z*ye+z*L*Pe;case 3:return Pe+O*Re+O*z*ye;case 2:return Pe+O*ye+O*L*Re;case 1:return ye+L*Re+L*z*Pe;default:return ye+L*Pe+L*O*Re}},H=n._minValues,N=n._maxValues,F=n._vMin,V=n._vMax;function W(ye,Pe,Re){for(var ze=x.length,He=a;He<ze;He++)if(ye===u[He]&&Pe===p[He]&&Re===c[He])return He;return-1}function te(){a=s}function Q(){u=[],p=[],c=[],x=[],s=0,te()}function X(ye,Pe,Re,ze){return u.push(ye),p.push(Pe),c.push(Re),x.push(ze),++s-1}function q(ye,Pe,Re){for(var ze=[],He=0;He<ye.length;He++)ze[He]=ye[He]*(1-Re)+Re*Pe[He];return ze}function Z(ye){g=ye}function J(ye,Pe){return ye==="all"||ye===null||ye.indexOf(Pe)>-1}function ne(ye,Pe){return ye===null?Pe:ye}function re(ye,Pe,Re){te();var ze,He,We,Je=[Pe],lt=[Re];if(g>=1)Je=[Pe],lt=[Re];else if(g>0){var et=function(St,qe){var Xe=St[0],Ve=St[1],Ze=St[2],st=function(mt,ft,kt){for(var ht=[],pt=0;pt<mt.length;pt++)ht[pt]=(mt[pt]+ft[pt]+kt[pt])/3;return ht}(Xe,Ve,Ze),nt=Math.sqrt(1-g),De=q(st,Xe,nt),Fe=q(st,Ve,nt),rt=q(st,Ze,nt),tt=qe[0],gt=qe[1],dt=qe[2];return{xyzv:[[Xe,Ve,Fe],[Fe,De,Xe],[Ve,Ze,rt],[rt,Fe,Ve],[Ze,Xe,De],[De,rt,Ze]],abc:[[tt,gt,-1],[-1,-1,tt],[gt,dt,-1],[-1,-1,gt],[dt,tt,-1],[-1,-1,dt]]}}(Pe,Re);Je=et.xyzv,lt=et.abc}for(var yt=0;yt<Je.length;yt++){Pe=Je[yt],Re=lt[yt];for(var _t=[],xt=0;xt<3;xt++){var at=Pe[xt][0],ot=Pe[xt][1],At=Pe[xt][2],Ct=Pe[xt][3],zt=Re[xt]>-1?Re[xt]:W(at,ot,At);_t[xt]=zt>-1?zt:X(at,ot,At,ne(ye,Ct))}ze=_t[0],He=_t[1],We=_t[2],n._meshI.push(ze),n._meshJ.push(He),n._meshK.push(We),++S}}function ae(ye,Pe,Re,ze){var He=ye[3];He<Re&&(He=Re),He>ze&&(He=ze);for(var We=(ye[3]-He)/(ye[3]-Pe[3]+1e-9),Je=[],lt=0;lt<4;lt++)Je[lt]=(1-We)*ye[lt]+We*Pe[lt];return Je}function ue(ye,Pe,Re){return ye>=Pe&&ye<=Re}function he(ye){var Pe=.001*(V-F);return ye>=F-Pe&&ye<=V+Pe}function de(ye){for(var Pe=[],Re=0;Re<4;Re++){var ze=ye[Re];Pe.push([n._x[ze],n._y[ze],n._z[ze],n._value[ze]])}return Pe}var xe=3;function me(ye,Pe,Re,ze,He,We){We||(We=1),Re=[-1,-1,-1];var Je=!1,lt=[ue(Pe[0][3],ze,He),ue(Pe[1][3],ze,He),ue(Pe[2][3],ze,He)];if(!lt[0]&&!lt[1]&&!lt[2])return!1;var et=function(_t,xt,at){return he(xt[0][3])&&he(xt[1][3])&&he(xt[2][3])?(re(_t,xt,at),!0):We<xe&&me(_t,xt,at,F,V,++We)};if(lt[0]&&lt[1]&&lt[2])return et(ye,Pe,Re)||Je;var yt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(_t){if(lt[_t[0]]&&lt[_t[1]]&&!lt[_t[2]]){var xt=Pe[_t[0]],at=Pe[_t[1]],ot=Pe[_t[2]],At=ae(ot,xt,ze,He),Ct=ae(ot,at,ze,He);Je=et(ye,[Ct,At,xt],[-1,-1,Re[_t[0]]])||Je,Je=et(ye,[xt,at,Ct],[Re[_t[0]],Re[_t[1]],-1])||Je,yt=!0}}),yt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(_t){if(lt[_t[0]]&&!lt[_t[1]]&&!lt[_t[2]]){var xt=Pe[_t[0]],at=Pe[_t[1]],ot=Pe[_t[2]],At=ae(at,xt,ze,He),Ct=ae(ot,xt,ze,He);Je=et(ye,[Ct,At,xt],[-1,-1,Re[_t[0]]])||Je,yt=!0}}),Je}function ve(ye,Pe,Re,ze){var He=!1,We=de(Pe),Je=[ue(We[0][3],Re,ze),ue(We[1][3],Re,ze),ue(We[2][3],Re,ze),ue(We[3][3],Re,ze)];if(!(Je[0]||Je[1]||Je[2]||Je[3]))return He;if(Je[0]&&Je[1]&&Je[2]&&Je[3])return d&&(He=function(et,yt,_t){var xt=function(at,ot,At){re(et,[yt[at],yt[ot],yt[At]],[_t[at],_t[ot],_t[At]])};xt(0,1,2),xt(3,0,1),xt(2,3,0),xt(1,2,3)}(ye,We,Pe)||He),He;var lt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(et){if(Je[et[0]]&&Je[et[1]]&&Je[et[2]]&&!Je[et[3]]){var yt=We[et[0]],_t=We[et[1]],xt=We[et[2]],at=We[et[3]];if(d)He=re(ye,[yt,_t,xt],[Pe[et[0]],Pe[et[1]],Pe[et[2]]])||He;else{var ot=ae(at,yt,Re,ze),At=ae(at,_t,Re,ze),Ct=ae(at,xt,Re,ze);He=re(null,[ot,At,Ct],[-1,-1,-1])||He}lt=!0}}),lt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(et){if(Je[et[0]]&&Je[et[1]]&&!Je[et[2]]&&!Je[et[3]]){var yt=We[et[0]],_t=We[et[1]],xt=We[et[2]],at=We[et[3]],ot=ae(xt,yt,Re,ze),At=ae(xt,_t,Re,ze),Ct=ae(at,_t,Re,ze),zt=ae(at,yt,Re,ze);d?(He=re(ye,[yt,zt,ot],[Pe[et[0]],-1,-1])||He,He=re(ye,[_t,At,Ct],[Pe[et[1]],-1,-1])||He):He=function(St,qe,Xe){var Ve=function(Ze,st,nt){re(null,[qe[Ze],qe[st],qe[nt]],[Xe[Ze],Xe[st],Xe[nt]])};Ve(0,1,2),Ve(2,3,0)}(0,[ot,At,Ct,zt],[-1,-1,-1,-1])||He,lt=!0}}),lt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(et){if(Je[et[0]]&&!Je[et[1]]&&!Je[et[2]]&&!Je[et[3]]){var yt=We[et[0]],_t=We[et[1]],xt=We[et[2]],at=We[et[3]],ot=ae(_t,yt,Re,ze),At=ae(xt,yt,Re,ze),Ct=ae(at,yt,Re,ze);d?(He=re(ye,[yt,ot,At],[Pe[et[0]],-1,-1])||He,He=re(ye,[yt,At,Ct],[Pe[et[0]],-1,-1])||He,He=re(ye,[yt,Ct,ot],[Pe[et[0]],-1,-1])||He):He=re(null,[ot,At,Ct],[-1,-1,-1])||He,lt=!0}})),He}function Le(ye,Pe,Re,ze,He,We,Je,lt,et,yt,_t){var xt=!1;return w&&(J(ye,"A")&&(xt=ve(null,[Pe,Re,ze,We],yt,_t)||xt),J(ye,"B")&&(xt=ve(null,[Re,ze,He,et],yt,_t)||xt),J(ye,"C")&&(xt=ve(null,[Re,We,Je,et],yt,_t)||xt),J(ye,"D")&&(xt=ve(null,[ze,We,lt,et],yt,_t)||xt),J(ye,"E")&&(xt=ve(null,[Re,ze,We,et],yt,_t)||xt)),d&&(xt=ve(ye,[Re,ze,We,et],yt,_t)||xt),xt}function Ae(ye,Pe,Re,ze,He,We,Je,lt){return[lt[0]===!0||me(ye,de([Pe,Re,ze]),[Pe,Re,ze],We,Je),lt[1]===!0||me(ye,de([ze,He,Pe]),[ze,He,Pe],We,Je)]}function we(ye,Pe,Re,ze,He,We,Je,lt,et){return lt?Ae(ye,Pe,Re,He,ze,We,Je,et):Ae(ye,Re,He,ze,Pe,We,Je,et)}function se(ye,Pe,Re,ze,He,We,Je){var lt,et,yt,_t,xt=!1,at=function(){xt=me(ye,[lt,et,yt],[-1,-1,-1],He,We)||xt,xt=me(ye,[yt,_t,lt],[-1,-1,-1],He,We)||xt},ot=Je[0],At=Je[1],Ct=Je[2];return ot&&(lt=q(de([I(Pe,Re-0,ze-0)])[0],de([I(Pe-1,Re-0,ze-0)])[0],ot),et=q(de([I(Pe,Re-0,ze-1)])[0],de([I(Pe-1,Re-0,ze-1)])[0],ot),yt=q(de([I(Pe,Re-1,ze-1)])[0],de([I(Pe-1,Re-1,ze-1)])[0],ot),_t=q(de([I(Pe,Re-1,ze-0)])[0],de([I(Pe-1,Re-1,ze-0)])[0],ot),at()),At&&(lt=q(de([I(Pe-0,Re,ze-0)])[0],de([I(Pe-0,Re-1,ze-0)])[0],At),et=q(de([I(Pe-0,Re,ze-1)])[0],de([I(Pe-0,Re-1,ze-1)])[0],At),yt=q(de([I(Pe-1,Re,ze-1)])[0],de([I(Pe-1,Re-1,ze-1)])[0],At),_t=q(de([I(Pe-1,Re,ze-0)])[0],de([I(Pe-1,Re-1,ze-0)])[0],At),at()),Ct&&(lt=q(de([I(Pe-0,Re-0,ze)])[0],de([I(Pe-0,Re-0,ze-1)])[0],Ct),et=q(de([I(Pe-0,Re-1,ze)])[0],de([I(Pe-0,Re-1,ze-1)])[0],Ct),yt=q(de([I(Pe-1,Re-1,ze)])[0],de([I(Pe-1,Re-1,ze-1)])[0],Ct),_t=q(de([I(Pe-1,Re-0,ze)])[0],de([I(Pe-1,Re-0,ze-1)])[0],Ct),at()),xt}function oe(ye,Pe,Re,ze,He,We,Je,lt,et,yt,_t,xt){var at=ye;return xt?(w&&ye==="even"&&(at=null),Le(at,Pe,Re,ze,He,We,Je,lt,et,yt,_t)):(w&&ye==="odd"&&(at=null),Le(at,et,lt,Je,We,He,ze,Re,Pe,yt,_t))}function fe(ye,Pe,Re,ze,He){for(var We=[],Je=0,lt=0;lt<Pe.length;lt++)for(var et=Pe[lt],yt=1;yt<z;yt++)for(var _t=1;_t<O;_t++)We.push(we(ye,I(et,_t-1,yt-1),I(et,_t-1,yt),I(et,_t,yt-1),I(et,_t,yt),Re,ze,(et+_t+yt)%2,He&&He[Je]?He[Je]:[])),Je++;return We}function Se(ye,Pe,Re,ze,He){for(var We=[],Je=0,lt=0;lt<Pe.length;lt++)for(var et=Pe[lt],yt=1;yt<L;yt++)for(var _t=1;_t<z;_t++)We.push(we(ye,I(yt-1,et,_t-1),I(yt,et,_t-1),I(yt-1,et,_t),I(yt,et,_t),Re,ze,(yt+et+_t)%2,He&&He[Je]?He[Je]:[])),Je++;return We}function Me(ye,Pe,Re,ze,He){for(var We=[],Je=0,lt=0;lt<Pe.length;lt++)for(var et=Pe[lt],yt=1;yt<O;yt++)for(var _t=1;_t<L;_t++)We.push(we(ye,I(_t-1,yt-1,et),I(_t-1,yt,et),I(_t,yt-1,et),I(_t,yt,et),Re,ze,(_t+yt+et)%2,He&&He[Je]?He[Je]:[])),Je++;return We}function be(ye,Pe,Re){for(var ze=1;ze<z;ze++)for(var He=1;He<O;He++)for(var We=1;We<L;We++)oe(ye,I(We-1,He-1,ze-1),I(We-1,He-1,ze),I(We-1,He,ze-1),I(We-1,He,ze),I(We,He-1,ze-1),I(We,He-1,ze),I(We,He,ze-1),I(We,He,ze),Pe,Re,(We+He+ze)%2)}function Ie(ye,Pe,Re,ze,He,We){for(var Je=[],lt=0,et=0;et<Pe.length;et++)for(var yt=Pe[et],_t=1;_t<z;_t++)for(var xt=1;xt<O;xt++)Je.push(se(ye,yt,xt,_t,Re,ze,He[et],We&&We[lt]&&We[lt])),lt++;return Je}function Be(ye,Pe,Re,ze,He,We){for(var Je=[],lt=0,et=0;et<Pe.length;et++)for(var yt=Pe[et],_t=1;_t<L;_t++)for(var xt=1;xt<z;xt++)Je.push(se(ye,_t,yt,xt,Re,ze,He[et],We&&We[lt]&&We[lt])),lt++;return Je}function ce(ye,Pe,Re,ze,He,We){for(var Je=[],lt=0,et=0;et<Pe.length;et++)for(var yt=Pe[et],_t=1;_t<O;_t++)for(var xt=1;xt<L;xt++)Je.push(se(ye,xt,_t,yt,Re,ze,He[et],We&&We[lt]&&We[lt])),lt++;return Je}function Te(ye,Pe){for(var Re=[],ze=ye;ze<Pe;ze++)Re.push(ze);return Re}return function(){Q(),function(){for(var et=0;et<L;et++)for(var yt=0;yt<O;yt++)for(var _t=0;_t<z;_t++){var xt=I(et,yt,_t);X(n._x[xt],n._y[xt],n._z[xt],n._value[xt])}}();var ye=null;if(b&&y&&(Z(y),d=!0,be(ye,F,V),d=!1),h&&v){Z(v);for(var Pe=n.surface.pattern,Re=n.surface.count,ze=0;ze<Re;ze++){var He=Re===1?.5:ze/(Re-1),We=(1-He)*F+He*V,Je=Math.abs(We-H)>Math.abs(We-N)?[H,We]:[We,N];w=!0,be(Pe,Je[0],Je[1]),w=!1}}var lt=[[Math.min(F,N),Math.max(F,N)],[Math.min(H,V),Math.max(H,V)]];["x","y","z"].forEach(function(et){for(var yt=[],_t=0;_t<lt.length;_t++){var xt=0,at=lt[_t][0],ot=lt[_t][1],At=n.slices[et];if(At.show&&At.fill){Z(At.fill);var Ct=[],zt=[],St=[];if(At.locations.length)for(var qe=0;qe<At.locations.length;qe++){var Xe=f(At.locations[qe],et==="x"?T:et==="y"?E:C);Xe.distRatio===0?Ct.push(Xe.id):Xe.id>0&&(zt.push(Xe.id),et==="x"?St.push([Xe.distRatio,0,0]):et==="y"?St.push([0,Xe.distRatio,0]):St.push([0,0,Xe.distRatio]))}else Ct=Te(1,et==="x"?L-1:et==="y"?O-1:z-1);zt.length>0&&(yt[xt]=et==="x"?Ie(ye,zt,at,ot,St,yt[xt]):et==="y"?Be(ye,zt,at,ot,St,yt[xt]):ce(ye,zt,at,ot,St,yt[xt]),xt++),Ct.length>0&&(yt[xt]=et==="x"?fe(ye,Ct,at,ot,yt[xt]):et==="y"?Se(ye,Ct,at,ot,yt[xt]):Me(ye,Ct,at,ot,yt[xt]),xt++)}var Ve=n.caps[et];Ve.show&&Ve.fill&&(Z(Ve.fill),yt[xt]=et==="x"?fe(ye,[0,L-1],at,ot,yt[xt]):et==="y"?Se(ye,[0,O-1],at,ot,yt[xt]):Me(ye,[0,z-1],at,ot,yt[xt]),xt++)}}),S===0&&Q(),n._meshX=u,n._meshY=p,n._meshZ=c,n._meshIntensity=x,n._Xs=T,n._Ys=E,n._Zs=C}(),n}$.exports={findNearestOnAxis:f,generateIsoMeshes:r,createIsosurfaceTrace:function(n,s){var a=n.glplot.gl,u=A({gl:a}),p=new o(n,u,s.uid);return u._trace=p,p.update(s),n.glplot.add(u),p}}},82738:function($,P,t){var A=t(71828),M=t(73972),l=t(16249),_=t(1586);function m(f,o,e,i,r){var n=r("isomin"),s=r("isomax");s!=null&&n!=null&&n>s&&(o.isomin=null,o.isomax=null);var a=r("x"),u=r("y"),p=r("z"),c=r("value");a&&a.length&&u&&u.length&&p&&p.length&&c&&c.length?(M.getComponentMethod("calendars","handleTraceDefaults")(f,o,["x","y","z"],i),r("valuehoverformat"),["x","y","z"].forEach(function(x){r(x+"hoverformat");var g="caps."+x;r(g+".show")&&r(g+".fill");var h="slices."+x;r(h+".show")&&(r(h+".fill"),r(h+".locations"))}),r("spaceframe.show")&&r("spaceframe.fill"),r("surface.show")&&(r("surface.count"),r("surface.fill"),r("surface.pattern")),r("contour.show")&&(r("contour.color"),r("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(x){r(x)}),_(f,o,i,r,{prefix:"",cLetter:"c"}),o._length=null):o.visible=!1}$.exports={supplyDefaults:function(f,o,e,i){m(f,o,0,i,function(r,n){return A.coerce(f,o,l,r,n)})},supplyIsoDefaults:m}},64943:function($,P,t){$.exports={attributes:t(16249),supplyDefaults:t(82738).supplyDefaults,calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(22674).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2418:function($,P,t){var A=t(50693),M=t(12663).axisHoverFormat,l=t(5386).fF,_=t(54532),m=t(9012),f=t(1426).extendFlat;$.exports=f({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:l({editType:"calc"}),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},A("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:f({},_.contours.x.show,{}),color:_.contours.x.color,width:_.contours.x.width,editType:"calc"},lightposition:{x:f({},_.lightposition.x,{dflt:1e5}),y:f({},_.lightposition.y,{dflt:1e5}),z:f({},_.lightposition.z,{dflt:0}),editType:"calc"},lighting:f({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},_.lighting),hoverinfo:f({},m.hoverinfo,{editType:"calc"}),showlegend:f({},m.showlegend,{dflt:!1})})},82932:function($,P,t){var A=t(78803);$.exports=function(M,l){l.intensity&&A(M,l,{vals:l.intensity,containerStr:"",cLetter:"c"})}},91134:function($,P,t){var A=t(9330).gl_mesh3d,M=t(9330).delaunay_triangulate,l=t(9330).alpha_shape,_=t(9330).convex_hull,m=t(81697).parseColorScale,f=t(78614),o=t(21081).extractOpts,e=t(90060);function i(p,c,x){this.scene=p,this.uid=x,this.mesh=c,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var r=i.prototype;function n(p){for(var c=[],x=p.length,g=0;g<x;g++)c[g]=f(p[g]);return c}function s(p,c,x,g){for(var h=[],b=c.length,v=0;v<b;v++)h[v]=p.d2l(c[v],0,g)*x;return h}function a(p){for(var c=[],x=p.length,g=0;g<x;g++)c[g]=Math.round(p[g]);return c}function u(p,c){for(var x=p.length,g=0;g<x;g++)if(p[g]<=-.5||p[g]>=c-.5)return!1;return!0}r.handlePick=function(p){if(p.object===this.mesh){var c=p.index=p.data.index;p.data._cellCenter?p.traceCoordinate=p.data.dataCoordinate:p.traceCoordinate=[this.data.x[c],this.data.y[c],this.data.z[c]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[c]!==void 0?p.textLabel=x[c]:x&&(p.textLabel=x),!0}},r.update=function(p){var c=this.scene,x=c.fullSceneLayout;this.data=p;var g,h=p.x.length,b=e(s(x.xaxis,p.x,c.dataScale[0],p.xcalendar),s(x.yaxis,p.y,c.dataScale[1],p.ycalendar),s(x.zaxis,p.z,c.dataScale[2],p.zcalendar));if(p.i&&p.j&&p.k){if(p.i.length!==p.j.length||p.j.length!==p.k.length||!u(p.i,h)||!u(p.j,h)||!u(p.k,h))return;g=e(a(p.i),a(p.j),a(p.k))}else g=p.alphahull===0?_(b):p.alphahull>0?l(p.alphahull,b):function(d,S){for(var T=["x","y","z"].indexOf(d),E=[],C=S.length,L=0;L<C;L++)E[L]=[S[L][(T+1)%3],S[L][(T+2)%3]];return M(E)}(p.delaunayaxis,b);var v={positions:b,cells:g,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,contourEnable:p.contour.show,contourColor:f(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};if(p.intensity){var y=o(p);this.color="#fff";var w=p.intensitymode;v[w+"Intensity"]=p.intensity,v[w+"IntensityBounds"]=[y.min,y.max],v.colormap=m(p)}else p.vertexcolor?(this.color=p.vertexcolor[0],v.vertexColors=n(p.vertexcolor)):p.facecolor?(this.color=p.facecolor[0],v.cellColors=n(p.facecolor)):(this.color=p.color,v.meshColor=f(p.color));this.mesh.update(v)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(p,c){var x=p.glplot.gl,g=A({gl:x}),h=new i(p,g,c.uid);return g._trace=h,h.update(c),p.glplot.add(g),h}},58669:function($,P,t){var A=t(73972),M=t(71828),l=t(1586),_=t(2418);$.exports=function(m,f,o,e){function i(n,s){return M.coerce(m,f,_,n,s)}function r(n){var s=n.map(function(a){var u=i(a);return u&&M.isArrayOrTypedArray(u)?u:null});return s.every(function(a){return a&&a.length===s[0].length})&&s}r(["x","y","z"])?(r(["i","j","k"]),(!f.i||f.j&&f.k)&&(!f.j||f.k&&f.i)&&(!f.k||f.i&&f.j)?(A.getComponentMethod("calendars","handleTraceDefaults")(m,f,["x","y","z"],e),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(n){i(n)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in m?(i("intensity"),i("intensitymode"),l(m,f,e,i,{prefix:"",cLetter:"c"})):(f.showscale=!1,"facecolor"in m?i("facecolor"):"vertexcolor"in m?i("vertexcolor"):i("color",o)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),f._length=null):f.visible=!1):f.visible=!1}},21164:function($,P,t){$.exports={attributes:t(2418),supplyDefaults:t(58669),calc:t(82932),colorbar:{min:"cmin",max:"cmax"},plot:t(91134),moduleType:"trace",name:"mesh3d",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},2522:function($,P,t){var A=t(71828).extendFlat,M=t(82196),l=t(12663).axisHoverFormat,_=t(79952).P,m=t(77914),f=t(22372),o=f.INCREASING.COLOR,e=f.DECREASING.COLOR,i=M.line;function r(n){return{line:{color:A({},i.color,{dflt:n}),width:i.width,dash:_,editType:"style"},editType:"style"}}$.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:A({},i.width,{}),dash:A({},_,{}),editType:"style"},increasing:r(o),decreasing:r(e),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:A({},m.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},3485:function($,P,t){var A=t(71828),M=A._,l=t(89298),_=t(42973),m=t(50606).BADNUM;function f(e,i,r,n){return{o:e,h:i,l:r,c:n}}function o(e,i,r,n,s,a){for(var u=s.makeCalcdata(i,"open"),p=s.makeCalcdata(i,"high"),c=s.makeCalcdata(i,"low"),x=s.makeCalcdata(i,"close"),g=Array.isArray(i.text),h=Array.isArray(i.hovertext),b=!0,v=null,y=!!i.xperiodalignment,w=[],d=0;d<n.length;d++){var S=n[d],T=u[d],E=p[d],C=c[d],L=x[d];if(S!==m&&T!==m&&E!==m&&C!==m&&L!==m){L===T?v!==null&&L!==v&&(b=L>v):b=L>T,v=L;var O=a(T,E,C,L);O.pos=S,O.yc=(T+L)/2,O.i=d,O.dir=b?"increasing":"decreasing",O.x=O.pos,O.y=[C,E],y&&(O.orig_p=r[d]),g&&(O.tx=i.text[d]),h&&(O.htx=i.hovertext[d]),w.push(O)}else w.push({pos:S,empty:!0})}return i._extremes[s._id]=l.findExtremes(s,A.concat(c,p),{padded:!0}),w.length&&(w[0].t={labels:{open:M(e,"open:")+" ",high:M(e,"high:")+" ",low:M(e,"low:")+" ",close:M(e,"close:")+" "}}),w}$.exports={calc:function(e,i){var r=l.getFromId(e,i.xaxis),n=l.getFromId(e,i.yaxis),s=function(x,g,h){var b=h._minDiff;if(!b){var v,y=x._fullData,w=[];for(b=1/0,v=0;v<y.length;v++){var d=y[v];if(d.type==="ohlc"&&d.visible===!0&&d.xaxis===g._id){w.push(d);var S=g.makeCalcdata(d,"x");d._origX=S;var T=_(h,g,"x",S).vals;d._xcalc=T;var E=A.distinctVals(T).minDiff;E&&isFinite(E)&&(b=Math.min(b,E))}}for(b===1/0&&(b=1),v=0;v<w.length;v++)w[v]._minDiff=b}return b*h.tickwidth}(e,r,i),a=i._minDiff;i._minDiff=null;var u=i._origX;i._origX=null;var p=i._xcalc;i._xcalc=null;var c=o(e,i,u,p,n,f);return i._extremes[r._id]=l.findExtremes(r,p,{vpad:a/2}),c.length?(A.extendFlat(c[0].t,{wHover:a/2,tickLen:s}),c):[{t:{empty:!0}}]},calcCommon:o}},16169:function($,P,t){var A=t(71828),M=t(14555),l=t(73927),_=t(2522);function m(f,o,e,i){e(i+".line.color"),e(i+".line.width",o.line.width),e(i+".line.dash",o.line.dash)}$.exports=function(f,o,e,i){function r(n,s){return A.coerce(f,o,_,n,s)}M(f,o,r,i)?(l(f,o,i,r,{x:!0}),r("xhoverformat"),r("yhoverformat"),r("line.width"),r("line.dash"),m(0,o,r,"increasing"),m(0,o,r,"decreasing"),r("text"),r("hovertext"),r("tickwidth"),i._requestRangeslider[o.xaxis]=!0):o.visible=!1}},66449:function($,P,t){var A=t(89298),M=t(71828),l=t(30211),_=t(7901),m=t(71828).fillText,f=t(22372),o={increasing:f.INCREASING.SYMBOL,decreasing:f.DECREASING.SYMBOL};function e(n,s,a,u){var p,c,x=n.cd,g=n.xa,h=x[0].trace,b=x[0].t,v=h.type,y=v==="ohlc"?"l":"min",w=v==="ohlc"?"h":"max",d=b.bPos||0,S=function(F){return F.pos+d-s},T=b.bdPos||b.tickLen,E=b.wHover,C=Math.min(1,T/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));function L(F){var V=S(F);return l.inbox(V-E,V+E,p)}function O(F){var V=F[y],W=F[w];return V===W||l.inbox(V-a,W-a,p)}function z(F){return(L(F)+O(F))/2}p=n.maxHoverDistance-C,c=n.maxSpikeDistance-C;var G=l.getDistanceFunction(u,L,O,z);if(l.getClosest(x,G,n),n.index===!1)return null;var I=x[n.index];if(I.empty)return null;var H=h[I.dir],N=H.line.color;return _.opacity(N)&&H.line.width?n.color=N:n.color=H.fillcolor,n.x0=g.c2p(I.pos+d-T,!0),n.x1=g.c2p(I.pos+d+T,!0),n.xLabelVal=I.orig_p!==void 0?I.orig_p:I.pos,n.spikeDistance=z(I)*c/p,n.xSpike=g.c2p(I.pos,!0),n}function i(n,s,a,u){var p=n.cd,c=n.ya,x=p[0].trace,g=p[0].t,h=[],b=e(n,s,a,u);if(!b)return[];var v=p[b.index].hi||x.hoverinfo,y=v.split("+");if(v!=="all"&&y.indexOf("y")===-1)return[];for(var w=["high","open","close","low"],d={},S=0;S<w.length;S++){var T,E=w[S],C=x[E][b.index],L=c.c2p(C,!0);C in d?(T=d[C]).yLabel+="<br>"+g.labels[E]+A.hoverLabelText(c,C,x.yhoverformat):((T=M.extendFlat({},b)).y0=T.y1=L,T.yLabelVal=C,T.yLabel=g.labels[E]+A.hoverLabelText(c,C,x.yhoverformat),T.name="",h.push(T),d[C]=T)}return h}function r(n,s,a,u){var p=n.cd,c=n.ya,x=p[0].trace,g=p[0].t,h=e(n,s,a,u);if(!h)return[];var b=p[h.index],v=h.index=b.i,y=b.dir;function w(O){return g.labels[O]+A.hoverLabelText(c,x[O][v],x.yhoverformat)}var d=b.hi||x.hoverinfo,S=d.split("+"),T=d==="all",E=T||S.indexOf("y")!==-1,C=T||S.indexOf("text")!==-1,L=E?[w("open"),w("high"),w("low"),w("close")+"  "+o[y]]:[];return C&&m(b,x,L),h.extraText=L.join("<br>"),h.y0=h.y1=c.c2p(b.yc,!0),[h]}$.exports={hoverPoints:function(n,s,a,u){return n.cd[0].trace.hoverlabel.split?i(n,s,a,u):r(n,s,a,u)},hoverSplit:i,hoverOnPoints:r}},54186:function($,P,t){$.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(93612),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(2522),supplyDefaults:t(16169),calc:t(3485).calc,plot:t(72314),style:t(53101),hoverPoints:t(66449).hoverPoints,selectPoints:t(67324)}},14555:function($,P,t){var A=t(73972),M=t(71828);$.exports=function(l,_,m,f){var o=m("x"),e=m("open"),i=m("high"),r=m("low"),n=m("close");if(m("hoverlabel.split"),A.getComponentMethod("calendars","handleTraceDefaults")(l,_,["x"],f),e&&i&&r&&n){var s=Math.min(e.length,i.length,r.length,n.length);return o&&(s=Math.min(s,M.minRowLength(o))),_._length=s,s}}},72314:function($,P,t){var A=t(39898),M=t(71828);$.exports=function(l,_,m,f){var o=_.yaxis,e=_.xaxis,i=!!e.rangebreaks;M.makeTraceGroups(f,m,"trace ohlc").each(function(r){var n=A.select(this),s=r[0],a=s.t;if(s.trace.visible!==!0||a.empty)n.remove();else{var u=a.tickLen,p=n.selectAll("path").data(M.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(c){if(c.empty)return"M0,0Z";var x=e.c2p(c.pos-u,!0),g=e.c2p(c.pos+u,!0),h=i?(x+g)/2:e.c2p(c.pos,!0);return"M"+x+","+o.c2p(c.o,!0)+"H"+h+"M"+h+","+o.c2p(c.h,!0)+"V"+o.c2p(c.l,!0)+"M"+g+","+o.c2p(c.c,!0)+"H"+h})}})}},67324:function($){$.exports=function(P,t){var A,M=P.cd,l=P.xaxis,_=P.yaxis,m=[],f=M[0].t.bPos||0;if(t===!1)for(A=0;A<M.length;A++)M[A].selected=0;else for(A=0;A<M.length;A++){var o=M[A];t.contains([l.c2p(o.pos+f),_.c2p(o.yc)],null,o.i,P)?(m.push({pointNumber:o.i,x:l.c2d(o.pos),y:_.c2d(o.yc)}),o.selected=1):o.selected=0}return m}},53101:function($,P,t){var A=t(39898),M=t(91424),l=t(7901);$.exports=function(_,m,f){var o=f||A.select(_).selectAll("g.ohlclayer").selectAll("g.trace");o.style("opacity",function(e){return e[0].trace.opacity}),o.each(function(e){var i=e[0].trace;A.select(this).selectAll("path").each(function(r){if(!r.empty){var n=i[r.dir].line;A.select(this).style("fill","none").call(l.stroke,n.color).call(M.dashLine,n.dash,n.width).style("opacity",i.selectedpoints&&!r.selected?.3:1)}})})}},99506:function($,P,t){var A=t(1426).extendFlat,M=t(9012),l=t(41940),_=t(50693),m=t(5386).fF,f=t(27670).Y,o=A({editType:"calc"},_("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:m({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});$.exports={domain:f({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:A({},M.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:m({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:l({editType:"calc"}),tickfont:l({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:o,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},27677:function($,P,t){var A=t(27659).a0,M=t(45784),l="parcats";P.name=l,P.plot=function(_,m,f,o){var e=A(_.calcdata,l);if(e.length){var i=e[0];M(_,i,f,o)}},P.clean=function(_,m,f,o){var e=o._has&&o._has("parcats"),i=m._has&&m._has("parcats");e&&!i&&o._paperdiv.selectAll(".parcats").remove()}},28699:function($,P,t){var A=t(28984).wrap,M=t(52075).hasColorscale,l=t(78803),_=t(75744),m=t(91424),f=t(71828),o=t(92770);function e(n,s,a){n.valueInds.push(s),n.count+=a}function i(n,s,a){return{categoryInds:n,color:s,rawColor:a,valueInds:[],count:0}}function r(n,s,a){n.valueInds.push(s),n.count+=a}$.exports=function(n,s){var a=f.filterVisible(s.dimensions);if(a.length===0)return[];var u,p,c,x=a.map(function(W){var te;if(W.categoryorder==="trace")te=null;else if(W.categoryorder==="array")te=W.categoryarray;else{te=_(W.values);for(var Q=!0,X=0;X<te.length;X++)if(!o(te[X])){Q=!1;break}te.sort(Q?f.sorterAsc:void 0),W.categoryorder==="category descending"&&(te=te.reverse())}return function(q,Z){Z=Z==null?[]:Z.map(function(xe){return xe});var J={},ne={},re=[];Z.forEach(function(xe,me){J[xe]=0,ne[xe]=me});for(var ae=0;ae<q.length;ae++){var ue,he=q[ae];J[he]===void 0?(J[he]=1,ue=Z.push(he)-1,ne[he]=ue):(J[he]++,ue=ne[he]),re.push(ue)}var de=Z.map(function(xe){return J[xe]});return{uniqueValues:Z,uniqueCounts:de,inds:re}}(W.values,te)});u=f.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(W){var te,Q=W.map(function(X){return X.displayindex});if(function(X){for(var q=new Array(X.length),Z=0;Z<X.length;Z++){if(X[Z]<0||X[Z]>=X.length||q[X[Z]]!==void 0)return!1;q[X[Z]]=!0}return!0}(Q))for(te=0;te<W.length;te++)W[te]._displayindex=W[te].displayindex;else for(te=0;te<W.length;te++)W[te]._displayindex=te}(a),a.forEach(function(W,te){(function(Q,X){Q._categoryarray=X.uniqueValues,Q.ticktext===null||Q.ticktext===void 0?Q._ticktext=[]:Q._ticktext=Q.ticktext.slice();for(var q=Q._ticktext.length;q<X.uniqueValues.length;q++)Q._ticktext.push(X.uniqueValues[q])})(W,x[te])});var g,h=s.line;h?(M(s,"line")&&l(n,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),g=m.tryColorscale(h)):g=f.identity;var b,v,y,w,d,S=a[0].values.length,T={},E=x.map(function(W){return W.inds});for(c=0,b=0;b<S;b++){var C=[];for(v=0;v<E.length;v++)C.push(E[v][b]);p=u[b%u.length],c+=p;var L=(y=b,w=void 0,d=void 0,f.isArrayOrTypedArray(h.color)?d=w=h.color[y%h.color.length]:w=h.color,{color:g(w),rawColor:d}),O=C+"-"+L.rawColor;T[O]===void 0&&(T[O]=i(C,L.color,L.rawColor)),r(T[O],b,p)}var z,G=a.map(function(W,te){return function(Q,X,q,Z,J){return{dimensionInd:Q,containerInd:X,displayInd:q,dimensionLabel:Z,count:J,categories:[],dragX:null}}(te,W._index,W._displayindex,W.label,c)});for(b=0;b<S;b++)for(p=u[b%u.length],v=0;v<G.length;v++){var I=G[v].containerInd,H=x[v].inds[b],N=G[v].categories;if(N[H]===void 0){var F=s.dimensions[I]._categoryarray[H],V=s.dimensions[I]._ticktext[H];N[H]={dimensionInd:v,categoryInd:z=H,categoryValue:F,displayInd:z,categoryLabel:V,valueInds:[],count:0,dragY:null}}e(N[H],b,p)}return A(function(W,te,Q){var X=W.map(function(q){return q.categories.length}).reduce(function(q,Z){return Math.max(q,Z)});return{dimensions:W,paths:te,trace:void 0,maxCats:X,count:Q}}(G,T,c))}},14647:function($,P,t){var A=t(71828),M=t(52075).hasColorscale,l=t(1586),_=t(27670).c,m=t(85501),f=t(99506),o=t(94397);function e(i,r){function n(g,h){return A.coerce(i,r,f.dimensions,g,h)}var s=n("values"),a=n("visible");if(s&&s.length||(a=r.visible=!1),a){n("label"),n("displayindex",r._index);var u,p=i.categoryarray,c=Array.isArray(p)&&p.length>0;c&&(u="array");var x=n("categoryorder",u);x==="array"?(n("categoryarray"),n("ticktext")):(delete i.categoryarray,delete i.ticktext),c||x!=="array"||(r.categoryorder="trace")}}$.exports=function(i,r,n,s){function a(g,h){return A.coerce(i,r,f,g,h)}var u=m(i,r,{name:"dimensions",handleItemDefaults:e}),p=function(g,h,b,v,y){y("line.shape"),y("line.hovertemplate");var w=y("line.color",v.colorway[0]);if(M(g,"line")&&A.isArrayOrTypedArray(w)){if(w.length)return y("line.colorscale"),l(g,h,v,y,{prefix:"line.",cLetter:"c"}),w.length;h.line.color=b}return 1/0}(i,r,n,s,a);_(r,s,a),Array.isArray(u)&&u.length||(r.visible=!1),o(r,u,"values",p),a("hoveron"),a("hovertemplate"),a("arrangement"),a("bundlecolors"),a("sortpaths"),a("counts");var c={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};A.coerceFont(a,"labelfont",c);var x={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};A.coerceFont(a,"tickfont",x)}},94873:function($,P,t){$.exports={attributes:t(99506),supplyDefaults:t(14647),calc:t(28699),plot:t(45784),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(27677),categories:["noOpacity"],meta:{}}},45460:function($,P,t){var A=t(39898),M=t(81684).k4,l=t(72391),_=t(30211),m=t(71828),f=m.strTranslate,o=t(91424),e=t(84267),i=t(63893);function r(Q,X,q,Z){var J=X._context.staticPlot,ne=Q.map(N.bind(0,X,q)),re=Z.selectAll("g.parcatslayer").data([null]);re.enter().append("g").attr("class","parcatslayer").style("pointer-events",J?"none":"all");var ae=re.selectAll("g.trace.parcats").data(ne,n),ue=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(se){return f(se.x,se.y)}),ue.append("g").attr("class","paths");var he=ae.select("g.paths").selectAll("path.path").data(function(se){return se.paths},n);he.attr("fill",function(se){return se.model.color});var de=he.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(se){return se.model.color}).attr("fill-opacity",0);h(de),he.attr("d",function(se){return se.svgD}),de.empty()||he.sort(a),he.exit().remove(),he.on("mouseover",u).on("mouseout",p).on("click",g),ue.append("g").attr("class","dimensions");var xe=ae.select("g.dimensions").selectAll("g.dimension").data(function(se){return se.dimensions},n);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(se){return f(se.x,0)}),xe.exit().remove();var me=xe.selectAll("g.category").data(function(se){return se.categories},n),ve=me.enter().append("g").attr("class","category");me.attr("transform",function(se){return f(0,se.y)}),ve.append("rect").attr("class","catrect").attr("pointer-events","none"),me.select("rect.catrect").attr("fill","none").attr("width",function(se){return se.width}).attr("height",function(se){return se.height}),v(ve);var Le=me.selectAll("rect.bandrect").data(function(se){return se.bands},n);Le.each(function(){m.raiseToTop(this)}),Le.attr("fill",function(se){return se.color});var Ae=Le.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);Le.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}).attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":se.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(Ae),Le.exit().remove(),ve.append("text").attr("class","catlabel").attr("pointer-events","none");var we=X._fullLayout.paper_bgcolor;me.select("text.catlabel").attr("text-anchor",function(se){return s(se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(we)).style("fill","rgb(0, 0, 0)").attr("x",function(se){return s(se)?se.width+5:-5}).attr("y",function(se){return se.height/2}).text(function(se){return se.model.categoryLabel}).each(function(se){o.font(A.select(this),se.parcatsViewModel.categorylabelfont),i.convertToTspans(A.select(this),X)}),ve.append("text").attr("class","dimlabel"),me.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(se){return se.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(se){return se.width/2}).attr("y",-5).text(function(se,oe){return oe===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null}).each(function(se){o.font(A.select(this),se.parcatsViewModel.labelfont)}),me.selectAll("rect.bandrect").on("mouseover",E).on("mouseout",C),me.exit().remove(),xe.call(A.behavior.drag().origin(function(se){return{x:se.x,y:0}}).on("dragstart",L).on("drag",O).on("dragend",z)),ae.each(function(se){se.traceSelection=A.select(this),se.pathSelection=A.select(this).selectAll("g.paths").selectAll("path.path"),se.dimensionSelection=A.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}function n(Q){return Q.key}function s(Q){var X=Q.parcatsViewModel.dimensions.length,q=Q.parcatsViewModel.dimensions[X-1].model.dimensionInd;return Q.model.dimensionInd===q}function a(Q,X){return Q.model.rawColor>X.model.rawColor?1:Q.model.rawColor<X.model.rawColor?-1:0}function u(Q){if(!Q.parcatsViewModel.dragDimension&&Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){m.raiseToTop(this),b(A.select(this));var X=c(Q),q=x(Q);if(Q.parcatsViewModel.graphDiv.emit("plotly_hover",{points:X,event:A.event,constraints:q}),Q.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z,J,ne,re=A.mouse(this)[0],ae=Q.parcatsViewModel.graphDiv,ue=Q.parcatsViewModel.trace,he=ae._fullLayout,de=he._paperdiv.node().getBoundingClientRect(),xe=Q.parcatsViewModel.graphDiv.getBoundingClientRect();for(ne=0;ne<Q.leftXs.length-1;ne++)if(Q.leftXs[ne]+Q.dimWidths[ne]-2<=re&&re<=Q.leftXs[ne+1]+2){var me=Q.parcatsViewModel.dimensions[ne],ve=Q.parcatsViewModel.dimensions[ne+1];Z=(me.x+me.width+ve.x)/2,J=(Q.topYs[ne]+Q.topYs[ne+1]+Q.height)/2;break}var Le=Q.parcatsViewModel.x+Z,Ae=Q.parcatsViewModel.y+J,we=e.mostReadable(Q.model.color,["black","white"]),se=Q.model.count,oe=se/Q.parcatsViewModel.model.count,fe={countLabel:se,probabilityLabel:oe.toFixed(3)},Se=[];Q.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Se.push(["Count:",fe.countLabel].join(" ")),Q.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Se.push(["P:",fe.probabilityLabel].join(" "));var Me=Se.join("<br>"),be=A.mouse(ae)[0];_.loneHover({trace:ue,x:Le-de.left+xe.left,y:Ae-de.top+xe.top,text:Me,color:Q.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:we,idealAlign:be<Le?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:fe,eventData:[{data:ue._input,fullData:ue,count:se,probability:oe}]},{container:he._hoverlayer.node(),outerContainer:he._paper.node(),gd:ae})}}}function p(Q){if(!Q.parcatsViewModel.dragDimension&&(h(A.select(this)),_.loneUnhover(Q.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Q.parcatsViewModel.pathSelection.sort(a),Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var X=c(Q),q=x(Q);Q.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:X,event:A.event,constraints:q})}}function c(Q){for(var X=[],q=G(Q.parcatsViewModel),Z=0;Z<Q.model.valueInds.length;Z++){var J=Q.model.valueInds[Z];X.push({curveNumber:q,pointNumber:J})}return X}function x(Q){for(var X={},q=Q.parcatsViewModel.model.dimensions,Z=0;Z<q.length;Z++){var J=q[Z],ne=J.categories[Q.model.categoryInds[Z]];X[J.containerInd]=ne.categoryValue}return Q.model.rawColor!==void 0&&(X.color=Q.model.rawColor),X}function g(Q){if(Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var X=c(Q),q=x(Q);Q.parcatsViewModel.graphDiv.emit("plotly_click",{points:X,event:A.event,constraints:q})}}function h(Q){Q.attr("fill",function(X){return X.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function b(Q){Q.attr("fill-opacity",.8).attr("stroke",function(X){return e.mostReadable(X.model.color,["black","white"])}).attr("stroke-width",.3)}function v(Q){Q.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function y(Q){Q.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function w(Q){var X=Q.parcatsViewModel.pathSelection,q=Q.categoryViewModel.model.dimensionInd,Z=Q.categoryViewModel.model.categoryInd;return X.filter(function(J){return J.model.categoryInds[q]===Z&&J.model.color===Q.color})}function d(Q,X,q){var Z=A.select(Q).datum(),J=Z.categoryViewModel.model,ne=Z.parcatsViewModel.graphDiv,re=A.select(Q.parentNode).selectAll("rect.bandrect"),ae=[];re.each(function(he){w(he).each(function(de){Array.prototype.push.apply(ae,c(de))})});var ue={};ue[J.dimensionInd]=J.categoryValue,ne.emit(X,{points:ae,event:q,constraints:ue})}function S(Q,X,q){var Z=A.select(Q).datum(),J=Z.categoryViewModel.model,ne=Z.parcatsViewModel.graphDiv,re=w(Z),ae=[];re.each(function(he){Array.prototype.push.apply(ae,c(he))});var ue={};ue[J.dimensionInd]=J.categoryValue,Z.rawColor!==void 0&&(ue.color=Z.rawColor),ne.emit(X,{points:ae,event:q,constraints:ue})}function T(Q,X,q){Q._fullLayout._calcInverseTransform(Q);var Z,J,ne=Q._fullLayout._invScaleX,re=Q._fullLayout._invScaleY,ae=A.select(q.parentNode).select("rect.catrect"),ue=ae.node().getBoundingClientRect(),he=ae.datum(),de=he.parcatsViewModel,xe=de.model.dimensions[he.model.dimensionInd],me=de.trace,ve=ue.top+ue.height/2;de.dimensions.length>1&&xe.displayInd===de.dimensions.length-1?(Z=ue.left,J="left"):(Z=ue.left+ue.width,J="right");var Le=he.model.count,Ae=he.model.categoryLabel,we=Le/he.parcatsViewModel.model.count,se={countLabel:Le,categoryLabel:Ae,probabilityLabel:we.toFixed(3)},oe=[];he.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&oe.push(["Count:",se.countLabel].join(" ")),he.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&oe.push(["P("+se.categoryLabel+"):",se.probabilityLabel].join(" "));var fe=oe.join("<br>");return{trace:me,x:ne*(Z-X.left),y:re*(ve-X.top),text:fe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:J,hovertemplate:me.hovertemplate,hovertemplateLabels:se,eventData:[{data:me._input,fullData:me,count:Le,category:Ae,probability:we}]}}function E(Q){if(!Q.parcatsViewModel.dragDimension&&Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){if(A.mouse(this)[1]<-1)return;var X,q=Q.parcatsViewModel.graphDiv,Z=q._fullLayout,J=Z._paperdiv.node().getBoundingClientRect(),ne=Q.parcatsViewModel.hoveron,re=this;ne==="color"?(function(ae){var ue=A.select(ae).datum(),he=w(ue);b(he),he.each(function(){m.raiseToTop(this)}),A.select(ae.parentNode).selectAll("rect.bandrect").filter(function(de){return de.color===ue.color}).each(function(){m.raiseToTop(this),A.select(this).attr("stroke","black").attr("stroke-width",1.5)})}(re),S(re,"plotly_hover",A.event)):(function(ae){A.select(ae.parentNode).selectAll("rect.bandrect").each(function(ue){var he=w(ue);b(he),he.each(function(){m.raiseToTop(this)})}),A.select(ae.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(re),d(re,"plotly_hover",A.event)),Q.parcatsViewModel.hoverinfoItems.indexOf("none")===-1&&(ne==="category"?X=T(q,J,re):ne==="color"?X=function(ae,ue,he){ae._fullLayout._calcInverseTransform(ae);var de,xe,me=ae._fullLayout._invScaleX,ve=ae._fullLayout._invScaleY,Le=he.getBoundingClientRect(),Ae=A.select(he).datum(),we=Ae.categoryViewModel,se=we.parcatsViewModel,oe=se.model.dimensions[we.model.dimensionInd],fe=se.trace,Se=Le.y+Le.height/2;se.dimensions.length>1&&oe.displayInd===se.dimensions.length-1?(de=Le.left,xe="left"):(de=Le.left+Le.width,xe="right");var Me=we.model.categoryLabel,be=Ae.parcatsViewModel.model.count,Ie=0;Ae.categoryViewModel.bands.forEach(function(Je){Je.color===Ae.color&&(Ie+=Je.count)});var Be=we.model.count,ce=0;se.pathSelection.each(function(Je){Je.model.color===Ae.color&&(ce+=Je.model.count)});var Te=Ie/be,ye=Ie/ce,Pe=Ie/Be,Re={countLabel:be,categoryLabel:Me,probabilityLabel:Te.toFixed(3)},ze=[];we.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&ze.push(["Count:",Re.countLabel].join(" ")),we.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(ze.push("P(color  "+Me+"): "+Re.probabilityLabel),ze.push("P("+Me+" | color): "+ye.toFixed(3)),ze.push("P(color | "+Me+"): "+Pe.toFixed(3)));var He=ze.join("<br>"),We=e.mostReadable(Ae.color,["black","white"]);return{trace:fe,x:me*(de-ue.left),y:ve*(Se-ue.top),text:He,color:Ae.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:We,fontSize:10,idealAlign:xe,hovertemplate:fe.hovertemplate,hovertemplateLabels:Re,eventData:[{data:fe._input,fullData:fe,category:Me,count:be,probability:Te,categorycount:Be,colorcount:ce,bandcolorcount:Ie}]}}(q,J,re):ne==="dimension"&&(X=function(ae,ue,he){var de=[];return A.select(he.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){de.push(T(ae,ue,this))}),de}(q,J,re)),X&&_.loneHover(X,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:q}))}}function C(Q){var X=Q.parcatsViewModel;X.dragDimension||(h(X.pathSelection),v(X.dimensionSelection.selectAll("g.category")),y(X.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),_.loneUnhover(X.graphDiv._fullLayout._hoverlayer.node()),X.pathSelection.sort(a),X.hoverinfoItems.indexOf("skip")!==-1)||(Q.parcatsViewModel.hoveron==="color"?S(this,"plotly_unhover",A.event):d(this,"plotly_unhover",A.event))}function L(Q){Q.parcatsViewModel.arrangement!=="fixed"&&(Q.dragDimensionDisplayInd=Q.model.displayInd,Q.initialDragDimensionDisplayInds=Q.parcatsViewModel.model.dimensions.map(function(X){return X.displayInd}),Q.dragHasMoved=!1,Q.dragCategoryDisplayInd=null,A.select(this).selectAll("g.category").select("rect.catrect").each(function(X){var q=A.mouse(this)[0],Z=A.mouse(this)[1];-2<=q&&q<=X.width+2&&-2<=Z&&Z<=X.height+2&&(Q.dragCategoryDisplayInd=X.model.displayInd,Q.initialDragCategoryDisplayInds=Q.model.categories.map(function(J){return J.displayInd}),X.model.dragY=X.y,m.raiseToTop(this.parentNode),A.select(this.parentNode).selectAll("rect.bandrect").each(function(J){J.y<Z&&Z<=J.y+J.height&&(Q.potentialClickBand=this)}))}),Q.parcatsViewModel.dragDimension=Q,_.loneUnhover(Q.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function O(Q){if(Q.parcatsViewModel.arrangement!=="fixed"&&(Q.dragHasMoved=!0,Q.dragDimensionDisplayInd!==null)){var X=Q.dragDimensionDisplayInd,q=X-1,Z=X+1,J=Q.parcatsViewModel.dimensions[X];if(Q.dragCategoryDisplayInd!==null){var ne=J.categories[Q.dragCategoryDisplayInd];ne.model.dragY+=A.event.dy;var re=ne.model.dragY,ae=ne.model.displayInd,ue=J.categories,he=ue[ae-1],de=ue[ae+1];he!==void 0&&re<he.y+he.height/2&&(ne.model.displayInd=he.model.displayInd,he.model.displayInd=ae),de!==void 0&&re+ne.height>de.y+de.height/2&&(ne.model.displayInd=de.model.displayInd,de.model.displayInd=ae),Q.dragCategoryDisplayInd=ne.model.displayInd}if(Q.dragCategoryDisplayInd===null||Q.parcatsViewModel.arrangement==="freeform"){J.model.dragX=A.event.x;var xe=Q.parcatsViewModel.dimensions[q],me=Q.parcatsViewModel.dimensions[Z];xe!==void 0&&J.model.dragX<xe.x+xe.width&&(J.model.displayInd=xe.model.displayInd,xe.model.displayInd=X),me!==void 0&&J.model.dragX+J.width>me.x&&(J.model.displayInd=me.model.displayInd,me.model.displayInd=Q.dragDimensionDisplayInd),Q.dragDimensionDisplayInd=J.model.displayInd}W(Q.parcatsViewModel),V(Q.parcatsViewModel),H(Q.parcatsViewModel),I(Q.parcatsViewModel)}}function z(Q){if(Q.parcatsViewModel.arrangement!=="fixed"&&Q.dragDimensionDisplayInd!==null){A.select(this).selectAll("text").attr("font-weight","normal");var X={},q=G(Q.parcatsViewModel),Z=Q.parcatsViewModel.model.dimensions.map(function(de){return de.displayInd}),J=Q.initialDragDimensionDisplayInds.some(function(de,xe){return de!==Z[xe]});J&&Z.forEach(function(de,xe){var me=Q.parcatsViewModel.model.dimensions[xe].containerInd;X["dimensions["+me+"].displayindex"]=de});var ne=!1;if(Q.dragCategoryDisplayInd!==null){var re=Q.model.categories.map(function(de){return de.displayInd});if(ne=Q.initialDragCategoryDisplayInds.some(function(de,xe){return de!==re[xe]})){var ae=Q.model.categories.slice().sort(function(de,xe){return de.displayInd-xe.displayInd}),ue=ae.map(function(de){return de.categoryValue}),he=ae.map(function(de){return de.categoryLabel});X["dimensions["+Q.model.containerInd+"].categoryarray"]=[ue],X["dimensions["+Q.model.containerInd+"].ticktext"]=[he],X["dimensions["+Q.model.containerInd+"].categoryorder"]="array"}}Q.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!Q.dragHasMoved&&Q.potentialClickBand&&(Q.parcatsViewModel.hoveron==="color"?S(Q.potentialClickBand,"plotly_click",A.event.sourceEvent):d(Q.potentialClickBand,"plotly_click",A.event.sourceEvent)),Q.model.dragX=null,Q.dragCategoryDisplayInd!==null&&(Q.parcatsViewModel.dimensions[Q.dragDimensionDisplayInd].categories[Q.dragCategoryDisplayInd].model.dragY=null,Q.dragCategoryDisplayInd=null),Q.dragDimensionDisplayInd=null,Q.parcatsViewModel.dragDimension=null,Q.dragHasMoved=null,Q.potentialClickBand=null,W(Q.parcatsViewModel),V(Q.parcatsViewModel),A.transition().duration(300).ease("cubic-in-out").each(function(){H(Q.parcatsViewModel,!0),I(Q.parcatsViewModel,!0)}).each("end",function(){(J||ne)&&l.restyle(Q.parcatsViewModel.graphDiv,X,[q])})}}function G(Q){for(var X,q=Q.graphDiv._fullData,Z=0;Z<q.length;Z++)if(Q.key===q[Z].uid){X=Z;break}return X}function I(Q,X){var q;X===void 0&&(X=!1),Q.pathSelection.data(function(Z){return Z.paths},n),(q=Q.pathSelection,X?q.transition():q).attr("d",function(Z){return Z.svgD})}function H(Q,X){function q(re){return X?re.transition():re}X===void 0&&(X=!1),Q.dimensionSelection.data(function(re){return re.dimensions},n);var Z=Q.dimensionSelection.selectAll("g.category").data(function(re){return re.categories},n);q(Q.dimensionSelection).attr("transform",function(re){return f(re.x,0)}),q(Z).attr("transform",function(re){return f(0,re.y)}),Z.select(".dimlabel").text(function(re,ae){return ae===0?re.parcatsViewModel.model.dimensions[re.model.dimensionInd].dimensionLabel:null}),Z.select(".catlabel").attr("text-anchor",function(re){return s(re)?"start":"end"}).attr("x",function(re){return s(re)?re.width+5:-5}).each(function(re){var ae,ue;s(re)?(ae=re.width+5,ue="start"):(ae=-5,ue="end"),A.select(this).selectAll("tspan").attr("x",ae).attr("text-anchor",ue)});var J=Z.selectAll("rect.bandrect").data(function(re){return re.bands},n),ne=J.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(re){return re.color}).attr("fill-opacity",0);J.attr("fill",function(re){return re.color}).attr("width",function(re){return re.width}).attr("height",function(re){return re.height}).attr("y",function(re){return re.y}),y(ne),J.each(function(){m.raiseToTop(this)}),J.exit().remove()}function N(Q,X,q){var Z,J=q[0],ne=X.margin||{l:80,r:80,t:100,b:80},re=J.trace,ae=re.domain,ue=X.width,he=X.height,de=Math.floor(ue*(ae.x[1]-ae.x[0])),xe=Math.floor(he*(ae.y[1]-ae.y[0])),me=ae.x[0]*ue+ne.l,ve=X.height-ae.y[1]*X.height+ne.t,Le=re.line.shape;Z=re.hoverinfo==="all"?["count","probability"]:(re.hoverinfo||"").split("+");var Ae={trace:re,key:re.uid,model:J,x:me,y:ve,width:de,height:xe,hoveron:re.hoveron,hoverinfoItems:Z,arrangement:re.arrangement,bundlecolors:re.bundlecolors,sortpaths:re.sortpaths,labelfont:re.labelfont,categorylabelfont:re.tickfont,pathShape:Le,dragDimension:null,margin:ne,paths:[],dimensions:[],graphDiv:Q,traceSelection:null,pathSelection:null,dimensionSelection:null};return J.dimensions&&(W(Ae),V(Ae)),Ae}function F(Q,X,q,Z,J){var ne,re,ae=[],ue=[];for(re=0;re<q.length-1;re++)ne=M(q[re]+Q[re],Q[re+1]),ae.push(ne(J)),ue.push(ne(1-J));var he="M "+Q[0]+","+X[0];for(he+="l"+q[0]+",0 ",re=1;re<q.length;re++)he+="C"+ae[re-1]+","+X[re-1]+" "+ue[re-1]+","+X[re]+" "+Q[re]+","+X[re],he+="l"+q[re]+",0 ";for(he+="l0,"+Z+" ",he+="l -"+q[q.length-1]+",0 ",re=q.length-2;re>=0;re--)he+="C"+ue[re]+","+(X[re+1]+Z)+" "+ae[re]+","+(X[re]+Z)+" "+(Q[re]+q[re])+","+(X[re]+Z),he+="l-"+q[re]+",0 ";return he+"Z"}function V(Q){var X=Q.dimensions,q=Q.model,Z=X.map(function(Re){return Re.categories.map(function(ze){return ze.y})}),J=Q.model.dimensions.map(function(Re){return Re.categories.map(function(ze){return ze.displayInd})}),ne=Q.model.dimensions.map(function(Re){return Re.displayInd}),re=Q.dimensions.map(function(Re){return Re.model.dimensionInd}),ae=X.map(function(Re){return Re.x}),ue=X.map(function(Re){return Re.width}),he=[];for(var de in q.paths)q.paths.hasOwnProperty(de)&&he.push(q.paths[de]);function xe(Re){var ze=Re.categoryInds.map(function(He,We){return J[We][He]});return re.map(function(He){return ze[He]})}he.sort(function(Re,ze){var He=xe(Re),We=xe(ze);return Q.sortpaths==="backward"&&(He.reverse(),We.reverse()),He.push(Re.valueInds[0]),We.push(ze.valueInds[0]),Q.bundlecolors&&(He.unshift(Re.rawColor),We.unshift(ze.rawColor)),He<We?-1:He>We?1:0});for(var me=new Array(he.length),ve=X[0].model.count,Le=X[0].categories.map(function(Re){return Re.height}).reduce(function(Re,ze){return Re+ze}),Ae=0;Ae<he.length;Ae++){var we,se=he[Ae];we=ve>0?Le*(se.count/ve):0;for(var oe,fe=new Array(Z.length),Se=0;Se<se.categoryInds.length;Se++){var Me=se.categoryInds[Se],be=J[Se][Me],Ie=ne[Se];fe[Ie]=Z[Ie][be],Z[Ie][be]+=we;var Be=Q.dimensions[Ie].categories[be],ce=Be.bands.length,Te=Be.bands[ce-1];if(Te===void 0||se.rawColor!==Te.rawColor){var ye=Te===void 0?0:Te.y+Te.height;Be.bands.push({key:ye,color:se.color,rawColor:se.rawColor,height:we,width:Be.width,count:se.count,y:ye,categoryViewModel:Be,parcatsViewModel:Q})}else{var Pe=Be.bands[ce-1];Pe.height+=we,Pe.count+=se.count}}oe=Q.pathShape==="hspline"?F(ae,fe,ue,we,.5):F(ae,fe,ue,we,0),me[Ae]={key:se.valueInds[0],model:se,height:we,leftXs:ae,topYs:fe,dimWidths:ue,svgD:oe,parcatsViewModel:Q}}Q.paths=me}function W(Q){var X=Q.model.dimensions.map(function(re){return{displayInd:re.displayInd,dimensionInd:re.dimensionInd}});X.sort(function(re,ae){return re.displayInd-ae.displayInd});var q=[];for(var Z in X){var J=X[Z].dimensionInd,ne=Q.model.dimensions[J];q.push(te(Q,ne))}Q.dimensions=q}function te(Q,X){var q,Z=Q.model.dimensions.length,J=X.displayInd;q=40+(Z>1?(Q.width-80-16)/(Z-1):0)*J;var ne,re,ae,ue,he,de=[],xe=Q.model.maxCats,me=X.categories.length,ve=X.count,Le=Q.height-8*(xe-1),Ae=8*(xe-me)/2,we=X.categories.map(function(se){return{displayInd:se.displayInd,categoryInd:se.categoryInd}});for(we.sort(function(se,oe){return se.displayInd-oe.displayInd}),he=0;he<me;he++)ue=we[he].categoryInd,re=X.categories[ue],ne=ve>0?re.count/ve*Le:0,ae={key:re.valueInds[0],model:re,width:16,height:ne,y:re.dragY!==null?re.dragY:Ae,bands:[],parcatsViewModel:Q},Ae=Ae+ne+8,de.push(ae);return{key:X.dimensionInd,x:X.dragX!==null?X.dragX:q,y:0,width:16,model:X,categories:de,parcatsViewModel:Q,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}$.exports=function(Q,X,q,Z){r(q,Q,Z,X)}},45784:function($,P,t){var A=t(45460);$.exports=function(M,l,_,m){var f=M._fullLayout,o=f._paper,e=f._size;A(M,o,l,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},_,m)}},73362:function($,P,t){var A=t(50693),M=t(13838),l=t(41940),_=t(27670).Y,m=t(1426).extendFlat,f=t(44467).templatedArray;$.exports={domain:_({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:l({editType:"plot"}),tickfont:l({editType:"plot"}),rangefont:l({editType:"plot"}),dimensions:f("dimension",{label:{valType:"string",editType:"plot"},tickvals:m({},M.tickvals,{editType:"plot"}),ticktext:m({},M.ticktext,{editType:"plot"}),tickformat:m({},M.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:m({editType:"calc"},A("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},57920:function($,P,t){var A=t(25706),M=t(39898),l=t(28984).keyFun,_=t(28984).repeat,m=t(71828).sorterAsc,f=t(71828).strTranslate,o=A.bar.snapRatio;function e(T,E){return T*(1-o)+E*o}var i=A.bar.snapClose;function r(T,E){return T*(1-i)+E*i}function n(T,E,C,L){if(function(te,Q){for(var X=0;X<Q.length;X++)if(te>=Q[X][0]&&te<=Q[X][1])return!0;return!1}(C,L))return C;var O=T?-1:1,z=0,G=E.length-1;if(O<0){var I=z;z=G,G=I}for(var H=E[z],N=H,F=z;O*F<O*G;F+=O){var V=F+O,W=E[V];if(O*C<O*r(H,W))return e(H,N);if(O*C<O*W||V===G)return e(W,H);N=H,H=W}}function s(T){T.attr("x",-A.bar.captureWidth/2).attr("width",A.bar.captureWidth)}function a(T){T.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function u(T){if(!T.brush.filterSpecified)return"0,"+T.height;for(var E,C,L,O=p(T.brush.filter.getConsolidated(),T.height),z=[0],G=O.length?O[0][0]:null,I=0;I<O.length;I++)C=(E=O[I])[1]-E[0],z.push(G),z.push(C),(L=I+1)<O.length&&(G=O[L][0]-E[1]);return z.push(T.height),z}function p(T,E){return T.map(function(C){return C.map(function(L){return Math.max(0,L*E)}).sort(m)})}function c(){M.select(document.body).style("cursor",null)}function x(T){T.attr("stroke-dasharray",u)}function g(T,E){var C=M.select(T).selectAll(".highlight, .highlight-shadow");x(E?C.transition().duration(A.bar.snapDuration).each("end",E):C)}function h(T,E){var C,L=T.brush,O=NaN,z={};if(L.filterSpecified){var G=T.height,I=L.filter.getConsolidated(),H=p(I,G),N=NaN,F=NaN,V=NaN;for(C=0;C<=H.length;C++){var W=H[C];if(W&&W[0]<=E&&E<=W[1]){N=C;break}if(F=C?C-1:NaN,W&&W[0]>E){V=C;break}}if(O=N,isNaN(O)&&(O=isNaN(F)||isNaN(V)?isNaN(F)?V:F:E-H[F][1]<H[V][0]-E?F:V),!isNaN(O)){var te=H[O],Q=function(J,ne){var re=A.bar.handleHeight;if(!(ne>J[1]+re||ne<J[0]-re))return ne>=.9*J[1]+.1*J[0]?"n":ne<=.9*J[0]+.1*J[1]?"s":"ns"}(te,E);Q&&(z.interval=I[O],z.intervalPix=te,z.region=Q)}}if(T.ordinal&&!z.region){var X=T.unitTickvals,q=T.unitToPaddedPx.invert(E);for(C=0;C<X.length;C++){var Z=[.25*X[Math.max(C-1,0)]+.75*X[C],.25*X[Math.min(C+1,X.length-1)]+.75*X[C]];if(q>=Z[0]&&q<=Z[1]){z.clickableOrdinalRange=Z;break}}}return z}function b(T,E){M.event.sourceEvent.stopPropagation();var C=E.height-M.mouse(T)[1]-2*A.verticalPadding,L=E.brush.svgBrush;L.wasDragged=!0,L._dragging=!0,L.grabbingBar?L.newExtent=[C-L.grabPoint,C+L.barLength-L.grabPoint].map(E.unitToPaddedPx.invert):L.newExtent=[L.startExtent,E.unitToPaddedPx.invert(C)].sort(m),E.brush.filterSpecified=!0,L.extent=L.stayingIntervals.concat([L.newExtent]),L.brushCallback(E),g(T.parentNode)}function v(T,E){var C=h(E,E.height-M.mouse(T)[1]-2*A.verticalPadding),L="crosshair";C.clickableOrdinalRange?L="pointer":C.region&&(L=C.region+"-resize"),M.select(document.body).style("cursor",L)}function y(T){T.on("mousemove",function(E){M.event.preventDefault(),E.parent.inBrushDrag||v(this,E)}).on("mouseleave",function(E){E.parent.inBrushDrag||c()}).call(M.behavior.drag().on("dragstart",function(E){(function(C,L){M.event.sourceEvent.stopPropagation();var O=L.height-M.mouse(C)[1]-2*A.verticalPadding,z=L.unitToPaddedPx.invert(O),G=L.brush,I=h(L,O),H=I.interval,N=G.svgBrush;if(N.wasDragged=!1,N.grabbingBar=I.region==="ns",N.grabbingBar){var F=H.map(L.unitToPaddedPx);N.grabPoint=O-F[0]-A.verticalPadding,N.barLength=F[1]-F[0]}N.clickableOrdinalRange=I.clickableOrdinalRange,N.stayingIntervals=L.multiselect&&G.filterSpecified?G.filter.getConsolidated():[],H&&(N.stayingIntervals=N.stayingIntervals.filter(function(V){return V[0]!==H[0]&&V[1]!==H[1]})),N.startExtent=I.region?H[I.region==="s"?1:0]:z,L.parent.inBrushDrag=!0,N.brushStartCallback()})(this,E)}).on("drag",function(E){b(this,E)}).on("dragend",function(E){(function(C,L){var O=L.brush,z=O.filter,G=O.svgBrush;G._dragging||(v(C,L),b(C,L),L.brush.svgBrush.wasDragged=!1),G._dragging=!1,M.event.sourceEvent.stopPropagation();var I=G.grabbingBar;if(G.grabbingBar=!1,G.grabLocation=void 0,L.parent.inBrushDrag=!1,c(),!G.wasDragged)return G.wasDragged=void 0,G.clickableOrdinalRange?O.filterSpecified&&L.multiselect?G.extent.push(G.clickableOrdinalRange):(G.extent=[G.clickableOrdinalRange],O.filterSpecified=!0):I?(G.extent=G.stayingIntervals,G.extent.length===0&&d(O)):d(O),G.brushCallback(L),g(C.parentNode),void G.brushEndCallback(O.filterSpecified?z.getConsolidated():[]);var H=function(){z.set(z.getConsolidated())};if(L.ordinal){var N=L.unitTickvals;N[N.length-1]<N[0]&&N.reverse(),G.newExtent=[n(0,N,G.newExtent[0],G.stayingIntervals),n(1,N,G.newExtent[1],G.stayingIntervals)];var F=G.newExtent[1]>G.newExtent[0];G.extent=G.stayingIntervals.concat(F?[G.newExtent]:[]),G.extent.length||d(O),G.brushCallback(L),F?g(C.parentNode,H):(H(),g(C.parentNode))}else H();G.brushEndCallback(O.filterSpecified?z.getConsolidated():[])})(this,E)}))}function w(T,E){return T[0]-E[0]}function d(T){T.filterSpecified=!1,T.svgBrush.extent=[[-1/0,1/0]]}function S(T){for(var E,C=T.slice(),L=[],O=C.shift();O;){for(E=O.slice();(O=C.shift())&&O[0]<=E[1];)E[1]=Math.max(E[1],O[1]);L.push(E)}return L.length===1&&L[0][0]>L[0][1]&&(L=[]),L}$.exports={makeBrush:function(T,E,C,L,O,z){var G,I=function(){var H,N,F=[];return{set:function(V){(F=V.map(function(W){return W.slice().sort(m)}).sort(w)).length===1&&F[0][0]===-1/0&&F[0][1]===1/0&&(F=[[0,-1]]),H=S(F),N=F.reduce(function(W,te){return[Math.min(W[0],te[0]),Math.max(W[1],te[1])]},[1/0,-1/0])},get:function(){return F.slice()},getConsolidated:function(){return H},getBounds:function(){return N}}}();return I.set(C),{filter:I,filterSpecified:E,svgBrush:{extent:[],brushStartCallback:L,brushCallback:(G=O,function(H){var N=H.brush,F=function(W){return W.svgBrush.extent.map(function(te){return te.slice()})}(N),V=F.slice();N.filter.set(V),G()}),brushEndCallback:z}}},ensureAxisBrush:function(T,E,C){var L=T.selectAll("."+A.cn.axisBrush).data(_,l);L.enter().append("g").classed(A.cn.axisBrush,!0),function(O,z,G){var I=G._context.staticPlot,H=O.selectAll(".background").data(_);H.enter().append("rect").classed("background",!0).call(s).call(a).style("pointer-events",I?"none":"auto").attr("transform",f(0,A.verticalPadding)),H.call(y).attr("height",function(V){return V.height-A.verticalPadding});var N=O.selectAll(".highlight-shadow").data(_);N.enter().append("line").classed("highlight-shadow",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width+A.bar.strokeWidth).attr("stroke",z).attr("opacity",A.bar.strokeOpacity).attr("stroke-linecap","butt"),N.attr("y1",function(V){return V.height}).call(x);var F=O.selectAll(".highlight").data(_);F.enter().append("line").classed("highlight",!0).attr("x",-A.bar.width/2).attr("stroke-width",A.bar.width-A.bar.strokeWidth).attr("stroke",A.bar.fillColor).attr("opacity",A.bar.fillOpacity).attr("stroke-linecap","butt"),F.attr("y1",function(V){return V.height}).call(x)}(L,E,C)},cleanRanges:function(T,E){if(Array.isArray(T[0])?(T=T.map(function(L){return L.sort(m)}),T=E.multiselect?S(T.sort(w)):[T[0]]):T=[T.sort(m)],E.tickvals){var C=E.tickvals.slice().sort(m);if(!(T=T.map(function(L){var O=[n(0,C,L[0],[]),n(1,C,L[1],[])];if(O[1]>O[0])return O}).filter(function(L){return L})).length)return}return T.length>1?T:T[0]}}},71791:function($,P,t){$.exports={attributes:t(73362),supplyDefaults:t(3633),calc:t(24639),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(49351),categories:["gl","regl","noOpacity","noHover"],meta:{}}},49351:function($,P,t){var A=t(39898),M=t(27659).a0,l=t(21341),_=t(77922);P.name="parcoords",P.plot=function(m){var f=M(m.calcdata,"parcoords")[0];f.length&&l(m,f)},P.clean=function(m,f,o,e){var i=e._has&&e._has("parcoords"),r=f._has&&f._has("parcoords");i&&!r&&(e._paperdiv.selectAll(".parcoords").remove(),e._glimages.selectAll("*").remove())},P.toSVG=function(m){var f=m._fullLayout._glimages,o=A.select(m).selectAll(".svg-container");o.filter(function(e,i){return i===o.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var e=this,i=e.toDataURL("image/png");f.append("svg:image").attr({xmlns:_.svg,"xlink:href":i,preserveAspectRatio:"none",x:0,y:0,width:e.style.width,height:e.style.height})}),window.setTimeout(function(){A.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},24639:function($,P,t){var A=t(71828).isArrayOrTypedArray,M=t(21081),l=t(28984).wrap;$.exports=function(_,m){var f,o;return M.hasColorscale(m,"line")&&A(m.line.color)?(f=m.line.color,o=M.extractOpts(m.line).colorscale,M.calc(_,m,{vals:f,containerStr:"line",cLetter:"c"})):(f=function(e){for(var i=new Array(e),r=0;r<e;r++)i[r]=.5;return i}(m._length),o=[[0,m.line.color],[1,m.line.color]]),l({lineColor:f,cscale:o})}},25706:function($){$.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},3633:function($,P,t){var A=t(71828),M=t(52075).hasColorscale,l=t(1586),_=t(27670).c,m=t(85501),f=t(89298),o=t(73362),e=t(57920),i=t(25706).maxDimensionCount,r=t(94397);function n(s,a,u,p){function c(v,y){return A.coerce(s,a,o.dimensions,v,y)}var x=c("values"),g=c("visible");if(x&&x.length||(g=a.visible=!1),g){c("label"),c("tickvals"),c("ticktext"),c("tickformat");var h=c("range");a._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:h},f.setConvert(a._ax,p.layout),c("multiselect");var b=c("constraintrange");b&&(a.constraintrange=e.cleanRanges(b,a))}}$.exports=function(s,a,u,p){function c(v,y){return A.coerce(s,a,o,v,y)}var x=s.dimensions;Array.isArray(x)&&x.length>i&&(A.log("parcoords traces support up to "+i+" dimensions at the moment"),x.splice(i));var g=m(s,a,{name:"dimensions",layout:p,handleItemDefaults:n}),h=function(v,y,w,d,S){var T=S("line.color",w);if(M(v,"line")&&A.isArrayOrTypedArray(T)){if(T.length)return S("line.colorscale"),l(v,y,d,S,{prefix:"line.",cLetter:"c"}),T.length;y.line.color=w}return 1/0}(s,a,u,p,c);_(a,p,c),Array.isArray(g)&&g.length||(a.visible=!1),r(a,g,"values",h);var b={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};A.coerceFont(c,"labelfont",b),A.coerceFont(c,"tickfont",b),A.coerceFont(c,"rangefont",b),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},1602:function($,P,t){var A=t(71828).isTypedArray;P.convertTypedArray=function(M){return A(M)?Array.prototype.slice.call(M):M},P.isOrdinal=function(M){return!!M.tickvals},P.isVisible=function(M){return M.visible||!("visible"in M)}},67618:function($,P,t){var A=t(71791);A.plot=t(21341),$.exports=A},83398:function($,P,t){var A=t(56068),M=A([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),l=A([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),_=t(25706).maxDimensionCount,m=t(71828),f=1e-6,o=new Uint8Array(4),e=new Uint8Array(4),i={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function r(h,b,v,y,w){var d=h._gl;d.enable(d.SCISSOR_TEST),d.scissor(b,v,y,w),h.clear({color:[0,0,0,0],depth:1})}function n(h,b,v,y,w,d){var S=d.key;v.drawCompleted||(function(T){T.read({x:0,y:0,width:1,height:1,data:o})}(h),v.drawCompleted=!0),function T(E){var C=Math.min(y,w-E*y);E===0&&(window.cancelAnimationFrame(v.currentRafs[S]),delete v.currentRafs[S],r(h,d.scissorX,d.scissorY,d.scissorWidth,d.viewBoxSize[1])),v.clearOnly||(d.count=2*C,d.offset=2*E*y,b(d),E*y+C<w&&(v.currentRafs[S]=window.requestAnimationFrame(function(){T(E+1)})),v.drawCompleted=!1)}(0)}function s(h,b){for(var v=new Array(256),y=0;y<256;y++)v[y]=h(y/255).concat(b);return v}function a(h,b){return(h>>>8*b)%256/255}function u(h,b,v){for(var y=new Array(8*b),w=0,d=0;d<b;d++)for(var S=0;S<2;S++)for(var T=0;T<4;T++){var E=4*h+T,C=v[64*d+E];E===63&&S===0&&(C*=-1),y[w++]=C}return y}function p(h){var b="0"+h;return b.substr(b.length-2)}function c(h){return h<_?"p"+p(h+1)+"_"+p(h+4):"colors"}function x(h,b,v,y,w,d,S,T,E,C,L,O,z,G){for(var I=[[],[]],H=0;H<64;H++)I[0][H]=H===w?1:0,I[1][H]=H===d?1:0;S*=G,T*=G,E*=G,C*=G;var N=h.lines.canvasOverdrag*G,F=h.domain,V=h.canvasWidth*G,W=h.canvasHeight*G,te=h.pad.l*G,Q=h.pad.b*G,X=h.layoutHeight*G,q=h.layoutWidth*G,Z=h.deselectedLines.color,J=h.deselectedLines.opacity;return m.extendFlat({key:L,resolution:[V,W],viewBoxPos:[S+N,T],viewBoxSize:[E,C],i0:w,i1:d,dim0A:I[0].slice(0,16),dim0B:I[0].slice(16,32),dim0C:I[0].slice(32,48),dim0D:I[0].slice(48,64),dim1A:I[1].slice(0,16),dim1B:I[1].slice(16,32),dim1C:I[1].slice(32,48),dim1D:I[1].slice(48,64),drwLayer:O,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,J!=="auto"?Z[3]*J:Math.max(.00392156862745098,Math.pow(1/h.lines.color.length,.3333333333333333))],scissorX:(y===b?0:S+N)+(te-N)+q*F.x[0],scissorWidth:(y===v?V-S+N:E+.5)+(y===b?S+N:0),scissorY:T+Q+X*F.y[0],scissorHeight:C,viewportX:te-N+q*F.x[0],viewportY:Q+X*F.y[0],viewportWidth:V,viewportHeight:W},z)}function g(h){var b=2047,v=Math.max(0,Math.floor(h[0]*b),0),y=Math.min(b,Math.ceil(h[1]*b),b);return[Math.min(v,y),Math.max(v,y)]}$.exports=function(h,b){var v,y,w,d,S,T=b.context,E=b.pick,C=b.regl,L=C._gl,O=L.getParameter(L.ALIASED_LINE_WIDTH_RANGE),z=Math.max(O[0],Math.min(O[1],b.viewModel.plotGlPixelRatio)),G={currentRafs:{},drawCompleted:!0,clearOnly:!1},I=function(W){for(var te={},Q=0;Q<=_;Q+=4)te[c(Q)]=W.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return te}(C),H=C.texture(i),N=[];V(b);var F=C({profile:!1,blend:{enable:T,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!T,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:M,frag:l,primitive:"lines",lineWidth:z,attributes:I,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:H,contextColor:C.prop("contextColor"),maskTexture:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});function V(W){v=W.model,y=W.viewModel,w=y.dimensions.slice(),d=w[0]?w[0].values.length:0;var te=v.lines,Q=E?te.color.map(function(q,Z){return Z/te.color.length}):te.color,X=function(q,Z,J){for(var ne,re=new Array(q*(_+4)),ae=0,ue=0;ue<q;ue++){for(var he=0;he<_;he++)re[ae++]=he<Z.length?Z[he].paddedUnitValues[ue]:.5;re[ae++]=a(ue,2),re[ae++]=a(ue,1),re[ae++]=a(ue,0),re[ae++]=(ne=J[ue],Math.max(f,Math.min(.999999,ne)))}return re}(d,w,Q);(function(q,Z,J){for(var ne=0;ne<=_;ne+=4)q[c(ne)](u(ne/4,Z,J))})(I,d,X),T||E||(H=C.texture(m.extendFlat({data:s(v.unitToColor,255)},i)))}return{render:function(W,te,Q){var X,q,Z,J=W.length,ne=1/0,re=-1/0;for(X=0;X<J;X++)W[X].dim0.canvasX<ne&&(ne=W[X].dim0.canvasX,q=X),W[X].dim1.canvasX>re&&(re=W[X].dim1.canvasX,Z=X);J===0&&r(C,0,0,v.canvasWidth,v.canvasHeight);var ae=function(se){var oe,fe,Se,Me=[[],[]];for(Se=0;Se<64;Se++){var be=!se&&Se<w.length?w[Se].brush.filter.getBounds():[-1/0,1/0];Me[0][Se]=be[0],Me[1][Se]=be[1]}var Ie=new Array(16384);for(oe=0;oe<16384;oe++)Ie[oe]=255;if(!se)for(oe=0;oe<w.length;oe++){var Be=oe%8,ce=(oe-Be)/8,Te=Math.pow(2,Be),ye=w[oe].brush.filter.get();if(!(ye.length<2)){var Pe=g(ye[0])[1];for(fe=1;fe<ye.length;fe++){var Re=g(ye[fe]);for(Se=Pe+1;Se<Re[0];Se++)Ie[8*Se+ce]&=~Te;Pe=Math.max(Pe,Re[1])}}}var ze={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Ie};return S?S(ze):S=C.texture(ze),{maskTexture:S,maskHeight:2048,loA:Me[0].slice(0,16),loB:Me[0].slice(16,32),loC:Me[0].slice(32,48),loD:Me[0].slice(48,64),hiA:Me[1].slice(0,16),hiB:Me[1].slice(16,32),hiC:Me[1].slice(32,48),hiD:Me[1].slice(48,64)}}(T);for(X=0;X<J;X++){var ue=W[X],he=ue.dim0.crossfilterDimensionIndex,de=ue.dim1.crossfilterDimensionIndex,xe=ue.canvasX,me=ue.canvasY,ve=xe+ue.panelSizeX,Le=ue.plotGlPixelRatio;if(te||!N[he]||N[he][0]!==xe||N[he][1]!==ve){N[he]=[xe,ve];var Ae=x(v,q,Z,X,he,de,xe,me,ue.panelSizeX,ue.panelSizeY,ue.dim0.crossfilterDimensionIndex,T?0:E?2:1,ae,Le);G.clearOnly=Q;var we=te?v.lines.blockLineCount:d;n(C,F,G,we,d,Ae)}}},readPixel:function(W,te){return C.read({x:W,y:te,width:1,height:1,data:e}),e},readPixels:function(W,te,Q,X){var q=new Uint8Array(4*Q*X);return C.read({x:W,y:te,width:Q,height:X,data:q}),q},destroy:function(){for(var W in h.style["pointer-events"]="none",H.destroy(),S&&S.destroy(),I)I[W].destroy()},update:V}}},94397:function($){$.exports=function(P,t,A,M){var l,_;for(M||(M=1/0),l=0;l<t.length;l++)(_=t[l]).visible&&(M=Math.min(M,_[A].length));for(M===1/0&&(M=0),P._length=M,l=0;l<t.length;l++)(_=t[l]).visible&&(_._length=M);return M}},17171:function($,P,t){var A=t(39898),M=t(71828),l=M.numberFormat,_=t(36652),m=t(89298),f=M.strRotate,o=M.strTranslate,e=t(63893),i=t(91424),r=t(21081),n=t(28984),s=n.keyFun,a=n.repeat,u=n.unwrap,p=t(1602),c=t(25706),x=t(57920),g=t(83398);function h(H,N,F){return M.aggNums(H,null,N,F)}function b(H,N){return y(h(Math.min,H,N),h(Math.max,H,N))}function v(H){var N=H.range;return N?y(N[0],N[1]):b(H.values,H._length)}function y(H,N){return!isNaN(H)&&isFinite(H)||(H=0),!isNaN(N)&&isFinite(N)||(N=0),H===N&&(H===0?(H-=1,N+=1):(H*=.9,N*=1.1)),[H,N]}function w(H,N,F,V,W){var te,Q,X=v(F);return V?A.scale.ordinal().domain(V.map((te=l(F.tickformat),Q=W,Q?function(q,Z){var J=Q[Z];return J??te(q)}:te))).range(V.map(function(q){var Z=(q-X[0])/(X[1]-X[0]);return H-N+Z*(2*N-H)})):A.scale.linear().domain(X).range([H-N,N])}function d(H){if(H.tickvals){var N=v(H);return A.scale.ordinal().domain(H.tickvals).range(H.tickvals.map(function(F){return(F-N[0])/(N[1]-N[0])}))}}function S(H){var N=H.map(function(W){return W[0]}),F=H.map(function(W){var te=_(W[1]);return A.rgb("rgb("+te[0]+","+te[1]+","+te[2]+")")}),V="rgb".split("").map(function(W){return A.scale.linear().clamp(!0).domain(N).range(F.map((te=W,function(Q){return Q[te]})));var te});return function(W){return V.map(function(te){return te(W)})}}function T(H){return H.dimensions.some(function(N){return N.brush.filterSpecified})}function E(H,N,F){var V=u(N),W=V.trace,te=p.convertTypedArray(V.lineColor),Q=W.line,X={color:_(W.unselected.line.color),opacity:W.unselected.line.opacity},q=r.extractOpts(Q),Z=q.reversescale?r.flipScale(V.cscale):V.cscale,J=W.domain,ne=W.dimensions,re=H.width,ae=W.labelangle,ue=W.labelside,he=W.labelfont,de=W.tickfont,xe=W.rangefont,me=M.extendDeepNoArrays({},Q,{color:te.map(A.scale.linear().domain(v({values:te,range:[q.min,q.max],_length:W._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),ve=Math.floor(re*(J.x[1]-J.x[0])),Le=Math.floor(H.height*(J.y[1]-J.y[0])),Ae=H.margin||{l:80,r:80,t:100,b:80},we=ve,se=Le;return{key:F,colCount:ne.filter(p.isVisible).length,dimensions:ne,tickDistance:c.tickDistance,unitToColor:S(Z),lines:me,deselectedLines:X,labelAngle:ae,labelSide:ue,labelFont:he,tickFont:de,rangeFont:xe,layoutWidth:re,layoutHeight:H.height,domain:J,translateX:J.x[0]*re,translateY:H.height-J.y[1]*H.height,pad:Ae,canvasWidth:we*c.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:se*c.canvasPixelRatio,width:we,height:se,canvasPixelRatio:c.canvasPixelRatio}}function C(H,N,F){var V=F.width,W=F.height,te=F.dimensions,Q=F.canvasPixelRatio,X=function(re){return V*re/Math.max(1,F.colCount-1)},q=c.verticalPadding/W,Z=function(re,ae){return A.scale.linear().range([ae,re-ae])}(W,c.verticalPadding),J={key:F.key,xScale:X,model:F,inBrushDrag:!1},ne={};return J.dimensions=te.filter(p.isVisible).map(function(re,ae){var ue=function(be,Ie){return A.scale.linear().domain(v(be)).range([Ie,1-Ie])}(re,q),he=ne[re.label];ne[re.label]=(he||0)+1;var de=re.label+(he?"__"+he:""),xe=re.constraintrange,me=xe&&xe.length;me&&!Array.isArray(xe[0])&&(xe=[xe]);var ve=me?xe.map(function(be){return be.map(ue)}):[[-1/0,1/0]],Le=re.values;Le.length>re._length&&(Le=Le.slice(0,re._length));var Ae,we=re.tickvals;function se(be,Ie){return{val:be,text:Ae[Ie]}}function oe(be,Ie){return be.val-Ie.val}if(Array.isArray(we)&&we.length){Ae=re.ticktext,Array.isArray(Ae)&&Ae.length?Ae.length>we.length?Ae=Ae.slice(0,we.length):we.length>Ae.length&&(we=we.slice(0,Ae.length)):Ae=we.map(l(re.tickformat));for(var fe=1;fe<we.length;fe++)if(we[fe]<we[fe-1]){for(var Se=we.map(se).sort(oe),Me=0;Me<we.length;Me++)we[Me]=Se[Me].val,Ae[Me]=Se[Me].text;break}}else we=void 0;return Le=p.convertTypedArray(Le),{key:de,label:re.label,tickFormat:re.tickformat,tickvals:we,ticktext:Ae,ordinal:p.isOrdinal(re),multiselect:re.multiselect,xIndex:ae,crossfilterDimensionIndex:ae,visibleIndex:re._index,height:W,values:Le,paddedUnitValues:Le.map(ue),unitTickvals:we&&we.map(ue),xScale:X,x:X(ae),canvasX:X(ae)*Q,unitToPaddedPx:Z,domainScale:w(W,c.verticalPadding,re,we,Ae),ordinalScale:d(re),parent:J,model:F,brush:x.makeBrush(H,me,ve,function(){H.linePickActive(!1)},function(){var be=J;be.focusLayer&&be.focusLayer.render(be.panels,!0);var Ie=T(be);!H.contextShown()&&Ie?(be.contextLayer&&be.contextLayer.render(be.panels,!0),H.contextShown(!0)):H.contextShown()&&!Ie&&(be.contextLayer&&be.contextLayer.render(be.panels,!0,!0),H.contextShown(!1))},function(be){if(J.focusLayer.render(J.panels,!0),J.pickLayer&&J.pickLayer.render(J.panels,!0),H.linePickActive(!0),N&&N.filterChanged){var Ie=ue.invert,Be=be.map(function(ce){return ce.map(Ie).sort(M.sorterAsc)}).sort(function(ce,Te){return ce[0]-Te[0]});N.filterChanged(J.key,re._index,Be)}})}}),J}function L(H){H.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function O(H,N){var F=N==="top"?1:-1,V=H*Math.PI/180;return{dir:F,dx:Math.sin(V),dy:Math.cos(V),degrees:H}}function z(H,N,F){for(var V=N.panels||(N.panels=[]),W=H.data(),te=0;te<W.length-1;te++){var Q=V[te]||(V[te]={}),X=W[te],q=W[te+1];Q.dim0=X,Q.dim1=q,Q.canvasX=X.canvasX,Q.panelSizeX=q.canvasX-X.canvasX,Q.panelSizeY=N.model.canvasHeight,Q.y=0,Q.canvasY=0,Q.plotGlPixelRatio=F}}function G(H,N){return m.tickText(H._ax,N,!1).text}function I(H,N){if(H.ordinal)return"";var F=H.domainScale.domain(),V=F[N?F.length-1:0];return G(H.model.dimensions[H.visibleIndex],V)}$.exports=function(H,N,F,V){var W=H._context.staticPlot,te=H._fullLayout,Q=te._toppaper,X=te._glcontainer,q=H._context.plotGlPixelRatio,Z=H._fullLayout.paper_bgcolor;(function(be){for(var Ie=0;Ie<be.length;Ie++)for(var Be=0;Be<be[Ie].length;Be++)for(var ce=be[Ie][Be].trace,Te=ce.dimensions,ye=0;ye<Te.length;ye++){var Pe=Te[ye].values,Re=Te[ye]._ax;Re&&(Re.range?Re.range=y(Re.range[0],Re.range[1]):Re.range=b(Pe,ce._length),Re.dtick||(Re.dtick=.01*(Math.abs(Re.range[1]-Re.range[0])||1)),Re.tickformat=Te[ye].tickformat,m.calcTicks(Re),Re.cleanRange())}})(N);var J,ne,re=(J=!0,ne=!1,{linePickActive:function(be){return arguments.length?J=!!be:J},contextShown:function(be){return arguments.length?ne=!!be:ne}}),ae=N.filter(function(be){return u(be).trace.visible}).map(E.bind(0,F)).map(C.bind(0,re,V));X.each(function(be,Ie){return M.extendFlat(be,ae[Ie])});var ue=X.selectAll(".gl-canvas").each(function(be){be.viewModel=ae[0],be.viewModel.plotGlPixelRatio=q,be.viewModel.paperColor=Z,be.model=be.viewModel?be.viewModel.model:null}),he=null;ue.filter(function(be){return be.pick}).style("pointer-events",W?"none":"auto").on("mousemove",function(be){if(re.linePickActive()&&be.lineLayer&&V&&V.hover){var Ie=A.event,Be=this.width,ce=this.height,Te=A.mouse(this),ye=Te[0],Pe=Te[1];if(ye<0||Pe<0||ye>=Be||Pe>=ce)return;var Re=be.lineLayer.readPixel(ye,ce-1-Pe),ze=Re[3]!==0,He=ze?Re[2]+256*(Re[1]+256*Re[0]):null,We={x:ye,y:Pe,clientX:Ie.clientX,clientY:Ie.clientY,dataIndex:be.model.key,curveNumber:He};He!==he&&(ze?V.hover(We):V.unhover&&V.unhover(We),he=He)}}),ue.style("opacity",function(be){return be.pick?0:1}),Q.style("background","rgba(255, 255, 255, 0)");var de=Q.selectAll("."+c.cn.parcoords).data(ae,s);de.exit().remove(),de.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(be){return o(be.model.translateX,be.model.translateY)});var xe=de.selectAll("."+c.cn.parcoordsControlView).data(a,s);xe.enter().append("g").classed(c.cn.parcoordsControlView,!0),xe.attr("transform",function(be){return o(be.model.pad.l,be.model.pad.t)});var me=xe.selectAll("."+c.cn.yAxis).data(function(be){return be.dimensions},s);me.enter().append("g").classed(c.cn.yAxis,!0),xe.each(function(be){z(me,be,q)}),ue.each(function(be){if(be.viewModel){!be.lineLayer||V?be.lineLayer=g(this,be):be.lineLayer.update(be),(be.key||be.key===0)&&(be.viewModel[be.key]=be.lineLayer);var Ie=!be.context||V;be.lineLayer.render(be.viewModel.panels,Ie)}}),me.attr("transform",function(be){return o(be.xScale(be.xIndex),0)}),me.call(A.behavior.drag().origin(function(be){return be}).on("drag",function(be){var Ie=be.parent;re.linePickActive(!1),be.x=Math.max(-c.overdrag,Math.min(be.model.width+c.overdrag,A.event.x)),be.canvasX=be.x*be.model.canvasPixelRatio,me.sort(function(Be,ce){return Be.x-ce.x}).each(function(Be,ce){Be.xIndex=ce,Be.x=be===Be?Be.x:Be.xScale(Be.xIndex),Be.canvasX=Be.x*Be.model.canvasPixelRatio}),z(me,Ie,q),me.filter(function(Be){return Math.abs(be.xIndex-Be.xIndex)!==0}).attr("transform",function(Be){return o(Be.xScale(Be.xIndex),0)}),A.select(this).attr("transform",o(be.x,0)),me.each(function(Be,ce,Te){Te===be.parent.key&&(Ie.dimensions[ce]=Be)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!T(Ie)),Ie.focusLayer.render&&Ie.focusLayer.render(Ie.panels)}).on("dragend",function(be){var Ie=be.parent;be.x=be.xScale(be.xIndex),be.canvasX=be.x*be.model.canvasPixelRatio,z(me,Ie,q),A.select(this).attr("transform",function(Be){return o(Be.x,0)}),Ie.contextLayer&&Ie.contextLayer.render(Ie.panels,!1,!T(Ie)),Ie.focusLayer&&Ie.focusLayer.render(Ie.panels),Ie.pickLayer&&Ie.pickLayer.render(Ie.panels,!0),re.linePickActive(!0),V&&V.axesMoved&&V.axesMoved(Ie.key,Ie.dimensions.map(function(Be){return Be.crossfilterDimensionIndex}))})),me.exit().remove();var ve=me.selectAll("."+c.cn.axisOverlays).data(a,s);ve.enter().append("g").classed(c.cn.axisOverlays,!0),ve.selectAll("."+c.cn.axis).remove();var Le=ve.selectAll("."+c.cn.axis).data(a,s);Le.enter().append("g").classed(c.cn.axis,!0),Le.each(function(be){var Ie=be.model.height/be.model.tickDistance,Be=be.domainScale,ce=Be.domain();A.select(this).call(A.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Ie,be.tickFormat).tickValues(be.ordinal?ce:null).tickFormat(function(Te){return p.isOrdinal(be)?Te:G(be.model.dimensions[be.visibleIndex],Te)}).scale(Be)),i.font(Le.selectAll("text"),be.model.tickFont)}),Le.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),Le.selectAll("text").style("text-shadow",e.makeTextShadow(Z)).style("cursor","default");var Ae=ve.selectAll("."+c.cn.axisHeading).data(a,s);Ae.enter().append("g").classed(c.cn.axisHeading,!0);var we=Ae.selectAll("."+c.cn.axisTitle).data(a,s);we.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",W?"none":"auto"),we.text(function(be){return be.label}).each(function(be){var Ie=A.select(this);i.font(Ie,be.model.labelFont),e.convertToTspans(Ie,H)}).attr("transform",function(be){var Ie=O(be.model.labelAngle,be.model.labelSide),Be=c.axisTitleOffset;return(Ie.dir>0?"":o(0,2*Be+be.model.height))+f(Ie.degrees)+o(-Be*Ie.dx,-Be*Ie.dy)}).attr("text-anchor",function(be){var Ie=O(be.model.labelAngle,be.model.labelSide);return 2*Math.abs(Ie.dx)>Math.abs(Ie.dy)?Ie.dir*Ie.dx<0?"start":"end":"middle"});var se=ve.selectAll("."+c.cn.axisExtent).data(a,s);se.enter().append("g").classed(c.cn.axisExtent,!0);var oe=se.selectAll("."+c.cn.axisExtentTop).data(a,s);oe.enter().append("g").classed(c.cn.axisExtentTop,!0),oe.attr("transform",o(0,-c.axisExtentOffset));var fe=oe.selectAll("."+c.cn.axisExtentTopText).data(a,s);fe.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(L),fe.text(function(be){return I(be,!0)}).each(function(be){i.font(A.select(this),be.model.rangeFont)});var Se=se.selectAll("."+c.cn.axisExtentBottom).data(a,s);Se.enter().append("g").classed(c.cn.axisExtentBottom,!0),Se.attr("transform",function(be){return o(0,be.model.height+c.axisExtentOffset)});var Me=Se.selectAll("."+c.cn.axisExtentBottomText).data(a,s);Me.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(L),Me.text(function(be){return I(be,!1)}).each(function(be){i.font(A.select(this),be.model.rangeFont)}),x.ensureAxisBrush(ve,Z,H)}},21341:function($,P,t){var A=t(17171),M=t(79749),l=t(1602).isVisible,_={};function m(f,o,e){var i=o.indexOf(e),r=f.indexOf(i);return r===-1&&(r+=o.length),r}($.exports=function(f,o){var e=f._fullLayout;if(M(f,[],_)){var i={},r={},n={},s={},a=e._size;o.forEach(function(u,p){var c=u[0].trace;n[p]=c.index;var x=s[p]=c._fullInput.index;i[p]=f.data[x].dimensions,r[p]=f.data[x].dimensions.slice()}),A(f,o,{width:a.w,height:a.h,margin:{t:a.t,r:a.r,b:a.b,l:a.l}},{filterChanged:function(u,p,c){var x=r[u][p],g=c.map(function(d){return d.slice()}),h="dimensions["+p+"].constraintrange",b=e._tracePreGUI[f._fullData[n[u]]._fullInput.uid];if(b[h]===void 0){var v=x.constraintrange;b[h]=v||null}var y=f._fullData[n[u]].dimensions[p];g.length?(g.length===1&&(g=g[0]),x.constraintrange=g,y.constraintrange=g.slice(),g=[g]):(delete x.constraintrange,delete y.constraintrange,g=null);var w={};w[h]=g,f.emit("plotly_restyle",[w,[s[u]]])},hover:function(u){f.emit("plotly_hover",u)},unhover:function(u){f.emit("plotly_unhover",u)},axesMoved:function(u,p){var c=function(x,g){return function(h,b){return m(x,g,h)-m(x,g,b)}}(p,r[u].filter(l));i[u].sort(c),r[u].filter(function(x){return!l(x)}).sort(function(x){return r[u].indexOf(x)}).forEach(function(x){i[u].splice(i[u].indexOf(x),1),i[u].splice(r[u].indexOf(x),0,x)}),f.emit("plotly_restyle",[{dimensions:[i[u]]},[s[u]]])}})}}).reglPrecompiled=_},34e3:function($,P,t){var A=t(9012),M=t(27670).Y,l=t(41940),_=t(22399),m=t(5386).fF,f=t(5386).si,o=t(1426).extendFlat,e=t(79952).u,i=l({editType:"plot",arrayOk:!0,colorEditType:"plot"});$.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:e,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:o({},A.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:m({},{keys:["label","color","value","percent","text"]}),texttemplate:f({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:o({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:o({},i,{}),outsidetextfont:o({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:o({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:M({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:o({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},13584:function($,P,t){var A=t(74875);P.name="pie",P.plot=function(M,l,_,m){A.plotBasePlot(P.name,M,l,_,m)},P.clean=function(M,l,_,m){A.cleanBasePlot(P.name,M,l,_,m)}},32354:function($,P,t){var A=t(92770),M=t(84267),l=t(7901),_={};function m(o){return function(e,i){return!!e&&!!(e=M(e)).isValid()&&(e=l.addOpacity(e,e.getAlpha()),o[i]||(o[i]=e),e)}}function f(o,e){var i,r=JSON.stringify(o),n=e[r];if(!n){for(n=o.slice(),i=0;i<o.length;i++)n.push(M(o[i]).lighten(20).toHexString());for(i=0;i<o.length;i++)n.push(M(o[i]).darken(20).toHexString());e[r]=n}return n}$.exports={calc:function(o,e){var i,r,n=[],s=o._fullLayout,a=s.hiddenlabels||[],u=e.labels,p=e.marker.colors||[],c=e.values,x=e._length,g=e._hasValues&&x;if(e.dlabel)for(u=new Array(x),i=0;i<x;i++)u[i]=String(e.label0+i*e.dlabel);var h={},b=m(s["_"+e.type+"colormap"]),v=0,y=!1;for(i=0;i<x;i++){var w,d,S;if(g){if(w=c[i],!A(w))continue;w=+w}else w=1;(d=u[i])!==void 0&&d!==""||(d=i);var T=h[d=String(d)];T===void 0?(h[d]=n.length,(S=a.indexOf(d)!==-1)||(v+=w),n.push({v:w,label:d,color:b(p[i],d),i,pts:[i],hidden:S})):(y=!0,(r=n[T]).v+=w,r.pts.push(i),r.hidden||(v+=w),r.color===!1&&p[i]&&(r.color=b(p[i],d)))}return n=n.filter(function(E){return E.v>=0}),(e.type==="funnelarea"?y:e.sort)&&n.sort(function(E,C){return C.v-E.v}),n[0]&&(n[0].vTotal=v),n},crossTraceCalc:function(o,e){var i=(e||{}).type;i||(i="pie");var r=o._fullLayout,n=o.calcdata,s=r[i+"colorway"],a=r["_"+i+"colormap"];r["extend"+i+"colors"]&&(s=f(s,_));for(var u=0,p=0;p<n.length;p++){var c=n[p];if(c[0].trace.type===i)for(var x=0;x<c.length;x++){var g=c[x];g.color===!1&&(a[g.label]?g.color=a[g.label]:(a[g.label]=g.color=s[u%s.length],u++))}}},makePullColorFn:m,generateExtendedColors:f}},37434:function($,P,t){var A=t(92770),M=t(71828),l=t(34e3),_=t(27670).c,m=t(90769).handleText,f=t(71828).coercePattern;function o(i,r){var n=Array.isArray(i),s=M.isArrayOrTypedArray(r),a=Math.min(n?i.length:1/0,s?r.length:1/0);if(isFinite(a)||(a=0),a&&s){for(var u,p=0;p<a;p++){var c=r[p];if(A(c)&&c>0){u=!0;break}}u||(a=0)}return{hasLabels:n,hasValues:s,len:a}}function e(i,r,n,s,a){s("marker.line.width")&&s("marker.line.color",a?void 0:n.paper_bgcolor);var u=s("marker.colors");f(s,"marker.pattern",u),i.marker&&!r.marker.pattern.fgcolor&&(r.marker.pattern.fgcolor=i.marker.colors),r.marker.pattern.bgcolor||(r.marker.pattern.bgcolor=n.paper_bgcolor)}$.exports={handleLabelsAndValues:o,handleMarkerDefaults:e,supplyDefaults:function(i,r,n,s){function a(y,w){return M.coerce(i,r,l,y,w)}var u=o(a("labels"),a("values")),p=u.len;if(r._hasLabels=u.hasLabels,r._hasValues=u.hasValues,!r._hasLabels&&r._hasValues&&(a("label0"),a("dlabel")),p){r._length=p,e(i,r,s,a,!0),a("scalegroup");var c,x=a("text"),g=a("texttemplate");if(g||(c=a("textinfo",Array.isArray(x)?"text+percent":"percent")),a("hovertext"),a("hovertemplate"),g||c&&c!=="none"){var h=a("textposition");m(i,r,s,a,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(h)||h==="auto"||h==="outside")&&a("automargin"),(h==="inside"||h==="auto"||Array.isArray(h))&&a("insidetextorientation")}_(r,s,a);var b=a("hole");if(a("title.text")){var v=a("title.position",b?"middle center":"top center");b||v!=="middle center"||(r.title.position="top center"),M.coerceFont(a,"title.font",s.font)}a("sort"),a("direction"),a("rotation"),a("pull")}else r.visible=!1}}},20007:function($,P,t){var A=t(23469).appendArrayMultiPointValues;$.exports=function(M,l){var _={curveNumber:l.index,pointNumbers:M.pts,data:l._input,fullData:l,label:M.label,color:M.color,value:M.v,percent:M.percent,text:M.text,bbox:M.bbox,v:M.v};return M.pts.length===1&&(_.pointNumber=_.i=M.pts[0]),A(_,l,M.pts),l.type==="funnelarea"&&(delete _.v,delete _.i),_}},22209:function($,P,t){var A=t(91424),M=t(7901);$.exports=function(l,_,m,f){var o=m.marker.pattern;o&&o.shape?A.pointStyle(l,m,f,_):M.fill(l,_.color)}},53581:function($,P,t){var A=t(71828);function M(l){return l.indexOf("e")!==-1?l.replace(/[.]?0+e/,"e"):l.indexOf(".")!==-1?l.replace(/[.]?0+$/,""):l}P.formatPiePercent=function(l,_){var m=M((100*l).toPrecision(3));return A.numSeparate(m,_)+"%"},P.formatPieValue=function(l,_){var m=M(l.toPrecision(10));return A.numSeparate(m,_)},P.getFirstFilled=function(l,_){if(Array.isArray(l))for(var m=0;m<_.length;m++){var f=l[_[m]];if(f||f===0||f==="")return f}},P.castOption=function(l,_){return Array.isArray(l)?P.getFirstFilled(l,_):l||void 0},P.getRotationAngle=function(l){return(l==="auto"?0:l)*Math.PI/180}},58810:function($,P,t){$.exports={attributes:t(34e3),supplyDefaults:t(37434).supplyDefaults,supplyLayoutDefaults:t(92097),layoutAttributes:t(92774),calc:t(32354).calc,crossTraceCalc:t(32354).crossTraceCalc,plot:t(14575).plot,style:t(68357),styleOne:t(63463),moduleType:"trace",name:"pie",basePlotModule:t(13584),categories:["pie-like","pie","showLegend"],meta:{}}},92774:function($){$.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},92097:function($,P,t){var A=t(71828),M=t(92774);$.exports=function(l,_){function m(f,o){return A.coerce(l,_,M,f,o)}m("hiddenlabels"),m("piecolorway",_.colorway),m("extendpiecolors")}},14575:function($,P,t){var A=t(39898),M=t(74875),l=t(30211),_=t(7901),m=t(91424),f=t(71828),o=f.strScale,e=f.strTranslate,i=t(63893),r=t(72597),n=r.recordMinTextSize,s=r.clearMinTextSize,a=t(97313).TEXTPAD,u=t(53581),p=t(20007),c=t(71828).isValidTextValue;function x(N,F,V){var W=V[0],te=W.cx,Q=W.cy,X=W.trace,q=X.type==="funnelarea";"_hasHoverLabel"in X||(X._hasHoverLabel=!1),"_hasHoverEvent"in X||(X._hasHoverEvent=!1),N.on("mouseover",function(Z){var J=F._fullLayout,ne=F._fullData[X.index];if(!F._dragging&&J.hovermode!==!1){var re=ne.hoverinfo;if(Array.isArray(re)&&(re=l.castHoverinfo({hoverinfo:[u.castOption(re,Z.pts)],_module:X._module},J,0)),re==="all"&&(re="label+text+value+percent+name"),ne.hovertemplate||re!=="none"&&re!=="skip"&&re){var ae=Z.rInscribed||0,ue=te+Z.pxmid[0]*(1-ae),he=Q+Z.pxmid[1]*(1-ae),de=J.separators,xe=[];if(re&&re.indexOf("label")!==-1&&xe.push(Z.label),Z.text=u.castOption(ne.hovertext||ne.text,Z.pts),re&&re.indexOf("text")!==-1){var me=Z.text;f.isValidTextValue(me)&&xe.push(me)}Z.value=Z.v,Z.valueLabel=u.formatPieValue(Z.v,de),re&&re.indexOf("value")!==-1&&xe.push(Z.valueLabel),Z.percent=Z.v/W.vTotal,Z.percentLabel=u.formatPiePercent(Z.percent,de),re&&re.indexOf("percent")!==-1&&xe.push(Z.percentLabel);var ve=ne.hoverlabel,Le=ve.font,Ae=[];l.loneHover({trace:X,x0:ue-ae*W.r,x1:ue+ae*W.r,y:he,_x0:q?te+Z.TL[0]:ue-ae*W.r,_x1:q?te+Z.TR[0]:ue+ae*W.r,_y0:q?Q+Z.TL[1]:he-ae*W.r,_y1:q?Q+Z.BL[1]:he+ae*W.r,text:xe.join("<br>"),name:ne.hovertemplate||re.indexOf("name")!==-1?ne.name:void 0,idealAlign:Z.pxmid[0]<0?"left":"right",color:u.castOption(ve.bgcolor,Z.pts)||Z.color,borderColor:u.castOption(ve.bordercolor,Z.pts),fontFamily:u.castOption(Le.family,Z.pts),fontSize:u.castOption(Le.size,Z.pts),fontColor:u.castOption(Le.color,Z.pts),nameLength:u.castOption(ve.namelength,Z.pts),textAlign:u.castOption(ve.align,Z.pts),hovertemplate:u.castOption(ne.hovertemplate,Z.pts),hovertemplateLabels:Z,eventData:[p(Z,ne)]},{container:J._hoverlayer.node(),outerContainer:J._paper.node(),gd:F,inOut_bbox:Ae}),Z.bbox=Ae[0],X._hasHoverLabel=!0}X._hasHoverEvent=!0,F.emit("plotly_hover",{points:[p(Z,ne)],event:A.event})}}),N.on("mouseout",function(Z){var J=F._fullLayout,ne=F._fullData[X.index],re=A.select(this).datum();X._hasHoverEvent&&(Z.originalEvent=A.event,F.emit("plotly_unhover",{points:[p(re,ne)],event:A.event}),X._hasHoverEvent=!1),X._hasHoverLabel&&(l.loneUnhover(J._hoverlayer.node()),X._hasHoverLabel=!1)}),N.on("click",function(Z){var J=F._fullLayout,ne=F._fullData[X.index];F._dragging||J.hovermode===!1||(F._hoverdata=[p(Z,ne)],l.click(F,A.event))})}function g(N,F,V){var W=u.castOption(N.insidetextfont.color,F.pts);!W&&N._input.textfont&&(W=u.castOption(N._input.textfont.color,F.pts));var te=u.castOption(N.insidetextfont.family,F.pts)||u.castOption(N.textfont.family,F.pts)||V.family,Q=u.castOption(N.insidetextfont.size,F.pts)||u.castOption(N.textfont.size,F.pts)||V.size;return{color:W||_.contrast(F.color),family:te,size:Q}}function h(N,F){for(var V,W,te=0;te<N.length;te++)if((W=(V=N[te][0]).trace).title.text){var Q=W.title.text;W._meta&&(Q=f.templateString(Q,W._meta));var X=m.tester.append("text").attr("data-notex",1).text(Q).call(m.font,W.title.font).call(i.convertToTspans,F),q=m.bBox(X.node(),!0);V.titleBox={width:q.width,height:q.height},X.remove()}}function b(N,F,V){var W=V.r||F.rpx1,te=F.rInscribed;if(F.startangle===F.stopangle)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var Q,X=F.ring,q=X===1&&Math.abs(F.startangle-F.stopangle)===2*Math.PI,Z=F.halfangle,J=F.midangle,ne=V.trace.insidetextorientation,re=ne==="horizontal",ae=ne==="tangential",ue=ne==="radial",he=ne==="auto",de=[];if(!he){var xe,me=function(oe,fe){if(function(Ie,Be){var ce=Ie.startangle,Te=Ie.stopangle;return ce>Be&&Be>Te||ce<Be&&Be<Te}(F,oe)){var Se=Math.abs(oe-F.startangle),Me=Math.abs(oe-F.stopangle),be=Se<Me?Se:Me;(Q=fe==="tan"?y(N,W,X,be,0):v(N,W,X,be,Math.PI/2)).textPosAngle=oe,de.push(Q)}};if(re||ae){for(xe=4;xe>=-4;xe-=2)me(Math.PI*xe,"tan");for(xe=4;xe>=-4;xe-=2)me(Math.PI*(xe+1),"tan")}if(re||ue){for(xe=4;xe>=-4;xe-=2)me(Math.PI*(xe+1.5),"rad");for(xe=4;xe>=-4;xe-=2)me(Math.PI*(xe+.5),"rad")}}if(q||he||re){var ve=Math.sqrt(N.width*N.width+N.height*N.height);if((Q={scale:te*W*2/ve,rCenter:1-te,rotate:0}).textPosAngle=(F.startangle+F.stopangle)/2,Q.scale>=1)return Q;de.push(Q)}(he||ue)&&((Q=v(N,W,X,Z,J)).textPosAngle=(F.startangle+F.stopangle)/2,de.push(Q)),(he||ae)&&((Q=y(N,W,X,Z,J)).textPosAngle=(F.startangle+F.stopangle)/2,de.push(Q));for(var Le=0,Ae=0,we=0;we<de.length;we++){var se=de[we].scale;if(Ae<se&&(Ae=se,Le=we),!he&&Ae>=1)break}return de[Le]}function v(N,F,V,W,te){F=Math.max(0,F-2*a);var Q=N.width/N.height,X=S(Q,W,F,V);return{scale:2*X/N.height,rCenter:w(Q,X/F),rotate:d(te)}}function y(N,F,V,W,te){F=Math.max(0,F-2*a);var Q=N.height/N.width,X=S(Q,W,F,V);return{scale:2*X/N.width,rCenter:w(Q,X/F),rotate:d(te+Math.PI/2)}}function w(N,F){return Math.cos(F)-N*F}function d(N){return(180/Math.PI*N+720)%180-90}function S(N,F,V,W){var te=N+1/(2*Math.tan(F));return V*Math.min(1/(Math.sqrt(te*te+.5)+te),W/(Math.sqrt(N*N+W/2)+N))}function T(N,F){return N.v!==F.vTotal||F.trace.hole?Math.min(1/(1+1/Math.sin(N.halfangle)),N.ring/2):1}function E(N,F){var V=F.pxmid[0],W=F.pxmid[1],te=N.width/2,Q=N.height/2;return V<0&&(te*=-1),W<0&&(Q*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(Q)*(te>0?1:-1)/2,y:Q/(1+V*V/(W*W)),outside:!0}}function C(N,F){var V,W,te,Q=N.trace,X={x:N.cx,y:N.cy},q={tx:0,ty:0};q.ty+=Q.title.font.size,te=O(Q),Q.title.position.indexOf("top")!==-1?(X.y-=(1+te)*N.r,q.ty-=N.titleBox.height):Q.title.position.indexOf("bottom")!==-1&&(X.y+=(1+te)*N.r);var Z,J=N.r/((Z=N.trace.aspectratio)===void 0?1:Z),ne=F.w*(Q.domain.x[1]-Q.domain.x[0])/2;return Q.title.position.indexOf("left")!==-1?(ne+=J,X.x-=(1+te)*J,q.tx+=N.titleBox.width/2):Q.title.position.indexOf("center")!==-1?ne*=2:Q.title.position.indexOf("right")!==-1&&(ne+=J,X.x+=(1+te)*J,q.tx-=N.titleBox.width/2),V=ne/N.titleBox.width,W=L(N,F)/N.titleBox.height,{x:X.x,y:X.y,scale:Math.min(V,W),tx:q.tx,ty:q.ty}}function L(N,F){var V=N.trace,W=F.h*(V.domain.y[1]-V.domain.y[0]);return Math.min(N.titleBox.height,W/2)}function O(N){var F,V=N.pull;if(!V)return 0;if(Array.isArray(V))for(V=0,F=0;F<N.pull.length;F++)N.pull[F]>V&&(V=N.pull[F]);return V}function z(N,F){for(var V=[],W=0;W<N.length;W++){var te=N[W][0],Q=te.trace,X=Q.domain,q=F.w*(X.x[1]-X.x[0]),Z=F.h*(X.y[1]-X.y[0]);Q.title.text&&Q.title.position!=="middle center"&&(Z-=L(te,F));var J=q/2,ne=Z/2;Q.type!=="funnelarea"||Q.scalegroup||(ne/=Q.aspectratio),te.r=Math.min(J,ne)/(1+O(Q)),te.cx=F.l+F.w*(Q.domain.x[1]+Q.domain.x[0])/2,te.cy=F.t+F.h*(1-Q.domain.y[0])-Z/2,Q.title.text&&Q.title.position.indexOf("bottom")!==-1&&(te.cy-=L(te,F)),Q.scalegroup&&V.indexOf(Q.scalegroup)===-1&&V.push(Q.scalegroup)}(function(re,ae){for(var ue,he,de,xe=0;xe<ae.length;xe++){var me=1/0,ve=ae[xe];for(he=0;he<re.length;he++)if((de=(ue=re[he][0]).trace).scalegroup===ve){var Le;if(de.type==="pie")Le=ue.r*ue.r;else if(de.type==="funnelarea"){var Ae,we;de.aspectratio>1?we=(Ae=ue.r)/de.aspectratio:Ae=(we=ue.r)*de.aspectratio,Le=(Ae*=(1+de.baseratio)/2)*we}me=Math.min(me,Le/ue.vTotal)}for(he=0;he<re.length;he++)if((de=(ue=re[he][0]).trace).scalegroup===ve){var se=me*ue.vTotal;de.type==="funnelarea"&&(se/=(1+de.baseratio)/2,se/=de.aspectratio),ue.r=Math.sqrt(se)}}})(N,V)}function G(N,F){return[N*Math.sin(F),-N*Math.cos(F)]}function I(N,F,V){var W=N._fullLayout,te=V.trace,Q=te.texttemplate,X=te.textinfo;if(!Q&&X&&X!=="none"){var q,Z=X.split("+"),J=function(Le){return Z.indexOf(Le)!==-1},ne=J("label"),re=J("text"),ae=J("value"),ue=J("percent"),he=W.separators;if(q=ne?[F.label]:[],re){var de=u.getFirstFilled(te.text,F.pts);c(de)&&q.push(de)}ae&&q.push(u.formatPieValue(F.v,he)),ue&&q.push(u.formatPiePercent(F.v/V.vTotal,he)),F.text=q.join("<br>")}if(Q){var xe=f.castOption(te,F.i,"texttemplate");if(xe){var me=function(Le){return{label:Le.label,value:Le.v,valueLabel:u.formatPieValue(Le.v,W.separators),percent:Le.v/V.vTotal,percentLabel:u.formatPiePercent(Le.v/V.vTotal,W.separators),color:Le.color,text:Le.text,customdata:f.castOption(te,Le.i,"customdata")}}(F),ve=u.getFirstFilled(te.text,F.pts);(c(ve)||ve==="")&&(me.text=ve),F.text=f.texttemplateString(xe,me,N._fullLayout._d3locale,me,te._meta||{})}else F.text=""}}function H(N,F){var V=N.rotate*Math.PI/180,W=Math.cos(V),te=Math.sin(V),Q=(F.left+F.right)/2,X=(F.top+F.bottom)/2;N.textX=Q*W-X*te,N.textY=Q*te+X*W,N.noCenter=!0}$.exports={plot:function(N,F){var V=N._context.staticPlot,W=N._fullLayout,te=W._size;s("pie",W),h(F,N),z(F,te);var Q=f.makeTraceGroups(W._pielayer,F,"trace").each(function(X){var q=A.select(this),Z=X[0],J=Z.trace;(function(ne){var re,ae,ue,he=ne[0],de=he.r,xe=he.trace,me=u.getRotationAngle(xe.rotation),ve=2*Math.PI/he.vTotal,Le="px0",Ae="px1";if(xe.direction==="counterclockwise"){for(re=0;re<ne.length&&ne[re].hidden;re++);if(re===ne.length)return;me+=ve*ne[re].v,ve*=-1,Le="px1",Ae="px0"}for(ue=G(de,me),re=0;re<ne.length;re++)(ae=ne[re]).hidden||(ae[Le]=ue,ae.startangle=me,me+=ve*ae.v/2,ae.pxmid=G(de,me),ae.midangle=me,ue=G(de,me+=ve*ae.v/2),ae.stopangle=me,ae[Ae]=ue,ae.largeArc=ae.v>he.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/he.vTotal,.5),ae.ring=1-xe.hole,ae.rInscribed=T(ae,he))})(X),q.attr("stroke-linejoin","round"),q.each(function(){var ne=A.select(this).selectAll("g.slice").data(X);ne.enter().append("g").classed("slice",!0),ne.exit().remove();var re=[[[],[]],[[],[]]],ae=!1;ne.each(function(Ae,we){if(Ae.hidden)A.select(this).selectAll("path,g").remove();else{Ae.pointNumber=Ae.i,Ae.curveNumber=J.index,re[Ae.pxmid[1]<0?0:1][Ae.pxmid[0]<0?0:1].push(Ae);var se=Z.cx,oe=Z.cy,fe=A.select(this),Se=fe.selectAll("path.surface").data([Ae]);if(Se.enter().append("path").classed("surface",!0).style({"pointer-events":V?"none":"all"}),fe.call(x,N,X),J.pull){var Me=+u.castOption(J.pull,Ae.pts)||0;Me>0&&(se+=Me*Ae.pxmid[0],oe+=Me*Ae.pxmid[1])}Ae.cxFinal=se,Ae.cyFinal=oe;var be=J.hole;if(Ae.v===Z.vTotal){var Ie="M"+(se+Ae.px0[0])+","+(oe+Ae.px0[1])+Pe(Ae.px0,Ae.pxmid,!0,1)+Pe(Ae.pxmid,Ae.px0,!0,1)+"Z";be?Se.attr("d","M"+(se+be*Ae.px0[0])+","+(oe+be*Ae.px0[1])+Pe(Ae.px0,Ae.pxmid,!1,be)+Pe(Ae.pxmid,Ae.px0,!1,be)+"Z"+Ie):Se.attr("d",Ie)}else{var Be=Pe(Ae.px0,Ae.px1,!0,1);if(be){var ce=1-be;Se.attr("d","M"+(se+be*Ae.px1[0])+","+(oe+be*Ae.px1[1])+Pe(Ae.px1,Ae.px0,!1,be)+"l"+ce*Ae.px0[0]+","+ce*Ae.px0[1]+Be+"Z")}else Se.attr("d","M"+se+","+oe+"l"+Ae.px0[0]+","+Ae.px0[1]+Be+"Z")}I(N,Ae,Z);var Te=u.castOption(J.textposition,Ae.pts),ye=fe.selectAll("g.slicetext").data(Ae.text&&Te!=="none"?[0]:[]);ye.enter().append("g").classed("slicetext",!0),ye.exit().remove(),ye.each(function(){var Re=f.ensureSingle(A.select(this),"text","",function(_t){_t.attr("data-notex",1)}),ze=f.ensureUniformFontSize(N,Te==="outside"?function(_t,xt,at){return{color:u.castOption(_t.outsidetextfont.color,xt.pts)||u.castOption(_t.textfont.color,xt.pts)||at.color,family:u.castOption(_t.outsidetextfont.family,xt.pts)||u.castOption(_t.textfont.family,xt.pts)||at.family,size:u.castOption(_t.outsidetextfont.size,xt.pts)||u.castOption(_t.textfont.size,xt.pts)||at.size}}(J,Ae,W.font):g(J,Ae,W.font));Re.text(Ae.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(m.font,ze).call(i.convertToTspans,N);var He,We=m.bBox(Re.node());if(Te==="outside")He=E(We,Ae);else if(He=b(We,Ae,Z),Te==="auto"&&He.scale<1){var Je=f.ensureUniformFontSize(N,J.outsidetextfont);Re.call(m.font,Je),He=E(We=m.bBox(Re.node()),Ae)}var lt=He.textPosAngle,et=lt===void 0?Ae.pxmid:G(Z.r,lt);if(He.targetX=se+et[0]*He.rCenter+(He.x||0),He.targetY=oe+et[1]*He.rCenter+(He.y||0),H(He,We),He.outside){var yt=He.targetY;Ae.yLabelMin=yt-We.height/2,Ae.yLabelMid=yt,Ae.yLabelMax=yt+We.height/2,Ae.labelExtraX=0,Ae.labelExtraY=0,ae=!0}He.fontSize=ze.size,n(J.type,He,W),X[we].transform=He,f.setTransormAndDisplay(Re,He)})}function Pe(Re,ze,He,We){var Je=We*(ze[0]-Re[0]),lt=We*(ze[1]-Re[1]);return"a"+We*Z.r+","+We*Z.r+" 0 "+Ae.largeArc+(He?" 1 ":" 0 ")+Je+","+lt}});var ue=A.select(this).selectAll("g.titletext").data(J.title.text?[0]:[]);if(ue.enter().append("g").classed("titletext",!0),ue.exit().remove(),ue.each(function(){var Ae,we=f.ensureSingle(A.select(this),"text","",function(oe){oe.attr("data-notex",1)}),se=J.title.text;J._meta&&(se=f.templateString(se,J._meta)),we.text(se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(m.font,J.title.font).call(i.convertToTspans,N),Ae=J.title.position==="middle center"?function(oe){var fe=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/fe,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}(Z):C(Z,te),we.attr("transform",e(Ae.x,Ae.y)+o(Math.min(1,Ae.scale))+e(Ae.tx,Ae.ty))}),ae&&function(Ae,we){var se,oe,fe,Se,Me,be,Ie,Be,ce,Te,ye,Pe,Re;function ze(lt,et){return lt.pxmid[1]-et.pxmid[1]}function He(lt,et){return et.pxmid[1]-lt.pxmid[1]}function We(lt,et){et||(et={});var yt,_t,xt,at,ot=et.labelExtraY+(oe?et.yLabelMax:et.yLabelMin),At=oe?lt.yLabelMin:lt.yLabelMax,Ct=oe?lt.yLabelMax:lt.yLabelMin,zt=lt.cyFinal+Me(lt.px0[1],lt.px1[1]),St=ot-At;if(St*Ie>0&&(lt.labelExtraY=St),Array.isArray(we.pull))for(_t=0;_t<Te.length;_t++)(xt=Te[_t])===lt||(u.castOption(we.pull,lt.pts)||0)>=(u.castOption(we.pull,xt.pts)||0)||((lt.pxmid[1]-xt.pxmid[1])*Ie>0?(St=xt.cyFinal+Me(xt.px0[1],xt.px1[1])-At-lt.labelExtraY)*Ie>0&&(lt.labelExtraY+=St):(Ct+lt.labelExtraY-zt)*Ie>0&&(yt=3*be*Math.abs(_t-Te.indexOf(lt)),(at=xt.cxFinal+Se(xt.px0[0],xt.px1[0])+yt-(lt.cxFinal+lt.pxmid[0])-lt.labelExtraX)*be>0&&(lt.labelExtraX+=at)))}for(oe=0;oe<2;oe++)for(fe=oe?ze:He,Me=oe?Math.max:Math.min,Ie=oe?1:-1,se=0;se<2;se++){for(Se=se?Math.max:Math.min,be=se?1:-1,(Be=Ae[oe][se]).sort(fe),ce=Ae[1-oe][se],Te=ce.concat(Be),Pe=[],ye=0;ye<Be.length;ye++)Be[ye].yLabelMid!==void 0&&Pe.push(Be[ye]);for(Re=!1,ye=0;oe&&ye<ce.length;ye++)if(ce[ye].yLabelMid!==void 0){Re=ce[ye];break}for(ye=0;ye<Pe.length;ye++){var Je=ye&&Pe[ye-1];Re&&!ye&&(Je=Re),We(Pe[ye],Je)}}}(re,J),function(Ae,we){Ae.each(function(se){var oe=A.select(this);if(se.labelExtraX||se.labelExtraY){var fe=oe.select("g.slicetext text");se.transform.targetX+=se.labelExtraX,se.transform.targetY+=se.labelExtraY,f.setTransormAndDisplay(fe,se.transform);var Se=se.cxFinal+se.pxmid[0],Me="M"+Se+","+(se.cyFinal+se.pxmid[1]),be=(se.yLabelMax-se.yLabelMin)*(se.pxmid[0]<0?-1:1)/4;if(se.labelExtraX){var Ie=se.labelExtraX*se.pxmid[1]/se.pxmid[0],Be=se.yLabelMid+se.labelExtraY-(se.cyFinal+se.pxmid[1]);Math.abs(Ie)>Math.abs(Be)?Me+="l"+Be*se.pxmid[0]/se.pxmid[1]+","+Be+"H"+(Se+se.labelExtraX+be):Me+="l"+se.labelExtraX+","+Ie+"v"+(Be-Ie)+"h"+be}else Me+="V"+(se.yLabelMid+se.labelExtraY)+"h"+be;f.ensureSingle(oe,"path","textline").call(_.stroke,we.outsidetextfont.color).attr({"stroke-width":Math.min(2,we.outsidetextfont.size/8),d:Me,fill:"none"})}else oe.select("path.textline").remove()})}(ne,J),ae&&J.automargin){var he=m.bBox(q.node()),de=J.domain,xe=te.w*(de.x[1]-de.x[0]),me=te.h*(de.y[1]-de.y[0]),ve=(.5*xe-Z.r)/te.w,Le=(.5*me-Z.r)/te.h;M.autoMargin(N,"pie."+J.uid+".automargin",{xl:de.x[0]-ve,xr:de.x[1]+ve,yb:de.y[0]-Le,yt:de.y[1]+Le,l:Math.max(Z.cx-Z.r-he.left,0),r:Math.max(he.right-(Z.cx+Z.r),0),b:Math.max(he.bottom-(Z.cy+Z.r),0),t:Math.max(Z.cy-Z.r-he.top,0),pad:5})}})});setTimeout(function(){Q.selectAll("tspan").each(function(){var X=A.select(this);X.attr("dy")&&X.attr("dy",X.attr("dy"))})},0)},formatSliceLabel:I,transformInsideText:b,determineInsideTextFont:g,positionTitleOutside:C,prerenderTitles:h,layoutAreas:z,attachFxHandlers:x,computeTransform:H}},68357:function($,P,t){var A=t(39898),M=t(63463),l=t(72597).resizeText;$.exports=function(_){var m=_._fullLayout._pielayer.selectAll(".trace");l(_,m,"pie"),m.each(function(f){var o=f[0].trace,e=A.select(this);e.style({opacity:o.opacity}),e.selectAll("path.surface").each(function(i){A.select(this).call(M,i,o,_)})})}},63463:function($,P,t){var A=t(7901),M=t(53581).castOption,l=t(22209);$.exports=function(_,m,f,o){var e=f.marker.line,i=M(e.color,m.pts)||A.defaultLine,r=M(e.width,m.pts)||0;_.call(l,m,f,o).style("stroke-width",r).call(A.stroke,i)}},10959:function($,P,t){var A=t(82196);$.exports={x:A.x,y:A.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:A.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},42743:function($,P,t){var A=t(9330).gl_pointcloud2d,M=t(78614),l=t(71739).findExtremes,_=t(34603);function m(o,e){this.scene=o,this.uid=e,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=A(o.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var f=m.prototype;f.handlePick=function(o){var e=this.idToIndex[o.pointId];return{trace:this,dataCoord:o.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}},f.update=function(o){this.index=o.index,this.textLabels=o.text,this.name=o.name,this.hoverinfo=o.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(o),this.color=_(o,{})},f.updateFast=function(o){var e,i,r,n,s,a,u=this.xData=this.pickXData=o.x,p=this.yData=this.pickYData=o.y,c=this.pickXYData=o.xy,x=o.xbounds&&o.ybounds,g=o.indices,h=this.bounds;if(c){if(r=c,e=c.length>>>1,x)h[0]=o.xbounds[0],h[2]=o.xbounds[1],h[1]=o.ybounds[0],h[3]=o.ybounds[1];else for(a=0;a<e;a++)n=r[2*a],s=r[2*a+1],n<h[0]&&(h[0]=n),n>h[2]&&(h[2]=n),s<h[1]&&(h[1]=s),s>h[3]&&(h[3]=s);if(g)i=g;else for(i=new Int32Array(e),a=0;a<e;a++)i[a]=a}else for(e=u.length,r=new Float32Array(2*e),i=new Int32Array(e),a=0;a<e;a++)n=u[a],s=p[a],i[a]=a,r[2*a]=n,r[2*a+1]=s,n<h[0]&&(h[0]=n),n>h[2]&&(h[2]=n),s<h[1]&&(h[1]=s),s>h[3]&&(h[3]=s);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=r;var b=M(o.marker.color),v=M(o.marker.border.color),y=o.opacity*o.marker.opacity;b[3]*=y,this.pointcloudOptions.color=b;var w=o.marker.blend;w===null&&(w=u.length<100||p.length<100),this.pointcloudOptions.blend=w,v[3]*=y,this.pointcloudOptions.borderColor=v;var d=o.marker.sizemin,S=Math.max(o.marker.sizemax,o.marker.sizemin);this.pointcloudOptions.sizeMin=d,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=o.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var T=this.scene.xaxis,E=this.scene.yaxis,C=S/2||.5;o._extremes[T._id]=l(T,[h[0],h[2]],{ppad:C}),o._extremes[E._id]=l(E,[h[1],h[3]],{ppad:C})},f.dispose=function(){this.pointcloud.dispose()},$.exports=function(o,e){var i=new m(o,e.uid);return i.update(e),i}},33876:function($,P,t){var A=t(71828),M=t(10959);$.exports=function(l,_,m){function f(o,e){return A.coerce(l,_,M,o,e)}f("x"),f("y"),f("xbounds"),f("ybounds"),l.xy&&l.xy instanceof Float32Array&&(_.xy=l.xy),l.indices&&l.indices instanceof Int32Array&&(_.indices=l.indices),f("text"),f("marker.color",m),f("marker.opacity"),f("marker.blend"),f("marker.sizemin"),f("marker.sizemax"),f("marker.border.color",m),f("marker.border.arearatio"),_._length=null}},20593:function($,P,t){$.exports={attributes:t(10959),supplyDefaults:t(33876),calc:t(36563),plot:t(42743),moduleType:"trace",name:"pointcloud",basePlotModule:t(4796),categories:["gl","gl2d","showLegend"],meta:{}}},39953:function($,P,t){var A=t(41940),M=t(9012),l=t(22399),_=t(77914),m=t(27670).Y,f=t(5386).fF,o=t(50693),e=t(44467).templatedArray,i=t(12663).descriptionOnlyNumbers,r=t(1426).extendFlat,n=t(30962).overrideAll;($.exports=n({hoverinfo:r({},M.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:_.hoverlabel,domain:m({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:A({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:f({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:l.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:f({},{keys:["value","label"]}),colorscales:e("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:r(o().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},75536:function($,P,t){var A=t(30962).overrideAll,M=t(27659).a0,l=t(60436),_=t(528),m=t(6964),f=t(28569),o=t(47322).prepSelect,e=t(71828),i=t(73972),r="sankey";function n(s,a){var u=s._fullData[a],p=s._fullLayout,c=p.dragmode,x=p.dragmode==="pan"?"move":"crosshair",g=u._bgRect;if(g&&c!=="pan"&&c!=="zoom"){m(g,x);var h={_id:"x",c2p:e.identity,_offset:u._sankey.translateX,_length:u._sankey.width},b={_id:"y",c2p:e.identity,_offset:u._sankey.translateY,_length:u._sankey.height},v={gd:s,element:g.node(),plotinfo:{id:a,xaxis:h,yaxis:b,fillRangeItems:e.noop},subplot:a,xaxes:[h],yaxes:[b],doneFnCompleted:function(y){var w,d=s._fullData[a],S=d.node.groups.slice(),T=[];function E(z){for(var G=d._sankey.graph.nodes,I=0;I<G.length;I++)if(G[I].pointNumber===z)return G[I]}for(var C=0;C<y.length;C++){var L=E(y[C].pointNumber);if(L)if(L.group){for(var O=0;O<L.childrenNodes.length;O++)T.push(L.childrenNodes[O].pointNumber);S[L.pointNumber-d.node._count]=!1}else T.push(L.pointNumber)}w=S.filter(Boolean).concat([T]),i.call("_guiRestyle",s,{"node.groups":[w]},a)},prepFn:function(y,w,d){o(y,w,d,v,c)}};f.init(v)}}P.name=r,P.baseLayoutAttrOverrides=A({hoverlabel:_.hoverlabel},"plot","nested"),P.plot=function(s){var a=M(s.calcdata,r)[0];l(s,a),P.updateFx(s)},P.clean=function(s,a,u,p){var c=p._has&&p._has(r),x=a._has&&a._has(r);c&&!x&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},P.updateFx=function(s){for(var a=0;a<s._fullData.length;a++)n(s,a)}},92930:function($,P,t){var A=t(68664),M=t(71828),l=t(28984).wrap,_=M.isArrayOrTypedArray,m=M.isIndex,f=t(21081);$.exports=function(o,e){var i=function(r){var n,s=r.node,a=r.link,u=[],p=_(a.color),c=_(a.customdata),x={},g={},h=a.colorscales.length;for(n=0;n<h;n++){var b=a.colorscales[n],v=f.extractScale(b,{cLetter:"c"}),y=f.makeColorScaleFunc(v);g[b.label]=y}var w=0;for(n=0;n<a.value.length;n++)a.source[n]>w&&(w=a.source[n]),a.target[n]>w&&(w=a.target[n]);var d,S=w+1;r.node._count=S;var T=r.node.groups,E={};for(n=0;n<T.length;n++){var C=T[n];for(d=0;d<C.length;d++){var L=C[d],O=S+n;E.hasOwnProperty(L)?M.warn("Node "+L+" is already part of a group."):E[L]=O}}var z={source:[],target:[]};for(n=0;n<a.value.length;n++){var G=a.value[n],I=a.source[n],H=a.target[n];if(G>0&&m(I,S)&&m(H,S)&&(!E.hasOwnProperty(I)||!E.hasOwnProperty(H)||E[I]!==E[H])){E.hasOwnProperty(H)&&(H=E[H]),E.hasOwnProperty(I)&&(I=E[I]),H=+H,x[I=+I]=x[H]=!0;var N="";a.label&&a.label[n]&&(N=a.label[n]);var F=null;N&&g.hasOwnProperty(N)&&(F=g[N]),u.push({pointNumber:n,label:N,color:p?a.color[n]:a.color,customdata:c?a.customdata[n]:a.customdata,concentrationscale:F,source:I,target:H,value:+G}),z.source.push(I),z.target.push(H)}}var V=S+T.length,W=_(s.color),te=_(s.customdata),Q=[];for(n=0;n<V;n++)if(x[n]){var X=s.label[n];Q.push({group:n>S-1,childrenNodes:[],pointNumber:n,label:X,color:W?s.color[n]:s.color,customdata:te?s.customdata[n]:s.customdata})}var q=!1;return function(Z,J,ne){for(var re=M.init2dArray(Z,0),ae=0;ae<Math.min(J.length,ne.length);ae++)if(M.isIndex(J[ae],Z)&&M.isIndex(ne[ae],Z)){if(J[ae]===ne[ae])return!0;re[J[ae]].push(ne[ae])}return A(re).components.some(function(ue){return ue.length>1})}(V,z.source,z.target)&&(q=!0),{circular:q,links:u,nodes:Q,groups:T,groupLookup:E}}(e);return l({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},85247:function($){$.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},26857:function($,P,t){var A=t(71828),M=t(39953),l=t(7901),_=t(84267),m=t(27670).c,f=t(38048),o=t(44467),e=t(85501);function i(r,n){function s(a,u){return A.coerce(r,n,M.link.colorscales,a,u)}s("label"),s("cmin"),s("cmax"),s("colorscale")}$.exports=function(r,n,s,a){function u(S,T){return A.coerce(r,n,M,S,T)}var p=A.extendDeep(a.hoverlabel,r.hoverlabel),c=r.node,x=o.newContainer(n,"node");function g(S,T){return A.coerce(c,x,M.node,S,T)}g("label"),g("groups"),g("x"),g("y"),g("pad"),g("thickness"),g("line.color"),g("line.width"),g("hoverinfo",r.hoverinfo),f(c,x,g,p),g("hovertemplate");var h=a.colorway;g("color",x.label.map(function(S,T){return l.addOpacity(function(E){return h[E%h.length]}(T),.8)})),g("customdata");var b=r.link||{},v=o.newContainer(n,"link");function y(S,T){return A.coerce(b,v,M.link,S,T)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",r.hoverinfo),f(b,v,y,p),y("hovertemplate");var w,d=_(a.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";y("color",A.repeat(d,v.value.length)),y("customdata"),e(b,v,{name:"colorscales",handleItemDefaults:i}),m(n,a,u),u("orientation"),u("valueformat"),u("valuesuffix"),x.x.length&&x.y.length&&(w="freeform"),u("arrangement",w),A.coerceFont(u,"textfont",A.extendFlat({},a.font)),n._length=null}},29396:function($,P,t){$.exports={attributes:t(39953),supplyDefaults:t(26857),calc:t(92930),plot:t(60436),moduleType:"trace",name:"sankey",basePlotModule:t(75536),selectPoints:t(84564),categories:["noOpacity"],meta:{}}},60436:function($,P,t){var A=t(39898),M=t(71828),l=M.numberFormat,_=t(3393),m=t(30211),f=t(7901),o=t(85247).cn,e=M._;function i(b){return b!==""}function r(b,v){return b.filter(function(y){return y.key===v.traceId})}function n(b,v){A.select(b).select("path").style("fill-opacity",v),A.select(b).select("rect").style("fill-opacity",v)}function s(b){A.select(b).select("text.name").style("fill","black")}function a(b){return function(v){return b.node.sourceLinks.indexOf(v.link)!==-1||b.node.targetLinks.indexOf(v.link)!==-1}}function u(b){return function(v){return v.node.sourceLinks.indexOf(b.link)!==-1||v.node.targetLinks.indexOf(b.link)!==-1}}function p(b,v,y){v&&y&&r(y,v).selectAll("."+o.sankeyLink).filter(a(v)).call(x.bind(0,v,y,!1))}function c(b,v,y){v&&y&&r(y,v).selectAll("."+o.sankeyLink).filter(a(v)).call(g.bind(0,v,y,!1))}function x(b,v,y,w){var d=w.datum().link.label;w.style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),d&&r(v,b).selectAll("."+o.sankeyLink).filter(function(S){return S.link.label===d}).style("fill-opacity",function(S){if(!S.link.concentrationscale)return .4}),y&&r(v,b).selectAll("."+o.sankeyNode).filter(u(b)).call(p)}function g(b,v,y,w){var d=w.datum().link.label;w.style("fill-opacity",function(S){return S.tinyColorAlpha}),d&&r(v,b).selectAll("."+o.sankeyLink).filter(function(S){return S.link.label===d}).style("fill-opacity",function(S){return S.tinyColorAlpha}),y&&r(v,b).selectAll(o.sankeyNode).filter(u(b)).call(c)}function h(b,v){var y=b.hoverlabel||{},w=M.nestedProperty(y,v).get();return!Array.isArray(w)&&w}$.exports=function(b,v){for(var y=b._fullLayout,w=y._paper,d=y._size,S=0;S<b._fullData.length;S++)if(b._fullData[S].visible&&b._fullData[S].type===o.sankey&&!b._fullData[S]._viewInitial){var T=b._fullData[S].node;b._fullData[S]._viewInitial={node:{groups:T.groups.slice(),x:T.x.slice(),y:T.y.slice()}}}var E=e(b,"source:")+" ",C=e(b,"target:")+" ",L=e(b,"concentration:")+" ",O=e(b,"incoming flow count:")+" ",z=e(b,"outgoing flow count:")+" ";_(b,w,v,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{linkEvents:{hover:function(G,I,H){b._fullLayout.hovermode!==!1&&(A.select(G).call(x.bind(0,I,H,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,b.emit("plotly_hover",{event:A.event,points:[I.link]})))},follow:function(G,I){if(b._fullLayout.hovermode!==!1){var H=I.link.trace.link;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){for(var N=[],F=0,V=0;V<I.flow.links.length;V++){var W=I.flow.links[V];if(b._fullLayout.hovermode!=="closest"||I.link.pointNumber===W.pointNumber){I.link.pointNumber===W.pointNumber&&(F=V),W.fullData=W.trace,H=I.link.trace.link;var te=X(W),Q={valueLabel:l(I.valueFormat)(W.value)+I.valueSuffix};N.push({x:te[0],y:te[1],name:Q.valueLabel,text:[W.label||"",E+W.source.label,C+W.target.label,W.concentrationscale?L+l("%0.2f")(W.flow.labelConcentration):""].filter(i).join("<br>"),color:h(H,"bgcolor")||f.addOpacity(W.color,1),borderColor:h(H,"bordercolor"),fontFamily:h(H,"font.family"),fontSize:h(H,"font.size"),fontColor:h(H,"font.color"),nameLength:h(H,"namelength"),textAlign:h(H,"align"),idealAlign:A.event.x<te[0]?"right":"left",hovertemplate:H.hovertemplate,hovertemplateLabels:Q,eventData:[W]})}}m.loneHover(N,{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:b,anchorIndex:F}).each(function(){I.link.concentrationscale||n(this,.65),s(this)})}}function X(q){var Z,J;q.circular?(Z=(q.circularPathData.leftInnerExtent+q.circularPathData.rightInnerExtent)/2,J=q.circularPathData.verticalFullExtent):(Z=(q.source.x1+q.target.x0)/2,J=(q.y0+q.y1)/2);var ne=[Z,J];return q.trace.orientation==="v"&&ne.reverse(),ne[0]+=I.parent.translateX,ne[1]+=I.parent.translateY,ne}},unhover:function(G,I,H){b._fullLayout.hovermode!==!1&&(A.select(G).call(g.bind(0,I,H,!0)),I.link.trace.link.hoverinfo!=="skip"&&(I.link.fullData=I.link.trace,b.emit("plotly_unhover",{event:A.event,points:[I.link]})),m.loneUnhover(y._hoverlayer.node()))},select:function(G,I){var H=I.link;H.originalEvent=A.event,b._hoverdata=[H],m.click(b,{target:!0})}},nodeEvents:{hover:function(G,I,H){b._fullLayout.hovermode!==!1&&(A.select(G).call(p,I,H),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,b.emit("plotly_hover",{event:A.event,points:[I.node]})))},follow:function(G,I){if(b._fullLayout.hovermode!==!1){var H=I.node.trace.node;if(H.hoverinfo!=="none"&&H.hoverinfo!=="skip"){var N=A.select(G).select("."+o.nodeRect),F=b._fullLayout._paperdiv.node().getBoundingClientRect(),V=N.node().getBoundingClientRect(),W=V.left-2-F.left,te=V.right+2-F.left,Q=V.top+V.height/4-F.top,X={valueLabel:l(I.valueFormat)(I.node.value)+I.valueSuffix};I.node.fullData=I.node.trace,b._fullLayout._calcInverseTransform(b);var q=b._fullLayout._invScaleX,Z=b._fullLayout._invScaleY,J=m.loneHover({x0:q*W,x1:q*te,y:Z*Q,name:l(I.valueFormat)(I.node.value)+I.valueSuffix,text:[I.node.label,O+I.node.targetLinks.length,z+I.node.sourceLinks.length].filter(i).join("<br>"),color:h(H,"bgcolor")||I.tinyColorHue,borderColor:h(H,"bordercolor"),fontFamily:h(H,"font.family"),fontSize:h(H,"font.size"),fontColor:h(H,"font.color"),nameLength:h(H,"namelength"),textAlign:h(H,"align"),idealAlign:"left",hovertemplate:H.hovertemplate,hovertemplateLabels:X,eventData:[I.node]},{container:y._hoverlayer.node(),outerContainer:y._paper.node(),gd:b});n(J,.85),s(J)}}},unhover:function(G,I,H){b._fullLayout.hovermode!==!1&&(A.select(G).call(c,I,H),I.node.trace.node.hoverinfo!=="skip"&&(I.node.fullData=I.node.trace,b.emit("plotly_unhover",{event:A.event,points:[I.node]})),m.loneUnhover(y._hoverlayer.node()))},select:function(G,I,H){var N=I.node;N.originalEvent=A.event,b._hoverdata=[N],A.select(G).call(c,I,H),m.click(b,{target:!0})}}})}},3393:function($,P,t){var A=t(49887),M=t(81684).k4,l=t(39898),_=t(30838),m=t(86781),f=t(85247),o=t(84267),e=t(7901),i=t(91424),r=t(71828),n=r.strTranslate,s=r.strRotate,a=t(28984),u=a.keyFun,p=a.repeat,c=a.unwrap,x=t(63893),g=t(73972),h=t(18783),b=h.CAP_SHIFT,v=h.LINE_SPACING;function y(V,W,te){var Q,X=c(W),q=X.trace,Z=q.domain,J=q.orientation==="h",ne=q.node.pad,re=q.node.thickness,ae=V.width*(Z.x[1]-Z.x[0]),ue=V.height*(Z.y[1]-Z.y[0]),he=X._nodes,de=X._links,xe=X.circular;(Q=xe?m.sankeyCircular().circularLinkGap(0):_.sankey()).iterations(f.sankeyIterations).size(J?[ae,ue]:[ue,ae]).nodeWidth(re).nodePadding(ne).nodeId(function(be){return be.pointNumber}).nodes(he).links(de);var me,ve,Le,Ae=Q();for(var we in Q.nodePadding()<ne&&r.warn("node.pad was reduced to ",Q.nodePadding()," to fit within the figure."),X._groupLookup){var se,oe=parseInt(X._groupLookup[we]);for(me=0;me<Ae.nodes.length;me++)if(Ae.nodes[me].pointNumber===oe){se=Ae.nodes[me];break}if(se){var fe={pointNumber:parseInt(we),x0:se.x0,x1:se.x1,y0:se.y0,y1:se.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(fe),se.childrenNodes.unshift(fe)}}if(function(){for(me=0;me<Ae.nodes.length;me++){var be,Ie,Be=Ae.nodes[me],ce={};for(ve=0;ve<Be.targetLinks.length;ve++)be=(Ie=Be.targetLinks[ve]).source.pointNumber+":"+Ie.target.pointNumber,ce.hasOwnProperty(be)||(ce[be]=[]),ce[be].push(Ie);var Te=Object.keys(ce);for(ve=0;ve<Te.length;ve++){var ye=ce[be=Te[ve]],Pe=0,Re={};for(Le=0;Le<ye.length;Le++)Re[(Ie=ye[Le]).label]||(Re[Ie.label]=0),Re[Ie.label]+=Ie.value,Pe+=Ie.value;for(Le=0;Le<ye.length;Le++)(Ie=ye[Le]).flow={value:Pe,labelConcentration:Re[Ie.label]/Pe,concentration:Ie.value/Pe,links:ye},Ie.concentrationscale&&(Ie.color=o(Ie.concentrationscale(Ie.flow.labelConcentration)))}var ze=0;for(ve=0;ve<Be.sourceLinks.length;ve++)ze+=Be.sourceLinks[ve].value;for(ve=0;ve<Be.sourceLinks.length;ve++)(Ie=Be.sourceLinks[ve]).concentrationOut=Ie.value/ze;var He=0;for(ve=0;ve<Be.targetLinks.length;ve++)He+=Be.targetLinks[ve].value;for(ve=0;ve<Be.targetLinks.length;ve++)(Ie=Be.targetLinks[ve]).concenrationIn=Ie.value/He}}(),q.node.x.length&&q.node.y.length){for(me=0;me<Math.min(q.node.x.length,q.node.y.length,Ae.nodes.length);me++)if(q.node.x[me]&&q.node.y[me]){var Se=[q.node.x[me]*ae,q.node.y[me]*ue];Ae.nodes[me].x0=Se[0]-re/2,Ae.nodes[me].x1=Se[0]+re/2;var Me=Ae.nodes[me].y1-Ae.nodes[me].y0;Ae.nodes[me].y0=Se[1]-Me/2,Ae.nodes[me].y1=Se[1]+Me/2}q.arrangement==="snap"&&function(be){var Ie,Be,ce=be.map(function(ze,He){return{x0:ze.x0,index:He}}).sort(function(ze,He){return ze.x0-He.x0}),Te=[],ye=-1,Pe=-1/0;for(me=0;me<ce.length;me++){var Re=be[ce[me].index];Re.x0>Pe+re&&(ye+=1,Ie=Re.x0),Pe=Re.x0,Te[ye]||(Te[ye]=[]),Te[ye].push(Re),Be=Ie-Re.x0,Re.x0+=Be,Re.x1+=Be}return Te}(he=Ae.nodes).forEach(function(be){var Ie,Be,ce,Te=0,ye=be.length;for(be.sort(function(Pe,Re){return Pe.y0-Re.y0}),ce=0;ce<ye;++ce)(Ie=be[ce]).y0>=Te||(Be=Te-Ie.y0)>1e-6&&(Ie.y0+=Be,Ie.y1+=Be),Te=Ie.y1+ne}),Q.update(Ae)}return{circular:xe,key:te,trace:q,guid:r.randstr(),horizontal:J,width:ae,height:ue,nodePad:q.node.pad,nodeLineColor:q.node.line.color,nodeLineWidth:q.node.line.width,linkLineColor:q.link.line.color,linkLineWidth:q.link.line.width,linkArrowLength:q.link.arrowlen,valueFormat:q.valueformat,valueSuffix:q.valuesuffix,textFont:q.textfont,translateX:Z.x[0]*V.width+V.margin.l,translateY:V.height-Z.y[1]*V.height+V.margin.t,dragParallel:J?ue:ae,dragPerpendicular:J?ae:ue,arrangement:q.arrangement,sankey:Q,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(V,W,te){var Q=o(W.color),X=W.source.label+"|"+W.target.label+"__"+te;return W.trace=V.trace,W.curveNumber=V.trace.index,{circular:V.circular,key:X,traceId:V.key,pointNumber:W.pointNumber,link:W,tinyColorHue:e.tinyRGB(Q),tinyColorAlpha:Q.getAlpha(),linkPath:d,linkLineColor:V.linkLineColor,linkLineWidth:V.linkLineWidth,linkArrowLength:V.linkArrowLength,valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,parent:V,interactionState:V.interactionState,flow:W.flow}}function d(){return function(V){var W=V.linkArrowLength;if(V.link.circular)return function(ve,Le){var Ae=ve.width/2,we=ve.circularPathData;return ve.circularLinkType==="top"?"M "+(we.targetX-Le)+" "+(we.targetY+Ae)+" L"+(we.rightInnerExtent-Le)+" "+(we.targetY+Ae)+"A"+(we.rightLargeArcRadius+Ae)+" "+(we.rightSmallArcRadius+Ae)+" 0 0 1 "+(we.rightFullExtent-Ae-Le)+" "+(we.targetY-we.rightSmallArcRadius)+"L"+(we.rightFullExtent-Ae-Le)+" "+we.verticalRightInnerExtent+"A"+(we.rightLargeArcRadius+Ae)+" "+(we.rightLargeArcRadius+Ae)+" 0 0 1 "+(we.rightInnerExtent-Le)+" "+(we.verticalFullExtent-Ae)+"L"+we.leftInnerExtent+" "+(we.verticalFullExtent-Ae)+"A"+(we.leftLargeArcRadius+Ae)+" "+(we.leftLargeArcRadius+Ae)+" 0 0 1 "+(we.leftFullExtent+Ae)+" "+we.verticalLeftInnerExtent+"L"+(we.leftFullExtent+Ae)+" "+(we.sourceY-we.leftSmallArcRadius)+"A"+(we.leftLargeArcRadius+Ae)+" "+(we.leftSmallArcRadius+Ae)+" 0 0 1 "+we.leftInnerExtent+" "+(we.sourceY+Ae)+"L"+we.sourceX+" "+(we.sourceY+Ae)+"L"+we.sourceX+" "+(we.sourceY-Ae)+"L"+we.leftInnerExtent+" "+(we.sourceY-Ae)+"A"+(we.leftLargeArcRadius-Ae)+" "+(we.leftSmallArcRadius-Ae)+" 0 0 0 "+(we.leftFullExtent-Ae)+" "+(we.sourceY-we.leftSmallArcRadius)+"L"+(we.leftFullExtent-Ae)+" "+we.verticalLeftInnerExtent+"A"+(we.leftLargeArcRadius-Ae)+" "+(we.leftLargeArcRadius-Ae)+" 0 0 0 "+we.leftInnerExtent+" "+(we.verticalFullExtent+Ae)+"L"+(we.rightInnerExtent-Le)+" "+(we.verticalFullExtent+Ae)+"A"+(we.rightLargeArcRadius-Ae)+" "+(we.rightLargeArcRadius-Ae)+" 0 0 0 "+(we.rightFullExtent+Ae-Le)+" "+we.verticalRightInnerExtent+"L"+(we.rightFullExtent+Ae-Le)+" "+(we.targetY-we.rightSmallArcRadius)+"A"+(we.rightLargeArcRadius-Ae)+" "+(we.rightSmallArcRadius-Ae)+" 0 0 0 "+(we.rightInnerExtent-Le)+" "+(we.targetY-Ae)+"L"+(we.targetX-Le)+" "+(we.targetY-Ae)+(Le>0?"L"+we.targetX+" "+we.targetY:"")+"Z":"M "+(we.targetX-Le)+" "+(we.targetY-Ae)+" L"+(we.rightInnerExtent-Le)+" "+(we.targetY-Ae)+"A"+(we.rightLargeArcRadius+Ae)+" "+(we.rightSmallArcRadius+Ae)+" 0 0 0 "+(we.rightFullExtent-Ae-Le)+" "+(we.targetY+we.rightSmallArcRadius)+"L"+(we.rightFullExtent-Ae-Le)+" "+we.verticalRightInnerExtent+"A"+(we.rightLargeArcRadius+Ae)+" "+(we.rightLargeArcRadius+Ae)+" 0 0 0 "+(we.rightInnerExtent-Le)+" "+(we.verticalFullExtent+Ae)+"L"+we.leftInnerExtent+" "+(we.verticalFullExtent+Ae)+"A"+(we.leftLargeArcRadius+Ae)+" "+(we.leftLargeArcRadius+Ae)+" 0 0 0 "+(we.leftFullExtent+Ae)+" "+we.verticalLeftInnerExtent+"L"+(we.leftFullExtent+Ae)+" "+(we.sourceY+we.leftSmallArcRadius)+"A"+(we.leftLargeArcRadius+Ae)+" "+(we.leftSmallArcRadius+Ae)+" 0 0 0 "+we.leftInnerExtent+" "+(we.sourceY-Ae)+"L"+we.sourceX+" "+(we.sourceY-Ae)+"L"+we.sourceX+" "+(we.sourceY+Ae)+"L"+we.leftInnerExtent+" "+(we.sourceY+Ae)+"A"+(we.leftLargeArcRadius-Ae)+" "+(we.leftSmallArcRadius-Ae)+" 0 0 1 "+(we.leftFullExtent-Ae)+" "+(we.sourceY+we.leftSmallArcRadius)+"L"+(we.leftFullExtent-Ae)+" "+we.verticalLeftInnerExtent+"A"+(we.leftLargeArcRadius-Ae)+" "+(we.leftLargeArcRadius-Ae)+" 0 0 1 "+we.leftInnerExtent+" "+(we.verticalFullExtent-Ae)+"L"+(we.rightInnerExtent-Le)+" "+(we.verticalFullExtent-Ae)+"A"+(we.rightLargeArcRadius-Ae)+" "+(we.rightLargeArcRadius-Ae)+" 0 0 1 "+(we.rightFullExtent+Ae-Le)+" "+we.verticalRightInnerExtent+"L"+(we.rightFullExtent+Ae-Le)+" "+(we.targetY+we.rightSmallArcRadius)+"A"+(we.rightLargeArcRadius-Ae)+" "+(we.rightSmallArcRadius-Ae)+" 0 0 1 "+(we.rightInnerExtent-Le)+" "+(we.targetY+Ae)+"L"+(we.targetX-Le)+" "+(we.targetY+Ae)+(Le>0?"L"+we.targetX+" "+we.targetY:"")+"Z"}(V.link,W);var te=Math.abs((V.link.target.x0-V.link.source.x1)/2);W>te&&(W=te);var Q=V.link.source.x1,X=V.link.target.x0-W,q=M(Q,X),Z=q(.5),J=q(.5),ne=V.link.y0-V.link.width/2,re=V.link.y0+V.link.width/2,ae=V.link.y1-V.link.width/2,ue=V.link.y1+V.link.width/2,he="M"+Q+","+ne,de="C"+Z+","+ne+" "+J+","+ae+" "+X+","+ae,xe="C"+J+","+ue+" "+Z+","+re+" "+Q+","+re,me=W>0?"L"+(X+W)+","+(ae+V.link.width/2):"";return he+de+(me+="L"+X+","+ue)+xe+"Z"}}function S(V,W){var te=o(W.color),Q=f.nodePadAcross,X=V.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var q=W.dx,Z=Math.max(.5,W.dy),J="node_"+W.pointNumber;return W.group&&(J=r.randstr()),W.trace=V.trace,W.curveNumber=V.trace.index,{index:W.pointNumber,key:J,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:V.key,trace:V.trace,node:W,nodePad:V.nodePad,nodeLineColor:V.nodeLineColor,nodeLineWidth:V.nodeLineWidth,textFont:V.textFont,size:V.horizontal?V.height:V.width,visibleWidth:Math.ceil(q),visibleHeight:Z,zoneX:-Q,zoneY:-X,zoneWidth:q+2*Q,zoneHeight:Z+2*X,labelY:V.horizontal?W.dy/2+1:W.dx/2+1,left:W.originalLayer===1,sizeAcross:V.width,forceLayouts:V.forceLayouts,horizontal:V.horizontal,darkBackground:te.getBrightness()<=128,tinyColorHue:e.tinyRGB(te),tinyColorAlpha:te.getAlpha(),valueFormat:V.valueFormat,valueSuffix:V.valueSuffix,sankey:V.sankey,graph:V.graph,arrangement:V.arrangement,uniqueNodeLabelPathId:[V.guid,V.key,J].join("_"),interactionState:V.interactionState,figure:V}}function T(V){V.attr("transform",function(W){return n(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}function E(V){V.call(T)}function C(V,W){V.call(E),W.attr("d",d())}function L(V){V.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}function O(V){return V.link.width>1||V.linkLineWidth>0}function z(V){return n(V.translateX,V.translateY)+(V.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function G(V,W,te){V.on(".basic",null).on("mouseover.basic",function(Q){Q.interactionState.dragInProgress||Q.partOfGroup||(te.hover(this,Q,W),Q.interactionState.hovered=[this,Q])}).on("mousemove.basic",function(Q){Q.interactionState.dragInProgress||Q.partOfGroup||(te.follow(this,Q),Q.interactionState.hovered=[this,Q])}).on("mouseout.basic",function(Q){Q.interactionState.dragInProgress||Q.partOfGroup||(te.unhover(this,Q,W),Q.interactionState.hovered=!1)}).on("click.basic",function(Q){Q.interactionState.hovered&&(te.unhover(this,Q,W),Q.interactionState.hovered=!1),Q.interactionState.dragInProgress||Q.partOfGroup||te.select(this,Q,W)})}function I(V,W,te,Q){var X=l.behavior.drag().origin(function(q){return{x:q.node.x0+q.visibleWidth/2,y:q.node.y0+q.visibleHeight/2}}).on("dragstart",function(q){if(q.arrangement!=="fixed"&&(r.ensureSingle(Q._fullLayout._infolayer,"g","dragcover",function(J){Q._fullLayout._dragCover=J}),r.raiseToTop(this),q.interactionState.dragInProgress=q.node,N(q.node),q.interactionState.hovered&&(te.nodeEvents.unhover.apply(0,q.interactionState.hovered),q.interactionState.hovered=!1),q.arrangement==="snap")){var Z=q.traceId+"|"+q.key;q.forceLayouts[Z]?q.forceLayouts[Z].alpha(1):function(J,ne,re,ae){(function(he){for(var de=0;de<he.length;de++)he[de].y=(he[de].y0+he[de].y1)/2,he[de].x=(he[de].x0+he[de].x1)/2})(re.graph.nodes);var ue=re.graph.nodes.filter(function(he){return he.originalX===re.node.originalX}).filter(function(he){return!he.partOfGroup});re.forceLayouts[ne]=A.forceSimulation(ue).alphaDecay(0).force("collide",A.forceCollide().radius(function(he){return he.dy/2+re.nodePad/2}).strength(1).iterations(f.forceIterations)).force("constrain",function(he,de,xe,me){return function(){for(var ve=0,Le=0;Le<xe.length;Le++){var Ae=xe[Le];Ae===me.interactionState.dragInProgress?(Ae.x=Ae.lastDraggedX,Ae.y=Ae.lastDraggedY):(Ae.vx=(Ae.originalX-Ae.x)/f.forceTicksPerFrame,Ae.y=Math.min(me.size-Ae.dy/2,Math.max(Ae.dy/2,Ae.y))),ve=Math.max(ve,Math.abs(Ae.vx),Math.abs(Ae.vy))}!me.interactionState.dragInProgress&&ve<.1&&me.forceLayouts[de].alpha()>0&&me.forceLayouts[de].alpha(0)}}(0,ne,ue,re)).stop()}(0,Z,q),function(J,ne,re,ae,ue){window.requestAnimationFrame(function he(){var de;for(de=0;de<f.forceTicksPerFrame;de++)re.forceLayouts[ae].tick();if(function(me){for(var ve=0;ve<me.length;ve++)me[ve].y0=me[ve].y-me[ve].dy/2,me[ve].y1=me[ve].y0+me[ve].dy,me[ve].x0=me[ve].x-me[ve].dx/2,me[ve].x1=me[ve].x0+me[ve].dx}(re.graph.nodes),re.sankey.update(re.graph),C(J.filter(F(re)),ne),re.forceLayouts[ae].alpha()>0)window.requestAnimationFrame(he);else{var xe=re.node.originalX;re.node.x0=xe-re.visibleWidth/2,re.node.x1=xe+re.visibleWidth/2,H(re,ue)}})}(V,W,q,Z,Q)}}).on("drag",function(q){if(q.arrangement!=="fixed"){var Z=l.event.x,J=l.event.y;q.arrangement==="snap"?(q.node.x0=Z-q.visibleWidth/2,q.node.x1=Z+q.visibleWidth/2,q.node.y0=J-q.visibleHeight/2,q.node.y1=J+q.visibleHeight/2):(q.arrangement==="freeform"&&(q.node.x0=Z-q.visibleWidth/2,q.node.x1=Z+q.visibleWidth/2),J=Math.max(0,Math.min(q.size-q.visibleHeight/2,J)),q.node.y0=J-q.visibleHeight/2,q.node.y1=J+q.visibleHeight/2),N(q.node),q.arrangement!=="snap"&&(q.sankey.update(q.graph),C(V.filter(F(q)),W))}}).on("dragend",function(q){if(q.arrangement!=="fixed"){q.interactionState.dragInProgress=!1;for(var Z=0;Z<q.node.childrenNodes.length;Z++)q.node.childrenNodes[Z].x=q.node.x,q.node.childrenNodes[Z].y=q.node.y;q.arrangement!=="snap"&&H(q,Q)}});V.on(".drag",null).call(X)}function H(V,W){for(var te=[],Q=[],X=0;X<V.graph.nodes.length;X++){var q=(V.graph.nodes[X].x0+V.graph.nodes[X].x1)/2,Z=(V.graph.nodes[X].y0+V.graph.nodes[X].y1)/2;te.push(q/V.figure.width),Q.push(Z/V.figure.height)}g.call("_guiRestyle",W,{"node.x":[te],"node.y":[Q]},V.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}function N(V){V.lastDraggedX=V.x0+V.dx/2,V.lastDraggedY=V.y0+V.dy/2}function F(V){return function(W){return W.node.originalX===V.node.originalX}}$.exports=function(V,W,te,Q,X){var q=V._context.staticPlot,Z=!1;r.ensureSingle(V._fullLayout._infolayer,"g","first-render",function(){Z=!0});var J=V._fullLayout._dragCover,ne=te.filter(function(ve){return c(ve).trace.visible}).map(y.bind(null,Q)),re=W.selectAll("."+f.cn.sankey).data(ne,u);re.exit().remove(),re.enter().append("g").classed(f.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",q?"none":"auto").attr("transform",z),re.each(function(ve,Le){V._fullData[Le]._sankey=ve;var Ae="bgsankey-"+ve.trace.uid+"-"+Le;r.ensureSingle(V._fullLayout._draggers,"rect",Ae),V._fullData[Le]._bgRect=l.select("."+Ae),V._fullData[Le]._bgRect.style("pointer-events",q?"none":"all").attr("width",ve.width).attr("height",ve.height).attr("x",ve.translateX).attr("y",ve.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),re.transition().ease(f.ease).duration(f.duration).attr("transform",z);var ae=re.selectAll("."+f.cn.sankeyLinks).data(p,u);ae.enter().append("g").classed(f.cn.sankeyLinks,!0).style("fill","none");var ue=ae.selectAll("."+f.cn.sankeyLink).data(function(ve){return ve.graph.links.filter(function(Le){return Le.value}).map(w.bind(null,ve))},u);ue.enter().append("path").classed(f.cn.sankeyLink,!0).call(G,re,X.linkEvents),ue.style("stroke",function(ve){return O(ve)?e.tinyRGB(o(ve.linkLineColor)):ve.tinyColorHue}).style("stroke-opacity",function(ve){return O(ve)?e.opacity(ve.linkLineColor):ve.tinyColorAlpha}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}).style("stroke-width",function(ve){return O(ve)?ve.linkLineWidth:1}).attr("d",d()),ue.style("opacity",function(){return V._context.staticPlot||Z||J?1:0}).transition().ease(f.ease).duration(f.duration).style("opacity",1),ue.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var he=re.selectAll("."+f.cn.sankeyNodeSet).data(p,u);he.enter().append("g").classed(f.cn.sankeyNodeSet,!0),he.style("cursor",function(ve){switch(ve.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=he.selectAll("."+f.cn.sankeyNode).data(function(ve){var Le=ve.graph.nodes;return function(Ae){var we,se=[];for(we=0;we<Ae.length;we++)Ae[we].originalX=(Ae[we].x0+Ae[we].x1)/2,Ae[we].originalY=(Ae[we].y0+Ae[we].y1)/2,se.indexOf(Ae[we].originalX)===-1&&se.push(Ae[we].originalX);for(se.sort(function(oe,fe){return oe-fe}),we=0;we<Ae.length;we++)Ae[we].originalLayerIndex=se.indexOf(Ae[we].originalX),Ae[we].originalLayer=Ae[we].originalLayerIndex/(se.length-1)}(Le),Le.map(S.bind(null,ve))},u);de.enter().append("g").classed(f.cn.sankeyNode,!0).call(T).style("opacity",function(ve){return!V._context.staticPlot&&!Z||ve.partOfGroup?0:1}),de.call(G,re,X.nodeEvents).call(I,ue,X,V),de.transition().ease(f.ease).duration(f.duration).call(T).style("opacity",function(ve){return ve.partOfGroup?0:1}),de.exit().transition().ease(f.ease).duration(f.duration).style("opacity",0).remove();var xe=de.selectAll("."+f.cn.nodeRect).data(p);xe.enter().append("rect").classed(f.cn.nodeRect,!0).call(L),xe.style("stroke-width",function(ve){return ve.nodeLineWidth}).style("stroke",function(ve){return e.tinyRGB(o(ve.nodeLineColor))}).style("stroke-opacity",function(ve){return e.opacity(ve.nodeLineColor)}).style("fill",function(ve){return ve.tinyColorHue}).style("fill-opacity",function(ve){return ve.tinyColorAlpha}),xe.transition().ease(f.ease).duration(f.duration).call(L);var me=de.selectAll("."+f.cn.nodeLabel).data(p);me.enter().append("text").classed(f.cn.nodeLabel,!0).style("cursor","default"),me.attr("data-notex",1).text(function(ve){return ve.node.label}).each(function(ve){var Le=l.select(this);i.font(Le,ve.textFont),x.convertToTspans(Le,V)}).style("text-shadow",x.makeTextShadow(V._fullLayout.paper_bgcolor)).attr("text-anchor",function(ve){return ve.horizontal&&ve.left?"end":"start"}).attr("transform",function(ve){var Le=l.select(this),Ae=x.lineCount(Le),we=ve.textFont.size*((Ae-1)*v-b),se=ve.nodeLineWidth/2+3,oe=((ve.horizontal?ve.visibleHeight:ve.visibleWidth)-we)/2;ve.horizontal&&(ve.left?se=-se:se+=ve.visibleWidth);var fe=ve.horizontal?"":"scale(-1,1)"+s(90);return n(ve.horizontal?se:oe,ve.horizontal?oe:se)+fe}),me.transition().ease(f.ease).duration(f.duration)}},84564:function($){$.exports=function(P,t){for(var A=[],M=P.cd[0].trace,l=M._sankey.graph.nodes,_=0;_<l.length;_++){var m=l[_];if(!m.partOfGroup){var f=[(m.x0+m.x1)/2,(m.y0+m.y1)/2];M.orientation==="v"&&f.reverse(),t&&t.contains(f,!1,_,P)&&A.push({pointNumber:m.pointNumber})}}return A}},75225:function($,P,t){var A=t(71828);$.exports=function(M,l){for(var _=0;_<M.length;_++)M[_].i=_;A.mergeArray(l.text,M,"tx"),A.mergeArray(l.texttemplate,M,"txt"),A.mergeArray(l.hovertext,M,"htx"),A.mergeArray(l.customdata,M,"data"),A.mergeArray(l.textposition,M,"tp"),l.textfont&&(A.mergeArrayCastPositive(l.textfont.size,M,"ts"),A.mergeArray(l.textfont.color,M,"tc"),A.mergeArray(l.textfont.family,M,"tf"));var m=l.marker;if(m){A.mergeArrayCastPositive(m.size,M,"ms"),A.mergeArrayCastPositive(m.opacity,M,"mo"),A.mergeArray(m.symbol,M,"mx"),A.mergeArray(m.angle,M,"ma"),A.mergeArray(m.standoff,M,"mf"),A.mergeArray(m.color,M,"mc");var f=m.line;m.line&&(A.mergeArray(f.color,M,"mlc"),A.mergeArrayCastPositive(f.width,M,"mlw"));var o=m.gradient;o&&o.type!=="none"&&(A.mergeArray(o.type,M,"mgt"),A.mergeArray(o.color,M,"mgc"))}}},82196:function($,P,t){var A=t(12663).axisHoverFormat,M=t(5386).si,l=t(5386).fF,_=t(50693),m=t(41940),f=t(79952).P,o=t(79952).u,e=t(91424),i=t(47581),r=t(1426).extendFlat;$.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:A("x"),yhoverformat:A("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:M({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:l({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},f,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:o,marker:r({symbol:{valType:"enumerated",values:e.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},_("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},_("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:m({editType:"calc",colorEditType:"style",arrayOk:!0})}},47761:function($,P,t){var A=t(92770),M=t(71828),l=t(89298),_=t(42973),m=t(50606).BADNUM,f=t(34098),o=t(36922),e=t(75225),i=t(66279);function r(p,c,x,g,h,b,v){var y=c._length,w=p._fullLayout,d=x._id,S=g._id,T=w._firstScatter[a(c)]===c.uid,E=(u(c,w,x,g)||{}).orientation,C=c.fill;x._minDtick=0,g._minDtick=0;var L={padded:!0},O={padded:!0};v&&(L.ppad=O.ppad=v);var z=y<2||h[0]!==h[y-1]||b[0]!==b[y-1];z&&(C==="tozerox"||C==="tonextx"&&(T||E==="h"))?L.tozero=!0:(c.error_y||{}).visible||C!=="tonexty"&&C!=="tozeroy"&&(f.hasMarkers(c)||f.hasText(c))||(L.padded=!1,L.ppad=0),z&&(C==="tozeroy"||C==="tonexty"&&(T||E==="v"))?O.tozero=!0:C!=="tonextx"&&C!=="tozerox"||(O.padded=!1),d&&(c._extremes[d]=l.findExtremes(x,h,L)),S&&(c._extremes[S]=l.findExtremes(g,b,O))}function n(p,c){if(f.hasMarkers(p)){var x,g=p.marker,h=1.6*(p.marker.sizeref||1);if(x=p.marker.sizemode==="area"?function(d){return Math.max(Math.sqrt((d||0)/h),3)}:function(d){return Math.max((d||0)/h,3)},M.isArrayOrTypedArray(g.size)){var b={type:"linear"};l.setConvert(b);for(var v=b.makeCalcdata(p.marker,"size"),y=new Array(c),w=0;w<c;w++)y[w]=x(v[w]);return y}return x(g.size)}}function s(p,c){var x=a(c),g=p._firstScatter;g[x]||(g[x]=c.uid)}function a(p){var c=p.stackgroup;return p.xaxis+p.yaxis+p.type+(c?"-"+c:"")}function u(p,c,x,g){var h=p.stackgroup;if(h){var b=c._scatterStackOpts[x._id+g._id][h],v=b.orientation==="v"?g:x;return v.type==="linear"||v.type==="log"?b:void 0}}$.exports={calc:function(p,c){var x,g,h,b,v,y,w=p._fullLayout,d=c._xA=l.getFromId(p,c.xaxis||"x","x"),S=c._yA=l.getFromId(p,c.yaxis||"y","y"),T=d.makeCalcdata(c,"x"),E=S.makeCalcdata(c,"y"),C=_(c,d,"x",T),L=_(c,S,"y",E),O=C.vals,z=L.vals,G=c._length,I=new Array(G),H=c.ids,N=u(c,w,d,S),F=!1;s(w,c);var V,W="x",te="y";N?(M.pushUnique(N.traceIndices,c._expandedIndex),(x=N.orientation==="v")?(te="s",V="x"):(W="s",V="y"),v=N.stackgaps==="interpolate"):r(p,c,d,S,O,z,n(c,G));var Q=!!c.xperiodalignment,X=!!c.yperiodalignment;for(g=0;g<G;g++){var q=I[g]={},Z=A(O[g]),J=A(z[g]);Z&&J?(q[W]=O[g],q[te]=z[g],Q&&(q.orig_x=T[g],q.xEnd=C.ends[g],q.xStart=C.starts[g]),X&&(q.orig_y=E[g],q.yEnd=L.ends[g],q.yStart=L.starts[g])):N&&(x?Z:J)?(q[V]=x?O[g]:z[g],q.gap=!0,v?(q.s=m,F=!0):q.s=0):q[W]=q[te]=m,H&&(q.id=String(H[g]))}if(e(I,c),o(p,c),i(I,c),N){for(g=0;g<I.length;)I[g][V]===m?I.splice(g,1):g++;if(M.sort(I,function(ue,he){return ue[V]-he[V]||ue.i-he.i}),F){for(g=0;g<I.length-1&&I[g].gap;)g++;for((y=I[g].s)||(y=I[g].s=0),h=0;h<g;h++)I[h].s=y;for(b=I.length-1;b>g&&I[b].gap;)b--;for(y=I[b].s,h=I.length-1;h>b;h--)I[h].s=y;for(;g<b;)if(I[++g].gap){for(h=g+1;I[h].gap;)h++;for(var ne=I[g-1][V],re=I[g-1].s,ae=(I[h].s-re)/(I[h][V]-ne);g<h;)I[g].s=re+(I[g][V]-ne)*ae,g++}}}return I},calcMarkerSize:n,calcAxisExpansion:r,setFirstScatter:s,getStackOpts:u}},66279:function($,P,t){var A=t(71828);$.exports=function(M,l){A.isArrayOrTypedArray(l.selectedpoints)&&A.tagSelected(M,l)}},36922:function($,P,t){var A=t(52075).hasColorscale,M=t(78803),l=t(34098);$.exports=function(_,m){l.hasLines(m)&&A(m,"line")&&M(_,m,{vals:m.line.color,containerStr:"line",cLetter:"c"}),l.hasMarkers(m)&&(A(m,"marker")&&M(_,m,{vals:m.marker.color,containerStr:"marker",cLetter:"c"}),A(m,"marker.line")&&M(_,m,{vals:m.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},47581:function($){$.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},72626:function($,P,t){var A=t(47761),M=t(11661).setGroupPositions;function l(_,m,f,o,e,i,r){e[o]=!0;var n={i:null,gap:!0,s:0};if(n[r]=f,_.splice(m,0,n),m&&f===_[m-1][r]){var s=_[m-1];n.s=s.s,n.i=s.i,n.gap=s.gap}else i&&(n.s=function(a,u,p,c){var x=a[u-1],g=a[u+1];return g?x?x.s+(g.s-x.s)*(p-x[c])/(g[c]-x[c]):g.s:x.s}(_,m,f,r));m||(_[0].t=_[1].t,_[0].trace=_[1].trace,delete _[1].t,delete _[1].trace)}$.exports=function(_,m){_._fullLayout.scattermode==="group"&&function(V,W){for(var te=W.xaxis,Q=W.yaxis,X=V._fullLayout,q=V._fullData,Z=V.calcdata,J=[],ne=[],re=0;re<q.length;re++){var ae=q[re];ae.visible===!0&&ae.type==="scatter"&&ae.xaxis===te._id&&ae.yaxis===Q._id&&(ae.orientation==="h"?J.push(Z[re]):ae.orientation==="v"&&ne.push(Z[re]))}var ue={mode:X.scattermode,gap:X.scattergap};M(V,te,Q,ne,ue),M(V,Q,te,J,ue)}(_,m);var f=m.xaxis,o=m.yaxis,e=f._id+o._id,i=_._fullLayout._scatterStackOpts[e];if(i){var r,n,s,a,u,p,c,x,g,h,b,v,y,w,d,S=_.calcdata;for(var T in i){var E=(h=i[T]).traceIndices;if(E.length){for(b=h.stackgaps==="interpolate",v=h.groupnorm,h.orientation==="v"?(y="x",w="y"):(y="y",w="x"),d=new Array(E.length),r=0;r<d.length;r++)d[r]=!1;p=S[E[0]];var C=new Array(p.length);for(r=0;r<p.length;r++)C[r]=p[r][y];for(r=1;r<E.length;r++){for(u=S[E[r]],n=s=0;n<u.length;n++){for(c=u[n][y];c>C[s]&&s<C.length;s++)l(u,n,C[s],r,d,b,y),n++;if(c!==C[s]){for(a=0;a<r;a++)l(S[E[a]],s,c,a,d,b,y);C.splice(s,0,c)}s++}for(;s<C.length;s++)l(u,n,C[s],r,d,b,y),n++}var L=C.length;for(n=0;n<p.length;n++){for(x=p[n][w]=p[n].s,r=1;r<E.length;r++)(u=S[E[r]])[0].trace._rawLength=u[0].trace._length,u[0].trace._length=L,x+=u[n].s,u[n][w]=x;if(v)for(g=(v==="fraction"?x:x/100)||1,r=0;r<E.length;r++){var O=S[E[r]][n];O[w]/=g,O.sNorm=O.s/g}}for(r=0;r<E.length;r++){var z=(u=S[E[r]])[0].trace,G=A.calcMarkerSize(z,z._rawLength),I=Array.isArray(G);if(G&&d[r]||I){var H=G;for(G=new Array(L),n=0;n<L;n++)G[n]=u[n].gap?0:I?H[u[n].i]:H}var N=new Array(L),F=new Array(L);for(n=0;n<L;n++)N[n]=u[n].x,F[n]=u[n].y;A.calcAxisExpansion(_,z,f,o,N,F,G),u[0].t.orientation=h.orientation}}}}}},34936:function($,P,t){var A=t(71828),M=t(26125),l=t(82196);$.exports=function(_,m){var f,o,e;function i(u){return A.coerce(o._input,o,l,u)}if(m.scattermode==="group")for(e=0;e<_.length;e++)(o=_[e]).type==="scatter"&&(f=o._input,M(f,o,m,i));for(e=0;e<_.length;e++){var r=_[e];if(r.type==="scatter"){var n=r.fill;if(n!=="none"&&n!=="toself"&&(r.opacity=void 0,n==="tonexty"||n==="tonextx"))for(var s=e-1;s>=0;s--){var a=_[s];if(a.type==="scatter"&&a.xaxis===r.xaxis&&a.yaxis===r.yaxis){a.opacity=void 0;break}}}}}},17438:function($,P,t){var A=t(71828),M=t(73972),l=t(82196),_=t(47581),m=t(34098),f=t(67513),o=t(73927),e=t(565),i=t(49508),r=t(11058),n=t(94039),s=t(82410),a=t(28908),u=t(71828).coercePattern;$.exports=function(p,c,x,g){function h(E,C){return A.coerce(p,c,l,E,C)}var b=f(p,c,g,h);if(b||(c.visible=!1),c.visible){o(p,c,g,h),h("xhoverformat"),h("yhoverformat");var v=e(p,c,g,h);g.scattermode==="group"&&c.orientation===void 0&&h("orientation","v");var y=!v&&b<_.PTS_LINESONLY?"lines+markers":"lines";h("text"),h("hovertext"),h("mode",y),m.hasLines(c)&&(r(p,c,x,g,h,{backoff:!0}),n(p,c,h),h("connectgaps"),h("line.simplify")),m.hasMarkers(c)&&i(p,c,x,g,h,{gradient:!0}),m.hasText(c)&&(h("texttemplate"),s(p,c,g,h));var w=[];(m.hasMarkers(c)||m.hasText(c))&&(h("cliponaxis"),h("marker.maxdisplayed"),w.push("points")),h("fill",v?v.fillDflt:"none"),c.fill!=="none"&&(a(p,c,x,h),m.hasLines(c)||n(p,c,h),u(h,"fillpattern",c.fillcolor,!1));var d=(c.line||{}).color,S=(c.marker||{}).color;c.fill!=="tonext"&&c.fill!=="toself"||w.push("fills"),h("hoveron",w.join("+")||"points"),c.hoveron!=="fills"&&h("hovertemplate");var T=M.getComponentMethod("errorbars","supplyDefaults");T(p,c,d||S||x,{axis:"y"}),T(p,c,d||S||x,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(c,h)}}},28908:function($,P,t){var A=t(7901),M=t(71828).isArrayOrTypedArray;$.exports=function(l,_,m,f){var o=!1;if(_.marker){var e=_.marker.color,i=(_.marker.line||{}).color;e&&!M(e)?o=e:i&&!M(i)&&(o=i)}f("fillcolor",A.addOpacity((_.line||{}).color||o||m,.5))}},8225:function($,P,t){var A=t(89298);$.exports=function(M,l,_){var m={},f={_fullLayout:_},o=A.getFromTrace(f,l,"x"),e=A.getFromTrace(f,l,"y"),i=M.orig_x;i===void 0&&(i=M.x);var r=M.orig_y;return r===void 0&&(r=M.y),m.xLabel=A.tickText(o,o.c2l(i),!0).text,m.yLabel=A.tickText(e,e.c2l(r),!0).text,m}},34603:function($,P,t){var A=t(7901),M=t(34098);$.exports=function(l,_){var m,f;if(l.mode==="lines")return(m=l.line.color)&&A.opacity(m)?m:l.fillcolor;if(l.mode==="none")return l.fill?l.fillcolor:"";var o=_.mcc||(l.marker||{}).color,e=_.mlcc||((l.marker||{}).line||{}).color;return(f=o&&A.opacity(o)?o:e&&A.opacity(e)&&(_.mlw||((l.marker||{}).line||{}).width)?e:"")?A.opacity(f)<.3?A.addOpacity(f,.3):f:(m=(l.line||{}).color)&&A.opacity(m)&&M.hasLines(l)&&l.line.width?m:l.fillcolor}},26125:function($,P,t){var A=t(99082).getAxisGroup;$.exports=function(M,l,_,m){var f=l.orientation,o=l[{v:"x",h:"y"}[f]+"axis"],e=A(_,o)+f,i=_._alignmentOpts||{},r=m("alignmentgroup"),n=i[e];n||(n=i[e]={});var s=n[r];s?s.traces.push(l):s=n[r]={traces:[l],alignmentIndex:Object.keys(n).length,offsetGroups:{}};var a=m("offsetgroup"),u=s.offsetGroups,p=u[a];a&&(p||(p=u[a]={offsetIndex:Object.keys(u).length}),l._offsetIndex=p.offsetIndex)}},33720:function($,P,t){var A=t(71828),M=t(30211),l=t(73972),_=t(34603),m=t(7901),f=A.fillText;$.exports=function(o,e,i,r){var n=o.cd,s=n[0].trace,a=o.xa,u=o.ya,p=a.c2p(e),c=u.c2p(i),x=[p,c],g=s.hoveron||"",h=s.mode.indexOf("markers")!==-1?3:.5,b=!!s.xperiodalignment,v=!!s.yperiodalignment;if(g.indexOf("points")!==-1){var y=function(de){var xe=Math.max(h,de.mrc||0),me=a.c2p(de.x)-p,ve=u.c2p(de.y)-c;return Math.max(Math.sqrt(me*me+ve*ve)-xe,1-h/xe)},w=M.getDistanceFunction(r,function(de){if(b){var xe=a.c2p(de.xStart),me=a.c2p(de.xEnd);return p>=Math.min(xe,me)&&p<=Math.max(xe,me)?0:1/0}var ve=Math.max(3,de.mrc||0),Le=1-1/ve,Ae=Math.abs(a.c2p(de.x)-p);return Ae<ve?Le*Ae/ve:Ae-ve+Le},function(de){if(v){var xe=u.c2p(de.yStart),me=u.c2p(de.yEnd);return c>=Math.min(xe,me)&&c<=Math.max(xe,me)?0:1/0}var ve=Math.max(3,de.mrc||0),Le=1-1/ve,Ae=Math.abs(u.c2p(de.y)-c);return Ae<ve?Le*Ae/ve:Ae-ve+Le},y);if(M.getClosest(n,w,o),o.index!==!1){var d=n[o.index],S=a.c2p(d.x,!0),T=u.c2p(d.y,!0),E=d.mrc||1;o.index=d.i;var C=n[0].t.orientation,L=C&&(d.sNorm||d.s),O=C==="h"?L:d.orig_x!==void 0?d.orig_x:d.x,z=C==="v"?L:d.orig_y!==void 0?d.orig_y:d.y;return A.extendFlat(o,{color:_(s,d),x0:S-E,x1:S+E,xLabelVal:O,y0:T-E,y1:T+E,yLabelVal:z,spikeDistance:y(d),hovertemplate:s.hovertemplate}),f(d,s,o),l.getComponentMethod("errorbars","hoverInfo")(d,s,o),[o]}}if(g.indexOf("fills")!==-1&&s._polygons){var G,I,H,N,F,V,W,te,Q,X=s._polygons,q=[],Z=!1,J=1/0,ne=-1/0,re=1/0,ae=-1/0;for(G=0;G<X.length;G++)(H=X[G]).contains(x)&&(Z=!Z,q.push(H),re=Math.min(re,H.ymin),ae=Math.max(ae,H.ymax));if(Z){var ue=((re=Math.max(re,0))+(ae=Math.min(ae,u._length)))/2;for(G=0;G<q.length;G++)for(N=q[G].pts,I=1;I<N.length;I++)(te=N[I-1][1])>ue!=(Q=N[I][1])>=ue&&(V=N[I-1][0],W=N[I][0],Q-te&&(F=V+(W-V)*(ue-te)/(Q-te),J=Math.min(J,F),ne=Math.max(ne,F)));J=Math.max(J,0),ne=Math.min(ne,a._length);var he=m.defaultLine;return m.opacity(s.fillcolor)?he=s.fillcolor:m.opacity((s.line||{}).color)&&(he=s.line.color),A.extendFlat(o,{distance:o.maxHoverDistance,x0:J,x1:ne,y0:ue,y1:ue,color:he,hovertemplate:!1}),delete o.index,s.text&&!Array.isArray(s.text)?o.text=String(s.text):o.text=s.name,[o]}}}},67368:function($,P,t){var A=t(34098);$.exports={hasLines:A.hasLines,hasMarkers:A.hasMarkers,hasText:A.hasText,isBubble:A.isBubble,attributes:t(82196),layoutAttributes:t(21479),supplyDefaults:t(17438),crossTraceDefaults:t(34936),supplyLayoutDefaults:t(79334),calc:t(47761).calc,crossTraceCalc:t(72626),arraysToCalcdata:t(75225),plot:t(32663),colorbar:t(4898),formatLabels:t(8225),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(33720),selectPoints:t(98002),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(93612),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},21479:function($){$.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},79334:function($,P,t){var A=t(71828),M=t(21479);$.exports=function(l,_){var m,f=_.barmode==="group";_.scattermode==="group"&&(m=f?_.bargap:.2,A.coerce(l,_,M,"scattergap",m))}},11058:function($,P,t){var A=t(71828).isArrayOrTypedArray,M=t(52075).hasColorscale,l=t(1586);$.exports=function(_,m,f,o,e,i){i||(i={});var r=(_.marker||{}).color;e("line.color",f),M(_,"line")?l(_,m,o,e,{prefix:"line.",cLetter:"c"}):e("line.color",!A(r)&&r||f),e("line.width"),i.noDash||e("line.dash"),i.backoff&&e("line.backoff")}},34621:function($,P,t){var A=t(91424),M=t(50606),l=M.BADNUM,_=M.LOG_CLIP,m=_+.5,f=_-.5,o=t(71828),e=o.segmentsIntersect,i=o.constrain,r=t(47581);$.exports=function(n,s){var a,u,p,c,x,g,h,b,v,y,w,d,S,T,E,C,L,O,z=s.trace||{},G=s.xaxis,I=s.yaxis,H=G.type==="log",N=I.type==="log",F=G._length,V=I._length,W=s.backoff,te=z.marker,Q=s.connectGaps,X=s.baseTolerance,q=s.shape,Z=q==="linear",J=z.fill&&z.fill!=="none",ne=[],re=r.minTolerance,ae=n.length,ue=new Array(ae),he=0;function de(St){var qe=n[St];if(!qe)return!1;var Xe=s.linearized?G.l2p(qe.x):G.c2p(qe.x),Ve=s.linearized?I.l2p(qe.y):I.c2p(qe.y);if(Xe===l){if(H&&(Xe=G.c2p(qe.x,!0)),Xe===l)return!1;N&&Ve===l&&(Xe*=Math.abs(G._m*V*(G._m>0?m:f)/(I._m*F*(I._m>0?m:f)))),Xe*=1e3}if(Ve===l){if(N&&(Ve=I.c2p(qe.y,!0)),Ve===l)return!1;Ve*=1e3}return[Xe,Ve]}function xe(St,qe,Xe,Ve){var Ze=Xe-St,st=Ve-qe,nt=.5-St,De=.5-qe,Fe=Ze*Ze+st*st,rt=Ze*nt+st*De;if(rt>0&&rt<Fe){var tt=nt*st-De*Ze;if(tt*tt<Fe)return!0}}function me(St,qe){var Xe=St[0]/F,Ve=St[1]/V,Ze=Math.max(0,-Xe,Xe-1,-Ve,Ve-1);return Ze&&L!==void 0&&xe(Xe,Ve,L,O)&&(Ze=0),Ze&&qe&&xe(Xe,Ve,qe[0]/F,qe[1]/V)&&(Ze=0),(1+r.toleranceGrowth*Ze)*X}function ve(St,qe){var Xe=St[0]-qe[0],Ve=St[1]-qe[1];return Math.sqrt(Xe*Xe+Ve*Ve)}var Le,Ae,we,se,oe,fe,Se,Me=r.maxScreensAway,be=-F*Me,Ie=F*(1+Me),Be=-V*Me,ce=V*(1+Me),Te=[[be,Be,Ie,Be],[Ie,Be,Ie,ce],[Ie,ce,be,ce],[be,ce,be,Be]];function ye(St){if(St[0]<be||St[0]>Ie||St[1]<Be||St[1]>ce)return[i(St[0],be,Ie),i(St[1],Be,ce)]}function Pe(St,qe){return St[0]===qe[0]&&(St[0]===be||St[0]===Ie)||St[1]===qe[1]&&(St[1]===Be||St[1]===ce)||void 0}function Re(St,qe,Xe){return function(Ve,Ze){var st=ye(Ve),nt=ye(Ze),De=[];if(st&&nt&&Pe(st,nt))return De;st&&De.push(st),nt&&De.push(nt);var Fe=2*o.constrain((Ve[St]+Ze[St])/2,qe,Xe)-((st||Ve)[St]+(nt||Ze)[St]);return Fe&&((st&&nt?Fe>0==st[St]>nt[St]?st:nt:st||nt)[St]+=Fe),De}}function ze(St){var qe=St[0],Xe=St[1],Ve=qe===ue[he-1][0],Ze=Xe===ue[he-1][1];if(!Ve||!Ze)if(he>1){var st=qe===ue[he-2][0],nt=Xe===ue[he-2][1];Ve&&(qe===be||qe===Ie)&&st?nt?he--:ue[he-1]=St:Ze&&(Xe===Be||Xe===ce)&&nt?st?he--:ue[he-1]=St:ue[he++]=St}else ue[he++]=St}function He(St){ue[he-1][0]!==St[0]&&ue[he-1][1]!==St[1]&&ze([we,se]),ze(St),oe=null,we=se=0}q==="linear"||q==="spline"?Se=function(St,qe){for(var Xe=[],Ve=0,Ze=0;Ze<4;Ze++){var st=Te[Ze],nt=e(St[0],St[1],qe[0],qe[1],st[0],st[1],st[2],st[3]);nt&&(!Ve||Math.abs(nt.x-Xe[0][0])>1||Math.abs(nt.y-Xe[0][1])>1)&&(nt=[nt.x,nt.y],Ve&&ve(nt,St)<ve(Xe[0],St)?Xe.unshift(nt):Xe.push(nt),Ve++)}return Xe}:q==="hv"||q==="vh"?Se=function(St,qe){var Xe=[],Ve=ye(St),Ze=ye(qe);return Ve&&Ze&&Pe(Ve,Ze)||(Ve&&Xe.push(Ve),Ze&&Xe.push(Ze)),Xe}:q==="hvh"?Se=Re(0,be,Ie):q==="vhv"&&(Se=Re(1,Be,ce));var We=o.isArrayOrTypedArray(te);function Je(St){if(St&&W&&(St.i=a,St.d=n,St.trace=z,St.marker=We?te[St.i]:te,St.backoff=W),L=St[0]/F,O=St[1]/V,Le=St[0]<be?be:St[0]>Ie?Ie:0,Ae=St[1]<Be?Be:St[1]>ce?ce:0,Le||Ae){if(he)if(oe){var qe=Se(oe,St);qe.length>1&&(He(qe[0]),ue[he++]=qe[1])}else fe=Se(ue[he-1],St)[0],ue[he++]=fe;else ue[he++]=[Le||St[0],Ae||St[1]];var Xe=ue[he-1];Le&&Ae&&(Xe[0]!==Le||Xe[1]!==Ae)?(oe&&(we!==Le&&se!==Ae?ze(we&&se?(Ve=oe,st=(Ze=St)[0]-Ve[0],nt=(Ze[1]-Ve[1])/st,(Ve[1]*Ze[0]-Ze[1]*Ve[0])/st>0?[nt>0?be:Ie,ce]:[nt>0?Ie:be,Be]):[we||Le,se||Ae]):we&&se&&ze([we,se])),ze([Le,Ae])):we-Le&&se-Ae&&ze([Le||we,Ae||se]),oe=St,we=Le,se=Ae}else oe&&He(Se(oe,St)[0]),ue[he++]=St;var Ve,Ze,st,nt}for(a=0;a<ae;a++)if(u=de(a)){for(he=0,oe=null,Je(u),a++;a<ae;a++){if(!(c=de(a))){if(Q)continue;break}if(Z&&s.simplify){var lt=de(a+1);if(y=ve(c,u),J&&(he===0||he===ae-1)||!(y<me(c,lt)*re)){for(b=[(c[0]-u[0])/y,(c[1]-u[1])/y],x=u,w=y,d=T=E=0,h=!1,p=c,a++;a<n.length;a++){if(g=lt,lt=de(a+1),!g){if(Q)continue;break}if(C=(v=[g[0]-u[0],g[1]-u[1]])[0]*b[1]-v[1]*b[0],T=Math.min(T,C),(E=Math.max(E,C))-T>me(g,lt))break;p=g,(S=v[0]*b[0]+v[1]*b[1])>w?(w=S,c=g,h=!1):S<d&&(d=S,x=g,h=!0)}if(h?(Je(c),p!==x&&Je(x)):(x!==u&&Je(x),p!==c&&Je(c)),Je(p),a>=n.length||!g)break;Je(g),u=g}}else Je(c)}oe&&ze([we||oe[0],se||oe[1]]),ne.push(ue.slice(0,he))}var et=q.slice(q.length-1);if(W&&et!=="h"&&et!=="v"){for(var yt=!1,_t=-1,xt=[],at=0;at<ne.length;at++)for(var ot=0;ot<ne[at].length-1;ot++){var At=ne[at][ot],Ct=ne[at][ot+1],zt=A.applyBackoff(Ct,At);zt[0]===Ct[0]&&zt[1]===Ct[1]||(yt=!0),xt[_t+1]||(xt[++_t]=[At,[zt[0],zt[1]]])}return yt?xt:ne}return ne}},94039:function($){$.exports=function(P,t,A){A("line.shape")==="spline"&&A("line.smoothing")}},68687:function($){var P={tonextx:1,tonexty:1,tonext:1};$.exports=function(t,A,M){var l,_,m,f,o,e={},i=!1,r=-1,n=0,s=-1;for(_=0;_<M.length;_++)(m=(l=M[_][0].trace).stackgroup||"")?m in e?o=e[m]:(o=e[m]=n,n++):l.fill in P&&s>=0?o=s:(o=s=n,n++),o<r&&(i=!0),l._groupIndex=r=o;var a=M.slice();i&&a.sort(function(p,c){var x=p[0].trace,g=c[0].trace;return x._groupIndex-g._groupIndex||x.index-g.index});var u={};for(_=0;_<a.length;_++)m=(l=a[_][0].trace).stackgroup||"",l.visible===!0?(l._nexttrace=null,l.fill in P&&(f=u[m],l._prevtrace=f||null,f&&(f._nexttrace=l)),l._ownfill=l.fill&&(l.fill.substr(0,6)==="tozero"||l.fill==="toself"||l.fill.substr(0,2)==="to"&&!l._prevtrace),u[m]=l):l._prevtrace=l._nexttrace=l._ownfill=null;return a}},39984:function($,P,t){var A=t(92770);$.exports=function(M,l){l||(l=2);var _=M.marker,m=_.sizeref||1,f=_.sizemin||0,o=_.sizemode==="area"?function(e){return Math.sqrt(e/m)}:function(e){return e/m};return function(e){var i=o(e/l);return A(i)&&i>0?Math.max(i,f):0}}},4898:function($){$.exports={container:"marker",min:"cmin",max:"cmax"}},49508:function($,P,t){var A=t(7901),M=t(52075).hasColorscale,l=t(1586),_=t(34098);$.exports=function(m,f,o,e,i,r){var n=_.isBubble(m),s=(m.line||{}).color;r=r||{},s&&(o=s),i("marker.symbol"),i("marker.opacity",n?.7:1),i("marker.size"),r.noAngle||(i("marker.angle"),r.noAngleRef||i("marker.angleref"),r.noStandOff||i("marker.standoff")),i("marker.color",o),M(m,"marker")&&l(m,f,e,i,{prefix:"marker.",cLetter:"c"}),r.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),r.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&f.marker.color!==s?s:n?A.background:A.defaultLine),M(m,"marker.line")&&l(m,f,e,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",n?1:0)),n&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),r.gradient&&i("marker.gradient.type")!=="none"&&i("marker.gradient.color")}},73927:function($,P,t){var A=t(71828).dateTick0,M=t(50606).ONEWEEK;function l(_,m){return A(m,_%M==0?1:0)}$.exports=function(_,m,f,o,e){if(e||(e={x:!0,y:!0}),e.x){var i=o("xperiod");i&&(o("xperiod0",l(i,m.xcalendar)),o("xperiodalignment"))}if(e.y){var r=o("yperiod");r&&(o("yperiod0",l(r,m.ycalendar)),o("yperiodalignment"))}}},32663:function($,P,t){var A=t(39898),M=t(73972),l=t(71828),_=l.ensureSingle,m=l.identity,f=t(91424),o=t(34098),e=t(34621),i=t(68687),r=t(61082).tester;function n(s,a,u,p,c,x,g){var h,b=s._context.staticPlot;(function(Se,Me,be,Ie,Be){var ce=be.xaxis,Te=be.yaxis,ye=A.extent(l.simpleMap(ce.range,ce.r2c)),Pe=A.extent(l.simpleMap(Te.range,Te.r2c)),Re=Ie[0].trace;if(o.hasMarkers(Re)){var ze=Re.marker.maxdisplayed;if(ze!==0){var He=Ie.filter(function(et){return et.x>=ye[0]&&et.x<=ye[1]&&et.y>=Pe[0]&&et.y<=Pe[1]}),We=Math.ceil(He.length/ze),Je=0;Be.forEach(function(et,yt){var _t=et[0].trace;o.hasMarkers(_t)&&_t.marker.maxdisplayed>0&&yt<Me&&Je++});var lt=Math.round(Je*We/3+Math.floor(Je/3)*We/7.1);Ie.forEach(function(et){delete et.vis}),He.forEach(function(et,yt){Math.round((yt+lt)%We)===0&&(et.vis=!0)})}}})(0,a,u,p,c);var v=!!g&&g.duration>0;function y(Se){return v?Se.transition():Se}var w=u.xaxis,d=u.yaxis,S=p[0].trace,T=S.line,E=A.select(x),C=_(E,"g","errorbars"),L=_(E,"g","lines"),O=_(E,"g","points"),z=_(E,"g","text");if(M.getComponentMethod("errorbars","plot")(s,C,u,g),S.visible===!0){var G,I;y(E).style("opacity",S.opacity);var H=S.fill.charAt(S.fill.length-1);H!=="x"&&H!=="y"&&(H=""),p[0][u.isRangePlot?"nodeRangePlot3":"node3"]=E;var N,F,V="",W=[],te=S._prevtrace;te&&(V=te._prevRevpath||"",I=te._nextFill,W=te._polygons);var Q,X,q,Z,J,ne,re,ae="",ue="",he=[],de=l.noop;if(G=S._ownFill,o.hasLines(S)||S.fill!=="none"){for(I&&I.datum(p),["hv","vh","hvh","vhv"].indexOf(T.shape)!==-1?(Q=f.steps(T.shape),X=f.steps(T.shape.split("").reverse().join(""))):Q=X=T.shape==="spline"?function(Se){var Me=Se[Se.length-1];return Se.length>1&&Se[0][0]===Me[0]&&Se[0][1]===Me[1]?f.smoothclosed(Se.slice(1),T.smoothing):f.smoothopen(Se,T.smoothing)}:function(Se){return"M"+Se.join("L")},q=function(Se){return X(Se.reverse())},he=e(p,{xaxis:w,yaxis:d,trace:S,connectGaps:S.connectgaps,baseTolerance:Math.max(T.width||1,3)/4,shape:T.shape,backoff:T.backoff,simplify:T.simplify,fill:S.fill}),re=S._polygons=new Array(he.length),h=0;h<he.length;h++)S._polygons[h]=r(he[h]);he.length&&(Z=he[0][0],ne=(J=he[he.length-1])[J.length-1]),de=function(Se){return function(Me){if(N=Q(Me),F=q(Me),ae?H?(ae+="L"+N.substr(1),ue=F+"L"+ue.substr(1)):(ae+="Z"+N,ue=F+"Z"+ue):(ae=N,ue=F),o.hasLines(S)){var be=A.select(this);if(be.datum(p),Se)y(be.style("opacity",0).attr("d",N).call(f.lineGroupStyle)).style("opacity",1);else{var Ie=y(be);Ie.attr("d",N),f.singleLineStyle(p,Ie)}}}}}var xe=L.selectAll(".js-line").data(he);y(xe.exit()).style("opacity",0).remove(),xe.each(de(!1)),xe.enter().append("path").classed("js-line",!0).style("vector-effect",b?"none":"non-scaling-stroke").call(f.lineGroupStyle).each(de(!0)),f.setClipUrl(xe,u.layerClipId,s),he.length?(G?(G.datum(p),Z&&ne&&(H?(H==="y"?Z[1]=ne[1]=d.c2p(0,!0):H==="x"&&(Z[0]=ne[0]=w.c2p(0,!0)),y(G).attr("d","M"+ne+"L"+Z+"L"+ae.substr(1)).call(f.singleFillStyle,s)):y(G).attr("d",ae+"Z").call(f.singleFillStyle,s))):I&&(S.fill.substr(0,6)==="tonext"&&ae&&V?(S.fill==="tonext"?y(I).attr("d",ae+"Z"+V+"Z").call(f.singleFillStyle,s):y(I).attr("d",ae+"L"+V.substr(1)+"Z").call(f.singleFillStyle,s),S._polygons=S._polygons.concat(W)):(ve(I),S._polygons=null)),S._prevRevpath=ue,S._prevPolygons=re):(G?ve(G):I&&ve(I),S._polygons=S._prevRevpath=S._prevPolygons=null),O.datum(p),z.datum(p),function(Se,Me,be){var Ie,Be=be[0].trace,ce=o.hasMarkers(Be),Te=o.hasText(Be),ye=oe(Be),Pe=fe,Re=fe;if(ce||Te){var ze=m,He=Be.stackgroup,We=He&&s._fullLayout._scatterStackOpts[w._id+d._id][He].stackgaps==="infer zero";Be.marker.maxdisplayed||Be._needsCull?ze=We?Ae:Le:He&&!We&&(ze=we),ce&&(Pe=ze),Te&&(Re=ze)}var Je,lt=(Ie=Se.selectAll("path.point").data(Pe,ye)).enter().append("path").classed("point",!0);v&&lt.call(f.pointStyle,Be,s).call(f.translatePoints,w,d).style("opacity",0).transition().style("opacity",1),Ie.order(),ce&&(Je=f.makePointStyleFns(Be)),Ie.each(function(et){var yt=A.select(this),_t=y(yt);f.translatePoint(et,_t,w,d)?(f.singlePointStyle(et,_t,Be,Je,s),u.layerClipId&&f.hideOutsideRangePoint(et,_t,w,d,Be.xcalendar,Be.ycalendar),Be.customdata&&yt.classed("plotly-customdata",et.data!==null&&et.data!==void 0)):_t.remove()}),v?Ie.exit().transition().style("opacity",0).remove():Ie.exit().remove(),(Ie=Me.selectAll("g").data(Re,ye)).enter().append("g").classed("textpoint",!0).append("text"),Ie.order(),Ie.each(function(et){var yt=A.select(this),_t=y(yt.select("text"));f.translatePoint(et,_t,w,d)?u.layerClipId&&f.hideOutsideRangePoint(et,yt,w,d,Be.xcalendar,Be.ycalendar):yt.remove()}),Ie.selectAll("text").call(f.textPointStyle,Be,s).each(function(et){var yt=w.c2p(et.x),_t=d.c2p(et.y);A.select(this).selectAll("tspan.line").each(function(){y(A.select(this)).attr({x:yt,y:_t})})}),Ie.exit().remove()}(O,z,p);var me=S.cliponaxis===!1?null:u.layerClipId;f.setClipUrl(O,me,s),f.setClipUrl(z,me,s)}function ve(Se){y(Se).attr("d","M0,0Z")}function Le(Se){return Se.filter(function(Me){return!Me.gap&&Me.vis})}function Ae(Se){return Se.filter(function(Me){return Me.vis})}function we(Se){return Se.filter(function(Me){return!Me.gap})}function se(Se){return Se.id}function oe(Se){if(Se.ids)return se}function fe(){return!1}}$.exports=function(s,a,u,p,c,x){var g,h,b=!c,v=!!c&&c.duration>0,y=i(s,a,u);(g=p.selectAll("g.trace").data(y,function(w){return w[0].trace.uid})).enter().append("g").attr("class",function(w){return"trace scatter trace"+w[0].trace.uid}).style("stroke-miterlimit",2),g.order(),function(w,d,S){d.each(function(T){var E=_(A.select(this),"g","fills");f.setClipUrl(E,S.layerClipId,w);var C=T[0].trace,L=[];C._ownfill&&L.push("_ownFill"),C._nexttrace&&L.push("_nextFill");var O=E.selectAll("g").data(L,m);O.enter().append("g"),O.exit().each(function(z){C[z]=null}).remove(),O.order().each(function(z){C[z]=_(A.select(this),"path","js-fill")})})}(s,g,a),v?(x&&(h=x()),A.transition().duration(c.duration).ease(c.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){p.selectAll("g.trace").each(function(w,d){n(s,d,a,w,y,this,c)})})):g.each(function(w,d){n(s,d,a,w,y,this,c)}),b&&g.exit().remove(),p.selectAll("path:not([d])").remove()}},98002:function($,P,t){var A=t(34098);$.exports=function(M,l){var _,m,f,o,e=M.cd,i=M.xaxis,r=M.yaxis,n=[],s=e[0].trace;if(!A.hasMarkers(s)&&!A.hasText(s))return[];if(l===!1)for(_=0;_<e.length;_++)e[_].selected=0;else for(_=0;_<e.length;_++)m=e[_],f=i.c2p(m.x),o=r.c2p(m.y),m.i!==null&&l.contains([f,o],!1,_,M)?(n.push({pointNumber:m.i,x:i.c2d(m.x),y:r.c2d(m.y)}),m.selected=1):m.selected=0;return n}},565:function($){var P=["orientation","groupnorm","stackgaps"];$.exports=function(t,A,M,l){var _=M._scatterStackOpts,m=l("stackgroup");if(m){var f=A.xaxis+A.yaxis,o=_[f];o||(o=_[f]={});var e=o[m],i=!1;e?e.traces.push(A):(e=o[m]={traceIndices:[],traces:[A]},i=!0);for(var r={orientation:A.x&&!A.y?"h":"v"},n=0;n<P.length;n++){var s=P[n],a=s+"Found";if(!e[a]){var u=t[s]!==void 0,p=s==="orientation";if((u||i)&&(e[s]=l(s,r[s]),p&&(e.fillDflt=e[s]==="h"?"tonextx":"tonexty"),u&&(e[a]=!0,!i&&(delete e.traces[0][s],p))))for(var c=0;c<e.traces.length-1;c++){var x=e.traces[c];x._input.fill!==x.fill&&(x.fill=e.fillDflt)}}}return e}}},16296:function($,P,t){var A=t(39898),M=t(91424),l=t(73972);function _(f,o,e){M.pointStyle(f.selectAll("path.point"),o,e)}function m(f,o,e){M.textPointStyle(f.selectAll("text"),o,e)}$.exports={style:function(f){var o=A.select(f).selectAll("g.trace.scatter");o.style("opacity",function(e){return e[0].trace.opacity}),o.selectAll("g.points").each(function(e){_(A.select(this),e.trace||e[0].trace,f)}),o.selectAll("g.text").each(function(e){m(A.select(this),e.trace||e[0].trace,f)}),o.selectAll("g.trace path.js-line").call(M.lineGroupStyle),o.selectAll("g.trace path.js-fill").call(M.fillGroupStyle,f),l.getComponentMethod("errorbars","style")(o)},stylePoints:_,styleText:m,styleOnSelect:function(f,o,e){var i=o[0].trace;i.selectedpoints?(M.selectedPointStyle(e.selectAll("path.point"),i),M.selectedTextStyle(e.selectAll("text"),i)):(_(e,i,f),m(e,i,f))}}},34098:function($,P,t){var A=t(71828);$.exports={hasLines:function(M){return M.visible&&M.mode&&M.mode.indexOf("lines")!==-1},hasMarkers:function(M){return M.visible&&(M.mode&&M.mode.indexOf("markers")!==-1||M.type==="splom")},hasText:function(M){return M.visible&&M.mode&&M.mode.indexOf("text")!==-1},isBubble:function(M){return A.isPlainObject(M.marker)&&A.isArrayOrTypedArray(M.marker.size)}}},82410:function($,P,t){var A=t(71828);$.exports=function(M,l,_,m,f){f=f||{},m("textposition"),A.coerceFont(m,"textfont",f.font||_.font),f.noSelect||(m("selected.textfont.color"),m("unselected.textfont.color"))}},67513:function($,P,t){var A=t(71828),M=t(73972);$.exports=function(l,_,m,f){var o,e=f("x"),i=f("y");if(M.getComponentMethod("calendars","handleTraceDefaults")(l,_,["x","y"],m),e){var r=A.minRowLength(e);i?o=Math.min(r,A.minRowLength(i)):(o=r,f("y0"),f("dy"))}else{if(!i)return 0;o=A.minRowLength(i),f("x0"),f("dx")}return _._length=o,o}},44542:function($,P,t){var A=t(82196),M=t(50693),l=t(12663).axisHoverFormat,_=t(5386).fF,m=t(5386).si,f=t(9012),o=t(29659),e=t(87381),i=t(1426).extendFlat,r=t(30962).overrideAll,n=t(78607),s=A.line,a=A.marker,u=a.line,p=i({width:s.width,dash:{valType:"enumerated",values:n(o),dflt:"solid"}},M("line")),c=$.exports=r({x:A.x,y:A.y,z:{valType:"data_array"},text:i({},A.text,{}),texttemplate:m({},{}),hovertext:i({},A.hovertext,{}),hovertemplate:_(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),mode:i({},A.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:A.connectgaps,line:p,marker:i({symbol:{valType:"enumerated",values:n(e),dflt:"circle",arrayOk:!0},size:i({},a.size,{dflt:8}),sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,opacity:i({},a.opacity,{arrayOk:!1}),colorbar:a.colorbar,line:i({width:i({},u.width,{arrayOk:!1})},M("marker.line"))},M("marker")),textposition:i({},A.textposition,{dflt:"top center"}),textfont:{color:A.textfont.color,size:A.textfont.size,family:i({},A.textfont.family,{arrayOk:!1})},opacity:f.opacity,hoverinfo:i({},f.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},36563:function($,P,t){var A=t(75225),M=t(36922);$.exports=function(l,_){var m=[{x:!1,y:!1,trace:_,t:{}}];return A(m,_),M(l,_),m}},67336:function($,P,t){var A=t(73972);function M(l,_,m,f){if(!_||!_.visible)return null;for(var o=A.getComponentMethod("errorbars","makeComputeError")(_),e=new Array(l.length),i=0;i<l.length;i++){var r=o(+l[i],i);if(f.type==="log"){var n=f.c2l(l[i]),s=l[i]-r[0],a=l[i]+r[1];if(e[i]=[(f.c2l(s,!0)-n)*m,(f.c2l(a,!0)-n)*m],s>0){var u=f.c2l(s);f._lowerLogErrorBound||(f._lowerLogErrorBound=u),f._lowerErrorBound=Math.min(f._lowerLogErrorBound,u)}}else e[i]=[-r[0]*m,r[1]*m]}return e}$.exports=function(l,_,m){var f=[M(l.x,l.error_x,_[0],m.xaxis),M(l.y,l.error_y,_[1],m.yaxis),M(l.z,l.error_z,_[2],m.zaxis)],o=function(a){for(var u=0;u<a.length;u++)if(a[u])return a[u].length;return 0}(f);if(o===0)return null;for(var e=new Array(o),i=0;i<o;i++){for(var r=[[0,0,0],[0,0,0]],n=0;n<3;n++)if(f[n])for(var s=0;s<2;s++)r[s][n]=f[n][i][s];e[i]=r}return e}},58925:function($,P,t){var A=t(9330).gl_line3d,M=t(9330).gl_scatter3d,l=t(9330).gl_error3d,_=t(9330).gl_mesh3d,m=t(9330).delaunay_triangulate,f=t(71828),o=t(78614),e=t(81697).formatColor,i=t(39984),r=t(29659),n=t(87381),s=t(89298),a=t(23469).appendArrayPointValue,u=t(67336);function p(d,S){this.scene=d,this.uid=S,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;function x(d){return d==null?0:d.indexOf("left")>-1?-1:d.indexOf("right")>-1?1:0}function g(d){return d==null?0:d.indexOf("top")>-1?-1:d.indexOf("bottom")>-1?1:0}function h(d,S){return S(4*d)}function b(d){return n[d]}function v(d,S,T,E,C){var L=null;if(f.isArrayOrTypedArray(d)){L=[];for(var O=0;O<S;O++)d[O]===void 0?L[O]=E:L[O]=T(d[O],C)}else L=T(d,f.identity);return L}function y(d){if(f.isArrayOrTypedArray(d)){var S=d[0];return f.isArrayOrTypedArray(S)&&(d=S),"rgb("+d.slice(0,3).map(function(T){return Math.round(255*T)})+")"}return null}function w(d){return f.isArrayOrTypedArray(d)?d.length===4&&typeof d[0]=="number"?y(d):d.map(y):null}c.handlePick=function(d){if(d.object&&(d.object===this.linePlot||d.object===this.delaunayMesh||d.object===this.textMarkers||d.object===this.scatterPlot)){var S=d.index=d.data.index;return d.object.highlight&&d.object.highlight(null),this.scatterPlot&&(d.object=this.scatterPlot,this.scatterPlot.highlight(d.data)),d.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[S]||this.textLabels[S]===0)&&(d.textLabel=this.textLabels[S]):d.textLabel=this.textLabels),d.traceCoordinate=[this.data.x[S],this.data.y[S],this.data.z[S]],!0}},c.update=function(d){var S,T,E,C,L=this.scene.glplot.gl,O=r.solid;this.data=d;var z=function(H,N){var F,V,W,te,Q,X,q=[],Z=H.fullSceneLayout,J=H.dataScale,ne=Z.xaxis,re=Z.yaxis,ae=Z.zaxis,ue=N.marker,he=N.line,de=N.x||[],xe=N.y||[],me=N.z||[],ve=de.length,Le=N.xcalendar,Ae=N.ycalendar,we=N.zcalendar;for(Q=0;Q<ve;Q++)F=ne.d2l(de[Q],0,Le)*J[0],V=re.d2l(xe[Q],0,Ae)*J[1],W=ae.d2l(me[Q],0,we)*J[2],q[Q]=[F,V,W];if(Array.isArray(N.text))X=N.text;else if(N.text!==void 0)for(X=new Array(ve),Q=0;Q<ve;Q++)X[Q]=N.text;function se(He,We){var Je=Z[He];return s.tickText(Je,Je.d2l(We),!0).text}var oe=N.texttemplate;if(oe){var fe=H.fullLayout._d3locale,Se=Array.isArray(oe),Me=Se?Math.min(oe.length,ve):ve,be=Se?function(He){return oe[He]}:function(){return oe};for(X=new Array(Me),Q=0;Q<Me;Q++){var Ie={x:de[Q],y:xe[Q],z:me[Q]},Be={xLabel:se("xaxis",de[Q]),yLabel:se("yaxis",xe[Q]),zLabel:se("zaxis",me[Q])},ce={};a(ce,N,Q);var Te=N._meta||{};X[Q]=f.texttemplateString(be(Q),Be,fe,ce,Ie,Te)}}if(te={position:q,mode:N.mode,text:X},"line"in N&&(te.lineColor=e(he,1,ve),te.lineWidth=he.width,te.lineDashes=he.dash),"marker"in N){var ye=i(N);te.scatterColor=e(ue,1,ve),te.scatterSize=v(ue.size,ve,h,20,ye),te.scatterMarker=v(ue.symbol,ve,b,""),te.scatterLineWidth=ue.line.width,te.scatterLineColor=e(ue.line,1,ve),te.scatterAngle=0}"textposition"in N&&(te.textOffset=function(He){var We=[0,0];if(Array.isArray(He))for(var Je=0;Je<He.length;Je++)We[Je]=[0,0],He[Je]&&(We[Je][0]=x(He[Je]),We[Je][1]=g(He[Je]));else We[0]=x(He),We[1]=g(He);return We}(N.textposition),te.textColor=e(N.textfont,1,ve),te.textSize=v(N.textfont.size,ve,f.identity,12),te.textFont=N.textfont.family,te.textAngle=0);var Pe=["x","y","z"];for(te.project=[!1,!1,!1],te.projectScale=[1,1,1],te.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Re=N.projection[Pe[Q]];(te.project[Q]=Re.show)&&(te.projectOpacity[Q]=Re.opacity,te.projectScale[Q]=Re.scale)}te.errorBounds=u(N,J,Z);var ze=function(He){for(var We=[0,0,0],Je=[[0,0,0],[0,0,0],[0,0,0]],lt=[1,1,1],et=0;et<3;et++){var yt=He[et];yt&&yt.copy_zstyle!==!1&&He[2].visible!==!1&&(yt=He[2]),yt&&yt.visible&&(We[et]=yt.width/2,Je[et]=o(yt.color),lt[et]=yt.thickness)}return{capSize:We,color:Je,lineWidth:lt}}([N.error_x,N.error_y,N.error_z]);return te.errorColor=ze.color,te.errorLineWidth=ze.lineWidth,te.errorCapSize=ze.capSize,te.delaunayAxis=N.surfaceaxis,te.delaunayColor=o(N.surfacecolor),te}(this.scene,d);"mode"in z&&(this.mode=z.mode),"lineDashes"in z&&z.lineDashes in r&&(O=r[z.lineDashes]),this.color=w(z.scatterColor)||w(z.lineColor),this.dataPoints=z.position,S={gl:this.scene.glplot.gl,position:z.position,color:z.lineColor,lineWidth:z.lineWidth||1,dashes:O[0],dashScale:O[1],opacity:d.opacity,connectGaps:d.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(S):(this.linePlot=A(S),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=d.opacity;if(d.marker&&d.marker.opacity!==void 0&&(G*=d.marker.opacity),T={gl:this.scene.glplot.gl,position:z.position,color:z.scatterColor,size:z.scatterSize,glyph:z.scatterMarker,opacity:G,orthographic:!0,lineWidth:z.scatterLineWidth,lineColor:z.scatterLineColor,project:z.project,projectScale:z.projectScale,projectOpacity:z.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(T):(this.scatterPlot=M(T),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),C={gl:this.scene.glplot.gl,position:z.position,glyph:z.text,color:z.textColor,size:z.textSize,angle:z.textAngle,alignment:z.textOffset,font:z.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:d.opacity},this.textLabels=d.hovertext||d.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(C):(this.textMarkers=M(C),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),E={gl:this.scene.glplot.gl,position:z.position,color:z.errorColor,error:z.errorBounds,lineWidth:z.errorLineWidth,capSize:z.errorCapSize,opacity:d.opacity},this.errorBars?z.errorBounds?this.errorBars.update(E):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):z.errorBounds&&(this.errorBars=l(E),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),z.delaunayAxis>=0){var I=function(H,N,F){var V,W=(F+1)%3,te=(F+2)%3,Q=[],X=[];for(V=0;V<H.length;++V){var q=H[V];!isNaN(q[W])&&isFinite(q[W])&&!isNaN(q[te])&&isFinite(q[te])&&(Q.push([q[W],q[te]]),X.push(V))}var Z=m(Q);for(V=0;V<Z.length;++V)for(var J=Z[V],ne=0;ne<J.length;++ne)J[ne]=X[J[ne]];return{positions:H,cells:Z,meshColor:N}}(z.position,z.delaunayColor,z.delaunayAxis);I.opacity=d.opacity,this.delaunayMesh?this.delaunayMesh.update(I):(I.gl=L,this.delaunayMesh=_(I),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},$.exports=function(d,S){var T=new p(d,S.uid);return T.update(S),T}},21428:function($,P,t){var A=t(73972),M=t(71828),l=t(34098),_=t(49508),m=t(11058),f=t(82410),o=t(44542);$.exports=function(e,i,r,n){function s(b,v){return M.coerce(e,i,o,b,v)}var a=function(b,v,y,w){var d=0,S=y("x"),T=y("y"),E=y("z");return A.getComponentMethod("calendars","handleTraceDefaults")(b,v,["x","y","z"],w),S&&T&&E&&(d=Math.min(S.length,T.length,E.length),v._length=v._xlength=v._ylength=v._zlength=d),d}(e,i,s,n);if(a){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),l.hasLines(i)&&(s("connectgaps"),m(e,i,r,n,s)),l.hasMarkers(i)&&_(e,i,r,n,s,{noSelect:!0,noAngle:!0}),l.hasText(i)&&(s("texttemplate"),f(e,i,n,s,{noSelect:!0}));var u=(i.line||{}).color,p=(i.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",u||p);for(var c=["x","y","z"],x=0;x<3;++x){var g="projection."+c[x];s(g+".show")&&(s(g+".opacity"),s(g+".scale"))}var h=A.getComponentMethod("errorbars","supplyDefaults");h(e,i,u||p||r,{axis:"z"}),h(e,i,u||p||r,{axis:"y",inherit:"z"}),h(e,i,u||p||r,{axis:"x",inherit:"z"})}else i.visible=!1}},13551:function($,P,t){$.exports={plot:t(58925),attributes:t(44542),markerSymbols:t(87381),supplyDefaults:t(21428),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(36563),moduleType:"trace",name:"scatter3d",basePlotModule:t(58547),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},97001:function($,P,t){var A=t(82196),M=t(9012),l=t(5386).fF,_=t(5386).si,m=t(50693),f=t(1426).extendFlat,o=A.marker,e=A.line,i=o.line;$.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:f({},A.mode,{dflt:"markers"}),text:f({},A.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:f({},A.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:f({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:A.connectgaps,fill:f({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,marker:f({symbol:o.symbol,opacity:o.opacity,maxdisplayed:o.maxdisplayed,angle:o.angle,angleref:o.angleref,standoff:o.standoff,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode,line:f({width:i.width,editType:"calc"},m("marker.line")),gradient:o.gradient,editType:"calc"},m("marker")),textfont:A.textfont,textposition:A.textposition,selected:A.selected,unselected:A.unselected,hoverinfo:f({},M.hoverinfo,{flags:["a","b","text","name"]}),hoveron:A.hoveron,hovertemplate:l()}},34618:function($,P,t){var A=t(92770),M=t(36922),l=t(75225),_=t(66279),m=t(47761).calcMarkerSize,f=t(22882);$.exports=function(o,e){var i=e._carpetTrace=f(o,e);if(i&&i.visible&&i.visible!=="legendonly"){var r;e.xaxis=i.xaxis,e.yaxis=i.yaxis;var n,s,a=e._length,u=new Array(a),p=!1;for(r=0;r<a;r++)if(n=e.a[r],s=e.b[r],A(n)&&A(s)){var c=i.ab2xy(+n,+s,!0),x=i.isVisible(+n,+s);x||(p=!0),u[r]={x:c[0],y:c[1],a:n,b:s,vis:x}}else u[r]={x:!1,y:!1};return e._needsCull=p,u[0].carpet=i,u[0].trace=e,m(e,a),M(o,e),l(u,e),_(u,e),u}}},98965:function($,P,t){var A=t(71828),M=t(47581),l=t(34098),_=t(49508),m=t(11058),f=t(94039),o=t(82410),e=t(28908),i=t(97001);$.exports=function(r,n,s,a){function u(h,b){return A.coerce(r,n,i,h,b)}u("carpet"),n.xaxis="x",n.yaxis="y";var p=u("a"),c=u("b"),x=Math.min(p.length,c.length);if(x){n._length=x,u("text"),u("texttemplate"),u("hovertext"),u("mode",x<M.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(m(r,n,s,a,u,{backoff:!0}),f(r,n,u),u("connectgaps")),l.hasMarkers(n)&&_(r,n,s,a,u,{gradient:!0}),l.hasText(n)&&o(r,n,a,u);var g=[];(l.hasMarkers(n)||l.hasText(n))&&(u("marker.maxdisplayed"),g.push("points")),u("fill"),n.fill!=="none"&&(e(r,n,s,u),l.hasLines(n)||f(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||g.push("fills"),u("hoveron",g.join("+")||"points")!=="fills"&&u("hovertemplate"),A.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},16165:function($){$.exports=function(P,t,A,M,l){var _=M[l];return P.a=_.a,P.b=_.b,P.y=_.y,P}},48953:function($){$.exports=function(P,t){var A={},M=t._carpet,l=M.ab2ij([P.a,P.b]),_=Math.floor(l[0]),m=l[0]-_,f=Math.floor(l[1]),o=l[1]-f,e=M.evalxy([],_,f,m,o);return A.yLabel=e[1].toFixed(3),A}},22931:function($,P,t){var A=t(33720),M=t(71828).fillText;$.exports=function(l,_,m,f){var o=A(l,_,m,f);if(o&&o[0].index!==!1){var e=o[0];if(e.index===void 0){var i=1-e.y0/l.ya._length,r=l.xa._length,n=r*i/2,s=r-n;return e.x0=Math.max(Math.min(e.x0,s),n),e.x1=Math.max(Math.min(e.x1,s),n),o}var a=e.cd[e.index];e.a=a.a,e.b=a.b,e.xLabelVal=void 0,e.yLabelVal=void 0;var u=e.trace,p=u._carpet,c=u._module.formatLabels(a,u);e.yLabel=c.yLabel,delete e.text;var x=[];if(!u.hovertemplate){var g=(a.hi||u.hoverinfo).split("+");g.indexOf("all")!==-1&&(g=["a","b","text"]),g.indexOf("a")!==-1&&h(p.aaxis,a.a),g.indexOf("b")!==-1&&h(p.baxis,a.b),x.push("y: "+e.yLabel),g.indexOf("text")!==-1&&M(a,u,x),e.extraText=x.join("<br>")}return o}function h(b,v){var y;y=b.labelprefix&&b.labelprefix.length>0?b.labelprefix.replace(/ = $/,""):b._hovertitle,x.push(y+": "+v.toFixed(3)+b.labelsuffix)}}},46858:function($,P,t){$.exports={attributes:t(97001),supplyDefaults:t(98965),colorbar:t(4898),formatLabels:t(48953),calc:t(34618),plot:t(1913),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(22931),selectPoints:t(98002),eventData:t(16165),moduleType:"trace",name:"scattercarpet",basePlotModule:t(93612),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},1913:function($,P,t){var A=t(32663),M=t(89298),l=t(91424);$.exports=function(_,m,f,o){var e,i,r,n=f[0][0].carpet,s=M.getFromId(_,n.xaxis||"x"),a=M.getFromId(_,n.yaxis||"y"),u={xaxis:s,yaxis:a,plot:m.plot};for(e=0;e<f.length;e++)(i=f[e][0].trace)._xA=s,i._yA=a;for(A(_,u,f,o),e=0;e<f.length;e++)i=f[e][0].trace,r=o.selectAll("g.trace"+i.uid+" .js-line"),l.setClipUrl(r,f[e][0].carpet._clipPathId,_)}},19316:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(82196),_=t(9012),m=t(50693),f=t(79952).P,o=t(1426).extendFlat,e=t(30962).overrideAll,i=l.marker,r=l.line,n=i.line;$.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:o({},l.mode,{dflt:"markers"}),text:o({},l.text,{}),texttemplate:M({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:o({},l.hovertext,{}),textfont:l.textfont,textposition:l.textposition,line:{color:r.color,width:r.width,dash:f},connectgaps:l.connectgaps,marker:o({symbol:i.symbol,opacity:i.opacity,angle:i.angle,angleref:o({},i.angleref,{values:["previous","up","north"]}),standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:o({width:n.width},m("marker.line")),gradient:i.gradient},m("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:l.fillcolor,selected:l.selected,unselected:l.unselected,hoverinfo:o({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:A()},"calc","nested")},84622:function($,P,t){var A=t(92770),M=t(50606).BADNUM,l=t(36922),_=t(75225),m=t(66279),f=t(71828)._;function o(e){return e&&typeof e=="string"}$.exports=function(e,i){var r,n=Array.isArray(i.locations),s=n?i.locations.length:i._length,a=new Array(s);r=i.geojson?function(h){return o(h)||A(h)}:o;for(var u=0;u<s;u++){var p=a[u]={};if(n){var c=i.locations[u];p.loc=r(c)?c:null}else{var x=i.lon[u],g=i.lat[u];A(x)&&A(g)?p.lonlat=[+x,+g]:p.lonlat=[M,M]}}return _(a,i),l(e,i),m(a,i),s&&(a[0].t={labels:{lat:f(e,"lat:")+" ",lon:f(e,"lon:")+" "}}),a}},10659:function($,P,t){var A=t(71828),M=t(34098),l=t(49508),_=t(11058),m=t(82410),f=t(28908),o=t(19316);$.exports=function(e,i,r,n){function s(h,b){return A.coerce(e,i,o,h,b)}var a,u=s("locations");if(u&&u.length){var p,c=s("geojson");(typeof c=="string"&&c!==""||A.isPlainObject(c))&&(p="geojson-id"),s("locationmode",p)==="geojson-id"&&s("featureidkey"),a=u.length}else{var x=s("lon")||[],g=s("lat")||[];a=Math.min(x.length,g.length)}a?(i._length=a,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),M.hasLines(i)&&(_(e,i,r,n,s),s("connectgaps")),M.hasMarkers(i)&&l(e,i,r,n,s,{gradient:!0}),M.hasText(i)&&(s("texttemplate"),m(e,i,n,s)),s("fill"),i.fill!=="none"&&f(e,i,r,s),A.coerceSelectionMarkerOpacity(i,s)):i.visible=!1}},84084:function($){$.exports=function(P,t,A,M,l){P.lon=t.lon,P.lat=t.lat,P.location=t.loc?t.loc:null;var _=M[l];return _.fIn&&_.fIn.properties&&(P.properties=_.fIn.properties),P}},82719:function($,P,t){var A=t(89298);$.exports=function(M,l,_){var m={},f=_[l.geo]._subplot.mockAxis,o=M.lonlat;return m.lonLabel=A.tickText(f,f.c2l(o[0]),!0).text,m.latLabel=A.tickText(f,f.c2l(o[1]),!0).text,m}},14977:function($,P,t){var A=t(30211),M=t(50606).BADNUM,l=t(34603),_=t(71828).fillText,m=t(19316);$.exports=function(f,o,e){var i=f.cd,r=i[0].trace,n=f.xa,s=f.ya,a=f.subplot,u=a.projection.isLonLatOverEdges,p=a.project;if(A.getClosest(i,function(y){var w=y.lonlat;if(w[0]===M||u(w))return 1/0;var d=p(w),S=p([o,e]),T=Math.abs(d[0]-S[0]),E=Math.abs(d[1]-S[1]),C=Math.max(3,y.mrc||0);return Math.max(Math.sqrt(T*T+E*E)-C,1-3/C)},f),f.index!==!1){var c=i[f.index],x=c.lonlat,g=[n.c2p(x),s.c2p(x)],h=c.mrc||1;f.x0=g[0]-h,f.x1=g[0]+h,f.y0=g[1]-h,f.y1=g[1]+h,f.loc=c.loc,f.lon=x[0],f.lat=x[1];var b={};b[r.geo]={_subplot:a};var v=r._module.formatLabels(c,r,b);return f.lonLabel=v.lonLabel,f.latLabel=v.latLabel,f.color=l(r,c),f.extraText=function(y,w,d,S){if(!y.hovertemplate){var T=w.hi||y.hoverinfo,E=T==="all"?m.hoverinfo.flags:T.split("+"),C=E.indexOf("location")!==-1&&Array.isArray(y.locations),L=E.indexOf("lon")!==-1,O=E.indexOf("lat")!==-1,z=E.indexOf("text")!==-1,G=[];return C?G.push(w.loc):L&&O?G.push("("+I(d.latLabel)+", "+I(d.lonLabel)+")"):L?G.push(S.lon+I(d.lonLabel)):O&&G.push(S.lat+I(d.latLabel)),z&&_(w,y,G),G.join("<br>")}function I(H){return H+""}}(r,c,f,i[0].t.labels),f.hovertemplate=r.hovertemplate,[f]}}},17988:function($,P,t){$.exports={attributes:t(19316),supplyDefaults:t(10659),colorbar:t(4898),formatLabels:t(82719),calc:t(84622),calcGeoJSON:t(89171).calcGeoJSON,plot:t(89171).plot,style:t(33095),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(14977),eventData:t(84084),selectPoints:t(20548),moduleType:"trace",name:"scattergeo",basePlotModule:t(44622),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},89171:function($,P,t){var A=t(39898),M=t(71828),l=t(90973).getTopojsonFeatures,_=t(18214),m=t(41327),f=t(71739).findExtremes,o=t(50606).BADNUM,e=t(47761).calcMarkerSize,i=t(34098),r=t(33095);$.exports={calcGeoJSON:function(n,s){var a,u,p=n[0].trace,c=s[p.geo],x=c._subplot,g=p._length;if(Array.isArray(p.locations)){var h=p.locationmode,b=h==="geojson-id"?m.extractTraceFeature(n):l(p,x.topojson);for(a=0;a<g;a++){u=n[a];var v=h==="geojson-id"?u.fOut:m.locationToFeature(h,u.loc,b);u.lonlat=v?v.properties.ct:[o,o]}}var y,w,d={padded:!0};if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=m.computeBbox(m.getTraceGeojson(p));y=[S[0],S[2]],w=[S[1],S[3]]}else{for(y=new Array(g),w=new Array(g),a=0;a<g;a++)u=n[a],y[a]=u.lonlat[0],w[a]=u.lonlat[1];d.ppad=e(p,g)}p._extremes.lon=f(c.lonaxis._ax,y,d),p._extremes.lat=f(c.lataxis._ax,w,d)},plot:function(n,s,a){var u=s.layers.frontplot.select(".scatterlayer"),p=M.makeTraceGroups(u,a,"trace scattergeo");function c(x,g){x.lonlat[0]===o&&A.select(g).remove()}p.selectAll("*").remove(),p.each(function(x){var g=A.select(this),h=x[0].trace;if(i.hasLines(h)||h.fill!=="none"){var b=_.calcTraceToLineCoords(x),v=h.fill!=="none"?_.makePolygon(b):_.makeLine(b);g.selectAll("path.js-line").data([{geojson:v,trace:h}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(h)&&g.selectAll("path.point").data(M.identity).enter().append("path").classed("point",!0).each(function(y){c(y,this)}),i.hasText(h)&&g.selectAll("g").data(M.identity).enter().append("g").append("text").each(function(y){c(y,this)}),r(n,x)})}}},20548:function($,P,t){var A=t(34098),M=t(50606).BADNUM;$.exports=function(l,_){var m,f,o,e,i,r=l.cd,n=l.xaxis,s=l.yaxis,a=[],u=r[0].trace;if(!A.hasMarkers(u)&&!A.hasText(u))return[];if(_===!1)for(i=0;i<r.length;i++)r[i].selected=0;else for(i=0;i<r.length;i++)(f=(m=r[i]).lonlat)[0]!==M&&(o=n.c2p(f),e=s.c2p(f),_.contains([o,e],null,i,l)?(a.push({pointNumber:i,lon:f[0],lat:f[1]}),m.selected=1):m.selected=0);return a}},33095:function($,P,t){var A=t(39898),M=t(91424),l=t(7901),_=t(16296),m=_.stylePoints,f=_.styleText;$.exports=function(o,e){e&&function(i,r){var n=r[0].trace,s=r[0].node3;s.style("opacity",r[0].trace.opacity),m(s,n,i),f(s,n,i),s.selectAll("path.js-line").style("fill","none").each(function(a){var u=A.select(this),p=a.trace,c=p.line||{};u.call(l.stroke,c.color).call(M.dashLine,c.dash||"",c.width||0),p.fill!=="none"&&u.call(l.fill,p.fillcolor)})}(o,e)}},42341:function($,P,t){var A=t(9012),M=t(82196),l=t(12663).axisHoverFormat,_=t(50693),m=t(78607),f=t(1426).extendFlat,o=t(30962).overrideAll,e=t(78232).DASHES,i=M.line,r=M.marker,n=r.line,s=$.exports=o({x:M.x,x0:M.x0,dx:M.dx,y:M.y,y0:M.y0,dy:M.dy,xperiod:M.xperiod,yperiod:M.yperiod,xperiod0:M.xperiod0,yperiod0:M.yperiod0,xperiodalignment:M.xperiodalignment,yperiodalignment:M.yperiodalignment,xhoverformat:l("x"),yhoverformat:l("y"),text:M.text,hovertext:M.hovertext,textposition:M.textposition,textfont:M.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:m(e),dflt:"solid"}},marker:f({},_("marker"),{symbol:r.symbol,angle:r.angle,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:f({},_("marker.line"),{width:n.width})}),connectgaps:M.connectgaps,fill:f({},M.fill,{dflt:"none"}),fillcolor:M.fillcolor,selected:{marker:M.selected.marker,textfont:M.selected.textfont},unselected:{marker:M.unselected.marker,textfont:M.unselected.textfont},opacity:A.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=M.hovertemplate,s.texttemplate=M.texttemplate},72156:function($,P,t){var A=t(20794);$.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(93612),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(42341),supplyDefaults:t(47148),crossTraceDefaults:t(34936),colorbar:t(4898),formatLabels:t(68101),calc:t(45032),hoverPoints:A.hoverPoints,selectPoints:t(58147),meta:{}}},45032:function($,P,t){var A=t(88294),M=t(71828),l=t(41675),_=t(71739).findExtremes,m=t(42973),f=t(47761),o=f.calcMarkerSize,e=f.calcAxisExpansion,i=f.setFirstScatter,r=t(36922),n=t(19635),s=t(38967),a=t(50606).BADNUM,u=t(78232).TOO_MANY_POINTS;function p(c,x,g){var h=c._extremes[x._id],b=_(x,g._bnds,{padded:!0});h.min=h.min.concat(b.min),h.max=h.max.concat(b.max)}$.exports=function(c,x){var g,h=c._fullLayout,b=x._xA=l.getFromId(c,x.xaxis,"x"),v=x._yA=l.getFromId(c,x.yaxis,"y"),y=h._plots[x.xaxis+x.yaxis],w=x._length,d=w>=u,S=2*w,T={},E=b.makeCalcdata(x,"x"),C=v.makeCalcdata(x,"y"),L=m(x,b,"x",E),O=m(x,v,"y",C),z=L.vals,G=O.vals;x._x=z,x._y=G,x.xperiodalignment&&(x._origX=E,x._xStarts=L.starts,x._xEnds=L.ends),x.yperiodalignment&&(x._origY=C,x._yStarts=O.starts,x._yEnds=O.ends);var I=new Array(S),H=new Array(w);for(g=0;g<w;g++)I[2*g]=z[g]===a?NaN:z[g],I[2*g+1]=G[g]===a?NaN:G[g],H[g]=g;if(b.type==="log")for(g=0;g<S;g+=2)I[g]=b.c2l(I[g]);if(v.type==="log")for(g=1;g<S;g+=2)I[g]=v.c2l(I[g]);d&&b.type!=="log"&&v.type!=="log"?T.tree=A(I):T.ids=H,r(c,x);var N,F=function(W,te,Q,X,q,Z){var J=n.style(W,Q);if(J.marker&&(J.marker.positions=X),J.line&&X.length>1&&M.extendFlat(J.line,n.linePositions(W,Q,X)),J.errorX||J.errorY){var ne=n.errorBarPositions(W,Q,X,q,Z);J.errorX&&M.extendFlat(J.errorX,ne.x),J.errorY&&M.extendFlat(J.errorY,ne.y)}return J.text&&(M.extendFlat(J.text,{positions:X},n.textPosition(W,Q,J.text,J.marker)),M.extendFlat(J.textSel,{positions:X},n.textPosition(W,Q,J.text,J.markerSel)),M.extendFlat(J.textUnsel,{positions:X},n.textPosition(W,Q,J.text,J.markerUnsel))),J}(c,0,x,I,z,G),V=s(c,y);return i(h,x),d?F.marker&&(N=F.marker.sizeAvg||Math.max(F.marker.size,3)):N=o(x,w),e(c,x,b,v,z,G,N),F.errorX&&p(x,b,F.errorX),F.errorY&&p(x,v,F.errorY),F.fill&&!V.fill2d&&(V.fill2d=!0),F.marker&&!V.scatter2d&&(V.scatter2d=!0),F.line&&!V.line2d&&(V.line2d=!0),!F.errorX&&!F.errorY||V.error2d||(V.error2d=!0),F.text&&!V.glText&&(V.glText=!0),F.marker&&(F.marker.snap=w),V.lineOptions.push(F.line),V.errorXOptions.push(F.errorX),V.errorYOptions.push(F.errorY),V.fillOptions.push(F.fill),V.markerOptions.push(F.marker),V.markerSelectedOptions.push(F.markerSel),V.markerUnselectedOptions.push(F.markerUnsel),V.textOptions.push(F.text),V.textSelectedOptions.push(F.textSel),V.textUnselectedOptions.push(F.textUnsel),V.selectBatch.push([]),V.unselectBatch.push([]),T._scene=V,T.index=V.count,T.x=z,T.y=G,T.positions=I,V.count++,[{x:!1,y:!1,t:T,trace:x}]}},78232:function($){$.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},19635:function($,P,t){var A=t(92770),M=t(82019),l=t(25075),_=t(73972),m=t(71828),f=t(91424),o=t(41675),e=t(81697).formatColor,i=t(34098),r=t(39984),n=t(68645),s=t(78232),a=t(37822).DESELECTDIM,u={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=t(23469).appendArrayPointValue;function c(E,C){var L,O=E._fullLayout,z=C._length,G=C.textfont,I=C.textposition,H=Array.isArray(I)?I:[I],N=G.color,F=G.size,V=G.family,W={},te=E._context.plotGlPixelRatio,Q=C.texttemplate;if(Q){W.text=[];var X=O._d3locale,q=Array.isArray(Q),Z=q?Math.min(Q.length,z):z,J=q?function(xe){return Q[xe]}:function(){return Q};for(L=0;L<Z;L++){var ne={i:L},re=C._module.formatLabels(ne,C,O),ae={};p(ae,C,L);var ue=C._meta||{};W.text.push(m.texttemplateString(J(L),re,X,ae,ne,ue))}}else Array.isArray(C.text)&&C.text.length<z?W.text=C.text.slice():W.text=C.text;if(Array.isArray(W.text))for(L=W.text.length;L<z;L++)W.text[L]="";for(W.opacity=C.opacity,W.font={},W.align=[],W.baseline=[],L=0;L<H.length;L++){var he=H[L].split(/\s+/);switch(he[1]){case"left":W.align.push("right");break;case"right":W.align.push("left");break;default:W.align.push(he[1])}switch(he[0]){case"top":W.baseline.push("bottom");break;case"bottom":W.baseline.push("top");break;default:W.baseline.push(he[0])}}if(Array.isArray(N))for(W.color=new Array(z),L=0;L<z;L++)W.color[L]=N[L];else W.color=N;if(m.isArrayOrTypedArray(F)||Array.isArray(V))for(W.font=new Array(z),L=0;L<z;L++){var de=W.font[L]={};de.size=(m.isTypedArray(F)?F[L]:Array.isArray(F)?A(F[L])?F[L]:0:F)*te,de.family=Array.isArray(V)?V[L]:V}else W.font={size:F*te,family:V};return W}function x(E,C){var L,O,z=C._length,G=C.marker,I={},H=m.isArrayOrTypedArray(G.symbol),N=m.isArrayOrTypedArray(G.angle),F=m.isArrayOrTypedArray(G.color),V=m.isArrayOrTypedArray(G.line.color),W=m.isArrayOrTypedArray(G.opacity),te=m.isArrayOrTypedArray(G.size),Q=m.isArrayOrTypedArray(G.line.width);if(H||(O=n.isOpenSymbol(G.symbol)),H||F||V||W||N){I.symbols=new Array(z),I.angles=new Array(z),I.colors=new Array(z),I.borderColors=new Array(z);var X=G.symbol,q=G.angle,Z=e(G,G.opacity,z),J=e(G.line,G.opacity,z);if(!Array.isArray(J[0])){var ne=J;for(J=Array(z),L=0;L<z;L++)J[L]=ne}if(!Array.isArray(Z[0])){var re=Z;for(Z=Array(z),L=0;L<z;L++)Z[L]=re}if(!Array.isArray(X)){var ae=X;for(X=Array(z),L=0;L<z;L++)X[L]=ae}if(!Array.isArray(q)){var ue=q;for(q=Array(z),L=0;L<z;L++)q[L]=ue}for(I.symbols=X,I.angles=q,I.colors=Z,I.borderColors=J,L=0;L<z;L++)H&&(O=n.isOpenSymbol(G.symbol[L])),O&&(J[L]=Z[L].slice(),Z[L]=Z[L].slice(),Z[L][3]=0);for(I.opacity=C.opacity,I.markers=new Array(z),L=0;L<z;L++)I.markers[L]=T({mx:I.symbols[L],ma:I.angles[L]},C)}else O?(I.color=l(G.color,"uint8"),I.color[3]=0,I.borderColor=l(G.color,"uint8")):(I.color=l(G.color,"uint8"),I.borderColor=l(G.line.color,"uint8")),I.opacity=C.opacity*G.opacity,I.marker=T({mx:G.symbol,ma:G.angle},C);var he,de=r(C,1);if(te||Q){var xe,me=I.sizes=new Array(z),ve=I.borderSizes=new Array(z),Le=0;if(te){for(L=0;L<z;L++)me[L]=de(G.size[L]),Le+=me[L];xe=Le/z}else for(he=de(G.size),L=0;L<z;L++)me[L]=he;if(Q)for(L=0;L<z;L++)ve[L]=G.line.width[L];else for(he=G.line.width,L=0;L<z;L++)ve[L]=he;I.sizeAvg=xe}else I.size=de(G&&G.size||10),I.borderSizes=de(G.line.width);return I}function g(E,C,L){var O=C.marker,z={};return L&&(L.marker&&L.marker.symbol?z=x(0,m.extendFlat({},O,L.marker)):L.marker&&(L.marker.size&&(z.size=L.marker.size),L.marker.color&&(z.colors=L.marker.color),L.marker.opacity!==void 0&&(z.opacity=L.marker.opacity))),z}function h(E,C,L){var O={};if(!L)return O;if(L.textfont){var z={opacity:1,text:C.text,texttemplate:C.texttemplate,textposition:C.textposition,textfont:m.extendFlat({},C.textfont)};L.textfont&&m.extendFlat(z.textfont,L.textfont),O=c(E,z)}return O}function b(E,C,L){var O={capSize:2*C.width*L,lineWidth:C.thickness*L,color:C.color};return C.copy_ystyle&&(O=E.error_y),O}var v=s.SYMBOL_SDF_SIZE,y=s.SYMBOL_SIZE,w=s.SYMBOL_STROKE,d={},S=f.symbolFuncs[0](.05*y);function T(E,C){var L,O,z=E.mx;if(z==="circle")return null;var G=f.symbolNumber(z),I=f.symbolFuncs[G%100],H=!!f.symbolNoDot[G%100],N=!!f.symbolNoFill[G%100],F=n.isDotSymbol(z);if(E.ma&&(z+="_"+E.ma),d[z])return d[z];var V=f.getMarkerAngle(E,C);return L=F&&!H?I(1.1*y,V)+S:I(y,V),O=M(L,{w:v,h:v,viewBox:[-y,-y,y,y],stroke:N?w:-w}),d[z]=O,O||null}$.exports={style:function(E,C){var L,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=E._context.plotGlPixelRatio;if(C.visible!==!0)return O;if(i.hasText(C)&&(O.text=c(E,C),O.textSel=h(E,C,C.selected),O.textUnsel=h(E,C,C.unselected)),i.hasMarkers(C)&&(O.marker=x(0,C),O.markerSel=g(0,C,C.selected),O.markerUnsel=g(0,C,C.unselected),!C.unselected&&m.isArrayOrTypedArray(C.marker.opacity))){var G=C.marker.opacity;for(O.markerUnsel.opacity=new Array(G.length),L=0;L<G.length;L++)O.markerUnsel.opacity[L]=a*G[L]}if(i.hasLines(C)){O.line={overlay:!0,thickness:C.line.width*z,color:C.line.color,opacity:C.opacity};var I=(s.DASHES[C.line.dash]||[1]).slice();for(L=0;L<I.length;++L)I[L]*=C.line.width*z;O.line.dashes=I}return C.error_x&&C.error_x.visible&&(O.errorX=b(C,C.error_x,z)),C.error_y&&C.error_y.visible&&(O.errorY=b(C,C.error_y,z)),C.fill&&C.fill!=="none"&&(O.fill={closed:!0,fill:C.fillcolor,thickness:0}),O},markerStyle:x,markerSelection:g,linePositions:function(E,C,L){var O,z,G=L.length,I=G/2;if(i.hasLines(C)&&I)if(C.line.shape==="hv"){for(O=[],z=0;z<I-1;z++)isNaN(L[2*z])||isNaN(L[2*z+1])?O.push(NaN,NaN,NaN,NaN):(O.push(L[2*z],L[2*z+1]),isNaN(L[2*z+2])||isNaN(L[2*z+3])?O.push(NaN,NaN):O.push(L[2*z+2],L[2*z+1]));O.push(L[G-2],L[G-1])}else if(C.line.shape==="hvh"){for(O=[],z=0;z<I-1;z++)if(isNaN(L[2*z])||isNaN(L[2*z+1])||isNaN(L[2*z+2])||isNaN(L[2*z+3]))isNaN(L[2*z])||isNaN(L[2*z+1])?O.push(NaN,NaN):O.push(L[2*z],L[2*z+1]),O.push(NaN,NaN);else{var H=(L[2*z]+L[2*z+2])/2;O.push(L[2*z],L[2*z+1],H,L[2*z+1],H,L[2*z+3])}O.push(L[G-2],L[G-1])}else if(C.line.shape==="vhv"){for(O=[],z=0;z<I-1;z++)if(isNaN(L[2*z])||isNaN(L[2*z+1])||isNaN(L[2*z+2])||isNaN(L[2*z+3]))isNaN(L[2*z])||isNaN(L[2*z+1])?O.push(NaN,NaN):O.push(L[2*z],L[2*z+1]),O.push(NaN,NaN);else{var N=(L[2*z+1]+L[2*z+3])/2;O.push(L[2*z],L[2*z+1],L[2*z],N,L[2*z+2],N)}O.push(L[G-2],L[G-1])}else if(C.line.shape==="vh"){for(O=[],z=0;z<I-1;z++)isNaN(L[2*z])||isNaN(L[2*z+1])?O.push(NaN,NaN,NaN,NaN):(O.push(L[2*z],L[2*z+1]),isNaN(L[2*z+2])||isNaN(L[2*z+3])?O.push(NaN,NaN):O.push(L[2*z],L[2*z+3]));O.push(L[G-2],L[G-1])}else O=L;var F=!1;for(z=0;z<O.length;z++)if(isNaN(O[z])){F=!0;break}var V=F||O.length>s.TOO_MANY_POINTS||i.hasMarkers(C)?"rect":"round";if(F&&C.connectgaps){var W=O[0],te=O[1];for(z=0;z<O.length;z+=2)isNaN(O[z])||isNaN(O[z+1])?(O[z]=W,O[z+1]=te):(W=O[z],te=O[z+1])}return{join:V,positions:O}},errorBarPositions:function(E,C,L,O,z){var G=_.getComponentMethod("errorbars","makeComputeError"),I=o.getFromId(E,C.xaxis,"x"),H=o.getFromId(E,C.yaxis,"y"),N=L.length/2,F={};function V(W,te){var Q=te._id.charAt(0),X=C["error_"+Q];if(X&&X.visible&&(te.type==="linear"||te.type==="log")){for(var q=G(X),Z={x:0,y:1}[Q],J={x:[0,1,2,3],y:[2,3,0,1]}[Q],ne=new Float64Array(4*N),re=1/0,ae=-1/0,ue=0,he=0;ue<N;ue++,he+=4){var de=W[ue];if(A(de)){var xe=L[2*ue+Z],me=q(de,ue),ve=me[0],Le=me[1];if(A(ve)&&A(Le)){var Ae=de-ve,we=de+Le;ne[he+J[0]]=xe-te.c2l(Ae),ne[he+J[1]]=te.c2l(we)-xe,ne[he+J[2]]=0,ne[he+J[3]]=0,re=Math.min(re,de-ve),ae=Math.max(ae,de+Le)}}}F[Q]={positions:L,errors:ne,_bnds:[re,ae]}}}return V(O,I),V(z,H),F},textPosition:function(E,C,L,O){var z,G=C._length,I={};if(i.hasMarkers(C)){var H=L.font,N=L.align,F=L.baseline;for(I.offset=new Array(G),z=0;z<G;z++){var V=O.sizes?O.sizes[z]:O.size,W=Array.isArray(H)?H[z].size:H.size,te=Array.isArray(N)?N.length>1?N[z]:N[0]:N,Q=Array.isArray(F)?F.length>1?F[z]:F[0]:F,X=u[te],q=u[Q],Z=V?V/.8+1:0,J=-q*Z-.5*q;I.offset[z]=[X*Z/W,J/W]}}return I}}},47148:function($,P,t){var A=t(71828),M=t(73972),l=t(68645),_=t(42341),m=t(47581),f=t(34098),o=t(67513),e=t(73927),i=t(49508),r=t(11058),n=t(28908),s=t(82410);$.exports=function(a,u,p,c){function x(S,T){return A.coerce(a,u,_,S,T)}var g=!!a.marker&&l.isOpenSymbol(a.marker.symbol),h=f.isBubble(a),b=o(a,u,c,x);if(b){e(a,u,c,x),x("xhoverformat"),x("yhoverformat");var v=b<m.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",v),f.hasLines(u)&&(x("connectgaps"),r(a,u,p,c,x),x("line.shape")),f.hasMarkers(u)&&(i(a,u,p,c,x,{noAngleRef:!0,noStandOff:!0}),x("marker.line.width",g||h?1:0)),f.hasText(u)&&(x("texttemplate"),s(a,u,c,x));var y=(u.line||{}).color,w=(u.marker||{}).color;x("fill"),u.fill!=="none"&&n(a,u,p,x);var d=M.getComponentMethod("errorbars","supplyDefaults");d(a,u,y||w||p,{axis:"y"}),d(a,u,y||w||p,{axis:"x",inherit:"y"}),A.coerceSelectionMarkerOpacity(u,x)}else u.visible=!1}},5345:function($,P,t){var A=t(71828),M=t(7901),l=t(37822).DESELECTDIM;$.exports={styleTextSelection:function(_){var m,f,o=_[0],e=o.trace,i=o.t,r=i._scene,n=i.index,s=r.selectBatch[n],a=r.unselectBatch[n],u=r.textOptions[n],p=r.textSelectedOptions[n]||{},c=r.textUnselectedOptions[n]||{},x=A.extendFlat({},u);if(s.length||a.length){var g=p.color,h=c.color,b=u.color,v=Array.isArray(b);for(x.color=new Array(e._length),m=0;m<s.length;m++)f=s[m],x.color[f]=g||(v?b[f]:b);for(m=0;m<a.length;m++){f=a[m];var y=v?b[f]:b;x.color[f]=h||(g?y:M.addOpacity(y,l))}}r.glText[n].update(x)}}},68101:function($,P,t){var A=t(8225);$.exports=function(M,l,_){var m=M.i;return"x"in M||(M.x=l._x[m]),"y"in M||(M.y=l._y[m]),A(M,l,_)}},68645:function($,P,t){var A=t(78232);P.isOpenSymbol=function(M){return typeof M=="string"?A.OPEN_RE.test(M):M%200>100},P.isDotSymbol=function(M){return typeof M=="string"?A.DOT_RE.test(M):M>200}},20794:function($,P,t){var A=t(73972),M=t(71828),l=t(34603);function _(m,f,o,e){var i=m.xa,r=m.ya,n=m.distance,s=m.dxy,a=m.index,u={pointNumber:a,x:f[a],y:o[a]};u.tx=Array.isArray(e.text)?e.text[a]:e.text,u.htx=Array.isArray(e.hovertext)?e.hovertext[a]:e.hovertext,u.data=Array.isArray(e.customdata)?e.customdata[a]:e.customdata,u.tp=Array.isArray(e.textposition)?e.textposition[a]:e.textposition;var p=e.textfont;p&&(u.ts=M.isArrayOrTypedArray(p.size)?p.size[a]:p.size,u.tc=Array.isArray(p.color)?p.color[a]:p.color,u.tf=Array.isArray(p.family)?p.family[a]:p.family);var c=e.marker;c&&(u.ms=M.isArrayOrTypedArray(c.size)?c.size[a]:c.size,u.mo=M.isArrayOrTypedArray(c.opacity)?c.opacity[a]:c.opacity,u.mx=M.isArrayOrTypedArray(c.symbol)?c.symbol[a]:c.symbol,u.ma=M.isArrayOrTypedArray(c.angle)?c.angle[a]:c.angle,u.mc=M.isArrayOrTypedArray(c.color)?c.color[a]:c.color);var x=c&&c.line;x&&(u.mlc=Array.isArray(x.color)?x.color[a]:x.color,u.mlw=M.isArrayOrTypedArray(x.width)?x.width[a]:x.width);var g=c&&c.gradient;g&&g.type!=="none"&&(u.mgt=Array.isArray(g.type)?g.type[a]:g.type,u.mgc=Array.isArray(g.color)?g.color[a]:g.color);var h=i.c2p(u.x,!0),b=r.c2p(u.y,!0),v=u.mrc||1,y=e.hoverlabel;y&&(u.hbg=Array.isArray(y.bgcolor)?y.bgcolor[a]:y.bgcolor,u.hbc=Array.isArray(y.bordercolor)?y.bordercolor[a]:y.bordercolor,u.hts=M.isArrayOrTypedArray(y.font.size)?y.font.size[a]:y.font.size,u.htc=Array.isArray(y.font.color)?y.font.color[a]:y.font.color,u.htf=Array.isArray(y.font.family)?y.font.family[a]:y.font.family,u.hnl=M.isArrayOrTypedArray(y.namelength)?y.namelength[a]:y.namelength);var w=e.hoverinfo;w&&(u.hi=Array.isArray(w)?w[a]:w);var d=e.hovertemplate;d&&(u.ht=Array.isArray(d)?d[a]:d);var S={};S[m.index]=u;var T=e._origX,E=e._origY,C=M.extendFlat({},m,{color:l(e,u),x0:h-v,x1:h+v,xLabelVal:T?T[a]:u.x,y0:b-v,y1:b+v,yLabelVal:E?E[a]:u.y,cd:S,distance:n,spikeDistance:s,hovertemplate:u.ht});return u.htx?C.text=u.htx:u.tx?C.text=u.tx:e.text&&(C.text=e.text),M.fillText(u,e,C),A.getComponentMethod("errorbars","hoverInfo")(u,e,C),C}$.exports={hoverPoints:function(m,f,o,e){var i,r,n,s,a,u,p,c,x,g,h=m.cd,b=h[0].t,v=h[0].trace,y=m.xa,w=m.ya,d=b.x,S=b.y,T=y.c2p(f),E=w.c2p(o),C=m.distance;if(b.tree){var L=y.p2c(T-C),O=y.p2c(T+C),z=w.p2c(E-C),G=w.p2c(E+C);i=e==="x"?b.tree.range(Math.min(L,O),Math.min(w._rl[0],w._rl[1]),Math.max(L,O),Math.max(w._rl[0],w._rl[1])):b.tree.range(Math.min(L,O),Math.min(z,G),Math.max(L,O),Math.max(z,G))}else i=b.ids;var I=C;if(e==="x"){var H=!!v.xperiodalignment,N=!!v.yperiodalignment;for(u=0;u<i.length;u++){if(s=d[r=i[u]],p=Math.abs(y.c2p(s)-T),H){var F=y.c2p(v._xStarts[r]),V=y.c2p(v._xEnds[r]);p=T>=Math.min(F,V)&&T<=Math.max(F,V)?0:1/0}if(p<I){if(I=p,a=S[r],c=w.c2p(a)-E,N){var W=w.c2p(v._yStarts[r]),te=w.c2p(v._yEnds[r]);c=E>=Math.min(W,te)&&E<=Math.max(W,te)?0:1/0}g=Math.sqrt(p*p+c*c),n=i[u]}}}else for(u=i.length-1;u>-1;u--)s=d[r=i[u]],a=S[r],p=y.c2p(s)-T,c=w.c2p(a)-E,(x=Math.sqrt(p*p+c*c))<I&&(I=g=x,n=r);return m.index=n,m.distance=I,m.dxy=g,n===void 0?[m]:[_(m,d,S,v)]},calcHover:_}},68868:function($,P,t){var A=t(72156);A.plot=t(26787),$.exports=A},26787:function($,P,t){var A=t(11870),M=t(46075),l=t(3593),_=t(42505),m=t(71828),f=t(64505).selectMode,o=t(79749),e=t(34098),i=t(68687),r=t(5345).styleTextSelection,n={};function s(a,u,p,c){var x=a._size,g=a.width*c,h=a.height*c,b=x.l*c,v=x.b*c,y=x.r*c,w=x.t*c,d=x.w*c,S=x.h*c;return[b+u.domain[0]*d,v+p.domain[0]*S,g-y-(1-u.domain[1])*d,h-w-(1-p.domain[1])*S]}($.exports=function(a,u,p){if(p.length){var c,x,g=a._fullLayout,h=u._scene,b=u.xaxis,v=u.yaxis;if(h)if(o(a,["ANGLE_instanced_arrays","OES_element_index_uint"],n)){var y=h.count,w=g._glcanvas.data()[0].regl;if(i(a,u,p),h.dirty){if(h.error2d===!0&&(h.error2d=l(w)),h.line2d===!0&&(h.line2d=M(w)),h.scatter2d===!0&&(h.scatter2d=A(w)),h.fill2d===!0&&(h.fill2d=M(w)),h.glText===!0)for(h.glText=new Array(y),c=0;c<y;c++)h.glText[c]=new _(w);if(h.glText){if(y>h.glText.length){var d=y-h.glText.length;for(c=0;c<d;c++)h.glText.push(new _(w))}else if(y<h.glText.length){var S=h.glText.length-y;h.glText.splice(y,S).forEach(function(ne){ne.destroy()})}for(c=0;c<y;c++)h.glText[c].update(h.textOptions[c])}if(h.line2d&&(h.line2d.update(h.lineOptions),h.lineOptions=h.lineOptions.map(function(ne){if(ne&&ne.positions){for(var re=ne.positions,ae=0;ae<re.length&&(isNaN(re[ae])||isNaN(re[ae+1]));)ae+=2;for(var ue=re.length-2;ue>ae&&(isNaN(re[ue])||isNaN(re[ue+1]));)ue-=2;ne.positions=re.slice(ae,ue+2)}return ne}),h.line2d.update(h.lineOptions)),h.error2d){var T=(h.errorXOptions||[]).concat(h.errorYOptions||[]);h.error2d.update(T)}h.scatter2d&&h.scatter2d.update(h.markerOptions),h.fillOrder=m.repeat(null,y),h.fill2d&&(h.fillOptions=h.fillOptions.map(function(ne,re){var ae=p[re];if(ne&&ae&&ae[0]&&ae[0].trace){var ue,he,de=ae[0],xe=de.trace,me=de.t,ve=h.lineOptions[re],Le=[];xe._ownfill&&Le.push(re),xe._nexttrace&&Le.push(re+1),Le.length&&(h.fillOrder[re]=Le);var Ae,we,se=[],oe=ve&&ve.positions||me.positions;if(xe.fill==="tozeroy"){for(Ae=0;Ae<oe.length&&isNaN(oe[Ae+1]);)Ae+=2;for(we=oe.length-2;we>Ae&&isNaN(oe[we+1]);)we-=2;oe[Ae+1]!==0&&(se=[oe[Ae],0]),se=se.concat(oe.slice(Ae,we+2)),oe[we+1]!==0&&(se=se.concat([oe[we],0]))}else if(xe.fill==="tozerox"){for(Ae=0;Ae<oe.length&&isNaN(oe[Ae]);)Ae+=2;for(we=oe.length-2;we>Ae&&isNaN(oe[we]);)we-=2;oe[Ae]!==0&&(se=[0,oe[Ae+1]]),se=se.concat(oe.slice(Ae,we+2)),oe[we]!==0&&(se=se.concat([0,oe[we+1]]))}else if(xe.fill==="toself"||xe.fill==="tonext"){for(se=[],ue=0,ne.splitNull=!0,he=0;he<oe.length;he+=2)(isNaN(oe[he])||isNaN(oe[he+1]))&&((se=se.concat(oe.slice(ue,he))).push(oe[ue],oe[ue+1]),se.push(null,null),ue=he+2);se=se.concat(oe.slice(ue)),ue&&se.push(oe[ue],oe[ue+1])}else{var fe=xe._nexttrace;if(fe){var Se=h.lineOptions[re+1];if(Se){var Me=Se.positions;if(xe.fill==="tonexty"){for(se=oe.slice(),re=Math.floor(Me.length/2);re--;){var be=Me[2*re],Ie=Me[2*re+1];isNaN(be)||isNaN(Ie)||se.push(be,Ie)}ne.fill=fe.fillcolor}}}}if(xe._prevtrace&&xe._prevtrace.fill==="tonext"){var Be=h.lineOptions[re-1].positions,ce=se.length/2,Te=[ue=ce];for(he=0;he<Be.length;he+=2)(isNaN(Be[he])||isNaN(Be[he+1]))&&(Te.push(he/2+ce+1),ue=he+2);se=se.concat(Be),ne.hole=Te}return ne.fillmode=xe.fill,ne.opacity=xe.opacity,ne.positions=se,ne}}),h.fill2d.update(h.fillOptions))}var E=g.dragmode,C=f(E),L=g.clickmode.indexOf("select")>-1;for(c=0;c<y;c++){var O=p[c][0],z=O.trace,G=O.t,I=G.index,H=z._length,N=G.x,F=G.y;if(z.selectedpoints||C||L){if(C||(C=!0),z.selectedpoints){var V=h.selectBatch[I]=m.selIndices2selPoints(z),W={};for(x=0;x<V.length;x++)W[V[x]]=1;var te=[];for(x=0;x<H;x++)W[x]||te.push(x);h.unselectBatch[I]=te}var Q=G.xpx=new Array(H),X=G.ypx=new Array(H);for(x=0;x<H;x++)Q[x]=b.c2p(N[x]),X[x]=v.c2p(F[x])}else G.xpx=G.ypx=null}if(C){if(h.select2d||(h.select2d=A(g._glcanvas.data()[1].regl)),h.scatter2d){var q=new Array(y);for(c=0;c<y;c++)q[c]=h.selectBatch[c].length||h.unselectBatch[c].length?h.markerUnselectedOptions[c]:{};h.scatter2d.update(q)}h.select2d&&(h.select2d.update(h.markerOptions),h.select2d.update(h.markerSelectedOptions)),h.glText&&p.forEach(function(ne){var re=((ne||[])[0]||{}).trace||{};e.hasText(re)&&r(ne)})}else h.scatter2d&&h.scatter2d.update(h.markerOptions);var Z={viewport:s(g,b,v,a._context.plotGlPixelRatio),range:[(b._rl||b.range)[0],(v._rl||v.range)[0],(b._rl||b.range)[1],(v._rl||v.range)[1]]},J=m.repeat(Z,h.count);h.fill2d&&h.fill2d.update(J),h.line2d&&h.line2d.update(J),h.error2d&&h.error2d.update(J.concat(J)),h.scatter2d&&h.scatter2d.update(J),h.select2d&&h.select2d.update(J),h.glText&&h.glText.forEach(function(ne){ne.update(Z)})}else h.init()}}).reglPrecompiled=n},38967:function($,P,t){var A=t(71828);$.exports=function(M,l){var _=l._scene,m={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},f={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return l._scene||((_=l._scene={}).init=function(){A.extendFlat(_,f,m)},_.init(),_.update=function(o){var e=A.repeat(o,_.count);if(_.fill2d&&_.fill2d.update(e),_.scatter2d&&_.scatter2d.update(e),_.line2d&&_.line2d.update(e),_.error2d&&_.error2d.update(e.concat(e)),_.select2d&&_.select2d.update(e),_.glText)for(var i=0;i<_.count;i++)_.glText[i].update(o)},_.draw=function(){for(var o=_.count,e=_.fill2d,i=_.error2d,r=_.line2d,n=_.scatter2d,s=_.glText,a=_.select2d,u=_.selectBatch,p=_.unselectBatch,c=0;c<o;c++){if(e&&_.fillOrder[c]&&e.draw(_.fillOrder[c]),r&&_.lineOptions[c]&&r.draw(c),i&&(_.errorXOptions[c]&&i.draw(c),_.errorYOptions[c]&&i.draw(c+o)),n&&_.markerOptions[c])if(p[c].length){var x=A.repeat([],_.count);x[c]=p[c],n.draw(x)}else u[c].length||n.draw(c);s[c]&&_.textOptions[c]&&s[c].render()}a&&a.draw(u),_.dirty=!1},_.destroy=function(){_.fill2d&&_.fill2d.destroy&&_.fill2d.destroy(),_.scatter2d&&_.scatter2d.destroy&&_.scatter2d.destroy(),_.error2d&&_.error2d.destroy&&_.error2d.destroy(),_.line2d&&_.line2d.destroy&&_.line2d.destroy(),_.select2d&&_.select2d.destroy&&_.select2d.destroy(),_.glText&&_.glText.forEach(function(o){o.destroy&&o.destroy()}),_.lineOptions=null,_.fillOptions=null,_.markerOptions=null,_.markerSelectedOptions=null,_.markerUnselectedOptions=null,_.errorXOptions=null,_.errorYOptions=null,_.textOptions=null,_.textSelectedOptions=null,_.textUnselectedOptions=null,_.selectBatch=null,_.unselectBatch=null,l._scene=null}),_.dirty||A.extendFlat(_,m),_}},58147:function($,P,t){var A=t(34098),M=t(5345).styleTextSelection;$.exports=function(l,_){var m=l.cd,f=l.xaxis,o=l.yaxis,e=[],i=m[0].trace,r=m[0].t,n=i._length,s=r.x,a=r.y,u=r._scene,p=r.index;if(!u)return e;var c=A.hasText(i),x=A.hasMarkers(i),g=!x&&!c;if(i.visible!==!0||g)return e;var h=[],b=[];if(_!==!1&&!_.degenerate)for(var v=0;v<n;v++)_.contains([r.xpx[v],r.ypx[v]],!1,v,l)?(h.push(v),e.push({pointNumber:v,x:f.c2d(s[v]),y:o.c2d(a[v])})):b.push(v);if(x){var y=u.scatter2d;if(h.length||b.length){if(!u.selectBatch[p].length&&!u.unselectBatch[p].length){var w=new Array(u.count);w[p]=u.markerUnselectedOptions[p],y.update.apply(y,w)}}else{var d=new Array(u.count);d[p]=u.markerOptions[p],y.update.apply(y,d)}}return u.selectBatch[p]=h,u.unselectBatch[p]=b,c&&M(m),e}},99181:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(19316),_=t(82196),m=t(23585),f=t(9012),o=t(50693),e=t(1426).extendFlat,i=t(30962).overrideAll,r=t(23585),n=l.line,s=l.marker;$.exports=i({lon:l.lon,lat:l.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},r.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},s.opacity,{dflt:1})},mode:e({},_.mode,{dflt:"markers"}),text:e({},_.text,{}),texttemplate:M({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},_.hovertext,{}),line:{color:n.color,width:n.width},connectgaps:_.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:s.opacity,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode},o("marker")),fill:l.fill,fillcolor:_.fillcolor,textfont:m.layers.symbol.textfont,textposition:m.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:e({},f.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:A()},"calc","nested")},15790:function($,P,t){var A=t(92770),M=t(71828),l=t(50606).BADNUM,_=t(18214),m=t(21081),f=t(91424),o=t(39984),e=t(34098),i=t(13056),r=t(23469).appendArrayPointValue,n=t(63893).NEWLINES,s=t(63893).BR_TAG_ALL;function a(g){return{type:g,geojson:_.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function u(g,h){return M.isArrayOrTypedArray(g)?h?function(b){return A(g[b])?+g[b]:0}:function(b){return g[b]}:g?function(){return g}:p}function p(){return""}function c(g){return g[0]===l}function x(g,h){var b;if(M.isArrayOrTypedArray(g)&&M.isArrayOrTypedArray(h)){b=["step",["get","point_count"],g[0]];for(var v=1;v<g.length;v++)b.push(h[v-1],g[v])}else b=g;return b}$.exports=function(g,h){var b,v=h[0].trace,y=v.visible===!0&&v._length!==0,w=v.fill!=="none",d=e.hasLines(v),S=e.hasMarkers(v),T=e.hasText(v),E=S&&v.marker.symbol==="circle",C=S&&v.marker.symbol!=="circle",L=v.cluster&&v.cluster.enabled,O=a("fill"),z=a("line"),G=a("circle"),I=a("symbol"),H={fill:O,line:z,circle:G,symbol:I};if(!y)return H;if((w||d)&&(b=_.calcTraceToLineCoords(h)),w&&(O.geojson=_.makePolygon(b),O.layout.visibility="visible",M.extendFlat(O.paint,{"fill-color":v.fillcolor})),d&&(z.geojson=_.makeLine(b),z.layout.visibility="visible",M.extendFlat(z.paint,{"line-width":v.line.width,"line-color":v.line.color,"line-opacity":v.opacity})),E){var N=function(W){var te,Q,X,q,Z=W[0].trace,J=Z.marker,ne=Z.selectedpoints,re=M.isArrayOrTypedArray(J.color),ae=M.isArrayOrTypedArray(J.size),ue=M.isArrayOrTypedArray(J.opacity);function he(se){return Z.opacity*se}re&&(Q=m.hasColorscale(Z,"marker")?m.makeColorScaleFuncFromTrace(J):M.identity),ae&&(X=o(Z)),ue&&(q=function(se){return he(A(se)?+M.constrain(se,0,1):0)});var de,xe,me=[];for(te=0;te<W.length;te++){var ve=W[te],Le=ve.lonlat;if(!c(Le)){var Ae={};Q&&(Ae.mcc=ve.mcc=Q(ve.mc)),X&&(Ae.mrc=ve.mrc=X(ve.ms)),q&&(Ae.mo=q(ve.mo)),ne&&(Ae.selected=ve.selected||0),me.push({type:"Feature",id:te+1,geometry:{type:"Point",coordinates:Le},properties:Ae})}}if(ne)for(de=f.makeSelectedPointStyleFns(Z),te=0;te<me.length;te++){var we=me[te].properties;de.selectedOpacityFn&&(we.mo=he(de.selectedOpacityFn(we))),de.selectedColorFn&&(we.mcc=de.selectedColorFn(we)),de.selectedSizeFn&&(we.mrc=de.selectedSizeFn(we))}return{geojson:{type:"FeatureCollection",features:me},mcc:re||de&&de.selectedColorFn?{type:"identity",property:"mcc"}:J.color,mrc:ae||de&&de.selectedSizeFn?{type:"identity",property:"mrc"}:(xe=J.size,xe/2),mo:ue||de&&de.selectedOpacityFn?{type:"identity",property:"mo"}:he(J.opacity)}}(h);G.geojson=N.geojson,G.layout.visibility="visible",L&&(G.filter=["!",["has","point_count"]],H.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(v.cluster.color,v.cluster.step),"circle-radius":x(v.cluster.size,v.cluster.step),"circle-opacity":x(v.cluster.opacity,v.cluster.step)}},H.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),M.extendFlat(G.paint,{"circle-color":N.mcc,"circle-radius":N.mrc,"circle-opacity":N.mo})}if(E&&L&&(G.filter=["!",["has","point_count"]]),(C||T)&&(I.geojson=function(W,te){for(var Q=te._fullLayout,X=W[0].trace,q=X.marker||{},Z=q.symbol,J=q.angle,ne=Z!=="circle"?u(Z):p,re=J!=="auto"?u(J,!0):p,ae=e.hasText(X)?u(X.text):p,ue=[],he=0;he<W.length;he++){var de=W[he];if(!c(de.lonlat)){var xe,me=X.texttemplate;if(me){var ve=Array.isArray(me)?me[he]||"":me,Le=X._module.formatLabels(de,X,Q),Ae={};r(Ae,X,de.i);var we=X._meta||{};xe=M.texttemplateString(ve,Le,Q._d3locale,Ae,de,we)}else xe=ae(he);xe&&(xe=xe.replace(n,"").replace(s,`
`)),ue.push({type:"Feature",geometry:{type:"Point",coordinates:de.lonlat},properties:{symbol:ne(he),angle:re(he),text:xe}})}}return{type:"FeatureCollection",features:ue}}(h,g),M.extendFlat(I.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),C&&(M.extendFlat(I.layout,{"icon-size":v.marker.size/10}),"angle"in v.marker&&v.marker.angle!=="auto"&&M.extendFlat(I.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),I.layout["icon-allow-overlap"]=v.marker.allowoverlap,M.extendFlat(I.paint,{"icon-opacity":v.opacity*v.marker.opacity,"icon-color":v.marker.color})),T)){var F=(v.marker||{}).size,V=i(v.textposition,F);M.extendFlat(I.layout,{"text-size":v.textfont.size,"text-anchor":V.anchor,"text-offset":V.offset,"text-font":v.textfont.family.split(", ")}),M.extendFlat(I.paint,{"text-color":v.textfont.color,"text-opacity":v.opacity})}return H}},76645:function($,P,t){var A=t(71828),M=t(34098),l=t(49508),_=t(11058),m=t(82410),f=t(28908),o=t(99181),e=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extra Bold Italic","Open Sans Extra Bold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];$.exports=function(i,r,n,s){function a(y,w){return A.coerce(i,r,o,y,w)}function u(y,w){return A.coerce2(i,r,o,y,w)}var p=function(y,w,d){var S=d("lon")||[],T=d("lat")||[],E=Math.min(S.length,T.length);return w._length=E,E}(0,r,a);if(p){if(a("text"),a("texttemplate"),a("hovertext"),a("hovertemplate"),a("mode"),a("below"),M.hasLines(r)&&(_(i,r,n,s,a,{noDash:!0}),a("connectgaps")),M.hasMarkers(r)){l(i,r,n,s,a,{noLine:!0,noAngle:!0}),a("marker.allowoverlap"),a("marker.angle");var c=r.marker;c.symbol!=="circle"&&(A.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),A.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}var x=u("cluster.maxzoom"),g=u("cluster.step"),h=u("cluster.color",r.marker&&r.marker.color||n),b=u("cluster.size"),v=u("cluster.opacity");a("cluster.enabled",x!==!1||g!==!1||h!==!1||b!==!1||v!==!1),M.hasText(r)&&m(i,r,s,a,{noSelect:!0,font:{family:e.indexOf(s.font.family)!==-1?s.font.family:"Open Sans Regular",size:s.font.size,color:s.font.color}}),a("fill"),r.fill!=="none"&&f(i,r,n,a),A.coerceSelectionMarkerOpacity(r,a)}else r.visible=!1}},53353:function($){$.exports=function(P,t){return P.lon=t.lon,P.lat=t.lat,P}},15636:function($,P,t){var A=t(89298);$.exports=function(M,l,_){var m={},f=_[l.subplot]._subplot.mockAxis,o=M.lonlat;return m.lonLabel=A.tickText(f,f.c2l(o[0]),!0).text,m.latLabel=A.tickText(f,f.c2l(o[1]),!0).text,m}},28178:function($,P,t){var A=t(30211),M=t(71828),l=t(34603),_=M.fillText,m=t(50606).BADNUM,f=t(77734).traceLayerPrefix;function o(e,i,r){if(!e.hovertemplate){var n=(i.hi||e.hoverinfo).split("+"),s=n.indexOf("all")!==-1,a=n.indexOf("lon")!==-1,u=n.indexOf("lat")!==-1,p=i.lonlat,c=[];return s||a&&u?c.push("("+x(p[1])+", "+x(p[0])+")"):a?c.push(r.lon+x(p[0])):u&&c.push(r.lat+x(p[1])),(s||n.indexOf("text")!==-1)&&_(i,e,c),c.join("<br>")}function x(g){return g+""}}$.exports={hoverPoints:function(e,i,r){var n=e.cd,s=n[0].trace,a=e.xa,u=e.ya,p=e.subplot,c=[],x=f+s.uid+"-circle",g=s.cluster&&s.cluster.enabled;if(g){var h=p.map.queryRenderedFeatures(null,{layers:[x]});c=h.map(function(O){return O.id})}var b=360*(i>=0?Math.floor((i+180)/360):Math.ceil((i-180)/360)),v=i-b;if(A.getClosest(n,function(O){var z=O.lonlat;if(z[0]===m||g&&c.indexOf(O.i+1)===-1)return 1/0;var G=M.modHalf(z[0],360),I=z[1],H=p.project([G,I]),N=H.x-a.c2p([v,I]),F=H.y-u.c2p([G,r]),V=Math.max(3,O.mrc||0);return Math.max(Math.sqrt(N*N+F*F)-V,1-3/V)},e),e.index!==!1){var y=n[e.index],w=y.lonlat,d=[M.modHalf(w[0],360)+b,w[1]],S=a.c2p(d),T=u.c2p(d),E=y.mrc||1;e.x0=S-E,e.x1=S+E,e.y0=T-E,e.y1=T+E;var C={};C[s.subplot]={_subplot:p};var L=s._module.formatLabels(y,s,C);return e.lonLabel=L.lonLabel,e.latLabel=L.latLabel,e.color=l(s,y),e.extraText=o(s,y,n[0].t.labels),e.hovertemplate=s.hovertemplate,[e]}},getExtraText:o}},20467:function($,P,t){$.exports={attributes:t(99181),supplyDefaults:t(76645),colorbar:t(4898),formatLabels:t(15636),calc:t(84622),plot:t(86951),hoverPoints:t(28178).hoverPoints,eventData:t(53353),selectPoints:t(86387),styleOnSelect:function(A,M){M&&M[0].trace._glTrace.update(M)},moduleType:"trace",name:"scattermapbox",basePlotModule:t(50101),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},86951:function($,P,t){var A=t(71828),M=t(15790),l=t(77734).traceLayerPrefix,_={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function m(o,e,i,r){this.type="scattermapbox",this.subplot=o,this.uid=e,this.clusterEnabled=i,this.isHidden=r,this.sourceIds={fill:"source-"+e+"-fill",line:"source-"+e+"-line",circle:"source-"+e+"-circle",symbol:"source-"+e+"-symbol",cluster:"source-"+e+"-circle",clusterCount:"source-"+e+"-circle"},this.layerIds={fill:l+e+"-fill",line:l+e+"-line",circle:l+e+"-circle",symbol:l+e+"-symbol",cluster:l+e+"-cluster",clusterCount:l+e+"-cluster-count"},this.below=null}var f=m.prototype;f.addSource=function(o,e,i){var r={type:"geojson",data:e.geojson};i&&i.enabled&&A.extendFlat(r,{cluster:!0,clusterMaxZoom:i.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[o]);n?n.setData(e.geojson):this.subplot.map.addSource(this.sourceIds[o],r)},f.setSourceData=function(o,e){this.subplot.map.getSource(this.sourceIds[o]).setData(e.geojson)},f.addLayer=function(o,e,i){var r={type:e.type,id:this.layerIds[o],source:this.sourceIds[o],layout:e.layout,paint:e.paint};e.filter&&(r.filter=e.filter);for(var n,s=this.layerIds[o],a=this.subplot.getMapLayers(),u=0;u<a.length;u++)if(a[u].id===s){n=!0;break}n?(this.subplot.setOptions(s,"setLayoutProperty",r.layout),r.layout.visibility==="visible"&&this.subplot.setOptions(s,"setPaintProperty",r.paint)):this.subplot.addLayer(r,i)},f.update=function(o){var e=o[0].trace,i=this.subplot,r=i.map,n=M(i.gd,o),s=i.belowLookup["trace-"+this.uid],a=!(!e.cluster||!e.cluster.enabled),u=!!this.clusterEnabled,p=this;function c(v){u?function(y){for(var w=_.cluster,d=w.length-1;d>=0;d--){var S=w[d];r.removeLayer(p.layerIds[S])}y||r.removeSource(p.sourceIds.circle)}(v):function(y){for(var w=_.nonCluster,d=w.length-1;d>=0;d--){var S=w[d];r.removeLayer(p.layerIds[S]),y||r.removeSource(p.sourceIds[S])}}(v)}function x(v){a?function(y){y||p.addSource("circle",n.circle,e.cluster);for(var w=_.cluster,d=0;d<w.length;d++){var S=w[d],T=n[S];p.addLayer(S,T,s)}}(v):function(y){for(var w=_.nonCluster,d=0;d<w.length;d++){var S=w[d],T=n[S];y||p.addSource(S,T),p.addLayer(S,T,s)}}(v)}function g(){for(var v=a?_.cluster:_.nonCluster,y=0;y<v.length;y++){var w=v[y],d=n[w];d&&(i.setOptions(p.layerIds[w],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(w!=="cluster"&&p.setSourceData(w,d),i.setOptions(p.layerIds[w],"setPaintProperty",d.paint)))}}var h=this.isHidden,b=e.visible!==!0;b?h||c():h?b||x():u!==a?(c(),x()):(this.below!==s&&(c(!0),x(!0)),g()),this.clusterEnabled=a,this.isHidden=b,this.below=s,o[0].trace._glTrace=this},f.dispose=function(){for(var o=this.subplot.map,e=this.clusterEnabled?_.cluster:_.nonCluster,i=e.length-1;i>=0;i--){var r=e[i];o.removeLayer(this.layerIds[r]),o.removeSource(this.sourceIds[r])}},$.exports=function(o,e){var i,r,n,s=e[0].trace,a=s.cluster&&s.cluster.enabled,u=s.visible!==!0,p=new m(o,s.uid,a,u),c=M(o.gd,e),x=p.below=o.belowLookup["trace-"+s.uid];if(a)for(p.addSource("circle",c.circle,s.cluster),i=0;i<_.cluster.length;i++)n=c[r=_.cluster[i]],p.addLayer(r,n,x);else for(i=0;i<_.nonCluster.length;i++)n=c[r=_.nonCluster[i]],p.addSource(r,n,s.cluster),p.addLayer(r,n,x);return e[0].trace._glTrace=p,p}},86387:function($,P,t){var A=t(71828),M=t(34098),l=t(50606).BADNUM;$.exports=function(_,m){var f,o=_.cd,e=_.xaxis,i=_.yaxis,r=[],n=o[0].trace;if(!M.hasMarkers(n))return[];if(m===!1)for(f=0;f<o.length;f++)o[f].selected=0;else for(f=0;f<o.length;f++){var s=o[f],a=s.lonlat;if(a[0]!==l){var u=[A.modHalf(a[0],360),a[1]],p=[e.c2p(u),i.c2p(u)];m.contains(p,null,f,_)?(r.push({pointNumber:f,lon:a[0],lat:a[1]}),s.selected=1):s.selected=0}}return r}},81245:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(1426).extendFlat,_=t(82196),m=t(9012),f=_.line;$.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:f.color,width:f.width,dash:f.dash,backoff:f.backoff,shape:l({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:l({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:l({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:l({},m.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:A(),selected:_.selected,unselected:_.unselected}},26442:function($,P,t){var A=t(92770),M=t(50606).BADNUM,l=t(89298),_=t(36922),m=t(75225),f=t(66279),o=t(47761).calcMarkerSize;$.exports=function(e,i){for(var r=e._fullLayout,n=i.subplot,s=r[n].radialaxis,a=r[n].angularaxis,u=s.makeCalcdata(i,"r"),p=a.makeCalcdata(i,"theta"),c=i._length,x=new Array(c),g=0;g<c;g++){var h=u[g],b=p[g],v=x[g]={};A(h)&&A(b)?(v.r=h,v.theta=b):v.r=M}var y=o(i,c);return i._extremes.x=l.findExtremes(s,u,{ppad:y}),_(e,i),m(x,i),f(x,i),x}},22184:function($,P,t){var A=t(71828),M=t(34098),l=t(49508),_=t(11058),m=t(94039),f=t(82410),o=t(28908),e=t(47581).PTS_LINESONLY,i=t(81245);function r(n,s,a,u){var p,c=u("r"),x=u("theta");if(c)x?p=Math.min(c.length,x.length):(p=c.length,u("theta0"),u("dtheta"));else{if(!x)return 0;p=s.theta.length,u("r0"),u("dr")}return s._length=p,p}$.exports={handleRThetaDefaults:r,supplyDefaults:function(n,s,a,u){function p(g,h){return A.coerce(n,s,i,g,h)}var c=r(0,s,0,p);if(c){p("thetaunit"),p("mode",c<e?"lines+markers":"lines"),p("text"),p("hovertext"),s.hoveron!=="fills"&&p("hovertemplate"),M.hasLines(s)&&(_(n,s,a,u,p,{backoff:!0}),m(n,s,p),p("connectgaps")),M.hasMarkers(s)&&l(n,s,a,u,p,{gradient:!0}),M.hasText(s)&&(p("texttemplate"),f(n,s,u,p));var x=[];(M.hasMarkers(s)||M.hasText(s))&&(p("cliponaxis"),p("marker.maxdisplayed"),x.push("points")),p("fill"),s.fill!=="none"&&(o(n,s,a,p),M.hasLines(s)||m(n,s,p)),s.fill!=="tonext"&&s.fill!=="toself"||x.push("fills"),p("hoveron",x.join("+")||"points"),A.coerceSelectionMarkerOpacity(s,p)}else s.visible=!1}}},98608:function($,P,t){var A=t(71828),M=t(89298);$.exports=function(l,_,m){var f,o,e={},i=m[_.subplot]._subplot;i?(f=i.radialAxis,o=i.angularAxis):(f=(i=m[_.subplot]).radialaxis,o=i.angularaxis);var r=f.c2l(l.r);e.rLabel=M.tickText(f,r,!0).text;var n=o.thetaunit==="degrees"?A.rad2deg(l.theta):l.theta;return e.thetaLabel=M.tickText(o,n,!0).text,e}},59150:function($,P,t){var A=t(33720);function M(l,_,m,f){var o=m.radialAxis,e=m.angularAxis;o._hovertitle="r",e._hovertitle="";var i={};i[_.subplot]={_subplot:m};var r=_._module.formatLabels(l,_,i);f.rLabel=r.rLabel,f.thetaLabel=r.thetaLabel;var n=l.hi||_.hoverinfo,s=[];function a(p,c){s.push(p._hovertitle+": "+c)}if(!_.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["r","theta","text"]),u.indexOf("r")!==-1&&a(o,f.rLabel),u.indexOf("theta")!==-1&&a(e,f.thetaLabel),u.indexOf("text")!==-1&&f.text&&(s.push(f.text),delete f.text),f.extraText=s.join("<br>")}}$.exports={hoverPoints:function(l,_,m,f){var o=A(l,_,m,f);if(o&&o[0].index!==!1){var e=o[0];if(e.index===void 0)return o;var i=l.subplot,r=e.cd[e.index],n=e.trace;if(i.isPtInside(r))return e.xLabelVal=void 0,e.yLabelVal=void 0,M(r,n,i,e),e.hovertemplate=n.hovertemplate,o}},makeHoverPointText:M}},91271:function($,P,t){$.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(23580),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(81245),supplyDefaults:t(22184).supplyDefaults,colorbar:t(4898),formatLabels:t(98608),calc:t(26442),plot:t(45162),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(59150).hoverPoints,selectPoints:t(98002),meta:{}}},45162:function($,P,t){var A=t(32663),M=t(50606).BADNUM;$.exports=function(l,_,m){for(var f=_.layers.frontplot.select("g.scatterlayer"),o=_.xaxis,e=_.yaxis,i={xaxis:o,yaxis:e,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},r=_.radialAxis,n=_.angularAxis,s=0;s<m.length;s++)for(var a=m[s],u=0;u<a.length;u++){u===0&&(a[0].trace._xA=o,a[0].trace._yA=e);var p=a[u],c=p.r;if(c===M)p.x=p.y=M;else{var x=r.c2g(c),g=n.c2g(p.theta);p.x=x*Math.cos(g),p.y=x*Math.sin(g)}}A(l,i,m,f)}},53286:function($,P,t){var A=t(81245),M=t(42341),l=t(5386).si;$.exports={mode:A.mode,r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,text:A.text,texttemplate:l({editType:"plot"},{keys:["r","theta","text"]}),hovertext:A.hovertext,hovertemplate:A.hovertemplate,line:M.line,connectgaps:M.connectgaps,marker:M.marker,fill:M.fill,fillcolor:M.fillcolor,textposition:M.textposition,textfont:M.textfont,hoverinfo:A.hoverinfo,selected:A.selected,unselected:A.unselected}},65746:function($,P,t){$.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(23580),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(53286),supplyDefaults:t(75485),colorbar:t(4898),formatLabels:t(46255),calc:t(37499),hoverPoints:t(29347).hoverPoints,selectPoints:t(58147),meta:{}}},37499:function($,P,t){var A=t(36922),M=t(47761).calcMarkerSize,l=t(19635),_=t(89298),m=t(78232).TOO_MANY_POINTS;$.exports=function(f,o){var e=f._fullLayout,i=o.subplot,r=e[i].radialaxis,n=e[i].angularaxis,s=o._r=r.makeCalcdata(o,"r"),a=o._theta=n.makeCalcdata(o,"theta"),u=o._length,p={};u<s.length&&(s=s.slice(0,u)),u<a.length&&(a=a.slice(0,u)),p.r=s,p.theta=a,A(f,o);var c,x=p.opts=l.style(f,o);return u<m?c=M(o,u):x.marker&&(c=2*(x.marker.sizeAvg||Math.max(x.marker.size,3))),o._extremes.x=_.findExtremes(r,s,{ppad:c}),[{x:!1,y:!1,t:p,trace:o}]}},75485:function($,P,t){var A=t(71828),M=t(34098),l=t(22184).handleRThetaDefaults,_=t(49508),m=t(11058),f=t(82410),o=t(28908),e=t(47581).PTS_LINESONLY,i=t(53286);$.exports=function(r,n,s,a){function u(c,x){return A.coerce(r,n,i,c,x)}var p=l(r,n,a,u);p?(u("thetaunit"),u("mode",p<e?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),M.hasLines(n)&&(m(r,n,s,a,u),u("connectgaps")),M.hasMarkers(n)&&_(r,n,s,a,u,{noAngleRef:!0,noStandOff:!0}),M.hasText(n)&&(u("texttemplate"),f(r,n,a,u)),u("fill"),n.fill!=="none"&&o(r,n,s,u),A.coerceSelectionMarkerOpacity(n,u)):n.visible=!1}},46255:function($,P,t){var A=t(98608);$.exports=function(M,l,_){var m=M.i;return"r"in M||(M.r=l._r[m]),"theta"in M||(M.theta=l._theta[m]),A(M,l,_)}},29347:function($,P,t){var A=t(20794),M=t(59150).makeHoverPointText;$.exports={hoverPoints:function(l,_,m,f){var o=l.cd[0].t,e=o.r,i=o.theta,r=A.hoverPoints(l,_,m,f);if(r&&r[0].index!==!1){var n=r[0];if(n.index===void 0)return r;var s=l.subplot,a=n.cd[n.index],u=n.trace;if(a.r=e[n.index],a.theta=i[n.index],s.isPtInside(a))return n.xLabelVal=void 0,n.yLabelVal=void 0,M(a,u,s,n),r}}}},21461:function($,P,t){var A=t(65746);A.plot=t(49741),$.exports=A},49741:function($,P,t){var A=t(88294),M=t(92770),l=t(26787),_=t(38967),m=t(19635),f=t(71828),o=t(78232).TOO_MANY_POINTS;$.exports=function(e,i,r){if(r.length){var n=i.radialAxis,s=i.angularAxis,a=_(e,i);return r.forEach(function(u){if(u&&u[0]&&u[0].trace){var p,c=u[0],x=c.trace,g=c.t,h=x._length,b=g.r,v=g.theta,y=g.opts,w=b.slice(),d=v.slice();for(p=0;p<b.length;p++)i.isPtInside({r:b[p],theta:v[p]})||(w[p]=NaN,d[p]=NaN);var S=new Array(2*h),T=Array(h),E=Array(h);for(p=0;p<h;p++){var C,L,O=w[p];if(M(O)){var z=n.c2g(O),G=s.c2g(d[p],x.thetaunit);C=z*Math.cos(G),L=z*Math.sin(G)}else C=L=NaN;T[p]=S[2*p]=C,E[p]=S[2*p+1]=L}g.tree=A(S),y.marker&&h>=o&&(y.marker.cluster=g.tree),y.marker&&(y.markerSel.positions=y.markerUnsel.positions=y.marker.positions=S),y.line&&S.length>1&&f.extendFlat(y.line,m.linePositions(e,x,S)),y.text&&(f.extendFlat(y.text,{positions:S},m.textPosition(e,x,y.text,y.marker)),f.extendFlat(y.textSel,{positions:S},m.textPosition(e,x,y.text,y.markerSel)),f.extendFlat(y.textUnsel,{positions:S},m.textPosition(e,x,y.text,y.markerUnsel))),y.fill&&!a.fill2d&&(a.fill2d=!0),y.marker&&!a.scatter2d&&(a.scatter2d=!0),y.line&&!a.line2d&&(a.line2d=!0),y.text&&!a.glText&&(a.glText=!0),a.lineOptions.push(y.line),a.fillOptions.push(y.fill),a.markerOptions.push(y.marker),a.markerSelectedOptions.push(y.markerSel),a.markerUnselectedOptions.push(y.markerUnsel),a.textOptions.push(y.text),a.textSelectedOptions.push(y.textSel),a.textUnselectedOptions.push(y.textUnsel),a.selectBatch.push([]),a.unselectBatch.push([]),g.x=T,g.y=E,g.rawx=T,g.rawy=E,g.r=b,g.theta=v,g.positions=S,g._scene=a,g.index=a.count,a.count++}}),l(e,i,r)}},$.exports.reglPrecompiled={}},48300:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(1426).extendFlat,_=t(82196),m=t(9012),f=_.line;$.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:M({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:f.color,width:f.width,dash:f.dash,backoff:f.backoff,shape:l({},f.shape,{values:["linear","spline"]}),smoothing:f.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:l({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:l({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:l({},m.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:A(),selected:_.selected,unselected:_.unselected}},30621:function($,P,t){var A=t(92770),M=t(50606).BADNUM,l=t(36922),_=t(75225),m=t(66279),f=t(47761).calcMarkerSize;$.exports=function(o,e){for(var i=o._fullLayout,r=e.subplot,n=i[r].realaxis,s=i[r].imaginaryaxis,a=n.makeCalcdata(e,"real"),u=s.makeCalcdata(e,"imag"),p=e._length,c=new Array(p),x=0;x<p;x++){var g=a[x],h=u[x],b=c[x]={};A(g)&&A(h)?(b.real=g,b.imag=h):b.real=M}return f(e,p),l(o,e),_(c,e),m(c,e),c}},65269:function($,P,t){var A=t(71828),M=t(34098),l=t(49508),_=t(11058),m=t(94039),f=t(82410),o=t(28908),e=t(47581).PTS_LINESONLY,i=t(48300);$.exports=function(r,n,s,a){function u(x,g){return A.coerce(r,n,i,x,g)}var p=function(x,g,h,b){var v,y=b("real"),w=b("imag");return y&&w&&(v=Math.min(y.length,w.length)),g._length=v,v}(0,n,0,u);if(p){u("mode",p<e?"lines+markers":"lines"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),M.hasLines(n)&&(_(r,n,s,a,u,{backoff:!0}),m(r,n,u),u("connectgaps")),M.hasMarkers(n)&&l(r,n,s,a,u,{gradient:!0}),M.hasText(n)&&(u("texttemplate"),f(r,n,a,u));var c=[];(M.hasMarkers(n)||M.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),c.push("points")),u("fill"),n.fill!=="none"&&(o(r,n,s,u),M.hasLines(n)||m(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||c.push("fills"),u("hoveron",c.join("+")||"points"),A.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},62047:function($,P,t){var A=t(89298);$.exports=function(M,l,_){var m={},f=_[l.subplot]._subplot;return m.realLabel=A.tickText(f.radialAxis,M.real,!0).text,m.imagLabel=A.tickText(f.angularAxis,M.imag,!0).text,m}},11350:function($,P,t){var A=t(33720);function M(l,_,m,f){var o=m.radialAxis,e=m.angularAxis;o._hovertitle="real",e._hovertitle="imag";var i={};i[_.subplot]={_subplot:m};var r=_._module.formatLabels(l,_,i);f.realLabel=r.realLabel,f.imagLabel=r.imagLabel;var n=l.hi||_.hoverinfo,s=[];function a(p,c){s.push(p._hovertitle+": "+c)}if(!_.hovertemplate){var u=n.split("+");u.indexOf("all")!==-1&&(u=["real","imag","text"]),u.indexOf("real")!==-1&&a(o,f.realLabel),u.indexOf("imag")!==-1&&a(e,f.imagLabel),u.indexOf("text")!==-1&&f.text&&(s.push(f.text),delete f.text),f.extraText=s.join("<br>")}}$.exports={hoverPoints:function(l,_,m,f){var o=A(l,_,m,f);if(o&&o[0].index!==!1){var e=o[0];if(e.index===void 0)return o;var i=l.subplot,r=e.cd[e.index],n=e.trace;if(i.isPtInside(r))return e.xLabelVal=void 0,e.yLabelVal=void 0,M(r,n,i,e),e.hovertemplate=n.hovertemplate,o}},makeHoverPointText:M}},85956:function($,P,t){$.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(7504),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(48300),supplyDefaults:t(65269),colorbar:t(4898),formatLabels:t(62047),calc:t(30621),plot:t(12480),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(11350).hoverPoints,selectPoints:t(98002),meta:{}}},12480:function($,P,t){var A=t(32663),M=t(50606).BADNUM,l=t(23893).smith;$.exports=function(_,m,f){for(var o=m.layers.frontplot.select("g.scatterlayer"),e=m.xaxis,i=m.yaxis,r={xaxis:e,yaxis:i,plot:m.framework,layerClipId:m._hasClipOnAxisFalse?m.clipIds.forTraces:null},n=0;n<f.length;n++)for(var s=f[n],a=0;a<s.length;a++){a===0&&(s[0].trace._xA=e,s[0].trace._yA=i);var u=s[a],p=u.real;if(p===M)u.x=u.y=M;else{var c=l([p,u.imag]);u.x=c[0],u.y=c[1]}}A(_,r,f,o)}},50413:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(82196),_=t(9012),m=t(50693),f=t(79952).P,o=t(1426).extendFlat,e=l.marker,i=l.line,r=e.line;$.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:o({},l.mode,{dflt:"markers"}),text:o({},l.text,{}),texttemplate:M({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:o({},l.hovertext,{}),line:{color:i.color,width:i.width,dash:f,backoff:i.backoff,shape:o({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:l.connectgaps,cliponaxis:l.cliponaxis,fill:o({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:o({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:o({width:r.width,editType:"calc"},m("marker.line")),gradient:e.gradient,editType:"calc"},m("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:o({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:l.hoveron,hovertemplate:A()}},54337:function($,P,t){var A=t(92770),M=t(36922),l=t(75225),_=t(66279),m=t(47761).calcMarkerSize,f=["a","b","c"],o={a:["b","c"],b:["a","c"],c:["a","b"]};$.exports=function(e,i){var r,n,s,a,u,p,c=e._fullLayout[i.subplot].sum,x=i.sum||c,g={a:i.a,b:i.b,c:i.c};for(r=0;r<f.length;r++)if(!g[s=f[r]]){for(u=g[o[s][0]],p=g[o[s][1]],a=new Array(u.length),n=0;n<u.length;n++)a[n]=x-u[n]-p[n];g[s]=a}var h,b,v,y,w,d,S=i._length,T=new Array(S);for(r=0;r<S;r++)h=g.a[r],b=g.b[r],v=g.c[r],A(h)&&A(b)&&A(v)?((y=c/((h=+h)+(b=+b)+(v=+v)))!=1&&(h*=y,b*=y,v*=y),d=h,w=v-b,T[r]={x:w,y:d,a:h,b,c:v}):T[r]={x:!1,y:!1};return m(i,S),M(e,i),l(T,i),_(T,i),T}},46008:function($,P,t){var A=t(71828),M=t(47581),l=t(34098),_=t(49508),m=t(11058),f=t(94039),o=t(82410),e=t(28908),i=t(50413);$.exports=function(r,n,s,a){function u(b,v){return A.coerce(r,n,i,b,v)}var p,c=u("a"),x=u("b"),g=u("c");if(c?(p=c.length,x?(p=Math.min(p,x.length),g&&(p=Math.min(p,g.length))):p=g?Math.min(p,g.length):0):x&&g&&(p=Math.min(x.length,g.length)),p){n._length=p,u("sum"),u("text"),u("hovertext"),n.hoveron!=="fills"&&u("hovertemplate"),u("mode",p<M.PTS_LINESONLY?"lines+markers":"lines"),l.hasLines(n)&&(m(r,n,s,a,u,{backoff:!0}),f(r,n,u),u("connectgaps")),l.hasMarkers(n)&&_(r,n,s,a,u,{gradient:!0}),l.hasText(n)&&(u("texttemplate"),o(r,n,a,u));var h=[];(l.hasMarkers(n)||l.hasText(n))&&(u("cliponaxis"),u("marker.maxdisplayed"),h.push("points")),u("fill"),n.fill!=="none"&&(e(r,n,s,u),l.hasLines(n)||f(r,n,u)),n.fill!=="tonext"&&n.fill!=="toself"||h.push("fills"),u("hoveron",h.join("+")||"points"),A.coerceSelectionMarkerOpacity(n,u)}else n.visible=!1}},4524:function($){$.exports=function(P,t,A,M,l){if(t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),M[l]){var _=M[l];P.a=_.a,P.b=_.b,P.c=_.c}else P.a=t.a,P.b=t.b,P.c=t.c;return P}},93645:function($,P,t){var A=t(89298);$.exports=function(M,l,_){var m={},f=_[l.subplot]._subplot;return m.aLabel=A.tickText(f.aaxis,M.a,!0).text,m.bLabel=A.tickText(f.baxis,M.b,!0).text,m.cLabel=A.tickText(f.caxis,M.c,!0).text,m}},47250:function($,P,t){var A=t(33720);$.exports=function(M,l,_,m){var f=A(M,l,_,m);if(f&&f[0].index!==!1){var o=f[0];if(o.index===void 0){var e=1-o.y0/M.ya._length,i=M.xa._length,r=i*e/2,n=i-r;return o.x0=Math.max(Math.min(o.x0,n),r),o.x1=Math.max(Math.min(o.x1,n),r),f}var s=o.cd[o.index],a=o.trace,u=o.subplot;o.a=s.a,o.b=s.b,o.c=s.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var p={};p[a.subplot]={_subplot:u};var c=a._module.formatLabels(s,a,p);o.aLabel=c.aLabel,o.bLabel=c.bLabel,o.cLabel=c.cLabel;var x=s.hi||a.hoverinfo,g=[];if(!a.hovertemplate){var h=x.split("+");h.indexOf("all")!==-1&&(h=["a","b","c"]),h.indexOf("a")!==-1&&b(u.aaxis,o.aLabel),h.indexOf("b")!==-1&&b(u.baxis,o.bLabel),h.indexOf("c")!==-1&&b(u.caxis,o.cLabel)}return o.extraText=g.join("<br>"),o.hovertemplate=a.hovertemplate,f}function b(v,y){g.push(v._hovertitle+": "+y)}}},52979:function($,P,t){$.exports={attributes:t(50413),supplyDefaults:t(46008),colorbar:t(4898),formatLabels:t(93645),calc:t(54337),plot:t(7507),style:t(16296).style,styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(47250),selectPoints:t(98002),eventData:t(4524),moduleType:"trace",name:"scatterternary",basePlotModule:t(61639),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},7507:function($,P,t){var A=t(32663);$.exports=function(M,l,_){var m=l.plotContainer;m.select(".scatterlayer").selectAll("*").remove();for(var f=l.xaxis,o=l.yaxis,e={xaxis:f,yaxis:o,plot:m,layerClipId:l._hasClipOnAxisFalse?l.clipIdRelative:null},i=l.layers.frontplot.select("g.scatterlayer"),r=0;r<_.length;r++){var n=_[r];n.length&&(n[0].trace._xA=f,n[0].trace._yA=o)}A(M,e,_,i)}},46880:function($,P,t){var A=t(82196),M=t(50693),l=t(12663).axisHoverFormat,_=t(5386).fF,m=t(42341),f=t(85555).idRegex,o=t(44467).templatedArray,e=t(1426).extendFlat,i=A.marker,r=i.line,n=e(M("marker.line",{editTypeOverride:"calc"}),{width:e({},r.width,{editType:"calc"}),editType:"calc"}),s=e(M("marker"),{symbol:i.symbol,angle:i.angle,size:e({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:n,editType:"calc"});function a(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:f[u],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",$.exports={dimensions:o("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:e({},m.text,{}),hovertext:e({},m.hovertext,{}),hovertemplate:_(),xhoverformat:l("x"),yhoverformat:l("y"),marker:s,xaxes:a("x"),yaxes:a("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:m.selected.marker,editType:"calc"},unselected:{marker:m.unselected.marker,editType:"calc"},opacity:m.opacity}},65017:function($,P,t){var A=t(73972),M=t(83312);$.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(46880),supplyDefaults:t(25784),colorbar:t(4898),calc:t(87625),plot:t(79410),hoverPoints:t(8567).hoverPoints,selectPoints:t(8689),editStyle:t(28801),meta:{}},A.register(M)},16947:function($,P,t){var A=t(46075),M=t(73972),l=t(79749),_=t(27659).a0,m=t(93612),f=t(41675).getFromId,o=t(89298).shouldShowZeroLine,e="splom",i={};function r(s,a,u){for(var p=u.matrixOptions.data.length,c=a._visibleDims,x=u.viewOpts.ranges=new Array(p),g=0;g<c.length;g++){var h=c[g],b=x[g]=new Array(4),v=f(s,a._diag[h][0]);v&&(b[0]=v.r2l(v.range[0]),b[2]=v.r2l(v.range[1]));var y=f(s,a._diag[h][1]);y&&(b[1]=y.r2l(y.range[0]),b[3]=y.r2l(y.range[1]))}u.selectBatch.length||u.unselectBatch.length?u.matrix.update({ranges:x},{ranges:x}):u.matrix.update({ranges:x})}function n(s){var a=s._fullLayout,u=a._glcanvas.data()[0].regl,p=a._splomGrid;p||(p=a._splomGrid=A(u)),p.update(function(c){var x,g=c._context.plotGlPixelRatio,h=c._fullLayout,b=h._size,v=[0,0,h.width*g,h.height*g],y={};function w(W,te,Q,X,q,Z){Q*=g,X*=g,q*=g,Z*=g;var J=te[W+"color"],ne=te[W+"width"],re=String(J+ne);re in y?y[re].data.push(NaN,NaN,Q,X,q,Z):y[re]={data:[Q,X,q,Z],join:"rect",thickness:ne*g,color:J,viewport:v,range:v,overlay:!1}}for(x in h._splomSubplots){var d,S,T=h._plots[x],E=T.xaxis,C=T.yaxis,L=E._gridVals,O=C._gridVals,z=E._offset,G=E._length,I=C._length,H=b.b+C.domain[0]*b.h,N=-C._m,F=-N*C.r2l(C.range[0],C.calendar);if(E.showgrid)for(x=0;x<L.length;x++)d=z+E.l2p(L[x].x),w("grid",E,d,H,d,H+I);if(C.showgrid)for(x=0;x<O.length;x++)w("grid",C,z,S=H+F+N*O[x].x,z+G,S);o(c,E,C)&&(d=z+E.l2p(0),w("zeroline",E,d,H,d,H+I)),o(c,C,E)&&w("zeroline",C,z,S=H+F+0,z+G,S)}var V=[];for(x in y)V.push(y[x]);return V}(s))}$.exports={name:e,attr:m.attr,attrRegex:m.attrRegex,layoutAttributes:m.layoutAttributes,supplyLayoutDefaults:m.supplyLayoutDefaults,drawFramework:m.drawFramework,plot:function(s){var a=s._fullLayout,u=M.getModule(e),p=_(s.calcdata,u)[0];l(s,["ANGLE_instanced_arrays","OES_element_index_uint"],i)&&(a._hasOnlyLargeSploms&&n(s),u.plot(s,{},p))},drag:function(s){var a=s.calcdata,u=s._fullLayout;u._hasOnlyLargeSploms&&n(s);for(var p=0;p<a.length;p++){var c=a[p][0].trace,x=u._splomScenes[c.uid];c.type==="splom"&&x&&x.matrix&&r(s,c,x)}},updateGrid:n,clean:function(s,a,u,p){var c,x={};if(p._splomScenes){for(c=0;c<s.length;c++){var g=s[c];g.type==="splom"&&(x[g.uid]=1)}for(c=0;c<u.length;c++){var h=u[c];if(!x[h.uid]){var b=p._splomScenes[h.uid];b&&b.destroy&&b.destroy(),p._splomScenes[h.uid]=null,delete p._splomScenes[h.uid]}}}Object.keys(p._splomScenes||{}).length===0&&delete p._splomScenes,p._splomGrid&&!a._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),m.clean(s,a,u,p)},updateFx:m.updateFx,toSVG:m.toSVG,reglPrecompiled:i}},87625:function($,P,t){var A=t(71828),M=t(41675),l=t(47761).calcMarkerSize,_=t(47761).calcAxisExpansion,m=t(36922),f=t(19635).markerSelection,o=t(19635).markerStyle,e=t(10164),i=t(50606).BADNUM,r=t(78232).TOO_MANY_POINTS;$.exports=function(n,s){var a,u,p,c,x,g,h=s.dimensions,b=s._length,v={},y=v.cdata=[],w=v.data=[],d=s._visibleDims=[];function S(E,C){for(var L=E.makeCalcdata({v:C.values,vcalendar:s.calendar},"v"),O=0;O<L.length;O++)L[O]=L[O]===i?NaN:L[O];y.push(L),w.push(E.type==="log"?A.simpleMap(L,E.c2l):L)}for(a=0;a<h.length;a++)if((p=h[a]).visible){if(c=M.getFromId(n,s._diag[a][0]),x=M.getFromId(n,s._diag[a][1]),c&&x&&c.type!==x.type){A.log("Skipping splom dimension "+a+" with conflicting axis types");continue}c?(S(c,p),x&&x.type==="category"&&(x._categories=c._categories.slice())):S(x,p),d.push(a)}for(m(n,s),A.extendFlat(v,o(n,s)),g=y.length*b>r?v.sizeAvg||Math.max(v.size,3):l(s,b),u=0;u<d.length;u++)p=h[a=d[u]],c=M.getFromId(n,s._diag[a][0])||{},x=M.getFromId(n,s._diag[a][1])||{},_(n,s,c,x,y[u],y[u],g);var T=e(n,s);return T.matrix||(T.matrix=!0),T.matrixOptions=v,T.selectedOptions=f(n,s,s.selected),T.unselectedOptions=f(n,s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},25784:function($,P,t){var A=t(71828),M=t(85501),l=t(46880),_=t(34098),m=t(49508),f=t(94397),o=t(68645).isOpenSymbol;function e(i,r){function n(a,u){return A.coerce(i,r,l.dimensions,a,u)}n("label");var s=n("values");s&&s.length?n("visible"):r.visible=!1,n("axis.type"),n("axis.matches")}$.exports=function(i,r,n,s){function a(b,v){return A.coerce(i,r,l,b,v)}var u=M(i,r,{name:"dimensions",handleItemDefaults:e}),p=a("diagonal.visible"),c=a("showupperhalf"),x=a("showlowerhalf");if(f(r,u,"values")&&(p||c||x)){a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),m(i,r,n,s,a,{noAngleRef:!0,noStandOff:!0});var g=o(r.marker.symbol),h=_.isBubble(r);a("marker.line.width",g||h?1:0),function(b,v,y,w){var d,S,T=v.dimensions,E=T.length,C=v.showupperhalf,L=v.showlowerhalf,O=v.diagonal.visible,z=new Array(E),G=new Array(E);for(d=0;d<E;d++){var I=d?d+1:"";z[d]="x"+I,G[d]="y"+I}var H=w("xaxes",z),N=w("yaxes",G),F=v._diag=new Array(E);v._xaxes={},v._yaxes={};var V=[],W=[];function te(ue,he,de,xe){if(ue){var me=ue.charAt(0),ve=y._splomAxes[me];if(v["_"+me+"axes"][ue]=1,xe.push(ue),!(ue in ve)){var Le=ve[ue]={};de&&(Le.label=de.label||"",de.visible&&de.axis&&(de.axis.type&&(Le.type=de.axis.type),de.axis.matches&&(Le.matches=he)))}}}var Q=!O&&!L,X=!O&&!C;for(v._axesDim={},d=0;d<E;d++){var q=T[d],Z=d===0,J=d===E-1,ne=Z&&Q||J&&X?void 0:H[d],re=Z&&X||J&&Q?void 0:N[d];te(ne,re,q,V),te(re,ne,q,W),F[d]=[ne,re],v._axesDim[ne]=d,v._axesDim[re]=d}for(d=0;d<V.length;d++)for(S=0;S<W.length;S++){var ae=V[d]+W[S];d>S&&C||d<S&&L?y._splomSubplots[ae]=1:d!==S||!O&&L&&C||(y._splomSubplots[ae]=1)}(!L||!O&&C&&L)&&(y._splomGridDflt.xside="bottom",y._splomGridDflt.yside="left")}(0,r,s,a),A.coerceSelectionMarkerOpacity(r,a)}else r.visible=!1}},28801:function($,P,t){var A=t(71828),M=t(36922),l=t(19635).markerStyle;$.exports=function(_,m){var f=m.trace,o=_._fullLayout._splomScenes[f.uid];if(o){M(_,f),A.extendFlat(o.matrixOptions,l(_,f));var e=A.extendFlat({},o.matrixOptions,o.viewOpts);o.matrix.update(e,null)}}},35948:function($,P){P.getDimIndex=function(t,A){for(var M=A._id,l={x:0,y:1}[M.charAt(0)],_=t._visibleDims,m=0;m<_.length;m++){var f=_[m];if(t._diag[f][l]===M)return m}return!1}},8567:function($,P,t){var A=t(35948),M=t(20794).calcHover;$.exports={hoverPoints:function(l,_,m){var f=l.cd[0].trace,o=l.scene.matrixOptions.cdata,e=l.xa,i=l.ya,r=e.c2p(_),n=i.c2p(m),s=l.distance,a=A.getDimIndex(f,e),u=A.getDimIndex(f,i);if(a===!1||u===!1)return[l];for(var p,c,x=o[a],g=o[u],h=s,b=0;b<x.length;b++){var v=x[b],y=g[b],w=e.c2p(v)-r,d=i.c2p(y)-n,S=Math.sqrt(w*w+d*d);S<h&&(h=c=S,p=b)}return l.index=p,l.distance=h,l.dxy=c,p===void 0?[l]:[M(l,x,g,f)]}}},6419:function($,P,t){var A=t(65017);A.basePlotModule=t(16947),$.exports=A},79410:function($,P,t){var A=t(60487),M=t(71828),l=t(41675),_=t(64505).selectMode;function m(f,o){var e,i,r,n,s,a=f._fullLayout,u=a._size,p=o.trace,c=o.t,x=a._splomScenes[p.uid],g=x.matrixOptions,h=g.cdata,b=a._glcanvas.data()[0].regl,v=a.dragmode;if(h.length!==0){g.lower=p.showupperhalf,g.upper=p.showlowerhalf,g.diagonal=p.diagonal.visible;var y=p._visibleDims,w=h.length,d=x.viewOpts={};for(d.ranges=new Array(w),d.domains=new Array(w),s=0;s<y.length;s++){r=y[s];var S=d.ranges[s]=new Array(4),T=d.domains[s]=new Array(4);(e=l.getFromId(f,p._diag[r][0]))&&(S[0]=e._rl[0],S[2]=e._rl[1],T[0]=e.domain[0],T[2]=e.domain[1]),(i=l.getFromId(f,p._diag[r][1]))&&(S[1]=i._rl[0],S[3]=i._rl[1],T[1]=i.domain[0],T[3]=i.domain[1])}var E=f._context.plotGlPixelRatio,C=u.l*E,L=u.b*E,O=u.w*E,z=u.h*E;d.viewport=[C,L,O+C,z+L],x.matrix===!0&&(x.matrix=A(b));var G=a.clickmode.indexOf("select")>-1,I=!0;if(_(v)||p.selectedpoints||G){var H=p._length;if(p.selectedpoints){x.selectBatch=p.selectedpoints;var N=p.selectedpoints,F={};for(r=0;r<N.length;r++)F[N[r]]=!0;var V=[];for(r=0;r<H;r++)F[r]||V.push(r);x.unselectBatch=V}var W=c.xpx=new Array(w),te=c.ypx=new Array(w);for(s=0;s<y.length;s++){if(r=y[s],e=l.getFromId(f,p._diag[r][0]))for(W[s]=new Array(H),n=0;n<H;n++)W[s][n]=e.c2p(h[s][n]);if(i=l.getFromId(f,p._diag[r][1]))for(te[s]=new Array(H),n=0;n<H;n++)te[s][n]=i.c2p(h[s][n])}if(x.selectBatch.length||x.unselectBatch.length){var Q=M.extendFlat({},g,x.unselectedOptions,d),X=M.extendFlat({},g,x.selectedOptions,d);x.matrix.update(Q,X),I=!1}}else c.xpx=c.ypx=null;if(I){var q=M.extendFlat({},g,d);x.matrix.update(q,null)}}}$.exports=function(f,o,e){if(e.length)for(var i=0;i<e.length;i++)m(f,e[i][0])}},10164:function($,P,t){var A=t(71828);$.exports=function(M,l){var _=M._fullLayout,m=l.uid,f=_._splomScenes;f||(f=_._splomScenes={});var o={dirty:!0,selectBatch:[],unselectBatch:[]},e=f[l.uid];return e||((e=f[m]=A.extendFlat({},o,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){e.matrix&&e.matrix.draw&&(e.selectBatch.length||e.unselectBatch.length?e.matrix.draw(e.unselectBatch,e.selectBatch):e.matrix.draw()),e.dirty=!1},e.destroy=function(){e.matrix&&e.matrix.destroy&&e.matrix.destroy(),e.matrixOptions=null,e.selectBatch=null,e.unselectBatch=null,e=null}),e.dirty||A.extendFlat(e,o),e}},8689:function($,P,t){var A=t(71828),M=A.pushUnique,l=t(34098),_=t(35948);$.exports=function(m,f){var o=m.cd,e=o[0].trace,i=o[0].t,r=m.scene,n=r.matrixOptions.cdata,s=m.xaxis,a=m.yaxis,u=[];if(!r)return u;var p=!l.hasMarkers(e)&&!l.hasText(e);if(e.visible!==!0||p)return u;var c=_.getDimIndex(e,s),x=_.getDimIndex(e,a);if(c===!1||x===!1)return u;var g=i.xpx[c],h=i.ypx[x],b=n[c],v=n[x],y=(m.scene.selectBatch||[]).slice(),w=[];if(f!==!1&&!f.degenerate)for(var d=0;d<b.length;d++)f.contains([g[d],h[d]],null,d,m)?(u.push({pointNumber:d,x:b[d],y:v[d]}),M(y,d)):y.indexOf(d)!==-1?M(y,d):w.push(d);var S=r.matrixOptions;return y.length||w.length?r.selectBatch.length||r.unselectBatch.length||r.matrix.update(r.unselectedOptions,A.extendFlat({},S,r.selectedOptions,r.viewOpts)):r.matrix.update(S,null),r.selectBatch=y,r.unselectBatch=w,u}},21850:function($,P,t){var A=t(50693),M=t(12663).axisHoverFormat,l=t(5386).fF,_=t(2418),m=t(9012),f=t(1426).extendFlat,o={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:l({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:M("u",1),vhoverformat:M("v",1),whoverformat:M("w",1),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),showlegend:f({},m.showlegend,{dflt:!1})};f(o,A("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(e){o[e]=_[e]}),o.hoverinfo=f({},m.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),o.transforms=void 0,$.exports=o},88489:function($,P,t){var A=t(71828),M=t(78803);function l(f){var o,e,i,r,n,s,a,u,p,c,x,g,h=f._x,b=f._y,v=f._z,y=f._len,w=-1/0,d=1/0,S=-1/0,T=1/0,E=-1/0,C=1/0,L="";for(y&&(a=h[0],p=b[0],x=v[0]),y>1&&(u=h[y-1],c=b[y-1],g=v[y-1]),o=0;o<y;o++)w=Math.max(w,h[o]),d=Math.min(d,h[o]),S=Math.max(S,b[o]),T=Math.min(T,b[o]),E=Math.max(E,v[o]),C=Math.min(C,v[o]),r||h[o]===a||(r=!0,L+="x"),n||b[o]===p||(n=!0,L+="y"),s||v[o]===x||(s=!0,L+="z");r||(L+="x"),n||(L+="y"),s||(L+="z");var O=_(f._x),z=_(f._y),G=_(f._z);L=(L=(L=L.replace("x",(a>u?"-":"+")+"x")).replace("y",(p>c?"-":"+")+"y")).replace("z",(x>g?"-":"+")+"z");var I=function(){y=0,O=[],z=[],G=[]};(!y||y<O.length*z.length*G.length)&&I();var H=function(me){return me==="x"?h:me==="y"?b:v},N=function(me){return me==="x"?O:me==="y"?z:G},F=function(me){return me[y-1]<me[0]?-1:1},V=H(L[1]),W=H(L[3]),te=H(L[5]),Q=N(L[1]).length,X=N(L[3]).length,q=N(L[5]).length,Z=!1,J=function(me,ve,Le){return Q*(X*me+ve)+Le},ne=F(H(L[1])),re=F(H(L[3])),ae=F(H(L[5]));for(o=0;o<q-1;o++){for(e=0;e<X-1;e++){for(i=0;i<Q-1;i++){var ue=J(o,e,i),he=J(o,e,i+1),de=J(o,e+1,i),xe=J(o+1,e,i);if(V[ue]*ne<V[he]*ne&&W[ue]*re<W[de]*re&&te[ue]*ae<te[xe]*ae||(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(A.warn("Encountered arbitrary coordinates! Unable to input data grid."),I()),{xMin:d,yMin:T,zMin:C,xMax:w,yMax:S,zMax:E,Xs:O,Ys:z,Zs:G,len:y,fill:L}}function _(f){return A.distinctVals(f).vals}function m(f,o){if(o===void 0&&(o=f.length),A.isTypedArray(f))return f.subarray(0,o);for(var e=[],i=0;i<o;i++)e[i]=+f[i];return e}$.exports={calc:function(f,o){o._len=Math.min(o.u.length,o.v.length,o.w.length,o.x.length,o.y.length,o.z.length),o._u=m(o.u,o._len),o._v=m(o.v,o._len),o._w=m(o.w,o._len),o._x=m(o.x,o._len),o._y=m(o.y,o._len),o._z=m(o.z,o._len);var e=l(o);o._gridFill=e.fill,o._Xs=e.Xs,o._Ys=e.Ys,o._Zs=e.Zs,o._len=e.len;var i,r,n,s=0;o.starts&&(i=m(o.starts.x||[]),r=m(o.starts.y||[]),n=m(o.starts.z||[]),s=Math.min(i.length,r.length,n.length)),o._startsX=i||[],o._startsY=r||[],o._startsZ=n||[];var a,u=0,p=1/0;for(a=0;a<o._len;a++){var c=o._u[a],x=o._v[a],g=o._w[a],h=Math.sqrt(c*c+x*x+g*g);u=Math.max(u,h),p=Math.min(p,h)}for(M(f,o,{vals:[p,u],containerStr:"",cLetter:"c"}),a=0;a<s;a++){var b=i[a];e.xMax=Math.max(e.xMax,b),e.xMin=Math.min(e.xMin,b);var v=r[a];e.yMax=Math.max(e.yMax,v),e.yMin=Math.min(e.yMin,v);var y=n[a];e.zMax=Math.max(e.zMax,y),e.zMin=Math.min(e.zMin,y)}o._slen=s,o._normMax=u,o._xbnds=[e.xMin,e.xMax],o._ybnds=[e.yMin,e.yMax],o._zbnds=[e.zMin,e.zMax]},filter:m,processGrid:l}},90154:function($,P,t){var A=t(9330).gl_streamtube3d,M=A.createTubeMesh,l=t(71828),_=t(81697).parseColorScale,m=t(21081).extractOpts,f=t(90060),o={xaxis:0,yaxis:1,zaxis:2};function e(a,u){this.scene=a,this.uid=u,this.mesh=null,this.data=null}var i=e.prototype;function r(a){var u=a.length;return u>2?a.slice(1,u-1):u===2?[(a[0]+a[1])/2]:a}function n(a){var u=a.length;return u===1?[.5,.5]:[a[1]-a[0],a[u-1]-a[u-2]]}function s(a,u){var p=a.fullSceneLayout,c=a.dataScale,x=u._len,g={};function h(Q,X){var q=p[X],Z=c[o[X]];return l.simpleMap(Q,function(J){return q.d2l(J)*Z})}if(g.vectors=f(h(u._u,"xaxis"),h(u._v,"yaxis"),h(u._w,"zaxis"),x),!x)return{positions:[],cells:[]};var b=h(u._Xs,"xaxis"),v=h(u._Ys,"yaxis"),y=h(u._Zs,"zaxis");if(g.meshgrid=[b,v,y],g.gridFill=u._gridFill,u._slen)g.startingPositions=f(h(u._startsX,"xaxis"),h(u._startsY,"yaxis"),h(u._startsZ,"zaxis"));else{for(var w=v[0],d=r(b),S=r(y),T=new Array(d.length*S.length),E=0,C=0;C<d.length;C++)for(var L=0;L<S.length;L++)T[E++]=[d[C],w,S[L]];g.startingPositions=T}g.colormap=_(u),g.tubeSize=u.sizeref,g.maxLength=u.maxdisplayed;var O=h(u._xbnds,"xaxis"),z=h(u._ybnds,"yaxis"),G=h(u._zbnds,"zaxis"),I=n(b),H=n(v),N=n(y),F=[[O[0]-I[0],z[0]-H[0],G[0]-N[0]],[O[1]+I[1],z[1]+H[1],G[1]+N[1]]],V=A(g,F),W=m(u);V.vertexIntensityBounds=[W.min/u._normMax,W.max/u._normMax];var te=u.lightposition;return V.lightPosition=[te.x,te.y,te.z],V.ambient=u.lighting.ambient,V.diffuse=u.lighting.diffuse,V.specular=u.lighting.specular,V.roughness=u.lighting.roughness,V.fresnel=u.lighting.fresnel,V.opacity=u.opacity,u._pad=V.tubeScale*u.sizeref*2,V}i.handlePick=function(a){var u=this.scene.fullSceneLayout,p=this.scene.dataScale;function c(h,b){var v=u[b],y=p[o[b]];return v.l2c(h)/y}if(a.object===this.mesh){var x=a.data.position,g=a.data.velocity;return a.traceCoordinate=[c(x[0],"xaxis"),c(x[1],"yaxis"),c(x[2],"zaxis"),c(g[0],"xaxis"),c(g[1],"yaxis"),c(g[2],"zaxis"),a.data.intensity*this.data._normMax,a.data.divergence],a.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(a){this.data=a;var u=s(this.scene,a);this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(a,u){var p=a.glplot.gl,c=s(a,u),x=M(p,c),g=new e(a,u.uid);return g.mesh=x,g.data=u,x._trace=g,a.glplot.add(x),g}},22459:function($,P,t){var A=t(71828),M=t(1586),l=t(21850);$.exports=function(_,m,f,o){function e(p,c){return A.coerce(_,m,l,p,c)}var i=e("u"),r=e("v"),n=e("w"),s=e("x"),a=e("y"),u=e("z");i&&i.length&&r&&r.length&&n&&n.length&&s&&s.length&&a&&a.length&&u&&u.length?(e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),M(_,m,o,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),m._length=null):m.visible=!1}},61510:function($,P,t){$.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(58547),categories:["gl3d","showLegend"],attributes:t(21850),supplyDefaults:t(22459),colorbar:{min:"cmin",max:"cmax"},calc:t(88489).calc,plot:t(90154),eventData:function(A,M){return A.tubex=A.x,A.tubey=A.y,A.tubez=A.z,A.tubeu=M.traceCoordinate[3],A.tubev=M.traceCoordinate[4],A.tubew=M.traceCoordinate[5],A.norm=M.traceCoordinate[6],A.divergence=M.traceCoordinate[7],delete A.x,delete A.y,delete A.z,A},meta:{}}},57564:function($,P,t){var A=t(9012),M=t(5386).fF,l=t(5386).si,_=t(50693),m=t(27670).Y,f=t(34e3),o=t(7055),e=t(1426).extendFlat,i=t(79952).u;$.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:e({colors:{valType:"data_array",editType:"calc"},line:{color:e({},f.marker.line.color,{dflt:null}),width:e({},f.marker.line.width,{dflt:1}),editType:"calc"},pattern:i,editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:f.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:l({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:f.hovertext,hoverinfo:e({},A.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:M({},{keys:o.eventDataKeys}),textfont:f.textfont,insidetextorientation:f.insidetextorientation,insidetextfont:f.insidetextfont,outsidetextfont:e({},f.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:f.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:m({name:"sunburst",trace:!0,editType:"calc"})}},66888:function($,P,t){var A=t(74875);P.name="sunburst",P.plot=function(M,l,_,m){A.plotBasePlot(P.name,M,l,_,m)},P.clean=function(M,l,_,m){A.cleanBasePlot(P.name,M,l,_,m)}},52147:function($,P,t){var A=t(674),M=t(92770),l=t(71828),_=t(21081).makeColorScaleFuncFromTrace,m=t(32354).makePullColorFn,f=t(32354).generateExtendedColors,o=t(21081).calc,e=t(50606).ALMOST_EQUAL,i={},r={},n={};function s(a,u,p){var c=0,x=a.children;if(x){for(var g=x.length,h=0;h<g;h++)c+=s(x[h],u,p);p.branches&&c++}else p.leaves&&c++;return a.value=a.data.data.value=c,u._values||(u._values=[]),u._values[a.data.data.i]=c,c}P.calc=function(a,u){var p,c,x,g,h,b,v=a._fullLayout,y=u.ids,w=l.isArrayOrTypedArray(y),d=u.labels,S=u.parents,T=u.values,E=l.isArrayOrTypedArray(T),C=[],L={},O={},z=function(ae){return ae||typeof ae=="number"},G=function(ae){return!E||M(T[ae])&&T[ae]>=0};w?(p=Math.min(y.length,S.length),c=function(ae){return z(y[ae])&&G(ae)},x=function(ae){return String(y[ae])}):(p=Math.min(d.length,S.length),c=function(ae){return z(d[ae])&&G(ae)},x=function(ae){return String(d[ae])}),E&&(p=Math.min(p,T.length));for(var I=0;I<p;I++)if(c(I)){var H=x(I),N=z(S[I])?String(S[I]):"",F={i:I,id:H,pid:N,label:z(d[I])?String(d[I]):""};E&&(F.v=+T[I]),C.push(F),h=H,L[g=N]?L[g].push(h):L[g]=[h],O[h]=1}if(L[""]){if(L[""].length>1){for(var V=l.randstr(),W=0;W<C.length;W++)C[W].pid===""&&(C[W].pid=V);C.unshift({hasMultipleRoots:!0,id:V,pid:"",label:""})}}else{var te,Q=[];for(te in L)O[te]||Q.push(te);if(Q.length!==1)return l.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",Q.join(", ")].join(" "));te=Q[0],C.unshift({hasImpliedRoot:!0,id:te,pid:"",label:te})}try{b=A.stratify().id(function(ae){return ae.id}).parentId(function(ae){return ae.pid})(C)}catch(ae){return l.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",ae.message].join(" "))}var X=A.hierarchy(b),q=!1;if(E)switch(u.branchvalues){case"remainder":X.sum(function(ae){return ae.data.v});break;case"total":X.each(function(ae){var ue=ae.data.data,he=ue.v;if(ae.children){var de=ae.children.reduce(function(xe,me){return xe+me.data.data.v},0);if((ue.hasImpliedRoot||ue.hasMultipleRoots)&&(he=de),he<de*e)return q=!0,l.warn(["Total value for node",ae.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,he,`
children sum =`,de].join(" "))}ae.value=he})}else s(X,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!q){var Z,J;u.sort&&X.sort(function(ae,ue){return ue.value-ae.value});var ne=u.marker.colors||[],re=!!ne.length;return u._hasColorscale?(re||(ne=E?u.values:u._values),o(a,u,{vals:ne,containerStr:"marker",cLetter:"c"}),J=_(u.marker)):Z=m(v["_"+u.type+"colormap"]),X.each(function(ae){var ue=ae.data.data;ue.color=u._hasColorscale?J(ne[ue.i]):Z(ne[ue.i],ue.id)}),C[0].hierarchy=X,C}},P._runCrossTraceCalc=function(a,u){var p=u._fullLayout,c=u.calcdata,x=p[a+"colorway"],g=p["_"+a+"colormap"];p["extend"+a+"colors"]&&(x=f(x,a==="icicle"?n:a==="treemap"?r:i));var h,b=0;function v(d){var S=d.data.data,T=S.id;S.color===!1&&(g[T]?S.color=g[T]:d.parent?d.parent.parent?S.color=d.parent.data.data.color:(g[T]=S.color=x[b%x.length],b++):S.color=h)}for(var y=0;y<c.length;y++){var w=c[y][0];w.trace.type===a&&w.hierarchy&&(h=w.trace.root.color,w.hierarchy.each(v))}},P.crossTraceCalc=function(a){return P._runCrossTraceCalc("sunburst",a)}},7055:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},17094:function($,P,t){var A=t(71828),M=t(57564),l=t(27670).c,_=t(90769).handleText,m=t(37434).handleMarkerDefaults,f=t(21081),o=f.hasColorscale,e=f.handleDefaults;$.exports=function(i,r,n,s){function a(h,b){return A.coerce(i,r,M,h,b)}var u=a("labels"),p=a("parents");if(u&&u.length&&p&&p.length){var c=a("values");c&&c.length?a("branchvalues"):a("count"),a("level"),a("maxdepth"),m(i,r,s,a);var x=r._hasColorscale=o(i,"marker","colors")||(i.marker||{}).coloraxis;x&&e(i,r,s,a,{prefix:"marker.",cLetter:"c"}),a("leaf.opacity",x?1:.7);var g=a("text");a("texttemplate"),r.texttemplate||a("textinfo",Array.isArray(g)?"text+label":"label"),a("hovertext"),a("hovertemplate"),_(i,r,s,a,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),a("insidetextorientation"),a("sort"),a("rotation"),a("root.color"),l(r,s,a),r._length=null}else r.visible=!1}},43467:function($,P,t){var A=t(91424),M=t(7901);$.exports=function(l,_,m,f,o){var e=_.data.data,i=e.i,r=o||e.color;if(i>=0){_.i=e.i;var n=m.marker;n.pattern&&n.colors&&n.pattern.shape||(n.color=r,_.color=r),A.pointStyle(l,m,f,_)}else M.fill(l,r)}},83523:function($,P,t){var A=t(39898),M=t(73972),l=t(23469).appendArrayPointValue,_=t(30211),m=t(71828),f=t(11086),o=t(2791),e=t(53581).formatPieValue;function i(r,n,s){for(var a=r.data.data,u={curveNumber:n.index,pointNumber:a.i,data:n._input,fullData:n},p=0;p<s.length;p++){var c=s[p];c in r&&(u[c]=r[c])}return"parentString"in r&&!o.isHierarchyRoot(r)&&(u.parent=r.parentString),l(u,n,a.i),u}$.exports=function(r,n,s,a,u){var p=a[0],c=p.trace,x=p.hierarchy,g=c.type==="sunburst",h=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1),r.on("mouseover",function(b){var v=s._fullLayout;if(!s._dragging&&v.hovermode!==!1){var y,w=s._fullData[c.index],d=b.data.data,S=d.i,T=o.isHierarchyRoot(b),E=o.getParent(x,b),C=o.getValue(b),L=function(ne){return m.castOption(w,S,ne)},O=L("hovertemplate"),z=_.castHoverinfo(w,v,S),G=v.separators;if(O||z&&z!=="none"&&z!=="skip"){var I,H;g&&(I=p.cx+b.pxmid[0]*(1-b.rInscribed),H=p.cy+b.pxmid[1]*(1-b.rInscribed)),h&&(I=b._hoverX,H=b._hoverY);var N,F={},V=[],W=[],te=function(ne){return V.indexOf(ne)!==-1};z&&(V=z==="all"?w._module.attributes.hoverinfo.flags:z.split("+")),F.label=d.label,te("label")&&F.label&&W.push(F.label),d.hasOwnProperty("v")&&(F.value=d.v,F.valueLabel=e(F.value,G),te("value")&&W.push(F.valueLabel)),F.currentPath=b.currentPath=o.getPath(b.data),te("current path")&&!T&&W.push(F.currentPath);var Q=[],X=function(){Q.indexOf(N)===-1&&(W.push(N),Q.push(N))};F.percentParent=b.percentParent=C/o.getValue(E),F.parent=b.parentString=o.getPtLabel(E),te("percent parent")&&(N=o.formatPercent(F.percentParent,G)+" of "+F.parent,X()),F.percentEntry=b.percentEntry=C/o.getValue(n),F.entry=b.entry=o.getPtLabel(n),!te("percent entry")||T||b.onPathbar||(N=o.formatPercent(F.percentEntry,G)+" of "+F.entry,X()),F.percentRoot=b.percentRoot=C/o.getValue(x),F.root=b.root=o.getPtLabel(x),te("percent root")&&!T&&(N=o.formatPercent(F.percentRoot,G)+" of "+F.root,X()),F.text=L("hovertext")||L("text"),te("text")&&(N=F.text,m.isValidTextValue(N)&&W.push(N)),y=[i(b,w,u.eventDataKeys)];var q={trace:w,y:H,_x0:b._x0,_x1:b._x1,_y0:b._y0,_y1:b._y1,text:W.join("<br>"),name:O||te("name")?w.name:void 0,color:L("hoverlabel.bgcolor")||d.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:F,eventData:y};g&&(q.x0=I-b.rInscribed*b.rpx1,q.x1=I+b.rInscribed*b.rpx1,q.idealAlign=b.pxmid[0]<0?"left":"right"),h&&(q.x=I,q.idealAlign=I<0?"left":"right");var Z=[];_.loneHover(q,{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:s,inOut_bbox:Z}),y[0].bbox=Z[0],c._hasHoverLabel=!0}if(h){var J=r.select("path.surface");u.styleOne(J,b,w,s,{hovered:!0})}c._hasHoverEvent=!0,s.emit("plotly_hover",{points:y||[i(b,w,u.eventDataKeys)],event:A.event})}}),r.on("mouseout",function(b){var v=s._fullLayout,y=s._fullData[c.index],w=A.select(this).datum();if(c._hasHoverEvent&&(b.originalEvent=A.event,s.emit("plotly_unhover",{points:[i(w,y,u.eventDataKeys)],event:A.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(_.loneUnhover(v._hoverlayer.node()),c._hasHoverLabel=!1),h){var d=r.select("path.surface");u.styleOne(d,w,y,s,{hovered:!1})}}),r.on("click",function(b){var v=s._fullLayout,y=s._fullData[c.index],w=g&&(o.isHierarchyRoot(b)||o.isLeaf(b)),d=o.getPtId(b),S=o.isEntry(b)?o.findEntryWithChild(x,d):o.findEntryWithLevel(x,d),T=o.getPtId(S),E={points:[i(b,y,u.eventDataKeys)],event:A.event};w||(E.nextLevel=T);var C=f.triggerHandler(s,"plotly_"+c.type+"click",E);if(C!==!1&&v.hovermode&&(s._hoverdata=[i(b,y,u.eventDataKeys)],_.click(s,A.event)),!w&&C!==!1&&!s._dragging&&!s._transitioning){M.call("_storeDirectGUIEdit",y,v._tracePreGUI[y.uid],{level:y.level});var L={data:[{level:T}],traces:[c.index]},O={frame:{redraw:!1,duration:u.transitionTime},transition:{duration:u.transitionTime,easing:u.transitionEasing},mode:"immediate",fromcurrent:!0};_.loneUnhover(v._hoverlayer.node()),M.call("animate",s,L,O)}})}},2791:function($,P,t){var A=t(71828),M=t(7901),l=t(6964),_=t(53581);function m(f){return f.data.data.pid}P.findEntryWithLevel=function(f,o){var e;return o&&f.eachAfter(function(i){if(P.getPtId(i)===o)return e=i.copy()}),e||f},P.findEntryWithChild=function(f,o){var e;return f.eachAfter(function(i){for(var r=i.children||[],n=0;n<r.length;n++){var s=r[n];if(P.getPtId(s)===o)return e=i.copy()}}),e||f},P.isEntry=function(f){return!f.parent},P.isLeaf=function(f){return!f.children},P.getPtId=function(f){return f.data.data.id},P.getPtLabel=function(f){return f.data.data.label},P.getValue=function(f){return f.value},P.isHierarchyRoot=function(f){return m(f)===""},P.setSliceCursor=function(f,o,e){var i=e.isTransitioning;if(!i){var r=f.datum();i=e.hideOnRoot&&P.isHierarchyRoot(r)||e.hideOnLeaves&&P.isLeaf(r)}l(f,i?null:"pointer")},P.getInsideTextFontKey=function(f,o,e,i,r){var n=(r||{}).onPathbar?"pathbar.textfont":"insidetextfont",s=e.data.data.i;return A.castOption(o,s,n+"."+f)||A.castOption(o,s,"textfont."+f)||i.size},P.getOutsideTextFontKey=function(f,o,e,i){var r=e.data.data.i;return A.castOption(o,r,"outsidetextfont."+f)||A.castOption(o,r,"textfont."+f)||i.size},P.isOutsideText=function(f,o){return!f._hasColorscale&&P.isHierarchyRoot(o)},P.determineTextFont=function(f,o,e,i){return P.isOutsideText(f,o)?function(r,n,s){return{color:P.getOutsideTextFontKey("color",r,n,s),family:P.getOutsideTextFontKey("family",r,n,s),size:P.getOutsideTextFontKey("size",r,n,s)}}(f,o,e):function(r,n,s,a){var u=(a||{}).onPathbar,p=n.data.data,c=p.i,x=A.castOption(r,c,(u?"pathbar.textfont":"insidetextfont")+".color");return!x&&r._input.textfont&&(x=A.castOption(r._input,c,"textfont.color")),{color:x||M.contrast(p.color),family:P.getInsideTextFontKey("family",r,n,s,a),size:P.getInsideTextFontKey("size",r,n,s,a)}}(f,o,e,i)},P.hasTransition=function(f){return!!(f&&f.duration>0)},P.getMaxDepth=function(f){return f.maxdepth>=0?f.maxdepth:1/0},P.isHeader=function(f,o){return!(P.isLeaf(f)||f.depth===o._maxDepth-1)},P.getParent=function(f,o){return P.findEntryWithLevel(f,m(o))},P.listPath=function(f,o){var e=f.parent;if(!e)return[];var i=o?[e.data[o]]:[e];return P.listPath(e,o).concat(i)},P.getPath=function(f){return P.listPath(f,"label").join("/")+"/"},P.formatValue=_.formatPieValue,P.formatPercent=function(f,o){var e=A.formatPercent(f,0);return e==="0%"&&(e=_.formatPiePercent(f,o)),e}},87619:function($,P,t){$.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(66888),categories:[],animatable:!0,attributes:t(57564),layoutAttributes:t(2654),supplyDefaults:t(17094),supplyLayoutDefaults:t(57034),calc:t(52147).calc,crossTraceCalc:t(52147).crossTraceCalc,plot:t(24714).plot,style:t(29969).style,colorbar:t(4898),meta:{}}},2654:function($){$.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},57034:function($,P,t){var A=t(71828),M=t(2654);$.exports=function(l,_){function m(f,o){return A.coerce(l,_,M,f,o)}m("sunburstcolorway",_.colorway),m("extendsunburstcolors")}},24714:function($,P,t){var A=t(39898),M=t(674),l=t(81684).sX,_=t(91424),m=t(71828),f=t(63893),o=t(72597),e=o.recordMinTextSize,i=o.clearMinTextSize,r=t(14575),n=t(53581).getRotationAngle,s=r.computeTransform,a=r.transformInsideText,u=t(29969).styleOne,p=t(16688).resizeText,c=t(83523),x=t(7055),g=t(2791);function h(v,y,w,d){var S=v._context.staticPlot,T=v._fullLayout,E=!T.uniformtext.mode&&g.hasTransition(d),C=A.select(w).selectAll("g.slice"),L=y[0],O=L.trace,z=L.hierarchy,G=g.findEntryWithLevel(z,O.level),I=g.getMaxDepth(O),H=T._size,N=O.domain,F=H.w*(N.x[1]-N.x[0]),V=H.h*(N.y[1]-N.y[0]),W=.5*Math.min(F,V),te=L.cx=H.l+H.w*(N.x[1]+N.x[0])/2,Q=L.cy=H.t+H.h*(1-N.y[0])-V/2;if(!G)return C.remove();var X=null,q={};E&&C.each(function(oe){q[g.getPtId(oe)]={rpx0:oe.rpx0,rpx1:oe.rpx1,x0:oe.x0,x1:oe.x1,transform:oe.transform},!X&&g.isEntry(oe)&&(X=oe)});var Z=function(oe){return M.partition().size([2*Math.PI,oe.height+1])(oe)}(G).descendants(),J=G.height+1,ne=0,re=I;L.hasMultipleRoots&&g.isHierarchyRoot(G)&&(Z=Z.slice(1),J-=1,ne=1,re+=1),Z=Z.filter(function(oe){return oe.y1<=re});var ae=n(O.rotation);ae&&Z.forEach(function(oe){oe.x0+=ae,oe.x1+=ae});var ue=Math.min(J,I),he=function(oe){return(oe-ne)/ue*W},de=function(oe,fe){return[oe*Math.cos(fe),-oe*Math.sin(fe)]},xe=function(oe){return m.pathAnnulus(oe.rpx0,oe.rpx1,oe.x0,oe.x1,te,Q)},me=function(oe){return te+b(oe)[0]*(oe.transform.rCenter||0)+(oe.transform.x||0)},ve=function(oe){return Q+b(oe)[1]*(oe.transform.rCenter||0)+(oe.transform.y||0)};(C=C.data(Z,g.getPtId)).enter().append("g").classed("slice",!0),E?C.exit().transition().each(function(){var oe=A.select(this);oe.select("path.surface").transition().attrTween("d",function(fe){var Se=function(Me){var be,Ie=g.getPtId(Me),Be=q[Ie],ce=q[g.getPtId(G)];if(ce){var Te=(Me.x1>ce.x1?2*Math.PI:0)+ae;be=Me.rpx1<ce.rpx1?{x0:Me.x0,x1:Me.x1,rpx0:0,rpx1:0}:{x0:Te,x1:Te,rpx0:Me.rpx0,rpx1:Me.rpx1}}else{var ye,Pe=g.getPtId(Me.parent);C.each(function(Je){if(g.getPtId(Je)===Pe)return ye=Je});var Re,ze=ye.children;ze.forEach(function(Je,lt){if(g.getPtId(Je)===Ie)return Re=lt});var He=ze.length,We=l(ye.x0,ye.x1);be={rpx0:W,rpx1:W,x0:We(Re/He),x1:We((Re+1)/He)}}return l(Be,be)}(fe);return function(Me){return xe(Se(Me))}}),oe.select("g.slicetext").attr("opacity",0)}).remove():C.exit().remove(),C.order();var Le=null;if(E&&X){var Ae=g.getPtId(X);C.each(function(oe){Le===null&&g.getPtId(oe)===Ae&&(Le=oe.x1)})}var we=C;function se(oe){var fe=oe.parent,Se=q[g.getPtId(fe)],Me={};if(Se){var be=fe.children,Ie=be.indexOf(oe),Be=be.length,ce=l(Se.x0,Se.x1);Me.x0=ce(Ie/Be),Me.x1=ce(Ie/Be)}else Me.x0=Me.x1=0;return Me}E&&(we=we.transition().each("end",function(){var oe=A.select(this);g.setSliceCursor(oe,v,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),we.each(function(oe){var fe=A.select(this),Se=m.ensureSingle(fe,"path","surface",function(Te){Te.style("pointer-events",S?"none":"all")});oe.rpx0=he(oe.y0),oe.rpx1=he(oe.y1),oe.xmid=(oe.x0+oe.x1)/2,oe.pxmid=de(oe.rpx1,oe.xmid),oe.midangle=-(oe.xmid-Math.PI/2),oe.startangle=-(oe.x0-Math.PI/2),oe.stopangle=-(oe.x1-Math.PI/2),oe.halfangle=.5*Math.min(m.angleDelta(oe.x0,oe.x1)||Math.PI,Math.PI),oe.ring=1-oe.rpx0/oe.rpx1,oe.rInscribed=function(Te){return Te.rpx0===0&&m.isFullCircle([Te.x0,Te.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Te.halfangle)),Te.ring/2))}(oe),E?Se.transition().attrTween("d",function(Te){var ye=function(Pe){var Re,ze=q[g.getPtId(Pe)],He={x0:Pe.x0,x1:Pe.x1,rpx0:Pe.rpx0,rpx1:Pe.rpx1};if(ze)Re=ze;else if(X)if(Pe.parent)if(Le){var We=(Pe.x1>Le?2*Math.PI:0)+ae;Re={x0:We,x1:We}}else Re={rpx0:W,rpx1:W},m.extendFlat(Re,se(Pe));else Re={rpx0:0,rpx1:0};else Re={x0:ae,x1:ae};return l(Re,He)}(Te);return function(Pe){return xe(ye(Pe))}}):Se.attr("d",xe),fe.call(c,G,v,y,{eventDataKeys:x.eventDataKeys,transitionTime:x.CLICK_TRANSITION_TIME,transitionEasing:x.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,v,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:v._transitioning}),Se.call(u,oe,O,v);var Me=m.ensureSingle(fe,"g","slicetext"),be=m.ensureSingle(Me,"text","",function(Te){Te.attr("data-notex",1)}),Ie=m.ensureUniformFontSize(v,g.determineTextFont(O,oe,T.font));be.text(P.formatSliceLabel(oe,G,O,y,T)).classed("slicetext",!0).attr("text-anchor","middle").call(_.font,Ie).call(f.convertToTspans,v);var Be=_.bBox(be.node());oe.transform=a(Be,oe,L),oe.transform.targetX=me(oe),oe.transform.targetY=ve(oe);var ce=function(Te,ye){var Pe=Te.transform;return s(Pe,ye),Pe.fontSize=Ie.size,e(O.type,Pe,T),m.getTextTransform(Pe)};E?be.transition().attrTween("transform",function(Te){var ye=function(Pe){var Re,ze=q[g.getPtId(Pe)],He=Pe.transform;if(ze)Re=ze;else if(Re={rpx1:Pe.rpx1,transform:{textPosAngle:He.textPosAngle,scale:0,rotate:He.rotate,rCenter:He.rCenter,x:He.x,y:He.y}},X)if(Pe.parent)if(Le){var We=Pe.x1>Le?2*Math.PI:0;Re.x0=Re.x1=We}else m.extendFlat(Re,se(Pe));else Re.x0=Re.x1=ae;else Re.x0=Re.x1=ae;var Je=l(Re.transform.textPosAngle,Pe.transform.textPosAngle),lt=l(Re.rpx1,Pe.rpx1),et=l(Re.x0,Pe.x0),yt=l(Re.x1,Pe.x1),_t=l(Re.transform.scale,He.scale),xt=l(Re.transform.rotate,He.rotate),at=He.rCenter===0?3:Re.transform.rCenter===0?1/3:1,ot=l(Re.transform.rCenter,He.rCenter);return function(At){var Ct=lt(At),zt=et(At),St=yt(At),qe=function(Ve){return ot(Math.pow(Ve,at))}(At),Xe={pxmid:de(Ct,(zt+St)/2),rpx1:Ct,transform:{textPosAngle:Je(At),rCenter:qe,x:He.x,y:He.y}};return e(O.type,He,T),{transform:{targetX:me(Xe),targetY:ve(Xe),scale:_t(At),rotate:xt(At),rCenter:qe}}}}(Te);return function(Pe){return ce(ye(Pe),Be)}}):be.attr("transform",ce(oe,Be))})}function b(v){return y=v.rpx1,w=v.transform.textPosAngle,[y*Math.sin(w),-y*Math.cos(w)];var y,w}P.plot=function(v,y,w,d){var S,T,E=v._fullLayout,C=E._sunburstlayer,L=!w,O=!E.uniformtext.mode&&g.hasTransition(w);i("sunburst",E),(S=C.selectAll("g.trace.sunburst").data(y,function(z){return z[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),S.order(),O?(d&&(T=d()),A.transition().duration(w.duration).ease(w.easing).each("end",function(){T&&T()}).each("interrupt",function(){T&&T()}).each(function(){C.selectAll("g.trace").each(function(z){h(v,z,this,w)})})):(S.each(function(z){h(v,z,this,w)}),E.uniformtext.mode&&p(v,E._sunburstlayer.selectAll(".trace"),"sunburst")),L&&S.exit().remove()},P.formatSliceLabel=function(v,y,w,d,S){var T=w.texttemplate,E=w.textinfo;if(!(T||E&&E!=="none"))return"";var C=S.separators,L=d[0],O=v.data.data,z=L.hierarchy,G=g.isHierarchyRoot(v),I=g.getParent(z,v),H=g.getValue(v);if(!T){var N,F=E.split("+"),V=function(re){return F.indexOf(re)!==-1},W=[];if(V("label")&&O.label&&W.push(O.label),O.hasOwnProperty("v")&&V("value")&&W.push(g.formatValue(O.v,C)),!G){V("current path")&&W.push(g.getPath(v.data));var te=0;V("percent parent")&&te++,V("percent entry")&&te++,V("percent root")&&te++;var Q=te>1;if(te){var X,q=function(re){N=g.formatPercent(X,C),Q&&(N+=" of "+re),W.push(N)};V("percent parent")&&!G&&(X=H/g.getValue(I),q("parent")),V("percent entry")&&(X=H/g.getValue(y),q("entry")),V("percent root")&&(X=H/g.getValue(z),q("root"))}}return V("text")&&(N=m.castOption(w,O.i,"text"),m.isValidTextValue(N)&&W.push(N)),W.join("<br>")}var Z=m.castOption(w,O.i,"texttemplate");if(!Z)return"";var J={};O.label&&(J.label=O.label),O.hasOwnProperty("v")&&(J.value=O.v,J.valueLabel=g.formatValue(O.v,C)),J.currentPath=g.getPath(v.data),G||(J.percentParent=H/g.getValue(I),J.percentParentLabel=g.formatPercent(J.percentParent,C),J.parent=g.getPtLabel(I)),J.percentEntry=H/g.getValue(y),J.percentEntryLabel=g.formatPercent(J.percentEntry,C),J.entry=g.getPtLabel(y),J.percentRoot=H/g.getValue(z),J.percentRootLabel=g.formatPercent(J.percentRoot,C),J.root=g.getPtLabel(z),O.hasOwnProperty("color")&&(J.color=O.color);var ne=m.castOption(w,O.i,"text");return(m.isValidTextValue(ne)||ne==="")&&(J.text=ne),J.customdata=m.castOption(w,O.i,"customdata"),m.texttemplateString(Z,J,S._d3locale,J,w._meta||{})}},29969:function($,P,t){var A=t(39898),M=t(7901),l=t(71828),_=t(72597).resizeText,m=t(43467);function f(o,e,i,r){var n=e.data.data,s=!e.children,a=n.i,u=l.castOption(i,a,"marker.line.color")||M.defaultLine,p=l.castOption(i,a,"marker.line.width")||0;o.call(m,e,i,r).style("stroke-width",p).call(M.stroke,u).style("opacity",s?i.leaf.opacity:null)}$.exports={style:function(o){var e=o._fullLayout._sunburstlayer.selectAll(".trace");_(o,e,"sunburst"),e.each(function(i){var r=A.select(this),n=i[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each(function(s){A.select(this).call(f,s,n,o)})})},styleOne:f}},54532:function($,P,t){var A=t(7901),M=t(50693),l=t(12663).axisHoverFormat,_=t(5386).fF,m=t(9012),f=t(1426).extendFlat,o=t(30962).overrideAll;function e(r){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:A.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:A.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=$.exports=o(f({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:_(),xhoverformat:l("x"),yhoverformat:l("y"),zhoverformat:l("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},M("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e(),y:e(),z:e()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:f({},M.zauto,{}),zmin:f({},M.zmin,{}),zmax:f({},M.zmax,{})},hoverinfo:f({},m.hoverinfo),showlegend:f({},m.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},18396:function($,P,t){var A=t(78803);$.exports=function(M,l){l.surfacecolor?A(M,l,{vals:l.surfacecolor,containerStr:"",cLetter:"c"}):A(M,l,{vals:l.z,containerStr:"",cLetter:"c"})}},43768:function($,P,t){var A=t(9330).gl_surface3d,M=t(9330).ndarray,l=t(9330).ndarray_linear_interpolate.d2,_=t(824),m=t(43907),f=t(71828).isArrayOrTypedArray,o=t(81697).parseColorScale,e=t(78614),i=t(21081).extractOpts;function r(w,d,S){this.scene=w,this.uid=S,this.surface=d,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=r.prototype;n.getXat=function(w,d,S,T){var E=f(this.data.x)?f(this.data.x[0])?this.data.x[d][w]:this.data.x[w]:w;return S===void 0?E:T.d2l(E,0,S)},n.getYat=function(w,d,S,T){var E=f(this.data.y)?f(this.data.y[0])?this.data.y[d][w]:this.data.y[d]:d;return S===void 0?E:T.d2l(E,0,S)},n.getZat=function(w,d,S,T){var E=this.data.z[d][w];return E===null&&this.data.connectgaps&&this.data._interpolatedZ&&(E=this.data._interpolatedZ[d][w]),S===void 0?E:T.d2l(E,0,S)},n.handlePick=function(w){if(w.object===this.surface){var d=(w.data.index[0]-1)/this.dataScaleX-1,S=(w.data.index[1]-1)/this.dataScaleY-1,T=Math.max(Math.min(Math.round(d),this.data.z[0].length-1),0),E=Math.max(Math.min(Math.round(S),this.data._ylength-1),0);w.index=[T,E],w.traceCoordinate=[this.getXat(T,E),this.getYat(T,E),this.getZat(T,E)],w.dataCoordinate=[this.getXat(T,E,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(T,E,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(T,E,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var C=0;C<3;C++)w.dataCoordinate[C]!=null&&(w.dataCoordinate[C]*=this.scene.dataScale[C]);var L=this.data.hovertext||this.data.text;return Array.isArray(L)&&L[E]&&L[E][T]!==void 0?w.textLabel=L[E][T]:w.textLabel=L||"",w.data.dataCoordinate=w.dataCoordinate.slice(),this.surface.highlight(w.data),this.scene.glplot.spikes.position=w.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function a(w,d){if(w<d)return 0;for(var S=0;Math.floor(w%d)===0;)w/=d,S++;return S}function u(w){for(var d=[],S=0;S<s.length;S++){var T=s[S];d.push(a(w,T))}return d}function p(w){for(var d=u(w),S=w,T=0;T<s.length;T++)if(d[T]>0){S=s[T];break}return S}function c(w,d){if(!(w<1||d<1)){for(var S=u(w),T=u(d),E=1,C=0;C<s.length;C++)E*=Math.pow(s[C],Math.max(S[C],T[C]));return E}}n.calcXnums=function(w){var d,S=[];for(d=1;d<w;d++){var T=this.getXat(d-1,0),E=this.getXat(d,0);S[d-1]=E!==T&&T!=null&&E!=null?Math.abs(E-T):0}var C=0;for(d=1;d<w;d++)C+=S[d-1];for(d=1;d<w;d++)S[d-1]===0?S[d-1]=1:S[d-1]=Math.round(C/S[d-1]);return S},n.calcYnums=function(w){var d,S=[];for(d=1;d<w;d++){var T=this.getYat(0,d-1),E=this.getYat(0,d);S[d-1]=E!==T&&T!=null&&E!=null?Math.abs(E-T):0}var C=0;for(d=1;d<w;d++)C+=S[d-1];for(d=1;d<w;d++)S[d-1]===0?S[d-1]=1:S[d-1]=Math.round(C/S[d-1]);return S};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],g=x[9],h=x[13];function b(w,d,S){var T=S[8]+S[2]*d[0]+S[5]*d[1];return w[0]=(S[6]+S[0]*d[0]+S[3]*d[1])/T,w[1]=(S[7]+S[1]*d[0]+S[4]*d[1])/T,w}function v(w,d,S){return function(T,E,C,L){for(var O=[0,0],z=T.shape[0],G=T.shape[1],I=0;I<z;I++)for(var H=0;H<G;H++)C(O,[I,H],L),T.set(I,H,l(E,O[0],O[1]))}(w,d,b,S),w}function y(w,d){for(var S=!1,T=0;T<w.length;T++)if(d===w[T]){S=!0;break}S===!1&&w.push(d)}n.estimateScale=function(w,d){for(var S=1+function(E){if(E.length!==0){for(var C=1,L=0;L<E.length;L++)C=c(C,E[L]);return C}}(d===0?this.calcXnums(w):this.calcYnums(w));S<g;)S*=2;for(;S>h;)S--,S/=p(S),++S<g&&(S=h);var T=Math.round(S/w);return T>1?T:1},n.refineCoords=function(w){for(var d=this.dataScaleX,S=this.dataScaleY,T=w[0].shape[0],E=w[0].shape[1],C=0|Math.floor(w[0].shape[0]*d+1),L=0|Math.floor(w[0].shape[1]*S+1),O=1+T+1,z=1+E+1,G=M(new Float32Array(O*z),[O,z]),I=[1/d,0,0,0,1/S,0,0,0,1],H=0;H<w.length;++H){this.surface.padField(G,w[H]);var N=M(new Float32Array(C*L),[C,L]);v(N,G,I),w[H]=N}},n.setContourLevels=function(){var w,d,S,T=[[],[],[]],E=[!1,!1,!1],C=!1;for(w=0;w<3;++w)if(this.showContour[w]&&(C=!0,this.contourSize[w]>0&&this.contourStart[w]!==null&&this.contourEnd[w]!==null&&this.contourEnd[w]>this.contourStart[w]))for(E[w]=!0,d=this.contourStart[w];d<this.contourEnd[w];d+=this.contourSize[w])S=d*this.scene.dataScale[w],y(T[w],S);if(C){var L=[[],[],[]];for(w=0;w<3;++w)this.showContour[w]&&(L[w]=E[w]?T[w]:this.scene.contourLevels[w]);this.surface.update({levels:L})}},n.update=function(w){var d,S,T,E,C=this.scene,L=C.fullSceneLayout,O=this.surface,z=o(w),G=C.dataScale,I=w.z[0].length,H=w._ylength,N=C.contourLevels;this.data=w;var F=[];for(d=0;d<3;d++)for(F[d]=[],S=0;S<I;S++)F[d][S]=[];for(S=0;S<I;S++)for(T=0;T<H;T++)F[0][S][T]=this.getXat(S,T,w.xcalendar,L.xaxis),F[1][S][T]=this.getYat(S,T,w.ycalendar,L.yaxis),F[2][S][T]=this.getZat(S,T,w.zcalendar,L.zaxis);if(w.connectgaps)for(w._emptypoints=m(F[2]),_(F[2],w._emptypoints),w._interpolatedZ=[],S=0;S<I;S++)for(w._interpolatedZ[S]=[],T=0;T<H;T++)w._interpolatedZ[S][T]=F[2][S][T];for(d=0;d<3;d++)for(S=0;S<I;S++)for(T=0;T<H;T++)(E=F[d][S][T])==null?F[d][S][T]=NaN:E=F[d][S][T]*=G[d];for(d=0;d<3;d++)for(S=0;S<I;S++)for(T=0;T<H;T++)(E=F[d][S][T])!=null&&(this.minValues[d]>E&&(this.minValues[d]=E),this.maxValues[d]<E&&(this.maxValues[d]=E));for(d=0;d<3;d++)this.objectOffset[d]=.5*(this.minValues[d]+this.maxValues[d]);for(d=0;d<3;d++)for(S=0;S<I;S++)for(T=0;T<H;T++)(E=F[d][S][T])!=null&&(F[d][S][T]-=this.objectOffset[d]);var V=[M(new Float32Array(I*H),[I,H]),M(new Float32Array(I*H),[I,H]),M(new Float32Array(I*H),[I,H])];for(d=0;d<3;d++)for(S=0;S<I;S++)for(T=0;T<H;T++)V[d].set(S,T,F[d][S][T]);F=[];var W={colormap:z,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!w.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:w.opacityscale,opacity:w.opacity},te=i(w);if(W.intensityBounds=[te.min,te.max],w.surfacecolor){var Q=M(new Float32Array(I*H),[I,H]);for(S=0;S<I;S++)for(T=0;T<H;T++)Q.set(S,T,w.surfacecolor[T][S]);V.push(Q)}else W.intensityBounds[0]*=G[2],W.intensityBounds[1]*=G[2];(h<V[0].shape[0]||h<V[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(V[0].shape[0],0),this.dataScaleY=this.estimateScale(V[0].shape[1],1),this.dataScaleX===1&&this.dataScaleY===1||this.refineCoords(V)),w.surfacecolor&&(W.intensity=V.pop());var X=[!0,!0,!0],q=["x","y","z"];for(d=0;d<3;++d){var Z=w.contours[q[d]];X[d]=Z.highlight,W.showContour[d]=Z.show||Z.highlight,W.showContour[d]&&(W.contourProject[d]=[Z.project.x,Z.project.y,Z.project.z],Z.show?(this.showContour[d]=!0,W.levels[d]=N[d],O.highlightColor[d]=W.contourColor[d]=e(Z.color),Z.usecolormap?O.highlightTint[d]=W.contourTint[d]=0:O.highlightTint[d]=W.contourTint[d]=1,W.contourWidth[d]=Z.width,this.contourStart[d]=Z.start,this.contourEnd[d]=Z.end,this.contourSize[d]=Z.size):(this.showContour[d]=!1,this.contourStart[d]=null,this.contourEnd[d]=null,this.contourSize[d]=0),Z.highlight&&(W.dynamicColor[d]=e(Z.highlightcolor),W.dynamicWidth[d]=Z.highlightwidth))}(function(J){var ne=J[0].rgb,re=J[J.length-1].rgb;return ne[0]===re[0]&&ne[1]===re[1]&&ne[2]===re[2]&&ne[3]===re[3]})(z)&&(W.vertexColor=!0),W.objectOffset=this.objectOffset,W.coords=V,O.update(W),O.visible=w.visible,O.enableDynamic=X,O.enableHighlight=X,O.snapToData=!0,"lighting"in w&&(O.ambientLight=w.lighting.ambient,O.diffuseLight=w.lighting.diffuse,O.specularLight=w.lighting.specular,O.roughness=w.lighting.roughness,O.fresnel=w.lighting.fresnel),"lightposition"in w&&(O.lightPosition=[w.lightposition.x,w.lightposition.y,w.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},$.exports=function(w,d){var S=w.glplot.gl,T=A({gl:S}),E=new r(w,T,d.uid);return T._trace=E,E.update(d),w.glplot.add(T),E}},91831:function($,P,t){var A=t(73972),M=t(71828),l=t(1586),_=t(54532);function m(o,e,i,r){var n=r("opacityscale");n==="max"?e.opacityscale=[[0,.1],[1,1]]:n==="min"?e.opacityscale=[[0,1],[1,.1]]:n==="extremes"?e.opacityscale=function(s,a){for(var u=[],p=0;p<32;p++){var c=p/31,x=.1+.9*(1-Math.pow(Math.sin(1*c*Math.PI),2));u.push([c,Math.max(0,Math.min(1,x))])}return u}():function(s){var a=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var u=0;u<s.length;u++){var p=s[u];if(p.length!==2||+p[0]<a)return!1;a=+p[0]}return!0}(n)||(e.opacityscale=void 0)}function f(o,e,i){e in o&&!(i in o)&&(o[i]=o[e])}$.exports={supplyDefaults:function(o,e,i,r){var n,s;function a(y,w){return M.coerce(o,e,_,y,w)}var u=a("x"),p=a("y"),c=a("z");if(!c||!c.length||u&&u.length<1||p&&p.length<1)e.visible=!1;else{e._xlength=Array.isArray(u)&&M.isArrayOrTypedArray(u[0])?c.length:c[0].length,e._ylength=c.length,A.getComponentMethod("calendars","handleTraceDefaults")(o,e,["x","y","z"],r),a("text"),a("hovertext"),a("hovertemplate"),a("xhoverformat"),a("yhoverformat"),a("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(y){a(y)});var x=a("surfacecolor"),g=["x","y","z"];for(n=0;n<3;++n){var h="contours."+g[n],b=a(h+".show"),v=a(h+".highlight");if(b||v)for(s=0;s<3;++s)a(h+".project."+g[s]);b&&(a(h+".color"),a(h+".width"),a(h+".usecolormap")),v&&(a(h+".highlightcolor"),a(h+".highlightwidth")),a(h+".start"),a(h+".end"),a(h+".size")}x||(f(o,"zmin","cmin"),f(o,"zmax","cmax"),f(o,"zauto","cauto")),l(o,e,r,a,{prefix:"",cLetter:"c"}),m(0,e,0,a),e._length=null}},opacityscaleDefaults:m}},93601:function($,P,t){$.exports={attributes:t(54532),supplyDefaults:t(91831).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(18396),plot:t(43768),moduleType:"trace",name:"surface",basePlotModule:t(58547),categories:["gl3d","2dMap","showLegend"],meta:{}}},44464:function($,P,t){var A=t(50215),M=t(1426).extendFlat,l=t(30962).overrideAll,_=t(41940),m=t(27670).Y,f=t(12663).descriptionOnlyNumbers;($.exports=l({domain:m({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:M({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:M({},_({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:f("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:M({},A.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:M({},_({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},99469:function($,P,t){var A=t(27659).a0,M=t(36736),l="table";P.name=l,P.plot=function(_){var m=A(_.calcdata,l)[0];m.length&&M(_,m)},P.clean=function(_,m,f,o){var e=o._has&&o._has(l),i=m._has&&m._has(l);e&&!i&&o._paperdiv.selectAll(".table").remove()}},76333:function($,P,t){var A=t(28984).wrap;$.exports=function(){return A({})}},49850:function($){$.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},51018:function($,P,t){var A=t(49850),M=t(1426).extendFlat,l=t(92770);function _(n){if(Array.isArray(n)){for(var s=0,a=0;a<n.length;a++)s=Math.max(s,_(n[a]));return s}return n}function m(n,s){return n+s}function f(n){var s,a=n.slice(),u=1/0,p=0;for(s=0;s<a.length;s++)Array.isArray(a[s])||(a[s]=[a[s]]),u=Math.min(u,a[s].length),p=Math.max(p,a[s].length);if(u!==p)for(s=0;s<a.length;s++){var c=p-a[s].length;c&&(a[s]=a[s].concat(o(c)))}return a}function o(n){for(var s=new Array(n),a=0;a<n;a++)s[a]="";return s}function e(n){return n.calcdata.columns.reduce(function(s,a){return a.xIndex<n.xIndex?s+a.columnWidth:s},0)}function i(n,s){return Object.keys(n).map(function(a){return M({},n[a],{auxiliaryBlocks:s})})}function r(n,s){for(var a,u={},p=0,c=0,x={firstRowIndex:null,lastRowIndex:null,rows:[]},g=0,h=0,b=0;b<n.length;b++)a=n[b],x.rows.push({rowIndex:b,rowHeight:a}),((c+=a)>=s||b===n.length-1)&&(u[p]=x,x.key=h++,x.firstRowIndex=g,x.lastRowIndex=b,x={firstRowIndex:null,lastRowIndex:null,rows:[]},p+=c,g=b+1,c=0);return u}$.exports=function(n,s){var a=f(s.cells.values),u=function(G){return G.slice(s.header.values.length,G.length)},p=f(s.header.values);p.length&&!p[0].length&&(p[0]=[""],p=f(p));var c=p.concat(u(a).map(function(){return o((p[0]||[""]).length)})),x=s.domain,g=Math.floor(n._fullLayout._size.w*(x.x[1]-x.x[0])),h=Math.floor(n._fullLayout._size.h*(x.y[1]-x.y[0])),b=s.header.values.length?c[0].map(function(){return s.header.height}):[A.emptyHeaderHeight],v=a.length?a[0].map(function(){return s.cells.height}):[],y=b.reduce(m,0),w=r(v,h-y+A.uplift),d=i(r(b,y),[]),S=i(w,d),T={},E=s._fullInput.columnorder.concat(u(a.map(function(G,I){return I}))),C=c.map(function(G,I){var H=Array.isArray(s.columnwidth)?s.columnwidth[Math.min(I,s.columnwidth.length-1)]:s.columnwidth;return l(H)?Number(H):1}),L=C.reduce(m,0);C=C.map(function(G){return G/L*g});var O=Math.max(_(s.header.line.width),_(s.cells.line.width)),z={key:s.uid+n._context.staticPlot,translateX:x.x[0]*n._fullLayout._size.w,translateY:n._fullLayout._size.h*(1-x.y[1]),size:n._fullLayout._size,width:g,maxLineWidth:O,height:h,columnOrder:E,groupHeight:h,rowBlocks:S,headerRowBlocks:d,scrollY:0,cells:M({},s.cells,{values:a}),headerCells:M({},s.header,{values:c}),gdColumns:c.map(function(G){return G[0]}),gdColumnsOriginalOrder:c.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:c.map(function(G,I){var H=T[G];return T[G]=(H||0)+1,{key:G+"__"+T[G],label:G,specIndex:I,xIndex:E[I],xScale:e,x:void 0,calcdata:void 0,columnWidth:C[I]}})};return z.columns.forEach(function(G){G.calcdata=z,G.x=e(G)}),z}},56269:function($,P,t){var A=t(1426).extendFlat;P.splitToPanels=function(M){var l=[0,0],_=A({},M,{key:"header",type:"header",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!0,values:M.calcdata.headerCells.values[M.specIndex],rowBlocks:M.calcdata.headerRowBlocks,calcdata:A({},M.calcdata,{cells:M.calcdata.headerCells})});return[A({},M,{key:"cells1",type:"cells",page:0,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),A({},M,{key:"cells2",type:"cells",page:1,prevPages:l,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),_]},P.splitToCells=function(M){var l=function(_){var m=_.rowBlocks[_.page],f=m?m.rows[0].rowIndex:0;return[f,m?f+m.rows.length:0]}(M);return(M.values||[]).slice(l[0],l[1]).map(function(_,m){return{keyWithinBlock:m+(typeof _=="string"&&_.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:l[0]+m,column:M,calcdata:M.calcdata,page:M.page,rowBlocks:M.rowBlocks,value:_}})}},39754:function($,P,t){var A=t(71828),M=t(44464),l=t(27670).c;$.exports=function(_,m,f,o){function e(i,r){return A.coerce(_,m,M,i,r)}l(m,o,e),e("columnwidth"),e("header.values"),e("header.format"),e("header.align"),e("header.prefix"),e("header.suffix"),e("header.height"),e("header.line.width"),e("header.line.color"),e("header.fill.color"),A.coerceFont(e,"header.font",A.extendFlat({},o.font)),function(i,r){for(var n=i.columnorder||[],s=i.header.values.length,a=n.slice(0,s),u=a.slice().sort(function(x,g){return x-g}),p=a.map(function(x){return u.indexOf(x)}),c=p.length;c<s;c++)p.push(c);r("columnorder",p)}(m,e),e("cells.values"),e("cells.format"),e("cells.align"),e("cells.prefix"),e("cells.suffix"),e("cells.height"),e("cells.line.width"),e("cells.line.color"),e("cells.fill.color"),A.coerceFont(e,"cells.font",A.extendFlat({},o.font)),m._length=null}},96595:function($,P,t){$.exports={attributes:t(44464),supplyDefaults:t(39754),calc:t(76333),plot:t(36736),moduleType:"trace",name:"table",basePlotModule:t(99469),categories:["noOpacity"],meta:{}}},36736:function($,P,t){var A=t(49850),M=t(39898),l=t(71828).numberFormat,_=t(28984),m=t(91424),f=t(63893),o=t(71828).raiseToTop,e=t(71828).strTranslate,i=t(71828).cancelTransition,r=t(51018),n=t(56269),s=t(7901);function a(V){return Math.ceil(V.calcdata.maxLineWidth/2)}function u(V,W){return"clip"+V._fullLayout._uid+"_scrollAreaBottomClip_"+W.key}function p(V,W){return"clip"+V._fullLayout._uid+"_columnBoundaryClippath_"+W.calcdata.key+"_"+W.specIndex}function c(V){return[].concat.apply([],V.map(function(W){return W})).map(function(W){return W.__data__})}function x(V,W,te){var Q=V.selectAll("."+A.cn.scrollbarKit).data(_.repeat,_.keyFun);Q.enter().append("g").classed(A.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),Q.each(function(ne){var re=ne.scrollbarState;re.totalHeight=function(ae){var ue=ae.rowBlocks;return I(ue,ue.length-1)+(ue.length?H(ue[ue.length-1],1/0):1)}(ne),re.scrollableAreaHeight=ne.groupHeight-S(ne),re.currentlyVisibleHeight=Math.min(re.totalHeight,re.scrollableAreaHeight),re.ratio=re.currentlyVisibleHeight/re.totalHeight,re.barLength=Math.max(re.ratio*re.currentlyVisibleHeight,A.goldenRatio*A.scrollbarWidth),re.barWiggleRoom=re.currentlyVisibleHeight-re.barLength,re.wiggleRoom=Math.max(0,re.totalHeight-re.scrollableAreaHeight),re.topY=re.barWiggleRoom===0?0:ne.scrollY/re.wiggleRoom*re.barWiggleRoom,re.bottomY=re.topY+re.barLength,re.dragMultiplier=re.wiggleRoom/re.barWiggleRoom}).attr("transform",function(ne){var re=ne.width+A.scrollbarWidth/2+A.scrollbarOffset;return e(re,S(ne))});var X=Q.selectAll("."+A.cn.scrollbar).data(_.repeat,_.keyFun);X.enter().append("g").classed(A.cn.scrollbar,!0);var q=X.selectAll("."+A.cn.scrollbarSlider).data(_.repeat,_.keyFun);q.enter().append("g").classed(A.cn.scrollbarSlider,!0),q.attr("transform",function(ne){return e(0,ne.scrollbarState.topY||0)});var Z=q.selectAll("."+A.cn.scrollbarGlyph).data(_.repeat,_.keyFun);Z.enter().append("line").classed(A.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",A.scrollbarWidth).attr("stroke-linecap","round").attr("y1",A.scrollbarWidth/2),Z.attr("y2",function(ne){return ne.scrollbarState.barLength-A.scrollbarWidth/2}).attr("stroke-opacity",function(ne){return ne.columnDragInProgress||!ne.scrollbarState.barWiggleRoom||te?0:.4}),Z.transition().delay(0).duration(0),Z.transition().delay(A.scrollbarHideDelay).duration(A.scrollbarHideDuration).attr("stroke-opacity",0);var J=X.selectAll("."+A.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);J.enter().append("line").classed(A.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",A.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ne){var re=M.event.y,ae=this.getBoundingClientRect(),ue=ne.scrollbarState,he=re-ae.top,de=M.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=he&&he<=ue.bottomY||E(W,V,null,de(he-ue.barLength/2))(ne)}).call(M.behavior.drag().origin(function(ne){return M.event.stopPropagation(),ne.scrollbarState.scrollbarScrollInProgress=!0,ne}).on("drag",E(W,V)).on("dragend",function(){})),J.attr("y2",function(ne){return ne.scrollbarState.scrollableAreaHeight}),W._context.staticPlot&&(Z.remove(),J.remove())}function g(V,W,te,Q){var X=function(re){var ae=re.selectAll("."+A.cn.columnCells).data(_.repeat,_.keyFun);return ae.enter().append("g").classed(A.cn.columnCells,!0),ae.exit().remove(),ae}(te),q=function(re){var ae=re.selectAll("."+A.cn.columnCell).data(n.splitToCells,function(ue){return ue.keyWithinBlock});return ae.enter().append("g").classed(A.cn.columnCell,!0),ae.exit().remove(),ae}(X);(function(re){re.each(function(ae,ue){var he=ae.calcdata.cells.font,de=ae.column.specIndex,xe={size:v(he.size,de,ue),color:v(he.color,de,ue),family:v(he.family,de,ue)};ae.rowNumber=ae.key,ae.align=v(ae.calcdata.cells.align,de,ue),ae.cellBorderWidth=v(ae.calcdata.cells.line.width,de,ue),ae.font=xe})})(q);var Z=function(re){var ae=re.selectAll("."+A.cn.cellRect).data(_.repeat,function(ue){return ue.keyWithinBlock});return ae.enter().append("rect").classed(A.cn.cellRect,!0),ae}(q);(function(re){re.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var ue=M.select(this);s.stroke(ue,v(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),s.fill(ue,v(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})})(Z);var J=function(re){var ae=re.selectAll("."+A.cn.cellTextHolder).data(_.repeat,function(ue){return ue.keyWithinBlock});return ae.enter().append("g").classed(A.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}(q),ne=function(re){var ae=re.selectAll("."+A.cn.cellText).data(_.repeat,function(ue){return ue.keyWithinBlock});return ae.enter().append("text").classed(A.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){M.event.stopPropagation()}),ae}(J);(function(re){re.each(function(ae){m.font(M.select(this),ae.font)})})(ne),h(ne,W,Q,V),G(q)}function h(V,W,te,Q){V.text(function(X){var q=X.column.specIndex,Z=X.rowNumber,J=X.value,ne=typeof J=="string",re=ne&&J.match(/<br>/i),ae=!ne||re;X.mayHaveMarkup=ne&&J.match(/[<&>]/);var ue,he=typeof(ue=J)=="string"&&ue.match(A.latexCheck);X.latex=he;var de,xe,me=he?"":v(X.calcdata.cells.prefix,q,Z)||"",ve=he?"":v(X.calcdata.cells.suffix,q,Z)||"",Le=he?null:v(X.calcdata.cells.format,q,Z)||null,Ae=me+(Le?l(Le)(X.value):X.value)+ve;if(X.wrappingNeeded=!X.wrapped&&!ae&&!he&&(de=b(Ae)),X.cellHeightMayIncrease=re||he||X.mayHaveMarkup||(de===void 0?b(Ae):de),X.needsConvertToTspans=X.mayHaveMarkup||X.wrappingNeeded||X.latex,X.wrappingNeeded){var we=(A.wrapSplitCharacter===" "?Ae.replace(/<a href=/gi,"<a_href="):Ae).split(A.wrapSplitCharacter),se=A.wrapSplitCharacter===" "?we.map(function(oe){return oe.replace(/<a_href=/gi,"<a href=")}):we;X.fragments=se.map(function(oe){return{text:oe,width:null}}),X.fragments.push({fragment:A.wrapSpacer,width:null}),xe=se.join(A.lineBreaker)+A.lineBreaker+A.wrapSpacer}else delete X.fragments,xe=Ae;return xe}).attr("dy",function(X){return X.needsConvertToTspans?0:"0.75em"}).each(function(X){var q=this,Z=M.select(q),J=X.wrappingNeeded?L:O;X.needsConvertToTspans?f.convertToTspans(Z,Q,J(te,q,W,Q,X)):M.select(q.parentNode).attr("transform",function(ne){return e(z(ne),A.cellPad)}).attr("text-anchor",function(ne){return{left:"start",center:"middle",right:"end"}[ne.align]})})}function b(V){return V.indexOf(A.wrapSplitCharacter)!==-1}function v(V,W,te){if(Array.isArray(V)){var Q=V[Math.min(W,V.length-1)];return Array.isArray(Q)?Q[Math.min(te,Q.length-1)]:Q}return V}function y(V,W,te){V.transition().ease(A.releaseTransitionEase).duration(A.releaseTransitionDuration).attr("transform",e(W.x,te))}function w(V){return V.type==="cells"}function d(V){return V.type==="header"}function S(V){return(V.rowBlocks.length?V.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(W,te){return W+H(te,1/0)},0)}function T(V,W,te){var Q=c(W)[0];if(Q!==void 0){var X=Q.rowBlocks,q=Q.calcdata,Z=I(X,X.length),J=Q.calcdata.groupHeight-S(Q),ne=q.scrollY=Math.max(0,Math.min(Z-J,q.scrollY)),re=function(ae,ue,he){for(var de=[],xe=0,me=0;me<ae.length;me++){for(var ve=ae[me],Le=ve.rows,Ae=0,we=0;we<Le.length;we++)Ae+=Le[we].rowHeight;ve.allRowsHeight=Ae,ue<xe+Ae&&ue+he>xe&&de.push(me),xe+=Ae}return de}(X,ne,J);re.length===1&&(re[0]===X.length-1?re.unshift(re[0]-1):re.push(re[0]+1)),re[0]%2&&re.reverse(),W.each(function(ae,ue){ae.page=re[ue],ae.scrollY=ne}),W.attr("transform",function(ae){var ue=I(ae.rowBlocks,ae.page)-ae.scrollY;return e(0,ue)}),V&&(C(V,te,W,re,Q.prevPages,Q,0),C(V,te,W,re,Q.prevPages,Q,1),x(te,V))}}function E(V,W,te,Q){return function(X){var q=X.calcdata?X.calcdata:X,Z=W.filter(function(ae){return q.key===ae.key}),J=te||q.scrollbarState.dragMultiplier,ne=q.scrollY;q.scrollY=Q===void 0?q.scrollY+J*M.event.dy:Q;var re=Z.selectAll("."+A.cn.yColumn).selectAll("."+A.cn.columnBlock).filter(w);return T(V,re,Z),q.scrollY===ne}}function C(V,W,te,Q,X,q,Z){Q[Z]!==X[Z]&&(clearTimeout(q.currentRepaint[Z]),q.currentRepaint[Z]=setTimeout(function(){var J=te.filter(function(ne,re){return re===Z&&Q[re]!==X[re]});g(V,W,J,te),X[Z]=Q[Z]}))}function L(V,W,te,Q){return function(){var X=M.select(W.parentNode);X.each(function(q){var Z=q.fragments;X.selectAll("tspan.line").each(function(xe,me){Z[me].width=this.getComputedTextLength()});var J,ne,re=Z[Z.length-1].width,ae=Z.slice(0,-1),ue=[],he=0,de=q.column.columnWidth-2*A.cellPad;for(q.value="";ae.length;)he+(ne=(J=ae.shift()).width+re)>de&&(q.value+=ue.join(A.wrapSpacer)+A.lineBreaker,ue=[],he=0),ue.push(J.text),he+=ne;he&&(q.value+=ue.join(A.wrapSpacer)),q.wrapped=!0}),X.selectAll("tspan.line").remove(),h(X.select("."+A.cn.cellText),te,V,Q),M.select(W.parentNode.parentNode).call(G)}}function O(V,W,te,Q,X){return function(){if(!X.settledY){var q=M.select(W.parentNode),Z=F(X),J=X.key-Z.firstRowIndex,ne=Z.rows[J].rowHeight,re=X.cellHeightMayIncrease?W.parentNode.getBoundingClientRect().height+2*A.cellPad:ne,ae=Math.max(re,ne);ae-Z.rows[J].rowHeight&&(Z.rows[J].rowHeight=ae,V.selectAll("."+A.cn.columnCell).call(G),T(null,V.filter(w),0),x(te,Q,!0)),q.attr("transform",function(){var ue=this,he=ue.parentNode.getBoundingClientRect(),de=M.select(ue.parentNode).select("."+A.cn.cellRect).node().getBoundingClientRect(),xe=ue.transform.baseVal.consolidate(),me=de.top-he.top+(xe?xe.matrix.f:A.cellPad);return e(z(X,M.select(ue.parentNode).select("."+A.cn.cellTextHolder).node().getBoundingClientRect().width),me)}),X.settledY=!0}}}function z(V,W){switch(V.align){case"left":default:return A.cellPad;case"right":return V.column.columnWidth-(W||0)-A.cellPad;case"center":return(V.column.columnWidth-(W||0))/2}}function G(V){V.attr("transform",function(W){var te=W.rowBlocks[0].auxiliaryBlocks.reduce(function(X,q){return X+H(q,1/0)},0),Q=H(F(W),W.key);return e(0,Q+te)}).selectAll("."+A.cn.cellRect).attr("height",function(W){return(te=F(W),Q=W.key,te.rows[Q-te.firstRowIndex]).rowHeight;var te,Q})}function I(V,W){for(var te=0,Q=W-1;Q>=0;Q--)te+=N(V[Q]);return te}function H(V,W){for(var te=0,Q=0;Q<V.rows.length&&V.rows[Q].rowIndex<W;Q++)te+=V.rows[Q].rowHeight;return te}function N(V){var W=V.allRowsHeight;if(W!==void 0)return W;for(var te=0,Q=0;Q<V.rows.length;Q++)te+=V.rows[Q].rowHeight;return V.allRowsHeight=te,te}function F(V){return V.rowBlocks[V.page]}$.exports=function(V,W){var te=!V._context.staticPlot,Q=V._fullLayout._paper.selectAll("."+A.cn.table).data(W.map(function(ve){var Le=_.unwrap(ve).trace;return r(V,Le)}),_.keyFun);Q.exit().remove(),Q.enter().append("g").classed(A.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),Q.attr("width",function(ve){return ve.width+ve.size.l+ve.size.r}).attr("height",function(ve){return ve.height+ve.size.t+ve.size.b}).attr("transform",function(ve){return e(ve.translateX,ve.translateY)});var X=Q.selectAll("."+A.cn.tableControlView).data(_.repeat,_.keyFun),q=X.enter().append("g").classed(A.cn.tableControlView,!0).style("box-sizing","content-box");if(te){var Z="onwheel"in document?"wheel":"mousewheel";q.on("mousemove",function(ve){X.filter(function(Le){return ve===Le}).call(x,V)}).on(Z,function(ve){if(!ve.scrollbarState.wheeling){ve.scrollbarState.wheeling=!0;var Le=ve.scrollY+M.event.deltaY;E(V,X,null,Le)(ve)||(M.event.stopPropagation(),M.event.preventDefault()),ve.scrollbarState.wheeling=!1}}).call(x,V,!0)}X.attr("transform",function(ve){return e(ve.size.l,ve.size.t)});var J=X.selectAll("."+A.cn.scrollBackground).data(_.repeat,_.keyFun);J.enter().append("rect").classed(A.cn.scrollBackground,!0).attr("fill","none"),J.attr("width",function(ve){return ve.width}).attr("height",function(ve){return ve.height}),X.each(function(ve){m.setClipUrl(M.select(this),u(V,ve),V)});var ne=X.selectAll("."+A.cn.yColumn).data(function(ve){return ve.columns},_.keyFun);ne.enter().append("g").classed(A.cn.yColumn,!0),ne.exit().remove(),ne.attr("transform",function(ve){return e(ve.x,0)}),te&&ne.call(M.behavior.drag().origin(function(ve){return y(M.select(this),ve,-A.uplift),o(this),ve.calcdata.columnDragInProgress=!0,x(X.filter(function(Le){return ve.calcdata.key===Le.key}),V),ve}).on("drag",function(ve){var Le=M.select(this),Ae=function(we){return(ve===we?M.event.x:we.x)+we.columnWidth/2};ve.x=Math.max(-A.overdrag,Math.min(ve.calcdata.width+A.overdrag-ve.columnWidth,M.event.x)),c(ne).filter(function(we){return we.calcdata.key===ve.calcdata.key}).sort(function(we,se){return Ae(we)-Ae(se)}).forEach(function(we,se){we.xIndex=se,we.x=ve===we?we.x:we.xScale(we)}),ne.filter(function(we){return ve!==we}).transition().ease(A.transitionEase).duration(A.transitionDuration).attr("transform",function(we){return e(we.x,0)}),Le.call(i).attr("transform",e(ve.x,-A.uplift))}).on("dragend",function(ve){var Le=M.select(this),Ae=ve.calcdata;ve.x=ve.xScale(ve),ve.calcdata.columnDragInProgress=!1,y(Le,ve,0),function(we,se,oe){var fe=se.gdColumnsOriginalOrder;se.gdColumns.sort(function(Se,Me){return oe[fe.indexOf(Se)]-oe[fe.indexOf(Me)]}),se.columnorder=oe,we.emit("plotly_restyle")}(V,Ae,Ae.columns.map(function(we){return we.xIndex}))})),ne.each(function(ve){m.setClipUrl(M.select(this),p(V,ve),V)});var re=ne.selectAll("."+A.cn.columnBlock).data(n.splitToPanels,_.keyFun);re.enter().append("g").classed(A.cn.columnBlock,!0).attr("id",function(ve){return ve.key}),re.style("cursor",function(ve){return ve.dragHandle?"ew-resize":ve.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ae=re.filter(d),ue=re.filter(w);te&&ue.call(M.behavior.drag().origin(function(ve){return M.event.stopPropagation(),ve}).on("drag",E(V,X,-1)).on("dragend",function(){})),g(V,X,ae,re),g(V,X,ue,re);var he=X.selectAll("."+A.cn.scrollAreaClip).data(_.repeat,_.keyFun);he.enter().append("clipPath").classed(A.cn.scrollAreaClip,!0).attr("id",function(ve){return u(V,ve)});var de=he.selectAll("."+A.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);de.enter().append("rect").classed(A.cn.scrollAreaClipRect,!0).attr("x",-A.overdrag).attr("y",-A.uplift).attr("fill","none"),de.attr("width",function(ve){return ve.width+2*A.overdrag}).attr("height",function(ve){return ve.height+A.uplift}),ne.selectAll("."+A.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(A.cn.columnBoundary,!0);var xe=ne.selectAll("."+A.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);xe.enter().append("clipPath").classed(A.cn.columnBoundaryClippath,!0),xe.attr("id",function(ve){return p(V,ve)});var me=xe.selectAll("."+A.cn.columnBoundaryRect).data(_.repeat,_.keyFun);me.enter().append("rect").classed(A.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(ve){return ve.columnWidth+2*a(ve)}).attr("height",function(ve){return ve.calcdata.height+2*a(ve)+A.uplift}).attr("x",function(ve){return-a(ve)}).attr("y",function(ve){return-a(ve)}),T(null,ue,X)}},45802:function($,P,t){var A=t(5386).fF,M=t(5386).si,l=t(50693),_=t(27670).Y,m=t(34e3),f=t(57564),o=t(43473),e=t(1426).extendFlat,i=t(79952).u;$.exports={labels:f.labels,parents:f.parents,values:f.values,branchvalues:f.branchvalues,count:f.count,level:f.level,maxdepth:f.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:e({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:f.marker.colors,pattern:i,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:f.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},l("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:e({},m.textfont,{}),editType:"calc"},text:m.text,textinfo:f.textinfo,texttemplate:M({editType:"plot"},{keys:o.eventDataKeys.concat(["label","value"])}),hovertext:m.hovertext,hoverinfo:f.hoverinfo,hovertemplate:A({},{keys:o.eventDataKeys}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:e({},m.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:m.sort,root:f.root,domain:_({name:"treemap",trace:!0,editType:"calc"})}},78018:function($,P,t){var A=t(74875);P.name="treemap",P.plot=function(M,l,_,m){A.plotBasePlot(P.name,M,l,_,m)},P.clean=function(M,l,_,m){A.cleanBasePlot(P.name,M,l,_,m)}},65039:function($,P,t){var A=t(52147);P.y=function(M,l){return A.calc(M,l)},P.T=function(M){return A._runCrossTraceCalc("treemap",M)}},43473:function($){$.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},91174:function($,P,t){var A=t(71828),M=t(45802),l=t(7901),_=t(27670).c,m=t(90769).handleText,f=t(97313).TEXTPAD,o=t(37434).handleMarkerDefaults,e=t(21081),i=e.hasColorscale,r=e.handleDefaults;$.exports=function(n,s,a,u){function p(w,d){return A.coerce(n,s,M,w,d)}var c=p("labels"),x=p("parents");if(c&&c.length&&x&&x.length){var g=p("values");g&&g.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.packing")==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var h=p("text");p("texttemplate"),s.texttemplate||p("textinfo",Array.isArray(h)?"text+label":"label"),p("hovertext"),p("hovertemplate");var b=p("pathbar.visible");m(n,s,u,p,"auto",{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var v=s.textposition.indexOf("bottom")!==-1;o(n,s,u,p),(s._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis)?r(n,s,u,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(s.marker.colors||[]).length);var y=2*s.textfont.size;p("marker.pad.t",v?y/4:y),p("marker.pad.l",y/4),p("marker.pad.r",y/4),p("marker.pad.b",v?y:y/4),p("marker.cornerradius"),s._hovered={marker:{line:{width:2,color:l.contrast(u.paper_bgcolor)}}},b&&(p("pathbar.thickness",s.pathbar.textfont.size+2*f),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(s,u,p),s._length=null}else s.visible=!1}},80694:function($,P,t){var A=t(39898),M=t(2791),l=t(72597).clearMinTextSize,_=t(16688).resizeText,m=t(46650);$.exports=function(f,o,e,i,r){var n,s,a=r.type,u=r.drawDescendants,p=f._fullLayout,c=p["_"+a+"layer"],x=!e;l(a,p),(n=c.selectAll("g.trace."+a).data(o,function(g){return g[0].trace.uid})).enter().append("g").classed("trace",!0).classed(a,!0),n.order(),!p.uniformtext.mode&&M.hasTransition(e)?(i&&(s=i()),A.transition().duration(e.duration).ease(e.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){c.selectAll("g.trace").each(function(g){m(f,g,this,e,u)})})):(n.each(function(g){m(f,g,this,e,u)}),p.uniformtext.mode&&_(f,c.selectAll(".trace"),a)),x&&n.exit().remove()}},66209:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(63893),m=t(37210),f=t(96362).styleOne,o=t(43473),e=t(2791),i=t(83523),r=!0;$.exports=function(n,s,a,u,p){var c=p.barDifY,x=p.width,g=p.height,h=p.viewX,b=p.viewY,v=p.pathSlice,y=p.toMoveInsideSlice,w=p.strTransform,d=p.hasTransition,S=p.handleSlicesExit,T=p.makeUpdateSliceInterpolator,E=p.makeUpdateTextInterpolator,C={},L=n._context.staticPlot,O=n._fullLayout,z=s[0],G=z.trace,I=z.hierarchy,H=x/G._entryDepth,N=e.listPath(a.data,"id"),F=m(I.copy(),[x,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(F=F.filter(function(W){var te=N.indexOf(W.data.id);return te!==-1&&(W.x0=H*te,W.x1=H*(te+1),W.y0=c,W.y1=c+g,W.onPathbar=!0,!0)})).reverse(),(u=u.data(F,e.getPtId)).enter().append("g").classed("pathbar",!0),S(u,r,C,[x,g],v),u.order();var V=u;d&&(V=V.transition().each("end",function(){var W=A.select(this);e.setSliceCursor(W,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),V.each(function(W){W._x0=h(W.x0),W._x1=h(W.x1),W._y0=b(W.y0),W._y1=b(W.y1),W._hoverX=h(W.x1-Math.min(x,g)/2),W._hoverY=b(W.y1-g/2);var te=A.select(this),Q=M.ensureSingle(te,"path","surface",function(J){J.style("pointer-events",L?"none":"all")});d?Q.transition().attrTween("d",function(J){var ne=T(J,r,C,[x,g]);return function(re){return v(ne(re))}}):Q.attr("d",v),te.call(i,a,n,s,{styleOne:f,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,n,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:n._transitioning}),Q.call(f,W,G,n,{hovered:!1}),W._text=(e.getPtLabel(W)||"").split("<br>").join(" ")||"";var X=M.ensureSingle(te,"g","slicetext"),q=M.ensureSingle(X,"text","",function(J){J.attr("data-notex",1)}),Z=M.ensureUniformFontSize(n,e.determineTextFont(G,W,O.font,{onPathbar:!0}));q.text(W._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(l.font,Z).call(_.convertToTspans,n),W.textBB=l.bBox(q.node()),W.transform=y(W,{fontSize:Z.size,onPathbar:!0}),W.transform.fontSize=Z.size,d?q.transition().attrTween("transform",function(J){var ne=E(J,r,C,[x,g]);return function(re){return w(ne(re))}}):q.attr("transform",w(W))})}},52583:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(63893),m=t(37210),f=t(96362).styleOne,o=t(43473),e=t(2791),i=t(83523),r=t(24714).formatSliceLabel,n=!1;$.exports=function(s,a,u,p,c){var x=c.width,g=c.height,h=c.viewX,b=c.viewY,v=c.pathSlice,y=c.toMoveInsideSlice,w=c.strTransform,d=c.hasTransition,S=c.handleSlicesExit,T=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,C=c.prevEntry,L=s._context.staticPlot,O=s._fullLayout,z=a[0].trace,G=z.textposition.indexOf("left")!==-1,I=z.textposition.indexOf("right")!==-1,H=z.textposition.indexOf("bottom")!==-1,N=!H&&!z.marker.pad.t||H&&!z.marker.pad.b,F=m(u,[x,g],{packing:z.tiling.packing,squarifyratio:z.tiling.squarifyratio,flipX:z.tiling.flip.indexOf("x")>-1,flipY:z.tiling.flip.indexOf("y")>-1,pad:{inner:z.tiling.pad,top:z.marker.pad.t,left:z.marker.pad.l,right:z.marker.pad.r,bottom:z.marker.pad.b}}).descendants(),V=1/0,W=-1/0;F.forEach(function(Z){var J=Z.depth;J>=z._maxDepth?(Z.x0=Z.x1=(Z.x0+Z.x1)/2,Z.y0=Z.y1=(Z.y0+Z.y1)/2):(V=Math.min(V,J),W=Math.max(W,J))}),p=p.data(F,e.getPtId),z._maxVisibleLayers=isFinite(W)?W-V+1:0,p.enter().append("g").classed("slice",!0),S(p,n,{},[x,g],v),p.order();var te=null;if(d&&C){var Q=e.getPtId(C);p.each(function(Z){te===null&&e.getPtId(Z)===Q&&(te={x0:Z.x0,x1:Z.x1,y0:Z.y0,y1:Z.y1})})}var X=function(){return te||{x0:0,x1:x,y0:0,y1:g}},q=p;return d&&(q=q.transition().each("end",function(){var Z=A.select(this);e.setSliceCursor(Z,s,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),q.each(function(Z){var J=e.isHeader(Z,z);Z._x0=h(Z.x0),Z._x1=h(Z.x1),Z._y0=b(Z.y0),Z._y1=b(Z.y1),Z._hoverX=h(Z.x1-z.marker.pad.r),Z._hoverY=b(H?Z.y1-z.marker.pad.b/2:Z.y0+z.marker.pad.t/2);var ne=A.select(this),re=M.ensureSingle(ne,"path","surface",function(de){de.style("pointer-events",L?"none":"all")});d?re.transition().attrTween("d",function(de){var xe=T(de,n,X(),[x,g]);return function(me){return v(xe(me))}}):re.attr("d",v),ne.call(i,u,s,a,{styleOne:f,eventDataKeys:o.eventDataKeys,transitionTime:o.CLICK_TRANSITION_TIME,transitionEasing:o.CLICK_TRANSITION_EASING}).call(e.setSliceCursor,s,{isTransitioning:s._transitioning}),re.call(f,Z,z,s,{hovered:!1}),Z.x0===Z.x1||Z.y0===Z.y1?Z._text="":Z._text=J?N?"":e.getPtLabel(Z)||"":r(Z,u,z,a,O)||"";var ae=M.ensureSingle(ne,"g","slicetext"),ue=M.ensureSingle(ae,"text","",function(de){de.attr("data-notex",1)}),he=M.ensureUniformFontSize(s,e.determineTextFont(z,Z,O.font));ue.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor",I?"end":G||J?"start":"middle").call(l.font,he).call(_.convertToTspans,s),Z.textBB=l.bBox(ue.node()),Z.transform=y(Z,{fontSize:he.size,isHeader:J}),Z.transform.fontSize=he.size,d?ue.transition().attrTween("transform",function(de){var xe=E(de,n,X(),[x,g]);return function(me){return w(xe(me))}}):ue.attr("transform",w(Z))}),te}},14102:function($){$.exports=function P(t,A,M){var l;M.swapXY&&(l=t.x0,t.x0=t.y0,t.y0=l,l=t.x1,t.x1=t.y1,t.y1=l),M.flipX&&(l=t.x0,t.x0=A[0]-t.x1,t.x1=A[0]-l),M.flipY&&(l=t.y0,t.y0=A[1]-t.y1,t.y1=A[1]-l);var _=t.children;if(_)for(var m=0;m<_.length;m++)P(_[m],A,M)}},70954:function($,P,t){$.exports={moduleType:"trace",name:"treemap",basePlotModule:t(78018),categories:[],animatable:!0,attributes:t(45802),layoutAttributes:t(55479),supplyDefaults:t(91174),supplyLayoutDefaults:t(77182),calc:t(65039).y,crossTraceCalc:t(65039).T,plot:t(5893),style:t(96362).style,colorbar:t(4898),meta:{}}},55479:function($){$.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77182:function($,P,t){var A=t(71828),M=t(55479);$.exports=function(l,_){function m(f,o){return A.coerce(l,_,M,f,o)}m("treemapcolorway",_.colorway),m("extendtreemapcolors")}},37210:function($,P,t){var A=t(674),M=t(14102);$.exports=function(l,_,m){var f,o=m.flipX,e=m.flipY,i=m.packing==="dice-slice",r=m.pad[e?"bottom":"top"],n=m.pad[o?"right":"left"],s=m.pad[o?"left":"right"],a=m.pad[e?"top":"bottom"];i&&(f=n,n=r,r=f,f=s,s=a,a=f);var u=A.treemap().tile(function(p,c){switch(p){case"squarify":return A.treemapSquarify.ratio(c);case"binary":return A.treemapBinary;case"dice":return A.treemapDice;case"slice":return A.treemapSlice;default:return A.treemapSliceDice}}(m.packing,m.squarifyratio)).paddingInner(m.pad.inner).paddingLeft(n).paddingRight(s).paddingTop(r).paddingBottom(a).size(i?[_[1],_[0]]:_)(l);return(i||o||e)&&M(u,_,{swapXY:i,flipX:o,flipY:e}),u}},5893:function($,P,t){var A=t(80694),M=t(52583);$.exports=function(l,_,m,f){return A(l,_,m,f,{type:"treemap",drawDescendants:M})}},46650:function($,P,t){var A=t(39898),M=t(81684).sX,l=t(2791),_=t(71828),m=t(97313).TEXTPAD,f=t(17295).toMoveInsideBar,o=t(72597).recordMinTextSize,e=t(43473),i=t(66209);function r(n){return l.isHierarchyRoot(n)?"":l.getPtId(n)}$.exports=function(n,s,a,u,p){var c=n._fullLayout,x=s[0],g=x.trace,h=g.type==="icicle",b=x.hierarchy,v=l.findEntryWithLevel(b,g.level),y=A.select(a),w=y.selectAll("g.pathbar"),d=y.selectAll("g.slice");if(!v)return w.remove(),void d.remove();var S=l.isHierarchyRoot(v),T=!c.uniformtext.mode&&l.hasTransition(u),E=l.getMaxDepth(g),C=c._size,L=g.domain,O=C.w*(L.x[1]-L.x[0]),z=C.h*(L.y[1]-L.y[0]),G=O,I=g.pathbar.thickness,H=g.marker.line.width+e.gapWithPathbar,N=g.pathbar.visible?g.pathbar.side.indexOf("bottom")>-1?z+H:-(I+H):0,F={x0:G,x1:G,y0:N,y1:N+I},V=function(ye,Pe,Re){var ze=g.tiling.pad,He=function(et){return et-ze<=Pe.x0},We=function(et){return et+ze>=Pe.x1},Je=function(et){return et-ze<=Pe.y0},lt=function(et){return et+ze>=Pe.y1};return ye.x0===Pe.x0&&ye.x1===Pe.x1&&ye.y0===Pe.y0&&ye.y1===Pe.y1?{x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1}:{x0:He(ye.x0-ze)?0:We(ye.x0-ze)?Re[0]:ye.x0,x1:He(ye.x1+ze)?0:We(ye.x1+ze)?Re[0]:ye.x1,y0:Je(ye.y0-ze)?0:lt(ye.y0-ze)?Re[1]:ye.y0,y1:Je(ye.y1+ze)?0:lt(ye.y1+ze)?Re[1]:ye.y1}},W=null,te={},Q={},X=null,q=function(ye,Pe){return Pe?te[r(ye)]:Q[r(ye)]};x.hasMultipleRoots&&S&&E++,g._maxDepth=E,g._backgroundColor=c.paper_bgcolor,g._entryDepth=v.data.depth,g._atRootLevel=S;var Z=-O/2+C.l+C.w*(L.x[1]+L.x[0])/2,J=-z/2+C.t+C.h*(1-(L.y[1]+L.y[0])/2),ne=function(ye){return Z+ye},re=function(ye){return J+ye},ae=re(0),ue=ne(0),he=function(ye){return ue+ye},de=function(ye){return ae+ye};function xe(ye,Pe){return ye+","+Pe}var me=he(0),ve=function(ye){ye.x=Math.max(me,ye.x)},Le=g.pathbar.edgeshape,Ae=g[h?"tiling":"marker"].pad,we=function(ye){return g.textposition.indexOf(ye)!==-1},se=we("top"),oe=we("left"),fe=we("right"),Se=we("bottom"),Me=function(ye,Pe){var Re=ye.x0,ze=ye.x1,He=ye.y0,We=ye.y1,Je=ye.textBB,lt=se||Pe.isHeader&&!Se?"start":Se?"end":"middle",et=we("right"),yt=we("left")||Pe.onPathbar?-1:et?1:0;if(Pe.isHeader){if((Re+=(h?Ae:Ae.l)-m)>=(ze-=(h?Ae:Ae.r)-m)){var _t=(Re+ze)/2;Re=_t,ze=_t}var xt;Se?He<(xt=We-(h?Ae:Ae.b))&&xt<We&&(He=xt):He<(xt=He+(h?Ae:Ae.t))&&xt<We&&(We=xt)}var at=f(Re,ze,He,We,Je,{isHorizontal:!1,constrained:!0,angle:0,anchor:lt,leftToRight:yt});return at.fontSize=Pe.fontSize,at.targetX=ne(at.targetX),at.targetY=re(at.targetY),isNaN(at.targetX)||isNaN(at.targetY)?{}:(Re!==ze&&He!==We&&o(g.type,at,c),{scale:at.scale,rotate:at.rotate,textX:at.textX,textY:at.textY,anchorX:at.anchorX,anchorY:at.anchorY,targetX:at.targetX,targetY:at.targetY})},be=function(ye,Pe){for(var Re,ze=0,He=ye;!Re&&ze<E;)ze++,(He=He.parent)?Re=q(He,Pe):ze=E;return Re||{}},Ie=function(ye,Pe,Re,ze,He){var We,Je=q(ye,Pe);if(Je)We=Je;else if(Pe)We=F;else if(W)if(ye.parent){var lt=X||Re;lt&&!Pe?We=V(ye,lt,ze):(We={},_.extendFlat(We,be(ye,Pe)))}else We=_.extendFlat({},ye),h&&(He.orientation==="h"?He.flipX?We.x0=ye.x1:We.x1=0:He.flipY?We.y0=ye.y1:We.y1=0);else We={};return M(We,{x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1})},Be=function(ye,Pe,Re,ze){var He=q(ye,Pe),We={},Je=function(et,yt,_t,xt){if(yt)return te[r(b)]||F;var at=Q[g.level]||_t;return function(ot){return ot.data.depth-v.data.depth<E}(et)?V(et,at,xt):{}}(ye,Pe,Re,ze);_.extendFlat(We,{transform:Me({x0:Je.x0,x1:Je.x1,y0:Je.y0,y1:Je.y1,textBB:ye.textBB,_text:ye._text},{isHeader:l.isHeader(ye,g)})}),He?We=He:ye.parent&&_.extendFlat(We,be(ye,Pe));var lt=ye.transform;return ye.x0!==ye.x1&&ye.y0!==ye.y1&&o(g.type,lt,c),M(We,{transform:{scale:lt.scale,rotate:lt.rotate,textX:lt.textX,textY:lt.textY,anchorX:lt.anchorX,anchorY:lt.anchorY,targetX:lt.targetX,targetY:lt.targetY}})},ce=function(ye,Pe,Re,ze,He){var We=ze[0],Je=ze[1];T?ye.exit().transition().each(function(){var lt=A.select(this);lt.select("path.surface").transition().attrTween("d",function(et){var yt=function(_t,xt,at,ot){var At,Ct=q(_t,xt);if(xt)At=F;else{var zt=q(v,xt);At=zt?V(_t,zt,ot):{}}return M(Ct,At)}(et,Pe,0,[We,Je]);return function(_t){return He(yt(_t))}}),lt.select("g.slicetext").attr("opacity",0)}).remove():ye.exit().remove()},Te=function(ye){var Pe=ye.transform;return ye.x0!==ye.x1&&ye.y0!==ye.y1&&o(g.type,Pe,c),_.getTextTransform({textX:Pe.textX,textY:Pe.textY,anchorX:Pe.anchorX,anchorY:Pe.anchorY,targetX:Pe.targetX,targetY:Pe.targetY,scale:Pe.scale,rotate:Pe.rotate})};T&&(w.each(function(ye){te[r(ye)]={x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1},ye.transform&&(te[r(ye)].transform={textX:ye.transform.textX,textY:ye.transform.textY,anchorX:ye.transform.anchorX,anchorY:ye.transform.anchorY,targetX:ye.transform.targetX,targetY:ye.transform.targetY,scale:ye.transform.scale,rotate:ye.transform.rotate})}),d.each(function(ye){Q[r(ye)]={x0:ye.x0,x1:ye.x1,y0:ye.y0,y1:ye.y1},ye.transform&&(Q[r(ye)].transform={textX:ye.transform.textX,textY:ye.transform.textY,anchorX:ye.transform.anchorX,anchorY:ye.transform.anchorY,targetX:ye.transform.targetX,targetY:ye.transform.targetY,scale:ye.transform.scale,rotate:ye.transform.rotate}),!W&&l.isEntry(ye)&&(W=ye)})),X=p(n,s,v,d,{width:O,height:z,viewX:ne,viewY:re,pathSlice:function(ye){var Pe=ne(ye.x0),Re=ne(ye.x1),ze=re(ye.y0),He=re(ye.y1),We=Re-Pe,Je=He-ze;if(!We||!Je)return"";var lt=g.marker.cornerradius||0,et=Math.min(lt,We/2,Je/2);et&&ye.data&&ye.data.data&&ye.data.data.label&&(se&&(et=Math.min(et,Ae.t)),oe&&(et=Math.min(et,Ae.l)),fe&&(et=Math.min(et,Ae.r)),Se&&(et=Math.min(et,Ae.b)));var yt=function(_t,xt){return et?"a"+xe(et,et)+" 0 0 1 "+xe(_t,xt):""};return"M"+xe(Pe,ze+et)+yt(et,-et)+"L"+xe(Re-et,ze)+yt(et,et)+"L"+xe(Re,He-et)+yt(-et,et)+"L"+xe(Pe+et,He)+yt(-et,-et)+"Z"},toMoveInsideSlice:Me,prevEntry:W,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Be,handleSlicesExit:ce,hasTransition:T,strTransform:Te}),g.pathbar.visible?i(n,s,v,w,{barDifY:N,width:G,height:I,viewX:he,viewY:de,pathSlice:function(ye){var Pe=he(Math.max(Math.min(ye.x0,ye.x0),0)),Re=he(Math.min(Math.max(ye.x1,ye.x1),G)),ze=de(ye.y0),He=de(ye.y1),We=I/2,Je={},lt={};Je.x=Pe,lt.x=Re,Je.y=lt.y=(ze+He)/2;var et={x:Pe,y:ze},yt={x:Re,y:ze},_t={x:Re,y:He},xt={x:Pe,y:He};return Le===">"?(et.x-=We,yt.x-=We,_t.x-=We,xt.x-=We):Le==="/"?(_t.x-=We,xt.x-=We,Je.x-=We/2,lt.x-=We/2):Le==="\\"?(et.x-=We,yt.x-=We,Je.x-=We/2,lt.x-=We/2):Le==="<"&&(Je.x-=We,lt.x-=We),ve(et),ve(xt),ve(Je),ve(yt),ve(_t),ve(lt),"M"+xe(et.x,et.y)+"L"+xe(yt.x,yt.y)+"L"+xe(lt.x,lt.y)+"L"+xe(_t.x,_t.y)+"L"+xe(xt.x,xt.y)+"L"+xe(Je.x,Je.y)+"Z"},toMoveInsideSlice:Me,makeUpdateSliceInterpolator:Ie,makeUpdateTextInterpolator:Be,handleSlicesExit:ce,hasTransition:T,strTransform:Te}):w.remove()}},96362:function($,P,t){var A=t(39898),M=t(7901),l=t(71828),_=t(2791),m=t(72597).resizeText,f=t(43467);function o(e,i,r,n,s){var a,u,p=(s||{}).hovered,c=i.data.data,x=c.i,g=c.color,h=_.isHierarchyRoot(i),b=1;if(p)a=r._hovered.marker.line.color,u=r._hovered.marker.line.width;else if(h&&g===r.root.color)b=100,a="rgba(0,0,0,0)",u=0;else if(a=l.castOption(r,x,"marker.line.color")||M.defaultLine,u=l.castOption(r,x,"marker.line.width")||0,!r._hasColorscale&&!i.onPathbar){var v=r.marker.depthfade;if(v){var y,w=M.combine(M.addOpacity(r._backgroundColor,.75),g);if(v===!0){var d=_.getMaxDepth(r);y=isFinite(d)?_.isLeaf(i)?0:r._maxVisibleLayers-(i.data.depth-r._entryDepth):i.data.height+1}else y=i.data.depth-r._entryDepth,r._atRootLevel||y++;if(y>0)for(var S=0;S<y;S++){var T=.5*S/y;g=M.combine(M.addOpacity(w,T),g)}}}e.call(f,i,r,n,g).style("stroke-width",u).call(M.stroke,a).style("opacity",b)}$.exports={style:function(e){var i=e._fullLayout._treemaplayer.selectAll(".trace");m(e,i,"treemap"),i.each(function(r){var n=A.select(this),s=r[0].trace;n.style("opacity",s.opacity),n.selectAll("path.surface").each(function(a){A.select(this).call(o,a,s,e,{hovered:!1})})})},styleOne:o}},68875:function($,P,t){var A=t(53522),M=t(1426).extendFlat,l=t(12663).axisHoverFormat;$.exports={y:A.y,x:A.x,x0:A.x0,y0:A.y0,xhoverformat:l("x"),yhoverformat:l("y"),name:M({},A.name,{}),orientation:M({},A.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:A.fillcolor,points:M({},A.boxpoints,{}),jitter:M({},A.jitter,{}),pointpos:M({},A.pointpos,{}),width:M({},A.width,{}),marker:A.marker,text:A.text,hovertext:A.hovertext,hovertemplate:A.hovertemplate,quartilemethod:A.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup,selected:A.selected,unselected:A.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},38603:function($,P,t){var A=t(71828),M=t(89298),l=t(48518),_=t(60168),m=t(50606).BADNUM;function f(e,i,r){var n=i.max-i.min;if(!n)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,n/1e4);var s=r.length,a=A.stdev(r,s-1,i.mean);return Math.max(function(u,p,c){return 1.059*Math.min(p,c/1.349)*Math.pow(u,-.2)}(s,a,i.q3-i.q1),n/100)}function o(e,i,r,n){var s,a=e.spanmode,u=e.span||[],p=[i.min,i.max],c=[i.min-2*n,i.max+2*n];function x(h){var b=u[h],v=r.type==="multicategory"?r.r2c(b):r.d2c(b,0,e[i.valLetter+"calendar"]);return v===m?c[h]:v}var g={type:"linear",range:s=a==="soft"?c:a==="hard"?p:[x(0),x(1)]};return M.setConvert(g),g.cleanRange(),s}$.exports=function(e,i){var r=l(e,i);if(r[0].t.empty)return r;for(var n=e._fullLayout,s=M.getFromId(e,i[i.orientation==="h"?"xaxis":"yaxis"]),a=1/0,u=-1/0,p=0,c=0,x=0;x<r.length;x++){var g=r[x],h=g.pts.map(_.extractVal),b=g.bandwidth=f(i,g,h),v=g.span=o(i,g,s,b);if(g.min===g.max&&b===0)v=g.span=[g.min,g.max],g.density=[{v:1,t:v[0]}],g.bandwidth=b,p=Math.max(p,1);else{var y=v[1]-v[0],w=Math.ceil(y/(b/3)),d=y/w;if(!isFinite(d)||!isFinite(w))return A.error("Something went wrong with computing the violin span"),r[0].t.empty=!0,r;var S=_.makeKDE(g,i,h);g.density=new Array(w);for(var T=0,E=v[0];E<v[1]+d/2;T++,E+=d){var C=S(E);g.density[T]={v:C,t:E},p=Math.max(p,C)}}c=Math.max(c,h.length),a=Math.min(a,v[0]),u=Math.max(u,v[1])}var L=M.findExtremes(s,[a,u],{padded:!0});if(i._extremes[s._id]=L,i.width)r[0].t.maxKDE=p;else{var O=n._violinScaleGroupStats,z=i.scalegroup,G=O[z];G?(G.maxKDE=Math.max(G.maxKDE,p),G.maxCount=Math.max(G.maxCount,c)):O[z]={maxKDE:p,maxCount:c}}return r[0].t.labels.kde=A._(e,"kde:"),r}},86403:function($,P,t){var A=t(37188).setPositionOffset,M=["v","h"];$.exports=function(l,_){for(var m=l.calcdata,f=_.xaxis,o=_.yaxis,e=0;e<M.length;e++){for(var i=M[e],r=i==="h"?o:f,n=[],s=0;s<m.length;s++){var a=m[s],u=a[0].t,p=a[0].trace;p.visible!==!0||p.type!=="violin"||u.empty||p.orientation!==i||p.xaxis!==f._id||p.yaxis!==o._id||n.push(s)}A("violin",l,n,r)}}},15899:function($,P,t){var A=t(71828),M=t(7901),l=t(36411),_=t(68875);$.exports=function(m,f,o,e){function i(y,w){return A.coerce(m,f,_,y,w)}function r(y,w){return A.coerce2(m,f,_,y,w)}if(l.handleSampleDefaults(m,f,i,e),f.visible!==!1){i("bandwidth"),i("side"),i("width")||(i("scalegroup",f.name),i("scalemode"));var n,s=i("span");Array.isArray(s)&&(n="manual"),i("spanmode",n);var a=i("line.color",(m.marker||{}).color||o),u=i("line.width"),p=i("fillcolor",M.addOpacity(f.line.color,.5));l.handlePointsDefaults(m,f,i,{prefix:""});var c=r("box.width"),x=r("box.fillcolor",p),g=r("box.line.color",a),h=r("box.line.width",u);i("box.visible",!!(c||x||g||h))||(f.box={visible:!1});var b=r("meanline.color",a),v=r("meanline.width",u);i("meanline.visible",!!(b||v))||(f.meanline={visible:!1}),i("quartilemethod")}}},60168:function($,P,t){var A=t(71828),M=function(l){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*l*l)};P.makeKDE=function(l,_,m){var f=m.length,o=M,e=l.bandwidth,i=1/(f*e);return function(r){for(var n=0,s=0;s<f;s++)n+=o((r-m[s])/e);return i*n}},P.getPositionOnKdePath=function(l,_,m){var f,o;_.orientation==="h"?(f="y",o="x"):(f="x",o="y");var e=A.findPointOnPath(l.path,m,o,{pathLength:l.pathLength}),i=l.posCenterPx,r=e[f];return[r,_.side==="both"?2*i-r:i]},P.getKdeValue=function(l,_,m){var f=l.pts.map(P.extractVal);return P.makeKDE(l,_,f)(m)/l.posDensityScale},P.extractVal=function(l){return l.v}},57634:function($,P,t){var A=t(7901),M=t(71828),l=t(89298),_=t(41868),m=t(60168);$.exports=function(f,o,e,i,r){r||(r={});var n,s,a=r.hoverLayer,u=f.cd,p=u[0].trace,c=p.hoveron,x=c.indexOf("violins")!==-1,g=c.indexOf("kde")!==-1,h=[];if(x||g){var b=_.hoverOnBoxes(f,o,e,i);if(g&&b.length>0){var v,y,w,d,S,T=f.xa,E=f.ya;p.orientation==="h"?(S=o,v="y",w=E,y="x",d=T):(S=e,v="x",w=T,y="y",d=E);var C=u[f.index];if(S>=C.span[0]&&S<=C.span[1]){var L=M.extendFlat({},f),O=d.c2p(S,!0),z=m.getKdeValue(C,p,S),G=m.getPositionOnKdePath(C,p,O),I=w._offset,H=w._length;L[v+"0"]=G[0],L[v+"1"]=G[1],L[y+"0"]=L[y+"1"]=O,L[y+"Label"]=y+": "+l.hoverLabelText(d,S,p[y+"hoverformat"])+", "+u[0].t.labels.kde+" "+z.toFixed(3);for(var N=0,F=0;F<b.length;F++)if(b[F].attr==="med"){N=F;break}L.spikeDistance=b[N].spikeDistance;var V=v+"Spike";L[V]=b[N][V],b[N].spikeDistance=void 0,b[N][V]=void 0,L.hovertemplate=!1,h.push(L),(s={})[v+"1"]=M.constrain(I+G[0],I,I+H),s[v+"2"]=M.constrain(I+G[1],I,I+H),s[y+"1"]=s[y+"2"]=d._offset+O}}x&&(h=h.concat(b))}c.indexOf("points")!==-1&&(n=_.hoverOnPoints(f,o,e));var W=a.selectAll(".violinline-"+p.uid).data(s?[0]:[]);return W.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),W.exit().remove(),W.attr(s).call(A.stroke,f.color),i==="closest"?n?[n]:h:(n&&h.push(n),h)}},47462:function($,P,t){$.exports={attributes:t(68875),layoutAttributes:t(9228),supplyDefaults:t(15899),crossTraceDefaults:t(36411).crossTraceDefaults,supplyLayoutDefaults:t(33598),calc:t(38603),crossTraceCalc:t(86403),plot:t(28443),style:t(31847),styleOnSelect:t(16296).styleOnSelect,hoverPoints:t(57634),selectPoints:t(24626),moduleType:"trace",name:"violin",basePlotModule:t(93612),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},9228:function($,P,t){var A=t(40094),M=t(71828).extendFlat;$.exports={violinmode:M({},A.boxmode,{}),violingap:M({},A.boxgap,{}),violingroupgap:M({},A.boxgroupgap,{})}},33598:function($,P,t){var A=t(71828),M=t(9228),l=t(4199);$.exports=function(_,m,f){l._supply(_,m,f,function(o,e){return A.coerce(_,m,M,o,e)},"violin")}},28443:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(86047),m=t(34621),f=t(60168);$.exports=function(o,e,i,r){var n=o._context.staticPlot,s=o._fullLayout,a=e.xaxis,u=e.yaxis;function p(c,x){var g=m(c,{xaxis:a,yaxis:u,trace:x,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return l.smoothopen(g[0],1)}M.makeTraceGroups(r,i,"trace violins").each(function(c){var x=A.select(this),g=c[0],h=g.t,b=g.trace;if(b.visible!==!0||h.empty)x.remove();else{var v=h.bPos,y=h.bdPos,w=e[h.valLetter+"axis"],d=e[h.posLetter+"axis"],S=b.side==="both",T=S||b.side==="positive",E=S||b.side==="negative",C=x.selectAll("path.violin").data(M.identity);C.enter().append("path").style("vector-effect",n?"none":"non-scaling-stroke").attr("class","violin"),C.exit().remove(),C.each(function(F){var V,W,te,Q,X,q,Z,J,ne=A.select(this),re=F.density,ae=re.length,ue=d.c2l(F.pos+v,!0),he=d.l2p(ue);if(b.width)V=h.maxKDE/y;else{var de=s._violinScaleGroupStats[b.scalegroup];V=b.scalemode==="count"?de.maxKDE/y*(de.maxCount/F.pts.length):de.maxKDE/y}if(T){for(Z=new Array(ae),X=0;X<ae;X++)(J=Z[X]={})[h.posLetter]=ue+re[X].v/V,J[h.valLetter]=w.c2l(re[X].t,!0);W=p(Z,b)}if(E){for(Z=new Array(ae),q=0,X=ae-1;q<ae;q++,X--)(J=Z[q]={})[h.posLetter]=ue-re[X].v/V,J[h.valLetter]=w.c2l(re[X].t,!0);te=p(Z,b)}if(S)Q=W+"L"+te.substr(1)+"Z";else{var xe=[he,w.c2p(re[0].t)],me=[he,w.c2p(re[ae-1].t)];b.orientation==="h"&&(xe.reverse(),me.reverse()),Q=T?"M"+xe+"L"+W.substr(1)+"L"+me:"M"+me+"L"+te.substr(1)+"L"+xe}ne.attr("d",Q),F.posCenterPx=he,F.posDensityScale=V*y,F.path=ne.node(),F.pathLength=F.path.getTotalLength()/(S?2:1)});var L,O,z,G=b.box,I=G.width,H=(G.line||{}).width;S?(L=y*I,O=0):T?(L=[0,y*I/2],O=H*{x:1,y:-1}[h.posLetter]):(L=[y*I/2,0],O=H*{x:-1,y:1}[h.posLetter]),_.plotBoxAndWhiskers(x,{pos:d,val:w},b,{bPos:v,bdPos:L,bPosPxOffset:O}),_.plotBoxMean(x,{pos:d,val:w},b,{bPos:v,bdPos:L,bPosPxOffset:O}),!b.box.visible&&b.meanline.visible&&(z=M.identity);var N=x.selectAll("path.meanline").data(z||[]);N.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",n?"none":"non-scaling-stroke"),N.exit().remove(),N.each(function(F){var V=w.c2p(F.mean,!0),W=f.getPositionOnKdePath(F,b,V);A.select(this).attr("d",b.orientation==="h"?"M"+V+","+W[0]+"V"+W[1]:"M"+W[0]+","+V+"H"+W[1])}),_.plotPoints(x,{x:a,y:u},b,h)}})}},31847:function($,P,t){var A=t(39898),M=t(7901),l=t(16296).stylePoints;$.exports=function(_){var m=A.select(_).selectAll("g.trace.violins");m.style("opacity",function(f){return f[0].trace.opacity}),m.each(function(f){var o=f[0].trace,e=A.select(this),i=o.box||{},r=i.line||{},n=o.meanline||{},s=n.width;e.selectAll("path.violin").style("stroke-width",o.line.width+"px").call(M.stroke,o.line.color).call(M.fill,o.fillcolor),e.selectAll("path.box").style("stroke-width",r.width+"px").call(M.stroke,r.color).call(M.fill,i.fillcolor);var a={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};e.selectAll("path.mean").style(a).call(M.stroke,n.color),e.selectAll("path.meanline").style(a).call(M.stroke,n.color),l(e,o,_)})}},16336:function($,P,t){var A=t(50693),M=t(16249),l=t(54532),_=t(9012),m=t(1426).extendFlat,f=t(30962).overrideAll,o=$.exports=f(m({x:M.x,y:M.y,z:M.z,value:M.value,isomin:M.isomin,isomax:M.isomax,surface:M.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:M.slices,caps:M.caps,text:M.text,hovertext:M.hovertext,xhoverformat:M.xhoverformat,yhoverformat:M.yhoverformat,zhoverformat:M.zhoverformat,valuehoverformat:M.valuehoverformat,hovertemplate:M.hovertemplate},A("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:M.colorbar,opacity:M.opacity,opacityscale:l.opacityscale,lightposition:M.lightposition,lighting:M.lighting,flatshading:M.flatshading,contour:M.contour,hoverinfo:m({},_.hoverinfo),showlegend:m({},_.showlegend,{dflt:!1})}),"calc","nested");o.x.editType=o.y.editType=o.z.editType=o.value.editType="calc+clearAxisTypes",o.transforms=void 0},64809:function($,P,t){var A=t(9330).gl_mesh3d,M=t(81697).parseColorScale,l=t(78614),_=t(21081).extractOpts,m=t(90060),f=t(22674).findNearestOnAxis,o=t(22674).generateIsoMeshes;function e(r,n,s){this.scene=r,this.uid=s,this.mesh=n,this.name="",this.data=null,this.showContour=!1}var i=e.prototype;i.handlePick=function(r){if(r.object===this.mesh){var n=r.data.index,s=this.data._meshX[n],a=this.data._meshY[n],u=this.data._meshZ[n],p=this.data._Ys.length,c=this.data._Zs.length,x=f(s,this.data._Xs).id,g=f(a,this.data._Ys).id,h=f(u,this.data._Zs).id,b=r.index=h+c*g+c*p*x;r.traceCoordinate=[this.data._meshX[b],this.data._meshY[b],this.data._meshZ[b],this.data._value[b]];var v=this.data.hovertext||this.data.text;return Array.isArray(v)&&v[b]!==void 0?r.textLabel=v[b]:v&&(r.textLabel=v),!0}},i.update=function(r){var n=this.scene,s=n.fullSceneLayout;function a(c,x,g,h){return x.map(function(b){return c.d2l(b,0,h)*g})}this.data=o(r);var u={positions:m(a(s.xaxis,r._meshX,n.dataScale[0],r.xcalendar),a(s.yaxis,r._meshY,n.dataScale[1],r.ycalendar),a(s.zaxis,r._meshZ,n.dataScale[2],r.zcalendar)),cells:m(r._meshI,r._meshJ,r._meshK),lightPosition:[r.lightposition.x,r.lightposition.y,r.lightposition.z],ambient:r.lighting.ambient,diffuse:r.lighting.diffuse,specular:r.lighting.specular,roughness:r.lighting.roughness,fresnel:r.lighting.fresnel,vertexNormalsEpsilon:r.lighting.vertexnormalsepsilon,faceNormalsEpsilon:r.lighting.facenormalsepsilon,opacity:r.opacity,opacityscale:r.opacityscale,contourEnable:r.contour.show,contourColor:l(r.contour.color).slice(0,3),contourWidth:r.contour.width,useFacetNormals:r.flatshading},p=_(r);u.vertexIntensity=r._meshIntensity,u.vertexIntensityBounds=[p.min,p.max],u.colormap=M(r),this.mesh.update(u)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},$.exports=function(r,n){var s=r.glplot.gl,a=A({gl:s}),u=new e(r,a,n.uid);return a._trace=u,u.update(n),r.glplot.add(a),u}},47651:function($,P,t){var A=t(71828),M=t(16336),l=t(82738).supplyIsoDefaults,_=t(91831).opacityscaleDefaults;$.exports=function(m,f,o,e){function i(r,n){return A.coerce(m,f,M,r,n)}l(m,f,o,e,i),_(m,f,e,i)}},17659:function($,P,t){$.exports={attributes:t(16336),supplyDefaults:t(47651),calc:t(56959),colorbar:{min:"cmin",max:"cmax"},plot:t(64809),moduleType:"trace",name:"volume",basePlotModule:t(58547),categories:["gl3d","showLegend"],meta:{}}},43037:function($,P,t){var A=t(1486),M=t(82196).line,l=t(9012),_=t(12663).axisHoverFormat,m=t(5386).fF,f=t(5386).si,o=t(48334),e=t(1426).extendFlat,i=t(7901);function r(n){return{marker:{color:e({},A.marker.color,{arrayOk:!1,editType:"style"}),line:{color:e({},A.marker.line.color,{arrayOk:!1,editType:"style"}),width:e({},A.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}$.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:A.x,x0:A.x0,dx:A.dx,y:A.y,y0:A.y0,dy:A.dy,xperiod:A.xperiod,yperiod:A.yperiod,xperiod0:A.xperiod0,yperiod0:A.yperiod0,xperiodalignment:A.xperiodalignment,yperiodalignment:A.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:A.hovertext,hovertemplate:m({},{keys:o.eventDataKeys}),hoverinfo:e({},l.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:f({editType:"plot"},{keys:o.eventDataKeys.concat(["label"])}),text:A.text,textposition:A.textposition,insidetextanchor:A.insidetextanchor,textangle:A.textangle,textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:A.outsidetextfont,constraintext:A.constraintext,cliponaxis:A.cliponaxis,orientation:A.orientation,offset:A.offset,width:A.width,increasing:r(),decreasing:r(),totals:r(),connector:{line:{color:e({},M.color,{dflt:i.defaultLine}),width:e({},M.width,{editType:"plot"}),dash:M.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:A.offsetgroup,alignmentgroup:A.alignmentgroup}},52752:function($,P,t){var A=t(89298),M=t(42973),l=t(71828).mergeArray,_=t(66279),m=t(50606).BADNUM;function f(e){return e==="a"||e==="absolute"}function o(e){return e==="t"||e==="total"}$.exports=function(e,i){var r,n,s,a,u,p,c=A.getFromId(e,i.xaxis||"x"),x=A.getFromId(e,i.yaxis||"y");i.orientation==="h"?(r=c.makeCalcdata(i,"x"),s=x.makeCalcdata(i,"y"),a=M(i,x,"y",s),u=!!i.yperiodalignment,p="y"):(r=x.makeCalcdata(i,"y"),s=c.makeCalcdata(i,"x"),a=M(i,c,"x",s),u=!!i.xperiodalignment,p="x"),n=a.vals;for(var g,h=Math.min(n.length,r.length),b=new Array(h),v=0,y=!1,w=0;w<h;w++){var d=r[w]||0,S=!1;(r[w]!==m||o(i.measure[w])||f(i.measure[w]))&&w+1<h&&(r[w+1]!==m||o(i.measure[w+1])||f(i.measure[w+1]))&&(S=!0);var T=b[w]={i:w,p:n[w],s:d,rawS:d,cNext:S};f(i.measure[w])?(v=T.s,T.isSum=!0,T.dir="totals",T.s=v):o(i.measure[w])?(T.isSum=!0,T.dir="totals",T.s=v):(T.isSum=!1,T.dir=T.rawS<0?"decreasing":"increasing",g=T.s,T.s=v+g,v+=g),T.dir==="totals"&&(y=!0),u&&(b[w].orig_p=s[w],b[w][p+"End"]=a.ends[w],b[w][p+"Start"]=a.starts[w]),i.ids&&(T.id=String(i.ids[w])),T.v=(i.base||0)+v}return b.length&&(b[0].hasTotals=y),l(i.text,b,"tx"),l(i.hovertext,b,"htx"),_(b,i),b}},48334:function($){$.exports={eventDataKeys:["initial","delta","final"]}},70766:function($,P,t){var A=t(11661).setGroupPositions;$.exports=function(M,l){var _,m,f=M._fullLayout,o=M._fullData,e=M.calcdata,i=l.xaxis,r=l.yaxis,n=[],s=[],a=[];for(m=0;m<o.length;m++){var u=o[m];u.visible===!0&&u.xaxis===i._id&&u.yaxis===r._id&&u.type==="waterfall"&&(_=e[m],u.orientation==="h"?a.push(_):s.push(_),n.push(_))}var p={mode:f.waterfallmode,norm:f.waterfallnorm,gap:f.waterfallgap,groupgap:f.waterfallgroupgap};for(A(M,i,r,s,p),A(M,r,i,a,p),m=0;m<n.length;m++){_=n[m];for(var c=0;c<_.length;c++){var x=_[c];x.isSum===!1&&(x.s0+=c===0?0:_[c-1].s),c+1<_.length&&(_[c].nextP0=_[c+1].p0,_[c].nextS0=_[c+1].s0)}}}},83266:function($,P,t){var A=t(71828),M=t(26125),l=t(90769).handleText,_=t(67513),m=t(73927),f=t(43037),o=t(7901),e=t(22372),i=e.INCREASING.COLOR,r=e.DECREASING.COLOR;function n(s,a,u){s(a+".marker.color",u),s(a+".marker.line.color",o.defaultLine),s(a+".marker.line.width")}$.exports={supplyDefaults:function(s,a,u,p){function c(g,h){return A.coerce(s,a,f,g,h)}if(_(s,a,p,c)){m(s,a,p,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",a.x&&!a.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var x=c("textposition");l(s,a,p,c,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a.textposition!=="none"&&(c("texttemplate"),a.texttemplate||c("textinfo")),n(c,"increasing",i),n(c,"decreasing",r),n(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash")))}else a.visible=!1},crossTraceDefaults:function(s,a){var u,p;function c(g){return A.coerce(p._input,p,f,g)}if(a.waterfallmode==="group")for(var x=0;x<s.length;x++)u=(p=s[x])._input,M(u,p,a,c)}}},58593:function($){$.exports=function(P,t){return P.x="xVal"in t?t.xVal:t.x,P.y="yVal"in t?t.yVal:t.y,"initial"in t&&(P.initial=t.initial),"delta"in t&&(P.delta=t.delta),"final"in t&&(P.final=t.final),t.xa&&(P.xaxis=t.xa),t.ya&&(P.yaxis=t.ya),P}},61326:function($,P,t){var A=t(89298).hoverLabelText,M=t(7901).opacity,l=t(95423).hoverOnBars,_=t(22372),m=_.INCREASING.SYMBOL,f=_.DECREASING.SYMBOL;$.exports=function(o,e,i,r,n){var s=l(o,e,i,r,n);if(s){var a=s.cd,u=a[0].trace,p=u.orientation==="h",c=p?"x":"y",x=p?o.xa:o.ya,g=a[s.index],h=g.isSum?g.b+g.s:g.rawS;s.initial=g.b+g.s-h,s.delta=h,s.final=s.initial+s.delta;var b=T(Math.abs(s.delta));s.deltaLabel=h<0?"("+b+")":b,s.finalLabel=T(s.final),s.initialLabel=T(s.initial);var v=g.hi||u.hoverinfo,y=[];if(v&&v!=="none"&&v!=="skip"){var w=v==="all",d=v.split("+"),S=function(E){return w||d.indexOf(E)!==-1};g.isSum||(!S("final")||S(p?"x":"y")||y.push(s.finalLabel),S("delta")&&(h<0?y.push(s.deltaLabel+" "+f):y.push(s.deltaLabel+" "+m)),S("initial")&&y.push("Initial: "+s.initialLabel))}return y.length&&(s.extraText=y.join("<br>")),s.color=function(E,C){var L=E[C.dir].marker,O=L.color,z=L.line.color,G=L.line.width;return M(O)?O:M(z)&&G?z:void 0}(u,g),[s]}function T(E){return A(x,E,u[c+"hoverformat"])}}},19990:function($,P,t){$.exports={attributes:t(43037),layoutAttributes:t(13494),supplyDefaults:t(83266).supplyDefaults,crossTraceDefaults:t(83266).crossTraceDefaults,supplyLayoutDefaults:t(5176),calc:t(52752),crossTraceCalc:t(70766),plot:t(30436),style:t(55750).style,hoverPoints:t(61326),eventData:t(58593),selectPoints:t(81974),moduleType:"trace",name:"waterfall",basePlotModule:t(93612),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},13494:function($){$.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},5176:function($,P,t){var A=t(71828),M=t(13494);$.exports=function(l,_,m){var f=!1;function o(r,n){return A.coerce(l,_,M,r,n)}for(var e=0;e<m.length;e++){var i=m[e];if(i.visible&&i.type==="waterfall"){f=!0;break}}f&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},30436:function($,P,t){var A=t(39898),M=t(71828),l=t(91424),_=t(50606).BADNUM,m=t(17295),f=t(72597).clearMinTextSize;$.exports=function(o,e,i,r){var n=o._fullLayout;f("waterfall",n),m.plot(o,e,i,r,{mode:n.waterfallmode,norm:n.waterfallmode,gap:n.waterfallgap,groupgap:n.waterfallgroupgap}),function(s,a,u,p){var c=a.xaxis,x=a.yaxis;M.makeTraceGroups(p,u,"trace bars").each(function(g){var h=A.select(this),b=g[0].trace,v=M.ensureSingle(h,"g","lines");if(b.connector&&b.connector.visible){var y=b.orientation==="h",w=b.connector.mode,d=v.selectAll("g.line").data(M.identity);d.enter().append("g").classed("line",!0),d.exit().remove();var S=d.size();d.each(function(T,E){if(E===S-1||T.cNext){var C=function(G,I,H,N){var F=[],V=[],W=N?I:H,te=N?H:I;return F[0]=W.c2p(G.s0,!0),V[0]=te.c2p(G.p0,!0),F[1]=W.c2p(G.s1,!0),V[1]=te.c2p(G.p1,!0),F[2]=W.c2p(G.nextS0,!0),V[2]=te.c2p(G.nextP0,!0),N?[F,V]:[V,F]}(T,c,x,y),L=C[0],O=C[1],z="";L[0]!==_&&O[0]!==_&&L[1]!==_&&O[1]!==_&&(w==="spanning"&&!T.isSum&&E>0&&(z+=y?"M"+L[0]+","+O[1]+"V"+O[0]:"M"+L[1]+","+O[0]+"H"+L[0]),w!=="between"&&(T.isSum||E<S-1)&&(z+=y?"M"+L[1]+","+O[0]+"V"+O[1]:"M"+L[0]+","+O[1]+"H"+L[1]),L[2]!==_&&O[2]!==_&&(z+=y?"M"+L[1]+","+O[1]+"V"+O[2]:"M"+L[1]+","+O[1]+"H"+L[2])),z===""&&(z="M0,0Z"),M.ensureSingle(A.select(this),"path").attr("d",z).call(l.setClipUrl,a.layerClipId,s)}})}else v.remove()})}(o,e,i,r)}},55750:function($,P,t){var A=t(39898),M=t(91424),l=t(7901),_=t(37822).DESELECTDIM,m=t(16688),f=t(72597).resizeText,o=m.styleTextPoints;$.exports={style:function(e,i,r){var n=r||A.select(e).selectAll("g.waterfalllayer").selectAll("g.trace");f(e,n,"waterfall"),n.style("opacity",function(s){return s[0].trace.opacity}),n.each(function(s){var a=A.select(this),u=s[0].trace;a.selectAll(".point > path").each(function(p){if(!p.isBlank){var c=u[p.dir].marker;A.select(this).call(l.fill,c.color).call(l.stroke,c.line.color).call(M.dashLine,c.line.dash,c.line.width).style("opacity",u.selectedpoints&&!p.selected?_:1)}}),o(a,u,e),a.selectAll(".lines").each(function(){var p=u.connector.line;M.lineGroupStyle(A.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},82887:function($,P,t){var A=t(89298),M=t(71828),l=t(86281),_=t(79344).p,m=t(50606).BADNUM;P.moduleType="transform",P.name="aggregate";var f=P.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},o=f.aggregations;function e(s,a,u,p){if(p.enabled){for(var c=p.target,x=M.nestedProperty(a,c),g=x.get(),h=function(y,w){var d=y.func,S=w.d2c,T=w.c2d;switch(d){case"count":return i;case"first":return r;case"last":return n;case"sum":return function(E,C){for(var L=0,O=0;O<C.length;O++){var z=S(E[C[O]]);z!==m&&(L+=z)}return T(L)};case"avg":return function(E,C){for(var L=0,O=0,z=0;z<C.length;z++){var G=S(E[C[z]]);G!==m&&(L+=G,O++)}return O?T(L/O):m};case"min":return function(E,C){for(var L=1/0,O=0;O<C.length;O++){var z=S(E[C[O]]);z!==m&&(L=Math.min(L,z))}return L===1/0?m:T(L)};case"max":return function(E,C){for(var L=-1/0,O=0;O<C.length;O++){var z=S(E[C[O]]);z!==m&&(L=Math.max(L,z))}return L===-1/0?m:T(L)};case"range":return function(E,C){for(var L=1/0,O=-1/0,z=0;z<C.length;z++){var G=S(E[C[z]]);G!==m&&(L=Math.min(L,G),O=Math.max(O,G))}return O===-1/0||L===1/0?m:T(O-L)};case"change":return function(E,C){var L=S(E[C[0]]),O=S(E[C[C.length-1]]);return L===m||O===m?m:T(O-L)};case"median":return function(E,C){for(var L=[],O=0;O<C.length;O++){var z=S(E[C[O]]);z!==m&&L.push(z)}if(!L.length)return m;L.sort(M.sorterAsc);var G=(L.length-1)/2;return T((L[Math.floor(G)]+L[Math.ceil(G)])/2)};case"mode":return function(E,C){for(var L={},O=0,z=m,G=0;G<C.length;G++){var I=S(E[C[G]]);if(I!==m){var H=L[I]=(L[I]||0)+1;H>O&&(O=H,z=I)}}return O?T(z):m};case"rms":return function(E,C){for(var L=0,O=0,z=0;z<C.length;z++){var G=S(E[C[z]]);G!==m&&(L+=G*G,O++)}return O?T(Math.sqrt(L/O)):m};case"stddev":return function(E,C){var L,O=0,z=0,G=1,I=m;for(L=0;L<C.length&&I===m;L++)I=S(E[C[L]]);if(I===m)return m;for(;L<C.length;L++){var H=S(E[C[L]]);if(H!==m){var N=H-I;O+=N,z+=N*N,G++}}var F=y.funcmode==="sample"?G-1:G;return F?Math.sqrt((z-O*O/G)/F):0}}}(p,A.getDataConversions(s,a,c,g)),b=new Array(u.length),v=0;v<u.length;v++)b[v]=h(g,u[v]);x.set(b),p.func==="count"&&M.pushUnique(a._arrayAttrs,c)}}function i(s,a){return a.length}function r(s,a){return s[a[0]]}function n(s,a){return s[a[a.length-1]]}P.supplyDefaults=function(s,a){var u,p={};function c(T,E){return M.coerce(s,p,f,T,E)}if(!c("enabled"))return p;var x=l.findArrayAttributes(a),g={};for(u=0;u<x.length;u++)g[x[u]]=1;var h=c("groups");if(!Array.isArray(h)){if(!g[h])return p.enabled=!1,p;g[h]=0}var b,v=s.aggregations||[],y=p.aggregations=new Array(v.length);function w(T,E){return M.coerce(v[u],b,o,T,E)}for(u=0;u<v.length;u++){b={_index:u};var d=w("target"),S=w("func");w("enabled")&&d&&(g[d]||S==="count"&&g[d]===void 0)?(S==="stddev"&&w("funcmode"),g[d]=0,y[u]=b):y[u]={enabled:!1,_index:u}}for(u=0;u<x.length;u++)g[x[u]]&&y.push({target:x[u],func:o.func.dflt,enabled:!0,_index:-1});return p},P.calcTransform=function(s,a,u){if(u.enabled){var p=u.groups,c=M.getTargetArray(a,{target:p});if(c){var x,g,h,b,v={},y={},w=[],d=_(a.transforms,u),S=c.length;for(a._length&&(S=Math.min(S,a._length)),x=0;x<S;x++)(h=v[g=c[x]])===void 0?(v[g]=w.length,b=[x],w.push(b),y[v[g]]=d(x)):(w[h].push(x),y[v[g]]=(y[v[g]]||[]).concat(d(x)));u._indexToPoints=y;var T=u.aggregations;for(x=0;x<T.length;x++)e(s,a,w,T[x]);typeof p=="string"&&e(s,a,w,{target:p,func:"first",enabled:!0}),a._length=w.length}}}},14382:function($,P,t){var A=t(71828),M=t(73972),l=t(89298),_=t(79344).p,m=t(74808),f=m.COMPARISON_OPS,o=m.INTERVAL_OPS,e=m.SET_OPS;P.moduleType="transform",P.name="filter",P.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(f).concat(o).concat(e),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},P.supplyDefaults=function(i){var r={};function n(u,p){return A.coerce(i,r,P.attributes,u,p)}if(n("enabled")){var s=n("target");if(A.isArrayOrTypedArray(s)&&s.length===0)return r.enabled=!1,r;n("preservegaps"),n("operation"),n("value");var a=M.getComponentMethod("calendars","handleDefaults");a(i,r,"valuecalendar",null),a(i,r,"targetcalendar",null)}return r},P.calcTransform=function(i,r,n){if(n.enabled){var s=A.getTargetArray(r,n);if(s){var a=n.target,u=s.length;r._length&&(u=Math.min(u,r._length));var p=n.targetcalendar,c=r._arrayAttrs,x=n.preservegaps;if(typeof a=="string"){var g=A.nestedProperty(r,a+"calendar").get();g&&(p=g)}var h,b,v=function(C,L,O){var z=C.operation,G=C.value,I=Array.isArray(G);function H(W){return W.indexOf(z)!==-1}var N,F=function(W){return L(W,0,C.valuecalendar)},V=function(W){return L(W,0,O)};switch(H(f)?N=F(I?G[0]:G):H(o)?N=I?[F(G[0]),F(G[1])]:[F(G),F(G)]:H(e)&&(N=I?G.map(F):[F(G)]),z){case"=":return function(W){return V(W)===N};case"!=":return function(W){return V(W)!==N};case"<":return function(W){return V(W)<N};case"<=":return function(W){return V(W)<=N};case">":return function(W){return V(W)>N};case">=":return function(W){return V(W)>=N};case"[]":return function(W){var te=V(W);return te>=N[0]&&te<=N[1]};case"()":return function(W){var te=V(W);return te>N[0]&&te<N[1]};case"[)":return function(W){var te=V(W);return te>=N[0]&&te<N[1]};case"(]":return function(W){var te=V(W);return te>N[0]&&te<=N[1]};case"][":return function(W){var te=V(W);return te<=N[0]||te>=N[1]};case")(":return function(W){var te=V(W);return te<N[0]||te>N[1]};case"](":return function(W){var te=V(W);return te<=N[0]||te>N[1]};case")[":return function(W){var te=V(W);return te<N[0]||te>=N[1]};case"{}":return function(W){return N.indexOf(V(W))!==-1};case"}{":return function(W){return N.indexOf(V(W))===-1}}}(n,l.getDataToCoordFunc(i,r,a,s),p),y={},w={},d=0;x?(h=function(C){y[C.astr]=A.extendDeep([],C.get()),C.set(new Array(u))},b=function(C,L){var O=y[C.astr][L];C.get()[L]=O}):(h=function(C){y[C.astr]=A.extendDeep([],C.get()),C.set([])},b=function(C,L){var O=y[C.astr][L];C.get().push(O)}),E(h);for(var S=_(r.transforms,n),T=0;T<u;T++)v(s[T])?(E(b,T),w[d++]=S(T)):x&&d++;n._indexToPoints=w,r._length=d}}function E(C,L){for(var O=0;O<c.length;O++)C(A.nestedProperty(r,c[O]),L)}}},43102:function($,P,t){var A=t(71828),M=t(86281),l=t(74875),_=t(79344).p;function m(f,o){var e,i,r,n,s,a,u,p,c,x,g=o.transform,h=o.transformIndex,b=f.transforms[h].groups,v=_(f.transforms,g);if(!A.isArrayOrTypedArray(b)||b.length===0)return[f];var y=A.filterUnique(b),w=new Array(y.length),d=b.length,S=M.findArrayAttributes(f),T=g.styles||[],E={};for(e=0;e<T.length;e++)E[T[e].target]=T[e].value;g.styles&&(x=A.keyedContainer(g,"styles","target","value.name"));var C={},L={};for(e=0;e<y.length;e++){C[a=y[e]]=e,L[a]=0,(u=w[e]=A.extendDeepNoArrays({},f))._group=a,u.transforms[h]._indexToPoints={};var O=null;for(x&&(O=x.get(a)),u.name=O||O===""?O:A.templateString(g.nameformat,{trace:f.name,group:a}),p=u.transforms,u.transforms=[],i=0;i<p.length;i++)u.transforms[i]=A.extendDeepNoArrays({},p[i]);for(i=0;i<S.length;i++)A.nestedProperty(u,S[i]).set([])}for(r=0;r<S.length;r++){for(n=S[r],i=0,c=[];i<y.length;i++)c[i]=A.nestedProperty(w[i],n).get();for(s=A.nestedProperty(f,n).get(),i=0;i<d;i++)c[C[b[i]]].push(s[i])}for(i=0;i<d;i++)(u=w[C[b[i]]]).transforms[h]._indexToPoints[L[b[i]]]=v(i),L[b[i]]++;for(e=0;e<y.length;e++)a=y[e],u=w[e],l.clearExpandedTraceDefaultColors(u),u=A.extendDeepNoArrays(u,E[a]||{});return w}P.moduleType="transform",P.name="groupby",P.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},P.supplyDefaults=function(f,o,e){var i,r={};function n(c,x){return A.coerce(f,r,P.attributes,c,x)}if(!n("enabled"))return r;n("groups"),n("nameformat",e._dataLength>1?"%{group} (%{trace})":"%{group}");var s=f.styles,a=r.styles=[];if(s)for(i=0;i<s.length;i++){var u=a[i]={};A.coerce(s[i],a[i],P.attributes.styles,"target");var p=A.coerce(s[i],a[i],P.attributes.styles,"value");A.isPlainObject(p)?u.value=A.extendDeep({},p):p&&delete u.value}return r},P.transform=function(f,o){var e,i,r,n=[];for(i=0;i<f.length;i++)for(e=m(f[i],o),r=0;r<e.length;r++)n.push(e[r]);return n}},79344:function($,P){P.p=function(t,A){for(var M,l,_=0;_<t.length&&(M=t[_])!==A;_++)M._indexToPoints&&M.enabled!==!1&&(l=M._indexToPoints);var m=l?function(f){return l[f]}:function(f){return[f]};return m}},32275:function($,P,t){var A=t(71828),M=t(89298),l=t(79344).p,_=t(50606).BADNUM;P.moduleType="transform",P.name="sort",P.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},P.supplyDefaults=function(m){var f={};function o(e,i){return A.coerce(m,f,P.attributes,e,i)}return o("enabled")&&(o("target"),o("order")),f},P.calcTransform=function(m,f,o){if(o.enabled){var e=A.getTargetArray(f,o);if(e){var i=o.target,r=e.length;f._length&&(r=Math.min(r,f._length));var n,s,a=f._arrayAttrs,u=function(b,v,y,w){var d,S=new Array(w),T=new Array(w);for(d=0;d<w;d++)S[d]={v:v[d],i:d};for(S.sort(function(E,C){switch(E.order){case"ascending":return function(L,O){var z=C(L.v),G=C(O.v);return z===_?1:G===_?-1:z-G};case"descending":return function(L,O){var z=C(L.v),G=C(O.v);return z===_?1:G===_?-1:G-z}}}(b,y)),d=0;d<w;d++)T[d]=S[d].i;return T}(o,e,M.getDataToCoordFunc(m,f,i,e),r),p=l(f.transforms,o),c={};for(n=0;n<a.length;n++){var x=A.nestedProperty(f,a[n]),g=x.get(),h=new Array(r);for(s=0;s<r;s++)h[s]=g[u[s]];x.set(h)}for(s=0;s<r;s++)c[s]=p(u[s]);o._indexToPoints=c,f._length=r}}}},11506:function($,P){P.version="2.27.0"},9330:function($,P,t){var A,M=t(90386);A=function(){return function(){var l={7386:function(f,o,e){f.exports={alpha_shape:e(2350),convex_hull:e(5537),delaunay_triangulate:e(4419),gl_cone3d:e(1140),gl_error3d:e(3110),gl_heatmap2d:e(6386),gl_line3d:e(6086),gl_mesh3d:e(8116),gl_plot2d:e(2117),gl_plot3d:e(1059),gl_pointcloud2d:e(8271),gl_scatter3d:e(2182),gl_select_box:e(6623),gl_spikes2d:e(3050),gl_streamtube3d:e(7307),gl_surface3d:e(3754),ndarray:e(5050),ndarray_linear_interpolate:e(3581)}},2146:function(f,o,e){function i(ce,Te){for(var ye=0;ye<Te.length;ye++){var Pe=Te[ye];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(ce,Pe.key,Pe)}}function r(ce,Te){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(ye,Pe){return ye.__proto__=Pe,ye},r(ce,Te)}function n(ce){if(ce===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce}function s(ce){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Te){return Te.__proto__||Object.getPrototypeOf(Te)},s(ce)}function a(ce){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Te){return typeof Te}:function(Te){return Te&&typeof Symbol=="function"&&Te.constructor===Symbol&&Te!==Symbol.prototype?"symbol":typeof Te},a(ce)}var u=e(3910),p=e(3187),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.lW=h,o.h2=50;var x=2147483647;function g(ce){if(ce>x)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var Te=new Uint8Array(ce);return Object.setPrototypeOf(Te,h.prototype),Te}function h(ce,Te,ye){if(typeof ce=="number"){if(typeof Te=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(ce)}return b(ce,Te,ye)}function b(ce,Te,ye){if(typeof ce=="string")return function(ze,He){if(typeof He=="string"&&He!==""||(He="utf8"),!h.isEncoding(He))throw new TypeError("Unknown encoding: "+He);var We=0|T(ze,He),Je=g(We),lt=Je.write(ze,He);return lt!==We&&(Je=Je.slice(0,lt)),Je}(ce,Te);if(ArrayBuffer.isView(ce))return function(ze){if(Se(ze,Uint8Array)){var He=new Uint8Array(ze);return d(He.buffer,He.byteOffset,He.byteLength)}return w(ze)}(ce);if(ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(ce));if(Se(ce,ArrayBuffer)||ce&&Se(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Se(ce,SharedArrayBuffer)||ce&&Se(ce.buffer,SharedArrayBuffer)))return d(ce,Te,ye);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Pe=ce.valueOf&&ce.valueOf();if(Pe!=null&&Pe!==ce)return h.from(Pe,Te,ye);var Re=function(ze){if(h.isBuffer(ze)){var He=0|S(ze.length),We=g(He);return We.length===0||ze.copy(We,0,0,He),We}return ze.length!==void 0?typeof ze.length!="number"||Me(ze.length)?g(0):w(ze):ze.type==="Buffer"&&Array.isArray(ze.data)?w(ze.data):void 0}(ce);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return h.from(ce[Symbol.toPrimitive]("string"),Te,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(ce))}function v(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function y(ce){return v(ce),g(ce<0?0:0|S(ce))}function w(ce){for(var Te=ce.length<0?0:0|S(ce.length),ye=g(Te),Pe=0;Pe<Te;Pe+=1)ye[Pe]=255&ce[Pe];return ye}function d(ce,Te,ye){if(Te<0||ce.byteLength<Te)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<Te+(ye||0))throw new RangeError('"length" is outside of buffer bounds');var Pe;return Pe=Te===void 0&&ye===void 0?new Uint8Array(ce):ye===void 0?new Uint8Array(ce,Te):new Uint8Array(ce,Te,ye),Object.setPrototypeOf(Pe,h.prototype),Pe}function S(ce){if(ce>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return 0|ce}function T(ce,Te){if(h.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||Se(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+a(ce));var ye=ce.length,Pe=arguments.length>2&&arguments[2]===!0;if(!Pe&&ye===0)return 0;for(var Re=!1;;)switch(Te){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return se(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ye;case"hex":return ye>>>1;case"base64":return oe(ce).length;default:if(Re)return Pe?-1:se(ce).length;Te=(""+Te).toLowerCase(),Re=!0}}function E(ce,Te,ye){var Pe=!1;if((Te===void 0||Te<0)&&(Te=0),Te>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0)<=(Te>>>=0))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return X(this,Te,ye);case"utf8":case"utf-8":return V(this,Te,ye);case"ascii":return te(this,Te,ye);case"latin1":case"binary":return Q(this,Te,ye);case"base64":return F(this,Te,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,Te,ye);default:if(Pe)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),Pe=!0}}function C(ce,Te,ye){var Pe=ce[Te];ce[Te]=ce[ye],ce[ye]=Pe}function L(ce,Te,ye,Pe,Re){if(ce.length===0)return-1;if(typeof ye=="string"?(Pe=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),Me(ye=+ye)&&(ye=Re?0:ce.length-1),ye<0&&(ye=ce.length+ye),ye>=ce.length){if(Re)return-1;ye=ce.length-1}else if(ye<0){if(!Re)return-1;ye=0}if(typeof Te=="string"&&(Te=h.from(Te,Pe)),h.isBuffer(Te))return Te.length===0?-1:O(ce,Te,ye,Pe,Re);if(typeof Te=="number")return Te&=255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(ce,Te,ye):Uint8Array.prototype.lastIndexOf.call(ce,Te,ye):O(ce,[Te],ye,Pe,Re);throw new TypeError("val must be string, number or Buffer")}function O(ce,Te,ye,Pe,Re){var ze,He=1,We=ce.length,Je=Te.length;if(Pe!==void 0&&((Pe=String(Pe).toLowerCase())==="ucs2"||Pe==="ucs-2"||Pe==="utf16le"||Pe==="utf-16le")){if(ce.length<2||Te.length<2)return-1;He=2,We/=2,Je/=2,ye/=2}function lt(xt,at){return He===1?xt[at]:xt.readUInt16BE(at*He)}if(Re){var et=-1;for(ze=ye;ze<We;ze++)if(lt(ce,ze)===lt(Te,et===-1?0:ze-et)){if(et===-1&&(et=ze),ze-et+1===Je)return et*He}else et!==-1&&(ze-=ze-et),et=-1}else for(ye+Je>We&&(ye=We-Je),ze=ye;ze>=0;ze--){for(var yt=!0,_t=0;_t<Je;_t++)if(lt(ce,ze+_t)!==lt(Te,_t)){yt=!1;break}if(yt)return ze}return-1}function z(ce,Te,ye,Pe){ye=Number(ye)||0;var Re=ce.length-ye;Pe?(Pe=Number(Pe))>Re&&(Pe=Re):Pe=Re;var ze,He=Te.length;for(Pe>He/2&&(Pe=He/2),ze=0;ze<Pe;++ze){var We=parseInt(Te.substr(2*ze,2),16);if(Me(We))return ze;ce[ye+ze]=We}return ze}function G(ce,Te,ye,Pe){return fe(se(Te,ce.length-ye),ce,ye,Pe)}function I(ce,Te,ye,Pe){return fe(function(Re){for(var ze=[],He=0;He<Re.length;++He)ze.push(255&Re.charCodeAt(He));return ze}(Te),ce,ye,Pe)}function H(ce,Te,ye,Pe){return fe(oe(Te),ce,ye,Pe)}function N(ce,Te,ye,Pe){return fe(function(Re,ze){for(var He,We,Je,lt=[],et=0;et<Re.length&&!((ze-=2)<0);++et)We=(He=Re.charCodeAt(et))>>8,Je=He%256,lt.push(Je),lt.push(We);return lt}(Te,ce.length-ye),ce,ye,Pe)}function F(ce,Te,ye){return Te===0&&ye===ce.length?u.fromByteArray(ce):u.fromByteArray(ce.slice(Te,ye))}function V(ce,Te,ye){ye=Math.min(ce.length,ye);for(var Pe=[],Re=Te;Re<ye;){var ze=ce[Re],He=null,We=ze>239?4:ze>223?3:ze>191?2:1;if(Re+We<=ye){var Je=void 0,lt=void 0,et=void 0,yt=void 0;switch(We){case 1:ze<128&&(He=ze);break;case 2:(192&(Je=ce[Re+1]))==128&&(yt=(31&ze)<<6|63&Je)>127&&(He=yt);break;case 3:Je=ce[Re+1],lt=ce[Re+2],(192&Je)==128&&(192&lt)==128&&(yt=(15&ze)<<12|(63&Je)<<6|63&lt)>2047&&(yt<55296||yt>57343)&&(He=yt);break;case 4:Je=ce[Re+1],lt=ce[Re+2],et=ce[Re+3],(192&Je)==128&&(192&lt)==128&&(192&et)==128&&(yt=(15&ze)<<18|(63&Je)<<12|(63&lt)<<6|63&et)>65535&&yt<1114112&&(He=yt)}}He===null?(He=65533,We=1):He>65535&&(He-=65536,Pe.push(He>>>10&1023|55296),He=56320|1023&He),Pe.push(He),Re+=We}return function(_t){var xt=_t.length;if(xt<=W)return String.fromCharCode.apply(String,_t);for(var at="",ot=0;ot<xt;)at+=String.fromCharCode.apply(String,_t.slice(ot,ot+=W));return at}(Pe)}h.TYPED_ARRAY_SUPPORT=function(){try{var ce=new Uint8Array(1),Te={foo:function(){return 42}};return Object.setPrototypeOf(Te,Uint8Array.prototype),Object.setPrototypeOf(ce,Te),ce.foo()===42}catch{return!1}}(),h.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),h.poolSize=8192,h.from=function(ce,Te,ye){return b(ce,Te,ye)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(ce,Te,ye){return function(Pe,Re,ze){return v(Pe),Pe<=0?g(Pe):Re!==void 0?typeof ze=="string"?g(Pe).fill(Re,ze):g(Pe).fill(Re):g(Pe)}(ce,Te,ye)},h.allocUnsafe=function(ce){return y(ce)},h.allocUnsafeSlow=function(ce){return y(ce)},h.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==h.prototype},h.compare=function(ce,Te){if(Se(ce,Uint8Array)&&(ce=h.from(ce,ce.offset,ce.byteLength)),Se(Te,Uint8Array)&&(Te=h.from(Te,Te.offset,Te.byteLength)),!h.isBuffer(ce)||!h.isBuffer(Te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===Te)return 0;for(var ye=ce.length,Pe=Te.length,Re=0,ze=Math.min(ye,Pe);Re<ze;++Re)if(ce[Re]!==Te[Re]){ye=ce[Re],Pe=Te[Re];break}return ye<Pe?-1:Pe<ye?1:0},h.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(ce,Te){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return h.alloc(0);var ye;if(Te===void 0)for(Te=0,ye=0;ye<ce.length;++ye)Te+=ce[ye].length;var Pe=h.allocUnsafe(Te),Re=0;for(ye=0;ye<ce.length;++ye){var ze=ce[ye];if(Se(ze,Uint8Array))Re+ze.length>Pe.length?(h.isBuffer(ze)||(ze=h.from(ze)),ze.copy(Pe,Re)):Uint8Array.prototype.set.call(Pe,ze,Re);else{if(!h.isBuffer(ze))throw new TypeError('"list" argument must be an Array of Buffers');ze.copy(Pe,Re)}Re+=ze.length}return Pe},h.byteLength=T,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var ce=this.length;if(ce%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Te=0;Te<ce;Te+=2)C(this,Te,Te+1);return this},h.prototype.swap32=function(){var ce=this.length;if(ce%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Te=0;Te<ce;Te+=4)C(this,Te,Te+3),C(this,Te+1,Te+2);return this},h.prototype.swap64=function(){var ce=this.length;if(ce%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Te=0;Te<ce;Te+=8)C(this,Te,Te+7),C(this,Te+1,Te+6),C(this,Te+2,Te+5),C(this,Te+3,Te+4);return this},h.prototype.toString=function(){var ce=this.length;return ce===0?"":arguments.length===0?V(this,0,ce):E.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(ce){if(!h.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce||h.compare(this,ce)===0},h.prototype.inspect=function(){var ce="",Te=o.h2;return ce=this.toString("hex",0,Te).replace(/(.{2})/g,"$1 ").trim(),this.length>Te&&(ce+=" ... "),"<Buffer "+ce+">"},c&&(h.prototype[c]=h.prototype.inspect),h.prototype.compare=function(ce,Te,ye,Pe,Re){if(Se(ce,Uint8Array)&&(ce=h.from(ce,ce.offset,ce.byteLength)),!h.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+a(ce));if(Te===void 0&&(Te=0),ye===void 0&&(ye=ce?ce.length:0),Pe===void 0&&(Pe=0),Re===void 0&&(Re=this.length),Te<0||ye>ce.length||Pe<0||Re>this.length)throw new RangeError("out of range index");if(Pe>=Re&&Te>=ye)return 0;if(Pe>=Re)return-1;if(Te>=ye)return 1;if(this===ce)return 0;for(var ze=(Re>>>=0)-(Pe>>>=0),He=(ye>>>=0)-(Te>>>=0),We=Math.min(ze,He),Je=this.slice(Pe,Re),lt=ce.slice(Te,ye),et=0;et<We;++et)if(Je[et]!==lt[et]){ze=Je[et],He=lt[et];break}return ze<He?-1:He<ze?1:0},h.prototype.includes=function(ce,Te,ye){return this.indexOf(ce,Te,ye)!==-1},h.prototype.indexOf=function(ce,Te,ye){return L(this,ce,Te,ye,!0)},h.prototype.lastIndexOf=function(ce,Te,ye){return L(this,ce,Te,ye,!1)},h.prototype.write=function(ce,Te,ye,Pe){if(Te===void 0)Pe="utf8",ye=this.length,Te=0;else if(ye===void 0&&typeof Te=="string")Pe=Te,ye=this.length,Te=0;else{if(!isFinite(Te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Te>>>=0,isFinite(ye)?(ye>>>=0,Pe===void 0&&(Pe="utf8")):(Pe=ye,ye=void 0)}var Re=this.length-Te;if((ye===void 0||ye>Re)&&(ye=Re),ce.length>0&&(ye<0||Te<0)||Te>this.length)throw new RangeError("Attempt to write outside buffer bounds");Pe||(Pe="utf8");for(var ze=!1;;)switch(Pe){case"hex":return z(this,ce,Te,ye);case"utf8":case"utf-8":return G(this,ce,Te,ye);case"ascii":case"latin1":case"binary":return I(this,ce,Te,ye);case"base64":return H(this,ce,Te,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,ce,Te,ye);default:if(ze)throw new TypeError("Unknown encoding: "+Pe);Pe=(""+Pe).toLowerCase(),ze=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var W=4096;function te(ce,Te,ye){var Pe="";ye=Math.min(ce.length,ye);for(var Re=Te;Re<ye;++Re)Pe+=String.fromCharCode(127&ce[Re]);return Pe}function Q(ce,Te,ye){var Pe="";ye=Math.min(ce.length,ye);for(var Re=Te;Re<ye;++Re)Pe+=String.fromCharCode(ce[Re]);return Pe}function X(ce,Te,ye){var Pe=ce.length;(!Te||Te<0)&&(Te=0),(!ye||ye<0||ye>Pe)&&(ye=Pe);for(var Re="",ze=Te;ze<ye;++ze)Re+=be[ce[ze]];return Re}function q(ce,Te,ye){for(var Pe=ce.slice(Te,ye),Re="",ze=0;ze<Pe.length-1;ze+=2)Re+=String.fromCharCode(Pe[ze]+256*Pe[ze+1]);return Re}function Z(ce,Te,ye){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+Te>ye)throw new RangeError("Trying to access beyond buffer length")}function J(ce,Te,ye,Pe,Re,ze){if(!h.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(Te>Re||Te<ze)throw new RangeError('"value" argument is out of bounds');if(ye+Pe>ce.length)throw new RangeError("Index out of range")}function ne(ce,Te,ye,Pe,Re){ve(Te,Pe,Re,ce,ye,7);var ze=Number(Te&BigInt(4294967295));ce[ye++]=ze,ze>>=8,ce[ye++]=ze,ze>>=8,ce[ye++]=ze,ze>>=8,ce[ye++]=ze;var He=Number(Te>>BigInt(32)&BigInt(4294967295));return ce[ye++]=He,He>>=8,ce[ye++]=He,He>>=8,ce[ye++]=He,He>>=8,ce[ye++]=He,ye}function re(ce,Te,ye,Pe,Re){ve(Te,Pe,Re,ce,ye,7);var ze=Number(Te&BigInt(4294967295));ce[ye+7]=ze,ze>>=8,ce[ye+6]=ze,ze>>=8,ce[ye+5]=ze,ze>>=8,ce[ye+4]=ze;var He=Number(Te>>BigInt(32)&BigInt(4294967295));return ce[ye+3]=He,He>>=8,ce[ye+2]=He,He>>=8,ce[ye+1]=He,He>>=8,ce[ye]=He,ye+8}function ae(ce,Te,ye,Pe,Re,ze){if(ye+Pe>ce.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function ue(ce,Te,ye,Pe,Re){return Te=+Te,ye>>>=0,Re||ae(ce,0,ye,4),p.write(ce,Te,ye,Pe,23,4),ye+4}function he(ce,Te,ye,Pe,Re){return Te=+Te,ye>>>=0,Re||ae(ce,0,ye,8),p.write(ce,Te,ye,Pe,52,8),ye+8}h.prototype.slice=function(ce,Te){var ye=this.length;(ce=~~ce)<0?(ce+=ye)<0&&(ce=0):ce>ye&&(ce=ye),(Te=Te===void 0?ye:~~Te)<0?(Te+=ye)<0&&(Te=0):Te>ye&&(Te=ye),Te<ce&&(Te=ce);var Pe=this.subarray(ce,Te);return Object.setPrototypeOf(Pe,h.prototype),Pe},h.prototype.readUintLE=h.prototype.readUIntLE=function(ce,Te,ye){ce>>>=0,Te>>>=0,ye||Z(ce,Te,this.length);for(var Pe=this[ce],Re=1,ze=0;++ze<Te&&(Re*=256);)Pe+=this[ce+ze]*Re;return Pe},h.prototype.readUintBE=h.prototype.readUIntBE=function(ce,Te,ye){ce>>>=0,Te>>>=0,ye||Z(ce,Te,this.length);for(var Pe=this[ce+--Te],Re=1;Te>0&&(Re*=256);)Pe+=this[ce+--Te]*Re;return Pe},h.prototype.readUint8=h.prototype.readUInt8=function(ce,Te){return ce>>>=0,Te||Z(ce,1,this.length),this[ce]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(ce,Te){return ce>>>=0,Te||Z(ce,2,this.length),this[ce]|this[ce+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(ce,Te){return ce>>>=0,Te||Z(ce,2,this.length),this[ce]<<8|this[ce+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(ce,Te){return ce>>>=0,Te||Z(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+16777216*this[ce+3]},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(ce,Te){return ce>>>=0,Te||Z(ce,4,this.length),16777216*this[ce]+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},h.prototype.readBigUInt64LE=Ie(function(ce){Le(ce>>>=0,"offset");var Te=this[ce],ye=this[ce+7];Te!==void 0&&ye!==void 0||Ae(ce,this.length-8);var Pe=Te+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24),Re=this[++ce]+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+ye*Math.pow(2,24);return BigInt(Pe)+(BigInt(Re)<<BigInt(32))}),h.prototype.readBigUInt64BE=Ie(function(ce){Le(ce>>>=0,"offset");var Te=this[ce],ye=this[ce+7];Te!==void 0&&ye!==void 0||Ae(ce,this.length-8);var Pe=Te*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce],Re=this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+ye;return(BigInt(Pe)<<BigInt(32))+BigInt(Re)}),h.prototype.readIntLE=function(ce,Te,ye){ce>>>=0,Te>>>=0,ye||Z(ce,Te,this.length);for(var Pe=this[ce],Re=1,ze=0;++ze<Te&&(Re*=256);)Pe+=this[ce+ze]*Re;return Pe>=(Re*=128)&&(Pe-=Math.pow(2,8*Te)),Pe},h.prototype.readIntBE=function(ce,Te,ye){ce>>>=0,Te>>>=0,ye||Z(ce,Te,this.length);for(var Pe=Te,Re=1,ze=this[ce+--Pe];Pe>0&&(Re*=256);)ze+=this[ce+--Pe]*Re;return ze>=(Re*=128)&&(ze-=Math.pow(2,8*Te)),ze},h.prototype.readInt8=function(ce,Te){return ce>>>=0,Te||Z(ce,1,this.length),128&this[ce]?-1*(255-this[ce]+1):this[ce]},h.prototype.readInt16LE=function(ce,Te){ce>>>=0,Te||Z(ce,2,this.length);var ye=this[ce]|this[ce+1]<<8;return 32768&ye?4294901760|ye:ye},h.prototype.readInt16BE=function(ce,Te){ce>>>=0,Te||Z(ce,2,this.length);var ye=this[ce+1]|this[ce]<<8;return 32768&ye?4294901760|ye:ye},h.prototype.readInt32LE=function(ce,Te){return ce>>>=0,Te||Z(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},h.prototype.readInt32BE=function(ce,Te){return ce>>>=0,Te||Z(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},h.prototype.readBigInt64LE=Ie(function(ce){Le(ce>>>=0,"offset");var Te=this[ce],ye=this[ce+7];Te!==void 0&&ye!==void 0||Ae(ce,this.length-8);var Pe=this[ce+4]+this[ce+5]*Math.pow(2,8)+this[ce+6]*Math.pow(2,16)+(ye<<24);return(BigInt(Pe)<<BigInt(32))+BigInt(Te+this[++ce]*Math.pow(2,8)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,24))}),h.prototype.readBigInt64BE=Ie(function(ce){Le(ce>>>=0,"offset");var Te=this[ce],ye=this[ce+7];Te!==void 0&&ye!==void 0||Ae(ce,this.length-8);var Pe=(Te<<24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+this[++ce];return(BigInt(Pe)<<BigInt(32))+BigInt(this[++ce]*Math.pow(2,24)+this[++ce]*Math.pow(2,16)+this[++ce]*Math.pow(2,8)+ye)}),h.prototype.readFloatLE=function(ce,Te){return ce>>>=0,Te||Z(ce,4,this.length),p.read(this,ce,!0,23,4)},h.prototype.readFloatBE=function(ce,Te){return ce>>>=0,Te||Z(ce,4,this.length),p.read(this,ce,!1,23,4)},h.prototype.readDoubleLE=function(ce,Te){return ce>>>=0,Te||Z(ce,8,this.length),p.read(this,ce,!0,52,8)},h.prototype.readDoubleBE=function(ce,Te){return ce>>>=0,Te||Z(ce,8,this.length),p.read(this,ce,!1,52,8)},h.prototype.writeUintLE=h.prototype.writeUIntLE=function(ce,Te,ye,Pe){ce=+ce,Te>>>=0,ye>>>=0,Pe||J(this,ce,Te,ye,Math.pow(2,8*ye)-1,0);var Re=1,ze=0;for(this[Te]=255&ce;++ze<ye&&(Re*=256);)this[Te+ze]=ce/Re&255;return Te+ye},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(ce,Te,ye,Pe){ce=+ce,Te>>>=0,ye>>>=0,Pe||J(this,ce,Te,ye,Math.pow(2,8*ye)-1,0);var Re=ye-1,ze=1;for(this[Te+Re]=255&ce;--Re>=0&&(ze*=256);)this[Te+Re]=ce/ze&255;return Te+ye},h.prototype.writeUint8=h.prototype.writeUInt8=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,1,255,0),this[Te]=255&ce,Te+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,2,65535,0),this[Te]=255&ce,this[Te+1]=ce>>>8,Te+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,2,65535,0),this[Te]=ce>>>8,this[Te+1]=255&ce,Te+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,4,4294967295,0),this[Te+3]=ce>>>24,this[Te+2]=ce>>>16,this[Te+1]=ce>>>8,this[Te]=255&ce,Te+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,4,4294967295,0),this[Te]=ce>>>24,this[Te+1]=ce>>>16,this[Te+2]=ce>>>8,this[Te+3]=255&ce,Te+4},h.prototype.writeBigUInt64LE=Ie(function(ce){return ne(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=Ie(function(ce){return re(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(ce,Te,ye,Pe){if(ce=+ce,Te>>>=0,!Pe){var Re=Math.pow(2,8*ye-1);J(this,ce,Te,ye,Re-1,-Re)}var ze=0,He=1,We=0;for(this[Te]=255&ce;++ze<ye&&(He*=256);)ce<0&&We===0&&this[Te+ze-1]!==0&&(We=1),this[Te+ze]=(ce/He>>0)-We&255;return Te+ye},h.prototype.writeIntBE=function(ce,Te,ye,Pe){if(ce=+ce,Te>>>=0,!Pe){var Re=Math.pow(2,8*ye-1);J(this,ce,Te,ye,Re-1,-Re)}var ze=ye-1,He=1,We=0;for(this[Te+ze]=255&ce;--ze>=0&&(He*=256);)ce<0&&We===0&&this[Te+ze+1]!==0&&(We=1),this[Te+ze]=(ce/He>>0)-We&255;return Te+ye},h.prototype.writeInt8=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,1,127,-128),ce<0&&(ce=255+ce+1),this[Te]=255&ce,Te+1},h.prototype.writeInt16LE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,2,32767,-32768),this[Te]=255&ce,this[Te+1]=ce>>>8,Te+2},h.prototype.writeInt16BE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,2,32767,-32768),this[Te]=ce>>>8,this[Te+1]=255&ce,Te+2},h.prototype.writeInt32LE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,4,2147483647,-2147483648),this[Te]=255&ce,this[Te+1]=ce>>>8,this[Te+2]=ce>>>16,this[Te+3]=ce>>>24,Te+4},h.prototype.writeInt32BE=function(ce,Te,ye){return ce=+ce,Te>>>=0,ye||J(this,ce,Te,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[Te]=ce>>>24,this[Te+1]=ce>>>16,this[Te+2]=ce>>>8,this[Te+3]=255&ce,Te+4},h.prototype.writeBigInt64LE=Ie(function(ce){return ne(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=Ie(function(ce){return re(this,ce,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeFloatLE=function(ce,Te,ye){return ue(this,ce,Te,!0,ye)},h.prototype.writeFloatBE=function(ce,Te,ye){return ue(this,ce,Te,!1,ye)},h.prototype.writeDoubleLE=function(ce,Te,ye){return he(this,ce,Te,!0,ye)},h.prototype.writeDoubleBE=function(ce,Te,ye){return he(this,ce,Te,!1,ye)},h.prototype.copy=function(ce,Te,ye,Pe){if(!h.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),Pe||Pe===0||(Pe=this.length),Te>=ce.length&&(Te=ce.length),Te||(Te=0),Pe>0&&Pe<ye&&(Pe=ye),Pe===ye||ce.length===0||this.length===0)return 0;if(Te<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(Pe<0)throw new RangeError("sourceEnd out of bounds");Pe>this.length&&(Pe=this.length),ce.length-Te<Pe-ye&&(Pe=ce.length-Te+ye);var Re=Pe-ye;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Te,ye,Pe):Uint8Array.prototype.set.call(ce,this.subarray(ye,Pe),Te),Re},h.prototype.fill=function(ce,Te,ye,Pe){if(typeof ce=="string"){if(typeof Te=="string"?(Pe=Te,Te=0,ye=this.length):typeof ye=="string"&&(Pe=ye,ye=this.length),Pe!==void 0&&typeof Pe!="string")throw new TypeError("encoding must be a string");if(typeof Pe=="string"&&!h.isEncoding(Pe))throw new TypeError("Unknown encoding: "+Pe);if(ce.length===1){var Re=ce.charCodeAt(0);(Pe==="utf8"&&Re<128||Pe==="latin1")&&(ce=Re)}}else typeof ce=="number"?ce&=255:typeof ce=="boolean"&&(ce=Number(ce));if(Te<0||this.length<Te||this.length<ye)throw new RangeError("Out of range index");if(ye<=Te)return this;var ze;if(Te>>>=0,ye=ye===void 0?this.length:ye>>>0,ce||(ce=0),typeof ce=="number")for(ze=Te;ze<ye;++ze)this[ze]=ce;else{var He=h.isBuffer(ce)?ce:h.from(ce,Pe),We=He.length;if(We===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(ze=0;ze<ye-Te;++ze)this[ze+Te]=He[ze%We]}return this};var de={};function xe(ce,Te,ye){de[ce]=function(Pe){(function(et,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Super expression must either be null or a function");et.prototype=Object.create(yt&&yt.prototype,{constructor:{value:et,writable:!0,configurable:!0}}),Object.defineProperty(et,"prototype",{writable:!1}),yt&&r(et,yt)})(lt,Pe);var Re,ze,He,We,Je=(He=lt,We=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var et,yt=s(He);if(We){var _t=s(this).constructor;et=Reflect.construct(yt,arguments,_t)}else et=yt.apply(this,arguments);return function(xt,at){if(at&&(a(at)==="object"||typeof at=="function"))return at;if(at!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(xt)}(this,et)});function lt(){var et;return function(yt,_t){if(!(yt instanceof _t))throw new TypeError("Cannot call a class as a function")}(this,lt),et=Je.call(this),Object.defineProperty(n(et),"message",{value:Te.apply(n(et),arguments),writable:!0,configurable:!0}),et.name="".concat(et.name," [").concat(ce,"]"),et.stack,delete et.name,et}return Re=lt,(ze=[{key:"code",get:function(){return ce},set:function(et){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:et,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(ce,"]: ").concat(this.message)}}])&&i(Re.prototype,ze),Object.defineProperty(Re,"prototype",{writable:!1}),lt}(ye)}function me(ce){for(var Te="",ye=ce.length,Pe=ce[0]==="-"?1:0;ye>=Pe+4;ye-=3)Te="_".concat(ce.slice(ye-3,ye)).concat(Te);return"".concat(ce.slice(0,ye)).concat(Te)}function ve(ce,Te,ye,Pe,Re,ze){if(ce>ye||ce<Te){var He,We=typeof Te=="bigint"?"n":"";throw He=ze>3?Te===0||Te===BigInt(0)?">= 0".concat(We," and < 2").concat(We," ** ").concat(8*(ze+1)).concat(We):">= -(2".concat(We," ** ").concat(8*(ze+1)-1).concat(We,") and < 2 ** ")+"".concat(8*(ze+1)-1).concat(We):">= ".concat(Te).concat(We," and <= ").concat(ye).concat(We),new de.ERR_OUT_OF_RANGE("value",He,ce)}(function(Je,lt,et){Le(lt,"offset"),Je[lt]!==void 0&&Je[lt+et]!==void 0||Ae(lt,Je.length-(et+1))})(Pe,Re,ze)}function Le(ce,Te){if(typeof ce!="number")throw new de.ERR_INVALID_ARG_TYPE(Te,"number",ce)}function Ae(ce,Te,ye){throw Math.floor(ce)!==ce?(Le(ce,ye),new de.ERR_OUT_OF_RANGE(ye||"offset","an integer",ce)):Te<0?new de.ERR_BUFFER_OUT_OF_BOUNDS:new de.ERR_OUT_OF_RANGE(ye||"offset",">= ".concat(ye?1:0," and <= ").concat(Te),ce)}xe("ERR_BUFFER_OUT_OF_BOUNDS",function(ce){return ce?"".concat(ce," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),xe("ERR_INVALID_ARG_TYPE",function(ce,Te){return'The "'.concat(ce,'" argument must be of type number. Received type ').concat(a(Te))},TypeError),xe("ERR_OUT_OF_RANGE",function(ce,Te,ye){var Pe='The value of "'.concat(ce,'" is out of range.'),Re=ye;return Number.isInteger(ye)&&Math.abs(ye)>Math.pow(2,32)?Re=me(String(ye)):typeof ye=="bigint"&&(Re=String(ye),(ye>Math.pow(BigInt(2),BigInt(32))||ye<-Math.pow(BigInt(2),BigInt(32)))&&(Re=me(Re)),Re+="n"),Pe+" It must be ".concat(Te,". Received ").concat(Re)},RangeError);var we=/[^+/0-9A-Za-z-_]/g;function se(ce,Te){var ye;Te=Te||1/0;for(var Pe=ce.length,Re=null,ze=[],He=0;He<Pe;++He){if((ye=ce.charCodeAt(He))>55295&&ye<57344){if(!Re){if(ye>56319){(Te-=3)>-1&&ze.push(239,191,189);continue}if(He+1===Pe){(Te-=3)>-1&&ze.push(239,191,189);continue}Re=ye;continue}if(ye<56320){(Te-=3)>-1&&ze.push(239,191,189),Re=ye;continue}ye=65536+(Re-55296<<10|ye-56320)}else Re&&(Te-=3)>-1&&ze.push(239,191,189);if(Re=null,ye<128){if((Te-=1)<0)break;ze.push(ye)}else if(ye<2048){if((Te-=2)<0)break;ze.push(ye>>6|192,63&ye|128)}else if(ye<65536){if((Te-=3)<0)break;ze.push(ye>>12|224,ye>>6&63|128,63&ye|128)}else{if(!(ye<1114112))throw new Error("Invalid code point");if((Te-=4)<0)break;ze.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,63&ye|128)}}return ze}function oe(ce){return u.toByteArray(function(Te){if((Te=(Te=Te.split("=")[0]).trim().replace(we,"")).length<2)return"";for(;Te.length%4!=0;)Te+="=";return Te}(ce))}function fe(ce,Te,ye,Pe){var Re;for(Re=0;Re<Pe&&!(Re+ye>=Te.length||Re>=ce.length);++Re)Te[Re+ye]=ce[Re];return Re}function Se(ce,Te){return ce instanceof Te||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===Te.name}function Me(ce){return ce!=ce}var be=function(){for(var ce="0123456789abcdef",Te=new Array(256),ye=0;ye<16;++ye)for(var Pe=16*ye,Re=0;Re<16;++Re)Te[Pe+Re]=ce[ye]+ce[Re];return Te}();function Ie(ce){return typeof BigInt>"u"?Be:ce}function Be(){throw new Error("BigInt not supported")}},2321:function(f){f.exports=r,f.exports.isMobile=r,f.exports.default=r;var o=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,e=/CrOS/,i=/android|ipad|playbook|silk/i;function r(n){n||(n={});var s=n.ua;if(s||typeof navigator>"u"||(s=navigator.userAgent),s&&s.headers&&typeof s.headers["user-agent"]=="string"&&(s=s.headers["user-agent"]),typeof s!="string")return!1;var a=o.test(s)&&!e.test(s)||!!n.tablet&&i.test(s);return!a&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&s.indexOf("Macintosh")!==-1&&s.indexOf("Safari")!==-1&&(a=!0),a}},3910:function(f,o){o.byteLength=function(p){var c=a(p),x=c[0],g=c[1];return 3*(x+g)/4-g},o.toByteArray=function(p){var c,x,g=a(p),h=g[0],b=g[1],v=new r(function(d,S,T){return 3*(S+T)/4-T}(0,h,b)),y=0,w=b>0?h-4:h;for(x=0;x<w;x+=4)c=i[p.charCodeAt(x)]<<18|i[p.charCodeAt(x+1)]<<12|i[p.charCodeAt(x+2)]<<6|i[p.charCodeAt(x+3)],v[y++]=c>>16&255,v[y++]=c>>8&255,v[y++]=255&c;return b===2&&(c=i[p.charCodeAt(x)]<<2|i[p.charCodeAt(x+1)]>>4,v[y++]=255&c),b===1&&(c=i[p.charCodeAt(x)]<<10|i[p.charCodeAt(x+1)]<<4|i[p.charCodeAt(x+2)]>>2,v[y++]=c>>8&255,v[y++]=255&c),v},o.fromByteArray=function(p){for(var c,x=p.length,g=x%3,h=[],b=16383,v=0,y=x-g;v<y;v+=b)h.push(u(p,v,v+b>y?y:v+b));return g===1?(c=p[x-1],h.push(e[c>>2]+e[c<<4&63]+"==")):g===2&&(c=(p[x-2]<<8)+p[x-1],h.push(e[c>>10]+e[c>>4&63]+e[c<<2&63]+"=")),h.join("")};for(var e=[],i=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)e[s]=n[s],i[n.charCodeAt(s)]=s;function a(p){var c=p.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var x=p.indexOf("=");return x===-1&&(x=c),[x,x===c?0:4-x%4]}function u(p,c,x){for(var g,h,b=[],v=c;v<x;v+=3)g=(p[v]<<16&16711680)+(p[v+1]<<8&65280)+(255&p[v+2]),b.push(e[(h=g)>>18&63]+e[h>>12&63]+e[h>>6&63]+e[63&h]);return b.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3187:function(f,o){o.read=function(e,i,r,n,s){var a,u,p=8*s-n-1,c=(1<<p)-1,x=c>>1,g=-7,h=r?s-1:0,b=r?-1:1,v=e[i+h];for(h+=b,a=v&(1<<-g)-1,v>>=-g,g+=p;g>0;a=256*a+e[i+h],h+=b,g-=8);for(u=a&(1<<-g)-1,a>>=-g,g+=n;g>0;u=256*u+e[i+h],h+=b,g-=8);if(a===0)a=1-x;else{if(a===c)return u?NaN:1/0*(v?-1:1);u+=Math.pow(2,n),a-=x}return(v?-1:1)*u*Math.pow(2,a-n)},o.write=function(e,i,r,n,s,a){var u,p,c,x=8*a-s-1,g=(1<<x)-1,h=g>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:a-1,y=n?1:-1,w=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(p=isNaN(i)?1:0,u=g):(u=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-u))<1&&(u--,c*=2),(i+=u+h>=1?b/c:b*Math.pow(2,1-h))*c>=2&&(u++,c/=2),u+h>=g?(p=0,u=g):u+h>=1?(p=(i*c-1)*Math.pow(2,s),u+=h):(p=i*Math.pow(2,h-1)*Math.pow(2,s),u=0));s>=8;e[r+v]=255&p,v+=y,p/=256,s-=8);for(u=u<<s|p,x+=s;x>0;e[r+v]=255&u,v+=y,u/=256,x-=8);e[r+v-y]|=128*w}},1152:function(f,o,e){f.exports=function(u){var p=(u=u||{}).eye||[0,0,1],c=u.center||[0,0,0],x=u.up||[0,1,0],g=u.distanceLimits||[0,1/0],h=u.mode||"turntable",b=i(),v=r(),y=n();return b.setDistanceLimits(g[0],g[1]),b.lookAt(0,p,c,x),v.setDistanceLimits(g[0],g[1]),v.lookAt(0,p,c,x),y.setDistanceLimits(g[0],g[1]),y.lookAt(0,p,c,x),new s({turntable:b,orbit:v,matrix:y},h)};var i=e(3440),r=e(7774),n=e(9298);function s(u,p){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(c){return u[c]}),this._mode=p,this._active=u[p],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var a=s.prototype;a.flush=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].flush(u)},a.idle=function(u){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].idle(u)},a.lookAt=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].lookAt(u,p,c,x)},a.rotate=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].rotate(u,p,c,x)},a.pan=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].pan(u,p,c,x)},a.translate=function(u,p,c,x){for(var g=this._controllerList,h=0;h<g.length;++h)g[h].translate(u,p,c,x)},a.setMatrix=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setMatrix(u,p)},a.setDistanceLimits=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistanceLimits(u,p)},a.setDistance=function(u,p){for(var c=this._controllerList,x=0;x<c.length;++x)c[x].setDistance(u,p)},a.recalcMatrix=function(u){this._active.recalcMatrix(u)},a.getDistance=function(u){return this._active.getDistance(u)},a.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},a.lastT=function(){return this._active.lastT()},a.setMode=function(u){if(u!==this._mode){var p=this._controllerNames.indexOf(u);if(!(p<0)){var c=this._active,x=this._controllerList[p],g=Math.max(c.lastT(),x.lastT());c.recalcMatrix(g),x.setMatrix(g,c.computedMatrix),this._active=x,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},a.getMode=function(){return this._mode}},8126:function(f,o,e){var i=typeof WeakMap>"u"?e(5346):WeakMap,r=e(5827),n=e(2944),s=new i;f.exports=function(a){var u=s.get(a),p=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!p||!a.isBuffer(p)){var c=r(a,new Float32Array([-1,-1,-1,4,4,-1]));(u=n(a,[{buffer:c,type:a.FLOAT,size:2}]))._triangleBuffer=c,s.set(a,u)}u.bind(),a.drawArrays(a.TRIANGLES,0,3),u.unbind()}},8008:function(f,o,e){var i=e(4930);f.exports=function(r,n,s){n=typeof n=="number"?n:1,s=s||": ";var a=r.split(/\r?\n/),u=String(a.length+n-1).length;return a.map(function(p,c){var x=c+n,g=String(x).length;return i(x,u-g)+s+p}).join(`
`)}},2153:function(f,o,e){f.exports=function(n){var s=n.length;if(s===0)return[];if(s===1)return[0];for(var a=n[0].length,u=[n[0]],p=[0],c=1;c<s;++c)if(u.push(n[c]),r(u,a)){if(p.push(c),p.length===a+1)return p}else u.pop();return p};var i=e(417);function r(n,s){for(var a=new Array(s+1),u=0;u<n.length;++u)a[u]=n[u];for(u=0;u<=n.length;++u){for(var p=n.length;p<=s;++p){for(var c=new Array(s),x=0;x<s;++x)c[x]=Math.pow(p+1-u,x);a[p]=c}if(i.apply(void 0,a))return!0}return!1}},4653:function(f,o,e){f.exports=function(n,s){return i(s).filter(function(a){for(var u=new Array(a.length),p=0;p<a.length;++p)u[p]=s[a[p]];return r(u)*n<1})};var i=e(4419),r=e(1778)},2350:function(f,o,e){f.exports=function(n,s){return r(i(n,s))};var i=e(4653),r=e(8691)},7896:function(f){f.exports=function(o){return atob(o)}},957:function(f,o,e){f.exports=function(n,s){for(var a=s.length,u=new Array(a+1),p=0;p<a;++p){for(var c=new Array(a+1),x=0;x<=a;++x)c[x]=n[x][p];u[p]=c}for(u[a]=new Array(a+1),p=0;p<=a;++p)u[a][p]=1;var g=new Array(a+1);for(p=0;p<a;++p)g[p]=s[p];g[a]=1;var h=i(u,g),b=r(h[a+1]);b===0&&(b=1);var v=new Array(a+1);for(p=0;p<=a;++p)v[p]=r(h[p])/b;return v};var i=e(6606);function r(n){for(var s=0,a=0;a<n.length;++a)s+=n[a];return s}},1539:function(f,o,e){var i=e(8524);f.exports=function(r,n){return i(r[0].mul(n[1]).add(n[0].mul(r[1])),r[1].mul(n[1]))}},8846:function(f){f.exports=function(o,e){return o[0].mul(e[1]).cmp(e[0].mul(o[1]))}},9189:function(f,o,e){var i=e(8524);f.exports=function(r,n){return i(r[0].mul(n[1]),r[1].mul(n[0]))}},5125:function(f,o,e){var i=e(234),r=e(3218),n=e(5514),s=e(2813),a=e(8524),u=e(9189);f.exports=function p(c,x){if(i(c))return x?u(c,p(x)):[c[0].clone(),c[1].clone()];var g,h,b=0;if(r(c))g=c.clone();else if(typeof c=="string")g=s(c);else{if(c===0)return[n(0),n(1)];if(c===Math.floor(c))g=n(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),b-=256;g=n(c)}}if(i(x))g.mul(x[1]),h=x[0].clone();else if(r(x))h=x.clone();else if(typeof x=="string")h=s(x);else if(x)if(x===Math.floor(x))h=n(x);else{for(;x!==Math.floor(x);)x*=Math.pow(2,256),b+=256;h=n(x)}else h=n(1);return b>0?g=g.ushln(b):b<0&&(h=h.ushln(-b)),a(g,h)}},234:function(f,o,e){var i=e(3218);f.exports=function(r){return Array.isArray(r)&&r.length===2&&i(r[0])&&i(r[1])}},4275:function(f,o,e){var i=e(1928);f.exports=function(r){return r.cmp(new i(0))}},9958:function(f,o,e){var i=e(4275);f.exports=function(r){var n=r.length,s=r.words,a=0;if(n===1)a=s[0];else if(n===2)a=s[0]+67108864*s[1];else for(var u=0;u<n;u++)a+=s[u]*Math.pow(67108864,u);return i(r)*a}},1112:function(f,o,e){var i=e(8362),r=e(2288).countTrailingZeros;f.exports=function(n){var s=r(i.lo(n));if(s<32)return s;var a=r(i.hi(n));return a>20?52:a+32}},3218:function(f,o,e){e(1928),f.exports=function(i){return i&&typeof i=="object"&&!!i.words}},5514:function(f,o,e){var i=e(1928),r=e(8362);f.exports=function(n){var s=r.exponent(n);return s<52?new i(n):new i(n*Math.pow(2,52-s)).ushln(s-52)}},8524:function(f,o,e){var i=e(5514),r=e(4275);f.exports=function(n,s){var a=r(n),u=r(s);if(a===0)return[i(0),i(1)];if(u===0)return[i(0),i(0)];u<0&&(n=n.neg(),s=s.neg());var p=n.gcd(s);return p.cmpn(1)?[n.div(p),s.div(p)]:[n,s]}},2813:function(f,o,e){var i=e(1928);f.exports=function(r){return new i(r)}},3962:function(f,o,e){var i=e(8524);f.exports=function(r,n){return i(r[0].mul(n[0]),r[1].mul(n[1]))}},4951:function(f,o,e){var i=e(4275);f.exports=function(r){return i(r[0])*i(r[1])}},4354:function(f,o,e){var i=e(8524);f.exports=function(r,n){return i(r[0].mul(n[1]).sub(r[1].mul(n[0])),r[1].mul(n[1]))}},7999:function(f,o,e){var i=e(9958),r=e(1112);f.exports=function(n){var s=n[0],a=n[1];if(s.cmpn(0)===0)return 0;var u=s.abs().divmod(a.abs()),p=u.div,c=i(p),x=u.mod,g=s.negative!==a.negative?-1:1;if(x.cmpn(0)===0)return g*c;if(c){var h=r(c)+4;return g*(c+(v=i(x.ushln(h).divRound(a)))*Math.pow(2,-h))}var b=a.bitLength()-x.bitLength()+53,v=i(x.ushln(b).divRound(a));return b<1023?g*v*Math.pow(2,-b):g*(v*=Math.pow(2,-1023))*Math.pow(2,1023-b)}},5070:function(f){function o(a,u,p,c,x){for(var g=x+1;c<=x;){var h=c+x>>>1,b=a[h];(p!==void 0?p(b,u):b-u)>=0?(g=h,x=h-1):c=h+1}return g}function e(a,u,p,c,x){for(var g=x+1;c<=x;){var h=c+x>>>1,b=a[h];(p!==void 0?p(b,u):b-u)>0?(g=h,x=h-1):c=h+1}return g}function i(a,u,p,c,x){for(var g=c-1;c<=x;){var h=c+x>>>1,b=a[h];(p!==void 0?p(b,u):b-u)<0?(g=h,c=h+1):x=h-1}return g}function r(a,u,p,c,x){for(var g=c-1;c<=x;){var h=c+x>>>1,b=a[h];(p!==void 0?p(b,u):b-u)<=0?(g=h,c=h+1):x=h-1}return g}function n(a,u,p,c,x){for(;c<=x;){var g=c+x>>>1,h=a[g],b=p!==void 0?p(h,u):h-u;if(b===0)return g;b<=0?c=g+1:x=g-1}return-1}function s(a,u,p,c,x,g){return typeof p=="function"?g(a,u,p,c===void 0?0:0|c,x===void 0?a.length-1:0|x):g(a,u,void 0,p===void 0?0:0|p,c===void 0?a.length-1:0|c)}f.exports={ge:function(a,u,p,c,x){return s(a,u,p,c,x,o)},gt:function(a,u,p,c,x){return s(a,u,p,c,x,e)},lt:function(a,u,p,c,x){return s(a,u,p,c,x,i)},le:function(a,u,p,c,x){return s(a,u,p,c,x,r)},eq:function(a,u,p,c,x){return s(a,u,p,c,x,n)}}},2288:function(f,o){function e(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(r){return(r>0)-(r<0)},o.abs=function(r){var n=r>>31;return(r^n)-n},o.min=function(r,n){return n^(r^n)&-(r<n)},o.max=function(r,n){return r^(r^n)&-(r<n)},o.isPow2=function(r){return!(r&r-1||!r)},o.log2=function(r){var n,s;return n=(r>65535)<<4,n|=s=((r>>>=n)>255)<<3,n|=s=((r>>>=s)>15)<<2,(n|=s=((r>>>=s)>3)<<1)|(r>>>=s)>>1},o.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},o.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},o.countTrailingZeros=e,o.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},o.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},o.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var s=n,a=n,u=7;for(s>>>=1;s;s>>>=1)a<<=1,a|=1&s,--u;r[n]=a<<u&255}})(i),o.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},o.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},o.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},o.interleave3=function(r,n,s){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<2},o.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},o.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>e(r)+1}},1928:function(f,o,e){(function(i,r){function n(I,H){if(!I)throw new Error(H||"Assertion failed")}function s(I,H){I.super_=H;var N=function(){};N.prototype=H.prototype,I.prototype=new N,I.prototype.constructor=I}function a(I,H,N){if(a.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&(H!=="le"&&H!=="be"||(N=H,H=10),this._init(I||0,H||10,N||"be"))}var u;typeof i=="object"?i.exports=a:r.BN=a,a.BN=a,a.wordSize=26;try{u=typeof window<"u"&&window.Buffer!==void 0?window.Buffer:e(6601).Buffer}catch{}function p(I,H){var N=I.charCodeAt(H);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function c(I,H,N){var F=p(I,N);return N-1>=H&&(F|=p(I,N-1)<<4),F}function x(I,H,N,F){for(var V=0,W=Math.min(I.length,N),te=H;te<W;te++){var Q=I.charCodeAt(te)-48;V*=F,V+=Q>=49?Q-49+10:Q>=17?Q-17+10:Q}return V}a.isBN=function(I){return I instanceof a||I!==null&&typeof I=="object"&&I.constructor.wordSize===a.wordSize&&Array.isArray(I.words)},a.max=function(I,H){return I.cmp(H)>0?I:H},a.min=function(I,H){return I.cmp(H)<0?I:H},a.prototype._init=function(I,H,N){if(typeof I=="number")return this._initNumber(I,H,N);if(typeof I=="object")return this._initArray(I,H,N);H==="hex"&&(H=16),n(H===(0|H)&&H>=2&&H<=36);var F=0;(I=I.toString().replace(/\s+/g,""))[0]==="-"&&(F++,this.negative=1),F<I.length&&(H===16?this._parseHex(I,F,N):(this._parseBase(I,H,F),N==="le"&&this._initArray(this.toArray(),H,N)))},a.prototype._initNumber=function(I,H,N){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(n(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),H,N)},a.prototype._initArray=function(I,H,N){if(n(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,W,te=0;if(N==="be")for(F=I.length-1,V=0;F>=0;F-=3)W=I[F]|I[F-1]<<8|I[F-2]<<16,this.words[V]|=W<<te&67108863,this.words[V+1]=W>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);else if(N==="le")for(F=0,V=0;F<I.length;F+=3)W=I[F]|I[F+1]<<8|I[F+2]<<16,this.words[V]|=W<<te&67108863,this.words[V+1]=W>>>26-te&67108863,(te+=24)>=26&&(te-=26,V++);return this.strip()},a.prototype._parseHex=function(I,H,N){this.length=Math.ceil((I.length-H)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,W=0,te=0;if(N==="be")for(F=I.length-1;F>=H;F-=2)V=c(I,H,F)<<W,this.words[te]|=67108863&V,W>=18?(W-=18,te+=1,this.words[te]|=V>>>26):W+=8;else for(F=(I.length-H)%2==0?H+1:H;F<I.length;F+=2)V=c(I,H,F)<<W,this.words[te]|=67108863&V,W>=18?(W-=18,te+=1,this.words[te]|=V>>>26):W+=8;this.strip()},a.prototype._parseBase=function(I,H,N){this.words=[0],this.length=1;for(var F=0,V=1;V<=67108863;V*=H)F++;F--,V=V/H|0;for(var W=I.length-N,te=W%F,Q=Math.min(W,W-te)+N,X=0,q=N;q<Q;q+=F)X=x(I,q,q+F,H),this.imuln(V),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(te!==0){var Z=1;for(X=x(I,q,I.length,H),q=0;q<te;q++)Z*=H;this.imuln(Z),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},a.prototype.copy=function(I){I.words=new Array(this.length);for(var H=0;H<this.length;H++)I.words[H]=this.words[H];I.length=this.length,I.negative=this.negative,I.red=this.red},a.prototype.clone=function(){var I=new a(null);return this.copy(I),I},a.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},a.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],b=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function v(I,H,N){N.negative=H.negative^I.negative;var F=I.length+H.length|0;N.length=F,F=F-1|0;var V=0|I.words[0],W=0|H.words[0],te=V*W,Q=67108863&te,X=te/67108864|0;N.words[0]=Q;for(var q=1;q<F;q++){for(var Z=X>>>26,J=67108863&X,ne=Math.min(q,H.length-1),re=Math.max(0,q-I.length+1);re<=ne;re++){var ae=q-re|0;Z+=(te=(V=0|I.words[ae])*(W=0|H.words[re])+J)/67108864|0,J=67108863&te}N.words[q]=0|J,X=0|Z}return X!==0?N.words[q]=0|X:N.length--,N.strip()}a.prototype.toString=function(I,H){var N;if(H=0|H||1,(I=I||10)===16||I==="hex"){N="";for(var F=0,V=0,W=0;W<this.length;W++){var te=this.words[W],Q=(16777215&(te<<F|V)).toString(16);N=(V=te>>>24-F&16777215)!=0||W!==this.length-1?g[6-Q.length]+Q+N:Q+N,(F+=2)>=26&&(F-=26,W--)}for(V!==0&&(N=V.toString(16)+N);N.length%H!=0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(I===(0|I)&&I>=2&&I<=36){var X=h[I],q=b[I];N="";var Z=this.clone();for(Z.negative=0;!Z.isZero();){var J=Z.modn(q).toString(I);N=(Z=Z.idivn(q)).isZero()?J+N:g[X-J.length]+J+N}for(this.isZero()&&(N="0"+N);N.length%H!=0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}n(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=67108864*this.words[1]:this.length===3&&this.words[2]===1?I+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(I,H){return n(u!==void 0),this.toArrayLike(u,I,H)},a.prototype.toArray=function(I,H){return this.toArrayLike(Array,I,H)},a.prototype.toArrayLike=function(I,H,N){var F=this.byteLength(),V=N||Math.max(1,F);n(F<=V,"byte array longer than desired length"),n(V>0,"Requested array length <= 0"),this.strip();var W,te,Q=H==="le",X=new I(V),q=this.clone();if(Q){for(te=0;!q.isZero();te++)W=q.andln(255),q.iushrn(8),X[te]=W;for(;te<V;te++)X[te]=0}else{for(te=0;te<V-F;te++)X[te]=0;for(te=0;!q.isZero();te++)W=q.andln(255),q.iushrn(8),X[V-te-1]=W}return X},Math.clz32?a.prototype._countBits=function(I){return 32-Math.clz32(I)}:a.prototype._countBits=function(I){var H=I,N=0;return H>=4096&&(N+=13,H>>>=13),H>=64&&(N+=7,H>>>=7),H>=8&&(N+=4,H>>>=4),H>=2&&(N+=2,H>>>=2),N+H},a.prototype._zeroBits=function(I){if(I===0)return 26;var H=I,N=0;return!(8191&H)&&(N+=13,H>>>=13),!(127&H)&&(N+=7,H>>>=7),!(15&H)&&(N+=4,H>>>=4),!(3&H)&&(N+=2,H>>>=2),!(1&H)&&N++,N},a.prototype.bitLength=function(){var I=this.words[this.length-1],H=this._countBits(I);return 26*(this.length-1)+H},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,H=0;H<this.length;H++){var N=this._zeroBits(this.words[H]);if(I+=N,N!==26)break}return I},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},a.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return this.negative!==0},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var H=0;H<I.length;H++)this.words[H]=this.words[H]|I.words[H];return this.strip()},a.prototype.ior=function(I){return n((this.negative|I.negative)==0),this.iuor(I)},a.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},a.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},a.prototype.iuand=function(I){var H;H=this.length>I.length?I:this;for(var N=0;N<H.length;N++)this.words[N]=this.words[N]&I.words[N];return this.length=H.length,this.strip()},a.prototype.iand=function(I){return n((this.negative|I.negative)==0),this.iuand(I)},a.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},a.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},a.prototype.iuxor=function(I){var H,N;this.length>I.length?(H=this,N=I):(H=I,N=this);for(var F=0;F<N.length;F++)this.words[F]=H.words[F]^N.words[F];if(this!==H)for(;F<H.length;F++)this.words[F]=H.words[F];return this.length=H.length,this.strip()},a.prototype.ixor=function(I){return n((this.negative|I.negative)==0),this.iuxor(I)},a.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},a.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},a.prototype.inotn=function(I){n(typeof I=="number"&&I>=0);var H=0|Math.ceil(I/26),N=I%26;this._expand(H),N>0&&H--;for(var F=0;F<H;F++)this.words[F]=67108863&~this.words[F];return N>0&&(this.words[F]=~this.words[F]&67108863>>26-N),this.strip()},a.prototype.notn=function(I){return this.clone().inotn(I)},a.prototype.setn=function(I,H){n(typeof I=="number"&&I>=0);var N=I/26|0,F=I%26;return this._expand(N+1),this.words[N]=H?this.words[N]|1<<F:this.words[N]&~(1<<F),this.strip()},a.prototype.iadd=function(I){var H,N,F;if(this.negative!==0&&I.negative===0)return this.negative=0,H=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,H=this.isub(I),I.negative=1,H._normSign();this.length>I.length?(N=this,F=I):(N=I,F=this);for(var V=0,W=0;W<F.length;W++)H=(0|N.words[W])+(0|F.words[W])+V,this.words[W]=67108863&H,V=H>>>26;for(;V!==0&&W<N.length;W++)H=(0|N.words[W])+V,this.words[W]=67108863&H,V=H>>>26;if(this.length=N.length,V!==0)this.words[this.length]=V,this.length++;else if(N!==this)for(;W<N.length;W++)this.words[W]=N.words[W];return this},a.prototype.add=function(I){var H;return I.negative!==0&&this.negative===0?(I.negative=0,H=this.sub(I),I.negative^=1,H):I.negative===0&&this.negative!==0?(this.negative=0,H=I.sub(this),this.negative=1,H):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},a.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var H=this.iadd(I);return I.negative=1,H._normSign()}if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var N,F,V=this.cmp(I);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;V>0?(N=this,F=I):(N=I,F=this);for(var W=0,te=0;te<F.length;te++)W=(H=(0|N.words[te])-(0|F.words[te])+W)>>26,this.words[te]=67108863&H;for(;W!==0&&te<N.length;te++)W=(H=(0|N.words[te])+W)>>26,this.words[te]=67108863&H;if(W===0&&te<N.length&&N!==this)for(;te<N.length;te++)this.words[te]=N.words[te];return this.length=Math.max(this.length,te),N!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(I){return this.clone().isub(I)};var y=function(I,H,N){var F,V,W,te=I.words,Q=H.words,X=N.words,q=0,Z=0|te[0],J=8191&Z,ne=Z>>>13,re=0|te[1],ae=8191&re,ue=re>>>13,he=0|te[2],de=8191&he,xe=he>>>13,me=0|te[3],ve=8191&me,Le=me>>>13,Ae=0|te[4],we=8191&Ae,se=Ae>>>13,oe=0|te[5],fe=8191&oe,Se=oe>>>13,Me=0|te[6],be=8191&Me,Ie=Me>>>13,Be=0|te[7],ce=8191&Be,Te=Be>>>13,ye=0|te[8],Pe=8191&ye,Re=ye>>>13,ze=0|te[9],He=8191&ze,We=ze>>>13,Je=0|Q[0],lt=8191&Je,et=Je>>>13,yt=0|Q[1],_t=8191&yt,xt=yt>>>13,at=0|Q[2],ot=8191&at,At=at>>>13,Ct=0|Q[3],zt=8191&Ct,St=Ct>>>13,qe=0|Q[4],Xe=8191&qe,Ve=qe>>>13,Ze=0|Q[5],st=8191&Ze,nt=Ze>>>13,De=0|Q[6],Fe=8191&De,rt=De>>>13,tt=0|Q[7],gt=8191&tt,dt=tt>>>13,mt=0|Q[8],ft=8191&mt,kt=mt>>>13,ht=0|Q[9],pt=8191&ht,wt=ht>>>13;N.negative=I.negative^H.negative,N.length=19;var Ft=(q+(F=Math.imul(J,lt))|0)+((8191&(V=(V=Math.imul(J,et))+Math.imul(ne,lt)|0))<<13)|0;q=((W=Math.imul(ne,et))+(V>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,F=Math.imul(ae,lt),V=(V=Math.imul(ae,et))+Math.imul(ue,lt)|0,W=Math.imul(ue,et);var Nt=(q+(F=F+Math.imul(J,_t)|0)|0)+((8191&(V=(V=V+Math.imul(J,xt)|0)+Math.imul(ne,_t)|0))<<13)|0;q=((W=W+Math.imul(ne,xt)|0)+(V>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,F=Math.imul(de,lt),V=(V=Math.imul(de,et))+Math.imul(xe,lt)|0,W=Math.imul(xe,et),F=F+Math.imul(ae,_t)|0,V=(V=V+Math.imul(ae,xt)|0)+Math.imul(ue,_t)|0,W=W+Math.imul(ue,xt)|0;var Gt=(q+(F=F+Math.imul(J,ot)|0)|0)+((8191&(V=(V=V+Math.imul(J,At)|0)+Math.imul(ne,ot)|0))<<13)|0;q=((W=W+Math.imul(ne,At)|0)+(V>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,F=Math.imul(ve,lt),V=(V=Math.imul(ve,et))+Math.imul(Le,lt)|0,W=Math.imul(Le,et),F=F+Math.imul(de,_t)|0,V=(V=V+Math.imul(de,xt)|0)+Math.imul(xe,_t)|0,W=W+Math.imul(xe,xt)|0,F=F+Math.imul(ae,ot)|0,V=(V=V+Math.imul(ae,At)|0)+Math.imul(ue,ot)|0,W=W+Math.imul(ue,At)|0;var an=(q+(F=F+Math.imul(J,zt)|0)|0)+((8191&(V=(V=V+Math.imul(J,St)|0)+Math.imul(ne,zt)|0))<<13)|0;q=((W=W+Math.imul(ne,St)|0)+(V>>>13)|0)+(an>>>26)|0,an&=67108863,F=Math.imul(we,lt),V=(V=Math.imul(we,et))+Math.imul(se,lt)|0,W=Math.imul(se,et),F=F+Math.imul(ve,_t)|0,V=(V=V+Math.imul(ve,xt)|0)+Math.imul(Le,_t)|0,W=W+Math.imul(Le,xt)|0,F=F+Math.imul(de,ot)|0,V=(V=V+Math.imul(de,At)|0)+Math.imul(xe,ot)|0,W=W+Math.imul(xe,At)|0,F=F+Math.imul(ae,zt)|0,V=(V=V+Math.imul(ae,St)|0)+Math.imul(ue,zt)|0,W=W+Math.imul(ue,St)|0;var Wt=(q+(F=F+Math.imul(J,Xe)|0)|0)+((8191&(V=(V=V+Math.imul(J,Ve)|0)+Math.imul(ne,Xe)|0))<<13)|0;q=((W=W+Math.imul(ne,Ve)|0)+(V>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,F=Math.imul(fe,lt),V=(V=Math.imul(fe,et))+Math.imul(Se,lt)|0,W=Math.imul(Se,et),F=F+Math.imul(we,_t)|0,V=(V=V+Math.imul(we,xt)|0)+Math.imul(se,_t)|0,W=W+Math.imul(se,xt)|0,F=F+Math.imul(ve,ot)|0,V=(V=V+Math.imul(ve,At)|0)+Math.imul(Le,ot)|0,W=W+Math.imul(Le,At)|0,F=F+Math.imul(de,zt)|0,V=(V=V+Math.imul(de,St)|0)+Math.imul(xe,zt)|0,W=W+Math.imul(xe,St)|0,F=F+Math.imul(ae,Xe)|0,V=(V=V+Math.imul(ae,Ve)|0)+Math.imul(ue,Xe)|0,W=W+Math.imul(ue,Ve)|0;var Yt=(q+(F=F+Math.imul(J,st)|0)|0)+((8191&(V=(V=V+Math.imul(J,nt)|0)+Math.imul(ne,st)|0))<<13)|0;q=((W=W+Math.imul(ne,nt)|0)+(V>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,F=Math.imul(be,lt),V=(V=Math.imul(be,et))+Math.imul(Ie,lt)|0,W=Math.imul(Ie,et),F=F+Math.imul(fe,_t)|0,V=(V=V+Math.imul(fe,xt)|0)+Math.imul(Se,_t)|0,W=W+Math.imul(Se,xt)|0,F=F+Math.imul(we,ot)|0,V=(V=V+Math.imul(we,At)|0)+Math.imul(se,ot)|0,W=W+Math.imul(se,At)|0,F=F+Math.imul(ve,zt)|0,V=(V=V+Math.imul(ve,St)|0)+Math.imul(Le,zt)|0,W=W+Math.imul(Le,St)|0,F=F+Math.imul(de,Xe)|0,V=(V=V+Math.imul(de,Ve)|0)+Math.imul(xe,Xe)|0,W=W+Math.imul(xe,Ve)|0,F=F+Math.imul(ae,st)|0,V=(V=V+Math.imul(ae,nt)|0)+Math.imul(ue,st)|0,W=W+Math.imul(ue,nt)|0;var en=(q+(F=F+Math.imul(J,Fe)|0)|0)+((8191&(V=(V=V+Math.imul(J,rt)|0)+Math.imul(ne,Fe)|0))<<13)|0;q=((W=W+Math.imul(ne,rt)|0)+(V>>>13)|0)+(en>>>26)|0,en&=67108863,F=Math.imul(ce,lt),V=(V=Math.imul(ce,et))+Math.imul(Te,lt)|0,W=Math.imul(Te,et),F=F+Math.imul(be,_t)|0,V=(V=V+Math.imul(be,xt)|0)+Math.imul(Ie,_t)|0,W=W+Math.imul(Ie,xt)|0,F=F+Math.imul(fe,ot)|0,V=(V=V+Math.imul(fe,At)|0)+Math.imul(Se,ot)|0,W=W+Math.imul(Se,At)|0,F=F+Math.imul(we,zt)|0,V=(V=V+Math.imul(we,St)|0)+Math.imul(se,zt)|0,W=W+Math.imul(se,St)|0,F=F+Math.imul(ve,Xe)|0,V=(V=V+Math.imul(ve,Ve)|0)+Math.imul(Le,Xe)|0,W=W+Math.imul(Le,Ve)|0,F=F+Math.imul(de,st)|0,V=(V=V+Math.imul(de,nt)|0)+Math.imul(xe,st)|0,W=W+Math.imul(xe,nt)|0,F=F+Math.imul(ae,Fe)|0,V=(V=V+Math.imul(ae,rt)|0)+Math.imul(ue,Fe)|0,W=W+Math.imul(ue,rt)|0;var Tn=(q+(F=F+Math.imul(J,gt)|0)|0)+((8191&(V=(V=V+Math.imul(J,dt)|0)+Math.imul(ne,gt)|0))<<13)|0;q=((W=W+Math.imul(ne,dt)|0)+(V>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,F=Math.imul(Pe,lt),V=(V=Math.imul(Pe,et))+Math.imul(Re,lt)|0,W=Math.imul(Re,et),F=F+Math.imul(ce,_t)|0,V=(V=V+Math.imul(ce,xt)|0)+Math.imul(Te,_t)|0,W=W+Math.imul(Te,xt)|0,F=F+Math.imul(be,ot)|0,V=(V=V+Math.imul(be,At)|0)+Math.imul(Ie,ot)|0,W=W+Math.imul(Ie,At)|0,F=F+Math.imul(fe,zt)|0,V=(V=V+Math.imul(fe,St)|0)+Math.imul(Se,zt)|0,W=W+Math.imul(Se,St)|0,F=F+Math.imul(we,Xe)|0,V=(V=V+Math.imul(we,Ve)|0)+Math.imul(se,Xe)|0,W=W+Math.imul(se,Ve)|0,F=F+Math.imul(ve,st)|0,V=(V=V+Math.imul(ve,nt)|0)+Math.imul(Le,st)|0,W=W+Math.imul(Le,nt)|0,F=F+Math.imul(de,Fe)|0,V=(V=V+Math.imul(de,rt)|0)+Math.imul(xe,Fe)|0,W=W+Math.imul(xe,rt)|0,F=F+Math.imul(ae,gt)|0,V=(V=V+Math.imul(ae,dt)|0)+Math.imul(ue,gt)|0,W=W+Math.imul(ue,dt)|0;var Bn=(q+(F=F+Math.imul(J,ft)|0)|0)+((8191&(V=(V=V+Math.imul(J,kt)|0)+Math.imul(ne,ft)|0))<<13)|0;q=((W=W+Math.imul(ne,kt)|0)+(V>>>13)|0)+(Bn>>>26)|0,Bn&=67108863,F=Math.imul(He,lt),V=(V=Math.imul(He,et))+Math.imul(We,lt)|0,W=Math.imul(We,et),F=F+Math.imul(Pe,_t)|0,V=(V=V+Math.imul(Pe,xt)|0)+Math.imul(Re,_t)|0,W=W+Math.imul(Re,xt)|0,F=F+Math.imul(ce,ot)|0,V=(V=V+Math.imul(ce,At)|0)+Math.imul(Te,ot)|0,W=W+Math.imul(Te,At)|0,F=F+Math.imul(be,zt)|0,V=(V=V+Math.imul(be,St)|0)+Math.imul(Ie,zt)|0,W=W+Math.imul(Ie,St)|0,F=F+Math.imul(fe,Xe)|0,V=(V=V+Math.imul(fe,Ve)|0)+Math.imul(Se,Xe)|0,W=W+Math.imul(Se,Ve)|0,F=F+Math.imul(we,st)|0,V=(V=V+Math.imul(we,nt)|0)+Math.imul(se,st)|0,W=W+Math.imul(se,nt)|0,F=F+Math.imul(ve,Fe)|0,V=(V=V+Math.imul(ve,rt)|0)+Math.imul(Le,Fe)|0,W=W+Math.imul(Le,rt)|0,F=F+Math.imul(de,gt)|0,V=(V=V+Math.imul(de,dt)|0)+Math.imul(xe,gt)|0,W=W+Math.imul(xe,dt)|0,F=F+Math.imul(ae,ft)|0,V=(V=V+Math.imul(ae,kt)|0)+Math.imul(ue,ft)|0,W=W+Math.imul(ue,kt)|0;var mn=(q+(F=F+Math.imul(J,pt)|0)|0)+((8191&(V=(V=V+Math.imul(J,wt)|0)+Math.imul(ne,pt)|0))<<13)|0;q=((W=W+Math.imul(ne,wt)|0)+(V>>>13)|0)+(mn>>>26)|0,mn&=67108863,F=Math.imul(He,_t),V=(V=Math.imul(He,xt))+Math.imul(We,_t)|0,W=Math.imul(We,xt),F=F+Math.imul(Pe,ot)|0,V=(V=V+Math.imul(Pe,At)|0)+Math.imul(Re,ot)|0,W=W+Math.imul(Re,At)|0,F=F+Math.imul(ce,zt)|0,V=(V=V+Math.imul(ce,St)|0)+Math.imul(Te,zt)|0,W=W+Math.imul(Te,St)|0,F=F+Math.imul(be,Xe)|0,V=(V=V+Math.imul(be,Ve)|0)+Math.imul(Ie,Xe)|0,W=W+Math.imul(Ie,Ve)|0,F=F+Math.imul(fe,st)|0,V=(V=V+Math.imul(fe,nt)|0)+Math.imul(Se,st)|0,W=W+Math.imul(Se,nt)|0,F=F+Math.imul(we,Fe)|0,V=(V=V+Math.imul(we,rt)|0)+Math.imul(se,Fe)|0,W=W+Math.imul(se,rt)|0,F=F+Math.imul(ve,gt)|0,V=(V=V+Math.imul(ve,dt)|0)+Math.imul(Le,gt)|0,W=W+Math.imul(Le,dt)|0,F=F+Math.imul(de,ft)|0,V=(V=V+Math.imul(de,kt)|0)+Math.imul(xe,ft)|0,W=W+Math.imul(xe,kt)|0;var Kt=(q+(F=F+Math.imul(ae,pt)|0)|0)+((8191&(V=(V=V+Math.imul(ae,wt)|0)+Math.imul(ue,pt)|0))<<13)|0;q=((W=W+Math.imul(ue,wt)|0)+(V>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,F=Math.imul(He,ot),V=(V=Math.imul(He,At))+Math.imul(We,ot)|0,W=Math.imul(We,At),F=F+Math.imul(Pe,zt)|0,V=(V=V+Math.imul(Pe,St)|0)+Math.imul(Re,zt)|0,W=W+Math.imul(Re,St)|0,F=F+Math.imul(ce,Xe)|0,V=(V=V+Math.imul(ce,Ve)|0)+Math.imul(Te,Xe)|0,W=W+Math.imul(Te,Ve)|0,F=F+Math.imul(be,st)|0,V=(V=V+Math.imul(be,nt)|0)+Math.imul(Ie,st)|0,W=W+Math.imul(Ie,nt)|0,F=F+Math.imul(fe,Fe)|0,V=(V=V+Math.imul(fe,rt)|0)+Math.imul(Se,Fe)|0,W=W+Math.imul(Se,rt)|0,F=F+Math.imul(we,gt)|0,V=(V=V+Math.imul(we,dt)|0)+Math.imul(se,gt)|0,W=W+Math.imul(se,dt)|0,F=F+Math.imul(ve,ft)|0,V=(V=V+Math.imul(ve,kt)|0)+Math.imul(Le,ft)|0,W=W+Math.imul(Le,kt)|0;var cn=(q+(F=F+Math.imul(de,pt)|0)|0)+((8191&(V=(V=V+Math.imul(de,wt)|0)+Math.imul(xe,pt)|0))<<13)|0;q=((W=W+Math.imul(xe,wt)|0)+(V>>>13)|0)+(cn>>>26)|0,cn&=67108863,F=Math.imul(He,zt),V=(V=Math.imul(He,St))+Math.imul(We,zt)|0,W=Math.imul(We,St),F=F+Math.imul(Pe,Xe)|0,V=(V=V+Math.imul(Pe,Ve)|0)+Math.imul(Re,Xe)|0,W=W+Math.imul(Re,Ve)|0,F=F+Math.imul(ce,st)|0,V=(V=V+Math.imul(ce,nt)|0)+Math.imul(Te,st)|0,W=W+Math.imul(Te,nt)|0,F=F+Math.imul(be,Fe)|0,V=(V=V+Math.imul(be,rt)|0)+Math.imul(Ie,Fe)|0,W=W+Math.imul(Ie,rt)|0,F=F+Math.imul(fe,gt)|0,V=(V=V+Math.imul(fe,dt)|0)+Math.imul(Se,gt)|0,W=W+Math.imul(Se,dt)|0,F=F+Math.imul(we,ft)|0,V=(V=V+Math.imul(we,kt)|0)+Math.imul(se,ft)|0,W=W+Math.imul(se,kt)|0;var tn=(q+(F=F+Math.imul(ve,pt)|0)|0)+((8191&(V=(V=V+Math.imul(ve,wt)|0)+Math.imul(Le,pt)|0))<<13)|0;q=((W=W+Math.imul(Le,wt)|0)+(V>>>13)|0)+(tn>>>26)|0,tn&=67108863,F=Math.imul(He,Xe),V=(V=Math.imul(He,Ve))+Math.imul(We,Xe)|0,W=Math.imul(We,Ve),F=F+Math.imul(Pe,st)|0,V=(V=V+Math.imul(Pe,nt)|0)+Math.imul(Re,st)|0,W=W+Math.imul(Re,nt)|0,F=F+Math.imul(ce,Fe)|0,V=(V=V+Math.imul(ce,rt)|0)+Math.imul(Te,Fe)|0,W=W+Math.imul(Te,rt)|0,F=F+Math.imul(be,gt)|0,V=(V=V+Math.imul(be,dt)|0)+Math.imul(Ie,gt)|0,W=W+Math.imul(Ie,dt)|0,F=F+Math.imul(fe,ft)|0,V=(V=V+Math.imul(fe,kt)|0)+Math.imul(Se,ft)|0,W=W+Math.imul(Se,kt)|0;var un=(q+(F=F+Math.imul(we,pt)|0)|0)+((8191&(V=(V=V+Math.imul(we,wt)|0)+Math.imul(se,pt)|0))<<13)|0;q=((W=W+Math.imul(se,wt)|0)+(V>>>13)|0)+(un>>>26)|0,un&=67108863,F=Math.imul(He,st),V=(V=Math.imul(He,nt))+Math.imul(We,st)|0,W=Math.imul(We,nt),F=F+Math.imul(Pe,Fe)|0,V=(V=V+Math.imul(Pe,rt)|0)+Math.imul(Re,Fe)|0,W=W+Math.imul(Re,rt)|0,F=F+Math.imul(ce,gt)|0,V=(V=V+Math.imul(ce,dt)|0)+Math.imul(Te,gt)|0,W=W+Math.imul(Te,dt)|0,F=F+Math.imul(be,ft)|0,V=(V=V+Math.imul(be,kt)|0)+Math.imul(Ie,ft)|0,W=W+Math.imul(Ie,kt)|0;var yn=(q+(F=F+Math.imul(fe,pt)|0)|0)+((8191&(V=(V=V+Math.imul(fe,wt)|0)+Math.imul(Se,pt)|0))<<13)|0;q=((W=W+Math.imul(Se,wt)|0)+(V>>>13)|0)+(yn>>>26)|0,yn&=67108863,F=Math.imul(He,Fe),V=(V=Math.imul(He,rt))+Math.imul(We,Fe)|0,W=Math.imul(We,rt),F=F+Math.imul(Pe,gt)|0,V=(V=V+Math.imul(Pe,dt)|0)+Math.imul(Re,gt)|0,W=W+Math.imul(Re,dt)|0,F=F+Math.imul(ce,ft)|0,V=(V=V+Math.imul(ce,kt)|0)+Math.imul(Te,ft)|0,W=W+Math.imul(Te,kt)|0;var En=(q+(F=F+Math.imul(be,pt)|0)|0)+((8191&(V=(V=V+Math.imul(be,wt)|0)+Math.imul(Ie,pt)|0))<<13)|0;q=((W=W+Math.imul(Ie,wt)|0)+(V>>>13)|0)+(En>>>26)|0,En&=67108863,F=Math.imul(He,gt),V=(V=Math.imul(He,dt))+Math.imul(We,gt)|0,W=Math.imul(We,dt),F=F+Math.imul(Pe,ft)|0,V=(V=V+Math.imul(Pe,kt)|0)+Math.imul(Re,ft)|0,W=W+Math.imul(Re,kt)|0;var Sn=(q+(F=F+Math.imul(ce,pt)|0)|0)+((8191&(V=(V=V+Math.imul(ce,wt)|0)+Math.imul(Te,pt)|0))<<13)|0;q=((W=W+Math.imul(Te,wt)|0)+(V>>>13)|0)+(Sn>>>26)|0,Sn&=67108863,F=Math.imul(He,ft),V=(V=Math.imul(He,kt))+Math.imul(We,ft)|0,W=Math.imul(We,kt);var Nn=(q+(F=F+Math.imul(Pe,pt)|0)|0)+((8191&(V=(V=V+Math.imul(Pe,wt)|0)+Math.imul(Re,pt)|0))<<13)|0;q=((W=W+Math.imul(Re,wt)|0)+(V>>>13)|0)+(Nn>>>26)|0,Nn&=67108863;var _n=(q+(F=Math.imul(He,pt))|0)+((8191&(V=(V=Math.imul(He,wt))+Math.imul(We,pt)|0))<<13)|0;return q=((W=Math.imul(We,wt))+(V>>>13)|0)+(_n>>>26)|0,_n&=67108863,X[0]=Ft,X[1]=Nt,X[2]=Gt,X[3]=an,X[4]=Wt,X[5]=Yt,X[6]=en,X[7]=Tn,X[8]=Bn,X[9]=mn,X[10]=Kt,X[11]=cn,X[12]=tn,X[13]=un,X[14]=yn,X[15]=En,X[16]=Sn,X[17]=Nn,X[18]=_n,q!==0&&(X[19]=q,N.length++),N};function w(I,H,N){return new d().mulp(I,H,N)}function d(I,H){this.x=I,this.y=H}Math.imul||(y=v),a.prototype.mulTo=function(I,H){var N,F=this.length+I.length;return N=this.length===10&&I.length===10?y(this,I,H):F<63?v(this,I,H):F<1024?function(V,W,te){te.negative=W.negative^V.negative,te.length=V.length+W.length;for(var Q=0,X=0,q=0;q<te.length-1;q++){var Z=X;X=0;for(var J=67108863&Q,ne=Math.min(q,W.length-1),re=Math.max(0,q-V.length+1);re<=ne;re++){var ae=q-re,ue=(0|V.words[ae])*(0|W.words[re]),he=67108863&ue;J=67108863&(he=he+J|0),X+=(Z=(Z=Z+(ue/67108864|0)|0)+(he>>>26)|0)>>>26,Z&=67108863}te.words[q]=J,Q=Z,Z=X}return Q!==0?te.words[q]=Q:te.length--,te.strip()}(this,I,H):w(this,I,H),N},d.prototype.makeRBT=function(I){for(var H=new Array(I),N=a.prototype._countBits(I)-1,F=0;F<I;F++)H[F]=this.revBin(F,N,I);return H},d.prototype.revBin=function(I,H,N){if(I===0||I===N-1)return I;for(var F=0,V=0;V<H;V++)F|=(1&I)<<H-V-1,I>>=1;return F},d.prototype.permute=function(I,H,N,F,V,W){for(var te=0;te<W;te++)F[te]=H[I[te]],V[te]=N[I[te]]},d.prototype.transform=function(I,H,N,F,V,W){this.permute(W,I,H,N,F,V);for(var te=1;te<V;te<<=1)for(var Q=te<<1,X=Math.cos(2*Math.PI/Q),q=Math.sin(2*Math.PI/Q),Z=0;Z<V;Z+=Q)for(var J=X,ne=q,re=0;re<te;re++){var ae=N[Z+re],ue=F[Z+re],he=N[Z+re+te],de=F[Z+re+te],xe=J*he-ne*de;de=J*de+ne*he,he=xe,N[Z+re]=ae+he,F[Z+re]=ue+de,N[Z+re+te]=ae-he,F[Z+re+te]=ue-de,re!==Q&&(xe=X*J-q*ne,ne=X*ne+q*J,J=xe)}},d.prototype.guessLen13b=function(I,H){var N=1|Math.max(H,I),F=1&N,V=0;for(N=N/2|0;N;N>>>=1)V++;return 1<<V+1+F},d.prototype.conjugate=function(I,H,N){if(!(N<=1))for(var F=0;F<N/2;F++){var V=I[F];I[F]=I[N-F-1],I[N-F-1]=V,V=H[F],H[F]=-H[N-F-1],H[N-F-1]=-V}},d.prototype.normalize13b=function(I,H){for(var N=0,F=0;F<H/2;F++){var V=8192*Math.round(I[2*F+1]/H)+Math.round(I[2*F]/H)+N;I[F]=67108863&V,N=V<67108864?0:V/67108864|0}return I},d.prototype.convert13b=function(I,H,N,F){for(var V=0,W=0;W<H;W++)V+=0|I[W],N[2*W]=8191&V,V>>>=13,N[2*W+1]=8191&V,V>>>=13;for(W=2*H;W<F;++W)N[W]=0;n(V===0),n((-8192&V)==0)},d.prototype.stub=function(I){for(var H=new Array(I),N=0;N<I;N++)H[N]=0;return H},d.prototype.mulp=function(I,H,N){var F=2*this.guessLen13b(I.length,H.length),V=this.makeRBT(F),W=this.stub(F),te=new Array(F),Q=new Array(F),X=new Array(F),q=new Array(F),Z=new Array(F),J=new Array(F),ne=N.words;ne.length=F,this.convert13b(I.words,I.length,te,F),this.convert13b(H.words,H.length,q,F),this.transform(te,W,Q,X,F,V),this.transform(q,W,Z,J,F,V);for(var re=0;re<F;re++){var ae=Q[re]*Z[re]-X[re]*J[re];X[re]=Q[re]*J[re]+X[re]*Z[re],Q[re]=ae}return this.conjugate(Q,X,F),this.transform(Q,X,ne,W,F,V),this.conjugate(ne,W,F),this.normalize13b(ne,F),N.negative=I.negative^H.negative,N.length=I.length+H.length,N.strip()},a.prototype.mul=function(I){var H=new a(null);return H.words=new Array(this.length+I.length),this.mulTo(I,H)},a.prototype.mulf=function(I){var H=new a(null);return H.words=new Array(this.length+I.length),w(this,I,H)},a.prototype.imul=function(I){return this.clone().mulTo(I,this)},a.prototype.imuln=function(I){n(typeof I=="number"),n(I<67108864);for(var H=0,N=0;N<this.length;N++){var F=(0|this.words[N])*I,V=(67108863&F)+(67108863&H);H>>=26,H+=F/67108864|0,H+=V>>>26,this.words[N]=67108863&V}return H!==0&&(this.words[N]=H,this.length++),this},a.prototype.muln=function(I){return this.clone().imuln(I)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(I){var H=function(W){for(var te=new Array(W.bitLength()),Q=0;Q<te.length;Q++){var X=Q/26|0,q=Q%26;te[Q]=(W.words[X]&1<<q)>>>q}return te}(I);if(H.length===0)return new a(1);for(var N=this,F=0;F<H.length&&H[F]===0;F++,N=N.sqr());if(++F<H.length)for(var V=N.sqr();F<H.length;F++,V=V.sqr())H[F]!==0&&(N=N.mul(V));return N},a.prototype.iushln=function(I){n(typeof I=="number"&&I>=0);var H,N=I%26,F=(I-N)/26,V=67108863>>>26-N<<26-N;if(N!==0){var W=0;for(H=0;H<this.length;H++){var te=this.words[H]&V,Q=(0|this.words[H])-te<<N;this.words[H]=Q|W,W=te>>>26-N}W&&(this.words[H]=W,this.length++)}if(F!==0){for(H=this.length-1;H>=0;H--)this.words[H+F]=this.words[H];for(H=0;H<F;H++)this.words[H]=0;this.length+=F}return this.strip()},a.prototype.ishln=function(I){return n(this.negative===0),this.iushln(I)},a.prototype.iushrn=function(I,H,N){var F;n(typeof I=="number"&&I>=0),F=H?(H-H%26)/26:0;var V=I%26,W=Math.min((I-V)/26,this.length),te=67108863^67108863>>>V<<V,Q=N;if(F-=W,F=Math.max(0,F),Q){for(var X=0;X<W;X++)Q.words[X]=this.words[X];Q.length=W}if(W!==0)if(this.length>W)for(this.length-=W,X=0;X<this.length;X++)this.words[X]=this.words[X+W];else this.words[0]=0,this.length=1;var q=0;for(X=this.length-1;X>=0&&(q!==0||X>=F);X--){var Z=0|this.words[X];this.words[X]=q<<26-V|Z>>>V,q=Z&te}return Q&&q!==0&&(Q.words[Q.length++]=q),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(I,H,N){return n(this.negative===0),this.iushrn(I,H,N)},a.prototype.shln=function(I){return this.clone().ishln(I)},a.prototype.ushln=function(I){return this.clone().iushln(I)},a.prototype.shrn=function(I){return this.clone().ishrn(I)},a.prototype.ushrn=function(I){return this.clone().iushrn(I)},a.prototype.testn=function(I){n(typeof I=="number"&&I>=0);var H=I%26,N=(I-H)/26,F=1<<H;return!(this.length<=N||!(this.words[N]&F))},a.prototype.imaskn=function(I){n(typeof I=="number"&&I>=0);var H=I%26,N=(I-H)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(H!==0&&N++,this.length=Math.min(N,this.length),H!==0){var F=67108863^67108863>>>H<<H;this.words[this.length-1]&=F}return this.strip()},a.prototype.maskn=function(I){return this.clone().imaskn(I)},a.prototype.iaddn=function(I){return n(typeof I=="number"),n(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},a.prototype._iaddn=function(I){this.words[0]+=I;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},a.prototype.isubn=function(I){if(n(typeof I=="number"),n(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this.strip()},a.prototype.addn=function(I){return this.clone().iaddn(I)},a.prototype.subn=function(I){return this.clone().isubn(I)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(I,H,N){var F,V,W=I.length+N;this._expand(W);var te=0;for(F=0;F<I.length;F++){V=(0|this.words[F+N])+te;var Q=(0|I.words[F])*H;te=((V-=67108863&Q)>>26)-(Q/67108864|0),this.words[F+N]=67108863&V}for(;F<this.length-N;F++)te=(V=(0|this.words[F+N])+te)>>26,this.words[F+N]=67108863&V;if(te===0)return this.strip();for(n(te===-1),te=0,F=0;F<this.length;F++)te=(V=-(0|this.words[F])+te)>>26,this.words[F]=67108863&V;return this.negative=1,this.strip()},a.prototype._wordDiv=function(I,H){var N=(this.length,I.length),F=this.clone(),V=I,W=0|V.words[V.length-1];(N=26-this._countBits(W))!=0&&(V=V.ushln(N),F.iushln(N),W=0|V.words[V.length-1]);var te,Q=F.length-V.length;if(H!=="mod"){(te=new a(null)).length=Q+1,te.words=new Array(te.length);for(var X=0;X<te.length;X++)te.words[X]=0}var q=F.clone()._ishlnsubmul(V,1,Q);q.negative===0&&(F=q,te&&(te.words[Q]=1));for(var Z=Q-1;Z>=0;Z--){var J=67108864*(0|F.words[V.length+Z])+(0|F.words[V.length+Z-1]);for(J=Math.min(J/W|0,67108863),F._ishlnsubmul(V,J,Z);F.negative!==0;)J--,F.negative=0,F._ishlnsubmul(V,1,Z),F.isZero()||(F.negative^=1);te&&(te.words[Z]=J)}return te&&te.strip(),F.strip(),H!=="div"&&N!==0&&F.iushrn(N),{div:te||null,mod:F}},a.prototype.divmod=function(I,H,N){return n(!I.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:this.negative!==0&&I.negative===0?(W=this.neg().divmod(I,H),H!=="mod"&&(F=W.div.neg()),H!=="div"&&(V=W.mod.neg(),N&&V.negative!==0&&V.iadd(I)),{div:F,mod:V}):this.negative===0&&I.negative!==0?(W=this.divmod(I.neg(),H),H!=="mod"&&(F=W.div.neg()),{div:F,mod:W.mod}):this.negative&I.negative?(W=this.neg().divmod(I.neg(),H),H!=="div"&&(V=W.mod.neg(),N&&V.negative!==0&&V.isub(I)),{div:W.div,mod:V}):I.length>this.length||this.cmp(I)<0?{div:new a(0),mod:this}:I.length===1?H==="div"?{div:this.divn(I.words[0]),mod:null}:H==="mod"?{div:null,mod:new a(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new a(this.modn(I.words[0]))}:this._wordDiv(I,H);var F,V,W},a.prototype.div=function(I){return this.divmod(I,"div",!1).div},a.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},a.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},a.prototype.divRound=function(I){var H=this.divmod(I);if(H.mod.isZero())return H.div;var N=H.div.negative!==0?H.mod.isub(I):H.mod,F=I.ushrn(1),V=I.andln(1),W=N.cmp(F);return W<0||V===1&&W===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},a.prototype.modn=function(I){n(I<=67108863);for(var H=67108864%I,N=0,F=this.length-1;F>=0;F--)N=(H*N+(0|this.words[F]))%I;return N},a.prototype.idivn=function(I){n(I<=67108863);for(var H=0,N=this.length-1;N>=0;N--){var F=(0|this.words[N])+67108864*H;this.words[N]=F/I|0,H=F%I}return this.strip()},a.prototype.divn=function(I){return this.clone().idivn(I)},a.prototype.egcd=function(I){n(I.negative===0),n(!I.isZero());var H=this,N=I.clone();H=H.negative!==0?H.umod(I):H.clone();for(var F=new a(1),V=new a(0),W=new a(0),te=new a(1),Q=0;H.isEven()&&N.isEven();)H.iushrn(1),N.iushrn(1),++Q;for(var X=N.clone(),q=H.clone();!H.isZero();){for(var Z=0,J=1;!(H.words[0]&J)&&Z<26;++Z,J<<=1);if(Z>0)for(H.iushrn(Z);Z-- >0;)(F.isOdd()||V.isOdd())&&(F.iadd(X),V.isub(q)),F.iushrn(1),V.iushrn(1);for(var ne=0,re=1;!(N.words[0]&re)&&ne<26;++ne,re<<=1);if(ne>0)for(N.iushrn(ne);ne-- >0;)(W.isOdd()||te.isOdd())&&(W.iadd(X),te.isub(q)),W.iushrn(1),te.iushrn(1);H.cmp(N)>=0?(H.isub(N),F.isub(W),V.isub(te)):(N.isub(H),W.isub(F),te.isub(V))}return{a:W,b:te,gcd:N.iushln(Q)}},a.prototype._invmp=function(I){n(I.negative===0),n(!I.isZero());var H=this,N=I.clone();H=H.negative!==0?H.umod(I):H.clone();for(var F,V=new a(1),W=new a(0),te=N.clone();H.cmpn(1)>0&&N.cmpn(1)>0;){for(var Q=0,X=1;!(H.words[0]&X)&&Q<26;++Q,X<<=1);if(Q>0)for(H.iushrn(Q);Q-- >0;)V.isOdd()&&V.iadd(te),V.iushrn(1);for(var q=0,Z=1;!(N.words[0]&Z)&&q<26;++q,Z<<=1);if(q>0)for(N.iushrn(q);q-- >0;)W.isOdd()&&W.iadd(te),W.iushrn(1);H.cmp(N)>=0?(H.isub(N),V.isub(W)):(N.isub(H),W.isub(V))}return(F=H.cmpn(1)===0?V:W).cmpn(0)<0&&F.iadd(I),F},a.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var H=this.clone(),N=I.clone();H.negative=0,N.negative=0;for(var F=0;H.isEven()&&N.isEven();F++)H.iushrn(1),N.iushrn(1);for(;;){for(;H.isEven();)H.iushrn(1);for(;N.isEven();)N.iushrn(1);var V=H.cmp(N);if(V<0){var W=H;H=N,N=W}else if(V===0||N.cmpn(1)===0)break;H.isub(N)}return N.iushln(F)},a.prototype.invm=function(I){return this.egcd(I).a.umod(I)},a.prototype.isEven=function(){return(1&this.words[0])==0},a.prototype.isOdd=function(){return(1&this.words[0])==1},a.prototype.andln=function(I){return this.words[0]&I},a.prototype.bincn=function(I){n(typeof I=="number");var H=I%26,N=(I-H)/26,F=1<<H;if(this.length<=N)return this._expand(N+1),this.words[N]|=F,this;for(var V=F,W=N;V!==0&&W<this.length;W++){var te=0|this.words[W];V=(te+=V)>>>26,te&=67108863,this.words[W]=te}return V!==0&&(this.words[W]=V,this.length++),this},a.prototype.isZero=function(){return this.length===1&&this.words[0]===0},a.prototype.cmpn=function(I){var H,N=I<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;if(this.strip(),this.length>1)H=1;else{N&&(I=-I),n(I<=67108863,"Number is too big");var F=0|this.words[0];H=F===I?0:F<I?-1:1}return this.negative!==0?0|-H:H},a.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var H=this.ucmp(I);return this.negative!==0?0|-H:H},a.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var H=0,N=this.length-1;N>=0;N--){var F=0|this.words[N],V=0|I.words[N];if(F!==V){F<V?H=-1:F>V&&(H=1);break}}return H},a.prototype.gtn=function(I){return this.cmpn(I)===1},a.prototype.gt=function(I){return this.cmp(I)===1},a.prototype.gten=function(I){return this.cmpn(I)>=0},a.prototype.gte=function(I){return this.cmp(I)>=0},a.prototype.ltn=function(I){return this.cmpn(I)===-1},a.prototype.lt=function(I){return this.cmp(I)===-1},a.prototype.lten=function(I){return this.cmpn(I)<=0},a.prototype.lte=function(I){return this.cmp(I)<=0},a.prototype.eqn=function(I){return this.cmpn(I)===0},a.prototype.eq=function(I){return this.cmp(I)===0},a.red=function(I){return new z(I)},a.prototype.toRed=function(I){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},a.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(I){return this.red=I,this},a.prototype.forceRed=function(I){return n(!this.red,"Already a number in reduction context"),this._forceRed(I)},a.prototype.redAdd=function(I){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},a.prototype.redIAdd=function(I){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},a.prototype.redSub=function(I){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},a.prototype.redISub=function(I){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},a.prototype.redShl=function(I){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},a.prototype.redMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},a.prototype.redIMul=function(I){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},a.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(I){return n(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var S={k256:null,p224:null,p192:null,p25519:null};function T(I,H){this.name=I,this.p=new a(H,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){T.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){T.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){T.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function O(){T.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function z(I){if(typeof I=="string"){var H=a._prime(I);this.m=H.p,this.prime=H}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function G(I){z.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}T.prototype._tmp=function(){var I=new a(null);return I.words=new Array(Math.ceil(this.n/13)),I},T.prototype.ireduce=function(I){var H,N=I;do this.split(N,this.tmp),H=(N=(N=this.imulK(N)).iadd(this.tmp)).bitLength();while(H>this.n);var F=H<this.n?-1:N.ucmp(this.p);return F===0?(N.words[0]=0,N.length=1):F>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},T.prototype.split=function(I,H){I.iushrn(this.n,0,H)},T.prototype.imulK=function(I){return I.imul(this.k)},s(E,T),E.prototype.split=function(I,H){for(var N=4194303,F=Math.min(I.length,9),V=0;V<F;V++)H.words[V]=I.words[V];if(H.length=F,I.length<=9)return I.words[0]=0,void(I.length=1);var W=I.words[9];for(H.words[H.length++]=W&N,V=10;V<I.length;V++){var te=0|I.words[V];I.words[V-10]=(te&N)<<4|W>>>22,W=te}W>>>=22,I.words[V-10]=W,W===0&&I.length>10?I.length-=10:I.length-=9},E.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var H=0,N=0;N<I.length;N++){var F=0|I.words[N];H+=977*F,I.words[N]=67108863&H,H=64*F+(H/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I},s(C,T),s(L,T),s(O,T),O.prototype.imulK=function(I){for(var H=0,N=0;N<I.length;N++){var F=19*(0|I.words[N])+H,V=67108863&F;F>>>=26,I.words[N]=V,H=F}return H!==0&&(I.words[I.length++]=H),I},a._prime=function(I){if(S[I])return S[I];var H;if(I==="k256")H=new E;else if(I==="p224")H=new C;else if(I==="p192")H=new L;else{if(I!=="p25519")throw new Error("Unknown prime "+I);H=new O}return S[I]=H,H},z.prototype._verify1=function(I){n(I.negative===0,"red works only with positives"),n(I.red,"red works only with red numbers")},z.prototype._verify2=function(I,H){n((I.negative|H.negative)==0,"red works only with positives"),n(I.red&&I.red===H.red,"red works only with red numbers")},z.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},z.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},z.prototype.add=function(I,H){this._verify2(I,H);var N=I.add(H);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},z.prototype.iadd=function(I,H){this._verify2(I,H);var N=I.iadd(H);return N.cmp(this.m)>=0&&N.isub(this.m),N},z.prototype.sub=function(I,H){this._verify2(I,H);var N=I.sub(H);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},z.prototype.isub=function(I,H){this._verify2(I,H);var N=I.isub(H);return N.cmpn(0)<0&&N.iadd(this.m),N},z.prototype.shl=function(I,H){return this._verify1(I),this.imod(I.ushln(H))},z.prototype.imul=function(I,H){return this._verify2(I,H),this.imod(I.imul(H))},z.prototype.mul=function(I,H){return this._verify2(I,H),this.imod(I.mul(H))},z.prototype.isqr=function(I){return this.imul(I,I.clone())},z.prototype.sqr=function(I){return this.mul(I,I)},z.prototype.sqrt=function(I){if(I.isZero())return I.clone();var H=this.m.andln(3);if(n(H%2==1),H===3){var N=this.m.add(new a(1)).iushrn(2);return this.pow(I,N)}for(var F=this.m.subn(1),V=0;!F.isZero()&&F.andln(1)===0;)V++,F.iushrn(1);n(!F.isZero());var W=new a(1).toRed(this),te=W.redNeg(),Q=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new a(2*X*X).toRed(this);this.pow(X,Q).cmp(te)!==0;)X.redIAdd(te);for(var q=this.pow(X,F),Z=this.pow(I,F.addn(1).iushrn(1)),J=this.pow(I,F),ne=V;J.cmp(W)!==0;){for(var re=J,ae=0;re.cmp(W)!==0;ae++)re=re.redSqr();n(ae<ne);var ue=this.pow(q,new a(1).iushln(ne-ae-1));Z=Z.redMul(ue),q=ue.redSqr(),J=J.redMul(q),ne=ae}return Z},z.prototype.invm=function(I){var H=I._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},z.prototype.pow=function(I,H){if(H.isZero())return new a(1).toRed(this);if(H.cmpn(1)===0)return I.clone();var N=new Array(16);N[0]=new a(1).toRed(this),N[1]=I;for(var F=2;F<N.length;F++)N[F]=this.mul(N[F-1],I);var V=N[0],W=0,te=0,Q=H.bitLength()%26;for(Q===0&&(Q=26),F=H.length-1;F>=0;F--){for(var X=H.words[F],q=Q-1;q>=0;q--){var Z=X>>q&1;V!==N[0]&&(V=this.sqr(V)),Z!==0||W!==0?(W<<=1,W|=Z,(++te==4||F===0&&q===0)&&(V=this.mul(V,N[W]),te=0,W=0)):te=0}Q=26}return V},z.prototype.convertTo=function(I){var H=I.umod(this.m);return H===I?H.clone():H},z.prototype.convertFrom=function(I){var H=I.clone();return H.red=null,H},a.mont=function(I){return new G(I)},s(G,z),G.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},G.prototype.convertFrom=function(I){var H=this.imod(I.mul(this.rinv));return H.red=null,H},G.prototype.imul=function(I,H){if(I.isZero()||H.isZero())return I.words[0]=0,I.length=1,I;var N=I.imul(H),F=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=N.isub(F).iushrn(this.shift),W=V;return V.cmp(this.m)>=0?W=V.isub(this.m):V.cmpn(0)<0&&(W=V.iadd(this.m)),W._forceRed(this)},G.prototype.mul=function(I,H){if(I.isZero()||H.isZero())return new a(0)._forceRed(this);var N=I.mul(H),F=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=N.isub(F).iushrn(this.shift),W=V;return V.cmp(this.m)>=0?W=V.isub(this.m):V.cmpn(0)<0&&(W=V.iadd(this.m)),W._forceRed(this)},G.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}})(f=e.nmd(f),this)},2692:function(f){f.exports=function(o){var e,i,r,n=o.length,s=0;for(e=0;e<n;++e)s+=o[e].length;var a=new Array(s),u=0;for(e=0;e<n;++e){var p=o[e],c=p.length;for(i=0;i<c;++i){var x=a[u++]=new Array(c-1),g=0;for(r=0;r<c;++r)r!==i&&(x[g++]=p[r]);if(1&i){var h=x[1];x[1]=x[0],x[0]=h}}}return a}},2569:function(f,o,e){f.exports=function(x,g,h){switch(arguments.length){case 1:return i=[],p(b=x,b,c,!0),i;case 2:return typeof g=="function"?p(x,x,g,!0):function(v,y){return i=[],p(v,y,c,!1),i}(x,g);case 3:return p(x,g,h,!1);default:throw new Error("box-intersect: Invalid arguments")}var b};var i,r=e(5306),n=e(1390),s=e(2337);function a(x,g){for(var h=0;h<x;++h)if(!(g[h]<=g[h+x]))return!0;return!1}function u(x,g,h,b){for(var v=0,y=0,w=0,d=x.length;w<d;++w){var S=x[w];if(!a(g,S)){for(var T=0;T<2*g;++T)h[v++]=S[T];b[y++]=w}}return y}function p(x,g,h,b){var v=x.length,y=g.length;if(!(v<=0||y<=0)){var w=x[0].length>>>1;if(!(w<=0)){var d,S=r.mallocDouble(2*w*v),T=r.mallocInt32(v);if((v=u(x,w,S,T))>0){if(w===1&&b)n.init(v),d=n.sweepComplete(w,h,0,v,S,T,0,v,S,T);else{var E=r.mallocDouble(2*w*y),C=r.mallocInt32(y);(y=u(g,w,E,C))>0&&(n.init(v+y),d=w===1?n.sweepBipartite(w,h,0,v,S,T,0,y,E,C):s(w,h,b,v,S,T,y,E,C),r.free(E),r.free(C))}r.free(S),r.free(T)}return d}}}function c(x,g){i.push([x,g])}},7333:function(f,o){function e(i){return i?function(r,n,s,a,u,p,c,x,g,h,b){return u-a>g-x?function(v,y,w,d,S,T,E,C,L,O,z){for(var G=2*v,I=d,H=G*d;I<S;++I,H+=G){var N=T[y+H],F=T[y+H+v],V=E[I];e:for(var W=C,te=G*C;W<L;++W,te+=G){var Q=O[y+te],X=O[y+te+v],q=z[W];if(!(X<N||F<Q)){for(var Z=y+1;Z<v;++Z){var J=T[Z+H],ne=T[Z+v+H],re=O[Z+te],ae=O[Z+v+te];if(ne<re||ae<J)continue e}var ue=w(V,q);if(ue!==void 0)return ue}}}}(r,n,s,a,u,p,c,x,g,h,b):function(v,y,w,d,S,T,E,C,L,O,z){for(var G=2*v,I=C,H=G*C;I<L;++I,H+=G){var N=O[y+H],F=O[y+H+v],V=z[I];e:for(var W=d,te=G*d;W<S;++W,te+=G){var Q=T[y+te],X=T[y+te+v],q=E[W];if(!(F<Q||X<N)){for(var Z=y+1;Z<v;++Z){var J=T[Z+te],ne=T[Z+v+te],re=O[Z+H],ae=O[Z+v+H];if(ne<re||ae<J)continue e}var ue=w(q,V);if(ue!==void 0)return ue}}}}(r,n,s,a,u,p,c,x,g,h,b)}:function(r,n,s,a,u,p,c,x,g,h,b,v){return p-u>h-g?a?function(y,w,d,S,T,E,C,L,O,z,G){for(var I=2*y,H=S,N=I*S;H<T;++H,N+=I){var F=E[w+N],V=E[w+N+y],W=C[H];e:for(var te=L,Q=I*L;te<O;++te,Q+=I){var X=z[w+Q],q=G[te];if(!(X<=F||V<X)){for(var Z=w+1;Z<y;++Z){var J=E[Z+N],ne=E[Z+y+N],re=z[Z+Q],ae=z[Z+y+Q];if(ne<re||ae<J)continue e}var ue=d(q,W);if(ue!==void 0)return ue}}}}(r,n,s,u,p,c,x,g,h,b,v):function(y,w,d,S,T,E,C,L,O,z,G){for(var I=2*y,H=S,N=I*S;H<T;++H,N+=I){var F=E[w+N],V=E[w+N+y],W=C[H];e:for(var te=L,Q=I*L;te<O;++te,Q+=I){var X=z[w+Q],q=G[te];if(!(X<F||V<X)){for(var Z=w+1;Z<y;++Z){var J=E[Z+N],ne=E[Z+y+N],re=z[Z+Q],ae=z[Z+y+Q];if(ne<re||ae<J)continue e}var ue=d(W,q);if(ue!==void 0)return ue}}}}(r,n,s,u,p,c,x,g,h,b,v):a?function(y,w,d,S,T,E,C,L,O,z,G){for(var I=2*y,H=L,N=I*L;H<O;++H,N+=I){var F=z[w+N],V=G[H];e:for(var W=S,te=I*S;W<T;++W,te+=I){var Q=E[w+te],X=E[w+te+y],q=C[W];if(!(F<=Q||X<F)){for(var Z=w+1;Z<y;++Z){var J=E[Z+te],ne=E[Z+y+te],re=z[Z+N],ae=z[Z+y+N];if(ne<re||ae<J)continue e}var ue=d(V,q);if(ue!==void 0)return ue}}}}(r,n,s,u,p,c,x,g,h,b,v):function(y,w,d,S,T,E,C,L,O,z,G){for(var I=2*y,H=L,N=I*L;H<O;++H,N+=I){var F=z[w+N],V=G[H];e:for(var W=S,te=I*S;W<T;++W,te+=I){var Q=E[w+te],X=E[w+te+y],q=C[W];if(!(F<Q||X<F)){for(var Z=w+1;Z<y;++Z){var J=E[Z+te],ne=E[Z+y+te],re=z[Z+N],ae=z[Z+y+N];if(ne<re||ae<J)continue e}var ue=d(q,V);if(ue!==void 0)return ue}}}}(r,n,s,u,p,c,x,g,h,b,v)}}o.partial=e(!1),o.full=e(!0)},2337:function(f,o,e){f.exports=function(I,H,N,F,V,W,te,Q,X){(function(Re,ze){var He=8*r.log2(ze+1)*(Re+1)|0,We=r.nextPow2(T*He);C.length<We&&(i.free(C),C=i.mallocInt32(We));var Je=r.nextPow2(E*He);L.length<Je&&(i.free(L),L=i.mallocDouble(Je))})(I,F+te);var q,Z=0,J=2*I;for(O(Z++,0,0,F,0,te,N?16:0,-1/0,1/0),N||O(Z++,0,0,te,0,F,1,-1/0,1/0);Z>0;){var ne=(Z-=1)*T,re=C[ne],ae=C[ne+1],ue=C[ne+2],he=C[ne+3],de=C[ne+4],xe=C[ne+5],me=Z*E,ve=L[me],Le=L[me+1],Ae=1&xe,we=!!(16&xe),se=V,oe=W,fe=Q,Se=X;if(Ae&&(se=Q,oe=X,fe=V,Se=W),!(2&xe&&ae>=(ue=y(I,re,ae,ue,se,oe,Le))||4&xe&&(ae=w(I,re,ae,ue,se,oe,ve))>=ue)){var Me=ue-ae,be=de-he;if(we){if(I*Me*(Me+be)<h){if((q=u.scanComplete(I,re,H,ae,ue,se,oe,he,de,fe,Se))!==void 0)return q;continue}}else{if(I*Math.min(Me,be)<x){if((q=s(I,re,H,Ae,ae,ue,se,oe,he,de,fe,Se))!==void 0)return q;continue}if(I*Me*be<g){if((q=u.scanBipartite(I,re,H,Ae,ae,ue,se,oe,he,de,fe,Se))!==void 0)return q;continue}}var Ie=b(I,re,ae,ue,se,oe,ve,Le);if(ae<Ie)if(I*(Ie-ae)<x){if((q=a(I,re+1,H,ae,Ie,se,oe,he,de,fe,Se))!==void 0)return q}else if(re===I-2){if((q=Ae?u.sweepBipartite(I,H,he,de,fe,Se,ae,Ie,se,oe):u.sweepBipartite(I,H,ae,Ie,se,oe,he,de,fe,Se))!==void 0)return q}else O(Z++,re+1,ae,Ie,he,de,Ae,-1/0,1/0),O(Z++,re+1,he,de,ae,Ie,1^Ae,-1/0,1/0);if(Ie<ue){var Be=p(I,re,he,de,fe,Se),ce=fe[J*Be+re],Te=v(I,re,Be,de,fe,Se,ce);if(Te<de&&O(Z++,re,Ie,ue,Te,de,(4|Ae)+(we?16:0),ce,Le),he<Be&&O(Z++,re,Ie,ue,he,Be,(2|Ae)+(we?16:0),ve,ce),Be+1===Te){if((q=we?G(I,re,H,Ie,ue,se,oe,Be,fe,Se[Be]):z(I,re,H,Ae,Ie,ue,se,oe,Be,fe,Se[Be]))!==void 0)return q}else if(Be<Te){var ye;if(we){if(Ie<(ye=d(I,re,Ie,ue,se,oe,ce))){var Pe=v(I,re,Ie,ye,se,oe,ce);if(re===I-2){if(Ie<Pe&&(q=u.sweepComplete(I,H,Ie,Pe,se,oe,Be,Te,fe,Se))!==void 0||Pe<ye&&(q=u.sweepBipartite(I,H,Pe,ye,se,oe,Be,Te,fe,Se))!==void 0)return q}else Ie<Pe&&O(Z++,re+1,Ie,Pe,Be,Te,16,-1/0,1/0),Pe<ye&&(O(Z++,re+1,Pe,ye,Be,Te,0,-1/0,1/0),O(Z++,re+1,Be,Te,Pe,ye,1,-1/0,1/0))}}else Ie<(ye=Ae?S(I,re,Ie,ue,se,oe,ce):d(I,re,Ie,ue,se,oe,ce))&&(re===I-2?q=Ae?u.sweepBipartite(I,H,Be,Te,fe,Se,Ie,ye,se,oe):u.sweepBipartite(I,H,Ie,ye,se,oe,Be,Te,fe,Se):(O(Z++,re+1,Ie,ye,Be,Te,Ae,-1/0,1/0),O(Z++,re+1,Be,Te,Ie,ye,1^Ae,-1/0,1/0)))}}}}};var i=e(5306),r=e(2288),n=e(7333),s=n.partial,a=n.full,u=e(1390),p=e(2464),c=e(122),x=128,g=1<<22,h=1<<22,b=c("!(lo>=p0)&&!(p1>=hi)"),v=c("lo===p0"),y=c("lo<p0"),w=c("hi<=p0"),d=c("lo<=p0&&p0<=hi"),S=c("lo<p0&&p0<=hi"),T=6,E=2,C=i.mallocInt32(1024),L=i.mallocDouble(1024);function O(I,H,N,F,V,W,te,Q,X){var q=T*I;C[q]=H,C[q+1]=N,C[q+2]=F,C[q+3]=V,C[q+4]=W,C[q+5]=te;var Z=E*I;L[Z]=Q,L[Z+1]=X}function z(I,H,N,F,V,W,te,Q,X,q,Z){var J=2*I,ne=X*J,re=q[ne+H];e:for(var ae=V,ue=V*J;ae<W;++ae,ue+=J){var he=te[ue+H],de=te[ue+H+I];if(!(re<he||de<re||F&&re===he)){for(var xe,me=Q[ae],ve=H+1;ve<I;++ve){he=te[ue+ve],de=te[ue+ve+I];var Le=q[ne+ve],Ae=q[ne+ve+I];if(de<Le||Ae<he)continue e}if((xe=F?N(Z,me):N(me,Z))!==void 0)return xe}}}function G(I,H,N,F,V,W,te,Q,X,q){var Z=2*I,J=Q*Z,ne=X[J+H];e:for(var re=F,ae=F*Z;re<V;++re,ae+=Z){var ue=te[re];if(ue!==q){var he=W[ae+H],de=W[ae+H+I];if(!(ne<he||de<ne)){for(var xe=H+1;xe<I;++xe){he=W[ae+xe],de=W[ae+xe+I];var me=X[J+xe],ve=X[J+xe+I];if(de<me||ve<he)continue e}var Le=N(ue,q);if(Le!==void 0)return Le}}}}},2464:function(f,o,e){f.exports=function(s,a,u,p,c,x){if(p<=u+1)return u;for(var g=u,h=p,b=p+u>>>1,v=2*s,y=b,w=c[v*b+a];g<h;){if(h-g<r){n(s,a,g,h,c,x),w=c[v*b+a];break}var d=h-g,S=Math.random()*d+g|0,T=c[v*S+a],E=Math.random()*d+g|0,C=c[v*E+a],L=Math.random()*d+g|0,O=c[v*L+a];T<=C?O>=C?(y=E,w=C):T>=O?(y=S,w=T):(y=L,w=O):C>=O?(y=E,w=C):O>=T?(y=S,w=T):(y=L,w=O);for(var z=v*(h-1),G=v*y,I=0;I<v;++I,++z,++G){var H=c[z];c[z]=c[G],c[G]=H}var N=x[h-1];for(x[h-1]=x[y],x[y]=N,z=v*(h-1),G=v*(y=i(s,a,g,h-1,c,x,w)),I=0;I<v;++I,++z,++G)H=c[z],c[z]=c[G],c[G]=H;if(N=x[h-1],x[h-1]=x[y],x[y]=N,b<y){for(h=y-1;g<h&&c[v*(h-1)+a]===w;)h-=1;h+=1}else{if(!(y<b))break;for(g=y+1;g<h&&c[v*g+a]===w;)g+=1}}return i(s,a,u,b,c,x,c[v*b+a])};var i=e(122)("lo<p0"),r=8;function n(s,a,u,p,c,x){for(var g=2*s,h=g*(u+1)+a,b=u+1;b<p;++b,h+=g)for(var v=c[h],y=b,w=g*(b-1);y>u&&c[w+a]>v;--y,w-=g){for(var d=w,S=w+g,T=0;T<g;++T,++d,++S){var E=c[d];c[d]=c[S],c[S]=E}var C=x[y];x[y]=x[y-1],x[y-1]=C}}},122:function(f){f.exports=function(e){return o[e]};var o={"lo===p0":function(e,i,r,n,s,a,u){for(var p=2*e,c=p*r,x=c,g=r,h=i,b=r;n>b;++b,c+=p)if(s[c+h]===u)if(g===b)g+=1,x+=p;else{for(var v=0;p>v;++v){var y=s[c+v];s[c+v]=s[x],s[x++]=y}var w=a[b];a[b]=a[g],a[g++]=w}return g},"lo<p0":function(e,i,r,n,s,a,u){for(var p=2*e,c=p*r,x=c,g=r,h=i,b=r;n>b;++b,c+=p)if(s[c+h]<u)if(g===b)g+=1,x+=p;else{for(var v=0;p>v;++v){var y=s[c+v];s[c+v]=s[x],s[x++]=y}var w=a[b];a[b]=a[g],a[g++]=w}return g},"lo<=p0":function(e,i,r,n,s,a,u){for(var p=2*e,c=p*r,x=c,g=r,h=e+i,b=r;n>b;++b,c+=p)if(s[c+h]<=u)if(g===b)g+=1,x+=p;else{for(var v=0;p>v;++v){var y=s[c+v];s[c+v]=s[x],s[x++]=y}var w=a[b];a[b]=a[g],a[g++]=w}return g},"hi<=p0":function(e,i,r,n,s,a,u){for(var p=2*e,c=p*r,x=c,g=r,h=e+i,b=r;n>b;++b,c+=p)if(s[c+h]<=u)if(g===b)g+=1,x+=p;else{for(var v=0;p>v;++v){var y=s[c+v];s[c+v]=s[x],s[x++]=y}var w=a[b];a[b]=a[g],a[g++]=w}return g},"lo<p0&&p0<=hi":function(e,i,r,n,s,a,u){for(var p=2*e,c=p*r,x=c,g=r,h=i,b=e+i,v=r;n>v;++v,c+=p){var y=s[c+h],w=s[c+b];if(y<u&&u<=w)if(g===v)g+=1,x+=p;else{for(var d=0;p>d;++d){var S=s[c+d];s[c+d]=s[x],s[x++]=S}var T=a[v];a[v]=a[g],a[g++]=T}}return g},"lo<=p0&&p0<=hi":function(e,i,r,n,s,a,u){for(var p=2*e,c=p*r,x=c,g=r,h=i,b=e+i,v=r;n>v;++v,c+=p){var y=s[c+h],w=s[c+b];if(y<=u&&u<=w)if(g===v)g+=1,x+=p;else{for(var d=0;p>d;++d){var S=s[c+d];s[c+d]=s[x],s[x++]=S}var T=a[v];a[v]=a[g],a[g++]=T}}return g},"!(lo>=p0)&&!(p1>=hi)":function(e,i,r,n,s,a,u,p){for(var c=2*e,x=c*r,g=x,h=r,b=i,v=e+i,y=r;n>y;++y,x+=c){var w=s[x+b],d=s[x+v];if(!(w>=u||p>=d))if(h===y)h+=1,g+=c;else{for(var S=0;c>S;++S){var T=s[x+S];s[x+S]=s[g],s[g++]=T}var E=a[y];a[y]=a[h],a[h++]=E}}return h}}},309:function(f){f.exports=function(c,x){x<=4*o?e(0,x-1,c):p(0,x-1,c)};var o=32;function e(c,x,g){for(var h=2*(c+1),b=c+1;b<=x;++b){for(var v=g[h++],y=g[h++],w=b,d=h-2;w-- >c;){var S=g[d-2],T=g[d-1];if(S<v||S===v&&T<y)break;g[d]=S,g[d+1]=T,d-=2}g[d]=v,g[d+1]=y}}function i(c,x,g){x*=2;var h=g[c*=2],b=g[c+1];g[c]=g[x],g[c+1]=g[x+1],g[x]=h,g[x+1]=b}function r(c,x,g){x*=2,g[c*=2]=g[x],g[c+1]=g[x+1]}function n(c,x,g,h){x*=2,g*=2;var b=h[c*=2],v=h[c+1];h[c]=h[x],h[c+1]=h[x+1],h[x]=h[g],h[x+1]=h[g+1],h[g]=b,h[g+1]=v}function s(c,x,g,h,b){x*=2,b[c*=2]=b[x],b[x]=g,b[c+1]=b[x+1],b[x+1]=h}function a(c,x,g){x*=2;var h=g[c*=2],b=g[x];return!(h<b)&&(h!==b||g[c+1]>g[x+1])}function u(c,x,g,h){var b=h[c*=2];return b<x||b===x&&h[c+1]<g}function p(c,x,g){var h=(x-c+1)/6|0,b=c+h,v=x-h,y=c+x>>1,w=y-h,d=y+h,S=b,T=w,E=y,C=d,L=v,O=c+1,z=x-1,G=0;a(S,T,g)&&(G=S,S=T,T=G),a(C,L,g)&&(G=C,C=L,L=G),a(S,E,g)&&(G=S,S=E,E=G),a(T,E,g)&&(G=T,T=E,E=G),a(S,C,g)&&(G=S,S=C,C=G),a(E,C,g)&&(G=E,E=C,C=G),a(T,L,g)&&(G=T,T=L,L=G),a(T,E,g)&&(G=T,T=E,E=G),a(C,L,g)&&(G=C,C=L,L=G);for(var I=g[2*T],H=g[2*T+1],N=g[2*C],F=g[2*C+1],V=2*S,W=2*E,te=2*L,Q=2*b,X=2*y,q=2*v,Z=0;Z<2;++Z){var J=g[V+Z],ne=g[W+Z],re=g[te+Z];g[Q+Z]=J,g[X+Z]=ne,g[q+Z]=re}r(w,c,g),r(d,x,g);for(var ae=O;ae<=z;++ae)if(u(ae,I,H,g))ae!==O&&i(ae,O,g),++O;else if(!u(ae,N,F,g))for(;;){if(u(z,N,F,g)){u(z,I,H,g)?(n(ae,O,z,g),++O,--z):(i(ae,z,g),--z);break}if(--z<ae)break}s(c,O-1,I,H,g),s(x,z+1,N,F,g),O-2-c<=o?e(c,O-2,g):p(c,O-2,g),x-(z+2)<=o?e(z+2,x,g):p(z+2,x,g),z-O<=o?e(O,z,g):p(O,z,g)}},1390:function(f,o,e){f.exports={init:function(w){var d=r.nextPow2(w);u.length<d&&(i.free(u),u=i.mallocInt32(d)),p.length<d&&(i.free(p),p=i.mallocInt32(d)),c.length<d&&(i.free(c),c=i.mallocInt32(d)),x.length<d&&(i.free(x),x=i.mallocInt32(d)),g.length<d&&(i.free(g),g=i.mallocInt32(d)),h.length<d&&(i.free(h),h=i.mallocInt32(d));var S=8*d;b.length<S&&(i.free(b),b=i.mallocDouble(S))},sweepBipartite:function(w,d,S,T,E,C,L,O,z,G){for(var I=0,H=2*w,N=w-1,F=H-1,V=S;V<T;++V){var W=C[V],te=H*V;b[I++]=E[te+N],b[I++]=-(W+1),b[I++]=E[te+F],b[I++]=W}for(V=L;V<O;++V){W=G[V]+s;var Q=H*V;b[I++]=z[Q+N],b[I++]=-W,b[I++]=z[Q+F],b[I++]=W}var X=I>>>1;n(b,X);var q=0,Z=0;for(V=0;V<X;++V){var J=0|b[2*V+1];if(J>=s)v(c,x,Z--,J=J-s|0);else if(J>=0)v(u,p,q--,J);else if(J<=-s){J=-J-s|0;for(var ne=0;ne<q;++ne)if((re=d(u[ne],J))!==void 0)return re;y(c,x,Z++,J)}else{for(J=-J-1|0,ne=0;ne<Z;++ne){var re;if((re=d(J,c[ne]))!==void 0)return re}y(u,p,q++,J)}}},sweepComplete:function(w,d,S,T,E,C,L,O,z,G){for(var I=0,H=2*w,N=w-1,F=H-1,V=S;V<T;++V){var W=C[V]+1<<1,te=H*V;b[I++]=E[te+N],b[I++]=-W,b[I++]=E[te+F],b[I++]=W}for(V=L;V<O;++V){W=G[V]+1<<1;var Q=H*V;b[I++]=z[Q+N],b[I++]=1|-W,b[I++]=z[Q+F],b[I++]=1|W}var X=I>>>1;n(b,X);var q=0,Z=0,J=0;for(V=0;V<X;++V){var ne=0|b[2*V+1],re=1&ne;if(V<X-1&&ne>>1==b[2*V+3]>>1&&(re=2,V+=1),ne<0){for(var ae=-(ne>>1)-1,ue=0;ue<J;++ue)if((he=d(g[ue],ae))!==void 0)return he;if(re!==0){for(ue=0;ue<q;++ue)if((he=d(u[ue],ae))!==void 0)return he}if(re!==1)for(ue=0;ue<Z;++ue){var he;if((he=d(c[ue],ae))!==void 0)return he}re===0?y(u,p,q++,ae):re===1?y(c,x,Z++,ae):re===2&&y(g,h,J++,ae)}else ae=(ne>>1)-1,re===0?v(u,p,q--,ae):re===1?v(c,x,Z--,ae):re===2&&v(g,h,J--,ae)}},scanBipartite:function(w,d,S,T,E,C,L,O,z,G,I,H){var N=0,F=2*w,V=d,W=d+w,te=1,Q=1;T?Q=s:te=s;for(var X=E;X<C;++X){var q=X+te,Z=F*X;b[N++]=L[Z+V],b[N++]=-q,b[N++]=L[Z+W],b[N++]=q}for(X=z;X<G;++X){q=X+Q;var J=F*X;b[N++]=I[J+V],b[N++]=-q}var ne=N>>>1;n(b,ne);var re=0;for(X=0;X<ne;++X){var ae=0|b[2*X+1];if(ae<0){var ue=!1;if((q=-ae)>=s?(ue=!T,q-=s):(ue=!!T,q-=1),ue)y(u,p,re++,q);else{var he=H[q],de=F*q,xe=I[de+d+1],me=I[de+d+1+w];e:for(var ve=0;ve<re;++ve){var Le=u[ve],Ae=F*Le;if(!(me<L[Ae+d+1]||L[Ae+d+1+w]<xe)){for(var we=d+2;we<w;++we)if(I[de+we+w]<L[Ae+we]||L[Ae+we+w]<I[de+we])continue e;var se,oe=O[Le];if((se=T?S(he,oe):S(oe,he))!==void 0)return se}}}}else v(u,p,re--,ae-te)}},scanComplete:function(w,d,S,T,E,C,L,O,z,G,I){for(var H=0,N=2*w,F=d,V=d+w,W=T;W<E;++W){var te=W+s,Q=N*W;b[H++]=C[Q+F],b[H++]=-te,b[H++]=C[Q+V],b[H++]=te}for(W=O;W<z;++W){te=W+1;var X=N*W;b[H++]=G[X+F],b[H++]=-te}var q=H>>>1;n(b,q);var Z=0;for(W=0;W<q;++W){var J=0|b[2*W+1];if(J<0)if((te=-J)>=s)u[Z++]=te-s;else{var ne=I[te-=1],re=N*te,ae=G[re+d+1],ue=G[re+d+1+w];e:for(var he=0;he<Z;++he){var de=u[he],xe=L[de];if(xe===ne)break;var me=N*de;if(!(ue<C[me+d+1]||C[me+d+1+w]<ae)){for(var ve=d+2;ve<w;++ve)if(G[re+ve+w]<C[me+ve]||C[me+ve+w]<G[re+ve])continue e;var Le=S(xe,ne);if(Le!==void 0)return Le}}}else{for(te=J-s,he=Z-1;he>=0;--he)if(u[he]===te){for(ve=he+1;ve<Z;++ve)u[ve-1]=u[ve];break}--Z}}}};var i=e(5306),r=e(2288),n=e(309),s=1<<28,a=1024,u=i.mallocInt32(a),p=i.mallocInt32(a),c=i.mallocInt32(a),x=i.mallocInt32(a),g=i.mallocInt32(a),h=i.mallocInt32(a),b=i.mallocDouble(8192);function v(w,d,S,T){var E=d[T],C=w[S-1];w[E]=C,d[C]=E}function y(w,d,S,T){w[S]=T,d[T]=S}},7761:function(f,o,e){var i=e(9971),r=e(743),n=e(2161),s=e(7098);function a(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,x){return c[0]-x[0]||c[1]-x[1]}function p(c,x,g){return x in c?c[x]:g}f.exports=function(c,x,g){Array.isArray(x)?(g=g||{},x=x||[]):(g=x||{},x=[]);var h=!!p(g,"delaunay",!0),b=!!p(g,"interior",!0),v=!!p(g,"exterior",!0),y=!!p(g,"infinity",!1);if(!b&&!v||c.length===0)return[];var w=i(c,x);if(h||b!==v||y){for(var d=r(c.length,function(E){return E.map(a).sort(u)}(x)),S=0;S<w.length;++S){var T=w[S];d.addTriangle(T[0],T[1],T[2])}return h&&n(c,d),v?b?y?s(d,0,y):d.cells():s(d,1,y):s(d,-1)}return w}},2161:function(f,o,e){var i=e(2227)[4];function r(n,s,a,u,p,c){var x=s.opposite(u,p);if(!(x<0)){if(p<u){var g=u;u=p,p=g,g=c,c=x,x=g}s.isConstraint(u,p)||i(n[u],n[p],n[c],n[x])<0&&a.push(u,p)}}e(5070),f.exports=function(n,s){for(var a=[],u=n.length,p=s.stars,c=0;c<u;++c)for(var x=p[c],g=1;g<x.length;g+=2)if(!((y=x[g])<c||s.isConstraint(c,y))){for(var h=x[g-1],b=-1,v=1;v<x.length;v+=2)if(x[v-1]===y){b=x[v];break}b<0||i(n[c],n[y],n[h],n[b])<0&&a.push(c,y)}for(;a.length>0;){for(var y=a.pop(),w=(h=-1,b=-1,x=p[c=a.pop()],1);w<x.length;w+=2){var d=x[w-1],S=x[w];d===y?b=S:S===y&&(h=d)}h<0||b<0||i(n[c],n[y],n[h],n[b])>=0||(s.flip(c,y),r(n,s,a,h,c,b),r(n,s,a,c,b,h),r(n,s,a,b,y,h),r(n,s,a,y,h,b))}}},7098:function(f,o,e){var i,r=e(5070);function n(a,u,p,c,x,g,h){this.cells=a,this.neighbor=u,this.flags=c,this.constraint=p,this.active=x,this.next=g,this.boundary=h}function s(a,u){return a[0]-u[0]||a[1]-u[1]||a[2]-u[2]}f.exports=function(a,u,p){var c=function(L,O){for(var z=L.cells(),G=z.length,I=0;I<G;++I){var H=(J=z[I])[0],N=J[1],F=J[2];N<F?N<H&&(J[0]=N,J[1]=F,J[2]=H):F<H&&(J[0]=F,J[1]=H,J[2]=N)}z.sort(s);var V=new Array(G);for(I=0;I<V.length;++I)V[I]=0;var W=[],te=[],Q=new Array(3*G),X=new Array(3*G),q=null;O&&(q=[]);var Z=new n(z,Q,X,V,W,te,q);for(I=0;I<G;++I)for(var J=z[I],ne=0;ne<3;++ne){H=J[ne],N=J[(ne+1)%3];var re=Q[3*I+ne]=Z.locate(N,H,L.opposite(N,H)),ae=X[3*I+ne]=L.isConstraint(H,N);re<0&&(ae?te.push(I):(W.push(I),V[I]=1),O&&q.push([N,H,-1]))}return Z}(a,p);if(u===0)return p?c.cells.concat(c.boundary):c.cells;for(var x=1,g=c.active,h=c.next,b=c.flags,v=c.cells,y=c.constraint,w=c.neighbor;g.length>0||h.length>0;){for(;g.length>0;){var d=g.pop();if(b[d]!==-x){b[d]=x,v[d];for(var S=0;S<3;++S){var T=w[3*d+S];T>=0&&b[T]===0&&(y[3*d+S]?h.push(T):(g.push(T),b[T]=x))}}}var E=h;h=g,g=E,h.length=0,x=-x}var C=function(L,O,z){for(var G=0,I=0;I<L.length;++I)O[I]===z&&(L[G++]=L[I]);return L.length=G,L}(v,b,u);return p?C.concat(c.boundary):C},n.prototype.locate=(i=[0,0,0],function(a,u,p){var c=a,x=u,g=p;return u<p?u<a&&(c=u,x=p,g=a):p<a&&(c=p,x=a,g=u),c<0?-1:(i[0]=c,i[1]=x,i[2]=g,r.eq(this.cells,i,s))})},9971:function(f,o,e){var i=e(5070),r=e(417)[3];function n(h,b,v,y,w){this.a=h,this.b=b,this.idx=v,this.lowerIds=y,this.upperIds=w}function s(h,b,v,y){this.a=h,this.b=b,this.type=v,this.idx=y}function a(h,b){var v=h.a[0]-b.a[0]||h.a[1]-b.a[1]||h.type-b.type;return v||(h.type!==0&&(v=r(h.a,h.b,b.b))?v:h.idx-b.idx)}function u(h,b){return r(h.a,h.b,b)}function p(h,b,v,y,w){for(var d=i.lt(b,y,u),S=i.gt(b,y,u),T=d;T<S;++T){for(var E=b[T],C=E.lowerIds,L=C.length;L>1&&r(v[C[L-2]],v[C[L-1]],y)>0;)h.push([C[L-1],C[L-2],w]),L-=1;C.length=L,C.push(w);var O=E.upperIds;for(L=O.length;L>1&&r(v[O[L-2]],v[O[L-1]],y)<0;)h.push([O[L-2],O[L-1],w]),L-=1;O.length=L,O.push(w)}}function c(h,b){var v;return(v=h.a[0]<b.a[0]?r(h.a,h.b,b.a):r(b.b,b.a,h.a))?v:(v=b.b[0]<h.b[0]?r(h.a,h.b,b.b):r(b.b,b.a,h.b))||h.idx-b.idx}function x(h,b,v){var y=i.le(h,v,c),w=h[y],d=w.upperIds,S=d[d.length-1];w.upperIds=[S],h.splice(y+1,0,new n(v.a,v.b,v.idx,[S],d))}function g(h,b,v){var y=v.a;v.a=v.b,v.b=y;var w=i.eq(h,v,c),d=h[w];h[w-1].upperIds=d.upperIds,h.splice(w,1)}f.exports=function(h,b){for(var v=h.length,y=b.length,w=[],d=0;d<v;++d)w.push(new s(h[d],null,0,d));for(d=0;d<y;++d){var S=b[d],T=h[S[0]],E=h[S[1]];T[0]<E[0]?w.push(new s(T,E,2,d),new s(E,T,1,d)):T[0]>E[0]&&w.push(new s(E,T,2,d),new s(T,E,1,d))}w.sort(a);for(var C=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),L=[new n([C,1],[C,0],-1,[],[])],O=[],z=(d=0,w.length);d<z;++d){var G=w[d],I=G.type;I===0?p(O,L,h,G.a,G.idx):I===2?x(L,0,G):g(L,0,G)}return O}},743:function(f,o,e){var i=e(5070);function r(a,u){this.stars=a,this.edges=u}f.exports=function(a,u){for(var p=new Array(a),c=0;c<a;++c)p[c]=[];return new r(p,u)};var n=r.prototype;function s(a,u,p){for(var c=1,x=a.length;c<x;c+=2)if(a[c-1]===u&&a[c]===p)return a[c-1]=a[x-2],a[c]=a[x-1],void(a.length=x-2)}n.isConstraint=function(){var a=[0,0];function u(p,c){return p[0]-c[0]||p[1]-c[1]}return function(p,c){return a[0]=Math.min(p,c),a[1]=Math.max(p,c),i.eq(this.edges,a,u)>=0}}(),n.removeTriangle=function(a,u,p){var c=this.stars;s(c[a],u,p),s(c[u],p,a),s(c[p],a,u)},n.addTriangle=function(a,u,p){var c=this.stars;c[a].push(u,p),c[u].push(p,a),c[p].push(a,u)},n.opposite=function(a,u){for(var p=this.stars[u],c=1,x=p.length;c<x;c+=2)if(p[c]===a)return p[c-1];return-1},n.flip=function(a,u){var p=this.opposite(a,u),c=this.opposite(u,a);this.removeTriangle(a,u,p),this.removeTriangle(u,a,c),this.addTriangle(a,c,p),this.addTriangle(u,p,c)},n.edges=function(){for(var a=this.stars,u=[],p=0,c=a.length;p<c;++p)for(var x=a[p],g=0,h=x.length;g<h;g+=2)u.push([x[g],x[g+1]]);return u},n.cells=function(){for(var a=this.stars,u=[],p=0,c=a.length;p<c;++p)for(var x=a[p],g=0,h=x.length;g<h;g+=2){var b=x[g],v=x[g+1];p<Math.min(b,v)&&u.push([p,b,v])}return u}},9887:function(f){f.exports=function(o){for(var e=1,i=1;i<o.length;++i)for(var r=0;r<i;++r)if(o[i]<o[r])e=-e;else if(o[r]===o[i])return 0;return e}},9243:function(f,o,e){var i=e(3094),r=e(6606);function n(u,p){for(var c=0,x=u.length,g=0;g<x;++g)c+=u[g]*p[g];return c}function s(u){var p=u.length;if(p===0)return[];u[0].length;var c=i([u.length+1,u.length+1],1),x=i([u.length+1],1);c[p][p]=0;for(var g=0;g<p;++g){for(var h=0;h<=g;++h)c[h][g]=c[g][h]=2*n(u[g],u[h]);x[g]=n(u[g],u[g])}var b=r(c,x),v=0,y=b[p+1];for(g=0;g<y.length;++g)v+=y[g];var w=new Array(p);for(g=0;g<p;++g){y=b[g];var d=0;for(h=0;h<y.length;++h)d+=y[h];w[g]=d/v}return w}function a(u){if(u.length===0)return[];for(var p=u[0].length,c=i([p]),x=s(u),g=0;g<u.length;++g)for(var h=0;h<p;++h)c[h]+=u[g][h]*x[g];return c}a.barycenetric=s,f.exports=a},1778:function(f,o,e){f.exports=function(r){for(var n=i(r),s=0,a=0;a<r.length;++a)for(var u=r[a],p=0;p<n.length;++p)s+=Math.pow(u[p]-n[p],2);return Math.sqrt(s/r.length)};var i=e(9243)},197:function(f,o,e){f.exports=function(S,T,E){var C;if(E){C=T;for(var L=new Array(T.length),O=0;O<T.length;++O){var z=T[O];L[O]=[z[0],z[1],E[O]]}T=L}for(var G=function(I,H,N){var F=b(I,[],h(I));return w(H,F,N),!!F}(S,T,!!E);d(S,T,!!E);)G=!0;if(E&&G)for(C.length=0,E.length=0,O=0;O<T.length;++O)z=T[O],C.push([z[0],z[1]]),E.push(z[2]);return G};var i=e(1731),r=e(2569),n=e(4434),s=e(5125),a=e(8846),u=e(7999),p=e(2826),c=e(8551),x=e(5528);function g(S){var T=u(S);return[c(T,-1/0),c(T,1/0)]}function h(S){for(var T=new Array(S.length),E=0;E<S.length;++E){var C=S[E];T[E]=[c(C[0],-1/0),c(C[1],-1/0),c(C[0],1/0),c(C[1],1/0)]}return T}function b(S,T,E){for(var C=T.length,L=new i(C),O=[],z=0;z<T.length;++z){var G=T[z],I=g(G[0]),H=g(G[1]);O.push([c(I[0],-1/0),c(H[0],-1/0),c(I[1],1/0),c(H[1],1/0)])}r(O,function(te,Q){L.link(te,Q)});var N=!0,F=new Array(C);for(z=0;z<C;++z)(W=L.find(z))!==z&&(N=!1,S[W]=[Math.min(S[z][0],S[W][0]),Math.min(S[z][1],S[W][1])]);if(N)return null;var V=0;for(z=0;z<C;++z){var W;(W=L.find(z))===z?(F[z]=V,S[V++]=S[z]):F[z]=-1}for(S.length=V,z=0;z<C;++z)F[z]<0&&(F[z]=F[L.find(z)]);return F}function v(S,T){return S[0]-T[0]||S[1]-T[1]}function y(S,T){return S[0]-T[0]||S[1]-T[1]||(S[2]<T[2]?-1:S[2]>T[2]?1:0)}function w(S,T,E){if(S.length!==0){if(T)for(var C=0;C<S.length;++C){var L=T[(z=S[C])[0]],O=T[z[1]];z[0]=Math.min(L,O),z[1]=Math.max(L,O)}else for(C=0;C<S.length;++C){var z;L=(z=S[C])[0],O=z[1],z[0]=Math.min(L,O),z[1]=Math.max(L,O)}E?S.sort(y):S.sort(v);var G=1;for(C=1;C<S.length;++C){var I=S[C-1],H=S[C];(H[0]!==I[0]||H[1]!==I[1]||E&&H[2]!==I[2])&&(S[G++]=H)}S.length=G}}function d(S,T,E){var C=function(I,H){for(var N=new Array(H.length),F=0;F<H.length;++F){var V=H[F],W=I[V[0]],te=I[V[1]];N[F]=[c(Math.min(W[0],te[0]),-1/0),c(Math.min(W[1],te[1]),-1/0),c(Math.max(W[0],te[0]),1/0),c(Math.max(W[1],te[1]),1/0)]}return N}(S,T),L=function(I,H,N){var F=[];return r(N,function(V,W){var te=H[V],Q=H[W];if(te[0]!==Q[0]&&te[0]!==Q[1]&&te[1]!==Q[0]&&te[1]!==Q[1]){var X=I[te[0]],q=I[te[1]],Z=I[Q[0]],J=I[Q[1]];n(X,q,Z,J)&&F.push([V,W])}}),F}(S,T,C),O=function(I,H,N,F){var V=[];return r(N,F,function(W,te){var Q=H[W];if(Q[0]!==te&&Q[1]!==te){var X=I[te],q=I[Q[0]],Z=I[Q[1]];n(q,Z,X,X)&&V.push([W,te])}}),V}(S,T,C,h(S)),z=function(I,H,N,F,V){var W,te,Q=I.map(function(se){return[s(se[0]),s(se[1])]});for(W=0;W<N.length;++W){var X=N[W];te=X[0];var q=X[1],Z=H[te],J=H[q],ne=x(p(I[Z[0]]),p(I[Z[1]]),p(I[J[0]]),p(I[J[1]]));if(ne){var re=I.length;I.push([u(ne[0]),u(ne[1])]),Q.push(ne),F.push([te,re],[q,re])}}for(F.sort(function(se,oe){if(se[0]!==oe[0])return se[0]-oe[0];var fe=Q[se[1]],Se=Q[oe[1]];return a(fe[0],Se[0])||a(fe[1],Se[1])}),W=F.length-1;W>=0;--W){var ae=H[te=(Ae=F[W])[0]],ue=ae[0],he=ae[1],de=I[ue],xe=I[he];if((de[0]-xe[0]||de[1]-xe[1])<0){var me=ue;ue=he,he=me}ae[0]=ue;var ve,Le=ae[1]=Ae[1];for(V&&(ve=ae[2]);W>0&&F[W-1][0]===te;){var Ae,we=(Ae=F[--W])[1];V?H.push([Le,we,ve]):H.push([Le,we]),Le=we}V?H.push([Le,he,ve]):H.push([Le,he])}return Q}(S,T,L,O,E),G=b(S,z);return w(T,G,E),!!G||L.length>0||O.length>0}},5528:function(f,o,e){f.exports=function(x,g,h,b){var v=a(g,x),y=a(b,h),w=c(v,y);if(s(w)===0)return null;var d=c(y,a(x,h)),S=r(d,w),T=p(v,S);return u(x,T)};var i=e(3962),r=e(9189),n=e(4354),s=e(4951),a=e(6695),u=e(7584),p=e(4469);function c(x,g){return n(i(x[0],g[1]),i(x[1],g[0]))}},5692:function(f){f.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},9156:function(f,o,e){var i=e(5692),r=e(3578);function n(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function s(u){for(var p,c="#",x=0;x<3;++x)c+=("00"+(p=(p=u[x]).toString(16))).substr(p.length);return c}function a(u){return"rgba("+u.join(",")+")"}f.exports=function(u){var p,c,x,g,h,b,v,y,w,d;if(u||(u={}),y=(u.nshades||72)-1,v=u.format||"hex",(b=u.colormap)||(b="jet"),typeof b=="string"){if(b=b.toLowerCase(),!i[b])throw Error(b+" not a supported colorscale");h=i[b]}else{if(!Array.isArray(b))throw Error("unsupported colormap option",b);h=b.slice()}if(h.length>y+1)throw new Error(b+" map requires nshades to be at least size "+h.length);w=Array.isArray(u.alpha)?u.alpha.length!==2?[1,1]:u.alpha.slice():typeof u.alpha=="number"?[u.alpha,u.alpha]:[1,1],p=h.map(function(L){return Math.round(L.index*y)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var S=h.map(function(L,O){var z=h[O].index,G=h[O].rgb.slice();return G.length===4&&G[3]>=0&&G[3]<=1||(G[3]=w[0]+(w[1]-w[0])*z),G}),T=[];for(d=0;d<p.length-1;++d){g=p[d+1]-p[d],c=S[d],x=S[d+1];for(var E=0;E<g;E++){var C=E/g;T.push([Math.round(r(c[0],x[0],C)),Math.round(r(c[1],x[1],C)),Math.round(r(c[2],x[2],C)),r(c[3],x[3],C)])}}return T.push(h[h.length-1].rgb.concat(w[1])),v==="hex"?T=T.map(s):v==="rgbaString"?T=T.map(a):v==="float"&&(T=T.map(n)),T}},9398:function(f,o,e){f.exports=function(p,c,x,g){var h=i(c,x,g);if(h===0){var b=r(i(p,c,x)),v=r(i(p,c,g));if(b===v){if(b===0){var y=u(p,c,x);return y===u(p,c,g)?0:y?1:-1}return 0}return v===0?b>0||u(p,c,g)?-1:1:b===0?v>0||u(p,c,x)?1:-1:r(v-b)}var w=i(p,c,x);return w>0?h>0&&i(p,c,g)>0?1:-1:w<0?h>0||i(p,c,g)>0?1:-1:i(p,c,g)>0||u(p,c,x)?1:-1};var i=e(417),r=e(7538),n=e(87),s=e(2019),a=e(9662);function u(p,c,x){var g=n(p[0],-c[0]),h=n(p[1],-c[1]),b=n(x[0],-c[0]),v=n(x[1],-c[1]),y=a(s(g,b),s(h,v));return y[y.length-1]>=0}},7538:function(f){f.exports=function(o){return o<0?-1:o>0?1:0}},9209:function(f){f.exports=function(i,r){var n=i.length,s=i.length-r.length;if(s)return s;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||o(i[0],i[1])-o(r[0],r[1]);case 3:var a=i[0]+i[1],u=r[0]+r[1];if(s=a+i[2]-(u+r[2]))return s;var p=o(i[0],i[1]),c=o(r[0],r[1]);return o(p,i[2])-o(c,r[2])||o(p+i[2],a)-o(c+r[2],u);case 4:var x=i[0],g=i[1],h=i[2],b=i[3],v=r[0],y=r[1],w=r[2],d=r[3];return x+g+h+b-(v+y+w+d)||o(x,g,h,b)-o(v,y,w,d,v)||o(x+g,x+h,x+b,g+h,g+b,h+b)-o(v+y,v+w,v+d,y+w,y+d,w+d)||o(x+g+h,x+g+b,x+h+b,g+h+b)-o(v+y+w,v+y+d,v+w+d,y+w+d);default:for(var S=i.slice().sort(e),T=r.slice().sort(e),E=0;E<n;++E)if(s=S[E]-T[E])return s;return 0}};var o=Math.min;function e(i,r){return i-r}},1284:function(f,o,e){var i=e(9209),r=e(9887);f.exports=function(n,s){return i(n,s)||r(n)-r(s)}},5537:function(f,o,e){var i=e(8950),r=e(8722),n=e(3332);f.exports=function(s){var a=s.length;if(a===0)return[];if(a===1)return[[0]];var u=s[0].length;return u===0?[]:u===1?i(s):u===2?r(s):n(s,u)}},8950:function(f){f.exports=function(o){for(var e=0,i=0,r=1;r<o.length;++r)o[r][0]<o[e][0]&&(e=r),o[r][0]>o[i][0]&&(i=r);return e<i?[[e],[i]]:e>i?[[i],[e]]:[[e]]}},8722:function(f,o,e){f.exports=function(r){var n=i(r),s=n.length;if(s<=2)return[];for(var a=new Array(s),u=n[s-1],p=0;p<s;++p){var c=n[p];a[p]=[u,c],u=c}return a};var i=e(3266)},3332:function(f,o,e){f.exports=function(n,s){try{return i(n,!0)}catch{var a=r(n);if(a.length<=s)return[];var u=function(c,x){for(var g=c.length,h=new Array(g),b=0;b<x.length;++b)h[b]=c[x[b]];var v=x.length;for(b=0;b<g;++b)x.indexOf(b)<0&&(h[v++]=c[b]);return h}(n,a);return function(c,x){for(var g=c.length,h=x.length,b=0;b<g;++b)for(var v=c[b],y=0;y<v.length;++y){var w=v[y];if(w<h)v[y]=x[w];else{w-=h;for(var d=0;d<h;++d)w>=x[d]&&(w+=1);v[y]=w}}return c}(i(u,!0),a)}};var i=e(2183),r=e(2153)},9680:function(f){f.exports=function(o,e,i,r,n,s){var a=n-1,u=n*n,p=a*a,c=(1+2*n)*p,x=n*p,g=u*(3-2*n),h=u*a;if(o.length){s||(s=new Array(o.length));for(var b=o.length-1;b>=0;--b)s[b]=c*o[b]+x*e[b]+g*i[b]+h*r[b];return s}return c*o+x*e+g*i+h*r},f.exports.derivative=function(o,e,i,r,n,s){var a=6*n*n-6*n,u=3*n*n-4*n+1,p=-6*n*n+6*n,c=3*n*n-2*n;if(o.length){s||(s=new Array(o.length));for(var x=o.length-1;x>=0;--x)s[x]=a*o[x]+u*e[x]+p*i[x]+c*r[x];return s}return a*o+u*e+p*i[x]+c*r}},4419:function(f,o,e){var i=e(2183),r=e(1215);function n(a,u){this.point=a,this.index=u}function s(a,u){for(var p=a.point,c=u.point,x=p.length,g=0;g<x;++g){var h=c[g]-p[g];if(h)return h}return 0}f.exports=function(a,u){var p=a.length;if(p===0)return[];var c=a[0].length;if(c<1)return[];if(c===1)return function(z,G,I){if(z===1)return I?[[-1,0]]:[];var H=G.map(function(te,Q){return[te[0],Q]});H.sort(function(te,Q){return te[0]-Q[0]});for(var N=new Array(z-1),F=1;F<z;++F){var V=H[F-1],W=H[F];N[F-1]=[V[1],W[1]]}return I&&N.push([-1,N[0][1]],[N[z-1][1],-1]),N}(p,a,u);for(var x=new Array(p),g=1,h=0;h<p;++h){for(var b=a[h],v=new Array(c+1),y=0,w=0;w<c;++w){var d=b[w];v[w]=d,y+=d*d}v[c]=y,x[h]=new n(v,h),g=Math.max(y,g)}r(x,s),p=x.length;var S=new Array(p+c+1),T=new Array(p+c+1),E=(c+1)*(c+1)*g,C=new Array(c+1);for(h=0;h<=c;++h)C[h]=0;for(C[c]=E,S[0]=C.slice(),T[0]=-1,h=0;h<=c;++h)(v=C.slice())[h]=1,S[h+1]=v,T[h+1]=-1;for(h=0;h<p;++h){var L=x[h];S[h+c+1]=L.point,T[h+c+1]=L.index}var O=i(S,!1);if(O=u?O.filter(function(z){for(var G=0,I=0;I<=c;++I){var H=T[z[I]];if(H<0&&++G>=2)return!1;z[I]=H}return!0}):O.filter(function(z){for(var G=0;G<=c;++G){var I=T[z[G]];if(I<0)return!1;z[G]=I}return!0}),1&c)for(h=0;h<O.length;++h)v=(L=O[h])[0],L[0]=L[1],L[1]=v;return O}},8362:function(f){var o=!1;if(typeof Float64Array<"u"){var e=new Float64Array(1),i=new Uint32Array(e.buffer);e[0]=1,o=!0,i[1]===1072693248?(f.exports=function(n){return e[0]=n,[i[0],i[1]]},f.exports.pack=function(n,s){return i[0]=n,i[1]=s,e[0]},f.exports.lo=function(n){return e[0]=n,i[0]},f.exports.hi=function(n){return e[0]=n,i[1]}):i[0]===1072693248?(f.exports=function(n){return e[0]=n,[i[1],i[0]]},f.exports.pack=function(n,s){return i[1]=n,i[0]=s,e[0]},f.exports.lo=function(n){return e[0]=n,i[1]},f.exports.hi=function(n){return e[0]=n,i[0]}):o=!1}if(!o){var r=new Buffer(8);f.exports=function(n){return r.writeDoubleLE(n,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},f.exports.pack=function(n,s){return r.writeUInt32LE(n,0,!0),r.writeUInt32LE(s,4,!0),r.readDoubleLE(0,!0)},f.exports.lo=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(0,!0)},f.exports.hi=function(n){return r.writeDoubleLE(n,0,!0),r.readUInt32LE(4,!0)}}f.exports.sign=function(n){return f.exports.hi(n)>>>31},f.exports.exponent=function(n){return(f.exports.hi(n)<<1>>>21)-1023},f.exports.fraction=function(n){var s=f.exports.lo(n),a=f.exports.hi(n),u=1048575&a;return 2146435072&a&&(u+=1048576),[s,u]},f.exports.denormalized=function(n){return!(2146435072&f.exports.hi(n))}},3094:function(f){function o(e,i,r){var n=0|e[r];if(n<=0)return[];var s,a=new Array(n);if(r===e.length-1)for(s=0;s<n;++s)a[s]=i;else for(s=0;s<n;++s)a[s]=o(e,i,r+1);return a}f.exports=function(e,i){switch(i===void 0&&(i=0),typeof e){case"number":if(e>0)return function(r,n){var s,a;for(s=new Array(r),a=0;a<r;++a)s[a]=n;return s}(0|e,i);break;case"object":if(typeof e.length=="number")return o(e,i,0)}return[]}},8348:function(f,o,e){f.exports=function(r,n){var s=r.length;if(typeof n!="number"){n=0;for(var a=0;a<s;++a){var u=r[a];n=Math.max(n,u[0],u[1])}n=1+(0|n)}n|=0;var p=new Array(n);for(a=0;a<n;++a)p[a]=[];for(a=0;a<s;++a)p[(u=r[a])[0]].push(u[1]),p[u[1]].push(u[0]);for(var c=0;c<n;++c)i(p[c],function(x,g){return x-g});return p};var i=e(1215)},5795:function(f){f.exports=function(o,e,i){var r=e||0,n=i||1;return[[o[12]+o[0],o[13]+o[1],o[14]+o[2],o[15]+o[3]],[o[12]-o[0],o[13]-o[1],o[14]-o[2],o[15]-o[3]],[o[12]+o[4],o[13]+o[5],o[14]+o[6],o[15]+o[7]],[o[12]-o[4],o[13]-o[5],o[14]-o[6],o[15]-o[7]],[r*o[12]+o[8],r*o[13]+o[9],r*o[14]+o[10],r*o[15]+o[11]],[n*o[12]-o[8],n*o[13]-o[9],n*o[14]-o[10],n*o[15]-o[11]]]}},8444:function(f,o,e){f.exports=function(p,c,x){switch(arguments.length){case 0:return new s([0],[0],0);case 1:return typeof p=="number"?new s(g=u(p),g,0):new s(p,u(p.length),0);case 2:var g;if(typeof c=="number")return new s(p,g=u(p.length),+c);x=0;case 3:if(p.length!==c.length)throw new Error("state and velocity lengths must match");return new s(p,c,x)}};var i=e(9680),r=e(5070);function n(p,c,x){return Math.min(c,Math.max(p,x))}function s(p,c,x){this.dimension=p.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var g=0;g<this.dimension;++g)this.bounds[0][g]=-1/0,this.bounds[1][g]=1/0;this._state=p.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[x],this._scratch=[p.slice(),p.slice(),p.slice(),p.slice(),p.slice()]}var a=s.prototype;function u(p){for(var c=new Array(p),x=0;x<p;++x)c[x]=0;return c}a.flush=function(p){var c=r.gt(this._time,p)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},a.curve=function(p){var c=this._time,x=c.length,g=r.le(c,p),h=this._scratch[0],b=this._state,v=this._velocity,y=this.dimension,w=this.bounds;if(g<0)for(var d=y-1,S=0;S<y;++S,--d)h[S]=b[d];else if(g>=x-1){d=b.length-1;var T=p-c[x-1];for(S=0;S<y;++S,--d)h[S]=b[d]+T*v[d]}else{d=y*(g+1)-1;var E=c[g],C=c[g+1]-E||1,L=this._scratch[1],O=this._scratch[2],z=this._scratch[3],G=this._scratch[4],I=!0;for(S=0;S<y;++S,--d)L[S]=b[d],z[S]=v[d]*C,O[S]=b[d+y],G[S]=v[d+y]*C,I=I&&L[S]===O[S]&&z[S]===G[S]&&z[S]===0;if(I)for(S=0;S<y;++S)h[S]=L[S];else i(L,z,O,G,(p-E)/C,h)}var H=w[0],N=w[1];for(S=0;S<y;++S)h[S]=n(H[S],N[S],h[S]);return h},a.dcurve=function(p){var c=this._time,x=c.length,g=r.le(c,p),h=this._scratch[0],b=this._state,v=this._velocity,y=this.dimension;if(g>=x-1)for(var w=b.length-1,d=(c[x-1],0);d<y;++d,--w)h[d]=v[w];else{w=y*(g+1)-1;var S=c[g],T=c[g+1]-S||1,E=this._scratch[1],C=this._scratch[2],L=this._scratch[3],O=this._scratch[4],z=!0;for(d=0;d<y;++d,--w)E[d]=b[w],L[d]=v[w]*T,C[d]=b[w+y],O[d]=v[w+y]*T,z=z&&E[d]===C[d]&&L[d]===O[d]&&L[d]===0;if(z)for(d=0;d<y;++d)h[d]=0;else for(i.derivative(E,L,C,O,(p-S)/T,h),d=0;d<y;++d)h[d]/=T}return h},a.lastT=function(){var p=this._time;return p[p.length-1]},a.stable=function(){for(var p=this._velocity,c=p.length,x=this.dimension-1;x>=0;--x)if(p[--c])return!1;return!0},a.jump=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var g=this._state,h=this._velocity,b=g.length-this.dimension,v=this.bounds,y=v[0],w=v[1];this._time.push(c,p);for(var d=0;d<2;++d)for(var S=0;S<x;++S)g.push(g[b++]),h.push(0);for(this._time.push(p),S=x;S>0;--S)g.push(n(y[S-1],w[S-1],arguments[S])),h.push(0)}},a.push=function(p){var c=this.lastT(),x=this.dimension;if(!(p<c||arguments.length!==x+1)){var g=this._state,h=this._velocity,b=g.length-this.dimension,v=p-c,y=this.bounds,w=y[0],d=y[1],S=v>1e-6?1/v:0;this._time.push(p);for(var T=x;T>0;--T){var E=n(w[T-1],d[T-1],arguments[T]);g.push(E),h.push((E-g[b++])*S)}}},a.set=function(p){var c=this.dimension;if(!(p<this.lastT()||arguments.length!==c+1)){var x=this._state,g=this._velocity,h=this.bounds,b=h[0],v=h[1];this._time.push(p);for(var y=c;y>0;--y)x.push(n(b[y-1],v[y-1],arguments[y])),g.push(0)}},a.move=function(p){var c=this.lastT(),x=this.dimension;if(!(p<=c||arguments.length!==x+1)){var g=this._state,h=this._velocity,b=g.length-this.dimension,v=this.bounds,y=v[0],w=v[1],d=p-c,S=d>1e-6?1/d:0;this._time.push(p);for(var T=x;T>0;--T){var E=arguments[T];g.push(n(y[T-1],w[T-1],g[b++]+E)),h.push(E*S)}}},a.idle=function(p){var c=this.lastT();if(!(p<c)){var x=this.dimension,g=this._state,h=this._velocity,b=g.length-x,v=this.bounds,y=v[0],w=v[1],d=p-c;this._time.push(p);for(var S=x-1;S>=0;--S)g.push(n(y[S],w[S],g[b]+d*h[b])),h.push(0),b+=1}}},7080:function(f){function o(b,v,y,w,d,S){this._color=b,this.key=v,this.value=y,this.left=w,this.right=d,this._count=S}function e(b){return new o(b._color,b.key,b.value,b.left,b.right,b._count)}function i(b,v){return new o(b,v.key,v.value,v.left,v.right,v._count)}function r(b){b._count=1+(b.left?b.left._count:0)+(b.right?b.right._count:0)}function n(b,v){this._compare=b,this.root=v}f.exports=function(b){return new n(b||h,null)};var s=n.prototype;function a(b,v){var y;return v.left&&(y=a(b,v.left))?y:(y=b(v.key,v.value))||(v.right?a(b,v.right):void 0)}function u(b,v,y,w){if(v(b,w.key)<=0){var d;if(w.left&&(d=u(b,v,y,w.left))||(d=y(w.key,w.value)))return d}if(w.right)return u(b,v,y,w.right)}function p(b,v,y,w,d){var S,T=y(b,d.key),E=y(v,d.key);if(T<=0&&(d.left&&(S=p(b,v,y,w,d.left))||E>0&&(S=w(d.key,d.value))))return S;if(E>0&&d.right)return p(b,v,y,w,d.right)}function c(b,v){this.tree=b,this._stack=v}Object.defineProperty(s,"keys",{get:function(){var b=[];return this.forEach(function(v,y){b.push(v)}),b}}),Object.defineProperty(s,"values",{get:function(){var b=[];return this.forEach(function(v,y){b.push(y)}),b}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(b,v){for(var y=this._compare,w=this.root,d=[],S=[];w;){var T=y(b,w.key);d.push(w),S.push(T),w=T<=0?w.left:w.right}d.push(new o(0,b,v,null,null,1));for(var E=d.length-2;E>=0;--E)w=d[E],S[E]<=0?d[E]=new o(w._color,w.key,w.value,d[E+1],w.right,w._count+1):d[E]=new o(w._color,w.key,w.value,w.left,d[E+1],w._count+1);for(E=d.length-1;E>1;--E){var C=d[E-1];if(w=d[E],C._color===1||w._color===1)break;var L=d[E-2];if(L.left===C)if(C.left===w){if(!(O=L.right)||O._color!==0){L._color=0,L.left=C.right,C._color=1,C.right=L,d[E-2]=C,d[E-1]=w,r(L),r(C),E>=3&&((z=d[E-3]).left===L?z.left=C:z.right=C);break}C._color=1,L.right=i(1,O),L._color=0,E-=1}else{if(!(O=L.right)||O._color!==0){C.right=w.left,L._color=0,L.left=w.right,w._color=1,w.left=C,w.right=L,d[E-2]=w,d[E-1]=C,r(L),r(C),r(w),E>=3&&((z=d[E-3]).left===L?z.left=w:z.right=w);break}C._color=1,L.right=i(1,O),L._color=0,E-=1}else if(C.right===w){if(!(O=L.left)||O._color!==0){L._color=0,L.right=C.left,C._color=1,C.left=L,d[E-2]=C,d[E-1]=w,r(L),r(C),E>=3&&((z=d[E-3]).right===L?z.right=C:z.left=C);break}C._color=1,L.left=i(1,O),L._color=0,E-=1}else{var O;if(!(O=L.left)||O._color!==0){var z;C.left=w.right,L._color=0,L.right=w.left,w._color=1,w.right=C,w.left=L,d[E-2]=w,d[E-1]=C,r(L),r(C),r(w),E>=3&&((z=d[E-3]).right===L?z.right=w:z.left=w);break}C._color=1,L.left=i(1,O),L._color=0,E-=1}}return d[0]._color=1,new n(y,d[0])},s.forEach=function(b,v,y){if(this.root)switch(arguments.length){case 1:return a(b,this.root);case 2:return u(v,this._compare,b,this.root);case 3:return this._compare(v,y)>=0?void 0:p(v,y,this._compare,b,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var b=[],v=this.root;v;)b.push(v),v=v.left;return new c(this,b)}}),Object.defineProperty(s,"end",{get:function(){for(var b=[],v=this.root;v;)b.push(v),v=v.right;return new c(this,b)}}),s.at=function(b){if(b<0)return new c(this,[]);for(var v=this.root,y=[];;){if(y.push(v),v.left){if(b<v.left._count){v=v.left;continue}b-=v.left._count}if(!b)return new c(this,y);if(b-=1,!v.right||b>=v.right._count)break;v=v.right}return new c(this,[])},s.ge=function(b){for(var v=this._compare,y=this.root,w=[],d=0;y;){var S=v(b,y.key);w.push(y),S<=0&&(d=w.length),y=S<=0?y.left:y.right}return w.length=d,new c(this,w)},s.gt=function(b){for(var v=this._compare,y=this.root,w=[],d=0;y;){var S=v(b,y.key);w.push(y),S<0&&(d=w.length),y=S<0?y.left:y.right}return w.length=d,new c(this,w)},s.lt=function(b){for(var v=this._compare,y=this.root,w=[],d=0;y;){var S=v(b,y.key);w.push(y),S>0&&(d=w.length),y=S<=0?y.left:y.right}return w.length=d,new c(this,w)},s.le=function(b){for(var v=this._compare,y=this.root,w=[],d=0;y;){var S=v(b,y.key);w.push(y),S>=0&&(d=w.length),y=S<0?y.left:y.right}return w.length=d,new c(this,w)},s.find=function(b){for(var v=this._compare,y=this.root,w=[];y;){var d=v(b,y.key);if(w.push(y),d===0)return new c(this,w);y=d<=0?y.left:y.right}return new c(this,[])},s.remove=function(b){var v=this.find(b);return v?v.remove():this},s.get=function(b){for(var v=this._compare,y=this.root;y;){var w=v(b,y.key);if(w===0)return y.value;y=w<=0?y.left:y.right}};var x=c.prototype;function g(b,v){b.key=v.key,b.value=v.value,b.left=v.left,b.right=v.right,b._color=v._color,b._count=v._count}function h(b,v){return b<v?-1:b>v?1:0}Object.defineProperty(x,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(x,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),x.clone=function(){return new c(this.tree,this._stack.slice())},x.remove=function(){var b=this._stack;if(b.length===0)return this.tree;var v=new Array(b.length),y=b[b.length-1];v[v.length-1]=new o(y._color,y.key,y.value,y.left,y.right,y._count);for(var w=b.length-2;w>=0;--w)(y=b[w]).left===b[w+1]?v[w]=new o(y._color,y.key,y.value,v[w+1],y.right,y._count):v[w]=new o(y._color,y.key,y.value,y.left,v[w+1],y._count);if((y=v[v.length-1]).left&&y.right){var d=v.length;for(y=y.left;y.right;)v.push(y),y=y.right;var S=v[d-1];for(v.push(new o(y._color,S.key,S.value,y.left,y.right,y._count)),v[d-1].key=y.key,v[d-1].value=y.value,w=v.length-2;w>=d;--w)y=v[w],v[w]=new o(y._color,y.key,y.value,y.left,v[w+1],y._count);v[d-1].left=v[d]}if((y=v[v.length-1])._color===0){var T=v[v.length-2];for(T.left===y?T.left=null:T.right===y&&(T.right=null),v.pop(),w=0;w<v.length;++w)v[w]._count--;return new n(this.tree._compare,v[0])}if(y.left||y.right){for(y.left?g(y,y.left):y.right&&g(y,y.right),y._color=1,w=0;w<v.length-1;++w)v[w]._count--;return new n(this.tree._compare,v[0])}if(v.length===1)return new n(this.tree._compare,null);for(w=0;w<v.length;++w)v[w]._count--;var E=v[v.length-2];return function(C){for(var L,O,z,G,I=C.length-1;I>=0;--I){if(L=C[I],I===0)return void(L._color=1);if((O=C[I-1]).left===L){if((z=O.right).right&&z.right._color===0)return G=(z=O.right=e(z)).right=e(z.right),O.right=z.left,z.left=O,z.right=G,z._color=O._color,L._color=1,O._color=1,G._color=1,r(O),r(z),I>1&&((H=C[I-2]).left===O?H.left=z:H.right=z),void(C[I-1]=z);if(z.left&&z.left._color===0)return G=(z=O.right=e(z)).left=e(z.left),O.right=G.left,z.left=G.right,G.left=O,G.right=z,G._color=O._color,O._color=1,z._color=1,L._color=1,r(O),r(z),r(G),I>1&&((H=C[I-2]).left===O?H.left=G:H.right=G),void(C[I-1]=G);if(z._color===1){if(O._color===0)return O._color=1,void(O.right=i(0,z));O.right=i(0,z);continue}z=e(z),O.right=z.left,z.left=O,z._color=O._color,O._color=0,r(O),r(z),I>1&&((H=C[I-2]).left===O?H.left=z:H.right=z),C[I-1]=z,C[I]=O,I+1<C.length?C[I+1]=L:C.push(L),I+=2}else{if((z=O.left).left&&z.left._color===0)return G=(z=O.left=e(z)).left=e(z.left),O.left=z.right,z.right=O,z.left=G,z._color=O._color,L._color=1,O._color=1,G._color=1,r(O),r(z),I>1&&((H=C[I-2]).right===O?H.right=z:H.left=z),void(C[I-1]=z);if(z.right&&z.right._color===0)return G=(z=O.left=e(z)).right=e(z.right),O.left=G.right,z.right=G.left,G.right=O,G.left=z,G._color=O._color,O._color=1,z._color=1,L._color=1,r(O),r(z),r(G),I>1&&((H=C[I-2]).right===O?H.right=G:H.left=G),void(C[I-1]=G);if(z._color===1){if(O._color===0)return O._color=1,void(O.left=i(0,z));O.left=i(0,z);continue}var H;z=e(z),O.left=z.right,z.right=O,z._color=O._color,O._color=0,r(O),r(z),I>1&&((H=C[I-2]).right===O?H.right=z:H.left=z),C[I-1]=z,C[I]=O,I+1<C.length?C[I+1]=L:C.push(L),I+=2}}}(v),E.left===y?E.left=null:E.right=null,new n(this.tree._compare,v[0])},Object.defineProperty(x,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(x,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(x,"index",{get:function(){var b=0,v=this._stack;if(v.length===0){var y=this.tree.root;return y?y._count:0}v[v.length-1].left&&(b=v[v.length-1].left._count);for(var w=v.length-2;w>=0;--w)v[w+1]===v[w].right&&(++b,v[w].left&&(b+=v[w].left._count));return b},enumerable:!0}),x.next=function(){var b=this._stack;if(b.length!==0){var v=b[b.length-1];if(v.right)for(v=v.right;v;)b.push(v),v=v.left;else for(b.pop();b.length>0&&b[b.length-1].right===v;)v=b[b.length-1],b.pop()}},Object.defineProperty(x,"hasNext",{get:function(){var b=this._stack;if(b.length===0)return!1;if(b[b.length-1].right)return!0;for(var v=b.length-1;v>0;--v)if(b[v-1].left===b[v])return!0;return!1}}),x.update=function(b){var v=this._stack;if(v.length===0)throw new Error("Can't update empty node!");var y=new Array(v.length),w=v[v.length-1];y[y.length-1]=new o(w._color,w.key,b,w.left,w.right,w._count);for(var d=v.length-2;d>=0;--d)(w=v[d]).left===v[d+1]?y[d]=new o(w._color,w.key,w.value,y[d+1],w.right,w._count):y[d]=new o(w._color,w.key,w.value,w.left,y[d+1],w._count);return new n(this.tree._compare,y[0])},x.prev=function(){var b=this._stack;if(b.length!==0){var v=b[b.length-1];if(v.left)for(v=v.left;v;)b.push(v),v=v.right;else for(b.pop();b.length>0&&b[b.length-1].left===v;)v=b[b.length-1],b.pop()}},Object.defineProperty(x,"hasPrev",{get:function(){var b=this._stack;if(b.length===0)return!1;if(b[b.length-1].left)return!0;for(var v=b.length-1;v>0;--v)if(b[v-1].right===b[v])return!0;return!1}})},7453:function(f,o,e){f.exports=function(T,E){var C=new c(T);return C.update(E),C};var i=e(9557),r=e(1681),n=e(1011),s=e(2864),a=e(8468),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function p(T,E){return T[0]=E[0],T[1]=E[1],T[2]=E[2],T}function c(T){this.gl=T,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(T)}var x=c.prototype;function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}x.update=function(T){function E(te,Q,X){if(X in T){var q,Z=T[X],J=this[X];(te?Array.isArray(Z)&&Array.isArray(Z[0]):Array.isArray(Z))?this[X]=q=[Q(Z[0]),Q(Z[1]),Q(Z[2])]:this[X]=q=[Q(Z),Q(Z),Q(Z)];for(var ne=0;ne<3;++ne)if(q[ne]!==J[ne])return!0}return!1}T=T||{};var C,L=E.bind(this,!1,Number),O=E.bind(this,!1,Boolean),z=E.bind(this,!1,String),G=E.bind(this,!0,function(te){if(Array.isArray(te)){if(te.length===3)return[+te[0],+te[1],+te[2],1];if(te.length===4)return[+te[0],+te[1],+te[2],+te[3]]}return[0,0,0,1]}),I=!1,H=!1;if("bounds"in T)for(var N=T.bounds,F=0;F<2;++F)for(var V=0;V<3;++V)N[F][V]!==this.bounds[F][V]&&(H=!0),this.bounds[F][V]=N[F][V];if("ticks"in T)for(C=T.ticks,I=!0,this.autoTicks=!1,F=0;F<3;++F)this.tickSpacing[F]=0;else L("tickSpacing")&&(this.autoTicks=!0,H=!0);if(this._firstInit&&("ticks"in T||"tickSpacing"in T||(this.autoTicks=!0),H=!0,I=!0,this._firstInit=!1),H&&this.autoTicks&&(C=a.create(this.bounds,this.tickSpacing),I=!0),I){for(F=0;F<3;++F)C[F].sort(function(te,Q){return te.x-Q.x});a.equal(C,this.ticks)?I=!1:this.ticks=C}O("tickEnable"),z("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),G("tickColor");var W=z("labels");z("labelFont")&&(W=!0),O("labelEnable"),L("labelSize"),L("labelPad"),G("labelColor"),O("lineEnable"),O("lineMirror"),L("lineWidth"),G("lineColor"),O("lineTickEnable"),O("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),G("lineTickColor"),O("gridEnable"),L("gridWidth"),G("gridColor"),O("zeroEnable"),G("zeroLineColor"),L("zeroLineWidth"),O("backgroundEnable"),G("backgroundColor"),this._text?this._text&&(W||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=i(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=r(this.gl,this.bounds,this.ticks))};var h=[new g,new g,new g];function b(T,E,C,L,O){for(var z=T.primalOffset,G=T.primalMinor,I=T.mirrorOffset,H=T.mirrorMinor,N=L[E],F=0;F<3;++F)if(E!==F){var V=z,W=I,te=G,Q=H;N&1<<F&&(V=I,W=z,te=H,Q=G),V[F]=C[0][F],W[F]=C[1][F],O[F]>0?(te[F]=-1,Q[F]=0):(te[F]=0,Q[F]=1)}}var v=[0,0,0],y={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(T){};var w=[0,0,0],d=[0,0,0],S=[0,0,0];x.draw=function(T){T=T||y;for(var E=this.gl,C=T.model||u,L=T.view||u,O=T.projection||u,z=this.bounds,G=T._ortho||!1,I=s(C,L,O,z,G),H=I.cubeEdges,N=I.axis,F=L[12],V=L[13],W=L[14],te=L[15],Q=(G?2:1)*this.pixelRatio*(O[3]*F+O[7]*V+O[11]*W+O[15]*te)/E.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=H[X],this.lastCubeProps.axis[X]=N[X];var q=h;for(X=0;X<3;++X)b(h[X],X,this.bounds,H,N);E=this.gl;var Z,J,ne,re=v;for(X=0;X<3;++X)this.backgroundEnable[X]?re[X]=N[X]:re[X]=0;for(this._background.draw(C,L,O,z,re,this.backgroundColor),this._lines.bind(C,L,O,this),X=0;X<3;++X){var ae=[0,0,0];N[X]>0?ae[X]=z[1][X]:ae[X]=z[0][X];for(var ue=0;ue<2;++ue){var he=(X+1+ue)%3,de=(X+1+(1^ue))%3;this.gridEnable[he]&&this._lines.drawGrid(he,de,this.bounds,ae,this.gridColor[he],this.gridWidth[he]*this.pixelRatio)}for(ue=0;ue<2;++ue)he=(X+1+ue)%3,de=(X+1+(1^ue))%3,this.zeroEnable[de]&&Math.min(z[0][de],z[1][de])<=0&&Math.max(z[0][de],z[1][de])>=0&&this._lines.drawZero(he,de,this.bounds,ae,this.zeroLineColor[de],this.zeroLineWidth[de]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,q[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,q[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var xe=p(w,q[X].primalMinor),me=p(d,q[X].mirrorMinor),ve=this.lineTickLength;for(ue=0;ue<3;++ue){var Le=Q/C[5*ue];xe[ue]*=ve[ue]*Le,me[ue]*=ve[ue]*Le}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,q[X].primalOffset,xe,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,q[X].mirrorOffset,me,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function Ae(Me){(ne=[0,0,0])[Me]=1}function we(Me,be,Ie){var Be=(Me+1)%3,ce=(Me+2)%3,Te=be[Be],ye=be[ce],Pe=Ie[Be],Re=Ie[ce];Te>0&&Re>0||Te>0&&Re<0||Te<0&&Re>0||Te<0&&Re<0?Ae(Be):(ye>0&&Pe>0||ye>0&&Pe<0||ye<0&&Pe>0||ye<0&&Pe<0)&&Ae(ce)}for(this._lines.unbind(),this._text.bind(C,L,O,this.pixelRatio),X=0;X<3;++X){var se=q[X].primalMinor,oe=q[X].mirrorMinor,fe=p(S,q[X].primalOffset);for(ue=0;ue<3;++ue)this.lineTickEnable[X]&&(fe[ue]+=Q*se[ue]*Math.max(this.lineTickLength[ue],0)/C[5*ue]);var Se=[0,0,0];if(Se[X]=1,this.tickEnable[X]){for(this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,J=1,(Z=[this.tickAlign[X],.5,J])[0]==="auto"?Z[0]=0:Z[0]=parseInt(""+Z[0]),ne=[0,0,0],we(X,se,oe),ue=0;ue<3;++ue)fe[ue]+=Q*se[ue]*this.tickPad[ue]/C[5*ue];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],fe,this.tickColor[X],Se,ne,Z)}if(this.labelEnable[X]){for(J=0,ne=[0,0,0],this.labels[X].length>4&&(Ae(X),J=1),(Z=[this.labelAlign[X],.5,J])[0]==="auto"?Z[0]=0:Z[0]=parseInt(""+Z[0]),ue=0;ue<3;++ue)fe[ue]+=Q*se[ue]*this.labelPad[ue]/C[5*ue];fe[X]+=.5*(z[0][X]+z[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],fe,this.labelColor[X],[0,0,0],ne,Z)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},1011:function(f,o,e){f.exports=function(u){for(var p=[],c=[],x=0,g=0;g<3;++g)for(var h=(g+1)%3,b=(g+2)%3,v=[0,0,0],y=[0,0,0],w=-1;w<=1;w+=2){c.push(x,x+2,x+1,x+1,x+2,x+3),v[g]=w,y[g]=w;for(var d=-1;d<=1;d+=2){v[h]=d;for(var S=-1;S<=1;S+=2)v[b]=S,p.push(v[0],v[1],v[2],y[0],y[1],y[2]),x+=1}var T=h;h=b,b=T}var E=i(u,new Float32Array(p)),C=i(u,new Uint16Array(c),u.ELEMENT_ARRAY_BUFFER),L=r(u,[{buffer:E,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:u.FLOAT,size:3,offset:12,stride:24}],C),O=n(u);return O.attributes.position.location=0,O.attributes.normal.location=1,new s(u,E,L,O)};var i=e(5827),r=e(2944),n=e(1943).bg;function s(u,p,c,x){this.gl=u,this.buffer=p,this.vao=c,this.shader=x}var a=s.prototype;a.draw=function(u,p,c,x,g,h){for(var b=!1,v=0;v<3;++v)b=b||g[v];if(b){var y=this.gl;y.enable(y.POLYGON_OFFSET_FILL),y.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:p,projection:c,bounds:x,enable:g,colors:h},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),y.disable(y.POLYGON_OFFSET_FILL)}},a.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},2864:function(f,o,e){f.exports=function(d,S,T,E,C){r(a,S,d),r(a,T,a);for(var L=0,O=0;O<2;++O){c[2]=E[O][2];for(var z=0;z<2;++z){c[1]=E[z][1];for(var G=0;G<2;++G)c[0]=E[G][0],g(u[L],c,a),L+=1}}var I=-1;for(O=0;O<8;++O){for(var H=u[O][3],N=0;N<3;++N)p[O][N]=u[O][N]/H;C&&(p[O][2]*=-1),H<0&&(I<0||p[O][2]<p[I][2])&&(I=O)}if(I<0){I=0;for(var F=0;F<3;++F){for(var V=(F+2)%3,W=(F+1)%3,te=-1,Q=-1,X=0;X<2;++X){var q=(J=X<<F)+(X<<V)+(1-X<<W),Z=J+(1-X<<V)+(X<<W);s(p[J],p[q],p[Z],x)<0||(X?te=1:Q=1)}if(te<0||Q<0)Q>te&&(I|=1<<F);else{for(X=0;X<2;++X){q=(J=X<<F)+(X<<V)+(1-X<<W),Z=J+(1-X<<V)+(X<<W);var J,ne=b([u[J],u[q],u[Z],u[J+(1<<V)+(1<<W)]]);X?te=ne:Q=ne}Q>te&&(I|=1<<F)}}}var re=7^I,ae=-1;for(O=0;O<8;++O)O!==I&&O!==re&&(ae<0||p[ae][1]>p[O][1])&&(ae=O);var ue=-1;for(O=0;O<3;++O)(de=ae^1<<O)!==I&&de!==re&&(ue<0&&(ue=de),(W=p[de])[0]<p[ue][0]&&(ue=de));var he=-1;for(O=0;O<3;++O){var de;(de=ae^1<<O)!==I&&de!==re&&de!==ue&&(he<0&&(he=de),(W=p[de])[0]>p[he][0]&&(he=de))}var xe=v;xe[0]=xe[1]=xe[2]=0,xe[i.log2(ue^ae)]=ae&ue,xe[i.log2(ae^he)]=ae&he;var me=7^he;me===I||me===re?(me=7^ue,xe[i.log2(he^me)]=me&he):xe[i.log2(ue^me)]=me&ue;var ve=y,Le=I;for(F=0;F<3;++F)ve[F]=Le&1<<F?-1:1;return w};var i=e(2288),r=e(104),n=e(4670),s=e(417),a=new Array(16),u=new Array(8),p=new Array(8),c=new Array(3),x=[0,0,0];function g(d,S,T){for(var E=0;E<4;++E){d[E]=T[12+E];for(var C=0;C<3;++C)d[E]+=S[C]*T[4*C+E]}}(function(){for(var d=0;d<8;++d)u[d]=[1,1,1,1],p[d]=[1,1,1]})();var h=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function b(d){for(var S=0;S<h.length;++S)if((d=n.positive(d,h[S])).length<3)return 0;var T=d[0],E=T[0]/T[3],C=T[1]/T[3],L=0;for(S=1;S+1<d.length;++S){var O=d[S],z=d[S+1],G=O[0]/O[3]-E,I=O[1]/O[3]-C,H=z[0]/z[3]-E,N=z[1]/z[3]-C;L+=Math.abs(G*N-I*H)}return L}var v=[1,1,1],y=[0,0,0],w={cubeEdges:v,axis:y}},1681:function(f,o,e){f.exports=function(v,y,w){var d=[],S=[0,0,0],T=[0,0,0],E=[0,0,0],C=[0,0,0];d.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var O=d.length/3|0,z=0;z<w[L].length;++z){var G=+w[L][z].x;d.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1)}var I=d.length/3|0;S[L]=O,T[L]=I-O,O=d.length/3|0;for(var H=0;H<w[L].length;++H)G=+w[L][H].x,d.push(G,0,1,G,1,1,G,0,-1,G,0,-1,G,1,1,G,1,-1);I=d.length/3|0,E[L]=O,C[L]=I-O}var N=i(v,new Float32Array(d)),F=r(v,[{buffer:N,type:v.FLOAT,size:3,stride:0,offset:0}]),V=n(v);return V.attributes.position.location=0,new h(v,N,F,V,T,S,C,E)};var i=e(5827),r=e(2944),n=e(1943).j,s=[0,0,0],a=[0,0,0],u=[0,0,0],p=[0,0,0],c=[1,1];function x(v){return v[0]=v[1]=v[2]=0,v}function g(v,y){return v[0]=y[0],v[1]=y[1],v[2]=y[2],v}function h(v,y,w,d,S,T,E,C){this.gl=v,this.vertBuffer=y,this.vao=w,this.shader=d,this.tickCount=S,this.tickOffset=T,this.gridCount=E,this.gridOffset=C}var b=h.prototype;b.bind=function(v,y,w){this.shader.bind(),this.shader.uniforms.model=v,this.shader.uniforms.view=y,this.shader.uniforms.projection=w,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},b.unbind=function(){this.vao.unbind()},b.drawAxisLine=function(v,y,w,d,S){var T=x(a);this.shader.uniforms.majorAxis=a,T[v]=y[1][v]-y[0][v],this.shader.uniforms.minorAxis=T;var E,C=g(p,w);C[v]+=y[0][v],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=S,this.shader.uniforms.color=d,(E=x(u))[(v+2)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6),(E=x(u))[(v+1)%3]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,6)},b.drawAxisTicks=function(v,y,w,d,S){if(this.tickCount[v]){var T=x(s);T[v]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=y,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=d,this.shader.uniforms.lineWidth=S;var E=x(u);E[v]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[v],this.tickOffset[v])}},b.drawGrid=function(v,y,w,d,S,T){if(this.gridCount[v]){var E=x(a);E[y]=w[1][y]-w[0][y],this.shader.uniforms.minorAxis=E;var C=g(p,d);C[y]+=w[0][y],this.shader.uniforms.offset=C;var L=x(s);L[v]=1,this.shader.uniforms.majorAxis=L;var O=x(u);O[v]=1,this.shader.uniforms.screenAxis=O,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,this.gridCount[v],this.gridOffset[v])}},b.drawZero=function(v,y,w,d,S,T){var E=x(a);this.shader.uniforms.majorAxis=E,E[v]=w[1][v]-w[0][v],this.shader.uniforms.minorAxis=E;var C=g(p,d);C[v]+=w[0][v],this.shader.uniforms.offset=C;var L=x(u);L[y]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=S,this.vao.draw(this.gl.TRIANGLES,6)},b.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1943:function(f,o,e){var i=e(6832),r=e(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.j=function(x){return r(x,n,s,null,[{name:"position",type:"vec3"}])};var a=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),u=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);o.f=function(x){return r(x,a,u,null,[{name:"position",type:"vec3"}])};var p=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),c=i([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);o.bg=function(x){return r(x,p,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},9557:function(f,o,e){f.exports=function(g,h,b,v,y,w){var d=i(g),S=r(g,[{buffer:d,size:3}]),T=s(g);T.attributes.position.location=0;var E=new p(g,T,d,S);return E.update(h,b,v,y,w),E};var i=e(5827),r=e(2944),n=e(875),s=e(1943).f,a=window||M.global||{},u=a.__TEXT_CACHE||{};function p(g,h,b,v){this.gl=g,this.shader=h,this.buffer=b,this.vao=v,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}a.__TEXT_CACHE={};var c=p.prototype,x=[0,0];c.bind=function(g,h,b,v){this.vao.bind(),this.shader.bind();var y=this.shader.uniforms;y.model=g,y.view=h,y.projection=b,y.pixelScale=v,x[0]=this.gl.drawingBufferWidth,x[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=x},c.unbind=function(){this.vao.unbind()},c.update=function(g,h,b,v,y){var w=[];function d(G,I,H,N,F,V){var W=u[H];W||(W=u[H]={});var te=W[I];te||(te=W[I]=function(ue,he){try{return n(ue,he)}catch(de){return console.warn('error vectorizing text:"'+ue+'" error:',de),{cells:[],positions:[]}}}(I,{triangles:!0,font:H,textAlign:"center",textBaseline:"middle",lineSpacing:F,styletags:V}));for(var Q=(N||12)/12,X=te.positions,q=te.cells,Z=0,J=q.length;Z<J;++Z)for(var ne=q[Z],re=2;re>=0;--re){var ae=X[ne[re]];w.push(Q*ae[0],-Q*ae[1],G)}}for(var S=[0,0,0],T=[0,0,0],E=[0,0,0],C=[0,0,0],L={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){E[O]=w.length/3|0,d(.5*(g[0][O]+g[1][O]),h[O],b[O],12,1.25,L),C[O]=(w.length/3|0)-E[O],S[O]=w.length/3|0;for(var z=0;z<v[O].length;++z)v[O][z].text&&d(v[O][z].x,v[O][z].text,v[O][z].font||y,v[O][z].fontSize||12,1.25,L);T[O]=(w.length/3|0)-S[O]}this.buffer.update(w),this.tickOffset=S,this.tickCount=T,this.labelOffset=E,this.labelCount=C},c.drawTicks=function(g,h,b,v,y,w,d,S){this.tickCount[g]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=y,this.shader.uniforms.angle=b,this.shader.uniforms.scale=h,this.shader.uniforms.offset=v,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},c.drawLabel=function(g,h,b,v,y,w,d,S){this.labelCount[g]&&(this.shader.uniforms.axis=w,this.shader.uniforms.color=y,this.shader.uniforms.angle=b,this.shader.uniforms.scale=h,this.shader.uniforms.offset=v,this.shader.uniforms.alignDir=d,this.shader.uniforms.alignOpt=S,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},8468:function(f,o){function e(i,r){var n=i+"",s=n.indexOf("."),a=0;s>=0&&(a=n.length-s-1);var u=Math.pow(10,a),p=Math.round(i*r*u),c=p+"";if(c.indexOf("e")>=0)return c;var x=p/u,g=p%u;p<0?(x=0|-Math.ceil(x),g=0|-g):(x=0|Math.floor(x),g|=0);var h=""+x;if(p<0&&(h="-"+h),a){for(var b=""+g;b.length<a;)b="0"+b;return h+"."+b}return h}o.create=function(i,r){for(var n=[],s=0;s<3;++s){for(var a=[],u=(i[0][s],i[1][s],0);u*r[s]<=i[1][s];++u)a.push({x:u*r[s],text:e(r[s],u)});for(u=-1;u*r[s]>=i[0][s];--u)a.push({x:u*r[s],text:e(r[s],u)});n.push(a)}return n},o.equal=function(i,r){for(var n=0;n<3;++n){if(i[n].length!==r[n].length)return!1;for(var s=0;s<i[n].length;++s){var a=i[n][s],u=r[n][s];if(a.x!==u.x||a.text!==u.text||a.font!==u.font||a.fontColor!==u.fontColor||a.fontSize!==u.fontSize||a.dx!==u.dx||a.dy!==u.dy)return!1}}return!0}},2771:function(f,o,e){f.exports=function(w,d,S,T,E){var C=d.model||p,L=d.view||p,O=d.projection||p,z=d._ortho||!1,G=w.bounds,I=(E=E||n(C,L,O,G,z)).axis;s(c,L,C),s(c,O,c);for(var H=v,N=0;N<3;++N)H[N].lo=1/0,H[N].hi=-1/0,H[N].pixelsPerDataUnit=1/0;var F=i(a(c,c));a(c,c);for(var V=0;V<3;++V){var W=(V+1)%3,te=(V+2)%3,Q=y;e:for(N=0;N<2;++N){var X=[];if(I[V]<0!=!!N){Q[V]=G[N][V];for(var q=0;q<2;++q){Q[W]=G[q^N][W];for(var Z=0;Z<2;++Z)Q[te]=G[Z^q^N][te],X.push(Q.slice())}var J=z?5:4;for(q=J;q===J;++q){if(X.length===0)continue e;X=r.positive(X,F[q])}for(q=0;q<X.length;++q){te=X[q];var ne=b(y,c,te,S,T);for(Z=0;Z<3;++Z)H[Z].lo=Math.min(H[Z].lo,te[Z]),H[Z].hi=Math.max(H[Z].hi,te[Z]),Z!==V&&(H[Z].pixelsPerDataUnit=Math.min(H[Z].pixelsPerDataUnit,Math.abs(ne[Z])))}}}}return H};var i=e(5795),r=e(4670),n=e(2864),s=e(104),a=e(2142),u=e(6342),p=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function x(w,d,S){this.lo=w,this.hi=d,this.pixelsPerDataUnit=S}var g=[0,0,0,1],h=[0,0,0,1];function b(w,d,S,T,E){for(var C=0;C<3;++C){for(var L=g,O=h,z=0;z<3;++z)O[z]=L[z]=S[z];O[3]=L[3]=1,O[C]+=1,u(O,O,d),O[3]<0&&(w[C]=1/0),L[C]-=1,u(L,L,d),L[3]<0&&(w[C]=1/0);var G=(L[0]/L[3]-O[0]/O[3])*T,I=(L[1]/L[3]-O[1]/O[3])*E;w[C]=.25*Math.sqrt(G*G+I*I)}return w}var v=[new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0),new x(1/0,-1/0,1/0)],y=[0,0,0]},5827:function(f,o,e){var i=e(5306),r=e(7498),n=e(5050),s=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function a(x,g,h,b,v){this.gl=x,this.type=g,this.handle=h,this.length=b,this.usage=v}var u=a.prototype;function p(x,g,h,b,v,y){var w=v.length*v.BYTES_PER_ELEMENT;if(y<0)return x.bufferData(g,v,b),w;if(w+y>h)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return x.bufferSubData(g,y,v),h}function c(x,g){for(var h=i.malloc(x.length,g),b=x.length,v=0;v<b;++v)h[v]=x[v];return h}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(x,g){if(typeof g!="number"&&(g=-1),this.bind(),typeof x=="object"&&x.shape!==void 0){var h=x.dtype;if(s.indexOf(h)<0&&(h="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(h=gl.getExtension("OES_element_index_uint")&&h!=="uint16"?"uint32":"uint16"),h===x.dtype&&function(w,d){for(var S=1,T=d.length-1;T>=0;--T){if(d[T]!==S)return!1;S*=w[T]}return!0}(x.shape,x.stride))x.offset===0&&x.data.length===x.shape[0]?this.length=p(this.gl,this.type,this.length,this.usage,x.data,g):this.length=p(this.gl,this.type,this.length,this.usage,x.data.subarray(x.offset,x.shape[0]),g);else{var b=i.malloc(x.size,h),v=n(b,x.shape);r.assign(v,x),this.length=p(this.gl,this.type,this.length,this.usage,g<0?b:b.subarray(0,x.size),g),i.free(b)}}else if(Array.isArray(x)){var y;y=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(x,"uint16"):c(x,"float32"),this.length=p(this.gl,this.type,this.length,this.usage,g<0?y:y.subarray(0,x.length),g),i.free(y)}else if(typeof x=="object"&&typeof x.length=="number")this.length=p(this.gl,this.type,this.length,this.usage,x,g);else{if(typeof x!="number"&&x!==void 0)throw new Error("gl-buffer: Invalid data type");if(g>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(x|=0)<=0&&(x=1),this.gl.bufferData(this.type,0|x,this.usage),this.length=x}},f.exports=function(x,g,h,b){if(h=h||x.ARRAY_BUFFER,b=b||x.DYNAMIC_DRAW,h!==x.ARRAY_BUFFER&&h!==x.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(b!==x.DYNAMIC_DRAW&&b!==x.STATIC_DRAW&&b!==x.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var v=x.createBuffer(),y=new a(x,h,v,0,b);return y.update(g),y}},1140:function(f,o,e){var i=e(2858);f.exports=function(n,s){var a=n.positions,u=n.vectors,p={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return s&&(s[0]=[0,0,0],s[1]=[0,0,0]),p;for(var c=0,x=1/0,g=-1/0,h=1/0,b=-1/0,v=1/0,y=-1/0,w=null,d=null,S=[],T=1/0,E=!1,C=0;C<a.length;C++){var L=a[C];x=Math.min(L[0],x),g=Math.max(L[0],g),h=Math.min(L[1],h),b=Math.max(L[1],b),v=Math.min(L[2],v),y=Math.max(L[2],y);var O=u[C];if(i.length(O)>c&&(c=i.length(O)),C){var z=2*i.distance(w,L)/(i.length(d)+i.length(O));z?(T=Math.min(T,z),E=!1):E=!0}E||(w=L,d=O),S.push(O)}var G=[x,h,v],I=[g,b,y];s&&(s[0]=G,s[1]=I),c===0&&(c=1);var H=1/c;isFinite(T)||(T=1),p.vectorScale=T;var N=n.coneSize||.5;n.absoluteConeSize&&(N=n.absoluteConeSize*H),p.coneScale=N,C=0;for(var F=0;C<a.length;C++)for(var V=(L=a[C])[0],W=L[1],te=L[2],Q=S[C],X=i.length(Q)*H,q=0;q<8;q++){p.positions.push([V,W,te,F++]),p.positions.push([V,W,te,F++]),p.positions.push([V,W,te,F++]),p.positions.push([V,W,te,F++]),p.positions.push([V,W,te,F++]),p.positions.push([V,W,te,F++]),p.vectors.push(Q),p.vectors.push(Q),p.vectors.push(Q),p.vectors.push(Q),p.vectors.push(Q),p.vectors.push(Q),p.vertexIntensity.push(X,X,X),p.vertexIntensity.push(X,X,X);var Z=p.positions.length;p.cells.push([Z-6,Z-5,Z-4],[Z-3,Z-2,Z-1])}return p};var r=e(7234);f.exports.createMesh=e(5028),f.exports.createConeMesh=function(n,s){return f.exports.createMesh(n,s,{shaders:r,traceType:"cone"})}},5028:function(f,o,e){var i=e(5158),r=e(5827),n=e(2944),s=e(8931),a=e(104),u=e(7437),p=e(5050),c=e(9156),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(b,v,y,w,d,S,T,E,C,L,O){this.gl=b,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=v,this.dirty=!0,this.triShader=y,this.pickShader=w,this.trianglePositions=d,this.triangleVectors=S,this.triangleColors=E,this.triangleUVs=C,this.triangleIds=T,this.triangleVAO=L,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=x,this._view=x,this._projection=x,this._resolution=[1,1]}var h=g.prototype;h.isOpaque=function(){return this.opacity>=1},h.isTransparent=function(){return this.opacity<1},h.pickSlots=1,h.setPickBase=function(b){this.pickId=b},h.update=function(b){b=b||{};var v=this.gl;this.dirty=!0,"lightPosition"in b&&(this.lightPosition=b.lightPosition),"opacity"in b&&(this.opacity=b.opacity),"ambient"in b&&(this.ambientLight=b.ambient),"diffuse"in b&&(this.diffuseLight=b.diffuse),"specular"in b&&(this.specularLight=b.specular),"roughness"in b&&(this.roughness=b.roughness),"fresnel"in b&&(this.fresnel=b.fresnel),b.tubeScale!==void 0&&(this.tubeScale=b.tubeScale),b.vectorScale!==void 0&&(this.vectorScale=b.vectorScale),b.coneScale!==void 0&&(this.coneScale=b.coneScale),b.coneOffset!==void 0&&(this.coneOffset=b.coneOffset),b.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=v.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=v.LINEAR,this.texture.setPixels(function(ne){for(var re=c({colormap:ne,nshades:256,format:"rgba"}),ae=new Uint8Array(1024),ue=0;ue<256;++ue){for(var he=re[ue],de=0;de<3;++de)ae[4*ue+de]=he[de];ae[4*ue+3]=255*he[3]}return p(ae,[256,256,4],[4,0,1])}(b.colormap)),this.texture.generateMipmap());var y=b.cells,w=b.positions,d=b.vectors;if(w&&y&&d){var S=[],T=[],E=[],C=[],L=[];this.cells=y,this.positions=w,this.vectors=d;var O=b.meshColor||[1,1,1,1],z=b.vertexIntensity,G=1/0,I=-1/0;if(z)if(b.vertexIntensityBounds)G=+b.vertexIntensityBounds[0],I=+b.vertexIntensityBounds[1];else for(var H=0;H<z.length;++H){var N=z[H];G=Math.min(G,N),I=Math.max(I,N)}else for(H=0;H<w.length;++H)N=w[H][2],G=Math.min(G,N),I=Math.max(I,N);for(this.intensity=z||function(ne){for(var re=ne.length,ae=new Array(re),ue=0;ue<re;++ue)ae[ue]=ne[ue][2];return ae}(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],H=0;H<w.length;++H)for(var F=w[H],V=0;V<3;++V)!isNaN(F[V])&&isFinite(F[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],F[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],F[V]));var W=0;e:for(H=0;H<y.length;++H){var te=y[H];if(te.length===3){for(V=0;V<3;++V){F=w[X=te[V]];for(var Q=0;Q<3;++Q)if(isNaN(F[Q])||!isFinite(F[Q]))continue e}for(V=0;V<3;++V){var X;F=w[X=te[2-V]],S.push(F[0],F[1],F[2],F[3]);var q=d[X];T.push(q[0],q[1],q[2],q[3]||0);var Z,J=O;J.length===3?E.push(J[0],J[1],J[2],1):E.push(J[0],J[1],J[2],J[3]),Z=z?[(z[X]-G)/(I-G),0]:[(F[2]-G)/(I-G),0],C.push(Z[0],Z[1]),L.push(H)}W+=1}}this.triangleCount=W,this.trianglePositions.update(S),this.triangleVectors.update(T),this.triangleColors.update(E),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(L))}},h.drawTransparent=h.draw=function(b){b=b||{};for(var v=this.gl,y=b.model||x,w=b.view||x,d=b.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)S[0][T]=Math.max(S[0][T],this.clipBounds[0][T]),S[1][T]=Math.min(S[1][T],this.clipBounds[1][T]);var E={model:y,view:w,projection:d,inverseModel:x.slice(),clipBounds:S,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=u(E.inverseModel,E.model),v.disable(v.CULL_FACE),this.texture.bind(0);var C=new Array(16);for(a(C,E.view,E.model),a(C,E.projection,C),u(C,C),T=0;T<3;++T)E.eyePosition[T]=C[12+T]/C[15];var L=C[15];for(T=0;T<3;++T)L+=this.lightPosition[T]*C[4*T+3];for(T=0;T<3;++T){for(var O=C[12+T],z=0;z<3;++z)O+=C[4*z+T]*this.lightPosition[z];E.lightPosition[T]=O/L}if(this.triangleCount>0){var G=this.triShader;G.bind(),G.uniforms=E,this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},h.drawPick=function(b){b=b||{};for(var v=this.gl,y=b.model||x,w=b.view||x,d=b.projection||x,S=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],T=0;T<3;++T)S[0][T]=Math.max(S[0][T],this.clipBounds[0][T]),S[1][T]=Math.min(S[1][T],this.clipBounds[1][T]);this._model=[].slice.call(y),this._view=[].slice.call(w),this._projection=[].slice.call(d),this._resolution=[v.drawingBufferWidth,v.drawingBufferHeight];var E={model:y,view:w,projection:d,clipBounds:S,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},C=this.pickShader;C.bind(),C.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),v.drawArrays(v.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},h.pick=function(b){if(!b||b.id!==this.pickId)return null;var v=b.value[0]+256*b.value[1]+65536*b.value[2],y=this.cells[v],w=this.positions[y[1]].slice(0,3),d={position:w,dataCoordinate:w,index:Math.floor(y[1]/48)};return this.traceType==="cone"?d.index=Math.floor(y[1]/48):this.traceType==="streamtube"&&(d.intensity=this.intensity[y[1]],d.velocity=this.vectors[y[1]].slice(0,3),d.divergence=this.vectors[y[1]][3],d.index=v),d},h.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},f.exports=function(b,v,y){var w=y.shaders;arguments.length===1&&(b=(v=b).gl);var d=function(I,H){var N=i(I,H.meshShader.vertex,H.meshShader.fragment,null,H.meshShader.attributes);return N.attributes.position.location=0,N.attributes.color.location=2,N.attributes.uv.location=3,N.attributes.vector.location=4,N}(b,w),S=function(I,H){var N=i(I,H.pickShader.vertex,H.pickShader.fragment,null,H.pickShader.attributes);return N.attributes.position.location=0,N.attributes.id.location=1,N.attributes.vector.location=4,N}(b,w),T=s(b,p(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=b.LINEAR_MIPMAP_LINEAR,T.magFilter=b.LINEAR;var E=r(b),C=r(b),L=r(b),O=r(b),z=r(b),G=new g(b,T,d,S,E,C,z,L,O,n(b,[{buffer:E,type:b.FLOAT,size:4},{buffer:z,type:b.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:L,type:b.FLOAT,size:4},{buffer:O,type:b.FLOAT,size:2},{buffer:C,type:b.FLOAT,size:4}]),y.traceType||"cone");return G.update(v),G}},7234:function(f,o,e){var i=e(6832),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},o.pickShader={vertex:s,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},1950:function(f){f.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},6603:function(f,o,e){var i=e(1950);f.exports=function(r){return i[r]}},3110:function(f,o,e){f.exports=function(g){var h=g.gl,b=i(h),v=r(h,[{buffer:b,type:h.FLOAT,size:3,offset:0,stride:40},{buffer:b,type:h.FLOAT,size:4,offset:12,stride:40},{buffer:b,type:h.FLOAT,size:3,offset:28,stride:40}]),y=n(h);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.offset.location=2;var w=new a(h,b,v,y);return w.update(g),w};var i=e(5827),r=e(2944),n=e(7667),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(g,h,b,v){this.gl=g,this.shader=v,this.buffer=h,this.vao=b,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=a.prototype;function p(g,h){for(var b=0;b<3;++b)g[0][b]=Math.min(g[0][b],h[b]),g[1][b]=Math.max(g[1][b],h[b])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(g){var h=this.gl,b=this.shader.uniforms;this.shader.bind();var v=b.view=g.view||s,y=b.projection=g.projection||s;b.model=g.model||s,b.clipBounds=this.clipBounds,b.opacity=this.opacity;var w=v[12],d=v[13],S=v[14],T=v[15],E=(g._ortho?2:1)*this.pixelRatio*(y[3]*w+y[7]*d+y[11]*S+y[15]*T)/h.drawingBufferHeight;this.vao.bind();for(var C=0;C<3;++C)h.lineWidth(this.lineWidth[C]*this.pixelRatio),b.capSize=this.capSize[C]*E,this.lineCount[C]&&h.drawArrays(h.LINES,this.lineOffset[C],this.lineCount[C]);this.vao.unbind()};var c=function(){for(var g=new Array(3),h=0;h<3;++h){for(var b=[],v=1;v<=2;++v)for(var y=-1;y<=1;y+=2){var w=[0,0,0];w[(v+h)%3]=y,b.push(w)}g[h]=b}return g}();function x(g,h,b,v){for(var y=c[v],w=0;w<y.length;++w){var d=y[w];g.push(h[0],h[1],h[2],b[0],b[1],b[2],b[3],d[0],d[1],d[2])}return y.length}u.update=function(g){"lineWidth"in(g=g||{})&&(this.lineWidth=g.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in g&&(this.capSize=g.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var h=g.color||[[0,0,0],[0,0,0],[0,0,0]],b=g.position,v=g.error;if(Array.isArray(h[0])||(h=[h,h,h]),b&&v){var y=[],w=b.length,d=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var S=0;S<3;++S){this.lineOffset[S]=d;e:for(var T=0;T<w;++T){for(var E=b[T],C=0;C<3;++C)if(isNaN(E[C])||!isFinite(E[C]))continue e;var L,O=v[T],z=h[S];Array.isArray(z[0])&&(z=h[T]),z.length===3?z=[z[0],z[1],z[2],1]:z.length===4&&(z=[z[0],z[1],z[2],z[3]],!this.hasAlpha&&z[3]<1&&(this.hasAlpha=!0)),isNaN(O[0][S])||isNaN(O[1][S])||(O[0][S]<0&&((L=E.slice())[S]+=O[0][S],y.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,L[0],L[1],L[2],z[0],z[1],z[2],z[3],0,0,0),p(this.bounds,L),d+=2+x(y,L,z,S)),O[1][S]>0&&((L=E.slice())[S]+=O[1][S],y.push(E[0],E[1],E[2],z[0],z[1],z[2],z[3],0,0,0,L[0],L[1],L[2],z[0],z[1],z[2],z[3],0,0,0),p(this.bounds,L),d+=2+x(y,L,z,S)))}this.lineCount[S]=d-this.lineOffset[S]}this.buffer.update(y)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},7667:function(f,o,e){var i=e(6832),r=e(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);f.exports=function(a){return r(a,n,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},4234:function(f,o,e){var i=e(8931);f.exports=function(w,d,S,T){r||(r=w.FRAMEBUFFER_UNSUPPORTED,n=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,s=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,a=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var E=w.getExtension("WEBGL_draw_buffers");if(!u&&E&&function(H,N){var F=H.getParameter(N.MAX_COLOR_ATTACHMENTS_WEBGL);u=new Array(F+1);for(var V=0;V<=F;++V){for(var W=new Array(F),te=0;te<V;++te)W[te]=H.COLOR_ATTACHMENT0+te;for(te=V;te<F;++te)W[te]=H.NONE;u[V]=W}}(w,E),Array.isArray(d)&&(T=S,S=0|d[1],d=0|d[0]),typeof d!="number")throw new Error("gl-fbo: Missing shape parameter");var C=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(d<0||d>C||S<0||S>C)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(T=T||{})){if((L=Math.max(0|T.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!E)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>w.getParameter(E.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var O=w.UNSIGNED_BYTE,z=w.getExtension("OES_texture_float");if(T.float&&L>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");O=w.FLOAT}else T.preferFloat&&L>0&&z&&(O=w.FLOAT);var G=!0;"depth"in T&&(G=!!T.depth);var I=!1;return"stencil"in T&&(I=!!T.stencil),new b(w,d,S,O,L,G,I,E)};var r,n,s,a,u=null;function p(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function c(w,d){w.bindFramebuffer(w.FRAMEBUFFER,d[0]),w.bindRenderbuffer(w.RENDERBUFFER,d[1]),w.bindTexture(w.TEXTURE_2D,d[2])}function x(w){switch(w){case r:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case s:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case a:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function g(w,d,S,T,E,C){if(!T)return null;var L=i(w,d,S,E,T);return L.magFilter=w.NEAREST,L.minFilter=w.NEAREST,L.mipSamples=1,L.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,C,w.TEXTURE_2D,L.handle,0),L}function h(w,d,S,T,E){var C=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,C),w.renderbufferStorage(w.RENDERBUFFER,T,d,S),w.framebufferRenderbuffer(w.FRAMEBUFFER,E,w.RENDERBUFFER,C),C}function b(w,d,S,T,E,C,L,O){this.gl=w,this._shape=[0|d,0|S],this._destroyed=!1,this._ext=O,this.color=new Array(E);for(var z=0;z<E;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=T,this._useDepth=C,this._useStencil=L;var G=this,I=[0|d,0|S];Object.defineProperties(I,{0:{get:function(){return G._shape[0]},set:function(H){return G.width=H}},1:{get:function(){return G._shape[1]},set:function(H){return G.height=H}}}),this._shapeVector=I,function(H){var N=p(H.gl),F=H.gl,V=H.handle=F.createFramebuffer(),W=H._shape[0],te=H._shape[1],Q=H.color.length,X=H._ext,q=H._useStencil,Z=H._useDepth,J=H._colorType;F.bindFramebuffer(F.FRAMEBUFFER,V);for(var ne=0;ne<Q;++ne)H.color[ne]=g(F,W,te,J,F.RGBA,F.COLOR_ATTACHMENT0+ne);Q===0?(H._color_rb=h(F,W,te,F.RGBA4,F.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(u[0])):Q>1&&X.drawBuffersWEBGL(u[Q]);var re=F.getExtension("WEBGL_depth_texture");re?q?H.depth=g(F,W,te,re.UNSIGNED_INT_24_8_WEBGL,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Z&&(H.depth=g(F,W,te,F.UNSIGNED_SHORT,F.DEPTH_COMPONENT,F.DEPTH_ATTACHMENT)):Z&&q?H._depth_rb=h(F,W,te,F.DEPTH_STENCIL,F.DEPTH_STENCIL_ATTACHMENT):Z?H._depth_rb=h(F,W,te,F.DEPTH_COMPONENT16,F.DEPTH_ATTACHMENT):q&&(H._depth_rb=h(F,W,te,F.STENCIL_INDEX,F.STENCIL_ATTACHMENT));var ae=F.checkFramebufferStatus(F.FRAMEBUFFER);if(ae!==F.FRAMEBUFFER_COMPLETE){for(H._destroyed=!0,F.bindFramebuffer(F.FRAMEBUFFER,null),F.deleteFramebuffer(H.handle),H.handle=null,H.depth&&(H.depth.dispose(),H.depth=null),H._depth_rb&&(F.deleteRenderbuffer(H._depth_rb),H._depth_rb=null),ne=0;ne<H.color.length;++ne)H.color[ne].dispose(),H.color[ne]=null;H._color_rb&&(F.deleteRenderbuffer(H._color_rb),H._color_rb=null),c(F,N),x(ae)}c(F,N)}(this)}var v=b.prototype;function y(w,d,S){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==d||w._shape[1]!==S){var T=w.gl,E=T.getParameter(T.MAX_RENDERBUFFER_SIZE);if(d<0||d>E||S<0||S>E)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=d,w._shape[1]=S;for(var C=p(T),L=0;L<w.color.length;++L)w.color[L].shape=w._shape;w._color_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,w._color_rb),T.renderbufferStorage(T.RENDERBUFFER,T.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(T.bindRenderbuffer(T.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?T.renderbufferStorage(T.RENDERBUFFER,T.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&T.renderbufferStorage(T.RENDERBUFFER,T.STENCIL_INDEX,w._shape[0],w._shape[1])),T.bindFramebuffer(T.FRAMEBUFFER,w.handle);var O=T.checkFramebufferStatus(T.FRAMEBUFFER);O!==T.FRAMEBUFFER_COMPLETE&&(w.dispose(),c(T,C),x(O)),c(T,C)}}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var d=0|w[0],S=0|w[1];return y(this,d,S),[d,S]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return y(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w|=0,y(this,this._shape[0],w),w},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var d=0;d<this.color.length;++d)this.color[d].dispose(),this.color[d]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},3530:function(f,o,e){var i=e(8974).sprintf,r=e(6603),n=e(9365),s=e(8008);f.exports=function(a,u,p){var c=n(u)||"of unknown name (see npm glsl-shader-name)",x="unknown type";p!==void 0&&(x=p===r.FRAGMENT_SHADER?"fragment":"vertex");for(var g=i(`Error compiling %s shader %s:
`,x,c),h=i("%s%s",g,a),b=a.split(`
`),v={},y=0;y<b.length;y++){var w=b[y];if(w!==""&&w!=="\0"){var d=parseInt(w.split(":")[2]);if(isNaN(d))throw new Error(i("Could not parse error: %s",w));v[d]=w}}var S=s(u).split(`
`);for(y=0;y<S.length;y++)if((v[y+3]||v[y+2]||v[y+1])&&(g+=S[y]+`
`,v[y+1])){var T=v[y+1];T=T.substr(T.split(":",3).join(":").length+1).trim(),g+=i(`^^^ %s

`,T)}return{long:g.trim(),short:h.trim()}}},6386:function(f,o,e){f.exports=function(h,b){var v=h.gl,y=new p(h,s(v,u.vertex,u.fragment),s(v,u.pickVertex,u.pickFragment),a(v),a(v),a(v),a(v));return y.update(b),h.addObject(y),y};var i=e(5070),r=e(9560),n=e(5306),s=e(5158),a=e(5827),u=e(1292);function p(h,b,v,y,w,d,S){this.plot=h,this.shader=b,this.pickShader=v,this.positionBuffer=y,this.weightBuffer=w,this.colorBuffer=d,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var c,x=p.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];x.draw=(c=[1,0,0,0,1,0,0,0,1],function(){var h=this.plot,b=this.shader,v=this.bounds,y=this.numVertices;if(!(y<=0)){var w=h.gl,d=h.dataBox,S=v[2]-v[0],T=v[3]-v[1],E=d[2]-d[0],C=d[3]-d[1];c[0]=2*S/E,c[4]=2*T/C,c[6]=2*(v[0]-d[0])/E-1,c[7]=2*(v[1]-d[1])/C-1,b.bind();var L=b.uniforms;L.viewTransform=c,L.shape=this.shape;var O=b.attributes;this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),O.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,y)}}),x.drawPick=function(){var h=[1,0,0,0,1,0,0,0,1],b=[0,0,0,0];return function(v){var y=this.plot,w=this.pickShader,d=this.bounds,S=this.numVertices;if(!(S<=0)){var T=y.gl,E=y.dataBox,C=d[2]-d[0],L=d[3]-d[1],O=E[2]-E[0],z=E[3]-E[1];h[0]=2*C/O,h[4]=2*L/z,h[6]=2*(d[0]-E[0])/O-1,h[7]=2*(d[1]-E[1])/z-1;for(var G=0;G<4;++G)b[G]=v>>8*G&255;this.pickOffset=v,w.bind();var I=w.uniforms;I.viewTransform=h,I.pickOffset=b,I.shape=this.shape;var H=w.attributes;return this.positionBuffer.bind(),H.position.pointer(),this.weightBuffer.bind(),H.weight.pointer(T.UNSIGNED_BYTE,!1),this.idBuffer.bind(),H.pickId.pointer(T.UNSIGNED_BYTE,!1),T.drawArrays(T.TRIANGLES,0,S),v+this.shape[0]*this.shape[1]}}}(),x.pick=function(h,b,v){var y=this.pickOffset,w=this.shape[0]*this.shape[1];if(v<y||v>=y+w)return null;var d=v-y,S=this.xData,T=this.yData;return{object:this,pointId:d,dataCoord:[S[d%this.shape[0]],T[d/this.shape[0]|0]]}},x.update=function(h){var b=(h=h||{}).shape||[0,0],v=h.x||r(b[0]),y=h.y||r(b[1]),w=h.z||new Float32Array(b[0]*b[1]),d=h.zsmooth!==!1;this.xData=v,this.yData=y;var S,T,E,C,L=h.colorLevels||[0],O=h.colorValues||[0,0,0,1],z=L.length,G=this.bounds;d?(S=G[0]=v[0],T=G[1]=y[0],E=G[2]=v[v.length-1],C=G[3]=y[y.length-1]):(S=G[0]=v[0]+(v[1]-v[0])/2,T=G[1]=y[0]+(y[1]-y[0])/2,E=G[2]=v[v.length-1]+(v[v.length-1]-v[v.length-2])/2,C=G[3]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2);var I=1/(E-S),H=1/(C-T),N=b[0],F=b[1];this.shape=[N,F];var V=(d?(N-1)*(F-1):N*F)*(g.length>>>1);this.numVertices=V;for(var W=n.mallocUint8(4*V),te=n.mallocFloat32(2*V),Q=n.mallocUint8(2*V),X=n.mallocUint32(V),q=0,Z=d?N-1:N,J=d?F-1:F,ne=0;ne<J;++ne){var re,ae;d?(re=H*(y[ne]-T),ae=H*(y[ne+1]-T)):(re=ne<F-1?H*(y[ne]-(y[ne+1]-y[ne])/2-T):H*(y[ne]-(y[ne]-y[ne-1])/2-T),ae=ne<F-1?H*(y[ne]+(y[ne+1]-y[ne])/2-T):H*(y[ne]+(y[ne]-y[ne-1])/2-T));for(var ue=0;ue<Z;++ue){var he,de;d?(he=I*(v[ue]-S),de=I*(v[ue+1]-S)):(he=ue<N-1?I*(v[ue]-(v[ue+1]-v[ue])/2-S):I*(v[ue]-(v[ue]-v[ue-1])/2-S),de=ue<N-1?I*(v[ue]+(v[ue+1]-v[ue])/2-S):I*(v[ue]+(v[ue]-v[ue-1])/2-S));for(var xe=0;xe<g.length;xe+=2){var me,ve,Le,Ae,we=g[xe],se=g[xe+1],oe=w[d?(ne+se)*N+(ue+we):ne*N+ue],fe=i.le(L,oe);if(fe<0)me=O[0],ve=O[1],Le=O[2],Ae=O[3];else if(fe===z-1)me=O[4*z-4],ve=O[4*z-3],Le=O[4*z-2],Ae=O[4*z-1];else{var Se=(oe-L[fe])/(L[fe+1]-L[fe]),Me=1-Se,be=4*fe,Ie=4*(fe+1);me=Me*O[be]+Se*O[Ie],ve=Me*O[be+1]+Se*O[Ie+1],Le=Me*O[be+2]+Se*O[Ie+2],Ae=Me*O[be+3]+Se*O[Ie+3]}W[4*q]=255*me,W[4*q+1]=255*ve,W[4*q+2]=255*Le,W[4*q+3]=255*Ae,te[2*q]=.5*he+.5*de,te[2*q+1]=.5*re+.5*ae,Q[2*q]=we,Q[2*q+1]=se,X[q]=ne*N+ue,q+=1}}}this.positionBuffer.update(te),this.weightBuffer.update(Q),this.colorBuffer.update(W),this.idBuffer.update(X),n.free(te),n.free(W),n.free(Q),n.free(X)},x.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},1292:function(f,o,e){var i=e(6832);f.exports={fragment:i([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},248:function(f,o,e){var i=e(6832),r=e(5158),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];o.createShader=function(p){return r(p,n,s,null,u)},o.createPickShader=function(p){return r(p,n,a,null,u)}},6086:function(f,o,e){f.exports=function(S){var T=S.gl||S.scene&&S.scene.gl,E=x(T);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;var C=g(T);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var L=i(T),O=r(T,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),z=p(new Array(1024),[256,1,4]),G=0;G<1024;++G)z.data[G]=255;var I=n(T,z);I.wrap=T.REPEAT;var H=new w(T,E,C,L,O,I);return H.update(S),H};var i=e(5827),r=e(2944),n=e(8931),s=new Uint8Array(4),a=new Float32Array(s.buffer),u=e(5070),p=e(5050),c=e(248),x=c.createShader,g=c.createPickShader,h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(S,T){for(var E=0,C=0;C<3;++C){var L=S[C]-T[C];E+=L*L}return Math.sqrt(E)}function v(S){for(var T=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)T[0][E]=Math.max(S[0][E],T[0][E]),T[1][E]=Math.min(S[1][E],T[1][E]);return T}function y(S,T,E,C){this.arcLength=S,this.position=T,this.index=E,this.dataCoordinate=C}function w(S,T,E,C,L,O){this.gl=S,this.shader=T,this.pickShader=E,this.buffer=C,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var d=w.prototype;d.isTransparent=function(){return this.hasAlpha},d.isOpaque=function(){return!this.hasAlpha},d.pickSlots=1,d.setPickBase=function(S){this.pickId=S},d.drawTransparent=d.draw=function(S){if(this.vertexCount){var T=this.gl,E=this.shader,C=this.vao;E.bind(),E.uniforms={model:S.model||h,view:S.view||h,projection:S.projection||h,clipBounds:v(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[T.drawingBufferWidth,T.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(T.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},d.drawPick=function(S){if(this.vertexCount){var T=this.gl,E=this.pickShader,C=this.vao;E.bind(),E.uniforms={model:S.model||h,view:S.view||h,projection:S.projection||h,pickId:this.pickId,clipBounds:v(this.clipBounds),screenShape:[T.drawingBufferWidth,T.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(T.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},d.update=function(S){var T,E;this.dirty=!0;var C=!!S.connectGaps;"dashScale"in S&&(this.dashScale=S.dashScale),this.hasAlpha=!1,"opacity"in S&&(this.opacity=+S.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],O=[],z=[],G=0,I=0,H=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=S.position||S.positions;if(N){var F=S.color||S.colors||[0,0,0,1],V=S.lineWidth||1,W=!1;e:for(T=1;T<N.length;++T){var te,Q,X,q=N[T-1],Z=N[T];for(O.push(G),z.push(q.slice()),E=0;E<3;++E){if(isNaN(q[E])||isNaN(Z[E])||!isFinite(q[E])||!isFinite(Z[E])){if(!C&&L.length>0){for(var J=0;J<24;++J)L.push(L[L.length-12]);I+=2,W=!0}continue e}H[0][E]=Math.min(H[0][E],q[E],Z[E]),H[1][E]=Math.max(H[1][E],q[E],Z[E])}Array.isArray(F[0])?(te=F.length>T-1?F[T-1]:F.length>0?F[F.length-1]:[0,0,0,1],Q=F.length>T?F[T]:F.length>0?F[F.length-1]:[0,0,0,1]):te=Q=F,te.length===3&&(te=[te[0],te[1],te[2],1]),Q.length===3&&(Q=[Q[0],Q[1],Q[2],1]),!this.hasAlpha&&te[3]<1&&(this.hasAlpha=!0),X=Array.isArray(V)?V.length>T-1?V[T-1]:V.length>0?V[V.length-1]:[0,0,0,1]:V;var ne=G;if(G+=b(q,Z),W){for(E=0;E<2;++E)L.push(q[0],q[1],q[2],Z[0],Z[1],Z[2],ne,X,te[0],te[1],te[2],te[3]);I+=2,W=!1}L.push(q[0],q[1],q[2],Z[0],Z[1],Z[2],ne,X,te[0],te[1],te[2],te[3],q[0],q[1],q[2],Z[0],Z[1],Z[2],ne,-X,te[0],te[1],te[2],te[3],Z[0],Z[1],Z[2],q[0],q[1],q[2],G,-X,Q[0],Q[1],Q[2],Q[3],Z[0],Z[1],Z[2],q[0],q[1],q[2],G,X,Q[0],Q[1],Q[2],Q[3]),I+=4}}if(this.buffer.update(L),O.push(G),z.push(N[N.length-1].slice()),this.bounds=H,this.vertexCount=I,this.points=z,this.arcLength=O,"dashes"in S){var re=S.dashes.slice();for(re.unshift(0),T=1;T<re.length;++T)re[T]=re[T-1]+re[T];var ae=p(new Array(1024),[256,1,4]);for(T=0;T<256;++T){for(E=0;E<4;++E)ae.set(T,0,E,0);1&u.le(re,re[re.length-1]*T/255)?ae.set(T,0,0,0):ae.set(T,0,0,255)}this.texture.setPixels(ae)}},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},d.pick=function(S){if(!S||S.id!==this.pickId)return null;var T=function(N,F,V,W){return s[0]=0,s[1]=V,s[2]=F,s[3]=N,a[0]}(S.value[0],S.value[1],S.value[2]),E=u.le(this.arcLength,T);if(E<0)return null;if(E===this.arcLength.length-1)return new y(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),E);for(var C=this.points[E],L=this.points[Math.min(E+1,this.points.length-1)],O=(T-this.arcLength[E])/(this.arcLength[E+1]-this.arcLength[E]),z=1-O,G=[0,0,0],I=0;I<3;++I)G[I]=z*C[I]+O*L[I];var H=Math.min(O<.5?E:E+1,this.points.length-1);return new y(T,G,H,this.points[H])}},7332:function(f){f.exports=function(o){var e=new Float32Array(16);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}},9823:function(f){f.exports=function(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7787:function(f){f.exports=function(o){var e=o[0],i=o[1],r=o[2],n=o[3],s=o[4],a=o[5],u=o[6],p=o[7],c=o[8],x=o[9],g=o[10],h=o[11],b=o[12],v=o[13],y=o[14],w=o[15];return(e*a-i*s)*(g*w-h*y)-(e*u-r*s)*(x*w-h*v)+(e*p-n*s)*(x*y-g*v)+(i*u-r*a)*(c*w-h*b)-(i*p-n*a)*(c*y-g*b)+(r*p-n*u)*(c*v-x*b)}},5950:function(f){f.exports=function(o,e){var i=e[0],r=e[1],n=e[2],s=e[3],a=i+i,u=r+r,p=n+n,c=i*a,x=r*a,g=r*u,h=n*a,b=n*u,v=n*p,y=s*a,w=s*u,d=s*p;return o[0]=1-g-v,o[1]=x+d,o[2]=h-w,o[3]=0,o[4]=x-d,o[5]=1-c-v,o[6]=b+y,o[7]=0,o[8]=h+w,o[9]=b-y,o[10]=1-c-g,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7280:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=e[3],u=r+r,p=n+n,c=s+s,x=r*u,g=r*p,h=r*c,b=n*p,v=n*c,y=s*c,w=a*u,d=a*p,S=a*c;return o[0]=1-(b+y),o[1]=g+S,o[2]=h-d,o[3]=0,o[4]=g-S,o[5]=1-(x+y),o[6]=v+w,o[7]=0,o[8]=h+d,o[9]=v-w,o[10]=1-(x+b),o[11]=0,o[12]=i[0],o[13]=i[1],o[14]=i[2],o[15]=1,o}},9947:function(f){f.exports=function(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},7437:function(f){f.exports=function(o,e){var i=e[0],r=e[1],n=e[2],s=e[3],a=e[4],u=e[5],p=e[6],c=e[7],x=e[8],g=e[9],h=e[10],b=e[11],v=e[12],y=e[13],w=e[14],d=e[15],S=i*u-r*a,T=i*p-n*a,E=i*c-s*a,C=r*p-n*u,L=r*c-s*u,O=n*c-s*p,z=x*y-g*v,G=x*w-h*v,I=x*d-b*v,H=g*w-h*y,N=g*d-b*y,F=h*d-b*w,V=S*F-T*N+E*H+C*I-L*G+O*z;return V?(V=1/V,o[0]=(u*F-p*N+c*H)*V,o[1]=(n*N-r*F-s*H)*V,o[2]=(y*O-w*L+d*C)*V,o[3]=(h*L-g*O-b*C)*V,o[4]=(p*I-a*F-c*G)*V,o[5]=(i*F-n*I+s*G)*V,o[6]=(w*E-v*O-d*T)*V,o[7]=(x*O-h*E+b*T)*V,o[8]=(a*N-u*I+c*z)*V,o[9]=(r*I-i*N-s*z)*V,o[10]=(v*L-y*E+d*S)*V,o[11]=(g*E-x*L-b*S)*V,o[12]=(u*G-a*H-p*z)*V,o[13]=(i*H-r*G+n*z)*V,o[14]=(y*T-v*C-w*S)*V,o[15]=(x*C-g*T+h*S)*V,o):null}},3012:function(f,o,e){var i=e(9947);f.exports=function(r,n,s,a){var u,p,c,x,g,h,b,v,y,w,d=n[0],S=n[1],T=n[2],E=a[0],C=a[1],L=a[2],O=s[0],z=s[1],G=s[2];return Math.abs(d-O)<1e-6&&Math.abs(S-z)<1e-6&&Math.abs(T-G)<1e-6?i(r):(b=d-O,v=S-z,y=T-G,u=C*(y*=w=1/Math.sqrt(b*b+v*v+y*y))-L*(v*=w),p=L*(b*=w)-E*y,c=E*v-C*b,(w=Math.sqrt(u*u+p*p+c*c))?(u*=w=1/w,p*=w,c*=w):(u=0,p=0,c=0),x=v*c-y*p,g=y*u-b*c,h=b*p-v*u,(w=Math.sqrt(x*x+g*g+h*h))?(x*=w=1/w,g*=w,h*=w):(x=0,g=0,h=0),r[0]=u,r[1]=x,r[2]=b,r[3]=0,r[4]=p,r[5]=g,r[6]=v,r[7]=0,r[8]=c,r[9]=h,r[10]=y,r[11]=0,r[12]=-(u*d+p*S+c*T),r[13]=-(x*d+g*S+h*T),r[14]=-(b*d+v*S+y*T),r[15]=1,r)}},104:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=e[3],u=e[4],p=e[5],c=e[6],x=e[7],g=e[8],h=e[9],b=e[10],v=e[11],y=e[12],w=e[13],d=e[14],S=e[15],T=i[0],E=i[1],C=i[2],L=i[3];return o[0]=T*r+E*u+C*g+L*y,o[1]=T*n+E*p+C*h+L*w,o[2]=T*s+E*c+C*b+L*d,o[3]=T*a+E*x+C*v+L*S,T=i[4],E=i[5],C=i[6],L=i[7],o[4]=T*r+E*u+C*g+L*y,o[5]=T*n+E*p+C*h+L*w,o[6]=T*s+E*c+C*b+L*d,o[7]=T*a+E*x+C*v+L*S,T=i[8],E=i[9],C=i[10],L=i[11],o[8]=T*r+E*u+C*g+L*y,o[9]=T*n+E*p+C*h+L*w,o[10]=T*s+E*c+C*b+L*d,o[11]=T*a+E*x+C*v+L*S,T=i[12],E=i[13],C=i[14],L=i[15],o[12]=T*r+E*u+C*g+L*y,o[13]=T*n+E*p+C*h+L*w,o[14]=T*s+E*c+C*b+L*d,o[15]=T*a+E*x+C*v+L*S,o}},5268:function(f){f.exports=function(o,e,i,r,n,s,a){var u=1/(e-i),p=1/(r-n),c=1/(s-a);return o[0]=-2*u,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*p,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*c,o[11]=0,o[12]=(e+i)*u,o[13]=(n+r)*p,o[14]=(a+s)*c,o[15]=1,o}},1120:function(f){f.exports=function(o,e,i,r,n){var s=1/Math.tan(e/2),a=1/(r-n);return o[0]=s/i,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=s,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+r)*a,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*n*r*a,o[15]=0,o}},4422:function(f){f.exports=function(o,e,i,r){var n,s,a,u,p,c,x,g,h,b,v,y,w,d,S,T,E,C,L,O,z,G,I,H,N=r[0],F=r[1],V=r[2],W=Math.sqrt(N*N+F*F+V*V);return Math.abs(W)<1e-6?null:(N*=W=1/W,F*=W,V*=W,n=Math.sin(i),a=1-(s=Math.cos(i)),u=e[0],p=e[1],c=e[2],x=e[3],g=e[4],h=e[5],b=e[6],v=e[7],y=e[8],w=e[9],d=e[10],S=e[11],T=N*N*a+s,E=F*N*a+V*n,C=V*N*a-F*n,L=N*F*a-V*n,O=F*F*a+s,z=V*F*a+N*n,G=N*V*a+F*n,I=F*V*a-N*n,H=V*V*a+s,o[0]=u*T+g*E+y*C,o[1]=p*T+h*E+w*C,o[2]=c*T+b*E+d*C,o[3]=x*T+v*E+S*C,o[4]=u*L+g*O+y*z,o[5]=p*L+h*O+w*z,o[6]=c*L+b*O+d*z,o[7]=x*L+v*O+S*z,o[8]=u*G+g*I+y*H,o[9]=p*G+h*I+w*H,o[10]=c*G+b*I+d*H,o[11]=x*G+v*I+S*H,e!==o&&(o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o)}},6109:function(f){f.exports=function(o,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[4],a=e[5],u=e[6],p=e[7],c=e[8],x=e[9],g=e[10],h=e[11];return e!==o&&(o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[4]=s*n+c*r,o[5]=a*n+x*r,o[6]=u*n+g*r,o[7]=p*n+h*r,o[8]=c*n-s*r,o[9]=x*n-a*r,o[10]=g*n-u*r,o[11]=h*n-p*r,o}},7115:function(f){f.exports=function(o,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],u=e[2],p=e[3],c=e[8],x=e[9],g=e[10],h=e[11];return e!==o&&(o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=s*n-c*r,o[1]=a*n-x*r,o[2]=u*n-g*r,o[3]=p*n-h*r,o[8]=s*r+c*n,o[9]=a*r+x*n,o[10]=u*r+g*n,o[11]=p*r+h*n,o}},5240:function(f){f.exports=function(o,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],a=e[1],u=e[2],p=e[3],c=e[4],x=e[5],g=e[6],h=e[7];return e!==o&&(o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15]),o[0]=s*n+c*r,o[1]=a*n+x*r,o[2]=u*n+g*r,o[3]=p*n+h*r,o[4]=c*n-s*r,o[5]=x*n-a*r,o[6]=g*n-u*r,o[7]=h*n-p*r,o}},3668:function(f){f.exports=function(o,e,i){var r=i[0],n=i[1],s=i[2];return o[0]=e[0]*r,o[1]=e[1]*r,o[2]=e[2]*r,o[3]=e[3]*r,o[4]=e[4]*n,o[5]=e[5]*n,o[6]=e[6]*n,o[7]=e[7]*n,o[8]=e[8]*s,o[9]=e[9]*s,o[10]=e[10]*s,o[11]=e[11]*s,o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o}},998:function(f){f.exports=function(o,e,i){var r,n,s,a,u,p,c,x,g,h,b,v,y=i[0],w=i[1],d=i[2];return e===o?(o[12]=e[0]*y+e[4]*w+e[8]*d+e[12],o[13]=e[1]*y+e[5]*w+e[9]*d+e[13],o[14]=e[2]*y+e[6]*w+e[10]*d+e[14],o[15]=e[3]*y+e[7]*w+e[11]*d+e[15]):(r=e[0],n=e[1],s=e[2],a=e[3],u=e[4],p=e[5],c=e[6],x=e[7],g=e[8],h=e[9],b=e[10],v=e[11],o[0]=r,o[1]=n,o[2]=s,o[3]=a,o[4]=u,o[5]=p,o[6]=c,o[7]=x,o[8]=g,o[9]=h,o[10]=b,o[11]=v,o[12]=r*y+u*w+g*d+e[12],o[13]=n*y+p*w+h*d+e[13],o[14]=s*y+c*w+b*d+e[14],o[15]=a*y+x*w+v*d+e[15]),o}},2142:function(f){f.exports=function(o,e){if(o===e){var i=e[1],r=e[2],n=e[3],s=e[6],a=e[7],u=e[11];o[1]=e[4],o[2]=e[8],o[3]=e[12],o[4]=i,o[6]=e[9],o[7]=e[13],o[8]=r,o[9]=s,o[11]=e[14],o[12]=n,o[13]=a,o[14]=u}else o[0]=e[0],o[1]=e[4],o[2]=e[8],o[3]=e[12],o[4]=e[1],o[5]=e[5],o[6]=e[9],o[7]=e[13],o[8]=e[2],o[9]=e[6],o[10]=e[10],o[11]=e[14],o[12]=e[3],o[13]=e[7],o[14]=e[11],o[15]=e[15];return o}},4340:function(f,o,e){var i=e(957),r=e(7309);function n(u,p){for(var c=[0,0,0,0],x=0;x<4;++x)for(var g=0;g<4;++g)c[g]+=u[4*x+g]*p[x];return c}function s(u,p,c,x,g){for(var h=n(x,n(c,n(p,[u[0],u[1],u[2],1]))),b=0;b<3;++b)h[b]/=h[3];return[.5*g[0]*(1+h[0]),.5*g[1]*(1-h[1])]}function a(u,p){for(var c=[0,0,0],x=0;x<u.length;++x)for(var g=u[x],h=p[x],b=0;b<3;++b)c[b]+=h*g[b];return c}f.exports=function(u,p,c,x,g,h){if(u.length===1)return[0,u[0].slice()];for(var b=new Array(u.length),v=0;v<u.length;++v)b[v]=s(u[v],c,x,g,h);var y=0,w=1/0;for(v=0;v<b.length;++v){for(var d=0,S=0;S<2;++S)d+=Math.pow(b[v][S]-p[S],2);d<w&&(w=d,y=v)}var T=function(C,L){if(C.length===2){for(var O=0,z=0,G=0;G<2;++G)O+=Math.pow(L[G]-C[0][G],2),z+=Math.pow(L[G]-C[1][G],2);return(O=Math.sqrt(O))+(z=Math.sqrt(z))<1e-6?[1,0]:[z/(O+z),O/(z+O)]}if(C.length===3){var I=[0,0];return r(C[0],C[1],C[2],L,I),i(C,I)}return[]}(b,p),E=0;for(v=0;v<3;++v){if(T[v]<-.001||T[v]>1.0001)return null;E+=T[v]}return Math.abs(E-1)>.001?null:[y,a(u,T),T]}},2056:function(f,o,e){var i=e(6832),r=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),s=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),p=i([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),c=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),x=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),h=i([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),b=i([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);o.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.wireShader={vertex:s,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},o.pointShader={vertex:u,fragment:p,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},o.pickShader={vertex:c,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},o.pointPickShader={vertex:g,fragment:x,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},o.contourShader={vertex:h,fragment:b,attributes:[{name:"position",type:"vec3"}]}},8116:function(f,o,e){var i=e(5158),r=e(5827),n=e(2944),s=e(8931),a=e(115),u=e(104),p=e(7437),c=e(5050),x=e(9156),g=e(7212),h=e(5306),b=e(2056),v=e(4340),y=b.meshShader,w=b.wireShader,d=b.pointShader,S=b.pickShader,T=b.pointPickShader,E=b.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(F,V,W,te,Q,X,q,Z,J,ne,re,ae,ue,he,de,xe,me,ve,Le,Ae,we,se,oe,fe,Se,Me,be){this.gl=F,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=V,this.dirty=!0,this.triShader=W,this.lineShader=te,this.pointShader=Q,this.pickShader=X,this.pointPickShader=q,this.contourShader=Z,this.trianglePositions=J,this.triangleColors=re,this.triangleNormals=ue,this.triangleUVs=ae,this.triangleIds=ne,this.triangleVAO=he,this.triangleCount=0,this.lineWidth=1,this.edgePositions=de,this.edgeColors=me,this.edgeUVs=ve,this.edgeIds=xe,this.edgeVAO=Le,this.edgeCount=0,this.pointPositions=Ae,this.pointColors=se,this.pointUVs=oe,this.pointSizes=fe,this.pointIds=we,this.pointVAO=Se,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Me,this.contourVAO=be,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var O=L.prototype;function z(F,V){if(!V||!V.length)return 1;for(var W=0;W<V.length;++W){if(V.length<2)return 1;if(V[W][0]===F)return V[W][1];if(V[W][0]>F&&W>0){var te=(V[W][0]-F)/(V[W][0]-V[W-1][0]);return V[W][1]*(1-te)+te*V[W-1][1]}}return 1}function G(F){var V=i(F,d.vertex,d.fragment);return V.attributes.position.location=0,V.attributes.color.location=2,V.attributes.uv.location=3,V.attributes.pointSize.location=4,V}function I(F){var V=i(F,S.vertex,S.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V}function H(F){var V=i(F,T.vertex,T.fragment);return V.attributes.position.location=0,V.attributes.id.location=1,V.attributes.pointSize.location=4,V}function N(F){var V=i(F,E.vertex,E.fragment);return V.attributes.position.location=0,V}O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(F){this.pickId=F},O.highlight=function(F){if(F&&this.contourEnable){for(var V=g(this.cells,this.intensity,F.intensity),W=V.cells,te=V.vertexIds,Q=V.vertexWeights,X=W.length,q=h.mallocFloat32(6*X),Z=0,J=0;J<X;++J)for(var ne=W[J],re=0;re<2;++re){var ae=ne[0];ne.length===2&&(ae=ne[re]);for(var ue=te[ae][0],he=te[ae][1],de=Q[ae],xe=1-de,me=this.positions[ue],ve=this.positions[he],Le=0;Le<3;++Le)q[Z++]=de*me[Le]+xe*ve[Le]}this.contourCount=Z/3|0,this.contourPositions.update(q.subarray(0,Z)),h.free(q)}else this.contourCount=0},O.update=function(F){F=F||{};var V=this.gl;this.dirty=!0,"contourEnable"in F&&(this.contourEnable=F.contourEnable),"contourColor"in F&&(this.contourColor=F.contourColor),"lineWidth"in F&&(this.lineWidth=F.lineWidth),"lightPosition"in F&&(this.lightPosition=F.lightPosition),this.hasAlpha=!1,"opacity"in F&&(this.opacity=F.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in F&&(this.opacityscale=F.opacityscale,this.hasAlpha=!0),"ambient"in F&&(this.ambientLight=F.ambient),"diffuse"in F&&(this.diffuseLight=F.diffuse),"specular"in F&&(this.specularLight=F.specular),"roughness"in F&&(this.roughness=F.roughness),"fresnel"in F&&(this.fresnel=F.fresnel),F.texture?(this.texture.dispose(),this.texture=s(V,F.texture)):F.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=V.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=V.LINEAR,this.texture.setPixels(function(Ct,zt){for(var St=x({colormap:Ct,nshades:256,format:"rgba"}),qe=new Uint8Array(1024),Xe=0;Xe<256;++Xe){for(var Ve=St[Xe],Ze=0;Ze<3;++Ze)qe[4*Xe+Ze]=Ve[Ze];qe[4*Xe+3]=zt?255*z(Xe/255,zt):255*Ve[3]}return c(qe,[256,256,4],[4,0,1])}(F.colormap,this.opacityscale)),this.texture.generateMipmap());var W=F.cells,te=F.positions;if(te&&W){var Q=[],X=[],q=[],Z=[],J=[],ne=[],re=[],ae=[],ue=[],he=[],de=[],xe=[],me=[],ve=[];this.cells=W,this.positions=te;var Le=F.vertexNormals,Ae=F.cellNormals,we=F.vertexNormalsEpsilon===void 0?1e-6:F.vertexNormalsEpsilon,se=F.faceNormalsEpsilon===void 0?1e-6:F.faceNormalsEpsilon;F.useFacetNormals&&!Ae&&(Ae=a.faceNormals(W,te,se)),Ae||Le||(Le=a.vertexNormals(W,te,we));var oe=F.vertexColors,fe=F.cellColors,Se=F.meshColor||[1,1,1,1],Me=F.vertexUVs,be=F.vertexIntensity,Ie=F.cellUVs,Be=F.cellIntensity,ce=1/0,Te=-1/0;if(!Me&&!Ie)if(be)if(F.vertexIntensityBounds)ce=+F.vertexIntensityBounds[0],Te=+F.vertexIntensityBounds[1];else for(var ye=0;ye<be.length;++ye){var Pe=be[ye];ce=Math.min(ce,Pe),Te=Math.max(Te,Pe)}else if(Be)if(F.cellIntensityBounds)ce=+F.cellIntensityBounds[0],Te=+F.cellIntensityBounds[1];else for(ye=0;ye<Be.length;++ye)Pe=Be[ye],ce=Math.min(ce,Pe),Te=Math.max(Te,Pe);else for(ye=0;ye<te.length;++ye)Pe=te[ye][2],ce=Math.min(ce,Pe),Te=Math.max(Te,Pe);this.intensity=be||Be||function(Ct){for(var zt=Ct.length,St=new Array(zt),qe=0;qe<zt;++qe)St[qe]=Ct[qe][2];return St}(te),this.pickVertex=!(Be||fe);var Re=F.pointSizes,ze=F.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=0;ye<te.length;++ye)for(var He=te[ye],We=0;We<3;++We)!isNaN(He[We])&&isFinite(He[We])&&(this.bounds[0][We]=Math.min(this.bounds[0][We],He[We]),this.bounds[1][We]=Math.max(this.bounds[1][We],He[We]));var Je=0,lt=0,et=0;e:for(ye=0;ye<W.length;++ye){var yt=W[ye];switch(yt.length){case 1:for(He=te[xt=yt[0]],We=0;We<3;++We)if(isNaN(He[We])||!isFinite(He[We]))continue e;he.push(He[0],He[1],He[2]),at=oe?oe[xt]:fe?fe[ye]:Se,this.opacityscale&&be?X.push(at[0],at[1],at[2],this.opacity*z((be[xt]-ce)/(Te-ce),this.opacityscale)):at.length===3?de.push(at[0],at[1],at[2],this.opacity):(de.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),ot=Me?Me[xt]:be?[(be[xt]-ce)/(Te-ce),0]:Ie?Ie[ye]:Be?[(Be[ye]-ce)/(Te-ce),0]:[(He[2]-ce)/(Te-ce),0],xe.push(ot[0],ot[1]),Re?me.push(Re[xt]):me.push(ze),ve.push(ye),et+=1;break;case 2:for(We=0;We<2;++We){He=te[xt=yt[We]];for(var _t=0;_t<3;++_t)if(isNaN(He[_t])||!isFinite(He[_t]))continue e}for(We=0;We<2;++We)He=te[xt=yt[We]],ne.push(He[0],He[1],He[2]),at=oe?oe[xt]:fe?fe[ye]:Se,this.opacityscale&&be?X.push(at[0],at[1],at[2],this.opacity*z((be[xt]-ce)/(Te-ce),this.opacityscale)):at.length===3?re.push(at[0],at[1],at[2],this.opacity):(re.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),ot=Me?Me[xt]:be?[(be[xt]-ce)/(Te-ce),0]:Ie?Ie[ye]:Be?[(Be[ye]-ce)/(Te-ce),0]:[(He[2]-ce)/(Te-ce),0],ae.push(ot[0],ot[1]),ue.push(ye);lt+=1;break;case 3:for(We=0;We<3;++We)for(He=te[xt=yt[We]],_t=0;_t<3;++_t)if(isNaN(He[_t])||!isFinite(He[_t]))continue e;for(We=0;We<3;++We){var xt,at,ot,At;He=te[xt=yt[2-We]],Q.push(He[0],He[1],He[2]),(at=oe?oe[xt]:fe?fe[ye]:Se)?this.opacityscale&&be?X.push(at[0],at[1],at[2],this.opacity*z((be[xt]-ce)/(Te-ce),this.opacityscale)):at.length===3?X.push(at[0],at[1],at[2],this.opacity):(X.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)):X.push(.5,.5,.5,1),ot=Me?Me[xt]:be?[(be[xt]-ce)/(Te-ce),0]:Ie?Ie[ye]:Be?[(Be[ye]-ce)/(Te-ce),0]:[(He[2]-ce)/(Te-ce),0],Z.push(ot[0],ot[1]),At=Le?Le[xt]:Ae[ye],q.push(At[0],At[1],At[2]),J.push(ye)}Je+=1}}this.pointCount=et,this.edgeCount=lt,this.triangleCount=Je,this.pointPositions.update(he),this.pointColors.update(de),this.pointUVs.update(xe),this.pointSizes.update(me),this.pointIds.update(new Uint32Array(ve)),this.edgePositions.update(ne),this.edgeColors.update(re),this.edgeUVs.update(ae),this.edgeIds.update(new Uint32Array(ue)),this.trianglePositions.update(Q),this.triangleColors.update(X),this.triangleUVs.update(Z),this.triangleNormals.update(q),this.triangleIds.update(new Uint32Array(J))}},O.drawTransparent=O.draw=function(F){F=F||{};for(var V=this.gl,W=F.model||C,te=F.view||C,Q=F.projection||C,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],q=0;q<3;++q)X[0][q]=Math.max(X[0][q],this.clipBounds[0][q]),X[1][q]=Math.min(X[1][q],this.clipBounds[1][q]);var Z={model:W,view:te,projection:Q,inverseModel:C.slice(),clipBounds:X,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Z.inverseModel=p(Z.inverseModel,Z.model),V.disable(V.CULL_FACE),this.texture.bind(0);var J=new Array(16);for(u(J,Z.view,Z.model),u(J,Z.projection,J),p(J,J),q=0;q<3;++q)Z.eyePosition[q]=J[12+q]/J[15];var ne,re=J[15];for(q=0;q<3;++q)re+=this.lightPosition[q]*J[4*q+3];for(q=0;q<3;++q){for(var ae=J[12+q],ue=0;ue<3;++ue)ae+=J[4*ue+q]*this.lightPosition[ue];Z.lightPosition[q]=ae/re}this.triangleCount>0&&((ne=this.triShader).bind(),ne.uniforms=Z,this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ne=this.lineShader).bind(),ne.uniforms=Z,this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ne=this.pointShader).bind(),ne.uniforms=Z,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ne=this.contourShader).bind(),ne.uniforms=Z,this.contourVAO.bind(),V.drawArrays(V.LINES,0,this.contourCount),this.contourVAO.unbind())},O.drawPick=function(F){F=F||{};for(var V=this.gl,W=F.model||C,te=F.view||C,Q=F.projection||C,X=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],q=0;q<3;++q)X[0][q]=Math.max(X[0][q],this.clipBounds[0][q]),X[1][q]=Math.min(X[1][q],this.clipBounds[1][q]);this._model=[].slice.call(W),this._view=[].slice.call(te),this._projection=[].slice.call(Q),this._resolution=[V.drawingBufferWidth,V.drawingBufferHeight];var Z,J={model:W,view:te,projection:Q,clipBounds:X,pickId:this.pickId/255};(Z=this.pickShader).bind(),Z.uniforms=J,this.triangleCount>0&&(this.triangleVAO.bind(),V.drawArrays(V.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),V.lineWidth(this.lineWidth*this.pixelRatio),V.drawArrays(V.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((Z=this.pointPickShader).bind(),Z.uniforms=J,this.pointVAO.bind(),V.drawArrays(V.POINTS,0,this.pointCount),this.pointVAO.unbind())},O.pick=function(F){if(!F||F.id!==this.pickId)return null;for(var V=F.value[0]+256*F.value[1]+65536*F.value[2],W=this.cells[V],te=this.positions,Q=new Array(W.length),X=0;X<W.length;++X)Q[X]=te[W[X]];var q=F.coord[0],Z=F.coord[1];if(!this.pickVertex){var J=this.positions[W[0]],ne=this.positions[W[1]],re=this.positions[W[2]],ae=[(J[0]+ne[0]+re[0])/3,(J[1]+ne[1]+re[1])/3,(J[2]+ne[2]+re[2])/3];return{_cellCenter:!0,position:[q,Z],index:V,cell:W,cellId:V,intensity:this.intensity[V],dataCoordinate:ae}}var ue=v(Q,[q*this.pixelRatio,this._resolution[1]-Z*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ue)return null;var he=ue[2],de=0;for(X=0;X<W.length;++X)de+=he[X]*this.intensity[W[X]];return{position:ue[1],index:W[ue[0]],cell:W,cellId:V,intensity:de,dataCoordinate:this.positions[W[ue[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},f.exports=function(F,V){if(arguments.length===1&&(F=(V=F).gl),!(F.getExtension("OES_standard_derivatives")||F.getExtension("MOZ_OES_standard_derivatives")||F.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var W=function(Be){var ce=i(Be,y.vertex,y.fragment);return ce.attributes.position.location=0,ce.attributes.color.location=2,ce.attributes.uv.location=3,ce.attributes.normal.location=4,ce}(F),te=function(Be){var ce=i(Be,w.vertex,w.fragment);return ce.attributes.position.location=0,ce.attributes.color.location=2,ce.attributes.uv.location=3,ce}(F),Q=G(F),X=I(F),q=H(F),Z=N(F),J=s(F,c(new Uint8Array([255,255,255,255]),[1,1,4]));J.generateMipmap(),J.minFilter=F.LINEAR_MIPMAP_LINEAR,J.magFilter=F.LINEAR;var ne=r(F),re=r(F),ae=r(F),ue=r(F),he=r(F),de=n(F,[{buffer:ne,type:F.FLOAT,size:3},{buffer:he,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:re,type:F.FLOAT,size:4},{buffer:ae,type:F.FLOAT,size:2},{buffer:ue,type:F.FLOAT,size:3}]),xe=r(F),me=r(F),ve=r(F),Le=r(F),Ae=n(F,[{buffer:xe,type:F.FLOAT,size:3},{buffer:Le,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:me,type:F.FLOAT,size:4},{buffer:ve,type:F.FLOAT,size:2}]),we=r(F),se=r(F),oe=r(F),fe=r(F),Se=r(F),Me=n(F,[{buffer:we,type:F.FLOAT,size:3},{buffer:Se,type:F.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:se,type:F.FLOAT,size:4},{buffer:oe,type:F.FLOAT,size:2},{buffer:fe,type:F.FLOAT,size:1}]),be=r(F),Ie=new L(F,J,W,te,Q,X,q,Z,ne,he,re,ae,ue,de,xe,Le,me,ve,Ae,we,Se,se,oe,fe,Me,be,n(F,[{buffer:be,type:F.FLOAT,size:3}]));return Ie.update(V),Ie}},4554:function(f,o,e){f.exports=function(c){var x=c.gl;return new s(c,i(x,[0,0,0,1,1,0,1,1]),r(x,n.boxVert,n.lineFrag))};var i=e(5827),r=e(5158),n=e(2709);function s(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var a,u,p=s.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawBox=(a=[0,0],u=[0,0],function(c,x,g,h,b){var v=this.plot,y=this.shader,w=v.gl;a[0]=c,a[1]=x,u[0]=g,u[1]=h,y.uniforms.lo=a,y.uniforms.hi=u,y.uniforms.color=b,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3016:function(f,o,e){f.exports=function(v){var y=v.gl;return new a(v,i(y),r(y,s.gridVert,s.gridFrag),r(y,s.tickVert,s.gridFrag))};var i=e(5827),r=e(5158),n=e(5070),s=e(2709);function a(v,y,w,d){this.plot=v,this.vbo=y,this.shader=w,this.tickShader=d,this.ticks=[[],[]]}function u(v,y){return v-y}var p,c,x,g,h,b=a.prototype;b.draw=(p=[0,0],c=[0,0],x=[0,0],function(){for(var v=this.plot,y=this.vbo,w=this.shader,d=this.ticks,S=v.gl,T=v._tickBounds,E=v.dataBox,C=v.viewBox,L=v.gridLineWidth,O=v.gridLineColor,z=v.gridLineEnable,G=v.pixelRatio,I=0;I<2;++I){var H=T[I],N=T[I+2]-H,F=.5*(E[I+2]+E[I]),V=E[I+2]-E[I];c[I]=2*N/V,p[I]=2*(H-F)/V}w.bind(),y.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=p,w.uniforms.dataScale=c;var W=0;for(I=0;I<2;++I){x[0]=x[1]=0,x[I]=1,w.uniforms.dataAxis=x,w.uniforms.lineWidth=L[I]/(C[I+2]-C[I])*G,w.uniforms.color=O[I];var te=6*d[I].length;z[I]&&te&&S.drawArrays(S.TRIANGLES,W,te),W+=te}}),b.drawTickMarks=function(){var v=[0,0],y=[0,0],w=[1,0],d=[0,1],S=[0,0],T=[0,0];return function(){for(var E=this.plot,C=this.vbo,L=this.tickShader,O=this.ticks,z=E.gl,G=E._tickBounds,I=E.dataBox,H=E.viewBox,N=E.pixelRatio,F=E.screenBox,V=F[2]-F[0],W=F[3]-F[1],te=H[2]-H[0],Q=H[3]-H[1],X=0;X<2;++X){var q=G[X],Z=G[X+2]-q,J=.5*(I[X+2]+I[X]),ne=I[X+2]-I[X];y[X]=2*Z/ne,v[X]=2*(q-J)/ne}y[0]*=te/V,v[0]*=te/V,y[1]*=Q/W,v[1]*=Q/W,L.bind(),C.bind(),L.attributes.dataCoord.pointer();var re=L.uniforms;re.dataShift=v,re.dataScale=y;var ae=E.tickMarkLength,ue=E.tickMarkWidth,he=E.tickMarkColor,de=6*O[0].length,xe=Math.min(n.ge(O[0],(I[0]-G[0])/(G[2]-G[0]),u),O[0].length),me=Math.min(n.gt(O[0],(I[2]-G[0])/(G[2]-G[0]),u),O[0].length),ve=0+6*xe,Le=6*Math.max(0,me-xe),Ae=Math.min(n.ge(O[1],(I[1]-G[1])/(G[3]-G[1]),u),O[1].length),we=Math.min(n.gt(O[1],(I[3]-G[1])/(G[3]-G[1]),u),O[1].length),se=de+6*Ae,oe=6*Math.max(0,we-Ae);S[0]=2*(H[0]-ae[1])/V-1,S[1]=(H[3]+H[1])/W-1,T[0]=ae[1]*N/V,T[1]=ue[1]*N/W,oe&&(re.color=he[1],re.tickScale=T,re.dataAxis=d,re.screenOffset=S,z.drawArrays(z.TRIANGLES,se,oe)),S[0]=(H[2]+H[0])/V-1,S[1]=2*(H[1]-ae[0])/W-1,T[0]=ue[0]*N/V,T[1]=ae[0]*N/W,Le&&(re.color=he[0],re.tickScale=T,re.dataAxis=w,re.screenOffset=S,z.drawArrays(z.TRIANGLES,ve,Le)),S[0]=2*(H[2]+ae[3])/V-1,S[1]=(H[3]+H[1])/W-1,T[0]=ae[3]*N/V,T[1]=ue[3]*N/W,oe&&(re.color=he[3],re.tickScale=T,re.dataAxis=d,re.screenOffset=S,z.drawArrays(z.TRIANGLES,se,oe)),S[0]=(H[2]+H[0])/V-1,S[1]=2*(H[3]+ae[2])/W-1,T[0]=ue[2]*N/V,T[1]=ae[2]*N/W,Le&&(re.color=he[2],re.tickScale=T,re.dataAxis=w,re.screenOffset=S,z.drawArrays(z.TRIANGLES,ve,Le))}}(),b.update=(g=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1],function(v){for(var y=v.ticks,w=v.bounds,d=new Float32Array(18*(y[0].length+y[1].length)),S=(this.plot.zeroLineEnable,0),T=[[],[]],E=0;E<2;++E)for(var C=T[E],L=y[E],O=w[E],z=w[E+2],G=0;G<L.length;++G){var I=(L[G].x-O)/(z-O);C.push(I);for(var H=0;H<6;++H)d[S++]=I,d[S++]=g[H],d[S++]=h[H]}this.ticks=T,this.vbo.update(d)}),b.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},1154:function(f,o,e){f.exports=function(c){var x=c.gl;return new s(c,i(x,[-1,-1,-1,1,1,-1,1,1]),r(x,n.lineVert,n.lineFrag))};var i=e(5827),r=e(5158),n=e(2709);function s(c,x,g){this.plot=c,this.vbo=x,this.shader=g}var a,u,p=s.prototype;p.bind=function(){var c=this.shader;this.vbo.bind(),this.shader.bind(),c.attributes.coord.pointer(),c.uniforms.screenBox=this.plot.screenBox},p.drawLine=(a=[0,0],u=[0,0],function(c,x,g,h,b,v){var y=this.plot,w=this.shader,d=y.gl;a[0]=c,a[1]=x,u[0]=g,u[1]=h,w.uniforms.start=a,w.uniforms.end=u,w.uniforms.width=b*y.pixelRatio,w.uniforms.color=v,d.drawArrays(d.TRIANGLE_STRIP,0,4)}),p.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2709:function(f,o,e){var i=e(6832),r=i([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);f.exports={lineVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:r,textVert:i([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:r,gridVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:r,boxVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},5613:function(f,o,e){f.exports=function(y){var w=y.gl;return new u(y,i(w),r(w,a.textVert,a.textFrag))};var i=e(5827),r=e(5158),n=e(6946),s=e(5070),a=e(2709);function u(y,w,d){this.plot=y,this.vbo=w,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var p,c,x,g,h,b,v=u.prototype;v.drawTicks=(p=[0,0],c=[0,0],x=[0,0],function(y){var w=this.plot,d=this.shader,S=this.tickX[y],T=this.tickOffset[y],E=w.gl,C=w.viewBox,L=w.dataBox,O=w.screenBox,z=w.pixelRatio,G=w.tickEnable,I=w.tickPad,H=w.tickColor,N=w.tickAngle,F=w.labelEnable,V=w.labelPad,W=w.labelColor,te=w.labelAngle,Q=this.labelOffset[y],X=this.labelCount[y],q=s.lt(S,L[y]),Z=s.le(S,L[y+2]);p[0]=p[1]=0,p[y]=1,c[y]=(C[2+y]+C[y])/(O[2+y]-O[y])-1;var J=2/O[2+(1^y)]-O[1^y];c[1^y]=J*C[1^y]-1,G[y]&&(c[1^y]-=J*z*I[y],q<Z&&T[Z]>T[q]&&(d.uniforms.dataAxis=p,d.uniforms.screenOffset=c,d.uniforms.color=H[y],d.uniforms.angle=N[y],E.drawArrays(E.TRIANGLES,T[q],T[Z]-T[q]))),F[y]&&X&&(c[1^y]-=J*z*V[y],d.uniforms.dataAxis=x,d.uniforms.screenOffset=c,d.uniforms.color=W[y],d.uniforms.angle=te[y],E.drawArrays(E.TRIANGLES,Q,X)),c[1^y]=J*C[2+(1^y)]-1,G[y+2]&&(c[1^y]+=J*z*I[y+2],q<Z&&T[Z]>T[q]&&(d.uniforms.dataAxis=p,d.uniforms.screenOffset=c,d.uniforms.color=H[y+2],d.uniforms.angle=N[y+2],E.drawArrays(E.TRIANGLES,T[q],T[Z]-T[q]))),F[y+2]&&X&&(c[1^y]+=J*z*V[y+2],d.uniforms.dataAxis=x,d.uniforms.screenOffset=c,d.uniforms.color=W[y+2],d.uniforms.angle=te[y+2],E.drawArrays(E.TRIANGLES,Q,X))}),v.drawTitle=function(){var y=[0,0],w=[0,0];return function(){var d=this.plot,S=this.shader,T=d.gl,E=d.screenBox,C=d.titleCenter,L=d.titleAngle,O=d.titleColor,z=d.pixelRatio;if(this.titleCount){for(var G=0;G<2;++G)w[G]=2*(C[G]*z-E[G])/(E[2+G]-E[G])-1;S.bind(),S.uniforms.dataAxis=y,S.uniforms.screenOffset=w,S.uniforms.angle=L,S.uniforms.color=O,T.drawArrays(T.TRIANGLES,this.titleOffset,this.titleCount)}}}(),v.bind=(g=[0,0],h=[0,0],b=[0,0],function(){var y=this.plot,w=this.shader,d=y._tickBounds,S=y.dataBox,T=y.screenBox,E=y.viewBox;w.bind();for(var C=0;C<2;++C){var L=d[C],O=d[C+2]-L,z=.5*(S[C+2]+S[C]),G=S[C+2]-S[C],I=E[C],H=E[C+2]-I,N=T[C],F=T[C+2]-N;h[C]=2*O/G*H/F,g[C]=2*(L-z)/G*H/F}b[1]=2*y.pixelRatio/(T[3]-T[1]),b[0]=b[1]*(T[3]-T[1])/(T[2]-T[0]),w.uniforms.dataScale=h,w.uniforms.dataShift=g,w.uniforms.textScale=b,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),v.update=function(y){var w,d,S,T,E,C=[],L=y.ticks,O=y.bounds;for(E=0;E<2;++E){var z=[Math.floor(C.length/3)],G=[-1/0],I=L[E];for(w=0;w<I.length;++w){var H=I[w],N=H.x,F=H.text,V=H.font||"sans-serif";T=H.fontSize||12;for(var W=1/(O[E+2]-O[E]),te=O[E],Q=F.split(`
`),X=0;X<Q.length;X++)for(S=n(V,Q[X]).data,d=0;d<S.length;d+=2)C.push(S[d]*T,-S[d+1]*T-X*T*1.2,(N-te)*W);z.push(Math.floor(C.length/3)),G.push(N)}this.tickOffset[E]=z,this.tickX[E]=G}for(E=0;E<2;++E){for(this.labelOffset[E]=Math.floor(C.length/3),S=n(y.labelFont[E],y.labels[E],{textAlign:"center"}).data,T=y.labelSize[E],w=0;w<S.length;w+=2)C.push(S[w]*T,-S[w+1]*T,0);this.labelCount[E]=Math.floor(C.length/3)-this.labelOffset[E]}for(this.titleOffset=Math.floor(C.length/3),S=n(y.titleFont,y.title).data,T=y.titleSize,w=0;w<S.length;w+=2)C.push(S[w]*T,-S[w+1]*T,0);this.titleCount=Math.floor(C.length/3)-this.titleOffset,this.vbo.update(C)},v.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},2117:function(f,o,e){f.exports=function(g){var h=g.gl,b=new u(h,i(h,[h.drawingBufferWidth,h.drawingBufferHeight]));return b.grid=r(b),b.text=n(b),b.line=s(b),b.box=a(b),b.update(g),b};var i=e(2611),r=e(3016),n=e(5613),s=e(1154),a=e(4554);function u(g,h){this.gl=g,this.pickBuffer=h,this.screenBox=[0,0,g.drawingBufferWidth,g.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var p=u.prototype;function c(g){for(var h=g.slice(),b=0;b<h.length;++b)h[b]=h[b].slice();return h}function x(g,h){return g.x-h.x}p.setDirty=function(){this.dirty=this.pickDirty=!0},p.setOverlayDirty=function(){this.dirty=!0},p.nextDepthValue=function(){return this._depthCounter++/65536},p.draw=function(){var g=this.gl,h=this.screenBox,b=this.viewBox,v=this.dataBox,y=this.pixelRatio,w=this.grid,d=this.line,S=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,g.bindFramebuffer(g.FRAMEBUFFER,null),g.enable(g.SCISSOR_TEST),g.disable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!1),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD,g.FUNC_ADD),g.blendFunc(g.ONE,g.ONE_MINUS_SRC_ALPHA),this.borderColor){g.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]);var E=this.borderColor;g.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}g.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),g.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]);var C=this.backgroundColor;g.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),g.clear(g.COLOR_BUFFER_BIT),w.draw();var L=this.zeroLineEnable,O=this.zeroLineColor,z=this.zeroLineWidth;if(L[0]||L[1]){d.bind();for(var G=0;G<2;++G)if(L[G]&&v[G]<=0&&v[G+2]>=0){var I=h[G]-v[G]*(h[G+2]-h[G])/(v[G+2]-v[G]);G===0?d.drawLine(I,h[1],I,h[3],z[G],O[G]):d.drawLine(h[0],I,h[2],I,z[G],O[G])}}for(G=0;G<T.length;++G)T[G].draw();g.viewport(h[0],h[1],h[2]-h[0],h[3]-h[1]),g.scissor(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.grid.drawTickMarks(),d.bind();var H=this.borderLineEnable,N=this.borderLineWidth,F=this.borderLineColor;for(H[1]&&d.drawLine(b[0],b[1]-.5*N[1]*y,b[0],b[3]+.5*N[3]*y,N[1],F[1]),H[0]&&d.drawLine(b[0]-.5*N[0]*y,b[1],b[2]+.5*N[2]*y,b[1],N[0],F[0]),H[3]&&d.drawLine(b[2],b[1]-.5*N[1]*y,b[2],b[3]+.5*N[3]*y,N[3],F[3]),H[2]&&d.drawLine(b[0]-.5*N[0]*y,b[3],b[2]+.5*N[2]*y,b[3],N[2],F[2]),S.bind(),G=0;G<2;++G)S.drawTicks(G);this.titleEnable&&S.drawTitle();var V=this.overlays;for(G=0;G<V.length;++G)V[G].draw();g.disable(g.SCISSOR_TEST),g.disable(g.BLEND),g.depthMask(!0)}},p.drawPick=function(){if(!this.static){var g=this.pickBuffer;this.gl,this._pickTimeout=null,g.begin();for(var h=1,b=this.objects,v=0;v<b.length;++v)h=b[v].drawPick(h);g.end()}},p.pick=function(g,h){if(!this.static){var b=this.pixelRatio,v=this.pickPixelRatio,y=this.viewBox,w=0|Math.round((g-y[0]/b)*v),d=0|Math.round((h-y[1]/b)*v),S=this.pickBuffer.query(w,d,this.pickRadius);if(!S)return null;for(var T=S.id+(S.value[0]<<8)+(S.value[1]<<16)+(S.value[2]<<24),E=this.objects,C=0;C<E.length;++C){var L=E[C].pick(w,d,T);if(L)return L}return null}},p.setScreenBox=function(g){var h=this.screenBox,b=this.pixelRatio;h[0]=0|Math.round(g[0]*b),h[1]=0|Math.round(g[1]*b),h[2]=0|Math.round(g[2]*b),h[3]=0|Math.round(g[3]*b),this.setDirty()},p.setDataBox=function(g){var h=this.dataBox;(h[0]!==g[0]||h[1]!==g[1]||h[2]!==g[2]||h[3]!==g[3])&&(h[0]=g[0],h[1]=g[1],h[2]=g[2],h[3]=g[3],this.setDirty())},p.setViewBox=function(g){var h=this.pixelRatio,b=this.viewBox;b[0]=0|Math.round(g[0]*h),b[1]=0|Math.round(g[1]*h),b[2]=0|Math.round(g[2]*h),b[3]=0|Math.round(g[3]*h);var v=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((g[2]-g[0])*v),0|Math.round((g[3]-g[1])*v)],this.setDirty()},p.update=function(g){g=g||{};var h=this.gl;this.pixelRatio=g.pixelRatio||1;var b=this.pixelRatio;this.pickPixelRatio=Math.max(b,1),this.setScreenBox(g.screenBox||[0,0,h.drawingBufferWidth/b,h.drawingBufferHeight/b]),this.screenBox,this.setViewBox(g.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/b,.125*(this.screenBox[3]-this.screenBox[1])/b,.875*(this.screenBox[2]-this.screenBox[0])/b,.875*(this.screenBox[3]-this.screenBox[1])/b]);var v=this.viewBox,y=(v[2]-v[0])/(v[3]-v[1]);this.setDataBox(g.dataBox||[-10,-10/y,10,10/y]),this.borderColor=g.borderColor!==!1&&(g.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(g.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(g.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(g.gridLineWidth||[1,1]).slice(),this.gridLineColor=c(g.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(g.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(g.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=c(g.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(g.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(g.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=c(g.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(g.titleCenter||[.5*(v[0]+v[2])/b,(v[3]+120)/b]).slice(),this.titleEnable=!("titleEnable"in g)||!!g.titleEnable,this.titleAngle=g.titleAngle||0,this.titleColor=(g.titleColor||[0,0,0,1]).slice(),this.labelPad=(g.labelPad||[15,15,15,15]).slice(),this.labelAngle=(g.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(g.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=c(g.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(g.tickPad||[15,15,15,15]).slice(),this.tickAngle=(g.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(g.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=c(g.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(g.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(g.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=c(g.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=g.ticks||[[],[]],d=this._tickBounds;d[0]=d[1]=1/0,d[2]=d[3]=-1/0;for(var S=0;S<2;++S){var T=w[S].slice(0);T.length!==0&&(T.sort(x),d[S]=Math.min(d[S],T[0].x),d[S+2]=Math.max(d[S+2],T[T.length-1].x))}this.grid.update({bounds:d,ticks:w}),this.text.update({bounds:d,ticks:w,labels:g.labels||["x","y"],labelSize:g.labelSize||[12,12],labelFont:g.labelFont||["sans-serif","sans-serif"],title:g.title||"",titleSize:g.titleSize||18,titleFont:g.titleFont||"sans-serif"}),this.static=!!g.static,this.setDirty()},p.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var g=this.objects.length-1;g>=0;--g)this.objects[g].dispose();for(this.objects.length=0,g=this.overlays.length-1;g>=0;--g)this.overlays[g].dispose();this.overlays.length=0,this.gl=null},p.addObject=function(g){this.objects.indexOf(g)<0&&(this.objects.push(g),this.setDirty())},p.removeObject=function(g){for(var h=this.objects,b=0;b<h.length;++b)if(h[b]===g){h.splice(b,1),this.setDirty();break}},p.addOverlay=function(g){this.overlays.indexOf(g)<0&&(this.overlays.push(g),this.setOverlayDirty())},p.removeOverlay=function(g){for(var h=this.overlays,b=0;b<h.length;++b)if(h[b]===g){h.splice(b,1),this.setOverlayDirty();break}}},4296:function(f,o,e){f.exports=function(p,c){p=p||document.body;var x=[.01,1/0];"distanceLimits"in(c=c||{})&&(x[0]=c.distanceLimits[0],x[1]=c.distanceLimits[1]),"zoomMin"in c&&(x[0]=c.zoomMin),"zoomMax"in c&&(x[1]=c.zoomMax);var g=r({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:x}),h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0,v=p.clientWidth,y=p.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:g,element:p,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:g.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var d=i(),S=this.delay,T=d-2*S;g.idle(d-S),g.recalcMatrix(T),g.flush(d-(100+2*S));for(var E=!0,C=g.computedMatrix,L=0;L<16;++L)E=E&&h[L]===C[L],h[L]=C[L];var O=p.clientWidth===v&&p.clientHeight===y;return v=p.clientWidth,y=p.clientHeight,E?!O:(b=Math.exp(g.computedRadius[0]),!0)},lookAt:function(d,S,T){g.lookAt(g.lastT(),d,S,T)},rotate:function(d,S,T){g.rotate(g.lastT(),d,S,T)},pan:function(d,S,T){g.pan(g.lastT(),d,S,T)},translate:function(d,S,T){g.translate(g.lastT(),d,S,T)}};return Object.defineProperties(w,{matrix:{get:function(){return g.computedMatrix},set:function(d){return g.setMatrix(g.lastT(),d),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(d){var S=g.computedUp.slice(),T=g.computedEye.slice(),E=g.computedCenter.slice();if(g.setMode(d),d==="turntable"){var C=i();g._active.lookAt(C,T,E,S),g._active.lookAt(C+500,T,E,[0,0,1]),g._active.flush(C)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(d){return g.lookAt(g.lastT(),null,d),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(d){return g.lookAt(g.lastT(),d),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(d){return g.lookAt(g.lastT(),null,null,d),g.computedUp},enumerable:!0},distance:{get:function(){return b},set:function(d){return g.setDistance(g.lastT(),d),d},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(x)},set:function(d){return g.setDistanceLimits(d),d},enumerable:!0}}),p.addEventListener("contextmenu",function(d){return d.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function d(S,T,E,C){var L=w.keyBindingMode;if(L!==!1){var O=L==="rotate",z=L==="pan",G=L==="zoom",I=!!C.control,H=!!C.alt,N=!!C.shift,F=!!(1&S),V=!!(2&S),W=!!(4&S),te=1/p.clientHeight,Q=te*(T-w._lastX),X=te*(E-w._lastY),q=w.flipX?1:-1,Z=w.flipY?1:-1,J=Math.PI*w.rotateSpeed,ne=i();if(w._lastX!==-1&&w._lastY!==-1&&((O&&F&&!I&&!H&&!N||F&&!I&&!H&&N)&&g.rotate(ne,q*J*Q,-Z*J*X,0),(z&&F&&!I&&!H&&!N||V||F&&I&&!H&&!N)&&g.pan(ne,-w.translateSpeed*Q*b,w.translateSpeed*X*b,0),G&&F&&!I&&!H&&!N||W||F&&!I&&H&&!N)){var re=-w.zoomSpeed*X/window.innerHeight*(ne-g.lastT())*100;g.pan(ne,0,0,b*(Math.exp(re)-1))}return w._lastX=T,w._lastY=E,w._lastMods=C,!0}}w.mouseListener=n(p,d),p.addEventListener("touchstart",function(S){var T=a(S.changedTouches[0],p);d(0,T[0],T[1],w._lastMods),d(1,T[0],T[1],w._lastMods)},!!u&&{passive:!0}),p.addEventListener("touchmove",function(S){var T=a(S.changedTouches[0],p);d(1,T[0],T[1],w._lastMods),S.preventDefault()},!!u&&{passive:!1}),p.addEventListener("touchend",function(S){d(0,w._lastX,w._lastY,w._lastMods)},!!u&&{passive:!0}),w.wheelListener=s(p,function(S,T){if(w.keyBindingMode!==!1&&w.enableWheel){var E=w.flipX?1:-1,C=w.flipY?1:-1,L=i();if(Math.abs(S)>Math.abs(T))g.rotate(L,0,0,-S*E*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var O=-w.zoomSpeed*C*T/window.innerHeight*(L-g.lastT())/20;g.pan(L,0,0,b*(Math.exp(O)-1))}}},!0)},w.enableMouseListeners(),w};var i=e(8161),r=e(1152),n=e(6145),s=e(6475),a=e(2565),u=e(5233)},8245:function(f,o,e){var i=e(6832),r=e(5158),n=i([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),s=i([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);f.exports=function(a){return r(a,n,s,null,[{name:"position",type:"vec2"}])}},1059:function(f,o,e){var i=e(4296),r=e(7453),n=e(2771),s=e(6496),a=e(2611),u=e(4234),p=e(8126),c=e(6145),x=e(1120),g=e(5268),h=e(8245),b=e(2321)({tablet:!0,featureDetect:!0});function v(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function y(d){var S=Math.round(Math.log(Math.abs(d))/Math.log(10));if(S<0){var T=Math.round(Math.pow(10,-S));return Math.ceil(d*T)/T}return S>0?(T=Math.round(Math.pow(10,S)),Math.ceil(d/T)*T):Math.ceil(d)}function w(d){return typeof d!="boolean"||d}f.exports={createScene:function(d){(d=d||{}).camera=d.camera||{};var S=d.canvas;S||(S=document.createElement("canvas"),d.container?d.container.appendChild(S):document.body.appendChild(S));var T=d.gl;if(T||(d.glOptions&&(b=!!d.glOptions.preserveDrawingBuffer),T=function(Le,Ae){var we=null;try{(we=Le.getContext("webgl",Ae))||(we=Le.getContext("experimental-webgl",Ae))}catch{return null}return we}(S,d.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:b})),!T)throw new Error("webgl not supported");var E=d.bounds||[[-10,-10,-10],[10,10,10]],C=new v,L=u(T,T.drawingBufferWidth,T.drawingBufferHeight,{preferFloat:!b}),O=h(T),z=d.cameraObject&&d.cameraObject._ortho===!0||d.camera.projection&&d.camera.projection.type==="orthographic"||!1,G={eye:d.camera.eye||[2,0,0],center:d.camera.center||[0,0,0],up:d.camera.up||[0,1,0],zoomMin:d.camera.zoomMax||.1,zoomMax:d.camera.zoomMin||100,mode:d.camera.mode||"turntable",_ortho:z},I=d.axes||{},H=r(T,I);H.enable=!I.disable;var N=d.spikes||{},F=s(T,N),V=[],W=[],te=[],Q=[],X=!0,q=!0,Z={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},J=(q=!0,[T.drawingBufferWidth,T.drawingBufferHeight]),ne=d.cameraObject||i(S,G),re={gl:T,contextLost:!1,pixelRatio:d.pixelRatio||1,canvas:S,selection:C,camera:ne,axes:H,axesPixels:null,spikes:F,bounds:E,objects:V,shape:J,aspect:d.aspectRatio||[1,1,1],pickRadius:d.pickRadius||10,zNear:d.zNear||.01,zFar:d.zFar||1e3,fovy:d.fovy||Math.PI/4,clearColor:d.clearColor||[0,0,0,0],autoResize:w(d.autoResize),autoBounds:w(d.autoBounds),autoScale:!!d.autoScale,autoCenter:w(d.autoCenter),clipToBounds:w(d.clipToBounds),snapToData:!!d.snapToData,onselect:d.onselect||null,onrender:d.onrender||null,onclick:d.onclick||null,cameraParams:Z,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(Le){this.aspect[0]=Le.x,this.aspect[1]=Le.y,this.aspect[2]=Le.z,q=!0},setBounds:function(Le,Ae){this.bounds[0][Le]=Ae.min,this.bounds[1][Le]=Ae.max},setClearColor:function(Le){this.clearColor=Le},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},ae=[T.drawingBufferWidth/re.pixelRatio|0,T.drawingBufferHeight/re.pixelRatio|0];function ue(){if(!re._stopped&&re.autoResize){var Le=S.parentNode,Ae=1,we=1;Le&&Le!==document.body?(Ae=Le.clientWidth,we=Le.clientHeight):(Ae=window.innerWidth,we=window.innerHeight);var se=0|Math.ceil(Ae*re.pixelRatio),oe=0|Math.ceil(we*re.pixelRatio);if(se!==S.width||oe!==S.height){S.width=se,S.height=oe;var fe=S.style;fe.position=fe.position||"absolute",fe.left="0px",fe.top="0px",fe.width=Ae+"px",fe.height=we+"px",X=!0}}}function he(){for(var Le=V.length,Ae=Q.length,we=0;we<Ae;++we)te[we]=0;e:for(we=0;we<Le;++we){var se=V[we],oe=se.pickSlots;if(oe){for(var fe=0;fe<Ae;++fe)if(te[fe]+oe<255){W[we]=fe,se.setPickBase(te[fe]+1),te[fe]+=oe;continue e}var Se=a(T,J);W[we]=Ae,Q.push(Se),te.push(oe),se.setPickBase(1),Ae+=1}else W[we]=-1}for(;Ae>0&&te[Ae-1]===0;)te.pop(),Q.pop().dispose()}function de(){if(re.contextLost)return!0;T.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}re.autoResize&&ue(),window.addEventListener("resize",ue),re.update=function(Le){re._stopped||(X=!0,q=!0)},re.add=function(Le){re._stopped||(Le.axes=H,V.push(Le),W.push(-1),X=!0,q=!0,he())},re.remove=function(Le){if(!re._stopped){var Ae=V.indexOf(Le);Ae<0||(V.splice(Ae,1),W.pop(),X=!0,q=!0,he())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",ue),S.removeEventListener("webglcontextlost",de),re.mouseListener.enabled=!1,!re.contextLost)){H.dispose(),F.dispose();for(var Le=0;Le<V.length;++Le)V[Le].dispose();for(L.dispose(),Le=0;Le<Q.length;++Le)Q[Le].dispose();O.dispose(),T=null,H=null,F=null,V=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=c(S,function(Le,Ae,we){if(!re._stopped){var se=Q.length,oe=V.length,fe=C.object;C.distance=1/0,C.mouse[0]=Ae,C.mouse[1]=we,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var Se=!1;if(Le&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(q=!0),re._mouseRotating=!1;for(var Me=0;Me<se;++Me){var be=Q[Me].query(Ae,ae[1]-we-1,re.pickRadius);if(be){if(be.distance>C.distance)continue;for(var Ie=0;Ie<oe;++Ie){var Be=V[Ie];if(W[Ie]===Me){var ce=Be.pick(be);ce&&(C.buttons=Le,C.screen=be.coord,C.distance=be.distance,C.object=Be,C.index=ce.distance,C.dataPosition=ce.position,C.dataCoordinate=ce.dataCoordinate,C.data=ce,Se=!0)}}}}}fe&&fe!==C.object&&(fe.highlight&&fe.highlight(null),X=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),X=!0),(Se=Se||C.object!==fe)&&re.onselect&&re.onselect(C),1&Le&&!(1&re._prevButtons)&&re.onclick&&re.onclick(C),re._prevButtons=Le}})},S.addEventListener("webglcontextlost",de);var xe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],me=[xe[0].slice(),xe[1].slice()];function ve(){if(!de()){ue();var Le=re.camera.tick();Z.view=re.camera.matrix,X=X||Le,q=q||Le,H.pixelRatio=re.pixelRatio,F.pixelRatio=re.pixelRatio;var Ae=V.length,we=xe[0],se=xe[1];we[0]=we[1]=we[2]=1/0,se[0]=se[1]=se[2]=-1/0;for(var oe=0;oe<Ae;++oe){(ze=V[oe]).pixelRatio=re.pixelRatio,ze.axes=re.axes,X=X||!!ze.dirty,q=q||!!ze.dirty;var fe=ze.bounds;if(fe)for(var Se=fe[0],Me=fe[1],be=0;be<3;++be)we[be]=Math.min(we[be],Se[be]),se[be]=Math.max(se[be],Me[be])}var Ie=re.bounds;if(re.autoBounds)for(be=0;be<3;++be){if(se[be]<we[be])we[be]=-1,se[be]=1;else{we[be]===se[be]&&(we[be]-=1,se[be]+=1);var Be=.05*(se[be]-we[be]);we[be]=we[be]-Be,se[be]=se[be]+Be}Ie[0][be]=we[be],Ie[1][be]=se[be]}var ce=!1;for(be=0;be<3;++be)ce=ce||me[0][be]!==Ie[0][be]||me[1][be]!==Ie[1][be],me[0][be]=Ie[0][be],me[1][be]=Ie[1][be];if(q=q||ce,X=X||ce){if(ce){var Te=[0,0,0];for(oe=0;oe<3;++oe)Te[oe]=y((Ie[1][oe]-Ie[0][oe])/10);H.autoTicks?H.update({bounds:Ie,tickSpacing:Te}):H.update({bounds:Ie})}var ye=T.drawingBufferWidth,Pe=T.drawingBufferHeight;for(J[0]=ye,J[1]=Pe,ae[0]=0|Math.max(ye/re.pixelRatio,1),ae[1]=0|Math.max(Pe/re.pixelRatio,1),function(He,We){var Je=He.bounds,lt=He.cameraParams,et=lt.projection,yt=lt.model,_t=He.gl.drawingBufferWidth,xt=He.gl.drawingBufferHeight,at=He.zNear,ot=He.zFar,At=He.fovy,Ct=_t/xt;We?(g(et,-Ct,Ct,-1,1,at,ot),lt._ortho=!0):(x(et,At,Ct,at,ot),lt._ortho=!1);for(var zt=0;zt<16;++zt)yt[zt]=0;yt[15]=1;var St=0;for(zt=0;zt<3;++zt)St=Math.max(St,Je[1][zt]-Je[0][zt]);for(zt=0;zt<3;++zt)He.autoScale?yt[5*zt]=He.aspect[zt]/(Je[1][zt]-Je[0][zt]):yt[5*zt]=1/St,He.autoCenter&&(yt[12+zt]=.5*-yt[5*zt]*(Je[0][zt]+Je[1][zt]))}(re,z),oe=0;oe<Ae;++oe)(ze=V[oe]).axesBounds=Ie,re.clipToBounds&&(ze.clipBounds=Ie);C.object&&(re.snapToData?F.position=C.dataCoordinate:F.position=C.dataPosition,F.bounds=Ie),q&&(q=!1,function(){if(!de()){T.colorMask(!0,!0,!0,!0),T.depthMask(!0),T.disable(T.BLEND),T.enable(T.DEPTH_TEST),T.depthFunc(T.LEQUAL);for(var He=V.length,We=Q.length,Je=0;Je<We;++Je){var lt=Q[Je];lt.shape=ae,lt.begin();for(var et=0;et<He;++et)if(W[et]===Je){var yt=V[et];yt.drawPick&&(yt.pixelRatio=1,yt.drawPick(Z))}lt.end()}}}()),re.axesPixels=n(re.axes,Z,ye,Pe),re.onrender&&re.onrender(),T.bindFramebuffer(T.FRAMEBUFFER,null),T.viewport(0,0,ye,Pe),re.clearRGBA(),T.depthMask(!0),T.colorMask(!0,!0,!0,!0),T.enable(T.DEPTH_TEST),T.depthFunc(T.LEQUAL),T.disable(T.BLEND),T.disable(T.CULL_FACE);var Re=!1;for(H.enable&&(Re=Re||H.isTransparent(),H.draw(Z)),F.axes=H,C.object&&F.draw(Z),T.disable(T.CULL_FACE),oe=0;oe<Ae;++oe)(ze=V[oe]).axes=H,ze.pixelRatio=re.pixelRatio,ze.isOpaque&&ze.isOpaque()&&ze.draw(Z),ze.isTransparent&&ze.isTransparent()&&(Re=!0);if(Re){for(L.shape=J,L.bind(),T.clear(T.DEPTH_BUFFER_BIT),T.colorMask(!1,!1,!1,!1),T.depthMask(!0),T.depthFunc(T.LESS),H.enable&&H.isTransparent()&&H.drawTransparent(Z),oe=0;oe<Ae;++oe)(ze=V[oe]).isOpaque&&ze.isOpaque()&&ze.draw(Z);for(T.enable(T.BLEND),T.blendEquation(T.FUNC_ADD),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.colorMask(!0,!0,!0,!0),T.depthMask(!1),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),H.isTransparent()&&H.drawTransparent(Z),oe=0;oe<Ae;++oe){var ze;(ze=V[oe]).isTransparent&&ze.isTransparent()&&ze.drawTransparent(Z)}T.bindFramebuffer(T.FRAMEBUFFER,null),T.blendFunc(T.ONE,T.ONE_MINUS_SRC_ALPHA),T.disable(T.DEPTH_TEST),O.bind(),L.color[0].bind(0),O.uniforms.accumBuffer=0,p(T),T.disable(T.BLEND)}for(X=!1,oe=0;oe<Ae;++oe)V[oe].dirty=!1}}}return re.enableMouseListeners(),function Le(){re._stopped||re.contextLost||(ve(),requestAnimationFrame(Le))}(),re.redraw=function(){re._stopped||(X=!0,ve())},re},createCamera:i}},8023:function(f,o,e){var i=e(6832);o.pointVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),o.pointFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),o.pickVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),o.pickFragment=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},8271:function(f,o,e){var i=e(5158),r=e(5827),n=e(5306),s=e(8023);function a(x,g,h,b,v){this.plot=x,this.offsetBuffer=g,this.pickBuffer=h,this.shader=b,this.pickShader=v,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}f.exports=function(x,g){var h=x.gl,b=new a(x,r(h),r(h),i(h,s.pointVertex,s.pointFragment),i(h,s.pickVertex,s.pickFragment));return b.update(g),x.addObject(b),b};var u,p,c=a.prototype;c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},c.update=function(x){var g;function h(T,E){return T in x?x[T]:E}x=x||{},this.sizeMin=h("sizeMin",.5),this.sizeMax=h("sizeMax",20),this.color=h("color",[1,0,0,1]).slice(),this.areaRatio=h("areaRatio",1),this.borderColor=h("borderColor",[0,0,0,1]).slice(),this.blend=h("blend",!1);var b=x.positions.length>>>1,v=x.positions instanceof Float32Array,y=x.idToIndex instanceof Int32Array&&x.idToIndex.length>=b,w=x.positions,d=v?w:n.mallocFloat32(w.length),S=y?x.idToIndex:n.mallocInt32(b);if(v||d.set(w),!y)for(d.set(w),g=0;g<b;g++)S[g]=g;this.points=w,this.offsetBuffer.update(d),this.pickBuffer.update(S),v||n.free(d),y||n.free(S),this.pointCount=b,this.pickOffset=0},c.unifiedDraw=(u=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0],function(x){var g=x!==void 0,h=g?this.pickShader:this.shader,b=this.plot.gl,v=this.plot.dataBox;if(this.pointCount===0)return x;var y=v[2]-v[0],w=v[3]-v[1],d=function(C,L){var O,z=0,G=C.length>>>1;for(O=0;O<G;O++){var I=C[2*O],H=C[2*O+1];I>=L[0]&&I<=L[2]&&H>=L[1]&&H<=L[3]&&z++}return z}(this.points,v),S=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(d,.33333)));u[0]=2/y,u[4]=2/w,u[6]=-2*v[0]/y-1,u[7]=-2*v[1]/w-1,this.offsetBuffer.bind(),h.bind(),h.attributes.position.pointer(),h.uniforms.matrix=u,h.uniforms.color=this.color,h.uniforms.borderColor=this.borderColor,h.uniforms.pointCloud=S<5,h.uniforms.pointSize=S,h.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),g&&(p[0]=255&x,p[1]=x>>8&255,p[2]=x>>16&255,p[3]=x>>24&255,this.pickBuffer.bind(),h.attributes.pickId.pointer(b.UNSIGNED_BYTE),h.uniforms.pickOffset=p,this.pickOffset=x);var T=b.getParameter(b.BLEND),E=b.getParameter(b.DITHER);return T&&!this.blend&&b.disable(b.BLEND),E&&b.disable(b.DITHER),b.drawArrays(b.POINTS,0,this.pointCount),T&&!this.blend&&b.enable(b.BLEND),E&&b.enable(b.DITHER),x+this.pointCount}),c.draw=c.unifiedDraw,c.drawPick=c.unifiedDraw,c.pick=function(x,g,h){var b=this.pickOffset,v=this.pointCount;if(h<b||h>=b+v)return null;var y=h-b,w=this.points;return{object:this,pointId:y,dataCoord:[w[2*y],w[2*y+1]]}}},6093:function(f){f.exports=function(o,e,i,r){var n,s,a,u,p,c=e[0],x=e[1],g=e[2],h=e[3],b=i[0],v=i[1],y=i[2],w=i[3];return(s=c*b+x*v+g*y+h*w)<0&&(s=-s,b=-b,v=-v,y=-y,w=-w),1-s>1e-6?(n=Math.acos(s),a=Math.sin(n),u=Math.sin((1-r)*n)/a,p=Math.sin(r*n)/a):(u=1-r,p=r),o[0]=u*c+p*b,o[1]=u*x+p*v,o[2]=u*g+p*y,o[3]=u*h+p*w,o}},8240:function(f){f.exports=function(o){return o||o===0?o.toString():""}},4123:function(f,o,e){var i=e(875);f.exports=function(n,s,a){var u=r[s];if(u||(u=r[s]={}),n in u)return u[n];var p={textAlign:"center",textBaseline:"middle",lineHeight:1,font:s,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},c=i(n,p);p.triangles=!1;var x,g,h=i(n,p);if(a&&a!==1){for(x=0;x<c.positions.length;++x)for(g=0;g<c.positions[x].length;++g)c.positions[x][g]/=a;for(x=0;x<h.positions.length;++x)for(g=0;g<h.positions[x].length;++g)h.positions[x][g]/=a}var b=[[1/0,1/0],[-1/0,-1/0]],v=h.positions.length;for(x=0;x<v;++x){var y=h.positions[x];for(g=0;g<2;++g)b[0][g]=Math.min(b[0][g],y[g]),b[1][g]=Math.max(b[1][g],y[g])}return u[n]=[c,h,b]};var r={}},9282:function(f,o,e){var i=e(5158),r=e(6832),n=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),s=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),a=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),p=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],x={vertex:n,fragment:u,attributes:c},g={vertex:s,fragment:u,attributes:c},h={vertex:a,fragment:u,attributes:c},b={vertex:n,fragment:p,attributes:c},v={vertex:s,fragment:p,attributes:c},y={vertex:a,fragment:p,attributes:c};function w(d,S){var T=i(d,S),E=T.attributes;return E.position.location=0,E.color.location=1,E.glyph.location=2,E.id.location=3,T}o.createPerspective=function(d){return w(d,x)},o.createOrtho=function(d){return w(d,g)},o.createProject=function(d){return w(d,h)},o.createPickPerspective=function(d){return w(d,b)},o.createPickOrtho=function(d){return w(d,v)},o.createPickProject=function(d){return w(d,y)}},2182:function(f,o,e){var i=e(3596),r=e(5827),n=e(2944),s=e(5306),a=e(104),u=e(9282),p=e(4123),c=e(8240),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(W,te){var Q=W[0],X=W[1],q=W[2],Z=W[3];return W[0]=te[0]*Q+te[4]*X+te[8]*q+te[12]*Z,W[1]=te[1]*Q+te[5]*X+te[9]*q+te[13]*Z,W[2]=te[2]*Q+te[6]*X+te[10]*q+te[14]*Z,W[3]=te[3]*Q+te[7]*X+te[11]*q+te[15]*Z,W}function h(W,te,Q,X){return g(X,X),g(X,X),g(X,X)}function b(W,te){this.index=W,this.dataCoordinate=this.position=te}function v(W){return W===!0||W>1?1:W}function y(W,te,Q,X,q,Z,J,ne,re,ae,ue,he){this.gl=W,this.pixelRatio=1,this.shader=te,this.orthoShader=Q,this.projectShader=X,this.pointBuffer=q,this.colorBuffer=Z,this.glyphBuffer=J,this.idBuffer=ne,this.vao=re,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ae,this.pickOrthoShader=ue,this.pickProjectShader=he,this.points=[],this._selectResult=new b(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}f.exports=function(W){var te=W.gl,Q=u.createPerspective(te),X=u.createOrtho(te),q=u.createProject(te),Z=u.createPickPerspective(te),J=u.createPickOrtho(te),ne=u.createPickProject(te),re=r(te),ae=r(te),ue=r(te),he=r(te),de=new y(te,Q,X,q,re,ae,ue,he,n(te,[{buffer:re,size:3,type:te.FLOAT},{buffer:ae,size:4,type:te.FLOAT},{buffer:ue,size:2,type:te.FLOAT},{buffer:he,size:4,type:te.UNSIGNED_BYTE,normalized:!0}]),Z,J,ne);return de.update(W),de};var w=y.prototype;w.pickSlots=1,w.setPickBase=function(W){this.pickId=W},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var W=0;W<3;++W)if(this.axesProject[W]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var W=0;W<3;++W)if(this.axesProject[W]&&!this.projectHasAlpha)return!0;return!1};var d=[0,0],S=[0,0,0],T=[0,0,0],E=[0,0,0,1],C=[0,0,0,1],L=x.slice(),O=[0,0,0],z=[[0,0,0],[0,0,0]];function G(W){return W[0]=W[1]=W[2]=0,W}function I(W,te){return W[0]=te[0],W[1]=te[1],W[2]=te[2],W[3]=1,W}function H(W,te,Q,X){return W[0]=te[0],W[1]=te[1],W[2]=te[2],W[Q]=X,W}var N=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function F(W,te,Q,X,q,Z,J){var ne=Q.gl;if((Z===Q.projectHasAlpha||J)&&function(ae,ue,he,de){var xe,me=ue.axesProject,ve=ue.gl,Le=ae.uniforms,Ae=he.model||x,we=he.view||x,se=he.projection||x,oe=ue.axesBounds,fe=function(Je){for(var lt=z,et=0;et<2;++et)for(var yt=0;yt<3;++yt)lt[et][yt]=Math.max(Math.min(Je[et][yt],1e8),-1e8);return lt}(ue.clipBounds);xe=ue.axes&&ue.axes.lastCubeProps?ue.axes.lastCubeProps.axis:[1,1,1],d[0]=2/ve.drawingBufferWidth,d[1]=2/ve.drawingBufferHeight,ae.bind(),Le.view=we,Le.projection=se,Le.screenSize=d,Le.highlightId=ue.highlightId,Le.highlightScale=ue.highlightScale,Le.clipBounds=fe,Le.pickGroup=ue.pickId/255,Le.pixelRatio=de;for(var Se=0;Se<3;++Se)if(me[Se]){Le.scale=ue.projectScale[Se],Le.opacity=ue.projectOpacity[Se];for(var Me=L,be=0;be<16;++be)Me[be]=0;for(be=0;be<4;++be)Me[5*be]=1;Me[5*Se]=0,xe[Se]<0?Me[12+Se]=oe[0][Se]:Me[12+Se]=oe[1][Se],a(Me,Ae,Me),Le.model=Me;var Ie=(Se+1)%3,Be=(Se+2)%3,ce=G(S),Te=G(T);ce[Ie]=1,Te[Be]=1;var ye=h(0,0,0,I(E,ce)),Pe=h(0,0,0,I(C,Te));if(Math.abs(ye[1])>Math.abs(Pe[1])){var Re=ye;ye=Pe,Pe=Re,Re=ce,ce=Te,Te=Re;var ze=Ie;Ie=Be,Be=ze}ye[0]<0&&(ce[Ie]=-1),Pe[1]>0&&(Te[Be]=-1);var He=0,We=0;for(be=0;be<4;++be)He+=Math.pow(Ae[4*Ie+be],2),We+=Math.pow(Ae[4*Be+be],2);ce[Ie]/=Math.sqrt(He),Te[Be]/=Math.sqrt(We),Le.axes[0]=ce,Le.axes[1]=Te,Le.fragClipBounds[0]=H(O,fe[0],Se,-1e8),Le.fragClipBounds[1]=H(O,fe[1],Se,1e8),ue.vao.bind(),ue.vao.draw(ve.TRIANGLES,ue.vertexCount),ue.lineWidth>0&&(ve.lineWidth(ue.lineWidth*de),ue.vao.draw(ve.LINES,ue.lineVertexCount,ue.vertexCount)),ue.vao.unbind()}}(te,Q,X,q),Z===Q.hasAlpha||J){W.bind();var re=W.uniforms;re.model=X.model||x,re.view=X.view||x,re.projection=X.projection||x,d[0]=2/ne.drawingBufferWidth,d[1]=2/ne.drawingBufferHeight,re.screenSize=d,re.highlightId=Q.highlightId,re.highlightScale=Q.highlightScale,re.fragClipBounds=N,re.clipBounds=Q.axes.bounds,re.opacity=Q.opacity,re.pickGroup=Q.pickId/255,re.pixelRatio=q,Q.vao.bind(),Q.vao.draw(ne.TRIANGLES,Q.vertexCount),Q.lineWidth>0&&(ne.lineWidth(Q.lineWidth*q),Q.vao.draw(ne.LINES,Q.lineVertexCount,Q.vertexCount)),Q.vao.unbind()}}function V(W,te,Q,X){var q;q=Array.isArray(W)?te<W.length?W[te]:void 0:W,q=c(q);var Z=!0;i(q)&&(q="",Z=!1);var J=p(q,Q,X);return{mesh:J[0],lines:J[1],bounds:J[2],visible:Z}}w.draw=function(W){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,W,this.pixelRatio,!1,!1)},w.drawTransparent=function(W){F(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,W,this.pixelRatio,!0,!1)},w.drawPick=function(W){F(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,W,1,!0,!0)},w.pick=function(W){if(!W||W.id!==this.pickId)return null;var te=W.value[2]+(W.value[1]<<8)+(W.value[0]<<16);if(te>=this.pointCount||te<0)return null;var Q=this.points[te],X=this._selectResult;X.index=te;for(var q=0;q<3;++q)X.position[q]=X.dataCoordinate[q]=Q[q];return X},w.highlight=function(W){if(W){var te=W.index,Q=255&te,X=te>>8&255,q=te>>16&255;this.highlightId=[Q/255,X/255,q/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(W){if("perspective"in(W=W||{})&&(this.useOrtho=!W.perspective),"orthographic"in W&&(this.useOrtho=!!W.orthographic),"lineWidth"in W&&(this.lineWidth=W.lineWidth),"project"in W)if(Array.isArray(W.project))this.axesProject=W.project;else{var te=!!W.project;this.axesProject=[te,te,te]}if("projectScale"in W)if(Array.isArray(W.projectScale))this.projectScale=W.projectScale.slice();else{var Q=+W.projectScale;this.projectScale=[Q,Q,Q]}if(this.projectHasAlpha=!1,"projectOpacity"in W){Array.isArray(W.projectOpacity)?this.projectOpacity=W.projectOpacity.slice():(Q=+W.projectOpacity,this.projectOpacity=[Q,Q,Q]);for(var X=0;X<3;++X)this.projectOpacity[X]=v(this.projectOpacity[X]),this.projectOpacity[X]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in W&&(this.opacity=v(W.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var q,Z,J=W.position,ne=W.font||"normal",re=W.alignment||[0,0];if(re.length===2)q=re[0],Z=re[1];else for(q=[],Z=[],X=0;X<re.length;++X)q[X]=re[X][0],Z[X]=re[X][1];var ae=[1/0,1/0,1/0],ue=[-1/0,-1/0,-1/0],he=W.glyph,de=W.color,xe=W.size,me=W.angle,ve=W.lineColor,Le=-1,Ae=0,we=0,se=0;if(J.length){se=J.length;e:for(X=0;X<se;++X){for(var oe=J[X],fe=0;fe<3;++fe)if(isNaN(oe[fe])||!isFinite(oe[fe]))continue e;var Se=(lt=V(he,X,ne,this.pixelRatio)).mesh,Me=lt.lines,be=lt.bounds;Ae+=3*Se.cells.length,we+=2*Me.edges.length}}var Ie=Ae+we,Be=s.mallocFloat(3*Ie),ce=s.mallocFloat(4*Ie),Te=s.mallocFloat(2*Ie),ye=s.mallocUint32(Ie);if(Ie>0){var Pe=0,Re=Ae,ze=[0,0,0,1],He=[0,0,0,1],We=Array.isArray(de)&&Array.isArray(de[0]),Je=Array.isArray(ve)&&Array.isArray(ve[0]);e:for(X=0;X<se;++X){for(Le+=1,oe=J[X],fe=0;fe<3;++fe){if(isNaN(oe[fe])||!isFinite(oe[fe]))continue e;ue[fe]=Math.max(ue[fe],oe[fe]),ae[fe]=Math.min(ae[fe],oe[fe])}Se=(lt=V(he,X,ne,this.pixelRatio)).mesh,Me=lt.lines,be=lt.bounds;var lt,et=lt.visible;if(et)if(Array.isArray(de)){if((yt=We?X<de.length?de[X]:[0,0,0,0]:de).length===3){for(fe=0;fe<3;++fe)ze[fe]=yt[fe];ze[3]=1}else if(yt.length===4){for(fe=0;fe<4;++fe)ze[fe]=yt[fe];!this.hasAlpha&&yt[3]<1&&(this.hasAlpha=!0)}}else ze[0]=ze[1]=ze[2]=0,ze[3]=1;else ze=[1,1,1,0];if(et)if(Array.isArray(ve)){var yt;if((yt=Je?X<ve.length?ve[X]:[0,0,0,0]:ve).length===3){for(fe=0;fe<3;++fe)He[fe]=yt[fe];He[fe]=1}else if(yt.length===4){for(fe=0;fe<4;++fe)He[fe]=yt[fe];!this.hasAlpha&&yt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];var _t=.5;et?Array.isArray(xe)?_t=X<xe.length?+xe[X]:12:xe?_t=+xe:this.useOrtho&&(_t=12):_t=0;var xt=0;Array.isArray(me)?xt=X<me.length?+me[X]:0:me&&(xt=+me);var at=Math.cos(xt),ot=Math.sin(xt);for(oe=J[X],fe=0;fe<3;++fe)ue[fe]=Math.max(ue[fe],oe[fe]),ae[fe]=Math.min(ae[fe],oe[fe]);var At=q,Ct=Z;At=0,Array.isArray(q)?At=X<q.length?q[X]:0:q&&(At=q),Ct=0,Array.isArray(Z)?Ct=X<Z.length?Z[X]:0:Z&&(Ct=Z);var zt=[At*=At>0?1-be[0][0]:At<0?1+be[1][0]:1,Ct*=Ct>0?1-be[0][1]:Ct<0?1+be[1][1]:1],St=Se.cells||[],qe=Se.positions||[];for(fe=0;fe<St.length;++fe)for(var Xe=St[fe],Ve=0;Ve<3;++Ve){for(var Ze=0;Ze<3;++Ze)Be[3*Pe+Ze]=oe[Ze];for(Ze=0;Ze<4;++Ze)ce[4*Pe+Ze]=ze[Ze];ye[Pe]=Le;var st=qe[Xe[Ve]];Te[2*Pe]=_t*(at*st[0]-ot*st[1]+zt[0]),Te[2*Pe+1]=_t*(ot*st[0]+at*st[1]+zt[1]),Pe+=1}for(St=Me.edges,qe=Me.positions,fe=0;fe<St.length;++fe)for(Xe=St[fe],Ve=0;Ve<2;++Ve){for(Ze=0;Ze<3;++Ze)Be[3*Re+Ze]=oe[Ze];for(Ze=0;Ze<4;++Ze)ce[4*Re+Ze]=He[Ze];ye[Re]=Le,st=qe[Xe[Ve]],Te[2*Re]=_t*(at*st[0]-ot*st[1]+zt[0]),Te[2*Re+1]=_t*(ot*st[0]+at*st[1]+zt[1]),Re+=1}}}this.bounds=[ae,ue],this.points=J,this.pointCount=J.length,this.vertexCount=Ae,this.lineVertexCount=we,this.pointBuffer.update(Be),this.colorBuffer.update(ce),this.glyphBuffer.update(Te),this.idBuffer.update(ye),s.free(Be),s.free(ce),s.free(Te),s.free(ye)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},1884:function(f,o,e){var i=e(6832);o.boxVertex=i([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),o.boxFragment=i([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},6623:function(f,o,e){var i=e(5158),r=e(5827),n=e(1884);function s(u,p,c){this.plot=u,this.boxBuffer=p,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}f.exports=function(u,p){var c=u.gl,x=new s(u,r(c,[0,0,0,1,1,0,1,1]),i(c,n.boxVertex,n.boxFragment));return x.update(p),u.addOverlay(x),x};var a=s.prototype;a.draw=function(){if(this.enabled){var u=this.plot,p=this.selectBox,c=this.borderWidth,x=(this.innerFill,this.innerColor),g=(this.outerFill,this.outerColor),h=this.borderColor,b=u.box,v=u.screenBox,y=u.dataBox,w=u.viewBox,d=u.pixelRatio,S=(p[0]-y[0])*(w[2]-w[0])/(y[2]-y[0])+w[0],T=(p[1]-y[1])*(w[3]-w[1])/(y[3]-y[1])+w[1],E=(p[2]-y[0])*(w[2]-w[0])/(y[2]-y[0])+w[0],C=(p[3]-y[1])*(w[3]-w[1])/(y[3]-y[1])+w[1];if(S=Math.max(S,w[0]),T=Math.max(T,w[1]),E=Math.min(E,w[2]),C=Math.min(C,w[3]),!(E<S||C<T)){b.bind();var L=v[2]-v[0],O=v[3]-v[1];if(this.outerFill&&(b.drawBox(0,0,L,T,g),b.drawBox(0,T,S,C,g),b.drawBox(0,C,L,O,g),b.drawBox(E,T,L,C,g)),this.innerFill&&b.drawBox(S,T,E,C,x),c>0){var z=c*d;b.drawBox(S-z,T-z,E+z,T+z,h),b.drawBox(S-z,C-z,E+z,C+z,h),b.drawBox(S-z,T-z,S+z,C+z,h),b.drawBox(E-z,T-z,E+z,C+z,h)}}}},a.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},a.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},2611:function(f,o,e){f.exports=function(c,x){var g=x[0],h=x[1];return new u(c,i(c,g,h,{}),r.mallocUint8(g*h*4))};var i=e(4234),r=e(5306),n=e(5050),s=e(2288).nextPow2;function a(c,x,g,h,b){this.coord=[c,x],this.id=g,this.value=h,this.distance=b}function u(c,x,g){this.gl=c,this.fbo=x,this.buffer=g,this._readTimeout=null;var h=this;this._readCallback=function(){h.gl&&(x.bind(),c.readPixels(0,0,x.shape[0],x.shape[1],c.RGBA,c.UNSIGNED_BYTE,h.buffer),h._readTimeout=null)}}var p=u.prototype;Object.defineProperty(p,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var x=this.fbo.shape[0],g=this.fbo.shape[1];if(g*x*4>this.buffer.length){r.free(this.buffer);for(var h=this.buffer=r.mallocUint8(s(g*x*4)),b=0;b<g*x*4;++b)h[b]=255}return c}}}),p.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},p.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},p.query=function(c,x,g){if(!this.gl)return null;var h=this.fbo.shape.slice();c|=0,x|=0,typeof g!="number"&&(g=1);var b=0|Math.min(Math.max(c-g,0),h[0]),v=0|Math.min(Math.max(c+g,0),h[0]),y=0|Math.min(Math.max(x-g,0),h[1]),w=0|Math.min(Math.max(x+g,0),h[1]);if(v<=b||w<=y)return null;var d=[v-b,w-y],S=n(this.buffer,[d[0],d[1],4],[4,4*h[0],1],4*(b+h[0]*y)),T=function(L,O,z){for(var G=1e8,I=-1,H=-1,N=L.shape[0],F=L.shape[1],V=0;V<N;V++)for(var W=0;W<F;W++){var te=L.get(V,W,0),Q=L.get(V,W,1),X=L.get(V,W,2),q=L.get(V,W,3);if(te<255||Q<255||X<255||q<255){var Z=O-V,J=z-W,ne=Z*Z+J*J;ne<G&&(G=ne,I=V,H=W)}}return[I,H,G]}(S.hi(d[0],d[1],1),g,g),E=T[0],C=T[1];return E<0||Math.pow(this.radius,2)<T[2]?null:new a(E+b|0,C+y|0,S.get(E,C,0),[S.get(E,C,1),S.get(E,C,2),S.get(E,C,3)],Math.sqrt(T[2]))},p.dispose=function(){this.gl&&(this.fbo.dispose(),r.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},5158:function(f,o,e){var i=e(9016),r=e(4280),n=e(3984),s=e(1628),a=e(2631),u=e(9068);function p(g){this.gl=g,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=p.prototype;function x(g,h){return g.name<h.name?-1:1}c.bind=function(){var g;this.program||this._relink();var h=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),b=this.gl.lastAttribCount;if(h>b)for(g=b;g<h;g++)this.gl.enableVertexAttribArray(g);else if(b>h)for(g=h;g<b;g++)this.gl.disableVertexAttribArray(g);this.gl.lastAttribCount=h,this.gl.useProgram(this.program)},c.dispose=function(){for(var g=this.gl.lastAttribCount,h=0;h<g;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(g,h,b,v){if(!h||arguments.length===1){var y=g;g=y.vertex,h=y.fragment,b=y.uniforms,v=y.attributes}var w=this,d=w.gl,S=w._vref;w._vref=s.shader(d,d.VERTEX_SHADER,g),S&&S.dispose(),w.vertShader=w._vref.shader;var T=this._fref;if(w._fref=s.shader(d,d.FRAGMENT_SHADER,h),T&&T.dispose(),w.fragShader=w._fref.shader,!b||!v){var E=d.createProgram();if(d.attachShader(E,w.fragShader),d.attachShader(E,w.vertShader),d.linkProgram(E),!d.getProgramParameter(E,d.LINK_STATUS)){var C=d.getProgramInfoLog(E);throw new u(C,"Error linking program:"+C)}b=b||a.uniforms(d,E),v=v||a.attributes(d,E),d.deleteProgram(E)}(v=v.slice()).sort(x);var L,O=[],z=[],G=[];for(L=0;L<v.length;++L){var I=v[L];if(I.type.indexOf("mat")>=0){for(var H=0|I.type.charAt(I.type.length-1),N=new Array(H),F=0;F<H;++F)N[F]=G.length,z.push(I.name+"["+F+"]"),typeof I.location=="number"?G.push(I.location+F):Array.isArray(I.location)&&I.location.length===H&&typeof I.location[F]=="number"?G.push(0|I.location[F]):G.push(-1);O.push({name:I.name,type:I.type,locations:N})}else O.push({name:I.name,type:I.type,locations:[G.length]}),z.push(I.name),typeof I.location=="number"?G.push(0|I.location):G.push(-1)}var V=0;for(L=0;L<G.length;++L)if(G[L]<0){for(;G.indexOf(V)>=0;)V+=1;G[L]=V}var W=new Array(b.length);function te(){w.program=s.program(d,w._vref,w._fref,z,G);for(var Q=0;Q<b.length;++Q)W[Q]=d.getUniformLocation(w.program,b[Q].name)}te(),w._relink=te,w.types={uniforms:n(b),attributes:n(v)},w.attributes=r(d,w,O,G),Object.defineProperty(w,"uniforms",i(d,w,b,W))},f.exports=function(g,h,b,v,y){var w=new p(g);return w.update(h,b,v,y),w}},9068:function(f){function o(e,i,r){this.shortMessage=i||"",this.longMessage=r||"",this.rawError=e||"",this.message="gl-shader: "+(i||e||"")+(r?`
`+r:""),this.stack=new Error().stack}o.prototype=new Error,o.prototype.name="GLError",o.prototype.constructor=o,f.exports=o},4280:function(f,o,e){f.exports=function(p,c,x,g){for(var h={},b=0,v=x.length;b<v;++b){var y=x[b],w=y.name,d=y.type,S=y.locations;switch(d){case"bool":case"int":case"float":a(p,c,S[0],g,1,h,w);break;default:if(d.indexOf("vec")>=0){if((T=d.charCodeAt(d.length-1)-48)<2||T>4)throw new i("","Invalid data type for attribute "+w+": "+d);a(p,c,S[0],g,T,h,w)}else{if(!(d.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+w+": "+d);var T;if((T=d.charCodeAt(d.length-1)-48)<2||T>4)throw new i("","Invalid data type for attribute "+w+": "+d);u(p,c,S,g,T,h,w)}}}return h};var i=e(9068);function r(p,c,x,g,h,b){this._gl=p,this._wrapper=c,this._index=x,this._locations=g,this._dimension=h,this._constFunc=b}var n=r.prototype;n.pointer=function(p,c,x,g){var h=this,b=h._gl,v=h._locations[h._index];b.vertexAttribPointer(v,h._dimension,p||b.FLOAT,!!c,x||0,g||0),b.enableVertexAttribArray(v)},n.set=function(p,c,x,g){return this._constFunc(this._locations[this._index],p,c,x,g)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(p){return p!==this._locations[this._index]&&(this._locations[this._index]=0|p,this._wrapper.program=null),0|p}});var s=[function(p,c,x){return x.length===void 0?p.vertexAttrib1f(c,x):p.vertexAttrib1fv(c,x)},function(p,c,x,g){return x.length===void 0?p.vertexAttrib2f(c,x,g):p.vertexAttrib2fv(c,x)},function(p,c,x,g,h){return x.length===void 0?p.vertexAttrib3f(c,x,g,h):p.vertexAttrib3fv(c,x)},function(p,c,x,g,h,b){return x.length===void 0?p.vertexAttrib4f(c,x,g,h,b):p.vertexAttrib4fv(c,x)}];function a(p,c,x,g,h,b,v){var y=s[h],w=new r(p,c,x,g,h,y);Object.defineProperty(b,v,{set:function(d){return p.disableVertexAttribArray(g[x]),y(p,g[x],d),d},get:function(){return w},enumerable:!0})}function u(p,c,x,g,h,b,v){for(var y=new Array(h),w=new Array(h),d=0;d<h;++d)a(p,c,x[d],g,h,y,d),w[d]=y[d];Object.defineProperty(y,"location",{set:function(E){if(Array.isArray(E))for(var C=0;C<h;++C)w[C].location=E[C];else for(C=0;C<h;++C)w[C].location=E+C;return E},get:function(){for(var E=new Array(h),C=0;C<h;++C)E[C]=g[x[C]];return E},enumerable:!0}),y.pointer=function(E,C,L,O){E=E||p.FLOAT,C=!!C,L=L||h*h,O=O||0;for(var z=0;z<h;++z){var G=g[x[z]];p.vertexAttribPointer(G,h,E,C,L,O+z*h),p.enableVertexAttribArray(G)}};var S=new Array(h),T=p["vertexAttrib"+h+"fv"];Object.defineProperty(b,v,{set:function(E){for(var C=0;C<h;++C){var L=g[x[C]];if(p.disableVertexAttribArray(L),Array.isArray(E[0]))T.call(p,L,E[C]);else{for(var O=0;O<h;++O)S[O]=E[h*C+O];T.call(p,L,S)}}return E},get:function(){return y},enumerable:!0})}},9016:function(f,o,e){var i=e(3984),r=e(9068);function n(a){return function(){return a}}function s(a,u){for(var p=new Array(a),c=0;c<a;++c)p[c]=u;return p}f.exports=function(a,u,p,c){function x(y){return function(w){for(var d=g("",y),S=0;S<d.length;++S){var T=d[S],E=T[0],C=T[1];if(c[C]){var L=w;if(typeof E=="string"&&(E.indexOf(".")===0||E.indexOf("[")===0)){var O=E;if(E.indexOf(".")===0&&(O=E.slice(1)),O.indexOf("]")===O.length-1){var z=O.indexOf("["),G=O.slice(0,z),I=O.slice(z+1,O.length-1);L=G?w[G][I]:w[I]}else L=w[O]}var H,N=p[C].type;switch(N){case"bool":case"int":case"sampler2D":case"samplerCube":a.uniform1i(c[C],L);break;case"float":a.uniform1f(c[C],L);break;default:var F=N.indexOf("vec");if(!(0<=F&&F<=1&&N.length===4+F)){if(N.indexOf("mat")===0&&N.length===4){if((H=N.charCodeAt(N.length-1)-48)<2||H>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+N);a["uniformMatrix"+H+"fv"](c[C],!1,L);break}throw new r("","Unknown uniform data type for "+name+": "+N)}if((H=N.charCodeAt(N.length-1)-48)<2||H>4)throw new r("","Invalid data type");switch(N.charAt(0)){case"b":case"i":a["uniform"+H+"iv"](c[C],L);break;case"v":a["uniform"+H+"fv"](c[C],L);break;default:throw new r("","Unrecognized data type for vector "+name+": "+N)}}}}}}function g(y,w){if(typeof w!="object")return[[y,w]];var d=[];for(var S in w){var T=w[S],E=y;parseInt(S)+""===S?E+="["+S+"]":E+="."+S,typeof T=="object"?d.push.apply(d,g(E,T)):d.push([E,T])}return d}function h(y,w,d){if(typeof d=="object"){var S=b(d);Object.defineProperty(y,w,{get:n(S),set:x(d),enumerable:!0,configurable:!1})}else c[d]?Object.defineProperty(y,w,{get:(T=d,function(E,C,L){return E.getUniform(C.program,L[T])}),set:x(d),enumerable:!0,configurable:!1}):y[w]=function(E){switch(E){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var C=E.indexOf("vec");if(0<=C&&C<=1&&E.length===4+C){if((L=E.charCodeAt(E.length-1)-48)<2||L>4)throw new r("","Invalid data type");return E.charAt(0)==="b"?s(L,!1):s(L,0)}if(E.indexOf("mat")===0&&E.length===4){var L;if((L=E.charCodeAt(E.length-1)-48)<2||L>4)throw new r("","Invalid uniform dimension type for matrix "+name+": "+E);return s(L*L,0)}throw new r("","Unknown uniform data type for "+name+": "+E)}}(p[d].type);var T}function b(y){var w;if(Array.isArray(y)){w=new Array(y.length);for(var d=0;d<y.length;++d)h(w,d,y[d])}else for(var S in w={},y)h(w,S,y[S]);return w}var v=i(p,!0);return{get:n(b(v)),set:x(v),enumerable:!0,configurable:!0}}},3984:function(f){f.exports=function(o,e){for(var i={},r=0;r<o.length;++r)for(var n=o[r].name.split("."),s=i,a=0;a<n.length;++a){var u=n[a].split("[");if(u.length>1){u[0]in s||(s[u[0]]=[]),s=s[u[0]];for(var p=1;p<u.length;++p){var c=parseInt(u[p]);p<u.length-1||a<n.length-1?(c in s||(p<u.length-1?s[c]=[]:s[c]={}),s=s[c]):s[c]=e?r:o[r].type}}else a<n.length-1?(u[0]in s||(s[u[0]]={}),s=s[u[0]]):s[u[0]]=e?r:o[r].type}return i}},2631:function(f,o){o.uniforms=function(n,s){for(var a=n.getProgramParameter(s,n.ACTIVE_UNIFORMS),u=[],p=0;p<a;++p){var c=n.getActiveUniform(s,p);if(c){var x=r(n,c.type);if(c.size>1)for(var g=0;g<c.size;++g)u.push({name:c.name.replace("[0]","["+g+"]"),type:x});else u.push({name:c.name,type:x})}}return u},o.attributes=function(n,s){for(var a=n.getProgramParameter(s,n.ACTIVE_ATTRIBUTES),u=[],p=0;p<a;++p){var c=n.getActiveAttrib(s,p);c&&u.push({name:c.name,type:r(n,c.type)})}return u};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function r(n,s){if(!i){var a=Object.keys(e);i={};for(var u=0;u<a.length;++u){var p=a[u];i[n[p]]=e[p]}}return i[s]}},1628:function(f,o,e){o.shader=function(x,g,h){return c(x).getShaderReference(g,h)},o.program=function(x,g,h,b,v){return c(x).getProgram(g,h,b,v)};var i=e(9068),r=e(3530),n=new(typeof WeakMap>"u"?e(4037):WeakMap),s=0;function a(x,g,h,b,v,y,w){this.id=x,this.src=g,this.type=h,this.shader=b,this.count=y,this.programs=[],this.cache=w}function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}a.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,g=x.gl,h=this.programs,b=0,v=h.length;b<v;++b){var y=x.programs[h[b]];y&&(delete x.programs[b],g.deleteProgram(y))}g.deleteShader(this.shader),delete x.shaders[this.type===g.FRAGMENT_SHADER|0][this.src]}};var p=u.prototype;function c(x){var g=n.get(x);return g||(g=new u(x),n.set(x,g)),g}p.getShaderReference=function(x,g){var h=this.gl,b=this.shaders[x===h.FRAGMENT_SHADER|0],v=b[g];if(v&&h.isShader(v.shader))v.count+=1;else{var y=function(w,d,S){var T=w.createShader(d);if(w.shaderSource(T,S),w.compileShader(T),!w.getShaderParameter(T,w.COMPILE_STATUS)){var E=w.getShaderInfoLog(T);try{var C=r(E,S,d)}catch(L){throw console.warn("Failed to format compiler error: "+L),new i(E,`Error compiling shader:
`+E)}throw new i(E,C.short,C.long)}return T}(h,x,g);v=b[g]=new a(s++,g,x,y,[],1,this)}return v},p.getProgram=function(x,g,h,b){var v=[x.id,g.id,h.join(":"),b.join(":")].join("@"),y=this.programs[v];return y&&this.gl.isProgram(y)||(this.programs[v]=y=function(w,d,S,T,E){var C=w.createProgram();w.attachShader(C,d),w.attachShader(C,S);for(var L=0;L<T.length;++L)w.bindAttribLocation(C,E[L],T[L]);if(w.linkProgram(C),!w.getProgramParameter(C,w.LINK_STATUS)){var O=w.getProgramInfoLog(C);throw new i(O,"Error linking program: "+O)}return C}(this.gl,x.shader,g.shader,h,b),x.programs.push(v),g.programs.push(v)),y}},3050:function(f){function o(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}f.exports=function(i,r){var n=new o(i);return n.update(r),i.addOverlay(n),n};var e=o.prototype;e.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},e.draw=function(){var i=this.enable,r=this.width,n=this.color,s=this.center,a=this.plot,u=a.line,p=a.dataBox,c=a.viewBox;if(u.bind(),p[0]<=s[0]&&s[0]<=p[2]&&p[1]<=s[1]&&s[1]<=p[3]){var x=c[0]+(s[0]-p[0])/(p[2]-p[0])*(c[2]-c[0]),g=c[1]+(s[1]-p[1])/(p[3]-p[1])*(c[3]-c[1]);i[0]&&u.drawLine(x,g,c[0],g,r[0],n[0]),i[1]&&u.drawLine(x,g,x,c[1],r[1],n[1]),i[2]&&u.drawLine(x,g,c[2],g,r[2],n[2]),i[3]&&u.drawLine(x,g,x,c[3],r[3],n[3])}},e.dispose=function(){this.plot.removeOverlay(this)}},3540:function(f,o,e){var i=e(6832),r=e(5158),n=i([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),s=i([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);f.exports=function(a){return r(a,n,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},6496:function(f,o,e){var i=e(5827),r=e(2944),n=e(3540);f.exports=function(g,h){var b=[];function v(T,E,C,L,O,z){var G=[T,E,C,0,0,0,1];G[L+3]=1,G[L]=O,b.push.apply(b,G),G[6]=-1,b.push.apply(b,G),G[L]=z,b.push.apply(b,G),b.push.apply(b,G),G[6]=1,b.push.apply(b,G),G[L]=O,b.push.apply(b,G)}v(0,0,0,0,0,1),v(0,0,0,1,0,1),v(0,0,0,2,0,1),v(1,0,0,1,-1,1),v(1,0,0,2,-1,1),v(0,1,0,0,-1,1),v(0,1,0,2,-1,1),v(0,0,1,0,-1,1),v(0,0,1,1,-1,1);var y=i(g,b),w=r(g,[{type:g.FLOAT,buffer:y,size:3,offset:0,stride:28},{type:g.FLOAT,buffer:y,size:3,offset:12,stride:28},{type:g.FLOAT,buffer:y,size:1,offset:24,stride:28}]),d=n(g);d.attributes.position.location=0,d.attributes.color.location=1,d.attributes.weight.location=2;var S=new a(g,y,w,d);return S.update(h),S};var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(g,h,b,v){this.gl=g,this.buffer=h,this.vao=b,this.shader=v,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=a.prototype,p=[0,0,0],c=[0,0,0],x=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(g){},u.draw=function(g){var h=this.gl,b=this.vao,v=this.shader;b.bind(),v.bind();var y,w=g.model||s,d=g.view||s,S=g.projection||s;this.axes&&(y=this.axes.lastCubeProps.axis);for(var T=p,E=c,C=0;C<3;++C)y&&y[C]<0?(T[C]=this.bounds[0][C],E[C]=this.bounds[1][C]):(T[C]=this.bounds[1][C],E[C]=this.bounds[0][C]);for(x[0]=h.drawingBufferWidth,x[1]=h.drawingBufferHeight,v.uniforms.model=w,v.uniforms.view=d,v.uniforms.projection=S,v.uniforms.coordinates=[this.position,T,E],v.uniforms.colors=this.colors,v.uniforms.screenShape=x,C=0;C<3;++C)v.uniforms.lineWidth=this.lineWidth[C]*this.pixelRatio,this.enabled[C]&&(b.draw(h.TRIANGLES,6,6*C),this.drawSides[C]&&b.draw(h.TRIANGLES,12,18+12*C));b.unbind()},u.update=function(g){g&&("bounds"in g&&(this.bounds=g.bounds),"position"in g&&(this.position=g.position),"lineWidth"in g&&(this.lineWidth=g.lineWidth),"colors"in g&&(this.colors=g.colors),"enabled"in g&&(this.enabled=g.enabled),"drawSides"in g&&(this.drawSides=g.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},9578:function(f,o,e){var i=e(6832),r=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=i([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),s=i([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);o.meshShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},o.pickShader={vertex:s,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7307:function(f,o,e){var i=e(2858),r=e(4020),n=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(x,g){var h,b=x.length;for(h=0;h<b;h++){var v=x[h];if(v===g)return h;if(v>g)return h-1}return h},a=function(x,g,h){return x<g?g:x>h?h:x},u=function(x){var g=1/0;x.sort(function(y,w){return y-w});for(var h=x.length,b=1;b<h;b++){var v=Math.abs(x[b]-x[b-1]);v<g&&(g=v)}return g};f.exports=function(x,g){var h=x.startingPositions,b=x.maxLength||1e3,v=x.tubeSize||1,y=x.absoluteTubeSize,w=x.gridFill||"+x+y+z",d={};w.indexOf("-x")!==-1&&(d.reversedX=!0),w.indexOf("-y")!==-1&&(d.reversedY=!0),w.indexOf("-z")!==-1&&(d.reversedZ=!0),d.filled=n.indexOf(w.replace(/-/g,"").replace(/\+/g,""));var S=x.getVelocity||function(ve){return function(Le,Ae,we){var se=Ae.vectors,oe=Ae.meshgrid,fe=Le[0],Se=Le[1],Me=Le[2],be=oe[0].length,Ie=oe[1].length,Be=oe[2].length,ce=s(oe[0],fe),Te=s(oe[1],Se),ye=s(oe[2],Me),Pe=ce+1,Re=Te+1,ze=ye+1;if(ce=a(ce,0,be-1),Pe=a(Pe,0,be-1),Te=a(Te,0,Ie-1),Re=a(Re,0,Ie-1),ye=a(ye,0,Be-1),ze=a(ze,0,Be-1),ce<0||Te<0||ye<0||Pe>be-1||Re>Ie-1||ze>Be-1)return i.create();var He,We,Je,lt,et,yt,_t=oe[0][ce],xt=oe[0][Pe],at=oe[1][Te],ot=oe[1][Re],At=oe[2][ye],Ct=(fe-_t)/(xt-_t),zt=(Se-at)/(ot-at),St=(Me-At)/(oe[2][ze]-At);switch(isFinite(Ct)||(Ct=.5),isFinite(zt)||(zt=.5),isFinite(St)||(St=.5),we.reversedX&&(ce=be-1-ce,Pe=be-1-Pe),we.reversedY&&(Te=Ie-1-Te,Re=Ie-1-Re),we.reversedZ&&(ye=Be-1-ye,ze=Be-1-ze),we.filled){case 5:et=ye,yt=ze,Je=Te*Be,lt=Re*Be,He=ce*Be*Ie,We=Pe*Be*Ie;break;case 4:et=ye,yt=ze,He=ce*Be,We=Pe*Be,Je=Te*Be*be,lt=Re*Be*be;break;case 3:Je=Te,lt=Re,et=ye*Ie,yt=ze*Ie,He=ce*Ie*Be,We=Pe*Ie*Be;break;case 2:Je=Te,lt=Re,He=ce*Ie,We=Pe*Ie,et=ye*Ie*be,yt=ze*Ie*be;break;case 1:He=ce,We=Pe,et=ye*be,yt=ze*be,Je=Te*be*Be,lt=Re*be*Be;break;default:He=ce,We=Pe,Je=Te*be,lt=Re*be,et=ye*be*Ie,yt=ze*be*Ie}var qe=se[He+Je+et],Xe=se[He+Je+yt],Ve=se[He+lt+et],Ze=se[He+lt+yt],st=se[We+Je+et],nt=se[We+Je+yt],De=se[We+lt+et],Fe=se[We+lt+yt],rt=i.create(),tt=i.create(),gt=i.create(),dt=i.create();i.lerp(rt,qe,st,Ct),i.lerp(tt,Xe,nt,Ct),i.lerp(gt,Ve,De,Ct),i.lerp(dt,Ze,Fe,Ct);var mt=i.create(),ft=i.create();i.lerp(mt,rt,gt,zt),i.lerp(ft,tt,dt,zt);var kt=i.create();return i.lerp(kt,mt,ft,St),kt}(ve,x,d)},T=x.getDivergence||function(ve,Le){var Ae=i.create(),we=1e-4;i.add(Ae,ve,[we,0,0]);var se=S(Ae);i.subtract(se,se,Le),i.scale(se,se,1/we),i.add(Ae,ve,[0,we,0]);var oe=S(Ae);i.subtract(oe,oe,Le),i.scale(oe,oe,1/we),i.add(Ae,ve,[0,0,we]);var fe=S(Ae);return i.subtract(fe,fe,Le),i.scale(fe,fe,1/we),i.add(Ae,se,oe),i.add(Ae,Ae,fe),Ae},E=[],C=g[0][0],L=g[0][1],O=g[0][2],z=g[1][0],G=g[1][1],I=g[1][2],H=function(ve){var Le=ve[0],Ae=ve[1],we=ve[2];return!(Le<C||Le>z||Ae<L||Ae>G||we<O||we>I)},N=10*i.distance(g[0],g[1])/b,F=N*N,V=1,W=0,te=h.length;te>1&&(V=function(ve){for(var Le=[],Ae=[],we=[],se={},oe={},fe={},Se=ve.length,Me=0;Me<Se;Me++){var be=ve[Me],Ie=be[0],Be=be[1],ce=be[2];se[Ie]||(Le.push(Ie),se[Ie]=!0),oe[Be]||(Ae.push(Be),oe[Be]=!0),fe[ce]||(we.push(ce),fe[ce]=!0)}var Te=u(Le),ye=u(Ae),Pe=u(we),Re=Math.min(Te,ye,Pe);return isFinite(Re)?Re:1}(h));for(var Q=0;Q<te;Q++){var X=i.create();i.copy(X,h[Q]);var q=[X],Z=[],J=S(X),ne=X;Z.push(J);var re=[],ae=T(X,J),ue=i.length(ae);isFinite(ue)&&ue>W&&(W=ue),re.push(ue),E.push({points:q,velocities:Z,divergences:re});for(var he=0;he<100*b&&q.length<b&&H(X);){he++;var de=i.clone(J),xe=i.squaredLength(de);if(xe===0)break;xe>F&&i.scale(de,de,N/Math.sqrt(xe)),i.add(de,de,X),J=S(de),i.squaredDistance(ne,de)-F>-1e-4*F&&(q.push(de),ne=de,Z.push(J),ae=T(de,J),ue=i.length(ae),isFinite(ue)&&ue>W&&(W=ue),re.push(ue)),X=de}}var me=function(ve,Le,Ae,we){for(var se=0,oe=0;oe<ve.length;oe++)for(var fe=ve[oe].velocities,Se=0;Se<fe.length;Se++)se=Math.max(se,i.length(fe[Se]));var Me=ve.map(function(He){return function(We,Je,lt,et){for(var yt=We.points,_t=We.velocities,xt=We.divergences,at=[],ot=[],At=[],Ct=[],zt=[],St=[],qe=0,Xe=0,Ve=r.create(),Ze=r.create(),st=0;st<yt.length;st++){var nt=yt[st],De=_t[st],Fe=xt[st];Je===0&&(Fe=.05*lt),Xe=i.length(De)/et,Ve=r.create(),i.copy(Ve,De),Ve[3]=Fe;for(var rt=0;rt<8;rt++)zt[rt]=[nt[0],nt[1],nt[2],rt];if(Ct.length>0)for(rt=0;rt<8;rt++){var tt=(rt+1)%8;at.push(Ct[rt],zt[rt],zt[tt],zt[tt],Ct[tt],Ct[rt]),At.push(Ze,Ve,Ve,Ve,Ze,Ze),St.push(qe,Xe,Xe,Xe,qe,qe);var gt=at.length;ot.push([gt-6,gt-5,gt-4],[gt-3,gt-2,gt-1])}var dt=Ct;Ct=zt,zt=dt;var mt=Ze;Ze=Ve,Ve=mt;var ft=qe;qe=Xe,Xe=ft}return{positions:at,cells:ot,vectors:At,vertexIntensity:St}}(He,Ae,we,se)}),be=[],Ie=[],Be=[],ce=[];for(oe=0;oe<Me.length;oe++){var Te=Me[oe],ye=be.length;for(be=be.concat(Te.positions),Be=Be.concat(Te.vectors),ce=ce.concat(Te.vertexIntensity),Se=0;Se<Te.cells.length;Se++){var Pe=Te.cells[Se],Re=[];Ie.push(Re);for(var ze=0;ze<Pe.length;ze++)Re.push(Pe[ze]+ye)}}return{positions:be,cells:Ie,vectors:Be,vertexIntensity:ce,colormap:Le}}(E,x.colormap,W,V);return y?me.tubeScale=y:(W===0&&(W=1),me.tubeScale=.5*v*V/W),me};var p=e(9578),c=e(1140).createMesh;f.exports.createTubeMesh=function(x,g){return c(x,g,{shaders:p,traceType:"streamtube"})}},9054:function(f,o,e){var i=e(5158),r=e(6832),n=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),s=r([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color  in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),a=r([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=r([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);o.createShader=function(p){var c=i(p,n,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},o.createPickShader=function(p){var c=i(p,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c.attributes.normal.location=2,c},o.createContourShader=function(p){var c=i(p,a,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c},o.createPickContourShader=function(p){var c=i(p,a,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return c.attributes.uv.location=0,c.attributes.f.location=1,c}},3754:function(f,o,e){f.exports=function(ae){var ue=ae.gl,he=d(ue),de=T(ue),xe=S(ue),me=E(ue),ve=r(ue),Le=n(ue,[{buffer:ve,size:4,stride:C,offset:0},{buffer:ve,size:3,stride:C,offset:16},{buffer:ve,size:3,stride:C,offset:28}]),Ae=r(ue),we=n(ue,[{buffer:Ae,size:4,stride:20,offset:0},{buffer:Ae,size:1,stride:20,offset:16}]),se=r(ue),oe=n(ue,[{buffer:se,size:2,type:ue.FLOAT}]),fe=s(ue,1,I,ue.RGBA,ue.UNSIGNED_BYTE);fe.minFilter=ue.LINEAR,fe.magFilter=ue.LINEAR;var Se=new H(ue,[0,0],[[0,0,0],[0,0,0]],he,de,ve,Le,fe,xe,me,Ae,we,se,oe,[0,0,0]),Me={levels:[[],[],[]]};for(var be in ae)Me[be]=ae[be];return Me.colormap=Me.colormap||"jet",Se.update(Me),Se};var i=e(2288),r=e(5827),n=e(2944),s=e(8931),a=e(5306),u=e(9156),p=e(7498),c=e(7382),x=e(5050),g=e(4162),h=e(104),b=e(7437),v=e(5070),y=e(9144),w=e(9054),d=w.createShader,S=w.createContourShader,T=w.createPickShader,E=w.createPickContourShader,C=40,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],O=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],z=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function G(ae,ue,he,de,xe){this.position=ae,this.index=ue,this.uv=he,this.level=de,this.dataCoordinate=xe}(function(){for(var ae=0;ae<3;++ae){var ue=z[ae],he=(ae+2)%3;ue[(ae+1)%3+0]=1,ue[he+3]=1,ue[ae+6]=1}})();var I=256;function H(ae,ue,he,de,xe,me,ve,Le,Ae,we,se,oe,fe,Se,Me){this.gl=ae,this.shape=ue,this.bounds=he,this.objectOffset=Me,this.intensityBounds=[],this._shader=de,this._pickShader=xe,this._coordinateBuffer=me,this._vao=ve,this._colorMap=Le,this._contourShader=Ae,this._contourPickShader=we,this._contourBuffer=se,this._contourVAO=oe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new G([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=fe,this._dynamicVAO=Se,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[x(a.mallocFloat(1024),[0,0]),x(a.mallocFloat(1024),[0,0]),x(a.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var N=H.prototype;N.genColormap=function(ae,ue){var he=!1,de=c([u({colormap:ae,nshades:I,format:"rgba"}).map(function(xe,me){var ve=ue?function(Le,Ae){if(!Ae||!Ae.length)return 1;for(var we=0;we<Ae.length;++we){if(Ae.length<2)return 1;if(Ae[we][0]===Le)return Ae[we][1];if(Ae[we][0]>Le&&we>0){var se=(Ae[we][0]-Le)/(Ae[we][0]-Ae[we-1][0]);return Ae[we][1]*(1-se)+se*Ae[we-1][1]}}return 1}(me/255,ue):xe[3];return ve<1&&(he=!0),[xe[0],xe[1],xe[2],255*ve]})]);return p.divseq(de,255),this.hasAlphaScale=he,de},N.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},N.isOpaque=function(){return!this.isTransparent()},N.pickSlots=1,N.setPickBase=function(ae){this.pickId=ae};var F=[0,0,0],V={showSurface:!1,showContour:!1,projections:[L.slice(),L.slice(),L.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function W(ae,ue){var he,de,xe,me=ue.axes&&ue.axes.lastCubeProps.axis||F,ve=ue.showSurface,Le=ue.showContour;for(he=0;he<3;++he)for(ve=ve||ue.surfaceProject[he],de=0;de<3;++de)Le=Le||ue.contourProject[he][de];for(he=0;he<3;++he){var Ae=V.projections[he];for(de=0;de<16;++de)Ae[de]=0;for(de=0;de<4;++de)Ae[5*de]=1;Ae[5*he]=0,Ae[12+he]=ue.axesBounds[+(me[he]>0)][he],h(Ae,ae.model,Ae);var we=V.clipBounds[he];for(xe=0;xe<2;++xe)for(de=0;de<3;++de)we[xe][de]=ae.clipBounds[xe][de];we[0][he]=-1e8,we[1][he]=1e8}return V.showSurface=ve,V.showContour=Le,V}var te={model:L,view:L,projection:L,inverseModel:L.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Q=L.slice(),X=[1,0,0,0,1,0,0,0,1];function q(ae,ue){ae=ae||{};var he=this.gl;he.disable(he.CULL_FACE),this._colorMap.bind(0);var de=te;de.model=ae.model||L,de.view=ae.view||L,de.projection=ae.projection||L,de.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],de.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],de.objectOffset=this.objectOffset,de.contourColor=this.contourColor[0],de.inverseModel=b(de.inverseModel,de.model);for(var xe=0;xe<2;++xe)for(var me=de.clipBounds[xe],ve=0;ve<3;++ve)me[ve]=Math.min(Math.max(this.clipBounds[xe][ve],-1e8),1e8);de.kambient=this.ambientLight,de.kdiffuse=this.diffuseLight,de.kspecular=this.specularLight,de.roughness=this.roughness,de.fresnel=this.fresnel,de.opacity=this.opacity,de.height=0,de.permutation=X,de.vertexColor=this.vertexColor;var Le=Q;for(h(Le,de.view,de.model),h(Le,de.projection,Le),b(Le,Le),xe=0;xe<3;++xe)de.eyePosition[xe]=Le[12+xe]/Le[15];var Ae=Le[15];for(xe=0;xe<3;++xe)Ae+=this.lightPosition[xe]*Le[4*xe+3];for(xe=0;xe<3;++xe){var we=Le[12+xe];for(ve=0;ve<3;++ve)we+=Le[4*ve+xe]*this.lightPosition[ve];de.lightPosition[xe]=we/Ae}var se=W(de,this);if(se.showSurface){for(this._shader.bind(),this._shader.uniforms=de,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(he.TRIANGLES,this._vertexCount),xe=0;xe<3;++xe)this.surfaceProject[xe]&&this.vertexCount&&(this._shader.uniforms.model=se.projections[xe],this._shader.uniforms.clipBounds=se.clipBounds[xe],this._vao.draw(he.TRIANGLES,this._vertexCount));this._vao.unbind()}if(se.showContour){var oe=this._contourShader;de.kambient=1,de.kdiffuse=0,de.kspecular=0,de.opacity=1,oe.bind(),oe.uniforms=de;var fe=this._contourVAO;for(fe.bind(),xe=0;xe<3;++xe)for(oe.uniforms.permutation=z[xe],he.lineWidth(this.contourWidth[xe]*this.pixelRatio),ve=0;ve<this.contourLevels[xe].length;++ve)ve===this.highlightLevel[xe]?(oe.uniforms.contourColor=this.highlightColor[xe],oe.uniforms.contourTint=this.highlightTint[xe]):ve!==0&&ve-1!==this.highlightLevel[xe]||(oe.uniforms.contourColor=this.contourColor[xe],oe.uniforms.contourTint=this.contourTint[xe]),this._contourCounts[xe][ve]&&(oe.uniforms.height=this.contourLevels[xe][ve],fe.draw(he.LINES,this._contourCounts[xe][ve],this._contourOffsets[xe][ve]));for(xe=0;xe<3;++xe)for(oe.uniforms.model=se.projections[xe],oe.uniforms.clipBounds=se.clipBounds[xe],ve=0;ve<3;++ve)if(this.contourProject[xe][ve]){oe.uniforms.permutation=z[ve],he.lineWidth(this.contourWidth[ve]*this.pixelRatio);for(var Se=0;Se<this.contourLevels[ve].length;++Se)Se===this.highlightLevel[ve]?(oe.uniforms.contourColor=this.highlightColor[ve],oe.uniforms.contourTint=this.highlightTint[ve]):Se!==0&&Se-1!==this.highlightLevel[ve]||(oe.uniforms.contourColor=this.contourColor[ve],oe.uniforms.contourTint=this.contourTint[ve]),this._contourCounts[ve][Se]&&(oe.uniforms.height=this.contourLevels[ve][Se],fe.draw(he.LINES,this._contourCounts[ve][Se],this._contourOffsets[ve][Se]))}for(fe.unbind(),(fe=this._dynamicVAO).bind(),xe=0;xe<3;++xe)if(this._dynamicCounts[xe]!==0)for(oe.uniforms.model=de.model,oe.uniforms.clipBounds=de.clipBounds,oe.uniforms.permutation=z[xe],he.lineWidth(this.dynamicWidth[xe]*this.pixelRatio),oe.uniforms.contourColor=this.dynamicColor[xe],oe.uniforms.contourTint=this.dynamicTint[xe],oe.uniforms.height=this.dynamicLevel[xe],fe.draw(he.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]),ve=0;ve<3;++ve)this.contourProject[ve][xe]&&(oe.uniforms.model=se.projections[ve],oe.uniforms.clipBounds=se.clipBounds[ve],fe.draw(he.LINES,this._dynamicCounts[xe],this._dynamicOffsets[xe]));fe.unbind()}}N.draw=function(ae){return q.call(this,ae,!1)},N.drawTransparent=function(ae){return q.call(this,ae,!0)};var Z={model:L,view:L,projection:L,inverseModel:L,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function J(ae,ue){return Array.isArray(ae)?[ue(ae[0]),ue(ae[1]),ue(ae[2])]:[ue(ae),ue(ae),ue(ae)]}function ne(ae){return Array.isArray(ae)?ae.length===3?[ae[0],ae[1],ae[2],1]:[ae[0],ae[1],ae[2],ae[3]]:[0,0,0,1]}function re(ae){if(Array.isArray(ae)){if(Array.isArray(ae))return[ne(ae[0]),ne(ae[1]),ne(ae[2])];var ue=ne(ae);return[ue.slice(),ue.slice(),ue.slice()]}}N.drawPick=function(ae){ae=ae||{};var ue=this.gl;ue.disable(ue.CULL_FACE);var he=Z;he.model=ae.model||L,he.view=ae.view||L,he.projection=ae.projection||L,he.shape=this._field[2].shape,he.pickId=this.pickId/255,he.lowerBound=this.bounds[0],he.upperBound=this.bounds[1],he.objectOffset=this.objectOffset,he.permutation=X;for(var de=0;de<2;++de)for(var xe=he.clipBounds[de],me=0;me<3;++me)xe[me]=Math.min(Math.max(this.clipBounds[de][me],-1e8),1e8);var ve=W(he,this);if(ve.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=he,this._vao.bind(),this._vao.draw(ue.TRIANGLES,this._vertexCount),de=0;de<3;++de)this.surfaceProject[de]&&(this._pickShader.uniforms.model=ve.projections[de],this._pickShader.uniforms.clipBounds=ve.clipBounds[de],this._vao.draw(ue.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ve.showContour){var Le=this._contourPickShader;Le.bind(),Le.uniforms=he;var Ae=this._contourVAO;for(Ae.bind(),me=0;me<3;++me)for(ue.lineWidth(this.contourWidth[me]*this.pixelRatio),Le.uniforms.permutation=z[me],de=0;de<this.contourLevels[me].length;++de)this._contourCounts[me][de]&&(Le.uniforms.height=this.contourLevels[me][de],Ae.draw(ue.LINES,this._contourCounts[me][de],this._contourOffsets[me][de]));for(de=0;de<3;++de)for(Le.uniforms.model=ve.projections[de],Le.uniforms.clipBounds=ve.clipBounds[de],me=0;me<3;++me)if(this.contourProject[de][me]){Le.uniforms.permutation=z[me],ue.lineWidth(this.contourWidth[me]*this.pixelRatio);for(var we=0;we<this.contourLevels[me].length;++we)this._contourCounts[me][we]&&(Le.uniforms.height=this.contourLevels[me][we],Ae.draw(ue.LINES,this._contourCounts[me][we],this._contourOffsets[me][we]))}Ae.unbind()}},N.pick=function(ae){if(!ae||ae.id!==this.pickId)return null;var ue=this._field[2].shape,he=this._pickResult,de=ue[0]*(ae.value[0]+(ae.value[2]>>4)/16)/255,xe=Math.floor(de),me=de-xe,ve=ue[1]*(ae.value[1]+(15&ae.value[2])/16)/255,Le=Math.floor(ve),Ae=ve-Le;xe+=1,Le+=1;var we=he.position;we[0]=we[1]=we[2]=0;for(var se=0;se<2;++se)for(var oe=se?me:1-me,fe=0;fe<2;++fe)for(var Se=xe+se,Me=Le+fe,be=oe*(fe?Ae:1-Ae),Ie=0;Ie<3;++Ie)we[Ie]+=this._field[Ie].get(Se,Me)*be;for(var Be=this._pickResult.level,ce=0;ce<3;++ce)if(Be[ce]=v.le(this.contourLevels[ce],we[ce]),Be[ce]<0)this.contourLevels[ce].length>0&&(Be[ce]=0);else if(Be[ce]<this.contourLevels[ce].length-1){var Te=this.contourLevels[ce][Be[ce]],ye=this.contourLevels[ce][Be[ce]+1];Math.abs(Te-we[ce])>Math.abs(ye-we[ce])&&(Be[ce]+=1)}for(he.index[0]=me<.5?xe:xe+1,he.index[1]=Ae<.5?Le:Le+1,he.uv[0]=de/ue[0],he.uv[1]=ve/ue[1],Ie=0;Ie<3;++Ie)he.dataCoordinate[Ie]=this._field[Ie].get(he.index[0],he.index[1]);return he},N.padField=function(ae,ue){var he=ue.shape.slice(),de=ae.shape.slice();p.assign(ae.lo(1,1).hi(he[0],he[1]),ue),p.assign(ae.lo(1).hi(he[0],1),ue.hi(he[0],1)),p.assign(ae.lo(1,de[1]-1).hi(he[0],1),ue.lo(0,he[1]-1).hi(he[0],1)),p.assign(ae.lo(0,1).hi(1,he[1]),ue.hi(1)),p.assign(ae.lo(de[0]-1,1).hi(1,he[1]),ue.lo(he[0]-1)),ae.set(0,0,ue.get(0,0)),ae.set(0,de[1]-1,ue.get(0,he[1]-1)),ae.set(de[0]-1,0,ue.get(he[0]-1,0)),ae.set(de[0]-1,de[1]-1,ue.get(he[0]-1,he[1]-1))},N.update=function(ae){ae=ae||{},this.objectOffset=ae.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in ae&&(this.contourWidth=J(ae.contourWidth,Number)),"showContour"in ae&&(this.showContour=J(ae.showContour,Boolean)),"showSurface"in ae&&(this.showSurface=!!ae.showSurface),"contourTint"in ae&&(this.contourTint=J(ae.contourTint,Boolean)),"contourColor"in ae&&(this.contourColor=re(ae.contourColor)),"contourProject"in ae&&(this.contourProject=J(ae.contourProject,function(cn){return J(cn,Boolean)})),"surfaceProject"in ae&&(this.surfaceProject=ae.surfaceProject),"dynamicColor"in ae&&(this.dynamicColor=re(ae.dynamicColor)),"dynamicTint"in ae&&(this.dynamicTint=J(ae.dynamicTint,Number)),"dynamicWidth"in ae&&(this.dynamicWidth=J(ae.dynamicWidth,Number)),"opacity"in ae&&(this.opacity=ae.opacity),"opacityscale"in ae&&(this.opacityscale=ae.opacityscale),"colorBounds"in ae&&(this.colorBounds=ae.colorBounds),"vertexColor"in ae&&(this.vertexColor=ae.vertexColor?1:0),"colormap"in ae&&this._colorMap.setPixels(this.genColormap(ae.colormap,this.opacityscale));var ue=ae.field||ae.coords&&ae.coords[2]||null,he=!1;if(ue||(ue=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in ae||"coords"in ae){var de=(ue.shape[0]+2)*(ue.shape[1]+2);de>this._field[2].data.length&&(a.freeFloat(this._field[2].data),this._field[2].data=a.mallocFloat(i.nextPow2(de))),this._field[2]=x(this._field[2].data,[ue.shape[0]+2,ue.shape[1]+2]),this.padField(this._field[2],ue),this.shape=ue.shape.slice();for(var xe=this.shape,me=0;me<2;++me)this._field[2].size>this._field[me].data.length&&(a.freeFloat(this._field[me].data),this._field[me].data=a.mallocFloat(this._field[2].size)),this._field[me]=x(this._field[me].data,[xe[0]+2,xe[1]+2]);if(ae.coords){var ve=ae.coords;if(!Array.isArray(ve)||ve.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(me=0;me<2;++me){var Le=ve[me];for(fe=0;fe<2;++fe)if(Le.shape[fe]!==xe[fe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[me],Le)}}else if(ae.ticks){var Ae=ae.ticks;if(!Array.isArray(Ae)||Ae.length!==2)throw new Error("gl-surface: invalid ticks");for(me=0;me<2;++me){var we=Ae[me];if((Array.isArray(we)||we.length)&&(we=x(we)),we.shape[0]!==xe[me])throw new Error("gl-surface: invalid tick length");var se=x(we.data,xe);se.stride[me]=we.stride[0],se.stride[1^me]=0,this.padField(this._field[me],se)}}else{for(me=0;me<2;++me){var oe=[0,0];oe[me]=1,this._field[me]=x(this._field[me].data,[xe[0]+2,xe[1]+2],oe,0)}this._field[0].set(0,0,0);for(var fe=0;fe<xe[0];++fe)this._field[0].set(fe+1,0,fe);for(this._field[0].set(xe[0]+1,0,xe[0]-1),this._field[1].set(0,0,0),fe=0;fe<xe[1];++fe)this._field[1].set(0,fe+1,fe);this._field[1].set(0,xe[1]+1,xe[1]-1)}var Se=this._field,Me=x(a.mallocFloat(3*Se[2].size*2),[3,xe[0]+2,xe[1]+2,2]);for(me=0;me<3;++me)y(Me.pick(me),Se[me],"mirror");var be=x(a.mallocFloat(3*Se[2].size),[xe[0]+2,xe[1]+2,3]);for(me=0;me<xe[0]+2;++me)for(fe=0;fe<xe[1]+2;++fe){var Ie=Me.get(0,me,fe,0),Be=Me.get(0,me,fe,1),ce=Me.get(1,me,fe,0),Te=Me.get(1,me,fe,1),ye=Me.get(2,me,fe,0),Pe=Me.get(2,me,fe,1),Re=ce*Pe-Te*ye,ze=ye*Be-Pe*Ie,He=Ie*Te-Be*ce,We=Math.sqrt(Re*Re+ze*ze+He*He);We<1e-8?(We=Math.max(Math.abs(Re),Math.abs(ze),Math.abs(He)))<1e-8?(He=1,ze=Re=0,We=1):We=1/We:We=1/Math.sqrt(We),be.set(me,fe,0,Re*We),be.set(me,fe,1,ze*We),be.set(me,fe,2,He*We)}a.free(Me.data);var Je=[1/0,1/0,1/0],lt=[-1/0,-1/0,-1/0],et=1/0,yt=-1/0,_t=(xe[0]-1)*(xe[1]-1)*6,xt=a.mallocFloat(i.nextPow2(10*_t)),at=0,ot=0;for(me=0;me<xe[0]-1;++me)e:for(fe=0;fe<xe[1]-1;++fe){for(var At=0;At<2;++At)for(var Ct=0;Ct<2;++Ct)for(var zt=0;zt<3;++zt){var St=this._field[zt].get(1+me+At,1+fe+Ct);if(isNaN(St)||!isFinite(St))continue e}for(zt=0;zt<6;++zt){var qe=me+O[zt][0],Xe=fe+O[zt][1],Ve=this._field[0].get(qe+1,Xe+1),Ze=this._field[1].get(qe+1,Xe+1);St=this._field[2].get(qe+1,Xe+1),Re=be.get(qe+1,Xe+1,0),ze=be.get(qe+1,Xe+1,1),He=be.get(qe+1,Xe+1,2),ae.intensity&&(st=ae.intensity.get(qe,Xe));var st=ae.intensity?ae.intensity.get(qe,Xe):St+this.objectOffset[2];xt[at++]=qe,xt[at++]=Xe,xt[at++]=Ve,xt[at++]=Ze,xt[at++]=St,xt[at++]=0,xt[at++]=st,xt[at++]=Re,xt[at++]=ze,xt[at++]=He,Je[0]=Math.min(Je[0],Ve+this.objectOffset[0]),Je[1]=Math.min(Je[1],Ze+this.objectOffset[1]),Je[2]=Math.min(Je[2],St+this.objectOffset[2]),et=Math.min(et,st),lt[0]=Math.max(lt[0],Ve+this.objectOffset[0]),lt[1]=Math.max(lt[1],Ze+this.objectOffset[1]),lt[2]=Math.max(lt[2],St+this.objectOffset[2]),yt=Math.max(yt,st),ot+=1}}for(ae.intensityBounds&&(et=+ae.intensityBounds[0],yt=+ae.intensityBounds[1]),me=6;me<at;me+=10)xt[me]=(xt[me]-et)/(yt-et);this._vertexCount=ot,this._coordinateBuffer.update(xt.subarray(0,at)),a.freeFloat(xt),a.free(be.data),this.bounds=[Je,lt],this.intensity=ae.intensity||this._field[2],this.intensityBounds[0]===et&&this.intensityBounds[1]===yt||(he=!0),this.intensityBounds=[et,yt]}if("levels"in ae){var nt=ae.levels;for(nt=Array.isArray(nt[0])?nt.slice():[[],[],nt],me=0;me<3;++me)nt[me]=nt[me].slice(),nt[me].sort(function(cn,tn){return cn-tn});for(me=0;me<3;++me)for(fe=0;fe<nt[me].length;++fe)nt[me][fe]-=this.objectOffset[me];e:for(me=0;me<3;++me){if(nt[me].length!==this.contourLevels[me].length){he=!0;break}for(fe=0;fe<nt[me].length;++fe)if(nt[me][fe]!==this.contourLevels[me][fe]){he=!0;break e}}this.contourLevels=nt}if(he){Se=this._field,xe=this.shape;for(var De=[],Fe=0;Fe<3;++Fe){var rt=this.contourLevels[Fe],tt=[],gt=[],dt=[0,0,0];for(me=0;me<rt.length;++me){var mt=g(this._field[Fe],rt[me]);tt.push(De.length/5|0),ot=0;e:for(fe=0;fe<mt.cells.length;++fe){var ft=mt.cells[fe];for(zt=0;zt<2;++zt){var kt=mt.positions[ft[zt]],ht=kt[0],pt=0|Math.floor(ht),wt=ht-pt,Ft=kt[1],Nt=0|Math.floor(Ft),Gt=Ft-Nt,an=!1;t:for(var Wt=0;Wt<3;++Wt){dt[Wt]=0;var Yt=(Fe+Wt+1)%3;for(At=0;At<2;++At){var en=At?wt:1-wt;for(qe=0|Math.min(Math.max(pt+At,0),xe[0]),Ct=0;Ct<2;++Ct){var Tn=Ct?Gt:1-Gt;if(Xe=0|Math.min(Math.max(Nt+Ct,0),xe[1]),St=Wt<2?this._field[Yt].get(qe,Xe):(this.intensity.get(qe,Xe)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(St)||isNaN(St)){an=!0;break t}var Bn=en*Tn;dt[Wt]+=Bn*St}}}if(an){if(zt>0){for(var mn=0;mn<5;++mn)De.pop();ot-=1}continue e}De.push(dt[0],dt[1],kt[0],kt[1],dt[2]),ot+=1}}gt.push(ot)}this._contourOffsets[Fe]=tt,this._contourCounts[Fe]=gt}var Kt=a.mallocFloat(De.length);for(me=0;me<De.length;++me)Kt[me]=De[me];this._contourBuffer.update(Kt),a.freeFloat(Kt)}},N.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var ae=0;ae<3;++ae)a.freeFloat(this._field[ae].data)},N.highlight=function(ae){var ue,he;if(!ae)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(ue=0;ue<3;++ue)this.enableHighlight[ue]?this.highlightLevel[ue]=ae.level[ue]:this.highlightLevel[ue]=-1;for(he=this.snapToData?ae.dataCoordinate:ae.position,ue=0;ue<3;++ue)he[ue]-=this.objectOffset[ue];if(this.enableDynamic[0]&&he[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&he[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&he[2]!==this.dynamicLevel[2]){for(var de=0,xe=this.shape,me=a.mallocFloat(12*xe[0]*xe[1]),ve=0;ve<3;++ve)if(this.enableDynamic[ve]){this.dynamicLevel[ve]=he[ve];var Le=(ve+1)%3,Ae=(ve+2)%3,we=this._field[ve],se=this._field[Le],oe=this._field[Ae],fe=g(we,he[ve]),Se=fe.cells,Me=fe.positions;for(this._dynamicOffsets[ve]=de,ue=0;ue<Se.length;++ue)for(var be=Se[ue],Ie=0;Ie<2;++Ie){var Be=Me[be[Ie]],ce=+Be[0],Te=0|ce,ye=0|Math.min(Te+1,xe[0]),Pe=ce-Te,Re=1-Pe,ze=+Be[1],He=0|ze,We=0|Math.min(He+1,xe[1]),Je=ze-He,lt=1-Je,et=Re*lt,yt=Re*Je,_t=Pe*lt,xt=Pe*Je,at=et*se.get(Te,He)+yt*se.get(Te,We)+_t*se.get(ye,He)+xt*se.get(ye,We),ot=et*oe.get(Te,He)+yt*oe.get(Te,We)+_t*oe.get(ye,He)+xt*oe.get(ye,We);if(isNaN(at)||isNaN(ot)){Ie&&(de-=1);break}me[2*de+0]=at,me[2*de+1]=ot,de+=1}this._dynamicCounts[ve]=de-this._dynamicOffsets[ve]}else this.dynamicLevel[ve]=NaN,this._dynamicCounts[ve]=0;this._dynamicBuffer.update(me.subarray(0,2*de)),a.freeFloat(me)}}},8931:function(f,o,e){var i=e(5050),r=e(7498),n=e(5306);f.exports=function(w){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(s||function(T){s=[T.LINEAR,T.NEAREST_MIPMAP_LINEAR,T.LINEAR_MIPMAP_NEAREST,T.LINEAR_MIPMAP_NEAREST],a=[T.NEAREST,T.LINEAR,T.NEAREST_MIPMAP_NEAREST,T.NEAREST_MIPMAP_LINEAR,T.LINEAR_MIPMAP_NEAREST,T.LINEAR_MIPMAP_LINEAR],u=[T.REPEAT,T.CLAMP_TO_EDGE,T.MIRRORED_REPEAT]}(w),typeof arguments[1]=="number")return y(w,arguments[1],arguments[2],arguments[3]||w.RGBA,arguments[4]||w.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(w,0|arguments[1][0],0|arguments[1][1],arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var d=arguments[1],S=p(d)?d:d.raw;if(S)return function(T,E,C,L,O,z){var G=v(T);return T.texImage2D(T.TEXTURE_2D,0,O,O,z,E),new g(T,G,C,L,O,z)}(w,S,0|d.width,0|d.height,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(d.shape&&d.data&&d.stride)return function(T,E){var C=E.dtype,L=E.shape.slice(),O=T.getParameter(T.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>O||L[1]<0||L[1]>O)throw new Error("gl-texture2d: Invalid texture size");var z=b(L,E.stride.slice()),G=0;C==="float32"?G=T.FLOAT:C==="float64"?(G=T.FLOAT,z=!1,C="float32"):C==="uint8"?G=T.UNSIGNED_BYTE:(G=T.UNSIGNED_BYTE,z=!1,C="uint8");var I,H,N=0;if(L.length===2)N=T.LUMINANCE,L=[L[0],L[1],1],E=i(E.data,L,[E.stride[0],E.stride[1],1],E.offset);else{if(L.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(L[2]===1)N=T.ALPHA;else if(L[2]===2)N=T.LUMINANCE_ALPHA;else if(L[2]===3)N=T.RGB;else{if(L[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");N=T.RGBA}}G!==T.FLOAT||T.getExtension("OES_texture_float")||(G=T.UNSIGNED_BYTE,z=!1);var F=E.size;if(z)I=E.offset===0&&E.data.length===F?E.data:E.data.subarray(E.offset,E.offset+F);else{var V=[L[2],L[2]*L[0],1];H=n.malloc(F,C);var W=i(H,L,V,0);C!=="float32"&&C!=="float64"||G!==T.UNSIGNED_BYTE?r.assign(W,E):c(W,E),I=H.subarray(0,F)}var te=v(T);return T.texImage2D(T.TEXTURE_2D,0,N,L[0],L[1],0,N,G,I),z||n.free(H),new g(T,te,L[0],L[1],N,G)}(w,d)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,a=null,u=null;function p(w){return typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&w instanceof HTMLVideoElement||typeof ImageData<"u"&&w instanceof ImageData}var c=function(w,d){r.muls(w,d,255)};function x(w,d,S){var T=w.gl,E=T.getParameter(T.MAX_TEXTURE_SIZE);if(d<0||d>E||S<0||S>E)throw new Error("gl-texture2d: Invalid texture size");return w._shape=[d,S],w.bind(),T.texImage2D(T.TEXTURE_2D,0,w.format,d,S,0,w.format,w.type,null),w._mipLevels=[0],w}function g(w,d,S,T,E,C){this.gl=w,this.handle=d,this.format=E,this.type=C,this._shape=[S,T],this._mipLevels=[0],this._magFilter=w.NEAREST,this._minFilter=w.NEAREST,this._wrapS=w.CLAMP_TO_EDGE,this._wrapT=w.CLAMP_TO_EDGE,this._anisoSamples=1;var L=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return L._wrapS},set:function(G){return L.wrapS=G}},{get:function(){return L._wrapT},set:function(G){return L.wrapT=G}}]),this._wrapVector=O;var z=[this._shape[0],this._shape[1]];Object.defineProperties(z,[{get:function(){return L._shape[0]},set:function(G){return L.width=G}},{get:function(){return L._shape[1]},set:function(G){return L.height=G}}]),this._shapeVector=z}var h=g.prototype;function b(w,d){return w.length===3?d[2]===1&&d[1]===w[0]*w[2]&&d[0]===w[2]:d[0]===1&&d[1]===w[0]}function v(w){var d=w.createTexture();return w.bindTexture(w.TEXTURE_2D,d),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),d}function y(w,d,S,T,E){var C=w.getParameter(w.MAX_TEXTURE_SIZE);if(d<0||d>C||S<0||S>C)throw new Error("gl-texture2d: Invalid texture shape");if(E===w.FLOAT&&!w.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var L=v(w);return w.texImage2D(w.TEXTURE_2D,0,T,d,S,0,T,E,null),new g(w,L,d,S,T,E)}Object.defineProperties(h,{minFilter:{get:function(){return this._minFilter},set:function(w){this.bind();var d=this.gl;if(this.type===d.FLOAT&&s.indexOf(w)>=0&&(d.getExtension("OES_texture_float_linear")||(w=d.NEAREST)),a.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,w),this._minFilter=w}},magFilter:{get:function(){return this._magFilter},set:function(w){this.bind();var d=this.gl;if(this.type===d.FLOAT&&s.indexOf(w)>=0&&(d.getExtension("OES_texture_float_linear")||(w=d.NEAREST)),a.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,w),this._magFilter=w}},mipSamples:{get:function(){return this._anisoSamples},set:function(w){var d=this._anisoSamples;if(this._anisoSamples=0|Math.max(w,1),d!==this._anisoSamples){var S=this.gl.getExtension("EXT_texture_filter_anisotropic");S&&this.gl.texParameterf(this.gl.TEXTURE_2D,S.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(w){if(this.bind(),u.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,w),this._wrapS=w}},wrapT:{get:function(){return this._wrapT},set:function(w){if(this.bind(),u.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,w),this._wrapT=w}},wrap:{get:function(){return this._wrapVector},set:function(w){if(Array.isArray(w)||(w=[w,w]),w.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var d=0;d<2;++d)if(u.indexOf(w[d])<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);this._wrapS=w[0],this._wrapT=w[1];var S=this.gl;return this.bind(),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,this._wrapS),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,this._wrapT),w}},shape:{get:function(){return this._shapeVector},set:function(w){if(Array.isArray(w)){if(w.length!==2)throw new Error("gl-texture2d: Invalid texture shape")}else w=[0|w,0|w];return x(this,0|w[0],0|w[1]),[0|w[0],0|w[1]]}},width:{get:function(){return this._shape[0]},set:function(w){return x(this,w|=0,this._shape[1]),w}},height:{get:function(){return this._shape[1]},set:function(w){return w|=0,x(this,this._shape[0],w),w}}}),h.bind=function(w){var d=this.gl;return w!==void 0&&d.activeTexture(d.TEXTURE0+(0|w)),d.bindTexture(d.TEXTURE_2D,this.handle),w!==void 0?0|w:d.getParameter(d.ACTIVE_TEXTURE)-d.TEXTURE0},h.dispose=function(){this.gl.deleteTexture(this.handle)},h.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var w=Math.min(this._shape[0],this._shape[1]),d=0;w>0;++d,w>>>=1)this._mipLevels.indexOf(d)<0&&this._mipLevels.push(d)},h.setPixels=function(w,d,S,T){var E=this.gl;this.bind(),Array.isArray(d)?(T=S,S=0|d[1],d=0|d[0]):(d=d||0,S=S||0),T=T||0;var C=p(w)?w:w.raw;if(C)this._mipLevels.indexOf(T)<0?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,C),this._mipLevels.push(T)):E.texSubImage2D(E.TEXTURE_2D,T,d,S,this.format,this.type,C);else{if(!(w.shape&&w.stride&&w.data))throw new Error("gl-texture2d: Unsupported data type");if(w.shape.length<2||d+w.shape[1]>this._shape[1]>>>T||S+w.shape[0]>this._shape[0]>>>T||d<0||S<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");(function(L,O,z,G,I,H,N,F){var V=F.dtype,W=F.shape.slice();if(W.length<2||W.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var te=0,Q=0,X=b(W,F.stride.slice());if(V==="float32"?te=L.FLOAT:V==="float64"?(te=L.FLOAT,X=!1,V="float32"):V==="uint8"?te=L.UNSIGNED_BYTE:(te=L.UNSIGNED_BYTE,X=!1,V="uint8"),W.length===2)Q=L.LUMINANCE,W=[W[0],W[1],1],F=i(F.data,W,[F.stride[0],F.stride[1],1],F.offset);else{if(W.length!==3)throw new Error("gl-texture2d: Invalid shape for texture");if(W[2]===1)Q=L.ALPHA;else if(W[2]===2)Q=L.LUMINANCE_ALPHA;else if(W[2]===3)Q=L.RGB;else{if(W[2]!==4)throw new Error("gl-texture2d: Invalid shape for pixel coords");Q=L.RGBA}W[2]}if(Q!==L.LUMINANCE&&Q!==L.ALPHA||I!==L.LUMINANCE&&I!==L.ALPHA||(Q=I),Q!==I)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var q=F.size,Z=N.indexOf(G)<0;if(Z&&N.push(G),te===H&&X)F.offset===0&&F.data.length===q?Z?L.texImage2D(L.TEXTURE_2D,G,I,W[0],W[1],0,I,H,F.data):L.texSubImage2D(L.TEXTURE_2D,G,O,z,W[0],W[1],I,H,F.data):Z?L.texImage2D(L.TEXTURE_2D,G,I,W[0],W[1],0,I,H,F.data.subarray(F.offset,F.offset+q)):L.texSubImage2D(L.TEXTURE_2D,G,O,z,W[0],W[1],I,H,F.data.subarray(F.offset,F.offset+q));else{var J;J=H===L.FLOAT?n.mallocFloat32(q):n.mallocUint8(q);var ne=i(J,W,[W[2],W[2]*W[0],1]);te===L.FLOAT&&H===L.UNSIGNED_BYTE?c(ne,F):r.assign(ne,F),Z?L.texImage2D(L.TEXTURE_2D,G,I,W[0],W[1],0,I,H,J.subarray(0,q)):L.texSubImage2D(L.TEXTURE_2D,G,O,z,W[0],W[1],I,H,J.subarray(0,q)),H===L.FLOAT?n.freeFloat32(J):n.freeUint8(J)}})(E,d,S,T,this.format,this.type,this._mipLevels,w)}}},3056:function(f){f.exports=function(o,e,i){e?e.bind():o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null);var r=0|o.getParameter(o.MAX_VERTEX_ATTRIBS);if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<i.length;++n){var s=i[n];if(s.buffer){var a=s.buffer,u=s.size||4,p=s.type||o.FLOAT,c=!!s.normalized,x=s.stride||0,g=s.offset||0;a.bind(),o.enableVertexAttribArray(n),o.vertexAttribPointer(n,u,p,c,x,g)}else{if(typeof s=="number")o.vertexAttrib1f(n,s);else if(s.length===1)o.vertexAttrib1f(n,s[0]);else if(s.length===2)o.vertexAttrib2f(n,s[0],s[1]);else if(s.length===3)o.vertexAttrib3f(n,s[0],s[1],s[2]);else{if(s.length!==4)throw new Error("gl-vao: Invalid vertex attribute");o.vertexAttrib4f(n,s[0],s[1],s[2],s[3])}o.disableVertexAttribArray(n)}}for(;n<r;++n)o.disableVertexAttribArray(n)}else for(o.bindBuffer(o.ARRAY_BUFFER,null),n=0;n<r;++n)o.disableVertexAttribArray(n)}},7220:function(f,o,e){var i=e(3056);function r(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}r.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},r.prototype.update=function(n,s,a){this._elements=s,this._attributes=n,this._elementsType=a||this.gl.UNSIGNED_SHORT},r.prototype.dispose=function(){},r.prototype.unbind=function(){},r.prototype.draw=function(n,s,a){a=a||0;var u=this.gl;this._elements?u.drawElements(n,s,this._elementsType,a):u.drawArrays(n,a,s)},f.exports=function(n){return new r(n)}},3778:function(f,o,e){var i=e(3056);function r(s,a,u,p,c,x){this.location=s,this.dimension=a,this.a=u,this.b=p,this.c=c,this.d=x}function n(s,a,u){this.gl=s,this._ext=a,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=s.UNSIGNED_SHORT}r.prototype.bind=function(s){switch(this.dimension){case 1:s.vertexAttrib1f(this.location,this.a);break;case 2:s.vertexAttrib2f(this.location,this.a,this.b);break;case 3:s.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:s.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var s=0;s<this._attribs.length;++s)this._attribs[s].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(s,a,u){if(this.bind(),i(this.gl,a,s),this.unbind(),this._attribs.length=0,s)for(var p=0;p<s.length;++p){var c=s[p];typeof c=="number"?this._attribs.push(new r(p,1,c)):Array.isArray(c)&&this._attribs.push(new r(p,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!a,this._elementsType=u||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(s,a,u){u=u||0;var p=this.gl;this._useElements?p.drawElements(s,a,this._elementsType,u):p.drawArrays(s,u,a)},f.exports=function(s,a){return new n(s,a,a.createVertexArrayOES())}},2944:function(f,o,e){var i=e(3778),r=e(7220);function n(s){this.bindVertexArrayOES=s.bindVertexArray.bind(s),this.createVertexArrayOES=s.createVertexArray.bind(s),this.deleteVertexArrayOES=s.deleteVertexArray.bind(s)}f.exports=function(s,a,u,p){var c,x=s.createVertexArray?new n(s):s.getExtension("OES_vertex_array_object");return(c=x?i(s,x):r(s)).update(a,u,p),c}},2598:function(f){f.exports=function(o,e,i){return o[0]=e[0]+i[0],o[1]=e[1]+i[1],o[2]=e[2]+i[2],o}},5879:function(f,o,e){f.exports=function(s,a){var u=i(s[0],s[1],s[2]),p=i(a[0],a[1],a[2]);r(u,u),r(p,p);var c=n(u,p);return c>1?0:Math.acos(c)};var i=e(5415),r=e(899),n=e(9305)},8827:function(f){f.exports=function(o,e){return o[0]=Math.ceil(e[0]),o[1]=Math.ceil(e[1]),o[2]=Math.ceil(e[2]),o}},7622:function(f){f.exports=function(o){var e=new Float32Array(3);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e}},8782:function(f){f.exports=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o}},8501:function(f){f.exports=function(){var o=new Float32Array(3);return o[0]=0,o[1]=0,o[2]=0,o}},903:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=i[0],u=i[1],p=i[2];return o[0]=n*p-s*u,o[1]=s*a-r*p,o[2]=r*u-n*a,o}},5981:function(f,o,e){f.exports=e(8288)},8288:function(f){f.exports=function(o,e){var i=e[0]-o[0],r=e[1]-o[1],n=e[2]-o[2];return Math.sqrt(i*i+r*r+n*n)}},8629:function(f,o,e){f.exports=e(7979)},7979:function(f){f.exports=function(o,e,i){return o[0]=e[0]/i[0],o[1]=e[1]/i[1],o[2]=e[2]/i[2],o}},9305:function(f){f.exports=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]}},154:function(f){f.exports=1e-6},4932:function(f,o,e){f.exports=function(r,n){var s=r[0],a=r[1],u=r[2],p=n[0],c=n[1],x=n[2];return Math.abs(s-p)<=i*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-c)<=i*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(u-x)<=i*Math.max(1,Math.abs(u),Math.abs(x))};var i=e(154)},5777:function(f){f.exports=function(o,e){return o[0]===e[0]&&o[1]===e[1]&&o[2]===e[2]}},3306:function(f){f.exports=function(o,e){return o[0]=Math.floor(e[0]),o[1]=Math.floor(e[1]),o[2]=Math.floor(e[2]),o}},7447:function(f,o,e){f.exports=function(r,n,s,a,u,p){var c,x;for(n||(n=3),s||(s=0),x=a?Math.min(a*n+s,r.length):r.length,c=s;c<x;c+=n)i[0]=r[c],i[1]=r[c+1],i[2]=r[c+2],u(i,i,p),r[c]=i[0],r[c+1]=i[1],r[c+2]=i[2];return r};var i=e(8501)()},5415:function(f){f.exports=function(o,e,i){var r=new Float32Array(3);return r[0]=o,r[1]=e,r[2]=i,r}},2858:function(f,o,e){f.exports={EPSILON:e(154),create:e(8501),clone:e(7622),angle:e(5879),fromValues:e(5415),copy:e(8782),set:e(831),equals:e(4932),exactEquals:e(5777),add:e(2598),subtract:e(911),sub:e(8921),multiply:e(105),mul:e(5733),divide:e(7979),div:e(8629),min:e(3605),max:e(1716),floor:e(3306),ceil:e(8827),round:e(1624),scale:e(5685),scaleAndAdd:e(6722),distance:e(8288),dist:e(5981),squaredDistance:e(6403),sqrDist:e(5294),length:e(4693),len:e(1468),squaredLength:e(4337),sqrLen:e(3303),negate:e(435),inverse:e(2073),normalize:e(899),dot:e(9305),cross:e(903),lerp:e(1868),random:e(6660),transformMat4:e(3255),transformMat3:e(9908),transformQuat:e(6568),rotateX:e(392),rotateY:e(3222),rotateZ:e(3388),forEach:e(7447)}},2073:function(f){f.exports=function(o,e){return o[0]=1/e[0],o[1]=1/e[1],o[2]=1/e[2],o}},1468:function(f,o,e){f.exports=e(4693)},4693:function(f){f.exports=function(o){var e=o[0],i=o[1],r=o[2];return Math.sqrt(e*e+i*i+r*r)}},1868:function(f){f.exports=function(o,e,i,r){var n=e[0],s=e[1],a=e[2];return o[0]=n+r*(i[0]-n),o[1]=s+r*(i[1]-s),o[2]=a+r*(i[2]-a),o}},1716:function(f){f.exports=function(o,e,i){return o[0]=Math.max(e[0],i[0]),o[1]=Math.max(e[1],i[1]),o[2]=Math.max(e[2],i[2]),o}},3605:function(f){f.exports=function(o,e,i){return o[0]=Math.min(e[0],i[0]),o[1]=Math.min(e[1],i[1]),o[2]=Math.min(e[2],i[2]),o}},5733:function(f,o,e){f.exports=e(105)},105:function(f){f.exports=function(o,e,i){return o[0]=e[0]*i[0],o[1]=e[1]*i[1],o[2]=e[2]*i[2],o}},435:function(f){f.exports=function(o,e){return o[0]=-e[0],o[1]=-e[1],o[2]=-e[2],o}},899:function(f){f.exports=function(o,e){var i=e[0],r=e[1],n=e[2],s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s),o[0]=e[0]*s,o[1]=e[1]*s,o[2]=e[2]*s),o}},6660:function(f){f.exports=function(o,e){e=e||1;var i=2*Math.random()*Math.PI,r=2*Math.random()-1,n=Math.sqrt(1-r*r)*e;return o[0]=Math.cos(i)*n,o[1]=Math.sin(i)*n,o[2]=r*e,o}},392:function(f){f.exports=function(o,e,i,r){var n=i[1],s=i[2],a=e[1]-n,u=e[2]-s,p=Math.sin(r),c=Math.cos(r);return o[0]=e[0],o[1]=n+a*c-u*p,o[2]=s+a*p+u*c,o}},3222:function(f){f.exports=function(o,e,i,r){var n=i[0],s=i[2],a=e[0]-n,u=e[2]-s,p=Math.sin(r),c=Math.cos(r);return o[0]=n+u*p+a*c,o[1]=e[1],o[2]=s+u*c-a*p,o}},3388:function(f){f.exports=function(o,e,i,r){var n=i[0],s=i[1],a=e[0]-n,u=e[1]-s,p=Math.sin(r),c=Math.cos(r);return o[0]=n+a*c-u*p,o[1]=s+a*p+u*c,o[2]=e[2],o}},1624:function(f){f.exports=function(o,e){return o[0]=Math.round(e[0]),o[1]=Math.round(e[1]),o[2]=Math.round(e[2]),o}},5685:function(f){f.exports=function(o,e,i){return o[0]=e[0]*i,o[1]=e[1]*i,o[2]=e[2]*i,o}},6722:function(f){f.exports=function(o,e,i,r){return o[0]=e[0]+i[0]*r,o[1]=e[1]+i[1]*r,o[2]=e[2]+i[2]*r,o}},831:function(f){f.exports=function(o,e,i,r){return o[0]=e,o[1]=i,o[2]=r,o}},5294:function(f,o,e){f.exports=e(6403)},3303:function(f,o,e){f.exports=e(4337)},6403:function(f){f.exports=function(o,e){var i=e[0]-o[0],r=e[1]-o[1],n=e[2]-o[2];return i*i+r*r+n*n}},4337:function(f){f.exports=function(o){var e=o[0],i=o[1],r=o[2];return e*e+i*i+r*r}},8921:function(f,o,e){f.exports=e(911)},911:function(f){f.exports=function(o,e,i){return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],o}},9908:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2];return o[0]=r*i[0]+n*i[3]+s*i[6],o[1]=r*i[1]+n*i[4]+s*i[7],o[2]=r*i[2]+n*i[5]+s*i[8],o}},3255:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=i[3]*r+i[7]*n+i[11]*s+i[15];return a=a||1,o[0]=(i[0]*r+i[4]*n+i[8]*s+i[12])/a,o[1]=(i[1]*r+i[5]*n+i[9]*s+i[13])/a,o[2]=(i[2]*r+i[6]*n+i[10]*s+i[14])/a,o}},6568:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=i[0],u=i[1],p=i[2],c=i[3],x=c*r+u*s-p*n,g=c*n+p*r-a*s,h=c*s+a*n-u*r,b=-a*r-u*n-p*s;return o[0]=x*c+b*-a+g*-p-h*-u,o[1]=g*c+b*-u+h*-a-x*-p,o[2]=h*c+b*-p+x*-u-g*-a,o}},3433:function(f){f.exports=function(o,e,i){return o[0]=e[0]+i[0],o[1]=e[1]+i[1],o[2]=e[2]+i[2],o[3]=e[3]+i[3],o}},1413:function(f){f.exports=function(o){var e=new Float32Array(4);return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e}},3470:function(f){f.exports=function(o,e){return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o}},5313:function(f){f.exports=function(){var o=new Float32Array(4);return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o}},5446:function(f){f.exports=function(o,e){var i=e[0]-o[0],r=e[1]-o[1],n=e[2]-o[2],s=e[3]-o[3];return Math.sqrt(i*i+r*r+n*n+s*s)}},205:function(f){f.exports=function(o,e,i){return o[0]=e[0]/i[0],o[1]=e[1]/i[1],o[2]=e[2]/i[2],o[3]=e[3]/i[3],o}},4242:function(f){f.exports=function(o,e){return o[0]*e[0]+o[1]*e[1]+o[2]*e[2]+o[3]*e[3]}},5680:function(f){f.exports=function(o,e,i,r){var n=new Float32Array(4);return n[0]=o,n[1]=e,n[2]=i,n[3]=r,n}},4020:function(f,o,e){f.exports={create:e(5313),clone:e(1413),fromValues:e(5680),copy:e(3470),set:e(6453),add:e(3433),subtract:e(2705),multiply:e(746),divide:e(205),min:e(2170),max:e(3030),scale:e(5510),scaleAndAdd:e(4224),distance:e(5446),squaredDistance:e(1542),length:e(8177),squaredLength:e(9037),negate:e(6459),inverse:e(8057),normalize:e(381),dot:e(4242),lerp:e(8746),random:e(3770),transformMat4:e(6342),transformQuat:e(5022)}},8057:function(f){f.exports=function(o,e){return o[0]=1/e[0],o[1]=1/e[1],o[2]=1/e[2],o[3]=1/e[3],o}},8177:function(f){f.exports=function(o){var e=o[0],i=o[1],r=o[2],n=o[3];return Math.sqrt(e*e+i*i+r*r+n*n)}},8746:function(f){f.exports=function(o,e,i,r){var n=e[0],s=e[1],a=e[2],u=e[3];return o[0]=n+r*(i[0]-n),o[1]=s+r*(i[1]-s),o[2]=a+r*(i[2]-a),o[3]=u+r*(i[3]-u),o}},3030:function(f){f.exports=function(o,e,i){return o[0]=Math.max(e[0],i[0]),o[1]=Math.max(e[1],i[1]),o[2]=Math.max(e[2],i[2]),o[3]=Math.max(e[3],i[3]),o}},2170:function(f){f.exports=function(o,e,i){return o[0]=Math.min(e[0],i[0]),o[1]=Math.min(e[1],i[1]),o[2]=Math.min(e[2],i[2]),o[3]=Math.min(e[3],i[3]),o}},746:function(f){f.exports=function(o,e,i){return o[0]=e[0]*i[0],o[1]=e[1]*i[1],o[2]=e[2]*i[2],o[3]=e[3]*i[3],o}},6459:function(f){f.exports=function(o,e){return o[0]=-e[0],o[1]=-e[1],o[2]=-e[2],o[3]=-e[3],o}},381:function(f){f.exports=function(o,e){var i=e[0],r=e[1],n=e[2],s=e[3],a=i*i+r*r+n*n+s*s;return a>0&&(a=1/Math.sqrt(a),o[0]=i*a,o[1]=r*a,o[2]=n*a,o[3]=s*a),o}},3770:function(f,o,e){var i=e(381),r=e(5510);f.exports=function(n,s){return s=s||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),i(n,n),r(n,n,s),n}},5510:function(f){f.exports=function(o,e,i){return o[0]=e[0]*i,o[1]=e[1]*i,o[2]=e[2]*i,o[3]=e[3]*i,o}},4224:function(f){f.exports=function(o,e,i,r){return o[0]=e[0]+i[0]*r,o[1]=e[1]+i[1]*r,o[2]=e[2]+i[2]*r,o[3]=e[3]+i[3]*r,o}},6453:function(f){f.exports=function(o,e,i,r,n){return o[0]=e,o[1]=i,o[2]=r,o[3]=n,o}},1542:function(f){f.exports=function(o,e){var i=e[0]-o[0],r=e[1]-o[1],n=e[2]-o[2],s=e[3]-o[3];return i*i+r*r+n*n+s*s}},9037:function(f){f.exports=function(o){var e=o[0],i=o[1],r=o[2],n=o[3];return e*e+i*i+r*r+n*n}},2705:function(f){f.exports=function(o,e,i){return o[0]=e[0]-i[0],o[1]=e[1]-i[1],o[2]=e[2]-i[2],o[3]=e[3]-i[3],o}},6342:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=e[3];return o[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*a,o[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*a,o[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*a,o[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*a,o}},5022:function(f){f.exports=function(o,e,i){var r=e[0],n=e[1],s=e[2],a=i[0],u=i[1],p=i[2],c=i[3],x=c*r+u*s-p*n,g=c*n+p*r-a*s,h=c*s+a*n-u*r,b=-a*r-u*n-p*s;return o[0]=x*c+b*-a+g*-p-h*-u,o[1]=g*c+b*-u+h*-a-x*-p,o[2]=h*c+b*-p+x*-u-g*-a,o[3]=e[3],o}},9365:function(f,o,e){var i=e(8096),r=e(7896);f.exports=function(n){for(var s=Array.isArray(n)?n:i(n),a=0;a<s.length;a++){var u=s[a];if(u.type==="preprocessor"){var p=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(p&&p[2]){var c=p[1],x=p[2];return(c?r(x):x).trim()}}}}},3193:function(f,o,e){f.exports=function(L){var O,z,G,I=0,H=0,N=u,F=[],V=[],W=1,te=0,Q=0,X=!1,q=!1,Z="",J=n,ne=i;(L=L||{}).version==="300 es"&&(J=a,ne=s);var re={},ae={};for(I=0;I<J.length;I++)re[J[I]]=!0;for(I=0;I<ne.length;I++)ae[ne[I]]=!0;return function(fe){return V=[],fe!==null?function(Se){var Me;for(I=0,Se.toString&&(Se=Se.toString()),Z+=Se.replace(/\r\n/g,`
`),G=Z.length;O=Z[I],I<G;){switch(Me=I,N){case c:I=me();break;case x:case g:I=xe();break;case h:I=ve();break;case b:I=we();break;case E:I=Ae();break;case v:I=se();break;case p:I=oe();break;case S:I=de();break;case u:I=he()}Me!==I&&(Z[Me]===`
`?(te=0,++W):++te)}return H+=I,Z=Z.slice(I),V}(fe):(F.length&&ue(F.join("")),N=T,ue("(eof)"),V)};function ue(fe){fe.length&&V.push({type:C[N],data:fe,position:Q,line:W,column:te})}function he(){return F=F.length?[]:F,z==="/"&&O==="*"?(Q=H+I-1,N=c,z=O,I+1):z==="/"&&O==="/"?(Q=H+I-1,N=x,z=O,I+1):O==="#"?(N=g,Q=H+I,I):/\s/.test(O)?(N=S,Q=H+I,I):(X=/\d/.test(O),q=/[^\w_]/.test(O),Q=H+I,N=X?b:q?h:p,I)}function de(){return/[^\s]/g.test(O)?(ue(F.join("")),N=u,I):(F.push(O),z=O,I+1)}function xe(){return O!=="\r"&&O!==`
`||z==="\\"?(F.push(O),z=O,I+1):(ue(F.join("")),N=u,I)}function me(){return O==="/"&&z==="*"?(F.push(O),ue(F.join("")),N=u,I+1):(F.push(O),z=O,I+1)}function ve(){if(z==="."&&/\d/.test(O))return N=v,I;if(z==="/"&&O==="*")return N=c,I;if(z==="/"&&O==="/")return N=x,I;if(O==="."&&F.length){for(;Le(F););return N=v,I}if(O===";"||O===")"||O==="("){if(F.length)for(;Le(F););return ue(O),N=u,I+1}var fe=F.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||fe){for(;Le(F););return N=u,I}return F.push(O),z=O,I+1}function Le(fe){for(var Se,Me,be=0;;){if(Se=r.indexOf(fe.slice(0,fe.length+be).join("")),Me=r[Se],Se===-1){if(be--+fe.length>0)continue;Me=fe.slice(0,1).join("")}return ue(Me),Q+=Me.length,(F=F.slice(Me.length)).length}}function Ae(){return/[^a-fA-F0-9]/.test(O)?(ue(F.join("")),N=u,I):(F.push(O),z=O,I+1)}function we(){return O==="."||/[eE]/.test(O)?(F.push(O),N=v,z=O,I+1):O==="x"&&F.length===1&&F[0]==="0"?(N=E,F.push(O),z=O,I+1):/[^\d]/.test(O)?(ue(F.join("")),N=u,I):(F.push(O),z=O,I+1)}function se(){return O==="f"&&(F.push(O),z=O,I+=1),/[eE]/.test(O)?(F.push(O),z=O,I+1):(O!=="-"&&O!=="+"||!/[eE]/.test(z))&&/[^\d]/.test(O)?(ue(F.join("")),N=u,I):(F.push(O),z=O,I+1)}function oe(){if(/[^\d\w_]/.test(O)){var fe=F.join("");return N=ae[fe]?d:re[fe]?w:y,ue(F.join("")),N=u,I}return F.push(O),z=O,I+1}};var i=e(399),r=e(9746),n=e(9525),s=e(9458),a=e(3585),u=999,p=9999,c=0,x=1,g=2,h=3,b=4,v=5,y=6,w=7,d=8,S=9,T=10,E=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3585:function(f,o,e){var i=e(9525);i=i.slice().filter(function(r){return!/^(gl\_|texture)/.test(r)}),f.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},9525:function(f){f.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},9458:function(f,o,e){var i=e(399);f.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},399:function(f){f.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},9746:function(f){f.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},8096:function(f,o,e){var i=e(3193);f.exports=function(r,n){var s=i(n),a=[];return(a=a.concat(s(r))).concat(s(null))}},6832:function(f){f.exports=function(o){typeof o=="string"&&(o=[o]);for(var e=[].slice.call(arguments,1),i=[],r=0;r<o.length-1;r++)i.push(o[r],e[r]||"");return i.push(o[r]),i.join("")}},5233:function(f,o,e){var i=e(4846);f.exports=i&&function(){var r=!1;try{var n=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{r=!1}return r}()},2183:function(f,o,e){f.exports=function(x,g){var h=x.length;if(h===0)throw new Error("Must have at least d+1 points");var b=x[0].length;if(h<=b)throw new Error("Must input at least d+1 points");var v=x.slice(0,b+1),y=i.apply(void 0,v);if(y===0)throw new Error("Input not in general position");for(var w=new Array(b+1),d=0;d<=b;++d)w[d]=d;y<0&&(w[0]=1,w[1]=0);var S=new n(w,new Array(b+1),!1),T=S.adjacent,E=new Array(b+2);for(d=0;d<=b;++d){for(var C=w.slice(),L=0;L<=b;++L)L===d&&(C[L]=-1);var O=C[0];C[0]=C[1],C[1]=O;var z=new n(C,new Array(b+1),!0);T[d]=z,E[d]=z}for(E[b+1]=S,d=0;d<=b;++d){C=T[d].vertices;var G=T[d].adjacent;for(L=0;L<=b;++L){var I=C[L];if(I<0)G[L]=S;else for(var H=0;H<=b;++H)T[H].vertices.indexOf(I)<0&&(G[L]=T[H])}}var N=new p(b,v,E),F=!!g;for(d=b+1;d<h;++d)N.insert(x[d],F);return N.boundary()};var i=e(417),r=e(8211).H;function n(x,g,h){this.vertices=x,this.adjacent=g,this.boundary=h,this.lastVisited=-1}function s(x,g,h){this.vertices=x,this.cell=g,this.index=h}function a(x,g){return r(x.vertices,g.vertices)}n.prototype.flip=function(){var x=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=x;var g=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=g};var u=[];function p(x,g,h){this.dimension=x,this.vertices=g,this.simplices=h,this.interior=h.filter(function(w){return!w.boundary}),this.tuple=new Array(x+1);for(var b=0;b<=x;++b)this.tuple[b]=this.vertices[b];var v,y=u[x];y||(y=u[x]=((v=i[x+1])||(v=i),function(w){return function(){var d=this.tuple;return w.apply(this,d)}}(v))),this.orient=y}var c=p.prototype;c.handleBoundaryDegeneracy=function(x,g){var h=this.dimension,b=this.vertices.length-1,v=this.tuple,y=this.vertices,w=[x];for(x.lastVisited=-b;w.length>0;)for(var d=(x=w.pop()).adjacent,S=0;S<=h;++S){var T=d[S];if(T.boundary&&!(T.lastVisited<=-b)){for(var E=T.vertices,C=0;C<=h;++C){var L=E[C];v[C]=L<0?g:y[L]}var O=this.orient();if(O>0)return T;T.lastVisited=-b,O===0&&w.push(T)}}return null},c.walk=function(x,g){var h=this.vertices.length-1,b=this.dimension,v=this.vertices,y=this.tuple,w=g?this.interior.length*Math.random()|0:this.interior.length-1,d=this.interior[w];e:for(;!d.boundary;){for(var S=d.vertices,T=d.adjacent,E=0;E<=b;++E)y[E]=v[S[E]];for(d.lastVisited=h,E=0;E<=b;++E){var C=T[E];if(!(C.lastVisited>=h)){var L=y[E];y[E]=x;var O=this.orient();if(y[E]=L,O<0){d=C;continue e}C.boundary?C.lastVisited=-h:C.lastVisited=h}}return}return d},c.addPeaks=function(x,g){var h=this.vertices.length-1,b=this.dimension,v=this.vertices,y=this.tuple,w=this.interior,d=this.simplices,S=[g];g.lastVisited=h,g.vertices[g.vertices.indexOf(-1)]=h,g.boundary=!1,w.push(g);for(var T=[];S.length>0;){var E=(g=S.pop()).vertices,C=g.adjacent,L=E.indexOf(h);if(!(L<0)){for(var O=0;O<=b;++O)if(O!==L){var z=C[O];if(z.boundary&&!(z.lastVisited>=h)){var G=z.vertices;if(z.lastVisited!==-h){for(var I=0,H=0;H<=b;++H)G[H]<0?(I=H,y[H]=x):y[H]=v[G[H]];if(this.orient()>0){G[I]=h,z.boundary=!1,w.push(z),S.push(z),z.lastVisited=h;continue}z.lastVisited=-h}var N=z.adjacent,F=E.slice(),V=C.slice(),W=new n(F,V,!0);d.push(W);var te=N.indexOf(g);if(!(te<0))for(N[te]=W,V[L]=z,F[O]=-1,V[O]=g,C[O]=W,W.flip(),H=0;H<=b;++H){var Q=F[H];if(!(Q<0||Q===h)){for(var X=new Array(b-1),q=0,Z=0;Z<=b;++Z){var J=F[Z];J<0||Z===H||(X[q++]=J)}T.push(new s(X,W,H))}}}}}}for(T.sort(a),O=0;O+1<T.length;O+=2){var ne=T[O],re=T[O+1],ae=ne.index,ue=re.index;ae<0||ue<0||(ne.cell.adjacent[ne.index]=re.cell,re.cell.adjacent[re.index]=ne.cell)}},c.insert=function(x,g){var h=this.vertices;h.push(x);var b=this.walk(x,g);if(b){for(var v=this.dimension,y=this.tuple,w=0;w<=v;++w){var d=b.vertices[w];y[w]=d<0?x:h[d]}var S=this.orient(y);S<0||(S!==0||(b=this.handleBoundaryDegeneracy(b,x)))&&this.addPeaks(x,b)}},c.boundary=function(){for(var x=this.dimension,g=[],h=this.simplices,b=h.length,v=0;v<b;++v){var y=h[v];if(y.boundary){for(var w=new Array(x),d=y.vertices,S=0,T=0,E=0;E<=x;++E)d[E]>=0?w[S++]=d[E]:T=1&E;if(T===(1&x)){var C=w[0];w[0]=w[1],w[1]=C}g.push(w)}}return g}},9014:function(f,o,e){var i=e(5070);function r(S,T,E,C,L){this.mid=S,this.left=T,this.right=E,this.leftPoints=C,this.rightPoints=L,this.count=(T?T.count:0)+(E?E.count:0)+C.length}f.exports=function(S){return S&&S.length!==0?new w(y(S)):new w(null)};var n=r.prototype;function s(S,T){S.mid=T.mid,S.left=T.left,S.right=T.right,S.leftPoints=T.leftPoints,S.rightPoints=T.rightPoints,S.count=T.count}function a(S,T){var E=y(T);S.mid=E.mid,S.left=E.left,S.right=E.right,S.leftPoints=E.leftPoints,S.rightPoints=E.rightPoints,S.count=E.count}function u(S,T){var E=S.intervals([]);E.push(T),a(S,E)}function p(S,T){var E=S.intervals([]),C=E.indexOf(T);return C<0?0:(E.splice(C,1),a(S,E),1)}function c(S,T,E){for(var C=0;C<S.length&&S[C][0]<=T;++C){var L=E(S[C]);if(L)return L}}function x(S,T,E){for(var C=S.length-1;C>=0&&S[C][1]>=T;--C){var L=E(S[C]);if(L)return L}}function g(S,T){for(var E=0;E<S.length;++E){var C=T(S[E]);if(C)return C}}function h(S,T){return S-T}function b(S,T){return S[0]-T[0]||S[1]-T[1]}function v(S,T){return S[1]-T[1]||S[0]-T[0]}function y(S){if(S.length===0)return null;for(var T=[],E=0;E<S.length;++E)T.push(S[E][0],S[E][1]);T.sort(h);var C=T[T.length>>1],L=[],O=[],z=[];for(E=0;E<S.length;++E){var G=S[E];G[1]<C?L.push(G):C<G[0]?O.push(G):z.push(G)}var I=z,H=z.slice();return I.sort(b),H.sort(v),new r(C,y(L),y(O),I,H)}function w(S){this.root=S}n.intervals=function(S){return S.push.apply(S,this.leftPoints),this.left&&this.left.intervals(S),this.right&&this.right.intervals(S),S},n.insert=function(S){var T=this.count-this.leftPoints.length;if(this.count+=1,S[1]<this.mid)this.left?4*(this.left.count+1)>3*(T+1)?u(this,S):this.left.insert(S):this.left=y([S]);else if(S[0]>this.mid)this.right?4*(this.right.count+1)>3*(T+1)?u(this,S):this.right.insert(S):this.right=y([S]);else{var E=i.ge(this.leftPoints,S,b),C=i.ge(this.rightPoints,S,v);this.leftPoints.splice(E,0,S),this.rightPoints.splice(C,0,S)}},n.remove=function(S){var T=this.count-this.leftPoints;if(S[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(T-1)?p(this,S):(O=this.left.remove(S))===2?(this.left=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(S[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(T-1)?p(this,S):(O=this.right.remove(S))===2?(this.right=null,this.count-=1,1):(O===1&&(this.count-=1),O):0;if(this.count===1)return this.leftPoints[0]===S?2:0;if(this.leftPoints.length===1&&this.leftPoints[0]===S){if(this.left&&this.right){for(var E=this,C=this.left;C.right;)E=C,C=C.right;if(E===this)C.right=this.right;else{var L=this.left,O=this.right;E.count-=C.count,E.right=C.left,C.left=L,C.right=O}s(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(L=i.ge(this.leftPoints,S,b);L<this.leftPoints.length&&this.leftPoints[L][0]===S[0];++L)if(this.leftPoints[L]===S){for(this.count-=1,this.leftPoints.splice(L,1),O=i.ge(this.rightPoints,S,v);O<this.rightPoints.length&&this.rightPoints[O][1]===S[1];++O)if(this.rightPoints[O]===S)return this.rightPoints.splice(O,1),1}return 0},n.queryPoint=function(S,T){return S<this.mid?this.left&&(E=this.left.queryPoint(S,T))?E:c(this.leftPoints,S,T):S>this.mid?this.right&&(E=this.right.queryPoint(S,T))?E:x(this.rightPoints,S,T):g(this.leftPoints,T);var E},n.queryInterval=function(S,T,E){var C;return S<this.mid&&this.left&&(C=this.left.queryInterval(S,T,E))||T>this.mid&&this.right&&(C=this.right.queryInterval(S,T,E))?C:T<this.mid?c(this.leftPoints,T,E):S>this.mid?x(this.rightPoints,S,E):g(this.leftPoints,E)};var d=w.prototype;d.insert=function(S){this.root?this.root.insert(S):this.root=new r(S[0],null,null,[S],[S])},d.remove=function(S){if(this.root){var T=this.root.remove(S);return T===2&&(this.root=null),T!==0}return!1},d.queryPoint=function(S,T){if(this.root)return this.root.queryPoint(S,T)},d.queryInterval=function(S,T,E){if(S<=T&&this.root)return this.root.queryInterval(S,T,E)},Object.defineProperty(d,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(d,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},9560:function(f){f.exports=function(o){for(var e=new Array(o),i=0;i<o;++i)e[i]=i;return e}},4846:function(f){f.exports=!0},4780:function(f){function o(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}f.exports=function(e){return e!=null&&(o(e)||function(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&o(i.slice(0,0))}(e)||!!e._isBuffer)}},3596:function(f){f.exports=function(o){for(var e,i=o.length,r=0;r<i;r++)if(((e=o.charCodeAt(r))<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},3578:function(f){f.exports=function(o,e,i){return o*(1-i)+e*i}},7191:function(f,o,e){var i=e(4690),r=e(9823),n=e(7332),s=e(7787),a=e(7437),u=e(2142),p={length:e(4693),normalize:e(899),dot:e(9305),cross:e(903)},c=r(),x=r(),g=[0,0,0,0],h=[[0,0,0],[0,0,0],[0,0,0]],b=[0,0,0];function v(y,w,d,S,T){y[0]=w[0]*S+d[0]*T,y[1]=w[1]*S+d[1]*T,y[2]=w[2]*S+d[2]*T}f.exports=function(y,w,d,S,T,E){if(w||(w=[0,0,0]),d||(d=[0,0,0]),S||(S=[0,0,0]),T||(T=[0,0,0,1]),E||(E=[0,0,0,1]),!i(c,y)||(n(x,c),x[3]=0,x[7]=0,x[11]=0,x[15]=1,Math.abs(s(x)<1e-8)))return!1;var C,L,O,z,G,I,H,N=c[3],F=c[7],V=c[11],W=c[12],te=c[13],Q=c[14],X=c[15];if(N!==0||F!==0||V!==0){if(g[0]=N,g[1]=F,g[2]=V,g[3]=X,!a(x,x))return!1;u(x,x),C=T,O=x,z=(L=g)[0],G=L[1],I=L[2],H=L[3],C[0]=O[0]*z+O[4]*G+O[8]*I+O[12]*H,C[1]=O[1]*z+O[5]*G+O[9]*I+O[13]*H,C[2]=O[2]*z+O[6]*G+O[10]*I+O[14]*H,C[3]=O[3]*z+O[7]*G+O[11]*I+O[15]*H}else T[0]=T[1]=T[2]=0,T[3]=1;if(w[0]=W,w[1]=te,w[2]=Q,function(Z,J){Z[0][0]=J[0],Z[0][1]=J[1],Z[0][2]=J[2],Z[1][0]=J[4],Z[1][1]=J[5],Z[1][2]=J[6],Z[2][0]=J[8],Z[2][1]=J[9],Z[2][2]=J[10]}(h,c),d[0]=p.length(h[0]),p.normalize(h[0],h[0]),S[0]=p.dot(h[0],h[1]),v(h[1],h[1],h[0],1,-S[0]),d[1]=p.length(h[1]),p.normalize(h[1],h[1]),S[0]/=d[1],S[1]=p.dot(h[0],h[2]),v(h[2],h[2],h[0],1,-S[1]),S[2]=p.dot(h[1],h[2]),v(h[2],h[2],h[1],1,-S[2]),d[2]=p.length(h[2]),p.normalize(h[2],h[2]),S[1]/=d[2],S[2]/=d[2],p.cross(b,h[1],h[2]),p.dot(h[0],b)<0)for(var q=0;q<3;q++)d[q]*=-1,h[q][0]*=-1,h[q][1]*=-1,h[q][2]*=-1;return E[0]=.5*Math.sqrt(Math.max(1+h[0][0]-h[1][1]-h[2][2],0)),E[1]=.5*Math.sqrt(Math.max(1-h[0][0]+h[1][1]-h[2][2],0)),E[2]=.5*Math.sqrt(Math.max(1-h[0][0]-h[1][1]+h[2][2],0)),E[3]=.5*Math.sqrt(Math.max(1+h[0][0]+h[1][1]+h[2][2],0)),h[2][1]>h[1][2]&&(E[0]=-E[0]),h[0][2]>h[2][0]&&(E[1]=-E[1]),h[1][0]>h[0][1]&&(E[2]=-E[2]),!0}},4690:function(f){f.exports=function(o,e){var i=e[15];if(i===0)return!1;for(var r=1/i,n=0;n<16;n++)o[n]=e[n]*r;return!0}},7649:function(f,o,e){var i=e(1868),r=e(1102),n=e(7191),s=e(7787),a=e(1116),u=x(),p=x(),c=x();function x(){return{translate:g(),scale:g(1),skew:g(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function g(h){return[h||0,h||0,h||0]}f.exports=function(h,b,v,y){if(s(b)===0||s(v)===0)return!1;var w=n(b,u.translate,u.scale,u.skew,u.perspective,u.quaternion),d=n(v,p.translate,p.scale,p.skew,p.perspective,p.quaternion);return!(!w||!d||(i(c.translate,u.translate,p.translate,y),i(c.skew,u.skew,p.skew,y),i(c.scale,u.scale,p.scale,y),i(c.perspective,u.perspective,p.perspective,y),a(c.quaternion,u.quaternion,p.quaternion,y),r(h,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},1102:function(f,o,e){var i={identity:e(9947),translate:e(998),multiply:e(104),create:e(9823),scale:e(3668),fromRotationTranslation:e(7280)},r=(i.create(),i.create());f.exports=function(n,s,a,u,p,c){return i.identity(n),i.fromRotationTranslation(n,c,s),n[3]=p[0],n[7]=p[1],n[11]=p[2],n[15]=p[3],i.identity(r),u[2]!==0&&(r[9]=u[2],i.multiply(n,n,r)),u[1]!==0&&(r[9]=0,r[8]=u[1],i.multiply(n,n,r)),u[0]!==0&&(r[8]=0,r[4]=u[0],i.multiply(n,n,r)),i.scale(n,n,a),n}},9298:function(f,o,e){var i=e(5070),r=e(7649),n=e(7437),s=e(6109),a=e(7115),u=e(5240),p=e(3012),c=e(998),x=(e(3668),e(899)),g=[0,0,0];function h(y){this._components=y.slice(),this._time=[0],this.prevMatrix=y.slice(),this.nextMatrix=y.slice(),this.computedMatrix=y.slice(),this.computedInverse=y.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}f.exports=function(y){return new h((y=y||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var b=h.prototype;b.recalcMatrix=function(y){var w=this._time,d=i.le(w,y),S=this.computedMatrix;if(!(d<0)){var T=this._components;if(d===w.length-1)for(var E=16*d,C=0;C<16;++C)S[C]=T[E++];else{var L=w[d+1]-w[d],O=(E=16*d,this.prevMatrix),z=!0;for(C=0;C<16;++C)O[C]=T[E++];var G=this.nextMatrix;for(C=0;C<16;++C)G[C]=T[E++],z=z&&O[C]===G[C];if(L<1e-6||z)for(C=0;C<16;++C)S[C]=O[C];else r(S,O,G,(y-w[d])/L)}var I=this.computedUp;I[0]=S[1],I[1]=S[5],I[2]=S[9],x(I,I);var H=this.computedInverse;n(H,S);var N=this.computedEye,F=H[15];N[0]=H[12]/F,N[1]=H[13]/F,N[2]=H[14]/F;var V=this.computedCenter,W=Math.exp(this.computedRadius[0]);for(C=0;C<3;++C)V[C]=N[C]-S[2+4*C]*W}},b.idle=function(y){if(!(y<this.lastT())){for(var w=this._components,d=w.length-16,S=0;S<16;++S)w.push(w[d++]);this._time.push(y)}},b.flush=function(y){var w=i.gt(this._time,y)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},b.lastT=function(){return this._time[this._time.length-1]},b.lookAt=function(y,w,d,S){this.recalcMatrix(y),w=w||this.computedEye,d=d||g,S=S||this.computedUp,this.setMatrix(y,p(this.computedMatrix,w,d,S));for(var T=0,E=0;E<3;++E)T+=Math.pow(d[E]-w[E],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},b.rotate=function(y,w,d,S){this.recalcMatrix(y);var T=this.computedInverse;w&&a(T,T,w),d&&s(T,T,d),S&&u(T,T,S),this.setMatrix(y,n(this.computedMatrix,T))};var v=[0,0,0];b.pan=function(y,w,d,S){v[0]=-(w||0),v[1]=-(d||0),v[2]=-(S||0),this.recalcMatrix(y);var T=this.computedInverse;c(T,T,v),this.setMatrix(y,n(T,T))},b.translate=function(y,w,d,S){v[0]=w||0,v[1]=d||0,v[2]=S||0,this.recalcMatrix(y);var T=this.computedMatrix;c(T,T,v),this.setMatrix(y,T)},b.setMatrix=function(y,w){if(!(y<this.lastT())){this._time.push(y);for(var d=0;d<16;++d)this._components.push(w[d])}},b.setDistance=function(y,w){this.computedRadius[0]=w},b.setDistanceLimits=function(y,w){var d=this._limits;d[0]=y,d[1]=w},b.getDistanceLimits=function(y){var w=this._limits;return y?(y[0]=w[0],y[1]=w[1],y):w}},3266:function(f,o,e){f.exports=function(r){var n=r.length;if(n<3){for(var s=new Array(n),a=0;a<n;++a)s[a]=a;return n===2&&r[0][0]===r[1][0]&&r[0][1]===r[1][1]?[0]:s}var u=new Array(n);for(a=0;a<n;++a)u[a]=a;u.sort(function(w,d){return r[w][0]-r[d][0]||r[w][1]-r[d][1]});var p=[u[0],u[1]],c=[u[0],u[1]];for(a=2;a<n;++a){for(var x=u[a],g=r[x],h=p.length;h>1&&i(r[p[h-2]],r[p[h-1]],g)<=0;)h-=1,p.pop();for(p.push(x),h=c.length;h>1&&i(r[c[h-2]],r[c[h-1]],g)>=0;)h-=1,c.pop();c.push(x)}s=new Array(c.length+p.length-2);for(var b=0,v=(a=0,p.length);a<v;++a)s[b++]=p[a];for(var y=c.length-2;y>0;--y)s[b++]=c[y];return s};var i=e(417)[3]},6145:function(f,o,e){f.exports=function(r,n){n||(n=r,r=window);var s=0,a=0,u=0,p={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function x(E){var C=!1;return"altKey"in E&&(C=C||E.altKey!==p.alt,p.alt=!!E.altKey),"shiftKey"in E&&(C=C||E.shiftKey!==p.shift,p.shift=!!E.shiftKey),"ctrlKey"in E&&(C=C||E.ctrlKey!==p.control,p.control=!!E.ctrlKey),"metaKey"in E&&(C=C||E.metaKey!==p.meta,p.meta=!!E.metaKey),C}function g(E,C){var L=i.x(C),O=i.y(C);"buttons"in C&&(E=0|C.buttons),(E!==s||L!==a||O!==u||x(C))&&(s=0|E,a=L||0,u=O||0,n&&n(s,a,u,p))}function h(E){g(0,E)}function b(){(s||a||u||p.shift||p.alt||p.meta||p.control)&&(a=u=0,s=0,p.shift=p.alt=p.control=p.meta=!1,n&&n(0,0,0,p))}function v(E){x(E)&&n&&n(s,a,u,p)}function y(E){i.buttons(E)===0?g(0,E):g(s,E)}function w(E){g(s|i.buttons(E),E)}function d(E){g(s&~i.buttons(E),E)}function S(){c||(c=!0,r.addEventListener("mousemove",y),r.addEventListener("mousedown",w),r.addEventListener("mouseup",d),r.addEventListener("mouseleave",h),r.addEventListener("mouseenter",h),r.addEventListener("mouseout",h),r.addEventListener("mouseover",h),r.addEventListener("blur",b),r.addEventListener("keyup",v),r.addEventListener("keydown",v),r.addEventListener("keypress",v),r!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",v),window.addEventListener("keydown",v),window.addEventListener("keypress",v)))}S();var T={element:r};return Object.defineProperties(T,{enabled:{get:function(){return c},set:function(E){E?S():c&&(c=!1,r.removeEventListener("mousemove",y),r.removeEventListener("mousedown",w),r.removeEventListener("mouseup",d),r.removeEventListener("mouseleave",h),r.removeEventListener("mouseenter",h),r.removeEventListener("mouseout",h),r.removeEventListener("mouseover",h),r.removeEventListener("blur",b),r.removeEventListener("keyup",v),r.removeEventListener("keydown",v),r.removeEventListener("keypress",v),r!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",v),window.removeEventListener("keydown",v),window.removeEventListener("keypress",v)))},enumerable:!0},buttons:{get:function(){return s},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return p},enumerable:!0}}),T};var i=e(4110)},2565:function(f){var o={left:0,top:0};f.exports=function(e,i,r){i=i||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var n,s=e.clientX||0,a=e.clientY||0,u=(n=i)===window||n===document||n===document.body?o:n.getBoundingClientRect();return r[0]=s-u.left,r[1]=a-u.top,r}},4110:function(f,o){function e(i){return i.target||i.srcElement||window}o.buttons=function(i){if(typeof i=="object"){if("buttons"in i)return i.buttons;if("which"in i){if((r=i.which)===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in i){var r;if((r=i.button)===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0},o.element=e,o.x=function(i){if(typeof i=="object"){if("offsetX"in i)return i.offsetX;var r=e(i).getBoundingClientRect();return i.clientX-r.left}return 0},o.y=function(i){if(typeof i=="object"){if("offsetY"in i)return i.offsetY;var r=e(i).getBoundingClientRect();return i.clientY-r.top}return 0}},6475:function(f,o,e){var i=e(14);f.exports=function(r,n,s){typeof r=="function"&&(s=!!n,n=r,r=window);var a=i("ex",r),u=function(p){s&&p.preventDefault();var c=p.deltaX||0,x=p.deltaY||0,g=p.deltaZ||0,h=1;switch(p.deltaMode){case 1:h=a;break;case 2:h=window.innerHeight}if(x*=h,g*=h,(c*=h)||x||g)return n(c,x,g,p)};return r.addEventListener("wheel",u),u}},9284:function(f,o,e){var i=e(5306);f.exports=function(n){function s(g){throw new Error("ndarray-extract-contour: "+g)}typeof n!="object"&&s("Must specify arguments");var a=n.order;Array.isArray(a)||s("Must specify order");var u=n.arrayArguments||1;u<1&&s("Must have at least one array argument"),(n.scalarArguments||0)<0&&s("Scalar arg count must be > 0"),typeof n.vertex!="function"&&s("Must specify vertex creation function"),typeof n.cell!="function"&&s("Must specify cell creation function"),typeof n.phase!="function"&&s("Must specify phase function");for(var p=n.getters||[],c=new Array(u),x=0;x<u;++x)p.indexOf(x)>=0?c[x]=!0:c[x]=!1;return function(g,h,b,v,y,w){var d=[w,y].join(",");return(0,r[d])(g,h,b,i.mallocUint32,i.freeUint32)}(n.vertex,n.cell,n.phase,0,a,c)};var r={"false,0,1":function(n,s,a,u,p){return function(c,x,g,h){var b,v=0|c.shape[0],y=0|c.shape[1],w=c.data,d=0|c.offset,S=0|c.stride[0],T=0|c.stride[1],E=d,C=0|-S,L=0,O=0|-T,z=0,G=-S-T|0,I=0,H=0|S,N=T-S*v|0,F=0,V=0,W=0,te=2*v|0,Q=u(te),X=u(te),q=0,Z=0,J=-1,ne=-1,re=0,ae=0|-v,ue=0|v,he=0,de=-v-1|0,xe=v-1|0,me=0,ve=0,Le=0;for(F=0;F<v;++F)Q[q++]=a(w[E],x,g,h),E+=H;if(E+=N,y>0){if(V=1,Q[q++]=a(w[E],x,g,h),E+=H,v>0)for(F=1,b=w[E],Z=Q[q]=a(b,x,g,h),re=Q[q+J],he=Q[q+ae],me=Q[q+de],Z===re&&Z===he&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,re,he,me,x,g,h),ve=X[q]=W++),q+=1,E+=H,F=2;F<v;++F)b=w[E],Z=Q[q]=a(b,x,g,h),re=Q[q+J],he=Q[q+ae],me=Q[q+de],Z===re&&Z===he&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,re,he,me,x,g,h),ve=X[q]=W++,me!==re&&s(X[q+J],ve,I,L,me,re,x,g,h)),q+=1,E+=H;for(E+=N,q=0,Le=J,J=ne,ne=Le,Le=ae,ae=ue,ue=Le,Le=de,de=xe,xe=Le,V=2;V<y;++V){if(Q[q++]=a(w[E],x,g,h),E+=H,v>0)for(F=1,b=w[E],Z=Q[q]=a(b,x,g,h),re=Q[q+J],he=Q[q+ae],me=Q[q+de],Z===re&&Z===he&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,re,he,me,x,g,h),ve=X[q]=W++,me!==he&&s(X[q+ae],ve,z,I,he,me,x,g,h)),q+=1,E+=H,F=2;F<v;++F)b=w[E],Z=Q[q]=a(b,x,g,h),re=Q[q+J],he=Q[q+ae],me=Q[q+de],Z===re&&Z===he&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,re,he,me,x,g,h),ve=X[q]=W++,me!==he&&s(X[q+ae],ve,z,I,he,me,x,g,h),me!==re&&s(X[q+J],ve,I,L,me,re,x,g,h)),q+=1,E+=H;1&V&&(q=0),Le=J,J=ne,ne=Le,Le=ae,ae=ue,ue=Le,Le=de,de=xe,xe=Le,E+=N}}p(X),p(Q)}},"false,1,0":function(n,s,a,u,p){return function(c,x,g,h){var b,v=0|c.shape[0],y=0|c.shape[1],w=c.data,d=0|c.offset,S=0|c.stride[0],T=0|c.stride[1],E=d,C=0|-S,L=0,O=0|-T,z=0,G=-S-T|0,I=0,H=0|T,N=S-T*y|0,F=0,V=0,W=0,te=2*y|0,Q=u(te),X=u(te),q=0,Z=0,J=-1,ne=-1,re=0,ae=0|-y,ue=0|y,he=0,de=-y-1|0,xe=y-1|0,me=0,ve=0,Le=0;for(V=0;V<y;++V)Q[q++]=a(w[E],x,g,h),E+=H;if(E+=N,v>0){if(F=1,Q[q++]=a(w[E],x,g,h),E+=H,y>0)for(V=1,b=w[E],Z=Q[q]=a(b,x,g,h),he=Q[q+ae],re=Q[q+J],me=Q[q+de],Z===he&&Z===re&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,he,re,me,x,g,h),ve=X[q]=W++),q+=1,E+=H,V=2;V<y;++V)b=w[E],Z=Q[q]=a(b,x,g,h),he=Q[q+ae],re=Q[q+J],me=Q[q+de],Z===he&&Z===re&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,he,re,me,x,g,h),ve=X[q]=W++,me!==re&&s(X[q+J],ve,z,I,re,me,x,g,h)),q+=1,E+=H;for(E+=N,q=0,Le=ae,ae=ue,ue=Le,Le=J,J=ne,ne=Le,Le=de,de=xe,xe=Le,F=2;F<v;++F){if(Q[q++]=a(w[E],x,g,h),E+=H,y>0)for(V=1,b=w[E],Z=Q[q]=a(b,x,g,h),he=Q[q+ae],re=Q[q+J],me=Q[q+de],Z===he&&Z===re&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,he,re,me,x,g,h),ve=X[q]=W++,me!==he&&s(X[q+ae],ve,I,L,me,he,x,g,h)),q+=1,E+=H,V=2;V<y;++V)b=w[E],Z=Q[q]=a(b,x,g,h),he=Q[q+ae],re=Q[q+J],me=Q[q+de],Z===he&&Z===re&&Z===me||(L=w[E+C],z=w[E+O],I=w[E+G],n(F,V,b,L,z,I,Z,he,re,me,x,g,h),ve=X[q]=W++,me!==re&&s(X[q+J],ve,z,I,re,me,x,g,h),me!==he&&s(X[q+ae],ve,I,L,me,he,x,g,h)),q+=1,E+=H;1&F&&(q=0),Le=ae,ae=ue,ue=Le,Le=J,J=ne,ne=Le,Le=de,de=xe,xe=Le,E+=N}}p(X),p(Q)}}}},9144:function(f,o,e){var i=e(3094),r={zero:function(v,y,w,d){var S=v[0];d|=0;var T=0,E=w[0];for(T=0;T<S;++T)y[d]=0,d+=E},fdTemplate1:function(v,y,w,d,S,T,E){var C=v[0],L=w[0],O=-1*L,z=L;d|=0,E|=0;var G=0,I=L,H=T[0];for(G=0;G<C;++G)S[E]=.5*(y[d+O]-y[d+z]),d+=I,E+=H},fdTemplate2:function(v,y,w,d,S,T,E,C,L,O){var z=v[0],G=v[1],I=w[0],H=w[1],N=T[0],F=T[1],V=L[0],W=L[1],te=-1*I,Q=I,X=-1*H,q=H;d|=0,E|=0,O|=0;var Z=0,J=0,ne=H,re=I-G*H,ae=F,ue=N-G*F,he=W,de=V-G*W;for(J=0;J<z;++J){for(Z=0;Z<G;++Z)S[E]=.5*(y[d+te]-y[d+Q]),C[O]=.5*(y[d+X]-y[d+q]),d+=ne,E+=ae,O+=he;d+=re,E+=ue,O+=de}}},n={cdiff:function(v){var y={};return function(w,d,S){var T=w.dtype,E=w.order,C=d.dtype,L=d.order,O=S.dtype,z=S.order,G=[T,E.join(),C,L.join(),O,z.join()].join(),I=y[G];return I||(y[G]=I=v([T,E,C,L,O,z])),I(w.shape.slice(0),w.data,w.stride,0|w.offset,d.data,d.stride,0|d.offset,S.data,S.stride,0|S.offset)}},zero:function(v){var y={};return function(w){var d=w.dtype,S=w.order,T=[d,S.join()].join(),E=y[T];return E||(y[T]=E=v([d,S])),E(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(v){var y={};return function(w,d){var S=w.dtype,T=w.order,E=d.dtype,C=d.order,L=[S,T.join(),E,C.join()].join(),O=y[L];return O||(y[L]=O=v([S,T,E,C])),O(w.shape.slice(0),w.data,w.stride,0|w.offset,d.data,d.stride,0|d.offset)}},fdTemplate2:function(v){var y={};return function(w,d,S){var T=w.dtype,E=w.order,C=d.dtype,L=d.order,O=S.dtype,z=S.order,G=[T,E.join(),C,L.join(),O,z.join()].join(),I=y[G];return I||(y[G]=I=v([T,E,C,L,O,z])),I(w.shape.slice(0),w.data,w.stride,0|w.offset,d.data,d.stride,0|d.offset,S.data,S.stride,0|S.offset)}}};function s(v){return(0,n[v.funcName])(a.bind(void 0,v))}function a(v){return r[v.funcName]}function u(v){return s({funcName:v.funcName})}var p={},c={},x=u({funcName:"cdiff"}),g=u({funcName:"zero"});function h(v){return v in p?p[v]:p[v]=u({funcName:"fdTemplate"+v})}function b(v,y,w,d){return function(S,T){var E=T.shape.slice();return E[0]>2&&E[1]>2&&d(T.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),S.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(w(T.pick(0,-1).lo(1).hi(E[1]-2),S.pick(0,-1,1).lo(1).hi(E[1]-2)),y(S.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(w(T.pick(E[0]-1,-1).lo(1).hi(E[1]-2),S.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),y(S.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(w(T.pick(-1,0).lo(1).hi(E[0]-2),S.pick(-1,0,0).lo(1).hi(E[0]-2)),y(S.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(w(T.pick(-1,E[1]-1).lo(1).hi(E[0]-2),S.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),y(S.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),S.set(0,0,0,0),S.set(0,0,1,0),S.set(E[0]-1,0,0,0),S.set(E[0]-1,0,1,0),S.set(0,E[1]-1,0,0),S.set(0,E[1]-1,1,0),S.set(E[0]-1,E[1]-1,0,0),S.set(E[0]-1,E[1]-1,1,0),S}}f.exports=function(v,y,w){return Array.isArray(w)||(w=i(y.dimension,typeof w=="string"?w:"clamp")),y.size===0?v:y.dimension===0?(v.set(0),v):function(d){var S=d.join();if(L=c[S])return L;for(var T=d.length,E=[x,g],C=1;C<=T;++C)E.push(h(C));var L=b.apply(void 0,E);return c[S]=L,L}(w)(v,y)}},3581:function(f){function o(n,s){var a=Math.floor(s),u=s-a,p=0<=a&&a<n.shape[0],c=0<=a+1&&a+1<n.shape[0];return(1-u)*(p?+n.get(a):0)+u*(c?+n.get(a+1):0)}function e(n,s,a){var u=Math.floor(s),p=s-u,c=0<=u&&u<n.shape[0],x=0<=u+1&&u+1<n.shape[0],g=Math.floor(a),h=a-g,b=0<=g&&g<n.shape[1],v=0<=g+1&&g+1<n.shape[1],y=c&&b?n.get(u,g):0,w=c&&v?n.get(u,g+1):0;return(1-h)*((1-p)*y+p*(x&&b?n.get(u+1,g):0))+h*((1-p)*w+p*(x&&v?n.get(u+1,g+1):0))}function i(n,s,a,u){var p=Math.floor(s),c=s-p,x=0<=p&&p<n.shape[0],g=0<=p+1&&p+1<n.shape[0],h=Math.floor(a),b=a-h,v=0<=h&&h<n.shape[1],y=0<=h+1&&h+1<n.shape[1],w=Math.floor(u),d=u-w,S=0<=w&&w<n.shape[2],T=0<=w+1&&w+1<n.shape[2],E=x&&v&&S?n.get(p,h,w):0,C=x&&y&&S?n.get(p,h+1,w):0,L=g&&v&&S?n.get(p+1,h,w):0,O=g&&y&&S?n.get(p+1,h+1,w):0,z=x&&v&&T?n.get(p,h,w+1):0,G=x&&y&&T?n.get(p,h+1,w+1):0;return(1-d)*((1-b)*((1-c)*E+c*L)+b*((1-c)*C+c*O))+d*((1-b)*((1-c)*z+c*(g&&v&&T?n.get(p+1,h,w+1):0))+b*((1-c)*G+c*(g&&y&&T?n.get(p+1,h+1,w+1):0)))}function r(n){var s,a,u=0|n.shape.length,p=new Array(u),c=new Array(u),x=new Array(u),g=new Array(u);for(s=0;s<u;++s)a=+arguments[s+1],p[s]=Math.floor(a),c[s]=a-p[s],x[s]=0<=p[s]&&p[s]<n.shape[s],g[s]=0<=p[s]+1&&p[s]+1<n.shape[s];var h,b,v,y=0;e:for(s=0;s<1<<u;++s){for(b=1,v=n.offset,h=0;h<u;++h)if(s&1<<h){if(!g[h])continue e;b*=c[h],v+=n.stride[h]*(p[h]+1)}else{if(!x[h])continue e;b*=1-c[h],v+=n.stride[h]*p[h]}y+=b*n.data[v]}return y}f.exports=function(n,s,a,u){switch(n.shape.length){case 0:return 0;case 1:return o(n,s);case 2:return e(n,s,a);case 3:return i(n,s,a,u);default:return r.apply(void 0,arguments)}},f.exports.d1=o,f.exports.d2=e,f.exports.d3=i},7498:function(f,o){var e={"float64,2,1,0":function(){return function(a,u,p,c,x){var g=a[0],h=a[1],b=a[2],v=p[0],y=p[1],w=p[2];c|=0;var d=0,S=0,T=0,E=w,C=y-b*w,L=v-h*y;for(T=0;T<g;++T){for(S=0;S<h;++S){for(d=0;d<b;++d)u[c]/=x,c+=E;c+=C}c+=L}}},"uint8,2,0,1,float64,2,1,0":function(){return function(a,u,p,c,x,g,h,b){for(var v=a[0],y=a[1],w=a[2],d=p[0],S=p[1],T=p[2],E=g[0],C=g[1],L=g[2],O=c|=0,z=h|=0,G=0|a[0];G>0;){G<64?(v=G,G=0):(v=64,G-=64);for(var I=0|a[1];I>0;){I<64?(y=I,I=0):(y=64,I-=64),c=O+G*d+I*S,h=z+G*E+I*C;var H=0,N=0,F=0,V=T,W=d-w*T,te=S-v*d,Q=L,X=E-w*L,q=C-v*E;for(F=0;F<y;++F){for(N=0;N<v;++N){for(H=0;H<w;++H)u[c]=x[h]*b,c+=V,h+=Q;c+=W,h+=X}c+=te,h+=q}}}}},"float32,1,0,float32,1,0":function(){return function(a,u,p,c,x,g,h){var b=a[0],v=a[1],y=p[0],w=p[1],d=g[0],S=g[1];c|=0,h|=0;var T=0,E=0,C=w,L=y-v*w,O=S,z=d-v*S;for(E=0;E<b;++E){for(T=0;T<v;++T)u[c]=x[h],c+=C,h+=O;c+=L,h+=z}}},"float32,1,0,float32,0,1":function(){return function(a,u,p,c,x,g,h){for(var b=a[0],v=a[1],y=p[0],w=p[1],d=g[0],S=g[1],T=c|=0,E=h|=0,C=0|a[1];C>0;){C<64?(v=C,C=0):(v=64,C-=64);for(var L=0|a[0];L>0;){L<64?(b=L,L=0):(b=64,L-=64),c=T+C*w+L*y,h=E+C*S+L*d;var O=0,z=0,G=w,I=y-v*w,H=S,N=d-v*S;for(z=0;z<b;++z){for(O=0;O<v;++O)u[c]=x[h],c+=G,h+=H;c+=I,h+=N}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(a,u,p,c,x,g,h){for(var b=a[0],v=a[1],y=a[2],w=p[0],d=p[1],S=p[2],T=g[0],E=g[1],C=g[2],L=c|=0,O=h|=0,z=0|a[2];z>0;){z<64?(y=z,z=0):(y=64,z-=64);for(var G=0|a[0];G>0;){G<64?(b=G,G=0):(b=64,G-=64);for(var I=0|a[1];I>0;){I<64?(v=I,I=0):(v=64,I-=64),c=L+z*S+G*w+I*d,h=O+z*C+G*T+I*E;var H=0,N=0,F=0,V=S,W=w-y*S,te=d-b*w,Q=C,X=T-y*C,q=E-b*T;for(F=0;F<v;++F){for(N=0;N<b;++N){for(H=0;H<y;++H)u[c]=x[h],c+=V,h+=Q;c+=W,h+=X}c+=te,h+=q}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(a,u,p,c,x,g,h){var b=a[0],v=a[1],y=a[2],w=p[0],d=p[1],S=p[2],T=g[0],E=g[1],C=g[2];c|=0,h|=0;var L=0,O=0,z=0,G=S,I=w-y*S,H=d-b*w,N=C,F=T-y*C,V=E-b*T;for(z=0;z<v;++z){for(O=0;O<b;++O){for(L=0;L<y;++L)u[c]=x[h],c+=G,h+=N;c+=I,h+=F}c+=H,h+=V}}}},i=function(a,u){var p=u.join(",");return(0,e[p])()},r={mul:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,b=c.dtype,v=c.order,y=x.dtype,w=x.order,d=[g,h.join(),b,v.join(),y,w.join()].join(),S=u[d];return S||(u[d]=S=a([g,h,b,v,y,w])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},muls:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,b=c.dtype,v=c.order,y=[g,h.join(),b,v.join()].join(),w=u[y];return w||(u[y]=w=a([g,h,b,v])),w(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},mulseq:function(a){var u={};return function(p,c){var x=p.dtype,g=p.order,h=[x,g.join()].join(),b=u[h];return b||(u[h]=b=a([x,g])),b(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},div:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,b=c.dtype,v=c.order,y=x.dtype,w=x.order,d=[g,h.join(),b,v.join(),y,w.join()].join(),S=u[d];return S||(u[d]=S=a([g,h,b,v,y,w])),S(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x.data,x.stride,0|x.offset)}},divs:function(a){var u={};return function(p,c,x){var g=p.dtype,h=p.order,b=c.dtype,v=c.order,y=[g,h.join(),b,v.join()].join(),w=u[y];return w||(u[y]=w=a([g,h,b,v])),w(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset,x)}},divseq:function(a){var u={};return function(p,c){var x=p.dtype,g=p.order,h=[x,g.join()].join(),b=u[h];return b||(u[h]=b=a([x,g])),b(p.shape.slice(0),p.data,p.stride,0|p.offset,c)}},assign:function(a){var u={};return function(p,c){var x=p.dtype,g=p.order,h=c.dtype,b=c.order,v=[x,g.join(),h,b.join()].join(),y=u[v];return y||(u[v]=y=a([x,g,h,b])),y(p.shape.slice(0),p.data,p.stride,0|p.offset,c.data,c.stride,0|c.offset)}}};function n(a){return u={funcName:a.funcName},(0,r[u.funcName])(i.bind(void 0,u));var u}var s={mul:"*",div:"/"};(function(){for(var a in s)o[a]=n({funcName:a}),o[a+"s"]=n({funcName:a+"s"}),o[a+"seq"]=n({funcName:a+"seq"})})(),o.assign=n({funcName:"assign"})},7382:function(f,o,e){var i=e(5050),r=e(9262);f.exports=function(n,s){for(var a=[],u=n,p=1;Array.isArray(u);)a.push(u.length),p*=u.length,u=u[0];return a.length===0?i():(s||(s=i(new Float64Array(p),a)),r(s,n),s)}},9262:function(f){f.exports=function(o){var e={};return function(i,r){var n=i.dtype,s=i.order,a=[n,s.join()].join(),u=e[a];return u||(e[a]=u=o([n,s])),u(i.shape.slice(0),i.data,i.stride,0|i.offset,r)}}((function(){return function(o,e,i,r,n){var s=o[0],a=o[1],u=o[2],p=i[0],c=i[1],x=i[2],g=[0,0,0];r|=0;var h=0,b=0,v=0,y=x,w=c-u*x,d=p-a*c;for(v=0;v<s;++v){for(b=0;b<a;++b){for(h=0;h<u;++h){var S,T=n;for(S=0;S<g.length-1;++S)T=T[g[S]];e[r]=T[g[g.length-1]],r+=y,++g[2]}r+=w,g[2]-=u,++g[1]}r+=d,g[1]-=a,++g[0]}}}).bind(void 0,{funcName:"convert"}))},8139:function(f,o,e){var i=e(5306);function r(u){return u==="uint32"?[i.mallocUint32,i.freeUint32]:null}var n={"uint32,1,0":function(u,p){return function(c,x,g,h,b,v,y,w,d,S,T){var E,C,L,O,z,G,I,H,N=c*b+h,F=u(w);for(E=c+1;E<=x;++E){for(C=E,L=N+=b,z=0,G=N,O=0;O<w;++O)F[z++]=g[G],G+=d;e:for(;C-- >c;){z=0,G=L-b;t:for(O=0;O<w;++O){if((I=g[G])<(H=F[z]))break e;if(I>H)break t;G+=S,z+=T}for(z=L,G=L-b,O=0;O<w;++O)g[z]=g[G],z+=d,G+=d;L-=b}for(z=L,G=0,O=0;O<w;++O)g[z]=F[G++],z+=d}p(F)}}},s={"uint32,1,0":function(u,p,c){return function x(g,h,b,v,y,w,d,S,T,E,C){var L,O,z,G,I,H,N,F,V,W,te,Q,X,q,Z,J,ne,re,ae,ue,he,de,xe,me,ve,Le=(h-g+1)/6|0,Ae=g+Le,we=h-Le,se=g+h>>1,oe=se-Le,fe=se+Le,Se=Ae,Me=oe,be=se,Ie=fe,Be=we,ce=g+1,Te=h-1,ye=!0,Pe=0,Re=0,ze=0,He=S,We=p(He),Je=p(He);te=y*Se,Q=y*Me,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Se,Se=Me,Me=O;break e}if(ze<0)break e;ve+=E}te=y*Ie,Q=y*Be,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Ie,Ie=Be,Be=O;break e}if(ze<0)break e;ve+=E}te=y*Se,Q=y*be,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Se,Se=be,be=O;break e}if(ze<0)break e;ve+=E}te=y*Me,Q=y*be,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Me,Me=be,be=O;break e}if(ze<0)break e;ve+=E}te=y*Se,Q=y*Ie,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Se,Se=Ie,Ie=O;break e}if(ze<0)break e;ve+=E}te=y*be,Q=y*Ie,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=be,be=Ie,Ie=O;break e}if(ze<0)break e;ve+=E}te=y*Me,Q=y*Be,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Me,Me=Be,Be=O;break e}if(ze<0)break e;ve+=E}te=y*Me,Q=y*be,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Me,Me=be,be=O;break e}if(ze<0)break e;ve+=E}te=y*Ie,Q=y*Be,ve=v;e:for(W=0;W<S;++W){if(F=Q+ve,(ze=b[N=te+ve]-b[F])>0){O=Ie,Ie=Be,Be=O;break e}if(ze<0)break e;ve+=E}for(te=y*Se,Q=y*Me,X=y*be,q=y*Ie,Z=y*Be,J=y*Ae,ne=y*se,re=y*we,me=0,ve=v,W=0;W<S;++W)N=te+ve,F=Q+ve,V=X+ve,ae=q+ve,ue=Z+ve,he=J+ve,de=ne+ve,xe=re+ve,We[me]=b[F],Je[me]=b[ae],ye=ye&&We[me]===Je[me],z=b[N],G=b[V],I=b[ue],b[he]=z,b[de]=G,b[xe]=I,++me,ve+=T;for(te=y*oe,Q=y*g,ve=v,W=0;W<S;++W)F=Q+ve,b[N=te+ve]=b[F],ve+=T;for(te=y*fe,Q=y*h,ve=v,W=0;W<S;++W)F=Q+ve,b[N=te+ve]=b[F],ve+=T;if(ye)for(H=ce;H<=Te;++H){for(N=v+H*y,me=0,W=0;W<S&&(ze=b[N]-We[me])==0;++W)me+=C,N+=E;if(ze!==0)if(ze<0){if(H!==ce)for(te=y*H,Q=y*ce,ve=v,W=0;W<S;++W)F=Q+ve,L=b[N=te+ve],b[N]=b[F],b[F]=L,ve+=T;++ce}else for(;;){for(N=v+Te*y,me=0,W=0;W<S&&(ze=b[N]-We[me])==0;++W)me+=C,N+=E;if(!(ze>0)){if(ze<0){for(te=y*H,Q=y*ce,X=y*Te,ve=v,W=0;W<S;++W)F=Q+ve,V=X+ve,L=b[N=te+ve],b[N]=b[F],b[F]=b[V],b[V]=L,ve+=T;++ce,--Te;break}for(te=y*H,Q=y*Te,ve=v,W=0;W<S;++W)F=Q+ve,L=b[N=te+ve],b[N]=b[F],b[F]=L,ve+=T;--Te;break}Te--}}else for(H=ce;H<=Te;++H){for(N=v+H*y,me=0,W=0;W<S&&(Pe=b[N]-We[me])==0;++W)me+=C,N+=E;if(Pe<0){if(H!==ce)for(te=y*H,Q=y*ce,ve=v,W=0;W<S;++W)F=Q+ve,L=b[N=te+ve],b[N]=b[F],b[F]=L,ve+=T;++ce}else{for(N=v+H*y,me=0,W=0;W<S&&(Re=b[N]-Je[me])==0;++W)me+=C,N+=E;if(Re>0)for(;;){for(N=v+Te*y,me=0,W=0;W<S&&(ze=b[N]-Je[me])==0;++W)me+=C,N+=E;if(!(ze>0)){for(N=v+Te*y,me=0,W=0;W<S&&(ze=b[N]-We[me])==0;++W)me+=C,N+=E;if(ze<0){for(te=y*H,Q=y*ce,X=y*Te,ve=v,W=0;W<S;++W)F=Q+ve,V=X+ve,L=b[N=te+ve],b[N]=b[F],b[F]=b[V],b[V]=L,ve+=T;++ce,--Te}else{for(te=y*H,Q=y*Te,ve=v,W=0;W<S;++W)F=Q+ve,L=b[N=te+ve],b[N]=b[F],b[F]=L,ve+=T;--Te}break}if(--Te<H)break}}}for(te=y*g,Q=y*(ce-1),me=0,ve=v,W=0;W<S;++W)F=Q+ve,b[N=te+ve]=b[F],b[F]=We[me],++me,ve+=T;for(te=y*h,Q=y*(Te+1),me=0,ve=v,W=0;W<S;++W)F=Q+ve,b[N=te+ve]=b[F],b[F]=Je[me],++me,ve+=T;if(ce-2-g<=32?u(g,ce-2,b,v,y,w,d,S,T,E,C):x(g,ce-2,b,v,y,w,d,S,T,E,C),h-(Te+2)<=32?u(Te+2,h,b,v,y,w,d,S,T,E,C):x(Te+2,h,b,v,y,w,d,S,T,E,C),ye)return c(We),void c(Je);if(ce<Ae&&Te>we){e:for(;;){for(N=v+ce*y,me=0,ve=v,W=0;W<S;++W){if(b[N]!==We[me])break e;++me,N+=T}++ce}e:for(;;){for(N=v+Te*y,me=0,ve=v,W=0;W<S;++W){if(b[N]!==Je[me])break e;++me,N+=T}--Te}for(H=ce;H<=Te;++H){for(N=v+H*y,me=0,W=0;W<S&&(Pe=b[N]-We[me])==0;++W)me+=C,N+=E;if(Pe===0){if(H!==ce)for(te=y*H,Q=y*ce,ve=v,W=0;W<S;++W)F=Q+ve,L=b[N=te+ve],b[N]=b[F],b[F]=L,ve+=T;++ce}else{for(N=v+H*y,me=0,W=0;W<S&&(Re=b[N]-Je[me])==0;++W)me+=C,N+=E;if(Re===0)for(;;){for(N=v+Te*y,me=0,W=0;W<S&&(ze=b[N]-Je[me])==0;++W)me+=C,N+=E;if(ze!==0){for(N=v+Te*y,me=0,W=0;W<S&&(ze=b[N]-We[me])==0;++W)me+=C,N+=E;if(ze<0){for(te=y*H,Q=y*ce,X=y*Te,ve=v,W=0;W<S;++W)F=Q+ve,V=X+ve,L=b[N=te+ve],b[N]=b[F],b[F]=b[V],b[V]=L,ve+=T;++ce,--Te}else{for(te=y*H,Q=y*Te,ve=v,W=0;W<S;++W)F=Q+ve,L=b[N=te+ve],b[N]=b[F],b[F]=L,ve+=T;--Te}break}if(--Te<H)break}}}}c(We),c(Je),Te-ce<=32?u(ce,Te,b,v,y,w,d,S,T,E,C):x(ce,Te,b,v,y,w,d,S,T,E,C)}}},a={"uint32,1,0":function(u,p){return function(c){var x=c.data,g=0|c.offset,h=c.shape,b=c.stride,v=0|b[0],y=0|h[0],w=0|b[1],d=0|h[1],S=w,T=w;y<=32?u(0,y-1,x,g,v,w,y,d,S,T,1):p(0,y-1,x,g,v,w,y,d,S,T,1)}}};f.exports=function(u,p){var c=[p,u].join(","),x=a[c],g=function(b,v){var y=r(v),w=[v,b].join(","),d=n[w];return y?d(y[0],y[1]):d()}(u,p),h=function(b,v,y){var w=r(v),d=[v,b].join(","),S=s[d];return b.length>1&&w?S(y,w[0],w[1]):S(y)}(u,p,g);return x(g,h)}},8729:function(f,o,e){var i=e(8139),r={};f.exports=function(n){var s=n.order,a=n.dtype,u=[s,a].join(":"),p=r[u];return p||(r[u]=p=i(s,a)),p(n),n}},5050:function(f,o,e){var i=e(4780),r=typeof Float64Array<"u";function n(c,x){return c[0]-x[0]}function s(){var c,x=this.stride,g=new Array(x.length);for(c=0;c<g.length;++c)g[c]=[Math.abs(x[c]),c];g.sort(n);var h=new Array(g.length);for(c=0;c<h.length;++c)h[c]=g[c][1];return h}var a={T:function(c){function x(h){this.data=h}var g=x.prototype;return g.dtype=c,g.index=function(){return-1},g.size=0,g.dimension=-1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new x(this.data)},g.get=g.set=function(){},g.pick=function(){return null},function(h){return new x(h)}},0:function(c,x){function g(b,v){this.data=b,this.offset=v}var h=g.prototype;return h.dtype=c,h.index=function(){return this.offset},h.dimension=0,h.size=1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new g(this.data,this.offset)},h.pick=function(){return x(this.data)},h.valueOf=h.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},h.set=function(b){return c==="generic"?this.data.set(this.offset,b):this.data[this.offset]=b},function(b,v,y,w){return new g(b,w)}},1:function(c,x,g){function h(v,y,w,d){this.data=v,this.shape=[y],this.stride=[w],this.offset=0|d}var b=h.prototype;return b.dtype=c,b.dimension=1,Object.defineProperty(b,"size",{get:function(){return this.shape[0]}}),b.order=[0],b.set=function(v,y){return c==="generic"?this.data.set(this.offset+this.stride[0]*v,y):this.data[this.offset+this.stride[0]*v]=y},b.get=function(v){return c==="generic"?this.data.get(this.offset+this.stride[0]*v):this.data[this.offset+this.stride[0]*v]},b.index=function(v){return this.offset+this.stride[0]*v},b.hi=function(v){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,this.stride[0],this.offset)},b.lo=function(v){var y=this.offset,w=0,d=this.shape[0],S=this.stride[0];return typeof v=="number"&&v>=0&&(y+=S*(w=0|v),d-=w),new h(this.data,d,S,y)},b.step=function(v){var y=this.shape[0],w=this.stride[0],d=this.offset,S=0,T=Math.ceil;return typeof v=="number"&&((S=0|v)<0?(d+=w*(y-1),y=T(-y/S)):y=T(y/S),w*=S),new h(this.data,y,w,d)},b.transpose=function(v){v=v===void 0?0:0|v;var y=this.shape,w=this.stride;return new h(this.data,y[v],w[v],this.offset)},b.pick=function(v){var y=[],w=[],d=this.offset;return typeof v=="number"&&v>=0?d=d+this.stride[0]*v|0:(y.push(this.shape[0]),w.push(this.stride[0])),(0,x[y.length+1])(this.data,y,w,d)},function(v,y,w,d){return new h(v,y[0],w[0],d)}},2:function(c,x,g){function h(v,y,w,d,S,T){this.data=v,this.shape=[y,w],this.stride=[d,S],this.offset=0|T}var b=h.prototype;return b.dtype=c,b.dimension=2,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(b,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),b.set=function(v,y,w){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*y,w):this.data[this.offset+this.stride[0]*v+this.stride[1]*y]=w},b.get=function(v,y){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*y):this.data[this.offset+this.stride[0]*v+this.stride[1]*y]},b.index=function(v,y){return this.offset+this.stride[0]*v+this.stride[1]*y},b.hi=function(v,y){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof y!="number"||y<0?this.shape[1]:0|y,this.stride[0],this.stride[1],this.offset)},b.lo=function(v,y){var w=this.offset,d=0,S=this.shape[0],T=this.shape[1],E=this.stride[0],C=this.stride[1];return typeof v=="number"&&v>=0&&(w+=E*(d=0|v),S-=d),typeof y=="number"&&y>=0&&(w+=C*(d=0|y),T-=d),new h(this.data,S,T,E,C,w)},b.step=function(v,y){var w=this.shape[0],d=this.shape[1],S=this.stride[0],T=this.stride[1],E=this.offset,C=0,L=Math.ceil;return typeof v=="number"&&((C=0|v)<0?(E+=S*(w-1),w=L(-w/C)):w=L(w/C),S*=C),typeof y=="number"&&((C=0|y)<0?(E+=T*(d-1),d=L(-d/C)):d=L(d/C),T*=C),new h(this.data,w,d,S,T,E)},b.transpose=function(v,y){v=v===void 0?0:0|v,y=y===void 0?1:0|y;var w=this.shape,d=this.stride;return new h(this.data,w[v],w[y],d[v],d[y],this.offset)},b.pick=function(v,y){var w=[],d=[],S=this.offset;return typeof v=="number"&&v>=0?S=S+this.stride[0]*v|0:(w.push(this.shape[0]),d.push(this.stride[0])),typeof y=="number"&&y>=0?S=S+this.stride[1]*y|0:(w.push(this.shape[1]),d.push(this.stride[1])),(0,x[w.length+1])(this.data,w,d,S)},function(v,y,w,d){return new h(v,y[0],y[1],w[0],w[1],d)}},3:function(c,x,g){function h(v,y,w,d,S,T,E,C){this.data=v,this.shape=[y,w,d],this.stride=[S,T,E],this.offset=0|C}var b=h.prototype;return b.dtype=c,b.dimension=3,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(b,"order",{get:function(){var v=Math.abs(this.stride[0]),y=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return v>y?y>w?[2,1,0]:v>w?[1,2,0]:[1,0,2]:v>w?[2,0,1]:w>y?[0,1,2]:[0,2,1]}}),b.set=function(v,y,w,d){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w,d):this.data[this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w]=d},b.get=function(v,y,w){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w):this.data[this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w]},b.index=function(v,y,w){return this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w},b.hi=function(v,y,w){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof y!="number"||y<0?this.shape[1]:0|y,typeof w!="number"||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},b.lo=function(v,y,w){var d=this.offset,S=0,T=this.shape[0],E=this.shape[1],C=this.shape[2],L=this.stride[0],O=this.stride[1],z=this.stride[2];return typeof v=="number"&&v>=0&&(d+=L*(S=0|v),T-=S),typeof y=="number"&&y>=0&&(d+=O*(S=0|y),E-=S),typeof w=="number"&&w>=0&&(d+=z*(S=0|w),C-=S),new h(this.data,T,E,C,L,O,z,d)},b.step=function(v,y,w){var d=this.shape[0],S=this.shape[1],T=this.shape[2],E=this.stride[0],C=this.stride[1],L=this.stride[2],O=this.offset,z=0,G=Math.ceil;return typeof v=="number"&&((z=0|v)<0?(O+=E*(d-1),d=G(-d/z)):d=G(d/z),E*=z),typeof y=="number"&&((z=0|y)<0?(O+=C*(S-1),S=G(-S/z)):S=G(S/z),C*=z),typeof w=="number"&&((z=0|w)<0?(O+=L*(T-1),T=G(-T/z)):T=G(T/z),L*=z),new h(this.data,d,S,T,E,C,L,O)},b.transpose=function(v,y,w){v=v===void 0?0:0|v,y=y===void 0?1:0|y,w=w===void 0?2:0|w;var d=this.shape,S=this.stride;return new h(this.data,d[v],d[y],d[w],S[v],S[y],S[w],this.offset)},b.pick=function(v,y,w){var d=[],S=[],T=this.offset;return typeof v=="number"&&v>=0?T=T+this.stride[0]*v|0:(d.push(this.shape[0]),S.push(this.stride[0])),typeof y=="number"&&y>=0?T=T+this.stride[1]*y|0:(d.push(this.shape[1]),S.push(this.stride[1])),typeof w=="number"&&w>=0?T=T+this.stride[2]*w|0:(d.push(this.shape[2]),S.push(this.stride[2])),(0,x[d.length+1])(this.data,d,S,T)},function(v,y,w,d){return new h(v,y[0],y[1],y[2],w[0],w[1],w[2],d)}},4:function(c,x,g){function h(v,y,w,d,S,T,E,C,L,O){this.data=v,this.shape=[y,w,d,S],this.stride=[T,E,C,L],this.offset=0|O}var b=h.prototype;return b.dtype=c,b.dimension=4,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(b,"order",{get:g}),b.set=function(v,y,w,d,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d,S):this.data[this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d]=S},b.get=function(v,y,w,d){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d):this.data[this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d]},b.index=function(v,y,w,d){return this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d},b.hi=function(v,y,w,d){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof y!="number"||y<0?this.shape[1]:0|y,typeof w!="number"||w<0?this.shape[2]:0|w,typeof d!="number"||d<0?this.shape[3]:0|d,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},b.lo=function(v,y,w,d){var S=this.offset,T=0,E=this.shape[0],C=this.shape[1],L=this.shape[2],O=this.shape[3],z=this.stride[0],G=this.stride[1],I=this.stride[2],H=this.stride[3];return typeof v=="number"&&v>=0&&(S+=z*(T=0|v),E-=T),typeof y=="number"&&y>=0&&(S+=G*(T=0|y),C-=T),typeof w=="number"&&w>=0&&(S+=I*(T=0|w),L-=T),typeof d=="number"&&d>=0&&(S+=H*(T=0|d),O-=T),new h(this.data,E,C,L,O,z,G,I,H,S)},b.step=function(v,y,w,d){var S=this.shape[0],T=this.shape[1],E=this.shape[2],C=this.shape[3],L=this.stride[0],O=this.stride[1],z=this.stride[2],G=this.stride[3],I=this.offset,H=0,N=Math.ceil;return typeof v=="number"&&((H=0|v)<0?(I+=L*(S-1),S=N(-S/H)):S=N(S/H),L*=H),typeof y=="number"&&((H=0|y)<0?(I+=O*(T-1),T=N(-T/H)):T=N(T/H),O*=H),typeof w=="number"&&((H=0|w)<0?(I+=z*(E-1),E=N(-E/H)):E=N(E/H),z*=H),typeof d=="number"&&((H=0|d)<0?(I+=G*(C-1),C=N(-C/H)):C=N(C/H),G*=H),new h(this.data,S,T,E,C,L,O,z,G,I)},b.transpose=function(v,y,w,d){v=v===void 0?0:0|v,y=y===void 0?1:0|y,w=w===void 0?2:0|w,d=d===void 0?3:0|d;var S=this.shape,T=this.stride;return new h(this.data,S[v],S[y],S[w],S[d],T[v],T[y],T[w],T[d],this.offset)},b.pick=function(v,y,w,d){var S=[],T=[],E=this.offset;return typeof v=="number"&&v>=0?E=E+this.stride[0]*v|0:(S.push(this.shape[0]),T.push(this.stride[0])),typeof y=="number"&&y>=0?E=E+this.stride[1]*y|0:(S.push(this.shape[1]),T.push(this.stride[1])),typeof w=="number"&&w>=0?E=E+this.stride[2]*w|0:(S.push(this.shape[2]),T.push(this.stride[2])),typeof d=="number"&&d>=0?E=E+this.stride[3]*d|0:(S.push(this.shape[3]),T.push(this.stride[3])),(0,x[S.length+1])(this.data,S,T,E)},function(v,y,w,d){return new h(v,y[0],y[1],y[2],y[3],w[0],w[1],w[2],w[3],d)}},5:function(c,x,g){function h(v,y,w,d,S,T,E,C,L,O,z,G){this.data=v,this.shape=[y,w,d,S,T],this.stride=[E,C,L,O,z],this.offset=0|G}var b=h.prototype;return b.dtype=c,b.dimension=5,Object.defineProperty(b,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(b,"order",{get:g}),b.set=function(v,y,w,d,S,T){return c==="generic"?this.data.set(this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d+this.stride[4]*S,T):this.data[this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d+this.stride[4]*S]=T},b.get=function(v,y,w,d,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d+this.stride[4]*S):this.data[this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d+this.stride[4]*S]},b.index=function(v,y,w,d,S){return this.offset+this.stride[0]*v+this.stride[1]*y+this.stride[2]*w+this.stride[3]*d+this.stride[4]*S},b.hi=function(v,y,w,d,S){return new h(this.data,typeof v!="number"||v<0?this.shape[0]:0|v,typeof y!="number"||y<0?this.shape[1]:0|y,typeof w!="number"||w<0?this.shape[2]:0|w,typeof d!="number"||d<0?this.shape[3]:0|d,typeof S!="number"||S<0?this.shape[4]:0|S,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},b.lo=function(v,y,w,d,S){var T=this.offset,E=0,C=this.shape[0],L=this.shape[1],O=this.shape[2],z=this.shape[3],G=this.shape[4],I=this.stride[0],H=this.stride[1],N=this.stride[2],F=this.stride[3],V=this.stride[4];return typeof v=="number"&&v>=0&&(T+=I*(E=0|v),C-=E),typeof y=="number"&&y>=0&&(T+=H*(E=0|y),L-=E),typeof w=="number"&&w>=0&&(T+=N*(E=0|w),O-=E),typeof d=="number"&&d>=0&&(T+=F*(E=0|d),z-=E),typeof S=="number"&&S>=0&&(T+=V*(E=0|S),G-=E),new h(this.data,C,L,O,z,G,I,H,N,F,V,T)},b.step=function(v,y,w,d,S){var T=this.shape[0],E=this.shape[1],C=this.shape[2],L=this.shape[3],O=this.shape[4],z=this.stride[0],G=this.stride[1],I=this.stride[2],H=this.stride[3],N=this.stride[4],F=this.offset,V=0,W=Math.ceil;return typeof v=="number"&&((V=0|v)<0?(F+=z*(T-1),T=W(-T/V)):T=W(T/V),z*=V),typeof y=="number"&&((V=0|y)<0?(F+=G*(E-1),E=W(-E/V)):E=W(E/V),G*=V),typeof w=="number"&&((V=0|w)<0?(F+=I*(C-1),C=W(-C/V)):C=W(C/V),I*=V),typeof d=="number"&&((V=0|d)<0?(F+=H*(L-1),L=W(-L/V)):L=W(L/V),H*=V),typeof S=="number"&&((V=0|S)<0?(F+=N*(O-1),O=W(-O/V)):O=W(O/V),N*=V),new h(this.data,T,E,C,L,O,z,G,I,H,N,F)},b.transpose=function(v,y,w,d,S){v=v===void 0?0:0|v,y=y===void 0?1:0|y,w=w===void 0?2:0|w,d=d===void 0?3:0|d,S=S===void 0?4:0|S;var T=this.shape,E=this.stride;return new h(this.data,T[v],T[y],T[w],T[d],T[S],E[v],E[y],E[w],E[d],E[S],this.offset)},b.pick=function(v,y,w,d,S){var T=[],E=[],C=this.offset;return typeof v=="number"&&v>=0?C=C+this.stride[0]*v|0:(T.push(this.shape[0]),E.push(this.stride[0])),typeof y=="number"&&y>=0?C=C+this.stride[1]*y|0:(T.push(this.shape[1]),E.push(this.stride[1])),typeof w=="number"&&w>=0?C=C+this.stride[2]*w|0:(T.push(this.shape[2]),E.push(this.stride[2])),typeof d=="number"&&d>=0?C=C+this.stride[3]*d|0:(T.push(this.shape[3]),E.push(this.stride[3])),typeof S=="number"&&S>=0?C=C+this.stride[4]*S|0:(T.push(this.shape[4]),E.push(this.stride[4])),(0,x[T.length+1])(this.data,T,E,C)},function(v,y,w,d){return new h(v,y[0],y[1],y[2],y[3],y[4],w[0],w[1],w[2],w[3],w[4],d)}}};function u(c,x){var g=x===-1?"T":String(x),h=a[g];return x===-1?h(c):x===0?h(c,p[c][0]):h(c,p[c],s)}var p={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};f.exports=function(c,x,g,h){if(c===void 0)return(0,p.array[0])([]);typeof c=="number"&&(c=[c]),x===void 0&&(x=[c.length]);var b=x.length;if(g===void 0){g=new Array(b);for(var v=b-1,y=1;v>=0;--v)g[v]=y,y*=x[v]}if(h===void 0)for(h=0,v=0;v<b;++v)g[v]<0&&(h-=(x[v]-1)*g[v]);for(var w=function(S){if(i(S))return"buffer";if(r)switch(Object.prototype.toString.call(S)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(S)?"array":"generic"}(c),d=p[w];d.length<=b+1;)d.push(u(w,d.length-1));return(0,d[b+1])(c,x,g,h)}},8551:function(f,o,e){var i=e(8362),r=Math.pow(2,-1074),n=-1>>>0;f.exports=function(s,a){if(isNaN(s)||isNaN(a))return NaN;if(s===a)return s;if(s===0)return a<0?-r:r;var u=i.hi(s),p=i.lo(s);return a>s==s>0?p===n?(u+=1,p=0):p+=1:p===0?(p=n,u-=1):p-=1,i.pack(p,u)}},115:function(f,o){o.vertexNormals=function(e,i,r){for(var n=i.length,s=new Array(n),a=r===void 0?1e-6:r,u=0;u<n;++u)s[u]=[0,0,0];for(u=0;u<e.length;++u)for(var p=e[u],c=0,x=p[p.length-1],g=p[0],h=0;h<p.length;++h){c=x,x=g,g=p[(h+1)%p.length];for(var b=i[c],v=i[x],y=i[g],w=new Array(3),d=0,S=new Array(3),T=0,E=0;E<3;++E)w[E]=b[E]-v[E],d+=w[E]*w[E],S[E]=y[E]-v[E],T+=S[E]*S[E];if(d*T>a){var C=s[x],L=1/Math.sqrt(d*T);for(E=0;E<3;++E){var O=(E+1)%3,z=(E+2)%3;C[E]+=L*(S[O]*w[z]-S[z]*w[O])}}}for(u=0;u<n;++u){C=s[u];var G=0;for(E=0;E<3;++E)G+=C[E]*C[E];if(G>a)for(L=1/Math.sqrt(G),E=0;E<3;++E)C[E]*=L;else for(E=0;E<3;++E)C[E]=0}return s},o.faceNormals=function(e,i,r){for(var n=e.length,s=new Array(n),a=r===void 0?1e-6:r,u=0;u<n;++u){for(var p=e[u],c=new Array(3),x=0;x<3;++x)c[x]=i[p[x]];var g=new Array(3),h=new Array(3);for(x=0;x<3;++x)g[x]=c[1][x]-c[0][x],h[x]=c[2][x]-c[0][x];var b=new Array(3),v=0;for(x=0;x<3;++x){var y=(x+1)%3,w=(x+2)%3;b[x]=g[y]*h[w]-g[w]*h[y],v+=b[x]*b[x]}for(v=v>a?1/Math.sqrt(v):0,x=0;x<3;++x)b[x]*=v;s[u]=b}return s}},567:function(f){f.exports=function(o,e,i,r,n,s,a,u,p,c){var x=e+s+c;if(g>0){var g=Math.sqrt(x+1);o[0]=.5*(a-p)/g,o[1]=.5*(u-r)/g,o[2]=.5*(i-s)/g,o[3]=.5*g}else{var h=Math.max(e,s,c);g=Math.sqrt(2*h-x+1),e>=h?(o[0]=.5*g,o[1]=.5*(n+i)/g,o[2]=.5*(u+r)/g,o[3]=.5*(a-p)/g):s>=h?(o[0]=.5*(i+n)/g,o[1]=.5*g,o[2]=.5*(p+a)/g,o[3]=.5*(u-r)/g):(o[0]=.5*(r+u)/g,o[1]=.5*(a+p)/g,o[2]=.5*g,o[3]=.5*(i-n)/g)}return o}},7774:function(f,o,e){f.exports=function(h){var b=(h=h||{}).center||[0,0,0],v=h.rotation||[0,0,0,1],y=h.radius||1;b=[].slice.call(b,0,3),c(v=[].slice.call(v,0,4),v);var w=new x(v,b,Math.log(y));return w.setDistanceLimits(h.zoomMin,h.zoomMax),("eye"in h||"up"in h)&&w.lookAt(0,h.eye,h.center,h.up),w};var i=e(8444),r=e(3012),n=e(5950),s=e(7437),a=e(567);function u(h,b,v){return Math.sqrt(Math.pow(h,2)+Math.pow(b,2)+Math.pow(v,2))}function p(h,b,v,y){return Math.sqrt(Math.pow(h,2)+Math.pow(b,2)+Math.pow(v,2)+Math.pow(y,2))}function c(h,b){var v=b[0],y=b[1],w=b[2],d=b[3],S=p(v,y,w,d);S>1e-6?(h[0]=v/S,h[1]=y/S,h[2]=w/S,h[3]=d/S):(h[0]=h[1]=h[2]=0,h[3]=1)}function x(h,b,v){this.radius=i([v]),this.center=i(b),this.rotation=i(h),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=x.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(h){this.radius.curve(h),this.center.curve(h),this.rotation.curve(h);var b=this.computedRotation;c(b,b);var v=this.computedMatrix;n(v,b);var y=this.computedCenter,w=this.computedEye,d=this.computedUp,S=Math.exp(this.computedRadius[0]);w[0]=y[0]+S*v[2],w[1]=y[1]+S*v[6],w[2]=y[2]+S*v[10],d[0]=v[1],d[1]=v[5],d[2]=v[9];for(var T=0;T<3;++T){for(var E=0,C=0;C<3;++C)E+=v[T+4*C]*w[C];v[12+T]=-E}},g.getMatrix=function(h,b){this.recalcMatrix(h);var v=this.computedMatrix;if(b){for(var y=0;y<16;++y)b[y]=v[y];return b}return v},g.idle=function(h){this.center.idle(h),this.radius.idle(h),this.rotation.idle(h)},g.flush=function(h){this.center.flush(h),this.radius.flush(h),this.rotation.flush(h)},g.pan=function(h,b,v,y){b=b||0,v=v||0,y=y||0,this.recalcMatrix(h);var w=this.computedMatrix,d=w[1],S=w[5],T=w[9],E=u(d,S,T);d/=E,S/=E,T/=E;var C=w[0],L=w[4],O=w[8],z=C*d+L*S+O*T,G=u(C-=d*z,L-=S*z,O-=T*z);C/=G,L/=G,O/=G,w[2],w[6],w[10];var I=C*b+d*v,H=L*b+S*v,N=O*b+T*v;this.center.move(h,I,H,N);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+y),this.radius.set(h,Math.log(F))},g.rotate=function(h,b,v,y){this.recalcMatrix(h),b=b||0,v=v||0;var w=this.computedMatrix,d=w[0],S=w[4],T=w[8],E=w[1],C=w[5],L=w[9],O=w[2],z=w[6],G=w[10],I=b*d+v*E,H=b*S+v*C,N=b*T+v*L,F=-(z*N-G*H),V=-(G*I-O*N),W=-(O*H-z*I),te=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(V,2)-Math.pow(W,2))),Q=p(F,V,W,te);Q>1e-6?(F/=Q,V/=Q,W/=Q,te/=Q):(F=V=W=0,te=1);var X=this.computedRotation,q=X[0],Z=X[1],J=X[2],ne=X[3],re=q*te+ne*F+Z*W-J*V,ae=Z*te+ne*V+J*F-q*W,ue=J*te+ne*W+q*V-Z*F,he=ne*te-q*F-Z*V-J*W;if(y){F=O,V=z,W=G;var de=Math.sin(y)/u(F,V,W);F*=de,V*=de,W*=de,he=he*(te=Math.cos(b))-(re=re*te+he*F+ae*W-ue*V)*F-(ae=ae*te+he*V+ue*F-re*W)*V-(ue=ue*te+he*W+re*V-ae*F)*W}var xe=p(re,ae,ue,he);xe>1e-6?(re/=xe,ae/=xe,ue/=xe,he/=xe):(re=ae=ue=0,he=1),this.rotation.set(h,re,ae,ue,he)},g.lookAt=function(h,b,v,y){this.recalcMatrix(h),v=v||this.computedCenter,b=b||this.computedEye,y=y||this.computedUp;var w=this.computedMatrix;r(w,b,v,y);var d=this.computedRotation;a(d,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),c(d,d),this.rotation.set(h,d[0],d[1],d[2],d[3]);for(var S=0,T=0;T<3;++T)S+=Math.pow(v[T]-b[T],2);this.radius.set(h,.5*Math.log(Math.max(S,1e-6))),this.center.set(h,v[0],v[1],v[2])},g.translate=function(h,b,v,y){this.center.move(h,b||0,v||0,y||0)},g.setMatrix=function(h,b){var v=this.computedRotation;a(v,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),c(v,v),this.rotation.set(h,v[0],v[1],v[2],v[3]);var y=this.computedMatrix;s(y,b);var w=y[15];if(Math.abs(w)>1e-6){var d=y[12]/w,S=y[13]/w,T=y[14]/w;this.recalcMatrix(h);var E=Math.exp(this.computedRadius[0]);this.center.set(h,d-y[2]*E,S-y[6]*E,T-y[10]*E),this.radius.idle(h)}else this.center.idle(h),this.radius.idle(h)},g.setDistance=function(h,b){b>0&&this.radius.set(h,Math.log(b))},g.setDistanceLimits=function(h,b){h=h>0?Math.log(h):-1/0,b=b>0?Math.log(b):1/0,b=Math.max(b,h),this.radius.bounds[0][0]=h,this.radius.bounds[1][0]=b},g.getDistanceLimits=function(h){var b=this.radius.bounds;return h?(h[0]=Math.exp(b[0][0]),h[1]=Math.exp(b[1][0]),h):[Math.exp(b[0][0]),Math.exp(b[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(h){var b=this.lastT(),v=h.center;v&&this.center.set(b,v[0],v[1],v[2]);var y=h.rotation;y&&this.rotation.set(b,y[0],y[1],y[2],y[3]);var w=h.distance;w&&w>0&&this.radius.set(b,Math.log(w)),this.setDistanceLimits(h.zoomMin,h.zoomMax)}},4930:function(f,o,e){var i=e(6184);f.exports=function(r,n,s){return i(s=s!==void 0?s+"":" ",n)+r}},4405:function(f){f.exports=function(o,e){e||(e=[0,""]),o=String(o);var i=parseFloat(o,10);return e[0]=i,e[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},4166:function(f,o,e){f.exports=function(r,n){for(var s=0|n.length,a=r.length,u=[new Array(s),new Array(s)],p=0;p<s;++p)u[0][p]=[],u[1][p]=[];for(p=0;p<a;++p){var c=r[p];u[0][c[0]].push(c),u[1][c[1]].push(c)}var x=[];for(p=0;p<s;++p)u[0][p].length+u[1][p].length===0&&x.push([p]);function g(S,T){var E=u[T][S[T]];E.splice(E.indexOf(S),1)}function h(S,T,E){for(var C,L,O,z=0;z<2;++z)if(u[z][T].length>0){C=u[z][T][0],O=z;break}L=C[1^O];for(var G=0;G<2;++G)for(var I=u[G][T],H=0;H<I.length;++H){var N=I[H],F=N[1^G];i(n[S],n[T],n[L],n[F])>0&&(C=N,L=F,O=G)}return E||C&&g(C,O),L}function b(S,T){var E=u[T][S][0],C=[S];g(E,T);for(var L=E[1^T];;){for(;L!==S;)C.push(L),L=h(C[C.length-2],L,!1);if(u[0][S].length+u[1][S].length===0)break;var O=C[C.length-1],z=S,G=C[1],I=h(O,z,!0);if(i(n[O],n[z],n[G],n[I])<0)break;C.push(S),L=h(O,z)}return C}function v(S,T){return T[1]===T[T.length-1]}for(p=0;p<s;++p)for(var y=0;y<2;++y){for(var w=[];u[y][p].length>0;){u[0][p].length;var d=b(p,y);v(0,d)?w.push.apply(w,d):(w.length>0&&x.push(w),w=d)}w.length>0&&x.push(w)}return x};var i=e(9398)},3959:function(f,o,e){f.exports=function(r,n){for(var s=i(r,n.length),a=new Array(n.length),u=new Array(n.length),p=[],c=0;c<n.length;++c){var x=s[c].length;u[c]=x,a[c]=!0,x<=1&&p.push(c)}for(;p.length>0;){a[y=p.pop()]=!1;var g=s[y];for(c=0;c<g.length;++c){var h=g[c];--u[h]==0&&p.push(h)}}var b=new Array(n.length),v=[];for(c=0;c<n.length;++c)if(a[c]){var y=v.length;b[c]=y,v.push(n[c])}else b[c]=-1;var w=[];for(c=0;c<r.length;++c){var d=r[c];a[d[0]]&&a[d[1]]&&w.push([b[d[0]],b[d[1]]])}return[w,v]};var i=e(8348)},8040:function(f,o,e){f.exports=function(x,g){var h=p(x,g);x=h[0];for(var b=(g=h[1]).length,v=(x.length,i(x,g.length)),y=0;y<b;++y)if(v[y].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=r(x,g),d=(w=w.filter(function(Le){for(var Ae=Le.length,we=[0],se=0;se<Ae;++se){var oe=g[Le[se]],fe=g[Le[(se+1)%Ae]],Se=s(-oe[0],oe[1]),Me=s(-oe[0],fe[1]),be=s(fe[0],oe[1]),Ie=s(fe[0],fe[1]);we=a(we,a(a(Se,Me),a(be,Ie)))}return we[we.length-1]>0})).length,S=new Array(d),T=new Array(d);for(y=0;y<d;++y){S[y]=y;var E=new Array(d),C=w[y].map(function(Le){return g[Le]}),L=n([C]),O=0;e:for(var z=0;z<d;++z)if(E[z]=0,y!==z){for(var G=(me=w[z]).length,I=0;I<G;++I){var H=L(g[me[I]]);if(H!==0){H<0&&(E[z]=1,O+=1);continue e}}E[z]=1,O+=1}T[y]=[O,y,E]}for(T.sort(function(Le,Ae){return Ae[0]-Le[0]}),y=0;y<d;++y){var N=(E=T[y])[1],F=E[2];for(z=0;z<d;++z)F[z]&&(S[z]=N)}var V=function(Le){for(var Ae=new Array(Le),we=0;we<Le;++we)Ae[we]=[];return Ae}(d);for(y=0;y<d;++y)V[y].push(S[y]),V[S[y]].push(y);var W={},te=c(b,!1);for(y=0;y<d;++y)for(G=(me=w[y]).length,z=0;z<G;++z){var Q=me[z],X=me[(z+1)%G],q=Math.min(Q,X)+":"+Math.max(Q,X);if(q in W){var Z=W[q];V[Z].push(y),V[y].push(Z),te[Q]=te[X]=!0}else W[q]=y}function J(Le){for(var Ae=Le.length,we=0;we<Ae;++we)if(!te[Le[we]])return!1;return!0}var ne=[],re=c(d,-1);for(y=0;y<d;++y)S[y]!==y||J(w[y])?re[y]=-1:(ne.push(y),re[y]=0);for(h=[];ne.length>0;){var ae=ne.pop(),ue=V[ae];u(ue,function(Le,Ae){return Le-Ae});var he,de=ue.length,xe=re[ae];for(xe===0&&(he=[me=w[ae]]),y=0;y<de;++y){var me,ve=ue[y];re[ve]>=0||(re[ve]=1^xe,ne.push(ve),xe===0&&(J(me=w[ve])||(me.reverse(),he.push(me))))}xe===0&&h.push(he)}return h};var i=e(8348),r=e(4166),n=e(211),s=e(9660),a=e(9662),u=e(1215),p=e(3959);function c(x,g){for(var h=new Array(x),b=0;b<x;++b)h[b]=g;return h}},211:function(f,o,e){f.exports=function(c){for(var x=c.length,g=[],h=[],b=0;b<x;++b)for(var v=c[b],y=v.length,w=y-1,d=0;d<y;w=d++){var S=v[w],T=v[d];S[0]===T[0]?h.push([S,T]):g.push([S,T])}if(g.length===0)return h.length===0?p:(E=u(h),function(O){return E(O[0],O[1])?0:1});var E,C=r(g),L=function(O,z){return function(G){var I=s.le(z,G[0]);if(I<0)return 1;var H=O[I];if(!H){if(!(I>0&&z[I]===G[0]))return 1;H=O[I-1]}for(var N=1;H;){var F=H.key,V=i(G,F[0],F[1]);if(F[0][0]<F[1][0])if(V<0)H=H.left;else{if(!(V>0))return 0;N=-1,H=H.right}else if(V>0)H=H.left;else{if(!(V<0))return 0;N=1,H=H.right}}return N}}(C.slabs,C.coordinates);return h.length===0?L:function(O,z){return function(G){return O(G[0],G[1])?0:z(G)}}(u(h),L)};var i=e(417)[3],r=e(4385),n=e(9014),s=e(5070);function a(){return!0}function u(c){for(var x={},g=0;g<c.length;++g){var h=c[g],b=h[0][0],v=h[0][1],y=h[1][1],w=[Math.min(v,y),Math.max(v,y)];b in x?x[b].push(w):x[b]=[w]}var d={},S=Object.keys(x);for(g=0;g<S.length;++g){var T=x[S[g]];d[S[g]]=n(T)}return function(E){return function(C,L){var O=E[C];return!!O&&!!O.queryPoint(L,a)}}(d)}function p(c){return 1}},7309:function(f){var o=new Float64Array(4),e=new Float64Array(4),i=new Float64Array(4);f.exports=function(r,n,s,a,u){o.length<a.length&&(o=new Float64Array(a.length),e=new Float64Array(a.length),i=new Float64Array(a.length));for(var p=0;p<a.length;++p)o[p]=r[p]-a[p],e[p]=n[p]-r[p],i[p]=s[p]-r[p];var c=0,x=0,g=0,h=0,b=0,v=0;for(p=0;p<a.length;++p){var y=e[p],w=i[p],d=o[p];c+=y*y,x+=y*w,g+=w*w,h+=d*y,b+=d*w,v+=d*d}var S,T,E,C,L,O=Math.abs(c*g-x*x),z=x*b-g*h,G=x*h-c*b;if(z+G<=O)if(z<0)G<0&&h<0?(G=0,-h>=c?(z=1,S=c+2*h+v):S=h*(z=-h/c)+v):(z=0,b>=0?(G=0,S=v):-b>=g?(G=1,S=g+2*b+v):S=b*(G=-b/g)+v);else if(G<0)G=0,h>=0?(z=0,S=v):-h>=c?(z=1,S=c+2*h+v):S=h*(z=-h/c)+v;else{var I=1/O;S=(z*=I)*(c*z+x*(G*=I)+2*h)+G*(x*z+g*G+2*b)+v}else z<0?(E=g+b)>(T=x+h)?(C=E-T)>=(L=c-2*x+g)?(z=1,G=0,S=c+2*h+v):S=(z=C/L)*(c*z+x*(G=1-z)+2*h)+G*(x*z+g*G+2*b)+v:(z=0,E<=0?(G=1,S=g+2*b+v):b>=0?(G=0,S=v):S=b*(G=-b/g)+v):G<0?(E=c+h)>(T=x+b)?(C=E-T)>=(L=c-2*x+g)?(G=1,z=0,S=g+2*b+v):S=(z=1-(G=C/L))*(c*z+x*G+2*h)+G*(x*z+g*G+2*b)+v:(G=0,E<=0?(z=1,S=c+2*h+v):h>=0?(z=0,S=v):S=h*(z=-h/c)+v):(C=g+b-x-h)<=0?(z=0,G=1,S=g+2*b+v):C>=(L=c-2*x+g)?(z=1,G=0,S=c+2*h+v):S=(z=C/L)*(c*z+x*(G=1-z)+2*h)+G*(x*z+g*G+2*b)+v;var H=1-z-G;for(p=0;p<a.length;++p)u[p]=H*r[p]+z*n[p]+G*s[p];return S<0?0:S}},1116:function(f,o,e){f.exports=e(6093)},7584:function(f,o,e){var i=e(1539);f.exports=function(r,n){for(var s=r.length,a=new Array(s),u=0;u<s;++u)a[u]=i(r[u],n[u]);return a}},2826:function(f,o,e){f.exports=function(r){for(var n=new Array(r.length),s=0;s<r.length;++s)n[s]=i(r[s]);return n};var i=e(5125)},4469:function(f,o,e){var i=e(5125),r=e(3962);f.exports=function(n,s){for(var a=i(s),u=n.length,p=new Array(u),c=0;c<u;++c)p[c]=r(n[c],a);return p}},6695:function(f,o,e){var i=e(4354);f.exports=function(r,n){for(var s=r.length,a=new Array(s),u=0;u<s;++u)a[u]=i(r[u],n[u]);return a}},7037:function(f,o,e){var i=e(9209),r=e(1284),n=e(9887);f.exports=function(s){s.sort(r);for(var a=s.length,u=0,p=0;p<a;++p){var c=s[p],x=n(c);if(x!==0){if(u>0){var g=s[u-1];if(i(c,g)===0&&n(g)!==x){u-=1;continue}}s[u++]=c}}return s.length=u,s}},6184:function(f){var o,e="";f.exports=function(i,r){if(typeof i!="string")throw new TypeError("expected a string");if(r===1)return i;if(r===2)return i+i;var n=i.length*r;if(o!==i||o===void 0)o=i,e="";else if(e.length>=n)return e.substr(0,n);for(;n>e.length&&r>1;)1&r&&(e+=i),r>>=1,i+=i;return e=(e+=i).substr(0,n)}},8161:function(f,o,e){f.exports=e.g.performance&&e.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},402:function(f){f.exports=function(o){for(var e=o.length,i=o[o.length-1],r=e,n=e-2;n>=0;--n){var s=i;(p=(u=o[n])-((i=s+u)-s))&&(o[--r]=i,i=p)}var a=0;for(n=r;n<e;++n){var u,p;(p=(u=i)-((i=(s=o[n])+u)-s))&&(o[a++]=p)}return o[a++]=i,o.length=a,o}},8167:function(f,o,e){var i=e(9660),r=e(9662),n=e(8289),s=e(402);function a(b,v,y,w){return function(d){return w(b(y(d[0][0],d[1][1]),y(-d[0][1],d[1][0])))}}function u(b,v,y,w){return function(d){return w(b(v(b(y(d[1][1],d[2][2]),y(-d[1][2],d[2][1])),d[0][0]),b(v(b(y(d[1][0],d[2][2]),y(-d[1][2],d[2][0])),-d[0][1]),v(b(y(d[1][0],d[2][1]),y(-d[1][1],d[2][0])),d[0][2]))))}}function p(b,v,y,w){return function(d){return w(b(b(v(b(v(b(y(d[2][2],d[3][3]),y(-d[2][3],d[3][2])),d[1][1]),b(v(b(y(d[2][1],d[3][3]),y(-d[2][3],d[3][1])),-d[1][2]),v(b(y(d[2][1],d[3][2]),y(-d[2][2],d[3][1])),d[1][3]))),d[0][0]),v(b(v(b(y(d[2][2],d[3][3]),y(-d[2][3],d[3][2])),d[1][0]),b(v(b(y(d[2][0],d[3][3]),y(-d[2][3],d[3][0])),-d[1][2]),v(b(y(d[2][0],d[3][2]),y(-d[2][2],d[3][0])),d[1][3]))),-d[0][1])),b(v(b(v(b(y(d[2][1],d[3][3]),y(-d[2][3],d[3][1])),d[1][0]),b(v(b(y(d[2][0],d[3][3]),y(-d[2][3],d[3][0])),-d[1][1]),v(b(y(d[2][0],d[3][1]),y(-d[2][1],d[3][0])),d[1][3]))),d[0][2]),v(b(v(b(y(d[2][1],d[3][2]),y(-d[2][2],d[3][1])),d[1][0]),b(v(b(y(d[2][0],d[3][2]),y(-d[2][2],d[3][0])),-d[1][1]),v(b(y(d[2][0],d[3][1]),y(-d[2][1],d[3][0])),d[1][2]))),-d[0][3]))))}}function c(b,v,y,w){return function(d){return w(b(b(v(b(b(v(b(v(b(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][2]),b(v(b(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),-d[2][3]),v(b(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][4]))),d[1][1]),v(b(v(b(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][1]),b(v(b(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][3]),v(b(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][4]))),-d[1][2])),b(v(b(v(b(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][1]),b(v(b(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][2]),v(b(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][4]))),d[1][3]),v(b(v(b(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][1]),b(v(b(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),-d[2][2]),v(b(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][3]))),-d[1][4]))),d[0][0]),v(b(b(v(b(v(b(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][2]),b(v(b(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),-d[2][3]),v(b(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][4]))),d[1][0]),v(b(v(b(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][0]),b(v(b(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][3]),v(b(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),d[2][4]))),-d[1][2])),b(v(b(v(b(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][0]),b(v(b(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][2]),v(b(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][4]))),d[1][3]),v(b(v(b(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][0]),b(v(b(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][2]),v(b(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][3]))),-d[1][4]))),-d[0][1])),b(v(b(b(v(b(v(b(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][1]),b(v(b(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][3]),v(b(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][4]))),d[1][0]),v(b(v(b(y(d[3][3],d[4][4]),y(-d[3][4],d[4][3])),d[2][0]),b(v(b(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][3]),v(b(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),d[2][4]))),-d[1][1])),b(v(b(v(b(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),d[2][0]),b(v(b(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][1]),v(b(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][4]))),d[1][3]),v(b(v(b(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][0]),b(v(b(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][1]),v(b(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][3]))),-d[1][4]))),d[0][2]),b(v(b(b(v(b(v(b(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][1]),b(v(b(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),-d[2][2]),v(b(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][4]))),d[1][0]),v(b(v(b(y(d[3][2],d[4][4]),y(-d[3][4],d[4][2])),d[2][0]),b(v(b(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][2]),v(b(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][4]))),-d[1][1])),b(v(b(v(b(y(d[3][1],d[4][4]),y(-d[3][4],d[4][1])),d[2][0]),b(v(b(y(d[3][0],d[4][4]),y(-d[3][4],d[4][0])),-d[2][1]),v(b(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][4]))),d[1][2]),v(b(v(b(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][0]),b(v(b(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),-d[2][1]),v(b(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][2]))),-d[1][4]))),-d[0][3]),v(b(b(v(b(v(b(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][1]),b(v(b(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),-d[2][2]),v(b(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][3]))),d[1][0]),v(b(v(b(y(d[3][2],d[4][3]),y(-d[3][3],d[4][2])),d[2][0]),b(v(b(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][2]),v(b(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),d[2][3]))),-d[1][1])),b(v(b(v(b(y(d[3][1],d[4][3]),y(-d[3][3],d[4][1])),d[2][0]),b(v(b(y(d[3][0],d[4][3]),y(-d[3][3],d[4][0])),-d[2][1]),v(b(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][3]))),d[1][2]),v(b(v(b(y(d[3][1],d[4][2]),y(-d[3][2],d[4][1])),d[2][0]),b(v(b(y(d[3][0],d[4][2]),y(-d[3][2],d[4][0])),-d[2][1]),v(b(y(d[3][0],d[4][1]),y(-d[3][1],d[4][0])),d[2][2]))),-d[1][3]))),d[0][4])))))}}function x(b){return(b===2?a:b===3?u:b===4?p:b===5?c:void 0)(r,n,i,s)}var g=[function(){return[0]},function(b){return[b[0][0]]}];function h(b,v,y,w,d,S,T,E){return function(C){switch(C.length){case 0:return b(C);case 1:return v(C);case 2:return y(C);case 3:return w(C);case 4:return d(C);case 5:return S(C)}var L=T[C.length];return L||(L=T[C.length]=E(C.length)),L(C)}}(function(){for(;g.length<6;)g.push(x(g.length));f.exports=h.apply(void 0,g.concat([g,x]));for(var b=0;b<g.length;++b)f.exports[b]=g[b]})()},9130:function(f,o,e){var i=e(9660),r=e(9662);f.exports=function(n,s){for(var a=i(n[0],s[0]),u=1;u<n.length;++u)a=r(a,i(n[u],s[u]));return a}},2227:function(f,o,e){var i=e(9660),r=e(9662),n=e(4078),s=e(8289);function a(v){return(v===3?u:v===4?p:v===5?c:x)(r,n,i,s)}function u(v,y,w,d){return function(S,T,E){var C=w(S[0],S[0]),L=d(C,T[0]),O=d(C,E[0]),z=w(T[0],T[0]),G=d(z,S[0]),I=d(z,E[0]),H=w(E[0],E[0]),N=d(H,S[0]),F=d(H,T[0]),V=v(y(F,I),y(G,L)),W=y(N,O),te=y(V,W);return te[te.length-1]}}function p(v,y,w,d){return function(S,T,E,C){var L=v(w(S[0],S[0]),w(S[1],S[1])),O=d(L,T[0]),z=d(L,E[0]),G=d(L,C[0]),I=v(w(T[0],T[0]),w(T[1],T[1])),H=d(I,S[0]),N=d(I,E[0]),F=d(I,C[0]),V=v(w(E[0],E[0]),w(E[1],E[1])),W=d(V,S[0]),te=d(V,T[0]),Q=d(V,C[0]),X=v(w(C[0],C[0]),w(C[1],C[1])),q=d(X,S[0]),Z=d(X,T[0]),J=d(X,E[0]),ne=v(v(d(y(J,Q),T[1]),v(d(y(Z,F),-E[1]),d(y(te,N),C[1]))),v(d(y(Z,F),S[1]),v(d(y(q,G),-T[1]),d(y(H,O),C[1])))),re=v(v(d(y(J,Q),S[1]),v(d(y(q,G),-E[1]),d(y(W,z),C[1]))),v(d(y(te,N),S[1]),v(d(y(W,z),-T[1]),d(y(H,O),E[1])))),ae=y(ne,re);return ae[ae.length-1]}}function c(v,y,w,d){return function(S,T,E,C,L){var O=v(w(S[0],S[0]),v(w(S[1],S[1]),w(S[2],S[2]))),z=d(O,T[0]),G=d(O,E[0]),I=d(O,C[0]),H=d(O,L[0]),N=v(w(T[0],T[0]),v(w(T[1],T[1]),w(T[2],T[2]))),F=d(N,S[0]),V=d(N,E[0]),W=d(N,C[0]),te=d(N,L[0]),Q=v(w(E[0],E[0]),v(w(E[1],E[1]),w(E[2],E[2]))),X=d(Q,S[0]),q=d(Q,T[0]),Z=d(Q,C[0]),J=d(Q,L[0]),ne=v(w(C[0],C[0]),v(w(C[1],C[1]),w(C[2],C[2]))),re=d(ne,S[0]),ae=d(ne,T[0]),ue=d(ne,E[0]),he=d(ne,L[0]),de=v(w(L[0],L[0]),v(w(L[1],L[1]),w(L[2],L[2]))),xe=d(de,S[0]),me=d(de,T[0]),ve=d(de,E[0]),Le=d(de,C[0]),Ae=v(v(v(d(v(d(y(Le,he),E[1]),v(d(y(ve,J),-C[1]),d(y(ue,Z),L[1]))),T[2]),v(d(v(d(y(Le,he),T[1]),v(d(y(me,te),-C[1]),d(y(ae,W),L[1]))),-E[2]),d(v(d(y(ve,J),T[1]),v(d(y(me,te),-E[1]),d(y(q,V),L[1]))),C[2]))),v(d(v(d(y(ue,Z),T[1]),v(d(y(ae,W),-E[1]),d(y(q,V),C[1]))),-L[2]),v(d(v(d(y(Le,he),T[1]),v(d(y(me,te),-C[1]),d(y(ae,W),L[1]))),S[2]),d(v(d(y(Le,he),S[1]),v(d(y(xe,H),-C[1]),d(y(re,I),L[1]))),-T[2])))),v(v(d(v(d(y(me,te),S[1]),v(d(y(xe,H),-T[1]),d(y(F,z),L[1]))),C[2]),v(d(v(d(y(ae,W),S[1]),v(d(y(re,I),-T[1]),d(y(F,z),C[1]))),-L[2]),d(v(d(y(ue,Z),T[1]),v(d(y(ae,W),-E[1]),d(y(q,V),C[1]))),S[2]))),v(d(v(d(y(ue,Z),S[1]),v(d(y(re,I),-E[1]),d(y(X,G),C[1]))),-T[2]),v(d(v(d(y(ae,W),S[1]),v(d(y(re,I),-T[1]),d(y(F,z),C[1]))),E[2]),d(v(d(y(q,V),S[1]),v(d(y(X,G),-T[1]),d(y(F,z),E[1]))),-C[2]))))),we=v(v(v(d(v(d(y(Le,he),E[1]),v(d(y(ve,J),-C[1]),d(y(ue,Z),L[1]))),S[2]),d(v(d(y(Le,he),S[1]),v(d(y(xe,H),-C[1]),d(y(re,I),L[1]))),-E[2])),v(d(v(d(y(ve,J),S[1]),v(d(y(xe,H),-E[1]),d(y(X,G),L[1]))),C[2]),d(v(d(y(ue,Z),S[1]),v(d(y(re,I),-E[1]),d(y(X,G),C[1]))),-L[2]))),v(v(d(v(d(y(ve,J),T[1]),v(d(y(me,te),-E[1]),d(y(q,V),L[1]))),S[2]),d(v(d(y(ve,J),S[1]),v(d(y(xe,H),-E[1]),d(y(X,G),L[1]))),-T[2])),v(d(v(d(y(me,te),S[1]),v(d(y(xe,H),-T[1]),d(y(F,z),L[1]))),E[2]),d(v(d(y(q,V),S[1]),v(d(y(X,G),-T[1]),d(y(F,z),E[1]))),-L[2])))),se=y(Ae,we);return se[se.length-1]}}function x(v,y,w,d){return function(S,T,E,C,L,O){var z=v(v(w(S[0],S[0]),w(S[1],S[1])),v(w(S[2],S[2]),w(S[3],S[3]))),G=d(z,T[0]),I=d(z,E[0]),H=d(z,C[0]),N=d(z,L[0]),F=d(z,O[0]),V=v(v(w(T[0],T[0]),w(T[1],T[1])),v(w(T[2],T[2]),w(T[3],T[3]))),W=d(V,S[0]),te=d(V,E[0]),Q=d(V,C[0]),X=d(V,L[0]),q=d(V,O[0]),Z=v(v(w(E[0],E[0]),w(E[1],E[1])),v(w(E[2],E[2]),w(E[3],E[3]))),J=d(Z,S[0]),ne=d(Z,T[0]),re=d(Z,C[0]),ae=d(Z,L[0]),ue=d(Z,O[0]),he=v(v(w(C[0],C[0]),w(C[1],C[1])),v(w(C[2],C[2]),w(C[3],C[3]))),de=d(he,S[0]),xe=d(he,T[0]),me=d(he,E[0]),ve=d(he,L[0]),Le=d(he,O[0]),Ae=v(v(w(L[0],L[0]),w(L[1],L[1])),v(w(L[2],L[2]),w(L[3],L[3]))),we=d(Ae,S[0]),se=d(Ae,T[0]),oe=d(Ae,E[0]),fe=d(Ae,C[0]),Se=d(Ae,O[0]),Me=v(v(w(O[0],O[0]),w(O[1],O[1])),v(w(O[2],O[2]),w(O[3],O[3]))),be=d(Me,S[0]),Ie=d(Me,T[0]),Be=d(Me,E[0]),ce=d(Me,C[0]),Te=d(Me,L[0]),ye=v(v(v(d(v(v(d(v(d(y(Te,Se),C[1]),v(d(y(ce,Le),-L[1]),d(y(fe,ve),O[1]))),E[2]),d(v(d(y(Te,Se),E[1]),v(d(y(Be,ue),-L[1]),d(y(oe,ae),O[1]))),-C[2])),v(d(v(d(y(ce,Le),E[1]),v(d(y(Be,ue),-C[1]),d(y(me,re),O[1]))),L[2]),d(v(d(y(fe,ve),E[1]),v(d(y(oe,ae),-C[1]),d(y(me,re),L[1]))),-O[2]))),T[3]),v(d(v(v(d(v(d(y(Te,Se),C[1]),v(d(y(ce,Le),-L[1]),d(y(fe,ve),O[1]))),T[2]),d(v(d(y(Te,Se),T[1]),v(d(y(Ie,q),-L[1]),d(y(se,X),O[1]))),-C[2])),v(d(v(d(y(ce,Le),T[1]),v(d(y(Ie,q),-C[1]),d(y(xe,Q),O[1]))),L[2]),d(v(d(y(fe,ve),T[1]),v(d(y(se,X),-C[1]),d(y(xe,Q),L[1]))),-O[2]))),-E[3]),d(v(v(d(v(d(y(Te,Se),E[1]),v(d(y(Be,ue),-L[1]),d(y(oe,ae),O[1]))),T[2]),d(v(d(y(Te,Se),T[1]),v(d(y(Ie,q),-L[1]),d(y(se,X),O[1]))),-E[2])),v(d(v(d(y(Be,ue),T[1]),v(d(y(Ie,q),-E[1]),d(y(ne,te),O[1]))),L[2]),d(v(d(y(oe,ae),T[1]),v(d(y(se,X),-E[1]),d(y(ne,te),L[1]))),-O[2]))),C[3]))),v(v(d(v(v(d(v(d(y(ce,Le),E[1]),v(d(y(Be,ue),-C[1]),d(y(me,re),O[1]))),T[2]),d(v(d(y(ce,Le),T[1]),v(d(y(Ie,q),-C[1]),d(y(xe,Q),O[1]))),-E[2])),v(d(v(d(y(Be,ue),T[1]),v(d(y(Ie,q),-E[1]),d(y(ne,te),O[1]))),C[2]),d(v(d(y(me,re),T[1]),v(d(y(xe,Q),-E[1]),d(y(ne,te),C[1]))),-O[2]))),-L[3]),d(v(v(d(v(d(y(fe,ve),E[1]),v(d(y(oe,ae),-C[1]),d(y(me,re),L[1]))),T[2]),d(v(d(y(fe,ve),T[1]),v(d(y(se,X),-C[1]),d(y(xe,Q),L[1]))),-E[2])),v(d(v(d(y(oe,ae),T[1]),v(d(y(se,X),-E[1]),d(y(ne,te),L[1]))),C[2]),d(v(d(y(me,re),T[1]),v(d(y(xe,Q),-E[1]),d(y(ne,te),C[1]))),-L[2]))),O[3])),v(d(v(v(d(v(d(y(Te,Se),C[1]),v(d(y(ce,Le),-L[1]),d(y(fe,ve),O[1]))),T[2]),d(v(d(y(Te,Se),T[1]),v(d(y(Ie,q),-L[1]),d(y(se,X),O[1]))),-C[2])),v(d(v(d(y(ce,Le),T[1]),v(d(y(Ie,q),-C[1]),d(y(xe,Q),O[1]))),L[2]),d(v(d(y(fe,ve),T[1]),v(d(y(se,X),-C[1]),d(y(xe,Q),L[1]))),-O[2]))),S[3]),d(v(v(d(v(d(y(Te,Se),C[1]),v(d(y(ce,Le),-L[1]),d(y(fe,ve),O[1]))),S[2]),d(v(d(y(Te,Se),S[1]),v(d(y(be,F),-L[1]),d(y(we,N),O[1]))),-C[2])),v(d(v(d(y(ce,Le),S[1]),v(d(y(be,F),-C[1]),d(y(de,H),O[1]))),L[2]),d(v(d(y(fe,ve),S[1]),v(d(y(we,N),-C[1]),d(y(de,H),L[1]))),-O[2]))),-T[3])))),v(v(v(d(v(v(d(v(d(y(Te,Se),T[1]),v(d(y(Ie,q),-L[1]),d(y(se,X),O[1]))),S[2]),d(v(d(y(Te,Se),S[1]),v(d(y(be,F),-L[1]),d(y(we,N),O[1]))),-T[2])),v(d(v(d(y(Ie,q),S[1]),v(d(y(be,F),-T[1]),d(y(W,G),O[1]))),L[2]),d(v(d(y(se,X),S[1]),v(d(y(we,N),-T[1]),d(y(W,G),L[1]))),-O[2]))),C[3]),d(v(v(d(v(d(y(ce,Le),T[1]),v(d(y(Ie,q),-C[1]),d(y(xe,Q),O[1]))),S[2]),d(v(d(y(ce,Le),S[1]),v(d(y(be,F),-C[1]),d(y(de,H),O[1]))),-T[2])),v(d(v(d(y(Ie,q),S[1]),v(d(y(be,F),-T[1]),d(y(W,G),O[1]))),C[2]),d(v(d(y(xe,Q),S[1]),v(d(y(de,H),-T[1]),d(y(W,G),C[1]))),-O[2]))),-L[3])),v(d(v(v(d(v(d(y(fe,ve),T[1]),v(d(y(se,X),-C[1]),d(y(xe,Q),L[1]))),S[2]),d(v(d(y(fe,ve),S[1]),v(d(y(we,N),-C[1]),d(y(de,H),L[1]))),-T[2])),v(d(v(d(y(se,X),S[1]),v(d(y(we,N),-T[1]),d(y(W,G),L[1]))),C[2]),d(v(d(y(xe,Q),S[1]),v(d(y(de,H),-T[1]),d(y(W,G),C[1]))),-L[2]))),O[3]),d(v(v(d(v(d(y(ce,Le),E[1]),v(d(y(Be,ue),-C[1]),d(y(me,re),O[1]))),T[2]),d(v(d(y(ce,Le),T[1]),v(d(y(Ie,q),-C[1]),d(y(xe,Q),O[1]))),-E[2])),v(d(v(d(y(Be,ue),T[1]),v(d(y(Ie,q),-E[1]),d(y(ne,te),O[1]))),C[2]),d(v(d(y(me,re),T[1]),v(d(y(xe,Q),-E[1]),d(y(ne,te),C[1]))),-O[2]))),S[3]))),v(v(d(v(v(d(v(d(y(ce,Le),E[1]),v(d(y(Be,ue),-C[1]),d(y(me,re),O[1]))),S[2]),d(v(d(y(ce,Le),S[1]),v(d(y(be,F),-C[1]),d(y(de,H),O[1]))),-E[2])),v(d(v(d(y(Be,ue),S[1]),v(d(y(be,F),-E[1]),d(y(J,I),O[1]))),C[2]),d(v(d(y(me,re),S[1]),v(d(y(de,H),-E[1]),d(y(J,I),C[1]))),-O[2]))),-T[3]),d(v(v(d(v(d(y(ce,Le),T[1]),v(d(y(Ie,q),-C[1]),d(y(xe,Q),O[1]))),S[2]),d(v(d(y(ce,Le),S[1]),v(d(y(be,F),-C[1]),d(y(de,H),O[1]))),-T[2])),v(d(v(d(y(Ie,q),S[1]),v(d(y(be,F),-T[1]),d(y(W,G),O[1]))),C[2]),d(v(d(y(xe,Q),S[1]),v(d(y(de,H),-T[1]),d(y(W,G),C[1]))),-O[2]))),E[3])),v(d(v(v(d(v(d(y(Be,ue),T[1]),v(d(y(Ie,q),-E[1]),d(y(ne,te),O[1]))),S[2]),d(v(d(y(Be,ue),S[1]),v(d(y(be,F),-E[1]),d(y(J,I),O[1]))),-T[2])),v(d(v(d(y(Ie,q),S[1]),v(d(y(be,F),-T[1]),d(y(W,G),O[1]))),E[2]),d(v(d(y(ne,te),S[1]),v(d(y(J,I),-T[1]),d(y(W,G),E[1]))),-O[2]))),-C[3]),d(v(v(d(v(d(y(me,re),T[1]),v(d(y(xe,Q),-E[1]),d(y(ne,te),C[1]))),S[2]),d(v(d(y(me,re),S[1]),v(d(y(de,H),-E[1]),d(y(J,I),C[1]))),-T[2])),v(d(v(d(y(xe,Q),S[1]),v(d(y(de,H),-T[1]),d(y(W,G),C[1]))),E[2]),d(v(d(y(ne,te),S[1]),v(d(y(J,I),-T[1]),d(y(W,G),E[1]))),-C[2]))),O[3]))))),Pe=v(v(v(d(v(v(d(v(d(y(Te,Se),C[1]),v(d(y(ce,Le),-L[1]),d(y(fe,ve),O[1]))),E[2]),d(v(d(y(Te,Se),E[1]),v(d(y(Be,ue),-L[1]),d(y(oe,ae),O[1]))),-C[2])),v(d(v(d(y(ce,Le),E[1]),v(d(y(Be,ue),-C[1]),d(y(me,re),O[1]))),L[2]),d(v(d(y(fe,ve),E[1]),v(d(y(oe,ae),-C[1]),d(y(me,re),L[1]))),-O[2]))),S[3]),v(d(v(v(d(v(d(y(Te,Se),C[1]),v(d(y(ce,Le),-L[1]),d(y(fe,ve),O[1]))),S[2]),d(v(d(y(Te,Se),S[1]),v(d(y(be,F),-L[1]),d(y(we,N),O[1]))),-C[2])),v(d(v(d(y(ce,Le),S[1]),v(d(y(be,F),-C[1]),d(y(de,H),O[1]))),L[2]),d(v(d(y(fe,ve),S[1]),v(d(y(we,N),-C[1]),d(y(de,H),L[1]))),-O[2]))),-E[3]),d(v(v(d(v(d(y(Te,Se),E[1]),v(d(y(Be,ue),-L[1]),d(y(oe,ae),O[1]))),S[2]),d(v(d(y(Te,Se),S[1]),v(d(y(be,F),-L[1]),d(y(we,N),O[1]))),-E[2])),v(d(v(d(y(Be,ue),S[1]),v(d(y(be,F),-E[1]),d(y(J,I),O[1]))),L[2]),d(v(d(y(oe,ae),S[1]),v(d(y(we,N),-E[1]),d(y(J,I),L[1]))),-O[2]))),C[3]))),v(v(d(v(v(d(v(d(y(ce,Le),E[1]),v(d(y(Be,ue),-C[1]),d(y(me,re),O[1]))),S[2]),d(v(d(y(ce,Le),S[1]),v(d(y(be,F),-C[1]),d(y(de,H),O[1]))),-E[2])),v(d(v(d(y(Be,ue),S[1]),v(d(y(be,F),-E[1]),d(y(J,I),O[1]))),C[2]),d(v(d(y(me,re),S[1]),v(d(y(de,H),-E[1]),d(y(J,I),C[1]))),-O[2]))),-L[3]),d(v(v(d(v(d(y(fe,ve),E[1]),v(d(y(oe,ae),-C[1]),d(y(me,re),L[1]))),S[2]),d(v(d(y(fe,ve),S[1]),v(d(y(we,N),-C[1]),d(y(de,H),L[1]))),-E[2])),v(d(v(d(y(oe,ae),S[1]),v(d(y(we,N),-E[1]),d(y(J,I),L[1]))),C[2]),d(v(d(y(me,re),S[1]),v(d(y(de,H),-E[1]),d(y(J,I),C[1]))),-L[2]))),O[3])),v(d(v(v(d(v(d(y(Te,Se),E[1]),v(d(y(Be,ue),-L[1]),d(y(oe,ae),O[1]))),T[2]),d(v(d(y(Te,Se),T[1]),v(d(y(Ie,q),-L[1]),d(y(se,X),O[1]))),-E[2])),v(d(v(d(y(Be,ue),T[1]),v(d(y(Ie,q),-E[1]),d(y(ne,te),O[1]))),L[2]),d(v(d(y(oe,ae),T[1]),v(d(y(se,X),-E[1]),d(y(ne,te),L[1]))),-O[2]))),S[3]),d(v(v(d(v(d(y(Te,Se),E[1]),v(d(y(Be,ue),-L[1]),d(y(oe,ae),O[1]))),S[2]),d(v(d(y(Te,Se),S[1]),v(d(y(be,F),-L[1]),d(y(we,N),O[1]))),-E[2])),v(d(v(d(y(Be,ue),S[1]),v(d(y(be,F),-E[1]),d(y(J,I),O[1]))),L[2]),d(v(d(y(oe,ae),S[1]),v(d(y(we,N),-E[1]),d(y(J,I),L[1]))),-O[2]))),-T[3])))),v(v(v(d(v(v(d(v(d(y(Te,Se),T[1]),v(d(y(Ie,q),-L[1]),d(y(se,X),O[1]))),S[2]),d(v(d(y(Te,Se),S[1]),v(d(y(be,F),-L[1]),d(y(we,N),O[1]))),-T[2])),v(d(v(d(y(Ie,q),S[1]),v(d(y(be,F),-T[1]),d(y(W,G),O[1]))),L[2]),d(v(d(y(se,X),S[1]),v(d(y(we,N),-T[1]),d(y(W,G),L[1]))),-O[2]))),E[3]),d(v(v(d(v(d(y(Be,ue),T[1]),v(d(y(Ie,q),-E[1]),d(y(ne,te),O[1]))),S[2]),d(v(d(y(Be,ue),S[1]),v(d(y(be,F),-E[1]),d(y(J,I),O[1]))),-T[2])),v(d(v(d(y(Ie,q),S[1]),v(d(y(be,F),-T[1]),d(y(W,G),O[1]))),E[2]),d(v(d(y(ne,te),S[1]),v(d(y(J,I),-T[1]),d(y(W,G),E[1]))),-O[2]))),-L[3])),v(d(v(v(d(v(d(y(oe,ae),T[1]),v(d(y(se,X),-E[1]),d(y(ne,te),L[1]))),S[2]),d(v(d(y(oe,ae),S[1]),v(d(y(we,N),-E[1]),d(y(J,I),L[1]))),-T[2])),v(d(v(d(y(se,X),S[1]),v(d(y(we,N),-T[1]),d(y(W,G),L[1]))),E[2]),d(v(d(y(ne,te),S[1]),v(d(y(J,I),-T[1]),d(y(W,G),E[1]))),-L[2]))),O[3]),d(v(v(d(v(d(y(fe,ve),E[1]),v(d(y(oe,ae),-C[1]),d(y(me,re),L[1]))),T[2]),d(v(d(y(fe,ve),T[1]),v(d(y(se,X),-C[1]),d(y(xe,Q),L[1]))),-E[2])),v(d(v(d(y(oe,ae),T[1]),v(d(y(se,X),-E[1]),d(y(ne,te),L[1]))),C[2]),d(v(d(y(me,re),T[1]),v(d(y(xe,Q),-E[1]),d(y(ne,te),C[1]))),-L[2]))),S[3]))),v(v(d(v(v(d(v(d(y(fe,ve),E[1]),v(d(y(oe,ae),-C[1]),d(y(me,re),L[1]))),S[2]),d(v(d(y(fe,ve),S[1]),v(d(y(we,N),-C[1]),d(y(de,H),L[1]))),-E[2])),v(d(v(d(y(oe,ae),S[1]),v(d(y(we,N),-E[1]),d(y(J,I),L[1]))),C[2]),d(v(d(y(me,re),S[1]),v(d(y(de,H),-E[1]),d(y(J,I),C[1]))),-L[2]))),-T[3]),d(v(v(d(v(d(y(fe,ve),T[1]),v(d(y(se,X),-C[1]),d(y(xe,Q),L[1]))),S[2]),d(v(d(y(fe,ve),S[1]),v(d(y(we,N),-C[1]),d(y(de,H),L[1]))),-T[2])),v(d(v(d(y(se,X),S[1]),v(d(y(we,N),-T[1]),d(y(W,G),L[1]))),C[2]),d(v(d(y(xe,Q),S[1]),v(d(y(de,H),-T[1]),d(y(W,G),C[1]))),-L[2]))),E[3])),v(d(v(v(d(v(d(y(oe,ae),T[1]),v(d(y(se,X),-E[1]),d(y(ne,te),L[1]))),S[2]),d(v(d(y(oe,ae),S[1]),v(d(y(we,N),-E[1]),d(y(J,I),L[1]))),-T[2])),v(d(v(d(y(se,X),S[1]),v(d(y(we,N),-T[1]),d(y(W,G),L[1]))),E[2]),d(v(d(y(ne,te),S[1]),v(d(y(J,I),-T[1]),d(y(W,G),E[1]))),-L[2]))),-C[3]),d(v(v(d(v(d(y(me,re),T[1]),v(d(y(xe,Q),-E[1]),d(y(ne,te),C[1]))),S[2]),d(v(d(y(me,re),S[1]),v(d(y(de,H),-E[1]),d(y(J,I),C[1]))),-T[2])),v(d(v(d(y(xe,Q),S[1]),v(d(y(de,H),-T[1]),d(y(W,G),C[1]))),E[2]),d(v(d(y(ne,te),S[1]),v(d(y(J,I),-T[1]),d(y(W,G),E[1]))),-C[2]))),L[3]))))),Re=y(ye,Pe);return Re[Re.length-1]}}var g=[function(){return 0},function(){return 0},function(){return 0}];function h(v){var y=g[v.length];return y||(y=g[v.length]=a(v.length)),y.apply(void 0,v)}function b(v,y,w,d,S,T,E,C){return function(L,O,z,G,I,H){switch(arguments.length){case 0:case 1:return 0;case 2:return d(L,O);case 3:return S(L,O,z);case 4:return T(L,O,z,G);case 5:return E(L,O,z,G,I);case 6:return C(L,O,z,G,I,H)}for(var N=new Array(arguments.length),F=0;F<arguments.length;++F)N[F]=arguments[F];return v(N)}}(function(){for(;g.length<=6;)g.push(a(g.length));f.exports=b.apply(void 0,[h].concat(g));for(var v=0;v<=6;++v)f.exports[v]=g[v]})()},6606:function(f,o,e){var i=e(8167);function r(g){return(g===2?n:g===3?s:g===4?a:g===5?u:p)(g<6?i[g]:i)}function n(g){return function(h,b){return[g([[+b[0],+h[0][1]],[+b[1],+h[1][1]]]),g([[+h[0][0],+b[0]],[+h[1][0],+b[1]]]),g(h)]}}function s(g){return function(h,b){return[g([[+b[0],+h[0][1],+h[0][2]],[+b[1],+h[1][1],+h[1][2]],[+b[2],+h[2][1],+h[2][2]]]),g([[+h[0][0],+b[0],+h[0][2]],[+h[1][0],+b[1],+h[1][2]],[+h[2][0],+b[2],+h[2][2]]]),g([[+h[0][0],+h[0][1],+b[0]],[+h[1][0],+h[1][1],+b[1]],[+h[2][0],+h[2][1],+b[2]]]),g(h)]}}function a(g){return function(h,b){return[g([[+b[0],+h[0][1],+h[0][2],+h[0][3]],[+b[1],+h[1][1],+h[1][2],+h[1][3]],[+b[2],+h[2][1],+h[2][2],+h[2][3]],[+b[3],+h[3][1],+h[3][2],+h[3][3]]]),g([[+h[0][0],+b[0],+h[0][2],+h[0][3]],[+h[1][0],+b[1],+h[1][2],+h[1][3]],[+h[2][0],+b[2],+h[2][2],+h[2][3]],[+h[3][0],+b[3],+h[3][2],+h[3][3]]]),g([[+h[0][0],+h[0][1],+b[0],+h[0][3]],[+h[1][0],+h[1][1],+b[1],+h[1][3]],[+h[2][0],+h[2][1],+b[2],+h[2][3]],[+h[3][0],+h[3][1],+b[3],+h[3][3]]]),g([[+h[0][0],+h[0][1],+h[0][2],+b[0]],[+h[1][0],+h[1][1],+h[1][2],+b[1]],[+h[2][0],+h[2][1],+h[2][2],+b[2]],[+h[3][0],+h[3][1],+h[3][2],+b[3]]]),g(h)]}}function u(g){return function(h,b){return[g([[+b[0],+h[0][1],+h[0][2],+h[0][3],+h[0][4]],[+b[1],+h[1][1],+h[1][2],+h[1][3],+h[1][4]],[+b[2],+h[2][1],+h[2][2],+h[2][3],+h[2][4]],[+b[3],+h[3][1],+h[3][2],+h[3][3],+h[3][4]],[+b[4],+h[4][1],+h[4][2],+h[4][3],+h[4][4]]]),g([[+h[0][0],+b[0],+h[0][2],+h[0][3],+h[0][4]],[+h[1][0],+b[1],+h[1][2],+h[1][3],+h[1][4]],[+h[2][0],+b[2],+h[2][2],+h[2][3],+h[2][4]],[+h[3][0],+b[3],+h[3][2],+h[3][3],+h[3][4]],[+h[4][0],+b[4],+h[4][2],+h[4][3],+h[4][4]]]),g([[+h[0][0],+h[0][1],+b[0],+h[0][3],+h[0][4]],[+h[1][0],+h[1][1],+b[1],+h[1][3],+h[1][4]],[+h[2][0],+h[2][1],+b[2],+h[2][3],+h[2][4]],[+h[3][0],+h[3][1],+b[3],+h[3][3],+h[3][4]],[+h[4][0],+h[4][1],+b[4],+h[4][3],+h[4][4]]]),g([[+h[0][0],+h[0][1],+h[0][2],+b[0],+h[0][4]],[+h[1][0],+h[1][1],+h[1][2],+b[1],+h[1][4]],[+h[2][0],+h[2][1],+h[2][2],+b[2],+h[2][4]],[+h[3][0],+h[3][1],+h[3][2],+b[3],+h[3][4]],[+h[4][0],+h[4][1],+h[4][2],+b[4],+h[4][4]]]),g([[+h[0][0],+h[0][1],+h[0][2],+h[0][3],+b[0]],[+h[1][0],+h[1][1],+h[1][2],+h[1][3],+b[1]],[+h[2][0],+h[2][1],+h[2][2],+h[2][3],+b[2]],[+h[3][0],+h[3][1],+h[3][2],+h[3][3],+b[3]],[+h[4][0],+h[4][1],+h[4][2],+h[4][3],+b[4]]]),g(h)]}}function p(g){return function(h,b){return[g([[+b[0],+h[0][1],+h[0][2],+h[0][3],+h[0][4],+h[0][5]],[+b[1],+h[1][1],+h[1][2],+h[1][3],+h[1][4],+h[1][5]],[+b[2],+h[2][1],+h[2][2],+h[2][3],+h[2][4],+h[2][5]],[+b[3],+h[3][1],+h[3][2],+h[3][3],+h[3][4],+h[3][5]],[+b[4],+h[4][1],+h[4][2],+h[4][3],+h[4][4],+h[4][5]],[+b[5],+h[5][1],+h[5][2],+h[5][3],+h[5][4],+h[5][5]]]),g([[+h[0][0],+b[0],+h[0][2],+h[0][3],+h[0][4],+h[0][5]],[+h[1][0],+b[1],+h[1][2],+h[1][3],+h[1][4],+h[1][5]],[+h[2][0],+b[2],+h[2][2],+h[2][3],+h[2][4],+h[2][5]],[+h[3][0],+b[3],+h[3][2],+h[3][3],+h[3][4],+h[3][5]],[+h[4][0],+b[4],+h[4][2],+h[4][3],+h[4][4],+h[4][5]],[+h[5][0],+b[5],+h[5][2],+h[5][3],+h[5][4],+h[5][5]]]),g([[+h[0][0],+h[0][1],+b[0],+h[0][3],+h[0][4],+h[0][5]],[+h[1][0],+h[1][1],+b[1],+h[1][3],+h[1][4],+h[1][5]],[+h[2][0],+h[2][1],+b[2],+h[2][3],+h[2][4],+h[2][5]],[+h[3][0],+h[3][1],+b[3],+h[3][3],+h[3][4],+h[3][5]],[+h[4][0],+h[4][1],+b[4],+h[4][3],+h[4][4],+h[4][5]],[+h[5][0],+h[5][1],+b[5],+h[5][3],+h[5][4],+h[5][5]]]),g([[+h[0][0],+h[0][1],+h[0][2],+b[0],+h[0][4],+h[0][5]],[+h[1][0],+h[1][1],+h[1][2],+b[1],+h[1][4],+h[1][5]],[+h[2][0],+h[2][1],+h[2][2],+b[2],+h[2][4],+h[2][5]],[+h[3][0],+h[3][1],+h[3][2],+b[3],+h[3][4],+h[3][5]],[+h[4][0],+h[4][1],+h[4][2],+b[4],+h[4][4],+h[4][5]],[+h[5][0],+h[5][1],+h[5][2],+b[5],+h[5][4],+h[5][5]]]),g([[+h[0][0],+h[0][1],+h[0][2],+h[0][3],+b[0],+h[0][5]],[+h[1][0],+h[1][1],+h[1][2],+h[1][3],+b[1],+h[1][5]],[+h[2][0],+h[2][1],+h[2][2],+h[2][3],+b[2],+h[2][5]],[+h[3][0],+h[3][1],+h[3][2],+h[3][3],+b[3],+h[3][5]],[+h[4][0],+h[4][1],+h[4][2],+h[4][3],+b[4],+h[4][5]],[+h[5][0],+h[5][1],+h[5][2],+h[5][3],+b[5],+h[5][5]]]),g([[+h[0][0],+h[0][1],+h[0][2],+h[0][3],+h[0][4],+b[0]],[+h[1][0],+h[1][1],+h[1][2],+h[1][3],+h[1][4],+b[1]],[+h[2][0],+h[2][1],+h[2][2],+h[2][3],+h[2][4],+b[2]],[+h[3][0],+h[3][1],+h[3][2],+h[3][3],+h[3][4],+b[3]],[+h[4][0],+h[4][1],+h[4][2],+h[4][3],+h[4][4],+b[4]],[+h[5][0],+h[5][1],+h[5][2],+h[5][3],+h[5][4],+b[5]]]),g(h)]}}var c=[function(){return[[0]]},function(g,h){return[[h[0]],[g[0][0]]]}];function x(g,h,b,v,y,w,d,S){return function(T,E){switch(T.length){case 0:return g(T,E);case 1:return h(T,E);case 2:return b(T,E);case 3:return v(T,E);case 4:return y(T,E);case 5:return w(T,E)}var C=d[T.length];return C||(C=d[T.length]=S(T.length)),C(T,E)}}(function(){for(;c.length<6;)c.push(r(c.length));f.exports=x.apply(void 0,c.concat([c,r]));for(var g=0;g<6;++g)f.exports[g]=c[g]})()},417:function(f,o,e){var i=e(9660),r=e(9662),n=e(8289),s=e(4078);function a(y,w,d,S){return function(T,E,C){var L=y(y(w(E[1],C[0]),w(-C[1],E[0])),y(w(T[1],E[0]),w(-E[1],T[0]))),O=y(w(T[1],C[0]),w(-C[1],T[0])),z=S(L,O);return z[z.length-1]}}function u(y,w,d,S){return function(T,E,C,L){var O=y(y(d(y(w(C[1],L[0]),w(-L[1],C[0])),E[2]),y(d(y(w(E[1],L[0]),w(-L[1],E[0])),-C[2]),d(y(w(E[1],C[0]),w(-C[1],E[0])),L[2]))),y(d(y(w(E[1],L[0]),w(-L[1],E[0])),T[2]),y(d(y(w(T[1],L[0]),w(-L[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),L[2])))),z=y(y(d(y(w(C[1],L[0]),w(-L[1],C[0])),T[2]),y(d(y(w(T[1],L[0]),w(-L[1],T[0])),-C[2]),d(y(w(T[1],C[0]),w(-C[1],T[0])),L[2]))),y(d(y(w(E[1],C[0]),w(-C[1],E[0])),T[2]),y(d(y(w(T[1],C[0]),w(-C[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),C[2])))),G=S(O,z);return G[G.length-1]}}function p(y,w,d,S){return function(T,E,C,L,O){var z=y(y(y(d(y(d(y(w(L[1],O[0]),w(-O[1],L[0])),C[2]),y(d(y(w(C[1],O[0]),w(-O[1],C[0])),-L[2]),d(y(w(C[1],L[0]),w(-L[1],C[0])),O[2]))),E[3]),y(d(y(d(y(w(L[1],O[0]),w(-O[1],L[0])),E[2]),y(d(y(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),d(y(w(E[1],L[0]),w(-L[1],E[0])),O[2]))),-C[3]),d(y(d(y(w(C[1],O[0]),w(-O[1],C[0])),E[2]),y(d(y(w(E[1],O[0]),w(-O[1],E[0])),-C[2]),d(y(w(E[1],C[0]),w(-C[1],E[0])),O[2]))),L[3]))),y(d(y(d(y(w(C[1],L[0]),w(-L[1],C[0])),E[2]),y(d(y(w(E[1],L[0]),w(-L[1],E[0])),-C[2]),d(y(w(E[1],C[0]),w(-C[1],E[0])),L[2]))),-O[3]),y(d(y(d(y(w(L[1],O[0]),w(-O[1],L[0])),E[2]),y(d(y(w(E[1],O[0]),w(-O[1],E[0])),-L[2]),d(y(w(E[1],L[0]),w(-L[1],E[0])),O[2]))),T[3]),d(y(d(y(w(L[1],O[0]),w(-O[1],L[0])),T[2]),y(d(y(w(T[1],O[0]),w(-O[1],T[0])),-L[2]),d(y(w(T[1],L[0]),w(-L[1],T[0])),O[2]))),-E[3])))),y(y(d(y(d(y(w(E[1],O[0]),w(-O[1],E[0])),T[2]),y(d(y(w(T[1],O[0]),w(-O[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),O[2]))),L[3]),y(d(y(d(y(w(E[1],L[0]),w(-L[1],E[0])),T[2]),y(d(y(w(T[1],L[0]),w(-L[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),L[2]))),-O[3]),d(y(d(y(w(C[1],L[0]),w(-L[1],C[0])),E[2]),y(d(y(w(E[1],L[0]),w(-L[1],E[0])),-C[2]),d(y(w(E[1],C[0]),w(-C[1],E[0])),L[2]))),T[3]))),y(d(y(d(y(w(C[1],L[0]),w(-L[1],C[0])),T[2]),y(d(y(w(T[1],L[0]),w(-L[1],T[0])),-C[2]),d(y(w(T[1],C[0]),w(-C[1],T[0])),L[2]))),-E[3]),y(d(y(d(y(w(E[1],L[0]),w(-L[1],E[0])),T[2]),y(d(y(w(T[1],L[0]),w(-L[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),L[2]))),C[3]),d(y(d(y(w(E[1],C[0]),w(-C[1],E[0])),T[2]),y(d(y(w(T[1],C[0]),w(-C[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),C[2]))),-L[3]))))),G=y(y(y(d(y(d(y(w(L[1],O[0]),w(-O[1],L[0])),C[2]),y(d(y(w(C[1],O[0]),w(-O[1],C[0])),-L[2]),d(y(w(C[1],L[0]),w(-L[1],C[0])),O[2]))),T[3]),d(y(d(y(w(L[1],O[0]),w(-O[1],L[0])),T[2]),y(d(y(w(T[1],O[0]),w(-O[1],T[0])),-L[2]),d(y(w(T[1],L[0]),w(-L[1],T[0])),O[2]))),-C[3])),y(d(y(d(y(w(C[1],O[0]),w(-O[1],C[0])),T[2]),y(d(y(w(T[1],O[0]),w(-O[1],T[0])),-C[2]),d(y(w(T[1],C[0]),w(-C[1],T[0])),O[2]))),L[3]),d(y(d(y(w(C[1],L[0]),w(-L[1],C[0])),T[2]),y(d(y(w(T[1],L[0]),w(-L[1],T[0])),-C[2]),d(y(w(T[1],C[0]),w(-C[1],T[0])),L[2]))),-O[3]))),y(y(d(y(d(y(w(C[1],O[0]),w(-O[1],C[0])),E[2]),y(d(y(w(E[1],O[0]),w(-O[1],E[0])),-C[2]),d(y(w(E[1],C[0]),w(-C[1],E[0])),O[2]))),T[3]),d(y(d(y(w(C[1],O[0]),w(-O[1],C[0])),T[2]),y(d(y(w(T[1],O[0]),w(-O[1],T[0])),-C[2]),d(y(w(T[1],C[0]),w(-C[1],T[0])),O[2]))),-E[3])),y(d(y(d(y(w(E[1],O[0]),w(-O[1],E[0])),T[2]),y(d(y(w(T[1],O[0]),w(-O[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),O[2]))),C[3]),d(y(d(y(w(E[1],C[0]),w(-C[1],E[0])),T[2]),y(d(y(w(T[1],C[0]),w(-C[1],T[0])),-E[2]),d(y(w(T[1],E[0]),w(-E[1],T[0])),C[2]))),-O[3])))),I=S(z,G);return I[I.length-1]}}function c(y){return(y===3?a:y===4?u:p)(r,i,n,s)}var x=c(3),g=c(4),h=[function(){return 0},function(){return 0},function(y,w){return w[0]-y[0]},function(y,w,d){var S,T=(y[1]-d[1])*(w[0]-d[0]),E=(y[0]-d[0])*(w[1]-d[1]),C=T-E;if(T>0){if(E<=0)return C;S=T+E}else{if(!(T<0)||E>=0)return C;S=-(T+E)}var L=33306690738754716e-32*S;return C>=L||C<=-L?C:x(y,w,d)},function(y,w,d,S){var T=y[0]-S[0],E=w[0]-S[0],C=d[0]-S[0],L=y[1]-S[1],O=w[1]-S[1],z=d[1]-S[1],G=y[2]-S[2],I=w[2]-S[2],H=d[2]-S[2],N=E*z,F=C*O,V=C*L,W=T*z,te=T*O,Q=E*L,X=G*(N-F)+I*(V-W)+H*(te-Q),q=7771561172376103e-31*((Math.abs(N)+Math.abs(F))*Math.abs(G)+(Math.abs(V)+Math.abs(W))*Math.abs(I)+(Math.abs(te)+Math.abs(Q))*Math.abs(H));return X>q||-X>q?X:g(y,w,d,S)}];function b(y){var w=h[y.length];return w||(w=h[y.length]=c(y.length)),w.apply(void 0,y)}function v(y,w,d,S,T,E,C){return function(L,O,z,G,I){switch(arguments.length){case 0:case 1:return 0;case 2:return S(L,O);case 3:return T(L,O,z);case 4:return E(L,O,z,G);case 5:return C(L,O,z,G,I)}for(var H=new Array(arguments.length),N=0;N<arguments.length;++N)H[N]=arguments[N];return y(H)}}(function(){for(;h.length<=5;)h.push(c(h.length));f.exports=v.apply(void 0,[b].concat(h));for(var y=0;y<=5;++y)f.exports[y]=h[y]})()},2019:function(f,o,e){var i=e(9662),r=e(8289);f.exports=function(n,s){if(n.length===1)return r(s,n[0]);if(s.length===1)return r(n,s[0]);if(n.length===0||s.length===0)return[0];var a=[0];if(n.length<s.length)for(var u=0;u<n.length;++u)a=i(a,r(s,n[u]));else for(u=0;u<s.length;++u)a=i(a,r(n,s[u]));return a}},8289:function(f,o,e){var i=e(9660),r=e(87);f.exports=function(n,s){var a=n.length;if(a===1){var u=i(n[0],s);return u[0]?u:[u[1]]}var p=new Array(2*a),c=[.1,.1],x=[.1,.1],g=0;i(n[0],s,c),c[0]&&(p[g++]=c[0]);for(var h=1;h<a;++h){i(n[h],s,x);var b=c[1];r(b,x[0],c),c[0]&&(p[g++]=c[0]);var v=x[1],y=c[1],w=v+y,d=y-(w-v);c[1]=w,d&&(p[g++]=d)}return c[1]&&(p[g++]=c[1]),g===0&&(p[g++]=0),p.length=g,p}},4434:function(f,o,e){f.exports=function(r,n,s,a){var u=i(r,s,a),p=i(n,s,a);if(u>0&&p>0||u<0&&p<0)return!1;var c=i(s,r,n),x=i(a,r,n);return!(c>0&&x>0||c<0&&x<0)&&(u!==0||p!==0||c!==0||x!==0||function(g,h,b,v){for(var y=0;y<2;++y){var w=g[y],d=h[y],S=Math.min(w,d),T=Math.max(w,d),E=b[y],C=v[y],L=Math.min(E,C);if(Math.max(E,C)<S||T<L)return!1}return!0}(r,n,s,a))};var i=e(417)[3]},4078:function(f){f.exports=function(o,e){var i=0|o.length,r=0|e.length;if(i===1&&r===1)return function(L,O){var z=L+O,G=z-L,I=L-(z-G)+(O-G);return I?[I,z]:[z]}(o[0],-e[0]);var n,s,a=new Array(i+r),u=0,p=0,c=0,x=Math.abs,g=o[p],h=x(g),b=-e[c],v=x(b);h<v?(s=g,(p+=1)<i&&(h=x(g=o[p]))):(s=b,(c+=1)<r&&(v=x(b=-e[c]))),p<i&&h<v||c>=r?(n=g,(p+=1)<i&&(h=x(g=o[p]))):(n=b,(c+=1)<r&&(v=x(b=-e[c])));for(var y,w,d=n+s,S=d-n,T=s-S,E=T,C=d;p<i&&c<r;)h<v?(n=g,(p+=1)<i&&(h=x(g=o[p]))):(n=b,(c+=1)<r&&(v=x(b=-e[c]))),(T=(s=E)-(S=(d=n+s)-n))&&(a[u++]=T),E=C-((y=C+d)-(w=y-C))+(d-w),C=y;for(;p<i;)(T=(s=E)-(S=(d=(n=g)+s)-n))&&(a[u++]=T),E=C-((y=C+d)-(w=y-C))+(d-w),C=y,(p+=1)<i&&(g=o[p]);for(;c<r;)(T=(s=E)-(S=(d=(n=b)+s)-n))&&(a[u++]=T),E=C-((y=C+d)-(w=y-C))+(d-w),C=y,(c+=1)<r&&(b=-e[c]);return E&&(a[u++]=E),C&&(a[u++]=C),u||(a[u++]=0),a.length=u,a}},9662:function(f){f.exports=function(o,e){var i=0|o.length,r=0|e.length;if(i===1&&r===1)return function(L,O){var z=L+O,G=z-L,I=L-(z-G)+(O-G);return I?[I,z]:[z]}(o[0],e[0]);var n,s,a=new Array(i+r),u=0,p=0,c=0,x=Math.abs,g=o[p],h=x(g),b=e[c],v=x(b);h<v?(s=g,(p+=1)<i&&(h=x(g=o[p]))):(s=b,(c+=1)<r&&(v=x(b=e[c]))),p<i&&h<v||c>=r?(n=g,(p+=1)<i&&(h=x(g=o[p]))):(n=b,(c+=1)<r&&(v=x(b=e[c])));for(var y,w,d=n+s,S=d-n,T=s-S,E=T,C=d;p<i&&c<r;)h<v?(n=g,(p+=1)<i&&(h=x(g=o[p]))):(n=b,(c+=1)<r&&(v=x(b=e[c]))),(T=(s=E)-(S=(d=n+s)-n))&&(a[u++]=T),E=C-((y=C+d)-(w=y-C))+(d-w),C=y;for(;p<i;)(T=(s=E)-(S=(d=(n=g)+s)-n))&&(a[u++]=T),E=C-((y=C+d)-(w=y-C))+(d-w),C=y,(p+=1)<i&&(g=o[p]);for(;c<r;)(T=(s=E)-(S=(d=(n=b)+s)-n))&&(a[u++]=T),E=C-((y=C+d)-(w=y-C))+(d-w),C=y,(c+=1)<r&&(b=e[c]);return E&&(a[u++]=E),C&&(a[u++]=C),u||(a[u++]=0),a.length=u,a}},8691:function(f,o,e){f.exports=function(n){return r(i(n))};var i=e(2692),r=e(7037)},7212:function(f,o,e){f.exports=function(a,u,p,c){if(p=p||0,c===void 0&&(c=function(d){for(var S=d.length,T=0,E=0;E<S;++E)T=0|Math.max(T,d[E].length);return T-1}(a)),a.length===0||c<1)return{cells:[],vertexIds:[],vertexWeights:[]};var x=function(d,S){for(var T=d.length,E=r.mallocUint8(T),C=0;C<T;++C)E[C]=d[C]<S|0;return E}(u,+p),g=function(d,S){for(var T=d.length,E=S*(S+1)/2*T|0,C=r.mallocUint32(2*E),L=0,O=0;O<T;++O)for(var z=d[O],G=(S=z.length,0);G<S;++G)for(var I=0;I<G;++I){var H=z[I],N=z[G];C[L++]=0|Math.min(H,N),C[L++]=0|Math.max(H,N)}n(i(C,[L/2|0,2]));var F=2;for(O=2;O<L;O+=2)C[O-2]===C[O]&&C[O-1]===C[O+1]||(C[F++]=C[O],C[F++]=C[O+1]);return i(C,[F/2|0,2])}(a,c),h=function(d,S,T,E){for(var C=d.data,L=d.shape[0],O=r.mallocDouble(L),z=0,G=0;G<L;++G){var I=C[2*G],H=C[2*G+1];if(T[I]!==T[H]){var N=S[I],F=S[H];C[2*z]=I,C[2*z+1]=H,O[z++]=(F-E)/(F-N)}}return d.shape[0]=z,i(O,[z])}(g,u,x,+p),b=function(d,S){var T=r.mallocInt32(2*S),E=d.shape[0],C=d.data;T[0]=0;for(var L=0,O=0;O<E;++O){var z=C[2*O];if(z!==L){for(T[2*L+1]=O;++L<z;)T[2*L]=O,T[2*L+1]=O;T[2*L]=O}}for(T[2*L+1]=E;++L<S;)T[2*L]=T[2*L+1]=E;return T}(g,0|u.length),v=s(c)(a,g.data,b,x),y=function(d){for(var S=0|d.shape[0],T=d.data,E=new Array(S),C=0;C<S;++C)E[C]=[T[2*C],T[2*C+1]];return E}(g),w=[].slice.call(h.data,0,h.shape[0]);return r.free(x),r.free(g.data),r.free(h.data),r.free(b),{cells:v,vertexIds:y,vertexWeights:w}};var i=e(5050),r=e(5306),n=e(8729),s=e(1168)},1168:function(f){f.exports=function(e){return o[e]()};var o=[function(){return function(e,i,r,n){for(var s=e.length,a=0;a<s;++a)e[a].length;return[]}},function(){function e(i,r,n,s){for(var a=0|Math.min(n,s),u=0|Math.max(n,s),p=i[2*a],c=i[2*a+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,s){for(var a=i.length,u=[],p=0;p<a;++p){var c=i[p];if(c.length===2){var x=(s[c[0]]<<0)+(s[c[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:case 3:break;case 1:u.push([e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0])])}}}return u}},function(){function e(i,r,n,s){for(var a=0|Math.min(n,s),u=0|Math.max(n,s),p=i[2*a],c=i[2*a+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,s){for(var a=i.length,u=[],p=0;p<a;++p){var c=i[p],x=c.length;if(x===3){if((g=(s[c[0]]<<0)+(s[c[1]]<<1)+(s[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([e(n,r,c[0],c[2]),e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0]),e(n,r,c[1],c[2])]);break;case 3:u.push([e(n,r,c[0],c[2]),e(n,r,c[1],c[2])]);break;case 4:u.push([e(n,r,c[2],c[1]),e(n,r,c[2],c[0])]);break;case 5:u.push([e(n,r,c[2],c[1]),e(n,r,c[0],c[1])]);break;case 6:u.push([e(n,r,c[1],c[0]),e(n,r,c[2],c[0])])}}else if(x===2){var g;if((g=(s[c[0]]<<0)+(s[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0])])}}}return u}},function(){function e(i,r,n,s){for(var a=0|Math.min(n,s),u=0|Math.max(n,s),p=i[2*a],c=i[2*a+1];p<c;){var x=p+c>>1,g=r[2*x+1];if(g===u)return x;u<g?c=x:p=x+1}return p}return function(i,r,n,s){for(var a=i.length,u=[],p=0;p<a;++p){var c=i[p],x=c.length;if(x===4){if((g=(s[c[0]]<<0)+(s[c[1]]<<1)+(s[c[2]]<<2)+(s[c[3]]<<3))==0||g===15)continue;switch(g){case 0:case 15:break;case 1:u.push([e(n,r,c[0],c[1]),e(n,r,c[0],c[2]),e(n,r,c[0],c[3])]);break;case 2:u.push([e(n,r,c[1],c[2]),e(n,r,c[1],c[0]),e(n,r,c[1],c[3])]);break;case 3:u.push([e(n,r,c[1],c[2]),e(n,r,c[0],c[2]),e(n,r,c[0],c[3])],[e(n,r,c[1],c[3]),e(n,r,c[1],c[2]),e(n,r,c[0],c[3])]);break;case 4:u.push([e(n,r,c[2],c[0]),e(n,r,c[2],c[1]),e(n,r,c[2],c[3])]);break;case 5:u.push([e(n,r,c[0],c[1]),e(n,r,c[2],c[1]),e(n,r,c[0],c[3])],[e(n,r,c[2],c[1]),e(n,r,c[2],c[3]),e(n,r,c[0],c[3])]);break;case 6:u.push([e(n,r,c[2],c[0]),e(n,r,c[1],c[0]),e(n,r,c[1],c[3])],[e(n,r,c[2],c[3]),e(n,r,c[2],c[0]),e(n,r,c[1],c[3])]);break;case 7:u.push([e(n,r,c[0],c[3]),e(n,r,c[1],c[3]),e(n,r,c[2],c[3])]);break;case 8:u.push([e(n,r,c[3],c[1]),e(n,r,c[3],c[0]),e(n,r,c[3],c[2])]);break;case 9:u.push([e(n,r,c[3],c[1]),e(n,r,c[0],c[1]),e(n,r,c[0],c[2])],[e(n,r,c[3],c[2]),e(n,r,c[3],c[1]),e(n,r,c[0],c[2])]);break;case 10:u.push([e(n,r,c[1],c[0]),e(n,r,c[3],c[0]),e(n,r,c[1],c[2])],[e(n,r,c[3],c[0]),e(n,r,c[3],c[2]),e(n,r,c[1],c[2])]);break;case 11:u.push([e(n,r,c[1],c[2]),e(n,r,c[0],c[2]),e(n,r,c[3],c[2])]);break;case 12:u.push([e(n,r,c[3],c[0]),e(n,r,c[2],c[0]),e(n,r,c[2],c[1])],[e(n,r,c[3],c[1]),e(n,r,c[3],c[0]),e(n,r,c[2],c[1])]);break;case 13:u.push([e(n,r,c[0],c[1]),e(n,r,c[2],c[1]),e(n,r,c[3],c[1])]);break;case 14:u.push([e(n,r,c[2],c[0]),e(n,r,c[1],c[0]),e(n,r,c[3],c[0])])}}else if(x===3){if((g=(s[c[0]]<<0)+(s[c[1]]<<1)+(s[c[2]]<<2))==0||g===7)continue;switch(g){case 0:case 7:break;case 1:u.push([e(n,r,c[0],c[2]),e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0]),e(n,r,c[1],c[2])]);break;case 3:u.push([e(n,r,c[0],c[2]),e(n,r,c[1],c[2])]);break;case 4:u.push([e(n,r,c[2],c[1]),e(n,r,c[2],c[0])]);break;case 5:u.push([e(n,r,c[2],c[1]),e(n,r,c[0],c[1])]);break;case 6:u.push([e(n,r,c[1],c[0]),e(n,r,c[2],c[0])])}}else if(x===2){var g;if((g=(s[c[0]]<<0)+(s[c[1]]<<1))==0||g===3)continue;switch(g){case 0:case 3:break;case 1:u.push([e(n,r,c[0],c[1])]);break;case 2:u.push([e(n,r,c[1],c[0])])}}}return u}}]},8211:function(f,o,e){e(2288),e(1731),o.H=function(i,r){var n=i.length,s=i.length-r.length,a=Math.min;if(s)return s;switch(n){case 0:return 0;case 1:return i[0]-r[0];case 2:return(c=i[0]+i[1]-r[0]-r[1])||a(i[0],i[1])-a(r[0],r[1]);case 3:var u=i[0]+i[1],p=r[0]+r[1];if(c=u+i[2]-(p+r[2]))return c;var c,x=a(i[0],i[1]),g=a(r[0],r[1]);return(c=a(x,i[2])-a(g,r[2]))||a(x+i[2],u)-a(g+r[2],p);default:var h=i.slice(0);h.sort();var b=r.slice(0);b.sort();for(var v=0;v<n;++v)if(s=h[v]-b[v])return s;return 0}}},9392:function(f,o){function e(r){var n=32;return(r&=-r)&&n--,65535&r&&(n-=16),16711935&r&&(n-=8),252645135&r&&(n-=4),858993459&r&&(n-=2),1431655765&r&&(n-=1),n}o.INT_BITS=32,o.INT_MAX=2147483647,o.INT_MIN=-2147483648,o.sign=function(r){return(r>0)-(r<0)},o.abs=function(r){var n=r>>31;return(r^n)-n},o.min=function(r,n){return n^(r^n)&-(r<n)},o.max=function(r,n){return r^(r^n)&-(r<n)},o.isPow2=function(r){return!(r&r-1||!r)},o.log2=function(r){var n,s;return n=(r>65535)<<4,n|=s=((r>>>=n)>255)<<3,n|=s=((r>>>=s)>15)<<2,(n|=s=((r>>>=s)>3)<<1)|(r>>>=s)>>1},o.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},o.popCount=function(r){return 16843009*((r=(858993459&(r-=r>>>1&1431655765))+(r>>>2&858993459))+(r>>>4)&252645135)>>>24},o.countTrailingZeros=e,o.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,1+((r|=r>>>8)|r>>>16)},o.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,(r|=r>>>16)-(r>>>1)},o.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,27030>>>(r&=15)&1};var i=new Array(256);(function(r){for(var n=0;n<256;++n){var s=n,a=n,u=7;for(s>>>=1;s;s>>>=1)a<<=1,a|=1&s,--u;r[n]=a<<u&255}})(i),o.reverse=function(r){return i[255&r]<<24|i[r>>>8&255]<<16|i[r>>>16&255]<<8|i[r>>>24&255]},o.interleave2=function(r,n){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r&=65535)|r<<8))|r<<4))|r<<2))|r<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n&=65535)|n<<8))|n<<4))|n<<2))|n<<1))<<1},o.deinterleave2=function(r,n){return(r=65535&((r=16711935&((r=252645135&((r=858993459&((r=r>>>n&1431655765)|r>>>1))|r>>>2))|r>>>4))|r>>>16))<<16>>16},o.interleave3=function(r,n,s){return r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2),(r|=(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<1)|(s=1227133513&((s=3272356035&((s=251719695&((s=4278190335&((s&=1023)|s<<16))|s<<8))|s<<4))|s<<2))<<2},o.deinterleave3=function(r,n){return(r=1023&((r=4278190335&((r=251719695&((r=3272356035&((r=r>>>n&1227133513)|r>>>2))|r>>>4))|r>>>8))|r>>>16))<<22>>22},o.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>e(r)+1}},6656:function(f,o,e){var i=e(9392),r=e(9521);function n(g,h){var b=g.length,v=g.length-h.length,y=Math.min;if(v)return v;switch(b){case 0:return 0;case 1:return g[0]-h[0];case 2:return(S=g[0]+g[1]-h[0]-h[1])||y(g[0],g[1])-y(h[0],h[1]);case 3:var w=g[0]+g[1],d=h[0]+h[1];if(S=w+g[2]-(d+h[2]))return S;var S,T=y(g[0],g[1]),E=y(h[0],h[1]);return(S=y(T,g[2])-y(E,h[2]))||y(T+g[2],w)-y(E+h[2],d);default:var C=g.slice(0);C.sort();var L=h.slice(0);L.sort();for(var O=0;O<b;++O)if(v=C[O]-L[O])return v;return 0}}function s(g,h){return n(g[0],h[0])}function a(g,h){if(h){for(var b=g.length,v=new Array(b),y=0;y<b;++y)v[y]=[g[y],h[y]];for(v.sort(s),y=0;y<b;++y)g[y]=v[y][0],h[y]=v[y][1];return g}return g.sort(n),g}function u(g){if(g.length===0)return[];for(var h=1,b=g.length,v=1;v<b;++v){var y=g[v];if(n(y,g[v-1])){if(v===h){h++;continue}g[h++]=y}}return g.length=h,g}function p(g,h){for(var b=0,v=g.length-1,y=-1;b<=v;){var w=b+v>>1,d=n(g[w],h);d<=0?(d===0&&(y=w),b=w+1):d>0&&(v=w-1)}return y}function c(g,h){for(var b=new Array(g.length),v=0,y=b.length;v<y;++v)b[v]=[];for(var w=[],d=(v=0,h.length);v<d;++v)for(var S=h[v],T=S.length,E=1,C=1<<T;E<C;++E){w.length=i.popCount(E);for(var L=0,O=0;O<T;++O)E&1<<O&&(w[L++]=S[O]);var z=p(g,w);if(!(z<0))for(;b[z++].push(v),!(z>=g.length||n(g[z],w)!==0););}return b}function x(g,h){if(h<0)return[];for(var b=[],v=(1<<h+1)-1,y=0;y<g.length;++y)for(var w=g[y],d=v;d<1<<w.length;d=i.nextCombination(d)){for(var S=new Array(h+1),T=0,E=0;E<w.length;++E)d&1<<E&&(S[T++]=w[E]);b.push(S)}return a(b)}o.dimension=function(g){for(var h=0,b=Math.max,v=0,y=g.length;v<y;++v)h=b(h,g[v].length);return h-1},o.countVertices=function(g){for(var h=-1,b=Math.max,v=0,y=g.length;v<y;++v)for(var w=g[v],d=0,S=w.length;d<S;++d)h=b(h,w[d]);return h+1},o.cloneCells=function(g){for(var h=new Array(g.length),b=0,v=g.length;b<v;++b)h[b]=g[b].slice(0);return h},o.compareCells=n,o.normalize=a,o.unique=u,o.findCell=p,o.incidence=c,o.dual=function(g,h){if(!h)return c(u(x(g,0)),g);for(var b=new Array(h),v=0;v<h;++v)b[v]=[];v=0;for(var y=g.length;v<y;++v)for(var w=g[v],d=0,S=w.length;d<S;++d)b[w[d]].push(v);return b},o.explode=function(g){for(var h=[],b=0,v=g.length;b<v;++b)for(var y=g[b],w=0|y.length,d=1,S=1<<w;d<S;++d){for(var T=[],E=0;E<w;++E)d>>>E&1&&T.push(y[E]);h.push(T)}return a(h)},o.skeleton=x,o.boundary=function(g){for(var h=[],b=0,v=g.length;b<v;++b)for(var y=g[b],w=0,d=y.length;w<d;++w){for(var S=new Array(y.length-1),T=0,E=0;T<d;++T)T!==w&&(S[E++]=y[T]);h.push(S)}return a(h)},o.connectedComponents=function(g,h){return h?function(b,v){for(var y=new r(v),w=0;w<b.length;++w)for(var d=b[w],S=0;S<d.length;++S)for(var T=S+1;T<d.length;++T)y.link(d[S],d[T]);var E=[],C=y.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<b.length;++w){var L=y.find(b[w][0]);C[L]<0?(C[L]=E.length,E.push([b[w].slice(0)])):E[C[L]].push(b[w].slice(0))}return E}(g,h):function(b){for(var v=u(a(x(b,0))),y=new r(v.length),w=0;w<b.length;++w)for(var d=b[w],S=0;S<d.length;++S)for(var T=p(v,[d[S]]),E=S+1;E<d.length;++E)y.link(T,p(v,[d[E]]));var C=[],L=y.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<b.length;++w){var O=y.find(p(v,[b[w][0]]));L[O]<0?(L[O]=C.length,C.push([b[w].slice(0)])):C[L[O]].push(b[w].slice(0))}return C}(g)}},9521:function(f){function o(e){this.roots=new Array(e),this.ranks=new Array(e);for(var i=0;i<e;++i)this.roots[i]=i,this.ranks[i]=0}f.exports=o,o.prototype.length=function(){return this.roots.length},o.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},o.prototype.find=function(e){for(var i=this.roots;i[e]!==e;){var r=i[e];i[e]=i[r],e=r}return e},o.prototype.link=function(e,i){var r=this.find(e),n=this.find(i);if(r!==n){var s=this.ranks,a=this.roots,u=s[r],p=s[n];u<p?a[r]=n:p<u?a[n]=r:(a[n]=r,++s[r])}}},8243:function(f,o,e){f.exports=function(n,s,a){for(var u=s.length,p=n.length,c=new Array(u),x=new Array(u),g=new Array(u),h=new Array(u),b=0;b<u;++b)c[b]=x[b]=-1,g[b]=1/0,h[b]=!1;for(b=0;b<p;++b){var v=n[b];if(v.length!==2)throw new Error("Input must be a graph");var y=v[1],w=v[0];x[w]!==-1?x[w]=-2:x[w]=y,c[y]!==-1?c[y]=-2:c[y]=w}function d(Q){if(h[Q])return 1/0;var X,q,Z,J=c[Q],ne=x[Q];return J<0||ne<0?1/0:(X=s[Q],q=s[J],Z=s[ne],Math.abs(i(X,q,Z))/Math.sqrt(Math.pow(q[0]-Z[0],2)+Math.pow(q[1]-Z[1],2)))}function S(Q,X){var q=I[Q],Z=I[X];I[Q]=Z,I[X]=q,H[q]=X,H[Z]=Q}function T(Q){return g[I[Q]]}function E(Q){return 1&Q?Q-1>>1:(Q>>1)-1}function C(Q){for(var X=T(Q);;){var q=X,Z=2*Q+1,J=2*(Q+1),ne=Q;if(Z<N){var re=T(Z);re<q&&(ne=Z,q=re)}if(J<N&&T(J)<q&&(ne=J),ne===Q)return Q;S(Q,ne),Q=ne}}function L(Q){for(var X=T(Q);Q>0;){var q=E(Q);if(!(q>=0&&X<T(q)))return Q;S(Q,q),Q=q}}function O(){if(N>0){var Q=I[0];return S(0,N-1),N-=1,C(0),Q}return-1}function z(Q,X){var q=I[Q];return g[q]===X?Q:(g[q]=-1/0,L(Q),O(),g[q]=X,L((N+=1)-1))}function G(Q){if(!h[Q]){h[Q]=!0;var X=c[Q],q=x[Q];c[q]>=0&&(c[q]=X),x[X]>=0&&(x[X]=q),H[X]>=0&&z(H[X],d(X)),H[q]>=0&&z(H[q],d(q))}}var I=[],H=new Array(u);for(b=0;b<u;++b)(g[b]=d(b))<1/0?(H[b]=I.length,I.push(b)):H[b]=-1;var N=I.length;for(b=N>>1;b>=0;--b)C(b);for(;;){var F=O();if(F<0||g[F]>a)break;G(F)}var V=[];for(b=0;b<u;++b)h[b]||(H[b]=V.length,V.push(s[b].slice()));function W(Q,X){if(Q[X]<0)return X;var q=X,Z=X;do{var J=Q[Z];if(!h[Z]||J<0||J===Z||(J=Q[Z=J],!h[Z]||J<0||J===Z))break;Z=J,q=Q[q]}while(q!==Z);for(var ne=X;ne!==Z;ne=Q[ne])Q[ne]=Z;return Z}V.length;var te=[];return n.forEach(function(Q){var X=W(c,Q[0]),q=W(x,Q[1]);if(X>=0&&q>=0&&X!==q){var Z=H[X],J=H[q];Z!==J&&te.push([Z,J])}}),r.unique(r.normalize(te)),{positions:V,edges:te}};var i=e(417),r=e(6656)},6638:function(f,o,e){f.exports=function(n,s){var a,u,p,c;if(s[0][0]<s[1][0])a=s[0],u=s[1];else{if(!(s[0][0]>s[1][0]))return r(s,n);a=s[1],u=s[0]}if(n[0][0]<n[1][0])p=n[0],c=n[1];else{if(!(n[0][0]>n[1][0]))return-r(n,s);p=n[1],c=n[0]}var x=i(a,u,c),g=i(a,u,p);if(x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;if(x=i(c,p,u),g=i(c,p,a),x<0){if(g<=0)return x}else if(x>0){if(g>=0)return x}else if(g)return g;return u[0]-c[0]};var i=e(417);function r(n,s){var a,u,p,c;if(s[0][0]<s[1][0])a=s[0],u=s[1];else{if(!(s[0][0]>s[1][0])){var x=Math.min(n[0][1],n[1][1]),g=Math.max(n[0][1],n[1][1]),h=Math.min(s[0][1],s[1][1]),b=Math.max(s[0][1],s[1][1]);return g<h?g-h:x>b?x-b:g-b}a=s[1],u=s[0]}n[0][1]<n[1][1]?(p=n[0],c=n[1]):(p=n[1],c=n[0]);var v=i(u,a,p);return v||(v=i(u,a,c))||c-u}},4385:function(f,o,e){f.exports=function(g){for(var h=g.length,b=2*h,v=new Array(b),y=0;y<h;++y){var w=g[y],d=w[0][0]<w[1][0];v[2*y]=new x(w[0][0],w,d,y),v[2*y+1]=new x(w[1][0],w,!d,y)}v.sort(function(G,I){var H=G.x-I.x;return H||(H=G.create-I.create)||Math.min(G.segment[0][1],G.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var S=r(s),T=[],E=[],C=[];for(y=0;y<b;){for(var L=v[y].x,O=[];y<b;){var z=v[y];if(z.x!==L)break;y+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(O.push(new c(z.segment[0][1],z.index,!0,!0)),O.push(new c(z.segment[1][1],z.index,!1,!1))):(O.push(new c(z.segment[1][1],z.index,!0,!1)),O.push(new c(z.segment[0][1],z.index,!1,!0)))):S=z.create?S.insert(z.segment,z.index):S.remove(z.segment)}T.push(S.root),E.push(L),C.push(O)}return new a(T,E,C)};var i=e(5070),r=e(7080),n=e(417),s=e(6638);function a(g,h,b){this.slabs=g,this.coordinates=h,this.horizontal=b}function u(g,h){return g.y-h}function p(g,h){for(var b=null;g;){var v,y,w=g.key;w[0][0]<w[1][0]?(v=w[0],y=w[1]):(v=w[1],y=w[0]);var d=n(v,y,h);if(d<0)g=g.left;else if(d>0)if(h[0]!==w[1][0])b=g,g=g.right;else{if(S=p(g.right,h))return S;g=g.left}else{if(h[0]!==w[1][0])return g;var S;if(S=p(g.right,h))return S;g=g.left}}return b}function c(g,h,b,v){this.y=g,this.index=h,this.start=b,this.closed=v}function x(g,h,b,v){this.x=g,this.segment=h,this.create=b,this.index=v}a.prototype.castUp=function(g){var h=i.le(this.coordinates,g[0]);if(h<0)return-1;this.slabs[h];var b=p(this.slabs[h],g),v=-1;if(b&&(v=b.value),this.coordinates[h]===g[0]){var y=null;if(b&&(y=b.key),h>0){var w=p(this.slabs[h-1],g);w&&(y?s(w.key,y)>0&&(y=w.key,v=w.value):(v=w.value,y=w.key))}var d=this.horizontal[h];if(d.length>0){var S=i.ge(d,g[1],u);if(S<d.length){var T=d[S];if(g[1]===T.y){if(T.closed)return T.index;for(;S<d.length-1&&d[S+1].y===g[1];)if((T=d[S+=1]).closed)return T.index;if(T.y===g[1]&&!T.start){if((S+=1)>=d.length)return v;T=d[S]}}if(T.start)if(y){var E=n(y[0],y[1],[g[0],T.y]);y[0][0]>y[1][0]&&(E=-E),E>0&&(v=T.index)}else v=T.index;else T.y!==g[1]&&(v=T.index)}}}return v}},4670:function(f,o,e){var i=e(9130),r=e(9662);function n(a,u){var p=r(i(a,u),[u[u.length-1]]);return p[p.length-1]}function s(a,u,p,c){var x=-u/(c-u);x<0?x=0:x>1&&(x=1);for(var g=1-x,h=a.length,b=new Array(h),v=0;v<h;++v)b[v]=x*a[v]+g*p[v];return b}f.exports=function(a,u){for(var p=[],c=[],x=n(a[a.length-1],u),g=a[a.length-1],h=a[0],b=0;b<a.length;++b,g=h){var v=n(h=a[b],u);if(x<0&&v>0||x>0&&v<0){var y=s(g,v,h,x);p.push(y),c.push(y.slice())}v<0?c.push(h.slice()):v>0?p.push(h.slice()):(p.push(h.slice()),c.push(h.slice())),x=v}return{positive:p,negative:c}},f.exports.positive=function(a,u){for(var p=[],c=n(a[a.length-1],u),x=a[a.length-1],g=a[0],h=0;h<a.length;++h,x=g){var b=n(g=a[h],u);(c<0&&b>0||c>0&&b<0)&&p.push(s(x,b,g,c)),b>=0&&p.push(g.slice()),c=b}return p},f.exports.negative=function(a,u){for(var p=[],c=n(a[a.length-1],u),x=a[a.length-1],g=a[0],h=0;h<a.length;++h,x=g){var b=n(g=a[h],u);(c<0&&b>0||c>0&&b<0)&&p.push(s(x,b,g,c)),b<=0&&p.push(g.slice()),c=b}return p}},8974:function(f,o,e){var i;(function(){var r={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(u){return function(p,c){var x,g,h,b,v,y,w,d,S,T=1,E=p.length,C="";for(g=0;g<E;g++)if(typeof p[g]=="string")C+=p[g];else if(typeof p[g]=="object"){if((b=p[g]).keys)for(x=c[T],h=0;h<b.keys.length;h++){if(x==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',b.keys[h],b.keys[h-1]));x=x[b.keys[h]]}else x=b.param_no?c[b.param_no]:c[T++];if(r.not_type.test(b.type)&&r.not_primitive.test(b.type)&&x instanceof Function&&(x=x()),r.numeric_arg.test(b.type)&&typeof x!="number"&&isNaN(x))throw new TypeError(n("[sprintf] expecting number but found %T",x));switch(r.number.test(b.type)&&(d=x>=0),b.type){case"b":x=parseInt(x,10).toString(2);break;case"c":x=String.fromCharCode(parseInt(x,10));break;case"d":case"i":x=parseInt(x,10);break;case"j":x=JSON.stringify(x,null,b.width?parseInt(b.width):0);break;case"e":x=b.precision?parseFloat(x).toExponential(b.precision):parseFloat(x).toExponential();break;case"f":x=b.precision?parseFloat(x).toFixed(b.precision):parseFloat(x);break;case"g":x=b.precision?String(Number(x.toPrecision(b.precision))):parseFloat(x);break;case"o":x=(parseInt(x,10)>>>0).toString(8);break;case"s":x=String(x),x=b.precision?x.substring(0,b.precision):x;break;case"t":x=String(!!x),x=b.precision?x.substring(0,b.precision):x;break;case"T":x=Object.prototype.toString.call(x).slice(8,-1).toLowerCase(),x=b.precision?x.substring(0,b.precision):x;break;case"u":x=parseInt(x,10)>>>0;break;case"v":x=x.valueOf(),x=b.precision?x.substring(0,b.precision):x;break;case"x":x=(parseInt(x,10)>>>0).toString(16);break;case"X":x=(parseInt(x,10)>>>0).toString(16).toUpperCase()}r.json.test(b.type)?C+=x:(!r.number.test(b.type)||d&&!b.sign?S="":(S=d?"+":"-",x=x.toString().replace(r.sign,"")),y=b.pad_char?b.pad_char==="0"?"0":b.pad_char.charAt(1):" ",w=b.width-(S+x).length,v=b.width&&w>0?y.repeat(w):"",C+=b.align?S+x+v:y==="0"?S+v+x:v+S+x)}return C}(function(p){if(a[p])return a[p];for(var c,x=p,g=[],h=0;x;){if((c=r.text.exec(x))!==null)g.push(c[0]);else if((c=r.modulo.exec(x))!==null)g.push("%");else{if((c=r.placeholder.exec(x))===null)throw new SyntaxError("[sprintf] unexpected placeholder");if(c[2]){h|=1;var b=[],v=c[2],y=[];if((y=r.key.exec(v))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");for(b.push(y[1]);(v=v.substring(y[0].length))!=="";)if((y=r.key_access.exec(v))!==null)b.push(y[1]);else{if((y=r.index_access.exec(v))===null)throw new SyntaxError("[sprintf] failed to parse named argument key");b.push(y[1])}c[2]=b}else h|=2;if(h===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}x=x.substring(c[0].length)}return a[p]=g}(u),arguments)}function s(u,p){return n.apply(null,[u].concat(p||[]))}var a=Object.create(null);o.sprintf=n,o.vsprintf=s,typeof window<"u"&&(window.sprintf=n,window.vsprintf=s,(i=(function(){return{sprintf:n,vsprintf:s}}).call(o,e,o,f))===void 0||(f.exports=i))})()},4162:function(f,o,e){f.exports=function(a,u){if(a.dimension<=0)return{positions:[],cells:[]};if(a.dimension===1)return function(x,g){for(var h=r(x,g),b=h.length,v=new Array(b),y=new Array(b),w=0;w<b;++w)v[w]=[h[w]],y[w]=[w];return{positions:v,cells:y}}(a,u);var p=a.order.join()+"-"+a.dtype,c=s[p];return u=+u||0,c||(c=s[p]=function(x,g){var h=x.length+"d",b=n[h];if(b)return b(i,x,g)}(a.order,a.dtype)),c(a,u)};var i=e(9284),r=e(9584),n={"2d":function(a,u,p){var c=a({order:u,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(x,g,h,b){return x>b|0},vertex:function(x,g,h,b,v,y,w,d,S,T,E,C,L){var O=(w<<0)+(d<<1)+(S<<2)+(T<<3)|0;if(O!==0&&O!==15)switch(O){case 0:case 15:E.push([x-.5,g-.5]);break;case 1:E.push([x-.25-.25*(b+h-2*L)/(h-b),g-.25-.25*(v+h-2*L)/(h-v)]);break;case 2:E.push([x-.75-.25*(-b-h+2*L)/(b-h),g-.25-.25*(y+b-2*L)/(b-y)]);break;case 3:E.push([x-.5,g-.5-.5*(v+h+y+b-4*L)/(h-v+b-y)]);break;case 4:E.push([x-.25-.25*(y+v-2*L)/(v-y),g-.75-.25*(-v-h+2*L)/(v-h)]);break;case 5:E.push([x-.5-.5*(b+h+y+v-4*L)/(h-b+v-y),g-.5]);break;case 6:E.push([x-.5-.25*(-b-h+y+v)/(b-h+v-y),g-.5-.25*(-v-h+y+b)/(v-h+b-y)]);break;case 7:E.push([x-.75-.25*(y+v-2*L)/(v-y),g-.75-.25*(y+b-2*L)/(b-y)]);break;case 8:E.push([x-.75-.25*(-y-v+2*L)/(y-v),g-.75-.25*(-y-b+2*L)/(y-b)]);break;case 9:E.push([x-.5-.25*(b+h+-y-v)/(h-b+y-v),g-.5-.25*(v+h+-y-b)/(h-v+y-b)]);break;case 10:E.push([x-.5-.5*(-b-h-y-v+4*L)/(b-h+y-v),g-.5]);break;case 11:E.push([x-.25-.25*(-y-v+2*L)/(y-v),g-.75-.25*(v+h-2*L)/(h-v)]);break;case 12:E.push([x-.5,g-.5-.5*(-v-h-y-b+4*L)/(v-h+y-b)]);break;case 13:E.push([x-.75-.25*(b+h-2*L)/(h-b),g-.25-.25*(-y-b+2*L)/(y-b)]);break;case 14:E.push([x-.25-.25*(-b-h+2*L)/(b-h),g-.25-.25*(-v-h+2*L)/(v-h)])}},cell:function(x,g,h,b,v,y,w,d,S){v?d.push([x,g]):d.push([g,x])}});return function(x,g){var h=[],b=[];return c(x,h,b,g),{positions:h,cells:b}}}},s={}},6946:function(f,o,e){f.exports=function s(a,u,p){p=p||{};var c=n[a];c||(c=n[a]={" ":{data:new Float32Array(0),shape:.2}});var x=c[u];if(!x)if(u.length<=1||!/\d/.test(u))x=c[u]=function(C){for(var L=C.cells,O=C.positions,z=new Float32Array(6*L.length),G=0,I=0,H=0;H<L.length;++H)for(var N=L[H],F=0;F<3;++F){var V=O[N[F]];z[G++]=V[0],z[G++]=V[1]+1.4,I=Math.max(V[0],I)}return{data:z,shape:I}}(i(u,{triangles:!0,font:a,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var g=u.split(/(\d|\s)/),h=new Array(g.length),b=0,v=0,y=0;y<g.length;++y)h[y]=s(a,g[y]),b+=h[y].data.length,v+=h[y].shape,y>0&&(v+=.02);var w=new Float32Array(b),d=0,S=-.5*v;for(y=0;y<h.length;++y){for(var T=h[y].data,E=0;E<T.length;E+=2)w[d++]=T[E]+S,w[d++]=T[E+1];S+=h[y].shape+.02}x=c[u]={data:w,shape:v}}return x};var i=e(875),r=window||M.global||{},n=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}},14:function(f,o,e){var i=e(4405);f.exports=s;var r=96;function n(a,u){var p=i(getComputedStyle(a).getPropertyValue(u));return p[0]*s(p[1],a)}function s(a,u){switch(u=u||document.body,a=(a||"px").trim().toLowerCase(),u!==window&&u!==document||(u=document.body),a){case"%":return u.clientHeight/100;case"ch":case"ex":return function(p,c){var x=document.createElement("div");x.style["font-size"]="128"+p,c.appendChild(x);var g=n(x,"font-size")/128;return c.removeChild(x),g}(a,u);case"em":return n(u,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return r;case"cm":return r/2.54;case"mm":return r/25.4;case"pt":return r/72;case"pc":return r/6}return 1}},3440:function(f,o,e){f.exports=function(v){var y=(v=v||{}).center||[0,0,0],w=v.up||[0,1,0],d=v.right||x(w),S=v.radius||1,T=v.theta||0,E=v.phi||0;if(y=[].slice.call(y,0,3),w=[].slice.call(w,0,3),a(w,w),d=[].slice.call(d,0,3),a(d,d),"eye"in v){var C=v.eye,L=[C[0]-y[0],C[1]-y[1],C[2]-y[2]];s(d,L,w),p(d[0],d[1],d[2])<1e-6?d=x(w):a(d,d),S=p(L[0],L[1],L[2]);var O=u(w,L)/S,z=u(d,L)/S;E=Math.acos(O),T=Math.acos(z)}return S=Math.log(S),new g(v.zoomMin,v.zoomMax,y,w,d,S,T,E)};var i=e(8444),r=e(7437),n=e(4422),s=e(903),a=e(899),u=e(9305);function p(v,y,w){return Math.sqrt(Math.pow(v,2)+Math.pow(y,2)+Math.pow(w,2))}function c(v){return Math.min(1,Math.max(-1,v))}function x(v){var y=Math.abs(v[0]),w=Math.abs(v[1]),d=Math.abs(v[2]),S=[0,0,0];y>Math.max(w,d)?S[2]=1:w>Math.max(y,d)?S[0]=1:S[1]=1;for(var T=0,E=0,C=0;C<3;++C)T+=v[C]*v[C],E+=S[C]*v[C];for(C=0;C<3;++C)S[C]-=E/T*v[C];return a(S,S),S}function g(v,y,w,d,S,T,E,C){this.center=i(w),this.up=i(d),this.right=i(S),this.radius=i([T]),this.angle=i([E,C]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(v,y),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var h=g.prototype;h.setDistanceLimits=function(v,y){v=v>0?Math.log(v):-1/0,y=y>0?Math.log(y):1/0,y=Math.max(y,v),this.radius.bounds[0][0]=v,this.radius.bounds[1][0]=y},h.getDistanceLimits=function(v){var y=this.radius.bounds[0];return v?(v[0]=Math.exp(y[0][0]),v[1]=Math.exp(y[1][0]),v):[Math.exp(y[0][0]),Math.exp(y[1][0])]},h.recalcMatrix=function(v){this.center.curve(v),this.up.curve(v),this.right.curve(v),this.radius.curve(v),this.angle.curve(v);for(var y=this.computedUp,w=this.computedRight,d=0,S=0,T=0;T<3;++T)S+=y[T]*w[T],d+=y[T]*y[T];var E=Math.sqrt(d),C=0;for(T=0;T<3;++T)w[T]-=y[T]*S/d,C+=w[T]*w[T],y[T]/=E;var L=Math.sqrt(C);for(T=0;T<3;++T)w[T]/=L;var O=this.computedToward;s(O,y,w),a(O,O);var z=Math.exp(this.computedRadius[0]),G=this.computedAngle[0],I=this.computedAngle[1],H=Math.cos(G),N=Math.sin(G),F=Math.cos(I),V=Math.sin(I),W=this.computedCenter,te=H*F,Q=N*F,X=V,q=-H*V,Z=-N*V,J=F,ne=this.computedEye,re=this.computedMatrix;for(T=0;T<3;++T){var ae=te*w[T]+Q*O[T]+X*y[T];re[4*T+1]=q*w[T]+Z*O[T]+J*y[T],re[4*T+2]=ae,re[4*T+3]=0}var ue=re[1],he=re[5],de=re[9],xe=re[2],me=re[6],ve=re[10],Le=he*ve-de*me,Ae=de*xe-ue*ve,we=ue*me-he*xe,se=p(Le,Ae,we);for(Le/=se,Ae/=se,we/=se,re[0]=Le,re[4]=Ae,re[8]=we,T=0;T<3;++T)ne[T]=W[T]+re[2+4*T]*z;for(T=0;T<3;++T){C=0;for(var oe=0;oe<3;++oe)C+=re[T+4*oe]*ne[oe];re[12+T]=-C}re[15]=1},h.getMatrix=function(v,y){this.recalcMatrix(v);var w=this.computedMatrix;if(y){for(var d=0;d<16;++d)y[d]=w[d];return y}return w};var b=[0,0,0];h.rotate=function(v,y,w,d){if(this.angle.move(v,y,w),d){this.recalcMatrix(v);var S=this.computedMatrix;b[0]=S[2],b[1]=S[6],b[2]=S[10];for(var T=this.computedUp,E=this.computedRight,C=this.computedToward,L=0;L<3;++L)S[4*L]=T[L],S[4*L+1]=E[L],S[4*L+2]=C[L];for(n(S,S,d,b),L=0;L<3;++L)T[L]=S[4*L],E[L]=S[4*L+1];this.up.set(v,T[0],T[1],T[2]),this.right.set(v,E[0],E[1],E[2])}},h.pan=function(v,y,w,d){y=y||0,w=w||0,d=d||0,this.recalcMatrix(v);var S=this.computedMatrix,T=(Math.exp(this.computedRadius[0]),S[1]),E=S[5],C=S[9],L=p(T,E,C);T/=L,E/=L,C/=L;var O=S[0],z=S[4],G=S[8],I=O*T+z*E+G*C,H=p(O-=T*I,z-=E*I,G-=C*I),N=(O/=H)*y+T*w,F=(z/=H)*y+E*w,V=(G/=H)*y+C*w;this.center.move(v,N,F,V);var W=Math.exp(this.computedRadius[0]);W=Math.max(1e-4,W+d),this.radius.set(v,Math.log(W))},h.translate=function(v,y,w,d){this.center.move(v,y||0,w||0,d||0)},h.setMatrix=function(v,y,w,d){var S=1;typeof w=="number"&&(S=0|w),(S<0||S>3)&&(S=1);var T=(S+2)%3;y||(this.recalcMatrix(v),y=this.computedMatrix);var E=y[S],C=y[S+4],L=y[S+8];if(d){var O=Math.abs(E),z=Math.abs(C),G=Math.abs(L),I=Math.max(O,z,G);O===I?(E=E<0?-1:1,C=L=0):G===I?(L=L<0?-1:1,E=C=0):(C=C<0?-1:1,E=L=0)}else{var H=p(E,C,L);E/=H,C/=H,L/=H}var N,F,V=y[T],W=y[T+4],te=y[T+8],Q=V*E+W*C+te*L,X=p(V-=E*Q,W-=C*Q,te-=L*Q),q=C*(te/=X)-L*(W/=X),Z=L*(V/=X)-E*te,J=E*W-C*V,ne=p(q,Z,J);if(q/=ne,Z/=ne,J/=ne,this.center.jump(v,be,Ie,Be),this.radius.idle(v),this.up.jump(v,E,C,L),this.right.jump(v,V,W,te),S===2){var re=y[1],ae=y[5],ue=y[9],he=re*V+ae*W+ue*te,de=re*q+ae*Z+ue*J;N=Le<0?-Math.PI/2:Math.PI/2,F=Math.atan2(de,he)}else{var xe=y[2],me=y[6],ve=y[10],Le=xe*E+me*C+ve*L,Ae=xe*V+me*W+ve*te,we=xe*q+me*Z+ve*J;N=Math.asin(c(Le)),F=Math.atan2(we,Ae)}this.angle.jump(v,F,N),this.recalcMatrix(v);var se=y[2],oe=y[6],fe=y[10],Se=this.computedMatrix;r(Se,y);var Me=Se[15],be=Se[12]/Me,Ie=Se[13]/Me,Be=Se[14]/Me,ce=Math.exp(this.computedRadius[0]);this.center.jump(v,be-se*ce,Ie-oe*ce,Be-fe*ce)},h.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},h.idle=function(v){this.center.idle(v),this.up.idle(v),this.right.idle(v),this.radius.idle(v),this.angle.idle(v)},h.flush=function(v){this.center.flush(v),this.up.flush(v),this.right.flush(v),this.radius.flush(v),this.angle.flush(v)},h.setDistance=function(v,y){y>0&&this.radius.set(v,Math.log(y))},h.lookAt=function(v,y,w,d){this.recalcMatrix(v),y=y||this.computedEye,w=w||this.computedCenter;var S=(d=d||this.computedUp)[0],T=d[1],E=d[2],C=p(S,T,E);if(!(C<1e-6)){S/=C,T/=C,E/=C;var L=y[0]-w[0],O=y[1]-w[1],z=y[2]-w[2],G=p(L,O,z);if(!(G<1e-6)){L/=G,O/=G,z/=G;var I=this.computedRight,H=I[0],N=I[1],F=I[2],V=S*H+T*N+E*F,W=p(H-=V*S,N-=V*T,F-=V*E);if(!(W<.01&&(W=p(H=T*z-E*O,N=E*L-S*z,F=S*O-T*L))<1e-6)){H/=W,N/=W,F/=W,this.up.set(v,S,T,E),this.right.set(v,H,N,F),this.center.set(v,w[0],w[1],w[2]),this.radius.set(v,Math.log(G));var te=T*F-E*N,Q=E*H-S*F,X=S*N-T*H,q=p(te,Q,X),Z=S*L+T*O+E*z,J=H*L+N*O+F*z,ne=(te/=q)*L+(Q/=q)*O+(X/=q)*z,re=Math.asin(c(Z)),ae=Math.atan2(ne,J),ue=this.angle._state,he=ue[ue.length-1],de=ue[ue.length-2];he%=2*Math.PI;var xe=Math.abs(he+2*Math.PI-ae),me=Math.abs(he-ae),ve=Math.abs(he-2*Math.PI-ae);xe<me&&(he+=2*Math.PI),ve<me&&(he-=2*Math.PI),this.angle.jump(this.angle.lastT(),he,de),this.angle.set(v,ae,re)}}}}},9660:function(f){f.exports=function(e,i,r){var n=e*i,s=o*e,a=s-(s-e),u=e-a,p=o*i,c=p-(p-i),x=i-c,g=u*x-(n-a*c-u*c-a*x);return r?(r[0]=g,r[1]=n,r):[g,n]};var o=+(Math.pow(2,27)+1)},87:function(f){f.exports=function(o,e,i){var r=o+e,n=r-o,s=e-n,a=o-(r-n);return i?(i[0]=a+s,i[1]=r,i):[a+s,r]}},5306:function(f,o,e){var i=e(2288),r=e(3094),n=e(2146).lW;e.g.__TYPEDARRAY_POOL||(e.g.__TYPEDARRAY_POOL={UINT8:r([32,0]),UINT16:r([32,0]),UINT32:r([32,0]),BIGUINT64:r([32,0]),INT8:r([32,0]),INT16:r([32,0]),INT32:r([32,0]),BIGINT64:r([32,0]),FLOAT:r([32,0]),DOUBLE:r([32,0]),DATA:r([32,0]),UINT8C:r([32,0]),BUFFER:r([32,0])});var s=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",p=e.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=r([32,0])),p.BIGUINT64||(p.BIGUINT64=r([32,0])),p.BIGINT64||(p.BIGINT64=r([32,0])),p.BUFFER||(p.BUFFER=r([32,0]));var c=p.DATA,x=p.BUFFER;function g(I){if(I){var H=I.length||I.byteLength,N=i.log2(H);c[N].push(I)}}function h(I){I=i.nextPow2(I);var H=i.log2(I),N=c[H];return N.length>0?N.pop():new ArrayBuffer(I)}function b(I){return new Uint8Array(h(I),0,I)}function v(I){return new Uint16Array(h(2*I),0,I)}function y(I){return new Uint32Array(h(4*I),0,I)}function w(I){return new Int8Array(h(I),0,I)}function d(I){return new Int16Array(h(2*I),0,I)}function S(I){return new Int32Array(h(4*I),0,I)}function T(I){return new Float32Array(h(4*I),0,I)}function E(I){return new Float64Array(h(8*I),0,I)}function C(I){return s?new Uint8ClampedArray(h(I),0,I):b(I)}function L(I){return a?new BigUint64Array(h(8*I),0,I):null}function O(I){return u?new BigInt64Array(h(8*I),0,I):null}function z(I){return new DataView(h(I),0,I)}function G(I){I=i.nextPow2(I);var H=i.log2(I),N=x[H];return N.length>0?N.pop():new n(I)}o.free=function(I){if(n.isBuffer(I))x[i.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var H=I.length||I.byteLength,N=0|i.log2(H);c[N].push(I)}},o.freeUint8=o.freeUint16=o.freeUint32=o.freeBigUint64=o.freeInt8=o.freeInt16=o.freeInt32=o.freeBigInt64=o.freeFloat32=o.freeFloat=o.freeFloat64=o.freeDouble=o.freeUint8Clamped=o.freeDataView=function(I){g(I.buffer)},o.freeArrayBuffer=g,o.freeBuffer=function(I){x[i.log2(I.length)].push(I)},o.malloc=function(I,H){if(H===void 0||H==="arraybuffer")return h(I);switch(H){case"uint8":return b(I);case"uint16":return v(I);case"uint32":return y(I);case"int8":return w(I);case"int16":return d(I);case"int32":return S(I);case"float":case"float32":return T(I);case"double":case"float64":return E(I);case"uint8_clamped":return C(I);case"bigint64":return O(I);case"biguint64":return L(I);case"buffer":return G(I);case"data":case"dataview":return z(I);default:return null}return null},o.mallocArrayBuffer=h,o.mallocUint8=b,o.mallocUint16=v,o.mallocUint32=y,o.mallocInt8=w,o.mallocInt16=d,o.mallocInt32=S,o.mallocFloat32=o.mallocFloat=T,o.mallocFloat64=o.mallocDouble=E,o.mallocUint8Clamped=C,o.mallocBigUint64=L,o.mallocBigInt64=O,o.mallocDataView=z,o.mallocBuffer=G,o.clearCache=function(){for(var I=0;I<32;++I)p.UINT8[I].length=0,p.UINT16[I].length=0,p.UINT32[I].length=0,p.INT8[I].length=0,p.INT16[I].length=0,p.INT32[I].length=0,p.FLOAT[I].length=0,p.DOUBLE[I].length=0,p.BIGUINT64[I].length=0,p.BIGINT64[I].length=0,p.UINT8C[I].length=0,c[I].length=0,x[I].length=0}},1731:function(f){function o(i){this.roots=new Array(i),this.ranks=new Array(i);for(var r=0;r<i;++r)this.roots[r]=r,this.ranks[r]=0}f.exports=o;var e=o.prototype;Object.defineProperty(e,"length",{get:function(){return this.roots.length}}),e.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},e.find=function(i){for(var r=i,n=this.roots;n[i]!==i;)i=n[i];for(;n[r]!==i;){var s=n[r];n[r]=i,r=s}return i},e.link=function(i,r){var n=this.find(i),s=this.find(r);if(n!==s){var a=this.ranks,u=this.roots,p=a[n],c=a[s];p<c?u[n]=s:c<p?u[s]=n:(u[s]=n,++a[n])}}},1215:function(f){f.exports=function(o,e,i){return o.length===0?o:e?(i||o.sort(e),function(r,n){for(var s=1,a=r.length,u=r[0],p=r[0],c=1;c<a;++c)if(p=u,n(u=r[c],p)){if(c===s){s++;continue}r[s++]=u}return r.length=s,r}(o,e)):(i||o.sort(),function(r){for(var n=1,s=r.length,a=r[0],u=r[0],p=1;p<s;++p,u=a)if(u=a,(a=r[p])!==u){if(p===n){n++;continue}r[n++]=a}return r.length=n,r}(o))}},875:function(f,o,e){f.exports=function(s,a){return typeof a=="object"&&a!==null||(a={}),i(s,a.canvas||r,a.context||n,a)};var i=e(712),r=null,n=null;typeof document<"u"&&((r=document.createElement("canvas")).width=8192,r.height=1024,n=r.getContext("2d"))},712:function(f,o,e){f.exports=function(L,O,z,G){var I=64,H=1.25,N={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return G&&(G.size&&G.size>0&&(I=G.size),G.lineSpacing&&G.lineSpacing>0&&(H=G.lineSpacing),G.styletags&&G.styletags.breaklines&&(N.breaklines=!!G.styletags.breaklines),G.styletags&&G.styletags.bolds&&(N.bolds=!!G.styletags.bolds),G.styletags&&G.styletags.italics&&(N.italics=!!G.styletags.italics),G.styletags&&G.styletags.subscripts&&(N.subscripts=!!G.styletags.subscripts),G.styletags&&G.styletags.superscripts&&(N.superscripts=!!G.styletags.superscripts)),z.font=[G.fontStyle,G.fontVariant,G.fontWeight,I+"px",G.font].filter(function(F){return F}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr",C(function(F,V,W,te,Q,X){W=W.replace(/\n/g,""),W=X.breaklines===!0?W.replace(/\<br\>/g,`
`):W.replace(/\<br\>/g," ");var q="",Z=[];for(ae=0;ae<W.length;++ae)Z[ae]=q;X.bolds===!0&&(Z=S(p,c,W,Z)),X.italics===!0&&(Z=S(x,g,W,Z)),X.superscripts===!0&&(Z=S(h,v,W,Z)),X.subscripts===!0&&(Z=S(y,d,W,Z));var J=[],ne="";for(ae=0;ae<W.length;++ae)Z[ae]!==null&&(ne+=W[ae],J.push(Z[ae]));var re,ae,ue,he,de,xe=ne.split(`
`),me=xe.length,ve=Math.round(Q*te),Le=te,Ae=2*te,we=0,se=me*ve+Ae;F.height<se&&(F.height=se),V.fillStyle="#000",V.fillRect(0,0,F.width,F.height),V.fillStyle="#fff";var oe=0,fe="";function Se(){if(fe!==""){var Pe=V.measureText(fe).width;V.fillText(fe,Le+ue,Ae+he),ue+=Pe}}function Me(){return Math.round(de)+"px "}function be(Pe,Re){var ze=""+V.font;if(X.subscripts===!0){var He=Pe.indexOf(w),We=Re.indexOf(w),Je=He>-1?parseInt(Pe[1+He]):0,lt=We>-1?parseInt(Re[1+We]):0;Je!==lt&&(ze=ze.replace(Me(),"?px "),de*=Math.pow(.75,lt-Je),ze=ze.replace("?px ",Me())),he+=.25*ve*(lt-Je)}if(X.superscripts===!0){var et=Pe.indexOf(b),yt=Re.indexOf(b),_t=et>-1?parseInt(Pe[1+et]):0,xt=yt>-1?parseInt(Re[1+yt]):0;_t!==xt&&(ze=ze.replace(Me(),"?px "),de*=Math.pow(.75,xt-_t),ze=ze.replace("?px ",Me())),he-=.25*ve*(xt-_t)}if(X.bolds===!0){var at=Pe.indexOf(c)>-1,ot=Re.indexOf(c)>-1;!at&&ot&&(ze=At?ze.replace("italic ","italic bold "):"bold "+ze),at&&!ot&&(ze=ze.replace("bold ",""))}if(X.italics===!0){var At=Pe.indexOf(g)>-1,Ct=Re.indexOf(g)>-1;!At&&Ct&&(ze="italic "+ze),At&&!Ct&&(ze=ze.replace("italic ",""))}V.font=ze}for(re=0;re<me;++re){var Ie=xe[re]+`
`;for(ue=0,he=re*ve,de=te,fe="",ae=0;ae<Ie.length;++ae){var Be=ae+oe<J.length?J[ae+oe]:J[J.length-1];q===Be?fe+=Ie[ae]:(Se(),fe=Ie[ae],Be!==void 0&&(be(q,Be),q=Be))}Se(),oe+=Ie.length;var ce=0|Math.round(ue+2*Le);we<ce&&(we=ce)}var Te=we,ye=Ae+ve*me;return r(V.getImageData(0,0,Te,ye).data,[ye,Te,4]).pick(-1,-1,0).transpose(1,0)}(O,z,L,I,H,N),G,I)},f.exports.processPixels=C;var i=e(4162),r=e(5050),n=e(8243),s=e(197),a=e(7761),u=e(8040),p="b",c="b|",x="i",g="i|",h="sup",b="+",v="+1",y="sub",w="-",d="-1";function S(L,O,z,G){for(var I="<"+L+">",H="</"+L+">",N=I.length,F=H.length,V=O[0]===b||O[0]===w,W=0,te=-F;W>-1&&(W=z.indexOf(I,W))!==-1&&(te=z.indexOf(H,W+N))!==-1&&!(te<=W);){for(var Q=W;Q<te+F;++Q)if(Q<W+N||Q>=te)G[Q]=null,z=z.substr(0,Q)+" "+z.substr(Q+1);else if(G[Q]!==null){var X=G[Q].indexOf(O[0]);X===-1?G[Q]+=O:V&&(G[Q]=G[Q].substr(0,X+1)+(1+parseInt(G[Q][X+1]))+G[Q].substr(X+2))}var q=W+N,Z=z.substr(q,te-q).indexOf(I);W=Z!==-1?Z:te+F}return G}function T(L,O){var z=i(L,128);return O?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function E(L,O,z,G){var I=T(L,G),H=function(re,ae,ue){for(var he=ae.textAlign||"start",de=ae.textBaseline||"alphabetic",xe=[1<<30,1<<30],me=[0,0],ve=re.length,Le=0;Le<ve;++Le)for(var Ae=re[Le],we=0;we<2;++we)xe[we]=0|Math.min(xe[we],Ae[we]),me[we]=0|Math.max(me[we],Ae[we]);var se=0;switch(he){case"center":se=-.5*(xe[0]+me[0]);break;case"right":case"end":se=-me[0];break;case"left":case"start":se=-xe[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+he+"'")}var oe=0;switch(de){case"hanging":case"top":oe=-xe[1];break;case"middle":oe=-.5*(xe[1]+me[1]);break;case"alphabetic":case"ideographic":oe=-3*ue;break;case"bottom":oe=-me[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+de+"'")}var fe=1/ue;return"lineHeight"in ae?fe*=+ae.lineHeight:"width"in ae?fe=ae.width/(me[0]-xe[0]):"height"in ae&&(fe=ae.height/(me[1]-xe[1])),re.map(function(Se){return[fe*(Se[0]+se),fe*(Se[1]+oe)]})}(I.positions,O,z),N=I.edges,F=O.orientation==="ccw";if(s(H,N),O.polygons||O.polygon||O.polyline){for(var V=u(N,H),W=new Array(V.length),te=0;te<V.length;++te){for(var Q=V[te],X=new Array(Q.length),q=0;q<Q.length;++q){for(var Z=Q[q],J=new Array(Z.length),ne=0;ne<Z.length;++ne)J[ne]=H[Z[ne]].slice();F&&J.reverse(),X[q]=J}W[te]=X}return W}return O.triangles||O.triangulate||O.triangle?{cells:a(H,N,{delaunay:!1,exterior:!1,interior:!0}),positions:H}:{edges:N,positions:H}}function C(L,O,z){try{return E(L,O,z,!0)}catch{}try{return E(L,O,z,!1)}catch{}return O.polygons||O.polyline||O.polygon?[]:O.triangles||O.triangulate||O.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},5346:function(f){(function(){if(typeof ses>"u"||!ses.ok||ses.ok()){typeof ses<"u"&&(ses.weakMapPermitHostObjects=y);var o=!1;if(typeof WeakMap=="function"){var e=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var i=new e,r=Object.freeze({});if(i.set(r,1),i.get(r)===1)return void(f.exports=WeakMap);o=!0}}var n=Object.getOwnPropertyNames,s=Object.defineProperty,a=Object.isExtensible,u="weakmap:",p=u+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),x=new Uint8Array(c);crypto.getRandomValues(x),p=u+"rand:"+Array.prototype.map.call(x,function(E){return(E%36).toString(36)}).join("")+"___"}if(s(Object,"getOwnPropertyNames",{value:function(E){return n(E).filter(w)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(E){return g(E).filter(w)}})}(function(){var E=Object.freeze;s(Object,"freeze",{value:function(O){return d(O),E(O)}});var C=Object.seal;s(Object,"seal",{value:function(O){return d(O),C(O)}});var L=Object.preventExtensions;s(Object,"preventExtensions",{value:function(O){return d(O),L(O)}})})();var h=!1,b=0,v=function(){this instanceof v||T();var E=[],C=[],L=b++;return Object.create(v.prototype,{get___:{value:S(function(O,z){var G,I=d(O);return I?L in I?I[L]:z:(G=E.indexOf(O))>=0?C[G]:z})},has___:{value:S(function(O){var z=d(O);return z?L in z:E.indexOf(O)>=0})},set___:{value:S(function(O,z){var G,I=d(O);return I?I[L]=z:(G=E.indexOf(O))>=0?C[G]=z:(G=E.length,C[G]=z,E[G]=O),this})},delete___:{value:S(function(O){var z,G,I=d(O);return I?L in I&&delete I[L]:!((z=E.indexOf(O))<0||(G=E.length-1,E[z]=void 0,C[z]=C[G],E[z]=E[G],E.length=G,C.length=G,0))})}})};v.prototype=Object.create(Object.prototype,{get:{value:function(E,C){return this.get___(E,C)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,C){return this.set___(E,C)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),typeof e=="function"?function(){function E(){this instanceof v||T();var C,L=new e,O=void 0,z=!1;return C=o?function(G,I){return L.set(G,I),L.has(G)||(O||(O=new v),O.set(G,I)),this}:function(G,I){if(z)try{L.set(G,I)}catch{O||(O=new v),O.set___(G,I)}else L.set(G,I);return this},Object.create(v.prototype,{get___:{value:S(function(G,I){return O?L.has(G)?L.get(G):O.get___(G,I):L.get(G,I)})},has___:{value:S(function(G){return L.has(G)||!!O&&O.has___(G)})},set___:{value:S(C)},delete___:{value:S(function(G){var I=!!L.delete(G);return O&&O.delete___(G)||I})},permitHostObjects___:{value:S(function(G){if(G!==y)throw new Error("bogus call to permitHostObjects___");z=!0})}})}o&&typeof Proxy<"u"&&(Proxy=void 0),E.prototype=v.prototype,f.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),f.exports=v)}function y(E){E.permitHostObjects___&&E.permitHostObjects___(y)}function w(E){return!(E.substr(0,8)==u&&E.substr(E.length-3)==="___")}function d(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var C=E[p];if(C&&C.key===E)return C;if(a(E)){C={key:E};try{return s(E,p,{value:C,writable:!1,enumerable:!1,configurable:!1}),C}catch{return}}}function S(E){return E.prototype=null,Object.freeze(E)}function T(){h||typeof console>"u"||(h=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}})()},9222:function(f,o,e){var i=e(7178);f.exports=function(){var r={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var s=n.valueOf(r);return s&&s.identity===r?s:i(n,r)}}},7178:function(f){f.exports=function(o,e){var i={identity:e},r=o.valueOf;return Object.defineProperty(o,"valueOf",{value:function(n){return n!==e?r.apply(this,arguments):i},writable:!0}),i}},4037:function(f,o,e){var i=e(9222);f.exports=function(){var r=i();return{get:function(n,s){var a=r(n);return a.hasOwnProperty("value")?a.value:s},set:function(n,s){return r(n).value=s,this},has:function(n){return"value"in r(n)},delete:function(n){return delete r(n).value}}}},6183:function(f){f.exports=function(o){var e={};return function(i,r,n){var s=i.dtype,a=i.order,u=[s,a.join()].join(),p=e[u];return p||(e[u]=p=o([s,a])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,r,n)}}((function(){return function(o,e,i,r,n,s){var a=o[0],u=i[0],p=[0],c=u;r|=0;var x=0,g=u;for(x=0;x<a;++x){var h=e[r]-s,b=e[r+c]-s;h>=0!=b>=0&&n.push(p[0]+.5+.5*(h+b)/(h-b)),r+=g,++p[0]}}}).bind(void 0,{funcName:"zeroCrossings"}))},9584:function(f,o,e){f.exports=function(r,n){var s=[];return n=+n||0,i(r.hi(r.shape[0]-1),s,n),s};var i=e(6183)},6601:function(){}},_={};function m(f){var o=_[f];if(o!==void 0)return o.exports;var e=_[f]={id:f,loaded:!1,exports:{}};return l[f].call(e.exports,e,e.exports,m),e.loaded=!0,e.exports}return m.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),m.nmd=function(f){return f.paths=[],f.children||(f.children=[]),f},m(7386)}()},$.exports=A()},12856:function($,P,t){function A(se,oe){for(var fe=0;fe<oe.length;fe++){var Se=oe[fe];Se.enumerable=Se.enumerable||!1,Se.configurable=!0,"value"in Se&&(Se.writable=!0),Object.defineProperty(se,(Me=function(be,Ie){if(m(be)!=="object"||be===null)return be;var Be=be[Symbol.toPrimitive];if(Be!==void 0){var ce=Be.call(be,"string");if(m(ce)!=="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(be)}(Se.key),m(Me)==="symbol"?Me:String(Me)),Se)}var Me}function M(se,oe){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(fe,Se){return fe.__proto__=Se,fe},M(se,oe)}function l(se){if(se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se}function _(se){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(oe){return oe.__proto__||Object.getPrototypeOf(oe)},_(se)}function m(se){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},m(se)}var f=t(95341),o=t(95280),e=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;P.Buffer=n,P.SlowBuffer=function(se){return+se!=se&&(se=0),n.alloc(+se)},P.INSPECT_MAX_BYTES=50;var i=2147483647;function r(se){if(se>i)throw new RangeError('The value "'+se+'" is invalid for option "size"');var oe=new Uint8Array(se);return Object.setPrototypeOf(oe,n.prototype),oe}function n(se,oe,fe){if(typeof se=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(se)}return s(se,oe,fe)}function s(se,oe,fe){if(typeof se=="string")return function(be,Ie){if(typeof Ie=="string"&&Ie!==""||(Ie="utf8"),!n.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);var Be=0|g(be,Ie),ce=r(Be),Te=ce.write(be,Ie);return Te!==Be&&(ce=ce.slice(0,Te)),ce}(se,oe);if(ArrayBuffer.isView(se))return function(be){if(me(be,Uint8Array)){var Ie=new Uint8Array(be);return c(Ie.buffer,Ie.byteOffset,Ie.byteLength)}return p(be)}(se);if(se==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+m(se));if(me(se,ArrayBuffer)||se&&me(se.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(me(se,SharedArrayBuffer)||se&&me(se.buffer,SharedArrayBuffer)))return c(se,oe,fe);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Se=se.valueOf&&se.valueOf();if(Se!=null&&Se!==se)return n.from(Se,oe,fe);var Me=function(be){if(n.isBuffer(be)){var Ie=0|x(be.length),Be=r(Ie);return Be.length===0||be.copy(Be,0,0,Ie),Be}return be.length!==void 0?typeof be.length!="number"||ve(be.length)?r(0):p(be):be.type==="Buffer"&&Array.isArray(be.data)?p(be.data):void 0}(se);if(Me)return Me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return n.from(se[Symbol.toPrimitive]("string"),oe,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+m(se))}function a(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function u(se){return a(se),r(se<0?0:0|x(se))}function p(se){for(var oe=se.length<0?0:0|x(se.length),fe=r(oe),Se=0;Se<oe;Se+=1)fe[Se]=255&se[Se];return fe}function c(se,oe,fe){if(oe<0||se.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<oe+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var Se;return Se=oe===void 0&&fe===void 0?new Uint8Array(se):fe===void 0?new Uint8Array(se,oe):new Uint8Array(se,oe,fe),Object.setPrototypeOf(Se,n.prototype),Se}function x(se){if(se>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|se}function g(se,oe){if(n.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||me(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+m(se));var fe=se.length,Se=arguments.length>2&&arguments[2]===!0;if(!Se&&fe===0)return 0;for(var Me=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return he(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*fe;case"hex":return fe>>>1;case"base64":return de(se).length;default:if(Me)return Se?-1:he(se).length;oe=(""+oe).toLowerCase(),Me=!0}}function h(se,oe,fe){var Se=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0)<=(oe>>>=0))return"";for(se||(se="utf8");;)switch(se){case"hex":return I(this,oe,fe);case"utf8":case"utf-8":return L(this,oe,fe);case"ascii":return z(this,oe,fe);case"latin1":case"binary":return G(this,oe,fe);case"base64":return C(this,oe,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,oe,fe);default:if(Se)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),Se=!0}}function b(se,oe,fe){var Se=se[oe];se[oe]=se[fe],se[fe]=Se}function v(se,oe,fe,Se,Me){if(se.length===0)return-1;if(typeof fe=="string"?(Se=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),ve(fe=+fe)&&(fe=Me?0:se.length-1),fe<0&&(fe=se.length+fe),fe>=se.length){if(Me)return-1;fe=se.length-1}else if(fe<0){if(!Me)return-1;fe=0}if(typeof oe=="string"&&(oe=n.from(oe,Se)),n.isBuffer(oe))return oe.length===0?-1:y(se,oe,fe,Se,Me);if(typeof oe=="number")return oe&=255,typeof Uint8Array.prototype.indexOf=="function"?Me?Uint8Array.prototype.indexOf.call(se,oe,fe):Uint8Array.prototype.lastIndexOf.call(se,oe,fe):y(se,[oe],fe,Se,Me);throw new TypeError("val must be string, number or Buffer")}function y(se,oe,fe,Se,Me){var be,Ie=1,Be=se.length,ce=oe.length;if(Se!==void 0&&((Se=String(Se).toLowerCase())==="ucs2"||Se==="ucs-2"||Se==="utf16le"||Se==="utf-16le")){if(se.length<2||oe.length<2)return-1;Ie=2,Be/=2,ce/=2,fe/=2}function Te(ze,He){return Ie===1?ze[He]:ze.readUInt16BE(He*Ie)}if(Me){var ye=-1;for(be=fe;be<Be;be++)if(Te(se,be)===Te(oe,ye===-1?0:be-ye)){if(ye===-1&&(ye=be),be-ye+1===ce)return ye*Ie}else ye!==-1&&(be-=be-ye),ye=-1}else for(fe+ce>Be&&(fe=Be-ce),be=fe;be>=0;be--){for(var Pe=!0,Re=0;Re<ce;Re++)if(Te(se,be+Re)!==Te(oe,Re)){Pe=!1;break}if(Pe)return be}return-1}function w(se,oe,fe,Se){fe=Number(fe)||0;var Me=se.length-fe;Se?(Se=Number(Se))>Me&&(Se=Me):Se=Me;var be,Ie=oe.length;for(Se>Ie/2&&(Se=Ie/2),be=0;be<Se;++be){var Be=parseInt(oe.substr(2*be,2),16);if(ve(Be))return be;se[fe+be]=Be}return be}function d(se,oe,fe,Se){return xe(he(oe,se.length-fe),se,fe,Se)}function S(se,oe,fe,Se){return xe(function(Me){for(var be=[],Ie=0;Ie<Me.length;++Ie)be.push(255&Me.charCodeAt(Ie));return be}(oe),se,fe,Se)}function T(se,oe,fe,Se){return xe(de(oe),se,fe,Se)}function E(se,oe,fe,Se){return xe(function(Me,be){for(var Ie,Be,ce,Te=[],ye=0;ye<Me.length&&!((be-=2)<0);++ye)Be=(Ie=Me.charCodeAt(ye))>>8,ce=Ie%256,Te.push(ce),Te.push(Be);return Te}(oe,se.length-fe),se,fe,Se)}function C(se,oe,fe){return oe===0&&fe===se.length?f.fromByteArray(se):f.fromByteArray(se.slice(oe,fe))}function L(se,oe,fe){fe=Math.min(se.length,fe);for(var Se=[],Me=oe;Me<fe;){var be=se[Me],Ie=null,Be=be>239?4:be>223?3:be>191?2:1;if(Me+Be<=fe){var ce=void 0,Te=void 0,ye=void 0,Pe=void 0;switch(Be){case 1:be<128&&(Ie=be);break;case 2:(192&(ce=se[Me+1]))==128&&(Pe=(31&be)<<6|63&ce)>127&&(Ie=Pe);break;case 3:ce=se[Me+1],Te=se[Me+2],(192&ce)==128&&(192&Te)==128&&(Pe=(15&be)<<12|(63&ce)<<6|63&Te)>2047&&(Pe<55296||Pe>57343)&&(Ie=Pe);break;case 4:ce=se[Me+1],Te=se[Me+2],ye=se[Me+3],(192&ce)==128&&(192&Te)==128&&(192&ye)==128&&(Pe=(15&be)<<18|(63&ce)<<12|(63&Te)<<6|63&ye)>65535&&Pe<1114112&&(Ie=Pe)}}Ie===null?(Ie=65533,Be=1):Ie>65535&&(Ie-=65536,Se.push(Ie>>>10&1023|55296),Ie=56320|1023&Ie),Se.push(Ie),Me+=Be}return function(Re){var ze=Re.length;if(ze<=O)return String.fromCharCode.apply(String,Re);for(var He="",We=0;We<ze;)He+=String.fromCharCode.apply(String,Re.slice(We,We+=O));return He}(Se)}P.kMaxLength=i,n.TYPED_ARRAY_SUPPORT=function(){try{var se=new Uint8Array(1),oe={foo:function(){return 42}};return Object.setPrototypeOf(oe,Uint8Array.prototype),Object.setPrototypeOf(se,oe),se.foo()===42}catch{return!1}}(),n.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),n.poolSize=8192,n.from=function(se,oe,fe){return s(se,oe,fe)},Object.setPrototypeOf(n.prototype,Uint8Array.prototype),Object.setPrototypeOf(n,Uint8Array),n.alloc=function(se,oe,fe){return function(Se,Me,be){return a(Se),Se<=0?r(Se):Me!==void 0?typeof be=="string"?r(Se).fill(Me,be):r(Se).fill(Me):r(Se)}(se,oe,fe)},n.allocUnsafe=function(se){return u(se)},n.allocUnsafeSlow=function(se){return u(se)},n.isBuffer=function(se){return se!=null&&se._isBuffer===!0&&se!==n.prototype},n.compare=function(se,oe){if(me(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),me(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),!n.isBuffer(se)||!n.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(se===oe)return 0;for(var fe=se.length,Se=oe.length,Me=0,be=Math.min(fe,Se);Me<be;++Me)if(se[Me]!==oe[Me]){fe=se[Me],Se=oe[Me];break}return fe<Se?-1:Se<fe?1:0},n.isEncoding=function(se){switch(String(se).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(se,oe){if(!Array.isArray(se))throw new TypeError('"list" argument must be an Array of Buffers');if(se.length===0)return n.alloc(0);var fe;if(oe===void 0)for(oe=0,fe=0;fe<se.length;++fe)oe+=se[fe].length;var Se=n.allocUnsafe(oe),Me=0;for(fe=0;fe<se.length;++fe){var be=se[fe];if(me(be,Uint8Array))Me+be.length>Se.length?(n.isBuffer(be)||(be=n.from(be)),be.copy(Se,Me)):Uint8Array.prototype.set.call(Se,be,Me);else{if(!n.isBuffer(be))throw new TypeError('"list" argument must be an Array of Buffers');be.copy(Se,Me)}Me+=be.length}return Se},n.byteLength=g,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var se=this.length;if(se%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<se;oe+=2)b(this,oe,oe+1);return this},n.prototype.swap32=function(){var se=this.length;if(se%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<se;oe+=4)b(this,oe,oe+3),b(this,oe+1,oe+2);return this},n.prototype.swap64=function(){var se=this.length;if(se%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<se;oe+=8)b(this,oe,oe+7),b(this,oe+1,oe+6),b(this,oe+2,oe+5),b(this,oe+3,oe+4);return this},n.prototype.toString=function(){var se=this.length;return se===0?"":arguments.length===0?L(this,0,se):h.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(se){if(!n.isBuffer(se))throw new TypeError("Argument must be a Buffer");return this===se||n.compare(this,se)===0},n.prototype.inspect=function(){var se="",oe=P.INSPECT_MAX_BYTES;return se=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(se+=" ... "),"<Buffer "+se+">"},e&&(n.prototype[e]=n.prototype.inspect),n.prototype.compare=function(se,oe,fe,Se,Me){if(me(se,Uint8Array)&&(se=n.from(se,se.offset,se.byteLength)),!n.isBuffer(se))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+m(se));if(oe===void 0&&(oe=0),fe===void 0&&(fe=se?se.length:0),Se===void 0&&(Se=0),Me===void 0&&(Me=this.length),oe<0||fe>se.length||Se<0||Me>this.length)throw new RangeError("out of range index");if(Se>=Me&&oe>=fe)return 0;if(Se>=Me)return-1;if(oe>=fe)return 1;if(this===se)return 0;for(var be=(Me>>>=0)-(Se>>>=0),Ie=(fe>>>=0)-(oe>>>=0),Be=Math.min(be,Ie),ce=this.slice(Se,Me),Te=se.slice(oe,fe),ye=0;ye<Be;++ye)if(ce[ye]!==Te[ye]){be=ce[ye],Ie=Te[ye];break}return be<Ie?-1:Ie<be?1:0},n.prototype.includes=function(se,oe,fe){return this.indexOf(se,oe,fe)!==-1},n.prototype.indexOf=function(se,oe,fe){return v(this,se,oe,fe,!0)},n.prototype.lastIndexOf=function(se,oe,fe){return v(this,se,oe,fe,!1)},n.prototype.write=function(se,oe,fe,Se){if(oe===void 0)Se="utf8",fe=this.length,oe=0;else if(fe===void 0&&typeof oe=="string")Se=oe,fe=this.length,oe=0;else{if(!isFinite(oe))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");oe>>>=0,isFinite(fe)?(fe>>>=0,Se===void 0&&(Se="utf8")):(Se=fe,fe=void 0)}var Me=this.length-oe;if((fe===void 0||fe>Me)&&(fe=Me),se.length>0&&(fe<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Se||(Se="utf8");for(var be=!1;;)switch(Se){case"hex":return w(this,se,oe,fe);case"utf8":case"utf-8":return d(this,se,oe,fe);case"ascii":case"latin1":case"binary":return S(this,se,oe,fe);case"base64":return T(this,se,oe,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,se,oe,fe);default:if(be)throw new TypeError("Unknown encoding: "+Se);Se=(""+Se).toLowerCase(),be=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function z(se,oe,fe){var Se="";fe=Math.min(se.length,fe);for(var Me=oe;Me<fe;++Me)Se+=String.fromCharCode(127&se[Me]);return Se}function G(se,oe,fe){var Se="";fe=Math.min(se.length,fe);for(var Me=oe;Me<fe;++Me)Se+=String.fromCharCode(se[Me]);return Se}function I(se,oe,fe){var Se=se.length;(!oe||oe<0)&&(oe=0),(!fe||fe<0||fe>Se)&&(fe=Se);for(var Me="",be=oe;be<fe;++be)Me+=Le[se[be]];return Me}function H(se,oe,fe){for(var Se=se.slice(oe,fe),Me="",be=0;be<Se.length-1;be+=2)Me+=String.fromCharCode(Se[be]+256*Se[be+1]);return Me}function N(se,oe,fe){if(se%1!=0||se<0)throw new RangeError("offset is not uint");if(se+oe>fe)throw new RangeError("Trying to access beyond buffer length")}function F(se,oe,fe,Se,Me,be){if(!n.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>Me||oe<be)throw new RangeError('"value" argument is out of bounds');if(fe+Se>se.length)throw new RangeError("Index out of range")}function V(se,oe,fe,Se,Me){ne(oe,Se,Me,se,fe,7);var be=Number(oe&BigInt(4294967295));se[fe++]=be,be>>=8,se[fe++]=be,be>>=8,se[fe++]=be,be>>=8,se[fe++]=be;var Ie=Number(oe>>BigInt(32)&BigInt(4294967295));return se[fe++]=Ie,Ie>>=8,se[fe++]=Ie,Ie>>=8,se[fe++]=Ie,Ie>>=8,se[fe++]=Ie,fe}function W(se,oe,fe,Se,Me){ne(oe,Se,Me,se,fe,7);var be=Number(oe&BigInt(4294967295));se[fe+7]=be,be>>=8,se[fe+6]=be,be>>=8,se[fe+5]=be,be>>=8,se[fe+4]=be;var Ie=Number(oe>>BigInt(32)&BigInt(4294967295));return se[fe+3]=Ie,Ie>>=8,se[fe+2]=Ie,Ie>>=8,se[fe+1]=Ie,Ie>>=8,se[fe]=Ie,fe+8}function te(se,oe,fe,Se,Me,be){if(fe+Se>se.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function Q(se,oe,fe,Se,Me){return oe=+oe,fe>>>=0,Me||te(se,0,fe,4),o.write(se,oe,fe,Se,23,4),fe+4}function X(se,oe,fe,Se,Me){return oe=+oe,fe>>>=0,Me||te(se,0,fe,8),o.write(se,oe,fe,Se,52,8),fe+8}n.prototype.slice=function(se,oe){var fe=this.length;(se=~~se)<0?(se+=fe)<0&&(se=0):se>fe&&(se=fe),(oe=oe===void 0?fe:~~oe)<0?(oe+=fe)<0&&(oe=0):oe>fe&&(oe=fe),oe<se&&(oe=se);var Se=this.subarray(se,oe);return Object.setPrototypeOf(Se,n.prototype),Se},n.prototype.readUintLE=n.prototype.readUIntLE=function(se,oe,fe){se>>>=0,oe>>>=0,fe||N(se,oe,this.length);for(var Se=this[se],Me=1,be=0;++be<oe&&(Me*=256);)Se+=this[se+be]*Me;return Se},n.prototype.readUintBE=n.prototype.readUIntBE=function(se,oe,fe){se>>>=0,oe>>>=0,fe||N(se,oe,this.length);for(var Se=this[se+--oe],Me=1;oe>0&&(Me*=256);)Se+=this[se+--oe]*Me;return Se},n.prototype.readUint8=n.prototype.readUInt8=function(se,oe){return se>>>=0,oe||N(se,1,this.length),this[se]},n.prototype.readUint16LE=n.prototype.readUInt16LE=function(se,oe){return se>>>=0,oe||N(se,2,this.length),this[se]|this[se+1]<<8},n.prototype.readUint16BE=n.prototype.readUInt16BE=function(se,oe){return se>>>=0,oe||N(se,2,this.length),this[se]<<8|this[se+1]},n.prototype.readUint32LE=n.prototype.readUInt32LE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),(this[se]|this[se+1]<<8|this[se+2]<<16)+16777216*this[se+3]},n.prototype.readUint32BE=n.prototype.readUInt32BE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),16777216*this[se]+(this[se+1]<<16|this[se+2]<<8|this[se+3])},n.prototype.readBigUInt64LE=Ae(function(se){re(se>>>=0,"offset");var oe=this[se],fe=this[se+7];oe!==void 0&&fe!==void 0||ae(se,this.length-8);var Se=oe+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24),Me=this[++se]+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+fe*Math.pow(2,24);return BigInt(Se)+(BigInt(Me)<<BigInt(32))}),n.prototype.readBigUInt64BE=Ae(function(se){re(se>>>=0,"offset");var oe=this[se],fe=this[se+7];oe!==void 0&&fe!==void 0||ae(se,this.length-8);var Se=oe*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se],Me=this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+fe;return(BigInt(Se)<<BigInt(32))+BigInt(Me)}),n.prototype.readIntLE=function(se,oe,fe){se>>>=0,oe>>>=0,fe||N(se,oe,this.length);for(var Se=this[se],Me=1,be=0;++be<oe&&(Me*=256);)Se+=this[se+be]*Me;return Se>=(Me*=128)&&(Se-=Math.pow(2,8*oe)),Se},n.prototype.readIntBE=function(se,oe,fe){se>>>=0,oe>>>=0,fe||N(se,oe,this.length);for(var Se=oe,Me=1,be=this[se+--Se];Se>0&&(Me*=256);)be+=this[se+--Se]*Me;return be>=(Me*=128)&&(be-=Math.pow(2,8*oe)),be},n.prototype.readInt8=function(se,oe){return se>>>=0,oe||N(se,1,this.length),128&this[se]?-1*(255-this[se]+1):this[se]},n.prototype.readInt16LE=function(se,oe){se>>>=0,oe||N(se,2,this.length);var fe=this[se]|this[se+1]<<8;return 32768&fe?4294901760|fe:fe},n.prototype.readInt16BE=function(se,oe){se>>>=0,oe||N(se,2,this.length);var fe=this[se+1]|this[se]<<8;return 32768&fe?4294901760|fe:fe},n.prototype.readInt32LE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),this[se]|this[se+1]<<8|this[se+2]<<16|this[se+3]<<24},n.prototype.readInt32BE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),this[se]<<24|this[se+1]<<16|this[se+2]<<8|this[se+3]},n.prototype.readBigInt64LE=Ae(function(se){re(se>>>=0,"offset");var oe=this[se],fe=this[se+7];oe!==void 0&&fe!==void 0||ae(se,this.length-8);var Se=this[se+4]+this[se+5]*Math.pow(2,8)+this[se+6]*Math.pow(2,16)+(fe<<24);return(BigInt(Se)<<BigInt(32))+BigInt(oe+this[++se]*Math.pow(2,8)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,24))}),n.prototype.readBigInt64BE=Ae(function(se){re(se>>>=0,"offset");var oe=this[se],fe=this[se+7];oe!==void 0&&fe!==void 0||ae(se,this.length-8);var Se=(oe<<24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+this[++se];return(BigInt(Se)<<BigInt(32))+BigInt(this[++se]*Math.pow(2,24)+this[++se]*Math.pow(2,16)+this[++se]*Math.pow(2,8)+fe)}),n.prototype.readFloatLE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),o.read(this,se,!0,23,4)},n.prototype.readFloatBE=function(se,oe){return se>>>=0,oe||N(se,4,this.length),o.read(this,se,!1,23,4)},n.prototype.readDoubleLE=function(se,oe){return se>>>=0,oe||N(se,8,this.length),o.read(this,se,!0,52,8)},n.prototype.readDoubleBE=function(se,oe){return se>>>=0,oe||N(se,8,this.length),o.read(this,se,!1,52,8)},n.prototype.writeUintLE=n.prototype.writeUIntLE=function(se,oe,fe,Se){se=+se,oe>>>=0,fe>>>=0,Se||F(this,se,oe,fe,Math.pow(2,8*fe)-1,0);var Me=1,be=0;for(this[oe]=255&se;++be<fe&&(Me*=256);)this[oe+be]=se/Me&255;return oe+fe},n.prototype.writeUintBE=n.prototype.writeUIntBE=function(se,oe,fe,Se){se=+se,oe>>>=0,fe>>>=0,Se||F(this,se,oe,fe,Math.pow(2,8*fe)-1,0);var Me=fe-1,be=1;for(this[oe+Me]=255&se;--Me>=0&&(be*=256);)this[oe+Me]=se/be&255;return oe+fe},n.prototype.writeUint8=n.prototype.writeUInt8=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,1,255,0),this[oe]=255&se,oe+1},n.prototype.writeUint16LE=n.prototype.writeUInt16LE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,2,65535,0),this[oe]=255&se,this[oe+1]=se>>>8,oe+2},n.prototype.writeUint16BE=n.prototype.writeUInt16BE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,2,65535,0),this[oe]=se>>>8,this[oe+1]=255&se,oe+2},n.prototype.writeUint32LE=n.prototype.writeUInt32LE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,4,4294967295,0),this[oe+3]=se>>>24,this[oe+2]=se>>>16,this[oe+1]=se>>>8,this[oe]=255&se,oe+4},n.prototype.writeUint32BE=n.prototype.writeUInt32BE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,4,4294967295,0),this[oe]=se>>>24,this[oe+1]=se>>>16,this[oe+2]=se>>>8,this[oe+3]=255&se,oe+4},n.prototype.writeBigUInt64LE=Ae(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeBigUInt64BE=Ae(function(se){return W(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))}),n.prototype.writeIntLE=function(se,oe,fe,Se){if(se=+se,oe>>>=0,!Se){var Me=Math.pow(2,8*fe-1);F(this,se,oe,fe,Me-1,-Me)}var be=0,Ie=1,Be=0;for(this[oe]=255&se;++be<fe&&(Ie*=256);)se<0&&Be===0&&this[oe+be-1]!==0&&(Be=1),this[oe+be]=(se/Ie>>0)-Be&255;return oe+fe},n.prototype.writeIntBE=function(se,oe,fe,Se){if(se=+se,oe>>>=0,!Se){var Me=Math.pow(2,8*fe-1);F(this,se,oe,fe,Me-1,-Me)}var be=fe-1,Ie=1,Be=0;for(this[oe+be]=255&se;--be>=0&&(Ie*=256);)se<0&&Be===0&&this[oe+be+1]!==0&&(Be=1),this[oe+be]=(se/Ie>>0)-Be&255;return oe+fe},n.prototype.writeInt8=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,1,127,-128),se<0&&(se=255+se+1),this[oe]=255&se,oe+1},n.prototype.writeInt16LE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,2,32767,-32768),this[oe]=255&se,this[oe+1]=se>>>8,oe+2},n.prototype.writeInt16BE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,2,32767,-32768),this[oe]=se>>>8,this[oe+1]=255&se,oe+2},n.prototype.writeInt32LE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,4,2147483647,-2147483648),this[oe]=255&se,this[oe+1]=se>>>8,this[oe+2]=se>>>16,this[oe+3]=se>>>24,oe+4},n.prototype.writeInt32BE=function(se,oe,fe){return se=+se,oe>>>=0,fe||F(this,se,oe,4,2147483647,-2147483648),se<0&&(se=4294967295+se+1),this[oe]=se>>>24,this[oe+1]=se>>>16,this[oe+2]=se>>>8,this[oe+3]=255&se,oe+4},n.prototype.writeBigInt64LE=Ae(function(se){return V(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeBigInt64BE=Ae(function(se){return W(this,se,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),n.prototype.writeFloatLE=function(se,oe,fe){return Q(this,se,oe,!0,fe)},n.prototype.writeFloatBE=function(se,oe,fe){return Q(this,se,oe,!1,fe)},n.prototype.writeDoubleLE=function(se,oe,fe){return X(this,se,oe,!0,fe)},n.prototype.writeDoubleBE=function(se,oe,fe){return X(this,se,oe,!1,fe)},n.prototype.copy=function(se,oe,fe,Se){if(!n.isBuffer(se))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),Se||Se===0||(Se=this.length),oe>=se.length&&(oe=se.length),oe||(oe=0),Se>0&&Se<fe&&(Se=fe),Se===fe||se.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Se<0)throw new RangeError("sourceEnd out of bounds");Se>this.length&&(Se=this.length),se.length-oe<Se-fe&&(Se=se.length-oe+fe);var Me=Se-fe;return this===se&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(oe,fe,Se):Uint8Array.prototype.set.call(se,this.subarray(fe,Se),oe),Me},n.prototype.fill=function(se,oe,fe,Se){if(typeof se=="string"){if(typeof oe=="string"?(Se=oe,oe=0,fe=this.length):typeof fe=="string"&&(Se=fe,fe=this.length),Se!==void 0&&typeof Se!="string")throw new TypeError("encoding must be a string");if(typeof Se=="string"&&!n.isEncoding(Se))throw new TypeError("Unknown encoding: "+Se);if(se.length===1){var Me=se.charCodeAt(0);(Se==="utf8"&&Me<128||Se==="latin1")&&(se=Me)}}else typeof se=="number"?se&=255:typeof se=="boolean"&&(se=Number(se));if(oe<0||this.length<oe||this.length<fe)throw new RangeError("Out of range index");if(fe<=oe)return this;var be;if(oe>>>=0,fe=fe===void 0?this.length:fe>>>0,se||(se=0),typeof se=="number")for(be=oe;be<fe;++be)this[be]=se;else{var Ie=n.isBuffer(se)?se:n.from(se,Se),Be=Ie.length;if(Be===0)throw new TypeError('The value "'+se+'" is invalid for argument "value"');for(be=0;be<fe-oe;++be)this[be+oe]=Ie[be%Be]}return this};var q={};function Z(se,oe,fe){q[se]=function(Se){(function(ye,Pe){if(typeof Pe!="function"&&Pe!==null)throw new TypeError("Super expression must either be null or a function");ye.prototype=Object.create(Pe&&Pe.prototype,{constructor:{value:ye,writable:!0,configurable:!0}}),Object.defineProperty(ye,"prototype",{writable:!1}),Pe&&M(ye,Pe)})(Te,Se);var Me,be,Ie,Be,ce=(Ie=Te,Be=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var ye,Pe=_(Ie);if(Be){var Re=_(this).constructor;ye=Reflect.construct(Pe,arguments,Re)}else ye=Pe.apply(this,arguments);return function(ze,He){if(He&&(m(He)==="object"||typeof He=="function"))return He;if(He!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l(ze)}(this,ye)});function Te(){var ye;return function(Pe,Re){if(!(Pe instanceof Re))throw new TypeError("Cannot call a class as a function")}(this,Te),ye=ce.call(this),Object.defineProperty(l(ye),"message",{value:oe.apply(l(ye),arguments),writable:!0,configurable:!0}),ye.name="".concat(ye.name," [").concat(se,"]"),ye.stack,delete ye.name,ye}return Me=Te,(be=[{key:"code",get:function(){return se},set:function(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(se,"]: ").concat(this.message)}}])&&A(Me.prototype,be),Object.defineProperty(Me,"prototype",{writable:!1}),Te}(fe)}function J(se){for(var oe="",fe=se.length,Se=se[0]==="-"?1:0;fe>=Se+4;fe-=3)oe="_".concat(se.slice(fe-3,fe)).concat(oe);return"".concat(se.slice(0,fe)).concat(oe)}function ne(se,oe,fe,Se,Me,be){if(se>fe||se<oe){var Ie,Be=typeof oe=="bigint"?"n":"";throw Ie=be>3?oe===0||oe===BigInt(0)?">= 0".concat(Be," and < 2").concat(Be," ** ").concat(8*(be+1)).concat(Be):">= -(2".concat(Be," ** ").concat(8*(be+1)-1).concat(Be,") and < 2 ** ")+"".concat(8*(be+1)-1).concat(Be):">= ".concat(oe).concat(Be," and <= ").concat(fe).concat(Be),new q.ERR_OUT_OF_RANGE("value",Ie,se)}(function(ce,Te,ye){re(Te,"offset"),ce[Te]!==void 0&&ce[Te+ye]!==void 0||ae(Te,ce.length-(ye+1))})(Se,Me,be)}function re(se,oe){if(typeof se!="number")throw new q.ERR_INVALID_ARG_TYPE(oe,"number",se)}function ae(se,oe,fe){throw Math.floor(se)!==se?(re(se,fe),new q.ERR_OUT_OF_RANGE(fe||"offset","an integer",se)):oe<0?new q.ERR_BUFFER_OUT_OF_BOUNDS:new q.ERR_OUT_OF_RANGE(fe||"offset",">= ".concat(fe?1:0," and <= ").concat(oe),se)}Z("ERR_BUFFER_OUT_OF_BOUNDS",function(se){return se?"".concat(se," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Z("ERR_INVALID_ARG_TYPE",function(se,oe){return'The "'.concat(se,'" argument must be of type number. Received type ').concat(m(oe))},TypeError),Z("ERR_OUT_OF_RANGE",function(se,oe,fe){var Se='The value of "'.concat(se,'" is out of range.'),Me=fe;return Number.isInteger(fe)&&Math.abs(fe)>Math.pow(2,32)?Me=J(String(fe)):typeof fe=="bigint"&&(Me=String(fe),(fe>Math.pow(BigInt(2),BigInt(32))||fe<-Math.pow(BigInt(2),BigInt(32)))&&(Me=J(Me)),Me+="n"),Se+" It must be ".concat(oe,". Received ").concat(Me)},RangeError);var ue=/[^+/0-9A-Za-z-_]/g;function he(se,oe){var fe;oe=oe||1/0;for(var Se=se.length,Me=null,be=[],Ie=0;Ie<Se;++Ie){if((fe=se.charCodeAt(Ie))>55295&&fe<57344){if(!Me){if(fe>56319){(oe-=3)>-1&&be.push(239,191,189);continue}if(Ie+1===Se){(oe-=3)>-1&&be.push(239,191,189);continue}Me=fe;continue}if(fe<56320){(oe-=3)>-1&&be.push(239,191,189),Me=fe;continue}fe=65536+(Me-55296<<10|fe-56320)}else Me&&(oe-=3)>-1&&be.push(239,191,189);if(Me=null,fe<128){if((oe-=1)<0)break;be.push(fe)}else if(fe<2048){if((oe-=2)<0)break;be.push(fe>>6|192,63&fe|128)}else if(fe<65536){if((oe-=3)<0)break;be.push(fe>>12|224,fe>>6&63|128,63&fe|128)}else{if(!(fe<1114112))throw new Error("Invalid code point");if((oe-=4)<0)break;be.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,63&fe|128)}}return be}function de(se){return f.toByteArray(function(oe){if((oe=(oe=oe.split("=")[0]).trim().replace(ue,"")).length<2)return"";for(;oe.length%4!=0;)oe+="=";return oe}(se))}function xe(se,oe,fe,Se){var Me;for(Me=0;Me<Se&&!(Me+fe>=oe.length||Me>=se.length);++Me)oe[Me+fe]=se[Me];return Me}function me(se,oe){return se instanceof oe||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===oe.name}function ve(se){return se!=se}var Le=function(){for(var se="0123456789abcdef",oe=new Array(256),fe=0;fe<16;++fe)for(var Se=16*fe,Me=0;Me<16;++Me)oe[Se+Me]=se[fe]+se[Me];return oe}();function Ae(se){return typeof BigInt>"u"?we:se}function we(){throw new Error("BigInt not supported")}},35791:function($){$.exports=M,$.exports.isMobile=M,$.exports.default=M;var P=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,A=/android|ipad|playbook|silk/i;function M(l){l||(l={});var _=l.ua;if(_||typeof navigator>"u"||(_=navigator.userAgent),_&&_.headers&&typeof _.headers["user-agent"]=="string"&&(_=_.headers["user-agent"]),typeof _!="string")return!1;var m=P.test(_)&&!t.test(_)||!!l.tablet&&A.test(_);return!m&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&_.indexOf("Macintosh")!==-1&&_.indexOf("Safari")!==-1&&(m=!0),m}},86781:function($,P,t){t.r(P),t.d(P,{sankeyCenter:function(){return r},sankeyCircular:function(){return C},sankeyJustify:function(){return i},sankeyLeft:function(){return o},sankeyRight:function(){return e}});var A=t(33064),M=t(15140),l=t(45879),_=t(2502),m=t.n(_);function f(xe){return xe.target.depth}function o(xe){return xe.depth}function e(xe,me){return me-1-xe.height}function i(xe,me){return xe.sourceLinks.length?xe.depth:me-1}function r(xe){return xe.targetLinks.length?xe.depth:xe.sourceLinks.length?(0,A.VV)(xe.sourceLinks,f)-1:0}function n(xe){return function(){return xe}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xe){return typeof xe}:function(xe){return xe&&typeof Symbol=="function"&&xe.constructor===Symbol&&xe!==Symbol.prototype?"symbol":typeof xe};function a(xe,me){return p(xe.source,me.source)||xe.index-me.index}function u(xe,me){return p(xe.target,me.target)||xe.index-me.index}function p(xe,me){return xe.partOfCycle===me.partOfCycle?xe.y0-me.y0:xe.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function c(xe){return xe.value}function x(xe){return(xe.y0+xe.y1)/2}function g(xe){return x(xe.source)}function h(xe){return x(xe.target)}function b(xe){return xe.index}function v(xe){return xe.nodes}function y(xe){return xe.links}function w(xe,me){var ve=xe.get(me);if(!ve)throw new Error("missing: "+me);return ve}function d(xe,me){return me(xe)}var S=25,T=10,E=.3;function C(){var xe,me,ve=0,Le=0,Ae=1,we=1,se=24,oe=b,fe=i,Se=v,Me=y,be=32,Ie=2,Be=null;function ce(){var ye={nodes:Se.apply(null,arguments),links:Me.apply(null,arguments)};(function(Re){Re.nodes.forEach(function(He,We){He.index=We,He.sourceLinks=[],He.targetLinks=[]});var ze=(0,M.UI)(Re.nodes,oe);Re.links.forEach(function(He,We){He.index=We;var Je=He.source,lt=He.target;(Je===void 0?"undefined":s(Je))!=="object"&&(Je=He.source=w(ze,Je)),(lt===void 0?"undefined":s(lt))!=="object"&&(lt=He.target=w(ze,lt)),Je.sourceLinks.push(He),lt.targetLinks.push(He)})})(ye),function(Re,ze,He){var We=0;if(He===null){for(var Je=[],lt=0;lt<Re.links.length;lt++){var et=Re.links[lt],yt=et.source.index,_t=et.target.index;Je[yt]||(Je[yt]=[]),Je[_t]||(Je[_t]=[]),Je[yt].indexOf(_t)===-1&&Je[yt].push(_t)}var xt=m()(Je);xt.sort(function(At,Ct){return At.length-Ct.length});var at={};for(lt=0;lt<xt.length;lt++){var ot=xt[lt].slice(-2);at[ot[0]]||(at[ot[0]]={}),at[ot[0]][ot[1]]=!0}Re.links.forEach(function(At){var Ct=At.target.index,zt=At.source.index;Ct===zt||at[zt]&&at[zt][Ct]?(At.circular=!0,At.circularLinkID=We,We+=1):At.circular=!1})}else Re.links.forEach(function(At){At.source[He]<At.target[He]?At.circular=!1:(At.circular=!0,At.circularLinkID=We,We+=1)})}(ye,0,Be),function(Re){Re.nodes.forEach(function(ze){ze.partOfCycle=!1,ze.value=Math.max((0,A.Sm)(ze.sourceLinks,c),(0,A.Sm)(ze.targetLinks,c)),ze.sourceLinks.forEach(function(He){He.circular&&(ze.partOfCycle=!0,ze.circularLinkType=He.circularLinkType)}),ze.targetLinks.forEach(function(He){He.circular&&(ze.partOfCycle=!0,ze.circularLinkType=He.circularLinkType)})})}(ye),function(Re){var ze,He,We;for(ze=Re.nodes,He=[],We=0;ze.length;++We,ze=He,He=[])ze.forEach(function(Je){Je.depth=We,Je.sourceLinks.forEach(function(lt){He.indexOf(lt.target)<0&&!lt.circular&&He.push(lt.target)})});for(ze=Re.nodes,He=[],We=0;ze.length;++We,ze=He,He=[])ze.forEach(function(Je){Je.height=We,Je.targetLinks.forEach(function(lt){He.indexOf(lt.source)<0&&!lt.circular&&He.push(lt.source)})});Re.nodes.forEach(function(Je){Je.column=Math.floor(fe.call(null,Je,We))})}(ye),L(ye,oe),function(Re,ze,He){var We=(0,M.b1)().key(function(_t){return _t.column}).sortKeys(A.j2).entries(Re.nodes).map(function(_t){return _t.values});(function(_t){if(me){var xt=1/0;We.forEach(function(Ct){var zt=we*me/(Ct.length+1);xt=zt<xt?zt:xt}),xe=xt}var at=(0,A.VV)(We,function(Ct){return(we-Le-(Ct.length-1)*xe)/(0,A.Sm)(Ct,c)});at*=E,Re.links.forEach(function(Ct){Ct.width=Ct.value*at});var ot=function(Ct){var zt=0,St=0,qe=0,Xe=0,Ve=(0,A.Fp)(Ct.nodes,function(Ze){return Ze.column});return Ct.links.forEach(function(Ze){Ze.circular&&(Ze.circularLinkType=="top"?zt+=Ze.width:St+=Ze.width,Ze.target.column==0&&(Xe+=Ze.width),Ze.source.column==Ve&&(qe+=Ze.width))}),{top:zt=zt>0?zt+S+T:zt,bottom:St=St>0?St+S+T:St,left:Xe=Xe>0?Xe+S+T:Xe,right:qe=qe>0?qe+S+T:qe}}(Re),At=function(Ct,zt){var St=(0,A.Fp)(Ct.nodes,function(st){return st.column}),qe=Ae-ve,Xe=we-Le,Ve=qe/(qe+zt.right+zt.left),Ze=Xe/(Xe+zt.top+zt.bottom);return ve=ve*Ve+zt.left,Ae=zt.right==0?Ae:Ae*Ve,Le=Le*Ze+zt.top,we*=Ze,Ct.nodes.forEach(function(st){st.x0=ve+st.column*((Ae-ve-se)/St),st.x1=st.x0+se}),Ze}(Re,ot);at*=At,Re.links.forEach(function(Ct){Ct.width=Ct.value*at}),We.forEach(function(Ct){var zt=Ct.length;Ct.forEach(function(St,qe){St.depth==We.length-1&&zt==1||St.depth==0&&zt==1?(St.y0=we/2-St.value*at,St.y1=St.y0+St.value*at):St.partOfCycle?z(St,_t)==0?(St.y0=we/2+qe,St.y1=St.y0+St.value*at):St.circularLinkType=="top"?(St.y0=Le+qe,St.y1=St.y0+St.value*at):(St.y0=we-St.value*at-qe,St.y1=St.y0+St.value*at):ot.top==0||ot.bottom==0?(St.y0=(we-Le)/zt*qe,St.y1=St.y0+St.value*at):(St.y0=(we-Le)/2-zt/2+qe,St.y1=St.y0+St.value*at)})})})(He),yt();for(var Je=1,lt=ze;lt>0;--lt)et(Je*=.99,He),yt();function et(_t,xt){var at=We.length;We.forEach(function(ot){var At=ot.length,Ct=ot[0].depth;ot.forEach(function(zt){var St;if((zt.sourceLinks.length||zt.targetLinks.length)&&!(zt.partOfCycle&&z(zt,xt)>0))if(Ct==0&&At==1)St=zt.y1-zt.y0,zt.y0=we/2-St/2,zt.y1=we/2+St/2;else if(Ct==at-1&&At==1)St=zt.y1-zt.y0,zt.y0=we/2-St/2,zt.y1=we/2+St/2;else{var qe=(0,A.J6)(zt.sourceLinks,h),Xe=(0,A.J6)(zt.targetLinks,g),Ve=((qe&&Xe?(qe+Xe)/2:qe||Xe)-x(zt))*_t;zt.y0+=Ve,zt.y1+=Ve}})})}function yt(){We.forEach(function(_t){var xt,at,ot,At=Le,Ct=_t.length;for(_t.sort(p),ot=0;ot<Ct;++ot)(at=At-(xt=_t[ot]).y0)>0&&(xt.y0+=at,xt.y1+=at),At=xt.y1+xe;if((at=At-xe-we)>0)for(At=xt.y0-=at,xt.y1-=at,ot=Ct-2;ot>=0;--ot)(at=(xt=_t[ot]).y1+xe-At)>0&&(xt.y0-=at,xt.y1-=at),At=xt.y0})}}(ye,be,oe),Te(ye);for(var Pe=0;Pe<4;Pe++)re(ye,we,oe),ae(ye,0,oe),J(ye,Le,we,oe),re(ye,we,oe),ae(ye,0,oe);return function(Re,ze,He){var We=Re.nodes,Je=Re.links,lt=!1,et=!1;if(Je.forEach(function(xt){xt.circularLinkType=="top"?lt=!0:xt.circularLinkType=="bottom"&&(et=!0)}),lt==0||et==0){var yt=(0,A.VV)(We,function(xt){return xt.y0}),_t=(He-ze)/((0,A.Fp)(We,function(xt){return xt.y1})-yt);We.forEach(function(xt){var at=(xt.y1-xt.y0)*_t;xt.y0=(xt.y0-yt)*_t,xt.y1=xt.y0+at}),Je.forEach(function(xt){xt.y0=(xt.y0-yt)*_t,xt.y1=(xt.y1-yt)*_t,xt.width=xt.width*_t})}}(ye,Le,we),H(ye,Ie,we,oe),ye}function Te(ye){ye.nodes.forEach(function(Pe){Pe.sourceLinks.sort(u),Pe.targetLinks.sort(a)}),ye.nodes.forEach(function(Pe){var Re=Pe.y0,ze=Re,He=Pe.y1,We=He;Pe.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=He-Je.width/2,He-=Je.width):(Je.y0=Re+Je.width/2,Re+=Je.width)}),Pe.targetLinks.forEach(function(Je){Je.circular?(Je.y1=We-Je.width/2,We-=Je.width):(Je.y1=ze+Je.width/2,ze+=Je.width)})})}return ce.nodeId=function(ye){return arguments.length?(oe=typeof ye=="function"?ye:n(ye),ce):oe},ce.nodeAlign=function(ye){return arguments.length?(fe=typeof ye=="function"?ye:n(ye),ce):fe},ce.nodeWidth=function(ye){return arguments.length?(se=+ye,ce):se},ce.nodePadding=function(ye){return arguments.length?(xe=+ye,ce):xe},ce.nodes=function(ye){return arguments.length?(Se=typeof ye=="function"?ye:n(ye),ce):Se},ce.links=function(ye){return arguments.length?(Me=typeof ye=="function"?ye:n(ye),ce):Me},ce.size=function(ye){return arguments.length?(ve=Le=0,Ae=+ye[0],we=+ye[1],ce):[Ae-ve,we-Le]},ce.extent=function(ye){return arguments.length?(ve=+ye[0][0],Ae=+ye[1][0],Le=+ye[0][1],we=+ye[1][1],ce):[[ve,Le],[Ae,we]]},ce.iterations=function(ye){return arguments.length?(be=+ye,ce):be},ce.circularLinkGap=function(ye){return arguments.length?(Ie=+ye,ce):Ie},ce.nodePaddingRatio=function(ye){return arguments.length?(me=+ye,ce):me},ce.sortNodes=function(ye){return arguments.length?(Be=ye,ce):Be},ce.update=function(ye){return L(ye,oe),Te(ye),ye.links.forEach(function(Pe){Pe.circular&&(Pe.circularLinkType=Pe.y0+Pe.y1<we?"top":"bottom",Pe.source.circularLinkType=Pe.circularLinkType,Pe.target.circularLinkType=Pe.circularLinkType)}),re(ye,we,oe,!1),ae(ye,0,oe),H(ye,Ie,we,oe),ye},ce}function L(xe,me){var ve=0,Le=0;xe.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=ve<Le?"top":"bottom",Ae.circularLinkType=="top"?ve+=1:Le+=1,xe.nodes.forEach(function(we){d(we,me)!=d(Ae.source,me)&&d(we,me)!=d(Ae.target,me)||(we.circularLinkType=Ae.circularLinkType)}))}),xe.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),de(Ae,me)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function O(xe){var me=Math.abs(xe.y1-xe.y0),ve=Math.abs(xe.target.x0-xe.source.x1);return Math.atan(ve/me)}function z(xe,me){var ve=0;xe.sourceLinks.forEach(function(Ae){ve=Ae.circular&&!de(Ae,me)?ve+1:ve});var Le=0;return xe.targetLinks.forEach(function(Ae){Le=Ae.circular&&!de(Ae,me)?Le+1:Le}),ve+Le}function G(xe){var me=xe.source.sourceLinks,ve=0;me.forEach(function(we){ve=we.circular?ve+1:ve});var Le=xe.target.targetLinks,Ae=0;return Le.forEach(function(we){Ae=we.circular?Ae+1:Ae}),!(ve>1||Ae>1)}function I(xe,me,ve){return xe.sort(N),xe.forEach(function(Le,Ae){var we,se,oe=0;if(de(Le,ve)&&G(Le))Le.circularPathData.verticalBuffer=oe+Le.width/2;else{for(var fe=0;fe<Ae;fe++)if(we=xe[Ae],se=xe[fe],!(we.source.column<se.target.column||we.target.column>se.source.column)){var Se=xe[fe].circularPathData.verticalBuffer+xe[fe].width/2+me;oe=Se>oe?Se:oe}Le.circularPathData.verticalBuffer=oe+Le.width/2}}),xe}function H(xe,me,ve,Le){var Ae=(0,A.VV)(xe.links,function(we){return we.source.y0});xe.links.forEach(function(we){we.circular&&(we.circularPathData={})}),I(xe.links.filter(function(we){return we.circularLinkType=="top"}),me,Le),I(xe.links.filter(function(we){return we.circularLinkType=="bottom"}),me,Le),xe.links.forEach(function(we){if(we.circular){if(we.circularPathData.arcRadius=we.width+T,we.circularPathData.leftNodeBuffer=5,we.circularPathData.rightNodeBuffer=5,we.circularPathData.sourceWidth=we.source.x1-we.source.x0,we.circularPathData.sourceX=we.source.x0+we.circularPathData.sourceWidth,we.circularPathData.targetX=we.target.x0,we.circularPathData.sourceY=we.y0,we.circularPathData.targetY=we.y1,de(we,Le)&&G(we))we.circularPathData.leftSmallArcRadius=T+we.width/2,we.circularPathData.leftLargeArcRadius=T+we.width/2,we.circularPathData.rightSmallArcRadius=T+we.width/2,we.circularPathData.rightLargeArcRadius=T+we.width/2,we.circularLinkType=="bottom"?(we.circularPathData.verticalFullExtent=we.source.y1+S+we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.rightLargeArcRadius):(we.circularPathData.verticalFullExtent=we.source.y0-S-we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.rightLargeArcRadius);else{var se=we.source.column,oe=we.circularLinkType,fe=xe.links.filter(function(be){return be.source.column==se&&be.circularLinkType==oe});we.circularLinkType=="bottom"?fe.sort(V):fe.sort(F);var Se=0;fe.forEach(function(be,Ie){be.circularLinkID==we.circularLinkID&&(we.circularPathData.leftSmallArcRadius=T+we.width/2+Se,we.circularPathData.leftLargeArcRadius=T+we.width/2+Ie*me+Se),Se+=be.width}),se=we.target.column,fe=xe.links.filter(function(be){return be.target.column==se&&be.circularLinkType==oe}),we.circularLinkType=="bottom"?fe.sort(te):fe.sort(W),Se=0,fe.forEach(function(be,Ie){be.circularLinkID==we.circularLinkID&&(we.circularPathData.rightSmallArcRadius=T+we.width/2+Se,we.circularPathData.rightLargeArcRadius=T+we.width/2+Ie*me+Se),Se+=be.width}),we.circularLinkType=="bottom"?(we.circularPathData.verticalFullExtent=Math.max(ve,we.source.y1,we.target.y1)+S+we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.rightLargeArcRadius):(we.circularPathData.verticalFullExtent=Ae-S-we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.rightLargeArcRadius)}we.circularPathData.leftInnerExtent=we.circularPathData.sourceX+we.circularPathData.leftNodeBuffer,we.circularPathData.rightInnerExtent=we.circularPathData.targetX-we.circularPathData.rightNodeBuffer,we.circularPathData.leftFullExtent=we.circularPathData.sourceX+we.circularPathData.leftLargeArcRadius+we.circularPathData.leftNodeBuffer,we.circularPathData.rightFullExtent=we.circularPathData.targetX-we.circularPathData.rightLargeArcRadius-we.circularPathData.rightNodeBuffer}if(we.circular)we.path=function(be){return be.circularLinkType=="top"?"M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 0 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY-be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 0 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 0 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY-be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 0 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY:"M"+be.circularPathData.sourceX+" "+be.circularPathData.sourceY+" L"+be.circularPathData.leftInnerExtent+" "+be.circularPathData.sourceY+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftSmallArcRadius+" 0 0 1 "+be.circularPathData.leftFullExtent+" "+(be.circularPathData.sourceY+be.circularPathData.leftSmallArcRadius)+" L"+be.circularPathData.leftFullExtent+" "+be.circularPathData.verticalLeftInnerExtent+" A"+be.circularPathData.leftLargeArcRadius+" "+be.circularPathData.leftLargeArcRadius+" 0 0 1 "+be.circularPathData.leftInnerExtent+" "+be.circularPathData.verticalFullExtent+" L"+be.circularPathData.rightInnerExtent+" "+be.circularPathData.verticalFullExtent+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightLargeArcRadius+" 0 0 1 "+be.circularPathData.rightFullExtent+" "+be.circularPathData.verticalRightInnerExtent+" L"+be.circularPathData.rightFullExtent+" "+(be.circularPathData.targetY+be.circularPathData.rightSmallArcRadius)+" A"+be.circularPathData.rightLargeArcRadius+" "+be.circularPathData.rightSmallArcRadius+" 0 0 1 "+be.circularPathData.rightInnerExtent+" "+be.circularPathData.targetY+" L"+be.circularPathData.targetX+" "+be.circularPathData.targetY}(we);else{var Me=(0,l.h5)().source(function(be){return[be.source.x0+(be.source.x1-be.source.x0),be.y0]}).target(function(be){return[be.target.x0,be.y1]});we.path=Me(we)}})}function N(xe,me){return Q(xe)==Q(me)?xe.circularLinkType=="bottom"?V(xe,me):F(xe,me):Q(me)-Q(xe)}function F(xe,me){return xe.y0-me.y0}function V(xe,me){return me.y0-xe.y0}function W(xe,me){return xe.y1-me.y1}function te(xe,me){return me.y1-xe.y1}function Q(xe){return xe.target.column-xe.source.column}function X(xe){return xe.target.x0-xe.source.x1}function q(xe,me){var ve=O(xe),Le=X(me)/Math.tan(ve);return he(xe)=="up"?xe.y1+Le:xe.y1-Le}function Z(xe,me){var ve=O(xe),Le=X(me)/Math.tan(ve);return he(xe)=="up"?xe.y1-Le:xe.y1+Le}function J(xe,me,ve,Le){xe.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var we=Ae.source.column+1,se=Ae.target.column-1,oe=1,fe=se-we+1;for(oe=1;we<=se;we++,oe++)xe.nodes.forEach(function(Se){if(Se.column==we){var Me,be=oe/(fe+1),Ie=Math.pow(1-be,3),Be=3*be*Math.pow(1-be,2),ce=3*Math.pow(be,2)*(1-be),Te=Math.pow(be,3),ye=Ie*Ae.y0+Be*Ae.y0+ce*Ae.y1+Te*Ae.y1,Pe=ye-Ae.width/2,Re=ye+Ae.width/2;Pe>Se.y0&&Pe<Se.y1?(Me=Se.y1-Pe+10,Me=Se.circularLinkType=="bottom"?Me:-Me,Se=ne(Se,Me,me,ve),xe.nodes.forEach(function(ze){var He,We;d(ze,Le)!=d(Se,Le)&&ze.column==Se.column&&(We=ze,(He=Se).y0>We.y0&&He.y0<We.y1||He.y1>We.y0&&He.y1<We.y1||He.y0<We.y0&&He.y1>We.y1)&&ne(ze,Me,me,ve)})):(Re>Se.y0&&Re<Se.y1||Pe<Se.y0&&Re>Se.y1)&&(Me=Re-Se.y0+10,Se=ne(Se,Me,me,ve),xe.nodes.forEach(function(ze){d(ze,Le)!=d(Se,Le)&&ze.column==Se.column&&ze.y0<Se.y1&&ze.y1>Se.y1&&ne(ze,Me,me,ve)}))}})}})}function ne(xe,me,ve,Le){return xe.y0+me>=ve&&xe.y1+me<=Le&&(xe.y0=xe.y0+me,xe.y1=xe.y1+me,xe.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+me}),xe.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+me})),xe}function re(xe,me,ve,Le){xe.nodes.forEach(function(Ae){Le&&Ae.y+(Ae.y1-Ae.y0)>me&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-me));var we=xe.links.filter(function(fe){return d(fe.source,ve)==d(Ae,ve)}),se=we.length;se>1&&we.sort(function(fe,Se){if(!fe.circular&&!Se.circular){if(fe.target.column==Se.target.column||!ue(fe,Se))return fe.y1-Se.y1;if(fe.target.column>Se.target.column){var Me=Z(Se,fe);return fe.y1-Me}if(Se.target.column>fe.target.column)return Z(fe,Se)-Se.y1}return fe.circular&&!Se.circular?fe.circularLinkType=="top"?-1:1:Se.circular&&!fe.circular?Se.circularLinkType=="top"?1:-1:fe.circular&&Se.circular?fe.circularLinkType===Se.circularLinkType&&fe.circularLinkType=="top"?fe.target.column===Se.target.column?fe.target.y1-Se.target.y1:Se.target.column-fe.target.column:fe.circularLinkType===Se.circularLinkType&&fe.circularLinkType=="bottom"?fe.target.column===Se.target.column?Se.target.y1-fe.target.y1:fe.target.column-Se.target.column:fe.circularLinkType=="top"?-1:1:void 0});var oe=Ae.y0;we.forEach(function(fe){fe.y0=oe+fe.width/2,oe+=fe.width}),we.forEach(function(fe,Se){if(fe.circularLinkType=="bottom"){for(var Me=Se+1,be=0;Me<se;Me++)be+=we[Me].width;fe.y0=Ae.y1-be-fe.width/2}})})}function ae(xe,me,ve){xe.nodes.forEach(function(Le){var Ae=xe.links.filter(function(oe){return d(oe.target,ve)==d(Le,ve)}),we=Ae.length;we>1&&Ae.sort(function(oe,fe){if(!oe.circular&&!fe.circular){if(oe.source.column==fe.source.column||!ue(oe,fe))return oe.y0-fe.y0;if(fe.source.column<oe.source.column){var Se=q(fe,oe);return oe.y0-Se}if(oe.source.column<fe.source.column)return q(oe,fe)-fe.y0}return oe.circular&&!fe.circular?oe.circularLinkType=="top"?-1:1:fe.circular&&!oe.circular?fe.circularLinkType=="top"?1:-1:oe.circular&&fe.circular?oe.circularLinkType===fe.circularLinkType&&oe.circularLinkType=="top"?oe.source.column===fe.source.column?oe.source.y1-fe.source.y1:oe.source.column-fe.source.column:oe.circularLinkType===fe.circularLinkType&&oe.circularLinkType=="bottom"?oe.source.column===fe.source.column?oe.source.y1-fe.source.y1:fe.source.column-oe.source.column:oe.circularLinkType=="top"?-1:1:void 0});var se=Le.y0;Ae.forEach(function(oe){oe.y1=se+oe.width/2,se+=oe.width}),Ae.forEach(function(oe,fe){if(oe.circularLinkType=="bottom"){for(var Se=fe+1,Me=0;Se<we;Se++)Me+=Ae[Se].width;oe.y1=Le.y1-Me-oe.width/2}})})}function ue(xe,me){return he(xe)==he(me)}function he(xe){return xe.y0-xe.y1>0?"up":"down"}function de(xe,me){return d(xe.source,me)==d(xe.target,me)}},30838:function($,P,t){t.r(P),t.d(P,{sankey:function(){return b},sankeyCenter:function(){return o},sankeyJustify:function(){return f},sankeyLeft:function(){return _},sankeyLinkHorizontal:function(){return d},sankeyRight:function(){return m}});var A=t(33064),M=t(15140);function l(S){return S.target.depth}function _(S){return S.depth}function m(S,T){return T-1-S.height}function f(S,T){return S.sourceLinks.length?S.depth:T-1}function o(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,A.VV)(S.sourceLinks,l)-1:0}function e(S){return function(){return S}}function i(S,T){return n(S.source,T.source)||S.index-T.index}function r(S,T){return n(S.target,T.target)||S.index-T.index}function n(S,T){return S.y0-T.y0}function s(S){return S.value}function a(S){return(S.y0+S.y1)/2}function u(S){return a(S.source)*S.value}function p(S){return a(S.target)*S.value}function c(S){return S.index}function x(S){return S.nodes}function g(S){return S.links}function h(S,T){var E=S.get(T);if(!E)throw new Error("missing: "+T);return E}function b(){var S=0,T=0,E=1,C=1,L=24,O=8,z=c,G=f,I=x,H=g,N=32;function F(){var W={nodes:I.apply(null,arguments),links:H.apply(null,arguments)};return function(te){te.nodes.forEach(function(X,q){X.index=q,X.sourceLinks=[],X.targetLinks=[]});var Q=(0,M.UI)(te.nodes,z);te.links.forEach(function(X,q){X.index=q;var Z=X.source,J=X.target;typeof Z!="object"&&(Z=X.source=h(Q,Z)),typeof J!="object"&&(J=X.target=h(Q,J)),Z.sourceLinks.push(X),J.targetLinks.push(X)})}(W),function(te){te.nodes.forEach(function(Q){Q.value=Math.max((0,A.Sm)(Q.sourceLinks,s),(0,A.Sm)(Q.targetLinks,s))})}(W),function(te){var Q,X,q;for(Q=te.nodes,X=[],q=0;Q.length;++q,Q=X,X=[])Q.forEach(function(J){J.depth=q,J.sourceLinks.forEach(function(ne){X.indexOf(ne.target)<0&&X.push(ne.target)})});for(Q=te.nodes,X=[],q=0;Q.length;++q,Q=X,X=[])Q.forEach(function(J){J.height=q,J.targetLinks.forEach(function(ne){X.indexOf(ne.source)<0&&X.push(ne.source)})});var Z=(E-S-L)/(q-1);te.nodes.forEach(function(J){J.x1=(J.x0=S+Math.max(0,Math.min(q-1,Math.floor(G.call(null,J,q))))*Z)+L})}(W),function(te){var Q=(0,M.b1)().key(function(re){return re.x0}).sortKeys(A.j2).entries(te.nodes).map(function(re){return re.values});(function(){var re=(0,A.Fp)(Q,function(he){return he.length}),ae=.6666666666666666*(C-T)/(re-1);O>ae&&(O=ae);var ue=(0,A.VV)(Q,function(he){return(C-T-(he.length-1)*O)/(0,A.Sm)(he,s)});Q.forEach(function(he){he.forEach(function(de,xe){de.y1=(de.y0=xe)+de.value*ue})}),te.links.forEach(function(he){he.width=he.value*ue})})(),ne();for(var X=1,q=N;q>0;--q)J(X*=.99),ne(),Z(X),ne();function Z(re){Q.forEach(function(ae){ae.forEach(function(ue){if(ue.targetLinks.length){var he=((0,A.Sm)(ue.targetLinks,u)/(0,A.Sm)(ue.targetLinks,s)-a(ue))*re;ue.y0+=he,ue.y1+=he}})})}function J(re){Q.slice().reverse().forEach(function(ae){ae.forEach(function(ue){if(ue.sourceLinks.length){var he=((0,A.Sm)(ue.sourceLinks,p)/(0,A.Sm)(ue.sourceLinks,s)-a(ue))*re;ue.y0+=he,ue.y1+=he}})})}function ne(){Q.forEach(function(re){var ae,ue,he,de=T,xe=re.length;for(re.sort(n),he=0;he<xe;++he)(ue=de-(ae=re[he]).y0)>0&&(ae.y0+=ue,ae.y1+=ue),de=ae.y1+O;if((ue=de-O-C)>0)for(de=ae.y0-=ue,ae.y1-=ue,he=xe-2;he>=0;--he)(ue=(ae=re[he]).y1+O-de)>0&&(ae.y0-=ue,ae.y1-=ue),de=ae.y0})}}(W),V(W),W}function V(W){W.nodes.forEach(function(te){te.sourceLinks.sort(r),te.targetLinks.sort(i)}),W.nodes.forEach(function(te){var Q=te.y0,X=Q;te.sourceLinks.forEach(function(q){q.y0=Q+q.width/2,Q+=q.width}),te.targetLinks.forEach(function(q){q.y1=X+q.width/2,X+=q.width})})}return F.update=function(W){return V(W),W},F.nodeId=function(W){return arguments.length?(z=typeof W=="function"?W:e(W),F):z},F.nodeAlign=function(W){return arguments.length?(G=typeof W=="function"?W:e(W),F):G},F.nodeWidth=function(W){return arguments.length?(L=+W,F):L},F.nodePadding=function(W){return arguments.length?(O=+W,F):O},F.nodes=function(W){return arguments.length?(I=typeof W=="function"?W:e(W),F):I},F.links=function(W){return arguments.length?(H=typeof W=="function"?W:e(W),F):H},F.size=function(W){return arguments.length?(S=T=0,E=+W[0],C=+W[1],F):[E-S,C-T]},F.extent=function(W){return arguments.length?(S=+W[0][0],E=+W[1][0],T=+W[0][1],C=+W[1][1],F):[[S,T],[E,C]]},F.iterations=function(W){return arguments.length?(N=+W,F):N},F}var v=t(45879);function y(S){return[S.source.x1,S.y0]}function w(S){return[S.target.x0,S.y1]}function d(){return(0,v.h5)().source(y).target(w)}},39898:function($,P,t){var A,M;(function(){var l={version:"3.8.0"},_=[].slice,m=function(B){return _.call(B)},f=self.document;function o(B){return B&&(B.ownerDocument||B.document||B).documentElement}function e(B){return B&&(B.ownerDocument&&B.ownerDocument.defaultView||B.document&&B||B.defaultView)}if(f)try{m(f.documentElement.childNodes)[0].nodeType}catch{m=function(ee){for(var ie=ee.length,ge=new Array(ie);ie--;)ge[ie]=ee[ie];return ge}}if(Date.now||(Date.now=function(){return+new Date}),f)try{f.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,r=i.setAttribute,n=i.setAttributeNS,s=this.CSSStyleDeclaration.prototype,a=s.setProperty;i.setAttribute=function(ee,ie){r.call(this,ee,ie+"")},i.setAttributeNS=function(ee,ie,ge){n.call(this,ee,ie,ge+"")},s.setProperty=function(ee,ie,ge){a.call(this,ee,ie+"",ge)}}function u(B,ee){return B<ee?-1:B>ee?1:B>=ee?0:NaN}function p(B){return B===null?NaN:+B}function c(B){return!isNaN(B)}function x(B){return{left:function(ee,ie,ge,_e){for(arguments.length<3&&(ge=0),arguments.length<4&&(_e=ee.length);ge<_e;){var Ce=ge+_e>>>1;B(ee[Ce],ie)<0?ge=Ce+1:_e=Ce}return ge},right:function(ee,ie,ge,_e){for(arguments.length<3&&(ge=0),arguments.length<4&&(_e=ee.length);ge<_e;){var Ce=ge+_e>>>1;B(ee[Ce],ie)>0?_e=Ce:ge=Ce+1}return ge}}}l.ascending=u,l.descending=function(B,ee){return ee<B?-1:ee>B?1:ee>=B?0:NaN},l.min=function(B,ee){var ie,ge,_e=-1,Ce=B.length;if(arguments.length===1){for(;++_e<Ce;)if((ge=B[_e])!=null&&ge>=ge){ie=ge;break}for(;++_e<Ce;)(ge=B[_e])!=null&&ie>ge&&(ie=ge)}else{for(;++_e<Ce;)if((ge=ee.call(B,B[_e],_e))!=null&&ge>=ge){ie=ge;break}for(;++_e<Ce;)(ge=ee.call(B,B[_e],_e))!=null&&ie>ge&&(ie=ge)}return ie},l.max=function(B,ee){var ie,ge,_e=-1,Ce=B.length;if(arguments.length===1){for(;++_e<Ce;)if((ge=B[_e])!=null&&ge>=ge){ie=ge;break}for(;++_e<Ce;)(ge=B[_e])!=null&&ge>ie&&(ie=ge)}else{for(;++_e<Ce;)if((ge=ee.call(B,B[_e],_e))!=null&&ge>=ge){ie=ge;break}for(;++_e<Ce;)(ge=ee.call(B,B[_e],_e))!=null&&ge>ie&&(ie=ge)}return ie},l.extent=function(B,ee){var ie,ge,_e,Ce=-1,Ne=B.length;if(arguments.length===1){for(;++Ce<Ne;)if((ge=B[Ce])!=null&&ge>=ge){ie=_e=ge;break}for(;++Ce<Ne;)(ge=B[Ce])!=null&&(ie>ge&&(ie=ge),_e<ge&&(_e=ge))}else{for(;++Ce<Ne;)if((ge=ee.call(B,B[Ce],Ce))!=null&&ge>=ge){ie=_e=ge;break}for(;++Ce<Ne;)(ge=ee.call(B,B[Ce],Ce))!=null&&(ie>ge&&(ie=ge),_e<ge&&(_e=ge))}return[ie,_e]},l.sum=function(B,ee){var ie,ge=0,_e=B.length,Ce=-1;if(arguments.length===1)for(;++Ce<_e;)c(ie=+B[Ce])&&(ge+=ie);else for(;++Ce<_e;)c(ie=+ee.call(B,B[Ce],Ce))&&(ge+=ie);return ge},l.mean=function(B,ee){var ie,ge=0,_e=B.length,Ce=-1,Ne=_e;if(arguments.length===1)for(;++Ce<_e;)c(ie=p(B[Ce]))?ge+=ie:--Ne;else for(;++Ce<_e;)c(ie=p(ee.call(B,B[Ce],Ce)))?ge+=ie:--Ne;if(Ne)return ge/Ne},l.quantile=function(B,ee){var ie=(B.length-1)*ee+1,ge=Math.floor(ie),_e=+B[ge-1],Ce=ie-ge;return Ce?_e+Ce*(B[ge]-_e):_e},l.median=function(B,ee){var ie,ge=[],_e=B.length,Ce=-1;if(arguments.length===1)for(;++Ce<_e;)c(ie=p(B[Ce]))&&ge.push(ie);else for(;++Ce<_e;)c(ie=p(ee.call(B,B[Ce],Ce)))&&ge.push(ie);if(ge.length)return l.quantile(ge.sort(u),.5)},l.variance=function(B,ee){var ie,ge,_e=B.length,Ce=0,Ne=0,Ue=-1,Ge=0;if(arguments.length===1)for(;++Ue<_e;)c(ie=p(B[Ue]))&&(Ne+=(ge=ie-Ce)*(ie-(Ce+=ge/++Ge)));else for(;++Ue<_e;)c(ie=p(ee.call(B,B[Ue],Ue)))&&(Ne+=(ge=ie-Ce)*(ie-(Ce+=ge/++Ge)));if(Ge>1)return Ne/(Ge-1)},l.deviation=function(){var B=l.variance.apply(this,arguments);return B&&Math.sqrt(B)};var g=x(u);function h(B){return B.length}l.bisectLeft=g.left,l.bisect=l.bisectRight=g.right,l.bisector=function(B){return x(B.length===1?function(ee,ie){return u(B(ee),ie)}:B)},l.shuffle=function(B,ee,ie){(Ce=arguments.length)<3&&(ie=B.length,Ce<2&&(ee=0));for(var ge,_e,Ce=ie-ee;Ce;)_e=Math.random()*Ce--|0,ge=B[Ce+ee],B[Ce+ee]=B[_e+ee],B[_e+ee]=ge;return B},l.permute=function(B,ee){for(var ie=ee.length,ge=new Array(ie);ie--;)ge[ie]=B[ee[ie]];return ge},l.pairs=function(B){for(var ee=0,ie=B.length-1,ge=B[0],_e=new Array(ie<0?0:ie);ee<ie;)_e[ee]=[ge,ge=B[++ee]];return _e},l.transpose=function(B){if(!(_e=B.length))return[];for(var ee=-1,ie=l.min(B,h),ge=new Array(ie);++ee<ie;)for(var _e,Ce=-1,Ne=ge[ee]=new Array(_e);++Ce<_e;)Ne[Ce]=B[Ce][ee];return ge},l.zip=function(){return l.transpose(arguments)},l.keys=function(B){var ee=[];for(var ie in B)ee.push(ie);return ee},l.values=function(B){var ee=[];for(var ie in B)ee.push(B[ie]);return ee},l.entries=function(B){var ee=[];for(var ie in B)ee.push({key:ie,value:B[ie]});return ee},l.merge=function(B){for(var ee,ie,ge,_e=B.length,Ce=-1,Ne=0;++Ce<_e;)Ne+=B[Ce].length;for(ie=new Array(Ne);--_e>=0;)for(ee=(ge=B[_e]).length;--ee>=0;)ie[--Ne]=ge[ee];return ie};var b=Math.abs;function v(B,ee){for(var ie in ee)Object.defineProperty(B.prototype,ie,{value:ee[ie],enumerable:!1})}function y(){this._=Object.create(null)}l.range=function(B,ee,ie){if(arguments.length<3&&(ie=1,arguments.length<2&&(ee=B,B=0)),(ee-B)/ie==1/0)throw new Error("infinite range");var ge,_e=[],Ce=function(Ue){for(var Ge=1;Ue*Ge%1;)Ge*=10;return Ge}(b(ie)),Ne=-1;if(B*=Ce,ee*=Ce,(ie*=Ce)<0)for(;(ge=B+ie*++Ne)>ee;)_e.push(ge/Ce);else for(;(ge=B+ie*++Ne)<ee;)_e.push(ge/Ce);return _e},l.map=function(B,ee){var ie=new y;if(B instanceof y)B.forEach(function(Ue,Ge){ie.set(Ue,Ge)});else if(Array.isArray(B)){var ge,_e=-1,Ce=B.length;if(arguments.length===1)for(;++_e<Ce;)ie.set(_e,B[_e]);else for(;++_e<Ce;)ie.set(ee.call(B,ge=B[_e],_e),ge)}else for(var Ne in B)ie.set(Ne,B[Ne]);return ie};var w="__proto__",d="\0";function S(B){return(B+="")===w||B[0]===d?d+B:B}function T(B){return(B+="")[0]===d?B.slice(1):B}function E(B){return S(B)in this._}function C(B){return(B=S(B))in this._&&delete this._[B]}function L(){var B=[];for(var ee in this._)B.push(T(ee));return B}function O(){var B=0;for(var ee in this._)++B;return B}function z(){for(var B in this._)return!1;return!0}function G(){this._=Object.create(null)}function I(B){return B}function H(B,ee,ie){return function(){var ge=ie.apply(ee,arguments);return ge===ee?B:ge}}function N(B,ee){if(ee in B)return ee;ee=ee.charAt(0).toUpperCase()+ee.slice(1);for(var ie=0,ge=F.length;ie<ge;++ie){var _e=F[ie]+ee;if(_e in B)return _e}}v(y,{has:E,get:function(B){return this._[S(B)]},set:function(B,ee){return this._[S(B)]=ee},remove:C,keys:L,values:function(){var B=[];for(var ee in this._)B.push(this._[ee]);return B},entries:function(){var B=[];for(var ee in this._)B.push({key:T(ee),value:this._[ee]});return B},size:O,empty:z,forEach:function(B){for(var ee in this._)B.call(this,T(ee),this._[ee])}}),l.nest=function(){var B,ee,ie={},ge=[],_e=[];function Ce(Ue,Ge,Ye){if(Ye>=ge.length)return ee?ee.call(ie,Ge):B?Ge.sort(B):Ge;for(var Qe,ct,vt,Ot,Dt=-1,Pt=Ge.length,Vt=ge[Ye++],It=new y;++Dt<Pt;)(Ot=It.get(Qe=Vt(ct=Ge[Dt])))?Ot.push(ct):It.set(Qe,[ct]);return Ue?(ct=Ue(),vt=function(sn,Jt){ct.set(sn,Ce(Ue,Jt,Ye))}):(ct={},vt=function(sn,Jt){ct[sn]=Ce(Ue,Jt,Ye)}),It.forEach(vt),ct}function Ne(Ue,Ge){if(Ge>=ge.length)return Ue;var Ye=[],Qe=_e[Ge++];return Ue.forEach(function(ct,vt){Ye.push({key:ct,values:Ne(vt,Ge)})}),Qe?Ye.sort(function(ct,vt){return Qe(ct.key,vt.key)}):Ye}return ie.map=function(Ue,Ge){return Ce(Ge,Ue,0)},ie.entries=function(Ue){return Ne(Ce(l.map,Ue,0),0)},ie.key=function(Ue){return ge.push(Ue),ie},ie.sortKeys=function(Ue){return _e[ge.length-1]=Ue,ie},ie.sortValues=function(Ue){return B=Ue,ie},ie.rollup=function(Ue){return ee=Ue,ie},ie},l.set=function(B){var ee=new G;if(B)for(var ie=0,ge=B.length;ie<ge;++ie)ee.add(B[ie]);return ee},v(G,{has:E,add:function(B){return this._[S(B+="")]=!0,B},remove:C,values:L,size:O,empty:z,forEach:function(B){for(var ee in this._)B.call(this,T(ee))}}),l.behavior={},l.rebind=function(B,ee){for(var ie,ge=1,_e=arguments.length;++ge<_e;)B[ie=arguments[ge]]=H(B,ee,ee[ie]);return B};var F=["webkit","ms","moz","Moz","o","O"];function V(){}function W(){}function te(B){var ee=[],ie=new y;function ge(){for(var _e,Ce=ee,Ne=-1,Ue=Ce.length;++Ne<Ue;)(_e=Ce[Ne].on)&&_e.apply(this,arguments);return B}return ge.on=function(_e,Ce){var Ne,Ue=ie.get(_e);return arguments.length<2?Ue&&Ue.on:(Ue&&(Ue.on=null,ee=ee.slice(0,Ne=ee.indexOf(Ue)).concat(ee.slice(Ne+1)),ie.remove(_e)),Ce&&ee.push(ie.set(_e,{on:Ce})),B)},ge}function Q(){l.event.preventDefault()}function X(){for(var B,ee=l.event;B=ee.sourceEvent;)ee=B;return ee}function q(B){for(var ee=new W,ie=0,ge=arguments.length;++ie<ge;)ee[arguments[ie]]=te(ee);return ee.of=function(_e,Ce){return function(Ne){try{var Ue=Ne.sourceEvent=l.event;Ne.target=B,l.event=Ne,ee[Ne.type].apply(_e,Ce)}finally{l.event=Ue}}},ee}l.dispatch=function(){for(var B=new W,ee=-1,ie=arguments.length;++ee<ie;)B[arguments[ee]]=te(B);return B},W.prototype.on=function(B,ee){var ie=B.indexOf("."),ge="";if(ie>=0&&(ge=B.slice(ie+1),B=B.slice(0,ie)),B)return arguments.length<2?this[B].on(ge):this[B].on(ge,ee);if(arguments.length===2){if(ee==null)for(B in this)this.hasOwnProperty(B)&&this[B].on(ge,null);return this}},l.event=null,l.requote=function(B){return B.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,J={}.__proto__?function(B,ee){B.__proto__=ee}:function(B,ee){for(var ie in ee)B[ie]=ee[ie]};function ne(B){return J(B,he),B}var re=function(B,ee){return ee.querySelector(B)},ae=function(B,ee){return ee.querySelectorAll(B)},ue=function(B,ee){var ie=B.matches||B[N(B,"matchesSelector")];return ue=function(ge,_e){return ie.call(ge,_e)},ue(B,ee)};typeof Sizzle=="function"&&(re=function(B,ee){return Sizzle(B,ee)[0]||null},ae=Sizzle,ue=Sizzle.matchesSelector),l.selection=function(){return l.select(f.documentElement)};var he=l.selection.prototype=[];function de(B){return typeof B=="function"?B:function(){return re(B,this)}}function xe(B){return typeof B=="function"?B:function(){return ae(B,this)}}he.select=function(B){var ee,ie,ge,_e,Ce=[];B=de(B);for(var Ne=-1,Ue=this.length;++Ne<Ue;){Ce.push(ee=[]),ee.parentNode=(ge=this[Ne]).parentNode;for(var Ge=-1,Ye=ge.length;++Ge<Ye;)(_e=ge[Ge])?(ee.push(ie=B.call(_e,_e.__data__,Ge,Ne)),ie&&"__data__"in _e&&(ie.__data__=_e.__data__)):ee.push(null)}return ne(Ce)},he.selectAll=function(B){var ee,ie,ge=[];B=xe(B);for(var _e=-1,Ce=this.length;++_e<Ce;)for(var Ne=this[_e],Ue=-1,Ge=Ne.length;++Ue<Ge;)(ie=Ne[Ue])&&(ge.push(ee=m(B.call(ie,ie.__data__,Ue,_e))),ee.parentNode=ie);return ne(ge)};var me="http://www.w3.org/1999/xhtml",ve={svg:"http://www.w3.org/2000/svg",xhtml:me,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Le(B,ee){return B=l.ns.qualify(B),ee==null?B.local?function(){this.removeAttributeNS(B.space,B.local)}:function(){this.removeAttribute(B)}:typeof ee=="function"?B.local?function(){var ie=ee.apply(this,arguments);ie==null?this.removeAttributeNS(B.space,B.local):this.setAttributeNS(B.space,B.local,ie)}:function(){var ie=ee.apply(this,arguments);ie==null?this.removeAttribute(B):this.setAttribute(B,ie)}:B.local?function(){this.setAttributeNS(B.space,B.local,ee)}:function(){this.setAttribute(B,ee)}}function Ae(B){return B.trim().replace(/\s+/g," ")}function we(B){return new RegExp("(?:^|\\s+)"+l.requote(B)+"(?:\\s+|$)","g")}function se(B){return(B+"").trim().split(/^|\s+/)}function oe(B,ee){var ie=(B=se(B).map(fe)).length;return typeof ee=="function"?function(){for(var ge=-1,_e=ee.apply(this,arguments);++ge<ie;)B[ge](this,_e)}:function(){for(var ge=-1;++ge<ie;)B[ge](this,ee)}}function fe(B){var ee=we(B);return function(ie,ge){if(_e=ie.classList)return ge?_e.add(B):_e.remove(B);var _e=ie.getAttribute("class")||"";ge?(ee.lastIndex=0,ee.test(_e)||ie.setAttribute("class",Ae(_e+" "+B))):ie.setAttribute("class",Ae(_e.replace(ee," ")))}}function Se(B,ee,ie){return ee==null?function(){this.style.removeProperty(B)}:typeof ee=="function"?function(){var ge=ee.apply(this,arguments);ge==null?this.style.removeProperty(B):this.style.setProperty(B,ge,ie)}:function(){this.style.setProperty(B,ee,ie)}}function Me(B,ee){return ee==null?function(){delete this[B]}:typeof ee=="function"?function(){var ie=ee.apply(this,arguments);ie==null?delete this[B]:this[B]=ie}:function(){this[B]=ee}}function be(B){return typeof B=="function"?B:(B=l.ns.qualify(B)).local?function(){return this.ownerDocument.createElementNS(B.space,B.local)}:function(){var ee=this.ownerDocument,ie=this.namespaceURI;return ie===me&&ee.documentElement.namespaceURI===me?ee.createElement(B):ee.createElementNS(ie,B)}}function Ie(){var B=this.parentNode;B&&B.removeChild(this)}function Be(B){return{__data__:B}}function ce(B){return function(){return ue(this,B)}}function Te(B){return arguments.length||(B=u),function(ee,ie){return ee&&ie?B(ee.__data__,ie.__data__):!ee-!ie}}function ye(B,ee){for(var ie=0,ge=B.length;ie<ge;ie++)for(var _e,Ce=B[ie],Ne=0,Ue=Ce.length;Ne<Ue;Ne++)(_e=Ce[Ne])&&ee(_e,Ne,ie);return B}function Pe(B){return J(B,Re),B}l.ns={prefix:ve,qualify:function(B){var ee=B.indexOf(":"),ie=B;return ee>=0&&(ie=B.slice(0,ee))!=="xmlns"&&(B=B.slice(ee+1)),ve.hasOwnProperty(ie)?{space:ve[ie],local:B}:B}},he.attr=function(B,ee){if(arguments.length<2){if(typeof B=="string"){var ie=this.node();return(B=l.ns.qualify(B)).local?ie.getAttributeNS(B.space,B.local):ie.getAttribute(B)}for(ee in B)this.each(Le(ee,B[ee]));return this}return this.each(Le(B,ee))},he.classed=function(B,ee){if(arguments.length<2){if(typeof B=="string"){var ie=this.node(),ge=(B=se(B)).length,_e=-1;if(ee=ie.classList){for(;++_e<ge;)if(!ee.contains(B[_e]))return!1}else for(ee=ie.getAttribute("class");++_e<ge;)if(!we(B[_e]).test(ee))return!1;return!0}for(ee in B)this.each(oe(ee,B[ee]));return this}return this.each(oe(B,ee))},he.style=function(B,ee,ie){var ge=arguments.length;if(ge<3){if(typeof B!="string"){for(ie in ge<2&&(ee=""),B)this.each(Se(ie,B[ie],ee));return this}if(ge<2){var _e=this.node();return e(_e).getComputedStyle(_e,null).getPropertyValue(B)}ie=""}return this.each(Se(B,ee,ie))},he.property=function(B,ee){if(arguments.length<2){if(typeof B=="string")return this.node()[B];for(ee in B)this.each(Me(ee,B[ee]));return this}return this.each(Me(B,ee))},he.text=function(B){return arguments.length?this.each(typeof B=="function"?function(){var ee=B.apply(this,arguments);this.textContent=ee??""}:B==null?function(){this.textContent=""}:function(){this.textContent=B}):this.node().textContent},he.html=function(B){return arguments.length?this.each(typeof B=="function"?function(){var ee=B.apply(this,arguments);this.innerHTML=ee??""}:B==null?function(){this.innerHTML=""}:function(){this.innerHTML=B}):this.node().innerHTML},he.append=function(B){return B=be(B),this.select(function(){return this.appendChild(B.apply(this,arguments))})},he.insert=function(B,ee){return B=be(B),ee=de(ee),this.select(function(){return this.insertBefore(B.apply(this,arguments),ee.apply(this,arguments)||null)})},he.remove=function(){return this.each(Ie)},he.data=function(B,ee){var ie,ge,_e=-1,Ce=this.length;if(!arguments.length){for(B=new Array(Ce=(ie=this[0]).length);++_e<Ce;)(ge=ie[_e])&&(B[_e]=ge.__data__);return B}function Ne(Qe,ct){var vt,Ot,Dt,Pt=Qe.length,Vt=ct.length,It=Math.min(Pt,Vt),sn=new Array(Vt),Jt=new Array(Vt),Zt=new Array(Pt);if(ee){var Mn,kn=new y,Yn=new Array(Pt);for(vt=-1;++vt<Pt;)(Ot=Qe[vt])&&(kn.has(Mn=ee.call(Ot,Ot.__data__,vt))?Zt[vt]=Ot:kn.set(Mn,Ot),Yn[vt]=Mn);for(vt=-1;++vt<Vt;)(Ot=kn.get(Mn=ee.call(ct,Dt=ct[vt],vt)))?Ot!==!0&&(sn[vt]=Ot,Ot.__data__=Dt):Jt[vt]=Be(Dt),kn.set(Mn,!0);for(vt=-1;++vt<Pt;)vt in Yn&&kn.get(Yn[vt])!==!0&&(Zt[vt]=Qe[vt])}else{for(vt=-1;++vt<It;)Ot=Qe[vt],Dt=ct[vt],Ot?(Ot.__data__=Dt,sn[vt]=Ot):Jt[vt]=Be(Dt);for(;vt<Vt;++vt)Jt[vt]=Be(ct[vt]);for(;vt<Pt;++vt)Zt[vt]=Qe[vt]}Jt.update=sn,Jt.parentNode=sn.parentNode=Zt.parentNode=Qe.parentNode,Ue.push(Jt),Ge.push(sn),Ye.push(Zt)}var Ue=Pe([]),Ge=ne([]),Ye=ne([]);if(typeof B=="function")for(;++_e<Ce;)Ne(ie=this[_e],B.call(ie,ie.parentNode.__data__,_e));else for(;++_e<Ce;)Ne(ie=this[_e],B);return Ge.enter=function(){return Ue},Ge.exit=function(){return Ye},Ge},he.datum=function(B){return arguments.length?this.property("__data__",B):this.property("__data__")},he.filter=function(B){var ee,ie,ge,_e=[];typeof B!="function"&&(B=ce(B));for(var Ce=0,Ne=this.length;Ce<Ne;Ce++){_e.push(ee=[]),ee.parentNode=(ie=this[Ce]).parentNode;for(var Ue=0,Ge=ie.length;Ue<Ge;Ue++)(ge=ie[Ue])&&B.call(ge,ge.__data__,Ue,Ce)&&ee.push(ge)}return ne(_e)},he.order=function(){for(var B=-1,ee=this.length;++B<ee;)for(var ie,ge=this[B],_e=ge.length-1,Ce=ge[_e];--_e>=0;)(ie=ge[_e])&&(Ce&&Ce!==ie.nextSibling&&Ce.parentNode.insertBefore(ie,Ce),Ce=ie);return this},he.sort=function(B){B=Te.apply(this,arguments);for(var ee=-1,ie=this.length;++ee<ie;)this[ee].sort(B);return this.order()},he.each=function(B){return ye(this,function(ee,ie,ge){B.call(ee,ee.__data__,ie,ge)})},he.call=function(B){var ee=m(arguments);return B.apply(ee[0]=this,ee),this},he.empty=function(){return!this.node()},he.node=function(){for(var B=0,ee=this.length;B<ee;B++)for(var ie=this[B],ge=0,_e=ie.length;ge<_e;ge++){var Ce=ie[ge];if(Ce)return Ce}return null},he.size=function(){var B=0;return ye(this,function(){++B}),B};var Re=[];function ze(B,ee,ie){var ge="__on"+B,_e=B.indexOf("."),Ce=We;_e>0&&(B=B.slice(0,_e));var Ne=He.get(B);function Ue(){var Ge=this[ge];Ge&&(this.removeEventListener(B,Ge,Ge.$),delete this[ge])}return Ne&&(B=Ne,Ce=Je),_e?ee?function(){var Ge=Ce(ee,m(arguments));Ue.call(this),this.addEventListener(B,this[ge]=Ge,Ge.$=ie),Ge._=ee}:Ue:ee?V:function(){var Ge,Ye=new RegExp("^__on([^.]+)"+l.requote(B)+"$");for(var Qe in this)if(Ge=Qe.match(Ye)){var ct=this[Qe];this.removeEventListener(Ge[1],ct,ct.$),delete this[Qe]}}}l.selection.enter=Pe,l.selection.enter.prototype=Re,Re.append=he.append,Re.empty=he.empty,Re.node=he.node,Re.call=he.call,Re.size=he.size,Re.select=function(B){for(var ee,ie,ge,_e,Ce,Ne=[],Ue=-1,Ge=this.length;++Ue<Ge;){ge=(_e=this[Ue]).update,Ne.push(ee=[]),ee.parentNode=_e.parentNode;for(var Ye=-1,Qe=_e.length;++Ye<Qe;)(Ce=_e[Ye])?(ee.push(ge[Ye]=ie=B.call(_e.parentNode,Ce.__data__,Ye,Ue)),ie.__data__=Ce.__data__):ee.push(null)}return ne(Ne)},Re.insert=function(B,ee){var ie,ge,_e;return arguments.length<2&&(ie=this,ee=function(Ce,Ne,Ue){var Ge,Ye=ie[Ue].update,Qe=Ye.length;for(Ue!=_e&&(_e=Ue,ge=0),Ne>=ge&&(ge=Ne+1);!(Ge=Ye[ge])&&++ge<Qe;);return Ge}),he.insert.call(this,B,ee)},l.select=function(B){var ee;return typeof B=="string"?(ee=[re(B,f)]).parentNode=f.documentElement:(ee=[B]).parentNode=o(B),ne([ee])},l.selectAll=function(B){var ee;return typeof B=="string"?(ee=m(ae(B,f))).parentNode=f.documentElement:(ee=m(B)).parentNode=null,ne([ee])},he.on=function(B,ee,ie){var ge=arguments.length;if(ge<3){if(typeof B!="string"){for(ie in ge<2&&(ee=!1),B)this.each(ze(ie,B[ie],ee));return this}if(ge<2)return(ge=this.node()["__on"+B])&&ge._;ie=!1}return this.each(ze(B,ee,ie))};var He=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});function We(B,ee){return function(ie){var ge=l.event;l.event=ie,ee[0]=this.__data__;try{B.apply(this,ee)}finally{l.event=ge}}}function Je(B,ee){var ie=We(B,ee);return function(ge){var _e=this,Ce=ge.relatedTarget;Ce&&(Ce===_e||8&Ce.compareDocumentPosition(_e))||ie.call(_e,ge)}}f&&He.forEach(function(B){"on"+B in f&&He.remove(B)});var lt,et=0;function yt(B){var ee=".dragsuppress-"+ ++et,ie="click"+ee,ge=l.select(e(B)).on("touchmove"+ee,Q).on("dragstart"+ee,Q).on("selectstart"+ee,Q);if(lt==null&&(lt=!("onselectstart"in B)&&N(B.style,"userSelect")),lt){var _e=o(B).style,Ce=_e[lt];_e[lt]="none"}return function(Ne){if(ge.on(ee,null),lt&&(_e[lt]=Ce),Ne){var Ue=function(){ge.on(ie,null)};ge.on(ie,function(){Q(),Ue()},!0),setTimeout(Ue,0)}}}l.mouse=function(B){return xt(B,X())};var _t=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function xt(B,ee){ee.changedTouches&&(ee=ee.changedTouches[0]);var ie=B.ownerSVGElement||B;if(ie.createSVGPoint){var ge=ie.createSVGPoint();if(_t<0){var _e=e(B);if(_e.scrollX||_e.scrollY){var Ce=(ie=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();_t=!(Ce.f||Ce.e),ie.remove()}}return _t?(ge.x=ee.pageX,ge.y=ee.pageY):(ge.x=ee.clientX,ge.y=ee.clientY),[(ge=ge.matrixTransform(B.getScreenCTM().inverse())).x,ge.y]}var Ne=B.getBoundingClientRect();return[ee.clientX-Ne.left-B.clientLeft,ee.clientY-Ne.top-B.clientTop]}function at(){return l.event.changedTouches[0].identifier}l.touch=function(B,ee,ie){if(arguments.length<3&&(ie=ee,ee=X().changedTouches),ee){for(var ge,_e=0,Ce=ee.length;_e<Ce;++_e)if((ge=ee[_e]).identifier===ie)return xt(B,ge)}},l.behavior.drag=function(){var B=q(_e,"drag","dragstart","dragend"),ee=null,ie=Ce(V,l.mouse,e,"mousemove","mouseup"),ge=Ce(at,l.touch,I,"touchmove","touchend");function _e(){this.on("mousedown.drag",ie).on("touchstart.drag",ge)}function Ce(Ne,Ue,Ge,Ye,Qe){return function(){var ct,vt=this,Ot=l.event.target.correspondingElement||l.event.target,Dt=vt.parentNode,Pt=B.of(vt,arguments),Vt=0,It=Ne(),sn=".drag"+(It==null?"":"-"+It),Jt=l.select(Ge(Ot)).on(Ye+sn,function(){var kn,Yn,Zn=Ue(Dt,It);Zn&&(kn=Zn[0]-Mn[0],Yn=Zn[1]-Mn[1],Vt|=kn|Yn,Mn=Zn,Pt({type:"drag",x:Zn[0]+ct[0],y:Zn[1]+ct[1],dx:kn,dy:Yn}))}).on(Qe+sn,function(){Ue(Dt,It)&&(Jt.on(Ye+sn,null).on(Qe+sn,null),Zt(Vt),Pt({type:"dragend"}))}),Zt=yt(Ot),Mn=Ue(Dt,It);ct=ee?[(ct=ee.apply(vt,arguments)).x-Mn[0],ct.y-Mn[1]]:[0,0],Pt({type:"dragstart"})}}return _e.origin=function(Ne){return arguments.length?(ee=Ne,_e):ee},l.rebind(_e,B,"on")},l.touches=function(B,ee){return arguments.length<2&&(ee=X().touches),ee?m(ee).map(function(ie){var ge=xt(B,ie);return ge.identifier=ie.identifier,ge}):[]};var ot=1e-6,At=ot*ot,Ct=Math.PI,zt=2*Ct,St=zt-ot,qe=Ct/2,Xe=Ct/180,Ve=180/Ct;function Ze(B){return B>1?qe:B<-1?-qe:Math.asin(B)}function st(B){return((B=Math.exp(B))+1/B)/2}var nt=Math.SQRT2;l.interpolateZoom=function(B,ee){var ie,ge,_e=B[0],Ce=B[1],Ne=B[2],Ue=ee[0],Ge=ee[1],Ye=ee[2],Qe=Ue-_e,ct=Ge-Ce,vt=Qe*Qe+ct*ct;if(vt<At)ge=Math.log(Ye/Ne)/nt,ie=function(sn){return[_e+sn*Qe,Ce+sn*ct,Ne*Math.exp(nt*sn*ge)]};else{var Ot=Math.sqrt(vt),Dt=(Ye*Ye-Ne*Ne+4*vt)/(2*Ne*2*Ot),Pt=(Ye*Ye-Ne*Ne-4*vt)/(2*Ye*2*Ot),Vt=Math.log(Math.sqrt(Dt*Dt+1)-Dt),It=Math.log(Math.sqrt(Pt*Pt+1)-Pt);ge=(It-Vt)/nt,ie=function(sn){var Jt,Zt=sn*ge,Mn=st(Vt),kn=Ne/(2*Ot)*(Mn*(Jt=nt*Zt+Vt,((Jt=Math.exp(2*Jt))-1)/(Jt+1))-function(Yn){return((Yn=Math.exp(Yn))-1/Yn)/2}(Vt));return[_e+kn*Qe,Ce+kn*ct,Ne*Mn/st(nt*Zt+Vt)]}}return ie.duration=1e3*ge,ie},l.behavior.zoom=function(){var B,ee,ie,ge,_e,Ce,Ne,Ue,Ge,Ye={x:0,y:0,k:1},Qe=[960,500],ct=rt,vt=250,Ot=0,Dt="mousedown.zoom",Pt="mousemove.zoom",Vt="mouseup.zoom",It="touchstart.zoom",sn=q(Jt,"zoomstart","zoom","zoomend");function Jt(Jn){Jn.on(Dt,hr).on(Fe+".zoom",Mr).on("dblclick.zoom",Fr).on(It,yr)}function Zt(Jn){return[(Jn[0]-Ye.x)/Ye.k,(Jn[1]-Ye.y)/Ye.k]}function Mn(Jn){Ye.k=Math.max(ct[0],Math.min(ct[1],Jn))}function kn(Jn,fr){fr=function(xr){return[xr[0]*Ye.k+Ye.x,xr[1]*Ye.k+Ye.y]}(fr),Ye.x+=Jn[0]-fr[0],Ye.y+=Jn[1]-fr[1]}function Yn(Jn,fr,xr,Ar){Jn.__chart__={x:Ye.x,y:Ye.y,k:Ye.k},Mn(Math.pow(2,Ar)),kn(ee=fr,xr),Jn=l.select(Jn),vt>0&&(Jn=Jn.transition().duration(vt)),Jn.call(Jt.event)}function Zn(){Ne&&Ne.domain(Ce.range().map(function(Jn){return(Jn-Ye.x)/Ye.k}).map(Ce.invert)),Ge&&Ge.domain(Ue.range().map(function(Jn){return(Jn-Ye.y)/Ye.k}).map(Ue.invert))}function nr(Jn){Ot++||Jn({type:"zoomstart"})}function sr(Jn){Zn(),Jn({type:"zoom",scale:Ye.k,translate:[Ye.x,Ye.y]})}function dr(Jn){--Ot||(Jn({type:"zoomend"}),ee=null)}function hr(){var Jn=this,fr=sn.of(Jn,arguments),xr=0,Ar=l.select(e(Jn)).on(Pt,function(){xr=1,kn(l.mouse(Jn),zr),sr(fr)}).on(Vt,function(){Ar.on(Pt,null).on(Vt,null),Hr(xr),dr(fr)}),zr=Zt(l.mouse(Jn)),Hr=yt(Jn);ra.call(Jn),nr(fr)}function yr(){var Jn,fr=this,xr=sn.of(fr,arguments),Ar={},zr=0,Hr=".zoom-"+l.event.changedTouches[0].identifier,Kr="touchmove"+Hr,ri="touchend"+Hr,vi=[],mi=l.select(fr),ii=yt(fr);function Pi(){var Qr=l.touches(fr);return Jn=Ye.k,Qr.forEach(function(Xr){Xr.identifier in Ar&&(Ar[Xr.identifier]=Zt(Xr))}),Qr}function $i(){var Qr=l.event.target;l.select(Qr).on(Kr,Fi).on(ri,Wi),vi.push(Qr);for(var Xr=l.event.changedTouches,yi=0,hi=Xr.length;yi<hi;++yi)Ar[Xr[yi].identifier]=null;var _i=Pi(),va=Date.now();if(_i.length===1){if(va-_e<500){var Si=_i[0];Yn(fr,Si,Ar[Si.identifier],Math.floor(Math.log(Ye.k)/Math.LN2)+1),Q()}_e=va}else if(_i.length>1){Si=_i[0];var ai=_i[1],ss=Si[0]-ai[0],Ma=Si[1]-ai[1];zr=ss*ss+Ma*Ma}}function Fi(){var Qr,Xr,yi,hi,_i=l.touches(fr);ra.call(fr);for(var va=0,Si=_i.length;va<Si;++va,hi=null)if(yi=_i[va],hi=Ar[yi.identifier]){if(Xr)break;Qr=yi,Xr=hi}if(hi){var ai=(ai=yi[0]-Qr[0])*ai+(ai=yi[1]-Qr[1])*ai,ss=zr&&Math.sqrt(ai/zr);Qr=[(Qr[0]+yi[0])/2,(Qr[1]+yi[1])/2],Xr=[(Xr[0]+hi[0])/2,(Xr[1]+hi[1])/2],Mn(ss*Jn)}_e=null,kn(Qr,Xr),sr(xr)}function Wi(){if(l.event.touches.length){for(var Qr=l.event.changedTouches,Xr=0,yi=Qr.length;Xr<yi;++Xr)delete Ar[Qr[Xr].identifier];for(var hi in Ar)return void Pi()}l.selectAll(vi).on(Hr,null),mi.on(Dt,hr).on(It,yr),ii(),dr(xr)}$i(),nr(xr),mi.on(Dt,null).on(It,$i)}function Mr(){var Jn=sn.of(this,arguments);ge?clearTimeout(ge):(ra.call(this),B=Zt(ee=ie||l.mouse(this)),nr(Jn)),ge=setTimeout(function(){ge=null,dr(Jn)},50),Q(),Mn(Math.pow(2,.002*De())*Ye.k),kn(ee,B),sr(Jn)}function Fr(){var Jn=l.mouse(this),fr=Math.log(Ye.k)/Math.LN2;Yn(this,Jn,Zt(Jn),l.event.shiftKey?Math.ceil(fr)-1:Math.floor(fr)+1)}return Fe||(Fe="onwheel"in f?(De=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in f?(De=function(){return l.event.wheelDelta},"mousewheel"):(De=function(){return-l.event.detail},"MozMousePixelScroll")),Jt.event=function(Jn){Jn.each(function(){var fr=sn.of(this,arguments),xr=Ye;No?l.select(this).transition().each("start.zoom",function(){Ye=this.__chart__||{x:0,y:0,k:1},nr(fr)}).tween("zoom:zoom",function(){var Ar=Qe[0],zr=Qe[1],Hr=ee?ee[0]:Ar/2,Kr=ee?ee[1]:zr/2,ri=l.interpolateZoom([(Hr-Ye.x)/Ye.k,(Kr-Ye.y)/Ye.k,Ar/Ye.k],[(Hr-xr.x)/xr.k,(Kr-xr.y)/xr.k,Ar/xr.k]);return function(vi){var mi=ri(vi),ii=Ar/mi[2];this.__chart__=Ye={x:Hr-mi[0]*ii,y:Kr-mi[1]*ii,k:ii},sr(fr)}}).each("interrupt.zoom",function(){dr(fr)}).each("end.zoom",function(){dr(fr)}):(this.__chart__=Ye,nr(fr),sr(fr),dr(fr))})},Jt.translate=function(Jn){return arguments.length?(Ye={x:+Jn[0],y:+Jn[1],k:Ye.k},Zn(),Jt):[Ye.x,Ye.y]},Jt.scale=function(Jn){return arguments.length?(Ye={x:Ye.x,y:Ye.y,k:null},Mn(+Jn),Zn(),Jt):Ye.k},Jt.scaleExtent=function(Jn){return arguments.length?(ct=Jn==null?rt:[+Jn[0],+Jn[1]],Jt):ct},Jt.center=function(Jn){return arguments.length?(ie=Jn&&[+Jn[0],+Jn[1]],Jt):ie},Jt.size=function(Jn){return arguments.length?(Qe=Jn&&[+Jn[0],+Jn[1]],Jt):Qe},Jt.duration=function(Jn){return arguments.length?(vt=+Jn,Jt):vt},Jt.x=function(Jn){return arguments.length?(Ne=Jn,Ce=Jn.copy(),Ye={x:0,y:0,k:1},Jt):Ne},Jt.y=function(Jn){return arguments.length?(Ge=Jn,Ue=Jn.copy(),Ye={x:0,y:0,k:1},Jt):Ge},l.rebind(Jt,sn,"on")};var De,Fe,rt=[0,1/0];function tt(){}function gt(B,ee,ie){return this instanceof gt?(this.h=+B,this.s=+ee,void(this.l=+ie)):arguments.length<2?B instanceof gt?new gt(B.h,B.s,B.l):un(""+B,yn,gt):new gt(B,ee,ie)}l.color=tt,tt.prototype.toString=function(){return this.rgb()+""},l.hsl=gt;var dt=gt.prototype=new tt;function mt(B,ee,ie){var ge,_e;function Ce(Ne){return Math.round(255*function(Ue){return Ue>360?Ue-=360:Ue<0&&(Ue+=360),Ue<60?ge+(_e-ge)*Ue/60:Ue<180?_e:Ue<240?ge+(_e-ge)*(240-Ue)/60:ge}(Ne))}return B=isNaN(B)?0:(B%=360)<0?B+360:B,ee=isNaN(ee)||ee<0?0:ee>1?1:ee,ge=2*(ie=ie<0?0:ie>1?1:ie)-(_e=ie<=.5?ie*(1+ee):ie+ee-ie*ee),new Bn(Ce(B+120),Ce(B),Ce(B-120))}function ft(B,ee,ie){return this instanceof ft?(this.h=+B,this.c=+ee,void(this.l=+ie)):arguments.length<2?B instanceof ft?new ft(B.h,B.c,B.l):function(ge,_e,Ce){return ge>0?new ft(Math.atan2(Ce,_e)*Ve,Math.sqrt(_e*_e+Ce*Ce),ge):new ft(NaN,NaN,ge)}(B instanceof pt?B.l:(B=En((B=l.rgb(B)).r,B.g,B.b)).l,B.a,B.b):new ft(B,ee,ie)}dt.brighter=function(B){return B=Math.pow(.7,arguments.length?B:1),new gt(this.h,this.s,this.l/B)},dt.darker=function(B){return B=Math.pow(.7,arguments.length?B:1),new gt(this.h,this.s,B*this.l)},dt.rgb=function(){return mt(this.h,this.s,this.l)},l.hcl=ft;var kt=ft.prototype=new tt;function ht(B,ee,ie){return isNaN(B)&&(B=0),isNaN(ee)&&(ee=0),new pt(ie,Math.cos(B*=Xe)*ee,Math.sin(B)*ee)}function pt(B,ee,ie){return this instanceof pt?(this.l=+B,this.a=+ee,void(this.b=+ie)):arguments.length<2?B instanceof pt?new pt(B.l,B.a,B.b):B instanceof ft?ht(B.h,B.c,B.l):En((B=Bn(B)).r,B.g,B.b):new pt(B,ee,ie)}kt.brighter=function(B){return new ft(this.h,this.c,Math.min(100,this.l+wt*(arguments.length?B:1)))},kt.darker=function(B){return new ft(this.h,this.c,Math.max(0,this.l-wt*(arguments.length?B:1)))},kt.rgb=function(){return ht(this.h,this.c,this.l).rgb()},l.lab=pt;var wt=18,Ft=.95047,Nt=1,Gt=1.08883,an=pt.prototype=new tt;function Wt(B,ee,ie){var ge=(B+16)/116,_e=ge+ee/500,Ce=ge-ie/200;return new Bn(Tn(3.2404542*(_e=Yt(_e)*Ft)-1.5371385*(ge=Yt(ge)*Nt)-.4985314*(Ce=Yt(Ce)*Gt)),Tn(-.969266*_e+1.8760108*ge+.041556*Ce),Tn(.0556434*_e-.2040259*ge+1.0572252*Ce))}function Yt(B){return B>.206893034?B*B*B:(B-.13793103448275862)/7.787037}function en(B){return B>.008856?Math.pow(B,.3333333333333333):7.787037*B+.13793103448275862}function Tn(B){return Math.round(255*(B<=.00304?12.92*B:1.055*Math.pow(B,.4166666666666667)-.055))}function Bn(B,ee,ie){return this instanceof Bn?(this.r=~~B,this.g=~~ee,void(this.b=~~ie)):arguments.length<2?B instanceof Bn?new Bn(B.r,B.g,B.b):un(""+B,Bn,mt):new Bn(B,ee,ie)}function mn(B){return new Bn(B>>16,B>>8&255,255&B)}function Kt(B){return mn(B)+""}an.brighter=function(B){return new pt(Math.min(100,this.l+wt*(arguments.length?B:1)),this.a,this.b)},an.darker=function(B){return new pt(Math.max(0,this.l-wt*(arguments.length?B:1)),this.a,this.b)},an.rgb=function(){return Wt(this.l,this.a,this.b)},l.rgb=Bn;var cn=Bn.prototype=new tt;function tn(B){return B<16?"0"+Math.max(0,B).toString(16):Math.min(255,B).toString(16)}function un(B,ee,ie){var ge,_e,Ce,Ne=0,Ue=0,Ge=0;if(ge=/([a-z]+)\((.*)\)/.exec(B=B.toLowerCase()))switch(_e=ge[2].split(","),ge[1]){case"hsl":return ie(parseFloat(_e[0]),parseFloat(_e[1])/100,parseFloat(_e[2])/100);case"rgb":return ee(Nn(_e[0]),Nn(_e[1]),Nn(_e[2]))}return(Ce=_n.get(B))?ee(Ce.r,Ce.g,Ce.b):(B==null||B.charAt(0)!=="#"||isNaN(Ce=parseInt(B.slice(1),16))||(B.length===4?(Ne=(3840&Ce)>>4,Ne|=Ne>>4,Ue=240&Ce,Ue|=Ue>>4,Ge=15&Ce,Ge|=Ge<<4):B.length===7&&(Ne=(16711680&Ce)>>16,Ue=(65280&Ce)>>8,Ge=255&Ce)),ee(Ne,Ue,Ge))}function yn(B,ee,ie){var ge,_e,Ce=Math.min(B/=255,ee/=255,ie/=255),Ne=Math.max(B,ee,ie),Ue=Ne-Ce,Ge=(Ne+Ce)/2;return Ue?(_e=Ge<.5?Ue/(Ne+Ce):Ue/(2-Ne-Ce),ge=B==Ne?(ee-ie)/Ue+(ee<ie?6:0):ee==Ne?(ie-B)/Ue+2:(B-ee)/Ue+4,ge*=60):(ge=NaN,_e=Ge>0&&Ge<1?0:ge),new gt(ge,_e,Ge)}function En(B,ee,ie){var ge=en((.4124564*(B=Sn(B))+.3575761*(ee=Sn(ee))+.1804375*(ie=Sn(ie)))/Ft),_e=en((.2126729*B+.7151522*ee+.072175*ie)/Nt);return pt(116*_e-16,500*(ge-_e),200*(_e-en((.0193339*B+.119192*ee+.9503041*ie)/Gt)))}function Sn(B){return(B/=255)<=.04045?B/12.92:Math.pow((B+.055)/1.055,2.4)}function Nn(B){var ee=parseFloat(B);return B.charAt(B.length-1)==="%"?Math.round(2.55*ee):ee}cn.brighter=function(B){B=Math.pow(.7,arguments.length?B:1);var ee=this.r,ie=this.g,ge=this.b,_e=30;return ee||ie||ge?(ee&&ee<_e&&(ee=_e),ie&&ie<_e&&(ie=_e),ge&&ge<_e&&(ge=_e),new Bn(Math.min(255,ee/B),Math.min(255,ie/B),Math.min(255,ge/B))):new Bn(_e,_e,_e)},cn.darker=function(B){return new Bn((B=Math.pow(.7,arguments.length?B:1))*this.r,B*this.g,B*this.b)},cn.hsl=function(){return yn(this.r,this.g,this.b)},cn.toString=function(){return"#"+tn(this.r)+tn(this.g)+tn(this.b)};var _n=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Pn(B){return typeof B=="function"?B:function(){return B}}function tr(B){return function(ee,ie,ge){return arguments.length===2&&typeof ie=="function"&&(ge=ie,ie=null),ur(ee,ie,B,ge)}}function ur(B,ee,ie,ge){var _e={},Ce=l.dispatch("beforesend","progress","load","error"),Ne={},Ue=new XMLHttpRequest,Ge=null;function Ye(){var Qe,ct=Ue.status;if(!ct&&function(vt){var Ot=vt.responseType;return Ot&&Ot!=="text"?vt.response:vt.responseText}(Ue)||ct>=200&&ct<300||ct===304){try{Qe=ie.call(_e,Ue)}catch(vt){return void Ce.error.call(_e,vt)}Ce.load.call(_e,Qe)}else Ce.error.call(_e,Ue)}return self.XDomainRequest&&!("withCredentials"in Ue)&&/^(http(s)?:)?\/\//.test(B)&&(Ue=new XDomainRequest),"onload"in Ue?Ue.onload=Ue.onerror=Ye:Ue.onreadystatechange=function(){Ue.readyState>3&&Ye()},Ue.onprogress=function(Qe){var ct=l.event;l.event=Qe;try{Ce.progress.call(_e,Ue)}finally{l.event=ct}},_e.header=function(Qe,ct){return Qe=(Qe+"").toLowerCase(),arguments.length<2?Ne[Qe]:(ct==null?delete Ne[Qe]:Ne[Qe]=ct+"",_e)},_e.mimeType=function(Qe){return arguments.length?(ee=Qe==null?null:Qe+"",_e):ee},_e.responseType=function(Qe){return arguments.length?(Ge=Qe,_e):Ge},_e.response=function(Qe){return ie=Qe,_e},["get","post"].forEach(function(Qe){_e[Qe]=function(){return _e.send.apply(_e,[Qe].concat(m(arguments)))}}),_e.send=function(Qe,ct,vt){if(arguments.length===2&&typeof ct=="function"&&(vt=ct,ct=null),Ue.open(Qe,B,!0),ee==null||"accept"in Ne||(Ne.accept=ee+",*/*"),Ue.setRequestHeader)for(var Ot in Ne)Ue.setRequestHeader(Ot,Ne[Ot]);return ee!=null&&Ue.overrideMimeType&&Ue.overrideMimeType(ee),Ge!=null&&(Ue.responseType=Ge),vt!=null&&_e.on("error",vt).on("load",function(Dt){vt(null,Dt)}),Ce.beforesend.call(_e,Ue),Ue.send(ct??null),_e},_e.abort=function(){return Ue.abort(),_e},l.rebind(_e,Ce,"on"),ge==null?_e:_e.get(function(Qe){return Qe.length===1?function(ct,vt){Qe(ct==null?vt:null)}:Qe}(ge))}_n.forEach(function(B,ee){_n.set(B,mn(ee))}),l.functor=Pn,l.xhr=tr(I),l.dsv=function(B,ee){var ie=new RegExp('["'+B+`
]`),ge=B.charCodeAt(0);function _e(Ye,Qe,ct){arguments.length<3&&(ct=Qe,Qe=null);var vt=ur(Ye,ee,Qe==null?Ce:Ne(Qe),ct);return vt.row=function(Ot){return arguments.length?vt.response((Qe=Ot)==null?Ce:Ne(Ot)):Qe},vt}function Ce(Ye){return _e.parse(Ye.responseText)}function Ne(Ye){return function(Qe){return _e.parse(Qe.responseText,Ye)}}function Ue(Ye){return Ye.map(Ge).join(B)}function Ge(Ye){return ie.test(Ye)?'"'+Ye.replace(/\"/g,'""')+'"':Ye}return _e.parse=function(Ye,Qe){var ct;return _e.parseRows(Ye,function(vt,Ot){if(ct)return ct(vt,Ot-1);var Dt=function(Pt){for(var Vt={},It=vt.length,sn=0;sn<It;++sn)Vt[vt[sn]]=Pt[sn];return Vt};ct=Qe?function(Pt,Vt){return Qe(Dt(Pt),Vt)}:Dt})},_e.parseRows=function(Ye,Qe){var ct,vt,Ot={},Dt={},Pt=[],Vt=Ye.length,It=0,sn=0;function Jt(){if(It>=Vt)return Dt;if(vt)return vt=!1,Ot;var Mn=It;if(Ye.charCodeAt(Mn)===34){for(var kn=Mn;kn++<Vt;)if(Ye.charCodeAt(kn)===34){if(Ye.charCodeAt(kn+1)!==34)break;++kn}return It=kn+2,(Yn=Ye.charCodeAt(kn+1))===13?(vt=!0,Ye.charCodeAt(kn+2)===10&&++It):Yn===10&&(vt=!0),Ye.slice(Mn+1,kn).replace(/""/g,'"')}for(;It<Vt;){var Yn,Zn=1;if((Yn=Ye.charCodeAt(It++))===10)vt=!0;else if(Yn===13)vt=!0,Ye.charCodeAt(It)===10&&(++It,++Zn);else if(Yn!==ge)continue;return Ye.slice(Mn,It-Zn)}return Ye.slice(Mn)}for(;(ct=Jt())!==Dt;){for(var Zt=[];ct!==Ot&&ct!==Dt;)Zt.push(ct),ct=Jt();Qe&&(Zt=Qe(Zt,sn++))==null||Pt.push(Zt)}return Pt},_e.format=function(Ye){if(Array.isArray(Ye[0]))return _e.formatRows(Ye);var Qe=new G,ct=[];return Ye.forEach(function(vt){for(var Ot in vt)Qe.has(Ot)||ct.push(Qe.add(Ot))}),[ct.map(Ge).join(B)].concat(Ye.map(function(vt){return ct.map(function(Ot){return Ge(vt[Ot])}).join(B)})).join(`
`)},_e.formatRows=function(Ye){return Ye.map(Ue).join(`
`)},_e},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var lr,ir,$n,vr,jt=this[N(this,"requestAnimationFrame")]||function(B){setTimeout(B,17)};function rn(B,ee,ie){var ge=arguments.length;ge<2&&(ee=0),ge<3&&(ie=Date.now());var _e={c:B,t:ie+ee,n:null};return ir?ir.n=_e:lr=_e,ir=_e,$n||(vr=clearTimeout(vr),$n=1,jt(fn)),_e}function fn(){var B=xn(),ee=Ln()-B;ee>24?(isFinite(ee)&&(clearTimeout(vr),vr=setTimeout(fn,ee)),$n=0):($n=1,jt(fn))}function xn(){for(var B=Date.now(),ee=lr;ee;)B>=ee.t&&ee.c(B-ee.t)&&(ee.c=null),ee=ee.n;return B}function Ln(){for(var B,ee=lr,ie=1/0;ee;)ee.c?(ee.t<ie&&(ie=ee.t),ee=(B=ee).n):ee=B?B.n=ee.n:lr=ee.n;return ir=B,ie}function Xn(B){return B[0]}function Un(B){return B[1]}function Hn(B){for(var ee,ie,ge,_e=B.length,Ce=[0,1],Ne=2,Ue=2;Ue<_e;Ue++){for(;Ne>1&&(ee=B[Ce[Ne-2]],ie=B[Ce[Ne-1]],ge=B[Ue],(ie[0]-ee[0])*(ge[1]-ee[1])-(ie[1]-ee[1])*(ge[0]-ee[0])<=0);)--Ne;Ce[Ne++]=Ue}return Ce.slice(0,Ne)}function Kn(B,ee){return B[0]-ee[0]||B[1]-ee[1]}l.timer=function(){rn.apply(this,arguments)},l.timer.flush=function(){xn(),Ln()},l.round=function(B,ee){return ee?Math.round(B*(ee=Math.pow(10,ee)))/ee:Math.round(B)},l.geom={},l.geom.hull=function(B){var ee=Xn,ie=Un;if(arguments.length)return ge(B);function ge(_e){if(_e.length<3)return[];var Ce,Ne=Pn(ee),Ue=Pn(ie),Ge=_e.length,Ye=[],Qe=[];for(Ce=0;Ce<Ge;Ce++)Ye.push([+Ne.call(this,_e[Ce],Ce),+Ue.call(this,_e[Ce],Ce),Ce]);for(Ye.sort(Kn),Ce=0;Ce<Ge;Ce++)Qe.push([Ye[Ce][0],-Ye[Ce][1]]);var ct=Hn(Ye),vt=Hn(Qe),Ot=vt[0]===ct[0],Dt=vt[vt.length-1]===ct[ct.length-1],Pt=[];for(Ce=ct.length-1;Ce>=0;--Ce)Pt.push(_e[Ye[ct[Ce]][2]]);for(Ce=+Ot;Ce<vt.length-Dt;++Ce)Pt.push(_e[Ye[vt[Ce]][2]]);return Pt}return ge.x=function(_e){return arguments.length?(ee=_e,ge):ee},ge.y=function(_e){return arguments.length?(ie=_e,ge):ie},ge},l.geom.polygon=function(B){return J(B,qt),B};var qt=l.geom.polygon.prototype=[];function On(B,ee,ie){return(ie[0]-ee[0])*(B[1]-ee[1])<(ie[1]-ee[1])*(B[0]-ee[0])}function Et(B,ee,ie,ge){var _e=B[0],Ce=ie[0],Ne=ee[0]-_e,Ue=ge[0]-Ce,Ge=B[1],Ye=ie[1],Qe=ee[1]-Ge,ct=ge[1]-Ye,vt=(Ue*(Ge-Ye)-ct*(_e-Ce))/(ct*Ne-Ue*Qe);return[_e+vt*Ne,Ge+vt*Qe]}function Xt(B){var ee=B[0],ie=B[B.length-1];return!(ee[0]-ie[0]||ee[1]-ie[1])}qt.area=function(){for(var B,ee=-1,ie=this.length,ge=this[ie-1],_e=0;++ee<ie;)B=ge,ge=this[ee],_e+=B[1]*ge[0]-B[0]*ge[1];return .5*_e},qt.centroid=function(B){var ee,ie,ge=-1,_e=this.length,Ce=0,Ne=0,Ue=this[_e-1];for(arguments.length||(B=-1/(6*this.area()));++ge<_e;)ee=Ue,Ue=this[ge],ie=ee[0]*Ue[1]-Ue[0]*ee[1],Ce+=(ee[0]+Ue[0])*ie,Ne+=(ee[1]+Ue[1])*ie;return[Ce*B,Ne*B]},qt.clip=function(B){for(var ee,ie,ge,_e,Ce,Ne,Ue=Xt(B),Ge=-1,Ye=this.length-Xt(this),Qe=this[Ye-1];++Ge<Ye;){for(ee=B.slice(),B.length=0,_e=this[Ge],Ce=ee[(ge=ee.length-Ue)-1],ie=-1;++ie<ge;)On(Ne=ee[ie],Qe,_e)?(On(Ce,Qe,_e)||B.push(Et(Ce,Ne,Qe,_e)),B.push(Ne)):On(Ce,Qe,_e)&&B.push(Et(Ce,Ne,Qe,_e)),Ce=Ne;Ue&&B.push(B[0]),Qe=_e}return B};var nn,An,Cn,Rn,gn,$t=[],Qt=[];function hn(){mr(this),this.edge=this.site=this.circle=null}function vn(B){var ee=$t.pop()||new hn;return ee.site=B,ee}function Fn(B){ln(B),Cn.remove(B),$t.push(B),mr(B)}function In(B){var ee=B.circle,ie=ee.x,ge=ee.cy,_e={x:ie,y:ge},Ce=B.P,Ne=B.N,Ue=[B];Fn(B);for(var Ge=Ce;Ge.circle&&b(ie-Ge.circle.x)<ot&&b(ge-Ge.circle.cy)<ot;)Ce=Ge.P,Ue.unshift(Ge),Fn(Ge),Ge=Ce;Ue.unshift(Ge),ln(Ge);for(var Ye=Ne;Ye.circle&&b(ie-Ye.circle.x)<ot&&b(ge-Ye.circle.cy)<ot;)Ne=Ye.N,Ue.push(Ye),Fn(Ye),Ye=Ne;Ue.push(Ye),ln(Ye);var Qe,ct=Ue.length;for(Qe=1;Qe<ct;++Qe)Ye=Ue[Qe],Ge=Ue[Qe-1],qn(Ye.edge,Ge.site,Ye.site,_e);Ge=Ue[0],(Ye=Ue[ct-1]).edge=bn(Ge.site,Ye.site,null,_e),Bt(Ge),Bt(Ye)}function Qn(B){for(var ee,ie,ge,_e,Ce=B.x,Ne=B.y,Ue=Cn._;Ue;)if((ge=Wn(Ue,Ne)-Ce)>ot)Ue=Ue.L;else{if(!((_e=Ce-Ke(Ue,Ne))>ot)){ge>-ot?(ee=Ue.P,ie=Ue):_e>-ot?(ee=Ue,ie=Ue.N):ee=ie=Ue;break}if(!Ue.R){ee=Ue;break}Ue=Ue.R}var Ge=vn(B);if(Cn.insert(ee,Ge),ee||ie){if(ee===ie)return ln(ee),ie=vn(ee.site),Cn.insert(Ge,ie),Ge.edge=ie.edge=bn(ee.site,Ge.site),Bt(ee),void Bt(ie);if(ie){ln(ee),ln(ie);var Ye=ee.site,Qe=Ye.x,ct=Ye.y,vt=B.x-Qe,Ot=B.y-ct,Dt=ie.site,Pt=Dt.x-Qe,Vt=Dt.y-ct,It=2*(vt*Vt-Ot*Pt),sn=vt*vt+Ot*Ot,Jt=Pt*Pt+Vt*Vt,Zt={x:(Vt*sn-Ot*Jt)/It+Qe,y:(vt*Jt-Pt*sn)/It+ct};qn(ie.edge,Ye,Dt,Zt),Ge.edge=bn(Ye,B,null,Zt),ie.edge=bn(B,Dt,null,Zt),Bt(ee),Bt(ie)}else Ge.edge=bn(ee.site,Ge.site)}}function Wn(B,ee){var ie=B.site,ge=ie.x,_e=ie.y,Ce=_e-ee;if(!Ce)return ge;var Ne=B.P;if(!Ne)return-1/0;var Ue=(ie=Ne.site).x,Ge=ie.y,Ye=Ge-ee;if(!Ye)return Ue;var Qe=Ue-ge,ct=1/Ce-1/Ye,vt=Qe/Ye;return ct?(-vt+Math.sqrt(vt*vt-2*ct*(Qe*Qe/(-2*Ye)-Ge+Ye/2+_e-Ce/2)))/ct+ge:(ge+Ue)/2}function Ke(B,ee){var ie=B.N;if(ie)return Wn(ie,ee);var ge=B.site;return ge.y===ee?ge.x:1/0}function it(B){this.site=B,this.edges=[]}function Mt(B,ee){return ee.angle-B.angle}function Lt(){mr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Bt(B){var ee=B.P,ie=B.N;if(ee&&ie){var ge=ee.site,_e=B.site,Ce=ie.site;if(ge!==Ce){var Ne=_e.x,Ue=_e.y,Ge=ge.x-Ne,Ye=ge.y-Ue,Qe=Ce.x-Ne,ct=2*(Ge*(Vt=Ce.y-Ue)-Ye*Qe);if(!(ct>=-At)){var vt=Ge*Ge+Ye*Ye,Ot=Qe*Qe+Vt*Vt,Dt=(Vt*vt-Ye*Ot)/ct,Pt=(Ge*Ot-Qe*vt)/ct,Vt=Pt+Ue,It=Qt.pop()||new Lt;It.arc=B,It.site=_e,It.x=Dt+Ne,It.y=Vt+Math.sqrt(Dt*Dt+Pt*Pt),It.cy=Vt,B.circle=It;for(var sn=null,Jt=gn._;Jt;)if(It.y<Jt.y||It.y===Jt.y&&It.x<=Jt.x){if(!Jt.L){sn=Jt.P;break}Jt=Jt.L}else{if(!Jt.R){sn=Jt;break}Jt=Jt.R}gn.insert(sn,It),sn||(Rn=It)}}}}function ln(B){var ee=B.circle;ee&&(ee.P||(Rn=ee.N),gn.remove(ee),Qt.push(ee),mr(ee),B.circle=null)}function wn(B,ee){var ie=B.b;if(ie)return!0;var ge,_e,Ce=B.a,Ne=ee[0][0],Ue=ee[1][0],Ge=ee[0][1],Ye=ee[1][1],Qe=B.l,ct=B.r,vt=Qe.x,Ot=Qe.y,Dt=ct.x,Pt=ct.y,Vt=(vt+Dt)/2,It=(Ot+Pt)/2;if(Pt===Ot){if(Vt<Ne||Vt>=Ue)return;if(vt>Dt){if(Ce){if(Ce.y>=Ye)return}else Ce={x:Vt,y:Ge};ie={x:Vt,y:Ye}}else{if(Ce){if(Ce.y<Ge)return}else Ce={x:Vt,y:Ye};ie={x:Vt,y:Ge}}}else if(_e=It-(ge=(vt-Dt)/(Pt-Ot))*Vt,ge<-1||ge>1)if(vt>Dt){if(Ce){if(Ce.y>=Ye)return}else Ce={x:(Ge-_e)/ge,y:Ge};ie={x:(Ye-_e)/ge,y:Ye}}else{if(Ce){if(Ce.y<Ge)return}else Ce={x:(Ye-_e)/ge,y:Ye};ie={x:(Ge-_e)/ge,y:Ge}}else if(Ot<Pt){if(Ce){if(Ce.x>=Ue)return}else Ce={x:Ne,y:ge*Ne+_e};ie={x:Ue,y:ge*Ue+_e}}else{if(Ce){if(Ce.x<Ne)return}else Ce={x:Ue,y:ge*Ue+_e};ie={x:Ne,y:ge*Ne+_e}}return B.a=Ce,B.b=ie,!0}function jn(B,ee){this.l=B,this.r=ee,this.a=this.b=null}function bn(B,ee,ie,ge){var _e=new jn(B,ee);return nn.push(_e),ie&&qn(_e,B,ee,ie),ge&&qn(_e,ee,B,ge),An[B.i].edges.push(new or(_e,B,ee)),An[ee.i].edges.push(new or(_e,ee,B)),_e}function qn(B,ee,ie,ge){B.a||B.b?B.l===ie?B.b=ge:B.a=ge:(B.a=ge,B.l=ee,B.r=ie)}function or(B,ee,ie){var ge=B.a,_e=B.b;this.edge=B,this.site=ee,this.angle=ie?Math.atan2(ie.y-ee.y,ie.x-ee.x):B.l===ee?Math.atan2(_e.x-ge.x,ge.y-_e.y):Math.atan2(ge.x-_e.x,_e.y-ge.y)}function ar(){this._=null}function mr(B){B.U=B.C=B.L=B.R=B.P=B.N=null}function kr(B,ee){var ie=ee,ge=ee.R,_e=ie.U;_e?_e.L===ie?_e.L=ge:_e.R=ge:B._=ge,ge.U=_e,ie.U=ge,ie.R=ge.L,ie.R&&(ie.R.U=ie),ge.L=ie}function Cr(B,ee){var ie=ee,ge=ee.L,_e=ie.U;_e?_e.L===ie?_e.L=ge:_e.R=ge:B._=ge,ge.U=_e,ie.U=ge,ie.L=ge.R,ie.L&&(ie.L.U=ie),ge.R=ie}function Br(B){for(;B.L;)B=B.L;return B}function Wr(B,ee){var ie,ge,_e,Ce=B.sort(fi).pop();for(nn=[],An=new Array(B.length),Cn=new ar,gn=new ar;;)if(_e=Rn,Ce&&(!_e||Ce.y<_e.y||Ce.y===_e.y&&Ce.x<_e.x))Ce.x===ie&&Ce.y===ge||(An[Ce.i]=new it(Ce),Qn(Ce),ie=Ce.x,ge=Ce.y),Ce=B.pop();else{if(!_e)break;In(_e.arc)}ee&&(function(Ue){for(var Ge,Ye,Qe,ct,vt,Ot=nn,Dt=(Ye=Ue[0][0],Qe=Ue[0][1],ct=Ue[1][0],vt=Ue[1][1],function(Vt){var It,sn=Vt.a,Jt=Vt.b,Zt=sn.x,Mn=sn.y,kn=0,Yn=1,Zn=Jt.x-Zt,nr=Jt.y-Mn;if(It=Ye-Zt,Zn||!(It>0)){if(It/=Zn,Zn<0){if(It<kn)return;It<Yn&&(Yn=It)}else if(Zn>0){if(It>Yn)return;It>kn&&(kn=It)}if(It=ct-Zt,Zn||!(It<0)){if(It/=Zn,Zn<0){if(It>Yn)return;It>kn&&(kn=It)}else if(Zn>0){if(It<kn)return;It<Yn&&(Yn=It)}if(It=Qe-Mn,nr||!(It>0)){if(It/=nr,nr<0){if(It<kn)return;It<Yn&&(Yn=It)}else if(nr>0){if(It>Yn)return;It>kn&&(kn=It)}if(It=vt-Mn,nr||!(It<0)){if(It/=nr,nr<0){if(It>Yn)return;It>kn&&(kn=It)}else if(nr>0){if(It<kn)return;It<Yn&&(Yn=It)}return kn>0&&(Vt.a={x:Zt+kn*Zn,y:Mn+kn*nr}),Yn<1&&(Vt.b={x:Zt+Yn*Zn,y:Mn+Yn*nr}),Vt}}}}}),Pt=Ot.length;Pt--;)(!wn(Ge=Ot[Pt],Ue)||!Dt(Ge)||b(Ge.a.x-Ge.b.x)<ot&&b(Ge.a.y-Ge.b.y)<ot)&&(Ge.a=Ge.b=null,Ot.splice(Pt,1))}(ee),function(Ue){for(var Ge,Ye,Qe,ct,vt,Ot,Dt,Pt,Vt,It,sn=Ue[0][0],Jt=Ue[1][0],Zt=Ue[0][1],Mn=Ue[1][1],kn=An,Yn=kn.length;Yn--;)if((vt=kn[Yn])&&vt.prepare())for(Pt=(Dt=vt.edges).length,Ot=0;Ot<Pt;)Qe=(It=Dt[Ot].end()).x,ct=It.y,Ge=(Vt=Dt[++Ot%Pt].start()).x,Ye=Vt.y,(b(Qe-Ge)>ot||b(ct-Ye)>ot)&&(Dt.splice(Ot,0,new or((Zn=vt.site,nr=It,sr=b(Qe-sn)<ot&&Mn-ct>ot?{x:sn,y:b(Ge-sn)<ot?Ye:Mn}:b(ct-Mn)<ot&&Jt-Qe>ot?{x:b(Ye-Mn)<ot?Ge:Jt,y:Mn}:b(Qe-Jt)<ot&&ct-Zt>ot?{x:Jt,y:b(Ge-Jt)<ot?Ye:Zt}:b(ct-Zt)<ot&&Qe-sn>ot?{x:b(Ye-Zt)<ot?Ge:sn,y:Zt}:null,dr=void 0,(dr=new jn(Zn,null)).a=nr,dr.b=sr,nn.push(dr),dr),vt.site,null)),++Pt);var Zn,nr,sr,dr}(ee));var Ne={cells:An,edges:nn};return Cn=gn=nn=An=null,Ne}function fi(B,ee){return ee.y-B.y||ee.x-B.x}it.prototype.prepare=function(){for(var B,ee=this.edges,ie=ee.length;ie--;)(B=ee[ie].edge).b&&B.a||ee.splice(ie,1);return ee.sort(Mt),ee.length},or.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ar.prototype={insert:function(B,ee){var ie,ge,_e;if(B){if(ee.P=B,ee.N=B.N,B.N&&(B.N.P=ee),B.N=ee,B.R){for(B=B.R;B.L;)B=B.L;B.L=ee}else B.R=ee;ie=B}else this._?(B=Br(this._),ee.P=null,ee.N=B,B.P=B.L=ee,ie=B):(ee.P=ee.N=null,this._=ee,ie=null);for(ee.L=ee.R=null,ee.U=ie,ee.C=!0,B=ee;ie&&ie.C;)ie===(ge=ie.U).L?(_e=ge.R)&&_e.C?(ie.C=_e.C=!1,ge.C=!0,B=ge):(B===ie.R&&(kr(this,ie),ie=(B=ie).U),ie.C=!1,ge.C=!0,Cr(this,ge)):(_e=ge.L)&&_e.C?(ie.C=_e.C=!1,ge.C=!0,B=ge):(B===ie.L&&(Cr(this,ie),ie=(B=ie).U),ie.C=!1,ge.C=!0,kr(this,ge)),ie=B.U;this._.C=!1},remove:function(B){B.N&&(B.N.P=B.P),B.P&&(B.P.N=B.N),B.N=B.P=null;var ee,ie,ge,_e=B.U,Ce=B.L,Ne=B.R;if(ie=Ce?Ne?Br(Ne):Ce:Ne,_e?_e.L===B?_e.L=ie:_e.R=ie:this._=ie,Ce&&Ne?(ge=ie.C,ie.C=B.C,ie.L=Ce,Ce.U=ie,ie!==Ne?(_e=ie.U,ie.U=B.U,B=ie.R,_e.L=B,ie.R=Ne,Ne.U=ie):(ie.U=_e,_e=ie,B=ie.R)):(ge=B.C,B=ie),B&&(B.U=_e),!ge)if(B&&B.C)B.C=!1;else{do{if(B===this._)break;if(B===_e.L){if((ee=_e.R).C&&(ee.C=!1,_e.C=!0,kr(this,_e),ee=_e.R),ee.L&&ee.L.C||ee.R&&ee.R.C){ee.R&&ee.R.C||(ee.L.C=!1,ee.C=!0,Cr(this,ee),ee=_e.R),ee.C=_e.C,_e.C=ee.R.C=!1,kr(this,_e),B=this._;break}}else if((ee=_e.L).C&&(ee.C=!1,_e.C=!0,Cr(this,_e),ee=_e.L),ee.L&&ee.L.C||ee.R&&ee.R.C){ee.L&&ee.L.C||(ee.R.C=!1,ee.C=!0,kr(this,ee),ee=_e.L),ee.C=_e.C,_e.C=ee.L.C=!1,Cr(this,_e),B=this._;break}ee.C=!0,B=_e,_e=_e.U}while(!B.C);B&&(B.C=!1)}}},l.geom.voronoi=function(B){var ee=Xn,ie=Un,ge=ee,_e=ie,Ce=pi;if(B)return Ne(B);function Ne(Ge){var Ye=new Array(Ge.length),Qe=Ce[0][0],ct=Ce[0][1],vt=Ce[1][0],Ot=Ce[1][1];return Wr(Ue(Ge),Ce).cells.forEach(function(Dt,Pt){var Vt=Dt.edges,It=Dt.site;(Ye[Pt]=Vt.length?Vt.map(function(sn){var Jt=sn.start();return[Jt.x,Jt.y]}):It.x>=Qe&&It.x<=vt&&It.y>=ct&&It.y<=Ot?[[Qe,Ot],[vt,Ot],[vt,ct],[Qe,ct]]:[]).point=Ge[Pt]}),Ye}function Ue(Ge){return Ge.map(function(Ye,Qe){return{x:Math.round(ge(Ye,Qe)/ot)*ot,y:Math.round(_e(Ye,Qe)/ot)*ot,i:Qe}})}return Ne.links=function(Ge){return Wr(Ue(Ge)).edges.filter(function(Ye){return Ye.l&&Ye.r}).map(function(Ye){return{source:Ge[Ye.l.i],target:Ge[Ye.r.i]}})},Ne.triangles=function(Ge){var Ye=[];return Wr(Ue(Ge)).cells.forEach(function(Qe,ct){for(var vt,Ot,Dt,Pt,Vt=Qe.site,It=Qe.edges.sort(Mt),sn=-1,Jt=It.length,Zt=It[Jt-1].edge,Mn=Zt.l===Vt?Zt.r:Zt.l;++sn<Jt;)vt=Mn,Mn=(Zt=It[sn].edge).l===Vt?Zt.r:Zt.l,ct<vt.i&&ct<Mn.i&&(Dt=vt,Pt=Mn,((Ot=Vt).x-Pt.x)*(Dt.y-Ot.y)-(Ot.x-Dt.x)*(Pt.y-Ot.y)<0)&&Ye.push([Ge[ct],Ge[vt.i],Ge[Mn.i]])}),Ye},Ne.x=function(Ge){return arguments.length?(ge=Pn(ee=Ge),Ne):ee},Ne.y=function(Ge){return arguments.length?(_e=Pn(ie=Ge),Ne):ie},Ne.clipExtent=function(Ge){return arguments.length?(Ce=Ge??pi,Ne):Ce===pi?null:Ce},Ne.size=function(Ge){return arguments.length?Ne.clipExtent(Ge&&[[0,0],Ge]):Ce===pi?null:Ce&&Ce[1]},Ne};var pi=[[-1e6,-1e6],[1e6,1e6]];function bi(B){return B.x}function Da(B){return B.y}function Go(B,ee,ie,ge,_e,Ce){if(!B(ee,ie,ge,_e,Ce)){var Ne=.5*(ie+_e),Ue=.5*(ge+Ce),Ge=ee.nodes;Ge[0]&&Go(B,Ge[0],ie,ge,Ne,Ue),Ge[1]&&Go(B,Ge[1],Ne,ge,_e,Ue),Ge[2]&&Go(B,Ge[2],ie,Ue,Ne,Ce),Ge[3]&&Go(B,Ge[3],Ne,Ue,_e,Ce)}}function _s(B,ee){B=l.rgb(B),ee=l.rgb(ee);var ie=B.r,ge=B.g,_e=B.b,Ce=ee.r-ie,Ne=ee.g-ge,Ue=ee.b-_e;return function(Ge){return"#"+tn(Math.round(ie+Ce*Ge))+tn(Math.round(ge+Ne*Ge))+tn(Math.round(_e+Ue*Ge))}}function Ks(B,ee){var ie,ge={},_e={};for(ie in B)ie in ee?ge[ie]=eo(B[ie],ee[ie]):_e[ie]=B[ie];for(ie in ee)ie in B||(_e[ie]=ee[ie]);return function(Ce){for(ie in ge)_e[ie]=ge[ie](Ce);return _e}}function Qa(B,ee){return B=+B,ee=+ee,function(ie){return B*(1-ie)+ee*ie}}function cl(B,ee){var ie,ge,_e,Ce=Wo.lastIndex=qo.lastIndex=0,Ne=-1,Ue=[],Ge=[];for(B+="",ee+="";(ie=Wo.exec(B))&&(ge=qo.exec(ee));)(_e=ge.index)>Ce&&(_e=ee.slice(Ce,_e),Ue[Ne]?Ue[Ne]+=_e:Ue[++Ne]=_e),(ie=ie[0])===(ge=ge[0])?Ue[Ne]?Ue[Ne]+=ge:Ue[++Ne]=ge:(Ue[++Ne]=null,Ge.push({i:Ne,x:Qa(ie,ge)})),Ce=qo.lastIndex;return Ce<ee.length&&(_e=ee.slice(Ce),Ue[Ne]?Ue[Ne]+=_e:Ue[++Ne]=_e),Ue.length<2?Ge[0]?(ee=Ge[0].x,function(Ye){return ee(Ye)+""}):function(){return ee}:(ee=Ge.length,function(Ye){for(var Qe,ct=0;ct<ee;++ct)Ue[(Qe=Ge[ct]).i]=Qe.x(Ye);return Ue.join("")})}l.geom.delaunay=function(B){return l.geom.voronoi().triangles(B)},l.geom.quadtree=function(B,ee,ie,ge,_e){var Ce,Ne=Xn,Ue=Un;if(Ce=arguments.length)return Ne=bi,Ue=Da,Ce===3&&(_e=ie,ge=ee,ie=ee=0),Ge(B);function Ge(Ye){var Qe,ct,vt,Ot,Dt,Pt,Vt,It,sn,Jt=Pn(Ne),Zt=Pn(Ue);if(ee!=null)Pt=ee,Vt=ie,It=ge,sn=_e;else if(It=sn=-(Pt=Vt=1/0),ct=[],vt=[],Dt=Ye.length,Ce)for(Ot=0;Ot<Dt;++Ot)(Qe=Ye[Ot]).x<Pt&&(Pt=Qe.x),Qe.y<Vt&&(Vt=Qe.y),Qe.x>It&&(It=Qe.x),Qe.y>sn&&(sn=Qe.y),ct.push(Qe.x),vt.push(Qe.y);else for(Ot=0;Ot<Dt;++Ot){var Mn=+Jt(Qe=Ye[Ot],Ot),kn=+Zt(Qe,Ot);Mn<Pt&&(Pt=Mn),kn<Vt&&(Vt=kn),Mn>It&&(It=Mn),kn>sn&&(sn=kn),ct.push(Mn),vt.push(kn)}var Yn=It-Pt,Zn=sn-Vt;function nr(hr,yr,Mr,Fr,Jn,fr,xr,Ar){if(!isNaN(Mr)&&!isNaN(Fr))if(hr.leaf){var zr=hr.x,Hr=hr.y;if(zr!=null)if(b(zr-Mr)+b(Hr-Fr)<.01)sr(hr,yr,Mr,Fr,Jn,fr,xr,Ar);else{var Kr=hr.point;hr.x=hr.y=hr.point=null,sr(hr,Kr,zr,Hr,Jn,fr,xr,Ar),sr(hr,yr,Mr,Fr,Jn,fr,xr,Ar)}else hr.x=Mr,hr.y=Fr,hr.point=yr}else sr(hr,yr,Mr,Fr,Jn,fr,xr,Ar)}function sr(hr,yr,Mr,Fr,Jn,fr,xr,Ar){var zr=.5*(Jn+xr),Hr=.5*(fr+Ar),Kr=Mr>=zr,ri=Fr>=Hr,vi=ri<<1|Kr;hr.leaf=!1,Kr?Jn=zr:xr=zr,ri?fr=Hr:Ar=Hr,nr(hr=hr.nodes[vi]||(hr.nodes[vi]={leaf:!0,nodes:[],point:null,x:null,y:null}),yr,Mr,Fr,Jn,fr,xr,Ar)}Yn>Zn?sn=Vt+Yn:It=Pt+Zn;var dr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(hr){nr(dr,hr,+Jt(hr,++Ot),+Zt(hr,Ot),Pt,Vt,It,sn)}};if(dr.visit=function(hr){Go(hr,dr,Pt,Vt,It,sn)},dr.find=function(hr){return function(yr,Mr,Fr,Jn,fr,xr,Ar){var zr,Hr=1/0;return function Kr(ri,vi,mi,ii,Pi){if(!(vi>xr||mi>Ar||ii<Jn||Pi<fr)){if($i=ri.point){var $i,Fi=Mr-ri.x,Wi=Fr-ri.y,Qr=Fi*Fi+Wi*Wi;if(Qr<Hr){var Xr=Math.sqrt(Hr=Qr);Jn=Mr-Xr,fr=Fr-Xr,xr=Mr+Xr,Ar=Fr+Xr,zr=$i}}for(var yi=ri.nodes,hi=.5*(vi+ii),_i=.5*(mi+Pi),va=(Fr>=_i)<<1|Mr>=hi,Si=va+4;va<Si;++va)if(ri=yi[3&va])switch(3&va){case 0:Kr(ri,vi,mi,hi,_i);break;case 1:Kr(ri,hi,mi,ii,_i);break;case 2:Kr(ri,vi,_i,hi,Pi);break;case 3:Kr(ri,hi,_i,ii,Pi)}}}(yr,Jn,fr,xr,Ar),zr}(dr,hr[0],hr[1],Pt,Vt,It,sn)},Ot=-1,ee==null){for(;++Ot<Dt;)nr(dr,Ye[Ot],ct[Ot],vt[Ot],Pt,Vt,It,sn);--Ot}else Ye.forEach(dr.add);return ct=vt=Ye=Qe=null,dr}return Ge.x=function(Ye){return arguments.length?(Ne=Ye,Ge):Ne},Ge.y=function(Ye){return arguments.length?(Ue=Ye,Ge):Ue},Ge.extent=function(Ye){return arguments.length?(Ye==null?ee=ie=ge=_e=null:(ee=+Ye[0][0],ie=+Ye[0][1],ge=+Ye[1][0],_e=+Ye[1][1]),Ge):ee==null?null:[[ee,ie],[ge,_e]]},Ge.size=function(Ye){return arguments.length?(Ye==null?ee=ie=ge=_e=null:(ee=ie=0,ge=+Ye[0],_e=+Ye[1]),Ge):ee==null?null:[ge-ee,_e-ie]},Ge},l.interpolateRgb=_s,l.interpolateObject=Ks,l.interpolateNumber=Qa,l.interpolateString=cl;var Wo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qo=new RegExp(Wo.source,"g");function eo(B,ee){for(var ie,ge=l.interpolators.length;--ge>=0&&!(ie=l.interpolators[ge](B,ee)););return ie}function Ri(B,ee){var ie,ge=[],_e=[],Ce=B.length,Ne=ee.length,Ue=Math.min(B.length,ee.length);for(ie=0;ie<Ue;++ie)ge.push(eo(B[ie],ee[ie]));for(;ie<Ce;++ie)_e[ie]=B[ie];for(;ie<Ne;++ie)_e[ie]=ee[ie];return function(Ge){for(ie=0;ie<Ue;++ie)_e[ie]=ge[ie](Ge);return _e}}l.interpolate=eo,l.interpolators=[function(B,ee){var ie=typeof ee;return(ie==="string"?_n.has(ee.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(ee)?_s:cl:ee instanceof tt?_s:Array.isArray(ee)?Ri:ie==="object"&&isNaN(ee)?Ks:Qa)(B,ee)}],l.interpolateArray=Ri;var ws=function(){return I},ei=l.map({linear:ws,poly:function(B){return function(ee){return Math.pow(ee,B)}},quad:function(){return Ha},cubic:function(){return Ao},sin:function(){return fo},exp:function(){return Fs},circle:function(){return fl},elastic:function(B,ee){var ie;return arguments.length<2&&(ee=.45),arguments.length?ie=ee/zt*Math.asin(1/B):(B=1,ie=ee/4),function(ge){return 1+B*Math.pow(2,-10*ge)*Math.sin((ge-ie)*zt/ee)}},back:function(B){return B||(B=1.70158),function(ee){return ee*ee*((B+1)*ee-B)}},bounce:function(){return ko}}),to=l.map({in:I,out:Ca,"in-out":uo,"out-in":function(B){return uo(Ca(B))}});function Ca(B){return function(ee){return 1-B(1-ee)}}function uo(B){return function(ee){return .5*(ee<.5?B(2*ee):2-B(2-2*ee))}}function Ha(B){return B*B}function Ao(B){return B*B*B}function co(B){if(B<=0)return 0;if(B>=1)return 1;var ee=B*B,ie=ee*B;return 4*(B<.5?ie:3*(B-ee)+ie-.75)}function fo(B){return 1-Math.cos(B*qe)}function Fs(B){return Math.pow(2,10*(B-1))}function fl(B){return 1-Math.sqrt(1-B*B)}function ko(B){return B<.36363636363636365?7.5625*B*B:B<.7272727272727273?7.5625*(B-=.5454545454545454)*B+.75:B<.9090909090909091?7.5625*(B-=.8181818181818182)*B+.9375:7.5625*(B-=.9545454545454546)*B+.984375}function hl(B,ee){return ee-=B,function(ie){return Math.round(B+ee*ie)}}function Js(B){var ee,ie,ge,_e=[B.a,B.b],Ce=[B.c,B.d],Ne=$s(_e),Ue=pl(_e,Ce),Ge=$s(((ee=Ce)[0]+=(ge=-Ue)*(ie=_e)[0],ee[1]+=ge*ie[1],ee))||0;_e[0]*Ce[1]<Ce[0]*_e[1]&&(_e[0]*=-1,_e[1]*=-1,Ne*=-1,Ue*=-1),this.rotate=(Ne?Math.atan2(_e[1],_e[0]):Math.atan2(-Ce[0],Ce[1]))*Ve,this.translate=[B.e,B.f],this.scale=[Ne,Ge],this.skew=Ge?Math.atan2(Ue,Ge)*Ve:0}function pl(B,ee){return B[0]*ee[0]+B[1]*ee[1]}function $s(B){var ee=Math.sqrt(pl(B,B));return ee&&(B[0]/=ee,B[1]/=ee),ee}l.ease=function(B){var ee,ie=B.indexOf("-"),ge=ie>=0?B.slice(0,ie):B,_e=ie>=0?B.slice(ie+1):"in";return ge=ei.get(ge)||ws,_e=to.get(_e)||I,ee=_e(ge.apply(null,_.call(arguments,1))),function(Ce){return Ce<=0?0:Ce>=1?1:ee(Ce)}},l.interpolateHcl=function(B,ee){B=l.hcl(B),ee=l.hcl(ee);var ie=B.h,ge=B.c,_e=B.l,Ce=ee.h-ie,Ne=ee.c-ge,Ue=ee.l-_e;return isNaN(Ne)&&(Ne=0,ge=isNaN(ge)?ee.c:ge),isNaN(Ce)?(Ce=0,ie=isNaN(ie)?ee.h:ie):Ce>180?Ce-=360:Ce<-180&&(Ce+=360),function(Ge){return ht(ie+Ce*Ge,ge+Ne*Ge,_e+Ue*Ge)+""}},l.interpolateHsl=function(B,ee){B=l.hsl(B),ee=l.hsl(ee);var ie=B.h,ge=B.s,_e=B.l,Ce=ee.h-ie,Ne=ee.s-ge,Ue=ee.l-_e;return isNaN(Ne)&&(Ne=0,ge=isNaN(ge)?ee.s:ge),isNaN(Ce)?(Ce=0,ie=isNaN(ie)?ee.h:ie):Ce>180?Ce-=360:Ce<-180&&(Ce+=360),function(Ge){return mt(ie+Ce*Ge,ge+Ne*Ge,_e+Ue*Ge)+""}},l.interpolateLab=function(B,ee){B=l.lab(B),ee=l.lab(ee);var ie=B.l,ge=B.a,_e=B.b,Ce=ee.l-ie,Ne=ee.a-ge,Ue=ee.b-_e;return function(Ge){return Wt(ie+Ce*Ge,ge+Ne*Ge,_e+Ue*Ge)+""}},l.interpolateRound=hl,l.transform=function(B){var ee=f.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(ie){if(ie!=null){ee.setAttribute("transform",ie);var ge=ee.transform.baseVal.consolidate()}return new Js(ge?ge.matrix:dl)})(B)},Js.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,f:0};function us(B){return B.length?B.pop()+",":""}function So(B,ee){var ie=[],ge=[];return B=l.transform(B),ee=l.transform(ee),function(_e,Ce,Ne,Ue){if(_e[0]!==Ce[0]||_e[1]!==Ce[1]){var Ge=Ne.push("translate(",null,",",null,")");Ue.push({i:Ge-4,x:Qa(_e[0],Ce[0])},{i:Ge-2,x:Qa(_e[1],Ce[1])})}else(Ce[0]||Ce[1])&&Ne.push("translate("+Ce+")")}(B.translate,ee.translate,ie,ge),function(_e,Ce,Ne,Ue){_e!==Ce?(_e-Ce>180?Ce+=360:Ce-_e>180&&(_e+=360),Ue.push({i:Ne.push(us(Ne)+"rotate(",null,")")-2,x:Qa(_e,Ce)})):Ce&&Ne.push(us(Ne)+"rotate("+Ce+")")}(B.rotate,ee.rotate,ie,ge),function(_e,Ce,Ne,Ue){_e!==Ce?Ue.push({i:Ne.push(us(Ne)+"skewX(",null,")")-2,x:Qa(_e,Ce)}):Ce&&Ne.push(us(Ne)+"skewX("+Ce+")")}(B.skew,ee.skew,ie,ge),function(_e,Ce,Ne,Ue){if(_e[0]!==Ce[0]||_e[1]!==Ce[1]){var Ge=Ne.push(us(Ne)+"scale(",null,",",null,")");Ue.push({i:Ge-4,x:Qa(_e[0],Ce[0])},{i:Ge-2,x:Qa(_e[1],Ce[1])})}else Ce[0]===1&&Ce[1]===1||Ne.push(us(Ne)+"scale("+Ce+")")}(B.scale,ee.scale,ie,ge),B=ee=null,function(_e){for(var Ce,Ne=-1,Ue=ge.length;++Ne<Ue;)ie[(Ce=ge[Ne]).i]=Ce.x(_e);return ie.join("")}}function Yo(B,ee){return ee=(ee-=B=+B)||1/ee,function(ie){return(ie-B)/ee}}function cs(B,ee){return ee=(ee-=B=+B)||1/ee,function(ie){return Math.max(0,Math.min(1,(ie-B)/ee))}}function Ns(B){for(var ee=B.source,ie=B.target,ge=function(Ne,Ue){if(Ne===Ue)return Ne;for(var Ge=Qs(Ne),Ye=Qs(Ue),Qe=Ge.pop(),ct=Ye.pop(),vt=null;Qe===ct;)vt=Qe,Qe=Ge.pop(),ct=Ye.pop();return vt}(ee,ie),_e=[ee];ee!==ge;)ee=ee.parent,_e.push(ee);for(var Ce=_e.length;ie!==ge;)_e.splice(Ce,0,ie),ie=ie.parent;return _e}function Qs(B){for(var ee=[],ie=B.parent;ie!=null;)ee.push(B),B=ie,ie=ie.parent;return ee.push(B),ee}function el(B){B.fixed|=2}function za(B){B.fixed&=-7}function Zo(B){B.fixed|=4,B.px=B.x,B.py=B.y}function no(B){B.fixed&=-5}function ho(B,ee,ie){var ge=0,_e=0;if(B.charge=0,!B.leaf)for(var Ce,Ne=B.nodes,Ue=Ne.length,Ge=-1;++Ge<Ue;)(Ce=Ne[Ge])!=null&&(ho(Ce,ee,ie),B.charge+=Ce.charge,ge+=Ce.charge*Ce.cx,_e+=Ce.charge*Ce.cy);if(B.point){B.leaf||(B.point.x+=Math.random()-.5,B.point.y+=Math.random()-.5);var Ye=ee*ie[B.point.index];B.charge+=B.pointCharge=Ye,ge+=Ye*B.point.x,_e+=Ye*B.point.y}B.cx=ge/B.charge,B.cy=_e/B.charge}l.interpolateTransform=So,l.layout={},l.layout.bundle=function(){return function(B){for(var ee=[],ie=-1,ge=B.length;++ie<ge;)ee.push(Ns(B[ie]));return ee}},l.layout.chord=function(){var B,ee,ie,ge,_e,Ce,Ne,Ue={},Ge=0;function Ye(){var ct,vt,Ot,Dt,Pt,Vt={},It=[],sn=l.range(ge),Jt=[];for(B=[],ee=[],ct=0,Dt=-1;++Dt<ge;){for(vt=0,Pt=-1;++Pt<ge;)vt+=ie[Dt][Pt];It.push(vt),Jt.push(l.range(ge)),ct+=vt}for(_e&&sn.sort(function(dr,hr){return _e(It[dr],It[hr])}),Ce&&Jt.forEach(function(dr,hr){dr.sort(function(yr,Mr){return Ce(ie[hr][yr],ie[hr][Mr])})}),ct=(zt-Ge*ge)/ct,vt=0,Dt=-1;++Dt<ge;){for(Ot=vt,Pt=-1;++Pt<ge;){var Zt=sn[Dt],Mn=Jt[Zt][Pt],kn=ie[Zt][Mn],Yn=vt,Zn=vt+=kn*ct;Vt[Zt+"-"+Mn]={index:Zt,subindex:Mn,startAngle:Yn,endAngle:Zn,value:kn}}ee[Zt]={index:Zt,startAngle:Ot,endAngle:vt,value:It[Zt]},vt+=Ge}for(Dt=-1;++Dt<ge;)for(Pt=Dt-1;++Pt<ge;){var nr=Vt[Dt+"-"+Pt],sr=Vt[Pt+"-"+Dt];(nr.value||sr.value)&&B.push(nr.value<sr.value?{source:sr,target:nr}:{source:nr,target:sr})}Ne&&Qe()}function Qe(){B.sort(function(ct,vt){return Ne((ct.source.value+ct.target.value)/2,(vt.source.value+vt.target.value)/2)})}return Ue.matrix=function(ct){return arguments.length?(ge=(ie=ct)&&ie.length,B=ee=null,Ue):ie},Ue.padding=function(ct){return arguments.length?(Ge=ct,B=ee=null,Ue):Ge},Ue.sortGroups=function(ct){return arguments.length?(_e=ct,B=ee=null,Ue):_e},Ue.sortSubgroups=function(ct){return arguments.length?(Ce=ct,B=null,Ue):Ce},Ue.sortChords=function(ct){return arguments.length?(Ne=ct,B&&Qe(),Ue):Ne},Ue.chords=function(){return B||Ye(),B},Ue.groups=function(){return ee||Ye(),ee},Ue},l.layout.force=function(){var B,ee,ie,ge,_e,Ce,Ne={},Ue=l.dispatch("start","tick","end"),Ge=[1,1],Ye=.9,Qe=vl,ct=Eo,vt=-30,Ot=li,Dt=.1,Pt=.64,Vt=[],It=[];function sn(Zt){return function(Mn,kn,Yn,Zn){if(Mn.point!==Zt){var nr=Mn.cx-Zt.x,sr=Mn.cy-Zt.y,dr=Zn-kn,hr=nr*nr+sr*sr;if(dr*dr/Pt<hr){if(hr<Ot){var yr=Mn.charge/hr;Zt.px-=nr*yr,Zt.py-=sr*yr}return!0}Mn.point&&hr&&hr<Ot&&(yr=Mn.pointCharge/hr,Zt.px-=nr*yr,Zt.py-=sr*yr)}return!Mn.charge}}function Jt(Zt){Zt.px=l.event.x,Zt.py=l.event.y,Ne.resume()}return Ne.tick=function(){if((ie*=.99)<.005)return B=null,Ue.end({type:"end",alpha:ie=0}),!0;var Zt,Mn,kn,Yn,Zn,nr,sr,dr,hr,yr=Vt.length,Mr=It.length;for(Mn=0;Mn<Mr;++Mn)Yn=(kn=It[Mn]).source,(nr=(dr=(Zn=kn.target).x-Yn.x)*dr+(hr=Zn.y-Yn.y)*hr)&&(dr*=nr=ie*_e[Mn]*((nr=Math.sqrt(nr))-ge[Mn])/nr,hr*=nr,Zn.x-=dr*(sr=Yn.weight+Zn.weight?Yn.weight/(Yn.weight+Zn.weight):.5),Zn.y-=hr*sr,Yn.x+=dr*(sr=1-sr),Yn.y+=hr*sr);if((sr=ie*Dt)&&(dr=Ge[0]/2,hr=Ge[1]/2,Mn=-1,sr))for(;++Mn<yr;)(kn=Vt[Mn]).x+=(dr-kn.x)*sr,kn.y+=(hr-kn.y)*sr;if(vt)for(ho(Zt=l.geom.quadtree(Vt),ie,Ce),Mn=-1;++Mn<yr;)(kn=Vt[Mn]).fixed||Zt.visit(sn(kn));for(Mn=-1;++Mn<yr;)(kn=Vt[Mn]).fixed?(kn.x=kn.px,kn.y=kn.py):(kn.x-=(kn.px-(kn.px=kn.x))*Ye,kn.y-=(kn.py-(kn.py=kn.y))*Ye);Ue.tick({type:"tick",alpha:ie})},Ne.nodes=function(Zt){return arguments.length?(Vt=Zt,Ne):Vt},Ne.links=function(Zt){return arguments.length?(It=Zt,Ne):It},Ne.size=function(Zt){return arguments.length?(Ge=Zt,Ne):Ge},Ne.linkDistance=function(Zt){return arguments.length?(Qe=typeof Zt=="function"?Zt:+Zt,Ne):Qe},Ne.distance=Ne.linkDistance,Ne.linkStrength=function(Zt){return arguments.length?(ct=typeof Zt=="function"?Zt:+Zt,Ne):ct},Ne.friction=function(Zt){return arguments.length?(Ye=+Zt,Ne):Ye},Ne.charge=function(Zt){return arguments.length?(vt=typeof Zt=="function"?Zt:+Zt,Ne):vt},Ne.chargeDistance=function(Zt){return arguments.length?(Ot=Zt*Zt,Ne):Math.sqrt(Ot)},Ne.gravity=function(Zt){return arguments.length?(Dt=+Zt,Ne):Dt},Ne.theta=function(Zt){return arguments.length?(Pt=Zt*Zt,Ne):Math.sqrt(Pt)},Ne.alpha=function(Zt){return arguments.length?(Zt=+Zt,ie?Zt>0?ie=Zt:(B.c=null,B.t=NaN,B=null,Ue.end({type:"end",alpha:ie=0})):Zt>0&&(Ue.start({type:"start",alpha:ie=Zt}),B=rn(Ne.tick)),Ne):ie},Ne.start=function(){var Zt,Mn,kn,Yn=Vt.length,Zn=It.length,nr=Ge[0],sr=Ge[1];for(Zt=0;Zt<Yn;++Zt)(kn=Vt[Zt]).index=Zt,kn.weight=0;for(Zt=0;Zt<Zn;++Zt)typeof(kn=It[Zt]).source=="number"&&(kn.source=Vt[kn.source]),typeof kn.target=="number"&&(kn.target=Vt[kn.target]),++kn.source.weight,++kn.target.weight;for(Zt=0;Zt<Yn;++Zt)kn=Vt[Zt],isNaN(kn.x)&&(kn.x=dr("x",nr)),isNaN(kn.y)&&(kn.y=dr("y",sr)),isNaN(kn.px)&&(kn.px=kn.x),isNaN(kn.py)&&(kn.py=kn.y);if(ge=[],typeof Qe=="function")for(Zt=0;Zt<Zn;++Zt)ge[Zt]=+Qe.call(this,It[Zt],Zt);else for(Zt=0;Zt<Zn;++Zt)ge[Zt]=Qe;if(_e=[],typeof ct=="function")for(Zt=0;Zt<Zn;++Zt)_e[Zt]=+ct.call(this,It[Zt],Zt);else for(Zt=0;Zt<Zn;++Zt)_e[Zt]=ct;if(Ce=[],typeof vt=="function")for(Zt=0;Zt<Yn;++Zt)Ce[Zt]=+vt.call(this,Vt[Zt],Zt);else for(Zt=0;Zt<Yn;++Zt)Ce[Zt]=vt;function dr(hr,yr){if(!Mn){for(Mn=new Array(Yn),fr=0;fr<Yn;++fr)Mn[fr]=[];for(fr=0;fr<Zn;++fr){var Mr=It[fr];Mn[Mr.source.index].push(Mr.target),Mn[Mr.target.index].push(Mr.source)}}for(var Fr,Jn=Mn[Zt],fr=-1,xr=Jn.length;++fr<xr;)if(!isNaN(Fr=Jn[fr][hr]))return Fr;return Math.random()*yr}return Ne.resume()},Ne.resume=function(){return Ne.alpha(.1)},Ne.stop=function(){return Ne.alpha(0)},Ne.drag=function(){if(ee||(ee=l.behavior.drag().origin(I).on("dragstart.force",el).on("drag.force",Jt).on("dragend.force",za)),!arguments.length)return ee;this.on("mouseover.force",Zo).on("mouseout.force",no).call(ee)},l.rebind(Ne,Ue,"on")};var vl=20,Eo=1,li=1/0;function Ga(B,ee){return l.rebind(B,ee,"sort","children","value"),B.nodes=B,B.links=ml,B}function Ts(B,ee){for(var ie=[B];(B=ie.pop())!=null;)if(ee(B),(_e=B.children)&&(ge=_e.length))for(var ge,_e;--ge>=0;)ie.push(_e[ge])}function Ra(B,ee){for(var ie=[B],ge=[];(B=ie.pop())!=null;)if(ge.push(B),(Ce=B.children)&&(_e=Ce.length))for(var _e,Ce,Ne=-1;++Ne<_e;)ie.push(Ce[Ne]);for(;(B=ge.pop())!=null;)ee(B)}function Xo(B){return B.children}function Cl(B){return B.value}function js(B,ee){return ee.value-B.value}function ml(B){return l.merge(B.map(function(ee){return(ee.children||[]).map(function(ie){return{source:ee,target:ie}})}))}l.layout.hierarchy=function(){var B=js,ee=Xo,ie=Cl;function ge(_e){var Ce,Ne=[_e],Ue=[];for(_e.depth=0;(Ce=Ne.pop())!=null;)if(Ue.push(Ce),(Ye=ee.call(ge,Ce,Ce.depth))&&(Ge=Ye.length)){for(var Ge,Ye,Qe;--Ge>=0;)Ne.push(Qe=Ye[Ge]),Qe.parent=Ce,Qe.depth=Ce.depth+1;ie&&(Ce.value=0),Ce.children=Ye}else ie&&(Ce.value=+ie.call(ge,Ce,Ce.depth)||0),delete Ce.children;return Ra(_e,function(ct){var vt,Ot;B&&(vt=ct.children)&&vt.sort(B),ie&&(Ot=ct.parent)&&(Ot.value+=ct.value)}),Ue}return ge.sort=function(_e){return arguments.length?(B=_e,ge):B},ge.children=function(_e){return arguments.length?(ee=_e,ge):ee},ge.value=function(_e){return arguments.length?(ie=_e,ge):ie},ge.revalue=function(_e){return ie&&(Ts(_e,function(Ce){Ce.children&&(Ce.value=0)}),Ra(_e,function(Ce){var Ne;Ce.children||(Ce.value=+ie.call(ge,Ce,Ce.depth)||0),(Ne=Ce.parent)&&(Ne.value+=Ce.value)})),_e},ge},l.layout.partition=function(){var B=l.layout.hierarchy(),ee=[1,1];function ie(Ce,Ne,Ue,Ge){var Ye=Ce.children;if(Ce.x=Ne,Ce.y=Ce.depth*Ge,Ce.dx=Ue,Ce.dy=Ge,Ye&&(Qe=Ye.length)){var Qe,ct,vt,Ot=-1;for(Ue=Ce.value?Ue/Ce.value:0;++Ot<Qe;)ie(ct=Ye[Ot],Ne,vt=ct.value*Ue,Ge),Ne+=vt}}function ge(Ce){var Ne=Ce.children,Ue=0;if(Ne&&(Ge=Ne.length))for(var Ge,Ye=-1;++Ye<Ge;)Ue=Math.max(Ue,ge(Ne[Ye]));return 1+Ue}function _e(Ce,Ne){var Ue=B.call(this,Ce,Ne);return ie(Ue[0],0,ee[0],ee[1]/ge(Ue[0])),Ue}return _e.size=function(Ce){return arguments.length?(ee=Ce,_e):ee},Ga(_e,B)},l.layout.pie=function(){var B=Number,ee=yl,ie=0,ge=zt,_e=0;function Ce(Ne){var Ue,Ge=Ne.length,Ye=Ne.map(function(sn,Jt){return+B.call(Ce,sn,Jt)}),Qe=+(typeof ie=="function"?ie.apply(this,arguments):ie),ct=(typeof ge=="function"?ge.apply(this,arguments):ge)-Qe,vt=Math.min(Math.abs(ct)/Ge,+(typeof _e=="function"?_e.apply(this,arguments):_e)),Ot=vt*(ct<0?-1:1),Dt=l.sum(Ye),Pt=Dt?(ct-Ge*Ot)/Dt:0,Vt=l.range(Ge),It=[];return ee!=null&&Vt.sort(ee===yl?function(sn,Jt){return Ye[Jt]-Ye[sn]}:function(sn,Jt){return ee(Ne[sn],Ne[Jt])}),Vt.forEach(function(sn){It[sn]={data:Ne[sn],value:Ue=Ye[sn],startAngle:Qe,endAngle:Qe+=Ue*Pt+Ot,padAngle:vt}}),It}return Ce.value=function(Ne){return arguments.length?(B=Ne,Ce):B},Ce.sort=function(Ne){return arguments.length?(ee=Ne,Ce):ee},Ce.startAngle=function(Ne){return arguments.length?(ie=Ne,Ce):ie},Ce.endAngle=function(Ne){return arguments.length?(ge=Ne,Ce):ge},Ce.padAngle=function(Ne){return arguments.length?(_e=Ne,Ce):_e},Ce};var yl={};function Ms(B){return B.x}function fs(B){return B.y}function As(B,ee,ie){B.y0=ee,B.y=ie}l.layout.stack=function(){var B=I,ee=Lo,ie=go,ge=As,_e=Ms,Ce=fs;function Ne(Ue,Ge){if(!(vt=Ue.length))return Ue;var Ye=Ue.map(function(sn,Jt){return B.call(Ne,sn,Jt)}),Qe=Ye.map(function(sn){return sn.map(function(Jt,Zt){return[_e.call(Ne,Jt,Zt),Ce.call(Ne,Jt,Zt)]})}),ct=ee.call(Ne,Qe,Ge);Ye=l.permute(Ye,ct),Qe=l.permute(Qe,ct);var vt,Ot,Dt,Pt,Vt=ie.call(Ne,Qe,Ge),It=Ye[0].length;for(Dt=0;Dt<It;++Dt)for(ge.call(Ne,Ye[0][Dt],Pt=Vt[Dt],Qe[0][Dt][1]),Ot=1;Ot<vt;++Ot)ge.call(Ne,Ye[Ot][Dt],Pt+=Qe[Ot-1][Dt][1],Qe[Ot][Dt][1]);return Ue}return Ne.values=function(Ue){return arguments.length?(B=Ue,Ne):B},Ne.order=function(Ue){return arguments.length?(ee=typeof Ue=="function"?Ue:Co.get(Ue)||Lo,Ne):ee},Ne.offset=function(Ue){return arguments.length?(ie=typeof Ue=="function"?Ue:po.get(Ue)||go,Ne):ie},Ne.x=function(Ue){return arguments.length?(_e=Ue,Ne):_e},Ne.y=function(Ue){return arguments.length?(Ce=Ue,Ne):Ce},Ne.out=function(Ue){return arguments.length?(ge=Ue,Ne):ge},Ne};var Co=l.map({"inside-out":function(B){var ee,ie,ge=B.length,_e=B.map(Us),Ce=B.map(Wa),Ne=l.range(ge).sort(function(ct,vt){return _e[ct]-_e[vt]}),Ue=0,Ge=0,Ye=[],Qe=[];for(ee=0;ee<ge;++ee)ie=Ne[ee],Ue<Ge?(Ue+=Ce[ie],Ye.push(ie)):(Ge+=Ce[ie],Qe.push(ie));return Qe.reverse().concat(Ye)},reverse:function(B){return l.range(B.length).reverse()},default:Lo}),po=l.map({silhouette:function(B){var ee,ie,ge,_e=B.length,Ce=B[0].length,Ne=[],Ue=0,Ge=[];for(ie=0;ie<Ce;++ie){for(ee=0,ge=0;ee<_e;ee++)ge+=B[ee][ie][1];ge>Ue&&(Ue=ge),Ne.push(ge)}for(ie=0;ie<Ce;++ie)Ge[ie]=(Ue-Ne[ie])/2;return Ge},wiggle:function(B){var ee,ie,ge,_e,Ce,Ne,Ue,Ge,Ye,Qe=B.length,ct=B[0],vt=ct.length,Ot=[];for(Ot[0]=Ge=Ye=0,ie=1;ie<vt;++ie){for(ee=0,_e=0;ee<Qe;++ee)_e+=B[ee][ie][1];for(ee=0,Ce=0,Ue=ct[ie][0]-ct[ie-1][0];ee<Qe;++ee){for(ge=0,Ne=(B[ee][ie][1]-B[ee][ie-1][1])/(2*Ue);ge<ee;++ge)Ne+=(B[ge][ie][1]-B[ge][ie-1][1])/Ue;Ce+=Ne*B[ee][ie][1]}Ot[ie]=Ge-=_e?Ce/_e*Ue:0,Ge<Ye&&(Ye=Ge)}for(ie=0;ie<vt;++ie)Ot[ie]-=Ye;return Ot},expand:function(B){var ee,ie,ge,_e=B.length,Ce=B[0].length,Ne=1/_e,Ue=[];for(ie=0;ie<Ce;++ie){for(ee=0,ge=0;ee<_e;ee++)ge+=B[ee][ie][1];if(ge)for(ee=0;ee<_e;ee++)B[ee][ie][1]/=ge;else for(ee=0;ee<_e;ee++)B[ee][ie][1]=Ne}for(ie=0;ie<Ce;++ie)Ue[ie]=0;return Ue},zero:go});function Lo(B){return l.range(B.length)}function go(B){for(var ee=-1,ie=B[0].length,ge=[];++ee<ie;)ge[ee]=0;return ge}function Us(B){for(var ee,ie=1,ge=0,_e=B[0][1],Ce=B.length;ie<Ce;++ie)(ee=B[ie][1])>_e&&(ge=ie,_e=ee);return ge}function Wa(B){return B.reduce(xl,0)}function xl(B,ee){return B+ee[1]}function bl(B,ee){return Vs(B,Math.ceil(Math.log(ee.length)/Math.LN2+1))}function Vs(B,ee){for(var ie=-1,ge=+B[0],_e=(B[1]-ge)/ee,Ce=[];++ie<=ee;)Ce[ie]=_e*ie+ge;return Ce}function Po(B){return[l.min(B),l.max(B)]}function Hs(B,ee){return B.value-ee.value}function Ko(B,ee){var ie=B._pack_next;B._pack_next=ee,ee._pack_prev=B,ee._pack_next=ie,ie._pack_prev=ee}function tl(B,ee){B._pack_next=ee,ee._pack_prev=B}function hs(B,ee){var ie=ee.x-B.x,ge=ee.y-B.y,_e=B.r+ee.r;return .999*_e*_e>ie*ie+ge*ge}function Jo(B){if((ee=B.children)&&(Ge=ee.length)){var ee,ie,ge,_e,Ce,Ne,Ue,Ge,Ye=1/0,Qe=-1/0,ct=1/0,vt=-1/0;if(ee.forEach(ks),(ie=ee[0]).x=-ie.r,ie.y=0,Jt(ie),Ge>1&&((ge=ee[1]).x=ge.r,ge.y=0,Jt(ge),Ge>2))for(Oo(ie,ge,_e=ee[2]),Jt(_e),Ko(ie,_e),ie._pack_prev=_e,Ko(_e,ge),ge=ie._pack_next,Ce=3;Ce<Ge;Ce++){Oo(ie,ge,_e=ee[Ce]);var Ot=0,Dt=1,Pt=1;for(Ne=ge._pack_next;Ne!==ge;Ne=Ne._pack_next,Dt++)if(hs(Ne,_e)){Ot=1;break}if(Ot==1)for(Ue=ie._pack_prev;Ue!==Ne._pack_prev&&!hs(Ue,_e);Ue=Ue._pack_prev,Pt++);Ot?(Dt<Pt||Dt==Pt&&ge.r<ie.r?tl(ie,ge=Ne):tl(ie=Ue,ge),Ce--):(Ko(ie,_e),ge=_e,Jt(_e))}var Vt=(Ye+Qe)/2,It=(ct+vt)/2,sn=0;for(Ce=0;Ce<Ge;Ce++)(_e=ee[Ce]).x-=Vt,_e.y-=It,sn=Math.max(sn,_e.r+Math.sqrt(_e.x*_e.x+_e.y*_e.y));B.r=sn,ee.forEach(ps)}function Jt(Zt){Ye=Math.min(Zt.x-Zt.r,Ye),Qe=Math.max(Zt.x+Zt.r,Qe),ct=Math.min(Zt.y-Zt.r,ct),vt=Math.max(Zt.y+Zt.r,vt)}}function ks(B){B._pack_next=B._pack_prev=B}function ps(B){delete B._pack_next,delete B._pack_prev}function ui(B,ee,ie,ge){var _e=B.children;if(B.x=ee+=ge*B.x,B.y=ie+=ge*B.y,B.r*=ge,_e)for(var Ce=-1,Ne=_e.length;++Ce<Ne;)ui(_e[Ce],ee,ie,ge)}function Oo(B,ee,ie){var ge=B.r+ie.r,_e=ee.x-B.x,Ce=ee.y-B.y;if(ge&&(_e||Ce)){var Ne=ee.r+ie.r,Ue=_e*_e+Ce*Ce,Ge=.5+((ge*=ge)-(Ne*=Ne))/(2*Ue),Ye=Math.sqrt(Math.max(0,2*Ne*(ge+Ue)-(ge-=Ue)*ge-Ne*Ne))/(2*Ue);ie.x=B.x+Ge*_e+Ye*Ce,ie.y=B.y+Ge*Ce-Ye*_e}else ie.x=B.x+ge,ie.y=B.y}function vo(B,ee){return B.parent==ee.parent?1:2}function Zi(B){var ee=B.children;return ee.length?ee[0]:B.t}function Jr(B){var ee,ie=B.children;return(ee=ie.length)?ie[ee-1]:B.t}function ti(B,ee,ie){var ge=ie/(ee.i-B.i);ee.c-=ge,ee.s+=ie,B.c+=ge,ee.z+=ie,ee.m+=ie}function Io(B,ee,ie){return B.a.parent===ee.parent?B.a:ie}function mo(B){var ee=B.children;return ee&&ee.length?mo(ee[0]):B}function nl(B){var ee,ie=B.children;return ie&&(ee=ie.length)?nl(ie[ee-1]):B}function Ss(B){return{x:B.x,y:B.y,dx:B.dx,dy:B.dy}}function Do(B,ee){var ie=B.x+ee[3],ge=B.y+ee[0],_e=B.dx-ee[1]-ee[3],Ce=B.dy-ee[0]-ee[2];return _e<0&&(ie+=_e/2,_e=0),Ce<0&&(ge+=Ce/2,Ce=0),{x:ie,y:ge,dx:_e,dy:Ce}}function Es(B){var ee=B[0],ie=B[B.length-1];return ee<ie?[ee,ie]:[ie,ee]}function yo(B){return B.rangeExtent?B.rangeExtent():Es(B.range())}function $o(B,ee,ie,ge){var _e=ie(B[0],B[1]),Ce=ge(ee[0],ee[1]);return function(Ne){return Ce(_e(Ne))}}function zo(B,ee){var ie,ge=0,_e=B.length-1,Ce=B[ge],Ne=B[_e];return Ne<Ce&&(ie=ge,ge=_e,_e=ie,ie=Ce,Ce=Ne,Ne=ie),B[ge]=ee.floor(Ce),B[_e]=ee.ceil(Ne),B}function Mi(B){return B?{floor:function(ee){return Math.floor(ee/B)*B},ceil:function(ee){return Math.ceil(ee/B)*B}}:Qo}l.layout.histogram=function(){var B=!0,ee=Number,ie=Po,ge=bl;function _e(Ce,Ne){for(var Ue,Ge,Ye=[],Qe=Ce.map(ee,this),ct=ie.call(this,Qe,Ne),vt=ge.call(this,ct,Qe,Ne),Ot=(Ne=-1,Qe.length),Dt=vt.length-1,Pt=B?1:1/Ot;++Ne<Dt;)(Ue=Ye[Ne]=[]).dx=vt[Ne+1]-(Ue.x=vt[Ne]),Ue.y=0;if(Dt>0)for(Ne=-1;++Ne<Ot;)(Ge=Qe[Ne])>=ct[0]&&Ge<=ct[1]&&((Ue=Ye[l.bisect(vt,Ge,1,Dt)-1]).y+=Pt,Ue.push(Ce[Ne]));return Ye}return _e.value=function(Ce){return arguments.length?(ee=Ce,_e):ee},_e.range=function(Ce){return arguments.length?(ie=Pn(Ce),_e):ie},_e.bins=function(Ce){return arguments.length?(ge=typeof Ce=="number"?function(Ne){return Vs(Ne,Ce)}:Pn(Ce),_e):ge},_e.frequency=function(Ce){return arguments.length?(B=!!Ce,_e):B},_e},l.layout.pack=function(){var B,ee=l.layout.hierarchy().sort(Hs),ie=0,ge=[1,1];function _e(Ce,Ne){var Ue=ee.call(this,Ce,Ne),Ge=Ue[0],Ye=ge[0],Qe=ge[1],ct=B==null?Math.sqrt:typeof B=="function"?B:function(){return B};if(Ge.x=Ge.y=0,Ra(Ge,function(Ot){Ot.r=+ct(Ot.value)}),Ra(Ge,Jo),ie){var vt=ie*(B?1:Math.max(2*Ge.r/Ye,2*Ge.r/Qe))/2;Ra(Ge,function(Ot){Ot.r+=vt}),Ra(Ge,Jo),Ra(Ge,function(Ot){Ot.r-=vt})}return ui(Ge,Ye/2,Qe/2,B?1:1/Math.max(2*Ge.r/Ye,2*Ge.r/Qe)),Ue}return _e.size=function(Ce){return arguments.length?(ge=Ce,_e):ge},_e.radius=function(Ce){return arguments.length?(B=Ce==null||typeof Ce=="function"?Ce:+Ce,_e):B},_e.padding=function(Ce){return arguments.length?(ie=+Ce,_e):ie},Ga(_e,ee)},l.layout.tree=function(){var B=l.layout.hierarchy().sort(null).value(null),ee=vo,ie=[1,1],ge=null;function _e(Ge,Ye){var Qe=B.call(this,Ge,Ye),ct=Qe[0],vt=function(Jt){for(var Zt,Mn={A:null,children:[Jt]},kn=[Mn];(Zt=kn.pop())!=null;)for(var Yn,Zn=Zt.children,nr=0,sr=Zn.length;nr<sr;++nr)kn.push((Zn[nr]=Yn={_:Zn[nr],parent:Zt,children:(Yn=Zn[nr].children)&&Yn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:nr}).a=Yn);return Mn.children[0]}(ct);if(Ra(vt,Ce),vt.parent.m=-vt.z,Ts(vt,Ne),ge)Ts(ct,Ue);else{var Ot=ct,Dt=ct,Pt=ct;Ts(ct,function(Jt){Jt.x<Ot.x&&(Ot=Jt),Jt.x>Dt.x&&(Dt=Jt),Jt.depth>Pt.depth&&(Pt=Jt)});var Vt=ee(Ot,Dt)/2-Ot.x,It=ie[0]/(Dt.x+ee(Dt,Ot)/2+Vt),sn=ie[1]/(Pt.depth||1);Ts(ct,function(Jt){Jt.x=(Jt.x+Vt)*It,Jt.y=Jt.depth*sn})}return Qe}function Ce(Ge){var Ye=Ge.children,Qe=Ge.parent.children,ct=Ge.i?Qe[Ge.i-1]:null;if(Ye.length){(function(Ot){for(var Dt,Pt=0,Vt=0,It=Ot.children,sn=It.length;--sn>=0;)(Dt=It[sn]).z+=Pt,Dt.m+=Pt,Pt+=Dt.s+(Vt+=Dt.c)})(Ge);var vt=(Ye[0].z+Ye[Ye.length-1].z)/2;ct?(Ge.z=ct.z+ee(Ge._,ct._),Ge.m=Ge.z-vt):Ge.z=vt}else ct&&(Ge.z=ct.z+ee(Ge._,ct._));Ge.parent.A=function(Ot,Dt,Pt){if(Dt){for(var Vt,It=Ot,sn=Ot,Jt=Dt,Zt=It.parent.children[0],Mn=It.m,kn=sn.m,Yn=Jt.m,Zn=Zt.m;Jt=Jr(Jt),It=Zi(It),Jt&&It;)Zt=Zi(Zt),(sn=Jr(sn)).a=Ot,(Vt=Jt.z+Yn-It.z-Mn+ee(Jt._,It._))>0&&(ti(Io(Jt,Ot,Pt),Ot,Vt),Mn+=Vt,kn+=Vt),Yn+=Jt.m,Mn+=It.m,Zn+=Zt.m,kn+=sn.m;Jt&&!Jr(sn)&&(sn.t=Jt,sn.m+=Yn-kn),It&&!Zi(Zt)&&(Zt.t=It,Zt.m+=Mn-Zn,Pt=Ot)}return Pt}(Ge,ct,Ge.parent.A||Qe[0])}function Ne(Ge){Ge._.x=Ge.z+Ge.parent.m,Ge.m+=Ge.parent.m}function Ue(Ge){Ge.x*=ie[0],Ge.y=Ge.depth*ie[1]}return _e.separation=function(Ge){return arguments.length?(ee=Ge,_e):ee},_e.size=function(Ge){return arguments.length?(ge=(ie=Ge)==null?Ue:null,_e):ge?null:ie},_e.nodeSize=function(Ge){return arguments.length?(ge=(ie=Ge)==null?null:Ue,_e):ge?ie:null},Ga(_e,B)},l.layout.cluster=function(){var B=l.layout.hierarchy().sort(null).value(null),ee=vo,ie=[1,1],ge=!1;function _e(Ce,Ne){var Ue,Ge=B.call(this,Ce,Ne),Ye=Ge[0],Qe=0;Ra(Ye,function(Pt){var Vt=Pt.children;Vt&&Vt.length?(Pt.x=function(It){return It.reduce(function(sn,Jt){return sn+Jt.x},0)/It.length}(Vt),Pt.y=function(It){return 1+l.max(It,function(sn){return sn.y})}(Vt)):(Pt.x=Ue?Qe+=ee(Pt,Ue):0,Pt.y=0,Ue=Pt)});var ct=mo(Ye),vt=nl(Ye),Ot=ct.x-ee(ct,vt)/2,Dt=vt.x+ee(vt,ct)/2;return Ra(Ye,ge?function(Pt){Pt.x=(Pt.x-Ye.x)*ie[0],Pt.y=(Ye.y-Pt.y)*ie[1]}:function(Pt){Pt.x=(Pt.x-Ot)/(Dt-Ot)*ie[0],Pt.y=(1-(Ye.y?Pt.y/Ye.y:1))*ie[1]}),Ge}return _e.separation=function(Ce){return arguments.length?(ee=Ce,_e):ee},_e.size=function(Ce){return arguments.length?(ge=(ie=Ce)==null,_e):ge?null:ie},_e.nodeSize=function(Ce){return arguments.length?(ge=(ie=Ce)!=null,_e):ge?ie:null},Ga(_e,B)},l.layout.treemap=function(){var B,ee=l.layout.hierarchy(),ie=Math.round,ge=[1,1],_e=null,Ce=Ss,Ne=!1,Ue="squarify",Ge=.5*(1+Math.sqrt(5));function Ye(Pt,Vt){for(var It,sn,Jt=-1,Zt=Pt.length;++Jt<Zt;)sn=(It=Pt[Jt]).value*(Vt<0?0:Vt),It.area=isNaN(sn)||sn<=0?0:sn}function Qe(Pt){var Vt=Pt.children;if(Vt&&Vt.length){var It,sn,Jt,Zt=Ce(Pt),Mn=[],kn=Vt.slice(),Yn=1/0,Zn=Ue==="slice"?Zt.dx:Ue==="dice"?Zt.dy:Ue==="slice-dice"?1&Pt.depth?Zt.dy:Zt.dx:Math.min(Zt.dx,Zt.dy);for(Ye(kn,Zt.dx*Zt.dy/Pt.value),Mn.area=0;(Jt=kn.length)>0;)Mn.push(It=kn[Jt-1]),Mn.area+=It.area,Ue!=="squarify"||(sn=vt(Mn,Zn))<=Yn?(kn.pop(),Yn=sn):(Mn.area-=Mn.pop().area,Ot(Mn,Zn,Zt,!1),Zn=Math.min(Zt.dx,Zt.dy),Mn.length=Mn.area=0,Yn=1/0);Mn.length&&(Ot(Mn,Zn,Zt,!0),Mn.length=Mn.area=0),Vt.forEach(Qe)}}function ct(Pt){var Vt=Pt.children;if(Vt&&Vt.length){var It,sn=Ce(Pt),Jt=Vt.slice(),Zt=[];for(Ye(Jt,sn.dx*sn.dy/Pt.value),Zt.area=0;It=Jt.pop();)Zt.push(It),Zt.area+=It.area,It.z!=null&&(Ot(Zt,It.z?sn.dx:sn.dy,sn,!Jt.length),Zt.length=Zt.area=0);Vt.forEach(ct)}}function vt(Pt,Vt){for(var It,sn=Pt.area,Jt=0,Zt=1/0,Mn=-1,kn=Pt.length;++Mn<kn;)(It=Pt[Mn].area)&&(It<Zt&&(Zt=It),It>Jt&&(Jt=It));return Vt*=Vt,(sn*=sn)?Math.max(Vt*Jt*Ge/sn,sn/(Vt*Zt*Ge)):1/0}function Ot(Pt,Vt,It,sn){var Jt,Zt=-1,Mn=Pt.length,kn=It.x,Yn=It.y,Zn=Vt?ie(Pt.area/Vt):0;if(Vt==It.dx){for((sn||Zn>It.dy)&&(Zn=It.dy);++Zt<Mn;)(Jt=Pt[Zt]).x=kn,Jt.y=Yn,Jt.dy=Zn,kn+=Jt.dx=Math.min(It.x+It.dx-kn,Zn?ie(Jt.area/Zn):0);Jt.z=!0,Jt.dx+=It.x+It.dx-kn,It.y+=Zn,It.dy-=Zn}else{for((sn||Zn>It.dx)&&(Zn=It.dx);++Zt<Mn;)(Jt=Pt[Zt]).x=kn,Jt.y=Yn,Jt.dx=Zn,Yn+=Jt.dy=Math.min(It.y+It.dy-Yn,Zn?ie(Jt.area/Zn):0);Jt.z=!1,Jt.dy+=It.y+It.dy-Yn,It.x+=Zn,It.dx-=Zn}}function Dt(Pt){var Vt=B||ee(Pt),It=Vt[0];return It.x=It.y=0,It.value?(It.dx=ge[0],It.dy=ge[1]):It.dx=It.dy=0,B&&ee.revalue(It),Ye([It],It.dx*It.dy/It.value),(B?ct:Qe)(It),Ne&&(B=Vt),Vt}return Dt.size=function(Pt){return arguments.length?(ge=Pt,Dt):ge},Dt.padding=function(Pt){if(!arguments.length)return _e;function Vt(sn){return Do(sn,Pt)}var It;return Ce=(_e=Pt)==null?Ss:(It=typeof Pt)=="function"?function(sn){var Jt=Pt.call(Dt,sn,sn.depth);return Jt==null?Ss(sn):Do(sn,typeof Jt=="number"?[Jt,Jt,Jt,Jt]:Jt)}:(It==="number"&&(Pt=[Pt,Pt,Pt,Pt]),Vt),Dt},Dt.round=function(Pt){return arguments.length?(ie=Pt?Math.round:Number,Dt):ie!=Number},Dt.sticky=function(Pt){return arguments.length?(Ne=Pt,B=null,Dt):Ne},Dt.ratio=function(Pt){return arguments.length?(Ge=Pt,Dt):Ge},Dt.mode=function(Pt){return arguments.length?(Ue=Pt+"",Dt):Ue},Ga(Dt,ee)},l.random={normal:function(B,ee){var ie=arguments.length;return ie<2&&(ee=1),ie<1&&(B=0),function(){var ge,_e,Ce;do Ce=(ge=2*Math.random()-1)*ge+(_e=2*Math.random()-1)*_e;while(!Ce||Ce>1);return B+ee*ge*Math.sqrt(-2*Math.log(Ce)/Ce)}},logNormal:function(){var B=l.random.normal.apply(l,arguments);return function(){return Math.exp(B())}},bates:function(B){var ee=l.random.irwinHall(B);return function(){return ee()/B}},irwinHall:function(B){return function(){for(var ee=0,ie=0;ie<B;ie++)ee+=Math.random();return ee}}},l.scale={};var Qo={floor:I,ceil:I};function es(B,ee,ie,ge){var _e=[],Ce=[],Ne=0,Ue=Math.min(B.length,ee.length)-1;for(B[Ue]<B[0]&&(B=B.slice().reverse(),ee=ee.slice().reverse());++Ne<=Ue;)_e.push(ie(B[Ne-1],B[Ne])),Ce.push(ge(ee[Ne-1],ee[Ne]));return function(Ge){var Ye=l.bisect(B,Ge,1,Ue)-1;return Ce[Ye](_e[Ye](Ge))}}function ji(B,ee,ie,ge){var _e,Ce;function Ne(){var Ge=Math.min(B.length,ee.length)>2?es:$o,Ye=ge?cs:Yo;return _e=Ge(B,ee,Ye,ie),Ce=Ge(ee,B,Ye,eo),Ue}function Ue(Ge){return _e(Ge)}return Ue.invert=function(Ge){return Ce(Ge)},Ue.domain=function(Ge){return arguments.length?(B=Ge.map(Number),Ne()):B},Ue.range=function(Ge){return arguments.length?(ee=Ge,Ne()):ee},Ue.rangeRound=function(Ge){return Ue.range(Ge).interpolate(hl)},Ue.clamp=function(Ge){return arguments.length?(ge=Ge,Ne()):ge},Ue.interpolate=function(Ge){return arguments.length?(ie=Ge,Ne()):ie},Ue.ticks=function(Ge){return ha(B,Ge)},Ue.tickFormat=function(Ge,Ye){return d3_scale_linearTickFormat(B,Ge,Ye)},Ue.nice=function(Ge){return ta(B,Ge),Ne()},Ue.copy=function(){return ji(B,ee,ie,ge)},Ne()}function aa(B,ee){return l.rebind(B,ee,"range","rangeRound","interpolate","clamp")}function ta(B,ee){return zo(B,Mi(Ui(B,ee)[2])),zo(B,Mi(Ui(B,ee)[2])),B}function Ui(B,ee){ee==null&&(ee=10);var ie=Es(B),ge=ie[1]-ie[0],_e=Math.pow(10,Math.floor(Math.log(ge/ee)/Math.LN10)),Ce=ee/ge*_e;return Ce<=.15?_e*=10:Ce<=.35?_e*=5:Ce<=.75&&(_e*=2),ie[0]=Math.ceil(ie[0]/_e)*_e,ie[1]=Math.floor(ie[1]/_e)*_e+.5*_e,ie[2]=_e,ie}function ha(B,ee){return l.range.apply(l,Ui(B,ee))}function Ro(B,ee,ie,ge){function _e(Ue){return(ie?Math.log(Ue<0?0:Ue):-Math.log(Ue>0?0:-Ue))/Math.log(ee)}function Ce(Ue){return ie?Math.pow(ee,Ue):-Math.pow(ee,-Ue)}function Ne(Ue){return B(_e(Ue))}return Ne.invert=function(Ue){return Ce(B.invert(Ue))},Ne.domain=function(Ue){return arguments.length?(ie=Ue[0]>=0,B.domain((ge=Ue.map(Number)).map(_e)),Ne):ge},Ne.base=function(Ue){return arguments.length?(ee=+Ue,B.domain(ge.map(_e)),Ne):ee},Ne.nice=function(){var Ue=zo(ge.map(_e),ie?Math:qa);return B.domain(Ue),ge=Ue.map(Ce),Ne},Ne.ticks=function(){var Ue=Es(ge),Ge=[],Ye=Ue[0],Qe=Ue[1],ct=Math.floor(_e(Ye)),vt=Math.ceil(_e(Qe)),Ot=ee%1?2:ee;if(isFinite(vt-ct)){if(ie){for(;ct<vt;ct++)for(var Dt=1;Dt<Ot;Dt++)Ge.push(Ce(ct)*Dt);Ge.push(Ce(ct))}else for(Ge.push(Ce(ct));ct++<vt;)for(Dt=Ot-1;Dt>0;Dt--)Ge.push(Ce(ct)*Dt);for(ct=0;Ge[ct]<Ye;ct++);for(vt=Ge.length;Ge[vt-1]>Qe;vt--);Ge=Ge.slice(ct,vt)}return Ge},Ne.copy=function(){return Ro(B.copy(),ee,ie,ge)},aa(Ne,B)}l.scale.linear=function(){return ji([0,1],[0,1],eo,!1)},l.scale.log=function(){return Ro(l.scale.linear().domain([0,1]),10,!0,[1,10])};var qa={floor:function(B){return-Math.ceil(-B)},ceil:function(B){return-Math.floor(-B)}};function Xi(B,ee,ie){var ge=La(ee),_e=La(1/ee);function Ce(Ne){return B(ge(Ne))}return Ce.invert=function(Ne){return _e(B.invert(Ne))},Ce.domain=function(Ne){return arguments.length?(B.domain((ie=Ne.map(Number)).map(ge)),Ce):ie},Ce.ticks=function(Ne){return ha(ie,Ne)},Ce.tickFormat=function(Ne,Ue){return d3_scale_linearTickFormat(ie,Ne,Ue)},Ce.nice=function(Ne){return Ce.domain(ta(ie,Ne))},Ce.exponent=function(Ne){return arguments.length?(ge=La(ee=Ne),_e=La(1/ee),B.domain(ie.map(ge)),Ce):ee},Ce.copy=function(){return Xi(B.copy(),ee,ie)},aa(Ce,B)}function La(B){return function(ee){return ee<0?-Math.pow(-ee,B):Math.pow(ee,B)}}function Ba(B,ee){var ie,ge,_e;function Ce(Ue){return ge[((ie.get(Ue)||(ee.t==="range"?ie.set(Ue,B.push(Ue)):NaN))-1)%ge.length]}function Ne(Ue,Ge){return l.range(B.length).map(function(Ye){return Ue+Ge*Ye})}return Ce.domain=function(Ue){if(!arguments.length)return B;B=[],ie=new y;for(var Ge,Ye=-1,Qe=Ue.length;++Ye<Qe;)ie.has(Ge=Ue[Ye])||ie.set(Ge,B.push(Ge));return Ce[ee.t].apply(Ce,ee.a)},Ce.range=function(Ue){return arguments.length?(ge=Ue,_e=0,ee={t:"range",a:arguments},Ce):ge},Ce.rangePoints=function(Ue,Ge){arguments.length<2&&(Ge=0);var Ye=Ue[0],Qe=Ue[1],ct=B.length<2?(Ye=(Ye+Qe)/2,0):(Qe-Ye)/(B.length-1+Ge);return ge=Ne(Ye+ct*Ge/2,ct),_e=0,ee={t:"rangePoints",a:arguments},Ce},Ce.rangeRoundPoints=function(Ue,Ge){arguments.length<2&&(Ge=0);var Ye=Ue[0],Qe=Ue[1],ct=B.length<2?(Ye=Qe=Math.round((Ye+Qe)/2),0):(Qe-Ye)/(B.length-1+Ge)|0;return ge=Ne(Ye+Math.round(ct*Ge/2+(Qe-Ye-(B.length-1+Ge)*ct)/2),ct),_e=0,ee={t:"rangeRoundPoints",a:arguments},Ce},Ce.rangeBands=function(Ue,Ge,Ye){arguments.length<2&&(Ge=0),arguments.length<3&&(Ye=Ge);var Qe=Ue[1]<Ue[0],ct=Ue[Qe-0],vt=(Ue[1-Qe]-ct)/(B.length-Ge+2*Ye);return ge=Ne(ct+vt*Ye,vt),Qe&&ge.reverse(),_e=vt*(1-Ge),ee={t:"rangeBands",a:arguments},Ce},Ce.rangeRoundBands=function(Ue,Ge,Ye){arguments.length<2&&(Ge=0),arguments.length<3&&(Ye=Ge);var Qe=Ue[1]<Ue[0],ct=Ue[Qe-0],vt=Ue[1-Qe],Ot=Math.floor((vt-ct)/(B.length-Ge+2*Ye));return ge=Ne(ct+Math.round((vt-ct-(B.length-Ge)*Ot)/2),Ot),Qe&&ge.reverse(),_e=Math.round(Ot*(1-Ge)),ee={t:"rangeRoundBands",a:arguments},Ce},Ce.rangeBand=function(){return _e},Ce.rangeExtent=function(){return Es(ee.a[0])},Ce.copy=function(){return Ba(B,ee)},Ce.domain(B)}l.scale.pow=function(){return Xi(l.scale.linear(),1,[0,1])},l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return Ba([],{t:"range",a:[[]]})},l.scale.category10=function(){return l.scale.ordinal().range(Gs)},l.scale.category20=function(){return l.scale.ordinal().range(Fa)},l.scale.category20b=function(){return l.scale.ordinal().range(Ki)},l.scale.category20c=function(){return l.scale.ordinal().range(Sr)};var Gs=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Kt),Fa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Kt),Ki=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Kt),Sr=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Kt);function oa(B,ee){var ie;function ge(){var Ce=0,Ne=ee.length;for(ie=[];++Ce<Ne;)ie[Ce-1]=l.quantile(B,Ce/Ne);return _e}function _e(Ce){if(!isNaN(Ce=+Ce))return ee[l.bisect(ie,Ce)]}return _e.domain=function(Ce){return arguments.length?(B=Ce.map(p).filter(c).sort(u),ge()):B},_e.range=function(Ce){return arguments.length?(ee=Ce,ge()):ee},_e.quantiles=function(){return ie},_e.invertExtent=function(Ce){return(Ce=ee.indexOf(Ce))<0?[NaN,NaN]:[Ce>0?ie[Ce-1]:B[0],Ce<ie.length?ie[Ce]:B[B.length-1]]},_e.copy=function(){return oa(B,ee)},ge()}function Cs(B,ee,ie){var ge,_e;function Ce(Ue){return ie[Math.max(0,Math.min(_e,Math.floor(ge*(Ue-B))))]}function Ne(){return ge=ie.length/(ee-B),_e=ie.length-1,Ce}return Ce.domain=function(Ue){return arguments.length?(B=+Ue[0],ee=+Ue[Ue.length-1],Ne()):[B,ee]},Ce.range=function(Ue){return arguments.length?(ie=Ue,Ne()):ie},Ce.invertExtent=function(Ue){return[Ue=(Ue=ie.indexOf(Ue))<0?NaN:Ue/ge+B,Ue+1/ge]},Ce.copy=function(){return Cs(B,ee,ie)},Ne()}function Ws(B,ee){function ie(ge){if(ge<=ge)return ee[l.bisect(B,ge)]}return ie.domain=function(ge){return arguments.length?(B=ge,ie):B},ie.range=function(ge){return arguments.length?(ee=ge,ie):ee},ie.invertExtent=function(ge){return ge=ee.indexOf(ge),[B[ge-1],B[ge]]},ie.copy=function(){return Ws(B,ee)},ie}function ts(B){function ee(ie){return+ie}return ee.invert=ee,ee.domain=ee.range=function(ie){return arguments.length?(B=ie.map(ee),ee):B},ee.ticks=function(ie){return ha(B,ie)},ee.tickFormat=function(ie,ge){return d3_scale_linearTickFormat(B,ie,ge)},ee.copy=function(){return ts(B)},ee}function ns(){return 0}l.scale.quantile=function(){return oa([],[])},l.scale.quantize=function(){return Cs(0,1,[0,1])},l.scale.threshold=function(){return Ws([.5],[0,1])},l.scale.identity=function(){return ts([0,1])},l.svg={},l.svg.arc=function(){var B=Tr,ee=Ya,ie=ns,ge=xo,_e=ds,Ce=Ls,Ne=sa;function Ue(){var Ye=Math.max(0,+B.apply(this,arguments)),Qe=Math.max(0,+ee.apply(this,arguments)),ct=_e.apply(this,arguments)-qe,vt=Ce.apply(this,arguments)-qe,Ot=Math.abs(vt-ct),Dt=ct>vt?0:1;if(Qe<Ye&&(Pt=Qe,Qe=Ye,Ye=Pt),Ot>=St)return Ge(Qe,Dt)+(Ye?Ge(Ye,1-Dt):"")+"Z";var Pt,Vt,It,sn,Jt,Zt,Mn,kn,Yn,Zn,nr,sr,dr=0,hr=0,yr=[];if((sn=(+Ne.apply(this,arguments)||0)/2)&&(It=ge===xo?Math.sqrt(Ye*Ye+Qe*Qe):+ge.apply(this,arguments),Dt||(hr*=-1),Qe&&(hr=Ze(It/Qe*Math.sin(sn))),Ye&&(dr=Ze(It/Ye*Math.sin(sn)))),Qe){Jt=Qe*Math.cos(ct+hr),Zt=Qe*Math.sin(ct+hr),Mn=Qe*Math.cos(vt-hr),kn=Qe*Math.sin(vt-hr);var Mr=Math.abs(vt-ct-2*hr)<=Ct?0:1;if(hr&&Za(Jt,Zt,Mn,kn)===Dt^Mr){var Fr=(ct+vt)/2;Jt=Qe*Math.cos(Fr),Zt=Qe*Math.sin(Fr),Mn=kn=null}}else Jt=Zt=0;if(Ye){Yn=Ye*Math.cos(vt-dr),Zn=Ye*Math.sin(vt-dr),nr=Ye*Math.cos(ct+dr),sr=Ye*Math.sin(ct+dr);var Jn=Math.abs(ct-vt+2*dr)<=Ct?0:1;if(dr&&Za(Yn,Zn,nr,sr)===1-Dt^Jn){var fr=(ct+vt)/2;Yn=Ye*Math.cos(fr),Zn=Ye*Math.sin(fr),nr=sr=null}}else Yn=Zn=0;if(Ot>ot&&(Pt=Math.min(Math.abs(Qe-Ye)/2,+ie.apply(this,arguments)))>.001){Vt=Ye<Qe^Dt?0:1;var xr=Pt,Ar=Pt;if(Ot<Ct){var zr=nr==null?[Yn,Zn]:Mn==null?[Jt,Zt]:Et([Jt,Zt],[nr,sr],[Mn,kn],[Yn,Zn]),Hr=Jt-zr[0],Kr=Zt-zr[1],ri=Mn-zr[0],vi=kn-zr[1],mi=1/Math.sin(Math.acos((Hr*ri+Kr*vi)/(Math.sqrt(Hr*Hr+Kr*Kr)*Math.sqrt(ri*ri+vi*vi)))/2),ii=Math.sqrt(zr[0]*zr[0]+zr[1]*zr[1]);Ar=Math.min(Pt,(Ye-ii)/(mi-1)),xr=Math.min(Pt,(Qe-ii)/(mi+1))}if(Mn!=null){var Pi=Na(nr==null?[Yn,Zn]:[nr,sr],[Jt,Zt],Qe,xr,Dt),$i=Na([Mn,kn],[Yn,Zn],Qe,xr,Dt);Pt===xr?yr.push("M",Pi[0],"A",xr,",",xr," 0 0,",Vt," ",Pi[1],"A",Qe,",",Qe," 0 ",1-Dt^Za(Pi[1][0],Pi[1][1],$i[1][0],$i[1][1]),",",Dt," ",$i[1],"A",xr,",",xr," 0 0,",Vt," ",$i[0]):yr.push("M",Pi[0],"A",xr,",",xr," 0 1,",Vt," ",$i[0])}else yr.push("M",Jt,",",Zt);if(nr!=null){var Fi=Na([Jt,Zt],[nr,sr],Ye,-Ar,Dt),Wi=Na([Yn,Zn],Mn==null?[Jt,Zt]:[Mn,kn],Ye,-Ar,Dt);Pt===Ar?yr.push("L",Wi[0],"A",Ar,",",Ar," 0 0,",Vt," ",Wi[1],"A",Ye,",",Ye," 0 ",Dt^Za(Wi[1][0],Wi[1][1],Fi[1][0],Fi[1][1]),",",1-Dt," ",Fi[1],"A",Ar,",",Ar," 0 0,",Vt," ",Fi[0]):yr.push("L",Wi[0],"A",Ar,",",Ar," 0 0,",Vt," ",Fi[0])}else yr.push("L",Yn,",",Zn)}else yr.push("M",Jt,",",Zt),Mn!=null&&yr.push("A",Qe,",",Qe," 0 ",Mr,",",Dt," ",Mn,",",kn),yr.push("L",Yn,",",Zn),nr!=null&&yr.push("A",Ye,",",Ye," 0 ",Jn,",",1-Dt," ",nr,",",sr);return yr.push("Z"),yr.join("")}function Ge(Ye,Qe){return"M0,"+Ye+"A"+Ye+","+Ye+" 0 1,"+Qe+" 0,"+-Ye+"A"+Ye+","+Ye+" 0 1,"+Qe+" 0,"+Ye}return Ue.innerRadius=function(Ye){return arguments.length?(B=Pn(Ye),Ue):B},Ue.outerRadius=function(Ye){return arguments.length?(ee=Pn(Ye),Ue):ee},Ue.cornerRadius=function(Ye){return arguments.length?(ie=Pn(Ye),Ue):ie},Ue.padRadius=function(Ye){return arguments.length?(ge=Ye==xo?xo:Pn(Ye),Ue):ge},Ue.startAngle=function(Ye){return arguments.length?(_e=Pn(Ye),Ue):_e},Ue.endAngle=function(Ye){return arguments.length?(Ce=Pn(Ye),Ue):Ce},Ue.padAngle=function(Ye){return arguments.length?(Ne=Pn(Ye),Ue):Ne},Ue.centroid=function(){var Ye=(+B.apply(this,arguments)+ +ee.apply(this,arguments))/2,Qe=(+_e.apply(this,arguments)+ +Ce.apply(this,arguments))/2-qe;return[Math.cos(Qe)*Ye,Math.sin(Qe)*Ye]},Ue};var xo="auto";function Tr(B){return B.innerRadius}function Ya(B){return B.outerRadius}function ds(B){return B.startAngle}function Ls(B){return B.endAngle}function sa(B){return B&&B.padAngle}function Za(B,ee,ie,ge){return(B-ie)*ee-(ee-ge)*B>0?0:1}function Na(B,ee,ie,ge,_e){var Ce=B[0]-ee[0],Ne=B[1]-ee[1],Ue=(_e?ge:-ge)/Math.sqrt(Ce*Ce+Ne*Ne),Ge=Ue*Ne,Ye=-Ue*Ce,Qe=B[0]+Ge,ct=B[1]+Ye,vt=ee[0]+Ge,Ot=ee[1]+Ye,Dt=(Qe+vt)/2,Pt=(ct+Ot)/2,Vt=vt-Qe,It=Ot-ct,sn=Vt*Vt+It*It,Jt=ie-ge,Zt=Qe*Ot-vt*ct,Mn=(It<0?-1:1)*Math.sqrt(Math.max(0,Jt*Jt*sn-Zt*Zt)),kn=(Zt*It-Vt*Mn)/sn,Yn=(-Zt*Vt-It*Mn)/sn,Zn=(Zt*It+Vt*Mn)/sn,nr=(-Zt*Vt+It*Mn)/sn,sr=kn-Dt,dr=Yn-Pt,hr=Zn-Dt,yr=nr-Pt;return sr*sr+dr*dr>hr*hr+yr*yr&&(kn=Zn,Yn=nr),[[kn-Ge,Yn-Ye],[kn*ie/Jt,Yn*ie/Jt]]}function Pa(){return!0}function ro(B){var ee=Xn,ie=Un,ge=Pa,_e=Vi,Ce=_e.key,Ne=.7;function Ue(Ge){var Ye,Qe=[],ct=[],vt=-1,Ot=Ge.length,Dt=Pn(ee),Pt=Pn(ie);function Vt(){Qe.push("M",_e(B(ct),Ne))}for(;++vt<Ot;)ge.call(this,Ye=Ge[vt],vt)?ct.push([+Dt.call(this,Ye,vt),+Pt.call(this,Ye,vt)]):ct.length&&(Vt(),ct=[]);return ct.length&&Vt(),Qe.length?Qe.join(""):null}return Ue.x=function(Ge){return arguments.length?(ee=Ge,Ue):ee},Ue.y=function(Ge){return arguments.length?(ie=Ge,Ue):ie},Ue.defined=function(Ge){return arguments.length?(ge=Ge,Ue):ge},Ue.interpolate=function(Ge){return arguments.length?(Ce=typeof Ge=="function"?_e=Ge:(_e=bo.get(Ge)||Vi).key,Ue):Ce},Ue.tension=function(Ge){return arguments.length?(Ne=Ge,Ue):Ne},Ue}l.svg.line=function(){return ro(I)};var bo=l.map({linear:Vi,"linear-closed":rs,step:function(B){for(var ee=0,ie=B.length,ge=B[0],_e=[ge[0],",",ge[1]];++ee<ie;)_e.push("H",(ge[0]+(ge=B[ee])[0])/2,"V",ge[1]);return ie>1&&_e.push("H",ge[0]),_e.join("")},"step-before":gs,"step-after":Ji,basis:wa,"basis-open":function(B){if(B.length<4)return Vi(B);for(var ee,ie=[],ge=-1,_e=B.length,Ce=[0],Ne=[0];++ge<3;)ee=B[ge],Ce.push(ee[0]),Ne.push(ee[1]);for(ie.push(Hi(Li,Ce)+","+Hi(Li,Ne)),--ge;++ge<_e;)ee=B[ge],Ce.shift(),Ce.push(ee[0]),Ne.shift(),Ne.push(ee[1]),oi(ie,Ce,Ne);return ie.join("")},"basis-closed":function(B){for(var ee,ie,ge=-1,_e=B.length,Ce=_e+4,Ne=[],Ue=[];++ge<4;)ie=B[ge%_e],Ne.push(ie[0]),Ue.push(ie[1]);for(ee=[Hi(Li,Ne),",",Hi(Li,Ue)],--ge;++ge<Ce;)ie=B[ge%_e],Ne.shift(),Ne.push(ie[0]),Ue.shift(),Ue.push(ie[1]),oi(ee,Ne,Ue);return ee.join("")},bundle:function(B,ee){var ie=B.length-1;if(ie)for(var ge,_e,Ce=B[0][0],Ne=B[0][1],Ue=B[ie][0]-Ce,Ge=B[ie][1]-Ne,Ye=-1;++Ye<=ie;)_e=Ye/ie,(ge=B[Ye])[0]=ee*ge[0]+(1-ee)*(Ce+_e*Ue),ge[1]=ee*ge[1]+(1-ee)*(Ne+_e*Ge);return wa(B)},cardinal:function(B,ee){return B.length<3?Vi(B):B[0]+ci(B,Ps(B,ee))},"cardinal-open":function(B,ee){return B.length<4?Vi(B):B[1]+ci(B.slice(1,-1),Ps(B,ee))},"cardinal-closed":function(B,ee){return B.length<3?rs(B):B[0]+ci((B.push(B[0]),B),Ps([B[B.length-2]].concat(B,[B[1]]),ee))},monotone:function(B){return B.length<3?Vi(B):B[0]+ci(B,function(ee){for(var ie,ge,_e,Ce,Ne=[],Ue=function(Qe){for(var ct=0,vt=Qe.length-1,Ot=[],Dt=Qe[0],Pt=Qe[1],Vt=Ot[0]=Oa(Dt,Pt);++ct<vt;)Ot[ct]=(Vt+(Vt=Oa(Dt=Pt,Pt=Qe[ct+1])))/2;return Ot[ct]=Vt,Ot}(ee),Ge=-1,Ye=ee.length-1;++Ge<Ye;)ie=Oa(ee[Ge],ee[Ge+1]),b(ie)<ot?Ue[Ge]=Ue[Ge+1]=0:(Ce=(ge=Ue[Ge]/ie)*ge+(_e=Ue[Ge+1]/ie)*_e)>9&&(Ce=3*ie/Math.sqrt(Ce),Ue[Ge]=Ce*ge,Ue[Ge+1]=Ce*_e);for(Ge=-1;++Ge<=Ye;)Ce=(ee[Math.min(Ye,Ge+1)][0]-ee[Math.max(0,Ge-1)][0])/(6*(1+Ue[Ge]*Ue[Ge])),Ne.push([Ce||0,Ue[Ge]*Ce||0]);return Ne}(B))}});function Vi(B){return B.length>1?B.join("L"):B+"Z"}function rs(B){return B.join("L")+"Z"}function gs(B){for(var ee=0,ie=B.length,ge=B[0],_e=[ge[0],",",ge[1]];++ee<ie;)_e.push("V",(ge=B[ee])[1],"H",ge[0]);return _e.join("")}function Ji(B){for(var ee=0,ie=B.length,ge=B[0],_e=[ge[0],",",ge[1]];++ee<ie;)_e.push("H",(ge=B[ee])[0],"V",ge[1]);return _e.join("")}function ci(B,ee){if(ee.length<1||B.length!=ee.length&&B.length!=ee.length+2)return Vi(B);var ie=B.length!=ee.length,ge="",_e=B[0],Ce=B[1],Ne=ee[0],Ue=Ne,Ge=1;if(ie&&(ge+="Q"+(Ce[0]-2*Ne[0]/3)+","+(Ce[1]-2*Ne[1]/3)+","+Ce[0]+","+Ce[1],_e=B[1],Ge=2),ee.length>1){Ue=ee[1],Ce=B[Ge],Ge++,ge+="C"+(_e[0]+Ne[0])+","+(_e[1]+Ne[1])+","+(Ce[0]-Ue[0])+","+(Ce[1]-Ue[1])+","+Ce[0]+","+Ce[1];for(var Ye=2;Ye<ee.length;Ye++,Ge++)Ce=B[Ge],Ue=ee[Ye],ge+="S"+(Ce[0]-Ue[0])+","+(Ce[1]-Ue[1])+","+Ce[0]+","+Ce[1]}if(ie){var Qe=B[Ge];ge+="Q"+(Ce[0]+2*Ue[0]/3)+","+(Ce[1]+2*Ue[1]/3)+","+Qe[0]+","+Qe[1]}return ge}function Ps(B,ee){for(var ie,ge=[],_e=(1-ee)/2,Ce=B[0],Ne=B[1],Ue=1,Ge=B.length;++Ue<Ge;)ie=Ce,Ce=Ne,Ne=B[Ue],ge.push([_e*(Ne[0]-ie[0]),_e*(Ne[1]-ie[1])]);return ge}function wa(B){if(B.length<3)return Vi(B);var ee=1,ie=B.length,ge=B[0],_e=ge[0],Ce=ge[1],Ne=[_e,_e,_e,(ge=B[1])[0]],Ue=[Ce,Ce,Ce,ge[1]],Ge=[_e,",",Ce,"L",Hi(Li,Ne),",",Hi(Li,Ue)];for(B.push(B[ie-1]);++ee<=ie;)ge=B[ee],Ne.shift(),Ne.push(ge[0]),Ue.shift(),Ue.push(ge[1]),oi(Ge,Ne,Ue);return B.pop(),Ge.push("L",ge),Ge.join("")}function Hi(B,ee){return B[0]*ee[0]+B[1]*ee[1]+B[2]*ee[2]+B[3]*ee[3]}bo.forEach(function(B,ee){ee.key=B,ee.closed=/-closed$/.test(B)});var io=[0,2/3,1/3,0],rl=[0,1/3,2/3,0],Li=[0,1/6,2/3,1/6];function oi(B,ee,ie){B.push("C",Hi(io,ee),",",Hi(io,ie),",",Hi(rl,ee),",",Hi(rl,ie),",",Hi(Li,ee),",",Hi(Li,ie))}function Oa(B,ee){return(ee[1]-B[1])/(ee[0]-B[0])}function ao(B){for(var ee,ie,ge,_e=-1,Ce=B.length;++_e<Ce;)ie=(ee=B[_e])[0],ge=ee[1]-qe,ee[0]=ie*Math.cos(ge),ee[1]=ie*Math.sin(ge);return B}function Xa(B){var ee=Xn,ie=Xn,ge=0,_e=Un,Ce=Pa,Ne=Vi,Ue=Ne.key,Ge=Ne,Ye="L",Qe=.7;function ct(vt){var Ot,Dt,Pt,Vt=[],It=[],sn=[],Jt=-1,Zt=vt.length,Mn=Pn(ee),kn=Pn(ge),Yn=ee===ie?function(){return Dt}:Pn(ie),Zn=ge===_e?function(){return Pt}:Pn(_e);function nr(){Vt.push("M",Ne(B(sn),Qe),Ye,Ge(B(It.reverse()),Qe),"Z")}for(;++Jt<Zt;)Ce.call(this,Ot=vt[Jt],Jt)?(It.push([Dt=+Mn.call(this,Ot,Jt),Pt=+kn.call(this,Ot,Jt)]),sn.push([+Yn.call(this,Ot,Jt),+Zn.call(this,Ot,Jt)])):It.length&&(nr(),It=[],sn=[]);return It.length&&nr(),Vt.length?Vt.join(""):null}return ct.x=function(vt){return arguments.length?(ee=ie=vt,ct):ie},ct.x0=function(vt){return arguments.length?(ee=vt,ct):ee},ct.x1=function(vt){return arguments.length?(ie=vt,ct):ie},ct.y=function(vt){return arguments.length?(ge=_e=vt,ct):_e},ct.y0=function(vt){return arguments.length?(ge=vt,ct):ge},ct.y1=function(vt){return arguments.length?(_e=vt,ct):_e},ct.defined=function(vt){return arguments.length?(Ce=vt,ct):Ce},ct.interpolate=function(vt){return arguments.length?(Ue=typeof vt=="function"?Ne=vt:(Ne=bo.get(vt)||Vi).key,Ge=Ne.reverse||Ne,Ye=Ne.closed?"M":"L",ct):Ue},ct.tension=function(vt){return arguments.length?(Qe=vt,ct):Qe},ct}function qs(B){return B.source}function Bo(B){return B.target}function is(B){return B.radius}function Bi(B){return[B.x,B.y]}function na(){return 64}function Pr(){return"circle"}function Dr(B){var ee=Math.sqrt(B/Ct);return"M0,"+ee+"A"+ee+","+ee+" 0 1,1 0,"+-ee+"A"+ee+","+ee+" 0 1,1 0,"+ee+"Z"}l.svg.line.radial=function(){var B=ro(ao);return B.radius=B.x,delete B.x,B.angle=B.y,delete B.y,B},gs.reverse=Ji,Ji.reverse=gs,l.svg.area=function(){return Xa(I)},l.svg.area.radial=function(){var B=Xa(ao);return B.radius=B.x,delete B.x,B.innerRadius=B.x0,delete B.x0,B.outerRadius=B.x1,delete B.x1,B.angle=B.y,delete B.y,B.startAngle=B.y0,delete B.y0,B.endAngle=B.y1,delete B.y1,B},l.svg.chord=function(){var B=qs,ee=Bo,ie=is,ge=ds,_e=Ls;function Ce(Ye,Qe){var ct,vt,Ot=Ne(this,B,Ye,Qe),Dt=Ne(this,ee,Ye,Qe);return"M"+Ot.p0+Ue(Ot.r,Ot.p1,Ot.a1-Ot.a0)+(vt=Dt,((ct=Ot).a0==vt.a0&&ct.a1==vt.a1?Ge(Ot.r,Ot.p1,Ot.r,Ot.p0):Ge(Ot.r,Ot.p1,Dt.r,Dt.p0)+Ue(Dt.r,Dt.p1,Dt.a1-Dt.a0)+Ge(Dt.r,Dt.p1,Ot.r,Ot.p0))+"Z")}function Ne(Ye,Qe,ct,vt){var Ot=Qe.call(Ye,ct,vt),Dt=ie.call(Ye,Ot,vt),Pt=ge.call(Ye,Ot,vt)-qe,Vt=_e.call(Ye,Ot,vt)-qe;return{r:Dt,a0:Pt,a1:Vt,p0:[Dt*Math.cos(Pt),Dt*Math.sin(Pt)],p1:[Dt*Math.cos(Vt),Dt*Math.sin(Vt)]}}function Ue(Ye,Qe,ct){return"A"+Ye+","+Ye+" 0 "+ +(ct>Ct)+",1 "+Qe}function Ge(Ye,Qe,ct,vt){return"Q 0,0 "+vt}return Ce.radius=function(Ye){return arguments.length?(ie=Pn(Ye),Ce):ie},Ce.source=function(Ye){return arguments.length?(B=Pn(Ye),Ce):B},Ce.target=function(Ye){return arguments.length?(ee=Pn(Ye),Ce):ee},Ce.startAngle=function(Ye){return arguments.length?(ge=Pn(Ye),Ce):ge},Ce.endAngle=function(Ye){return arguments.length?(_e=Pn(Ye),Ce):_e},Ce},l.svg.diagonal=function(){var B=qs,ee=Bo,ie=Bi;function ge(_e,Ce){var Ne=B.call(this,_e,Ce),Ue=ee.call(this,_e,Ce),Ge=(Ne.y+Ue.y)/2,Ye=[Ne,{x:Ne.x,y:Ge},{x:Ue.x,y:Ge},Ue];return"M"+(Ye=Ye.map(ie))[0]+"C"+Ye[1]+" "+Ye[2]+" "+Ye[3]}return ge.source=function(_e){return arguments.length?(B=Pn(_e),ge):B},ge.target=function(_e){return arguments.length?(ee=Pn(_e),ge):ee},ge.projection=function(_e){return arguments.length?(ie=_e,ge):ie},ge},l.svg.diagonal.radial=function(){var B=l.svg.diagonal(),ee=Bi,ie=B.projection;return B.projection=function(ge){return arguments.length?ie(function(_e){return function(){var Ce=_e.apply(this,arguments),Ne=Ce[0],Ue=Ce[1]-qe;return[Ne*Math.cos(Ue),Ne*Math.sin(Ue)]}}(ee=ge)):ee},B},l.svg.symbol=function(){var B=Pr,ee=na;function ie(ge,_e){return(vs.get(B.call(this,ge,_e))||Dr)(ee.call(this,ge,_e))}return ie.type=function(ge){return arguments.length?(B=Pn(ge),ie):B},ie.size=function(ge){return arguments.length?(ee=Pn(ge),ie):ee},ie};var vs=l.map({circle:Dr,cross:function(B){var ee=Math.sqrt(B/5)/2;return"M"+-3*ee+","+-ee+"H"+-ee+"V"+-3*ee+"H"+ee+"V"+-ee+"H"+3*ee+"V"+ee+"H"+ee+"V"+3*ee+"H"+-ee+"V"+ee+"H"+-3*ee+"Z"},diamond:function(B){var ee=Math.sqrt(B/(2*Fo)),ie=ee*Fo;return"M0,"+-ee+"L"+ie+",0 0,"+ee+" "+-ie+",0Z"},square:function(B){var ee=Math.sqrt(B)/2;return"M"+-ee+","+-ee+"L"+ee+","+-ee+" "+ee+","+ee+" "+-ee+","+ee+"Z"},"triangle-down":function(B){var ee=Math.sqrt(B/pa),ie=ee*pa/2;return"M0,"+ie+"L"+ee+","+-ie+" "+-ee+","+-ie+"Z"},"triangle-up":function(B){var ee=Math.sqrt(B/pa),ie=ee*pa/2;return"M0,"+-ie+"L"+ee+","+ie+" "+-ee+","+ie+"Z"}});l.svg.symbolTypes=vs.keys();var pa=Math.sqrt(3),Fo=Math.tan(30*Xe);he.transition=function(B){for(var ee,ie,ge=No||++Gi,_e=as(B),Ce=[],Ne=jo||{time:Date.now(),ease:co,delay:0,duration:250},Ue=-1,Ge=this.length;++Ue<Ge;){Ce.push(ee=[]);for(var Ye=this[Ue],Qe=-1,ct=Ye.length;++Qe<ct;)(ie=Ye[Qe])&&ys(ie,Qe,_e,ge,Ne),ee.push(ie)}return ia(Ce,_e,ge)},he.interrupt=function(B){return this.each(B==null?ra:ms(as(B)))};var ra=ms(as());function ms(B){return function(){var ee,ie,ge;(ee=this[B])&&(ge=ee[ie=ee.active])&&(ge.timer.c=null,ge.timer.t=NaN,--ee.count?delete ee[ie]:delete this[B],ee.active+=.5,ge.event&&ge.event.interrupt.call(this,this.__data__,ge.index))}}function ia(B,ee,ie){return J(B,jr),B.namespace=ee,B.id=ie,B}var No,jo,jr=[],Gi=0;function oo(B,ee,ie,ge){var _e=B.id,Ce=B.namespace;return ye(B,typeof ie=="function"?function(Ne,Ue,Ge){Ne[Ce][_e].tween.set(ee,ge(ie.call(Ne,Ne.__data__,Ue,Ge)))}:(ie=ge(ie),function(Ne){Ne[Ce][_e].tween.set(ee,ie)}))}function Ta(B){return B==null&&(B=""),function(){this.textContent=B}}function as(B){return B==null?"__transition__":"__transition_"+B+"__"}function ys(B,ee,ie,ge,_e){var Ce,Ne,Ue,Ge,Ye,Qe=B[ie]||(B[ie]={active:0,count:0}),ct=Qe[ge];function vt(Dt){var Pt=Qe.active,Vt=Qe[Pt];for(var It in Vt&&(Vt.timer.c=null,Vt.timer.t=NaN,--Qe.count,delete Qe[Pt],Vt.event&&Vt.event.interrupt.call(B,B.__data__,Vt.index)),Qe)if(+It<ge){var sn=Qe[It];sn.timer.c=null,sn.timer.t=NaN,--Qe.count,delete Qe[It]}Ne.c=Ot,rn(function(){return Ne.c&&Ot(Dt||1)&&(Ne.c=null,Ne.t=NaN),1},0,Ce),Qe.active=ge,ct.event&&ct.event.start.call(B,B.__data__,ee),Ye=[],ct.tween.forEach(function(Jt,Zt){(Zt=Zt.call(B,B.__data__,ee))&&Ye.push(Zt)}),Ge=ct.ease,Ue=ct.duration}function Ot(Dt){for(var Pt=Dt/Ue,Vt=Ge(Pt),It=Ye.length;It>0;)Ye[--It].call(B,Vt);if(Pt>=1)return ct.event&&ct.event.end.call(B,B.__data__,ee),--Qe.count?delete Qe[ge]:delete B[ie],1}ct||(Ce=_e.time,Ne=rn(function(Dt){var Pt=ct.delay;if(Ne.t=Pt+Ce,Pt<=Dt)return vt(Dt-Pt);Ne.c=vt},0,Ce),ct=Qe[ge]={tween:new y,time:Ce,timer:Ne,delay:_e.delay,duration:_e.duration,ease:_e.ease,index:ee},_e=null,++Qe.count)}jr.call=he.call,jr.empty=he.empty,jr.node=he.node,jr.size=he.size,l.transition=function(B,ee){return B&&B.transition?No?B.transition(ee):B:l.selection().transition(B)},l.transition.prototype=jr,jr.select=function(B){var ee,ie,ge,_e=this.id,Ce=this.namespace,Ne=[];B=de(B);for(var Ue=-1,Ge=this.length;++Ue<Ge;){Ne.push(ee=[]);for(var Ye=this[Ue],Qe=-1,ct=Ye.length;++Qe<ct;)(ge=Ye[Qe])&&(ie=B.call(ge,ge.__data__,Qe,Ue))?("__data__"in ge&&(ie.__data__=ge.__data__),ys(ie,Qe,Ce,_e,ge[Ce][_e]),ee.push(ie)):ee.push(null)}return ia(Ne,Ce,_e)},jr.selectAll=function(B){var ee,ie,ge,_e,Ce,Ne=this.id,Ue=this.namespace,Ge=[];B=xe(B);for(var Ye=-1,Qe=this.length;++Ye<Qe;)for(var ct=this[Ye],vt=-1,Ot=ct.length;++vt<Ot;)if(ge=ct[vt]){Ce=ge[Ue][Ne],ie=B.call(ge,ge.__data__,vt,Ye),Ge.push(ee=[]);for(var Dt=-1,Pt=ie.length;++Dt<Pt;)(_e=ie[Dt])&&ys(_e,Dt,Ue,Ne,Ce),ee.push(_e)}return ia(Ge,Ue,Ne)},jr.filter=function(B){var ee,ie,ge=[];typeof B!="function"&&(B=ce(B));for(var _e=0,Ce=this.length;_e<Ce;_e++){ge.push(ee=[]);for(var Ne,Ue=0,Ge=(Ne=this[_e]).length;Ue<Ge;Ue++)(ie=Ne[Ue])&&B.call(ie,ie.__data__,Ue,_e)&&ee.push(ie)}return ia(ge,this.namespace,this.id)},jr.tween=function(B,ee){var ie=this.id,ge=this.namespace;return arguments.length<2?this.node()[ge][ie].tween.get(B):ye(this,ee==null?function(_e){_e[ge][ie].tween.remove(B)}:function(_e){_e[ge][ie].tween.set(B,ee)})},jr.attr=function(B,ee){if(arguments.length<2){for(ee in B)this.attr(ee,B[ee]);return this}var ie=B=="transform"?So:eo,ge=l.ns.qualify(B);function _e(){this.removeAttribute(ge)}function Ce(){this.removeAttributeNS(ge.space,ge.local)}return oo(this,"attr."+B,ee,ge.local?function(Ne){return Ne==null?Ce:(Ne+="",function(){var Ue,Ge=this.getAttributeNS(ge.space,ge.local);return Ge!==Ne&&(Ue=ie(Ge,Ne),function(Ye){this.setAttributeNS(ge.space,ge.local,Ue(Ye))})})}:function(Ne){return Ne==null?_e:(Ne+="",function(){var Ue,Ge=this.getAttribute(ge);return Ge!==Ne&&(Ue=ie(Ge,Ne),function(Ye){this.setAttribute(ge,Ue(Ye))})})})},jr.attrTween=function(B,ee){var ie=l.ns.qualify(B);return this.tween("attr."+B,ie.local?function(ge,_e){var Ce=ee.call(this,ge,_e,this.getAttributeNS(ie.space,ie.local));return Ce&&function(Ne){this.setAttributeNS(ie.space,ie.local,Ce(Ne))}}:function(ge,_e){var Ce=ee.call(this,ge,_e,this.getAttribute(ie));return Ce&&function(Ne){this.setAttribute(ie,Ce(Ne))}})},jr.style=function(B,ee,ie){var ge=arguments.length;if(ge<3){if(typeof B!="string"){for(ie in ge<2&&(ee=""),B)this.style(ie,B[ie],ee);return this}ie=""}function _e(){this.style.removeProperty(B)}return oo(this,"style."+B,ee,function(Ce){return Ce==null?_e:(Ce+="",function(){var Ne,Ue=e(this).getComputedStyle(this,null).getPropertyValue(B);return Ue!==Ce&&(Ne=eo(Ue,Ce),function(Ge){this.style.setProperty(B,Ne(Ge),ie)})})})},jr.styleTween=function(B,ee,ie){return arguments.length<3&&(ie=""),this.tween("style."+B,function(ge,_e){var Ce=ee.call(this,ge,_e,e(this).getComputedStyle(this,null).getPropertyValue(B));return Ce&&function(Ne){this.style.setProperty(B,Ce(Ne),ie)}})},jr.text=function(B){return oo(this,"text",B,Ta)},jr.remove=function(){var B=this.namespace;return this.each("end.transition",function(){var ee;this[B].count<2&&(ee=this.parentNode)&&ee.removeChild(this)})},jr.ease=function(B){var ee=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][ee].ease:(typeof B!="function"&&(B=l.ease.apply(l,arguments)),ye(this,function(ge){ge[ie][ee].ease=B}))},jr.delay=function(B){var ee=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][ee].delay:ye(this,typeof B=="function"?function(ge,_e,Ce){ge[ie][ee].delay=+B.call(ge,ge.__data__,_e,Ce)}:(B=+B,function(ge){ge[ie][ee].delay=B}))},jr.duration=function(B){var ee=this.id,ie=this.namespace;return arguments.length<1?this.node()[ie][ee].duration:ye(this,typeof B=="function"?function(ge,_e,Ce){ge[ie][ee].duration=Math.max(1,B.call(ge,ge.__data__,_e,Ce))}:(B=Math.max(1,B),function(ge){ge[ie][ee].duration=B}))},jr.each=function(B,ee){var ie=this.id,ge=this.namespace;if(arguments.length<2){var _e=jo,Ce=No;try{No=ie,ye(this,function(Ne,Ue,Ge){jo=Ne[ge][ie],B.call(Ne,Ne.__data__,Ue,Ge)})}finally{jo=_e,No=Ce}}else ye(this,function(Ne){var Ue=Ne[ge][ie];(Ue.event||(Ue.event=l.dispatch("start","end","interrupt"))).on(B,ee)});return this},jr.transition=function(){for(var B,ee,ie,ge=this.id,_e=++Gi,Ce=this.namespace,Ne=[],Ue=0,Ge=this.length;Ue<Ge;Ue++){Ne.push(B=[]);for(var Ye,Qe=0,ct=(Ye=this[Ue]).length;Qe<ct;Qe++)(ee=Ye[Qe])&&ys(ee,Qe,Ce,_e,{time:(ie=ee[Ce][ge]).time,ease:ie.ease,delay:ie.delay+ie.duration,duration:ie.duration}),B.push(ee)}return ia(Ne,Ce,_e)},l.svg.axis=function(){var B,ee=l.scale.linear(),ie=os,ge=6,_e=6,Ce=3,Ne=[10],Ue=null;function Ge(Ye){Ye.each(function(){var Qe,ct=l.select(this),vt=this.__chart__||ee,Ot=this.__chart__=ee.copy(),Dt=Ue??(Ot.ticks?Ot.ticks.apply(Ot,Ne):Ot.domain()),Pt=B??(Ot.tickFormat?Ot.tickFormat.apply(Ot,Ne):I),Vt=ct.selectAll(".tick").data(Dt,Ot),It=Vt.enter().insert("g",".domain").attr("class","tick").style("opacity",ot),sn=l.transition(Vt.exit()).style("opacity",ot).remove(),Jt=l.transition(Vt.order()).style("opacity",1),Zt=Math.max(ge,0)+Ce,Mn=yo(Ot),kn=ct.selectAll(".domain").data([0]),Yn=(kn.enter().append("path").attr("class","domain"),l.transition(kn));It.append("line"),It.append("text");var Zn,nr,sr,dr,hr=It.select("line"),yr=Jt.select("line"),Mr=Vt.select("text").text(Pt),Fr=It.select("text"),Jn=Jt.select("text"),fr=ie==="top"||ie==="left"?-1:1;if(ie==="bottom"||ie==="top"?(Qe=R,Zn="x",sr="y",nr="x2",dr="y2",Mr.attr("dy",fr<0?"0em":".71em").style("text-anchor","middle"),Yn.attr("d","M"+Mn[0]+","+fr*_e+"V0H"+Mn[1]+"V"+fr*_e)):(Qe=U,Zn="y",sr="x",nr="y2",dr="x2",Mr.attr("dy",".32em").style("text-anchor",fr<0?"end":"start"),Yn.attr("d","M"+fr*_e+","+Mn[0]+"H0V"+Mn[1]+"H"+fr*_e)),hr.attr(dr,fr*ge),Fr.attr(sr,fr*Zt),yr.attr(nr,0).attr(dr,fr*ge),Jn.attr(Zn,0).attr(sr,fr*Zt),Ot.rangeBand){var xr=Ot,Ar=xr.rangeBand()/2;vt=Ot=function(zr){return xr(zr)+Ar}}else vt.rangeBand?vt=Ot:sn.call(Qe,Ot,vt);It.call(Qe,vt,Ot),Jt.call(Qe,Ot,Ot)})}return Ge.scale=function(Ye){return arguments.length?(ee=Ye,Ge):ee},Ge.orient=function(Ye){return arguments.length?(ie=Ye in _o?Ye+"":os,Ge):ie},Ge.ticks=function(){return arguments.length?(Ne=m(arguments),Ge):Ne},Ge.tickValues=function(Ye){return arguments.length?(Ue=Ye,Ge):Ue},Ge.tickFormat=function(Ye){return arguments.length?(B=Ye,Ge):B},Ge.tickSize=function(Ye){var Qe=arguments.length;return Qe?(ge=+Ye,_e=+arguments[Qe-1],Ge):ge},Ge.innerTickSize=function(Ye){return arguments.length?(ge=+Ye,Ge):ge},Ge.outerTickSize=function(Ye){return arguments.length?(_e=+Ye,Ge):_e},Ge.tickPadding=function(Ye){return arguments.length?(Ce=+Ye,Ge):Ce},Ge.tickSubdivide=function(){return arguments.length&&Ge},Ge};var os="bottom",_o={top:1,right:1,bottom:1,left:1};function R(B,ee,ie){B.attr("transform",function(ge){var _e=ee(ge);return"translate("+(isFinite(_e)?_e:ie(ge))+",0)"})}function U(B,ee,ie){B.attr("transform",function(ge){var _e=ee(ge);return"translate(0,"+(isFinite(_e)?_e:ie(ge))+")"})}l.svg.brush=function(){var B,ee,ie=q(Qe,"brushstart","brush","brushend"),ge=null,_e=null,Ce=[0,0],Ne=[0,0],Ue=!0,Ge=!0,Ye=K[0];function Qe(Pt){Pt.each(function(){var Vt=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Dt).on("touchstart.brush",Dt),It=Vt.selectAll(".background").data([0]);It.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Vt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var sn=Vt.selectAll(".resize").data(Ye,I);sn.exit().remove(),sn.enter().append("g").attr("class",function(kn){return"resize "+kn}).style("cursor",function(kn){return j[kn]}).append("rect").attr("x",function(kn){return/[ew]$/.test(kn)?-3:null}).attr("y",function(kn){return/^[ns]/.test(kn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),sn.style("display",Qe.empty()?"none":null);var Jt,Zt=l.transition(Vt),Mn=l.transition(It);ge&&(Jt=yo(ge),Mn.attr("x",Jt[0]).attr("width",Jt[1]-Jt[0]),vt(Zt)),_e&&(Jt=yo(_e),Mn.attr("y",Jt[0]).attr("height",Jt[1]-Jt[0]),Ot(Zt)),ct(Zt)})}function ct(Pt){Pt.selectAll(".resize").attr("transform",function(Vt){return"translate("+Ce[+/e$/.test(Vt)]+","+Ne[+/^s/.test(Vt)]+")"})}function vt(Pt){Pt.select(".extent").attr("x",Ce[0]),Pt.selectAll(".extent,.n>rect,.s>rect").attr("width",Ce[1]-Ce[0])}function Ot(Pt){Pt.select(".extent").attr("y",Ne[0]),Pt.selectAll(".extent,.e>rect,.w>rect").attr("height",Ne[1]-Ne[0])}function Dt(){var Pt,Vt,It=this,sn=l.select(l.event.target),Jt=ie.of(It,arguments),Zt=l.select(It),Mn=sn.datum(),kn=!/^(n|s)$/.test(Mn)&&ge,Yn=!/^(e|w)$/.test(Mn)&&_e,Zn=sn.classed("extent"),nr=yt(It),sr=l.mouse(It),dr=l.select(e(It)).on("keydown.brush",function(){l.event.keyCode==32&&(Zn||(Pt=null,sr[0]-=Ce[1],sr[1]-=Ne[1],Zn=2),Q())}).on("keyup.brush",function(){l.event.keyCode==32&&Zn==2&&(sr[0]+=Ce[1],sr[1]+=Ne[1],Zn=0,Q())});if(l.event.changedTouches?dr.on("touchmove.brush",Mr).on("touchend.brush",Jn):dr.on("mousemove.brush",Mr).on("mouseup.brush",Jn),Zt.interrupt().selectAll("*").interrupt(),Zn)sr[0]=Ce[0]-sr[0],sr[1]=Ne[0]-sr[1];else if(Mn){var hr=+/w$/.test(Mn),yr=+/^n/.test(Mn);Vt=[Ce[1-hr]-sr[0],Ne[1-yr]-sr[1]],sr[0]=Ce[hr],sr[1]=Ne[yr]}else l.event.altKey&&(Pt=sr.slice());function Mr(){var fr=l.mouse(It),xr=!1;Vt&&(fr[0]+=Vt[0],fr[1]+=Vt[1]),Zn||(l.event.altKey?(Pt||(Pt=[(Ce[0]+Ce[1])/2,(Ne[0]+Ne[1])/2]),sr[0]=Ce[+(fr[0]<Pt[0])],sr[1]=Ne[+(fr[1]<Pt[1])]):Pt=null),kn&&Fr(fr,ge,0)&&(vt(Zt),xr=!0),Yn&&Fr(fr,_e,1)&&(Ot(Zt),xr=!0),xr&&(ct(Zt),Jt({type:"brush",mode:Zn?"move":"resize"}))}function Fr(fr,xr,Ar){var zr,Hr,Kr=yo(xr),ri=Kr[0],vi=Kr[1],mi=sr[Ar],ii=Ar?Ne:Ce,Pi=ii[1]-ii[0];if(Zn&&(ri-=mi,vi-=Pi+mi),zr=(Ar?Ge:Ue)?Math.max(ri,Math.min(vi,fr[Ar])):fr[Ar],Zn?Hr=(zr+=mi)+Pi:(Pt&&(mi=Math.max(ri,Math.min(vi,2*Pt[Ar]-zr))),mi<zr?(Hr=zr,zr=mi):Hr=mi),ii[0]!=zr||ii[1]!=Hr)return Ar?ee=null:B=null,ii[0]=zr,ii[1]=Hr,!0}function Jn(){Mr(),Zt.style("pointer-events","all").selectAll(".resize").style("display",Qe.empty()?"none":null),l.select("body").style("cursor",null),dr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),nr(),Jt({type:"brushend"})}Zt.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",sn.style("cursor")),Jt({type:"brushstart"}),Mr()}return Qe.event=function(Pt){Pt.each(function(){var Vt=ie.of(this,arguments),It={x:Ce,y:Ne,i:B,j:ee},sn=this.__chart__||It;this.__chart__=It,No?l.select(this).transition().each("start.brush",function(){B=sn.i,ee=sn.j,Ce=sn.x,Ne=sn.y,Vt({type:"brushstart"})}).tween("brush:brush",function(){var Jt=Ri(Ce,It.x),Zt=Ri(Ne,It.y);return B=ee=null,function(Mn){Ce=It.x=Jt(Mn),Ne=It.y=Zt(Mn),Vt({type:"brush",mode:"resize"})}}).each("end.brush",function(){B=It.i,ee=It.j,Vt({type:"brush",mode:"resize"}),Vt({type:"brushend"})}):(Vt({type:"brushstart"}),Vt({type:"brush",mode:"resize"}),Vt({type:"brushend"}))})},Qe.x=function(Pt){return arguments.length?(Ye=K[!(ge=Pt)<<1|!_e],Qe):ge},Qe.y=function(Pt){return arguments.length?(Ye=K[!ge<<1|!(_e=Pt)],Qe):_e},Qe.clamp=function(Pt){return arguments.length?(ge&&_e?(Ue=!!Pt[0],Ge=!!Pt[1]):ge?Ue=!!Pt:_e&&(Ge=!!Pt),Qe):ge&&_e?[Ue,Ge]:ge?Ue:_e?Ge:null},Qe.extent=function(Pt){var Vt,It,sn,Jt,Zt;return arguments.length?(ge&&(Vt=Pt[0],It=Pt[1],_e&&(Vt=Vt[0],It=It[0]),B=[Vt,It],ge.invert&&(Vt=ge(Vt),It=ge(It)),It<Vt&&(Zt=Vt,Vt=It,It=Zt),Vt==Ce[0]&&It==Ce[1]||(Ce=[Vt,It])),_e&&(sn=Pt[0],Jt=Pt[1],ge&&(sn=sn[1],Jt=Jt[1]),ee=[sn,Jt],_e.invert&&(sn=_e(sn),Jt=_e(Jt)),Jt<sn&&(Zt=sn,sn=Jt,Jt=Zt),sn==Ne[0]&&Jt==Ne[1]||(Ne=[sn,Jt])),Qe):(ge&&(B?(Vt=B[0],It=B[1]):(Vt=Ce[0],It=Ce[1],ge.invert&&(Vt=ge.invert(Vt),It=ge.invert(It)),It<Vt&&(Zt=Vt,Vt=It,It=Zt))),_e&&(ee?(sn=ee[0],Jt=ee[1]):(sn=Ne[0],Jt=Ne[1],_e.invert&&(sn=_e.invert(sn),Jt=_e.invert(Jt)),Jt<sn&&(Zt=sn,sn=Jt,Jt=Zt))),ge&&_e?[[Vt,sn],[It,Jt]]:ge?[Vt,It]:_e&&[sn,Jt])},Qe.clear=function(){return Qe.empty()||(Ce=[0,0],Ne=[0,0],B=ee=null),Qe},Qe.empty=function(){return!!ge&&Ce[0]==Ce[1]||!!_e&&Ne[0]==Ne[1]},l.rebind(Qe,ie,"on")};var j={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},K=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function pe(B){return JSON.parse(B.responseText)}function ke(B){var ee=f.createRange();return ee.selectNode(f.body),ee.createContextualFragment(B.responseText)}l.text=tr(function(B){return B.responseText}),l.json=function(B,ee){return ur(B,"application/json",pe,ee)},l.html=function(B,ee){return ur(B,"text/html",ke,ee)},l.xml=tr(function(B){return B.responseXML}),(M=typeof(A=l)=="function"?A.call(P,t,P,$):A)===void 0||($.exports=M)}).apply(self)},88294:function($,P,t){$.exports=t(62849)},62849:function($,P,t){var A=t(91358),M=t(53435),l=t(18863),_=t(21527),m=t(71299),f=t(46775),o=t(30120),e=t(64941),i=t(90660),r=t(27084);function n(s,a){for(var u=a[0],p=a[1],c=1/(a[2]-u),x=1/(a[3]-p),g=new Array(s.length),h=0,b=s.length/2;h<b;h++)g[2*h]=M((s[2*h]-u)*c,0,1),g[2*h+1]=M((s[2*h+1]-p)*x,0,1);return g}$.exports=function(s,a){a||(a={}),s=o(s,"float64"),a=m(a,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var u=f(a.maxDepth,255),p=f(a.bounds,_(s,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var c,x=n(s,p),g=s.length>>>1;a.dtype||(a.dtype="array"),typeof a.dtype=="string"?c=new(i(a.dtype))(g):a.dtype&&(c=a.dtype,Array.isArray(c)&&(c.length=g));for(var h=0;h<g;++h)c[h]=h;var b=[],v=[],y=[],w=[];(function z(G,I,H,N,F,V){if(!N.length)return null;var W=b[F]||(b[F]=[]),te=y[F]||(y[F]=[]),Q=v[F]||(v[F]=[]),X=W.length;if(++F>u||V>1073741824){for(var q=0;q<N.length;q++)W.push(N[q]),te.push(V),Q.push(null,null,null,null);return X}if(W.push(N[0]),te.push(V),N.length<=1)return Q.push(null,null,null,null),X;for(var Z=.5*H,J=G+Z,ne=I+Z,re=[],ae=[],ue=[],he=[],de=1,xe=N.length;de<xe;de++){var me=N[de],ve=x[2*me],Le=x[2*me+1];ve<J?Le<ne?re.push(me):ae.push(me):Le<ne?ue.push(me):he.push(me)}return V<<=2,Q.push(z(G,I,Z,re,F,V),z(G,ne,Z,ae,F,V+1),z(J,I,Z,ue,F,V+2),z(J,ne,Z,he,F,V+3)),X})(0,0,1,c,0,1);for(var d=0,S=0;S<b.length;S++){var T=b[S];if(c.set)c.set(T,d);else for(var E=0,C=T.length;E<C;E++)c[E+d]=T[E];var L=d+b[S].length;w[S]=[d,L],d=L}return c.range=function(){for(var z,G=[],I=arguments.length;I--;)G[I]=arguments[I];if(e(G[G.length-1])){var H=G.pop();G.length||H.x==null&&H.l==null&&H.left==null||(G=[H],z={}),z=m(H,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else z={};G.length||(G=p);var N,F=l.apply(void 0,G),V=[Math.min(F.x,F.x+F.width),Math.min(F.y,F.y+F.height),Math.max(F.x,F.x+F.width),Math.max(F.y,F.y+F.height)],W=V[0],te=V[1],Q=V[2],X=V[3],q=n([W,te,Q,X],p),Z=q[0],J=q[1],ne=q[2],re=q[3],ae=f(z.level,b.length);if(z.d!=null&&(typeof z.d=="number"?N=[z.d,z.d]:z.d.length&&(N=z.d),ae=Math.min(Math.max(Math.ceil(-r(Math.abs(N[0])/(p[2]-p[0]))),Math.ceil(-r(Math.abs(N[1])/(p[3]-p[1])))),ae)),ae=Math.min(ae,b.length),z.lod)return function(he,de,xe,me,ve){for(var Le=[],Ae=0;Ae<ve;Ae++){var we=y[Ae],se=w[Ae][0],oe=O(he,de,Ae),fe=O(xe,me,Ae),Se=A.ge(we,oe),Me=A.gt(we,fe,Se,we.length-1);Le[Ae]=[Se+se,Me+se]}return Le}(Z,J,ne,re,ae);var ue=[];return function he(de,xe,me,ve,Le,Ae){if(Le!==null&&Ae!==null&&!(Z>de+me||J>xe+me||ne<de||re<xe||ve>=ae||Le===Ae)){var we=b[ve];Ae===void 0&&(Ae=we.length);for(var se=Le;se<Ae;se++){var oe=we[se],fe=s[2*oe],Se=s[2*oe+1];fe>=W&&fe<=Q&&Se>=te&&Se<=X&&ue.push(oe)}var Me=v[ve],be=Me[4*Le+0],Ie=Me[4*Le+1],Be=Me[4*Le+2],ce=Me[4*Le+3],Te=function(Re,ze){for(var He=null,We=0;He===null;)if(He=Re[4*ze+We],++We>Re.length)return null;return He}(Me,Le+1),ye=.5*me,Pe=ve+1;he(de,xe,ye,Pe,be,Ie||Be||ce||Te),he(de,xe+ye,ye,Pe,Ie,Be||ce||Te),he(de+ye,xe,ye,Pe,Be,ce||Te),he(de+ye,xe+ye,ye,Pe,ce,Te)}}(0,0,1,0,0,1),ue},c;function O(z,G,I){for(var H=1,N=.5,F=.5,V=.5,W=0;W<I;W++)H<<=2,H+=z<N?G<F?0:1:G<F?2:3,V*=.5,N+=z<N?-V:V,F+=G<F?-V:V;return H}}},30774:function($,P,t){Object.defineProperty(P,"__esModule",{value:!0});var A=t(60302),M=6378137;function l(f){var o=0;if(f&&f.length>0){o+=Math.abs(_(f[0]));for(var e=1;e<f.length;e++)o-=Math.abs(_(f[e]))}return o}function _(f){var o,e,i,r,n,s,a=0,u=f.length;if(u>2){for(s=0;s<u;s++)s===u-2?(i=u-2,r=u-1,n=0):s===u-1?(i=u-1,r=0,n=1):(i=s,r=s+1,n=s+2),o=f[i],e=f[r],a+=(m(f[n][0])-m(o[0]))*Math.sin(m(e[1]));a=a*M*M/2}return a}function m(f){return f*Math.PI/180}P.default=function(f){return A.geomReduce(f,function(o,e){return o+function(i){var r,n=0;switch(i.type){case"Polygon":return l(i.coordinates);case"MultiPolygon":for(r=0;r<i.coordinates.length;r++)n+=l(i.coordinates[r]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(e)},0)}},23132:function($,P){function t(s,a,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=a||{},p.geometry=s,p}function A(s,a,u){if(u===void 0&&(u={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(s[0])||!n(s[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:s},a,u)}function M(s,a,u){u===void 0&&(u={});for(var p=0,c=s;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:s},a,u)}function l(s,a,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:s},a,u)}function _(s,a){a===void 0&&(a={});var u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=s,u}function m(s,a,u){return u===void 0&&(u={}),t({type:"MultiLineString",coordinates:s},a,u)}function f(s,a,u){return u===void 0&&(u={}),t({type:"MultiPoint",coordinates:s},a,u)}function o(s,a,u){return u===void 0&&(u={}),t({type:"MultiPolygon",coordinates:s},a,u)}function e(s,a){a===void 0&&(a="kilometers");var u=P.factors[a];if(!u)throw new Error(a+" units is invalid");return s*u}function i(s,a){a===void 0&&(a="kilometers");var u=P.factors[a];if(!u)throw new Error(a+" units is invalid");return s/u}function r(s){return s%(2*Math.PI)*180/Math.PI}function n(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}Object.defineProperty(P,"__esModule",{value:!0}),P.earthRadius=63710088e-1,P.factors={centimeters:100*P.earthRadius,centimetres:100*P.earthRadius,degrees:P.earthRadius/111325,feet:3.28084*P.earthRadius,inches:39.37*P.earthRadius,kilometers:P.earthRadius/1e3,kilometres:P.earthRadius/1e3,meters:P.earthRadius,metres:P.earthRadius,miles:P.earthRadius/1609.344,millimeters:1e3*P.earthRadius,millimetres:1e3*P.earthRadius,nauticalmiles:P.earthRadius/1852,radians:1,yards:1.0936*P.earthRadius},P.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/P.earthRadius,yards:1.0936133},P.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},P.feature=t,P.geometry=function(s,a,u){switch(s){case"Point":return A(a).geometry;case"LineString":return l(a).geometry;case"Polygon":return M(a).geometry;case"MultiPoint":return f(a).geometry;case"MultiLineString":return m(a).geometry;case"MultiPolygon":return o(a).geometry;default:throw new Error(s+" is invalid")}},P.point=A,P.points=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return A(p,a)}),u)},P.polygon=M,P.polygons=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return M(p,a)}),u)},P.lineString=l,P.lineStrings=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return l(p,a)}),u)},P.featureCollection=_,P.multiLineString=m,P.multiPoint=f,P.multiPolygon=o,P.geometryCollection=function(s,a,u){return u===void 0&&(u={}),t({type:"GeometryCollection",geometries:s},a,u)},P.round=function(s,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,a||0);return Math.round(s*u)/u},P.radiansToLength=e,P.lengthToRadians=i,P.lengthToDegrees=function(s,a){return r(i(s,a))},P.bearingToAzimuth=function(s){var a=s%360;return a<0&&(a+=360),a},P.radiansToDegrees=r,P.degreesToRadians=function(s){return s%360*Math.PI/180},P.convertLength=function(s,a,u){if(a===void 0&&(a="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return e(i(s,a),u)},P.convertArea=function(s,a,u){if(a===void 0&&(a="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=P.areaFactors[a];if(!p)throw new Error("invalid original units");var c=P.areaFactors[u];if(!c)throw new Error("invalid final units");return s/p*c},P.isNumber=n,P.isObject=function(s){return!!s&&s.constructor===Object},P.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(a){if(!n(a))throw new Error("bbox must only contain numbers")})},P.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}},60302:function($,P,t){Object.defineProperty(P,"__esModule",{value:!0});var A=t(23132);function M(i,r,n){if(i!==null)for(var s,a,u,p,c,x,g,h,b=0,v=0,y=i.type,w=y==="FeatureCollection",d=y==="Feature",S=w?i.features.length:1,T=0;T<S;T++){c=(h=!!(g=w?i.features[T].geometry:d?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var C=0,L=0;if((p=h?g.geometries[E]:g)!==null){x=p.coordinates;var O=p.type;switch(b=!n||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(x,v,T,C,L)===!1)return!1;v++,C++;break;case"LineString":case"MultiPoint":for(s=0;s<x.length;s++){if(r(x[s],v,T,C,L)===!1)return!1;v++,O==="MultiPoint"&&C++}O==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(s=0;s<x.length;s++){for(a=0;a<x[s].length-b;a++){if(r(x[s][a],v,T,C,L)===!1)return!1;v++}O==="MultiLineString"&&C++,O==="Polygon"&&L++}O==="Polygon"&&C++;break;case"MultiPolygon":for(s=0;s<x.length;s++){for(L=0,a=0;a<x[s].length;a++){for(u=0;u<x[s][a].length-b;u++){if(r(x[s][a][u],v,T,C,L)===!1)return!1;v++}L++}C++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(M(p.geometries[s],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function _(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function m(i,r){var n,s,a,u,p,c,x,g,h,b,v=0,y=i.type==="FeatureCollection",w=i.type==="Feature",d=y?i.features.length:1;for(n=0;n<d;n++){for(c=y?i.features[n].geometry:w?i.geometry:i,g=y?i.features[n].properties:w?i.properties:{},h=y?i.features[n].bbox:w?i.bbox:void 0,b=y?i.features[n].id:w?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,a=0;a<p;a++)if((u=x?c.geometries[a]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,h,b)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(r(u.geometries[s],v,g,h,b)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,h,b)===!1)return!1;v++}}function f(i,r){m(i,function(n,s,a,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(A.feature(n,a,{bbox:u,id:p}),s,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var h={type:c,coordinates:n.coordinates[g]};if(r(A.feature(h,a),s,g)===!1)return!1}})}function o(i,r){f(i,function(n,s,a){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,h=0;return M(n,function(b,v,y,w,d){if(c===void 0||s>x||w>g||d>h)return c=b,x=s,g=w,h=d,void(u=0);var S=A.lineString([c,b],n.properties);if(r(S,s,a,d,u)===!1)return!1;u++,c=b})!==!1&&void 0}}})}function e(i,r){if(!i)throw new Error("geojson is required");f(i,function(n,s,a){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,s,a,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(A.lineString(p[c],n.properties),s,a,c)===!1)return!1}}})}P.coordEach=M,P.coordReduce=function(i,r,n,s){var a=n;return M(i,function(u,p,c,x,g){a=p===0&&n===void 0?u:r(a,u,p,c,x,g)},s),a},P.propEach=l,P.propReduce=function(i,r,n){var s=n;return l(i,function(a,u){s=u===0&&n===void 0?a:r(s,a,u)}),s},P.featureEach=_,P.featureReduce=function(i,r,n){var s=n;return _(i,function(a,u){s=u===0&&n===void 0?a:r(s,a,u)}),s},P.coordAll=function(i){var r=[];return M(i,function(n){r.push(n)}),r},P.geomEach=m,P.geomReduce=function(i,r,n){var s=n;return m(i,function(a,u,p,c,x){s=u===0&&n===void 0?a:r(s,a,u,p,c,x)}),s},P.flattenEach=f,P.flattenReduce=function(i,r,n){var s=n;return f(i,function(a,u,p){s=u===0&&p===0&&n===void 0?a:r(s,a,u,p)}),s},P.segmentEach=o,P.segmentReduce=function(i,r,n){var s=n,a=!1;return o(i,function(u,p,c,x,g){s=a===!1&&n===void 0?u:r(s,u,p,c,x,g),a=!0}),s},P.lineEach=e,P.lineReduce=function(i,r,n){var s=n;return e(i,function(a,u,p,c){s=u===0&&n===void 0?a:r(s,a,u,p,c)}),s},P.findSegment=function(i,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,s=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,n=i.features[s].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),A.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),A.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p-1),A.lineString([x[a][p],x[a][p+1]],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p-1),A.lineString([x[a][u][p],x[a][u][p+1]],c,r)}throw new Error("geojson is invalid")},P.findPoint=function(i,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,s=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,n=i.features[s].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return A.point(x,c,r);case"MultiPoint":return a<0&&(a=x.length+a),A.point(x[a],c,r);case"LineString":return p<0&&(p=x.length+p),A.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),A.point(x[u][p],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p),A.point(x[a][p],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p),A.point(x[a][u][p],c,r)}throw new Error("geojson is invalid")}},85268:function($,P,t){Object.defineProperty(P,"__esModule",{value:!0});var A=t(27138);function M(l){var _=[1/0,1/0,-1/0,-1/0];return A.coordEach(l,function(m){_[0]>m[0]&&(_[0]=m[0]),_[1]>m[1]&&(_[1]=m[1]),_[2]<m[0]&&(_[2]=m[0]),_[3]<m[1]&&(_[3]=m[1])}),_}M.default=M,P.default=M},94228:function($,P){function t(s,a,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=a||{},p.geometry=s,p}function A(s,a,u){if(u===void 0&&(u={}),!s)throw new Error("coordinates is required");if(!Array.isArray(s))throw new Error("coordinates must be an Array");if(s.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n(s[0])||!n(s[1]))throw new Error("coordinates must contain numbers");return t({type:"Point",coordinates:s},a,u)}function M(s,a,u){u===void 0&&(u={});for(var p=0,c=s;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:s},a,u)}function l(s,a,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:s},a,u)}function _(s,a){a===void 0&&(a={});var u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=s,u}function m(s,a,u){return u===void 0&&(u={}),t({type:"MultiLineString",coordinates:s},a,u)}function f(s,a,u){return u===void 0&&(u={}),t({type:"MultiPoint",coordinates:s},a,u)}function o(s,a,u){return u===void 0&&(u={}),t({type:"MultiPolygon",coordinates:s},a,u)}function e(s,a){a===void 0&&(a="kilometers");var u=P.factors[a];if(!u)throw new Error(a+" units is invalid");return s*u}function i(s,a){a===void 0&&(a="kilometers");var u=P.factors[a];if(!u)throw new Error(a+" units is invalid");return s/u}function r(s){return s%(2*Math.PI)*180/Math.PI}function n(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)}Object.defineProperty(P,"__esModule",{value:!0}),P.earthRadius=63710088e-1,P.factors={centimeters:100*P.earthRadius,centimetres:100*P.earthRadius,degrees:P.earthRadius/111325,feet:3.28084*P.earthRadius,inches:39.37*P.earthRadius,kilometers:P.earthRadius/1e3,kilometres:P.earthRadius/1e3,meters:P.earthRadius,metres:P.earthRadius,miles:P.earthRadius/1609.344,millimeters:1e3*P.earthRadius,millimetres:1e3*P.earthRadius,nauticalmiles:P.earthRadius/1852,radians:1,yards:1.0936*P.earthRadius},P.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/P.earthRadius,yards:1.0936133},P.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},P.feature=t,P.geometry=function(s,a,u){switch(s){case"Point":return A(a).geometry;case"LineString":return l(a).geometry;case"Polygon":return M(a).geometry;case"MultiPoint":return f(a).geometry;case"MultiLineString":return m(a).geometry;case"MultiPolygon":return o(a).geometry;default:throw new Error(s+" is invalid")}},P.point=A,P.points=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return A(p,a)}),u)},P.polygon=M,P.polygons=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return M(p,a)}),u)},P.lineString=l,P.lineStrings=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return l(p,a)}),u)},P.featureCollection=_,P.multiLineString=m,P.multiPoint=f,P.multiPolygon=o,P.geometryCollection=function(s,a,u){return u===void 0&&(u={}),t({type:"GeometryCollection",geometries:s},a,u)},P.round=function(s,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,a||0);return Math.round(s*u)/u},P.radiansToLength=e,P.lengthToRadians=i,P.lengthToDegrees=function(s,a){return r(i(s,a))},P.bearingToAzimuth=function(s){var a=s%360;return a<0&&(a+=360),a},P.radiansToDegrees=r,P.degreesToRadians=function(s){return s%360*Math.PI/180},P.convertLength=function(s,a,u){if(a===void 0&&(a="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return e(i(s,a),u)},P.convertArea=function(s,a,u){if(a===void 0&&(a="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=P.areaFactors[a];if(!p)throw new Error("invalid original units");var c=P.areaFactors[u];if(!c)throw new Error("invalid final units");return s/p*c},P.isNumber=n,P.isObject=function(s){return!!s&&s.constructor===Object},P.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(a){if(!n(a))throw new Error("bbox must only contain numbers")})},P.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")}},27138:function($,P,t){Object.defineProperty(P,"__esModule",{value:!0});var A=t(94228);function M(i,r,n){if(i!==null)for(var s,a,u,p,c,x,g,h,b=0,v=0,y=i.type,w=y==="FeatureCollection",d=y==="Feature",S=w?i.features.length:1,T=0;T<S;T++){c=(h=!!(g=w?i.features[T].geometry:d?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var C=0,L=0;if((p=h?g.geometries[E]:g)!==null){x=p.coordinates;var O=p.type;switch(b=!n||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(x,v,T,C,L)===!1)return!1;v++,C++;break;case"LineString":case"MultiPoint":for(s=0;s<x.length;s++){if(r(x[s],v,T,C,L)===!1)return!1;v++,O==="MultiPoint"&&C++}O==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(s=0;s<x.length;s++){for(a=0;a<x[s].length-b;a++){if(r(x[s][a],v,T,C,L)===!1)return!1;v++}O==="MultiLineString"&&C++,O==="Polygon"&&L++}O==="Polygon"&&C++;break;case"MultiPolygon":for(s=0;s<x.length;s++){for(L=0,a=0;a<x[s].length;a++){for(u=0;u<x[s][a].length-b;u++){if(r(x[s][a][u],v,T,C,L)===!1)return!1;v++}L++}C++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(M(p.geometries[s],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function _(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function m(i,r){var n,s,a,u,p,c,x,g,h,b,v=0,y=i.type==="FeatureCollection",w=i.type==="Feature",d=y?i.features.length:1;for(n=0;n<d;n++){for(c=y?i.features[n].geometry:w?i.geometry:i,g=y?i.features[n].properties:w?i.properties:{},h=y?i.features[n].bbox:w?i.bbox:void 0,b=y?i.features[n].id:w?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,a=0;a<p;a++)if((u=x?c.geometries[a]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,h,b)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(r(u.geometries[s],v,g,h,b)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,h,b)===!1)return!1;v++}}function f(i,r){m(i,function(n,s,a,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(A.feature(n,a,{bbox:u,id:p}),s,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var h={type:c,coordinates:n.coordinates[g]};if(r(A.feature(h,a),s,g)===!1)return!1}})}function o(i,r){f(i,function(n,s,a){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,h=0;return M(n,function(b,v,y,w,d){if(c===void 0||s>x||w>g||d>h)return c=b,x=s,g=w,h=d,void(u=0);var S=A.lineString([c,b],n.properties);if(r(S,s,a,d,u)===!1)return!1;u++,c=b})!==!1&&void 0}}})}function e(i,r){if(!i)throw new Error("geojson is required");f(i,function(n,s,a){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,s,a,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(A.lineString(p[c],n.properties),s,a,c)===!1)return!1}}})}P.coordEach=M,P.coordReduce=function(i,r,n,s){var a=n;return M(i,function(u,p,c,x,g){a=p===0&&n===void 0?u:r(a,u,p,c,x,g)},s),a},P.propEach=l,P.propReduce=function(i,r,n){var s=n;return l(i,function(a,u){s=u===0&&n===void 0?a:r(s,a,u)}),s},P.featureEach=_,P.featureReduce=function(i,r,n){var s=n;return _(i,function(a,u){s=u===0&&n===void 0?a:r(s,a,u)}),s},P.coordAll=function(i){var r=[];return M(i,function(n){r.push(n)}),r},P.geomEach=m,P.geomReduce=function(i,r,n){var s=n;return m(i,function(a,u,p,c,x){s=u===0&&n===void 0?a:r(s,a,u,p,c,x)}),s},P.flattenEach=f,P.flattenReduce=function(i,r,n){var s=n;return f(i,function(a,u,p){s=u===0&&p===0&&n===void 0?a:r(s,a,u,p)}),s},P.segmentEach=o,P.segmentReduce=function(i,r,n){var s=n,a=!1;return o(i,function(u,p,c,x,g){s=a===!1&&n===void 0?u:r(s,u,p,c,x,g),a=!0}),s},P.lineEach=e,P.lineReduce=function(i,r,n){var s=n;return e(i,function(a,u,p,c){s=u===0&&n===void 0?a:r(s,a,u,p,c)}),s},P.findSegment=function(i,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,s=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,n=i.features[s].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),A.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),A.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p-1),A.lineString([x[a][p],x[a][p+1]],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p-1),A.lineString([x[a][u][p],x[a][u][p+1]],c,r)}throw new Error("geojson is invalid")},P.findPoint=function(i,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,s=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,n=i.features[s].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return A.point(x,c,r);case"MultiPoint":return a<0&&(a=x.length+a),A.point(x[a],c,r);case"LineString":return p<0&&(p=x.length+p),A.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),A.point(x[u][p],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p),A.point(x[a][p],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p),A.point(x[a][u][p],c,r)}throw new Error("geojson is invalid")}},29261:function($,P,t){Object.defineProperty(P,"__esModule",{value:!0});var A=t(88553),M=t(64182);P.default=function(l,_){_===void 0&&(_={});var m=0,f=0,o=0;return A.coordEach(l,function(e){m+=e[0],f+=e[1],o++}),M.point([m/o,f/o],_.properties)}},64182:function($,P){function t(s,a,u){u===void 0&&(u={});var p={type:"Feature"};return(u.id===0||u.id)&&(p.id=u.id),u.bbox&&(p.bbox=u.bbox),p.properties=a||{},p.geometry=s,p}function A(s,a,u){return u===void 0&&(u={}),t({type:"Point",coordinates:s},a,u)}function M(s,a,u){u===void 0&&(u={});for(var p=0,c=s;p<c.length;p++){var x=c[p];if(x.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<x[x.length-1].length;g++)if(x[x.length-1][g]!==x[0][g])throw new Error("First and last Position are not equivalent.")}return t({type:"Polygon",coordinates:s},a,u)}function l(s,a,u){if(u===void 0&&(u={}),s.length<2)throw new Error("coordinates must be an array of two or more positions");return t({type:"LineString",coordinates:s},a,u)}function _(s,a){a===void 0&&(a={});var u={type:"FeatureCollection"};return a.id&&(u.id=a.id),a.bbox&&(u.bbox=a.bbox),u.features=s,u}function m(s,a,u){return u===void 0&&(u={}),t({type:"MultiLineString",coordinates:s},a,u)}function f(s,a,u){return u===void 0&&(u={}),t({type:"MultiPoint",coordinates:s},a,u)}function o(s,a,u){return u===void 0&&(u={}),t({type:"MultiPolygon",coordinates:s},a,u)}function e(s,a){a===void 0&&(a="kilometers");var u=P.factors[a];if(!u)throw new Error(a+" units is invalid");return s*u}function i(s,a){a===void 0&&(a="kilometers");var u=P.factors[a];if(!u)throw new Error(a+" units is invalid");return s/u}function r(s){return s%(2*Math.PI)*180/Math.PI}function n(s){return!isNaN(s)&&s!==null&&!Array.isArray(s)&&!/^\s*$/.test(s)}Object.defineProperty(P,"__esModule",{value:!0}),P.earthRadius=63710088e-1,P.factors={centimeters:100*P.earthRadius,centimetres:100*P.earthRadius,degrees:P.earthRadius/111325,feet:3.28084*P.earthRadius,inches:39.37*P.earthRadius,kilometers:P.earthRadius/1e3,kilometres:P.earthRadius/1e3,meters:P.earthRadius,metres:P.earthRadius,miles:P.earthRadius/1609.344,millimeters:1e3*P.earthRadius,millimetres:1e3*P.earthRadius,nauticalmiles:P.earthRadius/1852,radians:1,yards:P.earthRadius/1.0936},P.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/P.earthRadius,yards:.91441111923921},P.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},P.feature=t,P.geometry=function(s,a,u){switch(s){case"Point":return A(a).geometry;case"LineString":return l(a).geometry;case"Polygon":return M(a).geometry;case"MultiPoint":return f(a).geometry;case"MultiLineString":return m(a).geometry;case"MultiPolygon":return o(a).geometry;default:throw new Error(s+" is invalid")}},P.point=A,P.points=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return A(p,a)}),u)},P.polygon=M,P.polygons=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return M(p,a)}),u)},P.lineString=l,P.lineStrings=function(s,a,u){return u===void 0&&(u={}),_(s.map(function(p){return l(p,a)}),u)},P.featureCollection=_,P.multiLineString=m,P.multiPoint=f,P.multiPolygon=o,P.geometryCollection=function(s,a,u){return u===void 0&&(u={}),t({type:"GeometryCollection",geometries:s},a,u)},P.round=function(s,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var u=Math.pow(10,a||0);return Math.round(s*u)/u},P.radiansToLength=e,P.lengthToRadians=i,P.lengthToDegrees=function(s,a){return r(i(s,a))},P.bearingToAzimuth=function(s){var a=s%360;return a<0&&(a+=360),a},P.radiansToDegrees=r,P.degreesToRadians=function(s){return s%360*Math.PI/180},P.convertLength=function(s,a,u){if(a===void 0&&(a="kilometers"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("length must be a positive number");return e(i(s,a),u)},P.convertArea=function(s,a,u){if(a===void 0&&(a="meters"),u===void 0&&(u="kilometers"),!(s>=0))throw new Error("area must be a positive number");var p=P.areaFactors[a];if(!p)throw new Error("invalid original units");var c=P.areaFactors[u];if(!c)throw new Error("invalid final units");return s/p*c},P.isNumber=n,P.isObject=function(s){return!!s&&s.constructor===Object},P.validateBBox=function(s){if(!s)throw new Error("bbox is required");if(!Array.isArray(s))throw new Error("bbox must be an Array");if(s.length!==4&&s.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");s.forEach(function(a){if(!n(a))throw new Error("bbox must only contain numbers")})},P.validateId=function(s){if(!s)throw new Error("id is required");if(["string","number"].indexOf(typeof s)===-1)throw new Error("id must be a number or a string")},P.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},P.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},P.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},P.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},P.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},P.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},P.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},88553:function($,P,t){Object.defineProperty(P,"__esModule",{value:!0});var A=t(64182);function M(i,r,n){if(i!==null)for(var s,a,u,p,c,x,g,h,b=0,v=0,y=i.type,w=y==="FeatureCollection",d=y==="Feature",S=w?i.features.length:1,T=0;T<S;T++){c=(h=!!(g=w?i.features[T].geometry:d?i.geometry:i)&&g.type==="GeometryCollection")?g.geometries.length:1;for(var E=0;E<c;E++){var C=0,L=0;if((p=h?g.geometries[E]:g)!==null){x=p.coordinates;var O=p.type;switch(b=!n||O!=="Polygon"&&O!=="MultiPolygon"?0:1,O){case null:break;case"Point":if(r(x,v,T,C,L)===!1)return!1;v++,C++;break;case"LineString":case"MultiPoint":for(s=0;s<x.length;s++){if(r(x[s],v,T,C,L)===!1)return!1;v++,O==="MultiPoint"&&C++}O==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(s=0;s<x.length;s++){for(a=0;a<x[s].length-b;a++){if(r(x[s][a],v,T,C,L)===!1)return!1;v++}O==="MultiLineString"&&C++,O==="Polygon"&&L++}O==="Polygon"&&C++;break;case"MultiPolygon":for(s=0;s<x.length;s++){for(L=0,a=0;a<x[s].length;a++){for(u=0;u<x[s][a].length-b;u++){if(r(x[s][a][u],v,T,C,L)===!1)return!1;v++}L++}C++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(M(p.geometries[s],r,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function l(i,r){var n;switch(i.type){case"FeatureCollection":for(n=0;n<i.features.length&&r(i.features[n].properties,n)!==!1;n++);break;case"Feature":r(i.properties,0)}}function _(i,r){if(i.type==="Feature")r(i,0);else if(i.type==="FeatureCollection")for(var n=0;n<i.features.length&&r(i.features[n],n)!==!1;n++);}function m(i,r){var n,s,a,u,p,c,x,g,h,b,v=0,y=i.type==="FeatureCollection",w=i.type==="Feature",d=y?i.features.length:1;for(n=0;n<d;n++){for(c=y?i.features[n].geometry:w?i.geometry:i,g=y?i.features[n].properties:w?i.properties:{},h=y?i.features[n].bbox:w?i.bbox:void 0,b=y?i.features[n].id:w?i.id:void 0,p=(x=!!c&&c.type==="GeometryCollection")?c.geometries.length:1,a=0;a<p;a++)if((u=x?c.geometries[a]:c)!==null)switch(u.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(r(u,v,g,h,b)===!1)return!1;break;case"GeometryCollection":for(s=0;s<u.geometries.length;s++)if(r(u.geometries[s],v,g,h,b)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(r(null,v,g,h,b)===!1)return!1;v++}}function f(i,r){m(i,function(n,s,a,u,p){var c,x=n===null?null:n.type;switch(x){case null:case"Point":case"LineString":case"Polygon":return r(A.feature(n,a,{bbox:u,id:p}),s,0)!==!1&&void 0}switch(x){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon"}for(var g=0;g<n.coordinates.length;g++){var h={type:c,coordinates:n.coordinates[g]};if(r(A.feature(h,a),s,g)===!1)return!1}})}function o(i,r){f(i,function(n,s,a){var u=0;if(n.geometry){var p=n.geometry.type;if(p!=="Point"&&p!=="MultiPoint"){var c,x=0,g=0,h=0;return M(n,function(b,v,y,w,d){if(c===void 0||s>x||w>g||d>h)return c=b,x=s,g=w,h=d,void(u=0);var S=A.lineString([c,b],n.properties);if(r(S,s,a,d,u)===!1)return!1;u++,c=b})!==!1&&void 0}}})}function e(i,r){if(!i)throw new Error("geojson is required");f(i,function(n,s,a){if(n.geometry!==null){var u=n.geometry.type,p=n.geometry.coordinates;switch(u){case"LineString":if(r(n,s,a,0,0)===!1)return!1;break;case"Polygon":for(var c=0;c<p.length;c++)if(r(A.lineString(p[c],n.properties),s,a,c)===!1)return!1}}})}P.coordEach=M,P.coordReduce=function(i,r,n,s){var a=n;return M(i,function(u,p,c,x,g){a=p===0&&n===void 0?u:r(a,u,p,c,x,g)},s),a},P.propEach=l,P.propReduce=function(i,r,n){var s=n;return l(i,function(a,u){s=u===0&&n===void 0?a:r(s,a,u)}),s},P.featureEach=_,P.featureReduce=function(i,r,n){var s=n;return _(i,function(a,u){s=u===0&&n===void 0?a:r(s,a,u)}),s},P.coordAll=function(i){var r=[];return M(i,function(n){r.push(n)}),r},P.geomEach=m,P.geomReduce=function(i,r,n){var s=n;return m(i,function(a,u,p,c,x){s=u===0&&n===void 0?a:r(s,a,u,p,c,x)}),s},P.flattenEach=f,P.flattenReduce=function(i,r,n){var s=n;return f(i,function(a,u,p){s=u===0&&p===0&&n===void 0?a:r(s,a,u,p)}),s},P.segmentEach=o,P.segmentReduce=function(i,r,n){var s=n,a=!1;return o(i,function(u,p,c,x,g){s=a===!1&&n===void 0?u:r(s,u,p,c,x,g),a=!0}),s},P.lineEach=e,P.lineReduce=function(i,r,n){var s=n;return e(i,function(a,u,p,c){s=u===0&&n===void 0?a:r(s,a,u,p,c)}),s},P.findSegment=function(i,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,s=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.segmentIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,n=i.features[s].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=x.length+p-1),A.lineString([x[p],x[p+1]],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p-1),A.lineString([x[u][p],x[u][p+1]],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p-1),A.lineString([x[a][p],x[a][p+1]],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p-1),A.lineString([x[a][u][p],x[a][u][p+1]],c,r)}throw new Error("geojson is invalid")},P.findPoint=function(i,r){if(r=r||{},!A.isObject(r))throw new Error("options is invalid");var n,s=r.featureIndex||0,a=r.multiFeatureIndex||0,u=r.geometryIndex||0,p=r.coordIndex||0,c=r.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),c=c||i.features[s].properties,n=i.features[s].geometry;break;case"Feature":c=c||i.properties,n=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=i;break;default:throw new Error("geojson is invalid")}if(n===null)return null;var x=n.coordinates;switch(n.type){case"Point":return A.point(x,c,r);case"MultiPoint":return a<0&&(a=x.length+a),A.point(x[a],c,r);case"LineString":return p<0&&(p=x.length+p),A.point(x[p],c,r);case"Polygon":return u<0&&(u=x.length+u),p<0&&(p=x[u].length+p),A.point(x[u][p],c,r);case"MultiLineString":return a<0&&(a=x.length+a),p<0&&(p=x[a].length+p),A.point(x[a][p],c,r);case"MultiPolygon":return a<0&&(a=x.length+a),u<0&&(u=x[a].length+u),p<0&&(p=x[a][u].length-p),A.point(x[a][u][p],c,r)}throw new Error("geojson is invalid")}},65185:function($){$.exports=function(P){var t=0,A=0,M=0,l=0;return P.map(function(_){var m=(_=_.slice())[0],f=m.toUpperCase();if(m!=f)switch(_[0]=f,m){case"a":_[6]+=M,_[7]+=l;break;case"v":_[1]+=l;break;case"h":_[1]+=M;break;default:for(var o=1;o<_.length;)_[o++]+=M,_[o++]+=l}switch(f){case"Z":M=t,l=A;break;case"H":M=_[1];break;case"V":l=_[1];break;case"M":M=t=_[1],l=A=_[2];break;default:M=_[_.length-2],l=_[_.length-1]}return _})}},21527:function($){$.exports=function(P,t){if(!P||P.length==null)throw Error("Argument should be an array");t=t==null?1:Math.floor(t);for(var A=Array(2*t),M=0;M<t;M++){for(var l=-1/0,_=1/0,m=M,f=P.length;m<f;m+=t)P[m]>l&&(l=P[m]),P[m]<_&&(_=P[m]);A[M]=_,A[t+M]=l}return A}},6851:function($){$.exports=function(P,t,A){if(typeof Array.prototype.findIndex=="function")return P.findIndex(t,A);if(typeof t!="function")throw new TypeError("predicate must be a function");var M=Object(P),l=M.length;if(l===0)return-1;for(var _=0;_<l;_++)if(t.call(A,M[_],_,M))return _;return-1}},54:function($,P,t){var A=t(21527);$.exports=function(M,l,_){if(!M||M.length==null)throw Error("Argument should be an array");l==null&&(l=1),_==null&&(_=A(M,l));for(var m=0;m<l;m++){var f=_[l+m],o=_[m],e=m,i=M.length;if(f===1/0&&o===-1/0)for(e=m;e<i;e+=l)M[e]=M[e]===f?1:M[e]===o?0:.5;else if(f===1/0)for(e=m;e<i;e+=l)M[e]=M[e]===f?1:0;else if(o===-1/0)for(e=m;e<i;e+=l)M[e]=M[e]===o?0:1;else{var r=f-o;for(e=m;e<i;e+=l)isNaN(M[e])||(M[e]=r===0?.5:(M[e]-o)/r)}}return M}},57471:function($){$.exports=function(P,t){var A=typeof P=="number",M=typeof t=="number";A&&!M?(t=P,P=0):A||M||(P=0,t=0);var l=(t|=0)-(P|=0);if(l<0)throw new Error("array length must be positive");for(var _=new Array(l),m=0,f=P;m<l;m++,f++)_[m]=f;return _}},32791:function($,P,t){var A=t(90386);function M(I){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},M(I)}var l,_,m=t(79616).codes,f=m.ERR_AMBIGUOUS_ARGUMENT,o=m.ERR_INVALID_ARG_TYPE,e=m.ERR_INVALID_ARG_VALUE,i=m.ERR_INVALID_RETURN_VALUE,r=m.ERR_MISSING_ARGS,n=t(73894),s=t(43827).inspect,a=t(43827).types,u=a.isPromise,p=a.isRegExp,c=Object.assign?Object.assign:t(73523).assign,x=Object.is?Object.is:t(64003);function g(){var I=t(74061);l=I.isDeepEqual,_=I.isDeepStrictEqual}var h=!1,b=$.exports=d,v={};function y(I){throw I.message instanceof Error?I.message:new n(I)}function w(I,H,N,F){if(!N){var V=!1;if(H===0)V=!0,F="No value argument passed to `assert.ok()`";else if(F instanceof Error)throw F;var W=new n({actual:N,expected:!0,message:F,operator:"==",stackStartFn:I});throw W.generatedMessage=V,W}}function d(){for(var I=arguments.length,H=new Array(I),N=0;N<I;N++)H[N]=arguments[N];w.apply(void 0,[d,H.length].concat(H))}b.fail=function I(H,N,F,V,W){var te,Q=arguments.length;if(Q===0?te="Failed":Q===1?(F=H,H=void 0):(h===!1&&(h=!0,(A.emitWarning?A.emitWarning:console.warn.bind(console))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),Q===2&&(V="!=")),F instanceof Error)throw F;var X={actual:H,expected:N,operator:V===void 0?"fail":V,stackStartFn:W||I};F!==void 0&&(X.message=F);var q=new n(X);throw te&&(q.message=te,q.generatedMessage=!0),q},b.AssertionError=n,b.ok=d,b.equal=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");H!=N&&y({actual:H,expected:N,message:F,operator:"==",stackStartFn:I})},b.notEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");H==N&&y({actual:H,expected:N,message:F,operator:"!=",stackStartFn:I})},b.deepEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),l(H,N)||y({actual:H,expected:N,message:F,operator:"deepEqual",stackStartFn:I})},b.notDeepEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),l(H,N)&&y({actual:H,expected:N,message:F,operator:"notDeepEqual",stackStartFn:I})},b.deepStrictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),_(H,N)||y({actual:H,expected:N,message:F,operator:"deepStrictEqual",stackStartFn:I})},b.notDeepStrictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");l===void 0&&g(),_(H,N)&&y({actual:H,expected:N,message:F,operator:"notDeepStrictEqual",stackStartFn:I})},b.strictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");x(H,N)||y({actual:H,expected:N,message:F,operator:"strictEqual",stackStartFn:I})},b.notStrictEqual=function I(H,N,F){if(arguments.length<2)throw new r("actual","expected");x(H,N)&&y({actual:H,expected:N,message:F,operator:"notStrictEqual",stackStartFn:I})};var S=function I(H,N,F){var V=this;(function(W,te){if(!(W instanceof te))throw new TypeError("Cannot call a class as a function")})(this,I),N.forEach(function(W){W in H&&(F!==void 0&&typeof F[W]=="string"&&p(H[W])&&H[W].test(F[W])?V[W]=F[W]:V[W]=H[W])})};function T(I,H,N,F){if(typeof H!="function"){if(p(H))return H.test(I);if(arguments.length===2)throw new o("expected",["Function","RegExp"],H);if(M(I)!=="object"||I===null){var V=new n({actual:I,expected:H,message:N,operator:"deepStrictEqual",stackStartFn:F});throw V.operator=F.name,V}var W=Object.keys(H);if(H instanceof Error)W.push("name","message");else if(W.length===0)throw new e("error",H,"may not be an empty object");return l===void 0&&g(),W.forEach(function(te){typeof I[te]=="string"&&p(H[te])&&H[te].test(I[te])||function(Q,X,q,Z,J,ne){if(!(q in Q)||!_(Q[q],X[q])){if(!Z){var re=new S(Q,J),ae=new S(X,J,Q),ue=new n({actual:re,expected:ae,operator:"deepStrictEqual",stackStartFn:ne});throw ue.actual=Q,ue.expected=X,ue.operator=ne.name,ue}y({actual:Q,expected:X,message:Z,operator:ne.name,stackStartFn:ne})}}(I,H,te,N,W,F)}),!0}return H.prototype!==void 0&&I instanceof H||!Error.isPrototypeOf(H)&&H.call({},I)===!0}function E(I){if(typeof I!="function")throw new o("fn","Function",I);try{I()}catch(H){return H}return v}function C(I){return u(I)||I!==null&&M(I)==="object"&&typeof I.then=="function"&&typeof I.catch=="function"}function L(I){return Promise.resolve().then(function(){var H;if(typeof I=="function"){if(!C(H=I()))throw new i("instance of Promise","promiseFn",H)}else{if(!C(I))throw new o("promiseFn",["Function","Promise"],I);H=I}return Promise.resolve().then(function(){return H}).then(function(){return v}).catch(function(N){return N})})}function O(I,H,N,F){if(typeof N=="string"){if(arguments.length===4)throw new o("error",["Object","Error","Function","RegExp"],N);if(M(H)==="object"&&H!==null){if(H.message===N)throw new f("error/message",'The error message "'.concat(H.message,'" is identical to the message.'))}else if(H===N)throw new f("error/message",'The error "'.concat(H,'" is identical to the message.'));F=N,N=void 0}else if(N!=null&&M(N)!=="object"&&typeof N!="function")throw new o("error",["Object","Error","Function","RegExp"],N);if(H===v){var V="";N&&N.name&&(V+=" (".concat(N.name,")")),V+=F?": ".concat(F):".";var W=I.name==="rejects"?"rejection":"exception";y({actual:void 0,expected:N,operator:I.name,message:"Missing expected ".concat(W).concat(V),stackStartFn:I})}if(N&&!T(H,N,F,I))throw H}function z(I,H,N,F){if(H!==v){if(typeof N=="string"&&(F=N,N=void 0),!N||T(H,N)){var V=F?": ".concat(F):".",W=I.name==="doesNotReject"?"rejection":"exception";y({actual:H,expected:N,operator:I.name,message:"Got unwanted ".concat(W).concat(V,`
`)+'Actual message: "'.concat(H&&H.message,'"'),stackStartFn:I})}throw H}}function G(){for(var I=arguments.length,H=new Array(I),N=0;N<I;N++)H[N]=arguments[N];w.apply(void 0,[G,H.length].concat(H))}b.throws=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];O.apply(void 0,[I,E(H)].concat(F))},b.rejects=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];return L(H).then(function(W){return O.apply(void 0,[I,W].concat(F))})},b.doesNotThrow=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];z.apply(void 0,[I,E(H)].concat(F))},b.doesNotReject=function I(H){for(var N=arguments.length,F=new Array(N>1?N-1:0),V=1;V<N;V++)F[V-1]=arguments[V];return L(H).then(function(W){return z.apply(void 0,[I,W].concat(F))})},b.ifError=function I(H){if(H!=null){var N="ifError got unwanted exception: ";M(H)==="object"&&typeof H.message=="string"?H.message.length===0&&H.constructor?N+=H.constructor.name:N+=H.message:N+=s(H);var F=new n({actual:H,expected:null,operator:"ifError",message:N,stackStartFn:I}),V=H.stack;if(typeof V=="string"){var W=V.split(`
`);W.shift();for(var te=F.stack.split(`
`),Q=0;Q<W.length;Q++){var X=te.indexOf(W[Q]);if(X!==-1){te=te.slice(0,X);break}}F.stack="".concat(te.join(`
`),`
`).concat(W.join(`
`))}throw F}},b.strict=c(G,b,{equal:b.strictEqual,deepEqual:b.deepStrictEqual,notEqual:b.notStrictEqual,notDeepEqual:b.notDeepStrictEqual}),b.strict.strict=b.strict},73894:function($,P,t){var A=t(90386);function M(y,w,d){return w in y?Object.defineProperty(y,w,{value:d,enumerable:!0,configurable:!0,writable:!0}):y[w]=d,y}function l(y,w){for(var d=0;d<w.length;d++){var S=w[d];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}function _(y,w){return!w||r(w)!=="object"&&typeof w!="function"?m(y):w}function m(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function f(y){var w=typeof Map=="function"?new Map:void 0;return f=function(d){if(d===null||(S=d,Function.toString.call(S).indexOf("[native code]")===-1))return d;var S;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(w!==void 0){if(w.has(d))return w.get(d);w.set(d,T)}function T(){return o(d,arguments,i(this).constructor)}return T.prototype=Object.create(d.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),e(T,d)},f(y)}function o(y,w,d){return o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(S,T,E){var C=[null];C.push.apply(C,T);var L=new(Function.bind.apply(S,C));return E&&e(L,E.prototype),L},o.apply(null,arguments)}function e(y,w){return e=Object.setPrototypeOf||function(d,S){return d.__proto__=S,d},e(y,w)}function i(y){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},i(y)}function r(y){return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},r(y)}var n=t(43827).inspect,s=t(79616).codes.ERR_INVALID_ARG_TYPE;function a(y,w,d){return(d===void 0||d>y.length)&&(d=y.length),y.substring(d-w.length,d)===w}var u="",p="",c="",x="",g={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function h(y){var w=Object.keys(y),d=Object.create(Object.getPrototypeOf(y));return w.forEach(function(S){d[S]=y[S]}),Object.defineProperty(d,"message",{value:y.message}),d}function b(y){return n(y,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var v=function(y){function w(T){var E;if(function(te,Q){if(!(te instanceof Q))throw new TypeError("Cannot call a class as a function")}(this,w),r(T)!=="object"||T===null)throw new s("options","Object",T);var C=T.message,L=T.operator,O=T.stackStartFn,z=T.actual,G=T.expected,I=Error.stackTraceLimit;if(Error.stackTraceLimit=0,C!=null)E=_(this,i(w).call(this,String(C)));else if(A.stderr&&A.stderr.isTTY&&(A.stderr&&A.stderr.getColorDepth&&A.stderr.getColorDepth()!==1?(u="\x1B[34m",p="\x1B[32m",x="\x1B[39m",c="\x1B[31m"):(u="",p="",x="",c="")),r(z)==="object"&&z!==null&&r(G)==="object"&&G!==null&&"stack"in z&&z instanceof Error&&"stack"in G&&G instanceof Error&&(z=h(z),G=h(G)),L==="deepStrictEqual"||L==="strictEqual")E=_(this,i(w).call(this,function(te,Q,X){var q="",Z="",J=0,ne="",re=!1,ae=b(te),ue=ae.split(`
`),he=b(Q).split(`
`),de=0,xe="";if(X==="strictEqual"&&r(te)==="object"&&r(Q)==="object"&&te!==null&&Q!==null&&(X="strictEqualObject"),ue.length===1&&he.length===1&&ue[0]!==he[0]){var me=ue[0].length+he[0].length;if(me<=10){if(!(r(te)==="object"&&te!==null||r(Q)==="object"&&Q!==null||te===0&&Q===0))return"".concat(g[X],`

`)+"".concat(ue[0]," !== ").concat(he[0],`
`)}else if(X!=="strictEqualObject"&&me<(A.stderr&&A.stderr.isTTY?A.stderr.columns:80)){for(;ue[0][de]===he[0][de];)de++;de>2&&(xe=`
  `.concat(function(Be,ce){if(ce=Math.floor(ce),Be.length==0||ce==0)return"";var Te=Be.length*ce;for(ce=Math.floor(Math.log(ce)/Math.log(2));ce;)Be+=Be,ce--;return Be+Be.substring(0,Te-Be.length)}(" ",de),"^"),de=0)}}for(var ve=ue[ue.length-1],Le=he[he.length-1];ve===Le&&(de++<2?ne=`
  `.concat(ve).concat(ne):q=ve,ue.pop(),he.pop(),ue.length!==0&&he.length!==0);)ve=ue[ue.length-1],Le=he[he.length-1];var Ae=Math.max(ue.length,he.length);if(Ae===0){var we=ae.split(`
`);if(we.length>30)for(we[26]="".concat(u,"...").concat(x);we.length>27;)we.pop();return"".concat(g.notIdentical,`

`).concat(we.join(`
`),`
`)}de>3&&(ne=`
`.concat(u,"...").concat(x).concat(ne),re=!0),q!==""&&(ne=`
  `.concat(q).concat(ne),q="");var se=0,oe=g[X]+`
`.concat(p,"+ actual").concat(x," ").concat(c,"- expected").concat(x),fe=" ".concat(u,"...").concat(x," Lines skipped");for(de=0;de<Ae;de++){var Se=de-J;if(ue.length<de+1)Se>1&&de>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),re=!0):Se>3&&(Z+=`
  `.concat(he[de-2]),se++),Z+=`
  `.concat(he[de-1]),se++),J=de,q+=`
`.concat(c,"-").concat(x," ").concat(he[de]),se++;else if(he.length<de+1)Se>1&&de>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),re=!0):Se>3&&(Z+=`
  `.concat(ue[de-2]),se++),Z+=`
  `.concat(ue[de-1]),se++),J=de,Z+=`
`.concat(p,"+").concat(x," ").concat(ue[de]),se++;else{var Me=he[de],be=ue[de],Ie=be!==Me&&(!a(be,",")||be.slice(0,-1)!==Me);Ie&&a(Me,",")&&Me.slice(0,-1)===be&&(Ie=!1,be+=","),Ie?(Se>1&&de>2&&(Se>4?(Z+=`
`.concat(u,"...").concat(x),re=!0):Se>3&&(Z+=`
  `.concat(ue[de-2]),se++),Z+=`
  `.concat(ue[de-1]),se++),J=de,Z+=`
`.concat(p,"+").concat(x," ").concat(be),q+=`
`.concat(c,"-").concat(x," ").concat(Me),se+=2):(Z+=q,q="",Se!==1&&de!==0||(Z+=`
  `.concat(be),se++))}if(se>20&&de<Ae-2)return"".concat(oe).concat(fe,`
`).concat(Z,`
`).concat(u,"...").concat(x).concat(q,`
`)+"".concat(u,"...").concat(x)}return"".concat(oe).concat(re?fe:"",`
`).concat(Z).concat(q).concat(ne).concat(xe)}(z,G,L)));else if(L==="notDeepStrictEqual"||L==="notStrictEqual"){var H=g[L],N=b(z).split(`
`);if(L==="notStrictEqual"&&r(z)==="object"&&z!==null&&(H=g.notStrictEqualObject),N.length>30)for(N[26]="".concat(u,"...").concat(x);N.length>27;)N.pop();E=N.length===1?_(this,i(w).call(this,"".concat(H," ").concat(N[0]))):_(this,i(w).call(this,"".concat(H,`

`).concat(N.join(`
`),`
`)))}else{var F=b(z),V="",W=g[L];L==="notDeepEqual"||L==="notEqual"?(F="".concat(g[L],`

`).concat(F)).length>1024&&(F="".concat(F.slice(0,1021),"...")):(V="".concat(b(G)),F.length>512&&(F="".concat(F.slice(0,509),"...")),V.length>512&&(V="".concat(V.slice(0,509),"...")),L==="deepEqual"||L==="equal"?F="".concat(W,`

`).concat(F,`

should equal

`):V=" ".concat(L," ").concat(V)),E=_(this,i(w).call(this,"".concat(F).concat(V)))}return Error.stackTraceLimit=I,E.generatedMessage=!C,Object.defineProperty(m(E),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),E.code="ERR_ASSERTION",E.actual=z,E.expected=G,E.operator=L,Error.captureStackTrace&&Error.captureStackTrace(m(E),O),E.stack,E.name="AssertionError",_(E)}var d,S;return function(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),E&&e(T,E)}(w,y),d=w,S=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:n.custom,value:function(T,E){return n(this,function(C){for(var L=1;L<arguments.length;L++){var O=arguments[L]!=null?arguments[L]:{},z=Object.keys(O);typeof Object.getOwnPropertySymbols=="function"&&(z=z.concat(Object.getOwnPropertySymbols(O).filter(function(G){return Object.getOwnPropertyDescriptor(O,G).enumerable}))),z.forEach(function(G){M(C,G,O[G])})}return C}({},E,{customInspect:!1,depth:0}))}}],S&&l(d.prototype,S),w}(f(Error));$.exports=v},79616:function($,P,t){function A(i){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},A(i)}function M(i){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},M(i)}function l(i,r){return l=Object.setPrototypeOf||function(n,s){return n.__proto__=s,n},l(i,r)}var _,m,f={};function o(i,r,n){n||(n=Error);var s=function(a){function u(p,c,x){var g;return function(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}(this,u),g=function(h,b){return!b||A(b)!=="object"&&typeof b!="function"?function(v){if(v===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v}(h):b}(this,M(u).call(this,function(h,b,v){return typeof r=="string"?r:r(h,b,v)}(p,c,x))),g.code=i,g}return function(p,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(c&&c.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),c&&l(p,c)}(u,a),u}(n);f[i]=s}function e(i,r){if(Array.isArray(i)){var n=i.length;return i=i.map(function(s){return String(s)}),n>2?"one of ".concat(r," ").concat(i.slice(0,n-1).join(", "),", or ")+i[n-1]:n===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}return"of ".concat(r," ").concat(String(i))}o("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),o("ERR_INVALID_ARG_TYPE",function(i,r,n){var s,a,u,p,c;if(_===void 0&&(_=t(32791)),_(typeof i=="string","'name' must be a string"),typeof r=="string"&&(a="not ",r.substr(0,4)===a)?(s="must not be",r=r.replace(/^not /,"")):s="must be",function(g,h,b){return(b===void 0||b>g.length)&&(b=g.length),g.substring(b-9,b)===h}(i," argument"))u="The ".concat(i," ").concat(s," ").concat(e(r,"type"));else{var x=(typeof c!="number"&&(c=0),c+1>(p=i).length||p.indexOf(".",c)===-1?"argument":"property");u='The "'.concat(i,'" ').concat(x," ").concat(s," ").concat(e(r,"type"))}return u+". Received type ".concat(A(n))},TypeError),o("ERR_INVALID_ARG_VALUE",function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";m===void 0&&(m=t(43827));var s=m.inspect(r);return s.length>128&&(s="".concat(s.slice(0,128),"...")),"The argument '".concat(i,"' ").concat(n,". Received ").concat(s)},TypeError),o("ERR_INVALID_RETURN_VALUE",function(i,r,n){var s;return s=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(A(n)),"Expected ".concat(i,' to be returned from the "').concat(r,'"')+" function but got ".concat(s,".")},TypeError),o("ERR_MISSING_ARGS",function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];_===void 0&&(_=t(32791)),_(r.length>0,"At least one arg needs to be specified");var s="The ",a=r.length;switch(r=r.map(function(u){return'"'.concat(u,'"')}),a){case 1:s+="".concat(r[0]," argument");break;case 2:s+="".concat(r[0]," and ").concat(r[1]," arguments");break;default:s+=r.slice(0,a-1).join(", "),s+=", and ".concat(r[a-1]," arguments")}return"".concat(s," must be specified")},TypeError),$.exports.codes=f},74061:function($,P,t){function A(J,ne){return function(re){if(Array.isArray(re))return re}(J)||function(re,ae){var ue=[],he=!0,de=!1,xe=void 0;try{for(var me,ve=re[Symbol.iterator]();!(he=(me=ve.next()).done)&&(ue.push(me.value),!ae||ue.length!==ae);he=!0);}catch(Le){de=!0,xe=Le}finally{try{he||ve.return==null||ve.return()}finally{if(de)throw xe}}return ue}(J,ne)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(J){return M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},M(J)}var l=/a/g.flags!==void 0,_=function(J){var ne=[];return J.forEach(function(re){return ne.push(re)}),ne},m=function(J){var ne=[];return J.forEach(function(re,ae){return ne.push([ae,re])}),ne},f=Object.is?Object.is:t(64003),o=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},e=Number.isNaN?Number.isNaN:t(15567);function i(J){return J.call.bind(J)}var r=i(Object.prototype.hasOwnProperty),n=i(Object.prototype.propertyIsEnumerable),s=i(Object.prototype.toString),a=t(43827).types,u=a.isAnyArrayBuffer,p=a.isArrayBufferView,c=a.isDate,x=a.isMap,g=a.isRegExp,h=a.isSet,b=a.isNativeError,v=a.isBoxedPrimitive,y=a.isNumberObject,w=a.isStringObject,d=a.isBooleanObject,S=a.isBigIntObject,T=a.isSymbolObject,E=a.isFloat32Array,C=a.isFloat64Array;function L(J){if(J.length===0||J.length>10)return!0;for(var ne=0;ne<J.length;ne++){var re=J.charCodeAt(ne);if(re<48||re>57)return!0}return J.length===10&&J>=Math.pow(2,32)}function O(J){return Object.keys(J).filter(L).concat(o(J).filter(Object.prototype.propertyIsEnumerable.bind(J)))}function z(J,ne){if(J===ne)return 0;for(var re=J.length,ae=ne.length,ue=0,he=Math.min(re,ae);ue<he;++ue)if(J[ue]!==ne[ue]){re=J[ue],ae=ne[ue];break}return re<ae?-1:ae<re?1:0}var G=0,I=1,H=2,N=3;function F(J,ne,re,ae){if(J===ne)return J!==0||!re||f(J,ne);if(re){if(M(J)!=="object")return typeof J=="number"&&e(J)&&e(ne);if(M(ne)!=="object"||J===null||ne===null||Object.getPrototypeOf(J)!==Object.getPrototypeOf(ne))return!1}else{if(J===null||M(J)!=="object")return(ne===null||M(ne)!=="object")&&J==ne;if(ne===null||M(ne)!=="object")return!1}var ue,he,de,xe,me=s(J);if(me!==s(ne))return!1;if(Array.isArray(J)){if(J.length!==ne.length)return!1;var ve=O(J),Le=O(ne);return ve.length===Le.length&&W(J,ne,re,ae,I,ve)}if(me==="[object Object]"&&(!x(J)&&x(ne)||!h(J)&&h(ne)))return!1;if(c(J)){if(!c(ne)||Date.prototype.getTime.call(J)!==Date.prototype.getTime.call(ne))return!1}else if(g(J)){if(!g(ne)||(de=J,xe=ne,!(l?de.source===xe.source&&de.flags===xe.flags:RegExp.prototype.toString.call(de)===RegExp.prototype.toString.call(xe))))return!1}else if(b(J)||J instanceof Error){if(J.message!==ne.message||J.name!==ne.name)return!1}else{if(p(J)){if(re||!E(J)&&!C(J)){if(!function(se,oe){return se.byteLength===oe.byteLength&&z(new Uint8Array(se.buffer,se.byteOffset,se.byteLength),new Uint8Array(oe.buffer,oe.byteOffset,oe.byteLength))===0}(J,ne))return!1}else if(!function(se,oe){if(se.byteLength!==oe.byteLength)return!1;for(var fe=0;fe<se.byteLength;fe++)if(se[fe]!==oe[fe])return!1;return!0}(J,ne))return!1;var Ae=O(J),we=O(ne);return Ae.length===we.length&&W(J,ne,re,ae,G,Ae)}if(h(J))return!(!h(ne)||J.size!==ne.size)&&W(J,ne,re,ae,H);if(x(J))return!(!x(ne)||J.size!==ne.size)&&W(J,ne,re,ae,N);if(u(J)){if(he=ne,(ue=J).byteLength!==he.byteLength||z(new Uint8Array(ue),new Uint8Array(he))!==0)return!1}else if(v(J)&&!function(se,oe){return y(se)?y(oe)&&f(Number.prototype.valueOf.call(se),Number.prototype.valueOf.call(oe)):w(se)?w(oe)&&String.prototype.valueOf.call(se)===String.prototype.valueOf.call(oe):d(se)?d(oe)&&Boolean.prototype.valueOf.call(se)===Boolean.prototype.valueOf.call(oe):S(se)?S(oe)&&BigInt.prototype.valueOf.call(se)===BigInt.prototype.valueOf.call(oe):T(oe)&&Symbol.prototype.valueOf.call(se)===Symbol.prototype.valueOf.call(oe)}(J,ne))return!1}return W(J,ne,re,ae,G)}function V(J,ne){return ne.filter(function(re){return n(J,re)})}function W(J,ne,re,ae,ue,he){if(arguments.length===5){he=Object.keys(J);var de=Object.keys(ne);if(he.length!==de.length)return!1}for(var xe=0;xe<he.length;xe++)if(!r(ne,he[xe]))return!1;if(re&&arguments.length===5){var me=o(J);if(me.length!==0){var ve=0;for(xe=0;xe<me.length;xe++){var Le=me[xe];if(n(J,Le)){if(!n(ne,Le))return!1;he.push(Le),ve++}else if(n(ne,Le))return!1}var Ae=o(ne);if(me.length!==Ae.length&&V(ne,Ae).length!==ve)return!1}else{var we=o(ne);if(we.length!==0&&V(ne,we).length!==0)return!1}}if(he.length===0&&(ue===G||ue===I&&J.length===0||J.size===0))return!0;if(ae===void 0)ae={val1:new Map,val2:new Map,position:0};else{var se=ae.val1.get(J);if(se!==void 0){var oe=ae.val2.get(ne);if(oe!==void 0)return se===oe}ae.position++}ae.val1.set(J,ae.position),ae.val2.set(ne,ae.position);var fe=function(Se,Me,be,Ie,Be,ce){var Te=0;if(ce===H){if(!function(ze,He,We,Je){for(var lt=null,et=_(ze),yt=0;yt<et.length;yt++){var _t=et[yt];if(M(_t)==="object"&&_t!==null)lt===null&&(lt=new Set),lt.add(_t);else if(!He.has(_t)){if(We||!X(ze,He,_t))return!1;lt===null&&(lt=new Set),lt.add(_t)}}if(lt!==null){for(var xt=_(He),at=0;at<xt.length;at++){var ot=xt[at];if(M(ot)==="object"&&ot!==null){if(!te(lt,ot,We,Je))return!1}else if(!We&&!ze.has(ot)&&!te(lt,ot,We,Je))return!1}return lt.size===0}return!0}(Se,Me,be,Be))return!1}else if(ce===N){if(!function(ze,He,We,Je){for(var lt=null,et=m(ze),yt=0;yt<et.length;yt++){var _t=A(et[yt],2),xt=_t[0],at=_t[1];if(M(xt)==="object"&&xt!==null)lt===null&&(lt=new Set),lt.add(xt);else{var ot=He.get(xt);if(ot===void 0&&!He.has(xt)||!F(at,ot,We,Je)){if(We||!q(ze,He,xt,at,Je))return!1;lt===null&&(lt=new Set),lt.add(xt)}}}if(lt!==null){for(var At=m(He),Ct=0;Ct<At.length;Ct++){var zt=A(At[Ct],2),St=(xt=zt[0],zt[1]);if(M(xt)==="object"&&xt!==null){if(!Z(lt,ze,xt,St,We,Je))return!1}else if(!(We||ze.has(xt)&&F(ze.get(xt),St,!1,Je)||Z(lt,ze,xt,St,!1,Je)))return!1}return lt.size===0}return!0}(Se,Me,be,Be))return!1}else if(ce===I)for(;Te<Se.length;Te++){if(!r(Se,Te)){if(r(Me,Te))return!1;for(var ye=Object.keys(Se);Te<ye.length;Te++){var Pe=ye[Te];if(!r(Me,Pe)||!F(Se[Pe],Me[Pe],be,Be))return!1}return ye.length===Object.keys(Me).length}if(!r(Me,Te)||!F(Se[Te],Me[Te],be,Be))return!1}for(Te=0;Te<Ie.length;Te++){var Re=Ie[Te];if(!F(Se[Re],Me[Re],be,Be))return!1}return!0}(J,ne,re,he,ae,ue);return ae.val1.delete(J),ae.val2.delete(ne),fe}function te(J,ne,re,ae){for(var ue=_(J),he=0;he<ue.length;he++){var de=ue[he];if(F(ne,de,re,ae))return J.delete(de),!0}return!1}function Q(J){switch(M(J)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":J=+J;case"number":if(e(J))return!1}return!0}function X(J,ne,re){var ae=Q(re);return ae??(ne.has(ae)&&!J.has(ae))}function q(J,ne,re,ae,ue){var he=Q(re);if(he!=null)return he;var de=ne.get(he);return!(de===void 0&&!ne.has(he)||!F(ae,de,!1,ue))&&!J.has(he)&&F(ae,de,!1,ue)}function Z(J,ne,re,ae,ue,he){for(var de=_(J),xe=0;xe<de.length;xe++){var me=de[xe];if(F(re,me,ue,he)&&F(ae,ne.get(me),ue,he))return J.delete(me),!0}return!1}$.exports={isDeepEqual:function(J,ne){return F(J,ne,!1)},isDeepStrictEqual:function(J,ne){return F(J,ne,!0)}}},95341:function($,P){P.byteLength=function(o){var e=m(o),i=e[0],r=e[1];return 3*(i+r)/4-r},P.toByteArray=function(o){var e,i,r=m(o),n=r[0],s=r[1],a=new M(function(c,x,g){return 3*(x+g)/4-g}(0,n,s)),u=0,p=s>0?n-4:n;for(i=0;i<p;i+=4)e=A[o.charCodeAt(i)]<<18|A[o.charCodeAt(i+1)]<<12|A[o.charCodeAt(i+2)]<<6|A[o.charCodeAt(i+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return s===2&&(e=A[o.charCodeAt(i)]<<2|A[o.charCodeAt(i+1)]>>4,a[u++]=255&e),s===1&&(e=A[o.charCodeAt(i)]<<10|A[o.charCodeAt(i+1)]<<4|A[o.charCodeAt(i+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a},P.fromByteArray=function(o){for(var e,i=o.length,r=i%3,n=[],s=16383,a=0,u=i-r;a<u;a+=s)n.push(f(o,a,a+s>u?u:a+s));return r===1?(e=o[i-1],n.push(t[e>>2]+t[e<<4&63]+"==")):r===2&&(e=(o[i-2]<<8)+o[i-1],n.push(t[e>>10]+t[e>>4&63]+t[e<<2&63]+"=")),n.join("")};for(var t=[],A=[],M=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_=0;_<64;++_)t[_]=l[_],A[l.charCodeAt(_)]=_;function m(o){var e=o.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=o.indexOf("=");return i===-1&&(i=e),[i,i===e?0:4-i%4]}function f(o,e,i){for(var r,n,s=[],a=e;a<i;a+=3)r=(o[a]<<16&16711680)+(o[a+1]<<8&65280)+(255&o[a+2]),s.push(t[(n=r)>>18&63]+t[n>>12&63]+t[n>>6&63]+t[63&n]);return s.join("")}A["-".charCodeAt(0)]=62,A["_".charCodeAt(0)]=63},91358:function($){function P(m,f,o,e,i){for(var r=i+1;e<=i;){var n=e+i>>>1,s=m[n];(o!==void 0?o(s,f):s-f)>=0?(r=n,i=n-1):e=n+1}return r}function t(m,f,o,e,i){for(var r=i+1;e<=i;){var n=e+i>>>1,s=m[n];(o!==void 0?o(s,f):s-f)>0?(r=n,i=n-1):e=n+1}return r}function A(m,f,o,e,i){for(var r=e-1;e<=i;){var n=e+i>>>1,s=m[n];(o!==void 0?o(s,f):s-f)<0?(r=n,e=n+1):i=n-1}return r}function M(m,f,o,e,i){for(var r=e-1;e<=i;){var n=e+i>>>1,s=m[n];(o!==void 0?o(s,f):s-f)<=0?(r=n,e=n+1):i=n-1}return r}function l(m,f,o,e,i){for(;e<=i;){var r=e+i>>>1,n=m[r],s=o!==void 0?o(n,f):n-f;if(s===0)return r;s<=0?e=r+1:i=r-1}return-1}function _(m,f,o,e,i,r){return typeof o=="function"?r(m,f,o,e===void 0?0:0|e,i===void 0?m.length-1:0|i):r(m,f,void 0,o===void 0?0:0|o,e===void 0?m.length-1:0|e)}$.exports={ge:function(m,f,o,e,i){return _(m,f,o,e,i,P)},gt:function(m,f,o,e,i){return _(m,f,o,e,i,t)},lt:function(m,f,o,e,i){return _(m,f,o,e,i,A)},le:function(m,f,o,e,i){return _(m,f,o,e,i,M)},eq:function(m,f,o,e,i){return _(m,f,o,e,i,l)}}},13547:function($,P){function t(M){var l=32;return(M&=-M)&&l--,65535&M&&(l-=16),16711935&M&&(l-=8),252645135&M&&(l-=4),858993459&M&&(l-=2),1431655765&M&&(l-=1),l}P.INT_BITS=32,P.INT_MAX=2147483647,P.INT_MIN=-2147483648,P.sign=function(M){return(M>0)-(M<0)},P.abs=function(M){var l=M>>31;return(M^l)-l},P.min=function(M,l){return l^(M^l)&-(M<l)},P.max=function(M,l){return M^(M^l)&-(M<l)},P.isPow2=function(M){return!(M&M-1||!M)},P.log2=function(M){var l,_;return l=(M>65535)<<4,l|=_=((M>>>=l)>255)<<3,l|=_=((M>>>=_)>15)<<2,(l|=_=((M>>>=_)>3)<<1)|(M>>>=_)>>1},P.log10=function(M){return M>=1e9?9:M>=1e8?8:M>=1e7?7:M>=1e6?6:M>=1e5?5:M>=1e4?4:M>=1e3?3:M>=100?2:M>=10?1:0},P.popCount=function(M){return 16843009*((M=(858993459&(M-=M>>>1&1431655765))+(M>>>2&858993459))+(M>>>4)&252645135)>>>24},P.countTrailingZeros=t,P.nextPow2=function(M){return M+=M===0,--M,M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,1+(M|=M>>>16)},P.prevPow2=function(M){return M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,(M|=M>>>16)-(M>>>1)},P.parity=function(M){return M^=M>>>16,M^=M>>>8,M^=M>>>4,27030>>>(M&=15)&1};var A=new Array(256);(function(M){for(var l=0;l<256;++l){var _=l,m=l,f=7;for(_>>>=1;_;_>>>=1)m<<=1,m|=1&_,--f;M[l]=m<<f&255}})(A),P.reverse=function(M){return A[255&M]<<24|A[M>>>8&255]<<16|A[M>>>16&255]<<8|A[M>>>24&255]},P.interleave2=function(M,l){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M&=65535)|M<<8))|M<<4))|M<<2))|M<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},P.deinterleave2=function(M,l){return(M=65535&((M=16711935&((M=252645135&((M=858993459&((M=M>>>l&1431655765)|M>>>1))|M>>>2))|M>>>4))|M>>>16))<<16>>16},P.interleave3=function(M,l,_){return M=1227133513&((M=3272356035&((M=251719695&((M=4278190335&((M&=1023)|M<<16))|M<<8))|M<<4))|M<<2),(M|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(_=1227133513&((_=3272356035&((_=251719695&((_=4278190335&((_&=1023)|_<<16))|_<<8))|_<<4))|_<<2))<<2},P.deinterleave3=function(M,l){return(M=1023&((M=4278190335&((M=251719695&((M=3272356035&((M=M>>>l&1227133513)|M>>>2))|M>>>4))|M>>>8))|M>>>16))<<22>>22},P.nextCombination=function(M){var l=M|M-1;return l+1|(~l&-~l)-1>>>t(M)+1}},44781:function($,P,t){var A=t(53435);$.exports=function(m,f){f||(f={});var o,e,i,r,n,s,a,u,p,c,x,g=f.cutoff==null?.25:f.cutoff,h=f.radius==null?8:f.radius,b=f.channel||0;if(ArrayBuffer.isView(m)||Array.isArray(m)){if(!f.width||!f.height)throw Error("For raw data width and height should be provided by options");o=f.width,e=f.height,r=m,s=f.stride?f.stride:Math.floor(m.length/o/e)}else window.HTMLCanvasElement&&m instanceof window.HTMLCanvasElement?(a=(u=m).getContext("2d"),o=u.width,e=u.height,r=(p=a.getImageData(0,0,o,e)).data,s=4):window.CanvasRenderingContext2D&&m instanceof window.CanvasRenderingContext2D?(a=m,o=(u=m.canvas).width,e=u.height,r=(p=a.getImageData(0,0,o,e)).data,s=4):window.ImageData&&m instanceof window.ImageData&&(p=m,o=m.width,e=m.height,r=p.data,s=4);if(i=Math.max(o,e),window.Uint8ClampedArray&&r instanceof window.Uint8ClampedArray||window.Uint8Array&&r instanceof window.Uint8Array)for(n=r,r=Array(o*e),c=0,x=n.length;c<x;c++)r[c]=n[c*s+b]/255;else if(s!==1)throw Error("Raw data can have only 1 value per pixel");var v=Array(o*e),y=Array(o*e),w=Array(i),d=Array(i),S=Array(i+1),T=Array(i);for(c=0,x=o*e;c<x;c++){var E=r[c];v[c]=E===1?0:E===0?M:Math.pow(Math.max(0,.5-E),2),y[c]=E===1?M:E===0?0:Math.pow(Math.max(0,E-.5),2)}l(v,o,e,w,d,T,S),l(y,o,e,w,d,T,S);var C=window.Float32Array?new Float32Array(o*e):new Array(o*e);for(c=0,x=o*e;c<x;c++)C[c]=A(1-((v[c]-y[c])/h+g),0,1);return C};var M=1e20;function l(m,f,o,e,i,r,n){for(var s=0;s<f;s++){for(var a=0;a<o;a++)e[a]=m[a*f+s];for(_(e,i,r,n,o),a=0;a<o;a++)m[a*f+s]=i[a]}for(a=0;a<o;a++){for(s=0;s<f;s++)e[s]=m[a*f+s];for(_(e,i,r,n,f),s=0;s<f;s++)m[a*f+s]=Math.sqrt(i[s])}}function _(m,f,o,e,i){o[0]=0,e[0]=-M,e[1]=+M;for(var r=1,n=0;r<i;r++){for(var s=(m[r]+r*r-(m[o[n]]+o[n]*o[n]))/(2*r-2*o[n]);s<=e[n];)n--,s=(m[r]+r*r-(m[o[n]]+o[n]*o[n]))/(2*r-2*o[n]);o[++n]=r,e[n]=s,e[n+1]=+M}for(r=0,n=0;r<i;r++){for(;e[n+1]<r;)n++;f[r]=(r-o[n])*(r-o[n])+m[o[n]]}}},6614:function($,P,t){var A=t(68318),M=t(68222),l=M(A("String.prototype.indexOf"));$.exports=function(_,m){var f=A(_,!!m);return typeof f=="function"&&l(_,".prototype.")>-1?M(f):f}},68222:function($,P,t){var A=t(77575),M=t(68318),l=M("%Function.prototype.apply%"),_=M("%Function.prototype.call%"),m=M("%Reflect.apply%",!0)||A.call(_,l),f=M("%Object.getOwnPropertyDescriptor%",!0),o=M("%Object.defineProperty%",!0),e=M("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}$.exports=function(r){var n=m(A,_,arguments);return f&&o&&f(n,"length").configurable&&o(n,"length",{value:1+e(0,r.length-(arguments.length-1))}),n};var i=function(){return m(A,l,arguments)};o?o($.exports,"apply",{value:i}):$.exports.apply=i},53435:function($){$.exports=function(P,t,A){return t<A?P<t?t:P>A?A:P:P<A?A:P>t?t:P}},6475:function($,P,t){var A=t(53435);function M(l,_){_==null&&(_=!0);var m=l[0],f=l[1],o=l[2],e=l[3];return e==null&&(e=_?1:255),_&&(m*=255,f*=255,o*=255,e*=255),16777216*(m=255&A(m,0,255))+((f=255&A(f,0,255))<<16)+((o=255&A(o,0,255))<<8)+(255&A(e,0,255))}$.exports=M,$.exports.to=M,$.exports.from=function(l,_){var m=(l=+l)>>>24,f=(16711680&l)>>>16,o=(65280&l)>>>8,e=255&l;return _===!1?[m,f,o,e]:[m/255,f/255,o/255,e/255]}},76857:function($){$.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},25075:function($,P,t){var A=t(36652),M=t(53435),l=t(90660);$.exports=function(_,m){m!=="float"&&m||(m="array"),m==="uint"&&(m="uint8"),m==="uint_clamped"&&(m="uint8_clamped");var f=new(l(m))(4),o=m!=="uint8"&&m!=="uint8_clamped";return _.length&&typeof _!="string"||((_=A(_))[0]/=255,_[1]/=255,_[2]/=255),function(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||!!(Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}(_)?(f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[3]!=null?_[3]:255,o&&(f[0]/=255,f[1]/=255,f[2]/=255,f[3]/=255),f):(o?(f[0]=_[0],f[1]=_[1],f[2]=_[2],f[3]=_[3]!=null?_[3]:1):(f[0]=M(Math.floor(255*_[0]),0,255),f[1]=M(Math.floor(255*_[1]),0,255),f[2]=M(Math.floor(255*_[2]),0,255),f[3]=_[3]==null?255:M(Math.floor(255*_[3]),0,255)),f)}},90736:function($,P,t){var A=t(76857),M=t(10973),l=t(46775);$.exports=function(m){var f,o,e=[],i=1;if(typeof m=="string")if(A[m])e=A[m].slice(),o="rgb";else if(m==="transparent")i=0,o="rgb",e=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(m)){var r=m.slice(1);i=1,(a=r.length)<=4?(e=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],a===4&&(i=parseInt(r[3]+r[3],16)/255)):(e=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],a===8&&(i=parseInt(r[6]+r[7],16)/255)),e[0]||(e[0]=0),e[1]||(e[1]=0),e[2]||(e[2]=0),o="rgb"}else if(f=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(m)){var n=f[1],s=n==="rgb";o=r=n.replace(/a$/,"");var a=r==="cmyk"?4:r==="gray"?1:3;e=f[2].trim().split(/\s*,\s*/).map(function(p,c){if(/%$/.test(p))return c===a?parseFloat(p)/100:r==="rgb"?255*parseFloat(p)/100:parseFloat(p);if(r[c]==="h"){if(/deg$/.test(p))return parseFloat(p);if(_[p]!==void 0)return _[p]}return parseFloat(p)}),n===r&&e.push(1),i=s||e[a]===void 0?1:e[a],e=e.slice(0,a)}else m.length>10&&/[0-9](?:\s|\/)/.test(m)&&(e=m.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),o=m.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(m))if(M(m)){var u=l(m.r,m.red,m.R,null);u!==null?(o="rgb",e=[u,l(m.g,m.green,m.G),l(m.b,m.blue,m.B)]):(o="hsl",e=[l(m.h,m.hue,m.H),l(m.s,m.saturation,m.S),l(m.l,m.lightness,m.L,m.b,m.brightness)]),i=l(m.a,m.alpha,m.opacity,1),m.opacity!=null&&(i/=100)}else(Array.isArray(m)||t.g.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(m))&&(e=[m[0],m[1],m[2]],o="rgb",i=m.length===4?m[3]:1);else o="rgb",e=[m>>>16,(65280&m)>>>8,255&m];return{space:o,values:e,alpha:i}};var _={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}},36652:function($,P,t){var A=t(90736),M=t(80009),l=t(53435);$.exports=function(_){var m,f=A(_);return f.space?((m=Array(3))[0]=l(f.values[0],0,255),m[1]=l(f.values[1],0,255),m[2]=l(f.values[2],0,255),f.space[0]==="h"&&(m=M.rgb(m)),m.push(l(f.alpha,0,1)),m):[]}},80009:function($,P,t){var A=t(6866);$.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(M){var l,_,m,f,o,e=M[0]/360,i=M[1]/100,r=M[2]/100;if(i===0)return[o=255*r,o,o];l=2*r-(_=r<.5?r*(1+i):r+i-r*i),f=[0,0,0];for(var n=0;n<3;n++)(m=e+.3333333333333333*-(n-1))<0?m++:m>1&&m--,o=6*m<1?l+6*(_-l)*m:2*m<1?_:3*m<2?l+(_-l)*(.6666666666666666-m)*6:l,f[n]=255*o;return f}},A.hsl=function(M){var l,_,m=M[0]/255,f=M[1]/255,o=M[2]/255,e=Math.min(m,f,o),i=Math.max(m,f,o),r=i-e;return i===e?l=0:m===i?l=(f-o)/r:f===i?l=2+(o-m)/r:o===i&&(l=4+(m-f)/r),(l=Math.min(60*l,360))<0&&(l+=360),_=(e+i)/2,[l,100*(i===e?0:_<=.5?r/(i+e):r/(2-i-e)),100*_]}},6866:function($){$.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},24138:function($){$.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|)o.?tom(e|)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},72791:function($,P,t){$.exports={parse:t(41004),stringify:t(53313)}},63625:function($,P,t){var A=t(40402);$.exports={isSize:function(M){return/^[\d\.]/.test(M)||M.indexOf("/")!==-1||A.indexOf(M)!==-1}}},41004:function($,P,t){var A=t(90448),M=t(38732),l=t(41901),_=t(15659),m=t(96209),f=t(83794),o=t(99011),e=t(63625).isSize;$.exports=r;var i=r.cache={};function r(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(i[s])return i[s];if(s==="")throw new Error("Cannot parse an empty string.");if(l.indexOf(s)!==-1)return i[s]={system:s};for(var a,u={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=o(s,/\s+/);a=p.shift();){if(M.indexOf(a)!==-1)return["style","variant","weight","stretch"].forEach(function(x){u[x]=a}),i[s]=u;if(m.indexOf(a)===-1)if(a!=="normal"&&a!=="small-caps")if(f.indexOf(a)===-1){if(_.indexOf(a)===-1){if(e(a)){var c=o(a,"/");if(u.size=c[0],c[1]!=null?u.lineHeight=n(c[1]):p[0]==="/"&&(p.shift(),u.lineHeight=n(p.shift())),!p.length)throw new Error("Missing required font-family.");return u.family=o(p.join(" "),/\s*,\s*/).map(A),i[s]=u}throw new Error("Unknown or unsupported font token: "+a)}u.weight=a}else u.stretch=a;else u.variant=a;else u.style=a}throw new Error("Missing required font-size.")}function n(s){var a=parseFloat(s);return a.toString()===s?a:s}},53313:function($,P,t){var A=t(71299),M=t(63625).isSize,l=s(t(38732)),_=s(t(41901)),m=s(t(15659)),f=s(t(96209)),o=s(t(83794)),e={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},r="serif";function n(a,u){if(a&&!u[a]&&!l[a])throw Error("Unknown keyword `"+a+"`");return a}function s(a){for(var u={},p=0;p<a.length;p++)u[a[p]]=1;return u}$.exports=function(a){if((a=A(a,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return a.system&&n(a.system,_),a.system;if(n(a.style,f),n(a.variant,e),n(a.weight,m),n(a.stretch,o),a.size==null&&(a.size="1rem"),typeof a.size=="number"&&(a.size+="px"),!M)throw Error("Bad size value `"+a.size+"`");a.family||(a.family=r),Array.isArray(a.family)&&(a.family.length||(a.family=[r]),a.family=a.family.map(function(p){return i[p]?p:'"'+p+'"'}).join(", "));var u=[];return u.push(a.style),a.variant!==a.style&&u.push(a.variant),a.weight!==a.variant&&a.weight!==a.style&&u.push(a.weight),a.stretch!==a.weight&&a.stretch!==a.variant&&a.stretch!==a.style&&u.push(a.stretch),u.push(a.size+(a.lineHeight==null||a.lineHeight==="normal"||a.lineHeight+""=="1"?"":"/"+a.lineHeight)),u.push(a.family),u.filter(Boolean).join(" ")}},55174:function($,P,t){var A,M=t(24582),l=t(10424),_=t(82527),m=t(19012),f=t(21780),o=t(16906),e=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty;A=function(n,s,a){var u,p=l(s)&&_(s.value);return delete(u=m(s)).writable,delete u.value,u.get=function(){return!a.overwriteDefinition&&r.call(this,n)?p:(s.value=e.call(p,a.resolveContext?a.resolveContext(this):this),i(this,n,s),this[n])},u},$.exports=function(n){var s=f(arguments[1]);return M(s.resolveContext)&&_(s.resolveContext),o(n,function(a,u){return A(u,a,s)})}},62072:function($,P,t){var A=t(24582),M=t(84985),l=t(95879),_=t(21780),m=t(66741),f=$.exports=function(o,e){var i,r,n,s,a;return arguments.length<2||typeof o!="string"?(s=e,e=o,o=null):s=arguments[2],A(o)?(i=m.call(o,"c"),r=m.call(o,"e"),n=m.call(o,"w")):(i=n=!0,r=!1),a={value:e,configurable:i,enumerable:r,writable:n},s?l(_(s),a):a};f.gs=function(o,e,i){var r,n,s,a;return typeof o!="string"?(s=i,i=e,e=o,o=null):s=arguments[3],A(e)?M(e)?A(i)?M(i)||(s=i,i=void 0):i=void 0:(s=e,e=i=void 0):e=void 0,A(o)?(r=m.call(o,"c"),n=m.call(o,"e")):(r=!0,n=!1),a={get:e,set:i,configurable:r,enumerable:n},s?l(_(s),a):a}},33064:function($,P,t){function A(n,s){return n<s?-1:n>s?1:n>=s?0:NaN}t.d(P,{j2:function(){return A},Fp:function(){return _},J6:function(){return f},TS:function(){return o},VV:function(){return e},w6:function(){return i},Sm:function(){return r}}),(M=A).length===1&&(l=M,M=function(n,s){return A(l(n),s)});var M,l;function _(n,s){var a,u,p=n.length,c=-1;if(s==null){for(;++c<p;)if((a=n[c])!=null&&a>=a)for(u=a;++c<p;)(a=n[c])!=null&&a>u&&(u=a)}else for(;++c<p;)if((a=s(n[c],c,n))!=null&&a>=a)for(u=a;++c<p;)(a=s(n[c],c,n))!=null&&a>u&&(u=a);return u}function m(n){return n===null?NaN:+n}function f(n,s){var a,u=n.length,p=u,c=-1,x=0;if(s==null)for(;++c<u;)isNaN(a=m(n[c]))?--p:x+=a;else for(;++c<u;)isNaN(a=m(s(n[c],c,n)))?--p:x+=a;if(p)return x/p}function o(n){for(var s,a,u,p=n.length,c=-1,x=0;++c<p;)x+=n[c].length;for(a=new Array(x);--p>=0;)for(s=(u=n[p]).length;--s>=0;)a[--x]=u[s];return a}function e(n,s){var a,u,p=n.length,c=-1;if(s==null){for(;++c<p;)if((a=n[c])!=null&&a>=a)for(u=a;++c<p;)(a=n[c])!=null&&u>a&&(u=a)}else for(;++c<p;)if((a=s(n[c],c,n))!=null&&a>=a)for(u=a;++c<p;)(a=s(n[c],c,n))!=null&&u>a&&(u=a);return u}function i(n,s,a){n=+n,s=+s,a=(p=arguments.length)<2?(s=n,n=0,1):p<3?1:+a;for(var u=-1,p=0|Math.max(0,Math.ceil((s-n)/a)),c=new Array(p);++u<p;)c[u]=n+u*a;return c}function r(n,s){var a,u=n.length,p=-1,c=0;if(s==null)for(;++p<u;)(a=+n[p])&&(c+=a);else for(;++p<u;)(a=+s(n[p],p,n))&&(c+=a);return c}},15140:function($,P,t){t.d(P,{UI:function(){return _},b1:function(){return m}});var A="$";function M(){}function l(s,a){var u=new M;if(s instanceof M)s.each(function(h,b){u.set(b,h)});else if(Array.isArray(s)){var p,c=-1,x=s.length;if(a==null)for(;++c<x;)u.set(c,s[c]);else for(;++c<x;)u.set(a(p=s[c],c,s),p)}else if(s)for(var g in s)u.set(g,s[g]);return u}M.prototype=l.prototype={constructor:M,has:function(s){return A+s in this},get:function(s){return this[A+s]},set:function(s,a){return this[A+s]=a,this},remove:function(s){var a=A+s;return a in this&&delete this[a]},clear:function(){for(var s in this)s[0]===A&&delete this[s]},keys:function(){var s=[];for(var a in this)a[0]===A&&s.push(a.slice(1));return s},values:function(){var s=[];for(var a in this)a[0]===A&&s.push(this[a]);return s},entries:function(){var s=[];for(var a in this)a[0]===A&&s.push({key:a.slice(1),value:this[a]});return s},size:function(){var s=0;for(var a in this)a[0]===A&&++s;return s},empty:function(){for(var s in this)if(s[0]===A)return!1;return!0},each:function(s){for(var a in this)a[0]===A&&s(this[a],a.slice(1),this)}};var _=l;function m(){var s,a,u,p=[],c=[];function x(h,b,v,y){if(b>=p.length)return s!=null&&h.sort(s),a!=null?a(h):h;for(var w,d,S,T=-1,E=h.length,C=p[b++],L=_(),O=v();++T<E;)(S=L.get(w=C(d=h[T])+""))?S.push(d):L.set(w,[d]);return L.each(function(z,G){y(O,G,x(z,b,v,y))}),O}function g(h,b){if(++b>p.length)return h;var v,y=c[b-1];return a!=null&&b>=p.length?v=h.entries():(v=[],h.each(function(w,d){v.push({key:d,values:g(w,b)})})),y!=null?v.sort(function(w,d){return y(w.key,d.key)}):v}return u={object:function(h){return x(h,0,f,o)},map:function(h){return x(h,0,e,i)},entries:function(h){return g(x(h,0,e,i),0)},key:function(h){return p.push(h),u},sortKeys:function(h){return c[p.length-1]=h,u},sortValues:function(h){return s=h,u},rollup:function(h){return a=h,u}}}function f(){return{}}function o(s,a,u){s[a]=u}function e(){return _()}function i(s,a,u){s.set(a,u)}function r(){}var n=_.prototype;r.prototype={constructor:r,has:n.has,add:function(s){return this[A+(s+="")]=s,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49887:function($,P,t){function A(me,ve){var Le;function Ae(){var we,se,oe=Le.length,fe=0,Se=0;for(we=0;we<oe;++we)fe+=(se=Le[we]).x,Se+=se.y;for(fe=fe/oe-me,Se=Se/oe-ve,we=0;we<oe;++we)(se=Le[we]).x-=fe,se.y-=Se}return me==null&&(me=0),ve==null&&(ve=0),Ae.initialize=function(we){Le=we},Ae.x=function(we){return arguments.length?(me=+we,Ae):me},Ae.y=function(we){return arguments.length?(ve=+we,Ae):ve},Ae}function M(me){return function(){return me}}function l(){return 1e-6*(Math.random()-.5)}function _(me,ve,Le,Ae){if(isNaN(ve)||isNaN(Le))return me;var we,se,oe,fe,Se,Me,be,Ie,Be,ce=me._root,Te={data:Ae},ye=me._x0,Pe=me._y0,Re=me._x1,ze=me._y1;if(!ce)return me._root=Te,me;for(;ce.length;)if((Me=ve>=(se=(ye+Re)/2))?ye=se:Re=se,(be=Le>=(oe=(Pe+ze)/2))?Pe=oe:ze=oe,we=ce,!(ce=ce[Ie=be<<1|Me]))return we[Ie]=Te,me;if(fe=+me._x.call(null,ce.data),Se=+me._y.call(null,ce.data),ve===fe&&Le===Se)return Te.next=ce,we?we[Ie]=Te:me._root=Te,me;do we=we?we[Ie]=new Array(4):me._root=new Array(4),(Me=ve>=(se=(ye+Re)/2))?ye=se:Re=se,(be=Le>=(oe=(Pe+ze)/2))?Pe=oe:ze=oe;while((Ie=be<<1|Me)==(Be=(Se>=oe)<<1|fe>=se));return we[Be]=ce,we[Ie]=Te,me}function m(me,ve,Le,Ae,we){this.node=me,this.x0=ve,this.y0=Le,this.x1=Ae,this.y1=we}function f(me){return me[0]}function o(me){return me[1]}function e(me,ve,Le){var Ae=new i(ve??f,Le??o,NaN,NaN,NaN,NaN);return me==null?Ae:Ae.addAll(me)}function i(me,ve,Le,Ae,we,se){this._x=me,this._y=ve,this._x0=Le,this._y0=Ae,this._x1=we,this._y1=se,this._root=void 0}function r(me){for(var ve={data:me.data},Le=ve;me=me.next;)Le=Le.next={data:me.data};return ve}t.r(P),t.d(P,{forceCenter:function(){return A},forceCollide:function(){return u},forceLink:function(){return g},forceManyBody:function(){return ue},forceRadial:function(){return he},forceSimulation:function(){return ae},forceX:function(){return de},forceY:function(){return xe}});var n=e.prototype=i.prototype;function s(me){return me.x+me.vx}function a(me){return me.y+me.vy}function u(me){var ve,Le,Ae=1,we=1;function se(){for(var Se,Me,be,Ie,Be,ce,Te,ye=ve.length,Pe=0;Pe<we;++Pe)for(Me=e(ve,s,a).visitAfter(oe),Se=0;Se<ye;++Se)be=ve[Se],ce=Le[be.index],Te=ce*ce,Ie=be.x+be.vx,Be=be.y+be.vy,Me.visit(Re);function Re(ze,He,We,Je,lt){var et=ze.data,yt=ze.r,_t=ce+yt;if(!et)return He>Ie+_t||Je<Ie-_t||We>Be+_t||lt<Be-_t;if(et.index>be.index){var xt=Ie-et.x-et.vx,at=Be-et.y-et.vy,ot=xt*xt+at*at;ot<_t*_t&&(xt===0&&(ot+=(xt=l())*xt),at===0&&(ot+=(at=l())*at),ot=(_t-(ot=Math.sqrt(ot)))/ot*Ae,be.vx+=(xt*=ot)*(_t=(yt*=yt)/(Te+yt)),be.vy+=(at*=ot)*_t,et.vx-=xt*(_t=1-_t),et.vy-=at*_t)}}}function oe(Se){if(Se.data)return Se.r=Le[Se.data.index];for(var Me=Se.r=0;Me<4;++Me)Se[Me]&&Se[Me].r>Se.r&&(Se.r=Se[Me].r)}function fe(){if(ve){var Se,Me,be=ve.length;for(Le=new Array(be),Se=0;Se<be;++Se)Me=ve[Se],Le[Me.index]=+me(Me,Se,ve)}}return typeof me!="function"&&(me=M(me==null?1:+me)),se.initialize=function(Se){ve=Se,fe()},se.iterations=function(Se){return arguments.length?(we=+Se,se):we},se.strength=function(Se){return arguments.length?(Ae=+Se,se):Ae},se.radius=function(Se){return arguments.length?(me=typeof Se=="function"?Se:M(+Se),fe(),se):me},se}n.copy=function(){var me,ve,Le=new i(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Ae=this._root;if(!Ae)return Le;if(!Ae.length)return Le._root=r(Ae),Le;for(me=[{source:Ae,target:Le._root=new Array(4)}];Ae=me.pop();)for(var we=0;we<4;++we)(ve=Ae.source[we])&&(ve.length?me.push({source:ve,target:Ae.target[we]=new Array(4)}):Ae.target[we]=r(ve));return Le},n.add=function(me){var ve=+this._x.call(null,me),Le=+this._y.call(null,me);return _(this.cover(ve,Le),ve,Le,me)},n.addAll=function(me){var ve,Le,Ae,we,se=me.length,oe=new Array(se),fe=new Array(se),Se=1/0,Me=1/0,be=-1/0,Ie=-1/0;for(Le=0;Le<se;++Le)isNaN(Ae=+this._x.call(null,ve=me[Le]))||isNaN(we=+this._y.call(null,ve))||(oe[Le]=Ae,fe[Le]=we,Ae<Se&&(Se=Ae),Ae>be&&(be=Ae),we<Me&&(Me=we),we>Ie&&(Ie=we));if(Se>be||Me>Ie)return this;for(this.cover(Se,Me).cover(be,Ie),Le=0;Le<se;++Le)_(this,oe[Le],fe[Le],me[Le]);return this},n.cover=function(me,ve){if(isNaN(me=+me)||isNaN(ve=+ve))return this;var Le=this._x0,Ae=this._y0,we=this._x1,se=this._y1;if(isNaN(Le))we=(Le=Math.floor(me))+1,se=(Ae=Math.floor(ve))+1;else{for(var oe,fe,Se=we-Le,Me=this._root;Le>me||me>=we||Ae>ve||ve>=se;)switch(fe=(ve<Ae)<<1|me<Le,(oe=new Array(4))[fe]=Me,Me=oe,Se*=2,fe){case 0:we=Le+Se,se=Ae+Se;break;case 1:Le=we-Se,se=Ae+Se;break;case 2:we=Le+Se,Ae=se-Se;break;case 3:Le=we-Se,Ae=se-Se}this._root&&this._root.length&&(this._root=Me)}return this._x0=Le,this._y0=Ae,this._x1=we,this._y1=se,this},n.data=function(){var me=[];return this.visit(function(ve){if(!ve.length)do me.push(ve.data);while(ve=ve.next)}),me},n.extent=function(me){return arguments.length?this.cover(+me[0][0],+me[0][1]).cover(+me[1][0],+me[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},n.find=function(me,ve,Le){var Ae,we,se,oe,fe,Se,Me,be=this._x0,Ie=this._y0,Be=this._x1,ce=this._y1,Te=[],ye=this._root;for(ye&&Te.push(new m(ye,be,Ie,Be,ce)),Le==null?Le=1/0:(be=me-Le,Ie=ve-Le,Be=me+Le,ce=ve+Le,Le*=Le);Se=Te.pop();)if(!(!(ye=Se.node)||(we=Se.x0)>Be||(se=Se.y0)>ce||(oe=Se.x1)<be||(fe=Se.y1)<Ie))if(ye.length){var Pe=(we+oe)/2,Re=(se+fe)/2;Te.push(new m(ye[3],Pe,Re,oe,fe),new m(ye[2],we,Re,Pe,fe),new m(ye[1],Pe,se,oe,Re),new m(ye[0],we,se,Pe,Re)),(Me=(ve>=Re)<<1|me>=Pe)&&(Se=Te[Te.length-1],Te[Te.length-1]=Te[Te.length-1-Me],Te[Te.length-1-Me]=Se)}else{var ze=me-+this._x.call(null,ye.data),He=ve-+this._y.call(null,ye.data),We=ze*ze+He*He;if(We<Le){var Je=Math.sqrt(Le=We);be=me-Je,Ie=ve-Je,Be=me+Je,ce=ve+Je,Ae=ye.data}}return Ae},n.remove=function(me){if(isNaN(se=+this._x.call(null,me))||isNaN(oe=+this._y.call(null,me)))return this;var ve,Le,Ae,we,se,oe,fe,Se,Me,be,Ie,Be,ce=this._root,Te=this._x0,ye=this._y0,Pe=this._x1,Re=this._y1;if(!ce)return this;if(ce.length)for(;;){if((Me=se>=(fe=(Te+Pe)/2))?Te=fe:Pe=fe,(be=oe>=(Se=(ye+Re)/2))?ye=Se:Re=Se,ve=ce,!(ce=ce[Ie=be<<1|Me]))return this;if(!ce.length)break;(ve[Ie+1&3]||ve[Ie+2&3]||ve[Ie+3&3])&&(Le=ve,Be=Ie)}for(;ce.data!==me;)if(Ae=ce,!(ce=ce.next))return this;return(we=ce.next)&&delete ce.next,Ae?(we?Ae.next=we:delete Ae.next,this):ve?(we?ve[Ie]=we:delete ve[Ie],(ce=ve[0]||ve[1]||ve[2]||ve[3])&&ce===(ve[3]||ve[2]||ve[1]||ve[0])&&!ce.length&&(Le?Le[Be]=ce:this._root=ce),this):(this._root=we,this)},n.removeAll=function(me){for(var ve=0,Le=me.length;ve<Le;++ve)this.remove(me[ve]);return this},n.root=function(){return this._root},n.size=function(){var me=0;return this.visit(function(ve){if(!ve.length)do++me;while(ve=ve.next)}),me},n.visit=function(me){var ve,Le,Ae,we,se,oe,fe=[],Se=this._root;for(Se&&fe.push(new m(Se,this._x0,this._y0,this._x1,this._y1));ve=fe.pop();)if(!me(Se=ve.node,Ae=ve.x0,we=ve.y0,se=ve.x1,oe=ve.y1)&&Se.length){var Me=(Ae+se)/2,be=(we+oe)/2;(Le=Se[3])&&fe.push(new m(Le,Me,be,se,oe)),(Le=Se[2])&&fe.push(new m(Le,Ae,be,Me,oe)),(Le=Se[1])&&fe.push(new m(Le,Me,we,se,be)),(Le=Se[0])&&fe.push(new m(Le,Ae,we,Me,be))}return this},n.visitAfter=function(me){var ve,Le=[],Ae=[];for(this._root&&Le.push(new m(this._root,this._x0,this._y0,this._x1,this._y1));ve=Le.pop();){var we=ve.node;if(we.length){var se,oe=ve.x0,fe=ve.y0,Se=ve.x1,Me=ve.y1,be=(oe+Se)/2,Ie=(fe+Me)/2;(se=we[0])&&Le.push(new m(se,oe,fe,be,Ie)),(se=we[1])&&Le.push(new m(se,be,fe,Se,Ie)),(se=we[2])&&Le.push(new m(se,oe,Ie,be,Me)),(se=we[3])&&Le.push(new m(se,be,Ie,Se,Me))}Ae.push(ve)}for(;ve=Ae.pop();)me(ve.node,ve.x0,ve.y0,ve.x1,ve.y1);return this},n.x=function(me){return arguments.length?(this._x=me,this):this._x},n.y=function(me){return arguments.length?(this._y=me,this):this._y};var p=t(15140);function c(me){return me.index}function x(me,ve){var Le=me.get(ve);if(!Le)throw new Error("missing: "+ve);return Le}function g(me){var ve,Le,Ae,we,se,oe=c,fe=function(Te){return 1/Math.min(we[Te.source.index],we[Te.target.index])},Se=M(30),Me=1;function be(Te){for(var ye=0,Pe=me.length;ye<Me;++ye)for(var Re,ze,He,We,Je,lt,et,yt=0;yt<Pe;++yt)ze=(Re=me[yt]).source,We=(He=Re.target).x+He.vx-ze.x-ze.vx||l(),Je=He.y+He.vy-ze.y-ze.vy||l(),We*=lt=((lt=Math.sqrt(We*We+Je*Je))-Le[yt])/lt*Te*ve[yt],Je*=lt,He.vx-=We*(et=se[yt]),He.vy-=Je*et,ze.vx+=We*(et=1-et),ze.vy+=Je*et}function Ie(){if(Ae){var Te,ye,Pe=Ae.length,Re=me.length,ze=(0,p.UI)(Ae,oe);for(Te=0,we=new Array(Pe);Te<Re;++Te)(ye=me[Te]).index=Te,typeof ye.source!="object"&&(ye.source=x(ze,ye.source)),typeof ye.target!="object"&&(ye.target=x(ze,ye.target)),we[ye.source.index]=(we[ye.source.index]||0)+1,we[ye.target.index]=(we[ye.target.index]||0)+1;for(Te=0,se=new Array(Re);Te<Re;++Te)ye=me[Te],se[Te]=we[ye.source.index]/(we[ye.source.index]+we[ye.target.index]);ve=new Array(Re),Be(),Le=new Array(Re),ce()}}function Be(){if(Ae)for(var Te=0,ye=me.length;Te<ye;++Te)ve[Te]=+fe(me[Te],Te,me)}function ce(){if(Ae)for(var Te=0,ye=me.length;Te<ye;++Te)Le[Te]=+Se(me[Te],Te,me)}return me==null&&(me=[]),be.initialize=function(Te){Ae=Te,Ie()},be.links=function(Te){return arguments.length?(me=Te,Ie(),be):me},be.id=function(Te){return arguments.length?(oe=Te,be):oe},be.iterations=function(Te){return arguments.length?(Me=+Te,be):Me},be.strength=function(Te){return arguments.length?(fe=typeof Te=="function"?Te:M(+Te),Be(),be):fe},be.distance=function(Te){return arguments.length?(Se=typeof Te=="function"?Te:M(+Te),ce(),be):Se},be}var h={value:function(){}};function b(){for(var me,ve=0,Le=arguments.length,Ae={};ve<Le;++ve){if(!(me=arguments[ve]+"")||me in Ae||/[\s.]/.test(me))throw new Error("illegal type: "+me);Ae[me]=[]}return new v(Ae)}function v(me){this._=me}function y(me,ve){for(var Le,Ae=0,we=me.length;Ae<we;++Ae)if((Le=me[Ae]).name===ve)return Le.value}function w(me,ve,Le){for(var Ae=0,we=me.length;Ae<we;++Ae)if(me[Ae].name===ve){me[Ae]=h,me=me.slice(0,Ae).concat(me.slice(Ae+1));break}return Le!=null&&me.push({name:ve,value:Le}),me}v.prototype=b.prototype={constructor:v,on:function(me,ve){var Le,Ae,we=this._,se=(Ae=we,(me+"").trim().split(/^|\s+/).map(function(Se){var Me="",be=Se.indexOf(".");if(be>=0&&(Me=Se.slice(be+1),Se=Se.slice(0,be)),Se&&!Ae.hasOwnProperty(Se))throw new Error("unknown type: "+Se);return{type:Se,name:Me}})),oe=-1,fe=se.length;if(!(arguments.length<2)){if(ve!=null&&typeof ve!="function")throw new Error("invalid callback: "+ve);for(;++oe<fe;)if(Le=(me=se[oe]).type)we[Le]=w(we[Le],me.name,ve);else if(ve==null)for(Le in we)we[Le]=w(we[Le],me.name,null);return this}for(;++oe<fe;)if((Le=(me=se[oe]).type)&&(Le=y(we[Le],me.name)))return Le},copy:function(){var me={},ve=this._;for(var Le in ve)me[Le]=ve[Le].slice();return new v(me)},call:function(me,ve){if((Le=arguments.length-2)>0)for(var Le,Ae,we=new Array(Le),se=0;se<Le;++se)we[se]=arguments[se+2];if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(se=0,Le=(Ae=this._[me]).length;se<Le;++se)Ae[se].value.apply(ve,we)},apply:function(me,ve,Le){if(!this._.hasOwnProperty(me))throw new Error("unknown type: "+me);for(var Ae=this._[me],we=0,se=Ae.length;we<se;++we)Ae[we].value.apply(ve,Le)}};var d,S,T=b,E=0,C=0,L=0,O=1e3,z=0,G=0,I=0,H=typeof performance=="object"&&performance.now?performance:Date,N=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(me){setTimeout(me,17)};function F(){return G||(N(V),G=H.now()+I)}function V(){G=0}function W(){this._call=this._time=this._next=null}function te(me,ve,Le){var Ae=new W;return Ae.restart(me,ve,Le),Ae}function Q(){G=(z=H.now())+I,E=C=0;try{(function(){F(),++E;for(var me,ve=d;ve;)(me=G-ve._time)>=0&&ve._call.call(null,me),ve=ve._next;--E})()}finally{E=0,function(){for(var me,ve,Le=d,Ae=1/0;Le;)Le._call?(Ae>Le._time&&(Ae=Le._time),me=Le,Le=Le._next):(ve=Le._next,Le._next=null,Le=me?me._next=ve:d=ve);S=me,q(Ae)}(),G=0}}function X(){var me=H.now(),ve=me-z;ve>O&&(I-=ve,z=me)}function q(me){E||(C&&(C=clearTimeout(C)),me-G>24?(me<1/0&&(C=setTimeout(Q,me-H.now()-I)),L&&(L=clearInterval(L))):(L||(z=H.now(),L=setInterval(X,O)),E=1,N(Q)))}function Z(me){return me.x}function J(me){return me.y}W.prototype=te.prototype={constructor:W,restart:function(me,ve,Le){if(typeof me!="function")throw new TypeError("callback is not a function");Le=(Le==null?F():+Le)+(ve==null?0:+ve),this._next||S===this||(S?S._next=this:d=this,S=this),this._call=me,this._time=Le,q()},stop:function(){this._call&&(this._call=null,this._time=1/0,q())}};var ne=10,re=Math.PI*(3-Math.sqrt(5));function ae(me){var ve,Le=1,Ae=.001,we=1-Math.pow(Ae,1/300),se=0,oe=.6,fe=(0,p.UI)(),Se=te(be),Me=T("tick","end");function be(){Ie(),Me.call("tick",ve),Le<Ae&&(Se.stop(),Me.call("end",ve))}function Ie(Te){var ye,Pe,Re=me.length;Te===void 0&&(Te=1);for(var ze=0;ze<Te;++ze)for(Le+=(se-Le)*we,fe.each(function(He){He(Le)}),ye=0;ye<Re;++ye)(Pe=me[ye]).fx==null?Pe.x+=Pe.vx*=oe:(Pe.x=Pe.fx,Pe.vx=0),Pe.fy==null?Pe.y+=Pe.vy*=oe:(Pe.y=Pe.fy,Pe.vy=0);return ve}function Be(){for(var Te,ye=0,Pe=me.length;ye<Pe;++ye){if((Te=me[ye]).index=ye,Te.fx!=null&&(Te.x=Te.fx),Te.fy!=null&&(Te.y=Te.fy),isNaN(Te.x)||isNaN(Te.y)){var Re=ne*Math.sqrt(ye),ze=ye*re;Te.x=Re*Math.cos(ze),Te.y=Re*Math.sin(ze)}(isNaN(Te.vx)||isNaN(Te.vy))&&(Te.vx=Te.vy=0)}}function ce(Te){return Te.initialize&&Te.initialize(me),Te}return me==null&&(me=[]),Be(),ve={tick:Ie,restart:function(){return Se.restart(be),ve},stop:function(){return Se.stop(),ve},nodes:function(Te){return arguments.length?(me=Te,Be(),fe.each(ce),ve):me},alpha:function(Te){return arguments.length?(Le=+Te,ve):Le},alphaMin:function(Te){return arguments.length?(Ae=+Te,ve):Ae},alphaDecay:function(Te){return arguments.length?(we=+Te,ve):+we},alphaTarget:function(Te){return arguments.length?(se=+Te,ve):se},velocityDecay:function(Te){return arguments.length?(oe=1-Te,ve):1-oe},force:function(Te,ye){return arguments.length>1?(ye==null?fe.remove(Te):fe.set(Te,ce(ye)),ve):fe.get(Te)},find:function(Te,ye,Pe){var Re,ze,He,We,Je,lt=0,et=me.length;for(Pe==null?Pe=1/0:Pe*=Pe,lt=0;lt<et;++lt)(He=(Re=Te-(We=me[lt]).x)*Re+(ze=ye-We.y)*ze)<Pe&&(Je=We,Pe=He);return Je},on:function(Te,ye){return arguments.length>1?(Me.on(Te,ye),ve):Me.on(Te)}}}function ue(){var me,ve,Le,Ae,we=M(-30),se=1,oe=1/0,fe=.81;function Se(Be){var ce,Te=me.length,ye=e(me,Z,J).visitAfter(be);for(Le=Be,ce=0;ce<Te;++ce)ve=me[ce],ye.visit(Ie)}function Me(){if(me){var Be,ce,Te=me.length;for(Ae=new Array(Te),Be=0;Be<Te;++Be)ce=me[Be],Ae[ce.index]=+we(ce,Be,me)}}function be(Be){var ce,Te,ye,Pe,Re,ze=0,He=0;if(Be.length){for(ye=Pe=Re=0;Re<4;++Re)(ce=Be[Re])&&(Te=Math.abs(ce.value))&&(ze+=ce.value,He+=Te,ye+=Te*ce.x,Pe+=Te*ce.y);Be.x=ye/He,Be.y=Pe/He}else{(ce=Be).x=ce.data.x,ce.y=ce.data.y;do ze+=Ae[ce.data.index];while(ce=ce.next)}Be.value=ze}function Ie(Be,ce,Te,ye){if(!Be.value)return!0;var Pe=Be.x-ve.x,Re=Be.y-ve.y,ze=ye-ce,He=Pe*Pe+Re*Re;if(ze*ze/fe<He)return He<oe&&(Pe===0&&(He+=(Pe=l())*Pe),Re===0&&(He+=(Re=l())*Re),He<se&&(He=Math.sqrt(se*He)),ve.vx+=Pe*Be.value*Le/He,ve.vy+=Re*Be.value*Le/He),!0;if(!(Be.length||He>=oe)){(Be.data!==ve||Be.next)&&(Pe===0&&(He+=(Pe=l())*Pe),Re===0&&(He+=(Re=l())*Re),He<se&&(He=Math.sqrt(se*He)));do Be.data!==ve&&(ze=Ae[Be.data.index]*Le/He,ve.vx+=Pe*ze,ve.vy+=Re*ze);while(Be=Be.next)}}return Se.initialize=function(Be){me=Be,Me()},Se.strength=function(Be){return arguments.length?(we=typeof Be=="function"?Be:M(+Be),Me(),Se):we},Se.distanceMin=function(Be){return arguments.length?(se=Be*Be,Se):Math.sqrt(se)},Se.distanceMax=function(Be){return arguments.length?(oe=Be*Be,Se):Math.sqrt(oe)},Se.theta=function(Be){return arguments.length?(fe=Be*Be,Se):Math.sqrt(fe)},Se}function he(me,ve,Le){var Ae,we,se,oe=M(.1);function fe(Me){for(var be=0,Ie=Ae.length;be<Ie;++be){var Be=Ae[be],ce=Be.x-ve||1e-6,Te=Be.y-Le||1e-6,ye=Math.sqrt(ce*ce+Te*Te),Pe=(se[be]-ye)*we[be]*Me/ye;Be.vx+=ce*Pe,Be.vy+=Te*Pe}}function Se(){if(Ae){var Me,be=Ae.length;for(we=new Array(be),se=new Array(be),Me=0;Me<be;++Me)se[Me]=+me(Ae[Me],Me,Ae),we[Me]=isNaN(se[Me])?0:+oe(Ae[Me],Me,Ae)}}return typeof me!="function"&&(me=M(+me)),ve==null&&(ve=0),Le==null&&(Le=0),fe.initialize=function(Me){Ae=Me,Se()},fe.strength=function(Me){return arguments.length?(oe=typeof Me=="function"?Me:M(+Me),Se(),fe):oe},fe.radius=function(Me){return arguments.length?(me=typeof Me=="function"?Me:M(+Me),Se(),fe):me},fe.x=function(Me){return arguments.length?(ve=+Me,fe):ve},fe.y=function(Me){return arguments.length?(Le=+Me,fe):Le},fe}function de(me){var ve,Le,Ae,we=M(.1);function se(fe){for(var Se,Me=0,be=ve.length;Me<be;++Me)(Se=ve[Me]).vx+=(Ae[Me]-Se.x)*Le[Me]*fe}function oe(){if(ve){var fe,Se=ve.length;for(Le=new Array(Se),Ae=new Array(Se),fe=0;fe<Se;++fe)Le[fe]=isNaN(Ae[fe]=+me(ve[fe],fe,ve))?0:+we(ve[fe],fe,ve)}}return typeof me!="function"&&(me=M(me==null?0:+me)),se.initialize=function(fe){ve=fe,oe()},se.strength=function(fe){return arguments.length?(we=typeof fe=="function"?fe:M(+fe),oe(),se):we},se.x=function(fe){return arguments.length?(me=typeof fe=="function"?fe:M(+fe),oe(),se):me},se}function xe(me){var ve,Le,Ae,we=M(.1);function se(fe){for(var Se,Me=0,be=ve.length;Me<be;++Me)(Se=ve[Me]).vy+=(Ae[Me]-Se.y)*Le[Me]*fe}function oe(){if(ve){var fe,Se=ve.length;for(Le=new Array(Se),Ae=new Array(Se),fe=0;fe<Se;++fe)Le[fe]=isNaN(Ae[fe]=+me(ve[fe],fe,ve))?0:+we(ve[fe],fe,ve)}}return typeof me!="function"&&(me=M(me==null?0:+me)),se.initialize=function(fe){ve=fe,oe()},se.strength=function(fe){return arguments.length?(we=typeof fe=="function"?fe:M(+fe),oe(),se):we},se.y=function(fe){return arguments.length?(me=typeof fe=="function"?fe:M(+fe),oe(),se):me},se}},60721:function($,P,t){function A(u,p){if((c=(u=p?u.toExponential(p-1):u.toExponential()).indexOf("e"))<0)return null;var c,x=u.slice(0,c);return[x.length>1?x[0]+x.slice(2):x,+u.slice(c+1)]}t.d(P,{WU:function(){return r},FF:function(){return a}});var M,l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _(u){if(!(p=l.exec(u)))throw new Error("invalid format: "+u);var p;return new m({fill:p[1],align:p[2],sign:p[3],symbol:p[4],zero:p[5],width:p[6],comma:p[7],precision:p[8]&&p[8].slice(1),trim:p[9],type:p[10]})}function m(u){this.fill=u.fill===void 0?" ":u.fill+"",this.align=u.align===void 0?">":u.align+"",this.sign=u.sign===void 0?"-":u.sign+"",this.symbol=u.symbol===void 0?"":u.symbol+"",this.zero=!!u.zero,this.width=u.width===void 0?void 0:+u.width,this.comma=!!u.comma,this.precision=u.precision===void 0?void 0:+u.precision,this.trim=!!u.trim,this.type=u.type===void 0?"":u.type+""}function f(u,p){var c=A(u,p);if(!c)return u+"";var x=c[0],g=c[1];return g<0?"0."+new Array(-g).join("0")+x:x.length>g+1?x.slice(0,g+1)+"."+x.slice(g+1):x+new Array(g-x.length+2).join("0")}_.prototype=m.prototype,m.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,0|this.width))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var o={"%":function(u,p){return(100*u).toFixed(p)},b:function(u){return Math.round(u).toString(2)},c:function(u){return u+""},d:function(u){return Math.abs(u=Math.round(u))>=1e21?u.toLocaleString("en").replace(/,/g,""):u.toString(10)},e:function(u,p){return u.toExponential(p)},f:function(u,p){return u.toFixed(p)},g:function(u,p){return u.toPrecision(p)},o:function(u){return Math.round(u).toString(8)},p:function(u,p){return f(100*u,p)},r:f,s:function(u,p){var c=A(u,p);if(!c)return u+"";var x=c[0],g=c[1],h=g-(M=3*Math.max(-8,Math.min(8,Math.floor(g/3))))+1,b=x.length;return h===b?x:h>b?x+new Array(h-b+1).join("0"):h>0?x.slice(0,h)+"."+x.slice(h):"0."+new Array(1-h).join("0")+A(u,Math.max(0,p+h-1))[0]},X:function(u){return Math.round(u).toString(16).toUpperCase()},x:function(u){return Math.round(u).toString(16)}};function e(u){return u}var i,r,n=Array.prototype.map,s=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function a(u){var p,c,x=u.grouping===void 0||u.thousands===void 0?e:(p=n.call(u.grouping,Number),c=u.thousands+"",function(T,E){for(var C=T.length,L=[],O=0,z=p[0],G=0;C>0&&z>0&&(G+z+1>E&&(z=Math.max(1,E-G)),L.push(T.substring(C-=z,C+z)),!((G+=z+1)>E));)z=p[O=(O+1)%p.length];return L.reverse().join(c)}),g=u.currency===void 0?"":u.currency[0]+"",h=u.currency===void 0?"":u.currency[1]+"",b=u.decimal===void 0?".":u.decimal+"",v=u.numerals===void 0?e:function(T){return function(E){return E.replace(/[0-9]/g,function(C){return T[+C]})}}(n.call(u.numerals,String)),y=u.percent===void 0?"%":u.percent+"",w=u.minus===void 0?"-":u.minus+"",d=u.nan===void 0?"NaN":u.nan+"";function S(T){var E=(T=_(T)).fill,C=T.align,L=T.sign,O=T.symbol,z=T.zero,G=T.width,I=T.comma,H=T.precision,N=T.trim,F=T.type;F==="n"?(I=!0,F="g"):o[F]||(H===void 0&&(H=12),N=!0,F="g"),(z||E==="0"&&C==="=")&&(z=!0,E="0",C="=");var V=O==="$"?g:O==="#"&&/[boxX]/.test(F)?"0"+F.toLowerCase():"",W=O==="$"?h:/[%p]/.test(F)?y:"",te=o[F],Q=/[defgprs%]/.test(F);function X(q){var Z,J,ne,re=V,ae=W;if(F==="c")ae=te(q)+ae,q="";else{var ue=(q=+q)<0||1/q<0;if(q=isNaN(q)?d:te(Math.abs(q),H),N&&(q=function(xe){e:for(var me,ve=xe.length,Le=1,Ae=-1;Le<ve;++Le)switch(xe[Le]){case".":Ae=me=Le;break;case"0":Ae===0&&(Ae=Le),me=Le;break;default:if(!+xe[Le])break e;Ae>0&&(Ae=0)}return Ae>0?xe.slice(0,Ae)+xe.slice(me+1):xe}(q)),ue&&+q==0&&L!=="+"&&(ue=!1),re=(ue?L==="("?L:w:L==="-"||L==="("?"":L)+re,ae=(F==="s"?s[8+M/3]:"")+ae+(ue&&L==="("?")":""),Q){for(Z=-1,J=q.length;++Z<J;)if(48>(ne=q.charCodeAt(Z))||ne>57){ae=(ne===46?b+q.slice(Z+1):q.slice(Z))+ae,q=q.slice(0,Z);break}}}I&&!z&&(q=x(q,1/0));var he=re.length+q.length+ae.length,de=he<G?new Array(G-he+1).join(E):"";switch(I&&z&&(q=x(de+q,de.length?G-ae.length:1/0),de=""),C){case"<":q=re+q+ae+de;break;case"=":q=re+de+q+ae;break;case"^":q=de.slice(0,he=de.length>>1)+re+q+ae+de.slice(he);break;default:q=de+re+q+ae}return v(q)}return H=H===void 0?6:/[gprs]/.test(F)?Math.max(1,Math.min(21,H)):Math.max(0,Math.min(20,H)),X.toString=function(){return T+""},X}return{format:S,formatPrefix:function(T,E){var C,L=S(((T=_(T)).type="f",T)),O=3*Math.max(-8,Math.min(8,Math.floor((C=E,((C=A(Math.abs(C)))?C[1]:NaN)/3)))),z=Math.pow(10,-O),G=s[8+O/3];return function(I){return L(z*I)+G}}}}i=a({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),r=i.format,i.formatPrefix},65704:function($,P,t){t.r(P),t.d(P,{geoAiry:function(){return I},geoAiryRaw:function(){return G},geoAitoff:function(){return N},geoAitoffRaw:function(){return H},geoArmadillo:function(){return V},geoArmadilloRaw:function(){return F},geoAugust:function(){return te},geoAugustRaw:function(){return W},geoBaker:function(){return Z},geoBakerRaw:function(){return q},geoBerghaus:function(){return re},geoBerghausRaw:function(){return ne},geoBertin1953:function(){return Le},geoBertin1953Raw:function(){return ve},geoBoggs:function(){return be},geoBoggsRaw:function(){return Me},geoBonne:function(){return ye},geoBonneRaw:function(){return Te},geoBottomley:function(){return Re},geoBottomleyRaw:function(){return Pe},geoBromley:function(){return He},geoBromleyRaw:function(){return ze},geoChamberlin:function(){return ot},geoChamberlinAfrica:function(){return at},geoChamberlinRaw:function(){return _t},geoCollignon:function(){return Ct},geoCollignonRaw:function(){return At},geoCraig:function(){return St},geoCraigRaw:function(){return zt},geoCraster:function(){return Ve},geoCrasterRaw:function(){return Xe},geoCylindricalEqualArea:function(){return st},geoCylindricalEqualAreaRaw:function(){return Ze},geoCylindricalStereographic:function(){return De},geoCylindricalStereographicRaw:function(){return nt},geoEckert1:function(){return rt},geoEckert1Raw:function(){return Fe},geoEckert2:function(){return gt},geoEckert2Raw:function(){return tt},geoEckert3:function(){return mt},geoEckert3Raw:function(){return dt},geoEckert4:function(){return kt},geoEckert4Raw:function(){return ft},geoEckert5:function(){return pt},geoEckert5Raw:function(){return ht},geoEckert6:function(){return Ft},geoEckert6Raw:function(){return wt},geoEisenlohr:function(){return an},geoEisenlohrRaw:function(){return Gt},geoFahey:function(){return en},geoFaheyRaw:function(){return Yt},geoFoucaut:function(){return Bn},geoFoucautRaw:function(){return Tn},geoFoucautSinusoidal:function(){return Kt},geoFoucautSinusoidalRaw:function(){return mn},geoGilbert:function(){return En},geoGingery:function(){return Pn},geoGingeryRaw:function(){return Sn},geoGinzburg4:function(){return lr},geoGinzburg4Raw:function(){return ur},geoGinzburg5:function(){return $n},geoGinzburg5Raw:function(){return ir},geoGinzburg6:function(){return jt},geoGinzburg6Raw:function(){return vr},geoGinzburg8:function(){return fn},geoGinzburg8Raw:function(){return rn},geoGinzburg9:function(){return Ln},geoGinzburg9Raw:function(){return xn},geoGringorten:function(){return Hn},geoGringortenQuincuncial:function(){return Ba},geoGringortenRaw:function(){return Un},geoGuyou:function(){return Et},geoGuyouRaw:function(){return On},geoHammer:function(){return de},geoHammerRaw:function(){return ue},geoHammerRetroazimuthal:function(){return Cn},geoHammerRetroazimuthalRaw:function(){return nn},geoHealpix:function(){return Qn},geoHealpixRaw:function(){return hn},geoHill:function(){return Ke},geoHillRaw:function(){return Wn},geoHomolosine:function(){return wn},geoHomolosineRaw:function(){return ln},geoHufnagel:function(){return bn},geoHufnagelRaw:function(){return jn},geoHyperelliptical:function(){return mr},geoHyperellipticalRaw:function(){return ar},geoInterrupt:function(){return Br},geoInterruptedBoggs:function(){return fi},geoInterruptedHomolosine:function(){return bi},geoInterruptedMollweide:function(){return Go},geoInterruptedMollweideHemispheres:function(){return Ks},geoInterruptedQuarticAuthalic:function(){return Ms},geoInterruptedSinuMollweide:function(){return cl},geoInterruptedSinusoidal:function(){return qo},geoKavrayskiy7:function(){return Ri},geoKavrayskiy7Raw:function(){return eo},geoLagrange:function(){return ei},geoLagrangeRaw:function(){return ws},geoLarrivee:function(){return uo},geoLarriveeRaw:function(){return Ca},geoLaskowski:function(){return Ao},geoLaskowskiRaw:function(){return Ha},geoLittrow:function(){return fo},geoLittrowRaw:function(){return co},geoLoximuthal:function(){return fl},geoLoximuthalRaw:function(){return Fs},geoMiller:function(){return hl},geoMillerRaw:function(){return ko},geoModifiedStereographic:function(){return za},geoModifiedStereographicAlaska:function(){return Yo},geoModifiedStereographicGs48:function(){return cs},geoModifiedStereographicGs50:function(){return Ns},geoModifiedStereographicLee:function(){return el},geoModifiedStereographicMiller:function(){return Qs},geoModifiedStereographicRaw:function(){return Js},geoMollweide:function(){return oe},geoMollweideRaw:function(){return se},geoMtFlatPolarParabolic:function(){return vl},geoMtFlatPolarParabolicRaw:function(){return ho},geoMtFlatPolarQuartic:function(){return li},geoMtFlatPolarQuarticRaw:function(){return Eo},geoMtFlatPolarSinusoidal:function(){return Ts},geoMtFlatPolarSinusoidalRaw:function(){return Ga},geoNaturalEarth:function(){return Ra.Z},geoNaturalEarth2:function(){return Cl},geoNaturalEarth2Raw:function(){return Xo},geoNaturalEarthRaw:function(){return Ra.K},geoNellHammer:function(){return ml},geoNellHammerRaw:function(){return js},geoNicolosi:function(){return As},geoNicolosiRaw:function(){return fs},geoPatterson:function(){return Hs},geoPattersonRaw:function(){return Po},geoPeirceQuincuncial:function(){return Gs},geoPierceQuincuncial:function(){return Gs},geoPolyconic:function(){return tl},geoPolyconicRaw:function(){return Ko},geoPolyhedral:function(){return Oo},geoPolyhedralButterfly:function(){return nl},geoPolyhedralCollignon:function(){return Es},geoPolyhedralWaterman:function(){return yo},geoProject:function(){return es},geoQuantize:function(){return Fa},geoQuincuncial:function(){return La},geoRectangularPolyconic:function(){return Sr},geoRectangularPolyconicRaw:function(){return Ki},geoRobinson:function(){return Ws},geoRobinsonRaw:function(){return Cs},geoSatellite:function(){return ns},geoSatelliteRaw:function(){return ts},geoSinuMollweide:function(){return Bt},geoSinuMollweideRaw:function(){return Lt},geoSinusoidal:function(){return ce},geoSinusoidalRaw:function(){return Be},geoStitch:function(){return Hi},geoTimes:function(){return rl},geoTimesRaw:function(){return io},geoTwoPointAzimuthal:function(){return ao},geoTwoPointAzimuthalRaw:function(){return oi},geoTwoPointAzimuthalUsa:function(){return Oa},geoTwoPointEquidistant:function(){return Bo},geoTwoPointEquidistantRaw:function(){return Xa},geoTwoPointEquidistantUsa:function(){return qs},geoVanDerGrinten:function(){return Bi},geoVanDerGrinten2:function(){return Pr},geoVanDerGrinten2Raw:function(){return na},geoVanDerGrinten3:function(){return vs},geoVanDerGrinten3Raw:function(){return Dr},geoVanDerGrinten4:function(){return Fo},geoVanDerGrinten4Raw:function(){return pa},geoVanDerGrintenRaw:function(){return is},geoWagner:function(){return ms},geoWagner4:function(){return Gi},geoWagner4Raw:function(){return jr},geoWagner6:function(){return Ta},geoWagner6Raw:function(){return oo},geoWagner7:function(){return ia},geoWagnerRaw:function(){return ra},geoWiechel:function(){return ys},geoWiechelRaw:function(){return as},geoWinkel3:function(){return _o},geoWinkel3Raw:function(){return os}});var A=t(15002),M=Math.abs,l=Math.atan,_=Math.atan2,m=Math.cos,f=Math.exp,o=Math.floor,e=Math.log,i=Math.max,r=Math.min,n=Math.pow,s=Math.round,a=Math.sign||function(R){return R>0?1:R<0?-1:0},u=Math.sin,p=Math.tan,c=1e-6,x=1e-12,g=Math.PI,h=g/2,b=g/4,v=Math.SQRT1_2,y=L(2),w=L(g),d=2*g,S=180/g,T=g/180;function E(R){return R>1?h:R<-1?-h:Math.asin(R)}function C(R){return R>1?0:R<-1?g:Math.acos(R)}function L(R){return R>0?Math.sqrt(R):0}function O(R){return(f(R)-f(-R))/2}function z(R){return(f(R)+f(-R))/2}function G(R){var U=p(R/2),j=2*e(m(R/2))/(U*U);function K(pe,ke){var B=m(pe),ee=m(ke),ie=u(ke),ge=ee*B,_e=-((1-ge?e((1+ge)/2)/(1-ge):-.5)+j/(1+ge));return[_e*ee*u(pe),_e*ie]}return K.invert=function(pe,ke){var B,ee=L(pe*pe+ke*ke),ie=-R/2,ge=50;if(!ee)return[0,0];do{var _e=ie/2,Ce=m(_e),Ne=u(_e),Ue=Ne/Ce,Ge=-e(M(Ce));ie-=B=(2/Ue*Ge-j*Ue-ee)/(-Ge/(Ne*Ne)+1-j/(2*Ce*Ce))*(Ce<0?.7:1)}while(M(B)>c&&--ge>0);var Ye=u(ie);return[_(pe*Ye,ee*m(ie)),E(ke*Ye/ee)]},K}function I(){var R=h,U=(0,A.r)(G),j=U(R);return j.radius=function(K){return arguments.length?U(R=K*T):R*S},j.scale(179.976).clipAngle(147)}function H(R,U){var j=m(U),K=function(pe){return pe?pe/Math.sin(pe):1}(C(j*m(R/=2)));return[2*j*u(R)*K,u(U)*K]}function N(){return(0,A.Z)(H).scale(152.63)}function F(R){var U=u(R),j=m(R),K=R>=0?1:-1,pe=p(K*R),ke=(1+U-j)/2;function B(ee,ie){var ge=m(ie),_e=m(ee/=2);return[(1+ge)*u(ee),(K*ie>-_(_e,pe)-.001?0:10*-K)+ke+u(ie)*j-(1+ge)*U*_e]}return B.invert=function(ee,ie){var ge=0,_e=0,Ce=50;do{var Ne=m(ge),Ue=u(ge),Ge=m(_e),Ye=u(_e),Qe=1+Ge,ct=Qe*Ue-ee,vt=ke+Ye*j-Qe*U*Ne-ie,Ot=Qe*Ne/2,Dt=-Ue*Ye,Pt=U*Qe*Ue/2,Vt=j*Ge+U*Ne*Ye,It=Dt*Pt-Vt*Ot,sn=(vt*Dt-ct*Vt)/It/2,Jt=(ct*Pt-vt*Ot)/It;M(Jt)>2&&(Jt/=2),ge-=sn,_e-=Jt}while((M(sn)>c||M(Jt)>c)&&--Ce>0);return K*_e>-_(m(ge),pe)-.001?[2*ge,_e]:null},B}function V(){var R=20*T,U=R>=0?1:-1,j=p(U*R),K=(0,A.r)(F),pe=K(R),ke=pe.stream;return pe.parallel=function(B){return arguments.length?(j=p((U=(R=B*T)>=0?1:-1)*R),K(R)):R*S},pe.stream=function(B){var ee=pe.rotate(),ie=ke(B),ge=(pe.rotate([0,0]),ke(B)),_e=pe.precision();return pe.rotate(ee),ie.sphere=function(){ge.polygonStart(),ge.lineStart();for(var Ce=-180*U;U*Ce<180;Ce+=90*U)ge.point(Ce,90*U);if(R)for(;U*(Ce-=3*U*_e)>=-180;)ge.point(Ce,U*-_(m(Ce*T/2),j)*S);ge.lineEnd(),ge.polygonEnd()},ie},pe.scale(218.695).center([0,28.0974])}function W(R,U){var j=p(U/2),K=L(1-j*j),pe=1+K*m(R/=2),ke=u(R)*K/pe,B=j/pe,ee=ke*ke,ie=B*B;return[1.3333333333333333*ke*(3+ee-3*ie),1.3333333333333333*B*(3+3*ee-ie)]}function te(){return(0,A.Z)(W).scale(66.1603)}H.invert=function(R,U){if(!(R*R+4*U*U>g*g+c)){var j=R,K=U,pe=25;do{var ke,B=u(j),ee=u(j/2),ie=m(j/2),ge=u(K),_e=m(K),Ce=u(2*K),Ne=ge*ge,Ue=_e*_e,Ge=ee*ee,Ye=1-Ue*ie*ie,Qe=Ye?C(_e*ie)*L(ke=1/Ye):ke=0,ct=2*Qe*_e*ee-R,vt=Qe*ge-U,Ot=ke*(Ue*Ge+Qe*_e*ie*Ne),Dt=ke*(.5*B*Ce-2*Qe*ge*ee),Pt=.25*ke*(Ce*ee-Qe*ge*Ue*B),Vt=ke*(Ne*ie+Qe*Ge*_e),It=Dt*Pt-Vt*Ot;if(!It)break;var sn=(vt*Dt-ct*Vt)/It,Jt=(ct*Pt-vt*Ot)/It;j-=sn,K-=Jt}while((M(sn)>c||M(Jt)>c)&&--pe>0);return[j,K]}},W.invert=function(R,U){if(U*=.375,!(R*=.375)&&M(U)>1)return null;var j=1+R*R+U*U,K=L((j-L(j*j-4*U*U))/2),pe=E(K)/3,ke=K?function(ge){return e(ge+L(ge*ge-1))}(M(U/K))/3:function(ge){return e(ge+L(ge*ge+1))}(M(R))/3,B=m(pe),ee=z(ke),ie=ee*ee-B*B;return[2*a(R)*_(O(ke)*B,.25-ie),2*a(U)*_(ee*u(pe),.25+ie)]};var Q=L(8),X=e(1+y);function q(R,U){var j=M(U);return j<b?[R,e(p(b+U/2))]:[R*m(j)*(2*y-1/u(j)),a(U)*(2*y*(j-b)-e(p(j/2)))]}function Z(){return(0,A.Z)(q).scale(112.314)}q.invert=function(R,U){if((K=M(U))<X)return[R,2*l(f(U))-h];var j,K,pe=b,ke=25;do{var B=m(pe/2),ee=p(pe/2);pe-=j=(Q*(pe-b)-e(ee)-K)/(Q-B*B/(2*ee))}while(M(j)>x&&--ke>0);return[R/(m(pe)*(Q-1/u(pe))),a(U)*pe]};var J=t(17889);function ne(R){var U=2*g/R;function j(K,pe){var ke=(0,J.N)(K,pe);if(M(K)>h){var B=_(ke[1],ke[0]),ee=L(ke[0]*ke[0]+ke[1]*ke[1]),ie=U*s((B-h)/U)+h,ge=_(u(B-=ie),2-m(B));B=ie+E(g/ee*u(ge))-ge,ke[0]=ee*m(B),ke[1]=ee*u(B)}return ke}return j.invert=function(K,pe){var ke=L(K*K+pe*pe);if(ke>h){var B=_(pe,K),ee=U*s((B-h)/U)+h,ie=B>ee?-1:1,ge=ke*m(ee-B),_e=1/p(ie*C((ge-g)/L(g*(g-2*ge)+ke*ke)));B=ee+2*l((_e+ie*L(_e*_e-3))/3),K=ke*m(B),pe=ke*u(B)}return J.N.invert(K,pe)},j}function re(){var R=5,U=(0,A.r)(ne),j=U(R),K=j.stream,pe=.01,ke=-m(pe*T),B=u(pe*T);return j.lobes=function(ee){return arguments.length?U(R=+ee):R},j.stream=function(ee){var ie=j.rotate(),ge=K(ee),_e=(j.rotate([0,0]),K(ee));return j.rotate(ie),ge.sphere=function(){_e.polygonStart(),_e.lineStart();for(var Ce=0,Ne=360/R,Ue=2*g/R,Ge=90-180/R,Ye=h;Ce<R;++Ce,Ge-=Ne,Ye-=Ue)_e.point(_(B*m(Ye),ke)*S,E(B*u(Ye))*S),Ge<-90?(_e.point(-90,-180-Ge-pe),_e.point(-90,-180-Ge+pe)):(_e.point(90,Ge+pe),_e.point(90,Ge-pe));_e.lineEnd(),_e.polygonEnd()},ge},j.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var ae=t(12956);function ue(R,U){if(arguments.length<2&&(U=R),U===1)return ae.l;if(U===1/0)return he;function j(K,pe){var ke=(0,ae.l)(K/U,pe);return ke[0]*=R,ke}return j.invert=function(K,pe){var ke=ae.l.invert(K/R,pe);return ke[0]*=U,ke},j}function he(R,U){return[R*m(U)/m(U/=2),2*u(U)]}function de(){var R=2,U=(0,A.r)(ue),j=U(R);return j.coefficient=function(K){return arguments.length?U(R=+K):R},j.scale(169.529)}function xe(R,U,j){var K,pe,ke,B=100;j=j===void 0?0:+j,U=+U;do(pe=R(j))===(ke=R(j+c))&&(ke=pe+c),j-=K=-1*c*(pe-U)/(pe-ke);while(B-- >0&&M(K)>c);return B<0?NaN:j}function me(R,U,j){return U===void 0&&(U=40),j===void 0&&(j=x),function(K,pe,ke,B){var ee,ie,ge;ke=ke===void 0?0:+ke,B=B===void 0?0:+B;for(var _e=0;_e<U;_e++){var Ce=R(ke,B),Ne=Ce[0]-K,Ue=Ce[1]-pe;if(M(Ne)<j&&M(Ue)<j)break;var Ge=Ne*Ne+Ue*Ue;if(Ge>ee)ke-=ie/=2,B-=ge/=2;else{ee=Ge;var Ye=(ke>0?-1:1)*j,Qe=(B>0?-1:1)*j,ct=R(ke+Ye,B),vt=R(ke,B+Qe),Ot=(ct[0]-Ce[0])/Ye,Dt=(ct[1]-Ce[1])/Ye,Pt=(vt[0]-Ce[0])/Qe,Vt=(vt[1]-Ce[1])/Qe,It=Vt*Ot-Dt*Pt,sn=(M(It)<.5?.5:1)/It;if(ke+=ie=(Ue*Pt-Ne*Vt)*sn,B+=ge=(Ne*Dt-Ue*Ot)*sn,M(ie)<j&&M(ge)<j)break}}return[ke,B]}}function ve(){var R=ue(1.68,2);function U(j,K){if(j+K<-1.4){var pe=(j-K+1.6)*(j+K+1.4)/8;j+=pe,K-=.8*pe*u(K+g/2)}var ke=R(j,K),B=(1-m(j*K))/12;return ke[1]<0&&(ke[0]*=1+B),ke[1]>0&&(ke[1]*=1+B/1.5*ke[0]*ke[0]),ke}return U.invert=me(U),U}function Le(){return(0,A.Z)(ve()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Ae(R,U){var j,K=R*u(U),pe=30;do U-=j=(U+u(U)-K)/(1+m(U));while(M(j)>c&&--pe>0);return U/2}function we(R,U,j){function K(pe,ke){return[R*pe*m(ke=Ae(j,ke)),U*u(ke)]}return K.invert=function(pe,ke){return ke=E(ke/U),[pe/(R*m(ke)),E((2*ke+u(2*ke))/j)]},K}he.invert=function(R,U){var j=2*E(U/2);return[R*m(j/2)/m(j),j]};var se=we(y/h,y,g);function oe(){return(0,A.Z)(se).scale(169.529)}var fe=2.00276,Se=1.11072;function Me(R,U){var j=Ae(g,U);return[fe*R/(1/m(U)+Se/m(j)),(U+y*u(j))/fe]}function be(){return(0,A.Z)(Me).scale(160.857)}function Ie(R){var U=0,j=(0,A.r)(R),K=j(U);return K.parallel=function(pe){return arguments.length?j(U=pe*T):U*S},K}function Be(R,U){return[R*m(U),U]}function ce(){return(0,A.Z)(Be).scale(152.63)}function Te(R){if(!R)return Be;var U=1/p(R);function j(K,pe){var ke=U+R-pe,B=ke&&K*m(pe)/ke;return[ke*u(B),U-ke*m(B)]}return j.invert=function(K,pe){var ke=L(K*K+(pe=U-pe)*pe),B=U+R-ke;return[ke/m(B)*_(K,pe),B]},j}function ye(){return Ie(Te).scale(123.082).center([0,26.1441]).parallel(45)}function Pe(R){function U(j,K){var pe=h-K,ke=pe&&j*R*u(pe)/pe;return[pe*u(ke)/R,h-pe*m(ke)]}return U.invert=function(j,K){var pe=j*R,ke=h-K,B=L(pe*pe+ke*ke),ee=_(pe,ke);return[(B?B/u(B):1)*ee/R,h-B]},U}function Re(){var R=.5,U=(0,A.r)(Pe),j=U(R);return j.fraction=function(K){return arguments.length?U(R=+K):R},j.scale(158.837)}Me.invert=function(R,U){var j,K,pe=fe*U,ke=U<0?-b:b,B=25;do K=pe-y*u(ke),ke-=j=(u(2*ke)+2*ke-g*u(K))/(2*m(2*ke)+2+g*m(K)*y*m(ke));while(M(j)>c&&--B>0);return K=pe-y*u(ke),[R*(1/m(K)+Se/m(ke))/fe,K]},Be.invert=function(R,U){return[R/m(U),U]};var ze=we(1,4/g,g);function He(){return(0,A.Z)(ze).scale(152.63)}var We=t(66624),Je=t(49386);function lt(R,U,j,K,pe,ke){var B,ee=m(ke);if(M(R)>1||M(ke)>1)B=C(j*pe+U*K*ee);else{var ie=u(R/2),ge=u(ke/2);B=2*E(L(ie*ie+U*K*ge*ge))}return M(B)>c?[B,_(K*u(ke),U*pe-j*K*ee)]:[0,0]}function et(R,U,j){return C((R*R+U*U-j*j)/(2*R*U))}function yt(R){return R-2*g*o((R+g)/(2*g))}function _t(R,U,j){for(var K,pe=[[R[0],R[1],u(R[1]),m(R[1])],[U[0],U[1],u(U[1]),m(U[1])],[j[0],j[1],u(j[1]),m(j[1])]],ke=pe[2],B=0;B<3;++B,ke=K)K=pe[B],ke.v=lt(K[1]-ke[1],ke[3],ke[2],K[3],K[2],K[0]-ke[0]),ke.point=[0,0];var ee=et(pe[0].v[0],pe[2].v[0],pe[1].v[0]),ie=et(pe[0].v[0],pe[1].v[0],pe[2].v[0]),ge=g-ee;pe[2].point[1]=0,pe[0].point[0]=-(pe[1].point[0]=pe[0].v[0]/2);var _e=[pe[2].point[0]=pe[0].point[0]+pe[2].v[0]*m(ee),2*(pe[0].point[1]=pe[1].point[1]=pe[2].v[0]*u(ee))];return function(Ce,Ne){var Ue,Ge=u(Ne),Ye=m(Ne),Qe=new Array(3);for(Ue=0;Ue<3;++Ue){var ct=pe[Ue];if(Qe[Ue]=lt(Ne-ct[1],ct[3],ct[2],Ye,Ge,Ce-ct[0]),!Qe[Ue][0])return ct.point;Qe[Ue][1]=yt(Qe[Ue][1]-ct.v[1])}var vt=_e.slice();for(Ue=0;Ue<3;++Ue){var Ot=Ue==2?0:Ue+1,Dt=et(pe[Ue].v[0],Qe[Ue][0],Qe[Ot][0]);Qe[Ue][1]<0&&(Dt=-Dt),Ue?Ue==1?(Dt=ie-Dt,vt[0]-=Qe[Ue][0]*m(Dt),vt[1]-=Qe[Ue][0]*u(Dt)):(Dt=ge-Dt,vt[0]+=Qe[Ue][0]*m(Dt),vt[1]+=Qe[Ue][0]*u(Dt)):(vt[0]+=Qe[Ue][0]*m(Dt),vt[1]-=Qe[Ue][0]*u(Dt))}return vt[0]/=3,vt[1]/=3,vt}}function xt(R){return R[0]*=T,R[1]*=T,R}function at(){return ot([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function ot(R,U,j){var K=(0,We.Z)({type:"MultiPoint",coordinates:[R,U,j]}),pe=[-K[0],-K[1]],ke=(0,Je.Z)(pe),B=_t(xt(ke(R)),xt(ke(U)),xt(ke(j)));B.invert=me(B);var ee=(0,A.Z)(B).rotate(pe),ie=ee.center;return delete ee.rotate,ee.center=function(ge){return arguments.length?ie(ke(ge)):ke.invert(ie())},ee.clipAngle(90)}function At(R,U){var j=L(1-u(U));return[2/w*R*j,w*(1-j)]}function Ct(){return(0,A.Z)(At).scale(95.6464).center([0,30])}function zt(R){var U=p(R);function j(K,pe){return[K,(K?K/u(K):1)*(u(pe)*m(K)-U*m(pe))]}return j.invert=U?function(K,pe){K&&(pe*=u(K)/K);var ke=m(K);return[K,2*_(L(ke*ke+U*U-pe*pe)-ke,U-pe)]}:function(K,pe){return[K,E(K?pe*p(K)/K:pe)]},j}function St(){return Ie(zt).scale(249.828).clipAngle(90)}At.invert=function(R,U){var j=(j=U/w-1)*j;return[j>0?R*L(g/j)/2:0,E(1-j)]};var qe=L(3);function Xe(R,U){return[qe*R*(2*m(2*U/3)-1)/w,qe*w*u(U/3)]}function Ve(){return(0,A.Z)(Xe).scale(156.19)}function Ze(R){var U=m(R);function j(K,pe){return[K*U,u(pe)/U]}return j.invert=function(K,pe){return[K/U,E(pe*U)]},j}function st(){return Ie(Ze).parallel(38.58).scale(195.044)}function nt(R){var U=m(R);function j(K,pe){return[K*U,(1+U)*p(pe/2)]}return j.invert=function(K,pe){return[K/U,2*l(pe/(1+U))]},j}function De(){return Ie(nt).scale(124.75)}function Fe(R,U){var j=L(8/(3*g));return[j*R*(1-M(U)/g),j*U]}function rt(){return(0,A.Z)(Fe).scale(165.664)}function tt(R,U){var j=L(4-3*u(M(U)));return[2/L(6*g)*R*j,a(U)*L(2*g/3)*(2-j)]}function gt(){return(0,A.Z)(tt).scale(165.664)}function dt(R,U){var j=L(g*(4+g));return[2/j*R*(1+L(1-4*U*U/(g*g))),4/j*U]}function mt(){return(0,A.Z)(dt).scale(180.739)}function ft(R,U){var j=(2+h)*u(U);U/=2;for(var K=0,pe=1/0;K<10&&M(pe)>c;K++){var ke=m(U);U-=pe=(U+u(U)*(ke+2)-j)/(2*ke*(1+ke))}return[2/L(g*(4+g))*R*(1+m(U)),2*L(g/(4+g))*u(U)]}function kt(){return(0,A.Z)(ft).scale(180.739)}function ht(R,U){return[R*(1+m(U))/L(2+g),2*U/L(2+g)]}function pt(){return(0,A.Z)(ht).scale(173.044)}function wt(R,U){for(var j=(1+h)*u(U),K=0,pe=1/0;K<10&&M(pe)>c;K++)U-=pe=(U+u(U)-j)/(1+m(U));return j=L(2+g),[R*(1+m(U))/j,2*U/j]}function Ft(){return(0,A.Z)(wt).scale(173.044)}Xe.invert=function(R,U){var j=3*E(U/(qe*w));return[w*R/(qe*(2*m(2*j/3)-1)),j]},Fe.invert=function(R,U){var j=L(8/(3*g)),K=U/j;return[R/(j*(1-M(K)/g)),K]},tt.invert=function(R,U){var j=2-M(U)/L(2*g/3);return[R*L(6*g)/(2*j),a(U)*E((4-j*j)/3)]},dt.invert=function(R,U){var j=L(g*(4+g))/2;return[R*j/(1+L(1-U*U*(4+g)/(4*g))),U*j/2]},ft.invert=function(R,U){var j=U*L((4+g)/g)/2,K=E(j),pe=m(K);return[R/(2/L(g*(4+g))*(1+pe)),E((K+j*(pe+2))/(2+h))]},ht.invert=function(R,U){var j=L(2+g),K=U*j/2;return[j*R/(1+m(K)),K]},wt.invert=function(R,U){var j=1+h,K=L(j/2);return[2*R*K/(1+m(U*=K)),E((U+u(U))/j)]};var Nt=3+2*y;function Gt(R,U){var j=u(R/=2),K=m(R),pe=L(m(U)),ke=m(U/=2),B=u(U)/(ke+y*K*pe),ee=L(2/(1+B*B)),ie=L((y*ke+(K+j)*pe)/(y*ke+(K-j)*pe));return[Nt*(ee*(ie-1/ie)-2*e(ie)),Nt*(ee*B*(ie+1/ie)-2*l(B))]}function an(){return(0,A.Z)(Gt).scale(62.5271)}Gt.invert=function(R,U){if(!(j=W.invert(R/1.2,1.065*U)))return null;var j,K=j[0],pe=j[1],ke=20;R/=Nt,U/=Nt;do{var B=K/2,ee=pe/2,ie=u(B),ge=m(B),_e=u(ee),Ce=m(ee),Ne=m(pe),Ue=L(Ne),Ge=_e/(Ce+y*ge*Ue),Ye=Ge*Ge,Qe=L(2/(1+Ye)),ct=(y*Ce+(ge+ie)*Ue)/(y*Ce+(ge-ie)*Ue),vt=L(ct),Ot=vt-1/vt,Dt=vt+1/vt,Pt=Qe*Ot-2*e(vt)-R,Vt=Qe*Ge*Dt-2*l(Ge)-U,It=_e&&v*Ue*ie*Ye/_e,sn=(y*ge*Ce+Ue)/(2*(Ce+y*ge*Ue)*(Ce+y*ge*Ue)*Ue),Jt=-.5*Ge*Qe*Qe*Qe,Zt=Jt*It,Mn=Jt*sn,kn=(kn=2*Ce+y*Ue*(ge-ie))*kn*vt,Yn=(y*ge*Ce*Ue+Ne)/kn,Zn=-y*ie*_e/(Ue*kn),nr=Ot*Zt-2*Yn/vt+Qe*(Yn+Yn/ct),sr=Ot*Mn-2*Zn/vt+Qe*(Zn+Zn/ct),dr=Ge*Dt*Zt-2*It/(1+Ye)+Qe*Dt*It+Qe*Ge*(Yn-Yn/ct),hr=Ge*Dt*Mn-2*sn/(1+Ye)+Qe*Dt*sn+Qe*Ge*(Zn-Zn/ct),yr=sr*dr-hr*nr;if(!yr)break;var Mr=(Vt*sr-Pt*hr)/yr,Fr=(Pt*dr-Vt*nr)/yr;K-=Mr,pe=i(-h,r(h,pe-Fr))}while((M(Mr)>c||M(Fr)>c)&&--ke>0);return M(M(pe)-h)<c?[0,pe]:ke&&[K,pe]};var Wt=m(35*T);function Yt(R,U){var j=p(U/2);return[R*Wt*L(1-j*j),(1+Wt)*j]}function en(){return(0,A.Z)(Yt).scale(137.152)}function Tn(R,U){var j=U/2,K=m(j);return[2*R/w*m(U)*K*K,w*p(j)]}function Bn(){return(0,A.Z)(Tn).scale(135.264)}function mn(R){var U=1-R,j=pe(g,0)[0]-pe(-g,0)[0],K=L(2*(pe(0,h)[1]-pe(0,-h)[1])/j);function pe(ee,ie){var ge=m(ie),_e=u(ie);return[ge/(U+R*ge)*ee,U*ie+R*_e]}function ke(ee,ie){var ge=pe(ee,ie);return[ge[0]*K,ge[1]/K]}function B(ee){return ke(0,ee)[1]}return ke.invert=function(ee,ie){var ge=xe(B,ie);return[ee/K*(R+U/m(ge)),ge]},ke}function Kt(){var R=.5,U=(0,A.r)(mn),j=U(R);return j.alpha=function(K){return arguments.length?U(R=+K):R},j.scale(168.725)}Yt.invert=function(R,U){var j=U/(1+Wt);return[R&&R/(Wt*L(1-j*j)),2*l(j)]},Tn.invert=function(R,U){var j=l(U/w),K=m(j),pe=2*j;return[R*w/2/(m(pe)*K*K),pe]};var cn=t(57962),tn=t(97492);function un(R){return[R[0]/2,E(p(R[1]/2*T))*S]}function yn(R){return[2*R[0],2*l(u(R[1]*T))*S]}function En(R){R==null&&(R=cn.Z);var U=R(),j=(0,tn.Z)().scale(S).precision(0).clipAngle(null).translate([0,0]);function K(ke){return U(un(ke))}function pe(ke){K[ke]=function(){return arguments.length?(U[ke].apply(U,arguments),K):U[ke]()}}return U.invert&&(K.invert=function(ke){return yn(U.invert(ke))}),K.stream=function(ke){var B=U.stream(ke),ee=j.stream({point:function(ie,ge){B.point(ie/2,E(p(-ge/2*T))*S)},lineStart:function(){B.lineStart()},lineEnd:function(){B.lineEnd()},polygonStart:function(){B.polygonStart()},polygonEnd:function(){B.polygonEnd()}});return ee.sphere=B.sphere,ee},K.rotate=function(ke){return arguments.length?(j.rotate(ke),K):j.rotate()},K.center=function(ke){return arguments.length?(U.center(un(ke)),K):yn(U.center())},pe("angle"),pe("clipAngle"),pe("clipExtent"),pe("fitExtent"),pe("fitHeight"),pe("fitSize"),pe("fitWidth"),pe("scale"),pe("translate"),pe("precision"),K.scale(249.5)}function Sn(R,U){var j=2*g/U,K=R*R;function pe(ke,B){var ee=(0,J.N)(ke,B),ie=ee[0],ge=ee[1],_e=ie*ie+ge*ge;if(_e>K){var Ce=L(_e),Ne=_(ge,ie),Ue=j*s(Ne/j),Ge=Ne-Ue,Ye=R*m(Ge),Qe=(R*u(Ge)-Ge*u(Ye))/(h-Ye),ct=Nn(Ge,Qe),vt=(g-R)/_n(ct,Ye,g);ie=Ce;var Ot,Dt=50;do ie-=Ot=(R+_n(ct,Ye,ie)*vt-Ce)/(ct(ie)*vt);while(M(Ot)>c&&--Dt>0);ge=Ge*u(ie),ie<h&&(ge-=Qe*(ie-h));var Pt=u(Ue),Vt=m(Ue);ee[0]=ie*Vt-ge*Pt,ee[1]=ie*Pt+ge*Vt}return ee}return pe.invert=function(ke,B){var ee=ke*ke+B*B;if(ee>K){var ie=L(ee),ge=_(B,ke),_e=j*s(ge/j),Ce=ge-_e;ke=ie*m(Ce),B=ie*u(Ce);for(var Ne=ke-h,Ue=u(ke),Ge=B/Ue,Ye=ke<h?1/0:0,Qe=10;;){var ct=R*u(Ge),vt=R*m(Ge),Ot=u(vt),Dt=h-vt,Pt=(ct-Ge*Ot)/Dt,Vt=Nn(Ge,Pt);if(M(Ye)<x||!--Qe)break;Ge-=Ye=(Ge*Ue-Pt*Ne-B)/(Ue-2*Ne*(Dt*(vt+Ge*ct*m(vt)-Ot)-ct*(ct-Ge*Ot))/(Dt*Dt))}ke=(ie=R+_n(Vt,vt,ke)*(g-R)/_n(Vt,vt,g))*m(ge=_e+Ge),B=ie*u(ge)}return J.N.invert(ke,B)},pe}function Nn(R,U){return function(j){var K=R*m(j);return j<h&&(K-=U),L(1+K*K)}}function _n(R,U,j){for(var K=(j-U)/50,pe=R(U)+R(j),ke=1,B=U;ke<50;++ke)pe+=2*R(B+=K);return .5*pe*K}function Pn(){var R=6,U=30*T,j=m(U),K=u(U),pe=(0,A.r)(Sn),ke=pe(U,R),B=ke.stream,ee=-m(.01*T),ie=u(.01*T);return ke.radius=function(ge){return arguments.length?(j=m(U=ge*T),K=u(U),pe(U,R)):U*S},ke.lobes=function(ge){return arguments.length?pe(U,R=+ge):R},ke.stream=function(ge){var _e=ke.rotate(),Ce=B(ge),Ne=(ke.rotate([0,0]),B(ge));return ke.rotate(_e),Ce.sphere=function(){Ne.polygonStart(),Ne.lineStart();for(var Ue=0,Ge=2*g/R,Ye=0;Ue<R;++Ue,Ye-=Ge)Ne.point(_(ie*m(Ye),ee)*S,E(ie*u(Ye))*S),Ne.point(_(K*m(Ye-Ge/2),j)*S,E(K*u(Ye-Ge/2))*S);Ne.lineEnd(),Ne.polygonEnd()},Ce},ke.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function tr(R,U,j,K,pe,ke,B,ee){function ie(ge,_e){if(!_e)return[R*ge/g,0];var Ce=_e*_e,Ne=R+Ce*(U+Ce*(j+Ce*K)),Ue=_e*(pe-1+Ce*(ke-ee+Ce*B)),Ge=(Ne*Ne+Ue*Ue)/(2*Ue),Ye=ge*E(Ne/Ge)/g;return[Ge*u(Ye),_e*(1+Ce*ee)+Ge*(1-m(Ye))]}return arguments.length<8&&(ee=0),ie.invert=function(ge,_e){var Ce,Ne,Ue=g*ge/R,Ge=_e,Ye=50;do{var Qe=Ge*Ge,ct=R+Qe*(U+Qe*(j+Qe*K)),vt=Ge*(pe-1+Qe*(ke-ee+Qe*B)),Ot=ct*ct+vt*vt,Dt=2*vt,Pt=Ot/Dt,Vt=Pt*Pt,It=E(ct/Pt)/g,sn=Ue*It,Jt=ct*ct,Zt=(2*U+Qe*(4*j+6*Qe*K))*Ge,Mn=pe+Qe*(3*ke+5*Qe*B),kn=(2*(ct*Zt+vt*(Mn-1))*Dt-Ot*(2*(Mn-1)))/(Dt*Dt),Yn=m(sn),Zn=u(sn),nr=Pt*Yn,sr=Pt*Zn,dr=Ue/g*(1/L(1-Jt/Vt))*(Zt*Pt-ct*kn)/Vt,hr=sr-ge,yr=Ge*(1+Qe*ee)+Pt-nr-_e,Mr=kn*Zn+nr*dr,Fr=nr*It,Jn=1+kn-(kn*Yn-sr*dr),fr=sr*It,xr=Mr*fr-Jn*Fr;if(!xr)break;Ue-=Ce=(yr*Mr-hr*Jn)/xr,Ge-=Ne=(hr*fr-yr*Fr)/xr}while((M(Ce)>c||M(Ne)>c)&&--Ye>0);return[Ue,Ge]},ie}var ur=tr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function lr(){return(0,A.Z)(ur).scale(149.995)}var ir=tr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function $n(){return(0,A.Z)(ir).scale(153.93)}var vr=tr(5/6*g,-.62636,-.0344,0,1.3493,-.05524,0,.045);function jt(){return(0,A.Z)(vr).scale(130.945)}function rn(R,U){var j=R*R,K=U*U;return[R*(1-.162388*K)*(.87-952426e-9*j*j),U*(1+K/12)]}function fn(){return(0,A.Z)(rn).scale(131.747)}rn.invert=function(R,U){var j,K=R,pe=U,ke=50;do{var B=pe*pe;pe-=j=(pe*(1+B/12)-U)/(1+B/4)}while(M(j)>c&&--ke>0);ke=50,R/=1-.162388*B;do{var ee=(ee=K*K)*ee;K-=j=(K*(.87-952426e-9*ee)-R)/(.87-.00476213*ee)}while(M(j)>c&&--ke>0);return[K,pe]};var xn=tr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ln(){return(0,A.Z)(xn).scale(131.087)}function Xn(R){var U=R(h,0)[0]-R(-h,0)[0];function j(K,pe){var ke=K>0?-.5:.5,B=R(K+ke*g,pe);return B[0]-=ke*U,B}return R.invert&&(j.invert=function(K,pe){var ke=K>0?-.5:.5,B=R.invert(K+ke*U,pe),ee=B[0]-ke*g;return ee<-g?ee+=2*g:ee>g&&(ee-=2*g),B[0]=ee,B}),j}function Un(R,U){var j=a(R),K=a(U),pe=m(U),ke=m(R)*pe,B=u(R)*pe,ee=u(K*U);R=M(_(B,ee)),U=E(ke),M(R-h)>c&&(R%=h);var ie=function(ge,_e){if(_e===h)return[0,0];var Ce,Ne,Ue=u(_e),Ge=Ue*Ue,Ye=Ge*Ge,Qe=1+Ye,ct=1+3*Ye,vt=1-Ye,Ot=E(1/L(Qe)),Dt=vt+Ge*Qe*Ot,Pt=(1-Ue)/Dt,Vt=L(Pt),It=Pt*Qe,sn=L(It),Jt=Vt*vt;if(ge===0)return[0,-(Jt+Ge*sn)];var Zt,Mn=m(_e),kn=1/Mn,Yn=2*Ue*Mn,Zn=(-Dt*Mn-(1-Ue)*((-3*Ge+Ot*ct)*Yn))/(Dt*Dt),nr=-kn*Yn,sr=-kn*(Ge*Qe*Zn+Pt*ct*Yn),dr=-2*kn*(vt*(.5*Zn/Vt)-2*Ge*Vt*Yn),hr=4*ge/g;if(ge>.222*g||_e<g/4&&ge>.175*g){if(Ce=(Jt+Ge*L(It*(1+Ye)-Jt*Jt))/(1+Ye),ge>g/4)return[Ce,Ce];var yr=Ce,Mr=.5*Ce;Ce=.5*(Mr+yr),Ne=50;do{var Fr=Ce*(dr+nr*L(It-Ce*Ce))+sr*E(Ce/sn)-hr;if(!Fr)break;Fr<0?Mr=Ce:yr=Ce,Ce=.5*(Mr+yr)}while(M(yr-Mr)>c&&--Ne>0)}else{Ce=c,Ne=25;do{var Jn=Ce*Ce,fr=L(It-Jn),xr=dr+nr*fr,Ar=Ce*xr+sr*E(Ce/sn)-hr;Ce-=Zt=fr?Ar/(xr+(sr-nr*Jn)/fr):0}while(M(Zt)>c&&--Ne>0)}return[Ce,-Jt-Ge*L(It-Ce*Ce)]}(R>g/4?h-R:R,U);return R>g/4&&(ee=ie[0],ie[0]=-ie[1],ie[1]=-ee),ie[0]*=j,ie[1]*=-K,ie}function Hn(){return(0,A.Z)(Xn(Un)).scale(239.75)}function Kn(R,U){var j,K,pe,ke,B,ee;if(U<c)return[(ke=u(R))-(j=U*(R-ke*(K=m(R)))/4)*K,K+j*ke,1-U*ke*ke/2,R-j];if(U>=1-c)return j=(1-U)/4,pe=1/(K=z(R)),[(ke=((ee=f(2*(ee=R)))-1)/(ee+1))+j*((B=K*O(R))-R)/(K*K),pe-j*ke*pe*(B-R),pe+j*ke*pe*(B+R),2*l(f(R))-h+j*(B-R)/K];var ie=[1,0,0,0,0,0,0,0,0],ge=[L(U),0,0,0,0,0,0,0,0],_e=0;for(K=L(1-U),B=1;M(ge[_e]/ie[_e])>c&&_e<8;)j=ie[_e++],ge[_e]=(j-K)/2,ie[_e]=(j+K)/2,K=L(j*K),B*=2;pe=B*ie[_e]*R;do pe=(E(ke=ge[_e]*u(K=pe)/ie[_e])+pe)/2;while(--_e);return[u(pe),ke=m(pe),ke/m(pe-K),pe]}function qt(R,U){if(!U)return R;if(U===1)return e(p(R/2+b));for(var j=1,K=L(1-U),pe=L(U),ke=0;M(pe)>c;ke++){if(R%g){var B=l(K*p(R)/j);B<0&&(B+=g),R+=B+~~(R/g)*g}else R+=R;pe=(j+K)/2,K=L(j*K),pe=((j=pe)-K)/2}return R/(n(2,ke)*j)}function On(R,U){var j=(y-1)/(y+1),K=L(1-j*j),pe=qt(h,K*K),ke=e(p(g/4+M(U)/2)),B=f(-1*ke)/L(j),ee=function(ge,_e){var Ce=ge*ge,Ne=_e+1,Ue=1-Ce-_e*_e;return[.5*((ge>=0?h:-h)-_(Ue,2*ge)),-.25*e(Ue*Ue+4*Ce)+.5*e(Ne*Ne+Ce)]}(B*m(-1*R),B*u(-1*R)),ie=function(ge,_e,Ce){var Ne=M(ge),Ue=O(M(_e));if(Ne){var Ge=1/u(Ne),Ye=1/(p(Ne)*p(Ne)),Qe=-(Ye+Ce*(Ue*Ue*Ge*Ge)-1+Ce),ct=(-Qe+L(Qe*Qe-(Ce-1)*Ye*4))/2;return[qt(l(1/L(ct)),Ce)*a(ge),qt(l(L((ct/Ye-1)/Ce)),1-Ce)*a(_e)]}return[0,qt(l(Ue),1-Ce)*a(_e)]}(ee[0],ee[1],K*K);return[-ie[1],(U>=0?1:-1)*(.5*pe-ie[0])]}function Et(){return(0,A.Z)(Xn(On)).scale(151.496)}Un.invert=function(R,U){M(R)>1&&(R=2*a(R)-R),M(U)>1&&(U=2*a(U)-U);var j=a(R),K=a(U),pe=-j*R,ke=-K*U,B=ke/pe<1,ee=function(Ce,Ne){for(var Ue=0,Ge=1,Ye=.5,Qe=50;;){var ct=Ye*Ye,vt=L(Ye),Ot=E(1/L(1+ct)),Dt=1-ct+Ye*(1+ct)*Ot,Pt=(1-vt)/Dt,Vt=L(Pt),It=Pt*(1+ct),sn=Vt*(1-ct),Jt=L(It-Ce*Ce),Zt=Ne+sn+Ye*Jt;if(M(Ge-Ue)<x||--Qe==0||Zt===0)break;Zt>0?Ue=Ye:Ge=Ye,Ye=.5*(Ue+Ge)}if(!Qe)return null;var Mn=E(vt),kn=m(Mn),Yn=1/kn,Zn=2*vt*kn,nr=(-Dt*kn-(-3*Ye+Ot*(1+3*ct))*Zn*(1-vt))/(Dt*Dt);return[g/4*(Ce*(-2*Yn*((1-ct)*(.5*nr/Vt)-2*Ye*Vt*Zn)+-Yn*Zn*Jt)+-Yn*(Ye*(1+ct)*nr+Pt*(1+3*ct)*Zn)*E(Ce/L(It))),Mn]}(B?ke:pe,B?pe:ke),ie=ee[0],ge=ee[1],_e=m(ge);return B&&(ie=-h-ie),[j*(_(u(ie)*_e,-u(ge))+g),K*E(m(ie)*_e)]},On.invert=function(R,U){var j,K,pe,ke,B,ee,ie=(y-1)/(y+1),ge=L(1-ie*ie),_e=(K=-R,pe=ge*ge,(j=.5*qt(h,ge*ge)-U)?(ke=Kn(j,pe),K?(ee=(B=Kn(K,1-pe))[1]*B[1]+pe*ke[0]*ke[0]*B[0]*B[0],[[ke[0]*B[2]/ee,ke[1]*ke[2]*B[0]*B[1]/ee],[ke[1]*B[1]/ee,-ke[0]*ke[2]*B[0]*B[2]/ee],[ke[2]*B[1]*B[2]/ee,-pe*ke[0]*ke[1]*B[0]/ee]]):[[ke[0],0],[ke[1],0],[ke[2],0]]):[[0,(B=Kn(K,1-pe))[0]/B[1]],[1/B[1],0],[B[2]/B[1],0]]),Ce=function(Ne,Ue){var Ge=Ue[0]*Ue[0]+Ue[1]*Ue[1];return[(Ne[0]*Ue[0]+Ne[1]*Ue[1])/Ge,(Ne[1]*Ue[0]-Ne[0]*Ue[1])/Ge]}(_e[0],_e[1]);return[_(Ce[1],Ce[0])/-1,2*l(f(-.5*e(ie*Ce[0]*Ce[0]+ie*Ce[1]*Ce[1])))-h]};var Xt=t(7613);function nn(R){var U=u(R),j=m(R),K=An(R);function pe(ke,B){var ee=K(ke,B);ke=ee[0],B=ee[1];var ie=u(B),ge=m(B),_e=m(ke),Ce=C(U*ie+j*ge*_e),Ne=u(Ce),Ue=M(Ne)>c?Ce/Ne:1;return[Ue*j*u(ke),(M(ke)>h?Ue:-Ue)*(U*ge-j*ie*_e)]}return K.invert=An(-R),pe.invert=function(ke,B){var ee=L(ke*ke+B*B),ie=-u(ee),ge=m(ee),_e=ee*ge,Ce=-B*ie,Ne=ee*U,Ue=L(_e*_e+Ce*Ce-Ne*Ne),Ge=_(_e*Ne+Ce*Ue,Ce*Ne-_e*Ue),Ye=(ee>h?-1:1)*_(ke*ie,ee*m(Ge)*ge+B*u(Ge)*ie);return K.invert(Ye,Ge)},pe}function An(R){var U=u(R),j=m(R);return function(K,pe){var ke=m(pe),B=m(K)*ke,ee=u(K)*ke,ie=u(pe);return[_(ee,B*j-ie*U),E(ie*j+B*U)]}}function Cn(){var R=0,U=(0,A.r)(nn),j=U(R),K=j.rotate,pe=j.stream,ke=(0,Xt.Z)();return j.parallel=function(B){if(!arguments.length)return R*S;var ee=j.rotate();return U(R=B*T).rotate(ee)},j.rotate=function(B){return arguments.length?(K.call(j,[B[0],B[1]-R*S]),ke.center([-B[0],-B[1]]),j):((B=K.call(j))[1]+=R*S,B)},j.stream=function(B){return(B=pe(B)).sphere=function(){B.polygonStart();var ee,ie=ke.radius(89.99)().coordinates[0],ge=ie.length-1,_e=-1;for(B.lineStart();++_e<ge;)B.point((ee=ie[_e])[0],ee[1]);for(B.lineEnd(),ge=(ie=ke.radius(90.01)().coordinates[0]).length-1,B.lineStart();--_e>=0;)B.point((ee=ie[_e])[0],ee[1]);B.lineEnd(),B.polygonEnd()},B},j.scale(79.4187).parallel(45).clipAngle(179.999)}var Rn=t(33064),gn=t(72736),$t=E(1-1/3)*S,Qt=Ze(0);function hn(R){var U=$t*T,j=At(g,U)[0]-At(-g,U)[0],K=Qt(0,U)[1],pe=At(0,U)[1],ke=w-pe,B=d/R,ee=4/d,ie=K+ke*ke*4/d;function ge(_e,Ce){var Ne,Ue=M(Ce);if(Ue>U){var Ge=r(R-1,i(0,o((_e+g)/B)));(Ne=At(_e+=g*(R-1)/R-Ge*B,Ue))[0]=Ne[0]*d/j-d*(R-1)/(2*R)+Ge*d/R,Ne[1]=K+4*(Ne[1]-pe)*ke/d,Ce<0&&(Ne[1]=-Ne[1])}else Ne=Qt(_e,Ce);return Ne[0]*=ee,Ne[1]/=ie,Ne}return ge.invert=function(_e,Ce){_e/=ee;var Ne=M(Ce*=ie);if(Ne>K){var Ue=r(R-1,i(0,o((_e+g)/B)));_e=(_e+g*(R-1)/R-Ue*B)*j/d;var Ge=At.invert(_e,.25*(Ne-K)*d/ke+pe);return Ge[0]-=g*(R-1)/R-Ue*B,Ce<0&&(Ge[1]=-Ge[1]),Ge}return Qt.invert(_e,Ce)},ge}function vn(R,U){return[R,1&U?90-c:$t]}function Fn(R,U){return[R,1&U?-90+c:-$t]}function In(R){return[R[0]*(1-c),R[1]]}function Qn(){var R=4,U=(0,A.r)(hn),j=U(R),K=j.stream;return j.lobes=function(pe){return arguments.length?U(R=+pe):R},j.stream=function(pe){var ke=j.rotate(),B=K(pe),ee=(j.rotate([0,0]),K(pe));return j.rotate(ke),B.sphere=function(){var ie,ge;(0,gn.Z)((ie=180/R,ge=[].concat((0,Rn.w6)(-180,180+ie/2,ie).map(vn),(0,Rn.w6)(180,-180-ie/2,-ie).map(Fn)),{type:"Polygon",coordinates:[ie===180?ge.map(In):ge]}),ee)},B},j.scale(239.75)}function Wn(R){var U,j=1+R,K=E(u(1/j)),pe=2*L(g/(U=g+4*K*j)),ke=.5*pe*(j+L(R*(2+R))),B=R*R,ee=j*j;function ie(ge,_e){var Ce,Ne,Ue=1-u(_e);if(Ue&&Ue<2){var Ge,Ye=h-_e,Qe=25;do{var ct=u(Ye),vt=m(Ye),Ot=K+_(ct,j-vt),Dt=1+ee-2*j*vt;Ye-=Ge=(Ye-B*K-j*ct+Dt*Ot-.5*Ue*U)/(2*j*ct*Ot)}while(M(Ge)>x&&--Qe>0);Ce=pe*L(Dt),Ne=ge*Ot/g}else Ce=pe*(R+Ue),Ne=ge*K/g;return[Ce*u(Ne),ke-Ce*m(Ne)]}return ie.invert=function(ge,_e){var Ce=ge*ge+(_e-=ke)*_e,Ne=(1+ee-Ce/(pe*pe))/(2*j),Ue=C(Ne),Ge=u(Ue),Ye=K+_(Ge,j-Ne);return[E(ge/L(Ce))*g/Ye,E(1-2*(Ue-B*K-j*Ge+(1+ee-2*j*Ne)*Ye)/U)]},ie}function Ke(){var R=1,U=(0,A.r)(Wn),j=U(R);return j.ratio=function(K){return arguments.length?U(R=+K):R},j.scale(167.774).center([0,18.67])}var it=.7109889596207567,Mt=.0528035274542;function Lt(R,U){return U>-it?((R=se(R,U))[1]+=Mt,R):Be(R,U)}function Bt(){return(0,A.Z)(Lt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function ln(R,U){return M(U)>it?((R=se(R,U))[1]-=U>0?Mt:-Mt,R):Be(R,U)}function wn(){return(0,A.Z)(ln).scale(152.63)}function jn(R,U,j,K){var pe=L(4*g/(2*j+(1+R-U/2)*u(2*j)+(R+U)/2*u(4*j)+U/2*u(6*j))),ke=L(K*u(j)*L((1+R*m(2*j)+U*m(4*j))/(1+R+U))),B=j*ie(1);function ee(Ce){return L(1+R*m(2*Ce)+U*m(4*Ce))}function ie(Ce){var Ne=Ce*j;return(2*Ne+(1+R-U/2)*u(2*Ne)+(R+U)/2*u(4*Ne)+U/2*u(6*Ne))/j}function ge(Ce){return ee(Ce)*u(Ce)}var _e=function(Ce,Ne){var Ue=j*xe(ie,B*u(Ne)/j,Ne/g);isNaN(Ue)&&(Ue=j*a(Ne));var Ge=pe*ee(Ue);return[Ge*ke*Ce/g*m(Ue),Ge/ke*u(Ue)]};return _e.invert=function(Ce,Ne){var Ue=xe(ge,Ne*ke/pe);return[Ce*g/(m(Ue)*pe*ke*ee(Ue)),E(j*ie(Ue/j)/B)]},j===0&&(pe=L(K/g),(_e=function(Ce,Ne){return[Ce*pe,u(Ne)/pe]}).invert=function(Ce,Ne){return[Ce/pe,E(Ne*pe)]}),_e}function bn(){var R=1,U=0,j=45*T,K=2,pe=(0,A.r)(jn),ke=pe(R,U,j,K);return ke.a=function(B){return arguments.length?pe(R=+B,U,j,K):R},ke.b=function(B){return arguments.length?pe(R,U=+B,j,K):U},ke.psiMax=function(B){return arguments.length?pe(R,U,j=+B*T,K):j*S},ke.ratio=function(B){return arguments.length?pe(R,U,j,K=+B):K},ke.scale(180.739)}function qn(R,U,j,K,pe,ke,B,ee,ie,ge,_e){if(_e.nanEncountered)return NaN;var Ce,Ne,Ue,Ge,Ye,Qe,ct,vt,Ot,Dt;if(Ne=R(U+.25*(Ce=j-U)),Ue=R(j-.25*Ce),isNaN(Ne))_e.nanEncountered=!0;else{if(!isNaN(Ue))return Dt=((Qe=(Ge=Ce*(K+4*Ne+pe)/12)+(Ye=Ce*(pe+4*Ue+ke)/12))-B)/15,ge>ie?(_e.maxDepthCount++,Qe+Dt):Math.abs(Dt)<ee?Qe+Dt:(vt=qn(R,U,ct=U+.5*Ce,K,Ne,pe,Ge,.5*ee,ie,ge+1,_e),isNaN(vt)?(_e.nanEncountered=!0,NaN):(Ot=qn(R,ct,j,pe,Ue,ke,Ye,.5*ee,ie,ge+1,_e),isNaN(Ot)?(_e.nanEncountered=!0,NaN):vt+Ot));_e.nanEncountered=!0}}function or(R,U,j,K,pe){K===void 0&&(K=1e-8),pe===void 0&&(pe=20);var ke=R(U),B=R(.5*(U+j)),ee=R(j);return qn(R,U,j,ke,B,ee,(ke+4*B+ee)*(j-U)/6,K,pe,1,{maxDepthCount:0,nanEncountered:!1})}function ar(R,U,j){function K(Ue){return R+(1-R)*n(1-n(Ue,U),1/U)}function pe(Ue){return or(K,0,Ue,1e-4)}for(var ke=1/pe(1),B=1e3,ee=1.00000001*ke,ie=[],ge=0;ge<=B;ge++)ie.push(pe(ge/B)*ee);function _e(Ue){var Ge=0,Ye=B,Qe=500;do ie[Qe]>Ue?Ye=Qe:Ge=Qe,Qe=Ge+Ye>>1;while(Qe>Ge);var ct=ie[Qe+1]-ie[Qe];return ct&&(ct=(Ue-ie[Qe+1])/ct),(Qe+1+ct)/B}var Ce=2*_e(1)/g*ke/j,Ne=function(Ue,Ge){var Ye=_e(M(u(Ge))),Qe=K(Ye)*Ue;return Ye/=Ce,[Qe,Ge>=0?Ye:-Ye]};return Ne.invert=function(Ue,Ge){var Ye;return M(Ge*=Ce)<1&&(Ye=a(Ge)*E(pe(M(Ge))*ke)),[Ue/K(M(Ge)),Ye]},Ne}function mr(){var R=0,U=2.5,j=1.183136,K=(0,A.r)(ar),pe=K(R,U,j);return pe.alpha=function(ke){return arguments.length?K(R=+ke,U,j):R},pe.k=function(ke){return arguments.length?K(R,U=+ke,j):U},pe.gamma=function(ke){return arguments.length?K(R,U,j=+ke):j},pe.scale(152.63)}function kr(R,U){return M(R[0]-U[0])<c&&M(R[1]-U[1])<c}function Cr(R,U){for(var j,K,pe,ke=-1,B=R.length,ee=R[0],ie=[];++ke<B;){K=((j=R[ke])[0]-ee[0])/U,pe=(j[1]-ee[1])/U;for(var ge=0;ge<U;++ge)ie.push([ee[0]+ge*K,ee[1]+ge*pe]);ee=j}return ie.push(j),ie}function Br(R,U,j){var K,pe;function ke(ie,ge){for(var _e=ge<0?-1:1,Ce=U[+(ge<0)],Ne=0,Ue=Ce.length-1;Ne<Ue&&ie>Ce[Ne][2][0];++Ne);var Ge=R(ie-Ce[Ne][1][0],ge);return Ge[0]+=R(Ce[Ne][1][0],_e*ge>_e*Ce[Ne][0][1]?Ce[Ne][0][1]:ge)[0],Ge}j?ke.invert=j(ke):R.invert&&(ke.invert=function(ie,ge){for(var _e=pe[+(ge<0)],Ce=U[+(ge<0)],Ne=0,Ue=_e.length;Ne<Ue;++Ne){var Ge=_e[Ne];if(Ge[0][0]<=ie&&ie<Ge[1][0]&&Ge[0][1]<=ge&&ge<Ge[1][1]){var Ye=R.invert(ie-R(Ce[Ne][1][0],0)[0],ge);return Ye[0]+=Ce[Ne][1][0],kr(ke(Ye[0],Ye[1]),[ie,ge])?Ye:null}}});var B=(0,A.Z)(ke),ee=B.stream;return B.stream=function(ie){var ge=B.rotate(),_e=ee(ie),Ce=(B.rotate([0,0]),ee(ie));return B.rotate(ge),_e.sphere=function(){(0,gn.Z)(K,Ce)},_e},B.lobes=function(ie){return arguments.length?(K=function(ge){var _e,Ce,Ne,Ue,Ge,Ye,Qe,ct=[],vt=ge[0].length;for(Qe=0;Qe<vt;++Qe)Ce=(_e=ge[0][Qe])[0][0],Ne=_e[0][1],Ue=_e[1][1],Ge=_e[2][0],Ye=_e[2][1],ct.push(Cr([[Ce+c,Ne+c],[Ce+c,Ue-c],[Ge-c,Ue-c],[Ge-c,Ye+c]],30));for(Qe=ge[1].length-1;Qe>=0;--Qe)Ce=(_e=ge[1][Qe])[0][0],Ne=_e[0][1],Ue=_e[1][1],Ge=_e[2][0],Ye=_e[2][1],ct.push(Cr([[Ge-c,Ye-c],[Ge-c,Ue+c],[Ce+c,Ue+c],[Ce+c,Ne-c]],30));return{type:"Polygon",coordinates:[(0,Rn.TS)(ct)]}}(ie),U=ie.map(function(ge){return ge.map(function(_e){return[[_e[0][0]*T,_e[0][1]*T],[_e[1][0]*T,_e[1][1]*T],[_e[2][0]*T,_e[2][1]*T]]})}),pe=U.map(function(ge){return ge.map(function(_e){var Ce,Ne=R(_e[0][0],_e[0][1])[0],Ue=R(_e[2][0],_e[2][1])[0],Ge=R(_e[1][0],_e[0][1])[1],Ye=R(_e[1][0],_e[1][1])[1];return Ge>Ye&&(Ce=Ge,Ge=Ye,Ye=Ce),[[Ne,Ge],[Ue,Ye]]})}),B):U.map(function(ge){return ge.map(function(_e){return[[_e[0][0]*S,_e[0][1]*S],[_e[1][0]*S,_e[1][1]*S],[_e[2][0]*S,_e[2][1]*S]]})})},U!=null&&B.lobes(U),B}Lt.invert=function(R,U){return U>-it?se.invert(R,U-Mt):Be.invert(R,U)},ln.invert=function(R,U){return M(U)>it?se.invert(R,U+(U>0?Mt:-Mt)):Be.invert(R,U)};var Wr=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function fi(){return Br(Me,Wr).scale(160.857)}var pi=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function bi(){return Br(ln,pi).scale(152.63)}var Da=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Go(){return Br(se,Da).scale(169.529)}var _s=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ks(){return Br(se,_s).scale(169.529).rotate([20,0])}var Qa=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function cl(){return Br(Lt,Qa,me).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Wo=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function qo(){return Br(Be,Wo).scale(152.63).rotate([-20,0])}function eo(R,U){return[3/d*R*L(g*g/3-U*U),U]}function Ri(){return(0,A.Z)(eo).scale(158.837)}function ws(R){function U(j,K){if(M(M(K)-h)<c)return[0,K<0?-2:2];var pe=u(K),ke=n((1+pe)/(1-pe),R/2),B=.5*(ke+1/ke)+m(j*=R);return[2*u(j)/B,(ke-1/ke)/B]}return U.invert=function(j,K){var pe=M(K);if(M(pe-2)<c)return j?null:[0,a(K)*h];if(pe>2)return null;var ke=(j/=2)*j,B=(K/=2)*K,ee=2*K/(1+ke+B);return ee=n((1+ee)/(1-ee),1/R),[_(2*j,1-ke-B)/R,E((ee-1)/(ee+1))]},U}function ei(){var R=.5,U=(0,A.r)(ws),j=U(R);return j.spacing=function(K){return arguments.length?U(R=+K):R},j.scale(124.75)}eo.invert=function(R,U){return[d/3*R/L(g*g/3-U*U),U]};var to=g/y;function Ca(R,U){return[R*(1+L(m(U)))/2,U/(m(U/2)*m(R/6))]}function uo(){return(0,A.Z)(Ca).scale(97.2672)}function Ha(R,U){var j=R*R,K=U*U;return[R*(.975534+K*(-.0143059*j-.119161+-.0547009*K)),U*(1.00384+j*(.0802894+-.02855*K+199025e-9*j)+K*(.0998909+-.0491032*K))]}function Ao(){return(0,A.Z)(Ha).scale(139.98)}function co(R,U){return[u(R)/m(U),p(U)*m(R)]}function fo(){return(0,A.Z)(co).scale(144.049).clipAngle(89.999)}function Fs(R){var U=m(R),j=p(b+R/2);function K(pe,ke){var B=ke-R,ee=M(B)<c?pe*U:M(ee=b+ke/2)<c||M(M(ee)-h)<c?0:pe*B/e(p(ee)/j);return[ee,B]}return K.invert=function(pe,ke){var B,ee=ke+R;return[M(ke)<c?pe/U:M(B=b+ee/2)<c||M(M(B)-h)<c?0:pe*e(p(B)/j)/ke,ee]},K}function fl(){return Ie(Fs).parallel(40).scale(158.837)}function ko(R,U){return[R,1.25*e(p(b+.4*U))]}function hl(){return(0,A.Z)(ko).scale(108.318)}function Js(R){var U=R.length-1;function j(K,pe){for(var ke,B=m(pe),ee=2/(1+B*m(K)),ie=ee*B*u(K),ge=ee*u(pe),_e=U,Ce=R[_e],Ne=Ce[0],Ue=Ce[1];--_e>=0;)Ne=(Ce=R[_e])[0]+ie*(ke=Ne)-ge*Ue,Ue=Ce[1]+ie*Ue+ge*ke;return[Ne=ie*(ke=Ne)-ge*Ue,Ue=ie*Ue+ge*ke]}return j.invert=function(K,pe){var ke=20,B=K,ee=pe;do{for(var ie,ge=U,_e=R[ge],Ce=_e[0],Ne=_e[1],Ue=0,Ge=0;--ge>=0;)Ue=Ce+B*(ie=Ue)-ee*Ge,Ge=Ne+B*Ge+ee*ie,Ce=(_e=R[ge])[0]+B*(ie=Ce)-ee*Ne,Ne=_e[1]+B*Ne+ee*ie;var Ye,Qe,ct=(Ue=Ce+B*(ie=Ue)-ee*Ge)*Ue+(Ge=Ne+B*Ge+ee*ie)*Ge;B-=Ye=((Ce=B*(ie=Ce)-ee*Ne-K)*Ue+(Ne=B*Ne+ee*ie-pe)*Ge)/ct,ee-=Qe=(Ne*Ue-Ce*Ge)/ct}while(M(Ye)+M(Qe)>c*c&&--ke>0);if(ke){var vt=L(B*B+ee*ee),Ot=2*l(.5*vt),Dt=u(Ot);return[_(B*Dt,vt*m(Ot)),vt?E(ee*Dt/vt):0]}},j}Ca.invert=function(R,U){var j=M(R),K=M(U),pe=c,ke=h;K<to?ke*=K/to:pe+=6*C(to/K);for(var B=0;B<25;B++){var ee=u(ke),ie=L(m(ke)),ge=u(ke/2),_e=m(ke/2),Ce=u(pe/6),Ne=m(pe/6),Ue=.5*pe*(1+ie)-j,Ge=ke/(_e*Ne)-K,Ye=ie?-.25*pe*ee/ie:0,Qe=.5*(1+ie),ct=(1+.5*ke*ge/_e)/(_e*Ne),vt=ke/_e*(Ce/6)/(Ne*Ne),Ot=Ye*vt-ct*Qe,Dt=(Ue*vt-Ge*Qe)/Ot,Pt=(Ge*Ye-Ue*ct)/Ot;if(ke-=Dt,pe-=Pt,M(Dt)<c&&M(Pt)<c)break}return[R<0?-pe:pe,U<0?-ke:ke]},Ha.invert=function(R,U){var j=a(R)*g,K=U/2,pe=50;do{var ke=j*j,B=K*K,ee=j*K,ie=j*(.975534+B*(-.0143059*ke-.119161+-.0547009*B))-R,ge=K*(1.00384+ke*(.0802894+-.02855*B+199025e-9*ke)+B*(.0998909+-.0491032*B))-U,_e=.975534-B*(.119161+3*ke*.0143059+.0547009*B),Ce=-ee*(.238322+.2188036*B+.0286118*ke),Ne=ee*(.1605788+7961e-7*ke+-.0571*B),Ue=1.00384+ke*(.0802894+199025e-9*ke)+B*(3*(.0998909-.02855*ke)-.245516*B),Ge=Ce*Ne-Ue*_e,Ye=(ge*Ce-ie*Ue)/Ge,Qe=(ie*Ne-ge*_e)/Ge;j-=Ye,K-=Qe}while((M(Ye)>c||M(Qe)>c)&&--pe>0);return pe&&[j,K]},co.invert=function(R,U){var j=R*R,K=U*U+1,pe=j+K,ke=R?v*L((pe-L(pe*pe-4*j))/j):1/L(K);return[E(R*ke),a(U)*C(ke)]},ko.invert=function(R,U){return[R,2.5*l(f(.8*U))-.625*g]};var pl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],$s=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],dl=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],us=[[.9245,0],[0,0],[.01943,0]],So=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Yo(){return za(pl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function cs(){return za($s,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ns(){return za(dl,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Qs(){return za(us,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function el(){return za(So,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function za(R,U){var j=(0,A.Z)(Js(R)).rotate(U).clipAngle(90),K=(0,Je.Z)(U),pe=j.center;return delete j.rotate,j.center=function(ke){return arguments.length?pe(K(ke)):K.invert(pe())},j}var Zo=L(6),no=L(7);function ho(R,U){var j=E(7*u(U)/(3*Zo));return[Zo*R*(2*m(2*j/3)-1)/no,9*u(j/3)/no]}function vl(){return(0,A.Z)(ho).scale(164.859)}function Eo(R,U){for(var j,K=(1+v)*u(U),pe=U,ke=0;ke<25&&(pe-=j=(u(pe/2)+u(pe)-K)/(.5*m(pe/2)+m(pe)),!(M(j)<c));ke++);return[R*(1+2*m(pe)/m(pe/2))/(3*y),2*L(3)*u(pe/2)/L(2+y)]}function li(){return(0,A.Z)(Eo).scale(188.209)}function Ga(R,U){for(var j,K=L(6/(4+g)),pe=(1+g/4)*u(U),ke=U/2,B=0;B<25&&(ke-=j=(ke/2+u(ke)-pe)/(.5+m(ke)),!(M(j)<c));B++);return[K*(.5+m(ke))*R/1.5,K*ke]}function Ts(){return(0,A.Z)(Ga).scale(166.518)}ho.invert=function(R,U){var j=3*E(U*no/9);return[R*no/(Zo*(2*m(2*j/3)-1)),E(3*u(j)*Zo/7)]},Eo.invert=function(R,U){var j=U*L(2+y)/(2*L(3)),K=2*E(j);return[3*y*R/(1+2*m(K)/m(K/2)),E((j+u(K))/(1+v))]},Ga.invert=function(R,U){var j=L(6/(4+g)),K=U/j;return M(M(K)-h)<c&&(K=K<0?-h:h),[1.5*R/(j*(.5+m(K))),E((K/2+u(K))/(1+g/4))]};var Ra=t(26867);function Xo(R,U){var j=U*U,K=j*j,pe=j*K;return[R*(.84719-.13063*j+pe*pe*(.05494*j-.04515-.02326*K+.00331*pe)),U*(1.01183+K*K*(.01926*j-.02625-.00396*K))]}function Cl(){return(0,A.Z)(Xo).scale(175.295)}function js(R,U){return[R*(1+m(U))/2,2*(U-p(U/2))]}function ml(){return(0,A.Z)(js).scale(152.63)}Xo.invert=function(R,U){var j,K,pe,ke,B=U,ee=25;do B-=j=(B*(1.01183+(pe=(K=B*B)*K)*pe*(.01926*K-.02625-.00396*pe))-U)/(1.01183+pe*pe*(.21186*K-.23625+-.05148*pe));while(M(j)>x&&--ee>0);return[R/(.84719-.13063*(K=B*B)+(ke=K*(pe=K*K))*ke*(.05494*K-.04515-.02326*pe+.00331*ke)),B]},js.invert=function(R,U){for(var j=U/2,K=0,pe=1/0;K<10&&M(pe)>c;++K){var ke=m(U/2);U-=pe=(U-p(U/2)-j)/(1-.5/(ke*ke))}return[2*R/(1+m(U)),U]};var yl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ms(){return Br(ue(1/0),yl).rotate([20,0]).scale(152.63)}function fs(R,U){var j=u(U),K=m(U),pe=a(R);if(R===0||M(U)===h)return[0,U];if(U===0)return[R,0];if(M(R)===h)return[R*K,h*j];var ke=g/(2*R)-2*R/g,B=2*U/g,ee=(1-B*B)/(j-B),ie=ke*ke,ge=ee*ee,_e=1+ie/ge,Ce=1+ge/ie,Ne=(ke*j/ee-ke/2)/_e,Ue=(ge*j/ie+ee/2)/Ce,Ge=Ue*Ue-(ge*j*j/ie+ee*j-1)/Ce;return[h*(Ne+L(Ne*Ne+K*K/_e)*pe),h*(Ue+L(Ge<0?0:Ge)*a(-U*ke)*pe)]}function As(){return(0,A.Z)(fs).scale(127.267)}fs.invert=function(R,U){var j=(R/=h)*R,K=j+(U/=h)*U,pe=g*g;return[R?(K-1+L((1-K)*(1-K)+4*j))/(2*R)*h:0,xe(function(ke){return K*(g*u(ke)-2*ke)*g+4*ke*ke*(U-u(ke))+2*g*ke-pe*U},0)]};var Co=1.0148,po=.23185,Lo=-.14499,go=.02406,Us=Co,Wa=5*po,xl=7*Lo,bl=9*go,Vs=1.790857183;function Po(R,U){var j=U*U;return[R,U*(Co+j*j*(po+j*(Lo+go*j)))]}function Hs(){return(0,A.Z)(Po).scale(139.319)}function Ko(R,U){if(M(U)<c)return[R,0];var j=p(U),K=R*u(U);return[u(K)/j,U+(1-m(K))/j]}function tl(){return(0,A.Z)(Ko).scale(103.74)}Po.invert=function(R,U){U>Vs?U=Vs:U<-1.790857183&&(U=-1.790857183);var j,K=U;do{var pe=K*K;K-=j=(K*(Co+pe*pe*(po+pe*(Lo+go*pe)))-U)/(Us+pe*pe*(Wa+pe*(xl+bl*pe)))}while(M(j)>c);return[R,K]},Ko.invert=function(R,U){if(M(U)<c)return[R,0];var j,K=R*R+U*U,pe=.5*U,ke=10;do{var B=p(pe),ee=1/m(pe),ie=K-2*U*pe+pe*pe;pe-=j=(B*ie+2*(pe-U))/(2+ie*ee*ee+2*(pe-U)*B)}while(M(j)>c&&--ke>0);return B=p(pe),[(M(U)<M(pe+1/B)?E(R*B):a(U)*a(R)*(C(M(R*B))+h))/u(pe),pe]};var hs=t(77338),Jo=t(83074);function ks(R,U){return[R[0]*U[0]+R[1]*U[3],R[0]*U[1]+R[1]*U[4],R[0]*U[2]+R[1]*U[5]+R[2],R[3]*U[0]+R[4]*U[3],R[3]*U[1]+R[4]*U[4],R[3]*U[2]+R[4]*U[5]+R[5]]}function ps(R,U){return[R[0]-U[0],R[1]-U[1]]}function ui(R){return L(R[0]*R[0]+R[1]*R[1])}function Oo(R,U,j){function K(ee,ie){var ge,_e=U(ee,ie),Ce=_e.project([ee*S,ie*S]);return(ge=_e.transform)?[ge[0]*Ce[0]+ge[1]*Ce[1]+ge[2],-(ge[3]*Ce[0]+ge[4]*Ce[1]+ge[5])]:(Ce[1]=-Ce[1],Ce)}function pe(ee,ie){var ge=ee.project.invert,_e=ee.transform,Ce=ie;if(_e&&(_e=function(Qe){var ct=1/(Qe[0]*Qe[4]-Qe[1]*Qe[3]);return[ct*Qe[4],-ct*Qe[1],ct*(Qe[1]*Qe[5]-Qe[2]*Qe[4]),-ct*Qe[3],ct*Qe[0],ct*(Qe[2]*Qe[3]-Qe[0]*Qe[5])]}(_e),Ce=[_e[0]*Ce[0]+_e[1]*Ce[1]+_e[2],_e[3]*Ce[0]+_e[4]*Ce[1]+_e[5]]),ge&&ee===function(Qe){return U(Qe[0]*T,Qe[1]*T)}(Ne=ge(Ce)))return Ne;for(var Ne,Ue=ee.children,Ge=0,Ye=Ue&&Ue.length;Ge<Ye;++Ge)if(Ne=pe(Ue[Ge],ie))return Ne}(function ee(ie,ge){if(ie.edges=function(Pt){for(var Vt=Pt.length,It=[],sn=Pt[Vt-1],Jt=0;Jt<Vt;++Jt)It.push([sn,sn=Pt[Jt]]);return It}(ie.face),ge.face){var _e=ie.shared=function(Pt,Vt){for(var It,sn,Jt=Pt.length,Zt=null,Mn=0;Mn<Jt;++Mn){It=Pt[Mn];for(var kn=Vt.length;--kn>=0;)if(sn=Vt[kn],It[0]===sn[0]&&It[1]===sn[1]){if(Zt)return[Zt,It];Zt=It}}}(ie.face,ge.face),Ce=(Ye=_e.map(ge.project),Qe=_e.map(ie.project),ct=ps(Ye[1],Ye[0]),vt=ps(Qe[1],Qe[0]),Ot=function(Pt,Vt){return _(Pt[0]*Vt[1]-Pt[1]*Vt[0],Pt[0]*Vt[0]+Pt[1]*Vt[1])}(ct,vt),Dt=ui(ct)/ui(vt),ks([1,0,Ye[0][0],0,1,Ye[0][1]],ks([Dt,0,0,0,Dt,0],ks([m(Ot),u(Ot),0,-u(Ot),m(Ot),0],[1,0,-Qe[0][0],0,1,-Qe[0][1]]))));ie.transform=ge.transform?ks(ge.transform,Ce):Ce;for(var Ne=ge.edges,Ue=0,Ge=Ne.length;Ue<Ge;++Ue)Zi(_e[0],Ne[Ue][1])&&Zi(_e[1],Ne[Ue][0])&&(Ne[Ue]=ie),Zi(_e[0],Ne[Ue][0])&&Zi(_e[1],Ne[Ue][1])&&(Ne[Ue]=ie);for(Ue=0,Ge=(Ne=ie.edges).length;Ue<Ge;++Ue)Zi(_e[0],Ne[Ue][0])&&Zi(_e[1],Ne[Ue][1])&&(Ne[Ue]=ge),Zi(_e[0],Ne[Ue][1])&&Zi(_e[1],Ne[Ue][0])&&(Ne[Ue]=ge)}else ie.transform=ge.transform;var Ye,Qe,ct,vt,Ot,Dt;return ie.children&&ie.children.forEach(function(Pt){ee(Pt,ie)}),ie})(R,{transform:null}),Jr(R)&&(K.invert=function(ee,ie){var ge=pe(R,[ee,-ie]);return ge&&(ge[0]*=T,ge[1]*=T,ge)});var ke=(0,A.Z)(K),B=ke.stream;return ke.stream=function(ee){var ie=ke.rotate(),ge=B(ee),_e=(ke.rotate([0,0]),B(ee));return ke.rotate(ie),ge.sphere=function(){_e.polygonStart(),_e.lineStart(),vo(_e,R),_e.lineEnd(),_e.polygonEnd()},ge},ke.angle(j==null?-30:j*S)}function vo(R,U,j){var K,pe,ke=U.edges,B=ke.length,ee={type:"MultiPoint",coordinates:U.face},ie=U.face.filter(function(Ye){return M(Ye[1])!==90}),ge=(0,hs.Z)({type:"MultiPoint",coordinates:ie}),_e=!1,Ce=-1,Ne=ge[1][0]-ge[0][0],Ue=Ne===180||Ne===360?[(ge[0][0]+ge[1][0])/2,(ge[0][1]+ge[1][1])/2]:(0,We.Z)(ee);if(j)for(;++Ce<B&&ke[Ce]!==j;);++Ce;for(var Ge=0;Ge<B;++Ge)pe=ke[(Ge+Ce)%B],Array.isArray(pe)?(_e||(R.point((K=(0,Jo.Z)(pe[0],Ue)(c))[0],K[1]),_e=!0),R.point((K=(0,Jo.Z)(pe[1],Ue)(c))[0],K[1])):(_e=!1,pe!==j&&vo(R,pe,U))}function Zi(R,U){return R&&U&&R[0]===U[0]&&R[1]===U[1]}function Jr(R){return R.project.invert||R.children&&R.children.some(Jr)}var ti=t(98936),Io=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],mo=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(R){return R.map(function(U){return Io[U]})});function nl(R){R=R||function(j){var K=(0,We.Z)({type:"MultiPoint",coordinates:j});return(0,ti.Z)().scale(1).translate([0,0]).rotate([-K[0],-K[1]])};var U=mo.map(function(j){return{face:j,project:R(j)}});return[-1,0,0,1,0,1,4,5].forEach(function(j,K){var pe=U[j];pe&&(pe.children||(pe.children=[])).push(U[K])}),Oo(U[0],function(j,K){return U[j<-g/2?K<0?6:4:j<0?K<0?2:0:j<g/2?K<0?3:1:K<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Ss=2/L(3);function Do(R,U){var j=At(R,U);return[j[0]*Ss,j[1]]}function Es(R){R=R||function(j){var K=(0,We.Z)({type:"MultiPoint",coordinates:j});return(0,A.Z)(Do).translate([0,0]).scale(1).rotate(K[1]>0?[-K[0],0]:[180-K[0],180])};var U=mo.map(function(j){return{face:j,project:R(j)}});return[-1,0,0,1,0,1,4,5].forEach(function(j,K){var pe=U[j];pe&&(pe.children||(pe.children=[])).push(U[K])}),Oo(U[0],function(j,K){return U[j<-g/2?K<0?6:4:j<0?K<0?2:0:j<g/2?K<0?3:1:K<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function yo(R){R=R||function(ke){var B=ke.length===6?(0,We.Z)({type:"MultiPoint",coordinates:ke}):ke[0];return(0,ti.Z)().scale(1).translate([0,0]).rotate([-B[0],-B[1]])};var U=mo.map(function(ke){for(var B,ee=ke.map(Mi),ie=ee.length,ge=ee[ie-1],_e=[],Ce=0;Ce<ie;++Ce)B=ee[Ce],_e.push(zo([.9486832980505138*ge[0]+.31622776601683794*B[0],.9486832980505138*ge[1]+.31622776601683794*B[1],.9486832980505138*ge[2]+.31622776601683794*B[2]]),zo([.9486832980505138*B[0]+.31622776601683794*ge[0],.9486832980505138*B[1]+.31622776601683794*ge[1],.9486832980505138*B[2]+.31622776601683794*ge[2]])),ge=B;return _e}),j=[],K=[-1,0,0,1,0,1,4,5];U.forEach(function(ke,B){for(var ee,ie,ge=mo[B],_e=ge.length,Ce=j[B]=[],Ne=0;Ne<_e;++Ne)U.push([ge[Ne],ke[(2*Ne+2)%(2*_e)],ke[(2*Ne+1)%(2*_e)]]),K.push(B),Ce.push((ee=Mi(ke[(2*Ne+2)%(2*_e)]),ie=Mi(ke[(2*Ne+1)%(2*_e)]),[ee[1]*ie[2]-ee[2]*ie[1],ee[2]*ie[0]-ee[0]*ie[2],ee[0]*ie[1]-ee[1]*ie[0]]))});var pe=U.map(function(ke){return{project:R(ke),face:ke}});return K.forEach(function(ke,B){var ee=pe[ke];ee&&(ee.children||(ee.children=[])).push(pe[B])}),Oo(pe[0],function(ke,B){var ee=m(B),ie=[ee*m(ke),ee*u(ke),u(B)],ge=ke<-g/2?B<0?6:4:ke<0?B<0?2:0:ke<g/2?B<0?3:1:B<0?7:5,_e=j[ge];return pe[$o(_e[0],ie)<0?8+3*ge:$o(_e[1],ie)<0?8+3*ge+1:$o(_e[2],ie)<0?8+3*ge+2:ge]}).angle(-30).scale(110.625).center([0,45])}function $o(R,U){for(var j=0,K=R.length,pe=0;j<K;++j)pe+=R[j]*U[j];return pe}function zo(R){return[_(R[1],R[0])*S,E(i(-1,r(1,R[2])))*S]}function Mi(R){var U=R[0]*T,j=R[1]*T,K=m(j);return[K*m(U),K*u(U),u(j)]}function Qo(){}function es(R,U){var j,K=U.stream;if(!K)throw new Error("invalid projection");switch(R&&R.type){case"Feature":j=aa;break;case"FeatureCollection":j=ji;break;default:j=ta}return j(R,K)}function ji(R,U){return{type:"FeatureCollection",features:R.features.map(function(j){return aa(j,U)})}}function aa(R,U){return{type:"Feature",id:R.id,properties:R.properties,geometry:ta(R.geometry,U)}}function ta(R,U){if(!R)return null;if(R.type==="GeometryCollection")return function(K,pe){return{type:"GeometryCollection",geometries:K.geometries.map(function(ke){return ta(ke,pe)})}}(R,U);var j;switch(R.type){case"Point":case"MultiPoint":j=Ro;break;case"LineString":case"MultiLineString":j=qa;break;case"Polygon":case"MultiPolygon":case"Sphere":j=Xi;break;default:return null}return(0,gn.Z)(R,U(j)),j.result()}Do.invert=function(R,U){return At.invert(R/Ss,U)};var Ui=[],ha=[],Ro={point:function(R,U){Ui.push([R,U])},result:function(){var R=Ui.length?Ui.length<2?{type:"Point",coordinates:Ui[0]}:{type:"MultiPoint",coordinates:Ui}:null;return Ui=[],R}},qa={lineStart:Qo,point:function(R,U){Ui.push([R,U])},lineEnd:function(){Ui.length&&(ha.push(Ui),Ui=[])},result:function(){var R=ha.length?ha.length<2?{type:"LineString",coordinates:ha[0]}:{type:"MultiLineString",coordinates:ha}:null;return ha=[],R}},Xi={polygonStart:Qo,lineStart:Qo,point:function(R,U){Ui.push([R,U])},lineEnd:function(){var R=Ui.length;if(R){do Ui.push(Ui[0].slice());while(++R<4);ha.push(Ui),Ui=[]}},polygonEnd:Qo,result:function(){if(!ha.length)return null;var R=[],U=[];return ha.forEach(function(j){(function(K){if((pe=K.length)<4)return!1;for(var pe,ke=0,B=K[pe-1][1]*K[0][0]-K[pe-1][0]*K[0][1];++ke<pe;)B+=K[ke-1][1]*K[ke][0]-K[ke-1][0]*K[ke][1];return B<=0})(j)?R.push([j]):U.push(j)}),U.forEach(function(j){var K=j[0];R.some(function(pe){if(function(ke,B){for(var ee=B[0],ie=B[1],ge=!1,_e=0,Ce=ke.length,Ne=Ce-1;_e<Ce;Ne=_e++){var Ue=ke[_e],Ge=Ue[0],Ye=Ue[1],Qe=ke[Ne],ct=Qe[0],vt=Qe[1];Ye>ie^vt>ie&&ee<(ct-Ge)*(ie-Ye)/(vt-Ye)+Ge&&(ge=!ge)}return ge}(pe[0],K))return pe.push(j),!0})||R.push([j])}),ha=[],R.length?R.length>1?{type:"MultiPolygon",coordinates:R}:{type:"Polygon",coordinates:R[0]}:null}};function La(R){var U=R(h,0)[0]-R(-h,0)[0];function j(K,pe){var ke=M(K)<h,B=R(ke?K:K>0?K-g:K+g,pe),ee=(B[0]-B[1])*v,ie=(B[0]+B[1])*v;if(ke)return[ee,ie];var ge=U*v,_e=ee>0^ie>0?-1:1;return[_e*ee-a(ie)*ge,_e*ie-a(ee)*ge]}return R.invert&&(j.invert=function(K,pe){var ke=(K+pe)*v,B=(pe-K)*v,ee=M(ke)<.5*U&&M(B)<.5*U;if(!ee){var ie=U*v,ge=ke>0^B>0?-1:1,_e=-ge*K+(B>0?1:-1)*ie,Ce=-ge*pe+(ke>0?1:-1)*ie;ke=(-_e-Ce)*v,B=(_e-Ce)*v}var Ne=R.invert(ke,B);return ee||(Ne[0]+=ke>0?g:-g),Ne}),(0,A.Z)(j).rotate([-90,-90,45]).clipAngle(179.999)}function Ba(){return La(Un).scale(176.423)}function Gs(){return La(On).scale(111.48)}function Fa(R,U){if(!(0<=(U=+U)&&U<=20))throw new Error("invalid digits");function j(ge){var _e=ge.length,Ce=2,Ne=new Array(_e);for(Ne[0]=+ge[0].toFixed(U),Ne[1]=+ge[1].toFixed(U);Ce<_e;)Ne[Ce]=ge[Ce],++Ce;return Ne}function K(ge){return ge.map(j)}function pe(ge){for(var _e=j(ge[0]),Ce=[_e],Ne=1;Ne<ge.length;Ne++){var Ue=j(ge[Ne]);(Ue.length>2||Ue[0]!=_e[0]||Ue[1]!=_e[1])&&(Ce.push(Ue),_e=Ue)}return Ce.length===1&&ge.length>1&&Ce.push(j(ge[ge.length-1])),Ce}function ke(ge){return ge.map(pe)}function B(ge){if(ge==null)return ge;var _e;switch(ge.type){case"GeometryCollection":_e={type:"GeometryCollection",geometries:ge.geometries.map(B)};break;case"Point":_e={type:"Point",coordinates:j(ge.coordinates)};break;case"MultiPoint":_e={type:ge.type,coordinates:K(ge.coordinates)};break;case"LineString":_e={type:ge.type,coordinates:pe(ge.coordinates)};break;case"MultiLineString":case"Polygon":_e={type:ge.type,coordinates:ke(ge.coordinates)};break;case"MultiPolygon":_e={type:"MultiPolygon",coordinates:ge.coordinates.map(ke)};break;default:return ge}return ge.bbox!=null&&(_e.bbox=ge.bbox),_e}function ee(ge){var _e={type:"Feature",properties:ge.properties,geometry:B(ge.geometry)};return ge.id!=null&&(_e.id=ge.id),ge.bbox!=null&&(_e.bbox=ge.bbox),_e}if(R!=null)switch(R.type){case"Feature":return ee(R);case"FeatureCollection":var ie={type:"FeatureCollection",features:R.features.map(ee)};return R.bbox!=null&&(ie.bbox=R.bbox),ie;default:return B(R)}return R}function Ki(R){var U=u(R);function j(K,pe){var ke=U?p(K*U/2)/U:K/2;if(!pe)return[2*ke,-R];var B=2*l(ke*u(pe)),ee=1/p(pe);return[u(B)*ee,pe+(1-m(B))*ee-R]}return j.invert=function(K,pe){if(M(pe+=R)<c)return[U?2*l(U*K/2)/U:K,0];var ke,B=K*K+pe*pe,ee=0,ie=10;do{var ge=p(ee),_e=1/m(ee),Ce=B-2*pe*ee+ee*ee;ee-=ke=(ge*Ce+2*(ee-pe))/(2+Ce*_e*_e+2*(ee-pe)*ge)}while(M(ke)>c&&--ie>0);var Ne=K*(ge=p(ee)),Ue=p(M(pe)<M(ee+1/ge)?.5*E(Ne):.5*C(Ne)+g/4)/u(ee);return[U?2*l(U*Ue)/U:2*Ue,ee]},j}function Sr(){return Ie(Ki).scale(131.215)}var oa=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Cs(R,U){var j,K=r(18,36*M(U)/g),pe=o(K),ke=K-pe,B=(j=oa[pe])[0],ee=j[1],ie=(j=oa[++pe])[0],ge=j[1],_e=(j=oa[r(19,++pe)])[0],Ce=j[1];return[R*(ie+ke*(_e-B)/2+ke*ke*(_e-2*ie+B)/2),(U>0?h:-h)*(ge+ke*(Ce-ee)/2+ke*ke*(Ce-2*ge+ee)/2)]}function Ws(){return(0,A.Z)(Cs).scale(152.63)}function ts(R,U){var j=function(B){function ee(ie,ge){var _e=m(ge),Ce=(B-1)/(B-_e*m(ie));return[Ce*_e*u(ie),Ce*u(ge)]}return ee.invert=function(ie,ge){var _e=ie*ie+ge*ge,Ce=L(_e),Ne=(B-L(1-_e*(B+1)/(B-1)))/((B-1)/Ce+Ce/(B-1));return[_(ie*Ne,Ce*L(1-Ne*Ne)),Ce?E(ge*Ne/Ce):0]},ee}(R);if(!U)return j;var K=m(U),pe=u(U);function ke(B,ee){var ie=j(B,ee),ge=ie[1],_e=ge*pe/(R-1)+K;return[ie[0]*K/_e,ge/_e]}return ke.invert=function(B,ee){var ie=(R-1)/(R-1-ee*pe);return j.invert(ie*B,ie*ee*K)},ke}function ns(){var R=2,U=0,j=(0,A.r)(ts),K=j(R,U);return K.distance=function(pe){return arguments.length?j(R=+pe,U):R},K.tilt=function(pe){return arguments.length?j(R,U=pe*T):U*S},K.scale(432.147).clipAngle(C(1/R)*S-1e-6)}oa.forEach(function(R){R[1]*=1.0144}),Cs.invert=function(R,U){var j=U/h,K=90*j,pe=r(18,M(K/5)),ke=i(0,o(pe));do{var B=oa[ke][1],ee=oa[ke+1][1],ie=oa[r(19,ke+2)][1],ge=ie-B,_e=ie-2*ee+B,Ce=2*(M(j)-ee)/ge,Ne=_e/ge,Ue=Ce*(1-Ne*Ce*(1-2*Ne*Ce));if(Ue>=0||ke===1){K=(U>=0?5:-5)*(Ue+pe);var Ge,Ye=50;do Ue=(pe=r(18,M(K)/5))-(ke=o(pe)),B=oa[ke][1],ee=oa[ke+1][1],ie=oa[r(19,ke+2)][1],K-=(Ge=(U>=0?h:-h)*(ee+Ue*(ie-B)/2+Ue*Ue*(ie-2*ee+B)/2)-U)*S;while(M(Ge)>x&&--Ye>0);break}}while(--ke>=0);var Qe=oa[ke][0],ct=oa[ke+1][0],vt=oa[r(19,ke+2)][0];return[R/(ct+Ue*(vt-Qe)/2+Ue*Ue*(vt-2*ct+Qe)/2),K*T]};var xo=1e-4,Tr=1e4,Ya=-180,ds=Ya+xo,Ls=180,sa=Ls-xo,Za=-90,Na=Za+xo,Pa=90,ro=Pa-xo;function bo(R){return R.length>0}function Vi(R){return R===Za||R===Pa?[0,R]:[Ya,(U=R,Math.floor(U*Tr)/Tr)];var U}function rs(R){var U=R[0],j=R[1],K=!1;return U<=ds?(U=Ya,K=!0):U>=sa&&(U=Ls,K=!0),j<=Na?(j=Za,K=!0):j>=ro&&(j=Pa,K=!0),K?[U,j]:R}function gs(R){return R.map(rs)}function Ji(R,U,j){for(var K=0,pe=R.length;K<pe;++K){var ke=R[K].slice();j.push({index:-1,polygon:U,ring:ke});for(var B=0,ee=ke.length;B<ee;++B){var ie=ke[B],ge=ie[0],_e=ie[1];if(ge<=ds||ge>=sa||_e<=Na||_e>=ro){ke[B]=rs(ie);for(var Ce=B+1;Ce<ee;++Ce){var Ne=ke[Ce],Ue=Ne[0],Ge=Ne[1];if(Ue>ds&&Ue<sa&&Ge>Na&&Ge<ro)break}if(Ce===B+1)continue;if(B){var Ye={index:-1,polygon:U,ring:ke.slice(0,B+1)};Ye.ring[Ye.ring.length-1]=Vi(_e),j[j.length-1]=Ye}else j.pop();if(Ce>=ee)break;j.push({index:-1,polygon:U,ring:ke=ke.slice(Ce-1)}),ke[0]=Vi(ke[0][1]),B=-1,ee=ke.length}}}}function ci(R){var U,j,K,pe,ke,B,ee=R.length,ie={},ge={};for(U=0;U<ee;++U)K=(j=R[U]).ring[0],ke=j.ring[j.ring.length-1],K[0]!==ke[0]||K[1]!==ke[1]?(j.index=U,ie[K]=ge[ke]=j):(j.polygon.push(j.ring),R[U]=null);for(U=0;U<ee;++U)if(j=R[U]){if(K=j.ring[0],ke=j.ring[j.ring.length-1],pe=ge[K],B=ie[ke],delete ie[K],delete ge[ke],K[0]===ke[0]&&K[1]===ke[1]){j.polygon.push(j.ring);continue}pe?(delete ge[K],delete ie[pe.ring[0]],pe.ring.pop(),R[pe.index]=null,j={index:-1,polygon:pe.polygon,ring:pe.ring.concat(j.ring)},pe===B?j.polygon.push(j.ring):(j.index=ee++,R.push(ie[j.ring[0]]=ge[j.ring[j.ring.length-1]]=j))):B?(delete ie[ke],delete ge[B.ring[B.ring.length-1]],j.ring.pop(),j={index:ee++,polygon:B.polygon,ring:j.ring.concat(B.ring)},R[B.index]=null,R.push(ie[j.ring[0]]=ge[j.ring[j.ring.length-1]]=j)):(j.ring.push(j.ring[0]),j.polygon.push(j.ring))}}function Ps(R){var U={type:"Feature",geometry:wa(R.geometry)};return R.id!=null&&(U.id=R.id),R.bbox!=null&&(U.bbox=R.bbox),R.properties!=null&&(U.properties=R.properties),U}function wa(R){if(R==null)return R;var U,j,K,pe;switch(R.type){case"GeometryCollection":U={type:"GeometryCollection",geometries:R.geometries.map(wa)};break;case"Point":U={type:"Point",coordinates:rs(R.coordinates)};break;case"MultiPoint":case"LineString":U={type:R.type,coordinates:gs(R.coordinates)};break;case"MultiLineString":U={type:"MultiLineString",coordinates:R.coordinates.map(gs)};break;case"Polygon":var ke=[];Ji(R.coordinates,ke,j=[]),ci(j),U={type:"Polygon",coordinates:ke};break;case"MultiPolygon":j=[],K=-1,pe=R.coordinates.length;for(var B=new Array(pe);++K<pe;)Ji(R.coordinates[K],B[K]=[],j);ci(j),U={type:"MultiPolygon",coordinates:B.filter(bo)};break;default:return R}return R.bbox!=null&&(U.bbox=R.bbox),U}function Hi(R){if(R==null)return R;switch(R.type){case"Feature":return Ps(R);case"FeatureCollection":var U={type:"FeatureCollection",features:R.features.map(Ps)};return R.bbox!=null&&(U.bbox=R.bbox),U;default:return wa(R)}}function io(R,U){var j=p(U/2),K=u(b*j);return[R*(.74482-.34588*K*K),1.70711*j]}function rl(){return(0,A.Z)(io).scale(146.153)}function Li(R,U,j){var K=(0,Jo.Z)(U,j),pe=K(.5),ke=(0,Je.Z)([-pe[0],-pe[1]])(U),B=K.distance/2,ee=-E(u(ke[1]*T)/u(B)),ie=[-pe[0],-pe[1],-(ke[0]>0?g-ee:ee)*S],ge=(0,A.Z)(R(B)).rotate(ie),_e=(0,Je.Z)(ie),Ce=ge.center;return delete ge.rotate,ge.center=function(Ne){return arguments.length?Ce(_e(Ne)):_e.invert(Ce())},ge.clipAngle(90)}function oi(R){var U=m(R);function j(K,pe){var ke=(0,ti.M)(K,pe);return ke[0]*=U,ke}return j.invert=function(K,pe){return ti.M.invert(K/U,pe)},j}function Oa(){return ao([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function ao(R,U){return Li(oi,R,U)}function Xa(R){if(!(R*=2))return J.N;var U=-R/2,j=-U,K=R*R,pe=p(j),ke=.5/u(j);function B(ee,ie){var ge=C(m(ie)*m(ee-U)),_e=C(m(ie)*m(ee-j));return[((ge*=ge)-(_e*=_e))/(2*R),(ie<0?-1:1)*L(4*K*_e-(K-ge+_e)*(K-ge+_e))/(2*R)]}return B.invert=function(ee,ie){var ge,_e,Ce=ie*ie,Ne=m(L(Ce+(ge=ee+U)*ge)),Ue=m(L(Ce+(ge=ee+j)*ge));return[_(_e=Ne-Ue,ge=(Ne+Ue)*pe),(ie<0?-1:1)*C(L(ge*ge+_e*_e)*ke)]},B}function qs(){return Bo([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Bo(R,U){return Li(Xa,R,U)}function is(R,U){if(M(U)<c)return[R,0];var j=M(U/h),K=E(j);if(M(R)<c||M(M(U)-h)<c)return[0,a(U)*g*p(K/2)];var pe=m(K),ke=M(g/R-R/g)/2,B=ke*ke,ee=pe/(j+pe-1),ie=ee*(2/j-1),ge=ie*ie,_e=ge+B,Ce=ee-ge,Ne=B+ee;return[a(R)*g*(ke*Ce+L(B*Ce*Ce-_e*(ee*ee-ge)))/_e,a(U)*g*(ie*Ne-ke*L((B+1)*_e-Ne*Ne))/_e]}function Bi(){return(0,A.Z)(is).scale(79.4183)}function na(R,U){if(M(U)<c)return[R,0];var j=M(U/h),K=E(j);if(M(R)<c||M(M(U)-h)<c)return[0,a(U)*g*p(K/2)];var pe=m(K),ke=M(g/R-R/g)/2,B=ke*ke,ee=pe*(L(1+B)-ke*pe)/(1+B*j*j);return[a(R)*g*ee,a(U)*g*L(1-ee*(2*ke+ee))]}function Pr(){return(0,A.Z)(na).scale(79.4183)}function Dr(R,U){if(M(U)<c)return[R,0];var j=U/h,K=E(j);if(M(R)<c||M(M(U)-h)<c)return[0,g*p(K/2)];var pe=(g/R-R/g)/2,ke=j/(1+m(K));return[g*(a(R)*L(pe*pe+1-ke*ke)-pe),g*ke]}function vs(){return(0,A.Z)(Dr).scale(79.4183)}function pa(R,U){if(!U)return[R,0];var j=M(U);if(!R||j===h)return[0,U];var K=j/h,pe=K*K,ke=(8*K-pe*(pe+2)-5)/(2*pe*(K-1)),B=ke*ke,ee=K*ke,ie=pe+B+2*ee,ge=K+3*ke,_e=R/h,Ce=_e+1/_e,Ne=a(M(R)-h)*L(Ce*Ce-4),Ue=Ne*Ne,Ge=(Ne*(ie+B-1)+2*L(ie*(pe+B*Ue-1)+(1-pe)*(pe*(ge*ge+4*B)+12*ee*B+4*B*B)))/(4*ie+Ue);return[a(R)*h*Ge,a(U)*h*L(1+Ne*M(Ge)-Ge*Ge)]}function Fo(){return(0,A.Z)(pa).scale(127.16)}function ra(R,U,j,K){var pe=g/3;R=i(R,c),U=i(U,c),R=r(R,h),U=r(U,g-c),j=i(j,0),j=r(j,100-c);var ke=(K=i(K,c))/100,B=C((j/100+1)*m(pe))/pe,ee=u(R)/u(B*h),ie=U/g,ge=L(ke*u(R/2)/u(U/2));return function(_e,Ce,Ne,Ue,Ge){function Ye(Qe,ct){var vt=Ne*u(Ue*ct),Ot=L(1-vt*vt),Dt=L(2/(1+Ot*m(Qe*=Ge)));return[_e*Ot*Dt*u(Qe),Ce*vt*Dt]}return Ye.invert=function(Qe,ct){var vt=Qe/_e,Ot=ct/Ce,Dt=L(vt*vt+Ot*Ot),Pt=2*E(Dt/2);return[_(Qe*p(Pt),_e*Dt)/Ge,Dt&&E(ct*u(Pt)/(Ce*Ne*Dt))/Ue]},Ye}(ge/L(ie*ee*B),1/(ge*L(ie*ee*B)),ee,B,ie)}function ms(){var R=65*T,U=60*T,j=20,K=200,pe=(0,A.r)(ra),ke=pe(R,U,j,K);return ke.poleline=function(B){return arguments.length?pe(R=+B*T,U,j,K):R*S},ke.parallels=function(B){return arguments.length?pe(R,U=+B*T,j,K):U*S},ke.inflation=function(B){return arguments.length?pe(R,U,j=+B,K):j},ke.ratio=function(B){return arguments.length?pe(R,U,j,K=+B):K},ke.scale(163.775)}function ia(){return ms().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}io.invert=function(R,U){var j=U/1.70711,K=u(b*j);return[R/(.74482-.34588*K*K),2*l(j)]},is.invert=function(R,U){if(M(U)<c)return[R,0];if(M(R)<c)return[0,h*u(2*l(U/g))];var j=(R/=g)*R,K=(U/=g)*U,pe=j+K,ke=pe*pe,B=-M(U)*(1+pe),ee=B-2*K+j,ie=-2*B+1+2*K+ke,ge=K/ie+(2*ee*ee*ee/(ie*ie*ie)-9*B*ee/(ie*ie))/27,_e=(B-ee*ee/(3*ie))/ie,Ce=2*L(-_e/3),Ne=C(3*ge/(_e*Ce))/3;return[g*(pe-1+L(1+2*(j-K)+ke))/(2*R),a(U)*g*(-Ce*m(Ne+g/3)-ee/(3*ie))]},na.invert=function(R,U){if(!R)return[0,h*u(2*l(U/g))];var j=M(R/g),K=(1-j*j-(U/=g)*U)/(2*j),pe=L(K*K+1);return[a(R)*g*(pe-K),a(U)*h*u(2*_(L((1-2*K*j)*(K+pe)-j),L(pe+K+j)))]},Dr.invert=function(R,U){if(!U)return[R,0];var j=U/g,K=(g*g*(1-j*j)-R*R)/(2*g*R);return[R?g*(a(R)*L(K*K+1)-K):0,h*u(2*l(j))]},pa.invert=function(R,U){var j;if(!R||!U)return[R,U];U/=g;var K=a(R)*R/h,pe=(K*K-1+4*U*U)/M(K),ke=pe*pe,B=2*U,ee=50;do{var ie=B*B,ge=(8*B-ie*(ie+2)-5)/(2*ie*(B-1)),_e=(3*B-ie*B-10)/(2*ie*B),Ce=ge*ge,Ne=B*ge,Ue=B+ge,Ge=Ue*Ue,Ye=B+3*ge,Qe=-2*Ue*(4*Ne*Ce+(1-4*ie+3*ie*ie)*(1+_e)+Ce*(14*ie-6-ke+(8*ie-8-2*ke)*_e)+Ne*(12*ie-8+(10*ie-10-ke)*_e)),ct=L(Ge*(ie+Ce*ke-1)+(1-ie)*(ie*(Ye*Ye+4*Ce)+Ce*(12*Ne+4*Ce)));B-=j=(pe*(Ge+Ce-1)+2*ct-K*(4*Ge+ke))/(pe*(2*ge*_e+2*Ue*(1+_e))+Qe/ct-8*Ue*(pe*(-1+Ce+Ge)+2*ct)*(1+_e)/(ke+4*Ge))}while(j>c&&--ee>0);return[a(R)*(L(pe*pe+4)+pe)*g/4,h*B]};var No=4*g+3*L(3),jo=2*L(2*g*L(3)/No),jr=we(jo*L(3)/g,jo,No/6);function Gi(){return(0,A.Z)(jr).scale(176.84)}function oo(R,U){return[R*L(1-3*U*U/(g*g)),U]}function Ta(){return(0,A.Z)(oo).scale(152.63)}function as(R,U){var j=m(U),K=m(R)*j,pe=1-K,ke=m(R=_(u(R)*j,-u(U))),B=u(R);return[B*(j=L(1-K*K))-ke*pe,-ke*j-B*pe]}function ys(){return(0,A.Z)(as).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function os(R,U){var j=H(R,U);return[(j[0]+R/h)/2,(j[1]+U)/2]}function _o(){return(0,A.Z)(os).scale(158.837)}oo.invert=function(R,U){return[R/L(1-3*U*U/(g*g)),U]},as.invert=function(R,U){var j=(R*R+U*U)/-2,K=L(-j*(2+j)),pe=U*j+R*K,ke=R*j-U*K,B=L(ke*ke+pe*pe);return[_(K*pe,B*(1+j)),B?-E(K*ke/B):0]},os.invert=function(R,U){var j=R,K=U,pe=25;do{var ke,B=m(K),ee=u(K),ie=u(2*K),ge=ee*ee,_e=B*B,Ce=u(j),Ne=m(j/2),Ue=u(j/2),Ge=Ue*Ue,Ye=1-_e*Ne*Ne,Qe=Ye?C(B*Ne)*L(ke=1/Ye):ke=0,ct=.5*(2*Qe*B*Ue+j/h)-R,vt=.5*(Qe*ee+K)-U,Ot=.5*ke*(_e*Ge+Qe*B*Ne*ge)+.5/h,Dt=ke*(Ce*ie/4-Qe*ee*Ue),Pt=.125*ke*(ie*Ue-Qe*ee*_e*Ce),Vt=.5*ke*(ge*Ne+Qe*Ge*B)+.5,It=Dt*Pt-Vt*Ot,sn=(vt*Dt-ct*Vt)/It,Jt=(ct*Pt-vt*Ot)/It;j-=sn,K-=Jt}while((M(sn)>c||M(Jt)>c)&&--pe>0);return[j,K]}},33940:function($,P,t){function A(){return new M}function M(){this.reset()}t.d(P,{Z:function(){return A}}),M.prototype={constructor:M,reset:function(){this.s=this.t=0},add:function(m){_(l,m,this.t),_(this,l.s,this.s),this.s?this.t+=l.t:this.s=l.t},valueOf:function(){return this.s}};var l=new M;function _(m,f,o){var e=m.s=f+o,i=e-f,r=e-i;m.t=f-r+(o-i)}},97860:function($,P,t){t.d(P,{L9:function(){return r},ZP:function(){return x},gL:function(){return s}});var A,M,l,_,m,f=t(33940),o=t(39695),e=t(73182),i=t(72736),r=(0,f.Z)(),n=(0,f.Z)(),s={point:e.Z,lineStart:e.Z,lineEnd:e.Z,polygonStart:function(){r.reset(),s.lineStart=a,s.lineEnd=u},polygonEnd:function(){var g=+r;n.add(g<0?o.BZ+g:g),this.lineStart=this.lineEnd=this.point=e.Z},sphere:function(){n.add(o.BZ)}};function a(){s.point=p}function u(){c(A,M)}function p(g,h){s.point=c,A=g,M=h,g*=o.uR,h*=o.uR,l=g,_=(0,o.mC)(h=h/2+o.pu),m=(0,o.O$)(h)}function c(g,h){g*=o.uR,h=(h*=o.uR)/2+o.pu;var b=g-l,v=b>=0?1:-1,y=v*b,w=(0,o.mC)(h),d=(0,o.O$)(h),S=m*d,T=_*w+S*(0,o.mC)(y),E=S*v*(0,o.O$)(y);r.add((0,o.fv)(E,T)),l=g,_=w,m=d}function x(g){return n.reset(),(0,i.Z)(g,s),2*n}},77338:function($,P,t){t.d(P,{Z:function(){return C}});var A,M,l,_,m,f,o,e,i,r,n=t(33940),s=t(97860),a=t(7620),u=t(39695),p=t(72736),c=(0,n.Z)(),x={point:g,lineStart:b,lineEnd:v,polygonStart:function(){x.point=y,x.lineStart=w,x.lineEnd=d,c.reset(),s.gL.polygonStart()},polygonEnd:function(){s.gL.polygonEnd(),x.point=g,x.lineStart=b,x.lineEnd=v,s.L9<0?(A=-(l=180),M=-(_=90)):c>u.Ho?_=90:c<-u.Ho&&(M=-90),r[0]=A,r[1]=l},sphere:function(){A=-(l=180),M=-(_=90)}};function g(L,O){i.push(r=[A=L,l=L]),O<M&&(M=O),O>_&&(_=O)}function h(L,O){var z=(0,a.Og)([L*u.uR,O*u.uR]);if(e){var G=(0,a.T5)(e,z),I=[G[1],-G[0],0],H=(0,a.T5)(I,G);(0,a.iJ)(H),H=(0,a.Y1)(H);var N,F=L-m,V=F>0?1:-1,W=H[0]*u.RW*V,te=(0,u.Wn)(F)>180;te^(V*m<W&&W<V*L)?(N=H[1]*u.RW)>_&&(_=N):te^(V*m<(W=(W+360)%360-180)&&W<V*L)?(N=-H[1]*u.RW)<M&&(M=N):(O<M&&(M=O),O>_&&(_=O)),te?L<m?S(A,L)>S(A,l)&&(l=L):S(L,l)>S(A,l)&&(A=L):l>=A?(L<A&&(A=L),L>l&&(l=L)):L>m?S(A,L)>S(A,l)&&(l=L):S(L,l)>S(A,l)&&(A=L)}else i.push(r=[A=L,l=L]);O<M&&(M=O),O>_&&(_=O),e=z,m=L}function b(){x.point=h}function v(){r[0]=A,r[1]=l,x.point=g,e=null}function y(L,O){if(e){var z=L-m;c.add((0,u.Wn)(z)>180?z+(z>0?360:-360):z)}else f=L,o=O;s.gL.point(L,O),h(L,O)}function w(){s.gL.lineStart()}function d(){y(f,o),s.gL.lineEnd(),(0,u.Wn)(c)>u.Ho&&(A=-(l=180)),r[0]=A,r[1]=l,e=null}function S(L,O){return(O-=L)<0?O+360:O}function T(L,O){return L[0]-O[0]}function E(L,O){return L[0]<=L[1]?L[0]<=O&&O<=L[1]:O<L[0]||L[1]<O}function C(L){var O,z,G,I,H,N,F;if(_=l=-(A=M=1/0),i=[],(0,p.Z)(L,x),z=i.length){for(i.sort(T),O=1,H=[G=i[0]];O<z;++O)E(G,(I=i[O])[0])||E(G,I[1])?(S(G[0],I[1])>S(G[0],G[1])&&(G[1]=I[1]),S(I[0],G[1])>S(G[0],G[1])&&(G[0]=I[0])):H.push(G=I);for(N=-1/0,O=0,G=H[z=H.length-1];O<=z;G=I,++O)I=H[O],(F=S(G[1],I[0]))>N&&(N=F,A=I[0],l=G[1])}return i=r=null,A===1/0||M===1/0?[[NaN,NaN],[NaN,NaN]]:[[A,M],[l,_]]}},7620:function($,P,t){t.d(P,{Og:function(){return l},T:function(){return o},T5:function(){return m},Y1:function(){return M},iJ:function(){return e},j9:function(){return _},s0:function(){return f}});var A=t(39695);function M(i){return[(0,A.fv)(i[1],i[0]),(0,A.ZR)(i[2])]}function l(i){var r=i[0],n=i[1],s=(0,A.mC)(n);return[s*(0,A.mC)(r),s*(0,A.O$)(r),(0,A.O$)(n)]}function _(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]}function m(i,r){return[i[1]*r[2]-i[2]*r[1],i[2]*r[0]-i[0]*r[2],i[0]*r[1]-i[1]*r[0]]}function f(i,r){i[0]+=r[0],i[1]+=r[1],i[2]+=r[2]}function o(i,r){return[i[0]*r,i[1]*r,i[2]*r]}function e(i){var r=(0,A._b)(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=r,i[1]/=r,i[2]/=r}},66624:function($,P,t){t.d(P,{Z:function(){return z}});var A,M,l,_,m,f,o,e,i,r,n,s,a,u,p,c,x=t(39695),g=t(73182),h=t(72736),b={sphere:g.Z,point:v,lineStart:w,lineEnd:T,polygonStart:function(){b.lineStart=E,b.lineEnd=C},polygonEnd:function(){b.lineStart=w,b.lineEnd=T}};function v(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I);y(H*(0,x.mC)(G),H*(0,x.O$)(G),(0,x.O$)(I))}function y(G,I,H){++A,l+=(G-l)/A,_+=(I-_)/A,m+=(H-m)/A}function w(){b.point=d}function d(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I);u=H*(0,x.mC)(G),p=H*(0,x.O$)(G),c=(0,x.O$)(I),b.point=S,y(u,p,c)}function S(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I),N=H*(0,x.mC)(G),F=H*(0,x.O$)(G),V=(0,x.O$)(I),W=(0,x.fv)((0,x._b)((W=p*V-c*F)*W+(W=c*N-u*V)*W+(W=u*F-p*N)*W),u*N+p*F+c*V);M+=W,f+=W*(u+(u=N)),o+=W*(p+(p=F)),e+=W*(c+(c=V)),y(u,p,c)}function T(){b.point=v}function E(){b.point=L}function C(){O(s,a),b.point=v}function L(G,I){s=G,a=I,G*=x.uR,I*=x.uR,b.point=O;var H=(0,x.mC)(I);u=H*(0,x.mC)(G),p=H*(0,x.O$)(G),c=(0,x.O$)(I),y(u,p,c)}function O(G,I){G*=x.uR,I*=x.uR;var H=(0,x.mC)(I),N=H*(0,x.mC)(G),F=H*(0,x.O$)(G),V=(0,x.O$)(I),W=p*V-c*F,te=c*N-u*V,Q=u*F-p*N,X=(0,x._b)(W*W+te*te+Q*Q),q=(0,x.ZR)(X),Z=X&&-q/X;i+=Z*W,r+=Z*te,n+=Z*Q,M+=q,f+=q*(u+(u=N)),o+=q*(p+(p=F)),e+=q*(c+(c=V)),y(u,p,c)}function z(G){A=M=l=_=m=f=o=e=i=r=n=0,(0,h.Z)(G,b);var I=i,H=r,N=n,F=I*I+H*H+N*N;return F<x.aW&&(I=f,H=o,N=e,M<x.Ho&&(I=l,H=_,N=m),(F=I*I+H*H+N*N)<x.aW)?[NaN,NaN]:[(0,x.fv)(H,I)*x.RW,(0,x.ZR)(N/(0,x._b)(F))*x.RW]}},7613:function($,P,t){t.d(P,{m:function(){return m},Z:function(){return o}});var A=t(7620);function M(e){return function(){return e}}var l=t(39695),_=t(49386);function m(e,i,r,n,s,a){if(r){var u=(0,l.mC)(i),p=(0,l.O$)(i),c=n*r;s==null?(s=i+n*l.BZ,a=i-c/2):(s=f(u,s),a=f(u,a),(n>0?s<a:s>a)&&(s+=n*l.BZ));for(var x,g=s;n>0?g>a:g<a;g-=c)x=(0,A.Y1)([u,-p*(0,l.mC)(g),-p*(0,l.O$)(g)]),e.point(x[0],x[1])}}function f(e,i){(i=(0,A.Og)(i))[0]-=e,(0,A.iJ)(i);var r=(0,l.Kh)(-i[1]);return((-i[2]<0?-r:r)+l.BZ-l.Ho)%l.BZ}function o(){var e,i,r=M([0,0]),n=M(90),s=M(6),a={point:function(p,c){e.push(p=i(p,c)),p[0]*=l.RW,p[1]*=l.RW}};function u(){var p=r.apply(this,arguments),c=n.apply(this,arguments)*l.uR,x=s.apply(this,arguments)*l.uR;return e=[],i=(0,_.I)(-p[0]*l.uR,-p[1]*l.uR,0).invert,m(a,c,x,1),p={type:"Polygon",coordinates:[e]},e=i=null,p}return u.center=function(p){return arguments.length?(r=typeof p=="function"?p:M([+p[0],+p[1]]),u):r},u.radius=function(p){return arguments.length?(n=typeof p=="function"?p:M(+p),u):n},u.precision=function(p){return arguments.length?(s=typeof p=="function"?p:M(+p),u):s},u}},87070:function($,P,t){var A=t(97023),M=t(39695);P.Z=(0,A.Z)(function(){return!0},function(l){var _,m=NaN,f=NaN,o=NaN;return{lineStart:function(){l.lineStart(),_=1},point:function(e,i){var r=e>0?M.pi:-M.pi,n=(0,M.Wn)(e-m);(0,M.Wn)(n-M.pi)<M.Ho?(l.point(m,f=(f+i)/2>0?M.ou:-M.ou),l.point(o,f),l.lineEnd(),l.lineStart(),l.point(r,f),l.point(e,f),_=0):o!==r&&n>=M.pi&&((0,M.Wn)(m-o)<M.Ho&&(m-=o*M.Ho),(0,M.Wn)(e-r)<M.Ho&&(e-=r*M.Ho),f=function(s,a,u,p){var c,x,g=(0,M.O$)(s-u);return(0,M.Wn)(g)>M.Ho?(0,M.z4)(((0,M.O$)(a)*(x=(0,M.mC)(p))*(0,M.O$)(u)-(0,M.O$)(p)*(c=(0,M.mC)(a))*(0,M.O$)(s))/(c*x*g)):(a+p)/2}(m,f,e,i),l.point(o,f),l.lineEnd(),l.lineStart(),l.point(r,f),_=0),l.point(m=e,f=i),o=r},lineEnd:function(){l.lineEnd(),m=f=NaN},clean:function(){return 2-_}}},function(l,_,m,f){var o;if(l==null)o=m*M.ou,f.point(-M.pi,o),f.point(0,o),f.point(M.pi,o),f.point(M.pi,0),f.point(M.pi,-o),f.point(0,-o),f.point(-M.pi,-o),f.point(-M.pi,0),f.point(-M.pi,o);else if((0,M.Wn)(l[0]-_[0])>M.Ho){var e=l[0]<_[0]?M.pi:-M.pi;o=m*e/2,f.point(-e,o),f.point(0,o),f.point(e,o)}else f.point(_[0],_[1])},[-M.pi,-M.ou])},85272:function($,P,t){t.d(P,{Z:function(){return M}});var A=t(73182);function M(){var l,_=[];return{point:function(m,f,o){l.push([m,f,o])},lineStart:function(){_.push(l=[])},lineEnd:A.Z,rejoin:function(){_.length>1&&_.push(_.pop().concat(_.shift()))},result:function(){var m=_;return _=[],l=null,m}}}},1457:function($,P,t){t.d(P,{Z:function(){return f}});var A=t(7620),M=t(7613),l=t(39695),_=t(67108),m=t(97023);function f(o){var e=(0,l.mC)(o),i=6*l.uR,r=e>0,n=(0,l.Wn)(e)>l.Ho;function s(p,c){return(0,l.mC)(p)*(0,l.mC)(c)>e}function a(p,c,x){var g=(0,A.Og)(p),h=(0,A.Og)(c),b=[1,0,0],v=(0,A.T5)(g,h),y=(0,A.j9)(v,v),w=v[0],d=y-w*w;if(!d)return!x&&p;var S=e*y/d,T=-e*w/d,E=(0,A.T5)(b,v),C=(0,A.T)(b,S),L=(0,A.T)(v,T);(0,A.s0)(C,L);var O=E,z=(0,A.j9)(C,O),G=(0,A.j9)(O,O),I=z*z-G*((0,A.j9)(C,C)-1);if(!(I<0)){var H=(0,l._b)(I),N=(0,A.T)(O,(-z-H)/G);if((0,A.s0)(N,C),N=(0,A.Y1)(N),!x)return N;var F,V=p[0],W=c[0],te=p[1],Q=c[1];W<V&&(F=V,V=W,W=F);var X=W-V,q=(0,l.Wn)(X-l.pi)<l.Ho;if(!q&&Q<te&&(F=te,te=Q,Q=F),q||X<l.Ho?q?te+Q>0^N[1]<((0,l.Wn)(N[0]-V)<l.Ho?te:Q):te<=N[1]&&N[1]<=Q:X>l.pi^(V<=N[0]&&N[0]<=W)){var Z=(0,A.T)(O,(-z+H)/G);return(0,A.s0)(Z,C),[N,(0,A.Y1)(Z)]}}}function u(p,c){var x=r?o:l.pi-o,g=0;return p<-x?g|=1:p>x&&(g|=2),c<-x?g|=4:c>x&&(g|=8),g}return(0,m.Z)(s,function(p){var c,x,g,h,b;return{lineStart:function(){h=g=!1,b=1},point:function(v,y){var w,d=[v,y],S=s(v,y),T=r?S?0:u(v,y):S?u(v+(v<0?l.pi:-l.pi),y):0;if(!c&&(h=g=S)&&p.lineStart(),S!==g&&(!(w=a(c,d))||(0,_.Z)(c,w)||(0,_.Z)(d,w))&&(d[2]=1),S!==g)b=0,S?(p.lineStart(),w=a(d,c),p.point(w[0],w[1])):(w=a(c,d),p.point(w[0],w[1],2),p.lineEnd()),c=w;else if(n&&c&&r^S){var E;T&x||!(E=a(d,c,!0))||(b=0,r?(p.lineStart(),p.point(E[0][0],E[0][1]),p.point(E[1][0],E[1][1]),p.lineEnd()):(p.point(E[1][0],E[1][1]),p.lineEnd(),p.lineStart(),p.point(E[0][0],E[0][1],3)))}!S||c&&(0,_.Z)(c,d)||p.point(d[0],d[1]),c=d,g=S,x=T},lineEnd:function(){g&&p.lineEnd(),c=null},clean:function(){return b|(h&&g)<<1}}},function(p,c,x,g){(0,M.m)(g,o,i,x,p,c)},r?[0,-o]:[-l.pi,o-l.pi])}},97023:function($,P,t){t.d(P,{Z:function(){return f}});var A=t(85272),M=t(46225),l=t(39695),_=t(23071),m=t(33064);function f(i,r,n,s){return function(a){var u,p,c,x=r(a),g=(0,A.Z)(),h=r(g),b=!1,v={point:y,lineStart:d,lineEnd:S,polygonStart:function(){v.point=T,v.lineStart=E,v.lineEnd=C,p=[],u=[]},polygonEnd:function(){v.point=y,v.lineStart=d,v.lineEnd=S,p=(0,m.TS)(p);var L=(0,_.Z)(u,s);p.length?(b||(a.polygonStart(),b=!0),(0,M.Z)(p,e,L,n,a)):L&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),p=u=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function y(L,O){i(L,O)&&a.point(L,O)}function w(L,O){x.point(L,O)}function d(){v.point=w,x.lineStart()}function S(){v.point=y,x.lineEnd()}function T(L,O){c.push([L,O]),h.point(L,O)}function E(){h.lineStart(),c=[]}function C(){T(c[0][0],c[0][1]),h.lineEnd();var L,O,z,G,I=h.clean(),H=g.result(),N=H.length;if(c.pop(),u.push(c),c=null,N)if(1&I){if((O=(z=H[0]).length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart(),L=0;L<O;++L)a.point((G=z[L])[0],G[1]);a.lineEnd()}}else N>1&&2&I&&H.push(H.pop().concat(H.shift())),p.push(H.filter(o))}return v}}function o(i){return i.length>1}function e(i,r){return((i=i.x)[0]<0?i[1]-l.ou-l.Ho:l.ou-i[1])-((r=r.x)[0]<0?r[1]-l.ou-l.Ho:l.ou-r[1])}},87605:function($,P,t){t.d(P,{Z:function(){return o}});var A=t(39695),M=t(85272),l=t(46225),_=t(33064),m=1e9,f=-m;function o(e,i,r,n){function s(x,g){return e<=x&&x<=r&&i<=g&&g<=n}function a(x,g,h,b){var v=0,y=0;if(x==null||(v=u(x,h))!==(y=u(g,h))||c(x,g)<0^h>0)do b.point(v===0||v===3?e:r,v>1?n:i);while((v=(v+h+4)%4)!==y);else b.point(g[0],g[1])}function u(x,g){return(0,A.Wn)(x[0]-e)<A.Ho?g>0?0:3:(0,A.Wn)(x[0]-r)<A.Ho?g>0?2:1:(0,A.Wn)(x[1]-i)<A.Ho?g>0?1:0:g>0?3:2}function p(x,g){return c(x.x,g.x)}function c(x,g){var h=u(x,1),b=u(g,1);return h!==b?h-b:h===0?g[1]-x[1]:h===1?x[0]-g[0]:h===2?x[1]-g[1]:g[0]-x[0]}return function(x){var g,h,b,v,y,w,d,S,T,E,C,L=x,O=(0,M.Z)(),z={point:G,lineStart:function(){z.point=I,h&&h.push(b=[]),E=!0,T=!1,d=S=NaN},lineEnd:function(){g&&(I(v,y),w&&T&&O.rejoin(),g.push(O.result())),z.point=G,T&&L.lineEnd()},polygonStart:function(){L=O,g=[],h=[],C=!0},polygonEnd:function(){var H=function(){for(var V=0,W=0,te=h.length;W<te;++W)for(var Q,X,q=h[W],Z=1,J=q.length,ne=q[0],re=ne[0],ae=ne[1];Z<J;++Z)Q=re,X=ae,re=(ne=q[Z])[0],ae=ne[1],X<=n?ae>n&&(re-Q)*(n-X)>(ae-X)*(e-Q)&&++V:ae<=n&&(re-Q)*(n-X)<(ae-X)*(e-Q)&&--V;return V}(),N=C&&H,F=(g=(0,_.TS)(g)).length;(N||F)&&(x.polygonStart(),N&&(x.lineStart(),a(null,null,1,x),x.lineEnd()),F&&(0,l.Z)(g,p,H,a,x),x.polygonEnd()),L=x,g=h=b=null}};function G(H,N){s(H,N)&&L.point(H,N)}function I(H,N){var F=s(H,N);if(h&&b.push([H,N]),E)v=H,y=N,w=F,E=!1,F&&(L.lineStart(),L.point(H,N));else if(F&&T)L.point(H,N);else{var V=[d=Math.max(f,Math.min(m,d)),S=Math.max(f,Math.min(m,S))],W=[H=Math.max(f,Math.min(m,H)),N=Math.max(f,Math.min(m,N))];(function(te,Q,X,q,Z,J){var ne,re=te[0],ae=te[1],ue=0,he=1,de=Q[0]-re,xe=Q[1]-ae;if(ne=X-re,de||!(ne>0)){if(ne/=de,de<0){if(ne<ue)return;ne<he&&(he=ne)}else if(de>0){if(ne>he)return;ne>ue&&(ue=ne)}if(ne=Z-re,de||!(ne<0)){if(ne/=de,de<0){if(ne>he)return;ne>ue&&(ue=ne)}else if(de>0){if(ne<ue)return;ne<he&&(he=ne)}if(ne=q-ae,xe||!(ne>0)){if(ne/=xe,xe<0){if(ne<ue)return;ne<he&&(he=ne)}else if(xe>0){if(ne>he)return;ne>ue&&(ue=ne)}if(ne=J-ae,xe||!(ne<0)){if(ne/=xe,xe<0){if(ne>he)return;ne>ue&&(ue=ne)}else if(xe>0){if(ne<ue)return;ne<he&&(he=ne)}return ue>0&&(te[0]=re+ue*de,te[1]=ae+ue*xe),he<1&&(Q[0]=re+he*de,Q[1]=ae+he*xe),!0}}}}})(V,W,e,i,r,n)?(T||(L.lineStart(),L.point(V[0],V[1])),L.point(W[0],W[1]),F||L.lineEnd(),C=!1):F&&(L.lineStart(),L.point(H,N),C=!1)}d=H,S=N,T=F}return z}}},46225:function($,P,t){t.d(P,{Z:function(){return _}});var A=t(67108),M=t(39695);function l(f,o,e,i){this.x=f,this.z=o,this.o=e,this.e=i,this.v=!1,this.n=this.p=null}function _(f,o,e,i,r){var n,s,a=[],u=[];if(f.forEach(function(b){if(!((v=b.length-1)<=0)){var v,y,w=b[0],d=b[v];if((0,A.Z)(w,d)){if(!w[2]&&!d[2]){for(r.lineStart(),n=0;n<v;++n)r.point((w=b[n])[0],w[1]);return void r.lineEnd()}d[0]+=2*M.Ho}a.push(y=new l(w,b,null,!0)),u.push(y.o=new l(w,null,y,!1)),a.push(y=new l(d,b,null,!1)),u.push(y.o=new l(d,null,y,!0))}}),a.length){for(u.sort(o),m(a),m(u),n=0,s=u.length;n<s;++n)u[n].e=e=!e;for(var p,c,x=a[0];;){for(var g=x,h=!0;g.v;)if((g=g.n)===x)return;p=g.z,r.lineStart();do{if(g.v=g.o.v=!0,g.e){if(h)for(n=0,s=p.length;n<s;++n)r.point((c=p[n])[0],c[1]);else i(g.x,g.n.x,1,r);g=g.n}else{if(h)for(p=g.p.z,n=p.length-1;n>=0;--n)r.point((c=p[n])[0],c[1]);else i(g.x,g.p.x,-1,r);g=g.p}p=(g=g.o).z,h=!h}while(!g.v);r.lineEnd()}}}function m(f){if(o=f.length){for(var o,e,i=0,r=f[0];++i<o;)r.n=e=f[i],e.p=r,r=e;r.n=e=f[0],e.p=r}}},96059:function($,P,t){function A(M,l){function _(m,f){return m=M(m,f),l(m[0],m[1])}return M.invert&&l.invert&&(_.invert=function(m,f){return(m=l.invert(m,f))&&M.invert(m[0],m[1])}),_}t.d(P,{Z:function(){return A}})},8593:function($,P,t){function A(M){return M}t.d(P,{Z:function(){return A}})},27362:function($,P,t){t.r(P),t.d(P,{geoAlbers:function(){return mt},geoAlbersUsa:function(){return kt},geoArea:function(){return A.ZP},geoAzimuthalEqualArea:function(){return ht.Z},geoAzimuthalEqualAreaRaw:function(){return ht.l},geoAzimuthalEquidistant:function(){return pt.Z},geoAzimuthalEquidistantRaw:function(){return pt.N},geoBounds:function(){return M.Z},geoCentroid:function(){return l.Z},geoCircle:function(){return _.Z},geoClipAntimeridian:function(){return m.Z},geoClipCircle:function(){return f.Z},geoClipExtent:function(){return e},geoClipRectangle:function(){return o.Z},geoConicConformal:function(){return Yt},geoConicConformalRaw:function(){return Wt},geoConicEqualArea:function(){return dt},geoConicEqualAreaRaw:function(){return gt},geoConicEquidistant:function(){return Bn},geoConicEquidistantRaw:function(){return Tn},geoContains:function(){return H},geoDistance:function(){return S},geoEqualEarth:function(){return En},geoEqualEarthRaw:function(){return yn},geoEquirectangular:function(){return en.Z},geoEquirectangularRaw:function(){return en.k},geoGnomonic:function(){return Sn.Z},geoGnomonicRaw:function(){return Sn.M},geoGraticule:function(){return W},geoGraticule10:function(){return te},geoIdentity:function(){return _n},geoInterpolate:function(){return J.Z},geoLength:function(){return y},geoMercator:function(){return Nt},geoMercatorRaw:function(){return Ft},geoNaturalEarth1:function(){return Pn.Z},geoNaturalEarth1Raw:function(){return Pn.K},geoOrthographic:function(){return tr.Z},geoOrthographicRaw:function(){return tr.I},geoPath:function(){return Fe},geoProjection:function(){return rt.Z},geoProjectionMutator:function(){return rt.r},geoRotation:function(){return wt.Z},geoStereographic:function(){return ir},geoStereographicRaw:function(){return lr},geoStream:function(){return c.Z},geoTransform:function(){return Nn.Z},geoTransverseMercator:function(){return vr},geoTransverseMercatorRaw:function(){return $n}});var A=t(97860),M=t(77338),l=t(66624),_=t(7613),m=t(87070),f=t(1457),o=t(87605);function e(){var jt,rn,fn,xn=0,Ln=0,Xn=960,Un=500;return fn={stream:function(Hn){return jt&&rn===Hn?jt:jt=(0,o.Z)(xn,Ln,Xn,Un)(rn=Hn)},extent:function(Hn){return arguments.length?(xn=+Hn[0][0],Ln=+Hn[0][1],Xn=+Hn[1][0],Un=+Hn[1][1],jt=rn=null,fn):[[xn,Ln],[Xn,Un]]}}}var i,r,n,s=t(23071),a=t(33940),u=t(39695),p=t(73182),c=t(72736),x=(0,a.Z)(),g={sphere:p.Z,point:p.Z,lineStart:function(){g.point=b,g.lineEnd=h},lineEnd:p.Z,polygonStart:p.Z,polygonEnd:p.Z};function h(){g.point=g.lineEnd=p.Z}function b(jt,rn){jt*=u.uR,rn*=u.uR,i=jt,r=(0,u.O$)(rn),n=(0,u.mC)(rn),g.point=v}function v(jt,rn){jt*=u.uR,rn*=u.uR;var fn=(0,u.O$)(rn),xn=(0,u.mC)(rn),Ln=(0,u.Wn)(jt-i),Xn=(0,u.mC)(Ln),Un=xn*(0,u.O$)(Ln),Hn=n*fn-r*xn*Xn,Kn=r*fn+n*xn*Xn;x.add((0,u.fv)((0,u._b)(Un*Un+Hn*Hn),Kn)),i=jt,r=fn,n=xn}function y(jt){return x.reset(),(0,c.Z)(jt,g),+x}var w=[null,null],d={type:"LineString",coordinates:w};function S(jt,rn){return w[0]=jt,w[1]=rn,y(d)}var T={Feature:function(jt,rn){return C(jt.geometry,rn)},FeatureCollection:function(jt,rn){for(var fn=jt.features,xn=-1,Ln=fn.length;++xn<Ln;)if(C(fn[xn].geometry,rn))return!0;return!1}},E={Sphere:function(){return!0},Point:function(jt,rn){return L(jt.coordinates,rn)},MultiPoint:function(jt,rn){for(var fn=jt.coordinates,xn=-1,Ln=fn.length;++xn<Ln;)if(L(fn[xn],rn))return!0;return!1},LineString:function(jt,rn){return O(jt.coordinates,rn)},MultiLineString:function(jt,rn){for(var fn=jt.coordinates,xn=-1,Ln=fn.length;++xn<Ln;)if(O(fn[xn],rn))return!0;return!1},Polygon:function(jt,rn){return z(jt.coordinates,rn)},MultiPolygon:function(jt,rn){for(var fn=jt.coordinates,xn=-1,Ln=fn.length;++xn<Ln;)if(z(fn[xn],rn))return!0;return!1},GeometryCollection:function(jt,rn){for(var fn=jt.geometries,xn=-1,Ln=fn.length;++xn<Ln;)if(C(fn[xn],rn))return!0;return!1}};function C(jt,rn){return!(!jt||!E.hasOwnProperty(jt.type))&&E[jt.type](jt,rn)}function L(jt,rn){return S(jt,rn)===0}function O(jt,rn){for(var fn,xn,Ln,Xn=0,Un=jt.length;Xn<Un;Xn++){if((xn=S(jt[Xn],rn))===0||Xn>0&&(Ln=S(jt[Xn],jt[Xn-1]))>0&&fn<=Ln&&xn<=Ln&&(fn+xn-Ln)*(1-Math.pow((fn-xn)/Ln,2))<u.aW*Ln)return!0;fn=xn}return!1}function z(jt,rn){return!!(0,s.Z)(jt.map(G),I(rn))}function G(jt){return(jt=jt.map(I)).pop(),jt}function I(jt){return[jt[0]*u.uR,jt[1]*u.uR]}function H(jt,rn){return(jt&&T.hasOwnProperty(jt.type)?T[jt.type]:C)(jt,rn)}var N=t(33064);function F(jt,rn,fn){var xn=(0,N.w6)(jt,rn-u.Ho,fn).concat(rn);return function(Ln){return xn.map(function(Xn){return[Ln,Xn]})}}function V(jt,rn,fn){var xn=(0,N.w6)(jt,rn-u.Ho,fn).concat(rn);return function(Ln){return xn.map(function(Xn){return[Xn,Ln]})}}function W(){var jt,rn,fn,xn,Ln,Xn,Un,Hn,Kn,qt,On,Et,Xt=10,nn=Xt,An=90,Cn=360,Rn=2.5;function gn(){return{type:"MultiLineString",coordinates:$t()}}function $t(){return(0,N.w6)((0,u.mD)(xn/An)*An,fn,An).map(On).concat((0,N.w6)((0,u.mD)(Hn/Cn)*Cn,Un,Cn).map(Et)).concat((0,N.w6)((0,u.mD)(rn/Xt)*Xt,jt,Xt).filter(function(Qt){return(0,u.Wn)(Qt%An)>u.Ho}).map(Kn)).concat((0,N.w6)((0,u.mD)(Xn/nn)*nn,Ln,nn).filter(function(Qt){return(0,u.Wn)(Qt%Cn)>u.Ho}).map(qt))}return gn.lines=function(){return $t().map(function(Qt){return{type:"LineString",coordinates:Qt}})},gn.outline=function(){return{type:"Polygon",coordinates:[On(xn).concat(Et(Un).slice(1),On(fn).reverse().slice(1),Et(Hn).reverse().slice(1))]}},gn.extent=function(Qt){return arguments.length?gn.extentMajor(Qt).extentMinor(Qt):gn.extentMinor()},gn.extentMajor=function(Qt){return arguments.length?(xn=+Qt[0][0],fn=+Qt[1][0],Hn=+Qt[0][1],Un=+Qt[1][1],xn>fn&&(Qt=xn,xn=fn,fn=Qt),Hn>Un&&(Qt=Hn,Hn=Un,Un=Qt),gn.precision(Rn)):[[xn,Hn],[fn,Un]]},gn.extentMinor=function(Qt){return arguments.length?(rn=+Qt[0][0],jt=+Qt[1][0],Xn=+Qt[0][1],Ln=+Qt[1][1],rn>jt&&(Qt=rn,rn=jt,jt=Qt),Xn>Ln&&(Qt=Xn,Xn=Ln,Ln=Qt),gn.precision(Rn)):[[rn,Xn],[jt,Ln]]},gn.step=function(Qt){return arguments.length?gn.stepMajor(Qt).stepMinor(Qt):gn.stepMinor()},gn.stepMajor=function(Qt){return arguments.length?(An=+Qt[0],Cn=+Qt[1],gn):[An,Cn]},gn.stepMinor=function(Qt){return arguments.length?(Xt=+Qt[0],nn=+Qt[1],gn):[Xt,nn]},gn.precision=function(Qt){return arguments.length?(Rn=+Qt,Kn=F(Xn,Ln,90),qt=V(rn,jt,Rn),On=F(Hn,Un,90),Et=V(xn,fn,Rn),gn):Rn},gn.extentMajor([[-180,-90+u.Ho],[180,90-u.Ho]]).extentMinor([[-180,-80-u.Ho],[180,80+u.Ho]])}function te(){return W()()}var Q,X,q,Z,J=t(83074),ne=t(8593),re=(0,a.Z)(),ae=(0,a.Z)(),ue={point:p.Z,lineStart:p.Z,lineEnd:p.Z,polygonStart:function(){ue.lineStart=he,ue.lineEnd=me},polygonEnd:function(){ue.lineStart=ue.lineEnd=ue.point=p.Z,re.add((0,u.Wn)(ae)),ae.reset()},result:function(){var jt=re/2;return re.reset(),jt}};function he(){ue.point=de}function de(jt,rn){ue.point=xe,Q=q=jt,X=Z=rn}function xe(jt,rn){ae.add(Z*jt-q*rn),q=jt,Z=rn}function me(){xe(Q,X)}var ve,Le,Ae,we,se=ue,oe=t(3559),fe=0,Se=0,Me=0,be=0,Ie=0,Be=0,ce=0,Te=0,ye=0,Pe={point:Re,lineStart:ze,lineEnd:Je,polygonStart:function(){Pe.lineStart=lt,Pe.lineEnd=et},polygonEnd:function(){Pe.point=Re,Pe.lineStart=ze,Pe.lineEnd=Je},result:function(){var jt=ye?[ce/ye,Te/ye]:Be?[be/Be,Ie/Be]:Me?[fe/Me,Se/Me]:[NaN,NaN];return fe=Se=Me=be=Ie=Be=ce=Te=ye=0,jt}};function Re(jt,rn){fe+=jt,Se+=rn,++Me}function ze(){Pe.point=He}function He(jt,rn){Pe.point=We,Re(Ae=jt,we=rn)}function We(jt,rn){var fn=jt-Ae,xn=rn-we,Ln=(0,u._b)(fn*fn+xn*xn);be+=Ln*(Ae+jt)/2,Ie+=Ln*(we+rn)/2,Be+=Ln,Re(Ae=jt,we=rn)}function Je(){Pe.point=Re}function lt(){Pe.point=yt}function et(){_t(ve,Le)}function yt(jt,rn){Pe.point=_t,Re(ve=Ae=jt,Le=we=rn)}function _t(jt,rn){var fn=jt-Ae,xn=rn-we,Ln=(0,u._b)(fn*fn+xn*xn);be+=Ln*(Ae+jt)/2,Ie+=Ln*(we+rn)/2,Be+=Ln,ce+=(Ln=we*jt-Ae*rn)*(Ae+jt),Te+=Ln*(we+rn),ye+=3*Ln,Re(Ae=jt,we=rn)}var xt=Pe;function at(jt){this._context=jt}at.prototype={_radius:4.5,pointRadius:function(jt){return this._radius=jt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(jt,rn){switch(this._point){case 0:this._context.moveTo(jt,rn),this._point=1;break;case 1:this._context.lineTo(jt,rn);break;default:this._context.moveTo(jt+this._radius,rn),this._context.arc(jt,rn,this._radius,0,u.BZ)}},result:p.Z};var ot,At,Ct,zt,St,qe=(0,a.Z)(),Xe={point:p.Z,lineStart:function(){Xe.point=Ve},lineEnd:function(){ot&&Ze(At,Ct),Xe.point=p.Z},polygonStart:function(){ot=!0},polygonEnd:function(){ot=null},result:function(){var jt=+qe;return qe.reset(),jt}};function Ve(jt,rn){Xe.point=Ze,At=zt=jt,Ct=St=rn}function Ze(jt,rn){zt-=jt,St-=rn,qe.add((0,u._b)(zt*zt+St*St)),zt=jt,St=rn}var st=Xe;function nt(){this._string=[]}function De(jt){return"m0,"+jt+"a"+jt+","+jt+" 0 1,1 0,"+-2*jt+"a"+jt+","+jt+" 0 1,1 0,"+2*jt+"z"}function Fe(jt,rn){var fn,xn,Ln=4.5;function Xn(Un){return Un&&(typeof Ln=="function"&&xn.pointRadius(+Ln.apply(this,arguments)),(0,c.Z)(Un,fn(xn))),xn.result()}return Xn.area=function(Un){return(0,c.Z)(Un,fn(se)),se.result()},Xn.measure=function(Un){return(0,c.Z)(Un,fn(st)),st.result()},Xn.bounds=function(Un){return(0,c.Z)(Un,fn(oe.Z)),oe.Z.result()},Xn.centroid=function(Un){return(0,c.Z)(Un,fn(xt)),xt.result()},Xn.projection=function(Un){return arguments.length?(fn=Un==null?(jt=null,ne.Z):(jt=Un).stream,Xn):jt},Xn.context=function(Un){return arguments.length?(xn=Un==null?(rn=null,new nt):new at(rn=Un),typeof Ln!="function"&&xn.pointRadius(Ln),Xn):rn},Xn.pointRadius=function(Un){return arguments.length?(Ln=typeof Un=="function"?Un:(xn.pointRadius(+Un),+Un),Xn):Ln},Xn.projection(jt).context(rn)}nt.prototype={_radius:4.5,_circle:De(4.5),pointRadius:function(jt){return(jt=+jt)!==this._radius&&(this._radius=jt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(jt,rn){switch(this._point){case 0:this._string.push("M",jt,",",rn),this._point=1;break;case 1:this._string.push("L",jt,",",rn);break;default:this._circle==null&&(this._circle=De(this._radius)),this._string.push("M",jt,",",rn,this._circle)}},result:function(){if(this._string.length){var jt=this._string.join("");return this._string=[],jt}return null}};var rt=t(15002);function tt(jt){var rn=0,fn=u.pi/3,xn=(0,rt.r)(jt),Ln=xn(rn,fn);return Ln.parallels=function(Xn){return arguments.length?xn(rn=Xn[0]*u.uR,fn=Xn[1]*u.uR):[rn*u.RW,fn*u.RW]},Ln}function gt(jt,rn){var fn=(0,u.O$)(jt),xn=(fn+(0,u.O$)(rn))/2;if((0,u.Wn)(xn)<u.Ho)return function(Hn){var Kn=(0,u.mC)(Hn);function qt(On,Et){return[On*Kn,(0,u.O$)(Et)/Kn]}return qt.invert=function(On,Et){return[On/Kn,(0,u.ZR)(Et*Kn)]},qt}(jt);var Ln=1+fn*(2*xn-fn),Xn=(0,u._b)(Ln)/xn;function Un(Hn,Kn){var qt=(0,u._b)(Ln-2*xn*(0,u.O$)(Kn))/xn;return[qt*(0,u.O$)(Hn*=xn),Xn-qt*(0,u.mC)(Hn)]}return Un.invert=function(Hn,Kn){var qt=Xn-Kn,On=(0,u.fv)(Hn,(0,u.Wn)(qt))*(0,u.Xx)(qt);return qt*xn<0&&(On-=u.pi*(0,u.Xx)(Hn)*(0,u.Xx)(qt)),[On/xn,(0,u.ZR)((Ln-(Hn*Hn+qt*qt)*xn*xn)/(2*xn))]},Un}function dt(){return tt(gt).scale(155.424).center([0,33.6442])}function mt(){return dt().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ft=t(47589);function kt(){var jt,rn,fn,xn,Ln,Xn,Un=mt(),Hn=dt().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Kn=dt().rotate([157,0]).center([-3,19.9]).parallels([8,18]),qt={point:function(Xt,nn){Xn=[Xt,nn]}};function On(Xt){var nn=Xt[0],An=Xt[1];return Xn=null,fn.point(nn,An),Xn||(xn.point(nn,An),Xn)||(Ln.point(nn,An),Xn)}function Et(){return jt=rn=null,On}return On.invert=function(Xt){var nn=Un.scale(),An=Un.translate(),Cn=(Xt[0]-An[0])/nn,Rn=(Xt[1]-An[1])/nn;return(Rn>=.12&&Rn<.234&&Cn>=-.425&&Cn<-.214?Hn:Rn>=.166&&Rn<.234&&Cn>=-.214&&Cn<-.115?Kn:Un).invert(Xt)},On.stream=function(Xt){return jt&&rn===Xt?jt:(nn=[Un.stream(rn=Xt),Hn.stream(Xt),Kn.stream(Xt)],An=nn.length,jt={point:function(Cn,Rn){for(var gn=-1;++gn<An;)nn[gn].point(Cn,Rn)},sphere:function(){for(var Cn=-1;++Cn<An;)nn[Cn].sphere()},lineStart:function(){for(var Cn=-1;++Cn<An;)nn[Cn].lineStart()},lineEnd:function(){for(var Cn=-1;++Cn<An;)nn[Cn].lineEnd()},polygonStart:function(){for(var Cn=-1;++Cn<An;)nn[Cn].polygonStart()},polygonEnd:function(){for(var Cn=-1;++Cn<An;)nn[Cn].polygonEnd()}});var nn,An},On.precision=function(Xt){return arguments.length?(Un.precision(Xt),Hn.precision(Xt),Kn.precision(Xt),Et()):Un.precision()},On.scale=function(Xt){return arguments.length?(Un.scale(Xt),Hn.scale(.35*Xt),Kn.scale(Xt),On.translate(Un.translate())):Un.scale()},On.translate=function(Xt){if(!arguments.length)return Un.translate();var nn=Un.scale(),An=+Xt[0],Cn=+Xt[1];return fn=Un.translate(Xt).clipExtent([[An-.455*nn,Cn-.238*nn],[An+.455*nn,Cn+.238*nn]]).stream(qt),xn=Hn.translate([An-.307*nn,Cn+.201*nn]).clipExtent([[An-.425*nn+u.Ho,Cn+.12*nn+u.Ho],[An-.214*nn-u.Ho,Cn+.234*nn-u.Ho]]).stream(qt),Ln=Kn.translate([An-.205*nn,Cn+.212*nn]).clipExtent([[An-.214*nn+u.Ho,Cn+.166*nn+u.Ho],[An-.115*nn-u.Ho,Cn+.234*nn-u.Ho]]).stream(qt),Et()},On.fitExtent=function(Xt,nn){return(0,ft.qg)(On,Xt,nn)},On.fitSize=function(Xt,nn){return(0,ft.mF)(On,Xt,nn)},On.fitWidth=function(Xt,nn){return(0,ft.V6)(On,Xt,nn)},On.fitHeight=function(Xt,nn){return(0,ft.rf)(On,Xt,nn)},On.scale(1070)}var ht=t(12956),pt=t(17889),wt=t(49386);function Ft(jt,rn){return[jt,(0,u.cM)((0,u.OR)((u.ou+rn)/2))]}function Nt(){return Gt(Ft).scale(961/u.BZ)}function Gt(jt){var rn,fn,xn,Ln=(0,rt.Z)(jt),Xn=Ln.center,Un=Ln.scale,Hn=Ln.translate,Kn=Ln.clipExtent,qt=null;function On(){var Et=u.pi*Un(),Xt=Ln((0,wt.Z)(Ln.rotate()).invert([0,0]));return Kn(qt==null?[[Xt[0]-Et,Xt[1]-Et],[Xt[0]+Et,Xt[1]+Et]]:jt===Ft?[[Math.max(Xt[0]-Et,qt),rn],[Math.min(Xt[0]+Et,fn),xn]]:[[qt,Math.max(Xt[1]-Et,rn)],[fn,Math.min(Xt[1]+Et,xn)]])}return Ln.scale=function(Et){return arguments.length?(Un(Et),On()):Un()},Ln.translate=function(Et){return arguments.length?(Hn(Et),On()):Hn()},Ln.center=function(Et){return arguments.length?(Xn(Et),On()):Xn()},Ln.clipExtent=function(Et){return arguments.length?(Et==null?qt=rn=fn=xn=null:(qt=+Et[0][0],rn=+Et[0][1],fn=+Et[1][0],xn=+Et[1][1]),On()):qt==null?null:[[qt,rn],[fn,xn]]},On()}function an(jt){return(0,u.OR)((u.ou+jt)/2)}function Wt(jt,rn){var fn=(0,u.mC)(jt),xn=jt===rn?(0,u.O$)(jt):(0,u.cM)(fn/(0,u.mC)(rn))/(0,u.cM)(an(rn)/an(jt)),Ln=fn*(0,u.sQ)(an(jt),xn)/xn;if(!xn)return Ft;function Xn(Un,Hn){Ln>0?Hn<-u.ou+u.Ho&&(Hn=-u.ou+u.Ho):Hn>u.ou-u.Ho&&(Hn=u.ou-u.Ho);var Kn=Ln/(0,u.sQ)(an(Hn),xn);return[Kn*(0,u.O$)(xn*Un),Ln-Kn*(0,u.mC)(xn*Un)]}return Xn.invert=function(Un,Hn){var Kn=Ln-Hn,qt=(0,u.Xx)(xn)*(0,u._b)(Un*Un+Kn*Kn),On=(0,u.fv)(Un,(0,u.Wn)(Kn))*(0,u.Xx)(Kn);return Kn*xn<0&&(On-=u.pi*(0,u.Xx)(Un)*(0,u.Xx)(Kn)),[On/xn,2*(0,u.z4)((0,u.sQ)(Ln/qt,1/xn))-u.ou]},Xn}function Yt(){return tt(Wt).scale(109.5).parallels([30,30])}Ft.invert=function(jt,rn){return[jt,2*(0,u.z4)((0,u.Qq)(rn))-u.ou]};var en=t(97492);function Tn(jt,rn){var fn=(0,u.mC)(jt),xn=jt===rn?(0,u.O$)(jt):(fn-(0,u.mC)(rn))/(rn-jt),Ln=fn/xn+jt;if((0,u.Wn)(xn)<u.Ho)return en.k;function Xn(Un,Hn){var Kn=Ln-Hn,qt=xn*Un;return[Kn*(0,u.O$)(qt),Ln-Kn*(0,u.mC)(qt)]}return Xn.invert=function(Un,Hn){var Kn=Ln-Hn,qt=(0,u.fv)(Un,(0,u.Wn)(Kn))*(0,u.Xx)(Kn);return Kn*xn<0&&(qt-=u.pi*(0,u.Xx)(Un)*(0,u.Xx)(Kn)),[qt/xn,Ln-(0,u.Xx)(xn)*(0,u._b)(Un*Un+Kn*Kn)]},Xn}function Bn(){return tt(Tn).scale(131.154).center([0,13.9389])}var mn=1.340264,Kt=-.081106,cn=893e-6,tn=.003796,un=(0,u._b)(3)/2;function yn(jt,rn){var fn=(0,u.ZR)(un*(0,u.O$)(rn)),xn=fn*fn,Ln=xn*xn*xn;return[jt*(0,u.mC)(fn)/(un*(mn+3*Kt*xn+Ln*(7*cn+9*tn*xn))),fn*(mn+Kt*xn+Ln*(cn+tn*xn))]}function En(){return(0,rt.Z)(yn).scale(177.158)}yn.invert=function(jt,rn){for(var fn,xn=rn,Ln=xn*xn,Xn=Ln*Ln*Ln,Un=0;Un<12&&(Xn=(Ln=(xn-=fn=(xn*(mn+Kt*Ln+Xn*(cn+tn*Ln))-rn)/(mn+3*Kt*Ln+Xn*(7*cn+9*tn*Ln)))*xn)*Ln*Ln,!((0,u.Wn)(fn)<u.aW));++Un);return[un*jt*(mn+3*Kt*Ln+Xn*(7*cn+9*tn*Ln))/(0,u.mC)(xn),(0,u.ZR)((0,u.O$)(xn)/un)]};var Sn=t(98936),Nn=t(64684);function _n(){var jt,rn,fn,xn,Ln,Xn,Un,Hn=1,Kn=0,qt=0,On=1,Et=1,Xt=0,nn=null,An=1,Cn=1,Rn=(0,Nn.l)({point:function(hn,vn){var Fn=Qt([hn,vn]);this.stream.point(Fn[0],Fn[1])}}),gn=ne.Z;function $t(){return An=Hn*On,Cn=Hn*Et,Xn=Un=null,Qt}function Qt(hn){var vn=hn[0]*An,Fn=hn[1]*Cn;if(Xt){var In=Fn*jt-vn*rn;vn=vn*jt+Fn*rn,Fn=In}return[vn+Kn,Fn+qt]}return Qt.invert=function(hn){var vn=hn[0]-Kn,Fn=hn[1]-qt;if(Xt){var In=Fn*jt+vn*rn;vn=vn*jt-Fn*rn,Fn=In}return[vn/An,Fn/Cn]},Qt.stream=function(hn){return Xn&&Un===hn?Xn:Xn=Rn(gn(Un=hn))},Qt.postclip=function(hn){return arguments.length?(gn=hn,nn=fn=xn=Ln=null,$t()):gn},Qt.clipExtent=function(hn){return arguments.length?(gn=hn==null?(nn=fn=xn=Ln=null,ne.Z):(0,o.Z)(nn=+hn[0][0],fn=+hn[0][1],xn=+hn[1][0],Ln=+hn[1][1]),$t()):nn==null?null:[[nn,fn],[xn,Ln]]},Qt.scale=function(hn){return arguments.length?(Hn=+hn,$t()):Hn},Qt.translate=function(hn){return arguments.length?(Kn=+hn[0],qt=+hn[1],$t()):[Kn,qt]},Qt.angle=function(hn){return arguments.length?(Xt=hn%360*u.uR,rn=(0,u.O$)(Xt),jt=(0,u.mC)(Xt),$t()):Xt*u.RW},Qt.reflectX=function(hn){return arguments.length?(On=hn?-1:1,$t()):On<0},Qt.reflectY=function(hn){return arguments.length?(Et=hn?-1:1,$t()):Et<0},Qt.fitExtent=function(hn,vn){return(0,ft.qg)(Qt,hn,vn)},Qt.fitSize=function(hn,vn){return(0,ft.mF)(Qt,hn,vn)},Qt.fitWidth=function(hn,vn){return(0,ft.V6)(Qt,hn,vn)},Qt.fitHeight=function(hn,vn){return(0,ft.rf)(Qt,hn,vn)},Qt}var Pn=t(26867),tr=t(57962),ur=t(25382);function lr(jt,rn){var fn=(0,u.mC)(rn),xn=1+(0,u.mC)(jt)*fn;return[fn*(0,u.O$)(jt)/xn,(0,u.O$)(rn)/xn]}function ir(){return(0,rt.Z)(lr).scale(250).clipAngle(142)}function $n(jt,rn){return[(0,u.cM)((0,u.OR)((u.ou+rn)/2)),-jt]}function vr(){var jt=Gt($n),rn=jt.center,fn=jt.rotate;return jt.center=function(xn){return arguments.length?rn([-xn[1],xn[0]]):[(xn=rn())[1],-xn[0]]},jt.rotate=function(xn){return arguments.length?fn([xn[0],xn[1],xn.length>2?xn[2]+90:90]):[(xn=fn())[0],xn[1],xn[2]-90]},fn([0,0,90]).scale(159.155)}lr.invert=(0,ur.O)(function(jt){return 2*(0,u.z4)(jt)}),$n.invert=function(jt,rn){return[-rn,2*(0,u.z4)((0,u.Qq)(jt))-u.ou]}},83074:function($,P,t){t.d(P,{Z:function(){return M}});var A=t(39695);function M(l,_){var m=l[0]*A.uR,f=l[1]*A.uR,o=_[0]*A.uR,e=_[1]*A.uR,i=(0,A.mC)(f),r=(0,A.O$)(f),n=(0,A.mC)(e),s=(0,A.O$)(e),a=i*(0,A.mC)(m),u=i*(0,A.O$)(m),p=n*(0,A.mC)(o),c=n*(0,A.O$)(o),x=2*(0,A.ZR)((0,A._b)((0,A.Jy)(e-f)+i*n*(0,A.Jy)(o-m))),g=(0,A.O$)(x),h=x?function(b){var v=(0,A.O$)(b*=x)/g,y=(0,A.O$)(x-b)/g,w=y*a+v*p,d=y*u+v*c,S=y*r+v*s;return[(0,A.fv)(d,w)*A.RW,(0,A.fv)(S,(0,A._b)(w*w+d*d))*A.RW]}:function(){return[m*A.RW,f*A.RW]};return h.distance=x,h}},39695:function($,P,t){t.d(P,{BZ:function(){return f},Ho:function(){return A},Jy:function(){return w},Kh:function(){return v},O$:function(){return x},OR:function(){return b},Qq:function(){return u},RW:function(){return o},Wn:function(){return i},Xx:function(){return g},ZR:function(){return y},_b:function(){return h},aW:function(){return M},cM:function(){return p},fv:function(){return n},mC:function(){return s},mD:function(){return a},ou:function(){return _},pi:function(){return l},pu:function(){return m},sQ:function(){return c},uR:function(){return e},z4:function(){return r}});var A=1e-6,M=1e-12,l=Math.PI,_=l/2,m=l/4,f=2*l,o=180/l,e=l/180,i=Math.abs,r=Math.atan,n=Math.atan2,s=Math.cos,a=Math.ceil,u=Math.exp,p=Math.log,c=Math.pow,x=Math.sin,g=Math.sign||function(d){return d>0?1:d<0?-1:0},h=Math.sqrt,b=Math.tan;function v(d){return d>1?0:d<-1?l:Math.acos(d)}function y(d){return d>1?_:d<-1?-_:Math.asin(d)}function w(d){return(d=x(d/2))*d}},73182:function($,P,t){function A(){}t.d(P,{Z:function(){return A}})},3559:function($,P,t){var A=t(73182),M=1/0,l=M,_=-M,m=_,f={point:function(o,e){o<M&&(M=o),o>_&&(_=o),e<l&&(l=e),e>m&&(m=e)},lineStart:A.Z,lineEnd:A.Z,polygonStart:A.Z,polygonEnd:A.Z,result:function(){var o=[[M,l],[_,m]];return _=m=-(l=M=1/0),o}};P.Z=f},67108:function($,P,t){t.d(P,{Z:function(){return M}});var A=t(39695);function M(l,_){return(0,A.Wn)(l[0]-_[0])<A.Ho&&(0,A.Wn)(l[1]-_[1])<A.Ho}},23071:function($,P,t){t.d(P,{Z:function(){return f}});var A=t(33940),M=t(7620),l=t(39695),_=(0,A.Z)();function m(o){return(0,l.Wn)(o[0])<=l.pi?o[0]:(0,l.Xx)(o[0])*(((0,l.Wn)(o[0])+l.pi)%l.BZ-l.pi)}function f(o,e){var i=m(e),r=e[1],n=(0,l.O$)(r),s=[(0,l.O$)(i),-(0,l.mC)(i),0],a=0,u=0;_.reset(),n===1?r=l.ou+l.Ho:n===-1&&(r=-l.ou-l.Ho);for(var p=0,c=o.length;p<c;++p)if(g=(x=o[p]).length)for(var x,g,h=x[g-1],b=m(h),v=h[1]/2+l.pu,y=(0,l.O$)(v),w=(0,l.mC)(v),d=0;d<g;++d,b=T,y=C,w=L,h=S){var S=x[d],T=m(S),E=S[1]/2+l.pu,C=(0,l.O$)(E),L=(0,l.mC)(E),O=T-b,z=O>=0?1:-1,G=z*O,I=G>l.pi,H=y*C;if(_.add((0,l.fv)(H*z*(0,l.O$)(G),w*L+H*(0,l.mC)(G))),a+=I?O+z*l.BZ:O,I^b>=i^T>=i){var N=(0,M.T5)((0,M.Og)(h),(0,M.Og)(S));(0,M.iJ)(N);var F=(0,M.T5)(s,N);(0,M.iJ)(F);var V=(I^O>=0?-1:1)*(0,l.ZR)(F[2]);(r>V||r===V&&(N[0]||N[1]))&&(u+=I^O>=0?1:-1)}}return(a<-l.Ho||a<l.Ho&&_<-l.Ho)^1&u}},25382:function($,P,t){t.d(P,{O:function(){return l},W:function(){return M}});var A=t(39695);function M(_){return function(m,f){var o=(0,A.mC)(m),e=(0,A.mC)(f),i=_(o*e);return[i*e*(0,A.O$)(m),i*(0,A.O$)(f)]}}function l(_){return function(m,f){var o=(0,A._b)(m*m+f*f),e=_(o),i=(0,A.O$)(e),r=(0,A.mC)(e);return[(0,A.fv)(m*i,o*r),(0,A.ZR)(o&&f*i/o)]}}},12956:function($,P,t){t.d(P,{Z:function(){return m},l:function(){return _}});var A=t(39695),M=t(25382),l=t(15002),_=(0,M.W)(function(f){return(0,A._b)(2/(1+f))});function m(){return(0,l.Z)(_).scale(124.75).clipAngle(179.999)}_.invert=(0,M.O)(function(f){return 2*(0,A.ZR)(f/2)})},17889:function($,P,t){t.d(P,{N:function(){return _},Z:function(){return m}});var A=t(39695),M=t(25382),l=t(15002),_=(0,M.W)(function(f){return(f=(0,A.Kh)(f))&&f/(0,A.O$)(f)});function m(){return(0,l.Z)(_).scale(79.4188).clipAngle(179.999)}_.invert=(0,M.O)(function(f){return f})},97492:function($,P,t){t.d(P,{Z:function(){return l},k:function(){return M}});var A=t(15002);function M(_,m){return[_,m]}function l(){return(0,A.Z)(M).scale(152.63)}M.invert=M},47589:function($,P,t){t.d(P,{V6:function(){return f},mF:function(){return m},qg:function(){return _},rf:function(){return o}});var A=t(72736),M=t(3559);function l(e,i,r){var n=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),n!=null&&e.clipExtent(null),(0,A.Z)(r,e.stream(M.Z)),i(M.Z.result()),n!=null&&e.clipExtent(n),e}function _(e,i,r){return l(e,function(n){var s=i[1][0]-i[0][0],a=i[1][1]-i[0][1],u=Math.min(s/(n[1][0]-n[0][0]),a/(n[1][1]-n[0][1])),p=+i[0][0]+(s-u*(n[1][0]+n[0][0]))/2,c=+i[0][1]+(a-u*(n[1][1]+n[0][1]))/2;e.scale(150*u).translate([p,c])},r)}function m(e,i,r){return _(e,[[0,0],i],r)}function f(e,i,r){return l(e,function(n){var s=+i,a=s/(n[1][0]-n[0][0]),u=(s-a*(n[1][0]+n[0][0]))/2,p=-a*n[0][1];e.scale(150*a).translate([u,p])},r)}function o(e,i,r){return l(e,function(n){var s=+i,a=s/(n[1][1]-n[0][1]),u=-a*n[0][0],p=(s-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([u,p])},r)}},98936:function($,P,t){t.d(P,{M:function(){return _},Z:function(){return m}});var A=t(39695),M=t(25382),l=t(15002);function _(f,o){var e=(0,A.mC)(o),i=(0,A.mC)(f)*e;return[e*(0,A.O$)(f)/i,(0,A.O$)(o)/i]}function m(){return(0,l.Z)(_).scale(144.049).clipAngle(60)}_.invert=(0,M.O)(A.z4)},15002:function($,P,t){t.d(P,{Z:function(){return x},r:function(){return g}});var A=t(87070),M=t(1457),l=t(87605),_=t(96059),m=t(8593),f=t(39695),o=t(49386),e=t(64684),i=t(47589),r=t(7620),n=16,s=(0,f.mC)(30*f.uR);function a(h,b){return+b?function(v,y){function w(d,S,T,E,C,L,O,z,G,I,H,N,F,V){var W=O-d,te=z-S,Q=W*W+te*te;if(Q>4*y&&F--){var X=E+I,q=C+H,Z=L+N,J=(0,f._b)(X*X+q*q+Z*Z),ne=(0,f.ZR)(Z/=J),re=(0,f.Wn)((0,f.Wn)(Z)-1)<f.Ho||(0,f.Wn)(T-G)<f.Ho?(T+G)/2:(0,f.fv)(q,X),ae=v(re,ne),ue=ae[0],he=ae[1],de=ue-d,xe=he-S,me=te*de-W*xe;(me*me/Q>y||(0,f.Wn)((W*de+te*xe)/Q-.5)>.3||E*I+C*H+L*N<s)&&(w(d,S,T,E,C,L,ue,he,re,X/=J,q/=J,Z,F,V),V.point(ue,he),w(ue,he,re,X,q,Z,O,z,G,I,H,N,F,V))}}return function(d){var S,T,E,C,L,O,z,G,I,H,N,F,V={point:W,lineStart:te,lineEnd:X,polygonStart:function(){d.polygonStart(),V.lineStart=q},polygonEnd:function(){d.polygonEnd(),V.lineStart=te}};function W(ne,re){ne=v(ne,re),d.point(ne[0],ne[1])}function te(){G=NaN,V.point=Q,d.lineStart()}function Q(ne,re){var ae=(0,r.Og)([ne,re]),ue=v(ne,re);w(G,I,z,H,N,F,G=ue[0],I=ue[1],z=ne,H=ae[0],N=ae[1],F=ae[2],n,d),d.point(G,I)}function X(){V.point=W,d.lineEnd()}function q(){te(),V.point=Z,V.lineEnd=J}function Z(ne,re){Q(S=ne,re),T=G,E=I,C=H,L=N,O=F,V.point=Q}function J(){w(G,I,z,H,N,F,T,E,S,C,L,O,n,d),V.lineEnd=X,X()}return V}}(h,b):function(v){return(0,e.l)({point:function(y,w){y=v(y,w),this.stream.point(y[0],y[1])}})}(h)}var u=(0,e.l)({point:function(h,b){this.stream.point(h*f.uR,b*f.uR)}});function p(h,b,v,y,w){function d(S,T){return[b+h*(S*=y),v-h*(T*=w)]}return d.invert=function(S,T){return[(S-b)/h*y,(v-T)/h*w]},d}function c(h,b,v,y,w,d){var S=(0,f.mC)(d),T=(0,f.O$)(d),E=S*h,C=T*h,L=S/h,O=T/h,z=(T*v-S*b)/h,G=(T*b+S*v)/h;function I(H,N){return[E*(H*=y)-C*(N*=w)+b,v-C*H-E*N]}return I.invert=function(H,N){return[y*(L*H-O*N+z),w*(G-O*H-L*N)]},I}function x(h){return g(function(){return h})()}function g(h){var b,v,y,w,d,S,T,E,C,L,O=150,z=480,G=250,I=0,H=0,N=0,F=0,V=0,W=0,te=1,Q=1,X=null,q=A.Z,Z=null,J=m.Z,ne=.5;function re(de){return E(de[0]*f.uR,de[1]*f.uR)}function ae(de){return(de=E.invert(de[0],de[1]))&&[de[0]*f.RW,de[1]*f.RW]}function ue(){var de=c(O,0,0,te,Q,W).apply(null,b(I,H)),xe=(W?c:p)(O,z-de[0],G-de[1],te,Q,W);return v=(0,o.I)(N,F,V),T=(0,_.Z)(b,xe),E=(0,_.Z)(v,T),S=a(T,ne),he()}function he(){return C=L=null,re}return re.stream=function(de){return C&&L===de?C:C=u(function(xe){return(0,e.l)({point:function(me,ve){var Le=xe(me,ve);return this.stream.point(Le[0],Le[1])}})}(v)(q(S(J(L=de)))))},re.preclip=function(de){return arguments.length?(q=de,X=void 0,he()):q},re.postclip=function(de){return arguments.length?(J=de,Z=y=w=d=null,he()):J},re.clipAngle=function(de){return arguments.length?(q=+de?(0,M.Z)(X=de*f.uR):(X=null,A.Z),he()):X*f.RW},re.clipExtent=function(de){return arguments.length?(J=de==null?(Z=y=w=d=null,m.Z):(0,l.Z)(Z=+de[0][0],y=+de[0][1],w=+de[1][0],d=+de[1][1]),he()):Z==null?null:[[Z,y],[w,d]]},re.scale=function(de){return arguments.length?(O=+de,ue()):O},re.translate=function(de){return arguments.length?(z=+de[0],G=+de[1],ue()):[z,G]},re.center=function(de){return arguments.length?(I=de[0]%360*f.uR,H=de[1]%360*f.uR,ue()):[I*f.RW,H*f.RW]},re.rotate=function(de){return arguments.length?(N=de[0]%360*f.uR,F=de[1]%360*f.uR,V=de.length>2?de[2]%360*f.uR:0,ue()):[N*f.RW,F*f.RW,V*f.RW]},re.angle=function(de){return arguments.length?(W=de%360*f.uR,ue()):W*f.RW},re.reflectX=function(de){return arguments.length?(te=de?-1:1,ue()):te<0},re.reflectY=function(de){return arguments.length?(Q=de?-1:1,ue()):Q<0},re.precision=function(de){return arguments.length?(S=a(T,ne=de*de),he()):(0,f._b)(ne)},re.fitExtent=function(de,xe){return(0,i.qg)(re,de,xe)},re.fitSize=function(de,xe){return(0,i.mF)(re,de,xe)},re.fitWidth=function(de,xe){return(0,i.V6)(re,de,xe)},re.fitHeight=function(de,xe){return(0,i.rf)(re,de,xe)},function(){return b=h.apply(this,arguments),re.invert=b.invert&&ae,ue()}}},26867:function($,P,t){t.d(P,{K:function(){return l},Z:function(){return _}});var A=t(15002),M=t(39695);function l(m,f){var o=f*f,e=o*o;return[m*(.8707-.131979*o+e*(e*(.003971*o-.001529*e)-.013791)),f*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))]}function _(){return(0,A.Z)(l).scale(175.295)}l.invert=function(m,f){var o,e=f,i=25;do{var r=e*e,n=r*r;e-=o=(e*(1.007226+r*(.015085+n*(.028874*r-.044475-.005916*n)))-f)/(1.007226+r*(.045255+n*(.259866*r-.311325-.06507600000000001*n)))}while((0,M.Wn)(o)>M.Ho&&--i>0);return[m/(.8707+(r=e*e)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),e]}},57962:function($,P,t){t.d(P,{I:function(){return _},Z:function(){return m}});var A=t(39695),M=t(25382),l=t(15002);function _(f,o){return[(0,A.mC)(o)*(0,A.O$)(f),(0,A.O$)(o)]}function m(){return(0,l.Z)(_).scale(249.5).clipAngle(90+A.Ho)}_.invert=(0,M.O)(A.ZR)},49386:function($,P,t){t.d(P,{I:function(){return _},Z:function(){return e}});var A=t(96059),M=t(39695);function l(i,r){return[(0,M.Wn)(i)>M.pi?i+Math.round(-i/M.BZ)*M.BZ:i,r]}function _(i,r,n){return(i%=M.BZ)?r||n?(0,A.Z)(f(i),o(r,n)):f(i):r||n?o(r,n):l}function m(i){return function(r,n){return[(r+=i)>M.pi?r-M.BZ:r<-M.pi?r+M.BZ:r,n]}}function f(i){var r=m(i);return r.invert=m(-i),r}function o(i,r){var n=(0,M.mC)(i),s=(0,M.O$)(i),a=(0,M.mC)(r),u=(0,M.O$)(r);function p(c,x){var g=(0,M.mC)(x),h=(0,M.mC)(c)*g,b=(0,M.O$)(c)*g,v=(0,M.O$)(x),y=v*n+h*s;return[(0,M.fv)(b*a-y*u,h*n-v*s),(0,M.ZR)(y*a+b*u)]}return p.invert=function(c,x){var g=(0,M.mC)(x),h=(0,M.mC)(c)*g,b=(0,M.O$)(c)*g,v=(0,M.O$)(x),y=v*a-b*u;return[(0,M.fv)(b*a+v*u,h*n+y*s),(0,M.ZR)(y*n-h*s)]},p}function e(i){function r(n){return(n=i(n[0]*M.uR,n[1]*M.uR))[0]*=M.RW,n[1]*=M.RW,n}return i=_(i[0]*M.uR,i[1]*M.uR,i.length>2?i[2]*M.uR:0),r.invert=function(n){return(n=i.invert(n[0]*M.uR,n[1]*M.uR))[0]*=M.RW,n[1]*=M.RW,n},r}l.invert=l},72736:function($,P,t){function A(o,e){o&&l.hasOwnProperty(o.type)&&l[o.type](o,e)}t.d(P,{Z:function(){return f}});var M={Feature:function(o,e){A(o.geometry,e)},FeatureCollection:function(o,e){for(var i=o.features,r=-1,n=i.length;++r<n;)A(i[r].geometry,e)}},l={Sphere:function(o,e){e.sphere()},Point:function(o,e){o=o.coordinates,e.point(o[0],o[1],o[2])},MultiPoint:function(o,e){for(var i=o.coordinates,r=-1,n=i.length;++r<n;)o=i[r],e.point(o[0],o[1],o[2])},LineString:function(o,e){_(o.coordinates,e,0)},MultiLineString:function(o,e){for(var i=o.coordinates,r=-1,n=i.length;++r<n;)_(i[r],e,0)},Polygon:function(o,e){m(o.coordinates,e)},MultiPolygon:function(o,e){for(var i=o.coordinates,r=-1,n=i.length;++r<n;)m(i[r],e)},GeometryCollection:function(o,e){for(var i=o.geometries,r=-1,n=i.length;++r<n;)A(i[r],e)}};function _(o,e,i){var r,n=-1,s=o.length-i;for(e.lineStart();++n<s;)r=o[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function m(o,e){var i=-1,r=o.length;for(e.polygonStart();++i<r;)_(o[i],e,1);e.polygonEnd()}function f(o,e){o&&M.hasOwnProperty(o.type)?M[o.type](o,e):A(o,e)}},64684:function($,P,t){function A(_){return{stream:M(_)}}function M(_){return function(m){var f=new l;for(var o in _)f[o]=_[o];return f.stream=m,f}}function l(){}t.d(P,{Z:function(){return A},l:function(){return M}}),l.prototype={constructor:l,point:function(_,m){this.stream.point(_,m)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},674:function($,P,t){function A(oe,fe){return oe.parent===fe.parent?1:2}function M(oe,fe){return oe+fe.x}function l(oe,fe){return Math.max(oe,fe.y)}function _(){var oe=A,fe=1,Se=1,Me=!1;function be(Ie){var Be,ce=0;Ie.eachAfter(function(ze){var He=ze.children;He?(ze.x=function(We){return We.reduce(M,0)/We.length}(He),ze.y=function(We){return 1+We.reduce(l,0)}(He)):(ze.x=Be?ce+=oe(ze,Be):0,ze.y=0,Be=ze)});var Te=function(ze){for(var He;He=ze.children;)ze=He[0];return ze}(Ie),ye=function(ze){for(var He;He=ze.children;)ze=He[He.length-1];return ze}(Ie),Pe=Te.x-oe(Te,ye)/2,Re=ye.x+oe(ye,Te)/2;return Ie.eachAfter(Me?function(ze){ze.x=(ze.x-Ie.x)*fe,ze.y=(Ie.y-ze.y)*Se}:function(ze){ze.x=(ze.x-Pe)/(Re-Pe)*fe,ze.y=(1-(Ie.y?ze.y/Ie.y:1))*Se})}return be.separation=function(Ie){return arguments.length?(oe=Ie,be):oe},be.size=function(Ie){return arguments.length?(Me=!1,fe=+Ie[0],Se=+Ie[1],be):Me?null:[fe,Se]},be.nodeSize=function(Ie){return arguments.length?(Me=!0,fe=+Ie[0],Se=+Ie[1],be):Me?[fe,Se]:null},be}function m(oe){var fe=0,Se=oe.children,Me=Se&&Se.length;if(Me)for(;--Me>=0;)fe+=Se[Me].value;else fe=1;oe.value=fe}function f(oe,fe){var Se,Me,be,Ie,Be,ce=new r(oe),Te=+oe.value&&(ce.value=oe.value),ye=[ce];for(fe==null&&(fe=o);Se=ye.pop();)if(Te&&(Se.value=+Se.data.value),(be=fe(Se.data))&&(Be=be.length))for(Se.children=new Array(Be),Ie=Be-1;Ie>=0;--Ie)ye.push(Me=Se.children[Ie]=new r(be[Ie])),Me.parent=Se,Me.depth=Se.depth+1;return ce.eachBefore(i)}function o(oe){return oe.children}function e(oe){oe.data=oe.data.data}function i(oe){var fe=0;do oe.height=fe;while((oe=oe.parent)&&oe.height<++fe)}function r(oe){this.data=oe,this.depth=this.height=0,this.parent=null}t.r(P),t.d(P,{cluster:function(){return _},hierarchy:function(){return f},pack:function(){return O},packEnclose:function(){return s},packSiblings:function(){return S},partition:function(){return F},stratify:function(){return q},tree:function(){return he},treemap:function(){return Le},treemapBinary:function(){return Ae},treemapDice:function(){return N},treemapResquarify:function(){return se},treemapSlice:function(){return de},treemapSliceDice:function(){return we},treemapSquarify:function(){return ve}}),r.prototype=f.prototype={constructor:r,count:function(){return this.eachAfter(m)},each:function(oe){var fe,Se,Me,be,Ie=this,Be=[Ie];do for(fe=Be.reverse(),Be=[];Ie=fe.pop();)if(oe(Ie),Se=Ie.children)for(Me=0,be=Se.length;Me<be;++Me)Be.push(Se[Me]);while(Be.length);return this},eachAfter:function(oe){for(var fe,Se,Me,be=this,Ie=[be],Be=[];be=Ie.pop();)if(Be.push(be),fe=be.children)for(Se=0,Me=fe.length;Se<Me;++Se)Ie.push(fe[Se]);for(;be=Be.pop();)oe(be);return this},eachBefore:function(oe){for(var fe,Se,Me=this,be=[Me];Me=be.pop();)if(oe(Me),fe=Me.children)for(Se=fe.length-1;Se>=0;--Se)be.push(fe[Se]);return this},sum:function(oe){return this.eachAfter(function(fe){for(var Se=+oe(fe.data)||0,Me=fe.children,be=Me&&Me.length;--be>=0;)Se+=Me[be].value;fe.value=Se})},sort:function(oe){return this.eachBefore(function(fe){fe.children&&fe.children.sort(oe)})},path:function(oe){for(var fe=this,Se=function(Ie,Be){if(Ie===Be)return Ie;var ce=Ie.ancestors(),Te=Be.ancestors(),ye=null;for(Ie=ce.pop(),Be=Te.pop();Ie===Be;)ye=Ie,Ie=ce.pop(),Be=Te.pop();return ye}(fe,oe),Me=[fe];fe!==Se;)fe=fe.parent,Me.push(fe);for(var be=Me.length;oe!==Se;)Me.splice(be,0,oe),oe=oe.parent;return Me},ancestors:function(){for(var oe=this,fe=[oe];oe=oe.parent;)fe.push(oe);return fe},descendants:function(){var oe=[];return this.each(function(fe){oe.push(fe)}),oe},leaves:function(){var oe=[];return this.eachBefore(function(fe){fe.children||oe.push(fe)}),oe},links:function(){var oe=this,fe=[];return oe.each(function(Se){Se!==oe&&fe.push({source:Se.parent,target:Se})}),fe},copy:function(){return f(this).eachBefore(e)}};var n=Array.prototype.slice;function s(oe){for(var fe,Se,Me=0,be=(oe=function(Be){for(var ce,Te,ye=Be.length;ye;)Te=Math.random()*ye--|0,ce=Be[ye],Be[ye]=Be[Te],Be[Te]=ce;return Be}(n.call(oe))).length,Ie=[];Me<be;)fe=oe[Me],Se&&p(Se,fe)?++Me:(Se=x(Ie=a(Ie,fe)),Me=0);return Se}function a(oe,fe){var Se,Me;if(c(fe,oe))return[fe];for(Se=0;Se<oe.length;++Se)if(u(fe,oe[Se])&&c(g(oe[Se],fe),oe))return[oe[Se],fe];for(Se=0;Se<oe.length-1;++Se)for(Me=Se+1;Me<oe.length;++Me)if(u(g(oe[Se],oe[Me]),fe)&&u(g(oe[Se],fe),oe[Me])&&u(g(oe[Me],fe),oe[Se])&&c(h(oe[Se],oe[Me],fe),oe))return[oe[Se],oe[Me],fe];throw new Error}function u(oe,fe){var Se=oe.r-fe.r,Me=fe.x-oe.x,be=fe.y-oe.y;return Se<0||Se*Se<Me*Me+be*be}function p(oe,fe){var Se=oe.r-fe.r+1e-6,Me=fe.x-oe.x,be=fe.y-oe.y;return Se>0&&Se*Se>Me*Me+be*be}function c(oe,fe){for(var Se=0;Se<fe.length;++Se)if(!p(oe,fe[Se]))return!1;return!0}function x(oe){switch(oe.length){case 1:return{x:(fe=oe[0]).x,y:fe.y,r:fe.r};case 2:return g(oe[0],oe[1]);case 3:return h(oe[0],oe[1],oe[2])}var fe}function g(oe,fe){var Se=oe.x,Me=oe.y,be=oe.r,Ie=fe.x,Be=fe.y,ce=fe.r,Te=Ie-Se,ye=Be-Me,Pe=ce-be,Re=Math.sqrt(Te*Te+ye*ye);return{x:(Se+Ie+Te/Re*Pe)/2,y:(Me+Be+ye/Re*Pe)/2,r:(Re+be+ce)/2}}function h(oe,fe,Se){var Me=oe.x,be=oe.y,Ie=oe.r,Be=fe.x,ce=fe.y,Te=fe.r,ye=Se.x,Pe=Se.y,Re=Se.r,ze=Me-Be,He=Me-ye,We=be-ce,Je=be-Pe,lt=Te-Ie,et=Re-Ie,yt=Me*Me+be*be-Ie*Ie,_t=yt-Be*Be-ce*ce+Te*Te,xt=yt-ye*ye-Pe*Pe+Re*Re,at=He*We-ze*Je,ot=(We*xt-Je*_t)/(2*at)-Me,At=(Je*lt-We*et)/at,Ct=(He*_t-ze*xt)/(2*at)-be,zt=(ze*et-He*lt)/at,St=At*At+zt*zt-1,qe=2*(Ie+ot*At+Ct*zt),Xe=ot*ot+Ct*Ct-Ie*Ie,Ve=-(St?(qe+Math.sqrt(qe*qe-4*St*Xe))/(2*St):Xe/qe);return{x:Me+ot+At*Ve,y:be+Ct+zt*Ve,r:Ve}}function b(oe,fe,Se){var Me,be,Ie,Be,ce=oe.x-fe.x,Te=oe.y-fe.y,ye=ce*ce+Te*Te;ye?(be=fe.r+Se.r,be*=be,Be=oe.r+Se.r,be>(Be*=Be)?(Me=(ye+Be-be)/(2*ye),Ie=Math.sqrt(Math.max(0,Be/ye-Me*Me)),Se.x=oe.x-Me*ce-Ie*Te,Se.y=oe.y-Me*Te+Ie*ce):(Me=(ye+be-Be)/(2*ye),Ie=Math.sqrt(Math.max(0,be/ye-Me*Me)),Se.x=fe.x+Me*ce-Ie*Te,Se.y=fe.y+Me*Te+Ie*ce)):(Se.x=fe.x+Se.r,Se.y=fe.y)}function v(oe,fe){var Se=oe.r+fe.r-1e-6,Me=fe.x-oe.x,be=fe.y-oe.y;return Se>0&&Se*Se>Me*Me+be*be}function y(oe){var fe=oe._,Se=oe.next._,Me=fe.r+Se.r,be=(fe.x*Se.r+Se.x*fe.r)/Me,Ie=(fe.y*Se.r+Se.y*fe.r)/Me;return be*be+Ie*Ie}function w(oe){this._=oe,this.next=null,this.previous=null}function d(oe){if(!(be=oe.length))return 0;var fe,Se,Me,be,Ie,Be,ce,Te,ye,Pe,Re;if((fe=oe[0]).x=0,fe.y=0,!(be>1))return fe.r;if(Se=oe[1],fe.x=-Se.r,Se.x=fe.r,Se.y=0,!(be>2))return fe.r+Se.r;b(Se,fe,Me=oe[2]),fe=new w(fe),Se=new w(Se),Me=new w(Me),fe.next=Me.previous=Se,Se.next=fe.previous=Me,Me.next=Se.previous=fe;e:for(ce=3;ce<be;++ce){b(fe._,Se._,Me=oe[ce]),Me=new w(Me),Te=Se.next,ye=fe.previous,Pe=Se._.r,Re=fe._.r;do if(Pe<=Re){if(v(Te._,Me._)){Se=Te,fe.next=Se,Se.previous=fe,--ce;continue e}Pe+=Te._.r,Te=Te.next}else{if(v(ye._,Me._)){(fe=ye).next=Se,Se.previous=fe,--ce;continue e}Re+=ye._.r,ye=ye.previous}while(Te!==ye.next);for(Me.previous=fe,Me.next=Se,fe.next=Se.previous=Se=Me,Ie=y(fe);(Me=Me.next)!==Se;)(Be=y(Me))<Ie&&(fe=Me,Ie=Be);Se=fe.next}for(fe=[Se._],Me=Se;(Me=Me.next)!==Se;)fe.push(Me._);for(Me=s(fe),ce=0;ce<be;++ce)(fe=oe[ce]).x-=Me.x,fe.y-=Me.y;return Me.r}function S(oe){return d(oe),oe}function T(oe){if(typeof oe!="function")throw new Error;return oe}function E(){return 0}function C(oe){return function(){return oe}}function L(oe){return Math.sqrt(oe.value)}function O(){var oe=null,fe=1,Se=1,Me=E;function be(Ie){return Ie.x=fe/2,Ie.y=Se/2,oe?Ie.eachBefore(z(oe)).eachAfter(G(Me,.5)).eachBefore(I(1)):Ie.eachBefore(z(L)).eachAfter(G(E,1)).eachAfter(G(Me,Ie.r/Math.min(fe,Se))).eachBefore(I(Math.min(fe,Se)/(2*Ie.r))),Ie}return be.radius=function(Ie){return arguments.length?(oe=(Be=Ie)==null?null:T(Be),be):oe;var Be},be.size=function(Ie){return arguments.length?(fe=+Ie[0],Se=+Ie[1],be):[fe,Se]},be.padding=function(Ie){return arguments.length?(Me=typeof Ie=="function"?Ie:C(+Ie),be):Me},be}function z(oe){return function(fe){fe.children||(fe.r=Math.max(0,+oe(fe)||0))}}function G(oe,fe){return function(Se){if(Me=Se.children){var Me,be,Ie,Be=Me.length,ce=oe(Se)*fe||0;if(ce)for(be=0;be<Be;++be)Me[be].r+=ce;if(Ie=d(Me),ce)for(be=0;be<Be;++be)Me[be].r-=ce;Se.r=Ie+ce}}}function I(oe){return function(fe){var Se=fe.parent;fe.r*=oe,Se&&(fe.x=Se.x+oe*fe.x,fe.y=Se.y+oe*fe.y)}}function H(oe){oe.x0=Math.round(oe.x0),oe.y0=Math.round(oe.y0),oe.x1=Math.round(oe.x1),oe.y1=Math.round(oe.y1)}function N(oe,fe,Se,Me,be){for(var Ie,Be=oe.children,ce=-1,Te=Be.length,ye=oe.value&&(Me-fe)/oe.value;++ce<Te;)(Ie=Be[ce]).y0=Se,Ie.y1=be,Ie.x0=fe,Ie.x1=fe+=Ie.value*ye}function F(){var oe=1,fe=1,Se=0,Me=!1;function be(Ie){var Be=Ie.height+1;return Ie.x0=Ie.y0=Se,Ie.x1=oe,Ie.y1=fe/Be,Ie.eachBefore(function(ce,Te){return function(ye){ye.children&&N(ye,ye.x0,ce*(ye.depth+1)/Te,ye.x1,ce*(ye.depth+2)/Te);var Pe=ye.x0,Re=ye.y0,ze=ye.x1-Se,He=ye.y1-Se;ze<Pe&&(Pe=ze=(Pe+ze)/2),He<Re&&(Re=He=(Re+He)/2),ye.x0=Pe,ye.y0=Re,ye.x1=ze,ye.y1=He}}(fe,Be)),Me&&Ie.eachBefore(H),Ie}return be.round=function(Ie){return arguments.length?(Me=!!Ie,be):Me},be.size=function(Ie){return arguments.length?(oe=+Ie[0],fe=+Ie[1],be):[oe,fe]},be.padding=function(Ie){return arguments.length?(Se=+Ie,be):Se},be}var V="$",W={depth:-1},te={};function Q(oe){return oe.id}function X(oe){return oe.parentId}function q(){var oe=Q,fe=X;function Se(Me){var be,Ie,Be,ce,Te,ye,Pe,Re=Me.length,ze=new Array(Re),He={};for(Ie=0;Ie<Re;++Ie)be=Me[Ie],Te=ze[Ie]=new r(be),(ye=oe(be,Ie,Me))!=null&&(ye+="")&&(He[Pe=V+(Te.id=ye)]=Pe in He?te:Te);for(Ie=0;Ie<Re;++Ie)if(Te=ze[Ie],(ye=fe(Me[Ie],Ie,Me))!=null&&(ye+="")){if(!(ce=He[V+ye]))throw new Error("missing: "+ye);if(ce===te)throw new Error("ambiguous: "+ye);ce.children?ce.children.push(Te):ce.children=[Te],Te.parent=ce}else{if(Be)throw new Error("multiple roots");Be=Te}if(!Be)throw new Error("no root");if(Be.parent=W,Be.eachBefore(function(We){We.depth=We.parent.depth+1,--Re}).eachBefore(i),Be.parent=null,Re>0)throw new Error("cycle");return Be}return Se.id=function(Me){return arguments.length?(oe=T(Me),Se):oe},Se.parentId=function(Me){return arguments.length?(fe=T(Me),Se):fe},Se}function Z(oe,fe){return oe.parent===fe.parent?1:2}function J(oe){var fe=oe.children;return fe?fe[0]:oe.t}function ne(oe){var fe=oe.children;return fe?fe[fe.length-1]:oe.t}function re(oe,fe,Se){var Me=Se/(fe.i-oe.i);fe.c-=Me,fe.s+=Se,oe.c+=Me,fe.z+=Se,fe.m+=Se}function ae(oe,fe,Se){return oe.a.parent===fe.parent?oe.a:Se}function ue(oe,fe){this._=oe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=fe}function he(){var oe=Z,fe=1,Se=1,Me=null;function be(Te){var ye=function(et){for(var yt,_t,xt,at,ot,At=new ue(et,0),Ct=[At];yt=Ct.pop();)if(xt=yt._.children)for(yt.children=new Array(ot=xt.length),at=ot-1;at>=0;--at)Ct.push(_t=yt.children[at]=new ue(xt[at],at)),_t.parent=yt;return(At.parent=new ue(null,0)).children=[At],At}(Te);if(ye.eachAfter(Ie),ye.parent.m=-ye.z,ye.eachBefore(Be),Me)Te.eachBefore(ce);else{var Pe=Te,Re=Te,ze=Te;Te.eachBefore(function(et){et.x<Pe.x&&(Pe=et),et.x>Re.x&&(Re=et),et.depth>ze.depth&&(ze=et)});var He=Pe===Re?1:oe(Pe,Re)/2,We=He-Pe.x,Je=fe/(Re.x+He+We),lt=Se/(ze.depth||1);Te.eachBefore(function(et){et.x=(et.x+We)*Je,et.y=et.depth*lt})}return Te}function Ie(Te){var ye=Te.children,Pe=Te.parent.children,Re=Te.i?Pe[Te.i-1]:null;if(ye){(function(He){for(var We,Je=0,lt=0,et=He.children,yt=et.length;--yt>=0;)(We=et[yt]).z+=Je,We.m+=Je,Je+=We.s+(lt+=We.c)})(Te);var ze=(ye[0].z+ye[ye.length-1].z)/2;Re?(Te.z=Re.z+oe(Te._,Re._),Te.m=Te.z-ze):Te.z=ze}else Re&&(Te.z=Re.z+oe(Te._,Re._));Te.parent.A=function(He,We,Je){if(We){for(var lt,et=He,yt=He,_t=We,xt=et.parent.children[0],at=et.m,ot=yt.m,At=_t.m,Ct=xt.m;_t=ne(_t),et=J(et),_t&&et;)xt=J(xt),(yt=ne(yt)).a=He,(lt=_t.z+At-et.z-at+oe(_t._,et._))>0&&(re(ae(_t,He,Je),He,lt),at+=lt,ot+=lt),At+=_t.m,at+=et.m,Ct+=xt.m,ot+=yt.m;_t&&!ne(yt)&&(yt.t=_t,yt.m+=At-ot),et&&!J(xt)&&(xt.t=et,xt.m+=at-Ct,Je=He)}return Je}(Te,Re,Te.parent.A||Pe[0])}function Be(Te){Te._.x=Te.z+Te.parent.m,Te.m+=Te.parent.m}function ce(Te){Te.x*=fe,Te.y=Te.depth*Se}return be.separation=function(Te){return arguments.length?(oe=Te,be):oe},be.size=function(Te){return arguments.length?(Me=!1,fe=+Te[0],Se=+Te[1],be):Me?null:[fe,Se]},be.nodeSize=function(Te){return arguments.length?(Me=!0,fe=+Te[0],Se=+Te[1],be):Me?[fe,Se]:null},be}function de(oe,fe,Se,Me,be){for(var Ie,Be=oe.children,ce=-1,Te=Be.length,ye=oe.value&&(be-Se)/oe.value;++ce<Te;)(Ie=Be[ce]).x0=fe,Ie.x1=Me,Ie.y0=Se,Ie.y1=Se+=Ie.value*ye}ue.prototype=Object.create(r.prototype);var xe=(1+Math.sqrt(5))/2;function me(oe,fe,Se,Me,be,Ie){for(var Be,ce,Te,ye,Pe,Re,ze,He,We,Je,lt,et=[],yt=fe.children,_t=0,xt=0,at=yt.length,ot=fe.value;_t<at;){Te=be-Se,ye=Ie-Me;do Pe=yt[xt++].value;while(!Pe&&xt<at);for(Re=ze=Pe,lt=Pe*Pe*(Je=Math.max(ye/Te,Te/ye)/(ot*oe)),We=Math.max(ze/lt,lt/Re);xt<at;++xt){if(Pe+=ce=yt[xt].value,ce<Re&&(Re=ce),ce>ze&&(ze=ce),lt=Pe*Pe*Je,(He=Math.max(ze/lt,lt/Re))>We){Pe-=ce;break}We=He}et.push(Be={value:Pe,dice:Te<ye,children:yt.slice(_t,xt)}),Be.dice?N(Be,Se,Me,be,ot?Me+=ye*Pe/ot:Ie):de(Be,Se,Me,ot?Se+=Te*Pe/ot:be,Ie),ot-=Pe,_t=xt}return et}var ve=function oe(fe){function Se(Me,be,Ie,Be,ce){me(fe,Me,be,Ie,Be,ce)}return Se.ratio=function(Me){return oe((Me=+Me)>1?Me:1)},Se}(xe);function Le(){var oe=ve,fe=!1,Se=1,Me=1,be=[0],Ie=E,Be=E,ce=E,Te=E,ye=E;function Pe(ze){return ze.x0=ze.y0=0,ze.x1=Se,ze.y1=Me,ze.eachBefore(Re),be=[0],fe&&ze.eachBefore(H),ze}function Re(ze){var He=be[ze.depth],We=ze.x0+He,Je=ze.y0+He,lt=ze.x1-He,et=ze.y1-He;lt<We&&(We=lt=(We+lt)/2),et<Je&&(Je=et=(Je+et)/2),ze.x0=We,ze.y0=Je,ze.x1=lt,ze.y1=et,ze.children&&(He=be[ze.depth+1]=Ie(ze)/2,We+=ye(ze)-He,Je+=Be(ze)-He,(lt-=ce(ze)-He)<We&&(We=lt=(We+lt)/2),(et-=Te(ze)-He)<Je&&(Je=et=(Je+et)/2),oe(ze,We,Je,lt,et))}return Pe.round=function(ze){return arguments.length?(fe=!!ze,Pe):fe},Pe.size=function(ze){return arguments.length?(Se=+ze[0],Me=+ze[1],Pe):[Se,Me]},Pe.tile=function(ze){return arguments.length?(oe=T(ze),Pe):oe},Pe.padding=function(ze){return arguments.length?Pe.paddingInner(ze).paddingOuter(ze):Pe.paddingInner()},Pe.paddingInner=function(ze){return arguments.length?(Ie=typeof ze=="function"?ze:C(+ze),Pe):Ie},Pe.paddingOuter=function(ze){return arguments.length?Pe.paddingTop(ze).paddingRight(ze).paddingBottom(ze).paddingLeft(ze):Pe.paddingTop()},Pe.paddingTop=function(ze){return arguments.length?(Be=typeof ze=="function"?ze:C(+ze),Pe):Be},Pe.paddingRight=function(ze){return arguments.length?(ce=typeof ze=="function"?ze:C(+ze),Pe):ce},Pe.paddingBottom=function(ze){return arguments.length?(Te=typeof ze=="function"?ze:C(+ze),Pe):Te},Pe.paddingLeft=function(ze){return arguments.length?(ye=typeof ze=="function"?ze:C(+ze),Pe):ye},Pe}function Ae(oe,fe,Se,Me,be){var Ie,Be,ce=oe.children,Te=ce.length,ye=new Array(Te+1);for(ye[0]=Be=Ie=0;Ie<Te;++Ie)ye[Ie+1]=Be+=ce[Ie].value;(function Pe(Re,ze,He,We,Je,lt,et){if(Re>=ze-1){var yt=ce[Re];return yt.x0=We,yt.y0=Je,yt.x1=lt,void(yt.y1=et)}for(var _t=ye[Re],xt=He/2+_t,at=Re+1,ot=ze-1;at<ot;){var At=at+ot>>>1;ye[At]<xt?at=At+1:ot=At}xt-ye[at-1]<ye[at]-xt&&Re+1<at&&--at;var Ct=ye[at]-_t,zt=He-Ct;if(lt-We>et-Je){var St=(We*zt+lt*Ct)/He;Pe(Re,at,Ct,We,Je,St,et),Pe(at,ze,zt,St,Je,lt,et)}else{var qe=(Je*zt+et*Ct)/He;Pe(Re,at,Ct,We,Je,lt,qe),Pe(at,ze,zt,We,qe,lt,et)}})(0,Te,oe.value,fe,Se,Me,be)}function we(oe,fe,Se,Me,be){(1&oe.depth?de:N)(oe,fe,Se,Me,be)}var se=function oe(fe){function Se(Me,be,Ie,Be,ce){if((Te=Me._squarify)&&Te.ratio===fe)for(var Te,ye,Pe,Re,ze,He=-1,We=Te.length,Je=Me.value;++He<We;){for(Pe=(ye=Te[He]).children,Re=ye.value=0,ze=Pe.length;Re<ze;++Re)ye.value+=Pe[Re].value;ye.dice?N(ye,be,Ie,Be,Ie+=(ce-Ie)*ye.value/Je):de(ye,be,Ie,be+=(Be-be)*ye.value/Je,ce),Je-=ye.value}else Me._squarify=Te=me(fe,Me,be,Ie,Be,ce),Te.ratio=fe}return Se.ratio=function(Me){return oe((Me=+Me)>1?Me:1)},Se}(xe)},45879:function($,P,t){t.d(P,{h5:function(){return p}});var A=Math.PI,M=2*A,l=1e-6,_=M-l;function m(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function f(){return new m}m.prototype=f.prototype={constructor:m,moveTo:function(c,x){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(c,x){this._+="L"+(this._x1=+c)+","+(this._y1=+x)},quadraticCurveTo:function(c,x,g,h){this._+="Q"+ +c+","+ +x+","+(this._x1=+g)+","+(this._y1=+h)},bezierCurveTo:function(c,x,g,h,b,v){this._+="C"+ +c+","+ +x+","+ +g+","+ +h+","+(this._x1=+b)+","+(this._y1=+v)},arcTo:function(c,x,g,h,b){c=+c,x=+x,g=+g,h=+h,b=+b;var v=this._x1,y=this._y1,w=g-c,d=h-x,S=v-c,T=y-x,E=S*S+T*T;if(b<0)throw new Error("negative radius: "+b);if(this._x1===null)this._+="M"+(this._x1=c)+","+(this._y1=x);else if(E>l)if(Math.abs(T*w-d*S)>l&&b){var C=g-v,L=h-y,O=w*w+d*d,z=C*C+L*L,G=Math.sqrt(O),I=Math.sqrt(E),H=b*Math.tan((A-Math.acos((O+E-z)/(2*G*I)))/2),N=H/I,F=H/G;Math.abs(N-1)>l&&(this._+="L"+(c+N*S)+","+(x+N*T)),this._+="A"+b+","+b+",0,0,"+ +(T*C>S*L)+","+(this._x1=c+F*w)+","+(this._y1=x+F*d)}else this._+="L"+(this._x1=c)+","+(this._y1=x)},arc:function(c,x,g,h,b,v){c=+c,x=+x,v=!!v;var y=(g=+g)*Math.cos(h),w=g*Math.sin(h),d=c+y,S=x+w,T=1^v,E=v?h-b:b-h;if(g<0)throw new Error("negative radius: "+g);this._x1===null?this._+="M"+d+","+S:(Math.abs(this._x1-d)>l||Math.abs(this._y1-S)>l)&&(this._+="L"+d+","+S),g&&(E<0&&(E=E%M+M),E>_?this._+="A"+g+","+g+",0,1,"+T+","+(c-y)+","+(x-w)+"A"+g+","+g+",0,1,"+T+","+(this._x1=d)+","+(this._y1=S):E>l&&(this._+="A"+g+","+g+",0,"+ +(E>=A)+","+T+","+(this._x1=c+g*Math.cos(b))+","+(this._y1=x+g*Math.sin(b))))},rect:function(c,x,g,h){this._+="M"+(this._x0=this._x1=+c)+","+(this._y0=this._y1=+x)+"h"+ +g+"v"+ +h+"h"+-g+"Z"},toString:function(){return this._}};var o=f,e=Array.prototype.slice;function i(c){return function(){return c}}function r(c){return c[0]}function n(c){return c[1]}function s(c){return c.source}function a(c){return c.target}function u(c,x,g,h,b){c.moveTo(x,g),c.bezierCurveTo(x=(x+h)/2,g,x,b,h,b)}function p(){return function(c){var x=s,g=a,h=r,b=n,v=null;function y(){var w,d=e.call(arguments),S=x.apply(this,d),T=g.apply(this,d);if(v||(v=w=o()),c(v,+h.apply(this,(d[0]=S,d)),+b.apply(this,d),+h.apply(this,(d[0]=T,d)),+b.apply(this,d)),w)return v=null,w+""||null}return y.source=function(w){return arguments.length?(x=w,y):x},y.target=function(w){return arguments.length?(g=w,y):g},y.x=function(w){return arguments.length?(h=typeof w=="function"?w:i(+w),y):h},y.y=function(w){return arguments.length?(b=typeof w=="function"?w:i(+w),y):b},y.context=function(w){return arguments.length?(v=w??null,y):v},y}(u)}},84096:function($,P,t){t.d(P,{i$:function(){return s},Dq:function(){return r},g0:function(){return a}});var A=t(58176),M=t(48480),l=t(59879),_=t(82301),m=t(34823),f=t(79791);function o(at){if(0<=at.y&&at.y<100){var ot=new Date(-1,at.m,at.d,at.H,at.M,at.S,at.L);return ot.setFullYear(at.y),ot}return new Date(at.y,at.m,at.d,at.H,at.M,at.S,at.L)}function e(at){if(0<=at.y&&at.y<100){var ot=new Date(Date.UTC(-1,at.m,at.d,at.H,at.M,at.S,at.L));return ot.setUTCFullYear(at.y),ot}return new Date(Date.UTC(at.y,at.m,at.d,at.H,at.M,at.S,at.L))}function i(at,ot,At){return{y:at,m:ot,d:At,H:0,M:0,S:0,L:0}}function r(at){var ot=at.dateTime,At=at.date,Ct=at.time,zt=at.periods,St=at.days,qe=at.shortDays,Xe=at.months,Ve=at.shortMonths,Ze=b(zt),st=v(zt),nt=b(St),De=v(St),Fe=b(qe),rt=v(qe),tt=b(Xe),gt=v(Xe),dt=b(Ve),mt=v(Ve),ft={a:function(Nt){return qe[Nt.getDay()]},A:function(Nt){return St[Nt.getDay()]},b:function(Nt){return Ve[Nt.getMonth()]},B:function(Nt){return Xe[Nt.getMonth()]},c:null,d:q,e:q,f:ae,H:Z,I:J,j:ne,L:re,m:ue,M:he,p:function(Nt){return zt[+(Nt.getHours()>=12)]},q:function(Nt){return 1+~~(Nt.getMonth()/3)},Q:_t,s:xt,S:de,u:xe,U:me,V:ve,w:Le,W:Ae,x:null,X:null,y:we,Y:se,Z:oe,"%":yt},kt={a:function(Nt){return qe[Nt.getUTCDay()]},A:function(Nt){return St[Nt.getUTCDay()]},b:function(Nt){return Ve[Nt.getUTCMonth()]},B:function(Nt){return Xe[Nt.getUTCMonth()]},c:null,d:fe,e:fe,f:Be,H:Se,I:Me,j:be,L:Ie,m:ce,M:Te,p:function(Nt){return zt[+(Nt.getUTCHours()>=12)]},q:function(Nt){return 1+~~(Nt.getUTCMonth()/3)},Q:_t,s:xt,S:ye,u:Pe,U:Re,V:ze,w:He,W:We,x:null,X:null,y:Je,Y:lt,Z:et,"%":yt},ht={a:function(Nt,Gt,an){var Wt=Fe.exec(Gt.slice(an));return Wt?(Nt.w=rt[Wt[0].toLowerCase()],an+Wt[0].length):-1},A:function(Nt,Gt,an){var Wt=nt.exec(Gt.slice(an));return Wt?(Nt.w=De[Wt[0].toLowerCase()],an+Wt[0].length):-1},b:function(Nt,Gt,an){var Wt=dt.exec(Gt.slice(an));return Wt?(Nt.m=mt[Wt[0].toLowerCase()],an+Wt[0].length):-1},B:function(Nt,Gt,an){var Wt=tt.exec(Gt.slice(an));return Wt?(Nt.m=gt[Wt[0].toLowerCase()],an+Wt[0].length):-1},c:function(Nt,Gt,an){return Ft(Nt,ot,Gt,an)},d:G,e:G,f:W,H,I:H,j:I,L:V,m:z,M:N,p:function(Nt,Gt,an){var Wt=Ze.exec(Gt.slice(an));return Wt?(Nt.p=st[Wt[0].toLowerCase()],an+Wt[0].length):-1},q:O,Q,s:X,S:F,u:w,U:d,V:S,w:y,W:T,x:function(Nt,Gt,an){return Ft(Nt,At,Gt,an)},X:function(Nt,Gt,an){return Ft(Nt,Ct,Gt,an)},y:C,Y:E,Z:L,"%":te};function pt(Nt,Gt){return function(an){var Wt,Yt,en,Tn=[],Bn=-1,mn=0,Kt=Nt.length;for(an instanceof Date||(an=new Date(+an));++Bn<Kt;)Nt.charCodeAt(Bn)===37&&(Tn.push(Nt.slice(mn,Bn)),(Yt=u[Wt=Nt.charAt(++Bn)])!=null?Wt=Nt.charAt(++Bn):Yt=Wt==="e"?" ":"0",(en=Gt[Wt])&&(Wt=en(an,Yt)),Tn.push(Wt),mn=Bn+1);return Tn.push(Nt.slice(mn,Bn)),Tn.join("")}}function wt(Nt,Gt){return function(an){var Wt,Yt,en=i(1900,void 0,1);if(Ft(en,Nt,an+="",0)!=an.length)return null;if("Q"in en)return new Date(en.Q);if("s"in en)return new Date(1e3*en.s+("L"in en?en.L:0));if(Gt&&!("Z"in en)&&(en.Z=0),"p"in en&&(en.H=en.H%12+12*en.p),en.m===void 0&&(en.m="q"in en?en.q:0),"V"in en){if(en.V<1||en.V>53)return null;"w"in en||(en.w=1),"Z"in en?(Yt=(Wt=e(i(en.y,0,1))).getUTCDay(),Wt=Yt>4||Yt===0?A.l6.ceil(Wt):(0,A.l6)(Wt),Wt=M.Z.offset(Wt,7*(en.V-1)),en.y=Wt.getUTCFullYear(),en.m=Wt.getUTCMonth(),en.d=Wt.getUTCDate()+(en.w+6)%7):(Yt=(Wt=o(i(en.y,0,1))).getDay(),Wt=Yt>4||Yt===0?l.wA.ceil(Wt):(0,l.wA)(Wt),Wt=_.Z.offset(Wt,7*(en.V-1)),en.y=Wt.getFullYear(),en.m=Wt.getMonth(),en.d=Wt.getDate()+(en.w+6)%7)}else("W"in en||"U"in en)&&("w"in en||(en.w="u"in en?en.u%7:"W"in en?1:0),Yt="Z"in en?e(i(en.y,0,1)).getUTCDay():o(i(en.y,0,1)).getDay(),en.m=0,en.d="W"in en?(en.w+6)%7+7*en.W-(Yt+5)%7:en.w+7*en.U-(Yt+6)%7);return"Z"in en?(en.H+=en.Z/100|0,en.M+=en.Z%100,e(en)):o(en)}}function Ft(Nt,Gt,an,Wt){for(var Yt,en,Tn=0,Bn=Gt.length,mn=an.length;Tn<Bn;){if(Wt>=mn)return-1;if((Yt=Gt.charCodeAt(Tn++))===37){if(Yt=Gt.charAt(Tn++),!(en=ht[Yt in u?Gt.charAt(Tn++):Yt])||(Wt=en(Nt,an,Wt))<0)return-1}else if(Yt!=an.charCodeAt(Wt++))return-1}return Wt}return ft.x=pt(At,ft),ft.X=pt(Ct,ft),ft.c=pt(ot,ft),kt.x=pt(At,kt),kt.X=pt(Ct,kt),kt.c=pt(ot,kt),{format:function(Nt){var Gt=pt(Nt+="",ft);return Gt.toString=function(){return Nt},Gt},parse:function(Nt){var Gt=wt(Nt+="",!1);return Gt.toString=function(){return Nt},Gt},utcFormat:function(Nt){var Gt=pt(Nt+="",kt);return Gt.toString=function(){return Nt},Gt},utcParse:function(Nt){var Gt=wt(Nt+="",!0);return Gt.toString=function(){return Nt},Gt}}}var n,s,a,u={"-":"",_:" ",0:"0"},p=/^\s*\d+/,c=/^%/,x=/[\\^$*+?|[\]().{}]/g;function g(at,ot,At){var Ct=at<0?"-":"",zt=(Ct?-at:at)+"",St=zt.length;return Ct+(St<At?new Array(At-St+1).join(ot)+zt:zt)}function h(at){return at.replace(x,"\\$&")}function b(at){return new RegExp("^(?:"+at.map(h).join("|")+")","i")}function v(at){for(var ot={},At=-1,Ct=at.length;++At<Ct;)ot[at[At].toLowerCase()]=At;return ot}function y(at,ot,At){var Ct=p.exec(ot.slice(At,At+1));return Ct?(at.w=+Ct[0],At+Ct[0].length):-1}function w(at,ot,At){var Ct=p.exec(ot.slice(At,At+1));return Ct?(at.u=+Ct[0],At+Ct[0].length):-1}function d(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.U=+Ct[0],At+Ct[0].length):-1}function S(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.V=+Ct[0],At+Ct[0].length):-1}function T(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.W=+Ct[0],At+Ct[0].length):-1}function E(at,ot,At){var Ct=p.exec(ot.slice(At,At+4));return Ct?(at.y=+Ct[0],At+Ct[0].length):-1}function C(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.y=+Ct[0]+(+Ct[0]>68?1900:2e3),At+Ct[0].length):-1}function L(at,ot,At){var Ct=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ot.slice(At,At+6));return Ct?(at.Z=Ct[1]?0:-(Ct[2]+(Ct[3]||"00")),At+Ct[0].length):-1}function O(at,ot,At){var Ct=p.exec(ot.slice(At,At+1));return Ct?(at.q=3*Ct[0]-3,At+Ct[0].length):-1}function z(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.m=Ct[0]-1,At+Ct[0].length):-1}function G(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.d=+Ct[0],At+Ct[0].length):-1}function I(at,ot,At){var Ct=p.exec(ot.slice(At,At+3));return Ct?(at.m=0,at.d=+Ct[0],At+Ct[0].length):-1}function H(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.H=+Ct[0],At+Ct[0].length):-1}function N(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.M=+Ct[0],At+Ct[0].length):-1}function F(at,ot,At){var Ct=p.exec(ot.slice(At,At+2));return Ct?(at.S=+Ct[0],At+Ct[0].length):-1}function V(at,ot,At){var Ct=p.exec(ot.slice(At,At+3));return Ct?(at.L=+Ct[0],At+Ct[0].length):-1}function W(at,ot,At){var Ct=p.exec(ot.slice(At,At+6));return Ct?(at.L=Math.floor(Ct[0]/1e3),At+Ct[0].length):-1}function te(at,ot,At){var Ct=c.exec(ot.slice(At,At+1));return Ct?At+Ct[0].length:-1}function Q(at,ot,At){var Ct=p.exec(ot.slice(At));return Ct?(at.Q=+Ct[0],At+Ct[0].length):-1}function X(at,ot,At){var Ct=p.exec(ot.slice(At));return Ct?(at.s=+Ct[0],At+Ct[0].length):-1}function q(at,ot){return g(at.getDate(),ot,2)}function Z(at,ot){return g(at.getHours(),ot,2)}function J(at,ot){return g(at.getHours()%12||12,ot,2)}function ne(at,ot){return g(1+_.Z.count((0,m.Z)(at),at),ot,3)}function re(at,ot){return g(at.getMilliseconds(),ot,3)}function ae(at,ot){return re(at,ot)+"000"}function ue(at,ot){return g(at.getMonth()+1,ot,2)}function he(at,ot){return g(at.getMinutes(),ot,2)}function de(at,ot){return g(at.getSeconds(),ot,2)}function xe(at){var ot=at.getDay();return ot===0?7:ot}function me(at,ot){return g(l.OM.count((0,m.Z)(at)-1,at),ot,2)}function ve(at,ot){var At=at.getDay();return at=At>=4||At===0?(0,l.bL)(at):l.bL.ceil(at),g(l.bL.count((0,m.Z)(at),at)+((0,m.Z)(at).getDay()===4),ot,2)}function Le(at){return at.getDay()}function Ae(at,ot){return g(l.wA.count((0,m.Z)(at)-1,at),ot,2)}function we(at,ot){return g(at.getFullYear()%100,ot,2)}function se(at,ot){return g(at.getFullYear()%1e4,ot,4)}function oe(at){var ot=at.getTimezoneOffset();return(ot>0?"-":(ot*=-1,"+"))+g(ot/60|0,"0",2)+g(ot%60,"0",2)}function fe(at,ot){return g(at.getUTCDate(),ot,2)}function Se(at,ot){return g(at.getUTCHours(),ot,2)}function Me(at,ot){return g(at.getUTCHours()%12||12,ot,2)}function be(at,ot){return g(1+M.Z.count((0,f.Z)(at),at),ot,3)}function Ie(at,ot){return g(at.getUTCMilliseconds(),ot,3)}function Be(at,ot){return Ie(at,ot)+"000"}function ce(at,ot){return g(at.getUTCMonth()+1,ot,2)}function Te(at,ot){return g(at.getUTCMinutes(),ot,2)}function ye(at,ot){return g(at.getUTCSeconds(),ot,2)}function Pe(at){var ot=at.getUTCDay();return ot===0?7:ot}function Re(at,ot){return g(A.Ox.count((0,f.Z)(at)-1,at),ot,2)}function ze(at,ot){var At=at.getUTCDay();return at=At>=4||At===0?(0,A.hB)(at):A.hB.ceil(at),g(A.hB.count((0,f.Z)(at),at)+((0,f.Z)(at).getUTCDay()===4),ot,2)}function He(at){return at.getUTCDay()}function We(at,ot){return g(A.l6.count((0,f.Z)(at)-1,at),ot,2)}function Je(at,ot){return g(at.getUTCFullYear()%100,ot,2)}function lt(at,ot){return g(at.getUTCFullYear()%1e4,ot,4)}function et(){return"+0000"}function yt(){return"%"}function _t(at){return+at}function xt(at){return Math.floor(+at/1e3)}n=r({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),s=n.format,n.parse,a=n.utcFormat,n.utcParse},82301:function($,P,t){t.d(P,{a:function(){return _}});var A=t(30052),M=t(54263),l=(0,A.Z)(function(m){m.setHours(0,0,0,0)},function(m,f){m.setDate(m.getDate()+f)},function(m,f){return(f-m-(f.getTimezoneOffset()-m.getTimezoneOffset())*M.yB)/M.UD},function(m){return m.getDate()-1});P.Z=l;var _=l.range},54263:function($,P,t){t.d(P,{UD:function(){return _},Y2:function(){return l},Ym:function(){return A},iM:function(){return m},yB:function(){return M}});var A=1e3,M=6e4,l=36e5,_=864e5,m=6048e5},81041:function($,P,t){t.r(P),t.d(P,{timeDay:function(){return p.Z},timeDays:function(){return p.a},timeFriday:function(){return c.mC},timeFridays:function(){return c.b$},timeHour:function(){return a},timeHours:function(){return u},timeInterval:function(){return A.Z},timeMillisecond:function(){return l},timeMilliseconds:function(){return _},timeMinute:function(){return r},timeMinutes:function(){return n},timeMonday:function(){return c.wA},timeMondays:function(){return c.bJ},timeMonth:function(){return g},timeMonths:function(){return h},timeSaturday:function(){return c.EY},timeSaturdays:function(){return c.Ff},timeSecond:function(){return o},timeSeconds:function(){return e},timeSunday:function(){return c.OM},timeSundays:function(){return c.vm},timeThursday:function(){return c.bL},timeThursdays:function(){return c.$t},timeTuesday:function(){return c.sy},timeTuesdays:function(){return c.aU},timeWednesday:function(){return c.zg},timeWednesdays:function(){return c.Ld},timeWeek:function(){return c.OM},timeWeeks:function(){return c.vm},timeYear:function(){return b.Z},timeYears:function(){return b.g},utcDay:function(){return E.Z},utcDays:function(){return E.y},utcFriday:function(){return C.QQ},utcFridays:function(){return C.fz},utcHour:function(){return S},utcHours:function(){return T},utcMillisecond:function(){return l},utcMilliseconds:function(){return _},utcMinute:function(){return y},utcMinutes:function(){return w},utcMonday:function(){return C.l6},utcMondays:function(){return C.$3},utcMonth:function(){return O},utcMonths:function(){return z},utcSaturday:function(){return C.g4},utcSaturdays:function(){return C.Q_},utcSecond:function(){return o},utcSeconds:function(){return e},utcSunday:function(){return C.Ox},utcSundays:function(){return C.SU},utcThursday:function(){return C.hB},utcThursdays:function(){return C.xj},utcTuesday:function(){return C.J1},utcTuesdays:function(){return C.DK},utcWednesday:function(){return C.b3},utcWednesdays:function(){return C.uy},utcWeek:function(){return C.Ox},utcWeeks:function(){return C.SU},utcYear:function(){return G.Z},utcYears:function(){return G.D}});var A=t(30052),M=(0,A.Z)(function(){},function(I,H){I.setTime(+I+H)},function(I,H){return H-I});M.every=function(I){return I=Math.floor(I),isFinite(I)&&I>0?I>1?(0,A.Z)(function(H){H.setTime(Math.floor(H/I)*I)},function(H,N){H.setTime(+H+N*I)},function(H,N){return(N-H)/I}):M:null};var l=M,_=M.range,m=t(54263),f=(0,A.Z)(function(I){I.setTime(I-I.getMilliseconds())},function(I,H){I.setTime(+I+H*m.Ym)},function(I,H){return(H-I)/m.Ym},function(I){return I.getUTCSeconds()}),o=f,e=f.range,i=(0,A.Z)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*m.Ym)},function(I,H){I.setTime(+I+H*m.yB)},function(I,H){return(H-I)/m.yB},function(I){return I.getMinutes()}),r=i,n=i.range,s=(0,A.Z)(function(I){I.setTime(I-I.getMilliseconds()-I.getSeconds()*m.Ym-I.getMinutes()*m.yB)},function(I,H){I.setTime(+I+H*m.Y2)},function(I,H){return(H-I)/m.Y2},function(I){return I.getHours()}),a=s,u=s.range,p=t(82301),c=t(59879),x=(0,A.Z)(function(I){I.setDate(1),I.setHours(0,0,0,0)},function(I,H){I.setMonth(I.getMonth()+H)},function(I,H){return H.getMonth()-I.getMonth()+12*(H.getFullYear()-I.getFullYear())},function(I){return I.getMonth()}),g=x,h=x.range,b=t(34823),v=(0,A.Z)(function(I){I.setUTCSeconds(0,0)},function(I,H){I.setTime(+I+H*m.yB)},function(I,H){return(H-I)/m.yB},function(I){return I.getUTCMinutes()}),y=v,w=v.range,d=(0,A.Z)(function(I){I.setUTCMinutes(0,0,0)},function(I,H){I.setTime(+I+H*m.Y2)},function(I,H){return(H-I)/m.Y2},function(I){return I.getUTCHours()}),S=d,T=d.range,E=t(48480),C=t(58176),L=(0,A.Z)(function(I){I.setUTCDate(1),I.setUTCHours(0,0,0,0)},function(I,H){I.setUTCMonth(I.getUTCMonth()+H)},function(I,H){return H.getUTCMonth()-I.getUTCMonth()+12*(H.getUTCFullYear()-I.getUTCFullYear())},function(I){return I.getUTCMonth()}),O=L,z=L.range,G=t(79791)},30052:function($,P,t){t.d(P,{Z:function(){return l}});var A=new Date,M=new Date;function l(_,m,f,o){function e(i){return _(i=arguments.length===0?new Date:new Date(+i)),i}return e.floor=function(i){return _(i=new Date(+i)),i},e.ceil=function(i){return _(i=new Date(i-1)),m(i,1),_(i),i},e.round=function(i){var r=e(i),n=e.ceil(i);return i-r<n-i?r:n},e.offset=function(i,r){return m(i=new Date(+i),r==null?1:Math.floor(r)),i},e.range=function(i,r,n){var s,a=[];if(i=e.ceil(i),n=n==null?1:Math.floor(n),!(i<r&&n>0))return a;do a.push(s=new Date(+i)),m(i,n),_(i);while(s<i&&i<r);return a},e.filter=function(i){return l(function(r){if(r>=r)for(;_(r),!i(r);)r.setTime(r-1)},function(r,n){if(r>=r)if(n<0)for(;++n<=0;)for(;m(r,-1),!i(r););else for(;--n>=0;)for(;m(r,1),!i(r););})},f&&(e.count=function(i,r){return A.setTime(+i),M.setTime(+r),_(A),_(M),Math.floor(f(A,M))},e.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?e.filter(o?function(r){return o(r)%i==0}:function(r){return e.count(0,r)%i==0}):e:null}),e}},48480:function($,P,t){t.d(P,{y:function(){return _}});var A=t(30052),M=t(54263),l=(0,A.Z)(function(m){m.setUTCHours(0,0,0,0)},function(m,f){m.setUTCDate(m.getUTCDate()+f)},function(m,f){return(f-m)/M.UD},function(m){return m.getUTCDate()-1});P.Z=l;var _=l.range},58176:function($,P,t){t.d(P,{$3:function(){return s},DK:function(){return a},J1:function(){return f},Ox:function(){return _},QQ:function(){return i},Q_:function(){return x},SU:function(){return n},b3:function(){return o},fz:function(){return c},g4:function(){return r},hB:function(){return e},l6:function(){return m},uy:function(){return u},xj:function(){return p}});var A=t(30052),M=t(54263);function l(g){return(0,A.Z)(function(h){h.setUTCDate(h.getUTCDate()-(h.getUTCDay()+7-g)%7),h.setUTCHours(0,0,0,0)},function(h,b){h.setUTCDate(h.getUTCDate()+7*b)},function(h,b){return(b-h)/M.iM})}var _=l(0),m=l(1),f=l(2),o=l(3),e=l(4),i=l(5),r=l(6),n=_.range,s=m.range,a=f.range,u=o.range,p=e.range,c=i.range,x=r.range},79791:function($,P,t){t.d(P,{D:function(){return l}});var A=t(30052),M=(0,A.Z)(function(_){_.setUTCMonth(0,1),_.setUTCHours(0,0,0,0)},function(_,m){_.setUTCFullYear(_.getUTCFullYear()+m)},function(_,m){return m.getUTCFullYear()-_.getUTCFullYear()},function(_){return _.getUTCFullYear()});M.every=function(_){return isFinite(_=Math.floor(_))&&_>0?(0,A.Z)(function(m){m.setUTCFullYear(Math.floor(m.getUTCFullYear()/_)*_),m.setUTCMonth(0,1),m.setUTCHours(0,0,0,0)},function(m,f){m.setUTCFullYear(m.getUTCFullYear()+f*_)}):null},P.Z=M;var l=M.range},59879:function($,P,t){t.d(P,{$t:function(){return p},EY:function(){return r},Ff:function(){return x},Ld:function(){return u},OM:function(){return _},aU:function(){return a},b$:function(){return c},bJ:function(){return s},bL:function(){return e},mC:function(){return i},sy:function(){return f},vm:function(){return n},wA:function(){return m},zg:function(){return o}});var A=t(30052),M=t(54263);function l(g){return(0,A.Z)(function(h){h.setDate(h.getDate()-(h.getDay()+7-g)%7),h.setHours(0,0,0,0)},function(h,b){h.setDate(h.getDate()+7*b)},function(h,b){return(b-h-(b.getTimezoneOffset()-h.getTimezoneOffset())*M.yB)/M.iM})}var _=l(0),m=l(1),f=l(2),o=l(3),e=l(4),i=l(5),r=l(6),n=_.range,s=m.range,a=f.range,u=o.range,p=e.range,c=i.range,x=r.range},34823:function($,P,t){t.d(P,{g:function(){return l}});var A=t(30052),M=(0,A.Z)(function(_){_.setMonth(0,1),_.setHours(0,0,0,0)},function(_,m){_.setFullYear(_.getFullYear()+m)},function(_,m){return m.getFullYear()-_.getFullYear()},function(_){return _.getFullYear()});M.every=function(_){return isFinite(_=Math.floor(_))&&_>0?(0,A.Z)(function(m){m.setFullYear(Math.floor(m.getFullYear()/_)*_),m.setMonth(0,1),m.setHours(0,0,0,0)},function(m,f){m.setFullYear(m.getFullYear()+f*_)}):null},P.Z=M;var l=M.range},17045:function($,P,t){var A=t(8709),M=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",l=Object.prototype.toString,_=Array.prototype.concat,m=Object.defineProperty,f=t(55622)(),o=m&&f,e=function(r,n,s,a){if(n in r){if(a===!0){if(r[n]===s)return}else if(typeof(u=a)!="function"||l.call(u)!=="[object Function]"||!a())return}var u;o?m(r,n,{configurable:!0,enumerable:!1,value:s,writable:!0}):r[n]=s},i=function(r,n){var s=arguments.length>2?arguments[2]:{},a=A(n);M&&(a=_.call(a,Object.getOwnPropertySymbols(n)));for(var u=0;u<a.length;u+=1)e(r,a[u],n[a[u]],s[a[u]])};i.supportsDescriptors=!!o,$.exports=i},46775:function($){$.exports=function(){for(var P=0;P<arguments.length;P++)if(arguments[P]!==void 0)return arguments[P]}},53545:function($){$.exports=A;var P=(A.canvas=document.createElement("canvas")).getContext("2d"),t=M([32,126]);function A(l,_){Array.isArray(l)&&(l=l.join(", "));var m,f={},o=16,e=.05;_&&(_.length===2&&typeof _[0]=="number"?m=M(_):Array.isArray(_)?m=_:(_.o?m=M(_.o):_.pairs&&(m=_.pairs),_.fontSize&&(o=_.fontSize),_.threshold!=null&&(e=_.threshold))),m||(m=t),P.font=o+"px "+l;for(var i=0;i<m.length;i++){var r=m[i],n=P.measureText(r[0]).width+P.measureText(r[1]).width,s=P.measureText(r).width;if(Math.abs(n-s)>o*e){var a=(s-n)/o;f[r]=1e3*a}}return f}function M(l){for(var _=[],m=l[0];m<=l[1];m++)for(var f=String.fromCharCode(m),o=l[0];o<l[1];o++){var e=f+String.fromCharCode(o);_.push(e)}return _}A.createPairs=M,A.ascii=t},31457:function($,P,t){var A=t(65185),M=t(18625),l={M:"moveTo",C:"bezierCurveTo"};$.exports=function(_,m){_.beginPath(),M(A(m)).forEach(function(f){var o=f[0],e=f.slice(1);_[l[o]].apply(_,e)}),_.closePath()}},90660:function($){$.exports=function(P){switch(P){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},12129:function($){function P(t,A,M){var l=0|t[M];if(l<=0)return[];var _,m=new Array(l);if(M===t.length-1)for(_=0;_<l;++_)m[_]=A;else for(_=0;_<l;++_)m[_]=P(t,A,M+1);return m}$.exports=function(t,A){switch(A===void 0&&(A=0),typeof t){case"number":if(t>0)return function(M,l){var _,m;for(_=new Array(M),m=0;m<M;++m)_[m]=l;return _}(0|t,A);break;case"object":if(typeof t.length=="number")return P(t,A,0)}return[]}},11474:function($){function P(S,T,E){E=E||2;var C,L,O,z,G,I,H,N=T&&T.length,F=N?T[0]*E:S.length,V=t(S,0,F,E,!0),W=[];if(!V||V.next===V.prev)return W;if(N&&(V=function(Q,X,q,Z){var J,ne,re,ae=[];for(J=0,ne=X.length;J<ne;J++)(re=t(Q,X[J]*Z,J<ne-1?X[J+1]*Z:Q.length,Z,!1))===re.next&&(re.steiner=!0),ae.push(n(re));for(ae.sort(o),J=0;J<ae.length;J++)e(ae[J],q),q=A(q,q.next);return q}(S,T,V,E)),S.length>80*E){C=O=S[0],L=z=S[1];for(var te=E;te<F;te+=E)(G=S[te])<C&&(C=G),(I=S[te+1])<L&&(L=I),G>O&&(O=G),I>z&&(z=I);H=(H=Math.max(O-C,z-L))!==0?1/H:0}return M(V,W,E,C,L,H),W}function t(S,T,E,C,L){var O,z;if(L===d(S,T,E,C)>0)for(O=T;O<E;O+=C)z=v(O,S[O],S[O+1],z);else for(O=E-C;O>=T;O-=C)z=v(O,S[O],S[O+1],z);return z&&p(z,z.next)&&(y(z),z=z.next),z}function A(S,T){if(!S)return S;T||(T=S);var E,C=S;do if(E=!1,C.steiner||!p(C,C.next)&&u(C.prev,C,C.next)!==0)C=C.next;else{if(y(C),(C=T=C.prev)===C.next)break;E=!0}while(E||C!==T);return T}function M(S,T,E,C,L,O,z){if(S){!z&&O&&function(N,F,V,W){var te=N;do te.z===null&&(te.z=r(te.x,te.y,F,V,W)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==N);te.prevZ.nextZ=null,te.prevZ=null,function(Q){var X,q,Z,J,ne,re,ae,ue,he=1;do{for(q=Q,Q=null,ne=null,re=0;q;){for(re++,Z=q,ae=0,X=0;X<he&&(ae++,Z=Z.nextZ);X++);for(ue=he;ae>0||ue>0&&Z;)ae!==0&&(ue===0||!Z||q.z<=Z.z)?(J=q,q=q.nextZ,ae--):(J=Z,Z=Z.nextZ,ue--),ne?ne.nextZ=J:Q=J,J.prevZ=ne,ne=J;q=Z}ne.nextZ=null,he*=2}while(re>1)}(te)}(S,C,L,O);for(var G,I,H=S;S.prev!==S.next;)if(G=S.prev,I=S.next,O?_(S,C,L,O):l(S))T.push(G.i/E),T.push(S.i/E),T.push(I.i/E),y(S),S=I.next,H=I.next;else if((S=I)===H){z?z===1?M(S=m(A(S),T,E),T,E,C,L,O,2):z===2&&f(S,T,E,C,L,O):M(A(S),T,E,C,L,O,1);break}}}function l(S){var T=S.prev,E=S,C=S.next;if(u(T,E,C)>=0)return!1;for(var L=S.next.next;L!==S.prev;){if(s(T.x,T.y,E.x,E.y,C.x,C.y,L.x,L.y)&&u(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function _(S,T,E,C){var L=S.prev,O=S,z=S.next;if(u(L,O,z)>=0)return!1;for(var G=L.x<O.x?L.x<z.x?L.x:z.x:O.x<z.x?O.x:z.x,I=L.y<O.y?L.y<z.y?L.y:z.y:O.y<z.y?O.y:z.y,H=L.x>O.x?L.x>z.x?L.x:z.x:O.x>z.x?O.x:z.x,N=L.y>O.y?L.y>z.y?L.y:z.y:O.y>z.y?O.y:z.y,F=r(G,I,T,E,C),V=r(H,N,T,E,C),W=S.prevZ,te=S.nextZ;W&&W.z>=F&&te&&te.z<=V;){if(W!==S.prev&&W!==S.next&&s(L.x,L.y,O.x,O.y,z.x,z.y,W.x,W.y)&&u(W.prev,W,W.next)>=0||(W=W.prevZ,te!==S.prev&&te!==S.next&&s(L.x,L.y,O.x,O.y,z.x,z.y,te.x,te.y)&&u(te.prev,te,te.next)>=0))return!1;te=te.nextZ}for(;W&&W.z>=F;){if(W!==S.prev&&W!==S.next&&s(L.x,L.y,O.x,O.y,z.x,z.y,W.x,W.y)&&u(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;te&&te.z<=V;){if(te!==S.prev&&te!==S.next&&s(L.x,L.y,O.x,O.y,z.x,z.y,te.x,te.y)&&u(te.prev,te,te.next)>=0)return!1;te=te.nextZ}return!0}function m(S,T,E){var C=S;do{var L=C.prev,O=C.next.next;!p(L,O)&&c(L,C,C.next,O)&&h(L,O)&&h(O,L)&&(T.push(L.i/E),T.push(C.i/E),T.push(O.i/E),y(C),y(C.next),C=S=O),C=C.next}while(C!==S);return A(C)}function f(S,T,E,C,L,O){var z=S;do{for(var G=z.next.next;G!==z.prev;){if(z.i!==G.i&&a(z,G)){var I=b(z,G);return z=A(z,z.next),I=A(I,I.next),M(z,T,E,C,L,O),void M(I,T,E,C,L,O)}G=G.next}z=z.next}while(z!==S)}function o(S,T){return S.x-T.x}function e(S,T){if(T=function(C,L){var O,z=L,G=C.x,I=C.y,H=-1/0;do{if(I<=z.y&&I>=z.next.y&&z.next.y!==z.y){var N=z.x+(I-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(N<=G&&N>H){if(H=N,N===G){if(I===z.y)return z;if(I===z.next.y)return z.next}O=z.x<z.next.x?z:z.next}}z=z.next}while(z!==L);if(!O)return null;if(G===H)return O;var F,V=O,W=O.x,te=O.y,Q=1/0;z=O;do G>=z.x&&z.x>=W&&G!==z.x&&s(I<te?G:H,I,W,te,I<te?H:G,I,z.x,z.y)&&(F=Math.abs(I-z.y)/(G-z.x),h(z,C)&&(F<Q||F===Q&&(z.x>O.x||z.x===O.x&&i(O,z)))&&(O=z,Q=F)),z=z.next;while(z!==V);return O}(S,T),T){var E=b(T,S);A(T,T.next),A(E,E.next)}}function i(S,T){return u(S.prev,S,T.prev)<0&&u(T.next,S,S.next)<0}function r(S,T,E,C,L){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-E)*L)|S<<8))|S<<4))|S<<2))|S<<1))|(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T=32767*(T-C)*L)|T<<8))|T<<4))|T<<2))|T<<1))<<1}function n(S){var T=S,E=S;do(T.x<E.x||T.x===E.x&&T.y<E.y)&&(E=T),T=T.next;while(T!==S);return E}function s(S,T,E,C,L,O,z,G){return(L-z)*(T-G)-(S-z)*(O-G)>=0&&(S-z)*(C-G)-(E-z)*(T-G)>=0&&(E-z)*(O-G)-(L-z)*(C-G)>=0}function a(S,T){return S.next.i!==T.i&&S.prev.i!==T.i&&!function(E,C){var L=E;do{if(L.i!==E.i&&L.next.i!==E.i&&L.i!==C.i&&L.next.i!==C.i&&c(L,L.next,E,C))return!0;L=L.next}while(L!==E);return!1}(S,T)&&(h(S,T)&&h(T,S)&&function(E,C){var L=E,O=!1,z=(E.x+C.x)/2,G=(E.y+C.y)/2;do L.y>G!=L.next.y>G&&L.next.y!==L.y&&z<(L.next.x-L.x)*(G-L.y)/(L.next.y-L.y)+L.x&&(O=!O),L=L.next;while(L!==E);return O}(S,T)&&(u(S.prev,S,T.prev)||u(S,T.prev,T))||p(S,T)&&u(S.prev,S,S.next)>0&&u(T.prev,T,T.next)>0)}function u(S,T,E){return(T.y-S.y)*(E.x-T.x)-(T.x-S.x)*(E.y-T.y)}function p(S,T){return S.x===T.x&&S.y===T.y}function c(S,T,E,C){var L=g(u(S,T,E)),O=g(u(S,T,C)),z=g(u(E,C,S)),G=g(u(E,C,T));return L!==O&&z!==G||!(L!==0||!x(S,E,T))||!(O!==0||!x(S,C,T))||!(z!==0||!x(E,S,C))||!(G!==0||!x(E,T,C))}function x(S,T,E){return T.x<=Math.max(S.x,E.x)&&T.x>=Math.min(S.x,E.x)&&T.y<=Math.max(S.y,E.y)&&T.y>=Math.min(S.y,E.y)}function g(S){return S>0?1:S<0?-1:0}function h(S,T){return u(S.prev,S,S.next)<0?u(S,T,S.next)>=0&&u(S,S.prev,T)>=0:u(S,T,S.prev)<0||u(S,S.next,T)<0}function b(S,T){var E=new w(S.i,S.x,S.y),C=new w(T.i,T.x,T.y),L=S.next,O=T.prev;return S.next=T,T.prev=S,E.next=L,L.prev=E,C.next=E,E.prev=C,O.next=C,C.prev=O,C}function v(S,T,E,C){var L=new w(S,T,E);return C?(L.next=C.next,L.prev=C,C.next.prev=L,C.next=L):(L.prev=L,L.next=L),L}function y(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function w(S,T,E){this.i=S,this.x=T,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function d(S,T,E,C){for(var L=0,O=T,z=E-C;O<E;O+=C)L+=(S[z]-S[O])*(S[O+1]+S[z+1]),z=O;return L}$.exports=P,$.exports.default=P,P.deviation=function(S,T,E,C){var L=T&&T.length,O=L?T[0]*E:S.length,z=Math.abs(d(S,0,O,E));if(L)for(var G=0,I=T.length;G<I;G++){var H=T[G]*E,N=G<I-1?T[G+1]*E:S.length;z-=Math.abs(d(S,H,N,E))}var F=0;for(G=0;G<C.length;G+=3){var V=C[G]*E,W=C[G+1]*E,te=C[G+2]*E;F+=Math.abs((S[V]-S[te])*(S[W+1]-S[V+1])-(S[V]-S[W])*(S[te+1]-S[V+1]))}return z===0&&F===0?0:Math.abs((F-z)/z)},P.flatten=function(S){for(var T=S[0][0].length,E={vertices:[],holes:[],dimensions:T},C=0,L=0;L<S.length;L++){for(var O=0;O<S[L].length;O++)for(var z=0;z<T;z++)E.vertices.push(S[L][O][z]);L>0&&(C+=S[L-1].length,E.holes.push(C))}return E}},2502:function($,P,t){var A=t(68664);$.exports=function(M,l){var _,m=[],f=[],o=[],e={},i=[];function r(h){o[h]=!1,e.hasOwnProperty(h)&&Object.keys(e[h]).forEach(function(b){delete e[h][b],o[b]&&r(b)})}function n(h){var b,v,y=!1;for(f.push(h),o[h]=!0,b=0;b<i[h].length;b++)(v=i[h][b])===_?(s(_,f),y=!0):o[v]||(y=n(v));if(y)r(h);else for(b=0;b<i[h].length;b++){v=i[h][b];var w=e[v];w||(w={},e[v]=w),w[v]=!0}return f.pop(),y}function s(h,b){var v=[].concat(b).concat(h);l?l(n):m.push(v)}function a(h){(function(E){for(var C=0;C<M.length;C++)C<E&&(M[C]=[]),M[C]=M[C].filter(function(L){return L>=E})})(h);for(var b,v=A(M).components.filter(function(E){return E.length>1}),y=1/0,w=0;w<v.length;w++)for(var d=0;d<v[w].length;d++)v[w][d]<y&&(y=v[w][d],b=w);var S=v[b];if(!S)return!1;var T=M.map(function(E,C){return S.indexOf(C)===-1?[]:E.filter(function(L){return S.indexOf(L)!==-1})});return{leastVertex:y,adjList:T}}_=0;for(var u=M.length;_<u;){var p=a(_);if(_=p.leastVertex,i=p.adjList){for(var c=0;c<i.length;c++)for(var x=0;x<i[c].length;x++){var g=i[c][x];o[+g]=!1,e[g]={}}n(_),_+=1}else _=u}return l?void 0:m}},16134:function($,P,t){var A=t(36672);$.exports=function(){return A(this).length=0,this}},4892:function($,P,t){$.exports=t(64404)()?Array.from:t(49441)},64404:function($){$.exports=function(){var P,t,A=Array.from;return typeof A=="function"&&(t=A(P=["raz","dwa"]),!!(t&&t!==P&&t[1]==="dwa"))}},49441:function($,P,t){var A=t(8260).iterator,M=t(73051),l=t(33717),_=t(35976),m=t(78513),f=t(36672),o=t(95296),e=t(87963),i=Array.isArray,r=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;$.exports=function(a){var u,p,c,x,g,h,b,v,y,w,d=arguments[1],S=arguments[2];if(a=Object(f(a)),o(d)&&m(d),this&&this!==Array&&l(this))u=this;else{if(!d){if(M(a))return(g=a.length)!==1?Array.apply(null,a):((x=new Array(1))[0]=a[0],x);if(i(a)){for(x=new Array(g=a.length),p=0;p<g;++p)x[p]=a[p];return x}}x=[]}if(!i(a)){if((y=a[A])!==void 0){for(b=m(y).call(a),u&&(x=new u),v=b.next(),p=0;!v.done;)w=d?r.call(d,S,v.value,p):v.value,u?(n.value=w,s(x,p,n)):x[p]=w,v=b.next(),++p;g=p}else if(e(a)){for(g=a.length,u&&(x=new u),p=0,c=0;p<g;++p)w=a[p],p+1<g&&(h=w.charCodeAt(0))>=55296&&h<=56319&&(w+=a[++p]),w=d?r.call(d,S,w,c):w,u?(n.value=w,s(x,c,n)):x[c]=w,++c;g=c}}if(g===void 0)for(g=_(a.length),u&&(x=new u(g)),p=0;p<g;++p)w=d?r.call(d,S,a[p],p):a[p],u?(n.value=w,s(x,p,n)):x[p]=w;return u&&(n.value=null,x.length=g),x}},73051:function($){var P=Object.prototype.toString,t=P.call(function(){return arguments}());$.exports=function(A){return P.call(A)===t}},33717:function($){var P=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);$.exports=function(A){return typeof A=="function"&&t(P.call(A))}},52345:function($){$.exports=function(){}},9953:function($,P,t){$.exports=t(90436)()?Math.sign:t(6069)},90436:function($){$.exports=function(){var P=Math.sign;return typeof P=="function"&&P(10)===1&&P(-20)===-1}},6069:function($){$.exports=function(P){return P=Number(P),isNaN(P)||P===0?P:P>0?1:-1}},56247:function($,P,t){var A=t(9953),M=Math.abs,l=Math.floor;$.exports=function(_){return isNaN(_)?0:(_=Number(_))!==0&&isFinite(_)?A(_)*l(M(_)):_}},35976:function($,P,t){var A=t(56247),M=Math.max;$.exports=function(l){return M(0,A(l))}},67260:function($,P,t){var A=t(78513),M=t(36672),l=Function.prototype.bind,_=Function.prototype.call,m=Object.keys,f=Object.prototype.propertyIsEnumerable;$.exports=function(o,e){return function(i,r){var n,s=arguments[2],a=arguments[3];return i=Object(M(i)),A(r),n=m(i),a&&n.sort(typeof a=="function"?l.call(a,i):void 0),typeof o!="function"&&(o=n[o]),_.call(o,n,function(u,p){return f.call(i,u)?_.call(r,s,i[u],u,i,p):e})}}},95879:function($,P,t){$.exports=t(73583)()?Object.assign:t(34205)},73583:function($){$.exports=function(){var P,t=Object.assign;return typeof t=="function"&&(t(P={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),P.foo+P.bar+P.trzy==="razdwatrzy")}},34205:function($,P,t){var A=t(68700),M=t(36672),l=Math.max;$.exports=function(_,m){var f,o,e,i=l(arguments.length,2);for(_=Object(M(_)),e=function(r){try{_[r]=m[r]}catch(n){f||(f=n)}},o=1;o<i;++o)A(m=arguments[o]).forEach(e);if(f!==void 0)throw f;return _}},19012:function($,P,t){var A=t(4892),M=t(95879),l=t(36672);$.exports=function(_){var m=Object(l(_)),f=arguments[1],o=Object(arguments[2]);if(m!==_&&!f)return m;var e={};return f?A(f,function(i){(o.ensure||i in _)&&(e[i]=_[i])}):M(e,_),e}},52818:function($,P,t){var A,M,l,_,m=Object.create;t(33247)()||(A=t(51882)),$.exports=A?A.level!==1?m:(M={},l={},_={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(f){l[f]=f!=="__proto__"?_:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(M,l),Object.defineProperty(A,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:M}),function(f,o){return m(f===null?M:f,o)}):m},96437:function($,P,t){$.exports=t(67260)("forEach")},99611:function($,P,t){var A=t(95296),M={function:!0,object:!0};$.exports=function(l){return A(l)&&M[typeof l]||!1}},95296:function($,P,t){var A=t(52345)();$.exports=function(M){return M!==A&&M!==null}},68700:function($,P,t){$.exports=t(13895)()?Object.keys:t(25217)},13895:function($){$.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},25217:function($,P,t){var A=t(95296),M=Object.keys;$.exports=function(l){return M(A(l)?Object(l):l)}},16906:function($,P,t){var A=t(78513),M=t(96437),l=Function.prototype.call;$.exports=function(_,m){var f={},o=arguments[2];return A(m),M(_,function(e,i,r,n){f[i]=l.call(m,o,e,i,r,n)}),f}},21780:function($,P,t){var A=t(95296),M=Array.prototype.forEach,l=Object.create;$.exports=function(_){var m=l(null);return M.call(arguments,function(f){A(f)&&function(o,e){var i;for(i in o)e[i]=o[i]}(Object(f),m)}),m}},1496:function($,P,t){$.exports=t(33247)()?Object.setPrototypeOf:t(51882)},33247:function($){var P=Object.create,t=Object.getPrototypeOf,A={};$.exports=function(){var M=Object.setPrototypeOf;return typeof M=="function"&&t(M((arguments[0]||P)(null),A))===A}},51882:function($,P,t){var A,M,l,_,m=t(99611),f=t(36672),o=Object.prototype.isPrototypeOf,e=Object.defineProperty,i={configurable:!0,enumerable:!1,writable:!0,value:void 0};A=function(r,n){if(f(r),n===null||m(n))return r;throw new TypeError("Prototype must be null or an object")},$.exports=(M=function(){var r,n=Object.create(null),s={},a=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(a){try{(r=a.set).call(n,s)}catch{}if(Object.getPrototypeOf(n)===s)return{set:r,level:2}}return n.__proto__=s,Object.getPrototypeOf(n)===s?{level:2}:((n={}).__proto__=s,Object.getPrototypeOf(n)===s&&{level:1})}(),M?(M.level===2?M.set?(_=M.set,l=function(r,n){return _.call(A(r,n),n),r}):l=function(r,n){return A(r,n).__proto__=n,r}:l=function r(n,s){var a;return A(n,s),(a=o.call(r.nullPolyfill,n))&&delete r.nullPolyfill.__proto__,s===null&&(s=r.nullPolyfill),n.__proto__=s,a&&e(r.nullPolyfill,"__proto__",i),n},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:M.level})):null),t(52818)},78513:function($){$.exports=function(P){if(typeof P!="function")throw new TypeError(P+" is not a function");return P}},98976:function($,P,t){var A=t(99611);$.exports=function(M){if(!A(M))throw new TypeError(M+" is not an Object");return M}},36672:function($,P,t){var A=t(95296);$.exports=function(M){if(!A(M))throw new TypeError("Cannot use null or undefined");return M}},66741:function($,P,t){$.exports=t(17557)()?String.prototype.contains:t(60381)},17557:function($){var P="razdwatrzy";$.exports=function(){return typeof P.contains=="function"&&P.contains("dwa")===!0&&P.contains("foo")===!1}},60381:function($){var P=String.prototype.indexOf;$.exports=function(t){return P.call(this,t,arguments[1])>-1}},87963:function($){var P=Object.prototype.toString,t=P.call("");$.exports=function(A){return typeof A=="string"||A&&typeof A=="object"&&(A instanceof String||P.call(A)===t)||!1}},43043:function($){var P=Object.create(null),t=Math.random;$.exports=function(){var A;do A=t().toString(36).slice(2);while(P[A]);return A}},32411:function($,P,t){var A,M=t(1496),l=t(66741),_=t(62072),m=t(8260),f=t(95426),o=Object.defineProperty;A=$.exports=function(e,i){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");f.call(this,e),i=i?l.call(i,"key+value")?"key+value":l.call(i,"key")?"key":"value":"value",o(this,"__kind__",_("",i))},M&&M(A,f),delete A.prototype.constructor,A.prototype=Object.create(f.prototype,{_resolve:_(function(e){return this.__kind__==="value"?this.__list__[e]:this.__kind__==="key+value"?[e,this.__list__[e]]:e})}),o(A.prototype,m.toStringTag,_("c","Array Iterator"))},27515:function($,P,t){var A=t(73051),M=t(78513),l=t(87963),_=t(66661),m=Array.isArray,f=Function.prototype.call,o=Array.prototype.some;$.exports=function(e,i){var r,n,s,a,u,p,c,x,g=arguments[2];if(m(e)||A(e)?r="array":l(e)?r="string":e=_(e),M(i),s=function(){a=!0},r!=="array")if(r!=="string")for(n=e.next();!n.done;){if(f.call(i,g,n.value,s),a)return;n=e.next()}else for(p=e.length,u=0;u<p&&(c=e[u],u+1<p&&(x=c.charCodeAt(0))>=55296&&x<=56319&&(c+=e[++u]),f.call(i,g,c,s),!a);++u);else o.call(e,function(h){return f.call(i,g,h,s),a})}},66661:function($,P,t){var A=t(73051),M=t(87963),l=t(32411),_=t(259),m=t(58095),f=t(8260).iterator;$.exports=function(o){return typeof m(o)[f]=="function"?o[f]():A(o)?new l(o):M(o)?new _(o):new l(o)}},95426:function($,P,t){var A,M=t(16134),l=t(95879),_=t(78513),m=t(36672),f=t(62072),o=t(55174),e=t(8260),i=Object.defineProperty,r=Object.defineProperties;$.exports=A=function(n,s){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");r(this,{__list__:f("w",m(n)),__context__:f("w",s),__nextIndex__:f("w",0)}),s&&(_(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete A.prototype.constructor,r(A.prototype,l({_next:f(function(){var n;if(this.__list__)return this.__redo__&&(n=this.__redo__.shift())!==void 0?n:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:f(function(){return this._createResult(this._next())}),_createResult:f(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:f(function(n){return this.__list__[n]}),_unBind:f(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:f(function(){return"[object "+(this[e.toStringTag]||"Object")+"]"})},o({_onAdd:f(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,a){s>=n&&(this.__redo__[a]=++s)},this),this.__redo__.push(n)):i(this,"__redo__",f("c",[n])))}),_onDelete:f(function(n){var s;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&((s=this.__redo__.indexOf(n))!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(a,u){a>n&&(this.__redo__[u]=--a)},this)))}),_onClear:f(function(){this.__redo__&&M.call(this.__redo__),this.__nextIndex__=0})}))),i(A.prototype,e.iterator,f(function(){return this}))},35940:function($,P,t){var A=t(73051),M=t(95296),l=t(87963),_=t(8260).iterator,m=Array.isArray;$.exports=function(f){return!(!M(f)||!m(f)&&!l(f)&&!A(f)&&typeof f[_]!="function")}},259:function($,P,t){var A,M=t(1496),l=t(62072),_=t(8260),m=t(95426),f=Object.defineProperty;A=$.exports=function(o){if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");o=String(o),m.call(this,o),f(this,"__length__",l("",o.length))},M&&M(A,m),delete A.prototype.constructor,A.prototype=Object.create(m.prototype,{_next:l(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:l(function(o){var e,i=this.__list__[o];return this.__nextIndex__===this.__length__?i:(e=i.charCodeAt(0))>=55296&&e<=56319?i+this.__list__[this.__nextIndex__++]:i})}),f(A.prototype,_.toStringTag,l("c","String Iterator"))},58095:function($,P,t){var A=t(35940);$.exports=function(M){if(!A(M))throw new TypeError(M+" is not iterable");return M}},73523:function($){function P(t,A){if(t==null)throw new TypeError("Cannot convert first argument to object");for(var M=Object(t),l=1;l<arguments.length;l++){var _=arguments[l];if(_!=null)for(var m=Object.keys(Object(_)),f=0,o=m.length;f<o;f++){var e=m[f],i=Object.getOwnPropertyDescriptor(_,e);i!==void 0&&i.enumerable&&(M[e]=_[e])}}return M}$.exports={assign:P,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:P})}}},8260:function($,P,t){$.exports=t(69711)()?t(94908).Symbol:t(18415)},69711:function($,P,t){var A=t(94908),M={object:!0,symbol:!0};$.exports=function(){var l,_=A.Symbol;if(typeof _!="function")return!1;l=_("test symbol");try{String(l)}catch{return!1}return!!M[typeof _.iterator]&&!!M[typeof _.toPrimitive]&&!!M[typeof _.toStringTag]}},82276:function($){$.exports=function(P){return!!P&&(typeof P=="symbol"||!!P.constructor&&P.constructor.name==="Symbol"&&P[P.constructor.toStringTag]==="Symbol")}},29366:function($,P,t){var A=t(62072),M=Object.create,l=Object.defineProperty,_=Object.prototype,m=M(null);$.exports=function(f){for(var o,e,i=0;m[f+(i||"")];)++i;return m[f+=i||""]=!0,l(_,o="@@"+f,A.gs(null,function(r){e||(e=!0,l(this,o,A(r)),e=!1)})),o}},92842:function($,P,t){var A=t(62072),M=t(94908).Symbol;$.exports=function(l){return Object.defineProperties(l,{hasInstance:A("",M&&M.hasInstance||l("hasInstance")),isConcatSpreadable:A("",M&&M.isConcatSpreadable||l("isConcatSpreadable")),iterator:A("",M&&M.iterator||l("iterator")),match:A("",M&&M.match||l("match")),replace:A("",M&&M.replace||l("replace")),search:A("",M&&M.search||l("search")),species:A("",M&&M.species||l("species")),split:A("",M&&M.split||l("split")),toPrimitive:A("",M&&M.toPrimitive||l("toPrimitive")),toStringTag:A("",M&&M.toStringTag||l("toStringTag")),unscopables:A("",M&&M.unscopables||l("unscopables"))})}},13304:function($,P,t){var A=t(62072),M=t(53308),l=Object.create(null);$.exports=function(_){return Object.defineProperties(_,{for:A(function(m){return l[m]?l[m]:l[m]=_(String(m))}),keyFor:A(function(m){var f;for(f in M(m),l)if(l[f]===m)return f})})}},18415:function($,P,t){var A,M,l,_=t(62072),m=t(53308),f=t(94908).Symbol,o=t(29366),e=t(92842),i=t(13304),r=Object.create,n=Object.defineProperties,s=Object.defineProperty;if(typeof f=="function")try{String(f()),l=!0}catch{}else f=null;M=function(a){if(this instanceof M)throw new TypeError("Symbol is not a constructor");return A(a)},$.exports=A=function a(u){var p;if(this instanceof a)throw new TypeError("Symbol is not a constructor");return l?f(u):(p=r(M.prototype),u=u===void 0?"":String(u),n(p,{__description__:_("",u),__name__:_("",o(u))}))},e(A),i(A),n(M.prototype,{constructor:_(A),toString:_("",function(){return this.__name__})}),n(A.prototype,{toString:_(function(){return"Symbol ("+m(this).__description__+")"}),valueOf:_(function(){return m(this)})}),s(A.prototype,A.toPrimitive,_("",function(){var a=m(this);return typeof a=="symbol"?a:a.toString()})),s(A.prototype,A.toStringTag,_("c","Symbol")),s(M.prototype,A.toStringTag,_("c",A.prototype[A.toStringTag])),s(M.prototype,A.toPrimitive,_("c",A.prototype[A.toPrimitive]))},53308:function($,P,t){var A=t(82276);$.exports=function(M){if(!A(M))throw new TypeError(M+" is not a symbol");return M}},83522:function($,P,t){$.exports=t(96402)()?WeakMap:t(329)},96402:function($){$.exports=function(){var P,t;if(typeof WeakMap!="function")return!1;try{P=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return String(P)==="[object WeakMap]"&&typeof P.set=="function"&&P.set({},1)===P&&typeof P.delete=="function"&&typeof P.has=="function"&&P.get(t)==="one"}},96416:function($){$.exports=typeof WeakMap=="function"&&Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"},329:function($,P,t){var A,M=t(95296),l=t(1496),_=t(98976),m=t(36672),f=t(43043),o=t(62072),e=t(66661),i=t(27515),r=t(8260).toStringTag,n=t(96416),s=Array.isArray,a=Object.defineProperty,u=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;$.exports=A=function(){var c,x=arguments[0];if(!(this instanceof A))throw new TypeError("Constructor requires 'new'");return c=n&&l&&WeakMap!==A?l(new WeakMap,p(this)):this,M(x)&&(s(x)||(x=e(x))),a(c,"__weakMapData__",o("c","$weakMap$"+f())),x&&i(x,function(g){m(g),c.set(g[0],g[1])}),c},n&&(l&&l(A,WeakMap),A.prototype=Object.create(WeakMap.prototype,{constructor:o(A)})),Object.defineProperties(A.prototype,{delete:o(function(c){return!!u.call(_(c),this.__weakMapData__)&&(delete c[this.__weakMapData__],!0)}),get:o(function(c){if(u.call(_(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:o(function(c){return u.call(_(c),this.__weakMapData__)}),set:o(function(c,x){return a(_(c),this.__weakMapData__,o("c",x)),this}),toString:o(function(){return"[object WeakMap]"})}),a(A.prototype,r,o("c","WeakMap"))},15398:function($){var P,t=typeof Reflect=="object"?Reflect:null,A=t&&typeof t.apply=="function"?t.apply:function(u,p,c){return Function.prototype.apply.call(u,p,c)};P=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:function(u){return Object.getOwnPropertyNames(u)};var M=Number.isNaN||function(u){return u!=u};function l(){l.init.call(this)}$.exports=l,$.exports.once=function(u,p){return new Promise(function(c,x){function g(b){u.removeListener(p,h),x(b)}function h(){typeof u.removeListener=="function"&&u.removeListener("error",g),c([].slice.call(arguments))}a(u,p,h,{once:!0}),p!=="error"&&function(b,v,y){typeof b.on=="function"&&a(b,"error",v,{once:!0})}(u,g)})},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var _=10;function m(u){if(typeof u!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof u)}function f(u){return u._maxListeners===void 0?l.defaultMaxListeners:u._maxListeners}function o(u,p,c,x){var g,h,b,v;if(m(c),(h=u._events)===void 0?(h=u._events=Object.create(null),u._eventsCount=0):(h.newListener!==void 0&&(u.emit("newListener",p,c.listener?c.listener:c),h=u._events),b=h[p]),b===void 0)b=h[p]=c,++u._eventsCount;else if(typeof b=="function"?b=h[p]=x?[c,b]:[b,c]:x?b.unshift(c):b.push(c),(g=f(u))>0&&b.length>g&&!b.warned){b.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+b.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=u,y.type=p,y.count=b.length,v=y,console&&console.warn&&console.warn(v)}return u}function e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(u,p,c){var x={fired:!1,wrapFn:void 0,target:u,type:p,listener:c},g=e.bind(x);return g.listener=c,x.wrapFn=g,g}function r(u,p,c){var x=u._events;if(x===void 0)return[];var g=x[p];return g===void 0?[]:typeof g=="function"?c?[g.listener||g]:[g]:c?function(h){for(var b=new Array(h.length),v=0;v<b.length;++v)b[v]=h[v].listener||h[v];return b}(g):s(g,g.length)}function n(u){var p=this._events;if(p!==void 0){var c=p[u];if(typeof c=="function")return 1;if(c!==void 0)return c.length}return 0}function s(u,p){for(var c=new Array(p),x=0;x<p;++x)c[x]=u[x];return c}function a(u,p,c,x){if(typeof u.on=="function")x.once?u.once(p,c):u.on(p,c);else{if(typeof u.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof u);u.addEventListener(p,function g(h){x.once&&u.removeEventListener(p,g),c(h)})}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(u){if(typeof u!="number"||u<0||M(u))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+u+".");_=u}}),l.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||M(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this},l.prototype.getMaxListeners=function(){return f(this)},l.prototype.emit=function(u){for(var p=[],c=1;c<arguments.length;c++)p.push(arguments[c]);var x=u==="error",g=this._events;if(g!==void 0)x=x&&g.error===void 0;else if(!x)return!1;if(x){var h;if(p.length>0&&(h=p[0]),h instanceof Error)throw h;var b=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw b.context=h,b}var v=g[u];if(v===void 0)return!1;if(typeof v=="function")A(v,this,p);else{var y=v.length,w=s(v,y);for(c=0;c<y;++c)A(w[c],this,p)}return!0},l.prototype.addListener=function(u,p){return o(this,u,p,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(u,p){return o(this,u,p,!0)},l.prototype.once=function(u,p){return m(p),this.on(u,i(this,u,p)),this},l.prototype.prependOnceListener=function(u,p){return m(p),this.prependListener(u,i(this,u,p)),this},l.prototype.removeListener=function(u,p){var c,x,g,h,b;if(m(p),(x=this._events)===void 0)return this;if((c=x[u])===void 0)return this;if(c===p||c.listener===p)--this._eventsCount==0?this._events=Object.create(null):(delete x[u],x.removeListener&&this.emit("removeListener",u,c.listener||p));else if(typeof c!="function"){for(g=-1,h=c.length-1;h>=0;h--)if(c[h]===p||c[h].listener===p){b=c[h].listener,g=h;break}if(g<0)return this;g===0?c.shift():function(v,y){for(;y+1<v.length;y++)v[y]=v[y+1];v.pop()}(c,g),c.length===1&&(x[u]=c[0]),x.removeListener!==void 0&&this.emit("removeListener",u,b||p)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(u){var p,c,x;if((c=this._events)===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[u]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete c[u]),this;if(arguments.length===0){var g,h=Object.keys(c);for(x=0;x<h.length;++x)(g=h[x])!=="removeListener"&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(p=c[u])=="function")this.removeListener(u,p);else if(p!==void 0)for(x=p.length-1;x>=0;x--)this.removeListener(u,p[x]);return this},l.prototype.listeners=function(u){return r(this,u,!0)},l.prototype.rawListeners=function(u){return r(this,u,!1)},l.listenerCount=function(u,p){return typeof u.listenerCount=="function"?u.listenerCount(p):n.call(u,p)},l.prototype.listenerCount=n,l.prototype.eventNames=function(){return this._eventsCount>0?P(this._events):[]}},60774:function($){var P=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};$.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return P()}try{return __global__||P()}finally{delete Object.prototype.__global__}}()},94908:function($,P,t){$.exports=t(51152)()?globalThis:t(60774)},51152:function($){$.exports=function(){return typeof globalThis=="object"&&!!globalThis&&globalThis.Array===Array}},92770:function($,P,t){var A=t(18546);$.exports=function(M){var l=typeof M;if(l==="string"){var _=M;if((M=+M)==0&&A(_))return!1}else if(l!=="number")return!1;return M-M<1}},30120:function($,P,t){var A=t(90660);$.exports=function(M,l,_){if(!M)throw new TypeError("must specify data as first parameter");if(_=0|+(_||0),Array.isArray(M)&&M[0]&&typeof M[0][0]=="number"){var m,f,o,e,i=M[0].length,r=M.length*i;l&&typeof l!="string"||(l=new(A(l||"float32"))(r+_));var n=l.length-_;if(r!==n)throw new Error("source length "+r+" ("+i+"x"+M.length+") does not match destination length "+n);for(m=0,o=_;m<M.length;m++)for(f=0;f<i;f++)l[o++]=M[m][f]===null?NaN:M[m][f]}else if(l&&typeof l!="string")l.set(M,_);else{var s=A(l||"float32");if(Array.isArray(M)||l==="array")for(m=0,o=_,e=(l=new s(M.length+_)).length;o<e;o++,m++)l[o]=M[m]===null?NaN:M[m];else _===0?l=new s(M):(l=new s(M.length+_)).set(M,_)}return l}},68016:function($,P,t){var A=t(53313),M=[32,126];$.exports=function(l){var _=(l=l||{}).shape?l.shape:l.canvas?[l.canvas.width,l.canvas.height]:[512,512],m=l.canvas||document.createElement("canvas"),f=l.font,o=typeof l.step=="number"?[l.step,l.step]:l.step||[32,32],e=l.chars||M;if(f&&typeof f!="string"&&(f=A(f)),Array.isArray(e)){if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){for(var i=[],r=e[0],n=0;r<=e[1];r++)i[n++]=String.fromCharCode(r);e=i}}else e=String(e).split("");_=_.slice(),m.width=_[0],m.height=_[1];var s=m.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,m.width,m.height),s.font=f,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var a=o[0]/2,u=o[1]/2;for(r=0;r<e.length;r++)s.fillText(e[r],a,u),(a+=o[0])>_[0]-o[0]/2&&(a=o[0]/2,u+=o[1]);return m}},32879:function($){function P(l,_){_||(_={}),(typeof l=="string"||Array.isArray(l))&&(_.family=l);var m=Array.isArray(_.family)?_.family.join(", "):_.family;if(!m)throw Error("`family` must be defined");var f=_.size||_.fontSize||_.em||48,o=_.weight||_.fontWeight||"",e=(l=[_.style||_.fontStyle||"",o,f].join(" ")+"px "+m,_.origin||"top");if(P.cache[m]&&f<=P.cache[m].em)return t(P.cache[m],e);var i=_.canvas||P.canvas,r=i.getContext("2d"),n={upper:_.upper!==void 0?_.upper:"H",lower:_.lower!==void 0?_.lower:"x",descent:_.descent!==void 0?_.descent:"p",ascent:_.ascent!==void 0?_.ascent:"h",tittle:_.tittle!==void 0?_.tittle:"i",overshoot:_.overshoot!==void 0?_.overshoot:"O"},s=Math.ceil(1.5*f);i.height=s,i.width=.5*s,r.font=l;var a="H",u={top:0};r.clearRect(0,0,s,s),r.textBaseline="top",r.fillStyle="black",r.fillText(a,0,0);var p=A(r.getImageData(0,0,s,s));r.clearRect(0,0,s,s),r.textBaseline="bottom",r.fillText(a,0,s);var c=A(r.getImageData(0,0,s,s));u.lineHeight=u.bottom=s-c+p,r.clearRect(0,0,s,s),r.textBaseline="alphabetic",r.fillText(a,0,s);var x=s-A(r.getImageData(0,0,s,s))-1+p;u.baseline=u.alphabetic=x,r.clearRect(0,0,s,s),r.textBaseline="middle",r.fillText(a,0,.5*s);var g=A(r.getImageData(0,0,s,s));u.median=u.middle=s-g-1+p-.5*s,r.clearRect(0,0,s,s),r.textBaseline="hanging",r.fillText(a,0,.5*s);var h=A(r.getImageData(0,0,s,s));u.hanging=s-h-1+p-.5*s,r.clearRect(0,0,s,s),r.textBaseline="ideographic",r.fillText(a,0,s);var b=A(r.getImageData(0,0,s,s));if(u.ideographic=s-b-1+p,n.upper&&(r.clearRect(0,0,s,s),r.textBaseline="top",r.fillText(n.upper,0,0),u.upper=A(r.getImageData(0,0,s,s)),u.capHeight=u.baseline-u.upper),n.lower&&(r.clearRect(0,0,s,s),r.textBaseline="top",r.fillText(n.lower,0,0),u.lower=A(r.getImageData(0,0,s,s)),u.xHeight=u.baseline-u.lower),n.tittle&&(r.clearRect(0,0,s,s),r.textBaseline="top",r.fillText(n.tittle,0,0),u.tittle=A(r.getImageData(0,0,s,s))),n.ascent&&(r.clearRect(0,0,s,s),r.textBaseline="top",r.fillText(n.ascent,0,0),u.ascent=A(r.getImageData(0,0,s,s))),n.descent&&(r.clearRect(0,0,s,s),r.textBaseline="top",r.fillText(n.descent,0,0),u.descent=M(r.getImageData(0,0,s,s))),n.overshoot){r.clearRect(0,0,s,s),r.textBaseline="top",r.fillText(n.overshoot,0,0);var v=M(r.getImageData(0,0,s,s));u.overshoot=v-x}for(var y in u)u[y]/=f;return u.em=f,P.cache[m]=u,t(u,e)}function t(l,_){var m={};for(var f in typeof _=="string"&&(_=l[_]),l)f!=="em"&&(m[f]=l[f]-_);return m}function A(l){for(var _=l.height,m=l.data,f=3;f<m.length;f+=4)if(m[f]!==0)return Math.floor(.25*(f-3)/_)}function M(l){for(var _=l.height,m=l.data,f=m.length-1;f>0;f-=4)if(m[f]!==0)return Math.floor(.25*(f-3)/_)}$.exports=P,P.canvas=document.createElement("canvas"),P.cache={}},31353:function($,P,t){var A=t(85395),M=Object.prototype.toString,l=Object.prototype.hasOwnProperty;$.exports=function(_,m,f){if(!A(m))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=f),M.call(_)==="[object Array]"?function(e,i,r){for(var n=0,s=e.length;n<s;n++)l.call(e,n)&&(r==null?i(e[n],n,e):i.call(r,e[n],n,e))}(_,m,o):typeof _=="string"?function(e,i,r){for(var n=0,s=e.length;n<s;n++)r==null?i(e.charAt(n),n,e):i.call(r,e.charAt(n),n,e)}(_,m,o):function(e,i,r){for(var n in e)l.call(e,n)&&(r==null?i(e[n],n,e):i.call(r,e[n],n,e))}(_,m,o)}},73047:function($){var P=Array.prototype.slice,t=Object.prototype.toString;$.exports=function(A){var M=this;if(typeof M!="function"||t.call(M)!=="[object Function]")throw new TypeError("Function.prototype.bind called on incompatible "+M);for(var l,_=P.call(arguments,1),m=Math.max(0,M.length-_.length),f=[],o=0;o<m;o++)f.push("$"+o);if(l=Function("binder","return function ("+f.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof l){var i=M.apply(this,_.concat(P.call(arguments)));return Object(i)===i?i:this}return M.apply(A,_.concat(P.call(arguments)))}),M.prototype){var e=function(){};e.prototype=M.prototype,l.prototype=new e,e.prototype=null}return l}},77575:function($,P,t){var A=t(73047);$.exports=Function.prototype.bind||A},86249:function($){$.exports=function(P,t){if(typeof P!="string")throw new TypeError("must specify type string");if(t=t||{},typeof document>"u"&&!t.canvas)return null;var A=t.canvas||document.createElement("canvas");typeof t.width=="number"&&(A.width=t.width),typeof t.height=="number"&&(A.height=t.height);var M,l=t;try{var _=[P];P.indexOf("webgl")===0&&_.push("experimental-"+P);for(var m=0;m<_.length;m++)if(M=A.getContext(_[m],l))return M}catch{M=null}return M||null}},68318:function($,P,t){var A,M=SyntaxError,l=Function,_=TypeError,m=function(E){try{return l('"use strict"; return ('+E+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var o=function(){throw new _},e=f?function(){try{return o}catch{try{return f(arguments,"callee").get}catch{return o}}}():o,i=t(57877)(),r=Object.getPrototypeOf||function(E){return E.__proto__},n={},s=typeof Uint8Array>"u"?A:r(Uint8Array),a={"%AggregateError%":typeof AggregateError>"u"?A:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?A:ArrayBuffer,"%ArrayIteratorPrototype%":i?r([][Symbol.iterator]()):A,"%AsyncFromSyncIteratorPrototype%":A,"%AsyncFunction%":n,"%AsyncGenerator%":n,"%AsyncGeneratorFunction%":n,"%AsyncIteratorPrototype%":n,"%Atomics%":typeof Atomics>"u"?A:Atomics,"%BigInt%":typeof BigInt>"u"?A:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?A:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?A:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?A:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?A:Float32Array,"%Float64Array%":typeof Float64Array>"u"?A:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?A:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":n,"%Int8Array%":typeof Int8Array>"u"?A:Int8Array,"%Int16Array%":typeof Int16Array>"u"?A:Int16Array,"%Int32Array%":typeof Int32Array>"u"?A:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":i?r(r([][Symbol.iterator]())):A,"%JSON%":typeof JSON=="object"?JSON:A,"%Map%":typeof Map>"u"?A:Map,"%MapIteratorPrototype%":typeof Map<"u"&&i?r(new Map()[Symbol.iterator]()):A,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?A:Promise,"%Proxy%":typeof Proxy>"u"?A:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?A:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?A:Set,"%SetIteratorPrototype%":typeof Set<"u"&&i?r(new Set()[Symbol.iterator]()):A,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?A:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":i?r(""[Symbol.iterator]()):A,"%Symbol%":i?Symbol:A,"%SyntaxError%":M,"%ThrowTypeError%":e,"%TypedArray%":s,"%TypeError%":_,"%Uint8Array%":typeof Uint8Array>"u"?A:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?A:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?A:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?A:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?A:WeakMap,"%WeakRef%":typeof WeakRef>"u"?A:WeakRef,"%WeakSet%":typeof WeakSet>"u"?A:WeakSet};try{null.error}catch(E){var u=r(r(E));a["%Error.prototype%"]=u}var p=function E(C){var L;if(C==="%AsyncFunction%")L=m("async function () {}");else if(C==="%GeneratorFunction%")L=m("function* () {}");else if(C==="%AsyncGeneratorFunction%")L=m("async function* () {}");else if(C==="%AsyncGenerator%"){var O=E("%AsyncGeneratorFunction%");O&&(L=O.prototype)}else if(C==="%AsyncIteratorPrototype%"){var z=E("%AsyncGenerator%");z&&(L=r(z.prototype))}return a[C]=L,L},c={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x=t(77575),g=t(35065),h=x.call(Function.call,Array.prototype.concat),b=x.call(Function.apply,Array.prototype.splice),v=x.call(Function.call,String.prototype.replace),y=x.call(Function.call,String.prototype.slice),w=x.call(Function.call,RegExp.prototype.exec),d=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,T=function(E,C){var L,O=E;if(g(c,O)&&(O="%"+(L=c[O])[0]+"%"),g(a,O)){var z=a[O];if(z===n&&(z=p(O)),z===void 0&&!C)throw new _("intrinsic "+E+" exists, but is not available. Please file an issue!");return{alias:L,name:O,value:z}}throw new M("intrinsic "+E+" does not exist!")};$.exports=function(E,C){if(typeof E!="string"||E.length===0)throw new _("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof C!="boolean")throw new _('"allowMissing" argument must be a boolean');if(w(/^%?[^%]*%?$/,E)===null)throw new M("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var L=function(q){var Z=y(q,0,1),J=y(q,-1);if(Z==="%"&&J!=="%")throw new M("invalid intrinsic syntax, expected closing `%`");if(J==="%"&&Z!=="%")throw new M("invalid intrinsic syntax, expected opening `%`");var ne=[];return v(q,d,function(re,ae,ue,he){ne[ne.length]=ue?v(he,S,"$1"):ae||re}),ne}(E),O=L.length>0?L[0]:"",z=T("%"+O+"%",C),G=z.name,I=z.value,H=!1,N=z.alias;N&&(O=N[0],b(L,h([0,1],N)));for(var F=1,V=!0;F<L.length;F+=1){var W=L[F],te=y(W,0,1),Q=y(W,-1);if((te==='"'||te==="'"||te==="`"||Q==='"'||Q==="'"||Q==="`")&&te!==Q)throw new M("property names with quotes must have matching quotes");if(W!=="constructor"&&V||(H=!0),g(a,G="%"+(O+="."+W)+"%"))I=a[G];else if(I!=null){if(!(W in I)){if(!C)throw new _("base intrinsic for "+E+" exists, but the property is not available.");return}if(f&&F+1>=L.length){var X=f(I,W);I=(V=!!X)&&"get"in X&&!("originalValue"in X.get)?X.get:I[W]}else V=g(I,W),I=I[W];V&&!H&&(a[G]=I)}}return I}},85400:function($){$.exports=function(P,t){var A=t[0],M=t[1],l=t[2],_=t[3],m=t[4],f=t[5],o=t[6],e=t[7],i=t[8],r=t[9],n=t[10],s=t[11],a=t[12],u=t[13],p=t[14],c=t[15];return P[0]=f*(n*c-s*p)-r*(o*c-e*p)+u*(o*s-e*n),P[1]=-(M*(n*c-s*p)-r*(l*c-_*p)+u*(l*s-_*n)),P[2]=M*(o*c-e*p)-f*(l*c-_*p)+u*(l*e-_*o),P[3]=-(M*(o*s-e*n)-f*(l*s-_*n)+r*(l*e-_*o)),P[4]=-(m*(n*c-s*p)-i*(o*c-e*p)+a*(o*s-e*n)),P[5]=A*(n*c-s*p)-i*(l*c-_*p)+a*(l*s-_*n),P[6]=-(A*(o*c-e*p)-m*(l*c-_*p)+a*(l*e-_*o)),P[7]=A*(o*s-e*n)-m*(l*s-_*n)+i*(l*e-_*o),P[8]=m*(r*c-s*u)-i*(f*c-e*u)+a*(f*s-e*r),P[9]=-(A*(r*c-s*u)-i*(M*c-_*u)+a*(M*s-_*r)),P[10]=A*(f*c-e*u)-m*(M*c-_*u)+a*(M*e-_*f),P[11]=-(A*(f*s-e*r)-m*(M*s-_*r)+i*(M*e-_*f)),P[12]=-(m*(r*p-n*u)-i*(f*p-o*u)+a*(f*n-o*r)),P[13]=A*(r*p-n*u)-i*(M*p-l*u)+a*(M*n-l*r),P[14]=-(A*(f*p-o*u)-m*(M*p-l*u)+a*(M*o-l*f)),P[15]=A*(f*n-o*r)-m*(M*n-l*r)+i*(M*o-l*f),P}},42331:function($){$.exports=function(P){var t=new Float32Array(16);return t[0]=P[0],t[1]=P[1],t[2]=P[2],t[3]=P[3],t[4]=P[4],t[5]=P[5],t[6]=P[6],t[7]=P[7],t[8]=P[8],t[9]=P[9],t[10]=P[10],t[11]=P[11],t[12]=P[12],t[13]=P[13],t[14]=P[14],t[15]=P[15],t}},31042:function($){$.exports=function(P,t){return P[0]=t[0],P[1]=t[1],P[2]=t[2],P[3]=t[3],P[4]=t[4],P[5]=t[5],P[6]=t[6],P[7]=t[7],P[8]=t[8],P[9]=t[9],P[10]=t[10],P[11]=t[11],P[12]=t[12],P[13]=t[13],P[14]=t[14],P[15]=t[15],P}},11902:function($){$.exports=function(){var P=new Float32Array(16);return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},89887:function($){$.exports=function(P){var t=P[0],A=P[1],M=P[2],l=P[3],_=P[4],m=P[5],f=P[6],o=P[7],e=P[8],i=P[9],r=P[10],n=P[11],s=P[12],a=P[13],u=P[14],p=P[15];return(t*m-A*_)*(r*p-n*u)-(t*f-M*_)*(i*p-n*a)+(t*o-l*_)*(i*u-r*a)+(A*f-M*m)*(e*p-n*s)-(A*o-l*m)*(e*u-r*s)+(M*o-l*f)*(e*a-i*s)}},27812:function($){$.exports=function(P,t){var A=t[0],M=t[1],l=t[2],_=t[3],m=A+A,f=M+M,o=l+l,e=A*m,i=M*m,r=M*f,n=l*m,s=l*f,a=l*o,u=_*m,p=_*f,c=_*o;return P[0]=1-r-a,P[1]=i+c,P[2]=n-p,P[3]=0,P[4]=i-c,P[5]=1-e-a,P[6]=s+u,P[7]=0,P[8]=n+p,P[9]=s-u,P[10]=1-e-r,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},34045:function($){$.exports=function(P,t,A){var M,l,_,m=A[0],f=A[1],o=A[2],e=Math.sqrt(m*m+f*f+o*o);return Math.abs(e)<1e-6?null:(m*=e=1/e,f*=e,o*=e,M=Math.sin(t),_=1-(l=Math.cos(t)),P[0]=m*m*_+l,P[1]=f*m*_+o*M,P[2]=o*m*_-f*M,P[3]=0,P[4]=m*f*_-o*M,P[5]=f*f*_+l,P[6]=o*f*_+m*M,P[7]=0,P[8]=m*o*_+f*M,P[9]=f*o*_-m*M,P[10]=o*o*_+l,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P)}},45973:function($){$.exports=function(P,t,A){var M=t[0],l=t[1],_=t[2],m=t[3],f=M+M,o=l+l,e=_+_,i=M*f,r=M*o,n=M*e,s=l*o,a=l*e,u=_*e,p=m*f,c=m*o,x=m*e;return P[0]=1-(s+u),P[1]=r+x,P[2]=n-c,P[3]=0,P[4]=r-x,P[5]=1-(i+u),P[6]=a+p,P[7]=0,P[8]=n+c,P[9]=a-p,P[10]=1-(i+s),P[11]=0,P[12]=A[0],P[13]=A[1],P[14]=A[2],P[15]=1,P}},81472:function($){$.exports=function(P,t){return P[0]=t[0],P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=t[1],P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=t[2],P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},14669:function($){$.exports=function(P,t){return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=t[0],P[13]=t[1],P[14]=t[2],P[15]=1,P}},75262:function($){$.exports=function(P,t){var A=Math.sin(t),M=Math.cos(t);return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=M,P[6]=A,P[7]=0,P[8]=0,P[9]=-A,P[10]=M,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},331:function($){$.exports=function(P,t){var A=Math.sin(t),M=Math.cos(t);return P[0]=M,P[1]=0,P[2]=-A,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=A,P[9]=0,P[10]=M,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},11049:function($){$.exports=function(P,t){var A=Math.sin(t),M=Math.cos(t);return P[0]=M,P[1]=A,P[2]=0,P[3]=0,P[4]=-A,P[5]=M,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},75195:function($){$.exports=function(P,t,A,M,l,_,m){var f=1/(A-t),o=1/(l-M),e=1/(_-m);return P[0]=2*_*f,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=2*_*o,P[6]=0,P[7]=0,P[8]=(A+t)*f,P[9]=(l+M)*o,P[10]=(m+_)*e,P[11]=-1,P[12]=0,P[13]=0,P[14]=m*_*2*e,P[15]=0,P}},71551:function($){$.exports=function(P){return P[0]=1,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=1,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=1,P[11]=0,P[12]=0,P[13]=0,P[14]=0,P[15]=1,P}},79576:function($,P,t){$.exports={create:t(11902),clone:t(42331),copy:t(31042),identity:t(71551),transpose:t(88654),invert:t(95874),adjoint:t(85400),determinant:t(89887),multiply:t(91362),translate:t(31283),scale:t(10789),rotate:t(65074),rotateX:t(35545),rotateY:t(94918),rotateZ:t(15692),fromRotation:t(34045),fromRotationTranslation:t(45973),fromScaling:t(81472),fromTranslation:t(14669),fromXRotation:t(75262),fromYRotation:t(331),fromZRotation:t(11049),fromQuat:t(27812),frustum:t(75195),perspective:t(7864),perspectiveFromFieldOfView:t(35279),ortho:t(60378),lookAt:t(65551),str:t(6726)}},95874:function($){$.exports=function(P,t){var A=t[0],M=t[1],l=t[2],_=t[3],m=t[4],f=t[5],o=t[6],e=t[7],i=t[8],r=t[9],n=t[10],s=t[11],a=t[12],u=t[13],p=t[14],c=t[15],x=A*f-M*m,g=A*o-l*m,h=A*e-_*m,b=M*o-l*f,v=M*e-_*f,y=l*e-_*o,w=i*u-r*a,d=i*p-n*a,S=i*c-s*a,T=r*p-n*u,E=r*c-s*u,C=n*c-s*p,L=x*C-g*E+h*T+b*S-v*d+y*w;return L?(L=1/L,P[0]=(f*C-o*E+e*T)*L,P[1]=(l*E-M*C-_*T)*L,P[2]=(u*y-p*v+c*b)*L,P[3]=(n*v-r*y-s*b)*L,P[4]=(o*S-m*C-e*d)*L,P[5]=(A*C-l*S+_*d)*L,P[6]=(p*h-a*y-c*g)*L,P[7]=(i*y-n*h+s*g)*L,P[8]=(m*E-f*S+e*w)*L,P[9]=(M*S-A*E-_*w)*L,P[10]=(a*v-u*h+c*x)*L,P[11]=(r*h-i*v-s*x)*L,P[12]=(f*d-m*T-o*w)*L,P[13]=(A*T-M*d+l*w)*L,P[14]=(u*g-a*b-p*x)*L,P[15]=(i*b-r*g+n*x)*L,P):null}},65551:function($,P,t){var A=t(71551);$.exports=function(M,l,_,m){var f,o,e,i,r,n,s,a,u,p,c=l[0],x=l[1],g=l[2],h=m[0],b=m[1],v=m[2],y=_[0],w=_[1],d=_[2];return Math.abs(c-y)<1e-6&&Math.abs(x-w)<1e-6&&Math.abs(g-d)<1e-6?A(M):(s=c-y,a=x-w,u=g-d,f=b*(u*=p=1/Math.sqrt(s*s+a*a+u*u))-v*(a*=p),o=v*(s*=p)-h*u,e=h*a-b*s,(p=Math.sqrt(f*f+o*o+e*e))?(f*=p=1/p,o*=p,e*=p):(f=0,o=0,e=0),i=a*e-u*o,r=u*f-s*e,n=s*o-a*f,(p=Math.sqrt(i*i+r*r+n*n))?(i*=p=1/p,r*=p,n*=p):(i=0,r=0,n=0),M[0]=f,M[1]=i,M[2]=s,M[3]=0,M[4]=o,M[5]=r,M[6]=a,M[7]=0,M[8]=e,M[9]=n,M[10]=u,M[11]=0,M[12]=-(f*c+o*x+e*g),M[13]=-(i*c+r*x+n*g),M[14]=-(s*c+a*x+u*g),M[15]=1,M)}},91362:function($){$.exports=function(P,t,A){var M=t[0],l=t[1],_=t[2],m=t[3],f=t[4],o=t[5],e=t[6],i=t[7],r=t[8],n=t[9],s=t[10],a=t[11],u=t[12],p=t[13],c=t[14],x=t[15],g=A[0],h=A[1],b=A[2],v=A[3];return P[0]=g*M+h*f+b*r+v*u,P[1]=g*l+h*o+b*n+v*p,P[2]=g*_+h*e+b*s+v*c,P[3]=g*m+h*i+b*a+v*x,g=A[4],h=A[5],b=A[6],v=A[7],P[4]=g*M+h*f+b*r+v*u,P[5]=g*l+h*o+b*n+v*p,P[6]=g*_+h*e+b*s+v*c,P[7]=g*m+h*i+b*a+v*x,g=A[8],h=A[9],b=A[10],v=A[11],P[8]=g*M+h*f+b*r+v*u,P[9]=g*l+h*o+b*n+v*p,P[10]=g*_+h*e+b*s+v*c,P[11]=g*m+h*i+b*a+v*x,g=A[12],h=A[13],b=A[14],v=A[15],P[12]=g*M+h*f+b*r+v*u,P[13]=g*l+h*o+b*n+v*p,P[14]=g*_+h*e+b*s+v*c,P[15]=g*m+h*i+b*a+v*x,P}},60378:function($){$.exports=function(P,t,A,M,l,_,m){var f=1/(t-A),o=1/(M-l),e=1/(_-m);return P[0]=-2*f,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=-2*o,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=2*e,P[11]=0,P[12]=(t+A)*f,P[13]=(l+M)*o,P[14]=(m+_)*e,P[15]=1,P}},7864:function($){$.exports=function(P,t,A,M,l){var _=1/Math.tan(t/2),m=1/(M-l);return P[0]=_/A,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=_,P[6]=0,P[7]=0,P[8]=0,P[9]=0,P[10]=(l+M)*m,P[11]=-1,P[12]=0,P[13]=0,P[14]=2*l*M*m,P[15]=0,P}},35279:function($){$.exports=function(P,t,A,M){var l=Math.tan(t.upDegrees*Math.PI/180),_=Math.tan(t.downDegrees*Math.PI/180),m=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),o=2/(m+f),e=2/(l+_);return P[0]=o,P[1]=0,P[2]=0,P[3]=0,P[4]=0,P[5]=e,P[6]=0,P[7]=0,P[8]=-(m-f)*o*.5,P[9]=(l-_)*e*.5,P[10]=M/(A-M),P[11]=-1,P[12]=0,P[13]=0,P[14]=M*A/(A-M),P[15]=0,P}},65074:function($){$.exports=function(P,t,A,M){var l,_,m,f,o,e,i,r,n,s,a,u,p,c,x,g,h,b,v,y,w,d,S,T,E=M[0],C=M[1],L=M[2],O=Math.sqrt(E*E+C*C+L*L);return Math.abs(O)<1e-6?null:(E*=O=1/O,C*=O,L*=O,l=Math.sin(A),m=1-(_=Math.cos(A)),f=t[0],o=t[1],e=t[2],i=t[3],r=t[4],n=t[5],s=t[6],a=t[7],u=t[8],p=t[9],c=t[10],x=t[11],g=E*E*m+_,h=C*E*m+L*l,b=L*E*m-C*l,v=E*C*m-L*l,y=C*C*m+_,w=L*C*m+E*l,d=E*L*m+C*l,S=C*L*m-E*l,T=L*L*m+_,P[0]=f*g+r*h+u*b,P[1]=o*g+n*h+p*b,P[2]=e*g+s*h+c*b,P[3]=i*g+a*h+x*b,P[4]=f*v+r*y+u*w,P[5]=o*v+n*y+p*w,P[6]=e*v+s*y+c*w,P[7]=i*v+a*y+x*w,P[8]=f*d+r*S+u*T,P[9]=o*d+n*S+p*T,P[10]=e*d+s*S+c*T,P[11]=i*d+a*S+x*T,t!==P&&(P[12]=t[12],P[13]=t[13],P[14]=t[14],P[15]=t[15]),P)}},35545:function($){$.exports=function(P,t,A){var M=Math.sin(A),l=Math.cos(A),_=t[4],m=t[5],f=t[6],o=t[7],e=t[8],i=t[9],r=t[10],n=t[11];return t!==P&&(P[0]=t[0],P[1]=t[1],P[2]=t[2],P[3]=t[3],P[12]=t[12],P[13]=t[13],P[14]=t[14],P[15]=t[15]),P[4]=_*l+e*M,P[5]=m*l+i*M,P[6]=f*l+r*M,P[7]=o*l+n*M,P[8]=e*l-_*M,P[9]=i*l-m*M,P[10]=r*l-f*M,P[11]=n*l-o*M,P}},94918:function($){$.exports=function(P,t,A){var M=Math.sin(A),l=Math.cos(A),_=t[0],m=t[1],f=t[2],o=t[3],e=t[8],i=t[9],r=t[10],n=t[11];return t!==P&&(P[4]=t[4],P[5]=t[5],P[6]=t[6],P[7]=t[7],P[12]=t[12],P[13]=t[13],P[14]=t[14],P[15]=t[15]),P[0]=_*l-e*M,P[1]=m*l-i*M,P[2]=f*l-r*M,P[3]=o*l-n*M,P[8]=_*M+e*l,P[9]=m*M+i*l,P[10]=f*M+r*l,P[11]=o*M+n*l,P}},15692:function($){$.exports=function(P,t,A){var M=Math.sin(A),l=Math.cos(A),_=t[0],m=t[1],f=t[2],o=t[3],e=t[4],i=t[5],r=t[6],n=t[7];return t!==P&&(P[8]=t[8],P[9]=t[9],P[10]=t[10],P[11]=t[11],P[12]=t[12],P[13]=t[13],P[14]=t[14],P[15]=t[15]),P[0]=_*l+e*M,P[1]=m*l+i*M,P[2]=f*l+r*M,P[3]=o*l+n*M,P[4]=e*l-_*M,P[5]=i*l-m*M,P[6]=r*l-f*M,P[7]=n*l-o*M,P}},10789:function($){$.exports=function(P,t,A){var M=A[0],l=A[1],_=A[2];return P[0]=t[0]*M,P[1]=t[1]*M,P[2]=t[2]*M,P[3]=t[3]*M,P[4]=t[4]*l,P[5]=t[5]*l,P[6]=t[6]*l,P[7]=t[7]*l,P[8]=t[8]*_,P[9]=t[9]*_,P[10]=t[10]*_,P[11]=t[11]*_,P[12]=t[12],P[13]=t[13],P[14]=t[14],P[15]=t[15],P}},6726:function($){$.exports=function(P){return"mat4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+", "+P[4]+", "+P[5]+", "+P[6]+", "+P[7]+", "+P[8]+", "+P[9]+", "+P[10]+", "+P[11]+", "+P[12]+", "+P[13]+", "+P[14]+", "+P[15]+")"}},31283:function($){$.exports=function(P,t,A){var M,l,_,m,f,o,e,i,r,n,s,a,u=A[0],p=A[1],c=A[2];return t===P?(P[12]=t[0]*u+t[4]*p+t[8]*c+t[12],P[13]=t[1]*u+t[5]*p+t[9]*c+t[13],P[14]=t[2]*u+t[6]*p+t[10]*c+t[14],P[15]=t[3]*u+t[7]*p+t[11]*c+t[15]):(M=t[0],l=t[1],_=t[2],m=t[3],f=t[4],o=t[5],e=t[6],i=t[7],r=t[8],n=t[9],s=t[10],a=t[11],P[0]=M,P[1]=l,P[2]=_,P[3]=m,P[4]=f,P[5]=o,P[6]=e,P[7]=i,P[8]=r,P[9]=n,P[10]=s,P[11]=a,P[12]=M*u+f*p+r*c+t[12],P[13]=l*u+o*p+n*c+t[13],P[14]=_*u+e*p+s*c+t[14],P[15]=m*u+i*p+a*c+t[15]),P}},88654:function($){$.exports=function(P,t){if(P===t){var A=t[1],M=t[2],l=t[3],_=t[6],m=t[7],f=t[11];P[1]=t[4],P[2]=t[8],P[3]=t[12],P[4]=A,P[6]=t[9],P[7]=t[13],P[8]=M,P[9]=_,P[11]=t[14],P[12]=l,P[13]=m,P[14]=f}else P[0]=t[0],P[1]=t[4],P[2]=t[8],P[3]=t[12],P[4]=t[1],P[5]=t[5],P[6]=t[9],P[7]=t[13],P[8]=t[2],P[9]=t[6],P[10]=t[10],P[11]=t[14],P[12]=t[3],P[13]=t[7],P[14]=t[11],P[15]=t[15];return P}},42505:function($,P,t){var A=t(72791),M=t(71299),l=t(98580),_=t(12018),m=t(83522),f=t(25075),o=t(68016),e=t(58404),i=t(18863),r=t(10973),n=t(25677),s=t(75686),a=t(53545),u=t(56131),p=t(32879),c=t(30120),x=t(13547).nextPow2,g=new m,h=!1;if(document.body){var b=document.body.appendChild(document.createElement("div"));b.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(b).fontStretch&&(h=!0),document.body.removeChild(b)}var v=function(y){(function(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer})(y)?(y={regl:y},this.gl=y.regl._gl):this.gl=_(y),this.shader=g.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=y.regl||l({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),g.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(r(y)?y:{})};v.prototype.createShader=function(){var y=this.regl,w=y({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:y.prop("count"),offset:y.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:y.this("sizeBuffer")},width:{offset:0,stride:8,buffer:y.this("sizeBuffer")},char:y.this("charBuffer"),position:y.this("position")},uniforms:{atlasSize:function(d,S){return[S.atlas.width,S.atlas.height]},atlasDim:function(d,S){return[S.atlas.cols,S.atlas.rows]},atlas:function(d,S){return S.atlas.texture},charStep:function(d,S){return S.atlas.step},em:function(d,S){return S.atlas.em},color:y.prop("color"),opacity:y.prop("opacity"),viewport:y.this("viewportArray"),scale:y.this("scale"),align:y.prop("align"),baseline:y.prop("baseline"),translate:y.this("translate"),positionOffset:y.prop("positionOffset")},primitive:"points",viewport:y.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`});return{regl:y,draw:w,atlas:{}}},v.prototype.update=function(y){var w=this;if(typeof y=="string")y={text:y};else if(!y)return;(y=M(y,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity!=null&&(Array.isArray(y.opacity)?this.opacity=y.opacity.map(function(fe){return parseFloat(fe)}):this.opacity=parseFloat(y.opacity)),y.viewport!=null&&(this.viewport=i(y.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),y.kerning!=null&&(this.kerning=y.kerning),y.offset!=null&&(typeof y.offset=="number"&&(y.offset=[y.offset,0]),this.positionOffset=c(y.offset)),y.direction&&(this.direction=y.direction),y.range&&(this.range=y.range,this.scale=[1/(y.range[2]-y.range[0]),1/(y.range[3]-y.range[1])],this.translate=[-y.range[0],-y.range[1]]),y.scale&&(this.scale=y.scale),y.translate&&(this.translate=y.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||y.font||(y.font=v.baseFontSize+"px sans-serif");var d,S=!1,T=!1;if(y.font&&(Array.isArray(y.font)?y.font:[y.font]).forEach(function(fe,Se){if(typeof fe=="string")try{fe=A.parse(fe)}catch{fe=A.parse(v.baseFontSize+"px "+fe)}else fe=A.parse(A.stringify(fe));var Me=A.stringify({size:v.baseFontSize,family:fe.family,stretch:h?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style}),be=n(fe.size),Ie=Math.round(be[0]*s(be[1]));if(Ie!==w.fontSize[Se]&&(T=!0,w.fontSize[Se]=Ie),!(w.font[Se]&&Me==w.font[Se].baseString||(S=!0,w.font[Se]=v.fonts[Me],w.font[Se]))){var Be=fe.family.join(", "),ce=[fe.style];fe.style!=fe.variant&&ce.push(fe.variant),fe.variant!=fe.weight&&ce.push(fe.weight),h&&fe.weight!=fe.stretch&&ce.push(fe.stretch),w.font[Se]={baseString:Me,family:Be,weight:fe.weight,stretch:fe.stretch,style:fe.style,variant:fe.variant,width:{},kerning:{},metrics:p(Be,{origin:"top",fontSize:v.baseFontSize,fontStyle:ce.join(" ")})},v.fonts[Me]=w.font[Se]}}),(S||T)&&this.font.forEach(function(fe,Se){var Me=A.stringify({size:w.fontSize[Se],family:fe.family,stretch:h?fe.stretch:void 0,variant:fe.variant,weight:fe.weight,style:fe.style});if(w.fontAtlas[Se]=w.shader.atlas[Me],!w.fontAtlas[Se]){var be=fe.metrics;w.shader.atlas[Me]=w.fontAtlas[Se]={fontString:Me,step:2*Math.ceil(w.fontSize[Se]*be.bottom*.5),em:w.fontSize[Se],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:w.regl.texture()}}y.text==null&&(y.text=w.text)}),typeof y.text=="string"&&y.position&&y.position.length>2){for(var E=Array(.5*y.position.length),C=0;C<E.length;C++)E[C]=y.text;y.text=E}if(y.text!=null||S){if(this.textOffsets=[0],Array.isArray(y.text)){this.count=y.text[0].length,this.counts=[this.count];for(var L=1;L<y.text.length;L++)this.textOffsets[L]=this.textOffsets[L-1]+y.text[L-1].length,this.count+=y.text[L].length,this.counts.push(y.text[L].length);this.text=y.text.join("")}else this.text=y.text,this.count=this.text.length,this.counts=[this.count];d=[],this.font.forEach(function(fe,Se){v.atlasContext.font=fe.baseString;for(var Me=w.fontAtlas[Se],be=0;be<w.text.length;be++){var Ie=w.text.charAt(be);if(Me.ids[Ie]==null&&(Me.ids[Ie]=Me.chars.length,Me.chars.push(Ie),d.push(Ie)),fe.width[Ie]==null&&(fe.width[Ie]=v.atlasContext.measureText(Ie).width/v.baseFontSize,w.kerning)){var Be=[];for(var ce in fe.width)Be.push(ce+Ie,Ie+ce);u(fe.kerning,a(fe.family,{pairs:Be}))}}})}if(y.position)if(y.position.length>2){for(var O=!y.position[0].length,z=e.mallocFloat(2*this.count),G=0,I=0;G<this.counts.length;G++){var H=this.counts[G];if(O)for(var N=0;N<H;N++)z[I++]=y.position[2*G],z[I++]=y.position[2*G+1];else for(var F=0;F<H;F++)z[I++]=y.position[G][0],z[I++]=y.position[G][1]}this.position.call?this.position({type:"float",data:z}):this.position=this.regl.buffer({type:"float",data:z}),e.freeFloat(z)}else this.position.destroy&&this.position.destroy(),this.position={constant:y.position};if(y.text||S){var V=e.mallocUint8(this.count),W=e.mallocFloat(2*this.count);this.textWidth=[];for(var te=0,Q=0;te<this.counts.length;te++){for(var X=this.counts[te],q=this.font[te]||this.font[0],Z=this.fontAtlas[te]||this.fontAtlas[0],J=0;J<X;J++){var ne=this.text.charAt(Q),re=this.text.charAt(Q-1);if(V[Q]=Z.ids[ne],W[2*Q]=q.width[ne],J){var ae=W[2*Q-2],ue=W[2*Q],he=W[2*Q-1]+.5*ae+.5*ue;if(this.kerning){var de=q.kerning[re+ne];de&&(he+=.001*de)}W[2*Q+1]=he}else W[2*Q+1]=.5*W[2*Q];Q++}this.textWidth.push(W.length?.5*W[2*Q-2]+W[2*Q-1]:0)}y.align||(y.align=this.align),this.charBuffer({data:V,type:"uint8",usage:"stream"}),this.sizeBuffer({data:W,type:"float",usage:"stream"}),e.freeUint8(V),e.freeFloat(W),d.length&&this.font.forEach(function(fe,Se){var Me=w.fontAtlas[Se],be=Me.step,Ie=Math.floor(v.maxAtlasSize/be),Be=Math.min(Ie,Me.chars.length),ce=Math.ceil(Me.chars.length/Be),Te=x(Be*be),ye=x(ce*be);Me.width=Te,Me.height=ye,Me.rows=ce,Me.cols=Be,Me.em&&Me.texture({data:o({canvas:v.atlasCanvas,font:Me.fontString,chars:Me.chars,shape:[Te,ye],step:[be,be]})})})}if(y.align&&(this.align=y.align,this.alignOffset=this.textWidth.map(function(fe,Se){var Me=Array.isArray(w.align)?w.align.length>1?w.align[Se]:w.align[0]:w.align;if(typeof Me=="number")return Me;switch(Me){case"right":case"end":return-fe;case"center":case"centre":case"middle":return .5*-fe}return 0})),this.baseline==null&&y.baseline==null&&(y.baseline=0),y.baseline!=null&&(this.baseline=y.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(fe,Se){var Me=(w.font[Se]||w.font[0]).metrics,be=0;return be+=.5*Me.bottom,-1*(be+=typeof fe=="number"?fe-Me.baseline:-Me[fe])})),y.color!=null)if(y.color||(y.color="transparent"),typeof y.color!="string"&&isNaN(y.color)){var xe;if(typeof y.color[0]=="number"&&y.color.length>this.counts.length){var me=y.color.length;xe=e.mallocUint8(me);for(var ve=(y.color.subarray||y.color.slice).bind(y.color),Le=0;Le<me;Le+=4)xe.set(f(ve(Le,Le+4),"uint8"),Le)}else{var Ae=y.color.length;xe=e.mallocUint8(4*Ae);for(var we=0;we<Ae;we++)xe.set(f(y.color[we]||0,"uint8"),4*we)}this.color=xe}else this.color=f(y.color,"uint8");if(y.position||y.text||y.color||y.baseline||y.align||y.font||y.offset||y.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var se=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(se);for(var oe=0;oe<this.batch.length;oe++)this.batch[oe]={count:this.counts.length>1?this.counts[oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*oe,4*oe+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[oe]:this.opacity,baseline:this.baselineOffset[oe]!=null?this.baselineOffset[oe]:this.baselineOffset[0],align:this.align?this.alignOffset[oe]!=null?this.alignOffset[oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*oe,2*oe+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},v.prototype.destroy=function(){},v.prototype.kerning=!0,v.prototype.position={constant:new Float32Array(2)},v.prototype.translate=null,v.prototype.scale=null,v.prototype.font=null,v.prototype.text="",v.prototype.positionOffset=[0,0],v.prototype.opacity=1,v.prototype.color=new Uint8Array([0,0,0,255]),v.prototype.alignOffset=[0,0],v.maxAtlasSize=1024,v.atlasCanvas=document.createElement("canvas"),v.atlasContext=v.atlasCanvas.getContext("2d",{alpha:!1}),v.baseFontSize=64,v.fonts={},$.exports=v},12018:function($,P,t){var A=t(71299);function M(m){if(m.container)if(m.container==document.body)document.body.style.width||(m.canvas.width=m.width||m.pixelRatio*t.g.innerWidth),document.body.style.height||(m.canvas.height=m.height||m.pixelRatio*t.g.innerHeight);else{var f=m.container.getBoundingClientRect();m.canvas.width=m.width||f.right-f.left,m.canvas.height=m.height||f.bottom-f.top}}function l(m){return typeof m.getContext=="function"&&"width"in m&&"height"in m}function _(){var m=document.createElement("canvas");return m.style.position="absolute",m.style.top=0,m.style.left=0,m}$.exports=function(m){var f;if(m?typeof m=="string"&&(m={container:m}):m={},(m=l(m)||typeof(f=m).nodeName=="string"&&typeof f.appendChild=="function"&&typeof f.getBoundingClientRect=="function"?{container:m}:function(e){return typeof e.drawArrays=="function"||typeof e.drawElements=="function"}(m)?{gl:m}:A(m,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(m.pixelRatio=t.g.pixelRatio||1),m.gl)return m.gl;if(m.canvas&&(m.container=m.canvas.parentNode),m.container){if(typeof m.container=="string"){var o=document.querySelector(m.container);if(!o)throw Error("Element "+m.container+" is not found");m.container=o}l(m.container)?(m.canvas=m.container,m.container=m.canvas.parentNode):m.canvas||(m.canvas=_(),m.container.appendChild(m.canvas),M(m))}else if(!m.canvas){if(typeof document>"u")throw Error("Not DOM environment. Use headless-gl.");m.container=document.body||document.documentElement,m.canvas=_(),m.container.appendChild(m.canvas),M(m)}return m.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(e){try{m.gl=m.canvas.getContext(e,m.attrs)}catch{}return m.gl}),m.gl}},56068:function($){$.exports=function(P){typeof P=="string"&&(P=[P]);for(var t=[].slice.call(arguments,1),A=[],M=0;M<P.length-1;M++)A.push(P[M],t[M]||"");return A.push(P[M]),A.join("")}},40383:function($,P,t){var A=t(68318)("%Object.getOwnPropertyDescriptor%",!0);if(A)try{A([],"length")}catch{A=null}$.exports=A},57035:function($,P,t){var A,M=t(54404);A=typeof t.g.matchMedia=="function"?!t.g.matchMedia("(hover: none)").matches:M,$.exports=A},38520:function($,P,t){var A=t(54404);$.exports=A&&function(){var M=!1;try{var l=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{M=!1}return M}()},55622:function($,P,t){var A=t(68318)("%Object.defineProperty%",!0),M=function(){if(A)try{return A({},"a",{value:1}),!0}catch{return!1}return!1};M.hasArrayLengthDefineBug=function(){if(!M())return null;try{return A([],"length",{value:1}).length!==1}catch{return!0}},$.exports=M},57877:function($,P,t){var A=typeof Symbol<"u"&&Symbol,M=t(35638);$.exports=function(){return typeof A=="function"&&typeof Symbol=="function"&&typeof A("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&M()}},35638:function($){$.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var P={},t=Symbol("test"),A=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(A)!=="[object Symbol]")return!1;for(t in P[t]=42,P)return!1;if(typeof Object.keys=="function"&&Object.keys(P).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(P).length!==0)return!1;var M=Object.getOwnPropertySymbols(P);if(M.length!==1||M[0]!==t||!Object.prototype.propertyIsEnumerable.call(P,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(P,t);if(l.value!==42||l.enumerable!==!0)return!1}return!0}},84543:function($,P,t){var A=t(35638);$.exports=function(){return A()&&!!Symbol.toStringTag}},35065:function($,P,t){var A=t(77575);$.exports=A.call(Function.call,Object.prototype.hasOwnProperty)},95280:function($,P){P.read=function(t,A,M,l,_){var m,f,o=8*_-l-1,e=(1<<o)-1,i=e>>1,r=-7,n=M?_-1:0,s=M?-1:1,a=t[A+n];for(n+=s,m=a&(1<<-r)-1,a>>=-r,r+=o;r>0;m=256*m+t[A+n],n+=s,r-=8);for(f=m&(1<<-r)-1,m>>=-r,r+=l;r>0;f=256*f+t[A+n],n+=s,r-=8);if(m===0)m=1-i;else{if(m===e)return f?NaN:1/0*(a?-1:1);f+=Math.pow(2,l),m-=i}return(a?-1:1)*f*Math.pow(2,m-l)},P.write=function(t,A,M,l,_,m){var f,o,e,i=8*m-_-1,r=(1<<i)-1,n=r>>1,s=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,a=l?0:m-1,u=l?1:-1,p=A<0||A===0&&1/A<0?1:0;for(A=Math.abs(A),isNaN(A)||A===1/0?(o=isNaN(A)?1:0,f=r):(f=Math.floor(Math.log(A)/Math.LN2),A*(e=Math.pow(2,-f))<1&&(f--,e*=2),(A+=f+n>=1?s/e:s*Math.pow(2,1-n))*e>=2&&(f++,e/=2),f+n>=r?(o=0,f=r):f+n>=1?(o=(A*e-1)*Math.pow(2,_),f+=n):(o=A*Math.pow(2,n-1)*Math.pow(2,_),f=0));_>=8;t[M+a]=255&o,a+=u,o/=256,_-=8);for(f=f<<_|o,i+=_;i>0;t[M+a]=255&f,a+=u,f/=256,i-=8);t[M+a-u]|=128*p}},42018:function($){typeof Object.create=="function"?$.exports=function(P,t){t&&(P.super_=t,P.prototype=Object.create(t.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}))}:$.exports=function(P,t){if(t){P.super_=t;var A=function(){};A.prototype=t.prototype,P.prototype=new A,P.prototype.constructor=P}}},47216:function($,P,t){var A=t(84543)(),M=t(6614)("Object.prototype.toString"),l=function(f){return!(A&&f&&typeof f=="object"&&Symbol.toStringTag in f)&&M(f)==="[object Arguments]"},_=function(f){return!!l(f)||f!==null&&typeof f=="object"&&typeof f.length=="number"&&f.length>=0&&M(f)!=="[object Array]"&&M(f.callee)==="[object Function]"},m=function(){return l(arguments)}();l.isLegacyArguments=_,$.exports=m?l:_},54404:function($){$.exports=!0},85395:function($){var P,t,A=Function.prototype.toString,M=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply;if(typeof M=="function"&&typeof Object.defineProperty=="function")try{P=Object.defineProperty({},"length",{get:function(){throw t}}),t={},M(function(){throw 42},null,P)}catch(n){n!==t&&(M=null)}else M=null;var l=/^\s*class\b/,_=function(n){try{var s=A.call(n);return l.test(s)}catch{return!1}},m=function(n){try{return!_(n)&&(A.call(n),!0)}catch{return!1}},f=Object.prototype.toString,o=typeof Symbol=="function"&&!!Symbol.toStringTag,e=!(0 in[,]),i=function(){return!1};if(typeof document=="object"){var r=document.all;f.call(r)===f.call(document.all)&&(i=function(n){if((e||!n)&&(n===void 0||typeof n=="object"))try{var s=f.call(n);return(s==="[object HTMLAllCollection]"||s==="[object HTML document.all class]"||s==="[object HTMLCollection]"||s==="[object Object]")&&n("")==null}catch{}return!1})}$.exports=M?function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;try{M(n,null,P)}catch(s){if(s!==t)return!1}return!_(n)&&m(n)}:function(n){if(i(n))return!0;if(!n||typeof n!="function"&&typeof n!="object")return!1;if(o)return m(n);if(_(n))return!1;var s=f.call(n);return!(s!=="[object Function]"&&s!=="[object GeneratorFunction]"&&!/^\[object HTML/.test(s))&&m(n)}},65481:function($,P,t){var A,M=Object.prototype.toString,l=Function.prototype.toString,_=/^\s*(?:function)?\*/,m=t(84543)(),f=Object.getPrototypeOf;$.exports=function(o){if(typeof o!="function")return!1;if(_.test(l.call(o)))return!0;if(!m)return M.call(o)==="[object GeneratorFunction]";if(!f)return!1;if(A===void 0){var e=function(){if(!m)return!1;try{return Function("return function*() {}")()}catch{}}();A=!!e&&f(e)}return f(o)===A}},62683:function($){$.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},64274:function($){$.exports=function(P){return P!=P}},15567:function($,P,t){var A=t(68222),M=t(17045),l=t(64274),_=t(14922),m=t(22442),f=A(_(),Number);M(f,{getPolyfill:_,implementation:l,shim:m}),$.exports=f},14922:function($,P,t){var A=t(64274);$.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:A}},22442:function($,P,t){var A=t(17045),M=t(14922);$.exports=function(){var l=M();return A(Number,{isNaN:l},{isNaN:function(){return Number.isNaN!==l}}),l}},64941:function($){$.exports=function(P){var t=typeof P;return P!==null&&(t==="object"||t==="function")}},10973:function($){var P=Object.prototype.toString;$.exports=function(t){var A;return P.call(t)==="[object Object]"&&((A=Object.getPrototypeOf(t))===null||A===Object.getPrototypeOf({}))}},18546:function($){$.exports=function(P){for(var t,A=P.length,M=0;M<A;M++)if(((t=P.charCodeAt(M))<9||t>13)&&t!==32&&t!==133&&t!==160&&t!==5760&&t!==6158&&(t<8192||t>8205)&&t!==8232&&t!==8233&&t!==8239&&t!==8287&&t!==8288&&t!==12288&&t!==65279)return!1;return!0}},89546:function($){$.exports=function(P){return typeof P=="string"&&(P=P.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(P)&&/[\dz]$/i.test(P)&&P.length>4))}},9187:function($,P,t){var A=t(31353),M=t(72077),l=t(6614),_=l("Object.prototype.toString"),m=t(84543)(),f=t(40383),o=typeof globalThis>"u"?t.g:globalThis,e=M(),i=l("Array.prototype.indexOf",!0)||function(a,u){for(var p=0;p<a.length;p+=1)if(a[p]===u)return p;return-1},r=l("String.prototype.slice"),n={},s=Object.getPrototypeOf;m&&f&&s&&A(e,function(a){var u=new o[a];if(Symbol.toStringTag in u){var p=s(u),c=f(p,Symbol.toStringTag);if(!c){var x=s(p);c=f(x,Symbol.toStringTag)}n[a]=c.get}}),$.exports=function(a){if(!a||typeof a!="object")return!1;if(!m||!(Symbol.toStringTag in a)){var u=r(_(a),8,-1);return i(e,u)>-1}return!!f&&function(p){var c=!1;return A(n,function(x,g){if(!c)try{c=x.call(p)===g}catch{}}),c}(a)}},44517:function($){$.exports=function(){var P,t,A;function M(l,_){if(P)if(t){var m="var sharedChunk = {}; ("+P+")(sharedChunk); ("+t+")(sharedChunk);",f={};P(f),(A=_(f)).workerUrl=window.URL.createObjectURL(new Blob([m],{type:"text/javascript"}))}else t=_;else P=_}return M(0,function(l){function _(k,D){return k(D={exports:{}},D.exports),D.exports}var m="1.10.1",f=o;function o(k,D,Y,le){this.cx=3*k,this.bx=3*(Y-k)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(le-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=k,this.p1y=le,this.p2x=Y,this.p2y=le}o.prototype.sampleCurveX=function(k){return((this.ax*k+this.bx)*k+this.cx)*k},o.prototype.sampleCurveY=function(k){return((this.ay*k+this.by)*k+this.cy)*k},o.prototype.sampleCurveDerivativeX=function(k){return(3*this.ax*k+2*this.bx)*k+this.cx},o.prototype.solveCurveX=function(k,D){var Y,le,Ee,Oe,je;for(D===void 0&&(D=1e-6),Ee=k,je=0;je<8;je++){if(Oe=this.sampleCurveX(Ee)-k,Math.abs(Oe)<D)return Ee;var $e=this.sampleCurveDerivativeX(Ee);if(Math.abs($e)<1e-6)break;Ee-=Oe/$e}if((Ee=k)<(Y=0))return Y;if(Ee>(le=1))return le;for(;Y<le;){if(Oe=this.sampleCurveX(Ee),Math.abs(Oe-k)<D)return Ee;k>Oe?Y=Ee:le=Ee,Ee=.5*(le-Y)+Y}return Ee},o.prototype.solve=function(k,D){return this.sampleCurveY(this.solveCurveX(k,D))};var e=i;function i(k,D){this.x=k,this.y=D}function r(k,D,Y,le){var Ee=new f(k,D,Y,le);return function(Oe){return Ee.solve(Oe)}}i.prototype={clone:function(){return new i(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,D){return this.clone()._rotateAround(k,D)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var D=k.x-this.x,Y=k.y-this.y;return D*D+Y*Y},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,D){return Math.atan2(this.x*D-this.y*k,this.x*k+this.y*D)},_matMult:function(k){var D=k[0]*this.x+k[1]*this.y,Y=k[2]*this.x+k[3]*this.y;return this.x=D,this.y=Y,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var D=Math.cos(k),Y=Math.sin(k),le=D*this.x-Y*this.y,Ee=Y*this.x+D*this.y;return this.x=le,this.y=Ee,this},_rotateAround:function(k,D){var Y=Math.cos(k),le=Math.sin(k),Ee=D.x+Y*(this.x-D.x)-le*(this.y-D.y),Oe=D.y+le*(this.x-D.x)+Y*(this.y-D.y);return this.x=Ee,this.y=Oe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},i.convert=function(k){return k instanceof i?k:Array.isArray(k)?new i(k[0],k[1]):k};var n=r(.25,.1,.25,1);function s(k,D,Y){return Math.min(Y,Math.max(D,k))}function a(k,D,Y){var le=Y-D,Ee=((k-D)%le+le)%le+D;return Ee===D?Y:Ee}function u(k){for(var D=[],Y=arguments.length-1;Y-- >0;)D[Y]=arguments[Y+1];for(var le=0,Ee=D;le<Ee.length;le+=1){var Oe=Ee[le];for(var je in Oe)k[je]=Oe[je]}return k}var p=1;function c(){return p++}function x(){return function k(D){return D?(D^16*Math.random()>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,k)}()}function g(k){return!!k&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(k)}function h(k,D){k.forEach(function(Y){D[Y]&&(D[Y]=D[Y].bind(D))})}function b(k,D){return k.indexOf(D,k.length-D.length)!==-1}function v(k,D,Y){var le={};for(var Ee in k)le[Ee]=D.call(Y||this,k[Ee],Ee,k);return le}function y(k,D,Y){var le={};for(var Ee in k)D.call(Y||this,k[Ee],Ee,k)&&(le[Ee]=k[Ee]);return le}function w(k){return Array.isArray(k)?k.map(w):typeof k=="object"&&k?v(k,w):k}var d={};function S(k){d[k]||(typeof console<"u"&&console.warn(k),d[k]=!0)}function T(k,D,Y){return(Y.y-k.y)*(D.x-k.x)>(D.y-k.y)*(Y.x-k.x)}function E(k){for(var D=0,Y=0,le=k.length,Ee=le-1,Oe=void 0,je=void 0;Y<le;Ee=Y++)Oe=k[Y],D+=((je=k[Ee]).x-Oe.x)*(Oe.y+je.y);return D}function C(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function L(k){var D={};if(k.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(le,Ee,Oe,je){var $e=Oe||je;return D[Ee]=!$e||$e.toLowerCase(),""}),D["max-age"]){var Y=parseInt(D["max-age"],10);isNaN(Y)?delete D["max-age"]:D["max-age"]=Y}return D}var O=null;function z(k){if(O==null){var D=k.navigator?k.navigator.userAgent:null;O=!!k.safari||!(!D||!(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return O}function G(k){try{var D=self[k];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}var I,H,N,F,V=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),W=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,te=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Q={now:V,frame:function(k){var D=W(k);return{cancel:function(){return te(D)}}},getImageData:function(k,D){D===void 0&&(D=0);var Y=self.document.createElement("canvas"),le=Y.getContext("2d");if(!le)throw new Error("failed to create canvas 2d context");return Y.width=k.width,Y.height=k.height,le.drawImage(k,0,0,k.width,k.height),le.getImageData(-D,-D,k.width+2*D,k.height+2*D)},resolveURL:function(k){return I||(I=self.document.createElement("a")),I.href=k,I.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(H==null&&(H=self.matchMedia("(prefers-reduced-motion: reduce)")),H.matches)}},X={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},q={supported:!1,testSupport:function(k){!Z&&F&&(J?ne(k):N=k)}},Z=!1,J=!1;function ne(k){var D=k.createTexture();k.bindTexture(k.TEXTURE_2D,D);try{if(k.texImage2D(k.TEXTURE_2D,0,k.RGBA,k.RGBA,k.UNSIGNED_BYTE,F),k.isContextLost())return;q.supported=!0}catch{}k.deleteTexture(D),Z=!0}self.document&&((F=self.document.createElement("img")).onload=function(){N&&ne(N),N=null,J=!0},F.onerror=function(){Z=!0,N=null},F.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var re="01",ae=function(k,D){this._transformRequestFn=k,this._customAccessToken=D,this._createSkuToken()};function ue(k){return k.indexOf("mapbox:")===0}ae.prototype._createSkuToken=function(){var k=function(){for(var D="",Y=0;Y<10;Y++)D+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",re,D].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=k.token,this._skuTokenExpiresAt=k.tokenExpiresAt},ae.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ae.prototype.transformRequest=function(k,D){return this._transformRequestFn&&this._transformRequestFn(k,D)||{url:k}},ae.prototype.normalizeStyleURL=function(k,D){if(!ue(k))return k;var Y=me(k);return Y.path="/styles/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||D)},ae.prototype.normalizeGlyphsURL=function(k,D){if(!ue(k))return k;var Y=me(k);return Y.path="/fonts/v1"+Y.path,this._makeAPIURL(Y,this._customAccessToken||D)},ae.prototype.normalizeSourceURL=function(k,D){if(!ue(k))return k;var Y=me(k);return Y.path="/v4/"+Y.authority+".json",Y.params.push("secure"),this._makeAPIURL(Y,this._customAccessToken||D)},ae.prototype.normalizeSpriteURL=function(k,D,Y,le){var Ee=me(k);return ue(k)?(Ee.path="/styles/v1"+Ee.path+"/sprite"+D+Y,this._makeAPIURL(Ee,this._customAccessToken||le)):(Ee.path+=""+D+Y,ve(Ee))},ae.prototype.normalizeTileURL=function(k,D){if(this._isSkuTokenExpired()&&this._createSkuToken(),k&&!ue(k))return k;var Y=me(k),le=Q.devicePixelRatio>=2||D===512?"@2x":"",Ee=q.supported?".webp":"$1";Y.path=Y.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+le+Ee),Y.path=Y.path.replace(/^.+\/v4\//,"/"),Y.path="/v4"+Y.path;var Oe=this._customAccessToken||function(je){for(var $e=0,ut=je;$e<ut.length;$e+=1){var bt=ut[$e].match(/^access_token=(.*)$/);if(bt)return bt[1]}return null}(Y.params)||X.ACCESS_TOKEN;return X.REQUIRE_ACCESS_TOKEN&&Oe&&this._skuToken&&Y.params.push("sku="+this._skuToken),this._makeAPIURL(Y,Oe)},ae.prototype.canonicalizeTileURL=function(k,D){var Y=me(k);if(!Y.path.match(/(^\/v4\/)/)||!Y.path.match(/\.[\w]+$/))return k;var le="mapbox://tiles/";le+=Y.path.replace("/v4/","");var Ee=Y.params;return D&&(Ee=Ee.filter(function(Oe){return!Oe.match(/^access_token=/)})),Ee.length&&(le+="?"+Ee.join("&")),le},ae.prototype.canonicalizeTileset=function(k,D){for(var Y=!!D&&ue(D),le=[],Ee=0,Oe=k.tiles||[];Ee<Oe.length;Ee+=1){var je=Oe[Ee];de(je)?le.push(this.canonicalizeTileURL(je,Y)):le.push(je)}return le},ae.prototype._makeAPIURL=function(k,D){var Y="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",le=me(X.API_URL);if(k.protocol=le.protocol,k.authority=le.authority,le.path!=="/"&&(k.path=""+le.path+k.path),!X.REQUIRE_ACCESS_TOKEN)return ve(k);if(!(D=D||X.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+Y);if(D[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+Y);return k.params=k.params.filter(function(Ee){return Ee.indexOf("access_token")===-1}),k.params.push("access_token="+D),ve(k)};var he=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function de(k){return he.test(k)}var xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function me(k){var D=k.match(xe);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function ve(k){var D=k.params.length?"?"+k.params.join("&"):"";return k.protocol+"://"+k.authority+k.path+D}var Le="mapbox.eventData";function Ae(k){if(!k)return null;var D,Y=k.split(".");if(!Y||Y.length!==3)return null;try{return JSON.parse((D=Y[1],decodeURIComponent(self.atob(D).split("").map(function(le){return"%"+("00"+le.charCodeAt(0).toString(16)).slice(-2)}).join(""))))}catch{return null}}var we=function(k){this.type=k,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};we.prototype.getStorageKey=function(k){var D,Y,le=Ae(X.ACCESS_TOKEN);return D=le&&le.u?(Y=le.u,self.btoa(encodeURIComponent(Y).replace(/%([0-9A-F]{2})/g,function(Ee,Oe){return String.fromCharCode(+("0x"+Oe))}))):X.ACCESS_TOKEN||"",k?Le+"."+k+":"+D:Le+":"+D},we.prototype.fetchEventData=function(){var k=G("localStorage"),D=this.getStorageKey(),Y=this.getStorageKey("uuid");if(k)try{var le=self.localStorage.getItem(D);le&&(this.eventData=JSON.parse(le));var Ee=self.localStorage.getItem(Y);Ee&&(this.anonId=Ee)}catch{S("Unable to read from LocalStorage")}},we.prototype.saveEventData=function(){var k=G("localStorage"),D=this.getStorageKey(),Y=this.getStorageKey("uuid");if(k)try{self.localStorage.setItem(Y,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(D,JSON.stringify(this.eventData))}catch{S("Unable to write to LocalStorage")}},we.prototype.processRequests=function(k){},we.prototype.postEvent=function(k,D,Y,le){var Ee=this;if(X.EVENTS_URL){var Oe=me(X.EVENTS_URL);Oe.params.push("access_token="+(le||X.ACCESS_TOKEN||""));var je={event:this.type,created:new Date(k).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:m,skuId:re,userId:this.anonId},$e=D?u(je,D):je,ut={url:ve(Oe),headers:{"Content-Type":"text/plain"},body:JSON.stringify([$e])};this.pendingRequest=Ct(ut,function(bt){Ee.pendingRequest=null,Y(bt),Ee.saveEventData(),Ee.processRequests(le)})}},we.prototype.queueRequest=function(k,D){this.queue.push(k),this.processRequests(D)};var se,oe,fe=function(k){function D(){k.call(this,"map.load"),this.success={},this.skuToken=""}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(Y,le,Ee,Oe){this.skuToken=Ee,(X.EVENTS_URL&&Oe||X.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(je){return ue(je)||de(je)}))&&this.queueRequest({id:le,timestamp:Date.now()},Oe)},D.prototype.processRequests=function(Y){var le=this;if(!this.pendingRequest&&this.queue.length!==0){var Ee=this.queue.shift(),Oe=Ee.id,je=Ee.timestamp;Oe&&this.success[Oe]||(this.anonId||this.fetchEventData(),g(this.anonId)||(this.anonId=x()),this.postEvent(je,{skuToken:this.skuToken},function($e){$e||Oe&&(le.success[Oe]=!0)},Y))}},D}(we),Se=function(k){function D(Y){k.call(this,"appUserTurnstile"),this._customAccessToken=Y}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(Y,le){X.EVENTS_URL&&X.ACCESS_TOKEN&&Array.isArray(Y)&&Y.some(function(Ee){return ue(Ee)||de(Ee)})&&this.queueRequest(Date.now(),le)},D.prototype.processRequests=function(Y){var le=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var Ee=Ae(X.ACCESS_TOKEN),Oe=Ee?Ee.u:X.ACCESS_TOKEN,je=Oe!==this.eventData.tokenU;g(this.anonId)||(this.anonId=x(),je=!0);var $e=this.queue.shift();if(this.eventData.lastSuccess){var ut=new Date(this.eventData.lastSuccess),bt=new Date($e),Tt=($e-this.eventData.lastSuccess)/864e5;je=je||Tt>=1||Tt<-1||ut.getDate()!==bt.getDate()}else je=!0;if(!je)return this.processRequests();this.postEvent($e,{"enabled.telemetry":!1},function(Rt){Rt||(le.eventData.lastSuccess=$e,le.eventData.tokenU=Oe)},Y)}},D}(we),Me=new Se,be=Me.postTurnstileEvent.bind(Me),Ie=new fe,Be=Ie.postMapLoadEvent.bind(Ie),ce="mapbox-tiles",Te=500,ye=50,Pe=42e4;function Re(){self.caches&&!se&&(se=self.caches.open(ce))}function ze(k,D,Y){if(Re(),se){var le={status:D.status,statusText:D.statusText,headers:new self.Headers};D.headers.forEach(function(Oe,je){return le.headers.set(je,Oe)});var Ee=L(D.headers.get("Cache-Control")||"");Ee["no-store"]||(Ee["max-age"]&&le.headers.set("Expires",new Date(Y+1e3*Ee["max-age"]).toUTCString()),new Date(le.headers.get("Expires")).getTime()-Y<Pe||function(Oe,je){if(oe===void 0)try{new Response(new ReadableStream),oe=!0}catch{oe=!1}oe?je(Oe.body):Oe.blob().then(je)}(D,function(Oe){var je=new self.Response(Oe,le);Re(),se&&se.then(function($e){return $e.put(He(k.url),je)}).catch(function($e){return S($e.message)})}))}}function He(k){var D=k.indexOf("?");return D<0?k:k.slice(0,D)}function We(k,D){if(Re(),!se)return D(null);var Y=He(k.url);se.then(function(le){le.match(Y).then(function(Ee){var Oe=function(je){if(!je)return!1;var $e=new Date(je.headers.get("Expires")||0),ut=L(je.headers.get("Cache-Control")||"");return $e>Date.now()&&!ut["no-cache"]}(Ee);le.delete(Y),Oe&&le.put(Y,Ee.clone()),D(null,Ee,Oe)}).catch(D)}).catch(D)}var Je,lt=1/0;function et(){return Je==null&&(Je=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),Je}var yt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(yt);var _t=function(k){function D(Y,le,Ee){le===401&&de(Ee)&&(Y+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),k.call(this,Y),this.status=le,this.url=Ee,this.name=this.constructor.name,this.message=Y}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),xt=C()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href};function at(k,D){var Y,le=new self.AbortController,Ee=new self.Request(k.url,{method:k.method||"GET",body:k.body,credentials:k.credentials,headers:k.headers,referrer:xt(),signal:le.signal}),Oe=!1,je=!1,$e=(Y=Ee.url).indexOf("sku=")>0&&de(Y);k.type==="json"&&Ee.headers.set("Accept","application/json");var ut=function(Tt,Rt,Ht){if(!je){if(Tt&&Tt.message!=="SecurityError"&&S(Tt),Rt&&Ht)return bt(Rt);var Ut=Date.now();self.fetch(Ee).then(function(on){if(on.ok){var pn=$e?on.clone():null;return bt(on,pn,Ut)}return D(new _t(on.statusText,on.status,k.url))}).catch(function(on){on.code!==20&&D(new Error(on.message))})}},bt=function(Tt,Rt,Ht){(k.type==="arrayBuffer"?Tt.arrayBuffer():k.type==="json"?Tt.json():Tt.text()).then(function(Ut){je||(Rt&&Ht&&ze(Ee,Rt,Ht),Oe=!0,D(null,Ut,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(Ut){je||D(new Error(Ut.message))})};return $e?We(Ee,ut):ut(null,null),{cancel:function(){je=!0,Oe||le.abort()}}}var ot=function(k,D){if(Y=k.url,!(/^file:/.test(Y)||/^file:/.test(xt())&&!/^\w+:/.test(Y))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return at(k,D);if(C()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",k,D,void 0,!0)}var Y;return function(le,Ee){var Oe=new self.XMLHttpRequest;for(var je in Oe.open(le.method||"GET",le.url,!0),le.type==="arrayBuffer"&&(Oe.responseType="arraybuffer"),le.headers)Oe.setRequestHeader(je,le.headers[je]);return le.type==="json"&&(Oe.responseType="text",Oe.setRequestHeader("Accept","application/json")),Oe.withCredentials=le.credentials==="include",Oe.onerror=function(){Ee(new Error(Oe.statusText))},Oe.onload=function(){if((Oe.status>=200&&Oe.status<300||Oe.status===0)&&Oe.response!==null){var $e=Oe.response;if(le.type==="json")try{$e=JSON.parse(Oe.response)}catch(ut){return Ee(ut)}Ee(null,$e,Oe.getResponseHeader("Cache-Control"),Oe.getResponseHeader("Expires"))}else Ee(new _t(Oe.statusText,Oe.status,le.url))},Oe.send(le.body),{cancel:function(){return Oe.abort()}}}(k,D)},At=function(k,D){return ot(u(k,{type:"arrayBuffer"}),D)},Ct=function(k,D){return ot(u(k,{method:"POST"}),D)},zt,St;zt=[],St=0;var qe=function(k,D){if(q.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),St>=X.MAX_PARALLEL_IMAGE_REQUESTS){var Y={requestParameters:k,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return zt.push(Y),Y}St++;var le=!1,Ee=function(){if(!le)for(le=!0,St--;zt.length&&St<X.MAX_PARALLEL_IMAGE_REQUESTS;){var je=zt.shift(),$e=je.requestParameters,ut=je.callback;je.cancelled||(je.cancel=qe($e,ut).cancel)}},Oe=At(k,function(je,$e,ut,bt){Ee(),je?D(je):$e&&(et()?function(Tt,Rt){var Ht=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});self.createImageBitmap(Ht).then(function(Ut){Rt(null,Ut)}).catch(function(Ut){Rt(new Error("Could not load image because of "+Ut.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}($e,D):function(Tt,Rt,Ht,Ut){var on=new self.Image,pn=self.URL;on.onload=function(){Rt(null,on),pn.revokeObjectURL(on.src)},on.onerror=function(){return Rt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var zn=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});on.cacheControl=Ht,on.expires=Ut,on.src=Tt.byteLength?pn.createObjectURL(zn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}($e,D,ut,bt))});return{cancel:function(){Oe.cancel(),Ee()}}};function Xe(k,D,Y){Y[k]&&Y[k].indexOf(D)!==-1||(Y[k]=Y[k]||[],Y[k].push(D))}function Ve(k,D,Y){if(Y&&Y[k]){var le=Y[k].indexOf(D);le!==-1&&Y[k].splice(le,1)}}var Ze=function(k,D){D===void 0&&(D={}),u(this,D),this.type=k},st=function(k){function D(Y,le){le===void 0&&(le={}),k.call(this,"error",u({error:Y},le))}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D}(Ze),nt=function(){};nt.prototype.on=function(k,D){return this._listeners=this._listeners||{},Xe(k,D,this._listeners),this},nt.prototype.off=function(k,D){return Ve(k,D,this._listeners),Ve(k,D,this._oneTimeListeners),this},nt.prototype.once=function(k,D){return this._oneTimeListeners=this._oneTimeListeners||{},Xe(k,D,this._oneTimeListeners),this},nt.prototype.fire=function(k,D){typeof k=="string"&&(k=new Ze(k,D||{}));var Y=k.type;if(this.listens(Y)){k.target=this;for(var le=0,Ee=this._listeners&&this._listeners[Y]?this._listeners[Y].slice():[];le<Ee.length;le+=1)Ee[le].call(this,k);for(var Oe=0,je=this._oneTimeListeners&&this._oneTimeListeners[Y]?this._oneTimeListeners[Y].slice():[];Oe<je.length;Oe+=1){var $e=je[Oe];Ve(Y,$e,this._oneTimeListeners),$e.call(this,k)}var ut=this._eventedParent;ut&&(u(k,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ut.fire(k))}else k instanceof st&&console.error(k.error);return this},nt.prototype.listens=function(k){return this._listeners&&this._listeners[k]&&this._listeners[k].length>0||this._oneTimeListeners&&this._oneTimeListeners[k]&&this._oneTimeListeners[k].length>0||this._eventedParent&&this._eventedParent.listens(k)},nt.prototype.setEventedParent=function(k,D){return this._eventedParent=k,this._eventedParentData=D,this};var De={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Fe=function(k,D,Y,le){this.message=(k?k+": ":"")+Y,le&&(this.identifier=le),D!=null&&D.__line__&&(this.line=D.__line__)};function rt(k){var D=k.key,Y=k.value;return Y?[new Fe(D,Y,"constants have been deprecated as of v8")]:[]}function tt(k){for(var D=[],Y=arguments.length-1;Y-- >0;)D[Y]=arguments[Y+1];for(var le=0,Ee=D;le<Ee.length;le+=1){var Oe=Ee[le];for(var je in Oe)k[je]=Oe[je]}return k}function gt(k){return k instanceof Number||k instanceof String||k instanceof Boolean?k.valueOf():k}function dt(k){if(Array.isArray(k))return k.map(dt);if(k instanceof Object&&!(k instanceof Number||k instanceof String||k instanceof Boolean)){var D={};for(var Y in k)D[Y]=dt(k[Y]);return D}return gt(k)}var mt=function(k){function D(Y,le){k.call(this,le),this.message=le,this.key=Y}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D}(Error),ft=function(k,D){D===void 0&&(D=[]),this.parent=k,this.bindings={};for(var Y=0,le=D;Y<le.length;Y+=1){var Ee=le[Y],Oe=Ee[0],je=Ee[1];this.bindings[Oe]=je}};ft.prototype.concat=function(k){return new ft(this,k)},ft.prototype.get=function(k){if(this.bindings[k])return this.bindings[k];if(this.parent)return this.parent.get(k);throw new Error(k+" not found in scope.")},ft.prototype.has=function(k){return!!this.bindings[k]||!!this.parent&&this.parent.has(k)};var kt={kind:"null"},ht={kind:"number"},pt={kind:"string"},wt={kind:"boolean"},Ft={kind:"color"},Nt={kind:"object"},Gt={kind:"value"},an={kind:"collator"},Wt={kind:"formatted"},Yt={kind:"resolvedImage"};function en(k,D){return{kind:"array",itemType:k,N:D}}function Tn(k){if(k.kind==="array"){var D=Tn(k.itemType);return typeof k.N=="number"?"array<"+D+", "+k.N+">":k.itemType.kind==="value"?"array":"array<"+D+">"}return k.kind}var Bn=[kt,ht,pt,wt,Ft,Wt,Nt,en(Gt),Yt];function mn(k,D){if(D.kind==="error")return null;if(k.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!mn(k.itemType,D.itemType))&&(typeof k.N!="number"||k.N===D.N))return null}else{if(k.kind===D.kind)return null;if(k.kind==="value"){for(var Y=0,le=Bn;Y<le.length;Y+=1)if(!mn(le[Y],D))return null}}return"Expected "+Tn(k)+" but found "+Tn(D)+" instead."}function Kt(k,D){return D.some(function(Y){return Y.kind===k.kind})}function cn(k,D){return D.some(function(Y){return Y==="null"?k===null:Y==="array"?Array.isArray(k):Y==="object"?k&&!Array.isArray(k)&&typeof k=="object":Y===typeof k})}var tn=_(function(k,D){var Y={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function le(ut){return(ut=Math.round(ut))<0?0:ut>255?255:ut}function Ee(ut){return ut<0?0:ut>1?1:ut}function Oe(ut){return ut[ut.length-1]==="%"?le(parseFloat(ut)/100*255):le(parseInt(ut))}function je(ut){return ut[ut.length-1]==="%"?Ee(parseFloat(ut)/100):Ee(parseFloat(ut))}function $e(ut,bt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?ut+(bt-ut)*Tt*6:2*Tt<1?bt:3*Tt<2?ut+(bt-ut)*(2/3-Tt)*6:ut}try{D.parseCSSColor=function(ut){var bt,Tt=ut.replace(/ /g,"").toLowerCase();if(Tt in Y)return Y[Tt].slice();if(Tt[0]==="#")return Tt.length===4?(bt=parseInt(Tt.substr(1),16))>=0&&bt<=4095?[(3840&bt)>>4|(3840&bt)>>8,240&bt|(240&bt)>>4,15&bt|(15&bt)<<4,1]:null:Tt.length===7&&(bt=parseInt(Tt.substr(1),16))>=0&&bt<=16777215?[(16711680&bt)>>16,(65280&bt)>>8,255&bt,1]:null;var Rt=Tt.indexOf("("),Ht=Tt.indexOf(")");if(Rt!==-1&&Ht+1===Tt.length){var Ut=Tt.substr(0,Rt),on=Tt.substr(Rt+1,Ht-(Rt+1)).split(","),pn=1;switch(Ut){case"rgba":if(on.length!==4)return null;pn=je(on.pop());case"rgb":return on.length!==3?null:[Oe(on[0]),Oe(on[1]),Oe(on[2]),pn];case"hsla":if(on.length!==4)return null;pn=je(on.pop());case"hsl":if(on.length!==3)return null;var zn=(parseFloat(on[0])%360+360)%360/360,Dn=je(on[1]),Vn=je(on[2]),Gn=Vn<=.5?Vn*(Dn+1):Vn+Dn-Vn*Dn,er=2*Vn-Gn;return[le(255*$e(er,Gn,zn+1/3)),le(255*$e(er,Gn,zn)),le(255*$e(er,Gn,zn-1/3)),pn];default:return null}}return null}}catch{}}),un=tn.parseCSSColor,yn=function(k,D,Y,le){le===void 0&&(le=1),this.r=k,this.g=D,this.b=Y,this.a=le};yn.parse=function(k){if(k){if(k instanceof yn)return k;if(typeof k=="string"){var D=un(k);if(D)return new yn(D[0]/255*D[3],D[1]/255*D[3],D[2]/255*D[3],D[3])}}},yn.prototype.toString=function(){var k=this.toArray(),D=k[0],Y=k[1],le=k[2],Ee=k[3];return"rgba("+Math.round(D)+","+Math.round(Y)+","+Math.round(le)+","+Ee+")"},yn.prototype.toArray=function(){var k=this,D=k.r,Y=k.g,le=k.b,Ee=k.a;return Ee===0?[0,0,0,0]:[255*D/Ee,255*Y/Ee,255*le/Ee,Ee]},yn.black=new yn(0,0,0,1),yn.white=new yn(1,1,1,1),yn.transparent=new yn(0,0,0,0),yn.red=new yn(1,0,0,1);var En=function(k,D,Y){this.sensitivity=k?D?"variant":"case":D?"accent":"base",this.locale=Y,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};En.prototype.compare=function(k,D){return this.collator.compare(k,D)},En.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Sn=function(k,D,Y,le,Ee){this.text=k,this.image=D,this.scale=Y,this.fontStack=le,this.textColor=Ee},Nn=function(k){this.sections=k};Nn.fromString=function(k){return new Nn([new Sn(k,null,null,null,null)])},Nn.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(k){return k.text.length!==0||k.image&&k.image.name.length!==0})},Nn.factory=function(k){return k instanceof Nn?k:Nn.fromString(k)},Nn.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(k){return k.text}).join("")},Nn.prototype.serialize=function(){for(var k=["format"],D=0,Y=this.sections;D<Y.length;D+=1){var le=Y[D];if(le.image)k.push(["image",le.image.name]);else{k.push(le.text);var Ee={};le.fontStack&&(Ee["text-font"]=["literal",le.fontStack.split(",")]),le.scale&&(Ee["font-scale"]=le.scale),le.textColor&&(Ee["text-color"]=["rgba"].concat(le.textColor.toArray())),k.push(Ee)}}return k};var _n=function(k){this.name=k.name,this.available=k.available};function Pn(k,D,Y,le){return typeof k=="number"&&k>=0&&k<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof Y=="number"&&Y>=0&&Y<=255?le===void 0||typeof le=="number"&&le>=0&&le<=1?null:"Invalid rgba value ["+[k,D,Y,le].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof le=="number"?[k,D,Y,le]:[k,D,Y]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function tr(k){if(k===null||typeof k=="string"||typeof k=="boolean"||typeof k=="number"||k instanceof yn||k instanceof En||k instanceof Nn||k instanceof _n)return!0;if(Array.isArray(k)){for(var D=0,Y=k;D<Y.length;D+=1)if(!tr(Y[D]))return!1;return!0}if(typeof k=="object"){for(var le in k)if(!tr(k[le]))return!1;return!0}return!1}function ur(k){if(k===null)return kt;if(typeof k=="string")return pt;if(typeof k=="boolean")return wt;if(typeof k=="number")return ht;if(k instanceof yn)return Ft;if(k instanceof En)return an;if(k instanceof Nn)return Wt;if(k instanceof _n)return Yt;if(Array.isArray(k)){for(var D,Y=k.length,le=0,Ee=k;le<Ee.length;le+=1){var Oe=ur(Ee[le]);if(D){if(D===Oe)continue;D=Gt;break}D=Oe}return en(D||Gt,Y)}return Nt}function lr(k){var D=typeof k;return k===null?"":D==="string"||D==="number"||D==="boolean"?String(k):k instanceof yn||k instanceof Nn||k instanceof _n?k.toString():JSON.stringify(k)}_n.prototype.toString=function(){return this.name},_n.fromString=function(k){return k?new _n({name:k,available:!1}):null},_n.prototype.serialize=function(){return["image",this.name]};var ir=function(k,D){this.type=k,this.value=D};ir.parse=function(k,D){if(k.length!==2)return D.error("'literal' expression requires exactly one argument, but found "+(k.length-1)+" instead.");if(!tr(k[1]))return D.error("invalid value");var Y=k[1],le=ur(Y),Ee=D.expectedType;return le.kind!=="array"||le.N!==0||!Ee||Ee.kind!=="array"||typeof Ee.N=="number"&&Ee.N!==0||(le=Ee),new ir(le,Y)},ir.prototype.evaluate=function(){return this.value},ir.prototype.eachChild=function(){},ir.prototype.outputDefined=function(){return!0},ir.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof yn?["rgba"].concat(this.value.toArray()):this.value instanceof Nn?this.value.serialize():this.value};var $n=function(k){this.name="ExpressionEvaluationError",this.message=k};$n.prototype.toJSON=function(){return this.message};var vr={string:pt,number:ht,boolean:wt,object:Nt},jt=function(k,D){this.type=k,this.args=D};jt.parse=function(k,D){if(k.length<2)return D.error("Expected at least one argument.");var Y,le=1,Ee=k[0];if(Ee==="array"){var Oe,je;if(k.length>2){var $e=k[1];if(typeof $e!="string"||!($e in vr)||$e==="object")return D.error('The item type argument of "array" must be one of string, number, boolean',1);Oe=vr[$e],le++}else Oe=Gt;if(k.length>3){if(k[2]!==null&&(typeof k[2]!="number"||k[2]<0||k[2]!==Math.floor(k[2])))return D.error('The length argument to "array" must be a positive integer literal',2);je=k[2],le++}Y=en(Oe,je)}else Y=vr[Ee];for(var ut=[];le<k.length;le++){var bt=D.parse(k[le],le,Gt);if(!bt)return null;ut.push(bt)}return new jt(Y,ut)},jt.prototype.evaluate=function(k){for(var D=0;D<this.args.length;D++){var Y=this.args[D].evaluate(k);if(!mn(this.type,ur(Y)))return Y;if(D===this.args.length-1)throw new $n("Expected value to be of type "+Tn(this.type)+", but found "+Tn(ur(Y))+" instead.")}return null},jt.prototype.eachChild=function(k){this.args.forEach(k)},jt.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},jt.prototype.serialize=function(){var k=this.type,D=[k.kind];if(k.kind==="array"){var Y=k.itemType;if(Y.kind==="string"||Y.kind==="number"||Y.kind==="boolean"){D.push(Y.kind);var le=k.N;(typeof le=="number"||this.args.length>1)&&D.push(le)}}return D.concat(this.args.map(function(Ee){return Ee.serialize()}))};var rn=function(k){this.type=Wt,this.sections=k};rn.parse=function(k,D){if(k.length<2)return D.error("Expected at least one argument.");var Y=k[1];if(!Array.isArray(Y)&&typeof Y=="object")return D.error("First argument must be an image or text section.");for(var le=[],Ee=!1,Oe=1;Oe<=k.length-1;++Oe){var je=k[Oe];if(Ee&&typeof je=="object"&&!Array.isArray(je)){Ee=!1;var $e=null;if(je["font-scale"]&&!($e=D.parse(je["font-scale"],1,ht)))return null;var ut=null;if(je["text-font"]&&!(ut=D.parse(je["text-font"],1,en(pt))))return null;var bt=null;if(je["text-color"]&&!(bt=D.parse(je["text-color"],1,Ft)))return null;var Tt=le[le.length-1];Tt.scale=$e,Tt.font=ut,Tt.textColor=bt}else{var Rt=D.parse(k[Oe],1,Gt);if(!Rt)return null;var Ht=Rt.type.kind;if(Ht!=="string"&&Ht!=="value"&&Ht!=="null"&&Ht!=="resolvedImage")return D.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ee=!0,le.push({content:Rt,scale:null,font:null,textColor:null})}}return new rn(le)},rn.prototype.evaluate=function(k){return new Nn(this.sections.map(function(D){var Y=D.content.evaluate(k);return ur(Y)===Yt?new Sn("",Y,null,null,null):new Sn(lr(Y),null,D.scale?D.scale.evaluate(k):null,D.font?D.font.evaluate(k).join(","):null,D.textColor?D.textColor.evaluate(k):null)}))},rn.prototype.eachChild=function(k){for(var D=0,Y=this.sections;D<Y.length;D+=1){var le=Y[D];k(le.content),le.scale&&k(le.scale),le.font&&k(le.font),le.textColor&&k(le.textColor)}},rn.prototype.outputDefined=function(){return!1},rn.prototype.serialize=function(){for(var k=["format"],D=0,Y=this.sections;D<Y.length;D+=1){var le=Y[D];k.push(le.content.serialize());var Ee={};le.scale&&(Ee["font-scale"]=le.scale.serialize()),le.font&&(Ee["text-font"]=le.font.serialize()),le.textColor&&(Ee["text-color"]=le.textColor.serialize()),k.push(Ee)}return k};var fn=function(k){this.type=Yt,this.input=k};fn.parse=function(k,D){if(k.length!==2)return D.error("Expected two arguments.");var Y=D.parse(k[1],1,pt);return Y?new fn(Y):D.error("No image name provided.")},fn.prototype.evaluate=function(k){var D=this.input.evaluate(k),Y=_n.fromString(D);return Y&&k.availableImages&&(Y.available=k.availableImages.indexOf(D)>-1),Y},fn.prototype.eachChild=function(k){k(this.input)},fn.prototype.outputDefined=function(){return!1},fn.prototype.serialize=function(){return["image",this.input.serialize()]};var xn={"to-boolean":wt,"to-color":Ft,"to-number":ht,"to-string":pt},Ln=function(k,D){this.type=k,this.args=D};Ln.parse=function(k,D){if(k.length<2)return D.error("Expected at least one argument.");var Y=k[0];if((Y==="to-boolean"||Y==="to-string")&&k.length!==2)return D.error("Expected one argument.");for(var le=xn[Y],Ee=[],Oe=1;Oe<k.length;Oe++){var je=D.parse(k[Oe],Oe,Gt);if(!je)return null;Ee.push(je)}return new Ln(le,Ee)},Ln.prototype.evaluate=function(k){if(this.type.kind==="boolean")return!!this.args[0].evaluate(k);if(this.type.kind==="color"){for(var D,Y,le=0,Ee=this.args;le<Ee.length;le+=1){if(Y=null,(D=Ee[le].evaluate(k))instanceof yn)return D;if(typeof D=="string"){var Oe=k.parseColor(D);if(Oe)return Oe}else if(Array.isArray(D)&&!(Y=D.length<3||D.length>4?"Invalid rbga value "+JSON.stringify(D)+": expected an array containing either three or four numeric values.":Pn(D[0],D[1],D[2],D[3])))return new yn(D[0]/255,D[1]/255,D[2]/255,D[3])}throw new $n(Y||"Could not parse color from value '"+(typeof D=="string"?D:String(JSON.stringify(D)))+"'")}if(this.type.kind==="number"){for(var je=null,$e=0,ut=this.args;$e<ut.length;$e+=1){if((je=ut[$e].evaluate(k))===null)return 0;var bt=Number(je);if(!isNaN(bt))return bt}throw new $n("Could not convert "+JSON.stringify(je)+" to number.")}return this.type.kind==="formatted"?Nn.fromString(lr(this.args[0].evaluate(k))):this.type.kind==="resolvedImage"?_n.fromString(lr(this.args[0].evaluate(k))):lr(this.args[0].evaluate(k))},Ln.prototype.eachChild=function(k){this.args.forEach(k)},Ln.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},Ln.prototype.serialize=function(){if(this.type.kind==="formatted")return new rn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new fn(this.args[0]).serialize();var k=["to-"+this.type.kind];return this.eachChild(function(D){k.push(D.serialize())}),k};var Xn=["Unknown","Point","LineString","Polygon"],Un=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Un.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Un.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Xn[this.feature.type]:this.feature.type:null},Un.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Un.prototype.canonicalID=function(){return this.canonical},Un.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Un.prototype.parseColor=function(k){var D=this._parseColorCache[k];return D||(D=this._parseColorCache[k]=yn.parse(k)),D};var Hn=function(k,D,Y,le){this.name=k,this.type=D,this._evaluate=Y,this.args=le};Hn.prototype.evaluate=function(k){return this._evaluate(k,this.args)},Hn.prototype.eachChild=function(k){this.args.forEach(k)},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){return[this.name].concat(this.args.map(function(k){return k.serialize()}))},Hn.parse=function(k,D){var Y,le=k[0],Ee=Hn.definitions[le];if(!Ee)return D.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Oe=Array.isArray(Ee)?Ee[0]:Ee.type,je=Array.isArray(Ee)?[[Ee[1],Ee[2]]]:Ee.overloads,$e=je.filter(function(Gr){var Or=Gr[0];return!Array.isArray(Or)||Or.length===k.length-1}),ut=null,bt=0,Tt=$e;bt<Tt.length;bt+=1){var Rt=Tt[bt],Ht=Rt[0],Ut=Rt[1];ut=new Bt(D.registry,D.path,null,D.scope);for(var on=[],pn=!1,zn=1;zn<k.length;zn++){var Dn=k[zn],Vn=Array.isArray(Ht)?Ht[zn-1]:Ht.type,Gn=ut.parse(Dn,1+on.length,Vn);if(!Gn){pn=!0;break}on.push(Gn)}if(!pn)if(Array.isArray(Ht)&&Ht.length!==on.length)ut.error("Expected "+Ht.length+" arguments, but found "+on.length+" instead.");else{for(var er=0;er<on.length;er++){var rr=Array.isArray(Ht)?Ht[er]:Ht.type,cr=on[er];ut.concat(er+1).checkSubtype(rr,cr.type)}if(ut.errors.length===0)return new Hn(le,Oe,Ut,on)}}if($e.length===1)(Y=D.errors).push.apply(Y,ut.errors);else{for(var br=($e.length?$e:je).map(function(Gr){return Or=Gr[0],Array.isArray(Or)?"("+Or.map(Tn).join(", ")+")":"("+Tn(Or.type)+"...)";var Or}).join(" | "),gr=[],wr=1;wr<k.length;wr++){var Er=D.parse(k[wr],1+gr.length);if(!Er)return null;gr.push(Tn(Er.type))}D.error("Expected arguments of type "+br+", but found ("+gr.join(", ")+") instead.")}return null},Hn.register=function(k,D){for(var Y in Hn.definitions=D,D)k[Y]=Hn};var Kn=function(k,D,Y){this.type=an,this.locale=Y,this.caseSensitive=k,this.diacriticSensitive=D};Kn.parse=function(k,D){if(k.length!==2)return D.error("Expected one argument.");var Y=k[1];if(typeof Y!="object"||Array.isArray(Y))return D.error("Collator options argument must be an object.");var le=D.parse(Y["case-sensitive"]!==void 0&&Y["case-sensitive"],1,wt);if(!le)return null;var Ee=D.parse(Y["diacritic-sensitive"]!==void 0&&Y["diacritic-sensitive"],1,wt);if(!Ee)return null;var Oe=null;return Y.locale&&!(Oe=D.parse(Y.locale,1,pt))?null:new Kn(le,Ee,Oe)},Kn.prototype.evaluate=function(k){return new En(this.caseSensitive.evaluate(k),this.diacriticSensitive.evaluate(k),this.locale?this.locale.evaluate(k):null)},Kn.prototype.eachChild=function(k){k(this.caseSensitive),k(this.diacriticSensitive),this.locale&&k(this.locale)},Kn.prototype.outputDefined=function(){return!1},Kn.prototype.serialize=function(){var k={};return k["case-sensitive"]=this.caseSensitive.serialize(),k["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(k.locale=this.locale.serialize()),["collator",k]};var qt=8192;function On(k,D){k[0]=Math.min(k[0],D[0]),k[1]=Math.min(k[1],D[1]),k[2]=Math.max(k[2],D[0]),k[3]=Math.max(k[3],D[1])}function Et(k,D){return!(k[0]<=D[0]||k[2]>=D[2]||k[1]<=D[1]||k[3]>=D[3])}function Xt(k,D){var Y,le=(180+k[0])/360,Ee=(Y=k[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Y*Math.PI/360)))/360),Oe=Math.pow(2,D.z);return[Math.round(le*Oe*qt),Math.round(Ee*Oe*qt)]}function nn(k,D,Y){return D[1]>k[1]!=Y[1]>k[1]&&k[0]<(Y[0]-D[0])*(k[1]-D[1])/(Y[1]-D[1])+D[0]}function An(k,D){for(var Y=!1,le=0,Ee=D.length;le<Ee;le++)for(var Oe=D[le],je=0,$e=Oe.length;je<$e-1;je++){if(ut=k,bt=Oe[je],Tt=Oe[je+1],Rt=void 0,Ht=void 0,Ut=void 0,on=void 0,Rt=ut[0]-bt[0],Ht=ut[1]-bt[1],Ut=ut[0]-Tt[0],on=ut[1]-Tt[1],Rt*on-Ut*Ht==0&&Rt*Ut<=0&&Ht*on<=0)return!1;nn(k,Oe[je],Oe[je+1])&&(Y=!Y)}var ut,bt,Tt,Rt,Ht,Ut,on;return Y}function Cn(k,D){for(var Y=0;Y<D.length;Y++)if(An(k,D[Y]))return!0;return!1}function Rn(k,D,Y,le){var Ee=k[0]-Y[0],Oe=k[1]-Y[1],je=D[0]-Y[0],$e=D[1]-Y[1],ut=le[0]-Y[0],bt=le[1]-Y[1],Tt=Ee*bt-ut*Oe,Rt=je*bt-ut*$e;return Tt>0&&Rt<0||Tt<0&&Rt>0}function gn(k,D,Y){for(var le=0,Ee=Y;le<Ee.length;le+=1)for(var Oe=Ee[le],je=0;je<Oe.length-1;++je)if($e=k,ut=D,bt=Oe[je],Tt=Oe[je+1],Rt=void 0,Ht=void 0,Ut=void 0,Ut=[ut[0]-$e[0],ut[1]-$e[1]],Rt=[Tt[0]-bt[0],Tt[1]-bt[1]],Ht=Ut,Rt[0]*Ht[1]-Rt[1]*Ht[0]!=0&&Rn($e,ut,bt,Tt)&&Rn(bt,Tt,$e,ut))return!0;var $e,ut,bt,Tt,Rt,Ht,Ut;return!1}function $t(k,D){for(var Y=0;Y<k.length;++Y)if(!An(k[Y],D))return!1;for(var le=0;le<k.length-1;++le)if(gn(k[le],k[le+1],D))return!1;return!0}function Qt(k,D){for(var Y=0;Y<D.length;Y++)if($t(k,D[Y]))return!0;return!1}function hn(k,D,Y){for(var le=[],Ee=0;Ee<k.length;Ee++){for(var Oe=[],je=0;je<k[Ee].length;je++){var $e=Xt(k[Ee][je],Y);On(D,$e),Oe.push($e)}le.push(Oe)}return le}function vn(k,D,Y){for(var le=[],Ee=0;Ee<k.length;Ee++){var Oe=hn(k[Ee],D,Y);le.push(Oe)}return le}function Fn(k,D,Y,le){if(k[0]<Y[0]||k[0]>Y[2]){var Ee=.5*le,Oe=k[0]-Y[0]>Ee?-le:Y[0]-k[0]>Ee?le:0;Oe===0&&(Oe=k[0]-Y[2]>Ee?-le:Y[2]-k[0]>Ee?le:0),k[0]+=Oe}On(D,k)}function In(k,D,Y,le){for(var Ee=Math.pow(2,le.z)*qt,Oe=[le.x*qt,le.y*qt],je=[],$e=0,ut=k;$e<ut.length;$e+=1)for(var bt=0,Tt=ut[$e];bt<Tt.length;bt+=1){var Rt=Tt[bt],Ht=[Rt.x+Oe[0],Rt.y+Oe[1]];Fn(Ht,D,Y,Ee),je.push(Ht)}return je}function Qn(k,D,Y,le){for(var Ee=Math.pow(2,le.z)*qt,Oe=[le.x*qt,le.y*qt],je=[],$e=0,ut=k;$e<ut.length;$e+=1){for(var bt=[],Tt=0,Rt=ut[$e];Tt<Rt.length;Tt+=1){var Ht=Rt[Tt],Ut=[Ht.x+Oe[0],Ht.y+Oe[1]];On(D,Ut),bt.push(Ut)}je.push(bt)}if(D[2]-D[0]<=Ee/2){(Vn=D)[0]=Vn[1]=1/0,Vn[2]=Vn[3]=-1/0;for(var on=0,pn=je;on<pn.length;on+=1)for(var zn=0,Dn=pn[on];zn<Dn.length;zn+=1)Fn(Dn[zn],D,Y,Ee)}var Vn;return je}var Wn=function(k,D){this.type=wt,this.geojson=k,this.geometries=D};function Ke(k){if(k instanceof Hn&&(k.name==="get"&&k.args.length===1||k.name==="feature-state"||k.name==="has"&&k.args.length===1||k.name==="properties"||k.name==="geometry-type"||k.name==="id"||/^filter-/.test(k.name))||k instanceof Wn)return!1;var D=!0;return k.eachChild(function(Y){D&&!Ke(Y)&&(D=!1)}),D}function it(k){if(k instanceof Hn&&k.name==="feature-state")return!1;var D=!0;return k.eachChild(function(Y){D&&!it(Y)&&(D=!1)}),D}function Mt(k,D){if(k instanceof Hn&&D.indexOf(k.name)>=0)return!1;var Y=!0;return k.eachChild(function(le){Y&&!Mt(le,D)&&(Y=!1)}),Y}Wn.parse=function(k,D){if(k.length!==2)return D.error("'within' expression requires exactly one argument, but found "+(k.length-1)+" instead.");if(tr(k[1])){var Y=k[1];if(Y.type==="FeatureCollection")for(var le=0;le<Y.features.length;++le){var Ee=Y.features[le].geometry.type;if(Ee==="Polygon"||Ee==="MultiPolygon")return new Wn(Y,Y.features[le].geometry)}else if(Y.type==="Feature"){var Oe=Y.geometry.type;if(Oe==="Polygon"||Oe==="MultiPolygon")return new Wn(Y,Y.geometry)}else if(Y.type==="Polygon"||Y.type==="MultiPolygon")return new Wn(Y,Y)}return D.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Wn.prototype.evaluate=function(k){if(k.geometry()!=null&&k.canonicalID()!=null){if(k.geometryType()==="Point")return function(D,Y){var le=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],Oe=D.canonicalID();if(Y.type==="Polygon"){var je=hn(Y.coordinates,Ee,Oe),$e=In(D.geometry(),le,Ee,Oe);if(!Et(le,Ee))return!1;for(var ut=0,bt=$e;ut<bt.length;ut+=1)if(!An(bt[ut],je))return!1}if(Y.type==="MultiPolygon"){var Tt=vn(Y.coordinates,Ee,Oe),Rt=In(D.geometry(),le,Ee,Oe);if(!Et(le,Ee))return!1;for(var Ht=0,Ut=Rt;Ht<Ut.length;Ht+=1)if(!Cn(Ut[Ht],Tt))return!1}return!0}(k,this.geometries);if(k.geometryType()==="LineString")return function(D,Y){var le=[1/0,1/0,-1/0,-1/0],Ee=[1/0,1/0,-1/0,-1/0],Oe=D.canonicalID();if(Y.type==="Polygon"){var je=hn(Y.coordinates,Ee,Oe),$e=Qn(D.geometry(),le,Ee,Oe);if(!Et(le,Ee))return!1;for(var ut=0,bt=$e;ut<bt.length;ut+=1)if(!$t(bt[ut],je))return!1}if(Y.type==="MultiPolygon"){var Tt=vn(Y.coordinates,Ee,Oe),Rt=Qn(D.geometry(),le,Ee,Oe);if(!Et(le,Ee))return!1;for(var Ht=0,Ut=Rt;Ht<Ut.length;Ht+=1)if(!Qt(Ut[Ht],Tt))return!1}return!0}(k,this.geometries)}return!1},Wn.prototype.eachChild=function(){},Wn.prototype.outputDefined=function(){return!0},Wn.prototype.serialize=function(){return["within",this.geojson]};var Lt=function(k,D){this.type=D.type,this.name=k,this.boundExpression=D};Lt.parse=function(k,D){if(k.length!==2||typeof k[1]!="string")return D.error("'var' expression requires exactly one string literal argument.");var Y=k[1];return D.scope.has(Y)?new Lt(Y,D.scope.get(Y)):D.error('Unknown variable "'+Y+'". Make sure "'+Y+'" has been bound in an enclosing "let" expression before using it.',1)},Lt.prototype.evaluate=function(k){return this.boundExpression.evaluate(k)},Lt.prototype.eachChild=function(){},Lt.prototype.outputDefined=function(){return!1},Lt.prototype.serialize=function(){return["var",this.name]};var Bt=function(k,D,Y,le,Ee){D===void 0&&(D=[]),le===void 0&&(le=new ft),Ee===void 0&&(Ee=[]),this.registry=k,this.path=D,this.key=D.map(function(Oe){return"["+Oe+"]"}).join(""),this.scope=le,this.errors=Ee,this.expectedType=Y};function ln(k){if(k instanceof Lt)return ln(k.boundExpression);if(k instanceof Hn&&k.name==="error"||k instanceof Kn||k instanceof Wn)return!1;var D=k instanceof Ln||k instanceof jt,Y=!0;return k.eachChild(function(le){Y=D?Y&&ln(le):Y&&le instanceof ir}),!!Y&&Ke(k)&&Mt(k,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function wn(k,D){for(var Y,le,Ee=k.length-1,Oe=0,je=Ee,$e=0;Oe<=je;)if(Y=k[$e=Math.floor((Oe+je)/2)],le=k[$e+1],Y<=D){if($e===Ee||D<le)return $e;Oe=$e+1}else{if(!(Y>D))throw new $n("Input is not a number.");je=$e-1}return 0}Bt.prototype.parse=function(k,D,Y,le,Ee){return Ee===void 0&&(Ee={}),D?this.concat(D,Y,le)._parse(k,Ee):this._parse(k,Ee)},Bt.prototype._parse=function(k,D){function Y(bt,Tt,Rt){return Rt==="assert"?new jt(Tt,[bt]):Rt==="coerce"?new Ln(Tt,[bt]):bt}if(k!==null&&typeof k!="string"&&typeof k!="boolean"&&typeof k!="number"||(k=["literal",k]),Array.isArray(k)){if(k.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var le=k[0];if(typeof le!="string")return this.error("Expression name must be a string, but found "+typeof le+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var Ee=this.registry[le];if(Ee){var Oe=Ee.parse(k,this);if(!Oe)return null;if(this.expectedType){var je=this.expectedType,$e=Oe.type;if(je.kind!=="string"&&je.kind!=="number"&&je.kind!=="boolean"&&je.kind!=="object"&&je.kind!=="array"||$e.kind!=="value")if(je.kind!=="color"&&je.kind!=="formatted"&&je.kind!=="resolvedImage"||$e.kind!=="value"&&$e.kind!=="string"){if(this.checkSubtype(je,$e))return null}else Oe=Y(Oe,je,D.typeAnnotation||"coerce");else Oe=Y(Oe,je,D.typeAnnotation||"assert")}if(!(Oe instanceof ir)&&Oe.type.kind!=="resolvedImage"&&ln(Oe)){var ut=new Un;try{Oe=new ir(Oe.type,Oe.evaluate(ut))}catch(bt){return this.error(bt.message),null}}return Oe}return this.error('Unknown expression "'+le+'". If you wanted a literal array, use ["literal", [...]].',0)}return k===void 0?this.error("'undefined' value invalid. Use null instead."):typeof k=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof k+" instead.")},Bt.prototype.concat=function(k,D,Y){var le=typeof k=="number"?this.path.concat(k):this.path,Ee=Y?this.scope.concat(Y):this.scope;return new Bt(this.registry,le,D||null,Ee,this.errors)},Bt.prototype.error=function(k){for(var D=[],Y=arguments.length-1;Y-- >0;)D[Y]=arguments[Y+1];var le=""+this.key+D.map(function(Ee){return"["+Ee+"]"}).join("");this.errors.push(new mt(le,k))},Bt.prototype.checkSubtype=function(k,D){var Y=mn(k,D);return Y&&this.error(Y),Y};var jn=function(k,D,Y){this.type=k,this.input=D,this.labels=[],this.outputs=[];for(var le=0,Ee=Y;le<Ee.length;le+=1){var Oe=Ee[le],je=Oe[0],$e=Oe[1];this.labels.push(je),this.outputs.push($e)}};function bn(k,D,Y){return k*(1-Y)+D*Y}jn.parse=function(k,D){if(k.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if((k.length-1)%2!=0)return D.error("Expected an even number of arguments.");var Y=D.parse(k[1],1,ht);if(!Y)return null;var le=[],Ee=null;D.expectedType&&D.expectedType.kind!=="value"&&(Ee=D.expectedType);for(var Oe=1;Oe<k.length;Oe+=2){var je=Oe===1?-1/0:k[Oe],$e=k[Oe+1],ut=Oe,bt=Oe+1;if(typeof je!="number")return D.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(le.length&&le[le.length-1][0]>=je)return D.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ut);var Tt=D.parse($e,bt,Ee);if(!Tt)return null;Ee=Ee||Tt.type,le.push([je,Tt])}return new jn(Ee,Y,le)},jn.prototype.evaluate=function(k){var D=this.labels,Y=this.outputs;if(D.length===1)return Y[0].evaluate(k);var le=this.input.evaluate(k);if(le<=D[0])return Y[0].evaluate(k);var Ee=D.length;return le>=D[Ee-1]?Y[Ee-1].evaluate(k):Y[wn(D,le)].evaluate(k)},jn.prototype.eachChild=function(k){k(this.input);for(var D=0,Y=this.outputs;D<Y.length;D+=1)k(Y[D])},jn.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})},jn.prototype.serialize=function(){for(var k=["step",this.input.serialize()],D=0;D<this.labels.length;D++)D>0&&k.push(this.labels[D]),k.push(this.outputs[D].serialize());return k};var qn=Object.freeze({__proto__:null,number:bn,color:function(k,D,Y){return new yn(bn(k.r,D.r,Y),bn(k.g,D.g,Y),bn(k.b,D.b,Y),bn(k.a,D.a,Y))},array:function(k,D,Y){return k.map(function(le,Ee){return bn(le,D[Ee],Y)})}}),or=.95047,ar=1,mr=1.08883,kr=4/29,Cr=6/29,Br=3*Cr*Cr,Wr=Cr*Cr*Cr,fi=Math.PI/180,pi=180/Math.PI;function bi(k){return k>Wr?Math.pow(k,.3333333333333333):k/Br+kr}function Da(k){return k>Cr?k*k*k:Br*(k-kr)}function Go(k){return 255*(k<=.0031308?12.92*k:1.055*Math.pow(k,.4166666666666667)-.055)}function _s(k){return(k/=255)<=.04045?k/12.92:Math.pow((k+.055)/1.055,2.4)}function Ks(k){var D=_s(k.r),Y=_s(k.g),le=_s(k.b),Ee=bi((.4124564*D+.3575761*Y+.1804375*le)/or),Oe=bi((.2126729*D+.7151522*Y+.072175*le)/ar);return{l:116*Oe-16,a:500*(Ee-Oe),b:200*(Oe-bi((.0193339*D+.119192*Y+.9503041*le)/mr)),alpha:k.a}}function Qa(k){var D=(k.l+16)/116,Y=isNaN(k.a)?D:D+k.a/500,le=isNaN(k.b)?D:D-k.b/200;return D=ar*Da(D),Y=or*Da(Y),le=mr*Da(le),new yn(Go(3.2404542*Y-1.5371385*D-.4985314*le),Go(-.969266*Y+1.8760108*D+.041556*le),Go(.0556434*Y-.2040259*D+1.0572252*le),k.alpha)}function cl(k,D,Y){var le=D-k;return k+Y*(le>180||le<-180?le-360*Math.round(le/360):le)}var Wo={forward:Ks,reverse:Qa,interpolate:function(k,D,Y){return{l:bn(k.l,D.l,Y),a:bn(k.a,D.a,Y),b:bn(k.b,D.b,Y),alpha:bn(k.alpha,D.alpha,Y)}}},qo={forward:function(k){var D=Ks(k),Y=D.l,le=D.a,Ee=D.b,Oe=Math.atan2(Ee,le)*pi;return{h:Oe<0?Oe+360:Oe,c:Math.sqrt(le*le+Ee*Ee),l:Y,alpha:k.a}},reverse:function(k){var D=k.h*fi,Y=k.c;return Qa({l:k.l,a:Math.cos(D)*Y,b:Math.sin(D)*Y,alpha:k.alpha})},interpolate:function(k,D,Y){return{h:cl(k.h,D.h,Y),c:bn(k.c,D.c,Y),l:bn(k.l,D.l,Y),alpha:bn(k.alpha,D.alpha,Y)}}},eo=Object.freeze({__proto__:null,lab:Wo,hcl:qo}),Ri=function(k,D,Y,le,Ee){this.type=k,this.operator=D,this.interpolation=Y,this.input=le,this.labels=[],this.outputs=[];for(var Oe=0,je=Ee;Oe<je.length;Oe+=1){var $e=je[Oe],ut=$e[0],bt=$e[1];this.labels.push(ut),this.outputs.push(bt)}};function ws(k,D,Y,le){var Ee=le-Y,Oe=k-Y;return Ee===0?0:D===1?Oe/Ee:(Math.pow(D,Oe)-1)/(Math.pow(D,Ee)-1)}Ri.interpolationFactor=function(k,D,Y,le){var Ee=0;if(k.name==="exponential")Ee=ws(D,k.base,Y,le);else if(k.name==="linear")Ee=ws(D,1,Y,le);else if(k.name==="cubic-bezier"){var Oe=k.controlPoints;Ee=new f(Oe[0],Oe[1],Oe[2],Oe[3]).solve(ws(D,1,Y,le))}return Ee},Ri.parse=function(k,D){var Y=k[0],le=k[1],Ee=k[2],Oe=k.slice(3);if(!Array.isArray(le)||le.length===0)return D.error("Expected an interpolation type expression.",1);if(le[0]==="linear")le={name:"linear"};else if(le[0]==="exponential"){var je=le[1];if(typeof je!="number")return D.error("Exponential interpolation requires a numeric base.",1,1);le={name:"exponential",base:je}}else{if(le[0]!=="cubic-bezier")return D.error("Unknown interpolation type "+String(le[0]),1,0);var $e=le.slice(1);if($e.length!==4||$e.some(function(zn){return typeof zn!="number"||zn<0||zn>1}))return D.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);le={name:"cubic-bezier",controlPoints:$e}}if(k.length-1<4)return D.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if((k.length-1)%2!=0)return D.error("Expected an even number of arguments.");if(!(Ee=D.parse(Ee,2,ht)))return null;var ut=[],bt=null;Y==="interpolate-hcl"||Y==="interpolate-lab"?bt=Ft:D.expectedType&&D.expectedType.kind!=="value"&&(bt=D.expectedType);for(var Tt=0;Tt<Oe.length;Tt+=2){var Rt=Oe[Tt],Ht=Oe[Tt+1],Ut=Tt+3,on=Tt+4;if(typeof Rt!="number")return D.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ut);if(ut.length&&ut[ut.length-1][0]>=Rt)return D.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ut);var pn=D.parse(Ht,on,bt);if(!pn)return null;bt=bt||pn.type,ut.push([Rt,pn])}return bt.kind==="number"||bt.kind==="color"||bt.kind==="array"&&bt.itemType.kind==="number"&&typeof bt.N=="number"?new Ri(bt,Y,le,Ee,ut):D.error("Type "+Tn(bt)+" is not interpolatable.")},Ri.prototype.evaluate=function(k){var D=this.labels,Y=this.outputs;if(D.length===1)return Y[0].evaluate(k);var le=this.input.evaluate(k);if(le<=D[0])return Y[0].evaluate(k);var Ee=D.length;if(le>=D[Ee-1])return Y[Ee-1].evaluate(k);var Oe=wn(D,le),je=D[Oe],$e=D[Oe+1],ut=Ri.interpolationFactor(this.interpolation,le,je,$e),bt=Y[Oe].evaluate(k),Tt=Y[Oe+1].evaluate(k);return this.operator==="interpolate"?qn[this.type.kind.toLowerCase()](bt,Tt,ut):this.operator==="interpolate-hcl"?qo.reverse(qo.interpolate(qo.forward(bt),qo.forward(Tt),ut)):Wo.reverse(Wo.interpolate(Wo.forward(bt),Wo.forward(Tt),ut))},Ri.prototype.eachChild=function(k){k(this.input);for(var D=0,Y=this.outputs;D<Y.length;D+=1)k(Y[D])},Ri.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})},Ri.prototype.serialize=function(){var k;k=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var D=[this.operator,k,this.input.serialize()],Y=0;Y<this.labels.length;Y++)D.push(this.labels[Y],this.outputs[Y].serialize());return D};var ei=function(k,D){this.type=k,this.args=D};ei.parse=function(k,D){if(k.length<2)return D.error("Expectected at least one argument.");var Y=null,le=D.expectedType;le&&le.kind!=="value"&&(Y=le);for(var Ee=[],Oe=0,je=k.slice(1);Oe<je.length;Oe+=1){var $e=je[Oe],ut=D.parse($e,1+Ee.length,Y,void 0,{typeAnnotation:"omit"});if(!ut)return null;Y=Y||ut.type,Ee.push(ut)}var bt=le&&Ee.some(function(Tt){return mn(le,Tt.type)});return new ei(bt?Gt:Y,Ee)},ei.prototype.evaluate=function(k){for(var D,Y=null,le=0,Ee=0,Oe=this.args;Ee<Oe.length&&(le++,(Y=Oe[Ee].evaluate(k))&&Y instanceof _n&&!Y.available&&(D||(D=Y.name),Y=null,le===this.args.length&&(Y=D)),Y===null);Ee+=1);return Y},ei.prototype.eachChild=function(k){this.args.forEach(k)},ei.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},ei.prototype.serialize=function(){var k=["coalesce"];return this.eachChild(function(D){k.push(D.serialize())}),k};var to=function(k,D){this.type=D.type,this.bindings=[].concat(k),this.result=D};to.prototype.evaluate=function(k){return this.result.evaluate(k)},to.prototype.eachChild=function(k){for(var D=0,Y=this.bindings;D<Y.length;D+=1)k(Y[D][1]);k(this.result)},to.parse=function(k,D){if(k.length<4)return D.error("Expected at least 3 arguments, but found "+(k.length-1)+" instead.");for(var Y=[],le=1;le<k.length-1;le+=2){var Ee=k[le];if(typeof Ee!="string")return D.error("Expected string, but found "+typeof Ee+" instead.",le);if(/[^a-zA-Z0-9_]/.test(Ee))return D.error("Variable names must contain only alphanumeric characters or '_'.",le);var Oe=D.parse(k[le+1],le+1);if(!Oe)return null;Y.push([Ee,Oe])}var je=D.parse(k[k.length-1],k.length-1,D.expectedType,Y);return je?new to(Y,je):null},to.prototype.outputDefined=function(){return this.result.outputDefined()},to.prototype.serialize=function(){for(var k=["let"],D=0,Y=this.bindings;D<Y.length;D+=1){var le=Y[D],Ee=le[0],Oe=le[1];k.push(Ee,Oe.serialize())}return k.push(this.result.serialize()),k};var Ca=function(k,D,Y){this.type=k,this.index=D,this.input=Y};Ca.parse=function(k,D){if(k.length!==3)return D.error("Expected 2 arguments, but found "+(k.length-1)+" instead.");var Y=D.parse(k[1],1,ht),le=D.parse(k[2],2,en(D.expectedType||Gt));if(!Y||!le)return null;var Ee=le.type;return new Ca(Ee.itemType,Y,le)},Ca.prototype.evaluate=function(k){var D=this.index.evaluate(k),Y=this.input.evaluate(k);if(D<0)throw new $n("Array index out of bounds: "+D+" < 0.");if(D>=Y.length)throw new $n("Array index out of bounds: "+D+" > "+(Y.length-1)+".");if(D!==Math.floor(D))throw new $n("Array index must be an integer, but found "+D+" instead.");return Y[D]},Ca.prototype.eachChild=function(k){k(this.index),k(this.input)},Ca.prototype.outputDefined=function(){return!1},Ca.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var uo=function(k,D){this.type=wt,this.needle=k,this.haystack=D};uo.parse=function(k,D){if(k.length!==3)return D.error("Expected 2 arguments, but found "+(k.length-1)+" instead.");var Y=D.parse(k[1],1,Gt),le=D.parse(k[2],2,Gt);return Y&&le?Kt(Y.type,[wt,pt,ht,kt,Gt])?new uo(Y,le):D.error("Expected first argument to be of type boolean, string, number or null, but found "+Tn(Y.type)+" instead"):null},uo.prototype.evaluate=function(k){var D=this.needle.evaluate(k),Y=this.haystack.evaluate(k);if(!Y)return!1;if(!cn(D,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+Tn(ur(D))+" instead.");if(!cn(Y,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+Tn(ur(Y))+" instead.");return Y.indexOf(D)>=0},uo.prototype.eachChild=function(k){k(this.needle),k(this.haystack)},uo.prototype.outputDefined=function(){return!0},uo.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ha=function(k,D,Y){this.type=ht,this.needle=k,this.haystack=D,this.fromIndex=Y};Ha.parse=function(k,D){if(k.length<=2||k.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(k.length-1)+" instead.");var Y=D.parse(k[1],1,Gt),le=D.parse(k[2],2,Gt);if(!Y||!le)return null;if(!Kt(Y.type,[wt,pt,ht,kt,Gt]))return D.error("Expected first argument to be of type boolean, string, number or null, but found "+Tn(Y.type)+" instead");if(k.length===4){var Ee=D.parse(k[3],3,ht);return Ee?new Ha(Y,le,Ee):null}return new Ha(Y,le)},Ha.prototype.evaluate=function(k){var D=this.needle.evaluate(k),Y=this.haystack.evaluate(k);if(!cn(D,["boolean","string","number","null"]))throw new $n("Expected first argument to be of type boolean, string, number or null, but found "+Tn(ur(D))+" instead.");if(!cn(Y,["string","array"]))throw new $n("Expected second argument to be of type array or string, but found "+Tn(ur(Y))+" instead.");if(this.fromIndex){var le=this.fromIndex.evaluate(k);return Y.indexOf(D,le)}return Y.indexOf(D)},Ha.prototype.eachChild=function(k){k(this.needle),k(this.haystack),this.fromIndex&&k(this.fromIndex)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var k=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),k]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ao=function(k,D,Y,le,Ee,Oe){this.inputType=k,this.type=D,this.input=Y,this.cases=le,this.outputs=Ee,this.otherwise=Oe};Ao.parse=function(k,D){if(k.length<5)return D.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if(k.length%2!=1)return D.error("Expected an even number of arguments.");var Y,le;D.expectedType&&D.expectedType.kind!=="value"&&(le=D.expectedType);for(var Ee={},Oe=[],je=2;je<k.length-1;je+=2){var $e=k[je],ut=k[je+1];Array.isArray($e)||($e=[$e]);var bt=D.concat(je);if($e.length===0)return bt.error("Expected at least one branch label.");for(var Tt=0,Rt=$e;Tt<Rt.length;Tt+=1){var Ht=Rt[Tt];if(typeof Ht!="number"&&typeof Ht!="string")return bt.error("Branch labels must be numbers or strings.");if(typeof Ht=="number"&&Math.abs(Ht)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ht=="number"&&Math.floor(Ht)!==Ht)return bt.error("Numeric branch labels must be integer values.");if(Y){if(bt.checkSubtype(Y,ur(Ht)))return null}else Y=ur(Ht);if(Ee[String(Ht)]!==void 0)return bt.error("Branch labels must be unique.");Ee[String(Ht)]=Oe.length}var Ut=D.parse(ut,je,le);if(!Ut)return null;le=le||Ut.type,Oe.push(Ut)}var on=D.parse(k[1],1,Gt);if(!on)return null;var pn=D.parse(k[k.length-1],k.length-1,le);return pn?on.type.kind!=="value"&&D.concat(1).checkSubtype(Y,on.type)?null:new Ao(Y,le,on,Ee,Oe,pn):null},Ao.prototype.evaluate=function(k){var D=this.input.evaluate(k);return(ur(D)===this.inputType&&this.outputs[this.cases[D]]||this.otherwise).evaluate(k)},Ao.prototype.eachChild=function(k){k(this.input),this.outputs.forEach(k),k(this.otherwise)},Ao.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})&&this.otherwise.outputDefined()},Ao.prototype.serialize=function(){for(var k=this,D=["match",this.input.serialize()],Y=[],le={},Ee=0,Oe=Object.keys(this.cases).sort();Ee<Oe.length;Ee+=1){var je=Oe[Ee];(Rt=le[this.cases[je]])===void 0?(le[this.cases[je]]=Y.length,Y.push([this.cases[je],[je]])):Y[Rt][1].push(je)}for(var $e=function(Ut){return k.inputType.kind==="number"?Number(Ut):Ut},ut=0,bt=Y;ut<bt.length;ut+=1){var Tt=bt[ut],Rt=Tt[0],Ht=Tt[1];Ht.length===1?D.push($e(Ht[0])):D.push(Ht.map($e)),D.push(this.outputs[outputIndex$1].serialize())}return D.push(this.otherwise.serialize()),D};var co=function(k,D,Y){this.type=k,this.branches=D,this.otherwise=Y};co.parse=function(k,D){if(k.length<4)return D.error("Expected at least 3 arguments, but found only "+(k.length-1)+".");if(k.length%2!=0)return D.error("Expected an odd number of arguments.");var Y;D.expectedType&&D.expectedType.kind!=="value"&&(Y=D.expectedType);for(var le=[],Ee=1;Ee<k.length-1;Ee+=2){var Oe=D.parse(k[Ee],Ee,wt);if(!Oe)return null;var je=D.parse(k[Ee+1],Ee+1,Y);if(!je)return null;le.push([Oe,je]),Y=Y||je.type}var $e=D.parse(k[k.length-1],k.length-1,Y);return $e?new co(Y,le,$e):null},co.prototype.evaluate=function(k){for(var D=0,Y=this.branches;D<Y.length;D+=1){var le=Y[D],Ee=le[0],Oe=le[1];if(Ee.evaluate(k))return Oe.evaluate(k)}return this.otherwise.evaluate(k)},co.prototype.eachChild=function(k){for(var D=0,Y=this.branches;D<Y.length;D+=1){var le=Y[D],Ee=le[0],Oe=le[1];k(Ee),k(Oe)}k(this.otherwise)},co.prototype.outputDefined=function(){return this.branches.every(function(k){return k[0],k[1].outputDefined()})&&this.otherwise.outputDefined()},co.prototype.serialize=function(){var k=["case"];return this.eachChild(function(D){k.push(D.serialize())}),k};var fo=function(k,D,Y,le){this.type=k,this.input=D,this.beginIndex=Y,this.endIndex=le};function Fs(k,D){return k==="=="||k==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function fl(k,D,Y,le){return le.compare(D,Y)===0}function ko(k,D,Y){var le=k!=="=="&&k!=="!=";return function(){function Ee(Oe,je,$e){this.type=wt,this.lhs=Oe,this.rhs=je,this.collator=$e,this.hasUntypedArgument=Oe.type.kind==="value"||je.type.kind==="value"}return Ee.parse=function(Oe,je){if(Oe.length!==3&&Oe.length!==4)return je.error("Expected two or three arguments.");var $e=Oe[0],ut=je.parse(Oe[1],1,Gt);if(!ut)return null;if(!Fs($e,ut.type))return je.concat(1).error('"'+$e+`" comparisons are not supported for type '`+Tn(ut.type)+"'.");var bt=je.parse(Oe[2],2,Gt);if(!bt)return null;if(!Fs($e,bt.type))return je.concat(2).error('"'+$e+`" comparisons are not supported for type '`+Tn(bt.type)+"'.");if(ut.type.kind!==bt.type.kind&&ut.type.kind!=="value"&&bt.type.kind!=="value")return je.error("Cannot compare types '"+Tn(ut.type)+"' and '"+Tn(bt.type)+"'.");le&&(ut.type.kind==="value"&&bt.type.kind!=="value"?ut=new jt(bt.type,[ut]):ut.type.kind!=="value"&&bt.type.kind==="value"&&(bt=new jt(ut.type,[bt])));var Tt=null;if(Oe.length===4){if(ut.type.kind!=="string"&&bt.type.kind!=="string"&&ut.type.kind!=="value"&&bt.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(!(Tt=je.parse(Oe[3],3,an)))return null}return new Ee(ut,bt,Tt)},Ee.prototype.evaluate=function(Oe){var je=this.lhs.evaluate(Oe),$e=this.rhs.evaluate(Oe);if(le&&this.hasUntypedArgument){var ut=ur(je),bt=ur($e);if(ut.kind!==bt.kind||ut.kind!=="string"&&ut.kind!=="number")throw new $n('Expected arguments for "'+k+'" to be (string, string) or (number, number), but found ('+ut.kind+", "+bt.kind+") instead.")}if(this.collator&&!le&&this.hasUntypedArgument){var Tt=ur(je),Rt=ur($e);if(Tt.kind!=="string"||Rt.kind!=="string")return D(Oe,je,$e)}return this.collator?Y(Oe,je,$e,this.collator.evaluate(Oe)):D(Oe,je,$e)},Ee.prototype.eachChild=function(Oe){Oe(this.lhs),Oe(this.rhs),this.collator&&Oe(this.collator)},Ee.prototype.outputDefined=function(){return!0},Ee.prototype.serialize=function(){var Oe=[k];return this.eachChild(function(je){Oe.push(je.serialize())}),Oe},Ee}()}fo.parse=function(k,D){if(k.length<=2||k.length>=5)return D.error("Expected 3 or 4 arguments, but found "+(k.length-1)+" instead.");var Y=D.parse(k[1],1,Gt),le=D.parse(k[2],2,ht);if(!Y||!le)return null;if(!Kt(Y.type,[en(Gt),pt,Gt]))return D.error("Expected first argument to be of type array or string, but found "+Tn(Y.type)+" instead");if(k.length===4){var Ee=D.parse(k[3],3,ht);return Ee?new fo(Y.type,Y,le,Ee):null}return new fo(Y.type,Y,le)},fo.prototype.evaluate=function(k){var D=this.input.evaluate(k),Y=this.beginIndex.evaluate(k);if(!cn(D,["string","array"]))throw new $n("Expected first argument to be of type array or string, but found "+Tn(ur(D))+" instead.");if(this.endIndex){var le=this.endIndex.evaluate(k);return D.slice(Y,le)}return D.slice(Y)},fo.prototype.eachChild=function(k){k(this.input),k(this.beginIndex),this.endIndex&&k(this.endIndex)},fo.prototype.outputDefined=function(){return!1},fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var k=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),k]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var hl=ko("==",function(k,D,Y){return D===Y},fl),Js=ko("!=",function(k,D,Y){return D!==Y},function(k,D,Y,le){return!fl(0,D,Y,le)}),pl=ko("<",function(k,D,Y){return D<Y},function(k,D,Y,le){return le.compare(D,Y)<0}),$s=ko(">",function(k,D,Y){return D>Y},function(k,D,Y,le){return le.compare(D,Y)>0}),dl=ko("<=",function(k,D,Y){return D<=Y},function(k,D,Y,le){return le.compare(D,Y)<=0}),us=ko(">=",function(k,D,Y){return D>=Y},function(k,D,Y,le){return le.compare(D,Y)>=0}),So=function(k,D,Y,le,Ee){this.type=pt,this.number=k,this.locale=D,this.currency=Y,this.minFractionDigits=le,this.maxFractionDigits=Ee};So.parse=function(k,D){if(k.length!==3)return D.error("Expected two arguments.");var Y=D.parse(k[1],1,ht);if(!Y)return null;var le=k[2];if(typeof le!="object"||Array.isArray(le))return D.error("NumberFormat options argument must be an object.");var Ee=null;if(le.locale&&!(Ee=D.parse(le.locale,1,pt)))return null;var Oe=null;if(le.currency&&!(Oe=D.parse(le.currency,1,pt)))return null;var je=null;if(le["min-fraction-digits"]&&!(je=D.parse(le["min-fraction-digits"],1,ht)))return null;var $e=null;return le["max-fraction-digits"]&&!($e=D.parse(le["max-fraction-digits"],1,ht))?null:new So(Y,Ee,Oe,je,$e)},So.prototype.evaluate=function(k){return new Intl.NumberFormat(this.locale?this.locale.evaluate(k):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(k):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(k):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(k):void 0}).format(this.number.evaluate(k))},So.prototype.eachChild=function(k){k(this.number),this.locale&&k(this.locale),this.currency&&k(this.currency),this.minFractionDigits&&k(this.minFractionDigits),this.maxFractionDigits&&k(this.maxFractionDigits)},So.prototype.outputDefined=function(){return!1},So.prototype.serialize=function(){var k={};return this.locale&&(k.locale=this.locale.serialize()),this.currency&&(k.currency=this.currency.serialize()),this.minFractionDigits&&(k["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(k["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),k]};var Yo=function(k){this.type=ht,this.input=k};Yo.parse=function(k,D){if(k.length!==2)return D.error("Expected 1 argument, but found "+(k.length-1)+" instead.");var Y=D.parse(k[1],1);return Y?Y.type.kind!=="array"&&Y.type.kind!=="string"&&Y.type.kind!=="value"?D.error("Expected argument of type string or array, but found "+Tn(Y.type)+" instead."):new Yo(Y):null},Yo.prototype.evaluate=function(k){var D=this.input.evaluate(k);if(typeof D=="string"||Array.isArray(D))return D.length;throw new $n("Expected value to be of type string or array, but found "+Tn(ur(D))+" instead.")},Yo.prototype.eachChild=function(k){k(this.input)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){var k=["length"];return this.eachChild(function(D){k.push(D.serialize())}),k};var cs={"==":hl,"!=":Js,">":$s,"<":pl,">=":us,"<=":dl,array:jt,at:Ca,boolean:jt,case:co,coalesce:ei,collator:Kn,format:rn,image:fn,in:uo,"index-of":Ha,interpolate:Ri,"interpolate-hcl":Ri,"interpolate-lab":Ri,length:Yo,let:to,literal:ir,match:Ao,number:jt,"number-format":So,object:jt,slice:fo,step:jn,string:jt,"to-boolean":Ln,"to-color":Ln,"to-number":Ln,"to-string":Ln,var:Lt,within:Wn};function Ns(k,D){var Y=D[0],le=D[1],Ee=D[2],Oe=D[3];Y=Y.evaluate(k),le=le.evaluate(k),Ee=Ee.evaluate(k);var je=Oe?Oe.evaluate(k):1,$e=Pn(Y,le,Ee,je);if($e)throw new $n($e);return new yn(Y/255*je,le/255*je,Ee/255*je,je)}function Qs(k,D){return k in D}function el(k,D){var Y=D[k];return Y===void 0?null:Y}function za(k){return{type:k}}function Zo(k){return{result:"success",value:k}}function no(k){return{result:"error",value:k}}function ho(k){return k["property-type"]==="data-driven"||k["property-type"]==="cross-faded-data-driven"}function vl(k){return!!k.expression&&k.expression.parameters.indexOf("zoom")>-1}function Eo(k){return!!k.expression&&k.expression.interpolated}function li(k){return k instanceof Number?"number":k instanceof String?"string":k instanceof Boolean?"boolean":Array.isArray(k)?"array":k===null?"null":typeof k}function Ga(k){return typeof k=="object"&&k!==null&&!Array.isArray(k)}function Ts(k){return k}function Ra(k,D){var Y,le,Ee,Oe=D.type==="color",je=k.stops&&typeof k.stops[0][0]=="object",$e=je||k.property!==void 0,ut=je||!$e,bt=k.type||(Eo(D)?"exponential":"interval");if(Oe&&((k=tt({},k)).stops&&(k.stops=k.stops.map(function(gr){return[gr[0],yn.parse(gr[1])]})),k.default?k.default=yn.parse(k.default):k.default=yn.parse(D.default)),k.colorSpace&&k.colorSpace!=="rgb"&&!eo[k.colorSpace])throw new Error("Unknown color space: "+k.colorSpace);if(bt==="exponential")Y=ml;else if(bt==="interval")Y=js;else if(bt==="categorical"){Y=Cl,le=Object.create(null);for(var Tt=0,Rt=k.stops;Tt<Rt.length;Tt+=1){var Ht=Rt[Tt];le[Ht[0]]=Ht[1]}Ee=typeof k.stops[0][0]}else{if(bt!=="identity")throw new Error('Unknown function type "'+bt+'"');Y=yl}if(je){for(var Ut={},on=[],pn=0;pn<k.stops.length;pn++){var zn=k.stops[pn],Dn=zn[0].zoom;Ut[Dn]===void 0&&(Ut[Dn]={zoom:Dn,type:k.type,property:k.property,default:k.default,stops:[]},on.push(Dn)),Ut[Dn].stops.push([zn[0].value,zn[1]])}for(var Vn=[],Gn=0,er=on;Gn<er.length;Gn+=1){var rr=er[Gn];Vn.push([Ut[rr].zoom,Ra(Ut[rr],D)])}var cr={name:"linear"};return{kind:"composite",interpolationType:cr,interpolationFactor:Ri.interpolationFactor.bind(void 0,cr),zoomStops:Vn.map(function(gr){return gr[0]}),evaluate:function(gr,wr){var Er=gr.zoom;return ml({stops:Vn,base:k.base},D,Er).evaluate(Er,wr)}}}if(ut){var br=bt==="exponential"?{name:"exponential",base:k.base!==void 0?k.base:1}:null;return{kind:"camera",interpolationType:br,interpolationFactor:Ri.interpolationFactor.bind(void 0,br),zoomStops:k.stops.map(function(gr){return gr[0]}),evaluate:function(gr){var wr=gr.zoom;return Y(k,D,wr,le,Ee)}}}return{kind:"source",evaluate:function(gr,wr){var Er=wr&&wr.properties?wr.properties[k.property]:void 0;return Er===void 0?Xo(k.default,D.default):Y(k,D,Er,le,Ee)}}}function Xo(k,D,Y){return k!==void 0?k:D!==void 0?D:Y!==void 0?Y:void 0}function Cl(k,D,Y,le,Ee){return Xo(typeof Y===Ee?le[Y]:void 0,k.default,D.default)}function js(k,D,Y){if(li(Y)!=="number")return Xo(k.default,D.default);var le=k.stops.length;if(le===1||Y<=k.stops[0][0])return k.stops[0][1];if(Y>=k.stops[le-1][0])return k.stops[le-1][1];var Ee=wn(k.stops.map(function(Oe){return Oe[0]}),Y);return k.stops[Ee][1]}function ml(k,D,Y){var le=k.base!==void 0?k.base:1;if(li(Y)!=="number")return Xo(k.default,D.default);var Ee=k.stops.length;if(Ee===1||Y<=k.stops[0][0])return k.stops[0][1];if(Y>=k.stops[Ee-1][0])return k.stops[Ee-1][1];var Oe=wn(k.stops.map(function(Rt){return Rt[0]}),Y),je=function(Rt,Ht,Ut,on){var pn=on-Ut,zn=Rt-Ut;return pn===0?0:Ht===1?zn/pn:(Math.pow(Ht,zn)-1)/(Math.pow(Ht,pn)-1)}(Y,le,k.stops[Oe][0],k.stops[Oe+1][0]),$e=k.stops[Oe][1],ut=k.stops[Oe+1][1],bt=qn[D.type]||Ts;if(k.colorSpace&&k.colorSpace!=="rgb"){var Tt=eo[k.colorSpace];bt=function(Rt,Ht){return Tt.reverse(Tt.interpolate(Tt.forward(Rt),Tt.forward(Ht),je))}}return typeof $e.evaluate=="function"?{evaluate:function(){for(var Rt=[],Ht=arguments.length;Ht--;)Rt[Ht]=arguments[Ht];var Ut=$e.evaluate.apply(void 0,Rt),on=ut.evaluate.apply(void 0,Rt);if(Ut!==void 0&&on!==void 0)return bt(Ut,on,je)}}:bt($e,ut,je)}function yl(k,D,Y){return D.type==="color"?Y=yn.parse(Y):D.type==="formatted"?Y=Nn.fromString(Y.toString()):D.type==="resolvedImage"?Y=_n.fromString(Y.toString()):li(Y)===D.type||D.type==="enum"&&D.values[Y]||(Y=void 0),Xo(Y,k.default,D.default)}Hn.register(cs,{error:[{kind:"error"},[pt],function(k,D){var Y=D[0];throw new $n(Y.evaluate(k))}],typeof:[pt,[Gt],function(k,D){return Tn(ur(D[0].evaluate(k)))}],"to-rgba":[en(ht,4),[Ft],function(k,D){return D[0].evaluate(k).toArray()}],rgb:[Ft,[ht,ht,ht],Ns],rgba:[Ft,[ht,ht,ht,ht],Ns],has:{type:wt,overloads:[[[pt],function(k,D){return Qs(D[0].evaluate(k),k.properties())}],[[pt,Nt],function(k,D){var Y=D[0],le=D[1];return Qs(Y.evaluate(k),le.evaluate(k))}]]},get:{type:Gt,overloads:[[[pt],function(k,D){return el(D[0].evaluate(k),k.properties())}],[[pt,Nt],function(k,D){var Y=D[0],le=D[1];return el(Y.evaluate(k),le.evaluate(k))}]]},"feature-state":[Gt,[pt],function(k,D){return el(D[0].evaluate(k),k.featureState||{})}],properties:[Nt,[],function(k){return k.properties()}],"geometry-type":[pt,[],function(k){return k.geometryType()}],id:[Gt,[],function(k){return k.id()}],zoom:[ht,[],function(k){return k.globals.zoom}],"heatmap-density":[ht,[],function(k){return k.globals.heatmapDensity||0}],"line-progress":[ht,[],function(k){return k.globals.lineProgress||0}],accumulated:[Gt,[],function(k){return k.globals.accumulated===void 0?null:k.globals.accumulated}],"+":[ht,za(ht),function(k,D){for(var Y=0,le=0,Ee=D;le<Ee.length;le+=1)Y+=Ee[le].evaluate(k);return Y}],"*":[ht,za(ht),function(k,D){for(var Y=1,le=0,Ee=D;le<Ee.length;le+=1)Y*=Ee[le].evaluate(k);return Y}],"-":{type:ht,overloads:[[[ht,ht],function(k,D){var Y=D[0],le=D[1];return Y.evaluate(k)-le.evaluate(k)}],[[ht],function(k,D){return-D[0].evaluate(k)}]]},"/":[ht,[ht,ht],function(k,D){var Y=D[0],le=D[1];return Y.evaluate(k)/le.evaluate(k)}],"%":[ht,[ht,ht],function(k,D){var Y=D[0],le=D[1];return Y.evaluate(k)%le.evaluate(k)}],ln2:[ht,[],function(){return Math.LN2}],pi:[ht,[],function(){return Math.PI}],e:[ht,[],function(){return Math.E}],"^":[ht,[ht,ht],function(k,D){var Y=D[0],le=D[1];return Math.pow(Y.evaluate(k),le.evaluate(k))}],sqrt:[ht,[ht],function(k,D){var Y=D[0];return Math.sqrt(Y.evaluate(k))}],log10:[ht,[ht],function(k,D){var Y=D[0];return Math.log(Y.evaluate(k))/Math.LN10}],ln:[ht,[ht],function(k,D){var Y=D[0];return Math.log(Y.evaluate(k))}],log2:[ht,[ht],function(k,D){var Y=D[0];return Math.log(Y.evaluate(k))/Math.LN2}],sin:[ht,[ht],function(k,D){var Y=D[0];return Math.sin(Y.evaluate(k))}],cos:[ht,[ht],function(k,D){var Y=D[0];return Math.cos(Y.evaluate(k))}],tan:[ht,[ht],function(k,D){var Y=D[0];return Math.tan(Y.evaluate(k))}],asin:[ht,[ht],function(k,D){var Y=D[0];return Math.asin(Y.evaluate(k))}],acos:[ht,[ht],function(k,D){var Y=D[0];return Math.acos(Y.evaluate(k))}],atan:[ht,[ht],function(k,D){var Y=D[0];return Math.atan(Y.evaluate(k))}],min:[ht,za(ht),function(k,D){return Math.min.apply(Math,D.map(function(Y){return Y.evaluate(k)}))}],max:[ht,za(ht),function(k,D){return Math.max.apply(Math,D.map(function(Y){return Y.evaluate(k)}))}],abs:[ht,[ht],function(k,D){var Y=D[0];return Math.abs(Y.evaluate(k))}],round:[ht,[ht],function(k,D){var Y=D[0].evaluate(k);return Y<0?-Math.round(-Y):Math.round(Y)}],floor:[ht,[ht],function(k,D){var Y=D[0];return Math.floor(Y.evaluate(k))}],ceil:[ht,[ht],function(k,D){var Y=D[0];return Math.ceil(Y.evaluate(k))}],"filter-==":[wt,[pt,Gt],function(k,D){var Y=D[0],le=D[1];return k.properties()[Y.value]===le.value}],"filter-id-==":[wt,[Gt],function(k,D){var Y=D[0];return k.id()===Y.value}],"filter-type-==":[wt,[pt],function(k,D){var Y=D[0];return k.geometryType()===Y.value}],"filter-<":[wt,[pt,Gt],function(k,D){var Y=D[0],le=D[1],Ee=k.properties()[Y.value],Oe=le.value;return typeof Ee==typeof Oe&&Ee<Oe}],"filter-id-<":[wt,[Gt],function(k,D){var Y=D[0],le=k.id(),Ee=Y.value;return typeof le==typeof Ee&&le<Ee}],"filter->":[wt,[pt,Gt],function(k,D){var Y=D[0],le=D[1],Ee=k.properties()[Y.value],Oe=le.value;return typeof Ee==typeof Oe&&Ee>Oe}],"filter-id->":[wt,[Gt],function(k,D){var Y=D[0],le=k.id(),Ee=Y.value;return typeof le==typeof Ee&&le>Ee}],"filter-<=":[wt,[pt,Gt],function(k,D){var Y=D[0],le=D[1],Ee=k.properties()[Y.value],Oe=le.value;return typeof Ee==typeof Oe&&Ee<=Oe}],"filter-id-<=":[wt,[Gt],function(k,D){var Y=D[0],le=k.id(),Ee=Y.value;return typeof le==typeof Ee&&le<=Ee}],"filter->=":[wt,[pt,Gt],function(k,D){var Y=D[0],le=D[1],Ee=k.properties()[Y.value],Oe=le.value;return typeof Ee==typeof Oe&&Ee>=Oe}],"filter-id->=":[wt,[Gt],function(k,D){var Y=D[0],le=k.id(),Ee=Y.value;return typeof le==typeof Ee&&le>=Ee}],"filter-has":[wt,[Gt],function(k,D){return D[0].value in k.properties()}],"filter-has-id":[wt,[],function(k){return k.id()!==null&&k.id()!==void 0}],"filter-type-in":[wt,[en(pt)],function(k,D){return D[0].value.indexOf(k.geometryType())>=0}],"filter-id-in":[wt,[en(Gt)],function(k,D){return D[0].value.indexOf(k.id())>=0}],"filter-in-small":[wt,[pt,en(Gt)],function(k,D){var Y=D[0];return D[1].value.indexOf(k.properties()[Y.value])>=0}],"filter-in-large":[wt,[pt,en(Gt)],function(k,D){var Y=D[0],le=D[1];return function(Ee,Oe,je,$e){for(;je<=$e;){var ut=je+$e>>1;if(Oe[ut]===Ee)return!0;Oe[ut]>Ee?$e=ut-1:je=ut+1}return!1}(k.properties()[Y.value],le.value,0,le.value.length-1)}],all:{type:wt,overloads:[[[wt,wt],function(k,D){var Y=D[0],le=D[1];return Y.evaluate(k)&&le.evaluate(k)}],[za(wt),function(k,D){for(var Y=0,le=D;Y<le.length;Y+=1)if(!le[Y].evaluate(k))return!1;return!0}]]},any:{type:wt,overloads:[[[wt,wt],function(k,D){var Y=D[0],le=D[1];return Y.evaluate(k)||le.evaluate(k)}],[za(wt),function(k,D){for(var Y=0,le=D;Y<le.length;Y+=1)if(le[Y].evaluate(k))return!0;return!1}]]},"!":[wt,[wt],function(k,D){return!D[0].evaluate(k)}],"is-supported-script":[wt,[pt],function(k,D){var Y=D[0],le=k.globals&&k.globals.isSupportedScript;return!le||le(Y.evaluate(k))}],upcase:[pt,[pt],function(k,D){return D[0].evaluate(k).toUpperCase()}],downcase:[pt,[pt],function(k,D){return D[0].evaluate(k).toLowerCase()}],concat:[pt,za(Gt),function(k,D){return D.map(function(Y){return lr(Y.evaluate(k))}).join("")}],"resolved-locale":[pt,[an],function(k,D){return D[0].evaluate(k).resolvedLocale()}]});var Ms=function(k,D){this.expression=k,this._warningHistory={},this._evaluator=new Un,this._defaultValue=D?function(Y){return Y.type==="color"&&Ga(Y.default)?new yn(0,0,0,0):Y.type==="color"?yn.parse(Y.default)||null:Y.default===void 0?null:Y.default}(D):null,this._enumValues=D&&D.type==="enum"?D.values:null};function fs(k){return Array.isArray(k)&&k.length>0&&typeof k[0]=="string"&&k[0]in cs}function As(k,D){var Y=new Bt(cs,[],D?function(Ee){var Oe={color:Ft,string:pt,number:ht,enum:pt,boolean:wt,formatted:Wt,resolvedImage:Yt};return Ee.type==="array"?en(Oe[Ee.value]||Gt,Ee.length):Oe[Ee.type]}(D):void 0),le=Y.parse(k,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return le?Zo(new Ms(le,D)):no(Y.errors)}Ms.prototype.evaluateWithoutErrorHandling=function(k,D,Y,le,Ee,Oe){return this._evaluator.globals=k,this._evaluator.feature=D,this._evaluator.featureState=Y,this._evaluator.canonical=le,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=Oe,this.expression.evaluate(this._evaluator)},Ms.prototype.evaluate=function(k,D,Y,le,Ee,Oe){this._evaluator.globals=k,this._evaluator.feature=D||null,this._evaluator.featureState=Y||null,this._evaluator.canonical=le,this._evaluator.availableImages=Ee||null,this._evaluator.formattedSection=Oe||null;try{var je=this.expression.evaluate(this._evaluator);if(je==null||typeof je=="number"&&je!=je)return this._defaultValue;if(this._enumValues&&!(je in this._enumValues))throw new $n("Expected value to be one of "+Object.keys(this._enumValues).map(function($e){return JSON.stringify($e)}).join(", ")+", but found "+JSON.stringify(je)+" instead.");return je}catch($e){return this._warningHistory[$e.message]||(this._warningHistory[$e.message]=!0,typeof console<"u"&&console.warn($e.message)),this._defaultValue}};var Co=function(k,D){this.kind=k,this._styleExpression=D,this.isStateDependent=k!=="constant"&&!it(D.expression)};Co.prototype.evaluateWithoutErrorHandling=function(k,D,Y,le,Ee,Oe){return this._styleExpression.evaluateWithoutErrorHandling(k,D,Y,le,Ee,Oe)},Co.prototype.evaluate=function(k,D,Y,le,Ee,Oe){return this._styleExpression.evaluate(k,D,Y,le,Ee,Oe)};var po=function(k,D,Y,le){this.kind=k,this.zoomStops=Y,this._styleExpression=D,this.isStateDependent=k!=="camera"&&!it(D.expression),this.interpolationType=le};function Lo(k,D){if((k=As(k,D)).result==="error")return k;var Y=k.value.expression,le=Ke(Y);if(!le&&!ho(D))return no([new mt("","data expressions not supported")]);var Ee=Mt(Y,["zoom"]);if(!Ee&&!vl(D))return no([new mt("","zoom expressions not supported")]);var Oe=Us(Y);if(!Oe&&!Ee)return no([new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Oe instanceof mt)return no([Oe]);if(Oe instanceof Ri&&!Eo(D))return no([new mt("",'"interpolate" expressions cannot be used with this property')]);if(!Oe)return Zo(new Co(le?"constant":"source",k.value));var je=Oe instanceof Ri?Oe.interpolation:void 0;return Zo(new po(le?"camera":"composite",k.value,Oe.labels,je))}po.prototype.evaluateWithoutErrorHandling=function(k,D,Y,le,Ee,Oe){return this._styleExpression.evaluateWithoutErrorHandling(k,D,Y,le,Ee,Oe)},po.prototype.evaluate=function(k,D,Y,le,Ee,Oe){return this._styleExpression.evaluate(k,D,Y,le,Ee,Oe)},po.prototype.interpolationFactor=function(k,D,Y){return this.interpolationType?Ri.interpolationFactor(this.interpolationType,k,D,Y):0};var go=function(k,D){this._parameters=k,this._specification=D,tt(this,Ra(this._parameters,this._specification))};function Us(k){var D=null;if(k instanceof to)D=Us(k.result);else if(k instanceof ei)for(var Y=0,le=k.args;Y<le.length;Y+=1){var Ee=le[Y];if(D=Us(Ee))break}else(k instanceof jn||k instanceof Ri)&&k.input instanceof Hn&&k.input.name==="zoom"&&(D=k);return D instanceof mt||k.eachChild(function(Oe){var je=Us(Oe);je instanceof mt?D=je:!D&&je?D=new mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&je&&D!==je&&(D=new mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function Wa(k){var D=k.key,Y=k.value,le=k.valueSpec||{},Ee=k.objectElementValidators||{},Oe=k.style,je=k.styleSpec,$e=[],ut=li(Y);if(ut!=="object")return[new Fe(D,Y,"object expected, "+ut+" found")];for(var bt in Y){var Tt=bt.split(".")[0],Rt=le[Tt]||le["*"],Ht=void 0;if(Ee[Tt])Ht=Ee[Tt];else if(le[Tt])Ht=Mi;else if(Ee["*"])Ht=Ee["*"];else{if(!le["*"]){$e.push(new Fe(D,Y[bt],'unknown property "'+bt+'"'));continue}Ht=Mi}$e=$e.concat(Ht({key:(D&&D+".")+bt,value:Y[bt],valueSpec:Rt,style:Oe,styleSpec:je,object:Y,objectKey:bt},Y))}for(var Ut in le)Ee[Ut]||le[Ut].required&&le[Ut].default===void 0&&Y[Ut]===void 0&&$e.push(new Fe(D,Y,'missing required property "'+Ut+'"'));return $e}function xl(k){var D=k.value,Y=k.valueSpec,le=k.style,Ee=k.styleSpec,Oe=k.key,je=k.arrayElementValidator||Mi;if(li(D)!=="array")return[new Fe(Oe,D,"array expected, "+li(D)+" found")];if(Y.length&&D.length!==Y.length)return[new Fe(Oe,D,"array length "+Y.length+" expected, length "+D.length+" found")];if(Y["min-length"]&&D.length<Y["min-length"])return[new Fe(Oe,D,"array length at least "+Y["min-length"]+" expected, length "+D.length+" found")];var $e={type:Y.value,values:Y.values};Ee.$version<7&&($e.function=Y.function),li(Y.value)==="object"&&($e=Y.value);for(var ut=[],bt=0;bt<D.length;bt++)ut=ut.concat(je({array:D,arrayIndex:bt,value:D[bt],valueSpec:$e,style:le,styleSpec:Ee,key:Oe+"["+bt+"]"}));return ut}function bl(k){var D=k.key,Y=k.value,le=k.valueSpec,Ee=li(Y);return Ee==="number"&&Y!=Y&&(Ee="NaN"),Ee!=="number"?[new Fe(D,Y,"number expected, "+Ee+" found")]:"minimum"in le&&Y<le.minimum?[new Fe(D,Y,Y+" is less than the minimum value "+le.minimum)]:"maximum"in le&&Y>le.maximum?[new Fe(D,Y,Y+" is greater than the maximum value "+le.maximum)]:[]}function Vs(k){var D,Y,le,Ee=k.valueSpec,Oe=gt(k.value.type),je={},$e=Oe!=="categorical"&&k.value.property===void 0,ut=!$e,bt=li(k.value.stops)==="array"&&li(k.value.stops[0])==="array"&&li(k.value.stops[0][0])==="object",Tt=Wa({key:k.key,value:k.value,valueSpec:k.styleSpec.function,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{stops:function(Ut){if(Oe==="identity")return[new Fe(Ut.key,Ut.value,'identity function may not have a "stops" property')];var on=[],pn=Ut.value;return on=on.concat(xl({key:Ut.key,value:pn,valueSpec:Ut.valueSpec,style:Ut.style,styleSpec:Ut.styleSpec,arrayElementValidator:Rt})),li(pn)==="array"&&pn.length===0&&on.push(new Fe(Ut.key,pn,"array must have at least one stop")),on},default:function(Ut){return Mi({key:Ut.key,value:Ut.value,valueSpec:Ee,style:Ut.style,styleSpec:Ut.styleSpec})}}});return Oe==="identity"&&$e&&Tt.push(new Fe(k.key,k.value,'missing required property "property"')),Oe==="identity"||k.value.stops||Tt.push(new Fe(k.key,k.value,'missing required property "stops"')),Oe==="exponential"&&k.valueSpec.expression&&!Eo(k.valueSpec)&&Tt.push(new Fe(k.key,k.value,"exponential functions not supported")),k.styleSpec.$version>=8&&(ut&&!ho(k.valueSpec)?Tt.push(new Fe(k.key,k.value,"property functions not supported")):$e&&!vl(k.valueSpec)&&Tt.push(new Fe(k.key,k.value,"zoom functions not supported"))),Oe!=="categorical"&&!bt||k.value.property!==void 0||Tt.push(new Fe(k.key,k.value,'"property" property is required')),Tt;function Rt(Ut){var on=[],pn=Ut.value,zn=Ut.key;if(li(pn)!=="array")return[new Fe(zn,pn,"array expected, "+li(pn)+" found")];if(pn.length!==2)return[new Fe(zn,pn,"array length 2 expected, length "+pn.length+" found")];if(bt){if(li(pn[0])!=="object")return[new Fe(zn,pn,"object expected, "+li(pn[0])+" found")];if(pn[0].zoom===void 0)return[new Fe(zn,pn,"object stop key must have zoom")];if(pn[0].value===void 0)return[new Fe(zn,pn,"object stop key must have value")];if(le&&le>gt(pn[0].zoom))return[new Fe(zn,pn[0].zoom,"stop zoom values must appear in ascending order")];gt(pn[0].zoom)!==le&&(le=gt(pn[0].zoom),Y=void 0,je={}),on=on.concat(Wa({key:zn+"[0]",value:pn[0],valueSpec:{zoom:{}},style:Ut.style,styleSpec:Ut.styleSpec,objectElementValidators:{zoom:bl,value:Ht}}))}else on=on.concat(Ht({key:zn+"[0]",value:pn[0],valueSpec:{},style:Ut.style,styleSpec:Ut.styleSpec},pn));return fs(dt(pn[1]))?on.concat([new Fe(zn+"[1]",pn[1],"expressions are not allowed in function stops.")]):on.concat(Mi({key:zn+"[1]",value:pn[1],valueSpec:Ee,style:Ut.style,styleSpec:Ut.styleSpec}))}function Ht(Ut,on){var pn=li(Ut.value),zn=gt(Ut.value),Dn=Ut.value!==null?Ut.value:on;if(D){if(pn!==D)return[new Fe(Ut.key,Dn,pn+" stop domain type must match previous stop domain type "+D)]}else D=pn;if(pn!=="number"&&pn!=="string"&&pn!=="boolean")return[new Fe(Ut.key,Dn,"stop domain value must be a number, string, or boolean")];if(pn!=="number"&&Oe!=="categorical"){var Vn="number expected, "+pn+" found";return ho(Ee)&&Oe===void 0&&(Vn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Fe(Ut.key,Dn,Vn)]}return Oe!=="categorical"||pn!=="number"||isFinite(zn)&&Math.floor(zn)===zn?Oe!=="categorical"&&pn==="number"&&Y!==void 0&&zn<Y?[new Fe(Ut.key,Dn,"stop domain values must appear in ascending order")]:(Y=zn,Oe==="categorical"&&zn in je?[new Fe(Ut.key,Dn,"stop domain values must be unique")]:(je[zn]=!0,[])):[new Fe(Ut.key,Dn,"integer expected, found "+zn)]}}function Po(k){var D=(k.expressionContext==="property"?Lo:As)(dt(k.value),k.valueSpec);if(D.result==="error")return D.value.map(function(le){return new Fe(""+k.key+le.key,k.value,le.message)});var Y=D.value.expression||D.value._styleExpression.expression;if(k.expressionContext==="property"&&k.propertyKey==="text-font"&&!Y.outputDefined())return[new Fe(k.key,k.value,'Invalid data expression for "'+k.propertyKey+'". Output values must be contained as literals within the expression.')];if(k.expressionContext==="property"&&k.propertyType==="layout"&&!it(Y))return[new Fe(k.key,k.value,'"feature-state" data expressions are not supported with layout properties.')];if(k.expressionContext==="filter"&&!it(Y))return[new Fe(k.key,k.value,'"feature-state" data expressions are not supported with filters.')];if(k.expressionContext&&k.expressionContext.indexOf("cluster")===0){if(!Mt(Y,["zoom","feature-state"]))return[new Fe(k.key,k.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(k.expressionContext==="cluster-initial"&&!Ke(Y))return[new Fe(k.key,k.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hs(k){var D=k.key,Y=k.value,le=k.valueSpec,Ee=[];return Array.isArray(le.values)?le.values.indexOf(gt(Y))===-1&&Ee.push(new Fe(D,Y,"expected one of ["+le.values.join(", ")+"], "+JSON.stringify(Y)+" found")):Object.keys(le.values).indexOf(gt(Y))===-1&&Ee.push(new Fe(D,Y,"expected one of ["+Object.keys(le.values).join(", ")+"], "+JSON.stringify(Y)+" found")),Ee}function Ko(k){if(k===!0||k===!1)return!0;if(!Array.isArray(k)||k.length===0)return!1;switch(k[0]){case"has":return k.length>=2&&k[1]!=="$id"&&k[1]!=="$type";case"in":return k.length>=3&&(typeof k[1]!="string"||Array.isArray(k[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return k.length!==3||Array.isArray(k[1])||Array.isArray(k[2]);case"any":case"all":for(var D=0,Y=k.slice(1);D<Y.length;D+=1){var le=Y[D];if(!Ko(le)&&typeof le!="boolean")return!1}return!0;default:return!0}}go.deserialize=function(k){return new go(k._parameters,k._specification)},go.serialize=function(k){return{_parameters:k._parameters,_specification:k._specification}};var tl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function hs(k){if(k==null)return{filter:function(){return!0},needGeometry:!1};Ko(k)||(k=ps(k));var D=As(k,tl);if(D.result==="error")throw new Error(D.value.map(function(Y){return Y.key+": "+Y.message}).join(", "));return{filter:function(Y,le,Ee){return D.value.evaluate(Y,le,{},Ee)},needGeometry:ks(k)}}function Jo(k,D){return k<D?-1:k>D?1:0}function ks(k){if(!Array.isArray(k))return!1;if(k[0]==="within")return!0;for(var D=1;D<k.length;D++)if(ks(k[D]))return!0;return!1}function ps(k){if(!k)return!0;var D,Y=k[0];return k.length<=1?Y!=="any":Y==="=="?ui(k[1],k[2],"=="):Y==="!="?Zi(ui(k[1],k[2],"==")):Y==="<"||Y===">"||Y==="<="||Y===">="?ui(k[1],k[2],Y):Y==="any"?(D=k.slice(1),["any"].concat(D.map(ps))):Y==="all"?["all"].concat(k.slice(1).map(ps)):Y==="none"?["all"].concat(k.slice(1).map(ps).map(Zi)):Y==="in"?Oo(k[1],k.slice(2)):Y==="!in"?Zi(Oo(k[1],k.slice(2))):Y==="has"?vo(k[1]):Y==="!has"?Zi(vo(k[1])):Y!=="within"||k}function ui(k,D,Y){switch(k){case"$type":return["filter-type-"+Y,D];case"$id":return["filter-id-"+Y,D];default:return["filter-"+Y,k,D]}}function Oo(k,D){if(D.length===0)return!1;switch(k){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(Y){return typeof Y!=typeof D[0]})?["filter-in-large",k,["literal",D.sort(Jo)]]:["filter-in-small",k,["literal",D]]}}function vo(k){switch(k){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",k]}}function Zi(k){return["!",k]}function Jr(k){return Ko(dt(k.value))?Po(tt({},k,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ti(k)}function ti(k){var D=k.value,Y=k.key;if(li(D)!=="array")return[new Fe(Y,D,"array expected, "+li(D)+" found")];var le,Ee=k.styleSpec,Oe=[];if(D.length<1)return[new Fe(Y,D,"filter array must have at least 1 element")];switch(Oe=Oe.concat(Hs({key:Y+"[0]",value:D[0],valueSpec:Ee.filter_operator,style:k.style,styleSpec:k.styleSpec})),gt(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&gt(D[1])==="$type"&&Oe.push(new Fe(Y,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&Oe.push(new Fe(Y,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(le=li(D[1]))!=="string"&&Oe.push(new Fe(Y+"[1]",D[1],"string expected, "+le+" found"));for(var je=2;je<D.length;je++)le=li(D[je]),gt(D[1])==="$type"?Oe=Oe.concat(Hs({key:Y+"["+je+"]",value:D[je],valueSpec:Ee.geometry_type,style:k.style,styleSpec:k.styleSpec})):le!=="string"&&le!=="number"&&le!=="boolean"&&Oe.push(new Fe(Y+"["+je+"]",D[je],"string, number, or boolean expected, "+le+" found"));break;case"any":case"all":case"none":for(var $e=1;$e<D.length;$e++)Oe=Oe.concat(ti({key:Y+"["+$e+"]",value:D[$e],style:k.style,styleSpec:k.styleSpec}));break;case"has":case"!has":le=li(D[1]),D.length!==2?Oe.push(new Fe(Y,D,'filter array for "'+D[0]+'" operator must have 2 elements')):le!=="string"&&Oe.push(new Fe(Y+"[1]",D[1],"string expected, "+le+" found"));break;case"within":le=li(D[1]),D.length!==2?Oe.push(new Fe(Y,D,'filter array for "'+D[0]+'" operator must have 2 elements')):le!=="object"&&Oe.push(new Fe(Y+"[1]",D[1],"object expected, "+le+" found"))}return Oe}function Io(k,D){var Y=k.key,le=k.style,Ee=k.styleSpec,Oe=k.value,je=k.objectKey,$e=Ee[D+"_"+k.layerType];if(!$e)return[];var ut=je.match(/^(.*)-transition$/);if(D==="paint"&&ut&&$e[ut[1]]&&$e[ut[1]].transition)return Mi({key:Y,value:Oe,valueSpec:Ee.transition,style:le,styleSpec:Ee});var bt,Tt=k.valueSpec||$e[je];if(!Tt)return[new Fe(Y,Oe,'unknown property "'+je+'"')];if(li(Oe)==="string"&&ho(Tt)&&!Tt.tokens&&(bt=/^{([^}]+)}$/.exec(Oe)))return[new Fe(Y,Oe,'"'+je+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Rt=[];return k.layerType==="symbol"&&(je==="text-field"&&le&&!le.glyphs&&Rt.push(new Fe(Y,Oe,'use of "text-field" requires a style "glyphs" property')),je==="text-font"&&Ga(dt(Oe))&&gt(Oe.type)==="identity"&&Rt.push(new Fe(Y,Oe,'"text-font" does not support identity functions'))),Rt.concat(Mi({key:k.key,value:Oe,valueSpec:Tt,style:le,styleSpec:Ee,expressionContext:"property",propertyType:D,propertyKey:je}))}function mo(k){return Io(k,"paint")}function nl(k){return Io(k,"layout")}function Ss(k){var D=[],Y=k.value,le=k.key,Ee=k.style,Oe=k.styleSpec;Y.type||Y.ref||D.push(new Fe(le,Y,'either "type" or "ref" is required'));var je,$e=gt(Y.type),ut=gt(Y.ref);if(Y.id)for(var bt=gt(Y.id),Tt=0;Tt<k.arrayIndex;Tt++){var Rt=Ee.layers[Tt];gt(Rt.id)===bt&&D.push(new Fe(le,Y.id,'duplicate layer id "'+Y.id+'", previously used at line '+Rt.id.__line__))}if("ref"in Y)["type","source","source-layer","filter","layout"].forEach(function(on){on in Y&&D.push(new Fe(le,Y[on],'"'+on+'" is prohibited for ref layers'))}),Ee.layers.forEach(function(on){gt(on.id)===ut&&(je=on)}),je?je.ref?D.push(new Fe(le,Y.ref,"ref cannot reference another ref layer")):$e=gt(je.type):D.push(new Fe(le,Y.ref,'ref layer "'+ut+'" not found'));else if($e!=="background")if(Y.source){var Ht=Ee.sources&&Ee.sources[Y.source],Ut=Ht&&gt(Ht.type);Ht?Ut==="vector"&&$e==="raster"?D.push(new Fe(le,Y.source,'layer "'+Y.id+'" requires a raster source')):Ut==="raster"&&$e!=="raster"?D.push(new Fe(le,Y.source,'layer "'+Y.id+'" requires a vector source')):Ut!=="vector"||Y["source-layer"]?Ut==="raster-dem"&&$e!=="hillshade"?D.push(new Fe(le,Y.source,"raster-dem source can only be used with layer type 'hillshade'.")):$e!=="line"||!Y.paint||!Y.paint["line-gradient"]||Ut==="geojson"&&Ht.lineMetrics||D.push(new Fe(le,Y,'layer "'+Y.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new Fe(le,Y,'layer "'+Y.id+'" must specify a "source-layer"')):D.push(new Fe(le,Y.source,'source "'+Y.source+'" not found'))}else D.push(new Fe(le,Y,'missing required property "source"'));return D=D.concat(Wa({key:le,value:Y,valueSpec:Oe.layer,style:k.style,styleSpec:k.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Mi({key:le+".type",value:Y.type,valueSpec:Oe.layer.type,style:k.style,styleSpec:k.styleSpec,object:Y,objectKey:"type"})},filter:Jr,layout:function(on){return Wa({layer:Y,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(pn){return nl(tt({layerType:$e},pn))}}})},paint:function(on){return Wa({layer:Y,key:on.key,value:on.value,style:on.style,styleSpec:on.styleSpec,objectElementValidators:{"*":function(pn){return mo(tt({layerType:$e},pn))}}})}}})),D}function Do(k){var D=k.value,Y=k.key,le=li(D);return le!=="string"?[new Fe(Y,D,"string expected, "+le+" found")]:[]}var Es={promoteId:function(k){var D=k.key,Y=k.value;if(li(Y)==="string")return Do({key:D,value:Y});var le=[];for(var Ee in Y)le.push.apply(le,Do({key:D+"."+Ee,value:Y[Ee]}));return le}};function yo(k){var D=k.value,Y=k.key,le=k.styleSpec,Ee=k.style;if(!D.type)return[new Fe(Y,D,'"type" is required')];var Oe,je=gt(D.type);switch(je){case"vector":case"raster":case"raster-dem":return Wa({key:Y,value:D,valueSpec:le["source_"+je.replace("-","_")],style:k.style,styleSpec:le,objectElementValidators:Es});case"geojson":if(Oe=Wa({key:Y,value:D,valueSpec:le.source_geojson,style:Ee,styleSpec:le,objectElementValidators:Es}),D.cluster)for(var $e in D.clusterProperties){var ut=D.clusterProperties[$e],bt=ut[0],Tt=ut[1],Rt=typeof bt=="string"?[bt,["accumulated"],["get",$e]]:bt;Oe.push.apply(Oe,Po({key:Y+"."+$e+".map",value:Tt,expressionContext:"cluster-map"})),Oe.push.apply(Oe,Po({key:Y+"."+$e+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return Oe;case"video":return Wa({key:Y,value:D,valueSpec:le.source_video,style:Ee,styleSpec:le});case"image":return Wa({key:Y,value:D,valueSpec:le.source_image,style:Ee,styleSpec:le});case"canvas":return[new Fe(Y,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Hs({key:Y+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:Ee,styleSpec:le})}}function $o(k){var D=k.value,Y=k.styleSpec,le=Y.light,Ee=k.style,Oe=[],je=li(D);if(D===void 0)return Oe;if(je!=="object")return Oe.concat([new Fe("light",D,"object expected, "+je+" found")]);for(var $e in D){var ut=$e.match(/^(.*)-transition$/);Oe=ut&&le[ut[1]]&&le[ut[1]].transition?Oe.concat(Mi({key:$e,value:D[$e],valueSpec:Y.transition,style:Ee,styleSpec:Y})):le[$e]?Oe.concat(Mi({key:$e,value:D[$e],valueSpec:le[$e],style:Ee,styleSpec:Y})):Oe.concat([new Fe($e,D[$e],'unknown property "'+$e+'"')])}return Oe}var zo={"*":function(){return[]},array:xl,boolean:function(k){var D=k.value,Y=k.key,le=li(D);return le!=="boolean"?[new Fe(Y,D,"boolean expected, "+le+" found")]:[]},number:bl,color:function(k){var D=k.key,Y=k.value,le=li(Y);return le!=="string"?[new Fe(D,Y,"color expected, "+le+" found")]:un(Y)===null?[new Fe(D,Y,'color expected, "'+Y+'" found')]:[]},constants:rt,enum:Hs,filter:Jr,function:Vs,layer:Ss,object:Wa,source:yo,light:$o,string:Do,formatted:function(k){return Do(k).length===0?[]:Po(k)},resolvedImage:function(k){return Do(k).length===0?[]:Po(k)}};function Mi(k){var D=k.value,Y=k.valueSpec,le=k.styleSpec;return Y.expression&&Ga(gt(D))?Vs(k):Y.expression&&fs(dt(D))?Po(k):Y.type&&zo[Y.type]?zo[Y.type](k):Wa(tt({},k,{valueSpec:Y.type?le[Y.type]:Y}))}function Qo(k){var D=k.value,Y=k.key,le=Do(k);return le.length||(D.indexOf("{fontstack}")===-1&&le.push(new Fe(Y,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&le.push(new Fe(Y,D,'"glyphs" url must include a "{range}" token'))),le}function es(k,D){D===void 0&&(D=De);var Y=[];return Y=Y.concat(Mi({key:"",value:k,valueSpec:D.$root,styleSpec:D,style:k,objectElementValidators:{glyphs:Qo,"*":function(){return[]}}})),k.constants&&(Y=Y.concat(rt({key:"constants",value:k.constants,style:k,styleSpec:D}))),ji(Y)}function ji(k){return[].concat(k).sort(function(D,Y){return D.line-Y.line})}function aa(k){return function(){for(var D=[],Y=arguments.length;Y--;)D[Y]=arguments[Y];return ji(k.apply(this,D))}}es.source=aa(yo),es.light=aa($o),es.layer=aa(Ss),es.filter=aa(Jr),es.paintProperty=aa(mo),es.layoutProperty=aa(nl);var ta=es,Ui=ta.light,ha=ta.paintProperty,Ro=ta.layoutProperty;function qa(k,D){var Y=!1;if(D&&D.length)for(var le=0,Ee=D;le<Ee.length;le+=1){var Oe=Ee[le];k.fire(new st(new Error(Oe.message))),Y=!0}return Y}var Xi=Ba,La=3;function Ba(k,D,Y){var le=this.cells=[];if(k instanceof ArrayBuffer){this.arrayBuffer=k;var Ee=new Int32Array(this.arrayBuffer);k=Ee[0],D=Ee[1],Y=Ee[2],this.d=D+2*Y;for(var Oe=0;Oe<this.d*this.d;Oe++){var je=Ee[La+Oe],$e=Ee[La+Oe+1];le.push(je===$e?null:Ee.subarray(je,$e))}var ut=Ee[La+le.length],bt=Ee[La+le.length+1];this.keys=Ee.subarray(ut,bt),this.bboxes=Ee.subarray(bt),this.insert=this._insertReadonly}else{this.d=D+2*Y;for(var Tt=0;Tt<this.d*this.d;Tt++)le.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=k,this.padding=Y,this.scale=D/k,this.uid=0;var Rt=Y/D*k;this.min=-Rt,this.max=k+Rt}Ba.prototype.insert=function(k,D,Y,le,Ee){this._forEachCell(D,Y,le,Ee,this._insertCell,this.uid++),this.keys.push(k),this.bboxes.push(D),this.bboxes.push(Y),this.bboxes.push(le),this.bboxes.push(Ee)},Ba.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ba.prototype._insertCell=function(k,D,Y,le,Ee,Oe){this.cells[Ee].push(Oe)},Ba.prototype.query=function(k,D,Y,le,Ee){var Oe=this.min,je=this.max;if(k<=Oe&&D<=Oe&&je<=Y&&je<=le&&!Ee)return Array.prototype.slice.call(this.keys);var $e=[];return this._forEachCell(k,D,Y,le,this._queryCell,$e,{},Ee),$e},Ba.prototype._queryCell=function(k,D,Y,le,Ee,Oe,je,$e){var ut=this.cells[Ee];if(ut!==null)for(var bt=this.keys,Tt=this.bboxes,Rt=0;Rt<ut.length;Rt++){var Ht=ut[Rt];if(je[Ht]===void 0){var Ut=4*Ht;($e?$e(Tt[Ut+0],Tt[Ut+1],Tt[Ut+2],Tt[Ut+3]):k<=Tt[Ut+2]&&D<=Tt[Ut+3]&&Y>=Tt[Ut+0]&&le>=Tt[Ut+1])?(je[Ht]=!0,Oe.push(bt[Ht])):je[Ht]=!1}}},Ba.prototype._forEachCell=function(k,D,Y,le,Ee,Oe,je,$e){for(var ut=this._convertToCellCoord(k),bt=this._convertToCellCoord(D),Tt=this._convertToCellCoord(Y),Rt=this._convertToCellCoord(le),Ht=ut;Ht<=Tt;Ht++)for(var Ut=bt;Ut<=Rt;Ut++){var on=this.d*Ut+Ht;if((!$e||$e(this._convertFromCellCoord(Ht),this._convertFromCellCoord(Ut),this._convertFromCellCoord(Ht+1),this._convertFromCellCoord(Ut+1)))&&Ee.call(this,k,D,Y,le,on,Oe,je,$e))return}},Ba.prototype._convertFromCellCoord=function(k){return(k-this.padding)/this.scale},Ba.prototype._convertToCellCoord=function(k){return Math.max(0,Math.min(this.d-1,Math.floor(k*this.scale)+this.padding))},Ba.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var k=this.cells,D=La+this.cells.length+1+1,Y=0,le=0;le<this.cells.length;le++)Y+=this.cells[le].length;var Ee=new Int32Array(D+Y+this.keys.length+this.bboxes.length);Ee[0]=this.extent,Ee[1]=this.n,Ee[2]=this.padding;for(var Oe=D,je=0;je<k.length;je++){var $e=k[je];Ee[La+je]=Oe,Ee.set($e,Oe),Oe+=$e.length}return Ee[La+k.length]=Oe,Ee.set(this.keys,Oe),Oe+=this.keys.length,Ee[La+k.length+1]=Oe,Ee.set(this.bboxes,Oe),Oe+=this.bboxes.length,Ee.buffer};var Gs=self.ImageData,Fa=self.ImageBitmap,Ki={};function Sr(k,D,Y){Y===void 0&&(Y={}),Object.defineProperty(D,"_classRegistryKey",{value:k,writeable:!1}),Ki[k]={klass:D,omit:Y.omit||[],shallow:Y.shallow||[]}}for(var oa in Sr("Object",Object),Xi.serialize=function(k,D){var Y=k.toArrayBuffer();return D&&D.push(Y),{buffer:Y}},Xi.deserialize=function(k){return new Xi(k.buffer)},Sr("Grid",Xi),Sr("Color",yn),Sr("Error",Error),Sr("ResolvedImage",_n),Sr("StylePropertyFunction",go),Sr("StyleExpression",Ms,{omit:["_evaluator"]}),Sr("ZoomDependentExpression",po),Sr("ZoomConstantExpression",Co),Sr("CompoundExpression",Hn,{omit:["_evaluate"]}),cs)cs[oa]._classRegistryKey||Sr("Expression_"+oa,cs[oa]);function Cs(k){return k&&typeof ArrayBuffer<"u"&&(k instanceof ArrayBuffer||k.constructor&&k.constructor.name==="ArrayBuffer")}function Ws(k){return Fa&&k instanceof Fa}function ts(k,D){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp)return k;if(Cs(k)||Ws(k))return D&&D.push(k),k;if(ArrayBuffer.isView(k)){var Y=k;return D&&D.push(Y.buffer),Y}if(k instanceof Gs)return D&&D.push(k.data.buffer),k;if(Array.isArray(k)){for(var le=[],Ee=0,Oe=k;Ee<Oe.length;Ee+=1){var je=Oe[Ee];le.push(ts(je,D))}return le}if(typeof k=="object"){var $e=k.constructor,ut=$e._classRegistryKey;if(!ut)throw new Error("can't serialize object of unregistered class");var bt=$e.serialize?$e.serialize(k,D):{};if(!$e.serialize){for(var Tt in k)if(k.hasOwnProperty(Tt)&&!(Ki[ut].omit.indexOf(Tt)>=0)){var Rt=k[Tt];bt[Tt]=Ki[ut].shallow.indexOf(Tt)>=0?Rt:ts(Rt,D)}k instanceof Error&&(bt.message=k.message)}if(bt.$name)throw new Error("$name property is reserved for worker serialization logic.");return ut!=="Object"&&(bt.$name=ut),bt}throw new Error("can't serialize object of type "+typeof k)}function ns(k){if(k==null||typeof k=="boolean"||typeof k=="number"||typeof k=="string"||k instanceof Boolean||k instanceof Number||k instanceof String||k instanceof Date||k instanceof RegExp||Cs(k)||Ws(k)||ArrayBuffer.isView(k)||k instanceof Gs)return k;if(Array.isArray(k))return k.map(ns);if(typeof k=="object"){var D=k.$name||"Object",Y=Ki[D].klass;if(!Y)throw new Error("can't deserialize unregistered class "+D);if(Y.deserialize)return Y.deserialize(k);for(var le=Object.create(Y.prototype),Ee=0,Oe=Object.keys(k);Ee<Oe.length;Ee+=1){var je=Oe[Ee];if(je!=="$name"){var $e=k[je];le[je]=Ki[D].shallow.indexOf(je)>=0?$e:ns($e)}}return le}throw new Error("can't deserialize object of type "+typeof k)}var xo=function(){this.first=!0};xo.prototype.update=function(k,D){var Y=Math.floor(k);return this.first?(this.first=!1,this.lastIntegerZoom=Y,this.lastIntegerZoomTime=0,this.lastZoom=k,this.lastFloorZoom=Y,!0):(this.lastFloorZoom>Y?(this.lastIntegerZoom=Y+1,this.lastIntegerZoomTime=D):this.lastFloorZoom<Y&&(this.lastIntegerZoom=Y,this.lastIntegerZoomTime=D),k!==this.lastZoom&&(this.lastZoom=k,this.lastFloorZoom=Y,!0))};var Tr={"Latin-1 Supplement":function(k){return k>=128&&k<=255},Arabic:function(k){return k>=1536&&k<=1791},"Arabic Supplement":function(k){return k>=1872&&k<=1919},"Arabic Extended-A":function(k){return k>=2208&&k<=2303},"Hangul Jamo":function(k){return k>=4352&&k<=4607},"Unified Canadian Aboriginal Syllabics":function(k){return k>=5120&&k<=5759},Khmer:function(k){return k>=6016&&k<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(k){return k>=6320&&k<=6399},"General Punctuation":function(k){return k>=8192&&k<=8303},"Letterlike Symbols":function(k){return k>=8448&&k<=8527},"Number Forms":function(k){return k>=8528&&k<=8591},"Miscellaneous Technical":function(k){return k>=8960&&k<=9215},"Control Pictures":function(k){return k>=9216&&k<=9279},"Optical Character Recognition":function(k){return k>=9280&&k<=9311},"Enclosed Alphanumerics":function(k){return k>=9312&&k<=9471},"Geometric Shapes":function(k){return k>=9632&&k<=9727},"Miscellaneous Symbols":function(k){return k>=9728&&k<=9983},"Miscellaneous Symbols and Arrows":function(k){return k>=11008&&k<=11263},"CJK Radicals Supplement":function(k){return k>=11904&&k<=12031},"Kangxi Radicals":function(k){return k>=12032&&k<=12255},"Ideographic Description Characters":function(k){return k>=12272&&k<=12287},"CJK Symbols and Punctuation":function(k){return k>=12288&&k<=12351},Hiragana:function(k){return k>=12352&&k<=12447},Katakana:function(k){return k>=12448&&k<=12543},Bopomofo:function(k){return k>=12544&&k<=12591},"Hangul Compatibility Jamo":function(k){return k>=12592&&k<=12687},Kanbun:function(k){return k>=12688&&k<=12703},"Bopomofo Extended":function(k){return k>=12704&&k<=12735},"CJK Strokes":function(k){return k>=12736&&k<=12783},"Katakana Phonetic Extensions":function(k){return k>=12784&&k<=12799},"Enclosed CJK Letters and Months":function(k){return k>=12800&&k<=13055},"CJK Compatibility":function(k){return k>=13056&&k<=13311},"CJK Unified Ideographs Extension A":function(k){return k>=13312&&k<=19903},"Yijing Hexagram Symbols":function(k){return k>=19904&&k<=19967},"CJK Unified Ideographs":function(k){return k>=19968&&k<=40959},"Yi Syllables":function(k){return k>=40960&&k<=42127},"Yi Radicals":function(k){return k>=42128&&k<=42191},"Hangul Jamo Extended-A":function(k){return k>=43360&&k<=43391},"Hangul Syllables":function(k){return k>=44032&&k<=55215},"Hangul Jamo Extended-B":function(k){return k>=55216&&k<=55295},"Private Use Area":function(k){return k>=57344&&k<=63743},"CJK Compatibility Ideographs":function(k){return k>=63744&&k<=64255},"Arabic Presentation Forms-A":function(k){return k>=64336&&k<=65023},"Vertical Forms":function(k){return k>=65040&&k<=65055},"CJK Compatibility Forms":function(k){return k>=65072&&k<=65103},"Small Form Variants":function(k){return k>=65104&&k<=65135},"Arabic Presentation Forms-B":function(k){return k>=65136&&k<=65279},"Halfwidth and Fullwidth Forms":function(k){return k>=65280&&k<=65519}};function Ya(k){for(var D=0,Y=k;D<Y.length;D+=1)if(ds(Y[D].charCodeAt(0)))return!0;return!1}function ds(k){return!(k!==746&&k!==747&&(k<4352||!(Tr["Bopomofo Extended"](k)||Tr.Bopomofo(k)||Tr["CJK Compatibility Forms"](k)&&!(k>=65097&&k<=65103)||Tr["CJK Compatibility Ideographs"](k)||Tr["CJK Compatibility"](k)||Tr["CJK Radicals Supplement"](k)||Tr["CJK Strokes"](k)||!(!Tr["CJK Symbols and Punctuation"](k)||k>=12296&&k<=12305||k>=12308&&k<=12319||k===12336)||Tr["CJK Unified Ideographs Extension A"](k)||Tr["CJK Unified Ideographs"](k)||Tr["Enclosed CJK Letters and Months"](k)||Tr["Hangul Compatibility Jamo"](k)||Tr["Hangul Jamo Extended-A"](k)||Tr["Hangul Jamo Extended-B"](k)||Tr["Hangul Jamo"](k)||Tr["Hangul Syllables"](k)||Tr.Hiragana(k)||Tr["Ideographic Description Characters"](k)||Tr.Kanbun(k)||Tr["Kangxi Radicals"](k)||Tr["Katakana Phonetic Extensions"](k)||Tr.Katakana(k)&&k!==12540||!(!Tr["Halfwidth and Fullwidth Forms"](k)||k===65288||k===65289||k===65293||k>=65306&&k<=65310||k===65339||k===65341||k===65343||k>=65371&&k<=65503||k===65507||k>=65512&&k<=65519)||!(!Tr["Small Form Variants"](k)||k>=65112&&k<=65118||k>=65123&&k<=65126)||Tr["Unified Canadian Aboriginal Syllabics"](k)||Tr["Unified Canadian Aboriginal Syllabics Extended"](k)||Tr["Vertical Forms"](k)||Tr["Yijing Hexagram Symbols"](k)||Tr["Yi Syllables"](k)||Tr["Yi Radicals"](k))))}function Ls(k){return!(ds(k)||function(D){return!!(Tr["Latin-1 Supplement"](D)&&(D===167||D===169||D===174||D===177||D===188||D===189||D===190||D===215||D===247)||Tr["General Punctuation"](D)&&(D===8214||D===8224||D===8225||D===8240||D===8241||D===8251||D===8252||D===8258||D===8263||D===8264||D===8265||D===8273)||Tr["Letterlike Symbols"](D)||Tr["Number Forms"](D)||Tr["Miscellaneous Technical"](D)&&(D>=8960&&D<=8967||D>=8972&&D<=8991||D>=8996&&D<=9e3||D===9003||D>=9085&&D<=9114||D>=9150&&D<=9165||D===9167||D>=9169&&D<=9179||D>=9186&&D<=9215)||Tr["Control Pictures"](D)&&D!==9251||Tr["Optical Character Recognition"](D)||Tr["Enclosed Alphanumerics"](D)||Tr["Geometric Shapes"](D)||Tr["Miscellaneous Symbols"](D)&&!(D>=9754&&D<=9759)||Tr["Miscellaneous Symbols and Arrows"](D)&&(D>=11026&&D<=11055||D>=11088&&D<=11097||D>=11192&&D<=11243)||Tr["CJK Symbols and Punctuation"](D)||Tr.Katakana(D)||Tr["Private Use Area"](D)||Tr["CJK Compatibility Forms"](D)||Tr["Small Form Variants"](D)||Tr["Halfwidth and Fullwidth Forms"](D)||D===8734||D===8756||D===8757||D>=9984&&D<=10087||D>=10102&&D<=10131||D===65532||D===65533)}(k))}function sa(k){return Tr.Arabic(k)||Tr["Arabic Supplement"](k)||Tr["Arabic Extended-A"](k)||Tr["Arabic Presentation Forms-A"](k)||Tr["Arabic Presentation Forms-B"](k)}function Za(k){return k>=1424&&k<=2303||Tr["Arabic Presentation Forms-A"](k)||Tr["Arabic Presentation Forms-B"](k)}function Na(k,D){return!(!D&&Za(k)||k>=2304&&k<=3583||k>=3840&&k<=4255||Tr.Khmer(k))}function Pa(k){for(var D=0,Y=k;D<Y.length;D+=1)if(Za(Y[D].charCodeAt(0)))return!0;return!1}var ro="deferred",bo="loading",Vi="loaded",rs="error",gs=null,Ji="unavailable",ci=null,Ps=function(k){k&&typeof k=="string"&&k.indexOf("NetworkError")>-1&&(Ji=rs),gs&&gs(k)};function wa(){Hi.fire(new Ze("pluginStateChange",{pluginStatus:Ji,pluginURL:ci}))}var Hi=new nt,io=function(){return Ji},rl=function(){if(Ji!==ro||!ci)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji=bo,wa(),ci&&At({url:ci},function(k){k?Ps(k):(Ji=Vi,wa())})},Li={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ji===Vi||Li.applyArabicShaping!=null},isLoading:function(){return Ji===bo},setState:function(k){Ji=k.pluginStatus,ci=k.pluginURL},isParsed:function(){return Li.applyArabicShaping!=null&&Li.processBidirectionalText!=null&&Li.processStyledBidirectionalText!=null},getPluginURL:function(){return ci}},oi=function(k,D){this.zoom=k,D?(this.now=D.now,this.fadeDuration=D.fadeDuration,this.zoomHistory=D.zoomHistory,this.transition=D.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new xo,this.transition={})};oi.prototype.isSupportedScript=function(k){return function(D,Y){for(var le=0,Ee=D;le<Ee.length;le+=1)if(!Na(Ee[le].charCodeAt(0),Y))return!1;return!0}(k,Li.isLoaded())},oi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},oi.prototype.getCrossfadeParameters=function(){var k=this.zoom,D=k-Math.floor(k),Y=this.crossFadingFactor();return k>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:D+(1-D)*Y}:{fromScale:.5,toScale:1,t:1-(1-Y)*D}};var Oa=function(k,D){this.property=k,this.value=D,this.expression=function(Y,le){if(Ga(Y))return new go(Y,le);if(fs(Y)){var Ee=Lo(Y,le);if(Ee.result==="error")throw new Error(Ee.value.map(function(je){return je.key+": "+je.message}).join(", "));return Ee.value}var Oe=Y;return typeof Y=="string"&&le.type==="color"&&(Oe=yn.parse(Y)),{kind:"constant",evaluate:function(){return Oe}}}(D===void 0?k.specification.default:D,k.specification)};Oa.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Oa.prototype.possiblyEvaluate=function(k,D,Y){return this.property.possiblyEvaluate(this,k,D,Y)};var ao=function(k){this.property=k,this.value=new Oa(k,void 0)};ao.prototype.transitioned=function(k,D){return new qs(this.property,this.value,D,u({},k.transition,this.transition),k.now)},ao.prototype.untransitioned=function(){return new qs(this.property,this.value,null,{},0)};var Xa=function(k){this._properties=k,this._values=Object.create(k.defaultTransitionablePropertyValues)};Xa.prototype.getValue=function(k){return w(this._values[k].value.value)},Xa.prototype.setValue=function(k,D){this._values.hasOwnProperty(k)||(this._values[k]=new ao(this._values[k].property)),this._values[k].value=new Oa(this._values[k].property,D===null?void 0:w(D))},Xa.prototype.getTransition=function(k){return w(this._values[k].transition)},Xa.prototype.setTransition=function(k,D){this._values.hasOwnProperty(k)||(this._values[k]=new ao(this._values[k].property)),this._values[k].transition=w(D)||void 0},Xa.prototype.serialize=function(){for(var k={},D=0,Y=Object.keys(this._values);D<Y.length;D+=1){var le=Y[D],Ee=this.getValue(le);Ee!==void 0&&(k[le]=Ee);var Oe=this.getTransition(le);Oe!==void 0&&(k[le+"-transition"]=Oe)}return k},Xa.prototype.transitioned=function(k,D){for(var Y=new Bo(this._properties),le=0,Ee=Object.keys(this._values);le<Ee.length;le+=1){var Oe=Ee[le];Y._values[Oe]=this._values[Oe].transitioned(k,D._values[Oe])}return Y},Xa.prototype.untransitioned=function(){for(var k=new Bo(this._properties),D=0,Y=Object.keys(this._values);D<Y.length;D+=1){var le=Y[D];k._values[le]=this._values[le].untransitioned()}return k};var qs=function(k,D,Y,le,Ee){this.property=k,this.value=D,this.begin=Ee+le.delay||0,this.end=this.begin+le.duration||0,k.specification.transition&&(le.delay||le.duration)&&(this.prior=Y)};qs.prototype.possiblyEvaluate=function(k,D,Y){var le=k.now||0,Ee=this.value.possiblyEvaluate(k,D,Y),Oe=this.prior;if(Oe){if(le>this.end)return this.prior=null,Ee;if(this.value.isDataDriven())return this.prior=null,Ee;if(le<this.begin)return Oe.possiblyEvaluate(k,D,Y);var je=(le-this.begin)/(this.end-this.begin);return this.property.interpolate(Oe.possiblyEvaluate(k,D,Y),Ee,function($e){if($e<=0)return 0;if($e>=1)return 1;var ut=$e*$e,bt=ut*$e;return 4*($e<.5?bt:3*($e-ut)+bt-.75)}(je))}return Ee};var Bo=function(k){this._properties=k,this._values=Object.create(k.defaultTransitioningPropertyValues)};Bo.prototype.possiblyEvaluate=function(k,D,Y){for(var le=new na(this._properties),Ee=0,Oe=Object.keys(this._values);Ee<Oe.length;Ee+=1){var je=Oe[Ee];le._values[je]=this._values[je].possiblyEvaluate(k,D,Y)}return le},Bo.prototype.hasTransition=function(){for(var k=0,D=Object.keys(this._values);k<D.length;k+=1){var Y=D[k];if(this._values[Y].prior)return!0}return!1};var is=function(k){this._properties=k,this._values=Object.create(k.defaultPropertyValues)};is.prototype.getValue=function(k){return w(this._values[k].value)},is.prototype.setValue=function(k,D){this._values[k]=new Oa(this._values[k].property,D===null?void 0:w(D))},is.prototype.serialize=function(){for(var k={},D=0,Y=Object.keys(this._values);D<Y.length;D+=1){var le=Y[D],Ee=this.getValue(le);Ee!==void 0&&(k[le]=Ee)}return k},is.prototype.possiblyEvaluate=function(k,D,Y){for(var le=new na(this._properties),Ee=0,Oe=Object.keys(this._values);Ee<Oe.length;Ee+=1){var je=Oe[Ee];le._values[je]=this._values[je].possiblyEvaluate(k,D,Y)}return le};var Bi=function(k,D,Y){this.property=k,this.value=D,this.parameters=Y};Bi.prototype.isConstant=function(){return this.value.kind==="constant"},Bi.prototype.constantOr=function(k){return this.value.kind==="constant"?this.value.value:k},Bi.prototype.evaluate=function(k,D,Y,le){return this.property.evaluate(this.value,this.parameters,k,D,Y,le)};var na=function(k){this._properties=k,this._values=Object.create(k.defaultPossiblyEvaluatedValues)};na.prototype.get=function(k){return this._values[k]};var Pr=function(k){this.specification=k};Pr.prototype.possiblyEvaluate=function(k,D){return k.expression.evaluate(D)},Pr.prototype.interpolate=function(k,D,Y){var le=qn[this.specification.type];return le?le(k,D,Y):k};var Dr=function(k,D){this.specification=k,this.overrides=D};Dr.prototype.possiblyEvaluate=function(k,D,Y,le){return k.expression.kind==="constant"||k.expression.kind==="camera"?new Bi(this,{kind:"constant",value:k.expression.evaluate(D,null,{},Y,le)},D):new Bi(this,k.expression,D)},Dr.prototype.interpolate=function(k,D,Y){if(k.value.kind!=="constant"||D.value.kind!=="constant")return k;if(k.value.value===void 0||D.value.value===void 0)return new Bi(this,{kind:"constant",value:void 0},k.parameters);var le=qn[this.specification.type];return le?new Bi(this,{kind:"constant",value:le(k.value.value,D.value.value,Y)},k.parameters):k},Dr.prototype.evaluate=function(k,D,Y,le,Ee,Oe){return k.kind==="constant"?k.value:k.evaluate(D,Y,le,Ee,Oe)};var vs=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(Y,le,Ee,Oe){if(Y.value===void 0)return new Bi(this,{kind:"constant",value:void 0},le);if(Y.expression.kind==="constant"){var je=Y.expression.evaluate(le,null,{},Ee,Oe),$e=Y.property.specification.type==="resolvedImage"&&typeof je!="string"?je.name:je,ut=this._calculate($e,$e,$e,le);return new Bi(this,{kind:"constant",value:ut},le)}if(Y.expression.kind==="camera"){var bt=this._calculate(Y.expression.evaluate({zoom:le.zoom-1}),Y.expression.evaluate({zoom:le.zoom}),Y.expression.evaluate({zoom:le.zoom+1}),le);return new Bi(this,{kind:"constant",value:bt},le)}return new Bi(this,Y.expression,le)},D.prototype.evaluate=function(Y,le,Ee,Oe,je,$e){if(Y.kind==="source"){var ut=Y.evaluate(le,Ee,Oe,je,$e);return this._calculate(ut,ut,ut,le)}return Y.kind==="composite"?this._calculate(Y.evaluate({zoom:Math.floor(le.zoom)-1},Ee,Oe),Y.evaluate({zoom:Math.floor(le.zoom)},Ee,Oe),Y.evaluate({zoom:Math.floor(le.zoom)+1},Ee,Oe),le):Y.value},D.prototype._calculate=function(Y,le,Ee,Oe){return Oe.zoom>Oe.zoomHistory.lastIntegerZoom?{from:Y,to:le}:{from:Ee,to:le}},D.prototype.interpolate=function(Y){return Y},D}(Dr),pa=function(k){this.specification=k};pa.prototype.possiblyEvaluate=function(k,D,Y,le){if(k.value!==void 0){if(k.expression.kind==="constant"){var Ee=k.expression.evaluate(D,null,{},Y,le);return this._calculate(Ee,Ee,Ee,D)}return this._calculate(k.expression.evaluate(new oi(Math.floor(D.zoom-1),D)),k.expression.evaluate(new oi(Math.floor(D.zoom),D)),k.expression.evaluate(new oi(Math.floor(D.zoom+1),D)),D)}},pa.prototype._calculate=function(k,D,Y,le){return le.zoom>le.zoomHistory.lastIntegerZoom?{from:k,to:D}:{from:Y,to:D}},pa.prototype.interpolate=function(k){return k};var Fo=function(k){this.specification=k};Fo.prototype.possiblyEvaluate=function(k,D,Y,le){return!!k.expression.evaluate(D,null,{},Y,le)},Fo.prototype.interpolate=function(){return!1};var ra=function(k){for(var D in this.properties=k,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],k){var Y=k[D];Y.specification.overridable&&this.overridableProperties.push(D);var le=this.defaultPropertyValues[D]=new Oa(Y,void 0),Ee=this.defaultTransitionablePropertyValues[D]=new ao(Y);this.defaultTransitioningPropertyValues[D]=Ee.untransitioned(),this.defaultPossiblyEvaluatedValues[D]=le.possiblyEvaluate({})}};Sr("DataDrivenProperty",Dr),Sr("DataConstantProperty",Pr),Sr("CrossFadedDataDrivenProperty",vs),Sr("CrossFadedProperty",pa),Sr("ColorRampProperty",Fo);var ms="-transition",ia=function(k){function D(Y,le){if(k.call(this),this.id=Y.id,this.type=Y.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},Y.type!=="custom"&&(this.metadata=Y.metadata,this.minzoom=Y.minzoom,this.maxzoom=Y.maxzoom,Y.type!=="background"&&(this.source=Y.source,this.sourceLayer=Y["source-layer"],this.filter=Y.filter),le.layout&&(this._unevaluatedLayout=new is(le.layout)),le.paint)){for(var Ee in this._transitionablePaint=new Xa(le.paint),Y.paint)this.setPaintProperty(Ee,Y.paint[Ee],{validate:!1});for(var Oe in Y.layout)this.setLayoutProperty(Oe,Y.layout[Oe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new na(le.paint)}}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(Y){return Y==="visibility"?this.visibility:this._unevaluatedLayout.getValue(Y)},D.prototype.setLayoutProperty=function(Y,le,Ee){if(Ee===void 0&&(Ee={}),le!=null){var Oe="layers."+this.id+".layout."+Y;if(this._validate(Ro,Oe,Y,le,Ee))return}Y!=="visibility"?this._unevaluatedLayout.setValue(Y,le):this.visibility=le},D.prototype.getPaintProperty=function(Y){return b(Y,ms)?this._transitionablePaint.getTransition(Y.slice(0,-11)):this._transitionablePaint.getValue(Y)},D.prototype.setPaintProperty=function(Y,le,Ee){if(Ee===void 0&&(Ee={}),le!=null){var Oe="layers."+this.id+".paint."+Y;if(this._validate(ha,Oe,Y,le,Ee))return!1}if(b(Y,ms))return this._transitionablePaint.setTransition(Y.slice(0,-11),le||void 0),!1;var je=this._transitionablePaint._values[Y],$e=je.property.specification["property-type"]==="cross-faded-data-driven",ut=je.value.isDataDriven(),bt=je.value;this._transitionablePaint.setValue(Y,le),this._handleSpecialPaintPropertyUpdate(Y);var Tt=this._transitionablePaint._values[Y].value;return Tt.isDataDriven()||ut||$e||this._handleOverridablePaintPropertyUpdate(Y,bt,Tt)},D.prototype._handleSpecialPaintPropertyUpdate=function(Y){},D.prototype._handleOverridablePaintPropertyUpdate=function(Y,le,Ee){return!1},D.prototype.isHidden=function(Y){return!!(this.minzoom&&Y<this.minzoom)||!!(this.maxzoom&&Y>=this.maxzoom)||this.visibility==="none"},D.prototype.updateTransitions=function(Y){this._transitioningPaint=this._transitionablePaint.transitioned(Y,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(Y,le){Y.getCrossfadeParameters&&(this._crossfadeParameters=Y.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(Y,void 0,le)),this.paint=this._transitioningPaint.possiblyEvaluate(Y,void 0,le)},D.prototype.serialize=function(){var Y={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(Y.layout=Y.layout||{},Y.layout.visibility=this.visibility),y(Y,function(le,Ee){return!(le===void 0||Ee==="layout"&&!Object.keys(le).length||Ee==="paint"&&!Object.keys(le).length)})},D.prototype._validate=function(Y,le,Ee,Oe,je){return je===void 0&&(je={}),(!je||je.validate!==!1)&&qa(this,Y.call(ta,{key:le,layerType:this.type,objectKey:Ee,value:Oe,styleSpec:De,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var Y in this.paint._values){var le=this.paint.get(Y);if(le instanceof Bi&&ho(le.property.specification)&&(le.value.kind==="source"||le.value.kind==="composite")&&le.value.isStateDependent)return!0}return!1},D}(nt),No={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},jo=function(k,D){this._structArray=k,this._pos1=D*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},jr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Gi(k,D){D===void 0&&(D=1);var Y=0,le=0;return{members:k.map(function(Ee){var Oe,je=(Oe=Ee.type,No[Oe].BYTES_PER_ELEMENT),$e=Y=oo(Y,Math.max(D,je)),ut=Ee.components||1;return le=Math.max(le,je),Y+=je*ut,{name:Ee.name,type:Ee.type,components:ut,offset:$e}}),size:oo(Y,Math.max(le,D)),alignment:D}}function oo(k,D){return Math.ceil(k/D)*D}jr.serialize=function(k,D){return k._trim(),D&&(k.isTransferred=!0,D.push(k.arrayBuffer)),{length:k.length,arrayBuffer:k.arrayBuffer}},jr.deserialize=function(k){var D=Object.create(this.prototype);return D.arrayBuffer=k.arrayBuffer,D.length=k.length,D.capacity=k.arrayBuffer.byteLength/D.bytesPerElement,D._refreshViews(),D},jr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},jr.prototype.clear=function(){this.length=0},jr.prototype.resize=function(k){this.reserve(k),this.length=k},jr.prototype.reserve=function(k){if(k>this.capacity){this.capacity=Math.max(k,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var D=this.uint8;this._refreshViews(),D&&this.uint8.set(D)}},jr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ta=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,le)},D.prototype.emplace=function(Y,le,Ee){var Oe=2*Y;return this.int16[Oe+0]=le,this.int16[Oe+1]=Ee,Y},D}(jr);Ta.prototype.bytesPerElement=4,Sr("StructArrayLayout2i4",Ta);var as=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe){var je=this.length;return this.resize(je+1),this.emplace(je,Y,le,Ee,Oe)},D.prototype.emplace=function(Y,le,Ee,Oe,je){var $e=4*Y;return this.int16[$e+0]=le,this.int16[$e+1]=Ee,this.int16[$e+2]=Oe,this.int16[$e+3]=je,Y},D}(jr);as.prototype.bytesPerElement=8,Sr("StructArrayLayout4i8",as);var ys=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,Y,le,Ee,Oe,je,$e)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut){var bt=6*Y;return this.int16[bt+0]=le,this.int16[bt+1]=Ee,this.int16[bt+2]=Oe,this.int16[bt+3]=je,this.int16[bt+4]=$e,this.int16[bt+5]=ut,Y},D}(jr);ys.prototype.bytesPerElement=12,Sr("StructArrayLayout2i4i12",ys);var os=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,Y,le,Ee,Oe,je,$e)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut){var bt=4*Y,Tt=8*Y;return this.int16[bt+0]=le,this.int16[bt+1]=Ee,this.uint8[Tt+4]=Oe,this.uint8[Tt+5]=je,this.uint8[Tt+6]=$e,this.uint8[Tt+7]=ut,Y},D}(jr);os.prototype.bytesPerElement=8,Sr("StructArrayLayout2i4ub8",os);var _o=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht){var Ut=9*Y,on=18*Y;return this.uint16[Ut+0]=le,this.uint16[Ut+1]=Ee,this.uint16[Ut+2]=Oe,this.uint16[Ut+3]=je,this.uint16[Ut+4]=$e,this.uint16[Ut+5]=ut,this.uint16[Ut+6]=bt,this.uint16[Ut+7]=Tt,this.uint8[on+16]=Rt,this.uint8[on+17]=Ht,Y},D}(jr);_o.prototype.bytesPerElement=18,Sr("StructArrayLayout8ui2ub18",_o);var R=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut){var on=this.length;return this.resize(on+1),this.emplace(on,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on){var pn=12*Y;return this.int16[pn+0]=le,this.int16[pn+1]=Ee,this.int16[pn+2]=Oe,this.int16[pn+3]=je,this.uint16[pn+4]=$e,this.uint16[pn+5]=ut,this.uint16[pn+6]=bt,this.uint16[pn+7]=Tt,this.int16[pn+8]=Rt,this.int16[pn+9]=Ht,this.int16[pn+10]=Ut,this.int16[pn+11]=on,Y},D}(jr);R.prototype.bytesPerElement=24,Sr("StructArrayLayout4i4ui4i24",R);var U=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,Y,le,Ee)},D.prototype.emplace=function(Y,le,Ee,Oe){var je=3*Y;return this.float32[je+0]=le,this.float32[je+1]=Ee,this.float32[je+2]=Oe,Y},D}(jr);U.prototype.bytesPerElement=12,Sr("StructArrayLayout3f12",U);var j=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},D.prototype.emplace=function(Y,le){var Ee=1*Y;return this.uint32[Ee+0]=le,Y},D}(jr);j.prototype.bytesPerElement=4,Sr("StructArrayLayout1ul4",j);var K=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt){var Rt=this.length;return this.resize(Rt+1),this.emplace(Rt,Y,le,Ee,Oe,je,$e,ut,bt,Tt)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt){var Ht=10*Y,Ut=5*Y;return this.int16[Ht+0]=le,this.int16[Ht+1]=Ee,this.int16[Ht+2]=Oe,this.int16[Ht+3]=je,this.int16[Ht+4]=$e,this.int16[Ht+5]=ut,this.uint32[Ut+3]=bt,this.uint16[Ht+8]=Tt,this.uint16[Ht+9]=Rt,Y},D}(jr);K.prototype.bytesPerElement=20,Sr("StructArrayLayout6i1ul2ui20",K);var pe=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,Y,le,Ee,Oe,je,$e)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut){var bt=6*Y;return this.int16[bt+0]=le,this.int16[bt+1]=Ee,this.int16[bt+2]=Oe,this.int16[bt+3]=je,this.int16[bt+4]=$e,this.int16[bt+5]=ut,Y},D}(jr);pe.prototype.bytesPerElement=12,Sr("StructArrayLayout2i2i2i12",pe);var ke=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je){var $e=this.length;return this.resize($e+1),this.emplace($e,Y,le,Ee,Oe,je)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e){var ut=4*Y,bt=8*Y;return this.float32[ut+0]=le,this.float32[ut+1]=Ee,this.float32[ut+2]=Oe,this.int16[bt+6]=je,this.int16[bt+7]=$e,Y},D}(jr);ke.prototype.bytesPerElement=16,Sr("StructArrayLayout2f1f2i16",ke);var B=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe){var je=this.length;return this.resize(je+1),this.emplace(je,Y,le,Ee,Oe)},D.prototype.emplace=function(Y,le,Ee,Oe,je){var $e=12*Y,ut=3*Y;return this.uint8[$e+0]=le,this.uint8[$e+1]=Ee,this.float32[ut+1]=Oe,this.float32[ut+2]=je,Y},D}(jr);B.prototype.bytesPerElement=12,Sr("StructArrayLayout2ub2f12",B);var ee=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,Y,le,Ee)},D.prototype.emplace=function(Y,le,Ee,Oe){var je=3*Y;return this.uint16[je+0]=le,this.uint16[je+1]=Ee,this.uint16[je+2]=Oe,Y},D}(jr);ee.prototype.bytesPerElement=6,Sr("StructArrayLayout3ui6",ee);var ie=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn,zn,Dn,Vn){var Gn=this.length;return this.resize(Gn+1),this.emplace(Gn,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn,zn,Dn,Vn)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn,zn,Dn,Vn,Gn){var er=24*Y,rr=12*Y,cr=48*Y;return this.int16[er+0]=le,this.int16[er+1]=Ee,this.uint16[er+2]=Oe,this.uint16[er+3]=je,this.uint32[rr+2]=$e,this.uint32[rr+3]=ut,this.uint32[rr+4]=bt,this.uint16[er+10]=Tt,this.uint16[er+11]=Rt,this.uint16[er+12]=Ht,this.float32[rr+7]=Ut,this.float32[rr+8]=on,this.uint8[cr+36]=pn,this.uint8[cr+37]=zn,this.uint8[cr+38]=Dn,this.uint32[rr+10]=Vn,this.int16[er+22]=Gn,Y},D}(jr);ie.prototype.bytesPerElement=48,Sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ie);var ge=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn,zn,Dn,Vn,Gn,er,rr,cr,br,gr,wr,Er,Gr,Or,Vr){var Rr=this.length;return this.resize(Rr+1),this.emplace(Rr,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn,zn,Dn,Vn,Gn,er,rr,cr,br,gr,wr,Er,Gr,Or,Vr)},D.prototype.emplace=function(Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn,zn,Dn,Vn,Gn,er,rr,cr,br,gr,wr,Er,Gr,Or,Vr,Rr){var Lr=34*Y,$r=17*Y;return this.int16[Lr+0]=le,this.int16[Lr+1]=Ee,this.int16[Lr+2]=Oe,this.int16[Lr+3]=je,this.int16[Lr+4]=$e,this.int16[Lr+5]=ut,this.int16[Lr+6]=bt,this.int16[Lr+7]=Tt,this.uint16[Lr+8]=Rt,this.uint16[Lr+9]=Ht,this.uint16[Lr+10]=Ut,this.uint16[Lr+11]=on,this.uint16[Lr+12]=pn,this.uint16[Lr+13]=zn,this.uint16[Lr+14]=Dn,this.uint16[Lr+15]=Vn,this.uint16[Lr+16]=Gn,this.uint16[Lr+17]=er,this.uint16[Lr+18]=rr,this.uint16[Lr+19]=cr,this.uint16[Lr+20]=br,this.uint16[Lr+21]=gr,this.uint16[Lr+22]=wr,this.uint32[$r+12]=Er,this.float32[$r+13]=Gr,this.float32[$r+14]=Or,this.float32[$r+15]=Vr,this.float32[$r+16]=Rr,Y},D}(jr);ge.prototype.bytesPerElement=68,Sr("StructArrayLayout8i15ui1ul4f68",ge);var _e=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},D.prototype.emplace=function(Y,le){var Ee=1*Y;return this.float32[Ee+0]=le,Y},D}(jr);_e.prototype.bytesPerElement=4,Sr("StructArrayLayout1f4",_e);var Ce=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,Y,le,Ee)},D.prototype.emplace=function(Y,le,Ee,Oe){var je=3*Y;return this.int16[je+0]=le,this.int16[je+1]=Ee,this.int16[je+2]=Oe,Y},D}(jr);Ce.prototype.bytesPerElement=6,Sr("StructArrayLayout3i6",Ce);var Ne=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,Y,le,Ee)},D.prototype.emplace=function(Y,le,Ee,Oe){var je=2*Y,$e=4*Y;return this.uint32[je+0]=le,this.uint16[$e+2]=Ee,this.uint16[$e+3]=Oe,Y},D}(jr);Ne.prototype.bytesPerElement=8,Sr("StructArrayLayout1ul2ui8",Ne);var Ue=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,le)},D.prototype.emplace=function(Y,le,Ee){var Oe=2*Y;return this.uint16[Oe+0]=le,this.uint16[Oe+1]=Ee,Y},D}(jr);Ue.prototype.bytesPerElement=4,Sr("StructArrayLayout2ui4",Ue);var Ge=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y){var le=this.length;return this.resize(le+1),this.emplace(le,Y)},D.prototype.emplace=function(Y,le){var Ee=1*Y;return this.uint16[Ee+0]=le,Y},D}(jr);Ge.prototype.bytesPerElement=2,Sr("StructArrayLayout1ui2",Ge);var Ye=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le){var Ee=this.length;return this.resize(Ee+1),this.emplace(Ee,Y,le)},D.prototype.emplace=function(Y,le,Ee){var Oe=2*Y;return this.float32[Oe+0]=le,this.float32[Oe+1]=Ee,Y},D}(jr);Ye.prototype.bytesPerElement=8,Sr("StructArrayLayout2f8",Ye);var Qe=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(Y,le,Ee,Oe){var je=this.length;return this.resize(je+1),this.emplace(je,Y,le,Ee,Oe)},D.prototype.emplace=function(Y,le,Ee,Oe,je){var $e=4*Y;return this.float32[$e+0]=le,this.float32[$e+1]=Ee,this.float32[$e+2]=Oe,this.float32[$e+3]=je,Y},D}(jr);Qe.prototype.bytesPerElement=16,Sr("StructArrayLayout4f16",Qe);var ct=function(k){function D(){k.apply(this,arguments)}k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D;var Y={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return Y.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},Y.x1.get=function(){return this._structArray.int16[this._pos2+2]},Y.y1.get=function(){return this._structArray.int16[this._pos2+3]},Y.x2.get=function(){return this._structArray.int16[this._pos2+4]},Y.y2.get=function(){return this._structArray.int16[this._pos2+5]},Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.anchorPoint.get=function(){return new e(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,Y),D}(jo);ct.prototype.size=20;var vt=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new ct(this,Y)},D}(K);Sr("CollisionBoxArray",vt);var Ot=function(k){function D(){k.apply(this,arguments)}k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},Y.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},Y.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},Y.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},Y.segment.get=function(){return this._structArray.uint16[this._pos2+10]},Y.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},Y.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},Y.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},Y.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},Y.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},Y.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},Y.placedOrientation.set=function(le){this._structArray.uint8[this._pos1+37]=le},Y.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},Y.hidden.set=function(le){this._structArray.uint8[this._pos1+38]=le},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},Y.crossTileID.set=function(le){this._structArray.uint32[this._pos4+10]=le},Y.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,Y),D}(jo);Ot.prototype.size=48;var Dt=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new Ot(this,Y)},D}(ie);Sr("PlacedSymbolArray",Dt);var Pt=function(k){function D(){k.apply(this,arguments)}k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D;var Y={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return Y.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},Y.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},Y.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},Y.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},Y.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},Y.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},Y.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},Y.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},Y.key.get=function(){return this._structArray.uint16[this._pos2+8]},Y.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},Y.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},Y.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},Y.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},Y.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},Y.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},Y.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},Y.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},Y.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},Y.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},Y.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},Y.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},Y.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},Y.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},Y.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},Y.crossTileID.set=function(le){this._structArray.uint32[this._pos4+12]=le},Y.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},Y.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},Y.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},Y.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,Y),D}(jo);Pt.prototype.size=68;var Vt=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new Pt(this,Y)},D}(ge);Sr("SymbolInstanceArray",Vt);var It=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(Y){return this.float32[1*Y+0]},D}(_e);Sr("GlyphOffsetArray",It);var sn=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.getx=function(Y){return this.int16[3*Y+0]},D.prototype.gety=function(Y){return this.int16[3*Y+1]},D.prototype.gettileUnitDistanceFromAnchor=function(Y){return this.int16[3*Y+2]},D}(Ce);Sr("SymbolLineVertexArray",sn);var Jt=function(k){function D(){k.apply(this,arguments)}k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D;var Y={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return Y.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},Y.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},Y.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,Y),D}(jo);Jt.prototype.size=8;var Zt=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.get=function(Y){return new Jt(this,Y)},D}(Ne);Sr("FeatureIndexArray",Zt);var Mn=Gi([{name:"a_pos",components:2,type:"Int16"}],4).members,kn=function(k){k===void 0&&(k=[]),this.segments=k};function Yn(k,D){return 256*(k=s(Math.floor(k),0,255))+s(Math.floor(D),0,255)}kn.prototype.prepareSegment=function(k,D,Y,le){var Ee=this.segments[this.segments.length-1];return k>kn.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+kn.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+k),(!Ee||Ee.vertexLength+k>kn.MAX_VERTEX_ARRAY_LENGTH||Ee.sortKey!==le)&&(Ee={vertexOffset:D.length,primitiveOffset:Y.length,vertexLength:0,primitiveLength:0},le!==void 0&&(Ee.sortKey=le),this.segments.push(Ee)),Ee},kn.prototype.get=function(){return this.segments},kn.prototype.destroy=function(){for(var k=0,D=this.segments;k<D.length;k+=1){var Y=D[k];for(var le in Y.vaos)Y.vaos[le].destroy()}},kn.simpleSegment=function(k,D,Y,le){return new kn([{vertexOffset:k,primitiveOffset:D,vertexLength:Y,primitiveLength:le,vaos:{},sortKey:0}])},kn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Sr("SegmentVector",kn);var Zn=Gi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),nr=_(function(k){k.exports=function(D,Y){var le,Ee,Oe,je,$e,ut,bt,Tt;for(le=3&D.length,Ee=D.length-le,Oe=Y,$e=3432918353,ut=461845907,Tt=0;Tt<Ee;)bt=255&D.charCodeAt(Tt)|(255&D.charCodeAt(++Tt))<<8|(255&D.charCodeAt(++Tt))<<16|(255&D.charCodeAt(++Tt))<<24,++Tt,Oe=27492+(65535&(je=5*(65535&(Oe=(Oe^=bt=(65535&(bt=(bt=(65535&bt)*$e+(((bt>>>16)*$e&65535)<<16)&4294967295)<<15|bt>>>17))*ut+(((bt>>>16)*ut&65535)<<16)&4294967295)<<13|Oe>>>19))+((5*(Oe>>>16)&65535)<<16)&4294967295))+((58964+(je>>>16)&65535)<<16);switch(bt=0,le){case 3:bt^=(255&D.charCodeAt(Tt+2))<<16;case 2:bt^=(255&D.charCodeAt(Tt+1))<<8;case 1:Oe^=bt=(65535&(bt=(bt=(65535&(bt^=255&D.charCodeAt(Tt)))*$e+(((bt>>>16)*$e&65535)<<16)&4294967295)<<15|bt>>>17))*ut+(((bt>>>16)*ut&65535)<<16)&4294967295}return Oe^=D.length,Oe=2246822507*(65535&(Oe^=Oe>>>16))+((2246822507*(Oe>>>16)&65535)<<16)&4294967295,Oe=3266489909*(65535&(Oe^=Oe>>>13))+((3266489909*(Oe>>>16)&65535)<<16)&4294967295,(Oe^=Oe>>>16)>>>0}}),sr=_(function(k){k.exports=function(D,Y){for(var le,Ee=D.length,Oe=Y^Ee,je=0;Ee>=4;)le=1540483477*(65535&(le=255&D.charCodeAt(je)|(255&D.charCodeAt(++je))<<8|(255&D.charCodeAt(++je))<<16|(255&D.charCodeAt(++je))<<24))+((1540483477*(le>>>16)&65535)<<16),Oe=1540483477*(65535&Oe)+((1540483477*(Oe>>>16)&65535)<<16)^(le=1540483477*(65535&(le^=le>>>24))+((1540483477*(le>>>16)&65535)<<16)),Ee-=4,++je;switch(Ee){case 3:Oe^=(255&D.charCodeAt(je+2))<<16;case 2:Oe^=(255&D.charCodeAt(je+1))<<8;case 1:Oe=1540483477*(65535&(Oe^=255&D.charCodeAt(je)))+((1540483477*(Oe>>>16)&65535)<<16)}return Oe=1540483477*(65535&(Oe^=Oe>>>13))+((1540483477*(Oe>>>16)&65535)<<16),(Oe^=Oe>>>15)>>>0}}),dr=nr,hr=nr,yr=sr;dr.murmur3=hr,dr.murmur2=yr;var Mr=function(){this.ids=[],this.positions=[],this.indexed=!1};Mr.prototype.add=function(k,D,Y,le){this.ids.push(Jn(k)),this.positions.push(D,Y,le)},Mr.prototype.getPositions=function(k){for(var D=Jn(k),Y=0,le=this.ids.length-1;Y<le;){var Ee=Y+le>>1;this.ids[Ee]>=D?le=Ee:Y=Ee+1}for(var Oe=[];this.ids[Y]===D;){var je=this.positions[3*Y],$e=this.positions[3*Y+1],ut=this.positions[3*Y+2];Oe.push({index:je,start:$e,end:ut}),Y++}return Oe},Mr.serialize=function(k,D){var Y=new Float64Array(k.ids),le=new Uint32Array(k.positions);return fr(Y,le,0,Y.length-1),D&&D.push(Y.buffer,le.buffer),{ids:Y,positions:le}},Mr.deserialize=function(k){var D=new Mr;return D.ids=k.ids,D.positions=k.positions,D.indexed=!0,D};var Fr=Math.pow(2,53)-1;function Jn(k){var D=+k;return!isNaN(D)&&D<=Fr?D:dr(String(k))}function fr(k,D,Y,le){for(;Y<le;){for(var Ee=k[Y+le>>1],Oe=Y-1,je=le+1;;){do Oe++;while(k[Oe]<Ee);do je--;while(k[je]>Ee);if(Oe>=je)break;xr(k,Oe,je),xr(D,3*Oe,3*je),xr(D,3*Oe+1,3*je+1),xr(D,3*Oe+2,3*je+2)}je-Y<le-je?(fr(k,D,Y,je),Y=je+1):(fr(k,D,je+1,le),le=je)}}function xr(k,D,Y){var le=k[D];k[D]=k[Y],k[Y]=le}Sr("FeaturePositionMap",Mr);var Ar=function(k,D){this.gl=k.gl,this.location=D},zr=function(k){function D(Y,le){k.call(this,Y,le),this.current=0}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1i(this.location,Y))},D}(Ar),Hr=function(k){function D(Y,le){k.call(this,Y,le),this.current=0}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){this.current!==Y&&(this.current=Y,this.gl.uniform1f(this.location,Y))},D}(Ar),Kr=function(k){function D(Y,le){k.call(this,Y,le),this.current=[0,0]}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]||(this.current=Y,this.gl.uniform2f(this.location,Y[0],Y[1]))},D}(Ar),ri=function(k){function D(Y,le){k.call(this,Y,le),this.current=[0,0,0]}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]||(this.current=Y,this.gl.uniform3f(this.location,Y[0],Y[1],Y[2]))},D}(Ar),vi=function(k){function D(Y,le){k.call(this,Y,le),this.current=[0,0,0,0]}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y[0]===this.current[0]&&Y[1]===this.current[1]&&Y[2]===this.current[2]&&Y[3]===this.current[3]||(this.current=Y,this.gl.uniform4f(this.location,Y[0],Y[1],Y[2],Y[3]))},D}(Ar),mi=function(k){function D(Y,le){k.call(this,Y,le),this.current=yn.transparent}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){Y.r===this.current.r&&Y.g===this.current.g&&Y.b===this.current.b&&Y.a===this.current.a||(this.current=Y,this.gl.uniform4f(this.location,Y.r,Y.g,Y.b,Y.a))},D}(Ar),ii=new Float32Array(16),Pi=function(k){function D(Y,le){k.call(this,Y,le),this.current=ii}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.set=function(Y){if(Y[12]!==this.current[12]||Y[0]!==this.current[0])return this.current=Y,void this.gl.uniformMatrix4fv(this.location,!1,Y);for(var le=1;le<16;le++)if(Y[le]!==this.current[le]){this.current=Y,this.gl.uniformMatrix4fv(this.location,!1,Y);break}},D}(Ar);function $i(k){return[Yn(255*k.r,255*k.g),Yn(255*k.b,255*k.a)]}var Fi=function(k,D,Y){this.value=k,this.uniformNames=D.map(function(le){return"u_"+le}),this.type=Y};Fi.prototype.setUniform=function(k,D,Y){k.set(Y.constantOr(this.value))},Fi.prototype.getBinding=function(k,D,Y){return this.type==="color"?new mi(k,D):new Hr(k,D)};var Wi=function(k,D){this.uniformNames=D.map(function(Y){return"u_"+Y}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Wi.prototype.setConstantPatternPositions=function(k,D){this.pixelRatioFrom=D.pixelRatio,this.pixelRatioTo=k.pixelRatio,this.patternFrom=D.tlbr,this.patternTo=k.tlbr},Wi.prototype.setUniform=function(k,D,Y,le){var Ee=le==="u_pattern_to"?this.patternTo:le==="u_pattern_from"?this.patternFrom:le==="u_pixel_ratio_to"?this.pixelRatioTo:le==="u_pixel_ratio_from"?this.pixelRatioFrom:null;Ee&&k.set(Ee)},Wi.prototype.getBinding=function(k,D,Y){return Y.substr(0,9)==="u_pattern"?new vi(k,D):new Hr(k,D)};var Qr=function(k,D,Y,le){this.expression=k,this.type=Y,this.maxValue=0,this.paintVertexAttributes=D.map(function(Ee){return{name:"a_"+Ee,type:"Float32",components:Y==="color"?2:1,offset:0}}),this.paintVertexArray=new le};Qr.prototype.populatePaintArray=function(k,D,Y,le,Ee){var Oe=this.paintVertexArray.length,je=this.expression.evaluate(new oi(0),D,{},le,[],Ee);this.paintVertexArray.resize(k),this._setPaintValue(Oe,k,je)},Qr.prototype.updatePaintArray=function(k,D,Y,le){var Ee=this.expression.evaluate({zoom:0},Y,le);this._setPaintValue(k,D,Ee)},Qr.prototype._setPaintValue=function(k,D,Y){if(this.type==="color")for(var le=$i(Y),Ee=k;Ee<D;Ee++)this.paintVertexArray.emplace(Ee,le[0],le[1]);else{for(var Oe=k;Oe<D;Oe++)this.paintVertexArray.emplace(Oe,Y);this.maxValue=Math.max(this.maxValue,Math.abs(Y))}},Qr.prototype.upload=function(k){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=k.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Xr=function(k,D,Y,le,Ee,Oe){this.expression=k,this.uniformNames=D.map(function(je){return"u_"+je+"_t"}),this.type=Y,this.useIntegerZoom=le,this.zoom=Ee,this.maxValue=0,this.paintVertexAttributes=D.map(function(je){return{name:"a_"+je,type:"Float32",components:Y==="color"?4:2,offset:0}}),this.paintVertexArray=new Oe};Xr.prototype.populatePaintArray=function(k,D,Y,le,Ee){var Oe=this.expression.evaluate(new oi(this.zoom),D,{},le,[],Ee),je=this.expression.evaluate(new oi(this.zoom+1),D,{},le,[],Ee),$e=this.paintVertexArray.length;this.paintVertexArray.resize(k),this._setPaintValue($e,k,Oe,je)},Xr.prototype.updatePaintArray=function(k,D,Y,le){var Ee=this.expression.evaluate({zoom:this.zoom},Y,le),Oe=this.expression.evaluate({zoom:this.zoom+1},Y,le);this._setPaintValue(k,D,Ee,Oe)},Xr.prototype._setPaintValue=function(k,D,Y,le){if(this.type==="color")for(var Ee=$i(Y),Oe=$i(le),je=k;je<D;je++)this.paintVertexArray.emplace(je,Ee[0],Ee[1],Oe[0],Oe[1]);else{for(var $e=k;$e<D;$e++)this.paintVertexArray.emplace($e,Y,le);this.maxValue=Math.max(this.maxValue,Math.abs(Y),Math.abs(le))}},Xr.prototype.upload=function(k){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=k.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Xr.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Xr.prototype.setUniform=function(k,D){var Y=this.useIntegerZoom?Math.floor(D.zoom):D.zoom,le=s(this.expression.interpolationFactor(Y,this.zoom,this.zoom+1),0,1);k.set(le)},Xr.prototype.getBinding=function(k,D,Y){return new Hr(k,D)};var yi=function(k,D,Y,le,Ee,Oe){this.expression=k,this.type=D,this.useIntegerZoom=Y,this.zoom=le,this.layerId=Oe,this.zoomInPaintVertexArray=new Ee,this.zoomOutPaintVertexArray=new Ee};yi.prototype.populatePaintArray=function(k,D,Y){var le=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(k),this.zoomOutPaintVertexArray.resize(k),this._setPaintValues(le,k,D.patterns&&D.patterns[this.layerId],Y)},yi.prototype.updatePaintArray=function(k,D,Y,le,Ee){this._setPaintValues(k,D,Y.patterns&&Y.patterns[this.layerId],Ee)},yi.prototype._setPaintValues=function(k,D,Y,le){if(le&&Y){var Ee=Y.min,Oe=Y.mid,je=Y.max,$e=le[Ee],ut=le[Oe],bt=le[je];if($e&&ut&&bt)for(var Tt=k;Tt<D;Tt++)this.zoomInPaintVertexArray.emplace(Tt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],ut.pixelRatio,$e.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],ut.pixelRatio,bt.pixelRatio)}},yi.prototype.upload=function(k){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=k.createVertexBuffer(this.zoomInPaintVertexArray,Zn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=k.createVertexBuffer(this.zoomOutPaintVertexArray,Zn.members,this.expression.isStateDependent))},yi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var hi=function(k,D,Y,le){this.binders={},this.layoutAttributes=le,this._buffers=[];var Ee=[];for(var Oe in k.paint._values)if(Y(Oe)){var je=k.paint.get(Oe);if(je instanceof Bi&&ho(je.property.specification)){var $e=va(Oe,k.type),ut=je.value,bt=je.property.specification.type,Tt=je.property.useIntegerZoom,Rt=je.property.specification["property-type"],Ht=Rt==="cross-faded"||Rt==="cross-faded-data-driven";if(ut.kind==="constant")this.binders[Oe]=Ht?new Wi(ut.value,$e):new Fi(ut.value,$e,bt),Ee.push("/u_"+Oe);else if(ut.kind==="source"||Ht){var Ut=Si(Oe,bt,"source");this.binders[Oe]=Ht?new yi(ut,bt,Tt,D,Ut,k.id):new Qr(ut,$e,bt,Ut),Ee.push("/a_"+Oe)}else{var on=Si(Oe,bt,"composite");this.binders[Oe]=new Xr(ut,$e,bt,Tt,D,on),Ee.push("/z_"+Oe)}}}this.cacheKey=Ee.sort().join("")};hi.prototype.getMaxValue=function(k){var D=this.binders[k];return D instanceof Qr||D instanceof Xr?D.maxValue:0},hi.prototype.populatePaintArrays=function(k,D,Y,le,Ee){for(var Oe in this.binders){var je=this.binders[Oe];(je instanceof Qr||je instanceof Xr||je instanceof yi)&&je.populatePaintArray(k,D,Y,le,Ee)}},hi.prototype.setConstantPatternPositions=function(k,D){for(var Y in this.binders){var le=this.binders[Y];le instanceof Wi&&le.setConstantPatternPositions(k,D)}},hi.prototype.updatePaintArrays=function(k,D,Y,le,Ee){var Oe=!1;for(var je in k)for(var $e=0,ut=D.getPositions(je);$e<ut.length;$e+=1){var bt=ut[$e],Tt=Y.feature(bt.index);for(var Rt in this.binders){var Ht=this.binders[Rt];if((Ht instanceof Qr||Ht instanceof Xr||Ht instanceof yi)&&Ht.expression.isStateDependent===!0){var Ut=le.paint.get(Rt);Ht.expression=Ut.value,Ht.updatePaintArray(bt.start,bt.end,Tt,k[je],Ee),Oe=!0}}}return Oe},hi.prototype.defines=function(){var k=[];for(var D in this.binders){var Y=this.binders[D];(Y instanceof Fi||Y instanceof Wi)&&k.push.apply(k,Y.uniformNames.map(function(le){return"#define HAS_UNIFORM_"+le}))}return k},hi.prototype.getPaintVertexBuffers=function(){return this._buffers},hi.prototype.getUniforms=function(k,D){var Y=[];for(var le in this.binders){var Ee=this.binders[le];if(Ee instanceof Fi||Ee instanceof Wi||Ee instanceof Xr)for(var Oe=0,je=Ee.uniformNames;Oe<je.length;Oe+=1){var $e=je[Oe];if(D[$e]){var ut=Ee.getBinding(k,D[$e],$e);Y.push({name:$e,property:le,binding:ut})}}}return Y},hi.prototype.setUniforms=function(k,D,Y,le){for(var Ee=0,Oe=D;Ee<Oe.length;Ee+=1){var je=Oe[Ee],$e=je.name,ut=je.property,bt=je.binding;this.binders[ut].setUniform(bt,le,Y.get(ut),$e)}},hi.prototype.updatePaintBuffers=function(k){for(var D in this._buffers=[],this.binders){var Y=this.binders[D];if(k&&Y instanceof yi){var le=k.fromScale===2?Y.zoomInPaintVertexBuffer:Y.zoomOutPaintVertexBuffer;le&&this._buffers.push(le)}else(Y instanceof Qr||Y instanceof Xr)&&Y.paintVertexBuffer&&this._buffers.push(Y.paintVertexBuffer)}},hi.prototype.upload=function(k){for(var D in this.binders){var Y=this.binders[D];(Y instanceof Qr||Y instanceof Xr||Y instanceof yi)&&Y.upload(k)}this.updatePaintBuffers()},hi.prototype.destroy=function(){for(var k in this.binders){var D=this.binders[k];(D instanceof Qr||D instanceof Xr||D instanceof yi)&&D.destroy()}};var _i=function(k,D,Y,le){le===void 0&&(le=function(){return!0}),this.programConfigurations={};for(var Ee=0,Oe=D;Ee<Oe.length;Ee+=1){var je=Oe[Ee];this.programConfigurations[je.id]=new hi(je,Y,le,k)}this.needsUpload=!1,this._featureMap=new Mr,this._bufferOffset=0};function va(k,D){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[k]||[k.replace(D+"-","").replace(/-/g,"_")]}function Si(k,D,Y){var le={color:{source:Ye,composite:Qe},number:{source:_e,composite:Ye}},Ee=function(Oe){return{"line-pattern":{source:_o,composite:_o},"fill-pattern":{source:_o,composite:_o},"fill-extrusion-pattern":{source:_o,composite:_o}}[Oe]}(k);return Ee&&Ee[Y]||le[D][Y]}_i.prototype.populatePaintArrays=function(k,D,Y,le,Ee,Oe){for(var je in this.programConfigurations)this.programConfigurations[je].populatePaintArrays(k,D,le,Ee,Oe);D.id!==void 0&&this._featureMap.add(D.id,Y,this._bufferOffset,k),this._bufferOffset=k,this.needsUpload=!0},_i.prototype.updatePaintArrays=function(k,D,Y,le){for(var Ee=0,Oe=Y;Ee<Oe.length;Ee+=1){var je=Oe[Ee];this.needsUpload=this.programConfigurations[je.id].updatePaintArrays(k,this._featureMap,D,je,le)||this.needsUpload}},_i.prototype.get=function(k){return this.programConfigurations[k]},_i.prototype.upload=function(k){if(this.needsUpload){for(var D in this.programConfigurations)this.programConfigurations[D].upload(k);this.needsUpload=!1}},_i.prototype.destroy=function(){for(var k in this.programConfigurations)this.programConfigurations[k].destroy()},Sr("ConstantBinder",Fi),Sr("CrossFadedConstantBinder",Wi),Sr("SourceExpressionBinder",Qr),Sr("CrossFadedCompositeBinder",yi),Sr("CompositeExpressionBinder",Xr),Sr("ProgramConfiguration",hi,{omit:["_buffers"]}),Sr("ProgramConfigurationSet",_i);var ai=8192,ss,Ma=(ss=15,{min:-1*Math.pow(2,ss-1),max:Math.pow(2,ss-1)-1});function ja(k){for(var D=ai/k.extent,Y=k.loadGeometry(),le=0;le<Y.length;le++)for(var Ee=Y[le],Oe=0;Oe<Ee.length;Oe++){var je=Ee[Oe];je.x=Math.round(je.x*D),je.y=Math.round(je.y*D),(je.x<Ma.min||je.x>Ma.max||je.y<Ma.min||je.y>Ma.max)&&(S("Geometry exceeds allowed extent, reduce your vector tile buffer size"),je.x=s(je.x,Ma.min,Ma.max),je.y=s(je.y,Ma.min,Ma.max))}return Y}function Di(k,D,Y,le,Ee){k.emplaceBack(2*D+(le+1)/2,2*Y+(Ee+1)/2)}var Qi=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=k.index,this.hasPattern=!1,this.layoutVertexArray=new Ta,this.indexArray=new ee,this.segments=new kn,this.programConfigurations=new _i(Mn,k.layers,k.zoom),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function Ka(k,D){for(var Y=0;Y<k.length;Y++)if(_l(D,k[Y]))return!0;for(var le=0;le<D.length;le++)if(_l(k,D[le]))return!0;return!!du(k,D)}function Vl(k,D,Y){return!!_l(k,D)||!!gu(D,k,Y)}function qu(k,D){if(k.length===1)return Yu(D,k[0]);for(var Y=0;Y<D.length;Y++)for(var le=D[Y],Ee=0;Ee<le.length;Ee++)if(_l(k,le[Ee]))return!0;for(var Oe=0;Oe<k.length;Oe++)if(Yu(D,k[Oe]))return!0;for(var je=0;je<D.length;je++)if(du(k,D[je]))return!0;return!1}function Dc(k,D,Y){if(k.length>1){if(du(k,D))return!0;for(var le=0;le<D.length;le++)if(gu(D[le],k,Y))return!0}for(var Ee=0;Ee<k.length;Ee++)if(gu(k[Ee],D,Y))return!0;return!1}function du(k,D){if(k.length===0||D.length===0)return!1;for(var Y=0;Y<k.length-1;Y++)for(var le=k[Y],Ee=k[Y+1],Oe=0;Oe<D.length-1;Oe++)if(Hl(le,Ee,D[Oe],D[Oe+1]))return!0;return!1}function Hl(k,D,Y,le){return T(k,Y,le)!==T(D,Y,le)&&T(k,D,Y)!==T(k,D,le)}function gu(k,D,Y){var le=Y*Y;if(D.length===1)return k.distSqr(D[0])<le;for(var Ee=1;Ee<D.length;Ee++)if(Ll(k,D[Ee-1],D[Ee])<le)return!0;return!1}function Ll(k,D,Y){var le=D.distSqr(Y);if(le===0)return k.distSqr(D);var Ee=((k.x-D.x)*(Y.x-D.x)+(k.y-D.y)*(Y.y-D.y))/le;return Ee<0?k.distSqr(D):Ee>1?k.distSqr(Y):k.distSqr(Y.sub(D)._mult(Ee)._add(D))}function Yu(k,D){for(var Y,le,Ee,Oe=!1,je=0;je<k.length;je++)for(var $e=0,ut=(Y=k[je]).length-1;$e<Y.length;ut=$e++)le=Y[$e],Ee=Y[ut],le.y>D.y!=Ee.y>D.y&&D.x<(Ee.x-le.x)*(D.y-le.y)/(Ee.y-le.y)+le.x&&(Oe=!Oe);return Oe}function _l(k,D){for(var Y=!1,le=0,Ee=k.length-1;le<k.length;Ee=le++){var Oe=k[le],je=k[Ee];Oe.y>D.y!=je.y>D.y&&D.x<(je.x-Oe.x)*(D.y-Oe.y)/(je.y-Oe.y)+Oe.x&&(Y=!Y)}return Y}function vu(k,D,Y){var le=Y[0],Ee=Y[2];if(k.x<le.x&&D.x<le.x||k.x>Ee.x&&D.x>Ee.x||k.y<le.y&&D.y<le.y||k.y>Ee.y&&D.y>Ee.y)return!1;var Oe=T(k,D,Y[0]);return Oe!==T(k,D,Y[1])||Oe!==T(k,D,Y[2])||Oe!==T(k,D,Y[3])}function mu(k,D,Y){var le=D.paint.get(k).value;return le.kind==="constant"?le.value:Y.programConfigurations.get(D.id).getMaxValue(k)}function Zu(k){return Math.sqrt(k[0]*k[0]+k[1]*k[1])}function Xu(k,D,Y,le,Ee){if(!D[0]&&!D[1])return k;var Oe=e.convert(D)._mult(Ee);Y==="viewport"&&Oe._rotate(-le);for(var je=[],$e=0;$e<k.length;$e++){var ut=k[$e];je.push(ut.sub(Oe))}return je}Qi.prototype.populate=function(k,D,Y){var le=this.layers[0],Ee=[],Oe=null;le.type==="circle"&&(Oe=le.layout.get("circle-sort-key"));for(var je=0,$e=k;je<$e.length;je+=1){var ut=$e[je],bt=ut.feature,Tt=ut.id,Rt=ut.index,Ht=ut.sourceLayerIndex,Ut=this.layers[0]._featureFilter.needGeometry,on={type:bt.type,id:Tt,properties:bt.properties,geometry:Ut?ja(bt):[]};if(this.layers[0]._featureFilter.filter(new oi(this.zoom),on,Y)){Ut||(on.geometry=ja(bt));var pn=Oe?Oe.evaluate(on,{},Y):void 0,zn={id:Tt,properties:bt.properties,type:bt.type,sourceLayerIndex:Ht,index:Rt,geometry:on.geometry,patterns:{},sortKey:pn};Ee.push(zn)}}Oe&&Ee.sort(function(wr,Er){return wr.sortKey-Er.sortKey});for(var Dn=0,Vn=Ee;Dn<Vn.length;Dn+=1){var Gn=Vn[Dn],er=Gn,rr=er.geometry,cr=er.index,br=er.sourceLayerIndex,gr=k[cr].feature;this.addFeature(Gn,rr,cr,Y),D.featureIndex.insert(gr,rr,cr,br,this.index)}},Qi.prototype.update=function(k,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,D,this.stateDependentLayers,Y)},Qi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qi.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Mn),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},Qi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qi.prototype.addFeature=function(k,D,Y,le){for(var Ee=0,Oe=D;Ee<Oe.length;Ee+=1)for(var je=0,$e=Oe[Ee];je<$e.length;je+=1){var ut=$e[je],bt=ut.x,Tt=ut.y;if(!(bt<0||bt>=ai||Tt<0||Tt>=ai)){var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,k.sortKey),Ht=Rt.vertexLength;Di(this.layoutVertexArray,bt,Tt,-1,-1),Di(this.layoutVertexArray,bt,Tt,1,-1),Di(this.layoutVertexArray,bt,Tt,1,1),Di(this.layoutVertexArray,bt,Tt,-1,1),this.indexArray.emplaceBack(Ht,Ht+1,Ht+2),this.indexArray.emplaceBack(Ht,Ht+3,Ht+2),Rt.vertexLength+=4,Rt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,Y,{},le)},Sr("CircleBucket",Qi,{omit:["layers"]});var Tp=new ra({"circle-sort-key":new Dr(De.layout_circle["circle-sort-key"])}),Mp={paint:new ra({"circle-radius":new Dr(De.paint_circle["circle-radius"]),"circle-color":new Dr(De.paint_circle["circle-color"]),"circle-blur":new Dr(De.paint_circle["circle-blur"]),"circle-opacity":new Dr(De.paint_circle["circle-opacity"]),"circle-translate":new Pr(De.paint_circle["circle-translate"]),"circle-translate-anchor":new Pr(De.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pr(De.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pr(De.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Dr(De.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Dr(De.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Dr(De.paint_circle["circle-stroke-opacity"])}),layout:Tp},Uo=typeof Float32Array<"u"?Float32Array:Array;function zc(k){return k[0]=1,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=1,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=1,k[11]=0,k[12]=0,k[13]=0,k[14]=0,k[15]=1,k}function Sf(k,D,Y){var le=D[0],Ee=D[1],Oe=D[2],je=D[3],$e=D[4],ut=D[5],bt=D[6],Tt=D[7],Rt=D[8],Ht=D[9],Ut=D[10],on=D[11],pn=D[12],zn=D[13],Dn=D[14],Vn=D[15],Gn=Y[0],er=Y[1],rr=Y[2],cr=Y[3];return k[0]=Gn*le+er*$e+rr*Rt+cr*pn,k[1]=Gn*Ee+er*ut+rr*Ht+cr*zn,k[2]=Gn*Oe+er*bt+rr*Ut+cr*Dn,k[3]=Gn*je+er*Tt+rr*on+cr*Vn,Gn=Y[4],er=Y[5],rr=Y[6],cr=Y[7],k[4]=Gn*le+er*$e+rr*Rt+cr*pn,k[5]=Gn*Ee+er*ut+rr*Ht+cr*zn,k[6]=Gn*Oe+er*bt+rr*Ut+cr*Dn,k[7]=Gn*je+er*Tt+rr*on+cr*Vn,Gn=Y[8],er=Y[9],rr=Y[10],cr=Y[11],k[8]=Gn*le+er*$e+rr*Rt+cr*pn,k[9]=Gn*Ee+er*ut+rr*Ht+cr*zn,k[10]=Gn*Oe+er*bt+rr*Ut+cr*Dn,k[11]=Gn*je+er*Tt+rr*on+cr*Vn,Gn=Y[12],er=Y[13],rr=Y[14],cr=Y[15],k[12]=Gn*le+er*$e+rr*Rt+cr*pn,k[13]=Gn*Ee+er*ut+rr*Ht+cr*zn,k[14]=Gn*Oe+er*bt+rr*Ut+cr*Dn,k[15]=Gn*je+er*Tt+rr*on+cr*Vn,k}Math.hypot||(Math.hypot=function(){for(var k=arguments,D=0,Y=arguments.length;Y--;)D+=k[Y]*k[Y];return Math.sqrt(D)});var Ap=Sf,Ku,kp=function(k,D,Y){return k[0]=D[0]-Y[0],k[1]=D[1]-Y[1],k[2]=D[2]-Y[2],k};function Ju(k,D,Y){var le=D[0],Ee=D[1],Oe=D[2],je=D[3];return k[0]=Y[0]*le+Y[4]*Ee+Y[8]*Oe+Y[12]*je,k[1]=Y[1]*le+Y[5]*Ee+Y[9]*Oe+Y[13]*je,k[2]=Y[2]*le+Y[6]*Ee+Y[10]*Oe+Y[14]*je,k[3]=Y[3]*le+Y[7]*Ee+Y[11]*Oe+Y[15]*je,k}Ku=new Uo(3),Uo!=Float32Array&&(Ku[0]=0,Ku[1]=0,Ku[2]=0),function(){var k=new Uo(4);Uo!=Float32Array&&(k[0]=0,k[1]=0,k[2]=0,k[3]=0)}();var Sp=function(k){var D=k[0],Y=k[1];return D*D+Y*Y},Ep=(function(){var k=new Uo(2);Uo!=Float32Array&&(k[0]=0,k[1]=0)}(),function(k){function D(Y){k.call(this,Y,Mp)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(Y){return new Qi(Y)},D.prototype.queryRadius=function(Y){var le=Y;return mu("circle-radius",this,le)+mu("circle-stroke-width",this,le)+Zu(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(Y,le,Ee,Oe,je,$e,ut,bt){for(var Tt=Xu(Y,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),$e.angle,ut),Rt=this.paint.get("circle-radius").evaluate(le,Ee)+this.paint.get("circle-stroke-width").evaluate(le,Ee),Ht=this.paint.get("circle-pitch-alignment")==="map",Ut=Ht?Tt:function(br,gr){return br.map(function(wr){return Ef(wr,gr)})}(Tt,bt),on=Ht?Rt*ut:Rt,pn=0,zn=Oe;pn<zn.length;pn+=1)for(var Dn=0,Vn=zn[pn];Dn<Vn.length;Dn+=1){var Gn=Vn[Dn],er=Ht?Gn:Ef(Gn,bt),rr=on,cr=Ju([],[Gn.x,Gn.y,0,1],bt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?rr*=cr[3]/$e.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(rr*=$e.cameraToCenterDistance/cr[3]),Vl(Ut,er,rr))return!0}return!1},D}(ia));function Ef(k,D){var Y=Ju([],[k.x,k.y,0,1],D);return new e(Y[0]/Y[3],Y[1]/Y[3])}var Cf=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D}(Qi);function Rc(k,D,Y,le){var Ee=D.width,Oe=D.height;if(le){if(le instanceof Uint8ClampedArray)le=new Uint8Array(le.buffer);else if(le.length!==Ee*Oe*Y)throw new RangeError("mismatched image size")}else le=new Uint8Array(Ee*Oe*Y);return k.width=Ee,k.height=Oe,k.data=le,k}function Lf(k,D,Y){var le=D.width,Ee=D.height;if(le!==k.width||Ee!==k.height){var Oe=Rc({},{width:le,height:Ee},Y);Bc(k,Oe,{x:0,y:0},{x:0,y:0},{width:Math.min(k.width,le),height:Math.min(k.height,Ee)},Y),k.width=le,k.height=Ee,k.data=Oe.data}}function Bc(k,D,Y,le,Ee,Oe){if(Ee.width===0||Ee.height===0)return D;if(Ee.width>k.width||Ee.height>k.height||Y.x>k.width-Ee.width||Y.y>k.height-Ee.height)throw new RangeError("out of range source coordinates for image copy");if(Ee.width>D.width||Ee.height>D.height||le.x>D.width-Ee.width||le.y>D.height-Ee.height)throw new RangeError("out of range destination coordinates for image copy");for(var je=k.data,$e=D.data,ut=0;ut<Ee.height;ut++)for(var bt=((Y.y+ut)*k.width+Y.x)*Oe,Tt=((le.y+ut)*D.width+le.x)*Oe,Rt=0;Rt<Ee.width*Oe;Rt++)$e[Tt+Rt]=je[bt+Rt];return D}Sr("HeatmapBucket",Cf,{omit:["layers"]});var Pl=function(k,D){Rc(this,k,1,D)};Pl.prototype.resize=function(k){Lf(this,k,1)},Pl.prototype.clone=function(){return new Pl({width:this.width,height:this.height},new Uint8Array(this.data))},Pl.copy=function(k,D,Y,le,Ee){Bc(k,D,Y,le,Ee,1)};var so=function(k,D){Rc(this,k,4,D)};so.prototype.resize=function(k){Lf(this,k,4)},so.prototype.replace=function(k,D){D?this.data.set(k):k instanceof Uint8ClampedArray?this.data=new Uint8Array(k.buffer):this.data=k},so.prototype.clone=function(){return new so({width:this.width,height:this.height},new Uint8Array(this.data))},so.copy=function(k,D,Y,le,Ee){Bc(k,D,Y,le,Ee,4)},Sr("AlphaImage",Pl),Sr("RGBAImage",so);var Cp={paint:new ra({"heatmap-radius":new Dr(De.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Dr(De.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pr(De.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Fo(De.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pr(De.paint_heatmap["heatmap-opacity"])})};function Pf(k,D){for(var Y=new Uint8Array(1024),le={},Ee=0,Oe=0;Ee<256;Ee++,Oe+=4){le[D]=Ee/255;var je=k.evaluate(le);Y[Oe+0]=Math.floor(255*je.r/je.a),Y[Oe+1]=Math.floor(255*je.g/je.a),Y[Oe+2]=Math.floor(255*je.b/je.a),Y[Oe+3]=Math.floor(255*je.a)}return new so({width:256,height:1},Y)}var Lp=function(k){function D(Y){k.call(this,Y,Cp),this._updateColorRamp()}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(Y){return new Cf(Y)},D.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var Y=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Pf(Y,"heatmapDensity"),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(ia),Pp={paint:new ra({"hillshade-illumination-direction":new Pr(De.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pr(De.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pr(De.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pr(De.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pr(De.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pr(De.paint_hillshade["hillshade-accent-color"])})},Op=function(k){function D(Y){k.call(this,Y,Pp)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(ia),Of=Gi([{name:"a_pos",components:2,type:"Int16"}],4).members,Fc=$u,Ip=$u;function $u(k,D,Y){Y=Y||2;var le,Ee,Oe,je,$e,ut,bt,Tt=D&&D.length,Rt=Tt?D[0]*Y:k.length,Ht=If(k,0,Rt,Y,!0),Ut=[];if(!Ht||Ht.next===Ht.prev)return Ut;if(Tt&&(Ht=function(pn,zn,Dn,Vn){var Gn,er,rr,cr=[];for(Gn=0,er=zn.length;Gn<er;Gn++)(rr=If(pn,zn[Gn]*Vn,Gn<er-1?zn[Gn+1]*Vn:pn.length,Vn,!1))===rr.next&&(rr.steiner=!0),cr.push(Up(rr));for(cr.sort(Fp),Gn=0;Gn<cr.length;Gn++)Np(cr[Gn],Dn),Dn=wl(Dn,Dn.next);return Dn}(k,D,Ht,Y)),k.length>80*Y){le=Oe=k[0],Ee=je=k[1];for(var on=Y;on<Rt;on+=Y)($e=k[on])<le&&(le=$e),(ut=k[on+1])<Ee&&(Ee=ut),$e>Oe&&(Oe=$e),ut>je&&(je=ut);bt=(bt=Math.max(Oe-le,je-Ee))!==0?1/bt:0}return yu(Ht,Ut,Y,le,Ee,bt),Ut}function If(k,D,Y,le,Ee){var Oe,je;if(Ee===Uc(k,D,Y,le)>0)for(Oe=D;Oe<Y;Oe+=le)je=Rf(Oe,k[Oe],k[Oe+1],je);else for(Oe=Y-le;Oe>=D;Oe-=le)je=Rf(Oe,k[Oe],k[Oe+1],je);return je&&Qu(je,je.next)&&(bu(je),je=je.next),je}function wl(k,D){if(!k)return k;D||(D=k);var Y,le=k;do if(Y=!1,le.steiner||!Qu(le,le.next)&&la(le.prev,le,le.next)!==0)le=le.next;else{if(bu(le),(le=D=le.prev)===le.next)break;Y=!0}while(Y||le!==D);return D}function yu(k,D,Y,le,Ee,Oe,je){if(k){!je&&Oe&&function(Tt,Rt,Ht,Ut){var on=Tt;do on.z===null&&(on.z=Nc(on.x,on.y,Rt,Ht,Ut)),on.prevZ=on.prev,on.nextZ=on.next,on=on.next;while(on!==Tt);on.prevZ.nextZ=null,on.prevZ=null,function(pn){var zn,Dn,Vn,Gn,er,rr,cr,br,gr=1;do{for(Dn=pn,pn=null,er=null,rr=0;Dn;){for(rr++,Vn=Dn,cr=0,zn=0;zn<gr&&(cr++,Vn=Vn.nextZ);zn++);for(br=gr;cr>0||br>0&&Vn;)cr!==0&&(br===0||!Vn||Dn.z<=Vn.z)?(Gn=Dn,Dn=Dn.nextZ,cr--):(Gn=Vn,Vn=Vn.nextZ,br--),er?er.nextZ=Gn:pn=Gn,Gn.prevZ=er,er=Gn;Dn=Vn}er.nextZ=null,gr*=2}while(rr>1)}(on)}(k,le,Ee,Oe);for(var $e,ut,bt=k;k.prev!==k.next;)if($e=k.prev,ut=k.next,Oe?zp(k,le,Ee,Oe):Dp(k))D.push($e.i/Y),D.push(k.i/Y),D.push(ut.i/Y),bu(k),k=ut.next,bt=ut.next;else if((k=ut)===bt){je?je===1?yu(k=Rp(wl(k),D,Y),D,Y,le,Ee,Oe,2):je===2&&Bp(k,D,Y,le,Ee,Oe):yu(wl(k),D,Y,le,Ee,Oe,1);break}}}function Dp(k){var D=k.prev,Y=k,le=k.next;if(la(D,Y,le)>=0)return!1;for(var Ee=k.next.next;Ee!==k.prev;){if(Gl(D.x,D.y,Y.x,Y.y,le.x,le.y,Ee.x,Ee.y)&&la(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function zp(k,D,Y,le){var Ee=k.prev,Oe=k,je=k.next;if(la(Ee,Oe,je)>=0)return!1;for(var $e=Ee.x<Oe.x?Ee.x<je.x?Ee.x:je.x:Oe.x<je.x?Oe.x:je.x,ut=Ee.y<Oe.y?Ee.y<je.y?Ee.y:je.y:Oe.y<je.y?Oe.y:je.y,bt=Ee.x>Oe.x?Ee.x>je.x?Ee.x:je.x:Oe.x>je.x?Oe.x:je.x,Tt=Ee.y>Oe.y?Ee.y>je.y?Ee.y:je.y:Oe.y>je.y?Oe.y:je.y,Rt=Nc($e,ut,D,Y,le),Ht=Nc(bt,Tt,D,Y,le),Ut=k.prevZ,on=k.nextZ;Ut&&Ut.z>=Rt&&on&&on.z<=Ht;){if(Ut!==k.prev&&Ut!==k.next&&Gl(Ee.x,Ee.y,Oe.x,Oe.y,je.x,je.y,Ut.x,Ut.y)&&la(Ut.prev,Ut,Ut.next)>=0||(Ut=Ut.prevZ,on!==k.prev&&on!==k.next&&Gl(Ee.x,Ee.y,Oe.x,Oe.y,je.x,je.y,on.x,on.y)&&la(on.prev,on,on.next)>=0))return!1;on=on.nextZ}for(;Ut&&Ut.z>=Rt;){if(Ut!==k.prev&&Ut!==k.next&&Gl(Ee.x,Ee.y,Oe.x,Oe.y,je.x,je.y,Ut.x,Ut.y)&&la(Ut.prev,Ut,Ut.next)>=0)return!1;Ut=Ut.prevZ}for(;on&&on.z<=Ht;){if(on!==k.prev&&on!==k.next&&Gl(Ee.x,Ee.y,Oe.x,Oe.y,je.x,je.y,on.x,on.y)&&la(on.prev,on,on.next)>=0)return!1;on=on.nextZ}return!0}function Rp(k,D,Y){var le=k;do{var Ee=le.prev,Oe=le.next.next;!Qu(Ee,Oe)&&Df(Ee,le,le.next,Oe)&&xu(Ee,Oe)&&xu(Oe,Ee)&&(D.push(Ee.i/Y),D.push(le.i/Y),D.push(Oe.i/Y),bu(le),bu(le.next),le=k=Oe),le=le.next}while(le!==k);return wl(le)}function Bp(k,D,Y,le,Ee,Oe){var je=k;do{for(var $e=je.next.next;$e!==je.prev;){if(je.i!==$e.i&&Vp(je,$e)){var ut=zf(je,$e);return je=wl(je,je.next),ut=wl(ut,ut.next),yu(je,D,Y,le,Ee,Oe),void yu(ut,D,Y,le,Ee,Oe)}$e=$e.next}je=je.next}while(je!==k)}function Fp(k,D){return k.x-D.x}function Np(k,D){if(D=function(le,Ee){var Oe,je=Ee,$e=le.x,ut=le.y,bt=-1/0;do{if(ut<=je.y&&ut>=je.next.y&&je.next.y!==je.y){var Tt=je.x+(ut-je.y)*(je.next.x-je.x)/(je.next.y-je.y);if(Tt<=$e&&Tt>bt){if(bt=Tt,Tt===$e){if(ut===je.y)return je;if(ut===je.next.y)return je.next}Oe=je.x<je.next.x?je:je.next}}je=je.next}while(je!==Ee);if(!Oe)return null;if($e===bt)return Oe;var Rt,Ht=Oe,Ut=Oe.x,on=Oe.y,pn=1/0;je=Oe;do $e>=je.x&&je.x>=Ut&&$e!==je.x&&Gl(ut<on?$e:bt,ut,Ut,on,ut<on?bt:$e,ut,je.x,je.y)&&(Rt=Math.abs(ut-je.y)/($e-je.x),xu(je,le)&&(Rt<pn||Rt===pn&&(je.x>Oe.x||je.x===Oe.x&&jp(Oe,je)))&&(Oe=je,pn=Rt)),je=je.next;while(je!==Ht);return Oe}(k,D)){var Y=zf(D,k);wl(D,D.next),wl(Y,Y.next)}}function jp(k,D){return la(k.prev,k,D.prev)<0&&la(D.next,k,k.next)<0}function Nc(k,D,Y,le,Ee){return(k=1431655765&((k=858993459&((k=252645135&((k=16711935&((k=32767*(k-Y)*Ee)|k<<8))|k<<4))|k<<2))|k<<1))|(D=1431655765&((D=858993459&((D=252645135&((D=16711935&((D=32767*(D-le)*Ee)|D<<8))|D<<4))|D<<2))|D<<1))<<1}function Up(k){var D=k,Y=k;do(D.x<Y.x||D.x===Y.x&&D.y<Y.y)&&(Y=D),D=D.next;while(D!==k);return Y}function Gl(k,D,Y,le,Ee,Oe,je,$e){return(Ee-je)*(D-$e)-(k-je)*(Oe-$e)>=0&&(k-je)*(le-$e)-(Y-je)*(D-$e)>=0&&(Y-je)*(Oe-$e)-(Ee-je)*(le-$e)>=0}function Vp(k,D){return k.next.i!==D.i&&k.prev.i!==D.i&&!function(Y,le){var Ee=Y;do{if(Ee.i!==Y.i&&Ee.next.i!==Y.i&&Ee.i!==le.i&&Ee.next.i!==le.i&&Df(Ee,Ee.next,Y,le))return!0;Ee=Ee.next}while(Ee!==Y);return!1}(k,D)&&(xu(k,D)&&xu(D,k)&&function(Y,le){var Ee=Y,Oe=!1,je=(Y.x+le.x)/2,$e=(Y.y+le.y)/2;do Ee.y>$e!=Ee.next.y>$e&&Ee.next.y!==Ee.y&&je<(Ee.next.x-Ee.x)*($e-Ee.y)/(Ee.next.y-Ee.y)+Ee.x&&(Oe=!Oe),Ee=Ee.next;while(Ee!==Y);return Oe}(k,D)&&(la(k.prev,k,D.prev)||la(k,D.prev,D))||Qu(k,D)&&la(k.prev,k,k.next)>0&&la(D.prev,D,D.next)>0)}function la(k,D,Y){return(D.y-k.y)*(Y.x-D.x)-(D.x-k.x)*(Y.y-D.y)}function Qu(k,D){return k.x===D.x&&k.y===D.y}function Df(k,D,Y,le){var Ee=tc(la(k,D,Y)),Oe=tc(la(k,D,le)),je=tc(la(Y,le,k)),$e=tc(la(Y,le,D));return Ee!==Oe&&je!==$e||!(Ee!==0||!ec(k,Y,D))||!(Oe!==0||!ec(k,le,D))||!(je!==0||!ec(Y,k,le))||!($e!==0||!ec(Y,D,le))}function ec(k,D,Y){return D.x<=Math.max(k.x,Y.x)&&D.x>=Math.min(k.x,Y.x)&&D.y<=Math.max(k.y,Y.y)&&D.y>=Math.min(k.y,Y.y)}function tc(k){return k>0?1:k<0?-1:0}function xu(k,D){return la(k.prev,k,k.next)<0?la(k,D,k.next)>=0&&la(k,k.prev,D)>=0:la(k,D,k.prev)<0||la(k,k.next,D)<0}function zf(k,D){var Y=new jc(k.i,k.x,k.y),le=new jc(D.i,D.x,D.y),Ee=k.next,Oe=D.prev;return k.next=D,D.prev=k,Y.next=Ee,Ee.prev=Y,le.next=Y,Y.prev=le,Oe.next=le,le.prev=Oe,le}function Rf(k,D,Y,le){var Ee=new jc(k,D,Y);return le?(Ee.next=le.next,Ee.prev=le,le.next.prev=Ee,le.next=Ee):(Ee.prev=Ee,Ee.next=Ee),Ee}function bu(k){k.next.prev=k.prev,k.prev.next=k.next,k.prevZ&&(k.prevZ.nextZ=k.nextZ),k.nextZ&&(k.nextZ.prevZ=k.prevZ)}function jc(k,D,Y){this.i=k,this.x=D,this.y=Y,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Uc(k,D,Y,le){for(var Ee=0,Oe=D,je=Y-le;Oe<Y;Oe+=le)Ee+=(k[je]-k[Oe])*(k[Oe+1]+k[je+1]),je=Oe;return Ee}function Hp(k,D,Y,le,Ee){Bf(k,D,Y||0,le||k.length-1,Ee||Gp)}function Bf(k,D,Y,le,Ee){for(;le>Y;){if(le-Y>600){var Oe=le-Y+1,je=D-Y+1,$e=Math.log(Oe),ut=.5*Math.exp(2*$e/3),bt=.5*Math.sqrt($e*ut*(Oe-ut)/Oe)*(je-Oe/2<0?-1:1);Bf(k,D,Math.max(Y,Math.floor(D-je*ut/Oe+bt)),Math.min(le,Math.floor(D+(Oe-je)*ut/Oe+bt)),Ee)}var Tt=k[D],Rt=Y,Ht=le;for(_u(k,Y,D),Ee(k[le],Tt)>0&&_u(k,Y,le);Rt<Ht;){for(_u(k,Rt,Ht),Rt++,Ht--;Ee(k[Rt],Tt)<0;)Rt++;for(;Ee(k[Ht],Tt)>0;)Ht--}Ee(k[Y],Tt)===0?_u(k,Y,Ht):_u(k,++Ht,le),Ht<=D&&(Y=Ht+1),D<=Ht&&(le=Ht-1)}}function _u(k,D,Y){var le=k[D];k[D]=k[Y],k[Y]=le}function Gp(k,D){return k<D?-1:k>D?1:0}function Vc(k,D){var Y=k.length;if(Y<=1)return[k];for(var le,Ee,Oe=[],je=0;je<Y;je++){var $e=E(k[je]);$e!==0&&(k[je].area=Math.abs($e),Ee===void 0&&(Ee=$e<0),Ee===$e<0?(le&&Oe.push(le),le=[k[je]]):le.push(k[je]))}if(le&&Oe.push(le),D>1)for(var ut=0;ut<Oe.length;ut++)Oe[ut].length<=D||(Hp(Oe[ut],D,1,Oe[ut].length-1,Wp),Oe[ut]=Oe[ut].slice(0,D));return Oe}function Wp(k,D){return D.area-k.area}function Hc(k,D,Y){for(var le=Y.patternDependencies,Ee=!1,Oe=0,je=D;Oe<je.length;Oe+=1){var $e=je[Oe].paint.get(k+"-pattern");$e.isConstant()||(Ee=!0);var ut=$e.constantOr(null);ut&&(Ee=!0,le[ut.to]=!0,le[ut.from]=!0)}return Ee}function Gc(k,D,Y,le,Ee){for(var Oe=Ee.patternDependencies,je=0,$e=D;je<$e.length;je+=1){var ut=$e[je],bt=ut.paint.get(k+"-pattern").value;if(bt.kind!=="constant"){var Tt=bt.evaluate({zoom:le-1},Y,{},Ee.availableImages),Rt=bt.evaluate({zoom:le},Y,{},Ee.availableImages),Ht=bt.evaluate({zoom:le+1},Y,{},Ee.availableImages);Tt=Tt&&Tt.name?Tt.name:Tt,Rt=Rt&&Rt.name?Rt.name:Rt,Ht=Ht&&Ht.name?Ht.name:Ht,Oe[Tt]=!0,Oe[Rt]=!0,Oe[Ht]=!0,Y.patterns[ut.id]={min:Tt,mid:Rt,max:Ht}}}return Y}$u.deviation=function(k,D,Y,le){var Ee=D&&D.length,Oe=Ee?D[0]*Y:k.length,je=Math.abs(Uc(k,0,Oe,Y));if(Ee)for(var $e=0,ut=D.length;$e<ut;$e++){var bt=D[$e]*Y,Tt=$e<ut-1?D[$e+1]*Y:k.length;je-=Math.abs(Uc(k,bt,Tt,Y))}var Rt=0;for($e=0;$e<le.length;$e+=3){var Ht=le[$e]*Y,Ut=le[$e+1]*Y,on=le[$e+2]*Y;Rt+=Math.abs((k[Ht]-k[on])*(k[Ut+1]-k[Ht+1])-(k[Ht]-k[Ut])*(k[on+1]-k[Ht+1]))}return je===0&&Rt===0?0:Math.abs((Rt-je)/je)},$u.flatten=function(k){for(var D=k[0][0].length,Y={vertices:[],holes:[],dimensions:D},le=0,Ee=0;Ee<k.length;Ee++){for(var Oe=0;Oe<k[Ee].length;Oe++)for(var je=0;je<D;je++)Y.vertices.push(k[Ee][Oe][je]);Ee>0&&(le+=k[Ee-1].length,Y.holes.push(le))}return Y},Fc.default=Ip;var Os=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=k.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ta,this.indexArray=new ee,this.indexArray2=new Ue,this.programConfigurations=new _i(Of,k.layers,k.zoom),this.segments=new kn,this.segments2=new kn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};Os.prototype.populate=function(k,D,Y){this.hasPattern=Hc("fill",this.layers,D);for(var le=this.layers[0].layout.get("fill-sort-key"),Ee=[],Oe=0,je=k;Oe<je.length;Oe+=1){var $e=je[Oe],ut=$e.feature,bt=$e.id,Tt=$e.index,Rt=$e.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Ut={type:ut.type,id:bt,properties:ut.properties,geometry:Ht?ja(ut):[]};if(this.layers[0]._featureFilter.filter(new oi(this.zoom),Ut,Y)){Ht||(Ut.geometry=ja(ut));var on=le?le.evaluate(Ut,{},Y,D.availableImages):void 0,pn={id:bt,properties:ut.properties,type:ut.type,sourceLayerIndex:Rt,index:Tt,geometry:Ut.geometry,patterns:{},sortKey:on};Ee.push(pn)}}le&&Ee.sort(function(wr,Er){return wr.sortKey-Er.sortKey});for(var zn=0,Dn=Ee;zn<Dn.length;zn+=1){var Vn=Dn[zn],Gn=Vn,er=Gn.geometry,rr=Gn.index,cr=Gn.sourceLayerIndex;if(this.hasPattern){var br=Gc("fill",this.layers,Vn,this.zoom,D);this.patternFeatures.push(br)}else this.addFeature(Vn,er,rr,Y,{});var gr=k[rr].feature;D.featureIndex.insert(gr,er,rr,cr,this.index)}},Os.prototype.update=function(k,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,D,this.stateDependentLayers,Y)},Os.prototype.addFeatures=function(k,D,Y){for(var le=0,Ee=this.patternFeatures;le<Ee.length;le+=1){var Oe=Ee[le];this.addFeature(Oe,Oe.geometry,Oe.index,D,Y)}},Os.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Os.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Of),this.indexBuffer=k.createIndexBuffer(this.indexArray),this.indexBuffer2=k.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(k),this.uploaded=!0},Os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Os.prototype.addFeature=function(k,D,Y,le,Ee){for(var Oe=0,je=Vc(D,500);Oe<je.length;Oe+=1){for(var $e=je[Oe],ut=0,bt=0,Tt=$e;bt<Tt.length;bt+=1)ut+=Tt[bt].length;for(var Rt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray),Ht=Rt.vertexLength,Ut=[],on=[],pn=0,zn=$e;pn<zn.length;pn+=1){var Dn=zn[pn];if(Dn.length!==0){Dn!==$e[0]&&on.push(Ut.length/2);var Vn=this.segments2.prepareSegment(Dn.length,this.layoutVertexArray,this.indexArray2),Gn=Vn.vertexLength;this.layoutVertexArray.emplaceBack(Dn[0].x,Dn[0].y),this.indexArray2.emplaceBack(Gn+Dn.length-1,Gn),Ut.push(Dn[0].x),Ut.push(Dn[0].y);for(var er=1;er<Dn.length;er++)this.layoutVertexArray.emplaceBack(Dn[er].x,Dn[er].y),this.indexArray2.emplaceBack(Gn+er-1,Gn+er),Ut.push(Dn[er].x),Ut.push(Dn[er].y);Vn.vertexLength+=Dn.length,Vn.primitiveLength+=Dn.length}}for(var rr=Fc(Ut,on),cr=0;cr<rr.length;cr+=3)this.indexArray.emplaceBack(Ht+rr[cr],Ht+rr[cr+1],Ht+rr[cr+2]);Rt.vertexLength+=ut,Rt.primitiveLength+=rr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,Y,Ee,le)},Sr("FillBucket",Os,{omit:["layers","patternFeatures"]});var qp=new ra({"fill-sort-key":new Dr(De.layout_fill["fill-sort-key"])}),Yp={paint:new ra({"fill-antialias":new Pr(De.paint_fill["fill-antialias"]),"fill-opacity":new Dr(De.paint_fill["fill-opacity"]),"fill-color":new Dr(De.paint_fill["fill-color"]),"fill-outline-color":new Dr(De.paint_fill["fill-outline-color"]),"fill-translate":new Pr(De.paint_fill["fill-translate"]),"fill-translate-anchor":new Pr(De.paint_fill["fill-translate-anchor"]),"fill-pattern":new vs(De.paint_fill["fill-pattern"])}),layout:qp},Zp=function(k){function D(Y){k.call(this,Y,Yp)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(Y,le){k.prototype.recalculate.call(this,Y,le);var Ee=this.paint._values["fill-outline-color"];Ee.value.kind==="constant"&&Ee.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(Y){return new Os(Y)},D.prototype.queryRadius=function(){return Zu(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(Y,le,Ee,Oe,je,$e,ut){return qu(Xu(Y,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),$e.angle,ut),Oe)},D.prototype.isTileClipped=function(){return!0},D}(ia),Ff=Gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Nf=Wl;function Wl(k,D,Y,le,Ee){this.properties={},this.extent=Y,this.type=0,this._pbf=k,this._geometry=-1,this._keys=le,this._values=Ee,k.readFields(Xp,this,D)}function Xp(k,D,Y){k==1?D.id=Y.readVarint():k==2?function(le,Ee){for(var Oe=le.readVarint()+le.pos;le.pos<Oe;){var je=Ee._keys[le.readVarint()],$e=Ee._values[le.readVarint()];Ee.properties[je]=$e}}(Y,D):k==3?D.type=Y.readVarint():k==4&&(D._geometry=Y.pos)}function Kp(k){for(var D,Y,le=0,Ee=0,Oe=k.length,je=Oe-1;Ee<Oe;je=Ee++)D=k[Ee],le+=((Y=k[je]).x-D.x)*(D.y+Y.y);return le}Wl.types=["Unknown","Point","LineString","Polygon"],Wl.prototype.loadGeometry=function(){var k=this._pbf;k.pos=this._geometry;for(var D,Y=k.readVarint()+k.pos,le=1,Ee=0,Oe=0,je=0,$e=[];k.pos<Y;){if(Ee<=0){var ut=k.readVarint();le=7&ut,Ee=ut>>3}if(Ee--,le===1||le===2)Oe+=k.readSVarint(),je+=k.readSVarint(),le===1&&(D&&$e.push(D),D=[]),D.push(new e(Oe,je));else{if(le!==7)throw new Error("unknown command "+le);D&&D.push(D[0].clone())}}return D&&$e.push(D),$e},Wl.prototype.bbox=function(){var k=this._pbf;k.pos=this._geometry;for(var D=k.readVarint()+k.pos,Y=1,le=0,Ee=0,Oe=0,je=1/0,$e=-1/0,ut=1/0,bt=-1/0;k.pos<D;){if(le<=0){var Tt=k.readVarint();Y=7&Tt,le=Tt>>3}if(le--,Y===1||Y===2)(Ee+=k.readSVarint())<je&&(je=Ee),Ee>$e&&($e=Ee),(Oe+=k.readSVarint())<ut&&(ut=Oe),Oe>bt&&(bt=Oe);else if(Y!==7)throw new Error("unknown command "+Y)}return[je,ut,$e,bt]},Wl.prototype.toGeoJSON=function(k,D,Y){var le,Ee,Oe=this.extent*Math.pow(2,Y),je=this.extent*k,$e=this.extent*D,ut=this.loadGeometry(),bt=Wl.types[this.type];function Tt(Ut){for(var on=0;on<Ut.length;on++){var pn=Ut[on],zn=180-360*(pn.y+$e)/Oe;Ut[on]=[360*(pn.x+je)/Oe-180,360/Math.PI*Math.atan(Math.exp(zn*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for(le=0;le<ut.length;le++)Rt[le]=ut[le][0];Tt(ut=Rt);break;case 2:for(le=0;le<ut.length;le++)Tt(ut[le]);break;case 3:for(ut=function(Ut){var on=Ut.length;if(on<=1)return[Ut];for(var pn,zn,Dn=[],Vn=0;Vn<on;Vn++){var Gn=Kp(Ut[Vn]);Gn!==0&&(zn===void 0&&(zn=Gn<0),zn===Gn<0?(pn&&Dn.push(pn),pn=[Ut[Vn]]):pn.push(Ut[Vn]))}return pn&&Dn.push(pn),Dn}(ut),le=0;le<ut.length;le++)for(Ee=0;Ee<ut[le].length;Ee++)Tt(ut[le][Ee])}ut.length===1?ut=ut[0]:bt="Multi"+bt;var Ht={type:"Feature",geometry:{type:bt,coordinates:ut},properties:this.properties};return"id"in this&&(Ht.id=this.id),Ht};var jf=Uf;function Uf(k,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=k,this._keys=[],this._values=[],this._features=[],k.readFields(Jp,this,D),this.length=this._features.length}function Jp(k,D,Y){k===15?D.version=Y.readVarint():k===1?D.name=Y.readString():k===5?D.extent=Y.readVarint():k===2?D._features.push(Y.pos):k===3?D._keys.push(Y.readString()):k===4&&D._values.push(function(le){for(var Ee=null,Oe=le.readVarint()+le.pos;le.pos<Oe;){var je=le.readVarint()>>3;Ee=je===1?le.readString():je===2?le.readFloat():je===3?le.readDouble():je===4?le.readVarint64():je===5?le.readVarint():je===6?le.readSVarint():je===7?le.readBoolean():null}return Ee}(Y))}function $p(k,D,Y){if(k===3){var le=new jf(Y,Y.readVarint()+Y.pos);le.length&&(D[le.name]=le)}}Uf.prototype.feature=function(k){if(k<0||k>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[k];var D=this._pbf.readVarint()+this._pbf.pos;return new Nf(this._pbf,D,this.extent,this._keys,this._values)};var ql={VectorTile:function(k,D){this.layers=k.readFields($p,{},D)},VectorTileFeature:Nf,VectorTileLayer:jf},Qp=ql.VectorTileFeature.types,Wc=Math.pow(2,13);function wu(k,D,Y,le,Ee,Oe,je,$e){k.emplaceBack(D,Y,2*Math.floor(le*Wc)+je,Ee*Wc*2,Oe*Wc*2,Math.round($e))}var Is=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=k.index,this.hasPattern=!1,this.layoutVertexArray=new ys,this.indexArray=new ee,this.programConfigurations=new _i(Ff,k.layers,k.zoom),this.segments=new kn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};function ed(k,D){return k.x===D.x&&(k.x<0||k.x>ai)||k.y===D.y&&(k.y<0||k.y>ai)}Is.prototype.populate=function(k,D,Y){this.features=[],this.hasPattern=Hc("fill-extrusion",this.layers,D);for(var le=0,Ee=k;le<Ee.length;le+=1){var Oe=Ee[le],je=Oe.feature,$e=Oe.id,ut=Oe.index,bt=Oe.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Rt={type:je.type,id:$e,properties:je.properties,geometry:Tt?ja(je):[]};if(this.layers[0]._featureFilter.filter(new oi(this.zoom),Rt,Y)){var Ht={id:$e,sourceLayerIndex:bt,index:ut,geometry:Tt?Rt.geometry:ja(je),properties:je.properties,type:je.type,patterns:{}};je.id!==void 0&&(Ht.id=je.id),this.hasPattern?this.features.push(Gc("fill-extrusion",this.layers,Ht,this.zoom,D)):this.addFeature(Ht,Ht.geometry,ut,Y,{}),D.featureIndex.insert(je,Ht.geometry,ut,bt,this.index,!0)}}},Is.prototype.addFeatures=function(k,D,Y){for(var le=0,Ee=this.features;le<Ee.length;le+=1){var Oe=Ee[le],je=Oe.geometry;this.addFeature(Oe,je,Oe.index,D,Y)}},Is.prototype.update=function(k,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,D,this.stateDependentLayers,Y)},Is.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Is.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Is.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Ff),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},Is.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Is.prototype.addFeature=function(k,D,Y,le,Ee){for(var Oe=0,je=Vc(D,500);Oe<je.length;Oe+=1){for(var $e=je[Oe],ut=0,bt=0,Tt=$e;bt<Tt.length;bt+=1)ut+=Tt[bt].length;for(var Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ht=0,Ut=$e;Ht<Ut.length;Ht+=1){var on=Ut[Ht];if(on.length!==0&&!(($r=on).every(function(qr){return qr.x<0})||$r.every(function(qr){return qr.x>ai})||$r.every(function(qr){return qr.y<0})||$r.every(function(qr){return qr.y>ai})))for(var pn=0,zn=0;zn<on.length;zn++){var Dn=on[zn];if(zn>=1){var Vn=on[zn-1];if(!ed(Dn,Vn)){Rt.vertexLength+4>kn.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Gn=Dn.sub(Vn)._perp()._unit(),er=Vn.dist(Dn);pn+er>32768&&(pn=0),wu(this.layoutVertexArray,Dn.x,Dn.y,Gn.x,Gn.y,0,0,pn),wu(this.layoutVertexArray,Dn.x,Dn.y,Gn.x,Gn.y,0,1,pn),pn+=er,wu(this.layoutVertexArray,Vn.x,Vn.y,Gn.x,Gn.y,0,0,pn),wu(this.layoutVertexArray,Vn.x,Vn.y,Gn.x,Gn.y,0,1,pn);var rr=Rt.vertexLength;this.indexArray.emplaceBack(rr,rr+2,rr+1),this.indexArray.emplaceBack(rr+1,rr+2,rr+3),Rt.vertexLength+=4,Rt.primitiveLength+=2}}}}if(Rt.vertexLength+ut>kn.MAX_VERTEX_ARRAY_LENGTH&&(Rt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray)),Qp[k.type]==="Polygon"){for(var cr=[],br=[],gr=Rt.vertexLength,wr=0,Er=$e;wr<Er.length;wr+=1){var Gr=Er[wr];if(Gr.length!==0){Gr!==$e[0]&&br.push(cr.length/2);for(var Or=0;Or<Gr.length;Or++){var Vr=Gr[Or];wu(this.layoutVertexArray,Vr.x,Vr.y,0,0,1,1,0),cr.push(Vr.x),cr.push(Vr.y)}}}for(var Rr=Fc(cr,br),Lr=0;Lr<Rr.length;Lr+=3)this.indexArray.emplaceBack(gr+Rr[Lr],gr+Rr[Lr+2],gr+Rr[Lr+1]);Rt.primitiveLength+=Rr.length/3,Rt.vertexLength+=ut}}var $r;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,Y,Ee,le)},Sr("FillExtrusionBucket",Is,{omit:["layers","features"]});var td={paint:new ra({"fill-extrusion-opacity":new Pr(De["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Dr(De["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pr(De["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pr(De["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vs(De["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Dr(De["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Dr(De["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pr(De["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},nd=function(k){function D(Y){k.call(this,Y,td)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(Y){return new Is(Y)},D.prototype.queryRadius=function(){return Zu(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(Y,le,Ee,Oe,je,$e,ut,bt){var Tt=Xu(Y,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),$e.angle,ut),Rt=this.paint.get("fill-extrusion-height").evaluate(le,Ee),Ht=this.paint.get("fill-extrusion-base").evaluate(le,Ee),Ut=function(pn,zn,Dn,Vn){for(var Gn=[],er=0,rr=pn;er<rr.length;er+=1){var cr=rr[er],br=[cr.x,cr.y,Vn,1];Ju(br,br,zn),Gn.push(new e(br[0]/br[3],br[1]/br[3]))}return Gn}(Tt,bt,0,0),on=function(pn,zn,Dn,Vn){for(var Gn=[],er=[],rr=Vn[8]*zn,cr=Vn[9]*zn,br=Vn[10]*zn,gr=Vn[11]*zn,wr=Vn[8]*Dn,Er=Vn[9]*Dn,Gr=Vn[10]*Dn,Or=Vn[11]*Dn,Vr=0,Rr=pn;Vr<Rr.length;Vr+=1){for(var Lr=[],$r=[],qr=0,wi=Rr[Vr];qr<wi.length;qr+=1){var Ur=wi[qr],gi=Ur.x,ki=Ur.y,Ei=Vn[0]*gi+Vn[4]*ki+Vn[12],Ci=Vn[1]*gi+Vn[5]*ki+Vn[13],Ti=Vn[2]*gi+Vn[6]*ki+Vn[14],fa=Vn[3]*gi+Vn[7]*ki+Vn[15],zi=Ti+br,ya=fa+gr,Ia=Ei+wr,ka=Ci+Er,Ja=Ti+Gr,Sa=fa+Or,da=new e((Ei+rr)/ya,(Ci+cr)/ya);da.z=zi/ya,Lr.push(da);var Ea=new e(Ia/Sa,ka/Sa);Ea.z=Ja/Sa,$r.push(Ea)}Gn.push(Lr),er.push($r)}return[Gn,er]}(Oe,Ht,Rt,bt);return function(pn,zn,Dn){var Vn=1/0;qu(Dn,zn)&&(Vn=Vf(Dn,zn[0]));for(var Gn=0;Gn<zn.length;Gn++)for(var er=zn[Gn],rr=pn[Gn],cr=0;cr<er.length-1;cr++){var br=er[cr],gr=er[cr+1],wr=rr[cr],Er=[br,gr,rr[cr+1],wr,br];Ka(Dn,Er)&&(Vn=Math.min(Vn,Vf(Dn,Er)))}return Vn!==1/0&&Vn}(on[0],on[1],Ut)},D}(ia);function Tu(k,D){return k.x*D.x+k.y*D.y}function Vf(k,D){if(k.length===1){for(var Y,le=0,Ee=D[le++];!Y||Ee.equals(Y);)if(!(Y=D[le++]))return 1/0;for(;le<D.length;le++){var Oe=D[le],je=k[0],$e=Y.sub(Ee),ut=Oe.sub(Ee),bt=je.sub(Ee),Tt=Tu($e,$e),Rt=Tu($e,ut),Ht=Tu(ut,ut),Ut=Tu(bt,$e),on=Tu(bt,ut),pn=Tt*Ht-Rt*Rt,zn=(Ht*Ut-Rt*on)/pn,Dn=(Tt*on-Rt*Ut)/pn,Vn=1-zn-Dn,Gn=Ee.z*Vn+Y.z*zn+Oe.z*Dn;if(isFinite(Gn))return Gn}return 1/0}for(var er=1/0,rr=0,cr=D;rr<cr.length;rr+=1){var br=cr[rr];er=Math.min(er,br.z)}return er}var Hf=Gi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,rd=ql.VectorTileFeature.types,id=Math.cos(Math.PI/180*37.5),Gf=Math.pow(2,14)/.5,lo=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=k.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new os,this.indexArray=new ee,this.programConfigurations=new _i(Hf,k.layers,k.zoom),this.segments=new kn,this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id})};lo.prototype.populate=function(k,D,Y){this.hasPattern=Hc("line",this.layers,D);for(var le=this.layers[0].layout.get("line-sort-key"),Ee=[],Oe=0,je=k;Oe<je.length;Oe+=1){var $e=je[Oe],ut=$e.feature,bt=$e.id,Tt=$e.index,Rt=$e.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,Ut={type:ut.type,id:bt,properties:ut.properties,geometry:Ht?ja(ut):[]};if(this.layers[0]._featureFilter.filter(new oi(this.zoom),Ut,Y)){Ht||(Ut.geometry=ja(ut));var on=le?le.evaluate(Ut,{},Y):void 0,pn={id:bt,properties:ut.properties,type:ut.type,sourceLayerIndex:Rt,index:Tt,geometry:Ut.geometry,patterns:{},sortKey:on};Ee.push(pn)}}le&&Ee.sort(function(wr,Er){return wr.sortKey-Er.sortKey});for(var zn=0,Dn=Ee;zn<Dn.length;zn+=1){var Vn=Dn[zn],Gn=Vn,er=Gn.geometry,rr=Gn.index,cr=Gn.sourceLayerIndex;if(this.hasPattern){var br=Gc("line",this.layers,Vn,this.zoom,D);this.patternFeatures.push(br)}else this.addFeature(Vn,er,rr,Y,{});var gr=k[rr].feature;D.featureIndex.insert(gr,er,rr,cr,this.index)}},lo.prototype.update=function(k,D,Y){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(k,D,this.stateDependentLayers,Y)},lo.prototype.addFeatures=function(k,D,Y){for(var le=0,Ee=this.patternFeatures;le<Ee.length;le+=1){var Oe=Ee[le];this.addFeature(Oe,Oe.geometry,Oe.index,D,Y)}},lo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},lo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},lo.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Hf),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},lo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},lo.prototype.addFeature=function(k,D,Y,le,Ee){for(var Oe=this.layers[0].layout,je=Oe.get("line-join").evaluate(k,{}),$e=Oe.get("line-cap"),ut=Oe.get("line-miter-limit"),bt=Oe.get("line-round-limit"),Tt=0,Rt=D;Tt<Rt.length;Tt+=1){var Ht=Rt[Tt];this.addLine(Ht,k,je,$e,ut,bt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,Y,Ee,le)},lo.prototype.addLine=function(k,D,Y,le,Ee,Oe){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,D.properties&&D.properties.hasOwnProperty("mapbox_clip_start")&&D.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+D.properties.mapbox_clip_start,this.clipEnd=+D.properties.mapbox_clip_end;for(var je=0;je<k.length-1;je++)this.totalDistance+=k[je].dist(k[je+1]);this.updateScaledDistance()}for(var $e=rd[D.type]==="Polygon",ut=k.length;ut>=2&&k[ut-1].equals(k[ut-2]);)ut--;for(var bt=0;bt<ut-1&&k[bt].equals(k[bt+1]);)bt++;if(!(ut<($e?3:2))){Y==="bevel"&&(Ee=1.05);var Tt,Rt=this.overscaling<=16?15*ai/(512*this.overscaling):0,Ht=this.segments.prepareSegment(10*ut,this.layoutVertexArray,this.indexArray),Ut=void 0,on=void 0,pn=void 0,zn=void 0;this.e1=this.e2=-1,$e&&(Tt=k[ut-2],zn=k[bt].sub(Tt)._unit()._perp());for(var Dn=bt;Dn<ut;Dn++)if(!(on=Dn===ut-1?$e?k[bt+1]:void 0:k[Dn+1])||!k[Dn].equals(on)){zn&&(pn=zn),Tt&&(Ut=Tt),Tt=k[Dn],zn=on?on.sub(Tt)._unit()._perp():pn;var Vn=(pn=pn||zn).add(zn);Vn.x===0&&Vn.y===0||Vn._unit();var Gn=pn.x*zn.x+pn.y*zn.y,er=Vn.x*zn.x+Vn.y*zn.y,rr=er!==0?1/er:1/0,cr=2*Math.sqrt(2-2*er),br=er<id&&Ut&&on,gr=pn.x*zn.y-pn.y*zn.x>0;if(br&&Dn>bt){var wr=Tt.dist(Ut);if(wr>2*Rt){var Er=Tt.sub(Tt.sub(Ut)._mult(Rt/wr)._round());this.updateDistance(Ut,Er),this.addCurrentVertex(Er,pn,0,0,Ht),Ut=Er}}var Gr=Ut&&on,Or=Gr?Y:$e?"butt":le;if(Gr&&Or==="round"&&(rr<Oe?Or="miter":rr<=2&&(Or="fakeround")),Or==="miter"&&rr>Ee&&(Or="bevel"),Or==="bevel"&&(rr>2&&(Or="flipbevel"),rr<Ee&&(Or="miter")),Ut&&this.updateDistance(Ut,Tt),Or==="miter")Vn._mult(rr),this.addCurrentVertex(Tt,Vn,0,0,Ht);else if(Or==="flipbevel"){if(rr>100)Vn=zn.mult(-1);else{var Vr=rr*pn.add(zn).mag()/pn.sub(zn).mag();Vn._perp()._mult(Vr*(gr?-1:1))}this.addCurrentVertex(Tt,Vn,0,0,Ht),this.addCurrentVertex(Tt,Vn.mult(-1),0,0,Ht)}else if(Or==="bevel"||Or==="fakeround"){var Rr=-Math.sqrt(rr*rr-1),Lr=gr?Rr:0,$r=gr?0:Rr;if(Ut&&this.addCurrentVertex(Tt,pn,Lr,$r,Ht),Or==="fakeround")for(var qr=Math.round(180*cr/Math.PI/20),wi=1;wi<qr;wi++){var Ur=wi/qr;if(Ur!==.5){var gi=Ur-.5;Ur+=Ur*gi*(Ur-1)*((1.0904+Gn*(Gn*(3.55645-1.43519*Gn)-3.2452))*gi*gi+(.848013+Gn*(.215638*Gn-1.06021)))}var ki=zn.sub(pn)._mult(Ur)._add(pn)._unit()._mult(gr?-1:1);this.addHalfVertex(Tt,ki.x,ki.y,!1,gr,0,Ht)}on&&this.addCurrentVertex(Tt,zn,-Lr,-$r,Ht)}else if(Or==="butt")this.addCurrentVertex(Tt,Vn,0,0,Ht);else if(Or==="square"){var Ei=Ut?1:-1;this.addCurrentVertex(Tt,Vn,Ei,Ei,Ht)}else Or==="round"&&(Ut&&(this.addCurrentVertex(Tt,pn,0,0,Ht),this.addCurrentVertex(Tt,pn,1,1,Ht,!0)),on&&(this.addCurrentVertex(Tt,zn,-1,-1,Ht,!0),this.addCurrentVertex(Tt,zn,0,0,Ht)));if(br&&Dn<ut-1){var Ci=Tt.dist(on);if(Ci>2*Rt){var Ti=Tt.add(on.sub(Tt)._mult(Rt/Ci)._round());this.updateDistance(Tt,Ti),this.addCurrentVertex(Ti,zn,0,0,Ht),Tt=Ti}}}}},lo.prototype.addCurrentVertex=function(k,D,Y,le,Ee,Oe){Oe===void 0&&(Oe=!1);var je=D.x+D.y*Y,$e=D.y-D.x*Y,ut=-D.x+D.y*le,bt=-D.y-D.x*le;this.addHalfVertex(k,je,$e,Oe,!1,Y,Ee),this.addHalfVertex(k,ut,bt,Oe,!0,-le,Ee),this.distance>Gf/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(k,D,Y,le,Ee,Oe))},lo.prototype.addHalfVertex=function(k,D,Y,le,Ee,Oe,je){var $e=k.x,ut=k.y,bt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack(($e<<1)+(le?1:0),(ut<<1)+(Ee?1:0),Math.round(63*D)+128,Math.round(63*Y)+128,1+(Oe===0?0:Oe<0?-1:1)|(63&bt)<<2,bt>>6);var Tt=je.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Tt),je.primitiveLength++),Ee?this.e2=Tt:this.e1=Tt},lo.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Gf-1):this.distance},lo.prototype.updateDistance=function(k,D){this.distance+=k.dist(D),this.updateScaledDistance()},Sr("LineBucket",lo,{omit:["layers","patternFeatures"]});var ad=new ra({"line-cap":new Pr(De.layout_line["line-cap"]),"line-join":new Dr(De.layout_line["line-join"]),"line-miter-limit":new Pr(De.layout_line["line-miter-limit"]),"line-round-limit":new Pr(De.layout_line["line-round-limit"]),"line-sort-key":new Dr(De.layout_line["line-sort-key"])}),Wf={paint:new ra({"line-opacity":new Dr(De.paint_line["line-opacity"]),"line-color":new Dr(De.paint_line["line-color"]),"line-translate":new Pr(De.paint_line["line-translate"]),"line-translate-anchor":new Pr(De.paint_line["line-translate-anchor"]),"line-width":new Dr(De.paint_line["line-width"]),"line-gap-width":new Dr(De.paint_line["line-gap-width"]),"line-offset":new Dr(De.paint_line["line-offset"]),"line-blur":new Dr(De.paint_line["line-blur"]),"line-dasharray":new pa(De.paint_line["line-dasharray"]),"line-pattern":new vs(De.paint_line["line-pattern"]),"line-gradient":new Fo(De.paint_line["line-gradient"])}),layout:ad},od=function(k){function D(){k.apply(this,arguments)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(Y,le){return le=new oi(Math.floor(le.zoom),{now:le.now,fadeDuration:le.fadeDuration,zoomHistory:le.zoomHistory,transition:le.transition}),k.prototype.possiblyEvaluate.call(this,Y,le)},D.prototype.evaluate=function(Y,le,Ee,Oe){return le=u({},le,{zoom:Math.floor(le.zoom)}),k.prototype.evaluate.call(this,Y,le,Ee,Oe)},D}(Dr),qf=new od(Wf.paint.properties["line-width"].specification);qf.useIntegerZoom=!0;var sd=function(k){function D(Y){k.call(this,Y,Wf)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(Y){Y==="line-gradient"&&this._updateGradient()},D.prototype._updateGradient=function(){var Y=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Pf(Y,"lineProgress"),this.gradientTexture=null},D.prototype.recalculate=function(Y,le){k.prototype.recalculate.call(this,Y,le),this.paint._values["line-floorwidth"]=qf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,Y)},D.prototype.createBucket=function(Y){return new lo(Y)},D.prototype.queryRadius=function(Y){var le=Y,Ee=Yf(mu("line-width",this,le),mu("line-gap-width",this,le)),Oe=mu("line-offset",this,le);return Ee/2+Math.abs(Oe)+Zu(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(Y,le,Ee,Oe,je,$e,ut){var bt=Xu(Y,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),$e.angle,ut),Tt=ut/2*Yf(this.paint.get("line-width").evaluate(le,Ee),this.paint.get("line-gap-width").evaluate(le,Ee)),Rt=this.paint.get("line-offset").evaluate(le,Ee);return Rt&&(Oe=function(Ht,Ut){for(var on=[],pn=new e(0,0),zn=0;zn<Ht.length;zn++){for(var Dn=Ht[zn],Vn=[],Gn=0;Gn<Dn.length;Gn++){var er=Dn[Gn-1],rr=Dn[Gn],cr=Dn[Gn+1],br=Gn===0?pn:rr.sub(er)._unit()._perp(),gr=Gn===Dn.length-1?pn:cr.sub(rr)._unit()._perp(),wr=br._add(gr)._unit(),Er=wr.x*gr.x+wr.y*gr.y;wr._mult(1/Er),Vn.push(wr._mult(Ut)._add(rr))}on.push(Vn)}return on}(Oe,Rt*ut)),function(Ht,Ut,on){for(var pn=0;pn<Ut.length;pn++){var zn=Ut[pn];if(Ht.length>=3){for(var Dn=0;Dn<zn.length;Dn++)if(_l(Ht,zn[Dn]))return!0}if(Dc(Ht,zn,on))return!0}return!1}(bt,Oe,Tt)},D.prototype.isTileClipped=function(){return!0},D}(ia);function Yf(k,D){return D>0?D+2*k:k}var qc=Gi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ld=Gi([{name:"a_projected_pos",components:3,type:"Float32"}],4),ud=(Gi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Gi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Zf=(Gi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Gi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),cd=Gi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function fd(k,D,Y){return k.sections.forEach(function(le){le.text=function(Ee,Oe,je){var $e=Oe.layout.get("text-transform").evaluate(je,{});return $e==="uppercase"?Ee=Ee.toLocaleUpperCase():$e==="lowercase"&&(Ee=Ee.toLocaleLowerCase()),Li.applyArabicShaping&&(Ee=Li.applyArabicShaping(Ee)),Ee}(le.text,D,Y)}),k}Gi([{name:"triangle",components:3,type:"Uint16"}]),Gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Gi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Gi([{type:"Float32",name:"offsetX"}]),Gi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Mu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Aa=24,Xf=function(k,D,Y,le,Ee){var Oe,je,$e=8*Ee-le-1,ut=(1<<$e)-1,bt=ut>>1,Tt=-7,Rt=Y?Ee-1:0,Ht=Y?-1:1,Ut=k[D+Rt];for(Rt+=Ht,Oe=Ut&(1<<-Tt)-1,Ut>>=-Tt,Tt+=$e;Tt>0;Oe=256*Oe+k[D+Rt],Rt+=Ht,Tt-=8);for(je=Oe&(1<<-Tt)-1,Oe>>=-Tt,Tt+=le;Tt>0;je=256*je+k[D+Rt],Rt+=Ht,Tt-=8);if(Oe===0)Oe=1-bt;else{if(Oe===ut)return je?NaN:1/0*(Ut?-1:1);je+=Math.pow(2,le),Oe-=bt}return(Ut?-1:1)*je*Math.pow(2,Oe-le)},Kf=function(k,D,Y,le,Ee,Oe){var je,$e,ut,bt=8*Oe-Ee-1,Tt=(1<<bt)-1,Rt=Tt>>1,Ht=Ee===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ut=le?0:Oe-1,on=le?1:-1,pn=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?($e=isNaN(D)?1:0,je=Tt):(je=Math.floor(Math.log(D)/Math.LN2),D*(ut=Math.pow(2,-je))<1&&(je--,ut*=2),(D+=je+Rt>=1?Ht/ut:Ht*Math.pow(2,1-Rt))*ut>=2&&(je++,ut/=2),je+Rt>=Tt?($e=0,je=Tt):je+Rt>=1?($e=(D*ut-1)*Math.pow(2,Ee),je+=Rt):($e=D*Math.pow(2,Rt-1)*Math.pow(2,Ee),je=0));Ee>=8;k[Y+Ut]=255&$e,Ut+=on,$e/=256,Ee-=8);for(je=je<<Ee|$e,bt+=Ee;bt>0;k[Y+Ut]=255&je,Ut+=on,je/=256,bt-=8);k[Y+Ut-on]|=128*pn},nc=Ai;function Ai(k){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(k)?k:new Uint8Array(k||0),this.pos=0,this.type=0,this.length=this.buf.length}Ai.Varint=0,Ai.Fixed64=1,Ai.Bytes=2,Ai.Fixed32=5;var Yc=4294967296,Jf=1/Yc,$f=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function il(k){return k.type===Ai.Bytes?k.readVarint()+k.pos:k.pos+1}function Yl(k,D,Y){return Y?4294967296*D+(k>>>0):4294967296*(D>>>0)+(k>>>0)}function Qf(k,D,Y){var le=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));Y.realloc(le);for(var Ee=Y.pos-1;Ee>=k;Ee--)Y.buf[Ee+le]=Y.buf[Ee]}function hd(k,D){for(var Y=0;Y<k.length;Y++)D.writeVarint(k[Y])}function pd(k,D){for(var Y=0;Y<k.length;Y++)D.writeSVarint(k[Y])}function dd(k,D){for(var Y=0;Y<k.length;Y++)D.writeFloat(k[Y])}function gd(k,D){for(var Y=0;Y<k.length;Y++)D.writeDouble(k[Y])}function vd(k,D){for(var Y=0;Y<k.length;Y++)D.writeBoolean(k[Y])}function md(k,D){for(var Y=0;Y<k.length;Y++)D.writeFixed32(k[Y])}function yd(k,D){for(var Y=0;Y<k.length;Y++)D.writeSFixed32(k[Y])}function xd(k,D){for(var Y=0;Y<k.length;Y++)D.writeFixed64(k[Y])}function bd(k,D){for(var Y=0;Y<k.length;Y++)D.writeSFixed64(k[Y])}function rc(k,D){return(k[D]|k[D+1]<<8|k[D+2]<<16)+16777216*k[D+3]}function Zl(k,D,Y){k[Y]=D,k[Y+1]=D>>>8,k[Y+2]=D>>>16,k[Y+3]=D>>>24}function eh(k,D){return(k[D]|k[D+1]<<8|k[D+2]<<16)+(k[D+3]<<24)}Ai.prototype={destroy:function(){this.buf=null},readFields:function(k,D,Y){for(Y=Y||this.length;this.pos<Y;){var le=this.readVarint(),Ee=le>>3,Oe=this.pos;this.type=7&le,k(Ee,D,this),this.pos===Oe&&this.skip(le)}return D},readMessage:function(k,D){return this.readFields(k,D,this.readVarint()+this.pos)},readFixed32:function(){var k=rc(this.buf,this.pos);return this.pos+=4,k},readSFixed32:function(){var k=eh(this.buf,this.pos);return this.pos+=4,k},readFixed64:function(){var k=rc(this.buf,this.pos)+rc(this.buf,this.pos+4)*Yc;return this.pos+=8,k},readSFixed64:function(){var k=rc(this.buf,this.pos)+eh(this.buf,this.pos+4)*Yc;return this.pos+=8,k},readFloat:function(){var k=Xf(this.buf,this.pos,!0,23,4);return this.pos+=4,k},readDouble:function(){var k=Xf(this.buf,this.pos,!0,52,8);return this.pos+=8,k},readVarint:function(k){var D,Y,le=this.buf;return D=127&(Y=le[this.pos++]),Y<128?D:(D|=(127&(Y=le[this.pos++]))<<7,Y<128?D:(D|=(127&(Y=le[this.pos++]))<<14,Y<128?D:(D|=(127&(Y=le[this.pos++]))<<21,Y<128?D:function(Ee,Oe,je){var $e,ut,bt=je.buf;if($e=(112&(ut=bt[je.pos++]))>>4,ut<128||($e|=(127&(ut=bt[je.pos++]))<<3,ut<128)||($e|=(127&(ut=bt[je.pos++]))<<10,ut<128)||($e|=(127&(ut=bt[je.pos++]))<<17,ut<128)||($e|=(127&(ut=bt[je.pos++]))<<24,ut<128)||($e|=(1&(ut=bt[je.pos++]))<<31,ut<128))return Yl(Ee,$e,Oe);throw new Error("Expected varint not more than 10 bytes")}(D|=(15&(Y=le[this.pos]))<<28,k,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var k=this.readVarint();return k%2==1?(k+1)/-2:k/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var k=this.readVarint()+this.pos,D=this.pos;return this.pos=k,k-D>=12&&$f?function(Y,le,Ee){return $f.decode(Y.subarray(le,Ee))}(this.buf,D,k):function(Y,le,Ee){for(var Oe="",je=le;je<Ee;){var $e,ut,bt,Tt=Y[je],Rt=null,Ht=Tt>239?4:Tt>223?3:Tt>191?2:1;if(je+Ht>Ee)break;Ht===1?Tt<128&&(Rt=Tt):Ht===2?(192&($e=Y[je+1]))==128&&(Rt=(31&Tt)<<6|63&$e)<=127&&(Rt=null):Ht===3?($e=Y[je+1],ut=Y[je+2],(192&$e)==128&&(192&ut)==128&&((Rt=(15&Tt)<<12|(63&$e)<<6|63&ut)<=2047||Rt>=55296&&Rt<=57343)&&(Rt=null)):Ht===4&&($e=Y[je+1],ut=Y[je+2],bt=Y[je+3],(192&$e)==128&&(192&ut)==128&&(192&bt)==128&&((Rt=(15&Tt)<<18|(63&$e)<<12|(63&ut)<<6|63&bt)<=65535||Rt>=1114112)&&(Rt=null)),Rt===null?(Rt=65533,Ht=1):Rt>65535&&(Rt-=65536,Oe+=String.fromCharCode(Rt>>>10&1023|55296),Rt=56320|1023&Rt),Oe+=String.fromCharCode(Rt),je+=Ht}return Oe}(this.buf,D,k)},readBytes:function(){var k=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,k);return this.pos=k,D},readPackedVarint:function(k,D){if(this.type!==Ai.Bytes)return k.push(this.readVarint(D));var Y=il(this);for(k=k||[];this.pos<Y;)k.push(this.readVarint(D));return k},readPackedSVarint:function(k){if(this.type!==Ai.Bytes)return k.push(this.readSVarint());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readSVarint());return k},readPackedBoolean:function(k){if(this.type!==Ai.Bytes)return k.push(this.readBoolean());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readBoolean());return k},readPackedFloat:function(k){if(this.type!==Ai.Bytes)return k.push(this.readFloat());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readFloat());return k},readPackedDouble:function(k){if(this.type!==Ai.Bytes)return k.push(this.readDouble());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readDouble());return k},readPackedFixed32:function(k){if(this.type!==Ai.Bytes)return k.push(this.readFixed32());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readFixed32());return k},readPackedSFixed32:function(k){if(this.type!==Ai.Bytes)return k.push(this.readSFixed32());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readSFixed32());return k},readPackedFixed64:function(k){if(this.type!==Ai.Bytes)return k.push(this.readFixed64());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readFixed64());return k},readPackedSFixed64:function(k){if(this.type!==Ai.Bytes)return k.push(this.readSFixed64());var D=il(this);for(k=k||[];this.pos<D;)k.push(this.readSFixed64());return k},skip:function(k){var D=7&k;if(D===Ai.Varint)for(;this.buf[this.pos++]>127;);else if(D===Ai.Bytes)this.pos=this.readVarint()+this.pos;else if(D===Ai.Fixed32)this.pos+=4;else{if(D!==Ai.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(k,D){this.writeVarint(k<<3|D)},realloc:function(k){for(var D=this.length||16;D<this.pos+k;)D*=2;if(D!==this.length){var Y=new Uint8Array(D);Y.set(this.buf),this.buf=Y,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(k){this.realloc(4),Zl(this.buf,k,this.pos),this.pos+=4},writeSFixed32:function(k){this.realloc(4),Zl(this.buf,k,this.pos),this.pos+=4},writeFixed64:function(k){this.realloc(8),Zl(this.buf,-1&k,this.pos),Zl(this.buf,Math.floor(k*Jf),this.pos+4),this.pos+=8},writeSFixed64:function(k){this.realloc(8),Zl(this.buf,-1&k,this.pos),Zl(this.buf,Math.floor(k*Jf),this.pos+4),this.pos+=8},writeVarint:function(k){(k=+k||0)>268435455||k<0?function(D,Y){var le,Ee;if(D>=0?(le=D%4294967296|0,Ee=D/4294967296|0):(Ee=~(-D/4294967296),4294967295^(le=~(-D%4294967296))?le=le+1|0:(le=0,Ee=Ee+1|0)),D>=18446744073709552e3||D<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Y.realloc(10),function(Oe,je,$e){$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos++]=127&Oe|128,Oe>>>=7,$e.buf[$e.pos]=127&Oe}(le,0,Y),function(Oe,je){var $e=(7&Oe)<<4;je.buf[je.pos++]|=$e|((Oe>>>=3)?128:0),Oe&&(je.buf[je.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(je.buf[je.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(je.buf[je.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(je.buf[je.pos++]=127&Oe|((Oe>>>=7)?128:0),Oe&&(je.buf[je.pos++]=127&Oe)))))}(Ee,Y)}(k,this):(this.realloc(4),this.buf[this.pos++]=127&k|(k>127?128:0),k<=127||(this.buf[this.pos++]=127&(k>>>=7)|(k>127?128:0),k<=127||(this.buf[this.pos++]=127&(k>>>=7)|(k>127?128:0),k<=127||(this.buf[this.pos++]=k>>>7&127))))},writeSVarint:function(k){this.writeVarint(k<0?2*-k-1:2*k)},writeBoolean:function(k){this.writeVarint(!!k)},writeString:function(k){k=String(k),this.realloc(4*k.length),this.pos++;var D=this.pos;this.pos=function(le,Ee,Oe){for(var je,$e,ut=0;ut<Ee.length;ut++){if((je=Ee.charCodeAt(ut))>55295&&je<57344){if(!$e){je>56319||ut+1===Ee.length?(le[Oe++]=239,le[Oe++]=191,le[Oe++]=189):$e=je;continue}if(je<56320){le[Oe++]=239,le[Oe++]=191,le[Oe++]=189,$e=je;continue}je=$e-55296<<10|je-56320|65536,$e=null}else $e&&(le[Oe++]=239,le[Oe++]=191,le[Oe++]=189,$e=null);je<128?le[Oe++]=je:(je<2048?le[Oe++]=je>>6|192:(je<65536?le[Oe++]=je>>12|224:(le[Oe++]=je>>18|240,le[Oe++]=je>>12&63|128),le[Oe++]=je>>6&63|128),le[Oe++]=63&je|128)}return Oe}(this.buf,k,this.pos);var Y=this.pos-D;Y>=128&&Qf(D,Y,this),this.pos=D-1,this.writeVarint(Y),this.pos+=Y},writeFloat:function(k){this.realloc(4),Kf(this.buf,k,this.pos,!0,23,4),this.pos+=4},writeDouble:function(k){this.realloc(8),Kf(this.buf,k,this.pos,!0,52,8),this.pos+=8},writeBytes:function(k){var D=k.length;this.writeVarint(D),this.realloc(D);for(var Y=0;Y<D;Y++)this.buf[this.pos++]=k[Y]},writeRawMessage:function(k,D){this.pos++;var Y=this.pos;k(D,this);var le=this.pos-Y;le>=128&&Qf(Y,le,this),this.pos=Y-1,this.writeVarint(le),this.pos+=le},writeMessage:function(k,D,Y){this.writeTag(k,Ai.Bytes),this.writeRawMessage(D,Y)},writePackedVarint:function(k,D){D.length&&this.writeMessage(k,hd,D)},writePackedSVarint:function(k,D){D.length&&this.writeMessage(k,pd,D)},writePackedBoolean:function(k,D){D.length&&this.writeMessage(k,vd,D)},writePackedFloat:function(k,D){D.length&&this.writeMessage(k,dd,D)},writePackedDouble:function(k,D){D.length&&this.writeMessage(k,gd,D)},writePackedFixed32:function(k,D){D.length&&this.writeMessage(k,md,D)},writePackedSFixed32:function(k,D){D.length&&this.writeMessage(k,yd,D)},writePackedFixed64:function(k,D){D.length&&this.writeMessage(k,xd,D)},writePackedSFixed64:function(k,D){D.length&&this.writeMessage(k,bd,D)},writeBytesField:function(k,D){this.writeTag(k,Ai.Bytes),this.writeBytes(D)},writeFixed32Field:function(k,D){this.writeTag(k,Ai.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(k,D){this.writeTag(k,Ai.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(k,D){this.writeTag(k,Ai.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(k,D){this.writeTag(k,Ai.Fixed64),this.writeSFixed64(D)},writeVarintField:function(k,D){this.writeTag(k,Ai.Varint),this.writeVarint(D)},writeSVarintField:function(k,D){this.writeTag(k,Ai.Varint),this.writeSVarint(D)},writeStringField:function(k,D){this.writeTag(k,Ai.Bytes),this.writeString(D)},writeFloatField:function(k,D){this.writeTag(k,Ai.Fixed32),this.writeFloat(D)},writeDoubleField:function(k,D){this.writeTag(k,Ai.Fixed64),this.writeDouble(D)},writeBooleanField:function(k,D){this.writeVarintField(k,!!D)}};var Zc=3;function _d(k,D,Y){k===1&&Y.readMessage(wd,D)}function wd(k,D,Y){if(k===3){var le=Y.readMessage(Td,{}),Ee=le.id,Oe=le.bitmap,je=le.width,$e=le.height,ut=le.left,bt=le.top,Tt=le.advance;D.push({id:Ee,bitmap:new Pl({width:je+2*Zc,height:$e+2*Zc},Oe),metrics:{width:je,height:$e,left:ut,top:bt,advance:Tt}})}}function Td(k,D,Y){k===1?D.id=Y.readVarint():k===2?D.bitmap=Y.readBytes():k===3?D.width=Y.readVarint():k===4?D.height=Y.readVarint():k===5?D.left=Y.readSVarint():k===6?D.top=Y.readSVarint():k===7&&(D.advance=Y.readVarint())}var th=Zc;function nh(k){for(var D=0,Y=0,le=0,Ee=k;le<Ee.length;le+=1){var Oe=Ee[le];D+=Oe.w*Oe.h,Y=Math.max(Y,Oe.w)}k.sort(function(pn,zn){return zn.h-pn.h});for(var je=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(D/.95)),Y),h:1/0}],$e=0,ut=0,bt=0,Tt=k;bt<Tt.length;bt+=1)for(var Rt=Tt[bt],Ht=je.length-1;Ht>=0;Ht--){var Ut=je[Ht];if(!(Rt.w>Ut.w||Rt.h>Ut.h)){if(Rt.x=Ut.x,Rt.y=Ut.y,ut=Math.max(ut,Rt.y+Rt.h),$e=Math.max($e,Rt.x+Rt.w),Rt.w===Ut.w&&Rt.h===Ut.h){var on=je.pop();Ht<je.length&&(je[Ht]=on)}else Rt.h===Ut.h?(Ut.x+=Rt.w,Ut.w-=Rt.w):Rt.w===Ut.w?(Ut.y+=Rt.h,Ut.h-=Rt.h):(je.push({x:Ut.x+Rt.w,y:Ut.y,w:Ut.w-Rt.w,h:Rt.h}),Ut.y+=Rt.h,Ut.h-=Rt.h);break}}return{w:$e,h:ut,fill:D/($e*ut)||0}}var wo=1,ic=function(k,D){var Y=D.pixelRatio,le=D.version,Ee=D.stretchX,Oe=D.stretchY,je=D.content;this.paddedRect=k,this.pixelRatio=Y,this.stretchX=Ee,this.stretchY=Oe,this.content=je,this.version=le},Au={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Au.tl.get=function(){return[this.paddedRect.x+wo,this.paddedRect.y+wo]},Au.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-wo,this.paddedRect.y+this.paddedRect.h-wo]},Au.tlbr.get=function(){return this.tl.concat(this.br)},Au.displaySize.get=function(){return[(this.paddedRect.w-2*wo)/this.pixelRatio,(this.paddedRect.h-2*wo)/this.pixelRatio]},Object.defineProperties(ic.prototype,Au);var ku=function(k,D){var Y={},le={};this.haveRenderCallbacks=[];var Ee=[];this.addImages(k,Y,Ee),this.addImages(D,le,Ee);var Oe=nh(Ee),je=Oe.w,$e=Oe.h,ut=new so({width:je||1,height:$e||1});for(var bt in k){var Tt=k[bt],Rt=Y[bt].paddedRect;so.copy(Tt.data,ut,{x:0,y:0},{x:Rt.x+wo,y:Rt.y+wo},Tt.data)}for(var Ht in D){var Ut=D[Ht],on=le[Ht].paddedRect,pn=on.x+wo,zn=on.y+wo,Dn=Ut.data.width,Vn=Ut.data.height;so.copy(Ut.data,ut,{x:0,y:0},{x:pn,y:zn},Ut.data),so.copy(Ut.data,ut,{x:0,y:Vn-1},{x:pn,y:zn-1},{width:Dn,height:1}),so.copy(Ut.data,ut,{x:0,y:0},{x:pn,y:zn+Vn},{width:Dn,height:1}),so.copy(Ut.data,ut,{x:Dn-1,y:0},{x:pn-1,y:zn},{width:1,height:Vn}),so.copy(Ut.data,ut,{x:0,y:0},{x:pn+Dn,y:zn},{width:1,height:Vn})}this.image=ut,this.iconPositions=Y,this.patternPositions=le};ku.prototype.addImages=function(k,D,Y){for(var le in k){var Ee=k[le],Oe={x:0,y:0,w:Ee.data.width+2*wo,h:Ee.data.height+2*wo};Y.push(Oe),D[le]=new ic(Oe,Ee),Ee.hasRenderCallback&&this.haveRenderCallbacks.push(le)}},ku.prototype.patchUpdatedImages=function(k,D){for(var Y in k.dispatchRenderCallbacks(this.haveRenderCallbacks),k.updatedImages)this.patchUpdatedImage(this.iconPositions[Y],k.getImage(Y),D),this.patchUpdatedImage(this.patternPositions[Y],k.getImage(Y),D)},ku.prototype.patchUpdatedImage=function(k,D,Y){if(k&&D&&k.version!==D.version){k.version=D.version;var le=k.tl,Ee=le[0],Oe=le[1];Y.update(D.data,void 0,{x:Ee,y:Oe})}},Sr("ImagePosition",ic),Sr("ImageAtlas",ku);var Vo={horizontal:1,vertical:2,horizontalOnly:3},Su=-17,Xl=function(){this.scale=1,this.fontStack="",this.imageName=null};Xl.forText=function(k,D){var Y=new Xl;return Y.scale=k||1,Y.fontStack=D,Y},Xl.forImage=function(k){var D=new Xl;return D.imageName=k,D};var Ua=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ac(k,D,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn){var zn,Dn=Ua.fromFeature(k,Ee);Rt===Vo.vertical&&Dn.verticalizePunctuation();var Vn=Li.processBidirectionalText,Gn=Li.processStyledBidirectionalText;if(Vn&&Dn.sections.length===1){zn=[];for(var er=0,rr=Vn(Dn.toString(),Xc(Dn,bt,Oe,D,le,Ut,on));er<rr.length;er+=1){var cr=rr[er],br=new Ua;br.text=cr,br.sections=Dn.sections;for(var gr=0;gr<cr.length;gr++)br.sectionIndex.push(0);zn.push(br)}}else if(Gn){zn=[];for(var wr=0,Er=Gn(Dn.text,Dn.sectionIndex,Xc(Dn,bt,Oe,D,le,Ut,on));wr<Er.length;wr+=1){var Gr=Er[wr],Or=new Ua;Or.text=Gr[0],Or.sectionIndex=Gr[1],Or.sections=Dn.sections,zn.push(Or)}}else zn=function(Lr,$r){for(var qr=[],wi=Lr.text,Ur=0,gi=0,ki=$r;gi<ki.length;gi+=1){var Ei=ki[gi];qr.push(Lr.substring(Ur,Ei)),Ur=Ei}return Ur<wi.length&&qr.push(Lr.substring(Ur,wi.length)),qr}(Dn,Xc(Dn,bt,Oe,D,le,Ut,on));var Vr=[],Rr={positionedLines:Vr,text:Dn.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return function(Lr,$r,qr,wi,Ur,gi,ki,Ei,Ci,Ti,fa,zi){for(var ya=0,Ia=Su,ka=0,Ja=0,Sa=Ei==="right"?1:Ei==="left"?0:.5,da=0,Ea=0,xa=Ur;Ea<xa.length;Ea+=1){var ga=xa[Ea];ga.trim();var Yr=ga.getMaxScale(),ni=(Yr-1)*Aa,qi={positionedGlyphs:[],lineOffset:0};Lr.positionedLines[da]=qi;var xi=qi.positionedGlyphs,Ni=0;if(ga.length()){for(var Ii=0;Ii<ga.length();Ii++){var si=ga.getSection(Ii),Yi=ga.getSectionIndex(Ii),$a=ga.getCharCode(Ii),Mo=0,Va=null,zs=null,sl=null,ba=Aa,Rs=!(Ci===Vo.horizontal||!fa&&!ds($a)||fa&&(oc[$a]||sa($a)));if(si.imageName){var xs=wi[si.imageName];if(!xs)continue;sl=si.imageName,Lr.iconsInText=Lr.iconsInText||!0,zs=xs.paddedRect;var bs=xs.displaySize;si.scale=si.scale*Aa/zi,Va={width:bs[0],height:bs[1],left:wo,top:-th,advance:Rs?bs[1]:bs[0]},Mo=ni+(Aa-bs[1]*si.scale),ba=Va.advance;var zl=Rs?bs[0]*si.scale-Aa*Yr:bs[1]*si.scale-Aa*Yr;zl>0&&zl>Ni&&(Ni=zl)}else{var gc=qr[si.fontStack],Rl=gc&&gc[$a];if(Rl&&Rl.rect)zs=Rl.rect,Va=Rl.metrics;else{var vc=$r[si.fontStack],Pu=vc&&vc[$a];if(!Pu)continue;Va=Pu.metrics}Mo=(Yr-si.scale)*Aa}Rs?(Lr.verticalizable=!0,xi.push({glyph:$a,imageName:sl,x:ya,y:Ia+Mo,vertical:Rs,scale:si.scale,fontStack:si.fontStack,sectionIndex:Yi,metrics:Va,rect:zs}),ya+=ba*si.scale+Ti):(xi.push({glyph:$a,imageName:sl,x:ya,y:Ia+Mo,vertical:Rs,scale:si.scale,fontStack:si.fontStack,sectionIndex:Yi,metrics:Va,rect:zs}),ya+=Va.advance*si.scale+Ti)}if(xi.length!==0){var of=ya-Ti;ka=Math.max(of,ka),Ad(xi,0,xi.length-1,Sa,Ni)}ya=0;var mc=gi*Yr+Ni;qi.lineOffset=Math.max(Ni,ni),Ia+=mc,Ja=Math.max(mc,Ja),++da}else Ia+=gi,++da}var au=Ia-Su,yc=Kc(ki),xc=yc.horizontalAlign,Ou=yc.verticalAlign;(function(sf,Iu,Bl,ou,bc,_c,su,wc,Tc){var Du=(Iu-Bl)*bc,zu=0;zu=_c!==su?-wc*ou-Su:(-ou*Tc+.5)*su;for(var Fl=0,Ru=sf;Fl<Ru.length;Fl+=1)for(var Nl=0,Bu=Ru[Fl].positionedGlyphs;Nl<Bu.length;Nl+=1){var Fu=Bu[Nl];Fu.x+=Du,Fu.y+=zu}})(Lr.positionedLines,Sa,xc,Ou,ka,Ja,gi,au,Ur.length),Lr.top+=-Ou*au,Lr.bottom=Lr.top+au,Lr.left+=-xc*ka,Lr.right=Lr.left+ka}(Rr,D,Y,le,zn,je,$e,ut,Rt,bt,Ht,pn),!function(Lr){for(var $r=0,qr=Lr;$r<qr.length;$r+=1)if(qr[$r].positionedGlyphs.length!==0)return!1;return!0}(Vr)&&Rr}Ua.fromFeature=function(k,D){for(var Y=new Ua,le=0;le<k.sections.length;le++){var Ee=k.sections[le];Ee.image?Y.addImageSection(Ee):Y.addTextSection(Ee,D)}return Y},Ua.prototype.length=function(){return this.text.length},Ua.prototype.getSection=function(k){return this.sections[this.sectionIndex[k]]},Ua.prototype.getSectionIndex=function(k){return this.sectionIndex[k]},Ua.prototype.getCharCode=function(k){return this.text.charCodeAt(k)},Ua.prototype.verticalizePunctuation=function(){this.text=function(k){for(var D="",Y=0;Y<k.length;Y++){var le=k.charCodeAt(Y+1)||null,Ee=k.charCodeAt(Y-1)||null;le&&Ls(le)&&!Mu[k[Y+1]]||Ee&&Ls(Ee)&&!Mu[k[Y-1]]||!Mu[k[Y]]?D+=k[Y]:D+=Mu[k[Y]]}return D}(this.text)},Ua.prototype.trim=function(){for(var k=0,D=0;D<this.text.length&&oc[this.text.charCodeAt(D)];D++)k++;for(var Y=this.text.length,le=this.text.length-1;le>=0&&le>=k&&oc[this.text.charCodeAt(le)];le--)Y--;this.text=this.text.substring(k,Y),this.sectionIndex=this.sectionIndex.slice(k,Y)},Ua.prototype.substring=function(k,D){var Y=new Ua;return Y.text=this.text.substring(k,D),Y.sectionIndex=this.sectionIndex.slice(k,D),Y.sections=this.sections,Y},Ua.prototype.toString=function(){return this.text},Ua.prototype.getMaxScale=function(){var k=this;return this.sectionIndex.reduce(function(D,Y){return Math.max(D,k.sections[Y].scale)},0)},Ua.prototype.addTextSection=function(k,D){this.text+=k.text,this.sections.push(Xl.forText(k.scale,k.fontStack||D));for(var Y=this.sections.length-1,le=0;le<k.text.length;++le)this.sectionIndex.push(Y)},Ua.prototype.addImageSection=function(k){var D=k.image?k.image.name:"";if(D.length!==0){var Y=this.getNextImageSectionCharCode();Y?(this.text+=String.fromCharCode(Y),this.sections.push(Xl.forImage(D)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},Ua.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var oc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},To={};function rh(k,D,Y,le,Ee,Oe){if(D.imageName){var je=le[D.imageName];return je?je.displaySize[0]*D.scale*Aa/Oe+Ee:0}var $e=Y[D.fontStack],ut=$e&&$e[k];return ut?ut.metrics.advance*D.scale+Ee:0}function ih(k,D,Y,le){var Ee=Math.pow(k-D,2);return le?k<D?Ee/2:2*Ee:Ee+Math.abs(Y)*Y}function Md(k,D,Y){var le=0;return k===10&&(le-=1e4),Y&&(le+=150),k!==40&&k!==65288||(le+=50),D!==41&&D!==65289||(le+=50),le}function ah(k,D,Y,le,Ee,Oe){for(var je=null,$e=ih(D,Y,Ee,Oe),ut=0,bt=le;ut<bt.length;ut+=1){var Tt=bt[ut],Rt=ih(D-Tt.x,Y,Ee,Oe)+Tt.badness;Rt<=$e&&(je=Tt,$e=Rt)}return{index:k,x:D,priorBreak:je,badness:$e}}function oh(k){return k?oh(k.priorBreak).concat(k.index):[]}function Xc(k,D,Y,le,Ee,Oe,je){if(Oe!=="point")return[];if(!k)return[];for(var $e=[],ut=function(zn,Dn,Vn,Gn,er,rr){for(var cr=0,br=0;br<zn.length();br++){var gr=zn.getSection(br);cr+=rh(zn.getCharCode(br),gr,Gn,er,Dn,rr)}return cr/Math.max(1,Math.ceil(cr/Vn))}(k,D,Y,le,Ee,je),bt=k.text.indexOf("")>=0,Tt=0,Rt=0;Rt<k.length();Rt++){var Ht=k.getSection(Rt),Ut=k.getCharCode(Rt);if(oc[Ut]||(Tt+=rh(Ut,Ht,le,Ee,D,je)),Rt<k.length()-1){var on=!((pn=Ut)<11904||!(Tr["Bopomofo Extended"](pn)||Tr.Bopomofo(pn)||Tr["CJK Compatibility Forms"](pn)||Tr["CJK Compatibility Ideographs"](pn)||Tr["CJK Compatibility"](pn)||Tr["CJK Radicals Supplement"](pn)||Tr["CJK Strokes"](pn)||Tr["CJK Symbols and Punctuation"](pn)||Tr["CJK Unified Ideographs Extension A"](pn)||Tr["CJK Unified Ideographs"](pn)||Tr["Enclosed CJK Letters and Months"](pn)||Tr["Halfwidth and Fullwidth Forms"](pn)||Tr.Hiragana(pn)||Tr["Ideographic Description Characters"](pn)||Tr["Kangxi Radicals"](pn)||Tr["Katakana Phonetic Extensions"](pn)||Tr.Katakana(pn)||Tr["Vertical Forms"](pn)||Tr["Yi Radicals"](pn)||Tr["Yi Syllables"](pn)));(To[Ut]||on||Ht.imageName)&&$e.push(ah(Rt+1,Tt,ut,$e,Md(Ut,k.getCharCode(Rt+1),on&&bt),!1))}}var pn;return oh(ah(k.length(),Tt,ut,$e,0,!0))}function Kc(k){var D=.5,Y=.5;switch(k){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0}switch(k){case"bottom":case"bottom-right":case"bottom-left":Y=1;break;case"top":case"top-right":case"top-left":Y=0}return{horizontalAlign:D,verticalAlign:Y}}function Ad(k,D,Y,le,Ee){if(le||Ee)for(var Oe=k[Y],je=Oe.metrics.advance*Oe.scale,$e=(k[Y].x+je)*le,ut=D;ut<=Y;ut++)k[ut].x-=$e,k[ut].y+=Ee}function sh(k,D,Y,le,Ee,Oe){var je,$e=k.image;if($e.content){var ut=$e.content,bt=$e.pixelRatio||1;je=[ut[0]/bt,ut[1]/bt,$e.displaySize[0]-ut[2]/bt,$e.displaySize[1]-ut[3]/bt]}var Tt,Rt,Ht,Ut,on=D.left*Oe,pn=D.right*Oe;Y==="width"||Y==="both"?(Ut=Ee[0]+on-le[3],Rt=Ee[0]+pn+le[1]):Rt=(Ut=Ee[0]+(on+pn-$e.displaySize[0])/2)+$e.displaySize[0];var zn=D.top*Oe,Dn=D.bottom*Oe;return Y==="height"||Y==="both"?(Tt=Ee[1]+zn-le[0],Ht=Ee[1]+Dn+le[2]):Ht=(Tt=Ee[1]+(zn+Dn-$e.displaySize[1])/2)+$e.displaySize[1],{image:$e,top:Tt,right:Rt,bottom:Ht,left:Ut,collisionPadding:je}}To[10]=!0,To[32]=!0,To[38]=!0,To[40]=!0,To[41]=!0,To[43]=!0,To[45]=!0,To[47]=!0,To[173]=!0,To[183]=!0,To[8203]=!0,To[8208]=!0,To[8211]=!0,To[8231]=!0;var Kl=function(k){function D(Y,le,Ee,Oe){k.call(this,Y,le),this.angle=Ee,Oe!==void 0&&(this.segment=Oe)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(e);Sr("Anchor",Kl);var Ds=128;function Jc(k,D){var Y=D.expression;if(Y.kind==="constant")return{kind:"constant",layoutSize:Y.evaluate(new oi(k+1))};if(Y.kind==="source")return{kind:"source"};for(var le=Y.zoomStops,Ee=Y.interpolationType,Oe=0;Oe<le.length&&le[Oe]<=k;)Oe++;for(var je=Oe=Math.max(0,Oe-1);je<le.length&&le[je]<k+1;)je++;je=Math.min(le.length-1,je);var $e=le[Oe],ut=le[je];return Y.kind==="composite"?{kind:"composite",minZoom:$e,maxZoom:ut,interpolationType:Ee}:{kind:"camera",minZoom:$e,maxZoom:ut,minSize:Y.evaluate(new oi($e)),maxSize:Y.evaluate(new oi(ut)),interpolationType:Ee}}function lh(k,D,Y){var le=D.uSize,Ee=D.uSizeT,Oe=Y.lowerSize,je=Y.upperSize;return k.kind==="source"?Oe/Ds:k.kind==="composite"?bn(Oe/Ds,je/Ds,Ee):le}function uh(k,D){var Y=0,le=0;if(k.kind==="constant")le=k.layoutSize;else if(k.kind!=="source"){var Ee=k.interpolationType,Oe=k.minZoom,je=k.maxZoom,$e=Ee?s(Ri.interpolationFactor(Ee,D,Oe,je),0,1):0;k.kind==="camera"?le=bn(k.minSize,k.maxSize,$e):Y=$e}return{uSizeT:Y,uSize:le}}var kd=Object.freeze({__proto__:null,getSizeData:Jc,evaluateSizeForFeature:lh,evaluateSizeForZoom:uh,SIZE_PACK_FACTOR:Ds});function ch(k,D,Y,le,Ee){if(D.segment===void 0)return!0;for(var Oe=D,je=D.segment+1,$e=0;$e>-Y/2;){if(--je<0)return!1;$e-=k[je].dist(Oe),Oe=k[je]}$e+=k[je].dist(k[je+1]),je++;for(var ut=[],bt=0;$e<Y/2;){var Tt=k[je-1],Rt=k[je],Ht=k[je+1];if(!Ht)return!1;var Ut=Tt.angleTo(Rt)-Rt.angleTo(Ht);for(Ut=Math.abs((Ut+3*Math.PI)%(2*Math.PI)-Math.PI),ut.push({distance:$e,angleDelta:Ut}),bt+=Ut;$e-ut[0].distance>le;)bt-=ut.shift().angleDelta;if(bt>Ee)return!1;je++,$e+=Rt.dist(Ht)}return!0}function fh(k){for(var D=0,Y=0;Y<k.length-1;Y++)D+=k[Y].dist(k[Y+1]);return D}function hh(k,D,Y){return k?.6*D*Y:0}function ph(k,D){return Math.max(k?k.right-k.left:0,D?D.right-D.left:0)}function Sd(k,D,Y,le,Ee,Oe){for(var je=hh(Y,Ee,Oe),$e=ph(Y,le)*Oe,ut=0,bt=fh(k)/2,Tt=0;Tt<k.length-1;Tt++){var Rt=k[Tt],Ht=k[Tt+1],Ut=Rt.dist(Ht);if(ut+Ut>bt){var on=(bt-ut)/Ut,pn=bn(Rt.x,Ht.x,on),zn=bn(Rt.y,Ht.y,on),Dn=new Kl(pn,zn,Ht.angleTo(Rt),Tt);return Dn._round(),!je||ch(k,Dn,$e,je,D)?Dn:void 0}ut+=Ut}}function Ed(k,D,Y,le,Ee,Oe,je,$e,ut){var bt=hh(le,Oe,je),Tt=ph(le,Ee),Rt=Tt*je,Ht=k[0].x===0||k[0].x===ut||k[0].y===0||k[0].y===ut;return D-Rt<D/4&&(D=Rt+D/4),dh(k,Ht?D/2*$e%D:(Tt/2+2*Oe)*je*$e%D,D,bt,Y,Rt,Ht,!1,ut)}function dh(k,D,Y,le,Ee,Oe,je,$e,ut){for(var bt=Oe/2,Tt=fh(k),Rt=0,Ht=D-Y,Ut=[],on=0;on<k.length-1;on++){for(var pn=k[on],zn=k[on+1],Dn=pn.dist(zn),Vn=zn.angleTo(pn);Ht+Y<Rt+Dn;){var Gn=((Ht+=Y)-Rt)/Dn,er=bn(pn.x,zn.x,Gn),rr=bn(pn.y,zn.y,Gn);if(er>=0&&er<ut&&rr>=0&&rr<ut&&Ht-bt>=0&&Ht+bt<=Tt){var cr=new Kl(er,rr,Vn,on);cr._round(),le&&!ch(k,cr,Oe,le,Ee)||Ut.push(cr)}}Rt+=Dn}return $e||Ut.length||je||(Ut=dh(k,Rt/2,Y,le,Ee,Oe,je,!0,ut)),Ut}function gh(k,D,Y,le,Ee){for(var Oe=[],je=0;je<k.length;je++)for(var $e=k[je],ut=void 0,bt=0;bt<$e.length-1;bt++){var Tt=$e[bt],Rt=$e[bt+1];Tt.x<D&&Rt.x<D||(Tt.x<D?Tt=new e(D,Tt.y+(Rt.y-Tt.y)*((D-Tt.x)/(Rt.x-Tt.x)))._round():Rt.x<D&&(Rt=new e(D,Tt.y+(Rt.y-Tt.y)*((D-Tt.x)/(Rt.x-Tt.x)))._round()),Tt.y<Y&&Rt.y<Y||(Tt.y<Y?Tt=new e(Tt.x+(Rt.x-Tt.x)*((Y-Tt.y)/(Rt.y-Tt.y)),Y)._round():Rt.y<Y&&(Rt=new e(Tt.x+(Rt.x-Tt.x)*((Y-Tt.y)/(Rt.y-Tt.y)),Y)._round()),Tt.x>=le&&Rt.x>=le||(Tt.x>=le?Tt=new e(le,Tt.y+(Rt.y-Tt.y)*((le-Tt.x)/(Rt.x-Tt.x)))._round():Rt.x>=le&&(Rt=new e(le,Tt.y+(Rt.y-Tt.y)*((le-Tt.x)/(Rt.x-Tt.x)))._round()),Tt.y>=Ee&&Rt.y>=Ee||(Tt.y>=Ee?Tt=new e(Tt.x+(Rt.x-Tt.x)*((Ee-Tt.y)/(Rt.y-Tt.y)),Ee)._round():Rt.y>=Ee&&(Rt=new e(Tt.x+(Rt.x-Tt.x)*((Ee-Tt.y)/(Rt.y-Tt.y)),Ee)._round()),ut&&Tt.equals(ut[ut.length-1])||(ut=[Tt],Oe.push(ut)),ut.push(Rt)))))}return Oe}var Jl=wo;function vh(k,D,Y,le){var Ee=[],Oe=k.image,je=Oe.pixelRatio,$e=Oe.paddedRect.w-2*Jl,ut=Oe.paddedRect.h-2*Jl,bt=k.right-k.left,Tt=k.bottom-k.top,Rt=Oe.stretchX||[[0,$e]],Ht=Oe.stretchY||[[0,ut]],Ut=function(gi,ki){return gi+ki[1]-ki[0]},on=Rt.reduce(Ut,0),pn=Ht.reduce(Ut,0),zn=$e-on,Dn=ut-pn,Vn=0,Gn=on,er=0,rr=pn,cr=0,br=zn,gr=0,wr=Dn;if(Oe.content&&le){var Er=Oe.content;Vn=sc(Rt,0,Er[0]),er=sc(Ht,0,Er[1]),Gn=sc(Rt,Er[0],Er[2]),rr=sc(Ht,Er[1],Er[3]),cr=Er[0]-Vn,gr=Er[1]-er,br=Er[2]-Er[0]-Gn,wr=Er[3]-Er[1]-rr}var Gr=function(gi,ki,Ei,Ci){var Ti=lc(gi.stretch-Vn,Gn,bt,k.left),fa=uc(gi.fixed-cr,br,gi.stretch,on),zi=lc(ki.stretch-er,rr,Tt,k.top),ya=uc(ki.fixed-gr,wr,ki.stretch,pn),Ia=lc(Ei.stretch-Vn,Gn,bt,k.left),ka=uc(Ei.fixed-cr,br,Ei.stretch,on),Ja=lc(Ci.stretch-er,rr,Tt,k.top),Sa=uc(Ci.fixed-gr,wr,Ci.stretch,pn),da=new e(Ti,zi),Ea=new e(Ia,zi),xa=new e(Ia,Ja),ga=new e(Ti,Ja),Yr=new e(fa/je,ya/je),ni=new e(ka/je,Sa/je),qi=D*Math.PI/180;if(qi){var xi=Math.sin(qi),Ni=Math.cos(qi),Ii=[Ni,-xi,xi,Ni];da._matMult(Ii),Ea._matMult(Ii),ga._matMult(Ii),xa._matMult(Ii)}var si=gi.stretch+gi.fixed,Yi=Ei.stretch+Ei.fixed,$a=ki.stretch+ki.fixed,Mo=Ci.stretch+Ci.fixed;return{tl:da,tr:Ea,bl:ga,br:xa,tex:{x:Oe.paddedRect.x+Jl+si,y:Oe.paddedRect.y+Jl+$a,w:Yi-si,h:Mo-$a},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Yr,pixelOffsetBR:ni,minFontScaleX:br/je/bt,minFontScaleY:wr/je/Tt,isSDF:Y}};if(le&&(Oe.stretchX||Oe.stretchY))for(var Or=mh(Rt,zn,on),Vr=mh(Ht,Dn,pn),Rr=0;Rr<Or.length-1;Rr++)for(var Lr=Or[Rr],$r=Or[Rr+1],qr=0;qr<Vr.length-1;qr++){var wi=Vr[qr],Ur=Vr[qr+1];Ee.push(Gr(Lr,wi,$r,Ur))}else Ee.push(Gr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:$e+1},{fixed:0,stretch:ut+1}));return Ee}function sc(k,D,Y){for(var le=0,Ee=0,Oe=k;Ee<Oe.length;Ee+=1){var je=Oe[Ee];le+=Math.max(D,Math.min(Y,je[1]))-Math.max(D,Math.min(Y,je[0]))}return le}function mh(k,D,Y){for(var le=[{fixed:-Jl,stretch:0}],Ee=0,Oe=k;Ee<Oe.length;Ee+=1){var je=Oe[Ee],$e=je[0],ut=je[1],bt=le[le.length-1];le.push({fixed:$e-bt.stretch,stretch:bt.stretch}),le.push({fixed:$e-bt.stretch,stretch:bt.stretch+(ut-$e)})}return le.push({fixed:D+Jl,stretch:Y}),le}function lc(k,D,Y,le){return k/D*Y+le}function uc(k,D,Y,le){return k-D*Y/le}var cc=function(k,D,Y,le,Ee,Oe,je,$e,ut,bt){if(this.boxStartIndex=k.length,ut){var Tt=Oe.top,Rt=Oe.bottom,Ht=Oe.collisionPadding;Ht&&(Tt-=Ht[1],Rt+=Ht[3]);var Ut=Rt-Tt;Ut>0&&(Ut=Math.max(10,Ut),this.circleDiameter=Ut)}else{var on=Oe.top*je-$e,pn=Oe.bottom*je+$e,zn=Oe.left*je-$e,Dn=Oe.right*je+$e,Vn=Oe.collisionPadding;if(Vn&&(zn-=Vn[0]*je,on-=Vn[1]*je,Dn+=Vn[2]*je,pn+=Vn[3]*je),bt){var Gn=new e(zn,on),er=new e(Dn,on),rr=new e(zn,pn),cr=new e(Dn,pn),br=bt*Math.PI/180;Gn._rotate(br),er._rotate(br),rr._rotate(br),cr._rotate(br),zn=Math.min(Gn.x,er.x,rr.x,cr.x),Dn=Math.max(Gn.x,er.x,rr.x,cr.x),on=Math.min(Gn.y,er.y,rr.y,cr.y),pn=Math.max(Gn.y,er.y,rr.y,cr.y)}k.emplaceBack(D.x,D.y,zn,on,Dn,pn,Y,le,Ee)}this.boxEndIndex=k.length},$l=function(k,D){if(k===void 0&&(k=[]),D===void 0&&(D=Cd),this.data=k,this.length=this.data.length,this.compare=D,this.length>0)for(var Y=(this.length>>1)-1;Y>=0;Y--)this._down(Y)};function Cd(k,D){return k<D?-1:k>D?1:0}function Ld(k,D,Y){D===void 0&&(D=1),Y===void 0&&(Y=!1);for(var le=1/0,Ee=1/0,Oe=-1/0,je=-1/0,$e=k[0],ut=0;ut<$e.length;ut++){var bt=$e[ut];(!ut||bt.x<le)&&(le=bt.x),(!ut||bt.y<Ee)&&(Ee=bt.y),(!ut||bt.x>Oe)&&(Oe=bt.x),(!ut||bt.y>je)&&(je=bt.y)}var Tt=Oe-le,Rt=je-Ee,Ht=Math.min(Tt,Rt),Ut=Ht/2,on=new $l([],Pd);if(Ht===0)return new e(le,Ee);for(var pn=le;pn<Oe;pn+=Ht)for(var zn=Ee;zn<je;zn+=Ht)on.push(new Ql(pn+Ut,zn+Ut,Ut,k));for(var Dn=function(er){for(var rr=0,cr=0,br=0,gr=er[0],wr=0,Er=gr.length,Gr=Er-1;wr<Er;Gr=wr++){var Or=gr[wr],Vr=gr[Gr],Rr=Or.x*Vr.y-Vr.x*Or.y;cr+=(Or.x+Vr.x)*Rr,br+=(Or.y+Vr.y)*Rr,rr+=3*Rr}return new Ql(cr/rr,br/rr,0,er)}(k),Vn=on.length;on.length;){var Gn=on.pop();(Gn.d>Dn.d||!Dn.d)&&(Dn=Gn,Y&&console.log("found best %d after %d probes",Math.round(1e4*Gn.d)/1e4,Vn)),Gn.max-Dn.d<=D||(Ut=Gn.h/2,on.push(new Ql(Gn.p.x-Ut,Gn.p.y-Ut,Ut,k)),on.push(new Ql(Gn.p.x+Ut,Gn.p.y-Ut,Ut,k)),on.push(new Ql(Gn.p.x-Ut,Gn.p.y+Ut,Ut,k)),on.push(new Ql(Gn.p.x+Ut,Gn.p.y+Ut,Ut,k)),Vn+=4)}return Y&&(console.log("num probes: "+Vn),console.log("best distance: "+Dn.d)),Dn.p}function Pd(k,D){return D.max-k.max}function Ql(k,D,Y,le){this.p=new e(k,D),this.h=Y,this.d=function(Ee,Oe){for(var je=!1,$e=1/0,ut=0;ut<Oe.length;ut++)for(var bt=Oe[ut],Tt=0,Rt=bt.length,Ht=Rt-1;Tt<Rt;Ht=Tt++){var Ut=bt[Tt],on=bt[Ht];Ut.y>Ee.y!=on.y>Ee.y&&Ee.x<(on.x-Ut.x)*(Ee.y-Ut.y)/(on.y-Ut.y)+Ut.x&&(je=!je),$e=Math.min($e,Ll(Ee,Ut,on))}return(je?1:-1)*Math.sqrt($e)}(this.p,le),this.max=this.d+this.h*Math.SQRT2}$l.prototype.push=function(k){this.data.push(k),this.length++,this._up(this.length-1)},$l.prototype.pop=function(){if(this.length!==0){var k=this.data[0],D=this.data.pop();return this.length--,this.length>0&&(this.data[0]=D,this._down(0)),k}},$l.prototype.peek=function(){return this.data[0]},$l.prototype._up=function(k){for(var D=this.data,Y=this.compare,le=D[k];k>0;){var Ee=k-1>>1,Oe=D[Ee];if(Y(le,Oe)>=0)break;D[k]=Oe,k=Ee}D[k]=le},$l.prototype._down=function(k){for(var D=this.data,Y=this.compare,le=this.length>>1,Ee=D[k];k<le;){var Oe=1+(k<<1),je=D[Oe],$e=Oe+1;if($e<this.length&&Y(D[$e],je)<0&&(Oe=$e,je=D[$e]),Y(je,Ee)>=0)break;D[k]=je,k=Oe}D[k]=Ee};var eu=7,$c=Number.POSITIVE_INFINITY;function yh(k,D){return D[1]!==$c?function(Y,le,Ee){var Oe=0,je=0;switch(le=Math.abs(le),Ee=Math.abs(Ee),Y){case"top-right":case"top-left":case"top":je=Ee-eu;break;case"bottom-right":case"bottom-left":case"bottom":je=-Ee+eu}switch(Y){case"top-right":case"bottom-right":case"right":Oe=-le;break;case"top-left":case"bottom-left":case"left":Oe=le}return[Oe,je]}(k,D[0],D[1]):function(Y,le){var Ee=0,Oe=0;le<0&&(le=0);var je=le/Math.sqrt(2);switch(Y){case"top-right":case"top-left":Oe=je-eu;break;case"bottom-right":case"bottom-left":Oe=-je+eu;break;case"bottom":Oe=-le+eu;break;case"top":Oe=le-eu}switch(Y){case"top-right":case"bottom-right":Ee=-je;break;case"top-left":case"bottom-left":Ee=je;break;case"left":Ee=le;break;case"right":Ee=-le}return[Ee,Oe]}(k,D[0])}function Qc(k){switch(k){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var Eu=255,Tl=Eu*Ds;function xh(k,D,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on){var pn=function(er,rr,cr,br,gr,wr,Er,Gr){for(var Or=br.layout.get("text-rotate").evaluate(wr,{})*Math.PI/180,Vr=[],Rr=0,Lr=rr.positionedLines;Rr<Lr.length;Rr+=1)for(var $r=Lr[Rr],qr=0,wi=$r.positionedGlyphs;qr<wi.length;qr+=1){var Ur=wi[qr];if(Ur.rect){var gi=Ur.rect||{},ki=th+1,Ei=!0,Ci=1,Ti=0,fa=(gr||Gr)&&Ur.vertical,zi=Ur.metrics.advance*Ur.scale/2;if(Gr&&rr.verticalizable){var ya=(Ur.scale-1)*Aa,Ia=(Aa-Ur.metrics.width*Ur.scale)/2;Ti=$r.lineOffset/2-(Ur.imageName?-Ia:ya)}if(Ur.imageName){var ka=Er[Ur.imageName];Ei=ka.sdf,Ci=ka.pixelRatio,ki=wo/Ci}var Ja=gr?[Ur.x+zi,Ur.y]:[0,0],Sa=gr?[0,0]:[Ur.x+zi+cr[0],Ur.y+cr[1]-Ti],da=[0,0];fa&&(da=Sa,Sa=[0,0]);var Ea=(Ur.metrics.left-ki)*Ur.scale-zi+Sa[0],xa=(-Ur.metrics.top-ki)*Ur.scale+Sa[1],ga=Ea+gi.w*Ur.scale/Ci,Yr=xa+gi.h*Ur.scale/Ci,ni=new e(Ea,xa),qi=new e(ga,xa),xi=new e(Ea,Yr),Ni=new e(ga,Yr);if(fa){var Ii=new e(-zi,zi-Su),si=-Math.PI/2,Yi=Aa/2-zi,$a=Ur.imageName?Yi:0,Mo=new e(5-Su-Yi,-$a),Va=new(Function.prototype.bind.apply(e,[null].concat(da)));ni._rotateAround(si,Ii)._add(Mo)._add(Va),qi._rotateAround(si,Ii)._add(Mo)._add(Va),xi._rotateAround(si,Ii)._add(Mo)._add(Va),Ni._rotateAround(si,Ii)._add(Mo)._add(Va)}if(Or){var zs=Math.sin(Or),sl=Math.cos(Or),ba=[sl,-zs,zs,sl];ni._matMult(ba),qi._matMult(ba),xi._matMult(ba),Ni._matMult(ba)}var Rs=new e(0,0),xs=new e(0,0);Vr.push({tl:ni,tr:qi,bl:xi,br:Ni,tex:gi,writingMode:rr.writingMode,glyphOffset:Ja,sectionIndex:Ur.sectionIndex,isSDF:Ei,pixelOffsetTL:Rs,pixelOffsetBR:xs,minFontScaleX:0,minFontScaleY:0})}}return Vr}(0,Y,$e,Ee,Oe,je,le,k.allowVerticalPlacement),zn=k.textSizeData,Dn=null;zn.kind==="source"?(Dn=[Ds*Ee.layout.get("text-size").evaluate(je,{})])[0]>Tl&&S(k.layerIds[0]+': Value for "text-size" is >= '+Eu+'. Reduce your "text-size".'):zn.kind==="composite"&&((Dn=[Ds*Ut.compositeTextSizes[0].evaluate(je,{},on),Ds*Ut.compositeTextSizes[1].evaluate(je,{},on)])[0]>Tl||Dn[1]>Tl)&&S(k.layerIds[0]+': Value for "text-size" is >= '+Eu+'. Reduce your "text-size".'),k.addSymbols(k.text,pn,Dn,$e,Oe,je,bt,D,ut.lineStartIndex,ut.lineLength,Ht,on);for(var Vn=0,Gn=Tt;Vn<Gn.length;Vn+=1)Rt[Gn[Vn]]=k.text.placedSymbolArray.length-1;return 4*pn.length}function bh(k){for(var D in k)return k[D];return null}function Od(k,D,Y,le){var Ee=k.compareText;if(D in Ee){for(var Oe=Ee[D],je=Oe.length-1;je>=0;je--)if(le.dist(Oe[je])<Y)return!0}else Ee[D]=[];return Ee[D].push(le),!1}var Id=ql.VectorTileFeature.types,Dd=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fc(k,D,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht){var Ut=$e?Math.min(Tl,Math.round($e[0])):0,on=$e?Math.min(Tl,Math.round($e[1])):0;k.emplaceBack(D,Y,Math.round(32*le),Math.round(32*Ee),Oe,je,(Ut<<1)+(ut?1:0),on,16*bt,16*Tt,256*Rt,256*Ht)}function ef(k,D,Y){k.emplaceBack(D.x,D.y,Y),k.emplaceBack(D.x,D.y,Y),k.emplaceBack(D.x,D.y,Y),k.emplaceBack(D.x,D.y,Y)}function zd(k){for(var D=0,Y=k.sections;D<Y.length;D+=1)if(Pa(Y[D].text))return!0;return!1}var tu=function(k){this.layoutVertexArray=new R,this.indexArray=new ee,this.programConfigurations=k,this.segments=new kn,this.dynamicLayoutVertexArray=new U,this.opacityVertexArray=new j,this.placedSymbolArray=new Dt};tu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},tu.prototype.upload=function(k,D,Y,le){this.isEmpty()||(Y&&(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,qc.members),this.indexBuffer=k.createIndexBuffer(this.indexArray,D),this.dynamicLayoutVertexBuffer=k.createVertexBuffer(this.dynamicLayoutVertexArray,ld.members,!0),this.opacityVertexBuffer=k.createVertexBuffer(this.opacityVertexArray,Dd,!0),this.opacityVertexBuffer.itemSize=1),(Y||le)&&this.programConfigurations.upload(k))},tu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Sr("SymbolBuffers",tu);var Cu=function(k,D,Y){this.layoutVertexArray=new k,this.layoutAttributes=D,this.indexArray=new Y,this.segments=new kn,this.collisionVertexArray=new B};Cu.prototype.upload=function(k){this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=k.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=k.createVertexBuffer(this.collisionVertexArray,ud.members,!0)},Cu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Sr("CollisionBuffers",Cu);var di=function(k){this.collisionBoxArray=k.collisionBoxArray,this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(je){return je.id}),this.index=k.index,this.pixelRatio=k.pixelRatio,this.sourceLayerIndex=k.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zc([]),this.placementViewportMatrix=zc([]);var D=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Jc(this.zoom,D["text-size"]),this.iconSizeData=Jc(this.zoom,D["icon-size"]);var Y=this.layers[0].layout,le=Y.get("symbol-sort-key"),Ee=Y.get("symbol-z-order");this.sortFeaturesByKey=Ee!=="viewport-y"&&le.constantOr(1)!==void 0;var Oe=Ee==="viewport-y"||Ee==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Oe&&(Y.get("text-allow-overlap")||Y.get("icon-allow-overlap")||Y.get("text-ignore-placement")||Y.get("icon-ignore-placement")),Y.get("symbol-placement")==="point"&&(this.writingModes=Y.get("text-writing-mode").map(function(je){return Vo[je]})),this.stateDependentLayerIds=this.layers.filter(function(je){return je.isStateDependent()}).map(function(je){return je.id}),this.sourceID=k.sourceID};di.prototype.createArrays=function(){this.text=new tu(new _i(qc.members,this.layers,this.zoom,function(k){return/^text/.test(k)})),this.icon=new tu(new _i(qc.members,this.layers,this.zoom,function(k){return/^icon/.test(k)})),this.glyphOffsetArray=new It,this.lineVertexArray=new sn,this.symbolInstances=new Vt},di.prototype.calculateGlyphDependencies=function(k,D,Y,le,Ee){for(var Oe=0;Oe<k.length;Oe++)if(D[k.charCodeAt(Oe)]=!0,(Y||le)&&Ee){var je=Mu[k.charAt(Oe)];je&&(D[je.charCodeAt(0)]=!0)}},di.prototype.populate=function(k,D,Y){var le=this.layers[0],Ee=le.layout,Oe=Ee.get("text-font"),je=Ee.get("text-field"),$e=Ee.get("icon-image"),ut=(je.value.kind!=="constant"||je.value.value instanceof Nn&&!je.value.value.isEmpty()||je.value.value.toString().length>0)&&(Oe.value.kind!=="constant"||Oe.value.value.length>0),bt=$e.value.kind!=="constant"||!!$e.value.value||Object.keys($e.parameters).length>0,Tt=Ee.get("symbol-sort-key");if(this.features=[],ut||bt){for(var Rt=D.iconDependencies,Ht=D.glyphDependencies,Ut=D.availableImages,on=new oi(this.zoom),pn=0,zn=k;pn<zn.length;pn+=1){var Dn=zn[pn],Vn=Dn.feature,Gn=Dn.id,er=Dn.index,rr=Dn.sourceLayerIndex,cr=le._featureFilter.needGeometry,br={type:Vn.type,id:Gn,properties:Vn.properties,geometry:cr?ja(Vn):[]};if(le._featureFilter.filter(on,br,Y)){cr||(br.geometry=ja(Vn));var gr=void 0;if(ut){var wr=le.getValueAndResolveTokens("text-field",br,Y,Ut),Er=Nn.factory(wr);zd(Er)&&(this.hasRTLText=!0),(!this.hasRTLText||io()==="unavailable"||this.hasRTLText&&Li.isParsed())&&(gr=fd(Er,le,br))}var Gr=void 0;if(bt){var Or=le.getValueAndResolveTokens("icon-image",br,Y,Ut);Gr=Or instanceof _n?Or:_n.fromString(Or)}if(gr||Gr){var Vr=this.sortFeaturesByKey?Tt.evaluate(br,{},Y):void 0,Rr={id:Gn,text:gr,icon:Gr,index:er,sourceLayerIndex:rr,geometry:ja(Vn),properties:Vn.properties,type:Id[Vn.type],sortKey:Vr};if(this.features.push(Rr),Gr&&(Rt[Gr.name]=!0),gr){var Lr=Oe.evaluate(br,{},Y).join(","),$r=Ee.get("text-rotation-alignment")==="map"&&Ee.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Vo.vertical)>=0;for(var qr=0,wi=gr.sections;qr<wi.length;qr+=1){var Ur=wi[qr];if(Ur.image)Rt[Ur.image.name]=!0;else{var gi=Ya(gr.toString()),ki=Ur.fontStack||Lr,Ei=Ht[ki]=Ht[ki]||{};this.calculateGlyphDependencies(Ur.text,Ei,$r,this.allowVerticalPlacement,gi)}}}}}}Ee.get("symbol-placement")==="line"&&(this.features=function(Ci){var Ti={},fa={},zi=[],ya=0;function Ia(Ni){zi.push(Ci[Ni]),ya++}function ka(Ni,Ii,si){var Yi=fa[Ni];return delete fa[Ni],fa[Ii]=Yi,zi[Yi].geometry[0].pop(),zi[Yi].geometry[0]=zi[Yi].geometry[0].concat(si[0]),Yi}function Ja(Ni,Ii,si){var Yi=Ti[Ii];return delete Ti[Ii],Ti[Ni]=Yi,zi[Yi].geometry[0].shift(),zi[Yi].geometry[0]=si[0].concat(zi[Yi].geometry[0]),Yi}function Sa(Ni,Ii,si){var Yi=si?Ii[0][Ii[0].length-1]:Ii[0][0];return Ni+":"+Yi.x+":"+Yi.y}for(var da=0;da<Ci.length;da++){var Ea=Ci[da],xa=Ea.geometry,ga=Ea.text?Ea.text.toString():null;if(ga){var Yr=Sa(ga,xa),ni=Sa(ga,xa,!0);if(Yr in fa&&ni in Ti&&fa[Yr]!==Ti[ni]){var qi=Ja(Yr,ni,xa),xi=ka(Yr,ni,zi[qi].geometry);delete Ti[Yr],delete fa[ni],fa[Sa(ga,zi[xi].geometry,!0)]=xi,zi[qi].geometry=null}else Yr in fa?ka(Yr,ni,xa):ni in Ti?Ja(Yr,ni,xa):(Ia(da),Ti[Yr]=ya-1,fa[ni]=ya-1)}else Ia(da)}return zi.filter(function(Ni){return Ni.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Ci,Ti){return Ci.sortKey-Ti.sortKey})}},di.prototype.update=function(k,D,Y){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(k,D,this.layers,Y),this.icon.programConfigurations.updatePaintArrays(k,D,this.layers,Y))},di.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},di.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},di.prototype.upload=function(k){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(k),this.iconCollisionBox.upload(k)),this.text.upload(k,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(k,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},di.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},di.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},di.prototype.addToLineVertexArray=function(k,D){var Y=this.lineVertexArray.length;if(k.segment!==void 0){for(var le=k.dist(D[k.segment+1]),Ee=k.dist(D[k.segment]),Oe={},je=k.segment+1;je<D.length;je++)Oe[je]={x:D[je].x,y:D[je].y,tileUnitDistanceFromAnchor:le},je<D.length-1&&(le+=D[je+1].dist(D[je]));for(var $e=k.segment||0;$e>=0;$e--)Oe[$e]={x:D[$e].x,y:D[$e].y,tileUnitDistanceFromAnchor:Ee},$e>0&&(Ee+=D[$e-1].dist(D[$e]));for(var ut=0;ut<D.length;ut++){var bt=Oe[ut];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:Y,lineLength:this.lineVertexArray.length-Y}},di.prototype.addSymbols=function(k,D,Y,le,Ee,Oe,je,$e,ut,bt,Tt,Rt){for(var Ht=k.indexArray,Ut=k.layoutVertexArray,on=k.segments.prepareSegment(4*D.length,Ut,Ht,Oe.sortKey),pn=this.glyphOffsetArray.length,zn=on.vertexLength,Dn=this.allowVerticalPlacement&&je===Vo.vertical?Math.PI/2:0,Vn=Oe.text&&Oe.text.sections,Gn=0;Gn<D.length;Gn++){var er=D[Gn],rr=er.tl,cr=er.tr,br=er.bl,gr=er.br,wr=er.tex,Er=er.pixelOffsetTL,Gr=er.pixelOffsetBR,Or=er.minFontScaleX,Vr=er.minFontScaleY,Rr=er.glyphOffset,Lr=er.isSDF,$r=er.sectionIndex,qr=on.vertexLength,wi=Rr[1];fc(Ut,$e.x,$e.y,rr.x,wi+rr.y,wr.x,wr.y,Y,Lr,Er.x,Er.y,Or,Vr),fc(Ut,$e.x,$e.y,cr.x,wi+cr.y,wr.x+wr.w,wr.y,Y,Lr,Gr.x,Er.y,Or,Vr),fc(Ut,$e.x,$e.y,br.x,wi+br.y,wr.x,wr.y+wr.h,Y,Lr,Er.x,Gr.y,Or,Vr),fc(Ut,$e.x,$e.y,gr.x,wi+gr.y,wr.x+wr.w,wr.y+wr.h,Y,Lr,Gr.x,Gr.y,Or,Vr),ef(k.dynamicLayoutVertexArray,$e,Dn),Ht.emplaceBack(qr,qr+1,qr+2),Ht.emplaceBack(qr+1,qr+2,qr+3),on.vertexLength+=4,on.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Rr[0]),Gn!==D.length-1&&$r===D[Gn+1].sectionIndex||k.programConfigurations.populatePaintArrays(Ut.length,Oe,Oe.index,{},Rt,Vn&&Vn[$r])}k.placedSymbolArray.emplaceBack($e.x,$e.y,pn,this.glyphOffsetArray.length-pn,zn,ut,bt,$e.segment,Y?Y[0]:0,Y?Y[1]:0,le[0],le[1],je,0,!1,0,Tt)},di.prototype._addCollisionDebugVertex=function(k,D,Y,le,Ee,Oe){return D.emplaceBack(0,0),k.emplaceBack(Y.x,Y.y,le,Ee,Math.round(Oe.x),Math.round(Oe.y))},di.prototype.addCollisionDebugVertices=function(k,D,Y,le,Ee,Oe,je){var $e=Ee.segments.prepareSegment(4,Ee.layoutVertexArray,Ee.indexArray),ut=$e.vertexLength,bt=Ee.layoutVertexArray,Tt=Ee.collisionVertexArray,Rt=je.anchorX,Ht=je.anchorY;this._addCollisionDebugVertex(bt,Tt,Oe,Rt,Ht,new e(k,D)),this._addCollisionDebugVertex(bt,Tt,Oe,Rt,Ht,new e(Y,D)),this._addCollisionDebugVertex(bt,Tt,Oe,Rt,Ht,new e(Y,le)),this._addCollisionDebugVertex(bt,Tt,Oe,Rt,Ht,new e(k,le)),$e.vertexLength+=4;var Ut=Ee.indexArray;Ut.emplaceBack(ut,ut+1),Ut.emplaceBack(ut+1,ut+2),Ut.emplaceBack(ut+2,ut+3),Ut.emplaceBack(ut+3,ut),$e.primitiveLength+=4},di.prototype.addDebugCollisionBoxes=function(k,D,Y,le){for(var Ee=k;Ee<D;Ee++){var Oe=this.collisionBoxArray.get(Ee),je=Oe.x1,$e=Oe.y1,ut=Oe.x2,bt=Oe.y2;this.addCollisionDebugVertices(je,$e,ut,bt,le?this.textCollisionBox:this.iconCollisionBox,Oe.anchorPoint,Y)}},di.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Cu(pe,Zf.members,Ue),this.iconCollisionBox=new Cu(pe,Zf.members,Ue);for(var k=0;k<this.symbolInstances.length;k++){var D=this.symbolInstances.get(k);this.addDebugCollisionBoxes(D.textBoxStartIndex,D.textBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.verticalTextBoxStartIndex,D.verticalTextBoxEndIndex,D,!0),this.addDebugCollisionBoxes(D.iconBoxStartIndex,D.iconBoxEndIndex,D,!1),this.addDebugCollisionBoxes(D.verticalIconBoxStartIndex,D.verticalIconBoxEndIndex,D,!1)}},di.prototype._deserializeCollisionBoxesForSymbol=function(k,D,Y,le,Ee,Oe,je,$e,ut){for(var bt={},Tt=D;Tt<Y;Tt++){var Rt=k.get(Tt);bt.textBox={x1:Rt.x1,y1:Rt.y1,x2:Rt.x2,y2:Rt.y2,anchorPointX:Rt.anchorPointX,anchorPointY:Rt.anchorPointY},bt.textFeatureIndex=Rt.featureIndex;break}for(var Ht=le;Ht<Ee;Ht++){var Ut=k.get(Ht);bt.verticalTextBox={x1:Ut.x1,y1:Ut.y1,x2:Ut.x2,y2:Ut.y2,anchorPointX:Ut.anchorPointX,anchorPointY:Ut.anchorPointY},bt.verticalTextFeatureIndex=Ut.featureIndex;break}for(var on=Oe;on<je;on++){var pn=k.get(on);bt.iconBox={x1:pn.x1,y1:pn.y1,x2:pn.x2,y2:pn.y2,anchorPointX:pn.anchorPointX,anchorPointY:pn.anchorPointY},bt.iconFeatureIndex=pn.featureIndex;break}for(var zn=$e;zn<ut;zn++){var Dn=k.get(zn);bt.verticalIconBox={x1:Dn.x1,y1:Dn.y1,x2:Dn.x2,y2:Dn.y2,anchorPointX:Dn.anchorPointX,anchorPointY:Dn.anchorPointY},bt.verticalIconFeatureIndex=Dn.featureIndex;break}return bt},di.prototype.deserializeCollisionBoxes=function(k){this.collisionArrays=[];for(var D=0;D<this.symbolInstances.length;D++){var Y=this.symbolInstances.get(D);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(k,Y.textBoxStartIndex,Y.textBoxEndIndex,Y.verticalTextBoxStartIndex,Y.verticalTextBoxEndIndex,Y.iconBoxStartIndex,Y.iconBoxEndIndex,Y.verticalIconBoxStartIndex,Y.verticalIconBoxEndIndex))}},di.prototype.hasTextData=function(){return this.text.segments.get().length>0},di.prototype.hasIconData=function(){return this.icon.segments.get().length>0},di.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},di.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},di.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},di.prototype.addIndicesForPlacedSymbol=function(k,D){for(var Y=k.placedSymbolArray.get(D),le=Y.vertexStartIndex+4*Y.numGlyphs,Ee=Y.vertexStartIndex;Ee<le;Ee+=4)k.indexArray.emplaceBack(Ee,Ee+1,Ee+2),k.indexArray.emplaceBack(Ee+1,Ee+2,Ee+3)},di.prototype.getSortedSymbolIndexes=function(k){if(this.sortedAngle===k&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var D=Math.sin(k),Y=Math.cos(k),le=[],Ee=[],Oe=[],je=0;je<this.symbolInstances.length;++je){Oe.push(je);var $e=this.symbolInstances.get(je);le.push(0|Math.round(D*$e.anchorX+Y*$e.anchorY)),Ee.push($e.featureIndex)}return Oe.sort(function(ut,bt){return le[ut]-le[bt]||Ee[bt]-Ee[ut]}),Oe},di.prototype.addToSortKeyRanges=function(k,D){var Y=this.sortKeyRanges[this.sortKeyRanges.length-1];Y&&Y.sortKey===D?Y.symbolInstanceEnd=k+1:this.sortKeyRanges.push({sortKey:D,symbolInstanceStart:k,symbolInstanceEnd:k+1})},di.prototype.sortFeatures=function(k){var D=this;if(this.sortFeaturesByY&&this.sortedAngle!==k&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(k),this.sortedAngle=k,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var Y=0,le=this.symbolInstanceIndexes;Y<le.length;Y+=1){var Ee=le[Y],Oe=this.symbolInstances.get(Ee);this.featureSortOrder.push(Oe.featureIndex),[Oe.rightJustifiedTextSymbolIndex,Oe.centerJustifiedTextSymbolIndex,Oe.leftJustifiedTextSymbolIndex].forEach(function(je,$e,ut){je>=0&&ut.indexOf(je)===$e&&D.addIndicesForPlacedSymbol(D.text,je)}),Oe.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Oe.verticalPlacedTextSymbolIndex),Oe.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Oe.placedIconSymbolIndex),Oe.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Oe.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Sr("SymbolBucket",di,{omit:["layers","collisionBoxArray","features","compareText"]}),di.MAX_GLYPHS=65535,di.addDynamicAttributes=ef;var Rd=new ra({"symbol-placement":new Pr(De.layout_symbol["symbol-placement"]),"symbol-spacing":new Pr(De.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pr(De.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Dr(De.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pr(De.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pr(De.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pr(De.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pr(De.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pr(De.layout_symbol["icon-rotation-alignment"]),"icon-size":new Dr(De.layout_symbol["icon-size"]),"icon-text-fit":new Pr(De.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pr(De.layout_symbol["icon-text-fit-padding"]),"icon-image":new Dr(De.layout_symbol["icon-image"]),"icon-rotate":new Dr(De.layout_symbol["icon-rotate"]),"icon-padding":new Pr(De.layout_symbol["icon-padding"]),"icon-keep-upright":new Pr(De.layout_symbol["icon-keep-upright"]),"icon-offset":new Dr(De.layout_symbol["icon-offset"]),"icon-anchor":new Dr(De.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pr(De.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pr(De.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pr(De.layout_symbol["text-rotation-alignment"]),"text-field":new Dr(De.layout_symbol["text-field"]),"text-font":new Dr(De.layout_symbol["text-font"]),"text-size":new Dr(De.layout_symbol["text-size"]),"text-max-width":new Dr(De.layout_symbol["text-max-width"]),"text-line-height":new Pr(De.layout_symbol["text-line-height"]),"text-letter-spacing":new Dr(De.layout_symbol["text-letter-spacing"]),"text-justify":new Dr(De.layout_symbol["text-justify"]),"text-radial-offset":new Dr(De.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pr(De.layout_symbol["text-variable-anchor"]),"text-anchor":new Dr(De.layout_symbol["text-anchor"]),"text-max-angle":new Pr(De.layout_symbol["text-max-angle"]),"text-writing-mode":new Pr(De.layout_symbol["text-writing-mode"]),"text-rotate":new Dr(De.layout_symbol["text-rotate"]),"text-padding":new Pr(De.layout_symbol["text-padding"]),"text-keep-upright":new Pr(De.layout_symbol["text-keep-upright"]),"text-transform":new Dr(De.layout_symbol["text-transform"]),"text-offset":new Dr(De.layout_symbol["text-offset"]),"text-allow-overlap":new Pr(De.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pr(De.layout_symbol["text-ignore-placement"]),"text-optional":new Pr(De.layout_symbol["text-optional"])}),tf={paint:new ra({"icon-opacity":new Dr(De.paint_symbol["icon-opacity"]),"icon-color":new Dr(De.paint_symbol["icon-color"]),"icon-halo-color":new Dr(De.paint_symbol["icon-halo-color"]),"icon-halo-width":new Dr(De.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Dr(De.paint_symbol["icon-halo-blur"]),"icon-translate":new Pr(De.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pr(De.paint_symbol["icon-translate-anchor"]),"text-opacity":new Dr(De.paint_symbol["text-opacity"]),"text-color":new Dr(De.paint_symbol["text-color"],{runtimeType:Ft,getOverride:function(k){return k.textColor},hasOverride:function(k){return!!k.textColor}}),"text-halo-color":new Dr(De.paint_symbol["text-halo-color"]),"text-halo-width":new Dr(De.paint_symbol["text-halo-width"]),"text-halo-blur":new Dr(De.paint_symbol["text-halo-blur"]),"text-translate":new Pr(De.paint_symbol["text-translate"]),"text-translate-anchor":new Pr(De.paint_symbol["text-translate-anchor"])}),layout:Rd},nu=function(k){this.type=k.property.overrides?k.property.overrides.runtimeType:kt,this.defaultValue=k};nu.prototype.evaluate=function(k){if(k.formattedSection){var D=this.defaultValue.property.overrides;if(D&&D.hasOverride(k.formattedSection))return D.getOverride(k.formattedSection)}return k.feature&&k.featureState?this.defaultValue.evaluate(k.feature,k.featureState):this.defaultValue.property.specification.default},nu.prototype.eachChild=function(k){this.defaultValue.isConstant()||k(this.defaultValue.value._styleExpression.expression)},nu.prototype.outputDefined=function(){return!1},nu.prototype.serialize=function(){return null},Sr("FormatSectionOverride",nu,{omit:["defaultValue"]});var Bd=function(k){function D(Y){k.call(this,Y,tf)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(Y,le){if(k.prototype.recalculate.call(this,Y,le),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var Ee=this.layout.get("text-writing-mode");if(Ee){for(var Oe=[],je=0,$e=Ee;je<$e.length;je+=1){var ut=$e[je];Oe.indexOf(ut)<0&&Oe.push(ut)}this.layout._values["text-writing-mode"]=Oe}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(Y,le,Ee,Oe){var je=this.layout.get(Y).evaluate(le,{},Ee,Oe),$e=this._unevaluatedLayout._values[Y];return $e.isDataDriven()||fs($e.value)||!je?je:function(ut,bt){return bt.replace(/{([^{}]+)}/g,function(Tt,Rt){return Rt in ut?String(ut[Rt]):""})}(le.properties,je)},D.prototype.createBucket=function(Y){return new di(Y)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var Y=0,le=tf.paint.overridableProperties;Y<le.length;Y+=1){var Ee=le[Y];if(D.hasPaintOverride(this.layout,Ee)){var Oe,je=this.paint.get(Ee),$e=new nu(je),ut=new Ms($e,je.property.specification);Oe=je.value.kind==="constant"||je.value.kind==="source"?new Co("source",ut):new po("composite",ut,je.value.zoomStops,je.value._interpolationType),this.paint._values[Ee]=new Bi(je.property,Oe,je.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(Y,le,Ee){return!(!this.layout||le.isDataDriven()||Ee.isDataDriven())&&D.hasPaintOverride(this.layout,Y)},D.hasPaintOverride=function(Y,le){var Ee=Y.get("text-field"),Oe=tf.paint.properties[le],je=!1,$e=function(Tt){for(var Rt=0,Ht=Tt;Rt<Ht.length;Rt+=1){var Ut=Ht[Rt];if(Oe.overrides&&Oe.overrides.hasOverride(Ut))return void(je=!0)}};if(Ee.value.kind==="constant"&&Ee.value.value instanceof Nn)$e(Ee.value.value.sections);else if(Ee.value.kind==="source"){var ut=function(Tt){if(!je)if(Tt instanceof ir&&ur(Tt.value)===Wt){var Rt=Tt.value;$e(Rt.sections)}else Tt instanceof rn?$e(Tt.sections):Tt.eachChild(ut)},bt=Ee.value;bt._styleExpression&&ut(bt._styleExpression.expression)}return je},D}(ia),Fd={paint:new ra({"background-color":new Pr(De.paint_background["background-color"]),"background-pattern":new pa(De.paint_background["background-pattern"]),"background-opacity":new Pr(De.paint_background["background-opacity"])})},Nd=function(k){function D(Y){k.call(this,Y,Fd)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D}(ia),jd={paint:new ra({"raster-opacity":new Pr(De.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pr(De.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pr(De.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pr(De.paint_raster["raster-brightness-max"]),"raster-saturation":new Pr(De.paint_raster["raster-saturation"]),"raster-contrast":new Pr(De.paint_raster["raster-contrast"]),"raster-resampling":new Pr(De.paint_raster["raster-resampling"]),"raster-fade-duration":new Pr(De.paint_raster["raster-fade-duration"])})},Ud=function(k){function D(Y){k.call(this,Y,jd)}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D}(ia),Vd=function(k){function D(Y){k.call(this,Y,{}),this.implementation=Y}return k&&(D.__proto__=k),D.prototype=Object.create(k&&k.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(Y){this.implementation.onAdd&&this.implementation.onAdd(Y,Y.painter.context.gl)},D.prototype.onRemove=function(Y){this.implementation.onRemove&&this.implementation.onRemove(Y,Y.painter.context.gl)},D}(ia),Hd={circle:Ep,heatmap:Lp,hillshade:Op,fill:Zp,"fill-extrusion":nd,line:sd,symbol:Bd,background:Nd,raster:Ud},_h=self.HTMLImageElement,wh=self.HTMLCanvasElement,Th=self.HTMLVideoElement,Mh=self.ImageData,hc=self.ImageBitmap,Ol=function(k,D,Y,le){this.context=k,this.format=Y,this.texture=k.gl.createTexture(),this.update(D,le)};Ol.prototype.update=function(k,D,Y){var le=k.width,Ee=k.height,Oe=!(this.size&&this.size[0]===le&&this.size[1]===Ee||Y),je=this.context,$e=je.gl;if(this.useMipmap=!!(D&&D.useMipmap),$e.bindTexture($e.TEXTURE_2D,this.texture),je.pixelStoreUnpackFlipY.set(!1),je.pixelStoreUnpack.set(1),je.pixelStoreUnpackPremultiplyAlpha.set(this.format===$e.RGBA&&(!D||D.premultiply!==!1)),Oe)this.size=[le,Ee],k instanceof _h||k instanceof wh||k instanceof Th||k instanceof Mh||hc&&k instanceof hc?$e.texImage2D($e.TEXTURE_2D,0,this.format,this.format,$e.UNSIGNED_BYTE,k):$e.texImage2D($e.TEXTURE_2D,0,this.format,le,Ee,0,this.format,$e.UNSIGNED_BYTE,k.data);else{var ut=Y||{x:0,y:0},bt=ut.x,Tt=ut.y;k instanceof _h||k instanceof wh||k instanceof Th||k instanceof Mh||hc&&k instanceof hc?$e.texSubImage2D($e.TEXTURE_2D,0,bt,Tt,$e.RGBA,$e.UNSIGNED_BYTE,k):$e.texSubImage2D($e.TEXTURE_2D,0,bt,Tt,le,Ee,$e.RGBA,$e.UNSIGNED_BYTE,k.data)}this.useMipmap&&this.isSizePowerOfTwo()&&$e.generateMipmap($e.TEXTURE_2D)},Ol.prototype.bind=function(k,D,Y){var le=this.context.gl;le.bindTexture(le.TEXTURE_2D,this.texture),Y!==le.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(Y=le.LINEAR),k!==this.filter&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MAG_FILTER,k),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_MIN_FILTER,Y||k),this.filter=k),D!==this.wrap&&(le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_S,D),le.texParameteri(le.TEXTURE_2D,le.TEXTURE_WRAP_T,D),this.wrap=D)},Ol.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ol.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var nf=function(k){var D=this;this._callback=k,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){D._triggered=!1,D._callback()})};nf.prototype.trigger=function(){var k=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){k._triggered=!1,k._callback()},0))},nf.prototype.remove=function(){delete this._channel,this._callback=function(){}};var ru=function(k,D,Y){this.target=k,this.parent=D,this.mapId=Y,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},h(["receive","process"],this),this.invoker=new nf(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=C()?k:self};function Ah(k,D,Y){var le=2*Math.PI*6378137/256/Math.pow(2,Y);return[k*le-2*Math.PI*6378137/2,D*le-2*Math.PI*6378137/2]}ru.prototype.send=function(k,D,Y,le,Ee){var Oe=this;Ee===void 0&&(Ee=!1);var je=Math.round(1e18*Math.random()).toString(36).substring(0,10);Y&&(this.callbacks[je]=Y);var $e=z(this.globalScope)?void 0:[];return this.target.postMessage({id:je,type:k,hasCallback:!!Y,targetMapId:le,mustQueue:Ee,sourceMapId:this.mapId,data:ts(D,$e)},$e),{cancel:function(){Y&&delete Oe.callbacks[je],Oe.target.postMessage({id:je,type:"<cancel>",targetMapId:le,sourceMapId:Oe.mapId})}}},ru.prototype.receive=function(k){var D=k.data,Y=D.id;if(Y&&(!D.targetMapId||this.mapId===D.targetMapId))if(D.type==="<cancel>"){delete this.tasks[Y];var le=this.cancelCallbacks[Y];delete this.cancelCallbacks[Y],le&&le()}else C()||D.mustQueue?(this.tasks[Y]=D,this.taskQueue.push(Y),this.invoker.trigger()):this.processTask(Y,D)},ru.prototype.process=function(){if(this.taskQueue.length){var k=this.taskQueue.shift(),D=this.tasks[k];delete this.tasks[k],this.taskQueue.length&&this.invoker.trigger(),D&&this.processTask(k,D)}},ru.prototype.processTask=function(k,D){var Y=this;if(D.type==="<response>"){var le=this.callbacks[k];delete this.callbacks[k],le&&(D.error?le(ns(D.error)):le(null,ns(D.data)))}else{var Ee=!1,Oe=z(this.globalScope)?void 0:[],je=D.hasCallback?function(Tt,Rt){Ee=!0,delete Y.cancelCallbacks[k],Y.target.postMessage({id:k,type:"<response>",sourceMapId:Y.mapId,error:Tt?ts(Tt):null,data:ts(Rt,Oe)},Oe)}:function(Tt){Ee=!0},$e=null,ut=ns(D.data);if(this.parent[D.type])$e=this.parent[D.type](D.sourceMapId,ut,je);else if(this.parent.getWorkerSource){var bt=D.type.split(".");$e=this.parent.getWorkerSource(D.sourceMapId,bt[0],ut.source)[bt[1]](ut,je)}else je(new Error("Could not find function "+D.type));!Ee&&$e&&$e.cancel&&(this.cancelCallbacks[k]=$e.cancel)}},ru.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ua=function(k,D){k&&(D?this.setSouthWest(k).setNorthEast(D):k.length===4?this.setSouthWest([k[0],k[1]]).setNorthEast([k[2],k[3]]):this.setSouthWest(k[0]).setNorthEast(k[1]))};ua.prototype.setNorthEast=function(k){return this._ne=k instanceof Oi?new Oi(k.lng,k.lat):Oi.convert(k),this},ua.prototype.setSouthWest=function(k){return this._sw=k instanceof Oi?new Oi(k.lng,k.lat):Oi.convert(k),this},ua.prototype.extend=function(k){var D,Y,le=this._sw,Ee=this._ne;if(k instanceof Oi)D=k,Y=k;else{if(!(k instanceof ua)){if(Array.isArray(k)){if(k.length===4||k.every(Array.isArray)){var Oe=k;return this.extend(ua.convert(Oe))}var je=k;return this.extend(Oi.convert(je))}return this}if(D=k._sw,Y=k._ne,!D||!Y)return this}return le||Ee?(le.lng=Math.min(D.lng,le.lng),le.lat=Math.min(D.lat,le.lat),Ee.lng=Math.max(Y.lng,Ee.lng),Ee.lat=Math.max(Y.lat,Ee.lat)):(this._sw=new Oi(D.lng,D.lat),this._ne=new Oi(Y.lng,Y.lat)),this},ua.prototype.getCenter=function(){return new Oi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ua.prototype.getSouthWest=function(){return this._sw},ua.prototype.getNorthEast=function(){return this._ne},ua.prototype.getNorthWest=function(){return new Oi(this.getWest(),this.getNorth())},ua.prototype.getSouthEast=function(){return new Oi(this.getEast(),this.getSouth())},ua.prototype.getWest=function(){return this._sw.lng},ua.prototype.getSouth=function(){return this._sw.lat},ua.prototype.getEast=function(){return this._ne.lng},ua.prototype.getNorth=function(){return this._ne.lat},ua.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ua.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ua.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ua.prototype.contains=function(k){var D=Oi.convert(k),Y=D.lng,le=D.lat,Ee=this._sw.lat<=le&&le<=this._ne.lat,Oe=this._sw.lng<=Y&&Y<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Oe=this._sw.lng>=Y&&Y>=this._ne.lng),Ee&&Oe},ua.convert=function(k){return!k||k instanceof ua?k:new ua(k)};var kh=63710088e-1,Oi=function(k,D){if(isNaN(k)||isNaN(D))throw new Error("Invalid LngLat object: ("+k+", "+D+")");if(this.lng=+k,this.lat=+D,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Oi.prototype.wrap=function(){return new Oi(a(this.lng,-180,180),this.lat)},Oi.prototype.toArray=function(){return[this.lng,this.lat]},Oi.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Oi.prototype.distanceTo=function(k){var D=Math.PI/180,Y=this.lat*D,le=k.lat*D,Ee=Math.sin(Y)*Math.sin(le)+Math.cos(Y)*Math.cos(le)*Math.cos((k.lng-this.lng)*D);return kh*Math.acos(Math.min(Ee,1))},Oi.prototype.toBounds=function(k){k===void 0&&(k=0);var D=360*k/40075017,Y=D/Math.cos(Math.PI/180*this.lat);return new ua(new Oi(this.lng-Y,this.lat-D),new Oi(this.lng+Y,this.lat+D))},Oi.convert=function(k){if(k instanceof Oi)return k;if(Array.isArray(k)&&(k.length===2||k.length===3))return new Oi(Number(k[0]),Number(k[1]));if(!Array.isArray(k)&&typeof k=="object"&&k!==null)return new Oi(Number("lng"in k?k.lng:k.lon),Number(k.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Sh=2*Math.PI*kh;function Eh(k){return Sh*Math.cos(k*Math.PI/180)}function Ch(k){return(180+k)/360}function Lh(k){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+k*Math.PI/360)))/360}function Ph(k,D){return k/Eh(D)}function rf(k){var D=180-360*k;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}var Il=function(k,D,Y){Y===void 0&&(Y=0),this.x=+k,this.y=+D,this.z=+Y};Il.fromLngLat=function(k,D){D===void 0&&(D=0);var Y=Oi.convert(k);return new Il(Ch(Y.lng),Lh(Y.lat),Ph(D,Y.lat))},Il.prototype.toLngLat=function(){return new Oi(360*this.x-180,rf(this.y))},Il.prototype.toAltitude=function(){return k=this.z,D=this.y,k*Eh(rf(D));var k,D},Il.prototype.meterInMercatorCoordinateUnits=function(){return 1/Sh*(k=rf(this.y),1/Math.cos(k*Math.PI/180));var k};var Dl=function(k,D,Y){this.z=k,this.x=D,this.y=Y,this.key=Lu(0,k,k,D,Y)};Dl.prototype.equals=function(k){return this.z===k.z&&this.x===k.x&&this.y===k.y},Dl.prototype.url=function(k,D){var Y,le,Ee,Oe,je,$e=(Y=this.x,le=this.y,Ee=this.z,Oe=Ah(256*Y,256*(le=Math.pow(2,Ee)-le-1),Ee),je=Ah(256*(Y+1),256*(le+1),Ee),Oe[0]+","+Oe[1]+","+je[0]+","+je[1]),ut=function(bt,Tt,Rt){for(var Ht,Ut="",on=bt;on>0;on--)Ut+=(Tt&(Ht=1<<on-1)?1:0)+(Rt&Ht?2:0);return Ut}(this.z,this.x,this.y);return k[(this.x+this.y)%k.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(D==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ut).replace("{bbox-epsg-3857}",$e)},Dl.prototype.getTilePoint=function(k){var D=Math.pow(2,this.z);return new e((k.x*D-this.x)*ai,(k.y*D-this.y)*ai)},Dl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Oh=function(k,D){this.wrap=k,this.canonical=D,this.key=Lu(k,D.z,D.z,D.x,D.y)},ca=function(k,D,Y,le,Ee){this.overscaledZ=k,this.wrap=D,this.canonical=new Dl(Y,+le,+Ee),this.key=Lu(D,k,Y,le,Ee)};function Lu(k,D,Y,le,Ee){(k*=2)<0&&(k=-1*k-1);var Oe=1<<Y;return(Oe*Oe*k+Oe*Ee+le).toString(36)+Y.toString(36)+D.toString(36)}ca.prototype.equals=function(k){return this.overscaledZ===k.overscaledZ&&this.wrap===k.wrap&&this.canonical.equals(k.canonical)},ca.prototype.scaledTo=function(k){var D=this.canonical.z-k;return k>this.canonical.z?new ca(k,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ca(k,this.wrap,k,this.canonical.x>>D,this.canonical.y>>D)},ca.prototype.calculateScaledKey=function(k,D){var Y=this.canonical.z-k;return k>this.canonical.z?Lu(this.wrap*+D,k,this.canonical.z,this.canonical.x,this.canonical.y):Lu(this.wrap*+D,k,k,this.canonical.x>>Y,this.canonical.y>>Y)},ca.prototype.isChildOf=function(k){if(k.wrap!==this.wrap)return!1;var D=this.canonical.z-k.canonical.z;return k.overscaledZ===0||k.overscaledZ<this.overscaledZ&&k.canonical.x===this.canonical.x>>D&&k.canonical.y===this.canonical.y>>D},ca.prototype.children=function(k){if(this.overscaledZ>=k)return[new ca(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var D=this.canonical.z+1,Y=2*this.canonical.x,le=2*this.canonical.y;return[new ca(D,this.wrap,D,Y,le),new ca(D,this.wrap,D,Y+1,le),new ca(D,this.wrap,D,Y,le+1),new ca(D,this.wrap,D,Y+1,le+1)]},ca.prototype.isLessThan=function(k){return this.wrap<k.wrap||!(this.wrap>k.wrap)&&(this.overscaledZ<k.overscaledZ||!(this.overscaledZ>k.overscaledZ)&&(this.canonical.x<k.canonical.x||!(this.canonical.x>k.canonical.x)&&this.canonical.y<k.canonical.y))},ca.prototype.wrapped=function(){return new ca(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ca.prototype.unwrapTo=function(k){return new ca(this.overscaledZ,k,this.canonical.z,this.canonical.x,this.canonical.y)},ca.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ca.prototype.toUnwrapped=function(){return new Oh(this.wrap,this.canonical)},ca.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ca.prototype.getTilePoint=function(k){return this.canonical.getTilePoint(new Il(k.x-this.wrap,k.y))},Sr("CanonicalTileID",Dl),Sr("OverscaledTileID",ca,{omit:["posMatrix"]});var al=function(k,D,Y){if(this.uid=k,D.height!==D.width)throw new RangeError("DEM tiles must be square");if(Y&&Y!=="mapbox"&&Y!=="terrarium")return S('"'+Y+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=D.height;var le=this.dim=D.height-2;this.data=new Uint32Array(D.data.buffer),this.encoding=Y||"mapbox";for(var Ee=0;Ee<le;Ee++)this.data[this._idx(-1,Ee)]=this.data[this._idx(0,Ee)],this.data[this._idx(le,Ee)]=this.data[this._idx(le-1,Ee)],this.data[this._idx(Ee,-1)]=this.data[this._idx(Ee,0)],this.data[this._idx(Ee,le)]=this.data[this._idx(Ee,le-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(le,-1)]=this.data[this._idx(le-1,0)],this.data[this._idx(-1,le)]=this.data[this._idx(0,le-1)],this.data[this._idx(le,le)]=this.data[this._idx(le-1,le-1)]};al.prototype.get=function(k,D){var Y=new Uint8Array(this.data.buffer),le=4*this._idx(k,D);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(Y[le],Y[le+1],Y[le+2])},al.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},al.prototype._idx=function(k,D){if(k<-1||k>=this.dim+1||D<-1||D>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(D+1)*this.stride+(k+1)},al.prototype._unpackMapbox=function(k,D,Y){return(256*k*256+256*D+Y)/10-1e4},al.prototype._unpackTerrarium=function(k,D,Y){return 256*k+D+Y/256-32768},al.prototype.getPixels=function(){return new so({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},al.prototype.backfillBorder=function(k,D,Y){if(this.dim!==k.dim)throw new Error("dem dimension mismatch");var le=D*this.dim,Ee=D*this.dim+this.dim,Oe=Y*this.dim,je=Y*this.dim+this.dim;switch(D){case-1:le=Ee-1;break;case 1:Ee=le+1}switch(Y){case-1:Oe=je-1;break;case 1:je=Oe+1}for(var $e=-D*this.dim,ut=-Y*this.dim,bt=Oe;bt<je;bt++)for(var Tt=le;Tt<Ee;Tt++)this.data[this._idx(Tt,bt)]=k.data[this._idx(Tt+$e,bt+ut)]},Sr("DEMData",al);var pc=function(k){this._stringToNumber={},this._numberToString=[];for(var D=0;D<k.length;D++){var Y=k[D];this._stringToNumber[Y]=D,this._numberToString[D]=Y}};pc.prototype.encode=function(k){return this._stringToNumber[k]},pc.prototype.decode=function(k){return this._numberToString[k]};var dc=function(k,D,Y,le,Ee){this.type="Feature",this._vectorTileFeature=k,k._z=D,k._x=Y,k._y=le,this.properties=k.properties,this.id=Ee},af={geometry:{configurable:!0}};af.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},af.geometry.set=function(k){this._geometry=k},dc.prototype.toJSON=function(){var k={geometry:this.geometry};for(var D in this)D!=="_geometry"&&D!=="_vectorTileFeature"&&(k[D]=this[D]);return k},Object.defineProperties(dc.prototype,af);var iu=function(){this.state={},this.stateChanges={},this.deletedStates={}};iu.prototype.updateState=function(k,D,Y){var le=String(D);if(this.stateChanges[k]=this.stateChanges[k]||{},this.stateChanges[k][le]=this.stateChanges[k][le]||{},u(this.stateChanges[k][le],Y),this.deletedStates[k]===null)for(var Ee in this.deletedStates[k]={},this.state[k])Ee!==le&&(this.deletedStates[k][Ee]=null);else if(this.deletedStates[k]&&this.deletedStates[k][le]===null)for(var Oe in this.deletedStates[k][le]={},this.state[k][le])Y[Oe]||(this.deletedStates[k][le][Oe]=null);else for(var je in Y)this.deletedStates[k]&&this.deletedStates[k][le]&&this.deletedStates[k][le][je]===null&&delete this.deletedStates[k][le][je]},iu.prototype.removeFeatureState=function(k,D,Y){if(this.deletedStates[k]!==null){var le=String(D);if(this.deletedStates[k]=this.deletedStates[k]||{},Y&&D!==void 0)this.deletedStates[k][le]!==null&&(this.deletedStates[k][le]=this.deletedStates[k][le]||{},this.deletedStates[k][le][Y]=null);else if(D!==void 0)if(this.stateChanges[k]&&this.stateChanges[k][le])for(Y in this.deletedStates[k][le]={},this.stateChanges[k][le])this.deletedStates[k][le][Y]=null;else this.deletedStates[k][le]=null;else this.deletedStates[k]=null}},iu.prototype.getState=function(k,D){var Y=String(D),le=this.state[k]||{},Ee=this.stateChanges[k]||{},Oe=u({},le[Y],Ee[Y]);if(this.deletedStates[k]===null)return{};if(this.deletedStates[k]){var je=this.deletedStates[k][D];if(je===null)return{};for(var $e in je)delete Oe[$e]}return Oe},iu.prototype.initializeTileState=function(k,D){k.setFeatureState(this.state,D)},iu.prototype.coalesceChanges=function(k,D){var Y={};for(var le in this.stateChanges){this.state[le]=this.state[le]||{};var Ee={};for(var Oe in this.stateChanges[le])this.state[le][Oe]||(this.state[le][Oe]={}),u(this.state[le][Oe],this.stateChanges[le][Oe]),Ee[Oe]=this.state[le][Oe];Y[le]=Ee}for(var je in this.deletedStates){this.state[je]=this.state[je]||{};var $e={};if(this.deletedStates[je]===null)for(var ut in this.state[je])$e[ut]={},this.state[je][ut]={};else for(var bt in this.deletedStates[je]){if(this.deletedStates[je][bt]===null)this.state[je][bt]={};else for(var Tt=0,Rt=Object.keys(this.deletedStates[je][bt]);Tt<Rt.length;Tt+=1){var Ht=Rt[Tt];delete this.state[je][bt][Ht]}$e[bt]=this.state[je][bt]}Y[je]=Y[je]||{},u(Y[je],$e)}if(this.stateChanges={},this.deletedStates={},Object.keys(Y).length!==0)for(var Ut in k)k[Ut].setFeatureState(Y,D)};var ol=function(k,D){this.tileID=k,this.x=k.canonical.x,this.y=k.canonical.y,this.z=k.canonical.z,this.grid=new Xi(ai,16,0),this.grid3D=new Xi(ai,16,0),this.featureIndexArray=new Zt,this.promoteId=D};function Ih(k,D,Y,le,Ee){return v(k,function(Oe,je){var $e=D instanceof na?D.get(je):null;return $e&&$e.evaluate?$e.evaluate(Y,le,Ee):$e})}function Dh(k){for(var D=1/0,Y=1/0,le=-1/0,Ee=-1/0,Oe=0,je=k;Oe<je.length;Oe+=1){var $e=je[Oe];D=Math.min(D,$e.x),Y=Math.min(Y,$e.y),le=Math.max(le,$e.x),Ee=Math.max(Ee,$e.y)}return{minX:D,minY:Y,maxX:le,maxY:Ee}}function Gd(k,D){return D-k}ol.prototype.insert=function(k,D,Y,le,Ee,Oe){var je=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(Y,le,Ee);for(var $e=Oe?this.grid3D:this.grid,ut=0;ut<D.length;ut++){for(var bt=D[ut],Tt=[1/0,1/0,-1/0,-1/0],Rt=0;Rt<bt.length;Rt++){var Ht=bt[Rt];Tt[0]=Math.min(Tt[0],Ht.x),Tt[1]=Math.min(Tt[1],Ht.y),Tt[2]=Math.max(Tt[2],Ht.x),Tt[3]=Math.max(Tt[3],Ht.y)}Tt[0]<ai&&Tt[1]<ai&&Tt[2]>=0&&Tt[3]>=0&&$e.insert(je,Tt[0],Tt[1],Tt[2],Tt[3])}},ol.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ql.VectorTile(new nc(this.rawTileData)).layers,this.sourceLayerCoder=new pc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ol.prototype.query=function(k,D,Y,le){var Ee=this;this.loadVTLayers();for(var Oe=k.params||{},je=ai/k.tileSize/k.scale,$e=hs(Oe.filter),ut=k.queryGeometry,bt=k.queryPadding*je,Tt=Dh(ut),Rt=this.grid.query(Tt.minX-bt,Tt.minY-bt,Tt.maxX+bt,Tt.maxY+bt),Ht=Dh(k.cameraQueryGeometry),Ut=0,on=this.grid3D.query(Ht.minX-bt,Ht.minY-bt,Ht.maxX+bt,Ht.maxY+bt,function(er,rr,cr,br){return function(gr,wr,Er,Gr,Or){for(var Vr=0,Rr=gr;Vr<Rr.length;Vr+=1){var Lr=Rr[Vr];if(wr<=Lr.x&&Er<=Lr.y&&Gr>=Lr.x&&Or>=Lr.y)return!0}var $r=[new e(wr,Er),new e(wr,Or),new e(Gr,Or),new e(Gr,Er)];if(gr.length>2){for(var qr=0,wi=$r;qr<wi.length;qr+=1)if(_l(gr,wi[qr]))return!0}for(var Ur=0;Ur<gr.length-1;Ur++)if(vu(gr[Ur],gr[Ur+1],$r))return!0;return!1}(k.cameraQueryGeometry,er-bt,rr-bt,cr+bt,br+bt)});Ut<on.length;Ut+=1){var pn=on[Ut];Rt.push(pn)}Rt.sort(Gd);for(var zn,Dn={},Vn=function(er){var rr=Rt[er];if(rr!==zn){zn=rr;var cr=Ee.featureIndexArray.get(rr),br=null;Ee.loadMatchingFeature(Dn,cr.bucketIndex,cr.sourceLayerIndex,cr.featureIndex,$e,Oe.layers,Oe.availableImages,D,Y,le,function(gr,wr,Er){return br||(br=ja(gr)),wr.queryIntersectsFeature(ut,gr,Er,br,Ee.z,k.transform,je,k.pixelPosMatrix)})}},Gn=0;Gn<Rt.length;Gn++)Vn(Gn);return Dn},ol.prototype.loadMatchingFeature=function(k,D,Y,le,Ee,Oe,je,$e,ut,bt,Tt){var Rt=this.bucketLayerIDs[D];if(!Oe||function(br,gr){for(var wr=0;wr<br.length;wr++)if(gr.indexOf(br[wr])>=0)return!0;return!1}(Oe,Rt)){var Ht=this.sourceLayerCoder.decode(Y),Ut=this.vtLayers[Ht].feature(le);if(Ee.filter(new oi(this.tileID.overscaledZ),Ut))for(var on=this.getId(Ut,Ht),pn=0;pn<Rt.length;pn++){var zn=Rt[pn];if(!(Oe&&Oe.indexOf(zn)<0)){var Dn=$e[zn];if(Dn){var Vn={};on!==void 0&&bt&&(Vn=bt.getState(Dn.sourceLayer||"_geojsonTileLayer",on));var Gn=ut[zn];Gn.paint=Ih(Gn.paint,Dn.paint,Ut,Vn,je),Gn.layout=Ih(Gn.layout,Dn.layout,Ut,Vn,je);var er=!Tt||Tt(Ut,Dn,Vn);if(er){var rr=new dc(Ut,this.z,this.x,this.y,on);rr.layer=Gn;var cr=k[zn];cr===void 0&&(cr=k[zn]=[]),cr.push({featureIndex:le,feature:rr,intersectionZ:er})}}}}}},ol.prototype.lookupSymbolFeatures=function(k,D,Y,le,Ee,Oe,je,$e){var ut={};this.loadVTLayers();for(var bt=hs(Ee),Tt=0,Rt=k;Tt<Rt.length;Tt+=1){var Ht=Rt[Tt];this.loadMatchingFeature(ut,Y,le,Ht,bt,Oe,je,$e,D)}return ut},ol.prototype.hasLayer=function(k){for(var D=0,Y=this.bucketLayerIDs;D<Y.length;D+=1)for(var le=0,Ee=Y[D];le<Ee.length;le+=1)if(k===Ee[le])return!0;return!1},ol.prototype.getId=function(k,D){var Y=k.id;if(this.promoteId){var le=typeof this.promoteId=="string"?this.promoteId:this.promoteId[D];typeof(Y=k.properties[le])=="boolean"&&(Y=Number(Y))}return Y},Sr("FeatureIndex",ol,{omit:["rawTileData","sourceLayerCoder"]});var ma=function(k,D){this.tileID=k,this.uid=c(),this.uses=0,this.tileSize=D,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ma.prototype.registerFadeDuration=function(k){var D=k+this.timeAdded;D<Q.now()||this.fadeEndTime&&D<this.fadeEndTime||(this.fadeEndTime=D)},ma.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ma.prototype.loadVectorData=function(k,D,Y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",k){for(var le in k.featureIndex&&(this.latestFeatureIndex=k.featureIndex,k.rawTileData?(this.latestRawTileData=k.rawTileData,this.latestFeatureIndex.rawTileData=k.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=k.collisionBoxArray,this.buckets=function(bt,Tt){var Rt={};if(!Tt)return Rt;for(var Ht=function(){var pn=on[Ut],zn=pn.layerIds.map(function(er){return Tt.getLayer(er)}).filter(Boolean);if(zn.length!==0){pn.layers=zn,pn.stateDependentLayerIds&&(pn.stateDependentLayers=pn.stateDependentLayerIds.map(function(er){return zn.filter(function(rr){return rr.id===er})[0]}));for(var Dn=0,Vn=zn;Dn<Vn.length;Dn+=1){var Gn=Vn[Dn];Rt[Gn.id]=pn}}},Ut=0,on=bt;Ut<on.length;Ut+=1)Ht();return Rt}(k.buckets,D.style),this.hasSymbolBuckets=!1,this.buckets){var Ee=this.buckets[le];if(Ee instanceof di){if(this.hasSymbolBuckets=!0,!Y)break;Ee.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Oe in this.buckets){var je=this.buckets[Oe];if(je instanceof di&&je.hasRTLText){this.hasRTLText=!0,Li.isLoading()||Li.isLoaded()||io()!=="deferred"||rl();break}}for(var $e in this.queryPadding=0,this.buckets){var ut=this.buckets[$e];this.queryPadding=Math.max(this.queryPadding,D.style.getLayer($e).queryRadius(ut))}k.imageAtlas&&(this.imageAtlas=k.imageAtlas),k.glyphAtlasImage&&(this.glyphAtlasImage=k.glyphAtlasImage)}else this.collisionBoxArray=new vt},ma.prototype.unloadVectorData=function(){for(var k in this.buckets)this.buckets[k].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ma.prototype.getBucket=function(k){return this.buckets[k.id]},ma.prototype.upload=function(k){for(var D in this.buckets){var Y=this.buckets[D];Y.uploadPending()&&Y.upload(k)}var le=k.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ol(k,this.imageAtlas.image,le.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ol(k,this.glyphAtlasImage,le.ALPHA),this.glyphAtlasImage=null)},ma.prototype.prepare=function(k){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(k,this.imageAtlasTexture)},ma.prototype.queryRenderedFeatures=function(k,D,Y,le,Ee,Oe,je,$e,ut,bt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:le,cameraQueryGeometry:Ee,scale:Oe,tileSize:this.tileSize,pixelPosMatrix:bt,transform:$e,params:je,queryPadding:this.queryPadding*ut},k,D,Y):{}},ma.prototype.querySourceFeatures=function(k,D){var Y=this.latestFeatureIndex;if(Y&&Y.rawTileData){var le=Y.loadVTLayers(),Ee=D?D.sourceLayer:"",Oe=le._geojsonTileLayer||le[Ee];if(Oe)for(var je=hs(D&&D.filter),$e=this.tileID.canonical,ut=$e.z,bt=$e.x,Tt=$e.y,Rt={z:ut,x:bt,y:Tt},Ht=0;Ht<Oe.length;Ht++){var Ut=Oe.feature(Ht);if(je.filter(new oi(this.tileID.overscaledZ),Ut)){var on=Y.getId(Ut,Ee),pn=new dc(Ut,ut,bt,Tt,on);pn.tile=Rt,k.push(pn)}}}},ma.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ma.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ma.prototype.setExpiryData=function(k){var D=this.expirationTime;if(k.cacheControl){var Y=L(k.cacheControl);Y["max-age"]&&(this.expirationTime=Date.now()+1e3*Y["max-age"])}else k.expires&&(this.expirationTime=new Date(k.expires).getTime());if(this.expirationTime){var le=Date.now(),Ee=!1;if(this.expirationTime>le)Ee=!1;else if(D)if(this.expirationTime<D)Ee=!0;else{var Oe=this.expirationTime-D;Oe?this.expirationTime=le+Math.max(Oe,3e4):Ee=!0}else Ee=!0;Ee?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ma.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ma.prototype.setFeatureState=function(k,D){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(k).length!==0){var Y=this.latestFeatureIndex.loadVTLayers();for(var le in this.buckets)if(D.style.hasLayer(le)){var Ee=this.buckets[le],Oe=Ee.layers[0].sourceLayer||"_geojsonTileLayer",je=Y[Oe],$e=k[Oe];if(je&&$e&&Object.keys($e).length!==0){Ee.update($e,je,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ut=D&&D.style&&D.style.getLayer(le);ut&&(this.queryPadding=Math.max(this.queryPadding,ut.queryRadius(Ee)))}}}},ma.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ma.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},ma.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ma.prototype.setHoldDuration=function(k){this.symbolFadeHoldUntil=Q.now()+k},ma.prototype.setDependencies=function(k,D){for(var Y={},le=0,Ee=D;le<Ee.length;le+=1)Y[Ee[le]]=!0;this.dependencies[k]=Y},ma.prototype.hasDependency=function(k,D){for(var Y=0,le=k;Y<le.length;Y+=1){var Ee=le[Y],Oe=this.dependencies[Ee];if(Oe){for(var je=0,$e=D;je<$e.length;je+=1)if(Oe[$e[je]])return!0}}return!1};var Ml=self.performance,zh=function(k){this._marks={start:[k.url,"start"].join("#"),end:[k.url,"end"].join("#"),measure:k.url.toString()},Ml.mark(this._marks.start)};zh.prototype.finish=function(){Ml.mark(this._marks.end);var k=Ml.getEntriesByName(this._marks.measure);return k.length===0&&(Ml.measure(this._marks.measure,this._marks.start,this._marks.end),k=Ml.getEntriesByName(this._marks.measure),Ml.clearMarks(this._marks.start),Ml.clearMarks(this._marks.end),Ml.clearMeasures(this._marks.measure)),k},l.Actor=ru,l.AlphaImage=Pl,l.CanonicalTileID=Dl,l.CollisionBoxArray=vt,l.Color=yn,l.DEMData=al,l.DataConstantProperty=Pr,l.DictionaryCoder=pc,l.EXTENT=ai,l.ErrorEvent=st,l.EvaluationParameters=oi,l.Event=Ze,l.Evented=nt,l.FeatureIndex=ol,l.FillBucket=Os,l.FillExtrusionBucket=Is,l.ImageAtlas=ku,l.ImagePosition=ic,l.LineBucket=lo,l.LngLat=Oi,l.LngLatBounds=ua,l.MercatorCoordinate=Il,l.ONE_EM=Aa,l.OverscaledTileID=ca,l.Point=e,l.Point$1=e,l.Properties=ra,l.Protobuf=nc,l.RGBAImage=so,l.RequestManager=ae,l.RequestPerformance=zh,l.ResourceType=yt,l.SegmentVector=kn,l.SourceFeatureState=iu,l.StructArrayLayout1ui2=Ge,l.StructArrayLayout2f1f2i16=ke,l.StructArrayLayout2i4=Ta,l.StructArrayLayout3ui6=ee,l.StructArrayLayout4i8=as,l.SymbolBucket=di,l.Texture=Ol,l.Tile=ma,l.Transitionable=Xa,l.Uniform1f=Hr,l.Uniform1i=zr,l.Uniform2f=Kr,l.Uniform3f=ri,l.Uniform4f=vi,l.UniformColor=mi,l.UniformMatrix4f=Pi,l.UnwrappedTileID=Oh,l.ValidationError=Fe,l.WritingMode=Vo,l.ZoomHistory=xo,l.add=function(k,D,Y){return k[0]=D[0]+Y[0],k[1]=D[1]+Y[1],k[2]=D[2]+Y[2],k},l.addDynamicAttributes=ef,l.asyncAll=function(k,D,Y){if(!k.length)return Y(null,[]);var le=k.length,Ee=new Array(k.length),Oe=null;k.forEach(function(je,$e){D(je,function(ut,bt){ut&&(Oe=ut),Ee[$e]=bt,--le==0&&Y(Oe,Ee)})})},l.bezier=r,l.bindAll=h,l.browser=Q,l.cacheEntryPossiblyAdded=function(k){++lt>ye&&(k.getActor().send("enforceCacheSizeLimit",Te),lt=0)},l.clamp=s,l.clearTileCache=function(k){var D=self.caches.delete(ce);k&&D.catch(k).then(function(){return k()})},l.clipLine=gh,l.clone=function(k){var D=new Uo(16);return D[0]=k[0],D[1]=k[1],D[2]=k[2],D[3]=k[3],D[4]=k[4],D[5]=k[5],D[6]=k[6],D[7]=k[7],D[8]=k[8],D[9]=k[9],D[10]=k[10],D[11]=k[11],D[12]=k[12],D[13]=k[13],D[14]=k[14],D[15]=k[15],D},l.clone$1=w,l.clone$2=function(k){var D=new Uo(3);return D[0]=k[0],D[1]=k[1],D[2]=k[2],D},l.collisionCircleLayout=cd,l.config=X,l.create=function(){var k=new Uo(16);return Uo!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=0,k[12]=0,k[13]=0,k[14]=0),k[0]=1,k[5]=1,k[10]=1,k[15]=1,k},l.create$1=function(){var k=new Uo(9);return Uo!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k},l.create$2=function(){var k=new Uo(4);return Uo!=Float32Array&&(k[1]=0,k[2]=0),k[0]=1,k[3]=1,k},l.createCommonjsModule=_,l.createExpression=As,l.createLayout=Gi,l.createStyleLayer=function(k){return k.type==="custom"?new Vd(k):new Hd[k.type](k)},l.cross=function(k,D,Y){var le=D[0],Ee=D[1],Oe=D[2],je=Y[0],$e=Y[1],ut=Y[2];return k[0]=Ee*ut-Oe*$e,k[1]=Oe*je-le*ut,k[2]=le*$e-Ee*je,k},l.deepEqual=function k(D,Y){if(Array.isArray(D)){if(!Array.isArray(Y)||D.length!==Y.length)return!1;for(var le=0;le<D.length;le++)if(!k(D[le],Y[le]))return!1;return!0}if(typeof D=="object"&&D!==null&&Y!==null){if(typeof Y!="object"||Object.keys(D).length!==Object.keys(Y).length)return!1;for(var Ee in D)if(!k(D[Ee],Y[Ee]))return!1;return!0}return D===Y},l.dot=function(k,D){return k[0]*D[0]+k[1]*D[1]+k[2]*D[2]},l.dot$1=function(k,D){return k[0]*D[0]+k[1]*D[1]+k[2]*D[2]+k[3]*D[3]},l.ease=n,l.emitValidationErrors=qa,l.endsWith=b,l.enforceCacheSizeLimit=function(k){Re(),se&&se.then(function(D){D.keys().then(function(Y){for(var le=0;le<Y.length-k;le++)D.delete(Y[le])})})},l.evaluateSizeForFeature=lh,l.evaluateSizeForZoom=uh,l.evaluateVariableOffset=yh,l.evented=Hi,l.extend=u,l.featureFilter=hs,l.filterObject=y,l.fromRotation=function(k,D){var Y=Math.sin(D),le=Math.cos(D);return k[0]=le,k[1]=Y,k[2]=0,k[3]=-Y,k[4]=le,k[5]=0,k[6]=0,k[7]=0,k[8]=1,k},l.getAnchorAlignment=Kc,l.getAnchorJustification=Qc,l.getArrayBuffer=At,l.getImage=qe,l.getJSON=function(k,D){return ot(u(k,{type:"json"}),D)},l.getRTLTextPluginStatus=io,l.getReferrer=xt,l.getVideo=function(k,D){var Y,le,Ee=self.document.createElement("video");Ee.muted=!0,Ee.onloadstart=function(){D(null,Ee)};for(var Oe=0;Oe<k.length;Oe++){var je=self.document.createElement("source");Y=k[Oe],le=void 0,(le=self.document.createElement("a")).href=Y,le.protocol===self.document.location.protocol&&le.host===self.document.location.host||(Ee.crossOrigin="Anonymous"),je.src=k[Oe],Ee.appendChild(je)}return{cancel:function(){}}},l.identity=zc,l.invert=function(k,D){var Y=D[0],le=D[1],Ee=D[2],Oe=D[3],je=D[4],$e=D[5],ut=D[6],bt=D[7],Tt=D[8],Rt=D[9],Ht=D[10],Ut=D[11],on=D[12],pn=D[13],zn=D[14],Dn=D[15],Vn=Y*$e-le*je,Gn=Y*ut-Ee*je,er=Y*bt-Oe*je,rr=le*ut-Ee*$e,cr=le*bt-Oe*$e,br=Ee*bt-Oe*ut,gr=Tt*pn-Rt*on,wr=Tt*zn-Ht*on,Er=Tt*Dn-Ut*on,Gr=Rt*zn-Ht*pn,Or=Rt*Dn-Ut*pn,Vr=Ht*Dn-Ut*zn,Rr=Vn*Vr-Gn*Or+er*Gr+rr*Er-cr*wr+br*gr;return Rr?(Rr=1/Rr,k[0]=($e*Vr-ut*Or+bt*Gr)*Rr,k[1]=(Ee*Or-le*Vr-Oe*Gr)*Rr,k[2]=(pn*br-zn*cr+Dn*rr)*Rr,k[3]=(Ht*cr-Rt*br-Ut*rr)*Rr,k[4]=(ut*Er-je*Vr-bt*wr)*Rr,k[5]=(Y*Vr-Ee*Er+Oe*wr)*Rr,k[6]=(zn*er-on*br-Dn*Gn)*Rr,k[7]=(Tt*br-Ht*er+Ut*Gn)*Rr,k[8]=(je*Or-$e*Er+bt*gr)*Rr,k[9]=(le*Er-Y*Or-Oe*gr)*Rr,k[10]=(on*cr-pn*er+Dn*Vn)*Rr,k[11]=(Rt*er-Tt*cr-Ut*Vn)*Rr,k[12]=($e*wr-je*Gr-ut*gr)*Rr,k[13]=(Y*Gr-le*wr+Ee*gr)*Rr,k[14]=(pn*Gn-on*rr-zn*Vn)*Rr,k[15]=(Tt*rr-Rt*Gn+Ht*Vn)*Rr,k):null},l.isChar=Tr,l.isMapboxURL=ue,l.keysDifference=function(k,D){var Y=[];for(var le in k)le in D||Y.push(le);return Y},l.makeRequest=ot,l.mapObject=v,l.mercatorXfromLng=Ch,l.mercatorYfromLat=Lh,l.mercatorZfromAltitude=Ph,l.mul=Ap,l.multiply=Sf,l.mvt=ql,l.normalize=function(k,D){var Y=D[0],le=D[1],Ee=D[2],Oe=Y*Y+le*le+Ee*Ee;return Oe>0&&(Oe=1/Math.sqrt(Oe)),k[0]=D[0]*Oe,k[1]=D[1]*Oe,k[2]=D[2]*Oe,k},l.number=bn,l.offscreenCanvasSupported=et,l.ortho=function(k,D,Y,le,Ee,Oe,je){var $e=1/(D-Y),ut=1/(le-Ee),bt=1/(Oe-je);return k[0]=-2*$e,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=-2*ut,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=2*bt,k[11]=0,k[12]=(D+Y)*$e,k[13]=(Ee+le)*ut,k[14]=(je+Oe)*bt,k[15]=1,k},l.parseGlyphPBF=function(k){return new nc(k).readFields(_d,[])},l.pbf=nc,l.performSymbolLayout=function(k,D,Y,le,Ee,Oe,je){k.createArrays();var $e=512*k.overscaling;k.tilePixelRatio=ai/$e,k.compareText={},k.iconsNeedLinear=!1;var ut=k.layers[0].layout,bt=k.layers[0]._unevaluatedLayout._values,Tt={};if(k.textSizeData.kind==="composite"){var Rt=k.textSizeData,Ht=Rt.minZoom,Ut=Rt.maxZoom;Tt.compositeTextSizes=[bt["text-size"].possiblyEvaluate(new oi(Ht),je),bt["text-size"].possiblyEvaluate(new oi(Ut),je)]}if(k.iconSizeData.kind==="composite"){var on=k.iconSizeData,pn=on.minZoom,zn=on.maxZoom;Tt.compositeIconSizes=[bt["icon-size"].possiblyEvaluate(new oi(pn),je),bt["icon-size"].possiblyEvaluate(new oi(zn),je)]}Tt.layoutTextSize=bt["text-size"].possiblyEvaluate(new oi(k.zoom+1),je),Tt.layoutIconSize=bt["icon-size"].possiblyEvaluate(new oi(k.zoom+1),je),Tt.textMaxSize=bt["text-size"].possiblyEvaluate(new oi(18));for(var Dn=ut.get("text-line-height")*Aa,Vn=ut.get("text-rotation-alignment")==="map"&&ut.get("symbol-placement")!=="point",Gn=ut.get("text-keep-upright"),er=ut.get("text-size"),rr=function(){var gr=br[cr],wr=ut.get("text-font").evaluate(gr,{},je).join(","),Er=er.evaluate(gr,{},je),Gr=Tt.layoutTextSize.evaluate(gr,{},je),Or=Tt.layoutIconSize.evaluate(gr,{},je),Vr={horizontal:{},vertical:void 0},Rr=gr.text,Lr=[0,0];if(Rr){var $r=Rr.toString(),qr=ut.get("text-letter-spacing").evaluate(gr,{},je)*Aa,wi=function(Yr){for(var ni=0,qi=Yr;ni<qi.length;ni+=1)if(xi=qi[ni].charCodeAt(0),Tr.Arabic(xi)||Tr["Arabic Supplement"](xi)||Tr["Arabic Extended-A"](xi)||Tr["Arabic Presentation Forms-A"](xi)||Tr["Arabic Presentation Forms-B"](xi))return!1;var xi;return!0}($r)?qr:0,Ur=ut.get("text-anchor").evaluate(gr,{},je),gi=ut.get("text-variable-anchor");if(!gi){var ki=ut.get("text-radial-offset").evaluate(gr,{},je);Lr=ki?yh(Ur,[ki*Aa,$c]):ut.get("text-offset").evaluate(gr,{},je).map(function(Yr){return Yr*Aa})}var Ei=Vn?"center":ut.get("text-justify").evaluate(gr,{},je),Ci=ut.get("symbol-placement"),Ti=Ci==="point"?ut.get("text-max-width").evaluate(gr,{},je)*Aa:0,fa=function(){k.allowVerticalPlacement&&Ya($r)&&(Vr.vertical=ac(Rr,D,Y,Ee,wr,Ti,Dn,Ur,"left",wi,Lr,Vo.vertical,!0,Ci,Gr,Er))};if(!Vn&&gi){for(var zi=Ei==="auto"?gi.map(function(Yr){return Qc(Yr)}):[Ei],ya=!1,Ia=0;Ia<zi.length;Ia++){var ka=zi[Ia];if(!Vr.horizontal[ka])if(ya)Vr.horizontal[ka]=Vr.horizontal[0];else{var Ja=ac(Rr,D,Y,Ee,wr,Ti,Dn,"center",ka,wi,Lr,Vo.horizontal,!1,Ci,Gr,Er);Ja&&(Vr.horizontal[ka]=Ja,ya=Ja.positionedLines.length===1)}}fa()}else{Ei==="auto"&&(Ei=Qc(Ur));var Sa=ac(Rr,D,Y,Ee,wr,Ti,Dn,Ur,Ei,wi,Lr,Vo.horizontal,!1,Ci,Gr,Er);Sa&&(Vr.horizontal[Ei]=Sa),fa(),Ya($r)&&Vn&&Gn&&(Vr.vertical=ac(Rr,D,Y,Ee,wr,Ti,Dn,Ur,Ei,wi,Lr,Vo.vertical,!1,Ci,Gr,Er))}}var da=void 0,Ea=!1;if(gr.icon&&gr.icon.name){var xa=le[gr.icon.name];xa&&(da=function(Yr,ni,qi){var xi=Kc(qi),Ni=xi.horizontalAlign,Ii=xi.verticalAlign,si=ni[0],Yi=ni[1],$a=si-Yr.displaySize[0]*Ni,Mo=$a+Yr.displaySize[0],Va=Yi-Yr.displaySize[1]*Ii;return{image:Yr,top:Va,bottom:Va+Yr.displaySize[1],left:$a,right:Mo}}(Ee[gr.icon.name],ut.get("icon-offset").evaluate(gr,{},je),ut.get("icon-anchor").evaluate(gr,{},je)),Ea=xa.sdf,k.sdfIcons===void 0?k.sdfIcons=xa.sdf:k.sdfIcons!==xa.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xa.pixelRatio!==k.pixelRatio||ut.get("icon-rotate").constantOr(1)!==0)&&(k.iconsNeedLinear=!0))}var ga=bh(Vr.horizontal)||Vr.vertical;k.iconsInText=!!ga&&ga.iconsInText,(ga||da)&&function(Yr,ni,qi,xi,Ni,Ii,si,Yi,$a,Mo,Va){var zs=Ii.textMaxSize.evaluate(ni,{});zs===void 0&&(zs=si);var sl,ba=Yr.layers[0].layout,Rs=ba.get("icon-offset").evaluate(ni,{},Va),xs=bh(qi.horizontal),bs=24,zl=si/bs,gc=Yr.tilePixelRatio*zl,Rl=Yr.tilePixelRatio*zs/bs,vc=Yr.tilePixelRatio*Yi,Pu=Yr.tilePixelRatio*ba.get("symbol-spacing"),of=ba.get("text-padding")*Yr.tilePixelRatio,mc=ba.get("icon-padding")*Yr.tilePixelRatio,au=ba.get("text-max-angle")/180*Math.PI,yc=ba.get("text-rotation-alignment")==="map"&&ba.get("symbol-placement")!=="point",xc=ba.get("icon-rotation-alignment")==="map"&&ba.get("symbol-placement")!=="point",Ou=ba.get("symbol-placement"),sf=Pu/2,Iu=ba.get("icon-text-fit");xi&&Iu!=="none"&&(Yr.allowVerticalPlacement&&qi.vertical&&(sl=sh(xi,qi.vertical,Iu,ba.get("icon-text-fit-padding"),Rs,zl)),xs&&(xi=sh(xi,xs,Iu,ba.get("icon-text-fit-padding"),Rs,zl)));var Bl=function(Wd,Nu){Nu.x<0||Nu.x>=ai||Nu.y<0||Nu.y>=ai||function(ea,Bs,qd,Al,pf,jh,Mc,Ys,Ac,ju,kc,Sc,df,Uh,Uu,Vh,Hh,Gh,Wh,qh,Ho,Ec,Yh,Zs,Yd){var Zh,jl,lu,uu,cu,fu=ea.addToLineVertexArray(Bs,qd),Xh=0,Kh=0,Jh=0,$h=0,gf=-1,vf=-1,ll={},Qh=dr(""),mf=0,yf=0;if(Ys._unevaluatedLayout.getValue("text-radial-offset")===void 0?(mf=(Zh=Ys.layout.get("text-offset").evaluate(Ho,{},Zs).map(function(Hu){return Hu*Aa}))[0],yf=Zh[1]):(mf=Ys.layout.get("text-radial-offset").evaluate(Ho,{},Zs)*Aa,yf=$c),ea.allowVerticalPlacement&&Al.vertical){var ep=Ys.layout.get("text-rotate").evaluate(Ho,{},Zs)+90,Zd=Al.vertical;uu=new cc(Ac,Bs,ju,kc,Sc,Zd,df,Uh,Uu,ep),Mc&&(cu=new cc(Ac,Bs,ju,kc,Sc,Mc,Hh,Gh,Uu,ep))}if(pf){var xf=Ys.layout.get("icon-rotate").evaluate(Ho,{}),tp=Ys.layout.get("icon-text-fit")!=="none",np=vh(pf,xf,Yh,tp),bf=Mc?vh(Mc,xf,Yh,tp):void 0;lu=new cc(Ac,Bs,ju,kc,Sc,pf,Hh,Gh,!1,xf),Xh=4*np.length;var rp=ea.iconSizeData,Vu=null;rp.kind==="source"?(Vu=[Ds*Ys.layout.get("icon-size").evaluate(Ho,{})])[0]>Tl&&S(ea.layerIds[0]+': Value for "icon-size" is >= '+Eu+'. Reduce your "icon-size".'):rp.kind==="composite"&&((Vu=[Ds*Ec.compositeIconSizes[0].evaluate(Ho,{},Zs),Ds*Ec.compositeIconSizes[1].evaluate(Ho,{},Zs)])[0]>Tl||Vu[1]>Tl)&&S(ea.layerIds[0]+': Value for "icon-size" is >= '+Eu+'. Reduce your "icon-size".'),ea.addSymbols(ea.icon,np,Vu,qh,Wh,Ho,!1,Bs,fu.lineStartIndex,fu.lineLength,-1,Zs),gf=ea.icon.placedSymbolArray.length-1,bf&&(Kh=4*bf.length,ea.addSymbols(ea.icon,bf,Vu,qh,Wh,Ho,Vo.vertical,Bs,fu.lineStartIndex,fu.lineLength,-1,Zs),vf=ea.icon.placedSymbolArray.length-1)}for(var ip in Al.horizontal){var Cc=Al.horizontal[ip];if(!jl){Qh=dr(Cc.text);var Xd=Ys.layout.get("text-rotate").evaluate(Ho,{},Zs);jl=new cc(Ac,Bs,ju,kc,Sc,Cc,df,Uh,Uu,Xd)}var ap=Cc.positionedLines.length===1;if(Jh+=xh(ea,Bs,Cc,jh,Ys,Uu,Ho,Vh,fu,Al.vertical?Vo.horizontal:Vo.horizontalOnly,ap?Object.keys(Al.horizontal):[ip],ll,gf,Ec,Zs),ap)break}Al.vertical&&($h+=xh(ea,Bs,Al.vertical,jh,Ys,Uu,Ho,Vh,fu,Vo.vertical,["vertical"],ll,vf,Ec,Zs));var Kd=jl?jl.boxStartIndex:ea.collisionBoxArray.length,Jd=jl?jl.boxEndIndex:ea.collisionBoxArray.length,$d=uu?uu.boxStartIndex:ea.collisionBoxArray.length,Qd=uu?uu.boxEndIndex:ea.collisionBoxArray.length,e0=lu?lu.boxStartIndex:ea.collisionBoxArray.length,t0=lu?lu.boxEndIndex:ea.collisionBoxArray.length,n0=cu?cu.boxStartIndex:ea.collisionBoxArray.length,r0=cu?cu.boxEndIndex:ea.collisionBoxArray.length,Xs=-1,Lc=function(Hu,sp){return Hu&&Hu.circleDiameter?Math.max(Hu.circleDiameter,sp):sp};Xs=Lc(jl,Xs),Xs=Lc(uu,Xs),Xs=Lc(lu,Xs);var op=(Xs=Lc(cu,Xs))>-1?1:0;op&&(Xs*=Yd/Aa),ea.glyphOffsetArray.length>=di.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ho.sortKey!==void 0&&ea.addToSortKeyRanges(ea.symbolInstances.length,Ho.sortKey),ea.symbolInstances.emplaceBack(Bs.x,Bs.y,ll.right>=0?ll.right:-1,ll.center>=0?ll.center:-1,ll.left>=0?ll.left:-1,ll.vertical||-1,gf,vf,Qh,Kd,Jd,$d,Qd,e0,t0,n0,r0,ju,Jh,$h,Xh,Kh,op,0,df,mf,yf,Xs)}(Yr,Nu,Wd,qi,xi,Ni,sl,Yr.layers[0],Yr.collisionBoxArray,ni.index,ni.sourceLayerIndex,Yr.index,gc,of,yc,$a,vc,mc,xc,Rs,ni,Ii,Mo,Va,si)};if(Ou==="line")for(var ou=0,bc=gh(ni.geometry,0,0,ai,ai);ou<bc.length;ou+=1)for(var _c=bc[ou],su=0,wc=Ed(_c,Pu,au,qi.vertical||xs,xi,bs,Rl,Yr.overscaling,ai);su<wc.length;su+=1){var Tc=wc[su];xs&&Od(Yr,xs.text,sf,Tc)||Bl(_c,Tc)}else if(Ou==="line-center")for(var Du=0,zu=ni.geometry;Du<zu.length;Du+=1){var Fl=zu[Du];if(Fl.length>1){var Ru=Sd(Fl,au,qi.vertical||xs,xi,bs,Rl);Ru&&Bl(Fl,Ru)}}else if(ni.type==="Polygon")for(var Nl=0,Bu=Vc(ni.geometry,0);Nl<Bu.length;Nl+=1){var Fu=Bu[Nl],Rh=Ld(Fu,16);Bl(Fu[0],new Kl(Rh.x,Rh.y,0))}else if(ni.type==="LineString")for(var lf=0,Bh=ni.geometry;lf<Bh.length;lf+=1){var uf=Bh[lf];Bl(uf,new Kl(uf[0].x,uf[0].y,0))}else if(ni.type==="Point")for(var cf=0,Fh=ni.geometry;cf<Fh.length;cf+=1)for(var ff=0,Nh=Fh[cf];ff<Nh.length;ff+=1){var hf=Nh[ff];Bl([hf],new Kl(hf.x,hf.y,0))}}(k,gr,Vr,da,le,Tt,Gr,Or,Lr,Ea,je)},cr=0,br=k.features;cr<br.length;cr+=1)rr();Oe&&k.generateCollisionDebugBuffers()},l.perspective=function(k,D,Y,le,Ee){var Oe,je=1/Math.tan(D/2);return k[0]=je/Y,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=je,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[11]=-1,k[12]=0,k[13]=0,k[15]=0,Ee!=null&&Ee!==1/0?(Oe=1/(le-Ee),k[10]=(Ee+le)*Oe,k[14]=2*Ee*le*Oe):(k[10]=-1,k[14]=-2*le),k},l.pick=function(k,D){for(var Y={},le=0;le<D.length;le++){var Ee=D[le];Ee in k&&(Y[Ee]=k[Ee])}return Y},l.plugin=Li,l.polygonIntersectsPolygon=Ka,l.postMapLoadEvent=Be,l.postTurnstileEvent=be,l.potpack=nh,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=Sr,l.registerForPluginStateChange=function(k){return k({pluginStatus:Ji,pluginURL:ci}),Hi.on("pluginStateChange",k),k},l.rotate=function(k,D,Y){var le=D[0],Ee=D[1],Oe=D[2],je=D[3],$e=Math.sin(Y),ut=Math.cos(Y);return k[0]=le*ut+Oe*$e,k[1]=Ee*ut+je*$e,k[2]=le*-$e+Oe*ut,k[3]=Ee*-$e+je*ut,k},l.rotateX=function(k,D,Y){var le=Math.sin(Y),Ee=Math.cos(Y),Oe=D[4],je=D[5],$e=D[6],ut=D[7],bt=D[8],Tt=D[9],Rt=D[10],Ht=D[11];return D!==k&&(k[0]=D[0],k[1]=D[1],k[2]=D[2],k[3]=D[3],k[12]=D[12],k[13]=D[13],k[14]=D[14],k[15]=D[15]),k[4]=Oe*Ee+bt*le,k[5]=je*Ee+Tt*le,k[6]=$e*Ee+Rt*le,k[7]=ut*Ee+Ht*le,k[8]=bt*Ee-Oe*le,k[9]=Tt*Ee-je*le,k[10]=Rt*Ee-$e*le,k[11]=Ht*Ee-ut*le,k},l.rotateZ=function(k,D,Y){var le=Math.sin(Y),Ee=Math.cos(Y),Oe=D[0],je=D[1],$e=D[2],ut=D[3],bt=D[4],Tt=D[5],Rt=D[6],Ht=D[7];return D!==k&&(k[8]=D[8],k[9]=D[9],k[10]=D[10],k[11]=D[11],k[12]=D[12],k[13]=D[13],k[14]=D[14],k[15]=D[15]),k[0]=Oe*Ee+bt*le,k[1]=je*Ee+Tt*le,k[2]=$e*Ee+Rt*le,k[3]=ut*Ee+Ht*le,k[4]=bt*Ee-Oe*le,k[5]=Tt*Ee-je*le,k[6]=Rt*Ee-$e*le,k[7]=Ht*Ee-ut*le,k},l.scale=function(k,D,Y){var le=Y[0],Ee=Y[1],Oe=Y[2];return k[0]=D[0]*le,k[1]=D[1]*le,k[2]=D[2]*le,k[3]=D[3]*le,k[4]=D[4]*Ee,k[5]=D[5]*Ee,k[6]=D[6]*Ee,k[7]=D[7]*Ee,k[8]=D[8]*Oe,k[9]=D[9]*Oe,k[10]=D[10]*Oe,k[11]=D[11]*Oe,k[12]=D[12],k[13]=D[13],k[14]=D[14],k[15]=D[15],k},l.scale$1=function(k,D,Y){return k[0]=D[0]*Y,k[1]=D[1]*Y,k[2]=D[2]*Y,k[3]=D[3]*Y,k},l.scale$2=function(k,D,Y){return k[0]=D[0]*Y,k[1]=D[1]*Y,k[2]=D[2]*Y,k},l.setCacheLimits=function(k,D){Te=k,ye=D},l.setRTLTextPlugin=function(k,D,Y){if(Y===void 0&&(Y=!1),Ji===ro||Ji===bo||Ji===Vi)throw new Error("setRTLTextPlugin cannot be called multiple times.");ci=Q.resolveURL(k),Ji=ro,gs=D,wa(),Y||rl()},l.sphericalToCartesian=function(k){var D=k[0],Y=k[1],le=k[2];return Y+=90,Y*=Math.PI/180,le*=Math.PI/180,{x:D*Math.cos(Y)*Math.sin(le),y:D*Math.sin(Y)*Math.sin(le),z:D*Math.cos(le)}},l.sqrLen=Sp,l.styleSpec=De,l.sub=kp,l.symbolSize=kd,l.transformMat3=function(k,D,Y){var le=D[0],Ee=D[1],Oe=D[2];return k[0]=le*Y[0]+Ee*Y[3]+Oe*Y[6],k[1]=le*Y[1]+Ee*Y[4]+Oe*Y[7],k[2]=le*Y[2]+Ee*Y[5]+Oe*Y[8],k},l.transformMat4=Ju,l.translate=function(k,D,Y){var le,Ee,Oe,je,$e,ut,bt,Tt,Rt,Ht,Ut,on,pn=Y[0],zn=Y[1],Dn=Y[2];return D===k?(k[12]=D[0]*pn+D[4]*zn+D[8]*Dn+D[12],k[13]=D[1]*pn+D[5]*zn+D[9]*Dn+D[13],k[14]=D[2]*pn+D[6]*zn+D[10]*Dn+D[14],k[15]=D[3]*pn+D[7]*zn+D[11]*Dn+D[15]):(le=D[0],Ee=D[1],Oe=D[2],je=D[3],$e=D[4],ut=D[5],bt=D[6],Tt=D[7],Rt=D[8],Ht=D[9],Ut=D[10],on=D[11],k[0]=le,k[1]=Ee,k[2]=Oe,k[3]=je,k[4]=$e,k[5]=ut,k[6]=bt,k[7]=Tt,k[8]=Rt,k[9]=Ht,k[10]=Ut,k[11]=on,k[12]=le*pn+$e*zn+Rt*Dn+D[12],k[13]=Ee*pn+ut*zn+Ht*Dn+D[13],k[14]=Oe*pn+bt*zn+Ut*Dn+D[14],k[15]=je*pn+Tt*zn+on*Dn+D[15]),k},l.triggerPluginCompletionEvent=Ps,l.uniqueId=c,l.validateCustomStyleLayer=function(k){var D=[],Y=k.id;return Y===void 0&&D.push({message:"layers."+Y+': missing required property "id"'}),k.render===void 0&&D.push({message:"layers."+Y+': missing required method "render"'}),k.renderingMode&&k.renderingMode!=="2d"&&k.renderingMode!=="3d"&&D.push({message:"layers."+Y+': property "renderingMode" must be either "2d" or "3d"'}),D},l.validateLight=Ui,l.validateStyle=ta,l.values=function(k){var D=[];for(var Y in k)D.push(k[Y]);return D},l.vectorTile=ql,l.version=m,l.warnOnce=S,l.webpSupported=q,l.window=self,l.wrap=a}),M(0,function(l){function _(qe){var Xe=typeof qe;if(Xe==="number"||Xe==="boolean"||Xe==="string"||qe==null)return JSON.stringify(qe);if(Array.isArray(qe)){for(var Ve="[",Ze=0,st=qe;Ze<st.length;Ze+=1)Ve+=_(st[Ze])+",";return Ve+"]"}for(var nt=Object.keys(qe).sort(),De="{",Fe=0;Fe<nt.length;Fe++)De+=JSON.stringify(nt[Fe])+":"+_(qe[nt[Fe]])+",";return De+"}"}function m(qe){for(var Xe="",Ve=0,Ze=l.refProperties;Ve<Ze.length;Ve+=1)Xe+="/"+_(qe[Ze[Ve]]);return Xe}var f=function(qe){this.keyCache={},qe&&this.replace(qe)};f.prototype.replace=function(qe){this._layerConfigs={},this._layers={},this.update(qe,[])},f.prototype.update=function(qe,Xe){for(var Ve=this,Ze=0,st=qe;Ze<st.length;Ze+=1){var nt=st[Ze];this._layerConfigs[nt.id]=nt;var De=this._layers[nt.id]=l.createStyleLayer(nt);De._featureFilter=l.featureFilter(De.filter),this.keyCache[nt.id]&&delete this.keyCache[nt.id]}for(var Fe=0,rt=Xe;Fe<rt.length;Fe+=1){var tt=rt[Fe];delete this.keyCache[tt],delete this._layerConfigs[tt],delete this._layers[tt]}this.familiesBySource={};for(var gt=0,dt=function(Ft,Nt){for(var Gt={},an=0;an<Ft.length;an++){var Wt=Nt&&Nt[Ft[an].id]||m(Ft[an]);Nt&&(Nt[Ft[an].id]=Wt);var Yt=Gt[Wt];Yt||(Yt=Gt[Wt]=[]),Yt.push(Ft[an])}var en=[];for(var Tn in Gt)en.push(Gt[Tn]);return en}(l.values(this._layerConfigs),this.keyCache);gt<dt.length;gt+=1){var mt=dt[gt].map(function(Ft){return Ve._layers[Ft.id]}),ft=mt[0];if(ft.visibility!=="none"){var kt=ft.source||"",ht=this.familiesBySource[kt];ht||(ht=this.familiesBySource[kt]={});var pt=ft.sourceLayer||"_geojsonTileLayer",wt=ht[pt];wt||(wt=ht[pt]=[]),wt.push(mt)}}};var o=function(qe){var Xe={},Ve=[];for(var Ze in qe){var st=qe[Ze],nt=Xe[Ze]={};for(var De in st){var Fe=st[+De];if(Fe&&Fe.bitmap.width!==0&&Fe.bitmap.height!==0){var rt={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};Ve.push(rt),nt[De]={rect:rt,metrics:Fe.metrics}}}}var tt=l.potpack(Ve),gt=tt.w,dt=tt.h,mt=new l.AlphaImage({width:gt||1,height:dt||1});for(var ft in qe){var kt=qe[ft];for(var ht in kt){var pt=kt[+ht];if(pt&&pt.bitmap.width!==0&&pt.bitmap.height!==0){var wt=Xe[ft][ht].rect;l.AlphaImage.copy(pt.bitmap,mt,{x:0,y:0},{x:wt.x+1,y:wt.y+1},pt.bitmap)}}}this.image=mt,this.positions=Xe};l.register("GlyphAtlas",o);var e=function(qe){this.tileID=new l.OverscaledTileID(qe.tileID.overscaledZ,qe.tileID.wrap,qe.tileID.canonical.z,qe.tileID.canonical.x,qe.tileID.canonical.y),this.uid=qe.uid,this.zoom=qe.zoom,this.pixelRatio=qe.pixelRatio,this.tileSize=qe.tileSize,this.source=qe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=qe.showCollisionBoxes,this.collectResourceTiming=!!qe.collectResourceTiming,this.returnDependencies=!!qe.returnDependencies,this.promoteId=qe.promoteId};function i(qe,Xe,Ve){for(var Ze=new l.EvaluationParameters(Xe),st=0,nt=qe;st<nt.length;st+=1)nt[st].recalculate(Ze,Ve)}function r(qe,Xe){var Ve=l.getArrayBuffer(qe.request,function(Ze,st,nt,De){Ze?Xe(Ze):st&&Xe(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(st)),rawData:st,cacheControl:nt,expires:De})});return function(){Ve.cancel(),Xe()}}e.prototype.parse=function(qe,Xe,Ve,Ze,st){var nt=this;this.status="parsing",this.data=qe,this.collisionBoxArray=new l.CollisionBoxArray;var De=new l.DictionaryCoder(Object.keys(qe.layers).sort()),Fe=new l.FeatureIndex(this.tileID,this.promoteId);Fe.bucketLayerIDs=[];var rt,tt,gt,dt,mt={},ft={featureIndex:Fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},kt=Xe.familiesBySource[this.source];for(var ht in kt){var pt=qe.layers[ht];if(pt){pt.version===1&&l.warnOnce('Vector tile source "'+this.source+'" layer "'+ht+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var wt=De.encode(ht),Ft=[],Nt=0;Nt<pt.length;Nt++){var Gt=pt.feature(Nt),an=Fe.getId(Gt,ht);Ft.push({feature:Gt,id:an,index:Nt,sourceLayerIndex:wt})}for(var Wt=0,Yt=kt[ht];Wt<Yt.length;Wt+=1){var en=Yt[Wt],Tn=en[0];Tn.minzoom&&this.zoom<Math.floor(Tn.minzoom)||Tn.maxzoom&&this.zoom>=Tn.maxzoom||Tn.visibility!=="none"&&(i(en,this.zoom,Ve),(mt[Tn.id]=Tn.createBucket({index:Fe.bucketLayerIDs.length,layers:en,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:wt,sourceID:this.source})).populate(Ft,ft,this.tileID.canonical),Fe.bucketLayerIDs.push(en.map(function(tn){return tn.id})))}}}var Bn=l.mapObject(ft.glyphDependencies,function(tn){return Object.keys(tn).map(Number)});Object.keys(Bn).length?Ze.send("getGlyphs",{uid:this.uid,stacks:Bn},function(tn,un){rt||(rt=tn,tt=un,cn.call(nt))}):tt={};var mn=Object.keys(ft.iconDependencies);mn.length?Ze.send("getImages",{icons:mn,source:this.source,tileID:this.tileID,type:"icons"},function(tn,un){rt||(rt=tn,gt=un,cn.call(nt))}):gt={};var Kt=Object.keys(ft.patternDependencies);function cn(){if(rt)return st(rt);if(tt&&gt&&dt){var tn=new o(tt),un=new l.ImageAtlas(gt,dt);for(var yn in mt){var En=mt[yn];En instanceof l.SymbolBucket?(i(En.layers,this.zoom,Ve),l.performSymbolLayout(En,tt,tn.positions,gt,un.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):En.hasPattern&&(En instanceof l.LineBucket||En instanceof l.FillBucket||En instanceof l.FillExtrusionBucket)&&(i(En.layers,this.zoom,Ve),En.addFeatures(ft,this.tileID.canonical,un.patternPositions))}this.status="done",st(null,{buckets:l.values(mt).filter(function(Sn){return!Sn.isEmpty()}),featureIndex:Fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:tn.image,imageAtlas:un,glyphMap:this.returnDependencies?tt:null,iconMap:this.returnDependencies?gt:null,glyphPositions:this.returnDependencies?tn.positions:null})}}Kt.length?Ze.send("getImages",{icons:Kt,source:this.source,tileID:this.tileID,type:"patterns"},function(tn,un){rt||(rt=tn,dt=un,cn.call(nt))}):dt={},cn.call(this)};var n=function(qe,Xe,Ve,Ze){this.actor=qe,this.layerIndex=Xe,this.availableImages=Ve,this.loadVectorData=Ze||r,this.loading={},this.loaded={}};n.prototype.loadTile=function(qe,Xe){var Ve=this,Ze=qe.uid;this.loading||(this.loading={});var st=!!(qe&&qe.request&&qe.request.collectResourceTiming)&&new l.RequestPerformance(qe.request),nt=this.loading[Ze]=new e(qe);nt.abort=this.loadVectorData(qe,function(De,Fe){if(delete Ve.loading[Ze],De||!Fe)return nt.status="done",Ve.loaded[Ze]=nt,Xe(De);var rt=Fe.rawData,tt={};Fe.expires&&(tt.expires=Fe.expires),Fe.cacheControl&&(tt.cacheControl=Fe.cacheControl);var gt={};if(st){var dt=st.finish();dt&&(gt.resourceTiming=JSON.parse(JSON.stringify(dt)))}nt.vectorTile=Fe.vectorTile,nt.parse(Fe.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(mt,ft){if(mt||!ft)return Xe(mt);Xe(null,l.extend({rawTileData:rt.slice(0)},ft,tt,gt))}),Ve.loaded=Ve.loaded||{},Ve.loaded[Ze]=nt})},n.prototype.reloadTile=function(qe,Xe){var Ve=this,Ze=this.loaded,st=qe.uid,nt=this;if(Ze&&Ze[st]){var De=Ze[st];De.showCollisionBoxes=qe.showCollisionBoxes;var Fe=function(rt,tt){var gt=De.reloadCallback;gt&&(delete De.reloadCallback,De.parse(De.vectorTile,nt.layerIndex,Ve.availableImages,nt.actor,gt)),Xe(rt,tt)};De.status==="parsing"?De.reloadCallback=Fe:De.status==="done"&&(De.vectorTile?De.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor,Fe):Fe())}},n.prototype.abortTile=function(qe,Xe){var Ve=this.loading,Ze=qe.uid;Ve&&Ve[Ze]&&Ve[Ze].abort&&(Ve[Ze].abort(),delete Ve[Ze]),Xe()},n.prototype.removeTile=function(qe,Xe){var Ve=this.loaded,Ze=qe.uid;Ve&&Ve[Ze]&&delete Ve[Ze],Xe()};var s=l.window.ImageBitmap,a=function(){this.loaded={}};a.prototype.loadTile=function(qe,Xe){var Ve=qe.uid,Ze=qe.encoding,st=qe.rawImageData,nt=s&&st instanceof s?this.getImageData(st):st,De=new l.DEMData(Ve,nt,Ze);this.loaded=this.loaded||{},this.loaded[Ve]=De,Xe(null,De)},a.prototype.getImageData=function(qe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(qe.width,qe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=qe.width,this.offscreenCanvas.height=qe.height,this.offscreenCanvasContext.drawImage(qe,0,0,qe.width,qe.height);var Xe=this.offscreenCanvasContext.getImageData(-1,-1,qe.width+2,qe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:Xe.width,height:Xe.height},Xe.data)},a.prototype.removeTile=function(qe){var Xe=this.loaded,Ve=qe.uid;Xe&&Xe[Ve]&&delete Xe[Ve]};var u=function qe(Xe,Ve){var Ze,st=Xe&&Xe.type;if(st==="FeatureCollection")for(Ze=0;Ze<Xe.features.length;Ze++)qe(Xe.features[Ze],Ve);else if(st==="GeometryCollection")for(Ze=0;Ze<Xe.geometries.length;Ze++)qe(Xe.geometries[Ze],Ve);else if(st==="Feature")qe(Xe.geometry,Ve);else if(st==="Polygon")p(Xe.coordinates,Ve);else if(st==="MultiPolygon")for(Ze=0;Ze<Xe.coordinates.length;Ze++)p(Xe.coordinates[Ze],Ve);return Xe};function p(qe,Xe){if(qe.length!==0){c(qe[0],Xe);for(var Ve=1;Ve<qe.length;Ve++)c(qe[Ve],!Xe)}}function c(qe,Xe){for(var Ve=0,Ze=0,st=qe.length,nt=st-1;Ze<st;nt=Ze++)Ve+=(qe[Ze][0]-qe[nt][0])*(qe[nt][1]+qe[Ze][1]);Ve>=0!=!!Xe&&qe.reverse()}var x=l.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(qe){this._feature=qe,this.extent=l.EXTENT,this.type=qe.type,this.properties=qe.tags,"id"in qe&&!isNaN(qe.id)&&(this.id=parseInt(qe.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var qe=[],Xe=0,Ve=this._feature.geometry;Xe<Ve.length;Xe+=1){var Ze=Ve[Xe];qe.push([new l.Point$1(Ze[0],Ze[1])])}return qe}for(var st=[],nt=0,De=this._feature.geometry;nt<De.length;nt+=1){for(var Fe=[],rt=0,tt=De[nt];rt<tt.length;rt+=1){var gt=tt[rt];Fe.push(new l.Point$1(gt[0],gt[1]))}st.push(Fe)}return st},g.prototype.toGeoJSON=function(qe,Xe,Ve){return x.call(this,qe,Xe,Ve)};var h=function(qe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=qe.length,this._features=qe};h.prototype.feature=function(qe){return new g(this._features[qe])};var b=l.vectorTile.VectorTileFeature,v=y;function y(qe,Xe){this.options=Xe||{},this.features=qe,this.length=qe.length}function w(qe,Xe){this.id=typeof qe.id=="number"?qe.id:void 0,this.type=qe.type,this.rawGeometry=qe.type===1?[qe.geometry]:qe.geometry,this.properties=qe.tags,this.extent=Xe||4096}y.prototype.feature=function(qe){return new w(this.features[qe],this.options.extent)},w.prototype.loadGeometry=function(){var qe=this.rawGeometry;this.geometry=[];for(var Xe=0;Xe<qe.length;Xe++){for(var Ve=qe[Xe],Ze=[],st=0;st<Ve.length;st++)Ze.push(new l.Point$1(Ve[st][0],Ve[st][1]));this.geometry.push(Ze)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var qe=this.geometry,Xe=1/0,Ve=-1/0,Ze=1/0,st=-1/0,nt=0;nt<qe.length;nt++)for(var De=qe[nt],Fe=0;Fe<De.length;Fe++){var rt=De[Fe];Xe=Math.min(Xe,rt.x),Ve=Math.max(Ve,rt.x),Ze=Math.min(Ze,rt.y),st=Math.max(st,rt.y)}return[Xe,Ze,Ve,st]},w.prototype.toGeoJSON=b.prototype.toGeoJSON;var d=C,S=C,T=function(qe,Xe){Xe=Xe||{};var Ve={};for(var Ze in qe)Ve[Ze]=new v(qe[Ze].features,Xe),Ve[Ze].name=Ze,Ve[Ze].version=Xe.version,Ve[Ze].extent=Xe.extent;return C({layers:Ve})},E=v;function C(qe){var Xe=new l.pbf;return function(Ve,Ze){for(var st in Ve.layers)Ze.writeMessage(3,L,Ve.layers[st])}(qe,Xe),Xe.finish()}function L(qe,Xe){var Ve;Xe.writeVarintField(15,qe.version||1),Xe.writeStringField(1,qe.name||""),Xe.writeVarintField(5,qe.extent||4096);var Ze={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<qe.length;Ve++)Ze.feature=qe.feature(Ve),Xe.writeMessage(2,O,Ze);var st=Ze.keys;for(Ve=0;Ve<st.length;Ve++)Xe.writeStringField(3,st[Ve]);var nt=Ze.values;for(Ve=0;Ve<nt.length;Ve++)Xe.writeMessage(4,N,nt[Ve])}function O(qe,Xe){var Ve=qe.feature;Ve.id!==void 0&&Xe.writeVarintField(1,Ve.id),Xe.writeMessage(2,z,qe),Xe.writeVarintField(3,Ve.type),Xe.writeMessage(4,H,Ve)}function z(qe,Xe){var Ve=qe.feature,Ze=qe.keys,st=qe.values,nt=qe.keycache,De=qe.valuecache;for(var Fe in Ve.properties){var rt=nt[Fe];rt===void 0&&(Ze.push(Fe),rt=Ze.length-1,nt[Fe]=rt),Xe.writeVarint(rt);var tt=Ve.properties[Fe],gt=typeof tt;gt!=="string"&&gt!=="boolean"&&gt!=="number"&&(tt=JSON.stringify(tt));var dt=gt+":"+tt,mt=De[dt];mt===void 0&&(st.push(tt),mt=st.length-1,De[dt]=mt),Xe.writeVarint(mt)}}function G(qe,Xe){return(Xe<<3)+(7&qe)}function I(qe){return qe<<1^qe>>31}function H(qe,Xe){for(var Ve=qe.loadGeometry(),Ze=qe.type,st=0,nt=0,De=Ve.length,Fe=0;Fe<De;Fe++){var rt=Ve[Fe],tt=1;Ze===1&&(tt=rt.length),Xe.writeVarint(G(1,tt));for(var gt=Ze===3?rt.length-1:rt.length,dt=0;dt<gt;dt++){dt===1&&Ze!==1&&Xe.writeVarint(G(2,gt-1));var mt=rt[dt].x-st,ft=rt[dt].y-nt;Xe.writeVarint(I(mt)),Xe.writeVarint(I(ft)),st+=mt,nt+=ft}Ze===3&&Xe.writeVarint(G(7,1))}}function N(qe,Xe){var Ve=typeof qe;Ve==="string"?Xe.writeStringField(1,qe):Ve==="boolean"?Xe.writeBooleanField(7,qe):Ve==="number"&&(qe%1!=0?Xe.writeDoubleField(3,qe):qe<0?Xe.writeSVarintField(6,qe):Xe.writeVarintField(5,qe))}function F(qe,Xe,Ve,Ze,st,nt){if(!(st-Ze<=Ve)){var De=Ze+st>>1;V(qe,Xe,De,Ze,st,nt%2),F(qe,Xe,Ve,Ze,De-1,nt+1),F(qe,Xe,Ve,De+1,st,nt+1)}}function V(qe,Xe,Ve,Ze,st,nt){for(;st>Ze;){if(st-Ze>600){var De=st-Ze+1,Fe=Ve-Ze+1,rt=Math.log(De),tt=.5*Math.exp(2*rt/3),gt=.5*Math.sqrt(rt*tt*(De-tt)/De)*(Fe-De/2<0?-1:1);V(qe,Xe,Ve,Math.max(Ze,Math.floor(Ve-Fe*tt/De+gt)),Math.min(st,Math.floor(Ve+(De-Fe)*tt/De+gt)),nt)}var dt=Xe[2*Ve+nt],mt=Ze,ft=st;for(W(qe,Xe,Ze,Ve),Xe[2*st+nt]>dt&&W(qe,Xe,Ze,st);mt<ft;){for(W(qe,Xe,mt,ft),mt++,ft--;Xe[2*mt+nt]<dt;)mt++;for(;Xe[2*ft+nt]>dt;)ft--}Xe[2*Ze+nt]===dt?W(qe,Xe,Ze,ft):W(qe,Xe,++ft,st),ft<=Ve&&(Ze=ft+1),Ve<=ft&&(st=ft-1)}}function W(qe,Xe,Ve,Ze){te(qe,Ve,Ze),te(Xe,2*Ve,2*Ze),te(Xe,2*Ve+1,2*Ze+1)}function te(qe,Xe,Ve){var Ze=qe[Xe];qe[Xe]=qe[Ve],qe[Ve]=Ze}function Q(qe,Xe,Ve,Ze){var st=qe-Ve,nt=Xe-Ze;return st*st+nt*nt}d.fromVectorTileJs=S,d.fromGeojsonVt=T,d.GeoJSONWrapper=E;var X=function(qe){return qe[0]},q=function(qe){return qe[1]},Z=function(qe,Xe,Ve,Ze,st){Xe===void 0&&(Xe=X),Ve===void 0&&(Ve=q),Ze===void 0&&(Ze=64),st===void 0&&(st=Float64Array),this.nodeSize=Ze,this.points=qe;for(var nt=qe.length<65536?Uint16Array:Uint32Array,De=this.ids=new nt(qe.length),Fe=this.coords=new st(2*qe.length),rt=0;rt<qe.length;rt++)De[rt]=rt,Fe[2*rt]=Xe(qe[rt]),Fe[2*rt+1]=Ve(qe[rt]);F(De,Fe,Ze,0,De.length-1,0)};Z.prototype.range=function(qe,Xe,Ve,Ze){return function(st,nt,De,Fe,rt,tt,gt){for(var dt,mt,ft=[0,st.length-1,0],kt=[];ft.length;){var ht=ft.pop(),pt=ft.pop(),wt=ft.pop();if(pt-wt<=gt)for(var Ft=wt;Ft<=pt;Ft++)dt=nt[2*Ft],mt=nt[2*Ft+1],dt>=De&&dt<=rt&&mt>=Fe&&mt<=tt&&kt.push(st[Ft]);else{var Nt=Math.floor((wt+pt)/2);dt=nt[2*Nt],mt=nt[2*Nt+1],dt>=De&&dt<=rt&&mt>=Fe&&mt<=tt&&kt.push(st[Nt]);var Gt=(ht+1)%2;(ht===0?De<=dt:Fe<=mt)&&(ft.push(wt),ft.push(Nt-1),ft.push(Gt)),(ht===0?rt>=dt:tt>=mt)&&(ft.push(Nt+1),ft.push(pt),ft.push(Gt))}}return kt}(this.ids,this.coords,qe,Xe,Ve,Ze,this.nodeSize)},Z.prototype.within=function(qe,Xe,Ve){return function(Ze,st,nt,De,Fe,rt){for(var tt=[0,Ze.length-1,0],gt=[],dt=Fe*Fe;tt.length;){var mt=tt.pop(),ft=tt.pop(),kt=tt.pop();if(ft-kt<=rt)for(var ht=kt;ht<=ft;ht++)Q(st[2*ht],st[2*ht+1],nt,De)<=dt&&gt.push(Ze[ht]);else{var pt=Math.floor((kt+ft)/2),wt=st[2*pt],Ft=st[2*pt+1];Q(wt,Ft,nt,De)<=dt&&gt.push(Ze[pt]);var Nt=(mt+1)%2;(mt===0?nt-Fe<=wt:De-Fe<=Ft)&&(tt.push(kt),tt.push(pt-1),tt.push(Nt)),(mt===0?nt+Fe>=wt:De+Fe>=Ft)&&(tt.push(pt+1),tt.push(ft),tt.push(Nt))}}return gt}(this.ids,this.coords,qe,Xe,Ve,this.nodeSize)};var J={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(qe){return qe}},ne=function(qe){this.options=me(Object.create(J),qe),this.trees=new Array(this.options.maxZoom+1)};function re(qe,Xe,Ve,Ze,st){return{x:qe,y:Xe,zoom:1/0,id:Ve,parentId:-1,numPoints:Ze,properties:st}}function ae(qe,Xe){var Ve=qe.geometry.coordinates,Ze=Ve[0],st=Ve[1];return{x:de(Ze),y:xe(st),zoom:1/0,index:Xe,parentId:-1}}function ue(qe){return{type:"Feature",id:qe.id,properties:he(qe),geometry:{type:"Point",coordinates:[(Ze=qe.x,360*(Ze-.5)),(Xe=qe.y,Ve=(180-360*Xe)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var Xe,Ve,Ze}function he(qe){var Xe=qe.numPoints,Ve=Xe>=1e4?Math.round(Xe/1e3)+"k":Xe>=1e3?Math.round(Xe/100)/10+"k":Xe;return me(me({},qe.properties),{cluster:!0,cluster_id:qe.id,point_count:Xe,point_count_abbreviated:Ve})}function de(qe){return qe/360+.5}function xe(qe){var Xe=Math.sin(qe*Math.PI/180),Ve=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function me(qe,Xe){for(var Ve in Xe)qe[Ve]=Xe[Ve];return qe}function ve(qe){return qe.x}function Le(qe){return qe.y}function Ae(qe,Xe,Ve,Ze){for(var st,nt=Ze,De=Ve-Xe>>1,Fe=Ve-Xe,rt=qe[Xe],tt=qe[Xe+1],gt=qe[Ve],dt=qe[Ve+1],mt=Xe+3;mt<Ve;mt+=3){var ft=we(qe[mt],qe[mt+1],rt,tt,gt,dt);if(ft>nt)st=mt,nt=ft;else if(ft===nt){var kt=Math.abs(mt-De);kt<Fe&&(st=mt,Fe=kt)}}nt>Ze&&(st-Xe>3&&Ae(qe,Xe,st,Ze),qe[st+2]=nt,Ve-st>3&&Ae(qe,st,Ve,Ze))}function we(qe,Xe,Ve,Ze,st,nt){var De=st-Ve,Fe=nt-Ze;if(De!==0||Fe!==0){var rt=((qe-Ve)*De+(Xe-Ze)*Fe)/(De*De+Fe*Fe);rt>1?(Ve=st,Ze=nt):rt>0&&(Ve+=De*rt,Ze+=Fe*rt)}return(De=qe-Ve)*De+(Fe=Xe-Ze)*Fe}function se(qe,Xe,Ve,Ze){var st={id:qe===void 0?null:qe,type:Xe,geometry:Ve,tags:Ze,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(nt){var De=nt.geometry,Fe=nt.type;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")oe(nt,De);else if(Fe==="Polygon"||Fe==="MultiLineString")for(var rt=0;rt<De.length;rt++)oe(nt,De[rt]);else if(Fe==="MultiPolygon")for(rt=0;rt<De.length;rt++)for(var tt=0;tt<De[rt].length;tt++)oe(nt,De[rt][tt])}(st),st}function oe(qe,Xe){for(var Ve=0;Ve<Xe.length;Ve+=3)qe.minX=Math.min(qe.minX,Xe[Ve]),qe.minY=Math.min(qe.minY,Xe[Ve+1]),qe.maxX=Math.max(qe.maxX,Xe[Ve]),qe.maxY=Math.max(qe.maxY,Xe[Ve+1])}function fe(qe,Xe,Ve,Ze){if(Xe.geometry){var st=Xe.geometry.coordinates,nt=Xe.geometry.type,De=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),Fe=[],rt=Xe.id;if(Ve.promoteId?rt=Xe.properties[Ve.promoteId]:Ve.generateId&&(rt=Ze||0),nt==="Point")Se(st,Fe);else if(nt==="MultiPoint")for(var tt=0;tt<st.length;tt++)Se(st[tt],Fe);else if(nt==="LineString")Me(st,Fe,De,!1);else if(nt==="MultiLineString"){if(Ve.lineMetrics){for(tt=0;tt<st.length;tt++)Fe=[],Me(st[tt],Fe,De,!1),qe.push(se(rt,"LineString",Fe,Xe.properties));return}be(st,Fe,De,!1)}else if(nt==="Polygon")be(st,Fe,De,!0);else{if(nt!=="MultiPolygon"){if(nt==="GeometryCollection"){for(tt=0;tt<Xe.geometry.geometries.length;tt++)fe(qe,{id:rt,geometry:Xe.geometry.geometries[tt],properties:Xe.properties},Ve,Ze);return}throw new Error("Input data is not a valid GeoJSON object.")}for(tt=0;tt<st.length;tt++){var gt=[];be(st[tt],gt,De,!0),Fe.push(gt)}}qe.push(se(rt,nt,Fe,Xe.properties))}}function Se(qe,Xe){Xe.push(Ie(qe[0])),Xe.push(Be(qe[1])),Xe.push(0)}function Me(qe,Xe,Ve,Ze){for(var st,nt,De=0,Fe=0;Fe<qe.length;Fe++){var rt=Ie(qe[Fe][0]),tt=Be(qe[Fe][1]);Xe.push(rt),Xe.push(tt),Xe.push(0),Fe>0&&(De+=Ze?(st*tt-rt*nt)/2:Math.sqrt(Math.pow(rt-st,2)+Math.pow(tt-nt,2))),st=rt,nt=tt}var gt=Xe.length-3;Xe[2]=1,Ae(Xe,0,gt,Ve),Xe[gt+2]=1,Xe.size=Math.abs(De),Xe.start=0,Xe.end=Xe.size}function be(qe,Xe,Ve,Ze){for(var st=0;st<qe.length;st++){var nt=[];Me(qe[st],nt,Ve,Ze),Xe.push(nt)}}function Ie(qe){return qe/360+.5}function Be(qe){var Xe=Math.sin(qe*Math.PI/180),Ve=.5-.25*Math.log((1+Xe)/(1-Xe))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function ce(qe,Xe,Ve,Ze,st,nt,De,Fe){if(Ze/=Xe,nt>=(Ve/=Xe)&&De<Ze)return qe;if(De<Ve||nt>=Ze)return null;for(var rt=[],tt=0;tt<qe.length;tt++){var gt=qe[tt],dt=gt.geometry,mt=gt.type,ft=st===0?gt.minX:gt.minY,kt=st===0?gt.maxX:gt.maxY;if(ft>=Ve&&kt<Ze)rt.push(gt);else if(!(kt<Ve||ft>=Ze)){var ht=[];if(mt==="Point"||mt==="MultiPoint")Te(dt,ht,Ve,Ze,st);else if(mt==="LineString")ye(dt,ht,Ve,Ze,st,!1,Fe.lineMetrics);else if(mt==="MultiLineString")Re(dt,ht,Ve,Ze,st,!1);else if(mt==="Polygon")Re(dt,ht,Ve,Ze,st,!0);else if(mt==="MultiPolygon")for(var pt=0;pt<dt.length;pt++){var wt=[];Re(dt[pt],wt,Ve,Ze,st,!0),wt.length&&ht.push(wt)}if(ht.length){if(Fe.lineMetrics&&mt==="LineString"){for(pt=0;pt<ht.length;pt++)rt.push(se(gt.id,mt,ht[pt],gt.tags));continue}mt!=="LineString"&&mt!=="MultiLineString"||(ht.length===1?(mt="LineString",ht=ht[0]):mt="MultiLineString"),mt!=="Point"&&mt!=="MultiPoint"||(mt=ht.length===3?"Point":"MultiPoint"),rt.push(se(gt.id,mt,ht,gt.tags))}}}return rt.length?rt:null}function Te(qe,Xe,Ve,Ze,st){for(var nt=0;nt<qe.length;nt+=3){var De=qe[nt+st];De>=Ve&&De<=Ze&&(Xe.push(qe[nt]),Xe.push(qe[nt+1]),Xe.push(qe[nt+2]))}}function ye(qe,Xe,Ve,Ze,st,nt,De){for(var Fe,rt,tt=Pe(qe),gt=st===0?He:We,dt=qe.start,mt=0;mt<qe.length-3;mt+=3){var ft=qe[mt],kt=qe[mt+1],ht=qe[mt+2],pt=qe[mt+3],wt=qe[mt+4],Ft=st===0?ft:kt,Nt=st===0?pt:wt,Gt=!1;De&&(Fe=Math.sqrt(Math.pow(ft-pt,2)+Math.pow(kt-wt,2))),Ft<Ve?Nt>Ve&&(rt=gt(tt,ft,kt,pt,wt,Ve),De&&(tt.start=dt+Fe*rt)):Ft>Ze?Nt<Ze&&(rt=gt(tt,ft,kt,pt,wt,Ze),De&&(tt.start=dt+Fe*rt)):ze(tt,ft,kt,ht),Nt<Ve&&Ft>=Ve&&(rt=gt(tt,ft,kt,pt,wt,Ve),Gt=!0),Nt>Ze&&Ft<=Ze&&(rt=gt(tt,ft,kt,pt,wt,Ze),Gt=!0),!nt&&Gt&&(De&&(tt.end=dt+Fe*rt),Xe.push(tt),tt=Pe(qe)),De&&(dt+=Fe)}var an=qe.length-3;ft=qe[an],kt=qe[an+1],ht=qe[an+2],(Ft=st===0?ft:kt)>=Ve&&Ft<=Ze&&ze(tt,ft,kt,ht),an=tt.length-3,nt&&an>=3&&(tt[an]!==tt[0]||tt[an+1]!==tt[1])&&ze(tt,tt[0],tt[1],tt[2]),tt.length&&Xe.push(tt)}function Pe(qe){var Xe=[];return Xe.size=qe.size,Xe.start=qe.start,Xe.end=qe.end,Xe}function Re(qe,Xe,Ve,Ze,st,nt){for(var De=0;De<qe.length;De++)ye(qe[De],Xe,Ve,Ze,st,nt,!1)}function ze(qe,Xe,Ve,Ze){qe.push(Xe),qe.push(Ve),qe.push(Ze)}function He(qe,Xe,Ve,Ze,st,nt){var De=(nt-Xe)/(Ze-Xe);return qe.push(nt),qe.push(Ve+(st-Ve)*De),qe.push(1),De}function We(qe,Xe,Ve,Ze,st,nt){var De=(nt-Ve)/(st-Ve);return qe.push(Xe+(Ze-Xe)*De),qe.push(nt),qe.push(1),De}function Je(qe,Xe){for(var Ve=[],Ze=0;Ze<qe.length;Ze++){var st,nt=qe[Ze],De=nt.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")st=lt(nt.geometry,Xe);else if(De==="MultiLineString"||De==="Polygon"){st=[];for(var Fe=0;Fe<nt.geometry.length;Fe++)st.push(lt(nt.geometry[Fe],Xe))}else if(De==="MultiPolygon")for(st=[],Fe=0;Fe<nt.geometry.length;Fe++){for(var rt=[],tt=0;tt<nt.geometry[Fe].length;tt++)rt.push(lt(nt.geometry[Fe][tt],Xe));st.push(rt)}Ve.push(se(nt.id,De,st,nt.tags))}return Ve}function lt(qe,Xe){var Ve=[];Ve.size=qe.size,qe.start!==void 0&&(Ve.start=qe.start,Ve.end=qe.end);for(var Ze=0;Ze<qe.length;Ze+=3)Ve.push(qe[Ze]+Xe,qe[Ze+1],qe[Ze+2]);return Ve}function et(qe,Xe){if(qe.transformed)return qe;var Ve,Ze,st,nt=1<<qe.z,De=qe.x,Fe=qe.y;for(Ve=0;Ve<qe.features.length;Ve++){var rt=qe.features[Ve],tt=rt.geometry,gt=rt.type;if(rt.geometry=[],gt===1)for(Ze=0;Ze<tt.length;Ze+=2)rt.geometry.push(yt(tt[Ze],tt[Ze+1],Xe,nt,De,Fe));else for(Ze=0;Ze<tt.length;Ze++){var dt=[];for(st=0;st<tt[Ze].length;st+=2)dt.push(yt(tt[Ze][st],tt[Ze][st+1],Xe,nt,De,Fe));rt.geometry.push(dt)}}return qe.transformed=!0,qe}function yt(qe,Xe,Ve,Ze,st,nt){return[Math.round(Ve*(qe*Ze-st)),Math.round(Ve*(Xe*Ze-nt))]}function _t(qe,Xe,Ve,Ze,st){for(var nt=Xe===st.maxZoom?0:st.tolerance/((1<<Xe)*st.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:Ze,z:Xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Fe=0;Fe<qe.length;Fe++){De.numFeatures++,xt(De,qe[Fe],nt,st);var rt=qe[Fe].minX,tt=qe[Fe].minY,gt=qe[Fe].maxX,dt=qe[Fe].maxY;rt<De.minX&&(De.minX=rt),tt<De.minY&&(De.minY=tt),gt>De.maxX&&(De.maxX=gt),dt>De.maxY&&(De.maxY=dt)}return De}function xt(qe,Xe,Ve,Ze){var st=Xe.geometry,nt=Xe.type,De=[];if(nt==="Point"||nt==="MultiPoint")for(var Fe=0;Fe<st.length;Fe+=3)De.push(st[Fe]),De.push(st[Fe+1]),qe.numPoints++,qe.numSimplified++;else if(nt==="LineString")at(De,st,qe,Ve,!1,!1);else if(nt==="MultiLineString"||nt==="Polygon")for(Fe=0;Fe<st.length;Fe++)at(De,st[Fe],qe,Ve,nt==="Polygon",Fe===0);else if(nt==="MultiPolygon")for(var rt=0;rt<st.length;rt++){var tt=st[rt];for(Fe=0;Fe<tt.length;Fe++)at(De,tt[Fe],qe,Ve,!0,Fe===0)}if(De.length){var gt=Xe.tags||null;if(nt==="LineString"&&Ze.lineMetrics){for(var dt in gt={},Xe.tags)gt[dt]=Xe.tags[dt];gt.mapbox_clip_start=st.start/st.size,gt.mapbox_clip_end=st.end/st.size}var mt={geometry:De,type:nt==="Polygon"||nt==="MultiPolygon"?3:nt==="LineString"||nt==="MultiLineString"?2:1,tags:gt};Xe.id!==null&&(mt.id=Xe.id),qe.features.push(mt)}}function at(qe,Xe,Ve,Ze,st,nt){var De=Ze*Ze;if(Ze>0&&Xe.size<(st?De:Ze))Ve.numPoints+=Xe.length/3;else{for(var Fe=[],rt=0;rt<Xe.length;rt+=3)(Ze===0||Xe[rt+2]>De)&&(Ve.numSimplified++,Fe.push(Xe[rt]),Fe.push(Xe[rt+1])),Ve.numPoints++;st&&function(tt,gt){for(var dt=0,mt=0,ft=tt.length,kt=ft-2;mt<ft;kt=mt,mt+=2)dt+=(tt[mt]-tt[kt])*(tt[mt+1]+tt[kt+1]);if(dt>0===gt)for(mt=0,ft=tt.length;mt<ft/2;mt+=2){var ht=tt[mt],pt=tt[mt+1];tt[mt]=tt[ft-2-mt],tt[mt+1]=tt[ft-1-mt],tt[ft-2-mt]=ht,tt[ft-1-mt]=pt}}(Fe,nt),qe.push(Fe)}}function ot(qe,Xe){var Ve=(Xe=this.options=function(st,nt){for(var De in nt)st[De]=nt[De];return st}(Object.create(this.options),Xe)).debug;if(Ve&&console.time("preprocess data"),Xe.maxZoom<0||Xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Xe.promoteId&&Xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ze=function(st,nt){var De=[];if(st.type==="FeatureCollection")for(var Fe=0;Fe<st.features.length;Fe++)fe(De,st.features[Fe],nt,Fe);else st.type==="Feature"?fe(De,st,nt):fe(De,{geometry:st},nt);return De}(qe,Xe);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Xe.indexMaxZoom,Xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ze=function(st,nt){var De=nt.buffer/nt.extent,Fe=st,rt=ce(st,1,-1-De,De,0,-1,2,nt),tt=ce(st,1,1-De,2+De,0,-1,2,nt);return(rt||tt)&&(Fe=ce(st,1,-De,1+De,0,-1,2,nt)||[],rt&&(Fe=Je(rt,1).concat(Fe)),tt&&(Fe=Fe.concat(Je(tt,-1)))),Fe}(Ze,Xe)).length&&this.splitTile(Ze,0,0,0),Ve&&(Ze.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function At(qe,Xe,Ve){return 32*((1<<qe)*Ve+Xe)+qe}function Ct(qe,Xe){var Ve=qe.tileID.canonical;if(!this._geoJSONIndex)return Xe(null,null);var Ze=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!Ze)return Xe(null,null);var st=new h(Ze.features),nt=d(st);nt.byteOffset===0&&nt.byteLength===nt.buffer.byteLength||(nt=new Uint8Array(nt)),Xe(null,{vectorTile:st,rawData:nt.buffer})}ne.prototype.load=function(qe){var Xe=this.options,Ve=Xe.log,Ze=Xe.minZoom,st=Xe.maxZoom,nt=Xe.nodeSize;Ve&&console.time("total time");var De="prepare "+qe.length+" points";Ve&&console.time(De),this.points=qe;for(var Fe=[],rt=0;rt<qe.length;rt++)qe[rt].geometry&&Fe.push(ae(qe[rt],rt));this.trees[st+1]=new Z(Fe,ve,Le,nt,Float32Array),Ve&&console.timeEnd(De);for(var tt=st;tt>=Ze;tt--){var gt=+Date.now();Fe=this._cluster(Fe,tt),this.trees[tt]=new Z(Fe,ve,Le,nt,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",tt,Fe.length,+Date.now()-gt)}return Ve&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(qe,Xe){var Ve=((qe[0]+180)%360+360)%360-180,Ze=Math.max(-90,Math.min(90,qe[1])),st=qe[2]===180?180:((qe[2]+180)%360+360)%360-180,nt=Math.max(-90,Math.min(90,qe[3]));if(qe[2]-qe[0]>=360)Ve=-180,st=180;else if(Ve>st){var De=this.getClusters([Ve,Ze,180,nt],Xe),Fe=this.getClusters([-180,Ze,st,nt],Xe);return De.concat(Fe)}for(var rt=this.trees[this._limitZoom(Xe)],tt=[],gt=0,dt=rt.range(de(Ve),xe(nt),de(st),xe(Ze));gt<dt.length;gt+=1){var mt=dt[gt],ft=rt.points[mt];tt.push(ft.numPoints?ue(ft):this.points[ft.index])}return tt},ne.prototype.getChildren=function(qe){var Xe=this._getOriginId(qe),Ve=this._getOriginZoom(qe),Ze="No cluster with the specified id.",st=this.trees[Ve];if(!st)throw new Error(Ze);var nt=st.points[Xe];if(!nt)throw new Error(Ze);for(var De=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),Fe=[],rt=0,tt=st.within(nt.x,nt.y,De);rt<tt.length;rt+=1){var gt=tt[rt],dt=st.points[gt];dt.parentId===qe&&Fe.push(dt.numPoints?ue(dt):this.points[dt.index])}if(Fe.length===0)throw new Error(Ze);return Fe},ne.prototype.getLeaves=function(qe,Xe,Ve){Xe=Xe||10,Ve=Ve||0;var Ze=[];return this._appendLeaves(Ze,qe,Xe,Ve,0),Ze},ne.prototype.getTile=function(qe,Xe,Ve){var Ze=this.trees[this._limitZoom(qe)],st=Math.pow(2,qe),nt=this.options,De=nt.extent,Fe=nt.radius/De,rt=(Ve-Fe)/st,tt=(Ve+1+Fe)/st,gt={features:[]};return this._addTileFeatures(Ze.range((Xe-Fe)/st,rt,(Xe+1+Fe)/st,tt),Ze.points,Xe,Ve,st,gt),Xe===0&&this._addTileFeatures(Ze.range(1-Fe/st,rt,1,tt),Ze.points,st,Ve,st,gt),Xe===st-1&&this._addTileFeatures(Ze.range(0,rt,Fe/st,tt),Ze.points,-1,Ve,st,gt),gt.features.length?gt:null},ne.prototype.getClusterExpansionZoom=function(qe){for(var Xe=this._getOriginZoom(qe)-1;Xe<=this.options.maxZoom;){var Ve=this.getChildren(qe);if(Xe++,Ve.length!==1)break;qe=Ve[0].properties.cluster_id}return Xe},ne.prototype._appendLeaves=function(qe,Xe,Ve,Ze,st){for(var nt=0,De=this.getChildren(Xe);nt<De.length;nt+=1){var Fe=De[nt],rt=Fe.properties;if(rt&&rt.cluster?st+rt.point_count<=Ze?st+=rt.point_count:st=this._appendLeaves(qe,rt.cluster_id,Ve,Ze,st):st<Ze?st++:qe.push(Fe),qe.length===Ve)break}return st},ne.prototype._addTileFeatures=function(qe,Xe,Ve,Ze,st,nt){for(var De=0,Fe=qe;De<Fe.length;De+=1){var rt=Xe[Fe[De]],tt=rt.numPoints,gt={type:1,geometry:[[Math.round(this.options.extent*(rt.x*st-Ve)),Math.round(this.options.extent*(rt.y*st-Ze))]],tags:tt?he(rt):this.points[rt.index].properties},dt=void 0;tt?dt=rt.id:this.options.generateId?dt=rt.index:this.points[rt.index].id&&(dt=this.points[rt.index].id),dt!==void 0&&(gt.id=dt),nt.features.push(gt)}},ne.prototype._limitZoom=function(qe){return Math.max(this.options.minZoom,Math.min(qe,this.options.maxZoom+1))},ne.prototype._cluster=function(qe,Xe){for(var Ve=[],Ze=this.options,st=Ze.radius,nt=Ze.extent,De=Ze.reduce,Fe=st/(nt*Math.pow(2,Xe)),rt=0;rt<qe.length;rt++){var tt=qe[rt];if(!(tt.zoom<=Xe)){tt.zoom=Xe;for(var gt=this.trees[Xe+1],dt=gt.within(tt.x,tt.y,Fe),mt=tt.numPoints||1,ft=tt.x*mt,kt=tt.y*mt,ht=De&&mt>1?this._map(tt,!0):null,pt=(rt<<5)+(Xe+1)+this.points.length,wt=0,Ft=dt;wt<Ft.length;wt+=1){var Nt=Ft[wt],Gt=gt.points[Nt];if(!(Gt.zoom<=Xe)){Gt.zoom=Xe;var an=Gt.numPoints||1;ft+=Gt.x*an,kt+=Gt.y*an,mt+=an,Gt.parentId=pt,De&&(ht||(ht=this._map(tt,!0)),De(ht,this._map(Gt)))}}mt===1?Ve.push(tt):(tt.parentId=pt,Ve.push(re(ft/mt,kt/mt,pt,mt,ht)))}}return Ve},ne.prototype._getOriginId=function(qe){return qe-this.points.length>>5},ne.prototype._getOriginZoom=function(qe){return(qe-this.points.length)%32},ne.prototype._map=function(qe,Xe){if(qe.numPoints)return Xe?me({},qe.properties):qe.properties;var Ve=this.points[qe.index].properties,Ze=this.options.map(Ve);return Xe&&Ze===Ve?me({},Ze):Ze},ot.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ot.prototype.splitTile=function(qe,Xe,Ve,Ze,st,nt,De){for(var Fe=[qe,Xe,Ve,Ze],rt=this.options,tt=rt.debug;Fe.length;){Ze=Fe.pop(),Ve=Fe.pop(),Xe=Fe.pop(),qe=Fe.pop();var gt=1<<Xe,dt=At(Xe,Ve,Ze),mt=this.tiles[dt];if(!mt&&(tt>1&&console.time("creation"),mt=this.tiles[dt]=_t(qe,Xe,Ve,Ze,rt),this.tileCoords.push({z:Xe,x:Ve,y:Ze}),tt)){tt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Xe,Ve,Ze,mt.numFeatures,mt.numPoints,mt.numSimplified),console.timeEnd("creation"));var ft="z"+Xe;this.stats[ft]=(this.stats[ft]||0)+1,this.total++}if(mt.source=qe,st){if(Xe===rt.maxZoom||Xe===st)continue;var kt=1<<st-Xe;if(Ve!==Math.floor(nt/kt)||Ze!==Math.floor(De/kt))continue}else if(Xe===rt.indexMaxZoom||mt.numPoints<=rt.indexMaxPoints)continue;if(mt.source=null,qe.length!==0){tt>1&&console.time("clipping");var ht,pt,wt,Ft,Nt,Gt,an=.5*rt.buffer/rt.extent,Wt=.5-an,Yt=.5+an,en=1+an;ht=pt=wt=Ft=null,Nt=ce(qe,gt,Ve-an,Ve+Yt,0,mt.minX,mt.maxX,rt),Gt=ce(qe,gt,Ve+Wt,Ve+en,0,mt.minX,mt.maxX,rt),qe=null,Nt&&(ht=ce(Nt,gt,Ze-an,Ze+Yt,1,mt.minY,mt.maxY,rt),pt=ce(Nt,gt,Ze+Wt,Ze+en,1,mt.minY,mt.maxY,rt),Nt=null),Gt&&(wt=ce(Gt,gt,Ze-an,Ze+Yt,1,mt.minY,mt.maxY,rt),Ft=ce(Gt,gt,Ze+Wt,Ze+en,1,mt.minY,mt.maxY,rt),Gt=null),tt>1&&console.timeEnd("clipping"),Fe.push(ht||[],Xe+1,2*Ve,2*Ze),Fe.push(pt||[],Xe+1,2*Ve,2*Ze+1),Fe.push(wt||[],Xe+1,2*Ve+1,2*Ze),Fe.push(Ft||[],Xe+1,2*Ve+1,2*Ze+1)}}},ot.prototype.getTile=function(qe,Xe,Ve){var Ze=this.options,st=Ze.extent,nt=Ze.debug;if(qe<0||qe>24)return null;var De=1<<qe,Fe=At(qe,Xe=(Xe%De+De)%De,Ve);if(this.tiles[Fe])return et(this.tiles[Fe],st);nt>1&&console.log("drilling down to z%d-%d-%d",qe,Xe,Ve);for(var rt,tt=qe,gt=Xe,dt=Ve;!rt&&tt>0;)tt--,gt=Math.floor(gt/2),dt=Math.floor(dt/2),rt=this.tiles[At(tt,gt,dt)];return rt&&rt.source?(nt>1&&console.log("found parent tile z%d-%d-%d",tt,gt,dt),nt>1&&console.time("drilling down"),this.splitTile(rt.source,tt,gt,dt,qe,Xe,Ve),nt>1&&console.timeEnd("drilling down"),this.tiles[Fe]?et(this.tiles[Fe],st):null):null};var zt=function(qe){function Xe(Ve,Ze,st,nt){qe.call(this,Ve,Ze,st,Ct),nt&&(this.loadGeoJSON=nt)}return qe&&(Xe.__proto__=qe),Xe.prototype=Object.create(qe&&qe.prototype),Xe.prototype.constructor=Xe,Xe.prototype.loadData=function(Ve,Ze){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ze,this._pendingLoadDataParams=Ve,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Xe.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ze=this._pendingCallback,st=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var nt=!!(st&&st.request&&st.request.collectResourceTiming)&&new l.RequestPerformance(st.request);this.loadGeoJSON(st,function(De,Fe){if(De||!Fe)return Ze(De);if(typeof Fe!="object")return Ze(new Error("Input data given to '"+st.source+"' is not a valid GeoJSON object."));u(Fe,!0);try{Ve._geoJSONIndex=st.cluster?new ne(function(gt){var dt=gt.superclusterOptions,mt=gt.clusterProperties;if(!mt||!dt)return dt;for(var ft={},kt={},ht={accumulated:null,zoom:0},pt={properties:null},wt=Object.keys(mt),Ft=0,Nt=wt;Ft<Nt.length;Ft+=1){var Gt=Nt[Ft],an=mt[Gt],Wt=an[0],Yt=an[1],en=l.createExpression(Yt),Tn=l.createExpression(typeof Wt=="string"?[Wt,["accumulated"],["get",Gt]]:Wt);ft[Gt]=en.value,kt[Gt]=Tn.value}return dt.map=function(Bn){pt.properties=Bn;for(var mn={},Kt=0,cn=wt;Kt<cn.length;Kt+=1){var tn=cn[Kt];mn[tn]=ft[tn].evaluate(ht,pt)}return mn},dt.reduce=function(Bn,mn){pt.properties=mn;for(var Kt=0,cn=wt;Kt<cn.length;Kt+=1){var tn=cn[Kt];ht.accumulated=Bn[tn],Bn[tn]=kt[tn].evaluate(ht,pt)}},dt}(st)).load(Fe.features):function(gt,dt){return new ot(gt,dt)}(Fe,st.geojsonVtOptions)}catch(gt){return Ze(gt)}Ve.loaded={};var rt={};if(nt){var tt=nt.finish();tt&&(rt.resourceTiming={},rt.resourceTiming[st.source]=JSON.parse(JSON.stringify(tt)))}Ze(null,rt)})}},Xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Xe.prototype.reloadTile=function(Ve,Ze){var st=this.loaded,nt=Ve.uid;return st&&st[nt]?qe.prototype.reloadTile.call(this,Ve,Ze):this.loadTile(Ve,Ze)},Xe.prototype.loadGeoJSON=function(Ve,Ze){if(Ve.request)l.getJSON(Ve.request,Ze);else{if(typeof Ve.data!="string")return Ze(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return Ze(null,JSON.parse(Ve.data))}catch{return Ze(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},Xe.prototype.removeSource=function(Ve,Ze){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ze()},Xe.prototype.getClusterExpansionZoom=function(Ve,Ze){try{Ze(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(st){Ze(st)}},Xe.prototype.getClusterChildren=function(Ve,Ze){try{Ze(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(st){Ze(st)}},Xe.prototype.getClusterLeaves=function(Ve,Ze){try{Ze(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(st){Ze(st)}},Xe}(n),St=function(qe){var Xe=this;this.self=qe,this.actor=new l.Actor(qe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:n,geojson:zt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,Ze){if(Xe.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');Xe.workerSourceTypes[Ve]=Ze},this.self.registerRTLTextPlugin=function(Ve){if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=Ve.applyArabicShaping,l.plugin.processBidirectionalText=Ve.processBidirectionalText,l.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return St.prototype.setReferrer=function(qe,Xe){this.referrer=Xe},St.prototype.setImages=function(qe,Xe,Ve){for(var Ze in this.availableImages[qe]=Xe,this.workerSources[qe]){var st=this.workerSources[qe][Ze];for(var nt in st)st[nt].availableImages=Xe}Ve()},St.prototype.setLayers=function(qe,Xe,Ve){this.getLayerIndex(qe).replace(Xe),Ve()},St.prototype.updateLayers=function(qe,Xe,Ve){this.getLayerIndex(qe).update(Xe.layers,Xe.removedIds),Ve()},St.prototype.loadTile=function(qe,Xe,Ve){this.getWorkerSource(qe,Xe.type,Xe.source).loadTile(Xe,Ve)},St.prototype.loadDEMTile=function(qe,Xe,Ve){this.getDEMWorkerSource(qe,Xe.source).loadTile(Xe,Ve)},St.prototype.reloadTile=function(qe,Xe,Ve){this.getWorkerSource(qe,Xe.type,Xe.source).reloadTile(Xe,Ve)},St.prototype.abortTile=function(qe,Xe,Ve){this.getWorkerSource(qe,Xe.type,Xe.source).abortTile(Xe,Ve)},St.prototype.removeTile=function(qe,Xe,Ve){this.getWorkerSource(qe,Xe.type,Xe.source).removeTile(Xe,Ve)},St.prototype.removeDEMTile=function(qe,Xe){this.getDEMWorkerSource(qe,Xe.source).removeTile(Xe)},St.prototype.removeSource=function(qe,Xe,Ve){if(this.workerSources[qe]&&this.workerSources[qe][Xe.type]&&this.workerSources[qe][Xe.type][Xe.source]){var Ze=this.workerSources[qe][Xe.type][Xe.source];delete this.workerSources[qe][Xe.type][Xe.source],Ze.removeSource!==void 0?Ze.removeSource(Xe,Ve):Ve()}},St.prototype.loadWorkerSource=function(qe,Xe,Ve){try{this.self.importScripts(Xe.url),Ve()}catch(Ze){Ve(Ze.toString())}},St.prototype.syncRTLPluginState=function(qe,Xe,Ve){try{l.plugin.setState(Xe);var Ze=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&Ze!=null){this.self.importScripts(Ze);var st=l.plugin.isParsed();Ve(st?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ze),st)}}catch(nt){Ve(nt.toString())}},St.prototype.getAvailableImages=function(qe){var Xe=this.availableImages[qe];return Xe||(Xe=[]),Xe},St.prototype.getLayerIndex=function(qe){var Xe=this.layerIndexes[qe];return Xe||(Xe=this.layerIndexes[qe]=new f),Xe},St.prototype.getWorkerSource=function(qe,Xe,Ve){var Ze=this;if(this.workerSources[qe]||(this.workerSources[qe]={}),this.workerSources[qe][Xe]||(this.workerSources[qe][Xe]={}),!this.workerSources[qe][Xe][Ve]){var st={send:function(nt,De,Fe){Ze.actor.send(nt,De,Fe,qe)}};this.workerSources[qe][Xe][Ve]=new this.workerSourceTypes[Xe](st,this.getLayerIndex(qe),this.getAvailableImages(qe))}return this.workerSources[qe][Xe][Ve]},St.prototype.getDEMWorkerSource=function(qe,Xe){return this.demWorkerSources[qe]||(this.demWorkerSources[qe]={}),this.demWorkerSources[qe][Xe]||(this.demWorkerSources[qe][Xe]=new a),this.demWorkerSources[qe][Xe]},St.prototype.enforceCacheSizeLimit=function(qe,Xe){l.enforceCacheSizeLimit(Xe)},typeof WorkerGlobalScope<"u"&&l.window!==void 0&&l.window instanceof WorkerGlobalScope&&(l.window.worker=new St(l.window)),St}),M(0,function(l){var _=l.createCommonjsModule(function(R){function U(pe){return!j(pe)}function j(pe){return typeof window<"u"&&typeof document<"u"?Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var B,ee,ie=new Blob([""],{type:"text/javascript"}),ge=URL.createObjectURL(ie);try{ee=new Worker(ge),B=!0}catch{B=!1}return ee&&ee.terminate(),URL.revokeObjectURL(ge),B}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var B=document.createElement("canvas");B.width=B.height=1;var ee=B.getContext("2d");if(!ee)return!1;var ie=ee.getImageData(0,0,1,1);return ie&&ie.width===B.width}()?(ke=pe&&pe.failIfMajorPerformanceCaveat,K[ke]===void 0&&(K[ke]=function(B){var ee=function(ge){var _e=document.createElement("canvas"),Ce=Object.create(U.webGLContextAttributes);return Ce.failIfMajorPerformanceCaveat=ge,_e.probablySupportsContext?_e.probablySupportsContext("webgl",Ce)||_e.probablySupportsContext("experimental-webgl",Ce):_e.supportsContext?_e.supportsContext("webgl",Ce)||_e.supportsContext("experimental-webgl",Ce):_e.getContext("webgl",Ce)||_e.getContext("experimental-webgl",Ce)}(B);if(!ee)return!1;var ie=ee.createShader(ee.VERTEX_SHADER);return!(!ie||ee.isContextLost())&&(ee.shaderSource(ie,"void main() {}"),ee.compileShader(ie),ee.getShaderParameter(ie,ee.COMPILE_STATUS)===!0)}(ke)),K[ke]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support":"not a browser";var ke}R.exports?R.exports=U:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=U,window.mapboxgl.notSupportedReason=j);var K={};U.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),m={create:function(R,U,j){var K=l.window.document.createElement(R);return U!==void 0&&(K.className=U),j&&j.appendChild(K),K},createNS:function(R,U){return l.window.document.createElementNS(R,U)}},f=l.window.document.documentElement.style;function o(R){if(!f)return R[0];for(var U=0;U<R.length;U++)if(R[U]in f)return R[U];return R[0]}var e,i=o(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);m.disableDrag=function(){f&&i&&(e=f[i],f[i]="none")},m.enableDrag=function(){f&&i&&(f[i]=e)};var r=o(["transform","WebkitTransform"]);m.setTransform=function(R,U){R.style[r]=U};var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){n=!0}});l.window.addEventListener("test",s,s),l.window.removeEventListener("test",s,s)}catch{n=!1}m.addEventListener=function(R,U,j,K){K===void 0&&(K={}),"passive"in K&&n?R.addEventListener(U,j,K):R.addEventListener(U,j,K.capture)},m.removeEventListener=function(R,U,j,K){K===void 0&&(K={}),"passive"in K&&n?R.removeEventListener(U,j,K):R.removeEventListener(U,j,K.capture)};var a=function(R){R.preventDefault(),R.stopPropagation(),l.window.removeEventListener("click",a,!0)};function u(R){var U=R.userImage;return!!(U&&U.render&&U.render())&&(R.data.replace(new Uint8Array(U.data.buffer)),!0)}m.suppressClick=function(){l.window.addEventListener("click",a,!0),l.window.setTimeout(function(){l.window.removeEventListener("click",a,!0)},0)},m.mousePos=function(R,U){var j=R.getBoundingClientRect();return new l.Point(U.clientX-j.left-R.clientLeft,U.clientY-j.top-R.clientTop)},m.touchPos=function(R,U){for(var j=R.getBoundingClientRect(),K=[],pe=0;pe<U.length;pe++)K.push(new l.Point(U[pe].clientX-j.left-R.clientLeft,U[pe].clientY-j.top-R.clientTop));return K},m.mouseButton=function(R){return l.window.InstallTrigger!==void 0&&R.button===2&&R.ctrlKey&&l.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:R.button},m.remove=function(R){R.parentNode&&R.parentNode.removeChild(R)};var p=function(R){function U(){R.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.isLoaded=function(){return this.loaded},U.prototype.setLoaded=function(j){if(this.loaded!==j&&(this.loaded=j,j)){for(var K=0,pe=this.requestors;K<pe.length;K+=1){var ke=pe[K],B=ke.ids,ee=ke.callback;this._notify(B,ee)}this.requestors=[]}},U.prototype.getImage=function(j){return this.images[j]},U.prototype.addImage=function(j,K){this._validate(j,K)&&(this.images[j]=K)},U.prototype._validate=function(j,K){var pe=!0;return this._validateStretch(K.stretchX,K.data&&K.data.width)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchX" value'))),pe=!1),this._validateStretch(K.stretchY,K.data&&K.data.height)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "stretchY" value'))),pe=!1),this._validateContent(K.content,K)||(this.fire(new l.ErrorEvent(new Error('Image "'+j+'" has invalid "content" value'))),pe=!1),pe},U.prototype._validateStretch=function(j,K){if(!j)return!0;for(var pe=0,ke=0,B=j;ke<B.length;ke+=1){var ee=B[ke];if(ee[0]<pe||ee[1]<ee[0]||K<ee[1])return!1;pe=ee[1]}return!0},U.prototype._validateContent=function(j,K){return!(j&&(j.length!==4||j[0]<0||K.data.width<j[0]||j[1]<0||K.data.height<j[1]||j[2]<0||K.data.width<j[2]||j[3]<0||K.data.height<j[3]||j[2]<j[0]||j[3]<j[1]))},U.prototype.updateImage=function(j,K){var pe=this.images[j];K.version=pe.version+1,this.images[j]=K,this.updatedImages[j]=!0},U.prototype.removeImage=function(j){var K=this.images[j];delete this.images[j],delete this.patterns[j],K.userImage&&K.userImage.onRemove&&K.userImage.onRemove()},U.prototype.listImages=function(){return Object.keys(this.images)},U.prototype.getImages=function(j,K){var pe=!0;if(!this.isLoaded())for(var ke=0,B=j;ke<B.length;ke+=1){var ee=B[ke];this.images[ee]||(pe=!1)}this.isLoaded()||pe?this._notify(j,K):this.requestors.push({ids:j,callback:K})},U.prototype._notify=function(j,K){for(var pe={},ke=0,B=j;ke<B.length;ke+=1){var ee=B[ke];this.images[ee]||this.fire(new l.Event("styleimagemissing",{id:ee}));var ie=this.images[ee];ie?pe[ee]={data:ie.data.clone(),pixelRatio:ie.pixelRatio,sdf:ie.sdf,version:ie.version,stretchX:ie.stretchX,stretchY:ie.stretchY,content:ie.content,hasRenderCallback:!!(ie.userImage&&ie.userImage.render)}:l.warnOnce('Image "'+ee+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}K(null,pe)},U.prototype.getPixelSize=function(){var j=this.atlasImage;return{width:j.width,height:j.height}},U.prototype.getPattern=function(j){var K=this.patterns[j],pe=this.getImage(j);if(!pe)return null;if(K&&K.position.version===pe.version)return K.position;if(K)K.position.version=pe.version;else{var ke={w:pe.data.width+2,h:pe.data.height+2,x:0,y:0},B=new l.ImagePosition(ke,pe);this.patterns[j]={bin:ke,position:B}}return this._updatePatternAtlas(),this.patterns[j].position},U.prototype.bind=function(j){var K=j.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l.Texture(j,this.atlasImage,K.RGBA),this.atlasTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE)},U.prototype._updatePatternAtlas=function(){var j=[];for(var K in this.patterns)j.push(this.patterns[K].bin);var pe=l.potpack(j),ke=pe.w,B=pe.h,ee=this.atlasImage;for(var ie in ee.resize({width:ke||1,height:B||1}),this.patterns){var ge=this.patterns[ie].bin,_e=ge.x+1,Ce=ge.y+1,Ne=this.images[ie].data,Ue=Ne.width,Ge=Ne.height;l.RGBAImage.copy(Ne,ee,{x:0,y:0},{x:_e,y:Ce},{width:Ue,height:Ge}),l.RGBAImage.copy(Ne,ee,{x:0,y:Ge-1},{x:_e,y:Ce-1},{width:Ue,height:1}),l.RGBAImage.copy(Ne,ee,{x:0,y:0},{x:_e,y:Ce+Ge},{width:Ue,height:1}),l.RGBAImage.copy(Ne,ee,{x:Ue-1,y:0},{x:_e-1,y:Ce},{width:1,height:Ge}),l.RGBAImage.copy(Ne,ee,{x:0,y:0},{x:_e+Ue,y:Ce},{width:1,height:Ge})}this.dirty=!0},U.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},U.prototype.dispatchRenderCallbacks=function(j){for(var K=0,pe=j;K<pe.length;K+=1){var ke=pe[K];if(!this.callbackDispatchedThisFrame[ke]){this.callbackDispatchedThisFrame[ke]=!0;var B=this.images[ke];u(B)&&this.updateImage(ke,B)}}},U}(l.Evented),c=h,x=h,g=1e20;function h(R,U,j,K,pe,ke){this.fontSize=R||24,this.buffer=U===void 0?3:U,this.cutoff=K||.25,this.fontFamily=pe||"sans-serif",this.fontWeight=ke||"normal",this.radius=j||8;var B=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=B,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(B*B),this.gridInner=new Float64Array(B*B),this.f=new Float64Array(B),this.d=new Float64Array(B),this.z=new Float64Array(B+1),this.v=new Int16Array(B),this.middle=Math.round(B/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function b(R,U,j,K,pe,ke,B){for(var ee=0;ee<U;ee++){for(var ie=0;ie<j;ie++)K[ie]=R[ie*U+ee];for(v(K,pe,ke,B,j),ie=0;ie<j;ie++)R[ie*U+ee]=pe[ie]}for(ie=0;ie<j;ie++){for(ee=0;ee<U;ee++)K[ee]=R[ie*U+ee];for(v(K,pe,ke,B,U),ee=0;ee<U;ee++)R[ie*U+ee]=Math.sqrt(pe[ee])}}function v(R,U,j,K,pe){j[0]=0,K[0]=-g,K[1]=+g;for(var ke=1,B=0;ke<pe;ke++){for(var ee=(R[ke]+ke*ke-(R[j[B]]+j[B]*j[B]))/(2*ke-2*j[B]);ee<=K[B];)B--,ee=(R[ke]+ke*ke-(R[j[B]]+j[B]*j[B]))/(2*ke-2*j[B]);j[++B]=ke,K[B]=ee,K[B+1]=+g}for(ke=0,B=0;ke<pe;ke++){for(;K[B+1]<ke;)B++;U[ke]=(ke-j[B])*(ke-j[B])+R[j[B]]}}h.prototype.draw=function(R){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(R,this.buffer,this.middle);for(var U=this.ctx.getImageData(0,0,this.size,this.size),j=new Uint8ClampedArray(this.size*this.size),K=0;K<this.size*this.size;K++){var pe=U.data[4*K+3]/255;this.gridOuter[K]=pe===1?0:pe===0?g:Math.pow(Math.max(0,.5-pe),2),this.gridInner[K]=pe===1?g:pe===0?0:Math.pow(Math.max(0,pe-.5),2)}for(b(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),b(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),K=0;K<this.size*this.size;K++){var ke=this.gridOuter[K]-this.gridInner[K];j[K]=Math.max(0,Math.min(255,Math.round(255-255*(ke/this.radius+this.cutoff))))}return j},c.default=x;var y=function(R,U){this.requestManager=R,this.localIdeographFontFamily=U,this.entries={}};y.prototype.setURL=function(R){this.url=R},y.prototype.getGlyphs=function(R,U){var j=this,K=[];for(var pe in R)for(var ke=0,B=R[pe];ke<B.length;ke+=1){var ee=B[ke];K.push({stack:pe,id:ee})}l.asyncAll(K,function(ie,ge){var _e=ie.stack,Ce=ie.id,Ne=j.entries[_e];Ne||(Ne=j.entries[_e]={glyphs:{},requests:{},ranges:{}});var Ue=Ne.glyphs[Ce];if(Ue===void 0){if(Ue=j._tinySDF(Ne,_e,Ce))return Ne.glyphs[Ce]=Ue,void ge(null,{stack:_e,id:Ce,glyph:Ue});var Ge=Math.floor(Ce/256);if(256*Ge>65535)ge(new Error("glyphs > 65535 not supported"));else if(Ne.ranges[Ge])ge(null,{stack:_e,id:Ce,glyph:Ue});else{var Ye=Ne.requests[Ge];Ye||(Ye=Ne.requests[Ge]=[],y.loadGlyphRange(_e,Ge,j.url,j.requestManager,function(Qe,ct){if(ct){for(var vt in ct)j._doesCharSupportLocalGlyph(+vt)||(Ne.glyphs[+vt]=ct[+vt]);Ne.ranges[Ge]=!0}for(var Ot=0,Dt=Ye;Ot<Dt.length;Ot+=1)(0,Dt[Ot])(Qe,ct);delete Ne.requests[Ge]})),Ye.push(function(Qe,ct){Qe?ge(Qe):ct&&ge(null,{stack:_e,id:Ce,glyph:ct[Ce]||null})})}}else ge(null,{stack:_e,id:Ce,glyph:Ue})},function(ie,ge){if(ie)U(ie);else if(ge){for(var _e={},Ce=0,Ne=ge;Ce<Ne.length;Ce+=1){var Ue=Ne[Ce],Ge=Ue.stack,Ye=Ue.id,Qe=Ue.glyph;(_e[Ge]||(_e[Ge]={}))[Ye]=Qe&&{id:Qe.id,bitmap:Qe.bitmap.clone(),metrics:Qe.metrics}}U(null,_e)}})},y.prototype._doesCharSupportLocalGlyph=function(R){return!!this.localIdeographFontFamily&&(l.isChar["CJK Unified Ideographs"](R)||l.isChar["Hangul Syllables"](R)||l.isChar.Hiragana(R)||l.isChar.Katakana(R))},y.prototype._tinySDF=function(R,U,j){var K=this.localIdeographFontFamily;if(K&&this._doesCharSupportLocalGlyph(j)){var pe=R.tinySDF;if(!pe){var ke="400";/bold/i.test(U)?ke="900":/medium/i.test(U)?ke="500":/light/i.test(U)&&(ke="200"),pe=R.tinySDF=new y.TinySDF(24,3,8,.25,K,ke)}return{id:j,bitmap:new l.AlphaImage({width:30,height:30},pe.draw(String.fromCharCode(j))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},y.loadGlyphRange=function(R,U,j,K,pe){var ke=256*U,B=ke+255,ee=K.transformRequest(K.normalizeGlyphsURL(j).replace("{fontstack}",R).replace("{range}",ke+"-"+B),l.ResourceType.Glyphs);l.getArrayBuffer(ee,function(ie,ge){if(ie)pe(ie);else if(ge){for(var _e={},Ce=0,Ne=l.parseGlyphPBF(ge);Ce<Ne.length;Ce+=1){var Ue=Ne[Ce];_e[Ue.id]=Ue}pe(null,_e)}})},y.TinySDF=c;var w=function(){this.specification=l.styleSpec.light.position};w.prototype.possiblyEvaluate=function(R,U){return l.sphericalToCartesian(R.expression.evaluate(U))},w.prototype.interpolate=function(R,U,j){return{x:l.number(R.x,U.x,j),y:l.number(R.y,U.y,j),z:l.number(R.z,U.z,j)}};var d=new l.Properties({anchor:new l.DataConstantProperty(l.styleSpec.light.anchor),position:new w,color:new l.DataConstantProperty(l.styleSpec.light.color),intensity:new l.DataConstantProperty(l.styleSpec.light.intensity)}),S="-transition",T=function(R){function U(j){R.call(this),this._transitionable=new l.Transitionable(d),this.setLight(j),this._transitioning=this._transitionable.untransitioned()}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getLight=function(){return this._transitionable.serialize()},U.prototype.setLight=function(j,K){if(K===void 0&&(K={}),!this._validate(l.validateLight,j,K))for(var pe in j){var ke=j[pe];l.endsWith(pe,S)?this._transitionable.setTransition(pe.slice(0,-11),ke):this._transitionable.setValue(pe,ke)}},U.prototype.updateTransitions=function(j){this._transitioning=this._transitionable.transitioned(j,this._transitioning)},U.prototype.hasTransition=function(){return this._transitioning.hasTransition()},U.prototype.recalculate=function(j){this.properties=this._transitioning.possiblyEvaluate(j)},U.prototype._validate=function(j,K,pe){return(!pe||pe.validate!==!1)&&l.emitValidationErrors(this,j.call(l.validateStyle,l.extend({value:K,style:{glyphs:!0,sprite:!0},styleSpec:l.styleSpec})))},U}(l.Evented),E=function(R,U){this.width=R,this.height=U,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};E.prototype.getDash=function(R,U){var j=R.join(",")+String(U);return this.dashEntry[j]||(this.dashEntry[j]=this.addDash(R,U)),this.dashEntry[j]},E.prototype.getDashRanges=function(R,U,j){var K=[],pe=R.length%2==1?-R[R.length-1]*j:0,ke=R[0]*j,B=!0;K.push({left:pe,right:ke,isDash:B,zeroLength:R[0]===0});for(var ee=R[0],ie=1;ie<R.length;ie++){B=!B;var ge=R[ie];pe=ee*j,ke=(ee+=ge)*j,K.push({left:pe,right:ke,isDash:B,zeroLength:ge===0})}return K},E.prototype.addRoundDash=function(R,U,j){for(var K=U/2,pe=-j;pe<=j;pe++)for(var ke=this.nextRow+j+pe,B=this.width*ke,ee=0,ie=R[ee],ge=0;ge<this.width;ge++){ge/ie.right>1&&(ie=R[++ee]);var _e=Math.abs(ge-ie.left),Ce=Math.abs(ge-ie.right),Ne=Math.min(_e,Ce),Ue=void 0,Ge=pe/j*(K+1);if(ie.isDash){var Ye=K-Math.abs(Ge);Ue=Math.sqrt(Ne*Ne+Ye*Ye)}else Ue=K-Math.sqrt(Ne*Ne+Ge*Ge);this.data[B+ge]=Math.max(0,Math.min(255,Ue+128))}},E.prototype.addRegularDash=function(R){for(var U=R.length-1;U>=0;--U){var j=R[U],K=R[U+1];j.zeroLength?R.splice(U,1):K&&K.isDash===j.isDash&&(K.left=j.left,R.splice(U,1))}var pe=R[0],ke=R[R.length-1];pe.isDash===ke.isDash&&(pe.left=ke.left-this.width,ke.right=pe.right+this.width);for(var B=this.width*this.nextRow,ee=0,ie=R[ee],ge=0;ge<this.width;ge++){ge/ie.right>1&&(ie=R[++ee]);var _e=Math.abs(ge-ie.left),Ce=Math.abs(ge-ie.right),Ne=Math.min(_e,Ce),Ue=ie.isDash?Ne:-Ne;this.data[B+ge]=Math.max(0,Math.min(255,Ue+128))}},E.prototype.addDash=function(R,U){var j=U?7:0,K=2*j+1;if(this.nextRow+K>this.height)return l.warnOnce("LineAtlas out of space"),null;for(var pe=0,ke=0;ke<R.length;ke++)pe+=R[ke];if(pe!==0){var B=this.width/pe,ee=this.getDashRanges(R,this.width,B);U?this.addRoundDash(ee,B,j):this.addRegularDash(ee)}var ie={y:(this.nextRow+j+.5)/this.height,height:2*j/this.height,width:pe};return this.nextRow+=K,this.dirty=!0,ie},E.prototype.bind=function(R){var U=R.gl;this.texture?(U.bindTexture(U.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,U.texSubImage2D(U.TEXTURE_2D,0,0,0,this.width,this.height,U.ALPHA,U.UNSIGNED_BYTE,this.data))):(this.texture=U.createTexture(),U.bindTexture(U.TEXTURE_2D,this.texture),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_S,U.REPEAT),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_WRAP_T,U.REPEAT),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.LINEAR),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.LINEAR),U.texImage2D(U.TEXTURE_2D,0,U.ALPHA,this.width,this.height,0,U.ALPHA,U.UNSIGNED_BYTE,this.data))};var C=function R(U,j){this.workerPool=U,this.actors=[],this.currentActor=0,this.id=l.uniqueId();for(var K=this.workerPool.acquire(this.id),pe=0;pe<K.length;pe++){var ke=K[pe],B=new R.Actor(ke,j,this.id);B.name="Worker "+pe,this.actors.push(B)}};function L(R,U,j){var K=function(pe,ke){if(pe)return j(pe);if(ke){var B=l.pick(l.extend(ke,R),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ke.vector_layers&&(B.vectorLayers=ke.vector_layers,B.vectorLayerIds=B.vectorLayers.map(function(ee){return ee.id})),B.tiles=U.canonicalizeTileset(B,R.url),j(null,B)}};return R.url?l.getJSON(U.transformRequest(U.normalizeSourceURL(R.url),l.ResourceType.Source),K):l.browser.frame(function(){return K(null,R)})}C.prototype.broadcast=function(R,U,j){j=j||function(){},l.asyncAll(this.actors,function(K,pe){K.send(R,U,pe)},j)},C.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},C.prototype.remove=function(){this.actors.forEach(function(R){R.remove()}),this.actors=[],this.workerPool.release(this.id)},C.Actor=l.Actor;var O=function(R,U,j){this.bounds=l.LngLatBounds.convert(this.validateBounds(R)),this.minzoom=U||0,this.maxzoom=j||24};O.prototype.validateBounds=function(R){return Array.isArray(R)&&R.length===4?[Math.max(-180,R[0]),Math.max(-90,R[1]),Math.min(180,R[2]),Math.min(90,R[3])]:[-180,-90,180,90]},O.prototype.contains=function(R){var U=Math.pow(2,R.z),j=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*U),K=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*U),pe=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*U),ke=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*U);return R.x>=j&&R.x<pe&&R.y>=K&&R.y<ke};var z=function(R){function U(j,K,pe,ke){if(R.call(this),this.id=j,this.dispatcher=pe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(K,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},K),this._collectResourceTiming=K.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ke)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(K,pe){j._tileJSONRequest=null,j._loaded=!0,K?j.fire(new l.ErrorEvent(K)):pe&&(l.extend(j,pe),pe.bounds&&(j.tileBounds=new O(pe.bounds,j.minzoom,j.maxzoom)),l.postTurnstileEvent(pe.tiles,j.map._requestManager._customAccessToken),l.postMapLoadEvent(pe.tiles,j.map._getMapId(),j.map._requestManager._skuToken,j.map._requestManager._customAccessToken),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.loaded=function(){return this._loaded},U.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return l.extend({},this._options)},U.prototype.loadTile=function(j,K){var pe=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme)),ke={request:this.map._requestManager.transformRequest(pe,l.ResourceType.Tile),uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,tileSize:this.tileSize*j.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function B(ee,ie){return delete j.request,j.aborted?K(null):ee&&ee.status!==404?K(ee):(ie&&ie.resourceTiming&&(j.resourceTiming=ie.resourceTiming),this.map._refreshExpiredTiles&&ie&&j.setExpiryData(ie),j.loadVectorData(ie,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),K(null),void(j.reloadCallback&&(this.loadTile(j,j.reloadCallback),j.reloadCallback=null)))}ke.request.collectResourceTiming=this._collectResourceTiming,j.actor&&j.state!=="expired"?j.state==="loading"?j.reloadCallback=K:j.request=j.actor.send("reloadTile",ke,B.bind(this)):(j.actor=this.dispatcher.getActor(),j.request=j.actor.send("loadTile",ke,B.bind(this)))},U.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.actor&&j.actor.send("abortTile",{uid:j.uid,type:this.type,source:this.id},void 0)},U.prototype.unloadTile=function(j){j.unloadVectorData(),j.actor&&j.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id},void 0)},U.prototype.hasTransition=function(){return!1},U}(l.Evented),G=function(R){function U(j,K,pe,ke){R.call(this),this.id=j,this.dispatcher=pe,this.setEventedParent(ke),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},K),l.extend(this,l.pick(K,["url","scheme","tileSize"]))}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=L(this._options,this.map._requestManager,function(K,pe){j._tileJSONRequest=null,j._loaded=!0,K?j.fire(new l.ErrorEvent(K)):pe&&(l.extend(j,pe),pe.bounds&&(j.tileBounds=new O(pe.bounds,j.minzoom,j.maxzoom)),l.postTurnstileEvent(pe.tiles),l.postMapLoadEvent(pe.tiles,j.map._getMapId(),j.map._requestManager._skuToken),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),j.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})},U.prototype.loaded=function(){return this._loaded},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},U.prototype.serialize=function(){return l.extend({},this._options)},U.prototype.hasTile=function(j){return!this.tileBounds||this.tileBounds.contains(j.canonical)},U.prototype.loadTile=function(j,K){var pe=this,ke=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);j.request=l.getImage(this.map._requestManager.transformRequest(ke,l.ResourceType.Tile),function(B,ee){if(delete j.request,j.aborted)j.state="unloaded",K(null);else if(B)j.state="errored",K(B);else if(ee){pe.map._refreshExpiredTiles&&j.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;var ie=pe.map.painter.context,ge=ie.gl;j.texture=pe.map.painter.getTileTexture(ee.width),j.texture?j.texture.update(ee,{useMipmap:!0}):(j.texture=new l.Texture(ie,ee,ge.RGBA,{useMipmap:!0}),j.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE,ge.LINEAR_MIPMAP_NEAREST),ie.extTextureFilterAnisotropic&&ge.texParameterf(ge.TEXTURE_2D,ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ie.extTextureFilterAnisotropicMax)),j.state="loaded",l.cacheEntryPossiblyAdded(pe.dispatcher),K(null)}})},U.prototype.abortTile=function(j,K){j.request&&(j.request.cancel(),delete j.request),K()},U.prototype.unloadTile=function(j,K){j.texture&&this.map.painter.saveTileTexture(j.texture),K()},U.prototype.hasTransition=function(){return!1},U}(l.Evented),I=function(R){function U(j,K,pe,ke){R.call(this,j,K,pe,ke),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},K),this.encoding=K.encoding||"mapbox"}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},U.prototype.loadTile=function(j,K){var pe=this.map._requestManager.normalizeTileURL(j.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ke(B,ee){B&&(j.state="errored",K(B)),ee&&(j.dem=ee,j.needsHillshadePrepare=!0,j.state="loaded",K(null))}j.request=l.getImage(this.map._requestManager.transformRequest(pe,l.ResourceType.Tile),(function(B,ee){if(delete j.request,j.aborted)j.state="unloaded",K(null);else if(B)j.state="errored",K(B);else if(ee){this.map._refreshExpiredTiles&&j.setExpiryData(ee),delete ee.cacheControl,delete ee.expires;var ie=l.window.ImageBitmap&&ee instanceof l.window.ImageBitmap&&l.offscreenCanvasSupported()?ee:l.browser.getImageData(ee,1),ge={uid:j.uid,coord:j.tileID,source:this.id,rawImageData:ie,encoding:this.encoding};j.actor&&j.state!=="expired"||(j.actor=this.dispatcher.getActor(),j.actor.send("loadDEMTile",ge,ke.bind(this)))}}).bind(this)),j.neighboringTiles=this._getNeighboringTiles(j.tileID)},U.prototype._getNeighboringTiles=function(j){var K=j.canonical,pe=Math.pow(2,K.z),ke=(K.x-1+pe)%pe,B=K.x===0?j.wrap-1:j.wrap,ee=(K.x+1+pe)%pe,ie=K.x+1===pe?j.wrap+1:j.wrap,ge={};return ge[new l.OverscaledTileID(j.overscaledZ,B,K.z,ke,K.y).key]={backfilled:!1},ge[new l.OverscaledTileID(j.overscaledZ,ie,K.z,ee,K.y).key]={backfilled:!1},K.y>0&&(ge[new l.OverscaledTileID(j.overscaledZ,B,K.z,ke,K.y-1).key]={backfilled:!1},ge[new l.OverscaledTileID(j.overscaledZ,j.wrap,K.z,K.x,K.y-1).key]={backfilled:!1},ge[new l.OverscaledTileID(j.overscaledZ,ie,K.z,ee,K.y-1).key]={backfilled:!1}),K.y+1<pe&&(ge[new l.OverscaledTileID(j.overscaledZ,B,K.z,ke,K.y+1).key]={backfilled:!1},ge[new l.OverscaledTileID(j.overscaledZ,j.wrap,K.z,K.x,K.y+1).key]={backfilled:!1},ge[new l.OverscaledTileID(j.overscaledZ,ie,K.z,ee,K.y+1).key]={backfilled:!1}),ge},U.prototype.unloadTile=function(j){j.demTexture&&this.map.painter.saveTileTexture(j.demTexture),j.fbo&&(j.fbo.destroy(),delete j.fbo),j.dem&&delete j.dem,delete j.neighboringTiles,j.state="unloaded",j.actor&&j.actor.send("removeDEMTile",{uid:j.uid,source:this.id})},U}(G),H=function(R){function U(j,K,pe,ke){R.call(this),this.id=j,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=pe.getActor(),this.setEventedParent(ke),this._data=K.data,this._options=l.extend({},K),this._collectResourceTiming=K.collectResourceTiming,this._resourceTiming=[],K.maxzoom!==void 0&&(this.maxzoom=K.maxzoom),K.type&&(this.type=K.type),K.attribution&&(this.attribution=K.attribution),this.promoteId=K.promoteId;var B=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:K.cluster||!1,geojsonVtOptions:{buffer:(K.buffer!==void 0?K.buffer:128)*B,tolerance:(K.tolerance!==void 0?K.tolerance:.375)*B,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:K.lineMetrics||!1,generateId:K.generateId||!1},superclusterOptions:{maxZoom:K.clusterMaxZoom!==void 0?Math.min(K.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:l.EXTENT,radius:(K.clusterRadius||50)*B,log:!1,generateId:K.generateId||!1},clusterProperties:K.clusterProperties},K.workerOptions)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(K){if(K)j.fire(new l.ErrorEvent(K));else{var pe={dataType:"source",sourceDataType:"metadata"};j._collectResourceTiming&&j._resourceTiming&&j._resourceTiming.length>0&&(pe.resourceTiming=j._resourceTiming,j._resourceTiming=[]),j.fire(new l.Event("data",pe))}})},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.setData=function(j){var K=this;return this._data=j,this.fire(new l.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(pe){if(pe)K.fire(new l.ErrorEvent(pe));else{var ke={dataType:"source",sourceDataType:"content"};K._collectResourceTiming&&K._resourceTiming&&K._resourceTiming.length>0&&(ke.resourceTiming=K._resourceTiming,K._resourceTiming=[]),K.fire(new l.Event("data",ke))}}),this},U.prototype.getClusterExpansionZoom=function(j,K){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:j,source:this.id},K),this},U.prototype.getClusterChildren=function(j,K){return this.actor.send("geojson.getClusterChildren",{clusterId:j,source:this.id},K),this},U.prototype.getClusterLeaves=function(j,K,pe,ke){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:j,limit:K,offset:pe},ke),this},U.prototype._updateWorkerData=function(j){var K=this;this._loaded=!1;var pe=l.extend({},this.workerOptions),ke=this._data;typeof ke=="string"?(pe.request=this.map._requestManager.transformRequest(l.browser.resolveURL(ke),l.ResourceType.Source),pe.request.collectResourceTiming=this._collectResourceTiming):pe.data=JSON.stringify(ke),this.actor.send(this.type+".loadData",pe,function(B,ee){K._removed||ee&&ee.abandoned||(K._loaded=!0,ee&&ee.resourceTiming&&ee.resourceTiming[K.id]&&(K._resourceTiming=ee.resourceTiming[K.id].slice(0)),K.actor.send(K.type+".coalesce",{source:pe.source},null),j(B))})},U.prototype.loaded=function(){return this._loaded},U.prototype.loadTile=function(j,K){var pe=this,ke=j.actor?"reloadTile":"loadTile";j.actor=this.actor;var B={type:this.type,uid:j.uid,tileID:j.tileID,zoom:j.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:l.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};j.request=this.actor.send(ke,B,function(ee,ie){return delete j.request,j.unloadVectorData(),j.aborted?K(null):ee?K(ee):(j.loadVectorData(ie,pe.map.painter,ke==="reloadTile"),K(null))})},U.prototype.abortTile=function(j){j.request&&(j.request.cancel(),delete j.request),j.aborted=!0},U.prototype.unloadTile=function(j){j.unloadVectorData(),this.actor.send("removeTile",{uid:j.uid,type:this.type,source:this.id})},U.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},U.prototype.serialize=function(){return l.extend({},this._options,{type:this.type,data:this._data})},U.prototype.hasTransition=function(){return!1},U}(l.Evented),N=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),F=function(R){function U(j,K,pe,ke){R.call(this),this.id=j,this.dispatcher=pe,this.coordinates=K.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ke),this.options=K}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(j,K){var pe=this;this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),function(ke,B){pe._loaded=!0,ke?pe.fire(new l.ErrorEvent(ke)):B&&(pe.image=B,j&&(pe.coordinates=j),K&&K(),pe._finishLoading())})},U.prototype.loaded=function(){return this._loaded},U.prototype.updateImage=function(j){var K=this;return this.image&&j.url?(this.options.url=j.url,this.load(j.coordinates,function(){K.texture=null}),this):this},U.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))},U.prototype.onAdd=function(j){this.map=j,this.load()},U.prototype.setCoordinates=function(j){var K=this;this.coordinates=j;var pe=j.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(B){for(var ee=1/0,ie=1/0,ge=-1/0,_e=-1/0,Ce=0,Ne=B;Ce<Ne.length;Ce+=1){var Ue=Ne[Ce];ee=Math.min(ee,Ue.x),ie=Math.min(ie,Ue.y),ge=Math.max(ge,Ue.x),_e=Math.max(_e,Ue.y)}var Ge=ge-ee,Ye=_e-ie,Qe=Math.max(Ge,Ye),ct=Math.max(0,Math.floor(-Math.log(Qe)/Math.LN2)),vt=Math.pow(2,ct);return new l.CanonicalTileID(ct,Math.floor((ee+ge)/2*vt),Math.floor((ie+_e)/2*vt))}(pe),this.minzoom=this.maxzoom=this.tileID.z;var ke=pe.map(function(B){return K.tileID.getTilePoint(B)._round()});return this._boundsArray=new l.StructArrayLayout4i8,this._boundsArray.emplaceBack(ke[0].x,ke[0].y,0,0),this._boundsArray.emplaceBack(ke[1].x,ke[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(ke[3].x,ke[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(ke[2].x,ke[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this},U.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var j=this.map.painter.context,K=j.gl;for(var pe in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new l.Texture(j,this.image,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE)),this.tiles){var ke=this.tiles[pe];ke.state!=="loaded"&&(ke.state="loaded",ke.texture=this.texture)}}},U.prototype.loadTile=function(j,K){this.tileID&&this.tileID.equals(j.tileID.canonical)?(this.tiles[String(j.tileID.wrap)]=j,j.buckets={},K(null)):(j.state="errored",K(null))},U.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},U.prototype.hasTransition=function(){return!1},U}(l.Evented),V=function(R){function U(j,K,pe,ke){R.call(this,j,K,pe,ke),this.roundZoom=!0,this.type="video",this.options=K}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){var j=this;this._loaded=!1;var K=this.options;this.urls=[];for(var pe=0,ke=K.urls;pe<ke.length;pe+=1){var B=ke[pe];this.urls.push(this.map._requestManager.transformRequest(B,l.ResourceType.Source).url)}l.getVideo(this.urls,function(ee,ie){j._loaded=!0,ee?j.fire(new l.ErrorEvent(ee)):ie&&(j.video=ie,j.video.loop=!0,j.video.addEventListener("playing",function(){j.map.triggerRepaint()}),j.map&&j.video.play(),j._finishLoading())})},U.prototype.pause=function(){this.video&&this.video.pause()},U.prototype.play=function(){this.video&&this.video.play()},U.prototype.seek=function(j){if(this.video){var K=this.video.seekable;j<K.start(0)||j>K.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+K.start(0)+" and "+K.end(0)+"-second mark."))):this.video.currentTime=j}},U.prototype.getVideo=function(){return this.video},U.prototype.onAdd=function(j){this.map||(this.map=j,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},U.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var j=this.map.painter.context,K=j.gl;for(var pe in this.boundsBuffer||(this.boundsBuffer=j.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE),K.texSubImage2D(K.TEXTURE_2D,0,0,0,K.RGBA,K.UNSIGNED_BYTE,this.video)):(this.texture=new l.Texture(j,this.video,K.RGBA),this.texture.bind(K.LINEAR,K.CLAMP_TO_EDGE)),this.tiles){var ke=this.tiles[pe];ke.state!=="loaded"&&(ke.state="loaded",ke.texture=this.texture)}}},U.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},U.prototype.hasTransition=function(){return this.video&&!this.video.paused},U}(F),W=function(R){function U(j,K,pe,ke){R.call(this,j,K,pe,ke),K.coordinates?Array.isArray(K.coordinates)&&K.coordinates.length===4&&!K.coordinates.some(function(B){return!Array.isArray(B)||B.length!==2||B.some(function(ee){return typeof ee!="number"})})||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'missing required property "coordinates"'))),K.animate&&typeof K.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'optional "animate" property must be a boolean value'))),K.canvas?typeof K.canvas=="string"||K.canvas instanceof l.window.HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError("sources."+j,null,'missing required property "canvas"'))),this.options=K,this.animate=K.animate===void 0||K.animate}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof l.window.HTMLCanvasElement?this.options.canvas:l.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},U.prototype.getCanvas=function(){return this.canvas},U.prototype.onAdd=function(j){this.map=j,this.load(),this.canvas&&this.animate&&this.play()},U.prototype.onRemove=function(){this.pause()},U.prototype.prepare=function(){var j=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,j=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,j=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var K=this.map.painter.context,pe=K.gl;for(var ke in this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,N.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(j||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new l.Texture(K,this.canvas,pe.RGBA,{premultiply:!0}),this.tiles){var B=this.tiles[ke];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture)}}},U.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},U.prototype.hasTransition=function(){return this._playing},U.prototype._hasInvalidDimensions=function(){for(var j=0,K=[this.canvas.width,this.canvas.height];j<K.length;j+=1){var pe=K[j];if(isNaN(pe)||pe<=0)return!0}return!1},U}(F),te={vector:z,raster:G,"raster-dem":I,geojson:H,video:V,image:F,canvas:W};function Q(R,U){var j=l.identity([]);return l.translate(j,j,[1,1,0]),l.scale(j,j,[.5*R.width,.5*R.height,1]),l.multiply(j,j,R.calculatePosMatrix(U.toUnwrapped()))}function X(R,U,j,K,pe,ke){var B=function(Ye,Qe,ct){if(Ye)for(var vt=0,Ot=Ye;vt<Ot.length;vt+=1){var Dt=Qe[Ot[vt]];if(Dt&&Dt.source===ct&&Dt.type==="fill-extrusion")return!0}else for(var Pt in Qe){var Vt=Qe[Pt];if(Vt.source===ct&&Vt.type==="fill-extrusion")return!0}return!1}(pe&&pe.layers,U,R.id),ee=ke.maxPitchScaleFactor(),ie=R.tilesIn(K,ee,B);ie.sort(q);for(var ge=[],_e=0,Ce=ie;_e<Ce.length;_e+=1){var Ne=Ce[_e];ge.push({wrappedTileID:Ne.tileID.wrapped().key,queryResults:Ne.tile.queryRenderedFeatures(U,j,R._state,Ne.queryGeometry,Ne.cameraQueryGeometry,Ne.scale,pe,ke,ee,Q(R.transform,Ne.tileID))})}var Ue=function(Ye){for(var Qe={},ct={},vt=0,Ot=Ye;vt<Ot.length;vt+=1){var Dt=Ot[vt],Pt=Dt.queryResults,Vt=Dt.wrappedTileID,It=ct[Vt]=ct[Vt]||{};for(var sn in Pt)for(var Jt=Pt[sn],Zt=It[sn]=It[sn]||{},Mn=Qe[sn]=Qe[sn]||[],kn=0,Yn=Jt;kn<Yn.length;kn+=1){var Zn=Yn[kn];Zt[Zn.featureIndex]||(Zt[Zn.featureIndex]=!0,Mn.push(Zn))}}return Qe}(ge);for(var Ge in Ue)Ue[Ge].forEach(function(Ye){var Qe=Ye.feature,ct=R.getFeatureState(Qe.layer["source-layer"],Qe.id);Qe.source=Qe.layer.source,Qe.layer["source-layer"]&&(Qe.sourceLayer=Qe.layer["source-layer"]),Qe.state=ct});return Ue}function q(R,U){var j=R.tileID,K=U.tileID;return j.overscaledZ-K.overscaledZ||j.canonical.y-K.canonical.y||j.wrap-K.wrap||j.canonical.x-K.canonical.x}var Z=function(R,U){this.max=R,this.onRemove=U,this.reset()};Z.prototype.reset=function(){for(var R in this.data)for(var U=0,j=this.data[R];U<j.length;U+=1){var K=j[U];K.timeout&&clearTimeout(K.timeout),this.onRemove(K.value)}return this.data={},this.order=[],this},Z.prototype.add=function(R,U,j){var K=this,pe=R.wrapped().key;this.data[pe]===void 0&&(this.data[pe]=[]);var ke={value:U,timeout:void 0};if(j!==void 0&&(ke.timeout=setTimeout(function(){K.remove(R,ke)},j)),this.data[pe].push(ke),this.order.push(pe),this.order.length>this.max){var B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this},Z.prototype.has=function(R){return R.wrapped().key in this.data},Z.prototype.getAndRemove=function(R){return this.has(R)?this._getAndRemoveByKey(R.wrapped().key):null},Z.prototype._getAndRemoveByKey=function(R){var U=this.data[R].shift();return U.timeout&&clearTimeout(U.timeout),this.data[R].length===0&&delete this.data[R],this.order.splice(this.order.indexOf(R),1),U.value},Z.prototype.getByKey=function(R){var U=this.data[R];return U?U[0].value:null},Z.prototype.get=function(R){return this.has(R)?this.data[R.wrapped().key][0].value:null},Z.prototype.remove=function(R,U){if(!this.has(R))return this;var j=R.wrapped().key,K=U===void 0?0:this.data[j].indexOf(U),pe=this.data[j][K];return this.data[j].splice(K,1),pe.timeout&&clearTimeout(pe.timeout),this.data[j].length===0&&delete this.data[j],this.onRemove(pe.value),this.order.splice(this.order.indexOf(j),1),this},Z.prototype.setMaxSize=function(R){for(this.max=R;this.order.length>this.max;){var U=this._getAndRemoveByKey(this.order[0]);U&&this.onRemove(U)}return this},Z.prototype.filter=function(R){var U=[];for(var j in this.data)for(var K=0,pe=this.data[j];K<pe.length;K+=1){var ke=pe[K];R(ke.value)||U.push(ke)}for(var B=0,ee=U;B<ee.length;B+=1){var ie=ee[B];this.remove(ie.value.tileID,ie)}};var J=function(R,U,j){this.context=R;var K=R.gl;this.buffer=K.createBuffer(),this.dynamicDraw=!!j,this.context.unbindVAO(),R.bindElementBuffer.set(this.buffer),K.bufferData(K.ELEMENT_ARRAY_BUFFER,U.arrayBuffer,this.dynamicDraw?K.DYNAMIC_DRAW:K.STATIC_DRAW),this.dynamicDraw||delete U.arrayBuffer};J.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},J.prototype.updateData=function(R){var U=this.context.gl;this.context.unbindVAO(),this.bind(),U.bufferSubData(U.ELEMENT_ARRAY_BUFFER,0,R.arrayBuffer)},J.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},re=function(R,U,j,K){this.length=U.length,this.attributes=j,this.itemSize=U.bytesPerElement,this.dynamicDraw=K,this.context=R;var pe=R.gl;this.buffer=pe.createBuffer(),R.bindVertexBuffer.set(this.buffer),pe.bufferData(pe.ARRAY_BUFFER,U.arrayBuffer,this.dynamicDraw?pe.DYNAMIC_DRAW:pe.STATIC_DRAW),this.dynamicDraw||delete U.arrayBuffer};re.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},re.prototype.updateData=function(R){var U=this.context.gl;this.bind(),U.bufferSubData(U.ARRAY_BUFFER,0,R.arrayBuffer)},re.prototype.enableAttributes=function(R,U){for(var j=0;j<this.attributes.length;j++){var K=this.attributes[j],pe=U.attributes[K.name];pe!==void 0&&R.enableVertexAttribArray(pe)}},re.prototype.setVertexAttribPointers=function(R,U,j){for(var K=0;K<this.attributes.length;K++){var pe=this.attributes[K],ke=U.attributes[pe.name];ke!==void 0&&R.vertexAttribPointer(ke,pe.components,R[ne[pe.type]],!1,this.itemSize,pe.offset+this.itemSize*(j||0))}},re.prototype.destroy=function(){var R=this.context.gl;this.buffer&&(R.deleteBuffer(this.buffer),delete this.buffer)};var ae=function(R){this.gl=R.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ae.prototype.get=function(){return this.current},ae.prototype.set=function(R){},ae.prototype.getDefault=function(){return this.default},ae.prototype.setDefault=function(){this.set(this.default)};var ue=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return l.Color.transparent},U.prototype.set=function(j){var K=this.current;(j.r!==K.r||j.g!==K.g||j.b!==K.b||j.a!==K.a||this.dirty)&&(this.gl.clearColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},U}(ae),he=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 1},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearDepth(j),this.current=j,this.dirty=!1)},U}(ae),de=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.clearStencil(j),this.current=j,this.dirty=!1)},U}(ae),xe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return[!0,!0,!0,!0]},U.prototype.set=function(j){var K=this.current;(j[0]!==K[0]||j[1]!==K[1]||j[2]!==K[2]||j[3]!==K[3]||this.dirty)&&(this.gl.colorMask(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},U}(ae),me=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthMask(j),this.current=j,this.dirty=!1)},U}(ae),ve=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 255},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.stencilMask(j),this.current=j,this.dirty=!1)},U}(ae),Le=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},U.prototype.set=function(j){var K=this.current;(j.func!==K.func||j.ref!==K.ref||j.mask!==K.mask||this.dirty)&&(this.gl.stencilFunc(j.func,j.ref,j.mask),this.current=j,this.dirty=!1)},U}(ae),Ae=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[j.KEEP,j.KEEP,j.KEEP]},U.prototype.set=function(j){var K=this.current;(j[0]!==K[0]||j[1]!==K[1]||j[2]!==K[2]||this.dirty)&&(this.gl.stencilOp(j[0],j[1],j[2]),this.current=j,this.dirty=!1)},U}(ae),we=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;j?K.enable(K.STENCIL_TEST):K.disable(K.STENCIL_TEST),this.current=j,this.dirty=!1}},U}(ae),se=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return[0,1]},U.prototype.set=function(j){var K=this.current;(j[0]!==K[0]||j[1]!==K[1]||this.dirty)&&(this.gl.depthRange(j[0],j[1]),this.current=j,this.dirty=!1)},U}(ae),oe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;j?K.enable(K.DEPTH_TEST):K.disable(K.DEPTH_TEST),this.current=j,this.dirty=!1}},U}(ae),fe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.LESS},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.depthFunc(j),this.current=j,this.dirty=!1)},U}(ae),Se=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;j?K.enable(K.BLEND):K.disable(K.BLEND),this.current=j,this.dirty=!1}},U}(ae),Me=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[j.ONE,j.ZERO]},U.prototype.set=function(j){var K=this.current;(j[0]!==K[0]||j[1]!==K[1]||this.dirty)&&(this.gl.blendFunc(j[0],j[1]),this.current=j,this.dirty=!1)},U}(ae),be=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return l.Color.transparent},U.prototype.set=function(j){var K=this.current;(j.r!==K.r||j.g!==K.g||j.b!==K.b||j.a!==K.a||this.dirty)&&(this.gl.blendColor(j.r,j.g,j.b,j.a),this.current=j,this.dirty=!1)},U}(ae),Ie=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.FUNC_ADD},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.blendEquation(j),this.current=j,this.dirty=!1)},U}(ae),Be=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;j?K.enable(K.CULL_FACE):K.disable(K.CULL_FACE),this.current=j,this.dirty=!1}},U}(ae),ce=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.BACK},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.cullFace(j),this.current=j,this.dirty=!1)},U}(ae),Te=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.CCW},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.frontFace(j),this.current=j,this.dirty=!1)},U}(ae),ye=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.useProgram(j),this.current=j,this.dirty=!1)},U}(ae),Pe=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return this.gl.TEXTURE0},U.prototype.set=function(j){(j!==this.current||this.dirty)&&(this.gl.activeTexture(j),this.current=j,this.dirty=!1)},U}(ae),Re=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){var j=this.gl;return[0,0,j.drawingBufferWidth,j.drawingBufferHeight]},U.prototype.set=function(j){var K=this.current;(j[0]!==K[0]||j[1]!==K[1]||j[2]!==K[2]||j[3]!==K[3]||this.dirty)&&(this.gl.viewport(j[0],j[1],j[2],j[3]),this.current=j,this.dirty=!1)},U}(ae),ze=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.bindFramebuffer(K.FRAMEBUFFER,j),this.current=j,this.dirty=!1}},U}(ae),He=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.bindRenderbuffer(K.RENDERBUFFER,j),this.current=j,this.dirty=!1}},U}(ae),We=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.bindTexture(K.TEXTURE_2D,j),this.current=j,this.dirty=!1}},U}(ae),Je=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.bindBuffer(K.ARRAY_BUFFER,j),this.current=j,this.dirty=!1}},U}(ae),lt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){var K=this.gl;K.bindBuffer(K.ELEMENT_ARRAY_BUFFER,j),this.current=j,this.dirty=!1},U}(ae),et=function(R){function U(j){R.call(this,j),this.vao=j.extVertexArrayObject}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U.prototype.set=function(j){this.vao&&(j!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(j),this.current=j,this.dirty=!1)},U}(ae),yt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return 4},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_ALIGNMENT,j),this.current=j,this.dirty=!1}},U}(ae),_t=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_PREMULTIPLY_ALPHA_WEBGL,j),this.current=j,this.dirty=!1}},U}(ae),xt=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return!1},U.prototype.set=function(j){if(j!==this.current||this.dirty){var K=this.gl;K.pixelStorei(K.UNPACK_FLIP_Y_WEBGL,j),this.current=j,this.dirty=!1}},U}(ae),at=function(R){function U(j,K){R.call(this,j),this.context=j,this.parent=K}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getDefault=function(){return null},U}(ae),ot=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.setDirty=function(){this.dirty=!0},U.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var K=this.gl;K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,j,0),this.current=j,this.dirty=!1}},U}(at),At=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.set=function(j){if(j!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var K=this.gl;K.framebufferRenderbuffer(K.FRAMEBUFFER,K.DEPTH_ATTACHMENT,K.RENDERBUFFER,j),this.current=j,this.dirty=!1}},U}(at),Ct=function(R,U,j,K){this.context=R,this.width=U,this.height=j;var pe=R.gl,ke=this.framebuffer=pe.createFramebuffer();this.colorAttachment=new ot(R,ke),K&&(this.depthAttachment=new At(R,ke))};Ct.prototype.destroy=function(){var R=this.context.gl,U=this.colorAttachment.get();if(U&&R.deleteTexture(U),this.depthAttachment){var j=this.depthAttachment.get();j&&R.deleteRenderbuffer(j)}R.deleteFramebuffer(this.framebuffer)};var zt=function(R,U,j){this.func=R,this.mask=U,this.range=j};zt.ReadOnly=!1,zt.ReadWrite=!0,zt.disabled=new zt(519,zt.ReadOnly,[0,1]);var St=7680,qe=function(R,U,j,K,pe,ke){this.test=R,this.ref=U,this.mask=j,this.fail=K,this.depthFail=pe,this.pass=ke};qe.disabled=new qe({func:519,mask:0},0,0,St,St,St);var Xe=function(R,U,j){this.blendFunction=R,this.blendColor=U,this.mask=j};Xe.Replace=[1,0],Xe.disabled=new Xe(Xe.Replace,l.Color.transparent,[!1,!1,!1,!1]),Xe.unblended=new Xe(Xe.Replace,l.Color.transparent,[!0,!0,!0,!0]),Xe.alphaBlended=new Xe([1,771],l.Color.transparent,[!0,!0,!0,!0]);var Ve=function(R,U,j){this.enable=R,this.mode=U,this.frontFace=j};Ve.disabled=new Ve(!1,1029,2305),Ve.backCCW=new Ve(!0,1029,2305);var Ze=function(R){this.gl=R,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ue(this),this.clearDepth=new he(this),this.clearStencil=new de(this),this.colorMask=new xe(this),this.depthMask=new me(this),this.stencilMask=new ve(this),this.stencilFunc=new Le(this),this.stencilOp=new Ae(this),this.stencilTest=new we(this),this.depthRange=new se(this),this.depthTest=new oe(this),this.depthFunc=new fe(this),this.blend=new Se(this),this.blendFunc=new Me(this),this.blendColor=new be(this),this.blendEquation=new Ie(this),this.cullFace=new Be(this),this.cullFaceSide=new ce(this),this.frontFace=new Te(this),this.program=new ye(this),this.activeTexture=new Pe(this),this.viewport=new Re(this),this.bindFramebuffer=new ze(this),this.bindRenderbuffer=new He(this),this.bindTexture=new We(this),this.bindVertexBuffer=new Je(this),this.bindElementBuffer=new lt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new et(this),this.pixelStoreUnpack=new yt(this),this.pixelStoreUnpackPremultiplyAlpha=new _t(this),this.pixelStoreUnpackFlipY=new xt(this),this.extTextureFilterAnisotropic=R.getExtension("EXT_texture_filter_anisotropic")||R.getExtension("MOZ_EXT_texture_filter_anisotropic")||R.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=R.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=R.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(R.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=R.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=R.getExtension("EXT_disjoint_timer_query")};Ze.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ze.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ze.prototype.createIndexBuffer=function(R,U){return new J(this,R,U)},Ze.prototype.createVertexBuffer=function(R,U,j){return new re(this,R,U,j)},Ze.prototype.createRenderbuffer=function(R,U,j){var K=this.gl,pe=K.createRenderbuffer();return this.bindRenderbuffer.set(pe),K.renderbufferStorage(K.RENDERBUFFER,R,U,j),this.bindRenderbuffer.set(null),pe},Ze.prototype.createFramebuffer=function(R,U,j){return new Ct(this,R,U,j)},Ze.prototype.clear=function(R){var U=R.color,j=R.depth,K=this.gl,pe=0;U&&(pe|=K.COLOR_BUFFER_BIT,this.clearColor.set(U),this.colorMask.set([!0,!0,!0,!0])),j!==void 0&&(pe|=K.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(j),this.depthMask.set(!0)),K.clear(pe)},Ze.prototype.setCullFace=function(R){R.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(R.mode),this.frontFace.set(R.frontFace))},Ze.prototype.setDepthMode=function(R){R.func!==this.gl.ALWAYS||R.mask?(this.depthTest.set(!0),this.depthFunc.set(R.func),this.depthMask.set(R.mask),this.depthRange.set(R.range)):this.depthTest.set(!1)},Ze.prototype.setStencilMode=function(R){R.test.func!==this.gl.ALWAYS||R.mask?(this.stencilTest.set(!0),this.stencilMask.set(R.mask),this.stencilOp.set([R.fail,R.depthFail,R.pass]),this.stencilFunc.set({func:R.test.func,ref:R.ref,mask:R.test.mask})):this.stencilTest.set(!1)},Ze.prototype.setColorMode=function(R){l.deepEqual(R.blendFunction,Xe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(R.blendFunction),this.blendColor.set(R.blendColor)),this.colorMask.set(R.mask)},Ze.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var st=function(R){function U(j,K,pe){var ke=this;R.call(this),this.id=j,this.dispatcher=pe,this.on("data",function(B){B.dataType==="source"&&B.sourceDataType==="metadata"&&(ke._sourceLoaded=!0),ke._sourceLoaded&&!ke._paused&&B.dataType==="source"&&B.sourceDataType==="content"&&(ke.reload(),ke.transform&&ke.update(ke.transform))}),this.on("error",function(){ke._sourceErrored=!0}),this._source=function(B,ee,ie,ge){var _e=new te[ee.type](B,ee,ie,ge);if(_e.id!==B)throw new Error("Expected Source id to be "+B+" instead of "+_e.id);return l.bindAll(["load","abort","unload","serialize","prepare"],_e),_e}(j,K,pe,this),this._tiles={},this._cache=new Z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new l.SourceFeatureState}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.onAdd=function(j){this.map=j,this._maxTileCacheSize=j?j._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(j)},U.prototype.onRemove=function(j){this._source&&this._source.onRemove&&this._source.onRemove(j)},U.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var j in this._tiles){var K=this._tiles[j];if(K.state!=="loaded"&&K.state!=="errored")return!1}return!0},U.prototype.getSource=function(){return this._source},U.prototype.pause=function(){this._paused=!0},U.prototype.resume=function(){if(this._paused){var j=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,j&&this.reload(),this.transform&&this.update(this.transform)}},U.prototype._loadTile=function(j,K){return this._source.loadTile(j,K)},U.prototype._unloadTile=function(j){if(this._source.unloadTile)return this._source.unloadTile(j,function(){})},U.prototype._abortTile=function(j){if(this._source.abortTile)return this._source.abortTile(j,function(){})},U.prototype.serialize=function(){return this._source.serialize()},U.prototype.prepare=function(j){for(var K in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var pe=this._tiles[K];pe.upload(j),pe.prepare(this.map.style.imageManager)}},U.prototype.getIds=function(){return l.values(this._tiles).map(function(j){return j.tileID}).sort(nt).map(function(j){return j.key})},U.prototype.getRenderableIds=function(j){var K=this,pe=[];for(var ke in this._tiles)this._isIdRenderable(ke,j)&&pe.push(this._tiles[ke]);return j?pe.sort(function(B,ee){var ie=B.tileID,ge=ee.tileID,_e=new l.Point(ie.canonical.x,ie.canonical.y)._rotate(K.transform.angle),Ce=new l.Point(ge.canonical.x,ge.canonical.y)._rotate(K.transform.angle);return ie.overscaledZ-ge.overscaledZ||Ce.y-_e.y||Ce.x-_e.x}).map(function(B){return B.tileID.key}):pe.map(function(B){return B.tileID}).sort(nt).map(function(B){return B.key})},U.prototype.hasRenderableParent=function(j){var K=this.findLoadedParent(j,0);return!!K&&this._isIdRenderable(K.tileID.key)},U.prototype._isIdRenderable=function(j,K){return this._tiles[j]&&this._tiles[j].hasData()&&!this._coveredTiles[j]&&(K||!this._tiles[j].holdingForFade())},U.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var j in this._cache.reset(),this._tiles)this._tiles[j].state!=="errored"&&this._reloadTile(j,"reloading")},U.prototype._reloadTile=function(j,K){var pe=this._tiles[j];pe&&(pe.state!=="loading"&&(pe.state=K),this._loadTile(pe,this._tileLoaded.bind(this,pe,j,K)))},U.prototype._tileLoaded=function(j,K,pe,ke){if(ke)return j.state="errored",void(ke.status!==404?this._source.fire(new l.ErrorEvent(ke,{tile:j})):this.update(this.transform));j.timeAdded=l.browser.now(),pe==="expired"&&(j.refreshedUponExpiration=!0),this._setTileReloadTimer(K,j),this.getSource().type==="raster-dem"&&j.dem&&this._backfillDEM(j),this._state.initializeTileState(j,this.map?this.map.painter:null),this._source.fire(new l.Event("data",{dataType:"source",tile:j,coord:j.tileID}))},U.prototype._backfillDEM=function(j){for(var K=this.getRenderableIds(),pe=0;pe<K.length;pe++){var ke=K[pe];if(j.neighboringTiles&&j.neighboringTiles[ke]){var B=this.getTileByID(ke);ee(j,B),ee(B,j)}}function ee(ie,ge){ie.needsHillshadePrepare=!0;var _e=ge.tileID.canonical.x-ie.tileID.canonical.x,Ce=ge.tileID.canonical.y-ie.tileID.canonical.y,Ne=Math.pow(2,ie.tileID.canonical.z),Ue=ge.tileID.key;_e===0&&Ce===0||Math.abs(Ce)>1||(Math.abs(_e)>1&&(Math.abs(_e+Ne)===1?_e+=Ne:Math.abs(_e-Ne)===1&&(_e-=Ne)),ge.dem&&ie.dem&&(ie.dem.backfillBorder(ge.dem,_e,Ce),ie.neighboringTiles&&ie.neighboringTiles[Ue]&&(ie.neighboringTiles[Ue].backfilled=!0)))}},U.prototype.getTile=function(j){return this.getTileByID(j.key)},U.prototype.getTileByID=function(j){return this._tiles[j]},U.prototype._retainLoadedChildren=function(j,K,pe,ke){for(var B in this._tiles){var ee=this._tiles[B];if(!(ke[B]||!ee.hasData()||ee.tileID.overscaledZ<=K||ee.tileID.overscaledZ>pe)){for(var ie=ee.tileID;ee&&ee.tileID.overscaledZ>K+1;){var ge=ee.tileID.scaledTo(ee.tileID.overscaledZ-1);(ee=this._tiles[ge.key])&&ee.hasData()&&(ie=ge)}for(var _e=ie;_e.overscaledZ>K;)if(j[(_e=_e.scaledTo(_e.overscaledZ-1)).key]){ke[ie.key]=ie;break}}}},U.prototype.findLoadedParent=function(j,K){if(j.key in this._loadedParentTiles){var pe=this._loadedParentTiles[j.key];return pe&&pe.tileID.overscaledZ>=K?pe:null}for(var ke=j.overscaledZ-1;ke>=K;ke--){var B=j.scaledTo(ke),ee=this._getLoadedTile(B);if(ee)return ee}},U.prototype._getLoadedTile=function(j){var K=this._tiles[j.key];return K&&K.hasData()?K:this._cache.getByKey(j.wrapped().key)},U.prototype.updateCacheSize=function(j){var K=(Math.ceil(j.width/this._source.tileSize)+1)*(Math.ceil(j.height/this._source.tileSize)+1),pe=Math.floor(5*K),ke=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,pe):pe;this._cache.setMaxSize(ke)},U.prototype.handleWrapJump=function(j){var K=(j-(this._prevLng===void 0?j:this._prevLng))/360,pe=Math.round(K);if(this._prevLng=j,pe){var ke={};for(var B in this._tiles){var ee=this._tiles[B];ee.tileID=ee.tileID.unwrapTo(ee.tileID.wrap+pe),ke[ee.tileID.key]=ee}for(var ie in this._tiles=ke,this._timers)clearTimeout(this._timers[ie]),delete this._timers[ie];for(var ge in this._tiles){var _e=this._tiles[ge];this._setTileReloadTimer(ge,_e)}}},U.prototype.update=function(j){var K=this;if(this.transform=j,this._sourceLoaded&&!this._paused){var pe;this.updateCacheSize(j),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?pe=j.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(It){return new l.OverscaledTileID(It.canonical.z,It.wrap,It.canonical.z,It.canonical.x,It.canonical.y)}):(pe=j.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(pe=pe.filter(function(It){return K._source.hasTile(It)}))):pe=[];var ke=j.coveringZoomLevel(this._source),B=Math.max(ke-U.maxOverzooming,this._source.minzoom),ee=Math.max(ke+U.maxUnderzooming,this._source.minzoom),ie=this._updateRetainedTiles(pe,ke);if(De(this._source.type)){for(var ge={},_e={},Ce=0,Ne=Object.keys(ie);Ce<Ne.length;Ce+=1){var Ue=Ne[Ce],Ge=ie[Ue],Ye=this._tiles[Ue];if(Ye&&!(Ye.fadeEndTime&&Ye.fadeEndTime<=l.browser.now())){var Qe=this.findLoadedParent(Ge,B);Qe&&(this._addTile(Qe.tileID),ge[Qe.tileID.key]=Qe.tileID),_e[Ue]=Ge}}for(var ct in this._retainLoadedChildren(_e,ke,ee,ie),ge)ie[ct]||(this._coveredTiles[ct]=!0,ie[ct]=ge[ct])}for(var vt in ie)this._tiles[vt].clearFadeHold();for(var Ot=0,Dt=l.keysDifference(this._tiles,ie);Ot<Dt.length;Ot+=1){var Pt=Dt[Ot],Vt=this._tiles[Pt];Vt.hasSymbolBuckets&&!Vt.holdingForFade()?Vt.setHoldDuration(this.map._fadeDuration):Vt.hasSymbolBuckets&&!Vt.symbolFadeFinished()||this._removeTile(Pt)}this._updateLoadedParentTileCache()}},U.prototype.releaseSymbolFadeTiles=function(){for(var j in this._tiles)this._tiles[j].holdingForFade()&&this._removeTile(j)},U.prototype._updateRetainedTiles=function(j,K){for(var pe={},ke={},B=Math.max(K-U.maxOverzooming,this._source.minzoom),ee=Math.max(K+U.maxUnderzooming,this._source.minzoom),ie={},ge=0,_e=j;ge<_e.length;ge+=1){var Ce=_e[ge],Ne=this._addTile(Ce);pe[Ce.key]=Ce,Ne.hasData()||K<this._source.maxzoom&&(ie[Ce.key]=Ce)}this._retainLoadedChildren(ie,K,ee,pe);for(var Ue=0,Ge=j;Ue<Ge.length;Ue+=1){var Ye=Ge[Ue],Qe=this._tiles[Ye.key];if(!Qe.hasData()){if(K+1>this._source.maxzoom){var ct=Ye.children(this._source.maxzoom)[0],vt=this.getTile(ct);if(vt&&vt.hasData()){pe[ct.key]=ct;continue}}else{var Ot=Ye.children(this._source.maxzoom);if(pe[Ot[0].key]&&pe[Ot[1].key]&&pe[Ot[2].key]&&pe[Ot[3].key])continue}for(var Dt=Qe.wasRequested(),Pt=Ye.overscaledZ-1;Pt>=B;--Pt){var Vt=Ye.scaledTo(Pt);if(ke[Vt.key]||(ke[Vt.key]=!0,!(Qe=this.getTile(Vt))&&Dt&&(Qe=this._addTile(Vt)),Qe&&(pe[Vt.key]=Vt,Dt=Qe.wasRequested(),Qe.hasData())))break}}}return pe},U.prototype._updateLoadedParentTileCache=function(){for(var j in this._loadedParentTiles={},this._tiles){for(var K=[],pe=void 0,ke=this._tiles[j].tileID;ke.overscaledZ>0;){if(ke.key in this._loadedParentTiles){pe=this._loadedParentTiles[ke.key];break}K.push(ke.key);var B=ke.scaledTo(ke.overscaledZ-1);if(pe=this._getLoadedTile(B))break;ke=B}for(var ee=0,ie=K;ee<ie.length;ee+=1){var ge=ie[ee];this._loadedParentTiles[ge]=pe}}},U.prototype._addTile=function(j){var K=this._tiles[j.key];if(K)return K;(K=this._cache.getAndRemove(j))&&(this._setTileReloadTimer(j.key,K),K.tileID=j,this._state.initializeTileState(K,this.map?this.map.painter:null),this._cacheTimers[j.key]&&(clearTimeout(this._cacheTimers[j.key]),delete this._cacheTimers[j.key],this._setTileReloadTimer(j.key,K)));var pe=!!K;return pe||(K=new l.Tile(j,this._source.tileSize*j.overscaleFactor()),this._loadTile(K,this._tileLoaded.bind(this,K,j.key,K.state))),K?(K.uses++,this._tiles[j.key]=K,pe||this._source.fire(new l.Event("dataloading",{tile:K,coord:K.tileID,dataType:"source"})),K):null},U.prototype._setTileReloadTimer=function(j,K){var pe=this;j in this._timers&&(clearTimeout(this._timers[j]),delete this._timers[j]);var ke=K.getExpiryTimeout();ke&&(this._timers[j]=setTimeout(function(){pe._reloadTile(j,"expired"),delete pe._timers[j]},ke))},U.prototype._removeTile=function(j){var K=this._tiles[j];K&&(K.uses--,delete this._tiles[j],this._timers[j]&&(clearTimeout(this._timers[j]),delete this._timers[j]),K.uses>0||(K.hasData()&&K.state!=="reloading"?this._cache.add(K.tileID,K,K.getExpiryTimeout()):(K.aborted=!0,this._abortTile(K),this._unloadTile(K))))},U.prototype.clearTiles=function(){for(var j in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(j);this._cache.reset()},U.prototype.tilesIn=function(j,K,pe){var ke=this,B=[],ee=this.transform;if(!ee)return B;for(var ie=pe?ee.getCameraQueryGeometry(j):j,ge=j.map(function(Pt){return ee.pointCoordinate(Pt)}),_e=ie.map(function(Pt){return ee.pointCoordinate(Pt)}),Ce=this.getIds(),Ne=1/0,Ue=1/0,Ge=-1/0,Ye=-1/0,Qe=0,ct=_e;Qe<ct.length;Qe+=1){var vt=ct[Qe];Ne=Math.min(Ne,vt.x),Ue=Math.min(Ue,vt.y),Ge=Math.max(Ge,vt.x),Ye=Math.max(Ye,vt.y)}for(var Ot=function(Pt){var Vt=ke._tiles[Ce[Pt]];if(!Vt.holdingForFade()){var It=Vt.tileID,sn=Math.pow(2,ee.zoom-Vt.tileID.overscaledZ),Jt=K*Vt.queryPadding*l.EXTENT/Vt.tileSize/sn,Zt=[It.getTilePoint(new l.MercatorCoordinate(Ne,Ue)),It.getTilePoint(new l.MercatorCoordinate(Ge,Ye))];if(Zt[0].x-Jt<l.EXTENT&&Zt[0].y-Jt<l.EXTENT&&Zt[1].x+Jt>=0&&Zt[1].y+Jt>=0){var Mn=ge.map(function(Yn){return It.getTilePoint(Yn)}),kn=_e.map(function(Yn){return It.getTilePoint(Yn)});B.push({tile:Vt,tileID:It,queryGeometry:Mn,cameraQueryGeometry:kn,scale:sn})}}},Dt=0;Dt<Ce.length;Dt++)Ot(Dt);return B},U.prototype.getVisibleCoordinates=function(j){for(var K=this,pe=this.getRenderableIds(j).map(function(ie){return K._tiles[ie].tileID}),ke=0,B=pe;ke<B.length;ke+=1){var ee=B[ke];ee.posMatrix=this.transform.calculatePosMatrix(ee.toUnwrapped())}return pe},U.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(De(this._source.type))for(var j in this._tiles){var K=this._tiles[j];if(K.fadeEndTime!==void 0&&K.fadeEndTime>=l.browser.now())return!0}return!1},U.prototype.setFeatureState=function(j,K,pe){j=j||"_geojsonTileLayer",this._state.updateState(j,K,pe)},U.prototype.removeFeatureState=function(j,K,pe){j=j||"_geojsonTileLayer",this._state.removeFeatureState(j,K,pe)},U.prototype.getFeatureState=function(j,K){return j=j||"_geojsonTileLayer",this._state.getState(j,K)},U.prototype.setDependencies=function(j,K,pe){var ke=this._tiles[j];ke&&ke.setDependencies(K,pe)},U.prototype.reloadTilesForDependencies=function(j,K){for(var pe in this._tiles)this._tiles[pe].hasDependency(j,K)&&this._reloadTile(pe,"reloading");this._cache.filter(function(ke){return!ke.hasDependency(j,K)})},U}(l.Evented);function nt(R,U){var j=Math.abs(2*R.wrap)-+(R.wrap<0),K=Math.abs(2*U.wrap)-+(U.wrap<0);return R.overscaledZ-U.overscaledZ||K-j||U.canonical.y-R.canonical.y||U.canonical.x-R.canonical.x}function De(R){return R==="raster"||R==="image"||R==="video"}function Fe(){return new l.window.Worker(_o.workerUrl)}st.maxOverzooming=10,st.maxUnderzooming=3;var rt="mapboxgl_preloaded_worker_pool",tt=function(){this.active={}};tt.prototype.acquire=function(R){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new Fe);return this.active[R]=!0,this.workers.slice()},tt.prototype.release=function(R){delete this.active[R],this.numActive()===0&&(this.workers.forEach(function(U){U.terminate()}),this.workers=null)},tt.prototype.isPreloaded=function(){return!!this.active[rt]},tt.prototype.numActive=function(){return Object.keys(this.active).length};var gt,dt=Math.floor(l.browser.hardwareConcurrency/2);function mt(){return gt||(gt=new tt),gt}function ft(R,U){var j={};for(var K in R)K!=="ref"&&(j[K]=R[K]);return l.refProperties.forEach(function(pe){pe in U&&(j[pe]=U[pe])}),j}function kt(R){R=R.slice();for(var U=Object.create(null),j=0;j<R.length;j++)U[R[j].id]=R[j];for(var K=0;K<R.length;K++)"ref"in R[K]&&(R[K]=ft(R[K],U[R[K].ref]));return R}tt.workerCount=Math.max(Math.min(dt,6),1);var ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function pt(R,U,j){j.push({command:ht.addSource,args:[R,U[R]]})}function wt(R,U,j){U.push({command:ht.removeSource,args:[R]}),j[R]=!0}function Ft(R,U,j,K){wt(R,j,K),pt(R,U,j)}function Nt(R,U,j){var K;for(K in R[j])if(R[j].hasOwnProperty(K)&&K!=="data"&&!l.deepEqual(R[j][K],U[j][K]))return!1;for(K in U[j])if(U[j].hasOwnProperty(K)&&K!=="data"&&!l.deepEqual(R[j][K],U[j][K]))return!1;return!0}function Gt(R,U,j,K,pe,ke){var B;for(B in U=U||{},R=R||{})R.hasOwnProperty(B)&&(l.deepEqual(R[B],U[B])||j.push({command:ke,args:[K,B,U[B],pe]}));for(B in U)U.hasOwnProperty(B)&&!R.hasOwnProperty(B)&&(l.deepEqual(R[B],U[B])||j.push({command:ke,args:[K,B,U[B],pe]}))}function an(R){return R.id}function Wt(R,U){return R[U.id]=U,R}function Yt(R,U){if(!R)return[{command:ht.setStyle,args:[U]}];var j=[];try{if(!l.deepEqual(R.version,U.version))return[{command:ht.setStyle,args:[U]}];l.deepEqual(R.center,U.center)||j.push({command:ht.setCenter,args:[U.center]}),l.deepEqual(R.zoom,U.zoom)||j.push({command:ht.setZoom,args:[U.zoom]}),l.deepEqual(R.bearing,U.bearing)||j.push({command:ht.setBearing,args:[U.bearing]}),l.deepEqual(R.pitch,U.pitch)||j.push({command:ht.setPitch,args:[U.pitch]}),l.deepEqual(R.sprite,U.sprite)||j.push({command:ht.setSprite,args:[U.sprite]}),l.deepEqual(R.glyphs,U.glyphs)||j.push({command:ht.setGlyphs,args:[U.glyphs]}),l.deepEqual(R.transition,U.transition)||j.push({command:ht.setTransition,args:[U.transition]}),l.deepEqual(R.light,U.light)||j.push({command:ht.setLight,args:[U.light]});var K={},pe=[];(function(B,ee,ie,ge){var _e;for(_e in ee=ee||{},B=B||{})B.hasOwnProperty(_e)&&(ee.hasOwnProperty(_e)||wt(_e,ie,ge));for(_e in ee)ee.hasOwnProperty(_e)&&(B.hasOwnProperty(_e)?l.deepEqual(B[_e],ee[_e])||(B[_e].type==="geojson"&&ee[_e].type==="geojson"&&Nt(B,ee,_e)?ie.push({command:ht.setGeoJSONSourceData,args:[_e,ee[_e].data]}):Ft(_e,ee,ie,ge)):pt(_e,ee,ie))})(R.sources,U.sources,pe,K);var ke=[];R.layers&&R.layers.forEach(function(B){K[B.source]?j.push({command:ht.removeLayer,args:[B.id]}):ke.push(B)}),j=j.concat(pe),function(B,ee,ie){ee=ee||[];var ge,_e,Ce,Ne,Ue,Ge,Ye,Qe=(B=B||[]).map(an),ct=ee.map(an),vt=B.reduce(Wt,{}),Ot=ee.reduce(Wt,{}),Dt=Qe.slice(),Pt=Object.create(null);for(ge=0,_e=0;ge<Qe.length;ge++)Ce=Qe[ge],Ot.hasOwnProperty(Ce)?_e++:(ie.push({command:ht.removeLayer,args:[Ce]}),Dt.splice(Dt.indexOf(Ce,_e),1));for(ge=0,_e=0;ge<ct.length;ge++)Ce=ct[ct.length-1-ge],Dt[Dt.length-1-ge]!==Ce&&(vt.hasOwnProperty(Ce)?(ie.push({command:ht.removeLayer,args:[Ce]}),Dt.splice(Dt.lastIndexOf(Ce,Dt.length-_e),1)):_e++,Ge=Dt[Dt.length-ge],ie.push({command:ht.addLayer,args:[Ot[Ce],Ge]}),Dt.splice(Dt.length-ge,0,Ce),Pt[Ce]=!0);for(ge=0;ge<ct.length;ge++)if(Ne=vt[Ce=ct[ge]],Ue=Ot[Ce],!Pt[Ce]&&!l.deepEqual(Ne,Ue))if(l.deepEqual(Ne.source,Ue.source)&&l.deepEqual(Ne["source-layer"],Ue["source-layer"])&&l.deepEqual(Ne.type,Ue.type)){for(Ye in Gt(Ne.layout,Ue.layout,ie,Ce,null,ht.setLayoutProperty),Gt(Ne.paint,Ue.paint,ie,Ce,null,ht.setPaintProperty),l.deepEqual(Ne.filter,Ue.filter)||ie.push({command:ht.setFilter,args:[Ce,Ue.filter]}),l.deepEqual(Ne.minzoom,Ue.minzoom)&&l.deepEqual(Ne.maxzoom,Ue.maxzoom)||ie.push({command:ht.setLayerZoomRange,args:[Ce,Ue.minzoom,Ue.maxzoom]}),Ne)Ne.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Gt(Ne[Ye],Ue[Ye],ie,Ce,Ye.slice(6),ht.setPaintProperty):l.deepEqual(Ne[Ye],Ue[Ye])||ie.push({command:ht.setLayerProperty,args:[Ce,Ye,Ue[Ye]]}));for(Ye in Ue)Ue.hasOwnProperty(Ye)&&!Ne.hasOwnProperty(Ye)&&Ye!=="layout"&&Ye!=="paint"&&Ye!=="filter"&&Ye!=="metadata"&&Ye!=="minzoom"&&Ye!=="maxzoom"&&(Ye.indexOf("paint.")===0?Gt(Ne[Ye],Ue[Ye],ie,Ce,Ye.slice(6),ht.setPaintProperty):l.deepEqual(Ne[Ye],Ue[Ye])||ie.push({command:ht.setLayerProperty,args:[Ce,Ye,Ue[Ye]]}))}else ie.push({command:ht.removeLayer,args:[Ce]}),Ge=Dt[Dt.lastIndexOf(Ce)+1],ie.push({command:ht.addLayer,args:[Ue,Ge]})}(ke,U.layers,j)}catch(B){console.warn("Unable to compute style diff:",B),j=[{command:ht.setStyle,args:[U]}]}return j}var en=function(R,U){this.reset(R,U)};en.prototype.reset=function(R,U){this.points=R||[],this._distances=[0];for(var j=1;j<this.points.length;j++)this._distances[j]=this._distances[j-1]+this.points[j].dist(this.points[j-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(U||0,.5*this.length),this.paddedLength=this.length-2*this.padding},en.prototype.lerp=function(R){if(this.points.length===1)return this.points[0];R=l.clamp(R,0,1);for(var U=1,j=this._distances[U],K=R*this.paddedLength+this.padding;j<K&&U<this._distances.length;)j=this._distances[++U];var pe=U-1,ke=this._distances[pe],B=j-ke,ee=B>0?(K-ke)/B:0;return this.points[pe].mult(1-ee).add(this.points[U].mult(ee))};var Tn=function(R,U,j){var K=this.boxCells=[],pe=this.circleCells=[];this.xCellCount=Math.ceil(R/j),this.yCellCount=Math.ceil(U/j);for(var ke=0;ke<this.xCellCount*this.yCellCount;ke++)K.push([]),pe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=R,this.height=U,this.xScale=this.xCellCount/R,this.yScale=this.yCellCount/U,this.boxUid=0,this.circleUid=0};function Bn(R,U,j,K,pe){var ke=l.create();return U?(l.scale(ke,ke,[1/pe,1/pe,1]),j||l.rotateZ(ke,ke,K.angle)):l.multiply(ke,K.labelPlaneMatrix,R),ke}function mn(R,U,j,K,pe){if(U){var ke=l.clone(R);return l.scale(ke,ke,[pe,pe,1]),j||l.rotateZ(ke,ke,-K.angle),ke}return K.glCoordMatrix}function Kt(R,U){var j=[R.x,R.y,0,1];ur(j,j,U);var K=j[3];return{point:new l.Point(j[0]/K,j[1]/K),signedDistanceFromCamera:K}}function cn(R,U){return .5+R/U*.5}function tn(R,U){var j=R[0]/R[3],K=R[1]/R[3];return j>=-U[0]&&j<=U[0]&&K>=-U[1]&&K<=U[1]}function un(R,U,j,K,pe,ke,B,ee){var ie=K?R.textSizeData:R.iconSizeData,ge=l.evaluateSizeForZoom(ie,j.transform.zoom),_e=[256/j.width*2+1,256/j.height*2+1],Ce=K?R.text.dynamicLayoutVertexArray:R.icon.dynamicLayoutVertexArray;Ce.clear();for(var Ne=R.lineVertexArray,Ue=K?R.text.placedSymbolArray:R.icon.placedSymbolArray,Ge=j.transform.width/j.transform.height,Ye=!1,Qe=0;Qe<Ue.length;Qe++){var ct=Ue.get(Qe);if(ct.hidden||ct.writingMode===l.WritingMode.vertical&&!Ye)tr(ct.numGlyphs,Ce);else{Ye=!1;var vt=[ct.anchorX,ct.anchorY,0,1];if(l.transformMat4(vt,vt,U),tn(vt,_e)){var Ot=vt[3],Dt=cn(j.transform.cameraToCenterDistance,Ot),Pt=l.evaluateSizeForFeature(ie,ge,ct),Vt=B?Pt/Dt:Pt*Dt,It=new l.Point(ct.anchorX,ct.anchorY),sn=Kt(It,pe).point,Jt={},Zt=Sn(ct,Vt,!1,ee,U,pe,ke,R.glyphOffsetArray,Ne,Ce,sn,It,Jt,Ge);Ye=Zt.useVertical,(Zt.notEnoughRoom||Ye||Zt.needsFlipping&&Sn(ct,Vt,!0,ee,U,pe,ke,R.glyphOffsetArray,Ne,Ce,sn,It,Jt,Ge).notEnoughRoom)&&tr(ct.numGlyphs,Ce)}else tr(ct.numGlyphs,Ce)}}K?R.text.dynamicLayoutVertexBuffer.updateData(Ce):R.icon.dynamicLayoutVertexBuffer.updateData(Ce)}function yn(R,U,j,K,pe,ke,B,ee,ie,ge,_e){var Ce=ee.glyphStartIndex+ee.numGlyphs,Ne=ee.lineStartIndex,Ue=ee.lineStartIndex+ee.lineLength,Ge=U.getoffsetX(ee.glyphStartIndex),Ye=U.getoffsetX(Ce-1),Qe=_n(R*Ge,j,K,pe,ke,B,ee.segment,Ne,Ue,ie,ge,_e);if(!Qe)return null;var ct=_n(R*Ye,j,K,pe,ke,B,ee.segment,Ne,Ue,ie,ge,_e);return ct?{first:Qe,last:ct}:null}function En(R,U,j,K){return R===l.WritingMode.horizontal&&Math.abs(j.y-U.y)>Math.abs(j.x-U.x)*K?{useVertical:!0}:(R===l.WritingMode.vertical?U.y<j.y:U.x>j.x)?{needsFlipping:!0}:null}function Sn(R,U,j,K,pe,ke,B,ee,ie,ge,_e,Ce,Ne,Ue){var Ge,Ye=U/24,Qe=R.lineOffsetX*Ye,ct=R.lineOffsetY*Ye;if(R.numGlyphs>1){var vt=R.glyphStartIndex+R.numGlyphs,Ot=R.lineStartIndex,Dt=R.lineStartIndex+R.lineLength,Pt=yn(Ye,ee,Qe,ct,j,_e,Ce,R,ie,ke,Ne);if(!Pt)return{notEnoughRoom:!0};var Vt=Kt(Pt.first.point,B).point,It=Kt(Pt.last.point,B).point;if(K&&!j){var sn=En(R.writingMode,Vt,It,Ue);if(sn)return sn}Ge=[Pt.first];for(var Jt=R.glyphStartIndex+1;Jt<vt-1;Jt++)Ge.push(_n(Ye*ee.getoffsetX(Jt),Qe,ct,j,_e,Ce,R.segment,Ot,Dt,ie,ke,Ne));Ge.push(Pt.last)}else{if(K&&!j){var Zt=Kt(Ce,pe).point,Mn=R.lineStartIndex+R.segment+1,kn=new l.Point(ie.getx(Mn),ie.gety(Mn)),Yn=Kt(kn,pe),Zn=Yn.signedDistanceFromCamera>0?Yn.point:Nn(Ce,kn,Zt,1,pe),nr=En(R.writingMode,Zt,Zn,Ue);if(nr)return nr}var sr=_n(Ye*ee.getoffsetX(R.glyphStartIndex),Qe,ct,j,_e,Ce,R.segment,R.lineStartIndex,R.lineStartIndex+R.lineLength,ie,ke,Ne);if(!sr)return{notEnoughRoom:!0};Ge=[sr]}for(var dr=0,hr=Ge;dr<hr.length;dr+=1){var yr=hr[dr];l.addDynamicAttributes(ge,yr.point,yr.angle)}return{}}function Nn(R,U,j,K,pe){var ke=Kt(R.add(R.sub(U)._unit()),pe).point,B=j.sub(ke);return j.add(B._mult(K/B.mag()))}function _n(R,U,j,K,pe,ke,B,ee,ie,ge,_e,Ce){var Ne=K?R-U:R+U,Ue=Ne>0?1:-1,Ge=0;K&&(Ue*=-1,Ge=Math.PI),Ue<0&&(Ge+=Math.PI);for(var Ye=Ue>0?ee+B:ee+B+1,Qe=pe,ct=pe,vt=0,Ot=0,Dt=Math.abs(Ne),Pt=[];vt+Ot<=Dt;){if((Ye+=Ue)<ee||Ye>=ie)return null;if(ct=Qe,Pt.push(Qe),(Qe=Ce[Ye])===void 0){var Vt=new l.Point(ge.getx(Ye),ge.gety(Ye)),It=Kt(Vt,_e);if(It.signedDistanceFromCamera>0)Qe=Ce[Ye]=It.point;else{var sn=Ye-Ue;Qe=Nn(vt===0?ke:new l.Point(ge.getx(sn),ge.gety(sn)),Vt,ct,Dt-vt+1,_e)}}vt+=Ot,Ot=ct.dist(Qe)}var Jt=(Dt-vt)/Ot,Zt=Qe.sub(ct),Mn=Zt.mult(Jt)._add(ct);Mn._add(Zt._unit()._perp()._mult(j*Ue));var kn=Ge+Math.atan2(Qe.y-ct.y,Qe.x-ct.x);return Pt.push(Mn),{point:Mn,angle:kn,path:Pt}}Tn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Tn.prototype.insert=function(R,U,j,K,pe){this._forEachCell(U,j,K,pe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(R),this.bboxes.push(U),this.bboxes.push(j),this.bboxes.push(K),this.bboxes.push(pe)},Tn.prototype.insertCircle=function(R,U,j,K){this._forEachCell(U-K,j-K,U+K,j+K,this._insertCircleCell,this.circleUid++),this.circleKeys.push(R),this.circles.push(U),this.circles.push(j),this.circles.push(K)},Tn.prototype._insertBoxCell=function(R,U,j,K,pe,ke){this.boxCells[pe].push(ke)},Tn.prototype._insertCircleCell=function(R,U,j,K,pe,ke){this.circleCells[pe].push(ke)},Tn.prototype._query=function(R,U,j,K,pe,ke){if(j<0||R>this.width||K<0||U>this.height)return!pe&&[];var B=[];if(R<=0&&U<=0&&this.width<=j&&this.height<=K){if(pe)return!0;for(var ee=0;ee<this.boxKeys.length;ee++)B.push({key:this.boxKeys[ee],x1:this.bboxes[4*ee],y1:this.bboxes[4*ee+1],x2:this.bboxes[4*ee+2],y2:this.bboxes[4*ee+3]});for(var ie=0;ie<this.circleKeys.length;ie++){var ge=this.circles[3*ie],_e=this.circles[3*ie+1],Ce=this.circles[3*ie+2];B.push({key:this.circleKeys[ie],x1:ge-Ce,y1:_e-Ce,x2:ge+Ce,y2:_e+Ce})}return ke?B.filter(ke):B}var Ne={hitTest:pe,seenUids:{box:{},circle:{}}};return this._forEachCell(R,U,j,K,this._queryCell,B,Ne,ke),pe?B.length>0:B},Tn.prototype._queryCircle=function(R,U,j,K,pe){var ke=R-j,B=R+j,ee=U-j,ie=U+j;if(B<0||ke>this.width||ie<0||ee>this.height)return!K&&[];var ge=[],_e={hitTest:K,circle:{x:R,y:U,radius:j},seenUids:{box:{},circle:{}}};return this._forEachCell(ke,ee,B,ie,this._queryCellCircle,ge,_e,pe),K?ge.length>0:ge},Tn.prototype.query=function(R,U,j,K,pe){return this._query(R,U,j,K,!1,pe)},Tn.prototype.hitTest=function(R,U,j,K,pe){return this._query(R,U,j,K,!0,pe)},Tn.prototype.hitTestCircle=function(R,U,j,K){return this._queryCircle(R,U,j,!0,K)},Tn.prototype._queryCell=function(R,U,j,K,pe,ke,B,ee){var ie=B.seenUids,ge=this.boxCells[pe];if(ge!==null)for(var _e=this.bboxes,Ce=0,Ne=ge;Ce<Ne.length;Ce+=1){var Ue=Ne[Ce];if(!ie.box[Ue]){ie.box[Ue]=!0;var Ge=4*Ue;if(R<=_e[Ge+2]&&U<=_e[Ge+3]&&j>=_e[Ge+0]&&K>=_e[Ge+1]&&(!ee||ee(this.boxKeys[Ue]))){if(B.hitTest)return ke.push(!0),!0;ke.push({key:this.boxKeys[Ue],x1:_e[Ge],y1:_e[Ge+1],x2:_e[Ge+2],y2:_e[Ge+3]})}}}var Ye=this.circleCells[pe];if(Ye!==null)for(var Qe=this.circles,ct=0,vt=Ye;ct<vt.length;ct+=1){var Ot=vt[ct];if(!ie.circle[Ot]){ie.circle[Ot]=!0;var Dt=3*Ot;if(this._circleAndRectCollide(Qe[Dt],Qe[Dt+1],Qe[Dt+2],R,U,j,K)&&(!ee||ee(this.circleKeys[Ot]))){if(B.hitTest)return ke.push(!0),!0;var Pt=Qe[Dt],Vt=Qe[Dt+1],It=Qe[Dt+2];ke.push({key:this.circleKeys[Ot],x1:Pt-It,y1:Vt-It,x2:Pt+It,y2:Vt+It})}}}},Tn.prototype._queryCellCircle=function(R,U,j,K,pe,ke,B,ee){var ie=B.circle,ge=B.seenUids,_e=this.boxCells[pe];if(_e!==null)for(var Ce=this.bboxes,Ne=0,Ue=_e;Ne<Ue.length;Ne+=1){var Ge=Ue[Ne];if(!ge.box[Ge]){ge.box[Ge]=!0;var Ye=4*Ge;if(this._circleAndRectCollide(ie.x,ie.y,ie.radius,Ce[Ye+0],Ce[Ye+1],Ce[Ye+2],Ce[Ye+3])&&(!ee||ee(this.boxKeys[Ge])))return ke.push(!0),!0}}var Qe=this.circleCells[pe];if(Qe!==null)for(var ct=this.circles,vt=0,Ot=Qe;vt<Ot.length;vt+=1){var Dt=Ot[vt];if(!ge.circle[Dt]){ge.circle[Dt]=!0;var Pt=3*Dt;if(this._circlesCollide(ct[Pt],ct[Pt+1],ct[Pt+2],ie.x,ie.y,ie.radius)&&(!ee||ee(this.circleKeys[Dt])))return ke.push(!0),!0}}},Tn.prototype._forEachCell=function(R,U,j,K,pe,ke,B,ee){for(var ie=this._convertToXCellCoord(R),ge=this._convertToYCellCoord(U),_e=this._convertToXCellCoord(j),Ce=this._convertToYCellCoord(K),Ne=ie;Ne<=_e;Ne++)for(var Ue=ge;Ue<=Ce;Ue++){var Ge=this.xCellCount*Ue+Ne;if(pe.call(this,R,U,j,K,Ge,ke,B,ee))return}},Tn.prototype._convertToXCellCoord=function(R){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(R*this.xScale)))},Tn.prototype._convertToYCellCoord=function(R){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(R*this.yScale)))},Tn.prototype._circlesCollide=function(R,U,j,K,pe,ke){var B=K-R,ee=pe-U,ie=j+ke;return ie*ie>B*B+ee*ee},Tn.prototype._circleAndRectCollide=function(R,U,j,K,pe,ke,B){var ee=(ke-K)/2,ie=Math.abs(R-(K+ee));if(ie>ee+j)return!1;var ge=(B-pe)/2,_e=Math.abs(U-(pe+ge));if(_e>ge+j)return!1;if(ie<=ee||_e<=ge)return!0;var Ce=ie-ee,Ne=_e-ge;return Ce*Ce+Ne*Ne<=j*j};var Pn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function tr(R,U){for(var j=0;j<R;j++){var K=U.length;U.resize(K+4),U.float32.set(Pn,3*K)}}function ur(R,U,j){var K=U[0],pe=U[1];return R[0]=j[0]*K+j[4]*pe+j[12],R[1]=j[1]*K+j[5]*pe+j[13],R[3]=j[3]*K+j[7]*pe+j[15],R}var lr=100,ir=function(R,U,j){U===void 0&&(U=new Tn(R.width+200,R.height+200,25)),j===void 0&&(j=new Tn(R.width+200,R.height+200,25)),this.transform=R,this.grid=U,this.ignoredGrid=j,this.pitchfactor=Math.cos(R._pitch)*R.cameraToCenterDistance,this.screenRightBoundary=R.width+lr,this.screenBottomBoundary=R.height+lr,this.gridRightBoundary=R.width+200,this.gridBottomBoundary=R.height+200};function $n(R,U,j){return U*(l.EXTENT/(R.tileSize*Math.pow(2,j-R.tileID.overscaledZ)))}ir.prototype.placeCollisionBox=function(R,U,j,K,pe){var ke=this.projectAndGetPerspectiveRatio(K,R.anchorPointX,R.anchorPointY),B=j*ke.perspectiveRatio,ee=R.x1*B+ke.point.x,ie=R.y1*B+ke.point.y,ge=R.x2*B+ke.point.x,_e=R.y2*B+ke.point.y;return!this.isInsideGrid(ee,ie,ge,_e)||!U&&this.grid.hitTest(ee,ie,ge,_e,pe)?{box:[],offscreen:!1}:{box:[ee,ie,ge,_e],offscreen:this.isOffscreen(ee,ie,ge,_e)}},ir.prototype.placeCollisionCircles=function(R,U,j,K,pe,ke,B,ee,ie,ge,_e,Ce,Ne){var Ue=[],Ge=new l.Point(U.anchorX,U.anchorY),Ye=Kt(Ge,ke),Qe=cn(this.transform.cameraToCenterDistance,Ye.signedDistanceFromCamera),ct=(ge?pe/Qe:pe*Qe)/l.ONE_EM,vt=Kt(Ge,B).point,Ot=yn(ct,K,U.lineOffsetX*ct,U.lineOffsetY*ct,!1,vt,Ge,U,j,B,{}),Dt=!1,Pt=!1,Vt=!0;if(Ot){for(var It=.5*Ce*Qe+Ne,sn=new l.Point(-100,-100),Jt=new l.Point(this.screenRightBoundary,this.screenBottomBoundary),Zt=new en,Mn=Ot.first,kn=Ot.last,Yn=[],Zn=Mn.path.length-1;Zn>=1;Zn--)Yn.push(Mn.path[Zn]);for(var nr=1;nr<kn.path.length;nr++)Yn.push(kn.path[nr]);var sr=2.5*It;if(ee){var dr=Yn.map(function(Fi){return Kt(Fi,ee)});Yn=dr.some(function(Fi){return Fi.signedDistanceFromCamera<=0})?[]:dr.map(function(Fi){return Fi.point})}var hr=[];if(Yn.length>0){for(var yr=Yn[0].clone(),Mr=Yn[0].clone(),Fr=1;Fr<Yn.length;Fr++)yr.x=Math.min(yr.x,Yn[Fr].x),yr.y=Math.min(yr.y,Yn[Fr].y),Mr.x=Math.max(Mr.x,Yn[Fr].x),Mr.y=Math.max(Mr.y,Yn[Fr].y);hr=yr.x>=sn.x&&Mr.x<=Jt.x&&yr.y>=sn.y&&Mr.y<=Jt.y?[Yn]:Mr.x<sn.x||yr.x>Jt.x||Mr.y<sn.y||yr.y>Jt.y?[]:l.clipLine([Yn],sn.x,sn.y,Jt.x,Jt.y)}for(var Jn=0,fr=hr;Jn<fr.length;Jn+=1){var xr=fr[Jn];Zt.reset(xr,.25*It);var Ar;Ar=Zt.length<=.5*It?1:Math.ceil(Zt.paddedLength/sr)+1;for(var zr=0;zr<Ar;zr++){var Hr=zr/Math.max(Ar-1,1),Kr=Zt.lerp(Hr),ri=Kr.x+lr,vi=Kr.y+lr;Ue.push(ri,vi,It,0);var mi=ri-It,ii=vi-It,Pi=ri+It,$i=vi+It;if(Vt=Vt&&this.isOffscreen(mi,ii,Pi,$i),Pt=Pt||this.isInsideGrid(mi,ii,Pi,$i),!R&&this.grid.hitTestCircle(ri,vi,It,_e)&&(Dt=!0,!ie))return{circles:[],offscreen:!1,collisionDetected:Dt}}}}return{circles:!ie&&Dt||!Pt?[]:Ue,offscreen:Vt,collisionDetected:Dt}},ir.prototype.queryRenderedSymbols=function(R){if(R.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var U=[],j=1/0,K=1/0,pe=-1/0,ke=-1/0,B=0,ee=R;B<ee.length;B+=1){var ie=ee[B],ge=new l.Point(ie.x+lr,ie.y+lr);j=Math.min(j,ge.x),K=Math.min(K,ge.y),pe=Math.max(pe,ge.x),ke=Math.max(ke,ge.y),U.push(ge)}for(var _e={},Ce={},Ne=0,Ue=this.grid.query(j,K,pe,ke).concat(this.ignoredGrid.query(j,K,pe,ke));Ne<Ue.length;Ne+=1){var Ge=Ue[Ne],Ye=Ge.key;if(_e[Ye.bucketInstanceId]===void 0&&(_e[Ye.bucketInstanceId]={}),!_e[Ye.bucketInstanceId][Ye.featureIndex]){var Qe=[new l.Point(Ge.x1,Ge.y1),new l.Point(Ge.x2,Ge.y1),new l.Point(Ge.x2,Ge.y2),new l.Point(Ge.x1,Ge.y2)];l.polygonIntersectsPolygon(U,Qe)&&(_e[Ye.bucketInstanceId][Ye.featureIndex]=!0,Ce[Ye.bucketInstanceId]===void 0&&(Ce[Ye.bucketInstanceId]=[]),Ce[Ye.bucketInstanceId].push(Ye.featureIndex))}}return Ce},ir.prototype.insertCollisionBox=function(R,U,j,K,pe){var ke={bucketInstanceId:j,featureIndex:K,collisionGroupID:pe};(U?this.ignoredGrid:this.grid).insert(ke,R[0],R[1],R[2],R[3])},ir.prototype.insertCollisionCircles=function(R,U,j,K,pe){for(var ke=U?this.ignoredGrid:this.grid,B={bucketInstanceId:j,featureIndex:K,collisionGroupID:pe},ee=0;ee<R.length;ee+=4)ke.insertCircle(B,R[ee],R[ee+1],R[ee+2])},ir.prototype.projectAndGetPerspectiveRatio=function(R,U,j){var K=[U,j,0,1];return ur(K,K,R),{point:new l.Point((K[0]/K[3]+1)/2*this.transform.width+lr,(-K[1]/K[3]+1)/2*this.transform.height+lr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/K[3]*.5}},ir.prototype.isOffscreen=function(R,U,j,K){return j<lr||R>=this.screenRightBoundary||K<lr||U>this.screenBottomBoundary},ir.prototype.isInsideGrid=function(R,U,j,K){return j>=0&&R<this.gridRightBoundary&&K>=0&&U<this.gridBottomBoundary},ir.prototype.getViewportMatrix=function(){var R=l.identity([]);return l.translate(R,R,[-100,-100,0]),R};var vr=function(R,U,j,K){this.opacity=R?Math.max(0,Math.min(1,R.opacity+(R.placed?U:-U))):K&&j?1:0,this.placed=j};vr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var jt=function(R,U,j,K,pe){this.text=new vr(R?R.text:null,U,j,pe),this.icon=new vr(R?R.icon:null,U,K,pe)};jt.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var rn=function(R,U,j){this.text=R,this.icon=U,this.skipFade=j},fn=function(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]},xn=function(R,U,j,K,pe){this.bucketInstanceId=R,this.featureIndex=U,this.sourceLayerIndex=j,this.bucketIndex=K,this.tileID=pe},Ln=function(R){this.crossSourceCollisions=R,this.maxGroupID=0,this.collisionGroups={}};function Xn(R,U,j,K,pe){var ke=l.getAnchorAlignment(R),B=-(ke.horizontalAlign-.5)*U,ee=-(ke.verticalAlign-.5)*j,ie=l.evaluateVariableOffset(R,K);return new l.Point(B+ie[0]*pe,ee+ie[1]*pe)}function Un(R,U,j,K,pe,ke){var B=R.x1,ee=R.x2,ie=R.y1,ge=R.y2,_e=R.anchorPointX,Ce=R.anchorPointY,Ne=new l.Point(U,j);return K&&Ne._rotate(pe?ke:-ke),{x1:B+Ne.x,y1:ie+Ne.y,x2:ee+Ne.x,y2:ge+Ne.y,anchorPointX:_e,anchorPointY:Ce}}Ln.prototype.get=function(R){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[R]){var U=++this.maxGroupID;this.collisionGroups[R]={ID:U,predicate:function(j){return j.collisionGroupID===U}}}return this.collisionGroups[R]};var Hn=function(R,U,j,K){this.transform=R.clone(),this.collisionIndex=new ir(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=U,this.retainedQueryData={},this.collisionGroups=new Ln(j),this.collisionCircleArrays={},this.prevPlacement=K,K&&(K.prevPlacement=void 0),this.placedOrientations={}};function Kn(R,U,j,K,pe){R.emplaceBack(U?1:0,j?1:0,K||0,pe||0),R.emplaceBack(U?1:0,j?1:0,K||0,pe||0),R.emplaceBack(U?1:0,j?1:0,K||0,pe||0),R.emplaceBack(U?1:0,j?1:0,K||0,pe||0)}Hn.prototype.getBucketParts=function(R,U,j,K){var pe=j.getBucket(U),ke=j.latestFeatureIndex;if(pe&&ke&&U.id===pe.layerIds[0]){var B=j.collisionBoxArray,ee=pe.layers[0].layout,ie=Math.pow(2,this.transform.zoom-j.tileID.overscaledZ),ge=j.tileSize/l.EXTENT,_e=this.transform.calculatePosMatrix(j.tileID.toUnwrapped()),Ce=ee.get("text-pitch-alignment")==="map",Ne=ee.get("text-rotation-alignment")==="map",Ue=$n(j,1,this.transform.zoom),Ge=Bn(_e,Ce,Ne,this.transform,Ue),Ye=null;if(Ce){var Qe=mn(_e,Ce,Ne,this.transform,Ue);Ye=l.multiply([],this.transform.labelPlaneMatrix,Qe)}this.retainedQueryData[pe.bucketInstanceId]=new xn(pe.bucketInstanceId,ke,pe.sourceLayerIndex,pe.index,j.tileID);var ct={bucket:pe,layout:ee,posMatrix:_e,textLabelPlaneMatrix:Ge,labelToScreenMatrix:Ye,scale:ie,textPixelRatio:ge,holdingForFade:j.holdingForFade(),collisionBoxArray:B,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(pe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(pe.sourceID)};if(K)for(var vt=0,Ot=pe.sortKeyRanges;vt<Ot.length;vt+=1){var Dt=Ot[vt],Pt=Dt.sortKey,Vt=Dt.symbolInstanceStart,It=Dt.symbolInstanceEnd;R.push({sortKey:Pt,symbolInstanceStart:Vt,symbolInstanceEnd:It,parameters:ct})}else R.push({symbolInstanceStart:0,symbolInstanceEnd:pe.symbolInstances.length,parameters:ct})}},Hn.prototype.attemptAnchorPlacement=function(R,U,j,K,pe,ke,B,ee,ie,ge,_e,Ce,Ne,Ue,Ge){var Ye,Qe=[Ce.textOffset0,Ce.textOffset1],ct=Xn(R,j,K,Qe,pe),vt=this.collisionIndex.placeCollisionBox(Un(U,ct.x,ct.y,ke,B,this.transform.angle),_e,ee,ie,ge.predicate);if(!Ge||this.collisionIndex.placeCollisionBox(Un(Ge,ct.x,ct.y,ke,B,this.transform.angle),_e,ee,ie,ge.predicate).box.length!==0)return vt.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Ce.crossTileID]&&this.prevPlacement.placements[Ce.crossTileID]&&this.prevPlacement.placements[Ce.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[Ce.crossTileID].anchor),this.variableOffsets[Ce.crossTileID]={textOffset:Qe,width:j,height:K,anchor:R,textBoxScale:pe,prevAnchor:Ye},this.markUsedJustification(Ne,R,Ce,Ue),Ne.allowVerticalPlacement&&(this.markUsedOrientation(Ne,Ue,Ce),this.placedOrientations[Ce.crossTileID]=Ue),{shift:ct,placedGlyphBoxes:vt}):void 0},Hn.prototype.placeLayerBucketPart=function(R,U,j){var K=this,pe=R.parameters,ke=pe.bucket,B=pe.layout,ee=pe.posMatrix,ie=pe.textLabelPlaneMatrix,ge=pe.labelToScreenMatrix,_e=pe.textPixelRatio,Ce=pe.holdingForFade,Ne=pe.collisionBoxArray,Ue=pe.partiallyEvaluatedTextSize,Ge=pe.collisionGroup,Ye=B.get("text-optional"),Qe=B.get("icon-optional"),ct=B.get("text-allow-overlap"),vt=B.get("icon-allow-overlap"),Ot=B.get("text-rotation-alignment")==="map",Dt=B.get("text-pitch-alignment")==="map",Pt=B.get("icon-text-fit")!=="none",Vt=B.get("symbol-z-order")==="viewport-y",It=ct&&(vt||!ke.hasIconData()||Qe),sn=vt&&(ct||!ke.hasTextData()||Ye);!ke.collisionArrays&&Ne&&ke.deserializeCollisionBoxes(Ne);var Jt=function(nr,sr){if(!U[nr.crossTileID])if(Ce)K.placements[nr.crossTileID]=new rn(!1,!1,!1);else{var dr,hr=!1,yr=!1,Mr=!0,Fr=null,Jn={box:null,offscreen:null},fr={box:null,offscreen:null},xr=null,Ar=null,zr=0,Hr=0,Kr=0;sr.textFeatureIndex?zr=sr.textFeatureIndex:nr.useRuntimeCollisionCircles&&(zr=nr.featureIndex),sr.verticalTextFeatureIndex&&(Hr=sr.verticalTextFeatureIndex);var ri=sr.textBox;if(ri){var vi=function(Di){var Qi=l.WritingMode.horizontal;if(ke.allowVerticalPlacement&&!Di&&K.prevPlacement){var Ka=K.prevPlacement.placedOrientations[nr.crossTileID];Ka&&(K.placedOrientations[nr.crossTileID]=Ka,Qi=Ka,K.markUsedOrientation(ke,Qi,nr))}return Qi},mi=function(Di,Qi){if(ke.allowVerticalPlacement&&nr.numVerticalGlyphVertices>0&&sr.verticalTextBox)for(var Ka=0,Vl=ke.writingModes;Ka<Vl.length&&(Vl[Ka]===l.WritingMode.vertical?(Jn=Qi(),fr=Jn):Jn=Di(),!(Jn&&Jn.box&&Jn.box.length));Ka+=1);else Jn=Di()};if(B.get("text-variable-anchor")){var ii=B.get("text-variable-anchor");if(K.prevPlacement&&K.prevPlacement.variableOffsets[nr.crossTileID]){var Pi=K.prevPlacement.variableOffsets[nr.crossTileID];ii.indexOf(Pi.anchor)>0&&(ii=ii.filter(function(Di){return Di!==Pi.anchor})).unshift(Pi.anchor)}var $i=function(Di,Qi,Ka){for(var Vl=Di.x2-Di.x1,qu=Di.y2-Di.y1,Dc=nr.textBoxScale,du=Pt&&!vt?Qi:null,Hl={box:[],offscreen:!1},gu=ct?2*ii.length:ii.length,Ll=0;Ll<gu;++Ll){var Yu=ii[Ll%ii.length],_l=Ll>=ii.length,vu=K.attemptAnchorPlacement(Yu,Di,Vl,qu,Dc,Ot,Dt,_e,ee,Ge,_l,nr,ke,Ka,du);if(vu&&(Hl=vu.placedGlyphBoxes)&&Hl.box&&Hl.box.length){hr=!0,Fr=vu.shift;break}}return Hl};mi(function(){return $i(ri,sr.iconBox,l.WritingMode.horizontal)},function(){var Di=sr.verticalTextBox,Qi=Jn&&Jn.box&&Jn.box.length;return ke.allowVerticalPlacement&&!Qi&&nr.numVerticalGlyphVertices>0&&Di?$i(Di,sr.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),Jn&&(hr=Jn.box,Mr=Jn.offscreen);var Fi=vi(Jn&&Jn.box);if(!hr&&K.prevPlacement){var Wi=K.prevPlacement.variableOffsets[nr.crossTileID];Wi&&(K.variableOffsets[nr.crossTileID]=Wi,K.markUsedJustification(ke,Wi.anchor,nr,Fi))}}else{var Qr=function(Di,Qi){var Ka=K.collisionIndex.placeCollisionBox(Di,ct,_e,ee,Ge.predicate);return Ka&&Ka.box&&Ka.box.length&&(K.markUsedOrientation(ke,Qi,nr),K.placedOrientations[nr.crossTileID]=Qi),Ka};mi(function(){return Qr(ri,l.WritingMode.horizontal)},function(){var Di=sr.verticalTextBox;return ke.allowVerticalPlacement&&nr.numVerticalGlyphVertices>0&&Di?Qr(Di,l.WritingMode.vertical):{box:null,offscreen:null}}),vi(Jn&&Jn.box&&Jn.box.length)}}if(hr=(dr=Jn)&&dr.box&&dr.box.length>0,Mr=dr&&dr.offscreen,nr.useRuntimeCollisionCircles){var Xr=ke.text.placedSymbolArray.get(nr.centerJustifiedTextSymbolIndex),yi=l.evaluateSizeForFeature(ke.textSizeData,Ue,Xr),hi=B.get("text-padding"),_i=nr.collisionCircleDiameter;xr=K.collisionIndex.placeCollisionCircles(ct,Xr,ke.lineVertexArray,ke.glyphOffsetArray,yi,ee,ie,ge,j,Dt,Ge.predicate,_i,hi),hr=ct||xr.circles.length>0&&!xr.collisionDetected,Mr=Mr&&xr.offscreen}if(sr.iconFeatureIndex&&(Kr=sr.iconFeatureIndex),sr.iconBox){var va=function(Di){var Qi=Pt&&Fr?Un(Di,Fr.x,Fr.y,Ot,Dt,K.transform.angle):Di;return K.collisionIndex.placeCollisionBox(Qi,vt,_e,ee,Ge.predicate)};yr=fr&&fr.box&&fr.box.length&&sr.verticalIconBox?(Ar=va(sr.verticalIconBox)).box.length>0:(Ar=va(sr.iconBox)).box.length>0,Mr=Mr&&Ar.offscreen}var Si=Ye||nr.numHorizontalGlyphVertices===0&&nr.numVerticalGlyphVertices===0,ai=Qe||nr.numIconVertices===0;if(Si||ai?ai?Si||(yr=yr&&hr):hr=yr&&hr:yr=hr=yr&&hr,hr&&dr&&dr.box&&(fr&&fr.box&&Hr?K.collisionIndex.insertCollisionBox(dr.box,B.get("text-ignore-placement"),ke.bucketInstanceId,Hr,Ge.ID):K.collisionIndex.insertCollisionBox(dr.box,B.get("text-ignore-placement"),ke.bucketInstanceId,zr,Ge.ID)),yr&&Ar&&K.collisionIndex.insertCollisionBox(Ar.box,B.get("icon-ignore-placement"),ke.bucketInstanceId,Kr,Ge.ID),xr&&(hr&&K.collisionIndex.insertCollisionCircles(xr.circles,B.get("text-ignore-placement"),ke.bucketInstanceId,zr,Ge.ID),j)){var ss=ke.bucketInstanceId,Ma=K.collisionCircleArrays[ss];Ma===void 0&&(Ma=K.collisionCircleArrays[ss]=new fn);for(var ja=0;ja<xr.circles.length;ja+=4)Ma.circles.push(xr.circles[ja+0]),Ma.circles.push(xr.circles[ja+1]),Ma.circles.push(xr.circles[ja+2]),Ma.circles.push(xr.collisionDetected?1:0)}K.placements[nr.crossTileID]=new rn(hr||It,yr||sn,Mr||ke.justReloaded),U[nr.crossTileID]=!0}};if(Vt)for(var Zt=ke.getSortedSymbolIndexes(this.transform.angle),Mn=Zt.length-1;Mn>=0;--Mn){var kn=Zt[Mn];Jt(ke.symbolInstances.get(kn),ke.collisionArrays[kn])}else for(var Yn=R.symbolInstanceStart;Yn<R.symbolInstanceEnd;Yn++)Jt(ke.symbolInstances.get(Yn),ke.collisionArrays[Yn]);if(j&&ke.bucketInstanceId in this.collisionCircleArrays){var Zn=this.collisionCircleArrays[ke.bucketInstanceId];l.invert(Zn.invProjMatrix,ee),Zn.viewportMatrix=this.collisionIndex.getViewportMatrix()}ke.justReloaded=!1},Hn.prototype.markUsedJustification=function(R,U,j,K){var pe,ke={left:j.leftJustifiedTextSymbolIndex,center:j.centerJustifiedTextSymbolIndex,right:j.rightJustifiedTextSymbolIndex};pe=K===l.WritingMode.vertical?j.verticalPlacedTextSymbolIndex:ke[l.getAnchorJustification(U)];for(var B=0,ee=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex,j.verticalPlacedTextSymbolIndex];B<ee.length;B+=1){var ie=ee[B];ie>=0&&(R.text.placedSymbolArray.get(ie).crossTileID=pe>=0&&ie!==pe?0:j.crossTileID)}},Hn.prototype.markUsedOrientation=function(R,U,j){for(var K=U===l.WritingMode.horizontal||U===l.WritingMode.horizontalOnly?U:0,pe=U===l.WritingMode.vertical?U:0,ke=0,B=[j.leftJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.rightJustifiedTextSymbolIndex];ke<B.length;ke+=1){var ee=B[ke];R.text.placedSymbolArray.get(ee).placedOrientation=K}j.verticalPlacedTextSymbolIndex&&(R.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).placedOrientation=pe)},Hn.prototype.commit=function(R){this.commitTime=R,this.zoomAtLastRecencyCheck=this.transform.zoom;var U=this.prevPlacement,j=!1;this.prevZoomAdjustment=U?U.zoomAdjustment(this.transform.zoom):0;var K=U?U.symbolFadeChange(R):1,pe=U?U.opacities:{},ke=U?U.variableOffsets:{},B=U?U.placedOrientations:{};for(var ee in this.placements){var ie=this.placements[ee],ge=pe[ee];ge?(this.opacities[ee]=new jt(ge,K,ie.text,ie.icon),j=j||ie.text!==ge.text.placed||ie.icon!==ge.icon.placed):(this.opacities[ee]=new jt(null,K,ie.text,ie.icon,ie.skipFade),j=j||ie.text||ie.icon)}for(var _e in pe){var Ce=pe[_e];if(!this.opacities[_e]){var Ne=new jt(Ce,K,!1,!1);Ne.isHidden()||(this.opacities[_e]=Ne,j=j||Ce.text.placed||Ce.icon.placed)}}for(var Ue in ke)this.variableOffsets[Ue]||!this.opacities[Ue]||this.opacities[Ue].isHidden()||(this.variableOffsets[Ue]=ke[Ue]);for(var Ge in B)this.placedOrientations[Ge]||!this.opacities[Ge]||this.opacities[Ge].isHidden()||(this.placedOrientations[Ge]=B[Ge]);j?this.lastPlacementChangeTime=R:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=U?U.lastPlacementChangeTime:R)},Hn.prototype.updateLayerOpacities=function(R,U){for(var j={},K=0,pe=U;K<pe.length;K+=1){var ke=pe[K],B=ke.getBucket(R);B&&ke.latestFeatureIndex&&R.id===B.layerIds[0]&&this.updateBucketOpacities(B,j,ke.collisionBoxArray)}},Hn.prototype.updateBucketOpacities=function(R,U,j){var K=this;R.hasTextData()&&R.text.opacityVertexArray.clear(),R.hasIconData()&&R.icon.opacityVertexArray.clear(),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexArray.clear(),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexArray.clear();var pe=R.layers[0].layout,ke=new jt(null,0,!1,!1,!0),B=pe.get("text-allow-overlap"),ee=pe.get("icon-allow-overlap"),ie=pe.get("text-variable-anchor"),ge=pe.get("text-rotation-alignment")==="map",_e=pe.get("text-pitch-alignment")==="map",Ce=pe.get("icon-text-fit")!=="none",Ne=new jt(null,0,B&&(ee||!R.hasIconData()||pe.get("icon-optional")),ee&&(B||!R.hasTextData()||pe.get("text-optional")),!0);!R.collisionArrays&&j&&(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData())&&R.deserializeCollisionBoxes(j);for(var Ue=function(ct,vt,Ot){for(var Dt=0;Dt<vt/4;Dt++)ct.opacityVertexArray.emplaceBack(Ot)},Ge=function(ct){var vt=R.symbolInstances.get(ct),Ot=vt.numHorizontalGlyphVertices,Dt=vt.numVerticalGlyphVertices,Pt=vt.crossTileID,Vt=U[Pt],It=K.opacities[Pt];Vt?It=ke:It||(It=Ne,K.opacities[Pt]=It),U[Pt]=!0;var sn=Ot>0||Dt>0,Jt=vt.numIconVertices>0,Zt=K.placedOrientations[vt.crossTileID],Mn=Zt===l.WritingMode.vertical,kn=Zt===l.WritingMode.horizontal||Zt===l.WritingMode.horizontalOnly;if(sn){var Yn=Rn(It.text),Zn=Mn?gn:Yn;Ue(R.text,Ot,Zn);var nr=kn?gn:Yn;Ue(R.text,Dt,nr);var sr=It.text.isHidden();[vt.rightJustifiedTextSymbolIndex,vt.centerJustifiedTextSymbolIndex,vt.leftJustifiedTextSymbolIndex].forEach(function(Kr){Kr>=0&&(R.text.placedSymbolArray.get(Kr).hidden=sr||Mn?1:0)}),vt.verticalPlacedTextSymbolIndex>=0&&(R.text.placedSymbolArray.get(vt.verticalPlacedTextSymbolIndex).hidden=sr||kn?1:0);var dr=K.variableOffsets[vt.crossTileID];dr&&K.markUsedJustification(R,dr.anchor,vt,Zt);var hr=K.placedOrientations[vt.crossTileID];hr&&(K.markUsedJustification(R,"left",vt,hr),K.markUsedOrientation(R,hr,vt))}if(Jt){var yr=Rn(It.icon),Mr=!(Ce&&vt.verticalPlacedIconSymbolIndex&&Mn);if(vt.placedIconSymbolIndex>=0){var Fr=Mr?yr:gn;Ue(R.icon,vt.numIconVertices,Fr),R.icon.placedSymbolArray.get(vt.placedIconSymbolIndex).hidden=It.icon.isHidden()}if(vt.verticalPlacedIconSymbolIndex>=0){var Jn=Mr?gn:yr;Ue(R.icon,vt.numVerticalIconVertices,Jn),R.icon.placedSymbolArray.get(vt.verticalPlacedIconSymbolIndex).hidden=It.icon.isHidden()}}if(R.hasIconCollisionBoxData()||R.hasTextCollisionBoxData()){var fr=R.collisionArrays[ct];if(fr){var xr=new l.Point(0,0);if(fr.textBox||fr.verticalTextBox){var Ar=!0;if(ie){var zr=K.variableOffsets[Pt];zr?(xr=Xn(zr.anchor,zr.width,zr.height,zr.textOffset,zr.textBoxScale),ge&&xr._rotate(_e?K.transform.angle:-K.transform.angle)):Ar=!1}fr.textBox&&Kn(R.textCollisionBox.collisionVertexArray,It.text.placed,!Ar||Mn,xr.x,xr.y),fr.verticalTextBox&&Kn(R.textCollisionBox.collisionVertexArray,It.text.placed,!Ar||kn,xr.x,xr.y)}var Hr=!!(!kn&&fr.verticalIconBox);fr.iconBox&&Kn(R.iconCollisionBox.collisionVertexArray,It.icon.placed,Hr,Ce?xr.x:0,Ce?xr.y:0),fr.verticalIconBox&&Kn(R.iconCollisionBox.collisionVertexArray,It.icon.placed,!Hr,Ce?xr.x:0,Ce?xr.y:0)}}},Ye=0;Ye<R.symbolInstances.length;Ye++)Ge(Ye);if(R.sortFeatures(this.transform.angle),this.retainedQueryData[R.bucketInstanceId]&&(this.retainedQueryData[R.bucketInstanceId].featureSortOrder=R.featureSortOrder),R.hasTextData()&&R.text.opacityVertexBuffer&&R.text.opacityVertexBuffer.updateData(R.text.opacityVertexArray),R.hasIconData()&&R.icon.opacityVertexBuffer&&R.icon.opacityVertexBuffer.updateData(R.icon.opacityVertexArray),R.hasIconCollisionBoxData()&&R.iconCollisionBox.collisionVertexBuffer&&R.iconCollisionBox.collisionVertexBuffer.updateData(R.iconCollisionBox.collisionVertexArray),R.hasTextCollisionBoxData()&&R.textCollisionBox.collisionVertexBuffer&&R.textCollisionBox.collisionVertexBuffer.updateData(R.textCollisionBox.collisionVertexArray),R.bucketInstanceId in this.collisionCircleArrays){var Qe=this.collisionCircleArrays[R.bucketInstanceId];R.placementInvProjMatrix=Qe.invProjMatrix,R.placementViewportMatrix=Qe.viewportMatrix,R.collisionCircleArray=Qe.circles,delete this.collisionCircleArrays[R.bucketInstanceId]}},Hn.prototype.symbolFadeChange=function(R){return this.fadeDuration===0?1:(R-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Hn.prototype.zoomAdjustment=function(R){return Math.max(0,(this.transform.zoom-R)/1.5)},Hn.prototype.hasTransitions=function(R){return this.stale||R-this.lastPlacementChangeTime<this.fadeDuration},Hn.prototype.stillRecent=function(R,U){var j=this.zoomAtLastRecencyCheck===U?1-this.zoomAdjustment(U):1;return this.zoomAtLastRecencyCheck=U,this.commitTime+this.fadeDuration*j>R},Hn.prototype.setStale=function(){this.stale=!0};var qt=Math.pow(2,25),On=Math.pow(2,24),Et=Math.pow(2,17),Xt=Math.pow(2,16),nn=Math.pow(2,9),An=Math.pow(2,8),Cn=Math.pow(2,1);function Rn(R){if(R.opacity===0&&!R.placed)return 0;if(R.opacity===1&&R.placed)return 4294967295;var U=R.placed?1:0,j=Math.floor(127*R.opacity);return j*qt+U*On+j*Et+U*Xt+j*nn+U*An+j*Cn+U}var gn=0,$t=function(R){this._sortAcrossTiles=R.layout.get("symbol-z-order")!=="viewport-y"&&R.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};$t.prototype.continuePlacement=function(R,U,j,K,pe){for(var ke=this._bucketParts;this._currentTileIndex<R.length;){var B=R[this._currentTileIndex];if(U.getBucketParts(ke,K,B,this._sortAcrossTiles),this._currentTileIndex++,pe())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ke.sort(function(ie,ge){return ie.sortKey-ge.sortKey}));this._currentPartIndex<ke.length;){var ee=ke[this._currentPartIndex];if(U.placeLayerBucketPart(ee,this._seenCrossTileIDs,j),this._currentPartIndex++,pe())return!0}return!1};var Qt=function(R,U,j,K,pe,ke,B){this.placement=new Hn(R,pe,ke,B),this._currentPlacementIndex=U.length-1,this._forceFullPlacement=j,this._showCollisionBoxes=K,this._done=!1};Qt.prototype.isDone=function(){return this._done},Qt.prototype.continuePlacement=function(R,U,j){for(var K=this,pe=l.browser.now(),ke=function(){var ie=l.browser.now()-pe;return!K._forceFullPlacement&&ie>2};this._currentPlacementIndex>=0;){var B=U[R[this._currentPlacementIndex]],ee=this.placement.collisionIndex.transform.zoom;if(B.type==="symbol"&&(!B.minzoom||B.minzoom<=ee)&&(!B.maxzoom||B.maxzoom>ee)){if(this._inProgressLayer||(this._inProgressLayer=new $t(B)),this._inProgressLayer.continuePlacement(j[B.source],this.placement,this._showCollisionBoxes,B,ke))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Qt.prototype.commit=function(R){return this.placement.commit(R),this.placement};var hn=512/l.EXTENT/2,vn=function(R,U,j){this.tileID=R,this.indexedSymbolInstances={},this.bucketInstanceId=j;for(var K=0;K<U.length;K++){var pe=U.get(K),ke=pe.key;this.indexedSymbolInstances[ke]||(this.indexedSymbolInstances[ke]=[]),this.indexedSymbolInstances[ke].push({crossTileID:pe.crossTileID,coord:this.getScaledCoordinates(pe,R)})}};vn.prototype.getScaledCoordinates=function(R,U){var j=U.canonical.z-this.tileID.canonical.z,K=hn/Math.pow(2,j);return{x:Math.floor((U.canonical.x*l.EXTENT+R.anchorX)*K),y:Math.floor((U.canonical.y*l.EXTENT+R.anchorY)*K)}},vn.prototype.findMatches=function(R,U,j){for(var K=this.tileID.canonical.z<U.canonical.z?1:Math.pow(2,this.tileID.canonical.z-U.canonical.z),pe=0;pe<R.length;pe++){var ke=R.get(pe);if(!ke.crossTileID){var B=this.indexedSymbolInstances[ke.key];if(B)for(var ee=this.getScaledCoordinates(ke,U),ie=0,ge=B;ie<ge.length;ie+=1){var _e=ge[ie];if(Math.abs(_e.coord.x-ee.x)<=K&&Math.abs(_e.coord.y-ee.y)<=K&&!j[_e.crossTileID]){j[_e.crossTileID]=!0,ke.crossTileID=_e.crossTileID;break}}}}};var Fn=function(){this.maxCrossTileID=0};Fn.prototype.generate=function(){return++this.maxCrossTileID};var In=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};In.prototype.handleWrapJump=function(R){var U=Math.round((R-this.lng)/360);if(U!==0)for(var j in this.indexes){var K=this.indexes[j],pe={};for(var ke in K){var B=K[ke];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+U),pe[B.tileID.key]=B}this.indexes[j]=pe}this.lng=R},In.prototype.addBucket=function(R,U,j){if(this.indexes[R.overscaledZ]&&this.indexes[R.overscaledZ][R.key]){if(this.indexes[R.overscaledZ][R.key].bucketInstanceId===U.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(R.overscaledZ,this.indexes[R.overscaledZ][R.key])}for(var K=0;K<U.symbolInstances.length;K++)U.symbolInstances.get(K).crossTileID=0;this.usedCrossTileIDs[R.overscaledZ]||(this.usedCrossTileIDs[R.overscaledZ]={});var pe=this.usedCrossTileIDs[R.overscaledZ];for(var ke in this.indexes){var B=this.indexes[ke];if(Number(ke)>R.overscaledZ)for(var ee in B){var ie=B[ee];ie.tileID.isChildOf(R)&&ie.findMatches(U.symbolInstances,R,pe)}else{var ge=B[R.scaledTo(Number(ke)).key];ge&&ge.findMatches(U.symbolInstances,R,pe)}}for(var _e=0;_e<U.symbolInstances.length;_e++){var Ce=U.symbolInstances.get(_e);Ce.crossTileID||(Ce.crossTileID=j.generate(),pe[Ce.crossTileID]=!0)}return this.indexes[R.overscaledZ]===void 0&&(this.indexes[R.overscaledZ]={}),this.indexes[R.overscaledZ][R.key]=new vn(R,U.symbolInstances,U.bucketInstanceId),!0},In.prototype.removeBucketCrossTileIDs=function(R,U){for(var j in U.indexedSymbolInstances)for(var K=0,pe=U.indexedSymbolInstances[j];K<pe.length;K+=1){var ke=pe[K];delete this.usedCrossTileIDs[R][ke.crossTileID]}},In.prototype.removeStaleBuckets=function(R){var U=!1;for(var j in this.indexes){var K=this.indexes[j];for(var pe in K)R[K[pe].bucketInstanceId]||(this.removeBucketCrossTileIDs(j,K[pe]),delete K[pe],U=!0)}return U};var Qn=function(){this.layerIndexes={},this.crossTileIDs=new Fn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Qn.prototype.addLayer=function(R,U,j){var K=this.layerIndexes[R.id];K===void 0&&(K=this.layerIndexes[R.id]=new In);var pe=!1,ke={};K.handleWrapJump(j);for(var B=0,ee=U;B<ee.length;B+=1){var ie=ee[B],ge=ie.getBucket(R);ge&&R.id===ge.layerIds[0]&&(ge.bucketInstanceId||(ge.bucketInstanceId=++this.maxBucketInstanceId),K.addBucket(ie.tileID,ge,this.crossTileIDs)&&(pe=!0),ke[ge.bucketInstanceId]=!0)}return K.removeStaleBuckets(ke)&&(pe=!0),pe},Qn.prototype.pruneUnusedLayers=function(R){var U={};for(var j in R.forEach(function(K){U[K]=!0}),this.layerIndexes)U[j]||delete this.layerIndexes[j]};var Wn=function(R,U){return l.emitValidationErrors(R,U&&U.filter(function(j){return j.identifier!=="source.canvas"}))},Ke=l.pick(ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),it=l.pick(ht,["setCenter","setZoom","setBearing","setPitch"]),Mt=function(){var R={},U=l.styleSpec.$version;for(var j in l.styleSpec.$root){var K=l.styleSpec.$root[j];if(K.required){var pe;(pe=j==="version"?U:K.type==="array"?[]:{})!=null&&(R[j]=pe)}}return R}(),Lt=function(R){function U(j,K){var pe=this;K===void 0&&(K={}),R.call(this),this.map=j,this.dispatcher=new C(mt(),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new y(j._requestManager,K.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new Qn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());var ke=this;this._rtlTextPluginCallback=U.registerForPluginStateChange(function(B){var ee={pluginStatus:B.pluginStatus,pluginURL:B.pluginURL};ke.dispatcher.broadcast("syncRTLPluginState",ee,function(ie,ge){if(l.triggerPluginCompletionEvent(ie),ge&&ge.every(function(Ce){return Ce}))for(var _e in ke.sourceCaches)ke.sourceCaches[_e].reload()})}),this.on("data",function(B){if(B.dataType==="source"&&B.sourceDataType==="metadata"){var ee=pe.sourceCaches[B.sourceId];if(ee){var ie=ee.getSource();if(ie&&ie.vectorLayerIds)for(var ge in pe._layers){var _e=pe._layers[ge];_e.source===ie.id&&pe._validateLayer(_e)}}}})}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.loadURL=function(j,K){var pe=this;K===void 0&&(K={}),this.fire(new l.Event("dataloading",{dataType:"style"}));var ke=typeof K.validate=="boolean"?K.validate:!l.isMapboxURL(j);j=this.map._requestManager.normalizeStyleURL(j,K.accessToken);var B=this.map._requestManager.transformRequest(j,l.ResourceType.Style);this._request=l.getJSON(B,function(ee,ie){pe._request=null,ee?pe.fire(new l.ErrorEvent(ee)):ie&&pe._load(ie,ke)})},U.prototype.loadJSON=function(j,K){var pe=this;K===void 0&&(K={}),this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.browser.frame(function(){pe._request=null,pe._load(j,K.validate!==!1)})},U.prototype.loadEmpty=function(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(Mt,!1)},U.prototype._load=function(j,K){if(!K||!Wn(this,l.validateStyle(j))){for(var pe in this._loaded=!0,this.stylesheet=j,j.sources)this.addSource(pe,j.sources[pe],{validate:!1});j.sprite?this._loadSprite(j.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(j.glyphs);var ke=kt(this.stylesheet.layers);this._order=ke.map(function(ge){return ge.id}),this._layers={},this._serializedLayers={};for(var B=0,ee=ke;B<ee.length;B+=1){var ie=ee[B];(ie=l.createStyleLayer(ie)).setEventedParent(this,{layer:{id:ie.id}}),this._layers[ie.id]=ie,this._serializedLayers[ie.id]=ie.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new T(this.stylesheet.light),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}},U.prototype._loadSprite=function(j){var K=this;this._spriteRequest=function(pe,ke,B){var ee,ie,ge,_e=l.browser.devicePixelRatio>1?"@2x":"",Ce=l.getJSON(ke.transformRequest(ke.normalizeSpriteURL(pe,_e,".json"),l.ResourceType.SpriteJSON),function(Ge,Ye){Ce=null,ge||(ge=Ge,ee=Ye,Ue())}),Ne=l.getImage(ke.transformRequest(ke.normalizeSpriteURL(pe,_e,".png"),l.ResourceType.SpriteImage),function(Ge,Ye){Ne=null,ge||(ge=Ge,ie=Ye,Ue())});function Ue(){if(ge)B(ge);else if(ee&&ie){var Ge=l.browser.getImageData(ie),Ye={};for(var Qe in ee){var ct=ee[Qe],vt=ct.width,Ot=ct.height,Dt=ct.x,Pt=ct.y,Vt=ct.sdf,It=ct.pixelRatio,sn=ct.stretchX,Jt=ct.stretchY,Zt=ct.content,Mn=new l.RGBAImage({width:vt,height:Ot});l.RGBAImage.copy(Ge,Mn,{x:Dt,y:Pt},{x:0,y:0},{width:vt,height:Ot}),Ye[Qe]={data:Mn,pixelRatio:It,sdf:Vt,stretchX:sn,stretchY:Jt,content:Zt}}B(null,Ye)}}return{cancel:function(){Ce&&(Ce.cancel(),Ce=null),Ne&&(Ne.cancel(),Ne=null)}}}(j,this.map._requestManager,function(pe,ke){if(K._spriteRequest=null,pe)K.fire(new l.ErrorEvent(pe));else if(ke)for(var B in ke)K.imageManager.addImage(B,ke[B]);K.imageManager.setLoaded(!0),K._availableImages=K.imageManager.listImages(),K.dispatcher.broadcast("setImages",K._availableImages),K.fire(new l.Event("data",{dataType:"style"}))})},U.prototype._validateLayer=function(j){var K=this.sourceCaches[j.source];if(K){var pe=j.sourceLayer;if(pe){var ke=K.getSource();(ke.type==="geojson"||ke.vectorLayerIds&&ke.vectorLayerIds.indexOf(pe)===-1)&&this.fire(new l.ErrorEvent(new Error('Source layer "'+pe+'" does not exist on source "'+ke.id+'" as specified by style layer "'+j.id+'"')))}}},U.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var j in this.sourceCaches)if(!this.sourceCaches[j].loaded())return!1;return!!this.imageManager.isLoaded()},U.prototype._serializeLayers=function(j){for(var K=[],pe=0,ke=j;pe<ke.length;pe+=1){var B=ke[pe],ee=this._layers[B];ee.type!=="custom"&&K.push(ee.serialize())}return K},U.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var j in this.sourceCaches)if(this.sourceCaches[j].hasTransition())return!0;for(var K in this._layers)if(this._layers[K].hasTransition())return!0;return!1},U.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},U.prototype.update=function(j){if(this._loaded){var K=this._changed;if(this._changed){var pe=Object.keys(this._updatedLayers),ke=Object.keys(this._removedLayers);for(var B in(pe.length||ke.length)&&this._updateWorkerLayers(pe,ke),this._updatedSources){var ee=this._updatedSources[B];ee==="reload"?this._reloadSource(B):ee==="clear"&&this._clearSource(B)}for(var ie in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ie].updateTransitions(j);this.light.updateTransitions(j),this._resetUpdates()}for(var ge in this.sourceCaches)this.sourceCaches[ge].used=!1;for(var _e=0,Ce=this._order;_e<Ce.length;_e+=1){var Ne=Ce[_e],Ue=this._layers[Ne];Ue.recalculate(j,this._availableImages),!Ue.isHidden(j.zoom)&&Ue.source&&(this.sourceCaches[Ue.source].used=!0)}this.light.recalculate(j),this.z=j.zoom,K&&this.fire(new l.Event("data",{dataType:"style"}))}},U.prototype._updateTilesForChangedImages=function(){var j=Object.keys(this._changedImages);if(j.length){for(var K in this.sourceCaches)this.sourceCaches[K].reloadTilesForDependencies(["icons","patterns"],j);this._changedImages={}}},U.prototype._updateWorkerLayers=function(j,K){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(j),removedIds:K})},U.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},U.prototype.setState=function(j){var K=this;if(this._checkLoaded(),Wn(this,l.validateStyle(j)))return!1;(j=l.clone$1(j)).layers=kt(j.layers);var pe=Yt(this.serialize(),j).filter(function(B){return!(B.command in it)});if(pe.length===0)return!1;var ke=pe.filter(function(B){return!(B.command in Ke)});if(ke.length>0)throw new Error("Unimplemented: "+ke.map(function(B){return B.command}).join(", ")+".");return pe.forEach(function(B){B.command!=="setTransition"&&K[B.command].apply(K,B.args)}),this.stylesheet=j,!0},U.prototype.addImage=function(j,K){if(this.getImage(j))return this.fire(new l.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(j,K),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},U.prototype.updateImage=function(j,K){this.imageManager.updateImage(j,K)},U.prototype.getImage=function(j){return this.imageManager.getImage(j)},U.prototype.removeImage=function(j){if(!this.getImage(j))return this.fire(new l.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(j),this._availableImages=this.imageManager.listImages(),this._changedImages[j]=!0,this._changed=!0,this.fire(new l.Event("data",{dataType:"style"}))},U.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},U.prototype.addSource=function(j,K,pe){var ke=this;if(pe===void 0&&(pe={}),this._checkLoaded(),this.sourceCaches[j]!==void 0)throw new Error("There is already a source with this ID");if(!K.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(K).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(K.type)>=0&&this._validate(l.validateStyle.source,"sources."+j,K,null,pe))){this.map&&this.map._collectResourceTiming&&(K.collectResourceTiming=!0);var B=this.sourceCaches[j]=new st(j,K,this.dispatcher);B.style=this,B.setEventedParent(this,function(){return{isSourceLoaded:ke.loaded(),source:B.serialize(),sourceId:j}}),B.onAdd(this.map),this._changed=!0}},U.prototype.removeSource=function(j){if(this._checkLoaded(),this.sourceCaches[j]===void 0)throw new Error("There is no source with this ID");for(var K in this._layers)if(this._layers[K].source===j)return this.fire(new l.ErrorEvent(new Error('Source "'+j+'" cannot be removed while layer "'+K+'" is using it.')));var pe=this.sourceCaches[j];delete this.sourceCaches[j],delete this._updatedSources[j],pe.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:j})),pe.setEventedParent(null),pe.clearTiles(),pe.onRemove&&pe.onRemove(this.map),this._changed=!0},U.prototype.setGeoJSONSourceData=function(j,K){this._checkLoaded(),this.sourceCaches[j].getSource().setData(K),this._changed=!0},U.prototype.getSource=function(j){return this.sourceCaches[j]&&this.sourceCaches[j].getSource()},U.prototype.addLayer=function(j,K,pe){pe===void 0&&(pe={}),this._checkLoaded();var ke=j.id;if(this.getLayer(ke))this.fire(new l.ErrorEvent(new Error('Layer with id "'+ke+'" already exists on this map')));else{var B;if(j.type==="custom"){if(Wn(this,l.validateCustomStyleLayer(j)))return;B=l.createStyleLayer(j)}else{if(typeof j.source=="object"&&(this.addSource(ke,j.source),j=l.clone$1(j),j=l.extend(j,{source:ke})),this._validate(l.validateStyle.layer,"layers."+ke,j,{arrayIndex:-1},pe))return;B=l.createStyleLayer(j),this._validateLayer(B),B.setEventedParent(this,{layer:{id:ke}}),this._serializedLayers[B.id]=B.serialize()}var ee=K?this._order.indexOf(K):this._order.length;if(K&&ee===-1)this.fire(new l.ErrorEvent(new Error('Layer with id "'+K+'" does not exist on this map.')));else{if(this._order.splice(ee,0,ke),this._layerOrderChanged=!0,this._layers[ke]=B,this._removedLayers[ke]&&B.source&&B.type!=="custom"){var ie=this._removedLayers[ke];delete this._removedLayers[ke],ie.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.sourceCaches[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}},U.prototype.moveLayer=function(j,K){if(this._checkLoaded(),this._changed=!0,this._layers[j]){if(j!==K){var pe=this._order.indexOf(j);this._order.splice(pe,1);var ke=K?this._order.indexOf(K):this._order.length;K&&ke===-1?this.fire(new l.ErrorEvent(new Error('Layer with id "'+K+'" does not exist on this map.'))):(this._order.splice(ke,0,j),this._layerOrderChanged=!0)}}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be moved.")))},U.prototype.removeLayer=function(j){this._checkLoaded();var K=this._layers[j];if(K){K.setEventedParent(null);var pe=this._order.indexOf(j);this._order.splice(pe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[j]=K,delete this._layers[j],delete this._serializedLayers[j],delete this._updatedLayers[j],delete this._updatedPaintProps[j],K.onRemove&&K.onRemove(this.map)}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be removed.")))},U.prototype.getLayer=function(j){return this._layers[j]},U.prototype.hasLayer=function(j){return j in this._layers},U.prototype.setLayerZoomRange=function(j,K,pe){this._checkLoaded();var ke=this.getLayer(j);ke?ke.minzoom===K&&ke.maxzoom===pe||(K!=null&&(ke.minzoom=K),pe!=null&&(ke.maxzoom=pe),this._updateLayer(ke)):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot have zoom extent.")))},U.prototype.setFilter=function(j,K,pe){pe===void 0&&(pe={}),this._checkLoaded();var ke=this.getLayer(j);if(ke){if(!l.deepEqual(ke.filter,K))return K==null?(ke.filter=void 0,void this._updateLayer(ke)):void(this._validate(l.validateStyle.filter,"layers."+ke.id+".filter",K,null,pe)||(ke.filter=l.clone$1(K),this._updateLayer(ke)))}else this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be filtered.")))},U.prototype.getFilter=function(j){return l.clone$1(this.getLayer(j).filter)},U.prototype.setLayoutProperty=function(j,K,pe,ke){ke===void 0&&(ke={}),this._checkLoaded();var B=this.getLayer(j);B?l.deepEqual(B.getLayoutProperty(K),pe)||(B.setLayoutProperty(K,pe,ke),this._updateLayer(B)):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},U.prototype.getLayoutProperty=function(j,K){var pe=this.getLayer(j);if(pe)return pe.getLayoutProperty(K);this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style.")))},U.prototype.setPaintProperty=function(j,K,pe,ke){ke===void 0&&(ke={}),this._checkLoaded();var B=this.getLayer(j);B?l.deepEqual(B.getPaintProperty(K),pe)||(B.setPaintProperty(K,pe,ke)&&this._updateLayer(B),this._changed=!0,this._updatedPaintProps[j]=!0):this.fire(new l.ErrorEvent(new Error("The layer '"+j+"' does not exist in the map's style and cannot be styled.")))},U.prototype.getPaintProperty=function(j,K){return this.getLayer(j).getPaintProperty(K)},U.prototype.setFeatureState=function(j,K){this._checkLoaded();var pe=j.source,ke=j.sourceLayer,B=this.sourceCaches[pe];if(B!==void 0){var ee=B.getSource().type;ee==="geojson"&&ke?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):ee!=="vector"||ke?(j.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),B.setFeatureState(ke,j.id,K)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")))},U.prototype.removeFeatureState=function(j,K){this._checkLoaded();var pe=j.source,ke=this.sourceCaches[pe];if(ke!==void 0){var B=ke.getSource().type,ee=B==="vector"?j.sourceLayer:void 0;B!=="vector"||ee?K&&typeof j.id!="string"&&typeof j.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ke.removeFeatureState(ee,j.id,K):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")))},U.prototype.getFeatureState=function(j){this._checkLoaded();var K=j.source,pe=j.sourceLayer,ke=this.sourceCaches[K];if(ke!==void 0){if(ke.getSource().type!=="vector"||pe)return j.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),ke.getFeatureState(pe,j.id);this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new l.ErrorEvent(new Error("The source '"+K+"' does not exist in the map's style.")))},U.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},U.prototype.serialize=function(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(j){return j.serialize()}),layers:this._serializeLayers(this._order)},function(j){return j!==void 0})},U.prototype._updateLayer=function(j){this._updatedLayers[j.id]=!0,j.source&&!this._updatedSources[j.source]&&this.sourceCaches[j.source].getSource().type!=="raster"&&(this._updatedSources[j.source]="reload",this.sourceCaches[j.source].pause()),this._changed=!0},U.prototype._flattenAndSortRenderedFeatures=function(j){for(var K=this,pe=function(Zt){return K._layers[Zt].type==="fill-extrusion"},ke={},B=[],ee=this._order.length-1;ee>=0;ee--){var ie=this._order[ee];if(pe(ie)){ke[ie]=ee;for(var ge=0,_e=j;ge<_e.length;ge+=1){var Ce=_e[ge][ie];if(Ce)for(var Ne=0,Ue=Ce;Ne<Ue.length;Ne+=1){var Ge=Ue[Ne];B.push(Ge)}}}}B.sort(function(Zt,Mn){return Mn.intersectionZ-Zt.intersectionZ});for(var Ye=[],Qe=this._order.length-1;Qe>=0;Qe--){var ct=this._order[Qe];if(pe(ct))for(var vt=B.length-1;vt>=0;vt--){var Ot=B[vt].feature;if(ke[Ot.layer.id]<Qe)break;Ye.push(Ot),B.pop()}else for(var Dt=0,Pt=j;Dt<Pt.length;Dt+=1){var Vt=Pt[Dt][ct];if(Vt)for(var It=0,sn=Vt;It<sn.length;It+=1){var Jt=sn[It];Ye.push(Jt.feature)}}}return Ye},U.prototype.queryRenderedFeatures=function(j,K,pe){K&&K.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",K.filter,null,K);var ke={};if(K&&K.layers){if(!Array.isArray(K.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var B=0,ee=K.layers;B<ee.length;B+=1){var ie=ee[B],ge=this._layers[ie];if(!ge)return this.fire(new l.ErrorEvent(new Error("The layer '"+ie+"' does not exist in the map's style and cannot be queried for features."))),[];ke[ge.source]=!0}}var _e=[];for(var Ce in K.availableImages=this._availableImages,this.sourceCaches)K.layers&&!ke[Ce]||_e.push(X(this.sourceCaches[Ce],this._layers,this._serializedLayers,j,K,pe));return this.placement&&_e.push(function(Ne,Ue,Ge,Ye,Qe,ct,vt){for(var Ot={},Dt=ct.queryRenderedSymbols(Ye),Pt=[],Vt=0,It=Object.keys(Dt).map(Number);Vt<It.length;Vt+=1){var sn=It[Vt];Pt.push(vt[sn])}Pt.sort(q);for(var Jt=function(){var Zn=Mn[Zt],nr=Zn.featureIndex.lookupSymbolFeatures(Dt[Zn.bucketInstanceId],Ue,Zn.bucketIndex,Zn.sourceLayerIndex,Qe.filter,Qe.layers,Qe.availableImages,Ne);for(var sr in nr){var dr=Ot[sr]=Ot[sr]||[],hr=nr[sr];hr.sort(function(Jn,fr){var xr=Zn.featureSortOrder;if(xr){var Ar=xr.indexOf(Jn.featureIndex);return xr.indexOf(fr.featureIndex)-Ar}return fr.featureIndex-Jn.featureIndex});for(var yr=0,Mr=hr;yr<Mr.length;yr+=1){var Fr=Mr[yr];dr.push(Fr)}}},Zt=0,Mn=Pt;Zt<Mn.length;Zt+=1)Jt();var kn=function(Zn){Ot[Zn].forEach(function(nr){var sr=nr.feature,dr=Ne[Zn],hr=Ge[dr.source].getFeatureState(sr.layer["source-layer"],sr.id);sr.source=sr.layer.source,sr.layer["source-layer"]&&(sr.sourceLayer=sr.layer["source-layer"]),sr.state=hr})};for(var Yn in Ot)kn(Yn);return Ot}(this._layers,this._serializedLayers,this.sourceCaches,j,K,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_e)},U.prototype.querySourceFeatures=function(j,K){K&&K.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",K.filter,null,K);var pe=this.sourceCaches[j];return pe?function(ke,B){for(var ee=ke.getRenderableIds().map(function(Ue){return ke.getTileByID(Ue)}),ie=[],ge={},_e=0;_e<ee.length;_e++){var Ce=ee[_e],Ne=Ce.tileID.canonical.key;ge[Ne]||(ge[Ne]=!0,Ce.querySourceFeatures(ie,B))}return ie}(pe,K):[]},U.prototype.addSourceType=function(j,K,pe){return U.getSourceType(j)?pe(new Error('A source type called "'+j+'" already exists.')):(U.setSourceType(j,K),K.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:j,url:K.workerSourceURL},pe):pe(null,null))},U.prototype.getLight=function(){return this.light.getLight()},U.prototype.setLight=function(j,K){K===void 0&&(K={}),this._checkLoaded();var pe=this.light.getLight(),ke=!1;for(var B in j)if(!l.deepEqual(j[B],pe[B])){ke=!0;break}if(ke){var ee={now:l.browser.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(j,K),this.light.updateTransitions(ee)}},U.prototype._validate=function(j,K,pe,ke,B){return B===void 0&&(B={}),(!B||B.validate!==!1)&&Wn(this,j.call(l.validateStyle,l.extend({key:K,style:this.serialize(),value:pe,styleSpec:l.styleSpec},ke)))},U.prototype._remove=function(){for(var j in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[j].setEventedParent(null);for(var K in this.sourceCaches)this.sourceCaches[K].clearTiles(),this.sourceCaches[K].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},U.prototype._clearSource=function(j){this.sourceCaches[j].clearTiles()},U.prototype._reloadSource=function(j){this.sourceCaches[j].resume(),this.sourceCaches[j].reload()},U.prototype._updateSources=function(j){for(var K in this.sourceCaches)this.sourceCaches[K].update(j)},U.prototype._generateCollisionBoxes=function(){for(var j in this.sourceCaches)this._reloadSource(j)},U.prototype._updatePlacement=function(j,K,pe,ke,B){B===void 0&&(B=!1);for(var ee=!1,ie=!1,ge={},_e=0,Ce=this._order;_e<Ce.length;_e+=1){var Ne=Ce[_e],Ue=this._layers[Ne];if(Ue.type==="symbol"){if(!ge[Ue.source]){var Ge=this.sourceCaches[Ue.source];ge[Ue.source]=Ge.getRenderableIds(!0).map(function(Dt){return Ge.getTileByID(Dt)}).sort(function(Dt,Pt){return Pt.tileID.overscaledZ-Dt.tileID.overscaledZ||(Dt.tileID.isLessThan(Pt.tileID)?-1:1)})}var Ye=this.crossTileSymbolIndex.addLayer(Ue,ge[Ue.source],j.center.lng);ee=ee||Ye}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||pe===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.browser.now(),j.zoom))&&(this.pauseablePlacement=new Qt(j,this._order,B,K,pe,ke,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,ge),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.browser.now()),ie=!0),ee&&this.pauseablePlacement.placement.setStale()),ie||ee)for(var Qe=0,ct=this._order;Qe<ct.length;Qe+=1){var vt=ct[Qe],Ot=this._layers[vt];Ot.type==="symbol"&&this.placement.updateLayerOpacities(Ot,ge[Ot.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.browser.now())},U.prototype._releaseSymbolFadeTiles=function(){for(var j in this.sourceCaches)this.sourceCaches[j].releaseSymbolFadeTiles()},U.prototype.getImages=function(j,K,pe){this.imageManager.getImages(K.icons,pe),this._updateTilesForChangedImages();var ke=this.sourceCaches[K.source];ke&&ke.setDependencies(K.tileID.key,K.type,K.icons)},U.prototype.getGlyphs=function(j,K,pe){this.glyphManager.getGlyphs(K.stacks,pe)},U.prototype.getResource=function(j,K,pe){return l.makeRequest(K,pe)},U}(l.Evented);Lt.getSourceType=function(R){return te[R]},Lt.setSourceType=function(R,U){te[R]=U},Lt.registerForPluginStateChange=l.registerForPluginStateChange;var Bt=l.createLayout([{name:"a_pos",type:"Int16",components:2}]),ln=ei(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),wn=ei(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),jn=ei(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),bn=ei(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),qn=ei("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),or=ei(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),ar=ei(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),mr=ei("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),kr=ei("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Cr=ei("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Br=ei(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Wr=ei(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fi=ei(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),pi=ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),bi=ei(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Da=ei(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Go=ei(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),_s=ei(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ks=ei(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Qa=ei(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),cl=ei(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),Wo=ei(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),qo=ei(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),eo=ei(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Ri=ei(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ws=ei(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ei(R,U){var j=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,K={};return{fragmentSource:R=R.replace(j,function(pe,ke,B,ee,ie){return K[ie]=!0,ke==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
varying `+B+" "+ee+" "+ie+`;
#else
uniform `+B+" "+ee+" u_"+ie+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ie+`
    `+B+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`}),vertexSource:U=U.replace(j,function(pe,ke,B,ee,ie){var ge=ee==="float"?"vec2":"vec4",_e=ie.match(/color/)?"color":ge;return K[ie]?ke==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+B+" "+ge+" a_"+ie+`;
varying `+B+" "+ee+" "+ie+`;
#else
uniform `+B+" "+ee+" u_"+ie+`;
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = a_"+ie+`;
#else
    `+B+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = unpack_mix_"+_e+"(a_"+ie+", u_"+ie+`_t);
#else
    `+B+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`:ke==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+B+" "+ge+" a_"+ie+`;
#else
uniform `+B+" "+ee+" u_"+ie+`;
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+B+" "+ee+" "+ie+" = a_"+ie+`;
#else
    `+B+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+B+" "+ee+" "+ie+" = unpack_mix_"+_e+"(a_"+ie+", u_"+ie+`_t);
#else
    `+B+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`})}}var to=Object.freeze({__proto__:null,prelude:ln,background:wn,backgroundPattern:jn,circle:bn,clippingMask:qn,heatmap:or,heatmapTexture:ar,collisionBox:mr,collisionCircle:kr,debug:Cr,fill:Br,fillOutline:Wr,fillOutlinePattern:fi,fillPattern:pi,fillExtrusion:bi,fillExtrusionPattern:Da,hillshadePrepare:Go,hillshade:_s,line:Ks,lineGradient:Qa,linePattern:cl,lineSDF:Wo,raster:qo,symbolIcon:eo,symbolSDF:Ri,symbolTextAndIcon:ws}),Ca=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ca.prototype.bind=function(R,U,j,K,pe,ke,B,ee){this.context=R;for(var ie=this.boundPaintVertexBuffers.length!==K.length,ge=0;!ie&&ge<K.length;ge++)this.boundPaintVertexBuffers[ge]!==K[ge]&&(ie=!0);var _e=!this.vao||this.boundProgram!==U||this.boundLayoutVertexBuffer!==j||ie||this.boundIndexBuffer!==pe||this.boundVertexOffset!==ke||this.boundDynamicVertexBuffer!==B||this.boundDynamicVertexBuffer2!==ee;!R.extVertexArrayObject||_e?this.freshBind(U,j,K,pe,ke,B,ee):(R.bindVertexArrayOES.set(this.vao),B&&B.bind(),pe&&pe.dynamicDraw&&pe.bind(),ee&&ee.bind())},Ca.prototype.freshBind=function(R,U,j,K,pe,ke,B){var ee,ie=R.numAttributes,ge=this.context,_e=ge.gl;if(ge.extVertexArrayObject)this.vao&&this.destroy(),this.vao=ge.extVertexArrayObject.createVertexArrayOES(),ge.bindVertexArrayOES.set(this.vao),ee=0,this.boundProgram=R,this.boundLayoutVertexBuffer=U,this.boundPaintVertexBuffers=j,this.boundIndexBuffer=K,this.boundVertexOffset=pe,this.boundDynamicVertexBuffer=ke,this.boundDynamicVertexBuffer2=B;else{ee=ge.currentNumAttributes||0;for(var Ce=ie;Ce<ee;Ce++)_e.disableVertexAttribArray(Ce)}U.enableAttributes(_e,R);for(var Ne=0,Ue=j;Ne<Ue.length;Ne+=1)Ue[Ne].enableAttributes(_e,R);ke&&ke.enableAttributes(_e,R),B&&B.enableAttributes(_e,R),U.bind(),U.setVertexAttribPointers(_e,R,pe);for(var Ge=0,Ye=j;Ge<Ye.length;Ge+=1){var Qe=Ye[Ge];Qe.bind(),Qe.setVertexAttribPointers(_e,R,pe)}ke&&(ke.bind(),ke.setVertexAttribPointers(_e,R,pe)),K&&K.bind(),B&&(B.bind(),B.setVertexAttribPointers(_e,R,pe)),ge.currentNumAttributes=ie},Ca.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var uo=function(R,U,j,K,pe){var ke=R.gl;this.program=ke.createProgram();var B=j?j.defines():[];pe&&B.push("#define OVERDRAW_INSPECTOR;");var ee=B.concat(ln.fragmentSource,U.fragmentSource).join(`
`),ie=B.concat(ln.vertexSource,U.vertexSource).join(`
`),ge=ke.createShader(ke.FRAGMENT_SHADER);if(ke.isContextLost())this.failedToCreate=!0;else{ke.shaderSource(ge,ee),ke.compileShader(ge),ke.attachShader(this.program,ge);var _e=ke.createShader(ke.VERTEX_SHADER);if(ke.isContextLost())this.failedToCreate=!0;else{ke.shaderSource(_e,ie),ke.compileShader(_e),ke.attachShader(this.program,_e);for(var Ce=j?j.layoutAttributes:[],Ne=0;Ne<Ce.length;Ne++)ke.bindAttribLocation(this.program,Ne,Ce[Ne].name);ke.linkProgram(this.program),ke.deleteShader(_e),ke.deleteShader(ge),this.numAttributes=ke.getProgramParameter(this.program,ke.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ue={},Ge=0;Ge<this.numAttributes;Ge++){var Ye=ke.getActiveAttrib(this.program,Ge);Ye&&(this.attributes[Ye.name]=ke.getAttribLocation(this.program,Ye.name))}for(var Qe=ke.getProgramParameter(this.program,ke.ACTIVE_UNIFORMS),ct=0;ct<Qe;ct++){var vt=ke.getActiveUniform(this.program,ct);vt&&(Ue[vt.name]=ke.getUniformLocation(this.program,vt.name))}this.fixedUniforms=K(R,Ue),this.binderUniforms=j?j.getUniforms(R,Ue):[]}}};function Ha(R,U,j){var K=1/$n(j,1,U.transform.tileZoom),pe=Math.pow(2,j.tileID.overscaledZ),ke=j.tileSize*Math.pow(2,U.transform.tileZoom)/pe,B=ke*(j.tileID.canonical.x+j.tileID.wrap*pe),ee=ke*j.tileID.canonical.y;return{u_image:0,u_texsize:j.imageAtlasTexture.size,u_scale:[K,R.fromScale,R.toScale],u_fade:R.t,u_pixel_coord_upper:[B>>16,ee>>16],u_pixel_coord_lower:[65535&B,65535&ee]}}uo.prototype.draw=function(R,U,j,K,pe,ke,B,ee,ie,ge,_e,Ce,Ne,Ue,Ge,Ye){var Qe,ct=R.gl;if(!this.failedToCreate){for(var vt in R.program.set(this.program),R.setDepthMode(j),R.setStencilMode(K),R.setColorMode(pe),R.setCullFace(ke),this.fixedUniforms)this.fixedUniforms[vt].set(B[vt]);Ue&&Ue.setUniforms(R,this.binderUniforms,Ce,{zoom:Ne});for(var Ot=(Qe={},Qe[ct.LINES]=2,Qe[ct.TRIANGLES]=3,Qe[ct.LINE_STRIP]=1,Qe)[U],Dt=0,Pt=_e.get();Dt<Pt.length;Dt+=1){var Vt=Pt[Dt],It=Vt.vaos||(Vt.vaos={});(It[ee]||(It[ee]=new Ca)).bind(R,this,ie,Ue?Ue.getPaintVertexBuffers():[],ge,Vt.vertexOffset,Ge,Ye),ct.drawElements(U,Vt.primitiveLength*Ot,ct.UNSIGNED_SHORT,Vt.primitiveOffset*Ot*2)}}};var Ao=function(R,U,j,K){var pe=U.style.light,ke=pe.properties.get("position"),B=[ke.x,ke.y,ke.z],ee=l.create$1();pe.properties.get("anchor")==="viewport"&&l.fromRotation(ee,-U.transform.angle),l.transformMat3(B,B,ee);var ie=pe.properties.get("color");return{u_matrix:R,u_lightpos:B,u_lightintensity:pe.properties.get("intensity"),u_lightcolor:[ie.r,ie.g,ie.b],u_vertical_gradient:+j,u_opacity:K}},co=function(R,U,j,K,pe,ke,B){return l.extend(Ao(R,U,j,K),Ha(ke,U,B),{u_height_factor:-Math.pow(2,pe.overscaledZ)/B.tileSize/8})},fo=function(R){return{u_matrix:R}},Fs=function(R,U,j,K){return l.extend(fo(R),Ha(j,U,K))},fl=function(R,U){return{u_matrix:R,u_world:U}},ko=function(R,U,j,K,pe){return l.extend(Fs(R,U,j,K),{u_world:pe})},hl=function(R,U,j,K){var pe,ke,B=R.transform;if(K.paint.get("circle-pitch-alignment")==="map"){var ee=$n(j,1,B.zoom);pe=!0,ke=[ee,ee]}else pe=!1,ke=B.pixelsToGLUnits;return{u_camera_to_center_distance:B.cameraToCenterDistance,u_scale_with_map:+(K.paint.get("circle-pitch-scale")==="map"),u_matrix:R.translatePosMatrix(U.posMatrix,j,K.paint.get("circle-translate"),K.paint.get("circle-translate-anchor")),u_pitch_with_map:+pe,u_device_pixel_ratio:l.browser.devicePixelRatio,u_extrude_scale:ke}},Js=function(R,U,j){var K=$n(j,1,U.zoom),pe=Math.pow(2,U.zoom-j.tileID.overscaledZ),ke=j.tileID.overscaleFactor();return{u_matrix:R,u_camera_to_center_distance:U.cameraToCenterDistance,u_pixels_to_tile_units:K,u_extrude_scale:[U.pixelsToGLUnits[0]/(K*pe),U.pixelsToGLUnits[1]/(K*pe)],u_overscale_factor:ke}},pl=function(R,U,j){return{u_matrix:R,u_inv_matrix:U,u_camera_to_center_distance:j.cameraToCenterDistance,u_viewport_size:[j.width,j.height]}},$s=function(R,U,j){return j===void 0&&(j=1),{u_matrix:R,u_color:U,u_overlay:0,u_overlay_scale:j}},dl=function(R){return{u_matrix:R}},us=function(R,U,j,K){return{u_matrix:R,u_extrude_scale:$n(U,1,j),u_intensity:K}},So=function(R,U,j,K){var pe=l.create();l.ortho(pe,0,R.width,R.height,0,0,1);var ke=R.context.gl;return{u_matrix:pe,u_world:[ke.drawingBufferWidth,ke.drawingBufferHeight],u_image:j,u_color_ramp:K,u_opacity:U.paint.get("heatmap-opacity")}},Yo=function(R,U,j){var K=j.paint.get("hillshade-shadow-color"),pe=j.paint.get("hillshade-highlight-color"),ke=j.paint.get("hillshade-accent-color"),B=j.paint.get("hillshade-illumination-direction")*(Math.PI/180);j.paint.get("hillshade-illumination-anchor")==="viewport"&&(B-=R.transform.angle);var ee,ie,ge,_e=!R.options.moving;return{u_matrix:R.transform.calculatePosMatrix(U.tileID.toUnwrapped(),_e),u_image:0,u_latrange:(ee=U.tileID,ie=Math.pow(2,ee.canonical.z),ge=ee.canonical.y,[new l.MercatorCoordinate(0,ge/ie).toLngLat().lat,new l.MercatorCoordinate(0,(ge+1)/ie).toLngLat().lat]),u_light:[j.paint.get("hillshade-exaggeration"),B],u_shadow:K,u_highlight:pe,u_accent:ke}},cs=function(R,U,j){var K=U.stride,pe=l.create();return l.ortho(pe,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(pe,pe,[0,-l.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[K,K],u_zoom:R.overscaledZ,u_maxzoom:j,u_unpack:U.getUnpackVector()}},Ns=function(R,U,j){var K=R.transform;return{u_matrix:no(R,U,j),u_ratio:1/$n(U,1,K.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}},Qs=function(R,U,j){return l.extend(Ns(R,U,j),{u_image:0})},el=function(R,U,j,K){var pe=R.transform,ke=Zo(U,pe);return{u_matrix:no(R,U,j),u_texsize:U.imageAtlasTexture.size,u_ratio:1/$n(U,1,pe.zoom),u_device_pixel_ratio:l.browser.devicePixelRatio,u_image:0,u_scale:[ke,K.fromScale,K.toScale],u_fade:K.t,u_units_to_pixels:[1/pe.pixelsToGLUnits[0],1/pe.pixelsToGLUnits[1]]}},za=function(R,U,j,K,pe){var ke=R.transform,B=R.lineAtlas,ee=Zo(U,ke),ie=j.layout.get("line-cap")==="round",ge=B.getDash(K.from,ie),_e=B.getDash(K.to,ie),Ce=ge.width*pe.fromScale,Ne=_e.width*pe.toScale;return l.extend(Ns(R,U,j),{u_patternscale_a:[ee/Ce,-ge.height/2],u_patternscale_b:[ee/Ne,-_e.height/2],u_sdfgamma:B.width/(256*Math.min(Ce,Ne)*l.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ge.y,u_tex_y_b:_e.y,u_mix:pe.t})};function Zo(R,U){return 1/$n(R,1,U.tileZoom)}function no(R,U,j){return R.translatePosMatrix(U.tileID.posMatrix,U,j.paint.get("line-translate"),j.paint.get("line-translate-anchor"))}var ho=function(R,U,j,K,pe){return{u_matrix:R,u_tl_parent:U,u_scale_parent:j,u_buffer_scale:1,u_fade_t:K.mix,u_opacity:K.opacity*pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:pe.paint.get("raster-brightness-min"),u_brightness_high:pe.paint.get("raster-brightness-max"),u_saturation_factor:(B=pe.paint.get("raster-saturation"),B>0?1-1/(1.001-B):-B),u_contrast_factor:(ke=pe.paint.get("raster-contrast"),ke>0?1/(1-ke):1+ke),u_spin_weights:vl(pe.paint.get("raster-hue-rotate"))};var ke,B};function vl(R){R*=Math.PI/180;var U=Math.sin(R),j=Math.cos(R);return[(2*j+1)/3,(-Math.sqrt(3)*U-j+1)/3,(Math.sqrt(3)*U-j+1)/3]}var Eo,li=function(R,U,j,K,pe,ke,B,ee,ie,ge){var _e=pe.transform;return{u_is_size_zoom_constant:+(R==="constant"||R==="source"),u_is_size_feature_constant:+(R==="constant"||R==="camera"),u_size_t:U?U.uSizeT:0,u_size:U?U.uSize:0,u_camera_to_center_distance:_e.cameraToCenterDistance,u_pitch:_e.pitch/360*2*Math.PI,u_rotate_symbol:+j,u_aspect_ratio:_e.width/_e.height,u_fade_change:pe.options.fadeDuration?pe.symbolFadeChange:1,u_matrix:ke,u_label_plane_matrix:B,u_coord_matrix:ee,u_is_text:+ie,u_pitch_with_map:+K,u_texsize:ge,u_texture:0}},Ga=function(R,U,j,K,pe,ke,B,ee,ie,ge,_e){var Ce=pe.transform;return l.extend(li(R,U,j,K,pe,ke,B,ee,ie,ge),{u_gamma_scale:K?Math.cos(Ce._pitch)*Ce.cameraToCenterDistance:1,u_device_pixel_ratio:l.browser.devicePixelRatio,u_is_halo:+_e})},Ts=function(R,U,j,K,pe,ke,B,ee,ie,ge){return l.extend(Ga(R,U,j,K,pe,ke,B,ee,!0,ie,!0),{u_texsize_icon:ge,u_texture_icon:1})},Ra=function(R,U,j){return{u_matrix:R,u_opacity:U,u_color:j}},Xo=function(R,U,j,K,pe,ke){return l.extend(function(B,ee,ie,ge){var _e=ie.imageManager.getPattern(B.from.toString()),Ce=ie.imageManager.getPattern(B.to.toString()),Ne=ie.imageManager.getPixelSize(),Ue=Ne.width,Ge=Ne.height,Ye=Math.pow(2,ge.tileID.overscaledZ),Qe=ge.tileSize*Math.pow(2,ie.transform.tileZoom)/Ye,ct=Qe*(ge.tileID.canonical.x+ge.tileID.wrap*Ye),vt=Qe*ge.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:_e.tl,u_pattern_br_a:_e.br,u_pattern_tl_b:Ce.tl,u_pattern_br_b:Ce.br,u_texsize:[Ue,Ge],u_mix:ee.t,u_pattern_size_a:_e.displaySize,u_pattern_size_b:Ce.displaySize,u_scale_a:ee.fromScale,u_scale_b:ee.toScale,u_tile_units_to_pixels:1/$n(ge,1,ie.transform.tileZoom),u_pixel_coord_upper:[ct>>16,vt>>16],u_pixel_coord_lower:[65535&ct,65535&vt]}}(K,ke,j,pe),{u_matrix:R,u_opacity:U})},Cl={fillExtrusion:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_lightpos:new l.Uniform3f(R,U.u_lightpos),u_lightintensity:new l.Uniform1f(R,U.u_lightintensity),u_lightcolor:new l.Uniform3f(R,U.u_lightcolor),u_vertical_gradient:new l.Uniform1f(R,U.u_vertical_gradient),u_opacity:new l.Uniform1f(R,U.u_opacity)}},fillExtrusionPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_lightpos:new l.Uniform3f(R,U.u_lightpos),u_lightintensity:new l.Uniform1f(R,U.u_lightintensity),u_lightcolor:new l.Uniform3f(R,U.u_lightcolor),u_vertical_gradient:new l.Uniform1f(R,U.u_vertical_gradient),u_height_factor:new l.Uniform1f(R,U.u_height_factor),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade),u_opacity:new l.Uniform1f(R,U.u_opacity)}},fill:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},fillPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},fillOutline:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world)}},fillOutlinePattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world),u_image:new l.Uniform1i(R,U.u_image),u_texsize:new l.Uniform2f(R,U.u_texsize),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},circle:function(R,U){return{u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(R,U.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(R,U.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},collisionBox:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(R,U.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(R,U.u_extrude_scale),u_overscale_factor:new l.Uniform1f(R,U.u_overscale_factor)}},collisionCircle:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_inv_matrix:new l.UniformMatrix4f(R,U.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(R,U.u_viewport_size)}},debug:function(R,U){return{u_color:new l.UniformColor(R,U.u_color),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_overlay:new l.Uniform1i(R,U.u_overlay),u_overlay_scale:new l.Uniform1f(R,U.u_overlay_scale)}},clippingMask:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},heatmap:function(R,U){return{u_extrude_scale:new l.Uniform1f(R,U.u_extrude_scale),u_intensity:new l.Uniform1f(R,U.u_intensity),u_matrix:new l.UniformMatrix4f(R,U.u_matrix)}},heatmapTexture:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_world:new l.Uniform2f(R,U.u_world),u_image:new l.Uniform1i(R,U.u_image),u_color_ramp:new l.Uniform1i(R,U.u_color_ramp),u_opacity:new l.Uniform1f(R,U.u_opacity)}},hillshade:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_latrange:new l.Uniform2f(R,U.u_latrange),u_light:new l.Uniform2f(R,U.u_light),u_shadow:new l.UniformColor(R,U.u_shadow),u_highlight:new l.UniformColor(R,U.u_highlight),u_accent:new l.UniformColor(R,U.u_accent)}},hillshadePrepare:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_image:new l.Uniform1i(R,U.u_image),u_dimension:new l.Uniform2f(R,U.u_dimension),u_zoom:new l.Uniform1f(R,U.u_zoom),u_maxzoom:new l.Uniform1f(R,U.u_maxzoom),u_unpack:new l.Uniform4f(R,U.u_unpack)}},line:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels)}},lineGradient:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_image:new l.Uniform1i(R,U.u_image)}},linePattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_texsize:new l.Uniform2f(R,U.u_texsize),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_image:new l.Uniform1i(R,U.u_image),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_scale:new l.Uniform3f(R,U.u_scale),u_fade:new l.Uniform1f(R,U.u_fade)}},lineSDF:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_ratio:new l.Uniform1f(R,U.u_ratio),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(R,U.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(R,U.u_patternscale_a),u_patternscale_b:new l.Uniform2f(R,U.u_patternscale_b),u_sdfgamma:new l.Uniform1f(R,U.u_sdfgamma),u_image:new l.Uniform1i(R,U.u_image),u_tex_y_a:new l.Uniform1f(R,U.u_tex_y_a),u_tex_y_b:new l.Uniform1f(R,U.u_tex_y_b),u_mix:new l.Uniform1f(R,U.u_mix)}},raster:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_tl_parent:new l.Uniform2f(R,U.u_tl_parent),u_scale_parent:new l.Uniform1f(R,U.u_scale_parent),u_buffer_scale:new l.Uniform1f(R,U.u_buffer_scale),u_fade_t:new l.Uniform1f(R,U.u_fade_t),u_opacity:new l.Uniform1f(R,U.u_opacity),u_image0:new l.Uniform1i(R,U.u_image0),u_image1:new l.Uniform1i(R,U.u_image1),u_brightness_low:new l.Uniform1f(R,U.u_brightness_low),u_brightness_high:new l.Uniform1f(R,U.u_brightness_high),u_saturation_factor:new l.Uniform1f(R,U.u_saturation_factor),u_contrast_factor:new l.Uniform1f(R,U.u_contrast_factor),u_spin_weights:new l.Uniform3f(R,U.u_spin_weights)}},symbolIcon:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texture:new l.Uniform1i(R,U.u_texture)}},symbolSDF:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texture:new l.Uniform1i(R,U.u_texture),u_gamma_scale:new l.Uniform1f(R,U.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(R,U.u_is_halo)}},symbolTextAndIcon:function(R,U){return{u_is_size_zoom_constant:new l.Uniform1i(R,U.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(R,U.u_is_size_feature_constant),u_size_t:new l.Uniform1f(R,U.u_size_t),u_size:new l.Uniform1f(R,U.u_size),u_camera_to_center_distance:new l.Uniform1f(R,U.u_camera_to_center_distance),u_pitch:new l.Uniform1f(R,U.u_pitch),u_rotate_symbol:new l.Uniform1i(R,U.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(R,U.u_aspect_ratio),u_fade_change:new l.Uniform1f(R,U.u_fade_change),u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(R,U.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(R,U.u_coord_matrix),u_is_text:new l.Uniform1i(R,U.u_is_text),u_pitch_with_map:new l.Uniform1i(R,U.u_pitch_with_map),u_texsize:new l.Uniform2f(R,U.u_texsize),u_texsize_icon:new l.Uniform2f(R,U.u_texsize_icon),u_texture:new l.Uniform1i(R,U.u_texture),u_texture_icon:new l.Uniform1i(R,U.u_texture_icon),u_gamma_scale:new l.Uniform1f(R,U.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(R,U.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(R,U.u_is_halo)}},background:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_opacity:new l.Uniform1f(R,U.u_opacity),u_color:new l.UniformColor(R,U.u_color)}},backgroundPattern:function(R,U){return{u_matrix:new l.UniformMatrix4f(R,U.u_matrix),u_opacity:new l.Uniform1f(R,U.u_opacity),u_image:new l.Uniform1i(R,U.u_image),u_pattern_tl_a:new l.Uniform2f(R,U.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(R,U.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(R,U.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(R,U.u_pattern_br_b),u_texsize:new l.Uniform2f(R,U.u_texsize),u_mix:new l.Uniform1f(R,U.u_mix),u_pattern_size_a:new l.Uniform2f(R,U.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(R,U.u_pattern_size_b),u_scale_a:new l.Uniform1f(R,U.u_scale_a),u_scale_b:new l.Uniform1f(R,U.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(R,U.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(R,U.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(R,U.u_tile_units_to_pixels)}}};function js(R,U,j,K,pe,ke,B){for(var ee=R.context,ie=ee.gl,ge=R.useProgram("collisionBox"),_e=[],Ce=0,Ne=0,Ue=0;Ue<K.length;Ue++){var Ge=K[Ue],Ye=U.getTile(Ge),Qe=Ye.getBucket(j);if(Qe){var ct=Ge.posMatrix;pe[0]===0&&pe[1]===0||(ct=R.translatePosMatrix(Ge.posMatrix,Ye,pe,ke));var vt=B?Qe.textCollisionBox:Qe.iconCollisionBox,Ot=Qe.collisionCircleArray;if(Ot.length>0){var Dt=l.create(),Pt=ct;l.mul(Dt,Qe.placementInvProjMatrix,R.transform.glCoordMatrix),l.mul(Dt,Dt,Qe.placementViewportMatrix),_e.push({circleArray:Ot,circleOffset:Ne,transform:Pt,invTransform:Dt}),Ne=Ce+=Ot.length/4}vt&&ge.draw(ee,ie.LINES,zt.disabled,qe.disabled,R.colorModeForRenderPass(),Ve.disabled,Js(ct,R.transform,Ye),j.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,null,R.transform.zoom,null,null,vt.collisionVertexBuffer)}}if(B&&_e.length){var Vt=R.useProgram("collisionCircle"),It=new l.StructArrayLayout2f1f2i16;It.resize(4*Ce),It._trim();for(var sn=0,Jt=0,Zt=_e;Jt<Zt.length;Jt+=1)for(var Mn=Zt[Jt],kn=0;kn<Mn.circleArray.length/4;kn++){var Yn=4*kn,Zn=Mn.circleArray[Yn+0],nr=Mn.circleArray[Yn+1],sr=Mn.circleArray[Yn+2],dr=Mn.circleArray[Yn+3];It.emplace(sn++,Zn,nr,sr,dr,0),It.emplace(sn++,Zn,nr,sr,dr,1),It.emplace(sn++,Zn,nr,sr,dr,2),It.emplace(sn++,Zn,nr,sr,dr,3)}(!Eo||Eo.length<2*Ce)&&(Eo=function(xr){var Ar=2*xr,zr=new l.StructArrayLayout3ui6;zr.resize(Ar),zr._trim();for(var Hr=0;Hr<Ar;Hr++){var Kr=6*Hr;zr.uint16[Kr+0]=4*Hr+0,zr.uint16[Kr+1]=4*Hr+1,zr.uint16[Kr+2]=4*Hr+2,zr.uint16[Kr+3]=4*Hr+2,zr.uint16[Kr+4]=4*Hr+3,zr.uint16[Kr+5]=4*Hr+0}return zr}(Ce));for(var hr=ee.createIndexBuffer(Eo,!0),yr=ee.createVertexBuffer(It,l.collisionCircleLayout.members,!0),Mr=0,Fr=_e;Mr<Fr.length;Mr+=1){var Jn=Fr[Mr],fr=pl(Jn.transform,Jn.invTransform,R.transform);Vt.draw(ee,ie.TRIANGLES,zt.disabled,qe.disabled,R.colorModeForRenderPass(),Ve.disabled,fr,j.id,yr,hr,l.SegmentVector.simpleSegment(0,2*Jn.circleOffset,Jn.circleArray.length,Jn.circleArray.length/2),null,R.transform.zoom,null,null,null)}yr.destroy(),hr.destroy()}}var ml=l.identity(new Float32Array(16));function yl(R,U,j,K,pe,ke){var B=l.getAnchorAlignment(R),ee=-(B.horizontalAlign-.5)*U,ie=-(B.verticalAlign-.5)*j,ge=l.evaluateVariableOffset(R,K);return new l.Point((ee/pe+ge[0])*ke,(ie/pe+ge[1])*ke)}function Ms(R,U,j,K,pe,ke,B,ee,ie,ge,_e){var Ce=R.text.placedSymbolArray,Ne=R.text.dynamicLayoutVertexArray,Ue=R.icon.dynamicLayoutVertexArray,Ge={};Ne.clear();for(var Ye=0;Ye<Ce.length;Ye++){var Qe=Ce.get(Ye),ct=R.allowVerticalPlacement&&!Qe.placedOrientation,vt=Qe.hidden||!Qe.crossTileID||ct?null:K[Qe.crossTileID];if(vt){var Ot=new l.Point(Qe.anchorX,Qe.anchorY),Dt=Kt(Ot,j?ee:B),Pt=cn(ke.cameraToCenterDistance,Dt.signedDistanceFromCamera),Vt=pe.evaluateSizeForFeature(R.textSizeData,ge,Qe)*Pt/l.ONE_EM;j&&(Vt*=R.tilePixelRatio/ie);for(var It=vt.width,sn=vt.height,Jt=yl(vt.anchor,It,sn,vt.textOffset,vt.textBoxScale,Vt),Zt=j?Kt(Ot.add(Jt),B).point:Dt.point.add(U?Jt.rotate(-ke.angle):Jt),Mn=R.allowVerticalPlacement&&Qe.placedOrientation===l.WritingMode.vertical?Math.PI/2:0,kn=0;kn<Qe.numGlyphs;kn++)l.addDynamicAttributes(Ne,Zt,Mn);_e&&Qe.associatedIconIndex>=0&&(Ge[Qe.associatedIconIndex]={shiftedAnchor:Zt,angle:Mn})}else tr(Qe.numGlyphs,Ne)}if(_e){Ue.clear();for(var Yn=R.icon.placedSymbolArray,Zn=0;Zn<Yn.length;Zn++){var nr=Yn.get(Zn);if(nr.hidden)tr(nr.numGlyphs,Ue);else{var sr=Ge[Zn];if(sr)for(var dr=0;dr<nr.numGlyphs;dr++)l.addDynamicAttributes(Ue,sr.shiftedAnchor,sr.angle);else tr(nr.numGlyphs,Ue)}}R.icon.dynamicLayoutVertexBuffer.updateData(Ue)}R.text.dynamicLayoutVertexBuffer.updateData(Ne)}function fs(R,U,j){return j.iconsInText&&U?"symbolTextAndIcon":R?"symbolSDF":"symbolIcon"}function As(R,U,j,K,pe,ke,B,ee,ie,ge,_e,Ce){for(var Ne=R.context,Ue=Ne.gl,Ge=R.transform,Ye=ee==="map",Qe=ie==="map",ct=Ye&&j.layout.get("symbol-placement")!=="point",vt=Ye&&!Qe&&!ct,Ot=j.layout.get("symbol-sort-key").constantOr(1)!==void 0,Dt=R.depthModeForSublayer(0,zt.ReadOnly),Pt=j.layout.get("text-variable-anchor"),Vt=[],It=0,sn=K;It<sn.length;It+=1){var Jt=sn[It],Zt=U.getTile(Jt),Mn=Zt.getBucket(j);if(Mn){var kn=pe?Mn.text:Mn.icon;if(kn&&kn.segments.get().length){var Yn=kn.programConfigurations.get(j.id),Zn=pe||Mn.sdfIcons,nr=pe?Mn.textSizeData:Mn.iconSizeData,sr=Qe||Ge.pitch!==0,dr=R.useProgram(fs(Zn,pe,Mn),Yn),hr=l.evaluateSizeForZoom(nr,Ge.zoom),yr=void 0,Mr=[0,0],Fr=void 0,Jn=void 0,fr=null,xr=void 0;if(pe){if(Fr=Zt.glyphAtlasTexture,Jn=Ue.LINEAR,yr=Zt.glyphAtlasTexture.size,Mn.iconsInText){Mr=Zt.imageAtlasTexture.size,fr=Zt.imageAtlasTexture;var Ar=nr.kind==="composite"||nr.kind==="camera";xr=sr||R.options.rotating||R.options.zooming||Ar?Ue.LINEAR:Ue.NEAREST}}else{var zr=j.layout.get("icon-size").constantOr(0)!==1||Mn.iconsNeedLinear;Fr=Zt.imageAtlasTexture,Jn=Zn||R.options.rotating||R.options.zooming||zr||sr?Ue.LINEAR:Ue.NEAREST,yr=Zt.imageAtlasTexture.size}var Hr=$n(Zt,1,R.transform.zoom),Kr=Bn(Jt.posMatrix,Qe,Ye,R.transform,Hr),ri=mn(Jt.posMatrix,Qe,Ye,R.transform,Hr),vi=Pt&&Mn.hasTextData(),mi=j.layout.get("icon-text-fit")!=="none"&&vi&&Mn.hasIconData();ct&&un(Mn,Jt.posMatrix,R,pe,Kr,ri,Qe,ge);var ii=R.translatePosMatrix(Jt.posMatrix,Zt,ke,B),Pi=ct||pe&&Pt||mi?ml:Kr,$i=R.translatePosMatrix(ri,Zt,ke,B,!0),Fi=Zn&&j.paint.get(pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Wi={program:dr,buffers:kn,uniformValues:Zn?Mn.iconsInText?Ts(nr.kind,hr,vt,Qe,R,ii,Pi,$i,yr,Mr):Ga(nr.kind,hr,vt,Qe,R,ii,Pi,$i,pe,yr,!0):li(nr.kind,hr,vt,Qe,R,ii,Pi,$i,pe,yr),atlasTexture:Fr,atlasTextureIcon:fr,atlasInterpolation:Jn,atlasInterpolationIcon:xr,isSDF:Zn,hasHalo:Fi};if(Ot)for(var Qr=0,Xr=kn.segments.get();Qr<Xr.length;Qr+=1){var yi=Xr[Qr];Vt.push({segments:new l.SegmentVector([yi]),sortKey:yi.sortKey,state:Wi})}else Vt.push({segments:kn.segments,sortKey:0,state:Wi})}}}Ot&&Vt.sort(function(ss,Ma){return ss.sortKey-Ma.sortKey});for(var hi=0,_i=Vt;hi<_i.length;hi+=1){var va=_i[hi],Si=va.state;if(Ne.activeTexture.set(Ue.TEXTURE0),Si.atlasTexture.bind(Si.atlasInterpolation,Ue.CLAMP_TO_EDGE),Si.atlasTextureIcon&&(Ne.activeTexture.set(Ue.TEXTURE1),Si.atlasTextureIcon&&Si.atlasTextureIcon.bind(Si.atlasInterpolationIcon,Ue.CLAMP_TO_EDGE)),Si.isSDF){var ai=Si.uniformValues;Si.hasHalo&&(ai.u_is_halo=1,Co(Si.buffers,va.segments,j,R,Si.program,Dt,_e,Ce,ai)),ai.u_is_halo=0}Co(Si.buffers,va.segments,j,R,Si.program,Dt,_e,Ce,Si.uniformValues)}}function Co(R,U,j,K,pe,ke,B,ee,ie){var ge=K.context,_e=ge.gl;pe.draw(ge,_e.TRIANGLES,ke,B,ee,Ve.disabled,ie,j.id,R.layoutVertexBuffer,R.indexBuffer,U,j.paint,K.transform.zoom,R.programConfigurations.get(j.id),R.dynamicLayoutVertexBuffer,R.opacityVertexBuffer)}function po(R,U,j,K,pe,ke,B){var ee,ie,ge,_e,Ce,Ne=R.context.gl,Ue=j.paint.get("fill-pattern"),Ge=Ue&&Ue.constantOr(1),Ye=j.getCrossfadeParameters();B?(ie=Ge&&!j.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=Ne.LINES):(ie=Ge?"fillPattern":"fill",ee=Ne.TRIANGLES);for(var Qe=0,ct=K;Qe<ct.length;Qe+=1){var vt=ct[Qe],Ot=U.getTile(vt);if(!Ge||Ot.patternsLoaded()){var Dt=Ot.getBucket(j);if(Dt){var Pt=Dt.programConfigurations.get(j.id),Vt=R.useProgram(ie,Pt);Ge&&(R.context.activeTexture.set(Ne.TEXTURE0),Ot.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Pt.updatePaintBuffers(Ye));var It=Ue.constantOr(null);if(It&&Ot.imageAtlas){var sn=Ot.imageAtlas,Jt=sn.patternPositions[It.to.toString()],Zt=sn.patternPositions[It.from.toString()];Jt&&Zt&&Pt.setConstantPatternPositions(Jt,Zt)}var Mn=R.translatePosMatrix(vt.posMatrix,Ot,j.paint.get("fill-translate"),j.paint.get("fill-translate-anchor"));if(B){_e=Dt.indexBuffer2,Ce=Dt.segments2;var kn=[Ne.drawingBufferWidth,Ne.drawingBufferHeight];ge=ie==="fillOutlinePattern"&&Ge?ko(Mn,R,Ye,Ot,kn):fl(Mn,kn)}else _e=Dt.indexBuffer,Ce=Dt.segments,ge=Ge?Fs(Mn,R,Ye,Ot):fo(Mn);Vt.draw(R.context,ee,pe,R.stencilModeForClipping(vt),ke,Ve.disabled,ge,j.id,Dt.layoutVertexBuffer,_e,Ce,j.paint,R.transform.zoom,Pt)}}}}function Lo(R,U,j,K,pe,ke,B){for(var ee=R.context,ie=ee.gl,ge=j.paint.get("fill-extrusion-pattern"),_e=ge.constantOr(1),Ce=j.getCrossfadeParameters(),Ne=j.paint.get("fill-extrusion-opacity"),Ue=0,Ge=K;Ue<Ge.length;Ue+=1){var Ye=Ge[Ue],Qe=U.getTile(Ye),ct=Qe.getBucket(j);if(ct){var vt=ct.programConfigurations.get(j.id),Ot=R.useProgram(_e?"fillExtrusionPattern":"fillExtrusion",vt);_e&&(R.context.activeTexture.set(ie.TEXTURE0),Qe.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),vt.updatePaintBuffers(Ce));var Dt=ge.constantOr(null);if(Dt&&Qe.imageAtlas){var Pt=Qe.imageAtlas,Vt=Pt.patternPositions[Dt.to.toString()],It=Pt.patternPositions[Dt.from.toString()];Vt&&It&&vt.setConstantPatternPositions(Vt,It)}var sn=R.translatePosMatrix(Ye.posMatrix,Qe,j.paint.get("fill-extrusion-translate"),j.paint.get("fill-extrusion-translate-anchor")),Jt=j.paint.get("fill-extrusion-vertical-gradient"),Zt=_e?co(sn,R,Jt,Ne,Ye,Ce,Qe):Ao(sn,R,Jt,Ne);Ot.draw(ee,ee.gl.TRIANGLES,pe,ke,B,Ve.backCCW,Zt,j.id,ct.layoutVertexBuffer,ct.indexBuffer,ct.segments,j.paint,R.transform.zoom,vt)}}}function go(R,U,j,K,pe,ke){var B=R.context,ee=B.gl,ie=U.fbo;if(ie){var ge=R.useProgram("hillshade");B.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ie.colorAttachment.get());var _e=Yo(R,U,j);ge.draw(B,ee.TRIANGLES,K,pe,ke,Ve.disabled,_e,j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}}function Us(R,U,j,K,pe,ke,B){var ee=R.context,ie=ee.gl,ge=U.dem;if(ge&&ge.data){var _e=ge.dim,Ce=ge.stride,Ne=ge.getPixels();if(ee.activeTexture.set(ie.TEXTURE1),ee.pixelStoreUnpackPremultiplyAlpha.set(!1),U.demTexture=U.demTexture||R.getTileTexture(Ce),U.demTexture){var Ue=U.demTexture;Ue.update(Ne,{premultiply:!1}),Ue.bind(ie.NEAREST,ie.CLAMP_TO_EDGE)}else U.demTexture=new l.Texture(ee,Ne,ie.RGBA,{premultiply:!1}),U.demTexture.bind(ie.NEAREST,ie.CLAMP_TO_EDGE);ee.activeTexture.set(ie.TEXTURE0);var Ge=U.fbo;if(!Ge){var Ye=new l.Texture(ee,{width:_e,height:_e,data:null},ie.RGBA);Ye.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),(Ge=U.fbo=ee.createFramebuffer(_e,_e,!0)).colorAttachment.set(Ye.texture)}ee.bindFramebuffer.set(Ge.framebuffer),ee.viewport.set([0,0,_e,_e]),R.useProgram("hillshadePrepare").draw(ee,ie.TRIANGLES,pe,ke,B,Ve.disabled,cs(U.tileID,ge,K),j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments),U.needsHillshadePrepare=!1}}function Wa(R,U,j,K,pe){var ke=K.paint.get("raster-fade-duration");if(ke>0){var B=l.browser.now(),ee=(B-R.timeAdded)/ke,ie=U?(B-U.timeAdded)/ke:-1,ge=j.getSource(),_e=pe.coveringZoomLevel({tileSize:ge.tileSize,roundZoom:ge.roundZoom}),Ce=!U||Math.abs(U.tileID.overscaledZ-_e)>Math.abs(R.tileID.overscaledZ-_e),Ne=Ce&&R.refreshedUponExpiration?1:l.clamp(Ce?ee:1-ie,0,1);return R.refreshedUponExpiration&&ee>=1&&(R.refreshedUponExpiration=!1),U?{opacity:1,mix:1-Ne}:{opacity:Ne,mix:0}}return{opacity:1,mix:0}}var xl=new l.Color(1,0,0,1),bl=new l.Color(0,1,0,1),Vs=new l.Color(0,0,1,1),Po=new l.Color(1,0,1,1),Hs=new l.Color(0,1,1,1);function Ko(R){var U=R.transform.padding;tl(R,R.transform.height-(U.top||0),3,xl),tl(R,U.bottom||0,3,bl),hs(R,U.left||0,3,Vs),hs(R,R.transform.width-(U.right||0),3,Po);var j=R.transform.centerPoint;(function(K,pe,ke,B){var ee=20,ie=2;Jo(K,pe-ie/2,ke-ee/2,ie,ee,B),Jo(K,pe-ee/2,ke-ie/2,ee,ie,B)})(R,j.x,R.transform.height-j.y,Hs)}function tl(R,U,j,K){Jo(R,0,U+j/2,R.transform.width,j,K)}function hs(R,U,j,K){Jo(R,U-j/2,0,j,R.transform.height,K)}function Jo(R,U,j,K,pe,ke){var B=R.context,ee=B.gl;ee.enable(ee.SCISSOR_TEST),ee.scissor(U*l.browser.devicePixelRatio,j*l.browser.devicePixelRatio,K*l.browser.devicePixelRatio,pe*l.browser.devicePixelRatio),B.clear({color:ke}),ee.disable(ee.SCISSOR_TEST)}function ks(R,U,j){var K=R.context,pe=K.gl,ke=j.posMatrix,B=R.useProgram("debug"),ee=zt.disabled,ie=qe.disabled,ge=R.colorModeForRenderPass(),_e="$debug";K.activeTexture.set(pe.TEXTURE0),R.emptyTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),B.draw(K,pe.LINE_STRIP,ee,ie,ge,Ve.disabled,$s(ke,l.Color.red),_e,R.debugBuffer,R.tileBorderIndexBuffer,R.debugSegments);var Ce=U.getTileByID(j.key).latestRawTileData,Ne=Ce&&Ce.byteLength||0,Ue=Math.floor(Ne/1024),Ge=U.getTile(j).tileSize,Ye=512/Math.min(Ge,512)*(j.overscaledZ/R.transform.zoom)*.5,Qe=j.canonical.toString();j.overscaledZ!==j.canonical.z&&(Qe+=" => "+j.overscaledZ),function(ct,vt){ct.initDebugOverlayCanvas();var Ot=ct.debugOverlayCanvas,Dt=ct.context.gl,Pt=ct.debugOverlayCanvas.getContext("2d");Pt.clearRect(0,0,Ot.width,Ot.height),Pt.shadowColor="white",Pt.shadowBlur=2,Pt.lineWidth=1.5,Pt.strokeStyle="white",Pt.textBaseline="top",Pt.font="bold 36px Open Sans, sans-serif",Pt.fillText(vt,5,5),Pt.strokeText(vt,5,5),ct.debugOverlayTexture.update(Ot),ct.debugOverlayTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE)}(R,Qe+" "+Ue+"kb"),B.draw(K,pe.TRIANGLES,ee,ie,Xe.alphaBlended,Ve.disabled,$s(ke,l.Color.transparent,Ye),_e,R.debugBuffer,R.quadTriangleIndexBuffer,R.debugSegments)}var ps={symbol:function(R,U,j,K,pe){if(R.renderPass==="translucent"){var ke=qe.disabled,B=R.colorModeForRenderPass();j.layout.get("text-variable-anchor")&&function(ee,ie,ge,_e,Ce,Ne,Ue){for(var Ge=ie.transform,Ye=Ce==="map",Qe=Ne==="map",ct=0,vt=ee;ct<vt.length;ct+=1){var Ot=vt[ct],Dt=_e.getTile(Ot),Pt=Dt.getBucket(ge);if(Pt&&Pt.text&&Pt.text.segments.get().length){var Vt=Pt.textSizeData,It=l.evaluateSizeForZoom(Vt,Ge.zoom),sn=$n(Dt,1,ie.transform.zoom),Jt=Bn(Ot.posMatrix,Qe,Ye,ie.transform,sn),Zt=ge.layout.get("icon-text-fit")!=="none"&&Pt.hasIconData();if(It){var Mn=Math.pow(2,Ge.zoom-Dt.tileID.overscaledZ);Ms(Pt,Ye,Qe,Ue,l.symbolSize,Ge,Jt,Ot.posMatrix,Mn,It,Zt)}}}}(K,R,j,U,j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),pe),j.paint.get("icon-opacity").constantOr(1)!==0&&As(R,U,j,K,!1,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),j.layout.get("icon-rotation-alignment"),j.layout.get("icon-pitch-alignment"),j.layout.get("icon-keep-upright"),ke,B),j.paint.get("text-opacity").constantOr(1)!==0&&As(R,U,j,K,!0,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),j.layout.get("text-rotation-alignment"),j.layout.get("text-pitch-alignment"),j.layout.get("text-keep-upright"),ke,B),U.map.showCollisionBoxes&&(js(R,U,j,K,j.paint.get("text-translate"),j.paint.get("text-translate-anchor"),!0),js(R,U,j,K,j.paint.get("icon-translate"),j.paint.get("icon-translate-anchor"),!1))}},circle:function(R,U,j,K){if(R.renderPass==="translucent"){var pe=j.paint.get("circle-opacity"),ke=j.paint.get("circle-stroke-width"),B=j.paint.get("circle-stroke-opacity"),ee=j.layout.get("circle-sort-key").constantOr(1)!==void 0;if(pe.constantOr(1)!==0||ke.constantOr(1)!==0&&B.constantOr(1)!==0){for(var ie=R.context,ge=ie.gl,_e=R.depthModeForSublayer(0,zt.ReadOnly),Ce=qe.disabled,Ne=R.colorModeForRenderPass(),Ue=[],Ge=0;Ge<K.length;Ge++){var Ye=K[Ge],Qe=U.getTile(Ye),ct=Qe.getBucket(j);if(ct){var vt=ct.programConfigurations.get(j.id),Ot={programConfiguration:vt,program:R.useProgram("circle",vt),layoutVertexBuffer:ct.layoutVertexBuffer,indexBuffer:ct.indexBuffer,uniformValues:hl(R,Ye,Qe,j)};if(ee)for(var Dt=0,Pt=ct.segments.get();Dt<Pt.length;Dt+=1){var Vt=Pt[Dt];Ue.push({segments:new l.SegmentVector([Vt]),sortKey:Vt.sortKey,state:Ot})}else Ue.push({segments:ct.segments,sortKey:0,state:Ot})}}ee&&Ue.sort(function(dr,hr){return dr.sortKey-hr.sortKey});for(var It=0,sn=Ue;It<sn.length;It+=1){var Jt=sn[It],Zt=Jt.state,Mn=Zt.programConfiguration,kn=Zt.program,Yn=Zt.layoutVertexBuffer,Zn=Zt.indexBuffer,nr=Zt.uniformValues,sr=Jt.segments;kn.draw(ie,ge.TRIANGLES,_e,Ce,Ne,Ve.disabled,nr,j.id,Yn,Zn,sr,j.paint,R.transform.zoom,Mn)}}}},heatmap:function(R,U,j,K){if(j.paint.get("heatmap-opacity")!==0)if(R.renderPass==="offscreen"){var pe=R.context,ke=pe.gl,B=qe.disabled,ee=new Xe([ke.ONE,ke.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(Ye,Qe,ct){var vt=Ye.gl;Ye.activeTexture.set(vt.TEXTURE1),Ye.viewport.set([0,0,Qe.width/4,Qe.height/4]);var Ot=ct.heatmapFbo;if(Ot)vt.bindTexture(vt.TEXTURE_2D,Ot.colorAttachment.get()),Ye.bindFramebuffer.set(Ot.framebuffer);else{var Dt=vt.createTexture();vt.bindTexture(vt.TEXTURE_2D,Dt),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_WRAP_S,vt.CLAMP_TO_EDGE),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_WRAP_T,vt.CLAMP_TO_EDGE),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_MIN_FILTER,vt.LINEAR),vt.texParameteri(vt.TEXTURE_2D,vt.TEXTURE_MAG_FILTER,vt.LINEAR),Ot=ct.heatmapFbo=Ye.createFramebuffer(Qe.width/4,Qe.height/4,!1),function(Pt,Vt,It,sn){var Jt=Pt.gl,Zt=Pt.extRenderToTextureHalfFloat?Pt.extTextureHalfFloat.HALF_FLOAT_OES:Jt.UNSIGNED_BYTE;Jt.texImage2D(Jt.TEXTURE_2D,0,Jt.RGBA,Vt.width/4,Vt.height/4,0,Jt.RGBA,Zt,null),sn.colorAttachment.set(It)}(Ye,Qe,Dt,Ot)}})(pe,R,j),pe.clear({color:l.Color.transparent});for(var ie=0;ie<K.length;ie++){var ge=K[ie];if(!U.hasRenderableParent(ge)){var _e=U.getTile(ge),Ce=_e.getBucket(j);if(Ce){var Ne=Ce.programConfigurations.get(j.id),Ue=R.useProgram("heatmap",Ne),Ge=R.transform.zoom;Ue.draw(pe,ke.TRIANGLES,zt.disabled,B,ee,Ve.disabled,us(ge.posMatrix,_e,Ge,j.paint.get("heatmap-intensity")),j.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,j.paint,R.transform.zoom,Ne)}}}pe.viewport.set([0,0,R.width,R.height])}else R.renderPass==="translucent"&&(R.context.setColorMode(R.colorModeForRenderPass()),function(Ye,Qe){var ct=Ye.context,vt=ct.gl,Ot=Qe.heatmapFbo;if(Ot){ct.activeTexture.set(vt.TEXTURE0),vt.bindTexture(vt.TEXTURE_2D,Ot.colorAttachment.get()),ct.activeTexture.set(vt.TEXTURE1);var Dt=Qe.colorRampTexture;Dt||(Dt=Qe.colorRampTexture=new l.Texture(ct,Qe.colorRamp,vt.RGBA)),Dt.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),Ye.useProgram("heatmapTexture").draw(ct,vt.TRIANGLES,zt.disabled,qe.disabled,Ye.colorModeForRenderPass(),Ve.disabled,So(Ye,Qe,0,1),Qe.id,Ye.viewportBuffer,Ye.quadTriangleIndexBuffer,Ye.viewportSegments,Qe.paint,Ye.transform.zoom)}}(R,j))},line:function(R,U,j,K){if(R.renderPass==="translucent"){var pe=j.paint.get("line-opacity"),ke=j.paint.get("line-width");if(pe.constantOr(1)!==0&&ke.constantOr(1)!==0){var B=R.depthModeForSublayer(0,zt.ReadOnly),ee=R.colorModeForRenderPass(),ie=j.paint.get("line-dasharray"),ge=j.paint.get("line-pattern"),_e=ge.constantOr(1),Ce=j.paint.get("line-gradient"),Ne=j.getCrossfadeParameters(),Ue=_e?"linePattern":ie?"lineSDF":Ce?"lineGradient":"line",Ge=R.context,Ye=Ge.gl,Qe=!0;if(Ce){Ge.activeTexture.set(Ye.TEXTURE0);var ct=j.gradientTexture;if(!j.gradient)return;ct||(ct=j.gradientTexture=new l.Texture(Ge,j.gradient,Ye.RGBA)),ct.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}for(var vt=0,Ot=K;vt<Ot.length;vt+=1){var Dt=Ot[vt],Pt=U.getTile(Dt);if(!_e||Pt.patternsLoaded()){var Vt=Pt.getBucket(j);if(Vt){var It=Vt.programConfigurations.get(j.id),sn=R.context.program.get(),Jt=R.useProgram(Ue,It),Zt=Qe||Jt.program!==sn,Mn=ge.constantOr(null);if(Mn&&Pt.imageAtlas){var kn=Pt.imageAtlas,Yn=kn.patternPositions[Mn.to.toString()],Zn=kn.patternPositions[Mn.from.toString()];Yn&&Zn&&It.setConstantPatternPositions(Yn,Zn)}var nr=_e?el(R,Pt,j,Ne):ie?za(R,Pt,j,ie,Ne):Ce?Qs(R,Pt,j):Ns(R,Pt,j);_e?(Ge.activeTexture.set(Ye.TEXTURE0),Pt.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),It.updatePaintBuffers(Ne)):ie&&(Zt||R.lineAtlas.dirty)&&(Ge.activeTexture.set(Ye.TEXTURE0),R.lineAtlas.bind(Ge)),Jt.draw(Ge,Ye.TRIANGLES,B,R.stencilModeForClipping(Dt),ee,Ve.disabled,nr,j.id,Vt.layoutVertexBuffer,Vt.indexBuffer,Vt.segments,j.paint,R.transform.zoom,It),Qe=!1}}}}}},fill:function(R,U,j,K){var pe=j.paint.get("fill-color"),ke=j.paint.get("fill-opacity");if(ke.constantOr(1)!==0){var B=R.colorModeForRenderPass(),ee=j.paint.get("fill-pattern"),ie=R.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&pe.constantOr(l.Color.transparent).a===1&&ke.constantOr(0)===1?"opaque":"translucent";if(R.renderPass===ie){var ge=R.depthModeForSublayer(1,R.renderPass==="opaque"?zt.ReadWrite:zt.ReadOnly);po(R,U,j,K,ge,B,!1)}if(R.renderPass==="translucent"&&j.paint.get("fill-antialias")){var _e=R.depthModeForSublayer(j.getPaintProperty("fill-outline-color")?2:0,zt.ReadOnly);po(R,U,j,K,_e,B,!0)}}},"fill-extrusion":function(R,U,j,K){var pe=j.paint.get("fill-extrusion-opacity");if(pe!==0&&R.renderPass==="translucent"){var ke=new zt(R.context.gl.LEQUAL,zt.ReadWrite,R.depthRangeFor3D);if(pe!==1||j.paint.get("fill-extrusion-pattern").constantOr(1))Lo(R,U,j,K,ke,qe.disabled,Xe.disabled),Lo(R,U,j,K,ke,R.stencilModeFor3D(),R.colorModeForRenderPass());else{var B=R.colorModeForRenderPass();Lo(R,U,j,K,ke,qe.disabled,B)}}},hillshade:function(R,U,j,K){if(R.renderPass==="offscreen"||R.renderPass==="translucent"){for(var pe=R.context,ke=U.getSource().maxzoom,B=R.depthModeForSublayer(0,zt.ReadOnly),ee=R.colorModeForRenderPass(),ie=R.renderPass==="translucent"?R.stencilConfigForOverlap(K):[{},K],ge=ie[0],_e=0,Ce=ie[1];_e<Ce.length;_e+=1){var Ne=Ce[_e],Ue=U.getTile(Ne);Ue.needsHillshadePrepare&&R.renderPass==="offscreen"?Us(R,Ue,j,ke,B,qe.disabled,ee):R.renderPass==="translucent"&&go(R,Ue,j,B,ge[Ne.overscaledZ],ee)}pe.viewport.set([0,0,R.width,R.height])}},raster:function(R,U,j,K){if(R.renderPass==="translucent"&&j.paint.get("raster-opacity")!==0&&K.length)for(var pe=R.context,ke=pe.gl,B=U.getSource(),ee=R.useProgram("raster"),ie=R.colorModeForRenderPass(),ge=B instanceof F?[{},K]:R.stencilConfigForOverlap(K),_e=ge[0],Ce=ge[1],Ne=Ce[Ce.length-1].overscaledZ,Ue=!R.options.moving,Ge=0,Ye=Ce;Ge<Ye.length;Ge+=1){var Qe=Ye[Ge],ct=R.depthModeForSublayer(Qe.overscaledZ-Ne,j.paint.get("raster-opacity")===1?zt.ReadWrite:zt.ReadOnly,ke.LESS),vt=U.getTile(Qe),Ot=R.transform.calculatePosMatrix(Qe.toUnwrapped(),Ue);vt.registerFadeDuration(j.paint.get("raster-fade-duration"));var Dt=U.findLoadedParent(Qe,0),Pt=Wa(vt,Dt,U,j,R.transform),Vt=void 0,It=void 0,sn=j.paint.get("raster-resampling")==="nearest"?ke.NEAREST:ke.LINEAR;pe.activeTexture.set(ke.TEXTURE0),vt.texture.bind(sn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),pe.activeTexture.set(ke.TEXTURE1),Dt?(Dt.texture.bind(sn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST),Vt=Math.pow(2,Dt.tileID.overscaledZ-vt.tileID.overscaledZ),It=[vt.tileID.canonical.x*Vt%1,vt.tileID.canonical.y*Vt%1]):vt.texture.bind(sn,ke.CLAMP_TO_EDGE,ke.LINEAR_MIPMAP_NEAREST);var Jt=ho(Ot,It||[0,0],Vt||1,Pt,j);B instanceof F?ee.draw(pe,ke.TRIANGLES,ct,qe.disabled,ie,Ve.disabled,Jt,j.id,B.boundsBuffer,R.quadTriangleIndexBuffer,B.boundsSegments):ee.draw(pe,ke.TRIANGLES,ct,_e[Qe.overscaledZ],ie,Ve.disabled,Jt,j.id,R.rasterBoundsBuffer,R.quadTriangleIndexBuffer,R.rasterBoundsSegments)}},background:function(R,U,j){var K=j.paint.get("background-color"),pe=j.paint.get("background-opacity");if(pe!==0){var ke=R.context,B=ke.gl,ee=R.transform,ie=ee.tileSize,ge=j.paint.get("background-pattern");if(!R.isPatternMissing(ge)){var _e=!ge&&K.a===1&&pe===1&&R.opaquePassEnabledForLayer()?"opaque":"translucent";if(R.renderPass===_e){var Ce=qe.disabled,Ne=R.depthModeForSublayer(0,_e==="opaque"?zt.ReadWrite:zt.ReadOnly),Ue=R.colorModeForRenderPass(),Ge=R.useProgram(ge?"backgroundPattern":"background"),Ye=ee.coveringTiles({tileSize:ie});ge&&(ke.activeTexture.set(B.TEXTURE0),R.imageManager.bind(R.context));for(var Qe=j.getCrossfadeParameters(),ct=0,vt=Ye;ct<vt.length;ct+=1){var Ot=vt[ct],Dt=R.transform.calculatePosMatrix(Ot.toUnwrapped()),Pt=ge?Xo(Dt,pe,R,ge,{tileID:Ot,tileSize:ie},Qe):Ra(Dt,pe,K);Ge.draw(ke,B.TRIANGLES,Ne,Ce,Ue,Ve.disabled,Pt,j.id,R.tileExtentBuffer,R.quadTriangleIndexBuffer,R.tileExtentSegments)}}}}},debug:function(R,U,j){for(var K=0;K<j.length;K++)ks(R,U,j[K])},custom:function(R,U,j){var K=R.context,pe=j.implementation;if(R.renderPass==="offscreen"){var ke=pe.prerender;ke&&(R.setCustomLayerDefaults(),K.setColorMode(R.colorModeForRenderPass()),ke.call(pe,K.gl,R.transform.customLayerMatrix()),K.setDirty(),R.setBaseState())}else if(R.renderPass==="translucent"){R.setCustomLayerDefaults(),K.setColorMode(R.colorModeForRenderPass()),K.setStencilMode(qe.disabled);var B=pe.renderingMode==="3d"?new zt(R.context.gl.LEQUAL,zt.ReadWrite,R.depthRangeFor3D):R.depthModeForSublayer(0,zt.ReadOnly);K.setDepthMode(B),pe.render(K.gl,R.transform.customLayerMatrix()),K.setDirty(),R.setBaseState(),K.bindFramebuffer.set(null)}}},ui=function(R,U){this.context=new Ze(R),this.transform=U,this._tileTextures={},this.setup(),this.numSublayers=st.maxUnderzooming+st.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Qn,this.gpuTimers={}};ui.prototype.resize=function(R,U){if(this.width=R*l.browser.devicePixelRatio,this.height=U*l.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var j=0,K=this.style._order;j<K.length;j+=1){var pe=K[j];this.style._layers[pe].resize()}},ui.prototype.setup=function(){var R=this.context,U=new l.StructArrayLayout2i4;U.emplaceBack(0,0),U.emplaceBack(l.EXTENT,0),U.emplaceBack(0,l.EXTENT),U.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=R.createVertexBuffer(U,Bt.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);var j=new l.StructArrayLayout2i4;j.emplaceBack(0,0),j.emplaceBack(l.EXTENT,0),j.emplaceBack(0,l.EXTENT),j.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=R.createVertexBuffer(j,Bt.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);var K=new l.StructArrayLayout4i8;K.emplaceBack(0,0,0,0),K.emplaceBack(l.EXTENT,0,l.EXTENT,0),K.emplaceBack(0,l.EXTENT,0,l.EXTENT),K.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=R.createVertexBuffer(K,N.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);var pe=new l.StructArrayLayout2i4;pe.emplaceBack(0,0),pe.emplaceBack(1,0),pe.emplaceBack(0,1),pe.emplaceBack(1,1),this.viewportBuffer=R.createVertexBuffer(pe,Bt.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);var ke=new l.StructArrayLayout1ui2;ke.emplaceBack(0),ke.emplaceBack(1),ke.emplaceBack(3),ke.emplaceBack(2),ke.emplaceBack(0),this.tileBorderIndexBuffer=R.createIndexBuffer(ke);var B=new l.StructArrayLayout3ui6;B.emplaceBack(0,1,2),B.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=R.createIndexBuffer(B),this.emptyTexture=new l.Texture(R,{width:1,height:1,data:new Uint8Array([0,0,0,0])},R.gl.RGBA);var ee=this.context.gl;this.stencilClearMode=new qe({func:ee.ALWAYS,mask:0},0,255,ee.ZERO,ee.ZERO,ee.ZERO)},ui.prototype.clearStencil=function(){var R=this.context,U=R.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var j=l.create();l.ortho(j,0,this.width,this.height,0,0,1),l.scale(j,j,[U.drawingBufferWidth,U.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(R,U.TRIANGLES,zt.disabled,this.stencilClearMode,Xe.disabled,Ve.disabled,dl(j),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ui.prototype._renderTileClippingMasks=function(R,U){if(this.currentStencilSource!==R.source&&R.isTileClipped()&&U&&U.length){this.currentStencilSource=R.source;var j=this.context,K=j.gl;this.nextStencilID+U.length>256&&this.clearStencil(),j.setColorMode(Xe.disabled),j.setDepthMode(zt.disabled);var pe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ke=0,B=U;ke<B.length;ke+=1){var ee=B[ke],ie=this._tileClippingMaskIDs[ee.key]=this.nextStencilID++;pe.draw(j,K.TRIANGLES,zt.disabled,new qe({func:K.ALWAYS,mask:0},ie,255,K.KEEP,K.KEEP,K.REPLACE),Xe.disabled,Ve.disabled,dl(ee.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ui.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var R=this.nextStencilID++,U=this.context.gl;return new qe({func:U.NOTEQUAL,mask:255},R,255,U.KEEP,U.KEEP,U.REPLACE)},ui.prototype.stencilModeForClipping=function(R){var U=this.context.gl;return new qe({func:U.EQUAL,mask:255},this._tileClippingMaskIDs[R.key],0,U.KEEP,U.KEEP,U.REPLACE)},ui.prototype.stencilConfigForOverlap=function(R){var U,j=this.context.gl,K=R.sort(function(ie,ge){return ge.overscaledZ-ie.overscaledZ}),pe=K[K.length-1].overscaledZ,ke=K[0].overscaledZ-pe+1;if(ke>1){this.currentStencilSource=void 0,this.nextStencilID+ke>256&&this.clearStencil();for(var B={},ee=0;ee<ke;ee++)B[ee+pe]=new qe({func:j.GEQUAL,mask:255},ee+this.nextStencilID,255,j.KEEP,j.KEEP,j.REPLACE);return this.nextStencilID+=ke,[B,K]}return[(U={},U[pe]=qe.disabled,U),K]},ui.prototype.colorModeForRenderPass=function(){var R=this.context.gl;if(this._showOverdrawInspector){var U=.125;return new Xe([R.CONSTANT_COLOR,R.ONE],new l.Color(U,U,U,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?Xe.unblended:Xe.alphaBlended},ui.prototype.depthModeForSublayer=function(R,U,j){if(!this.opaquePassEnabledForLayer())return zt.disabled;var K=1-((1+this.currentLayer)*this.numSublayers+R)*this.depthEpsilon;return new zt(j||this.context.gl.LEQUAL,U,[K,K])},ui.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ui.prototype.render=function(R,U){var j=this;this.style=R,this.options=U,this.lineAtlas=R.lineAtlas,this.imageManager=R.imageManager,this.glyphManager=R.glyphManager,this.symbolFadeChange=R.placement.symbolFadeChange(l.browser.now()),this.imageManager.beginFrame();var K=this.style._order,pe=this.style.sourceCaches;for(var ke in pe){var B=pe[ke];B.used&&B.prepare(this.context)}var ee,ie,ge={},_e={},Ce={};for(var Ne in pe){var Ue=pe[Ne];ge[Ne]=Ue.getVisibleCoordinates(),_e[Ne]=ge[Ne].slice().reverse(),Ce[Ne]=Ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ge=0;Ge<K.length;Ge++){var Ye=K[Ge];if(this.style._layers[Ye].is3D()){this.opaquePassCutoff=Ge;break}}this.renderPass="offscreen";for(var Qe=0,ct=K;Qe<ct.length;Qe+=1){var vt=ct[Qe],Ot=this.style._layers[vt];if(Ot.hasOffscreenPass()&&!Ot.isHidden(this.transform.zoom)){var Dt=_e[Ot.source];(Ot.type==="custom"||Dt.length)&&this.renderLayer(this,pe[Ot.source],Ot,Dt)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:U.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=U.showOverdrawInspector,this.depthRangeFor3D=[0,1-(R._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=K.length-1;this.currentLayer>=0;this.currentLayer--){var Pt=this.style._layers[K[this.currentLayer]],Vt=pe[Pt.source],It=ge[Pt.source];this._renderTileClippingMasks(Pt,It),this.renderLayer(this,Vt,Pt,It)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<K.length;this.currentLayer++){var sn=this.style._layers[K[this.currentLayer]],Jt=pe[sn.source],Zt=(sn.type==="symbol"?Ce:_e)[sn.source];this._renderTileClippingMasks(sn,ge[sn.source]),this.renderLayer(this,Jt,sn,Zt)}this.options.showTileBoundaries&&(l.values(this.style._layers).forEach(function(Mn){Mn.source&&!Mn.isHidden(j.transform.zoom)&&(Mn.source!==(ie&&ie.id)&&(ie=j.style.sourceCaches[Mn.source]),(!ee||ee.getSource().maxzoom<ie.getSource().maxzoom)&&(ee=ie))}),ee&&ps.debug(this,ee,ee.getVisibleCoordinates())),this.options.showPadding&&Ko(this),this.context.setDefault()},ui.prototype.renderLayer=function(R,U,j,K){j.isHidden(this.transform.zoom)||(j.type==="background"||j.type==="custom"||K.length)&&(this.id=j.id,this.gpuTimingStart(j),ps[j.type](R,U,j,K,this.style.placement.variableOffsets),this.gpuTimingEnd())},ui.prototype.gpuTimingStart=function(R){if(this.options.gpuTiming){var U=this.context.extTimerQuery,j=this.gpuTimers[R.id];j||(j=this.gpuTimers[R.id]={calls:0,cpuTime:0,query:U.createQueryEXT()}),j.calls++,U.beginQueryEXT(U.TIME_ELAPSED_EXT,j.query)}},ui.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var R=this.context.extTimerQuery;R.endQueryEXT(R.TIME_ELAPSED_EXT)}},ui.prototype.collectGpuTimers=function(){var R=this.gpuTimers;return this.gpuTimers={},R},ui.prototype.queryGpuTimers=function(R){var U={};for(var j in R){var K=R[j],pe=this.context.extTimerQuery,ke=pe.getQueryObjectEXT(K.query,pe.QUERY_RESULT_EXT)/1e6;pe.deleteQueryEXT(K.query),U[j]=ke}return U},ui.prototype.translatePosMatrix=function(R,U,j,K,pe){if(!j[0]&&!j[1])return R;var ke=pe?K==="map"?this.transform.angle:0:K==="viewport"?-this.transform.angle:0;if(ke){var B=Math.sin(ke),ee=Math.cos(ke);j=[j[0]*ee-j[1]*B,j[0]*B+j[1]*ee]}var ie=[pe?j[0]:$n(U,j[0],this.transform.zoom),pe?j[1]:$n(U,j[1],this.transform.zoom),0],ge=new Float32Array(16);return l.translate(ge,R,ie),ge},ui.prototype.saveTileTexture=function(R){var U=this._tileTextures[R.size[0]];U?U.push(R):this._tileTextures[R.size[0]]=[R]},ui.prototype.getTileTexture=function(R){var U=this._tileTextures[R];return U&&U.length>0?U.pop():null},ui.prototype.isPatternMissing=function(R){if(!R)return!1;if(!R.from||!R.to)return!0;var U=this.imageManager.getPattern(R.from.toString()),j=this.imageManager.getPattern(R.to.toString());return!U||!j},ui.prototype.useProgram=function(R,U){this.cache=this.cache||{};var j=""+R+(U?U.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[j]||(this.cache[j]=new uo(this.context,to[R],U,Cl[R],this._showOverdrawInspector)),this.cache[j]},ui.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ui.prototype.setBaseState=function(){var R=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(R.FUNC_ADD)},ui.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=l.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var R=this.context.gl;this.debugOverlayTexture=new l.Texture(this.context,this.debugOverlayCanvas,R.RGBA)}},ui.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Oo=function(R,U){this.points=R,this.planes=U};Oo.fromInvProjectionMatrix=function(R,U,j){var K=Math.pow(2,j),pe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(B){return l.transformMat4([],B,R)}).map(function(B){return l.scale$1([],B,1/B[3]/U*K)}),ke=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(B){var ee=l.sub([],pe[B[0]],pe[B[1]]),ie=l.sub([],pe[B[2]],pe[B[1]]),ge=l.normalize([],l.cross([],ee,ie)),_e=-l.dot(ge,pe[B[1]]);return ge.concat(_e)});return new Oo(pe,ke)};var vo=function(R,U){this.min=R,this.max=U,this.center=l.scale$2([],l.add([],this.min,this.max),.5)};vo.prototype.quadrant=function(R){for(var U=[R%2==0,R<2],j=l.clone$2(this.min),K=l.clone$2(this.max),pe=0;pe<U.length;pe++)j[pe]=U[pe]?this.min[pe]:this.center[pe],K[pe]=U[pe]?this.center[pe]:this.max[pe];return K[2]=this.max[2],new vo(j,K)},vo.prototype.distanceX=function(R){return Math.max(Math.min(this.max[0],R[0]),this.min[0])-R[0]},vo.prototype.distanceY=function(R){return Math.max(Math.min(this.max[1],R[1]),this.min[1])-R[1]},vo.prototype.intersects=function(R){for(var U=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],j=!0,K=0;K<R.planes.length;K++){for(var pe=R.planes[K],ke=0,B=0;B<U.length;B++)ke+=l.dot$1(pe,U[B])>=0;if(ke===0)return 0;ke!==U.length&&(j=!1)}if(j)return 2;for(var ee=0;ee<3;ee++){for(var ie=Number.MAX_VALUE,ge=-Number.MAX_VALUE,_e=0;_e<R.points.length;_e++){var Ce=R.points[_e][ee]-this.min[ee];ie=Math.min(ie,Ce),ge=Math.max(ge,Ce)}if(ge<0||ie>this.max[ee]-this.min[ee])return 0}return 1};var Zi=function(R,U,j,K){if(R===void 0&&(R=0),U===void 0&&(U=0),j===void 0&&(j=0),K===void 0&&(K=0),isNaN(R)||R<0||isNaN(U)||U<0||isNaN(j)||j<0||isNaN(K)||K<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=R,this.bottom=U,this.left=j,this.right=K};Zi.prototype.interpolate=function(R,U,j){return U.top!=null&&R.top!=null&&(this.top=l.number(R.top,U.top,j)),U.bottom!=null&&R.bottom!=null&&(this.bottom=l.number(R.bottom,U.bottom,j)),U.left!=null&&R.left!=null&&(this.left=l.number(R.left,U.left,j)),U.right!=null&&R.right!=null&&(this.right=l.number(R.right,U.right,j)),this},Zi.prototype.getCenter=function(R,U){var j=l.clamp((this.left+R-this.right)/2,0,R),K=l.clamp((this.top+U-this.bottom)/2,0,U);return new l.Point(j,K)},Zi.prototype.equals=function(R){return this.top===R.top&&this.bottom===R.bottom&&this.left===R.left&&this.right===R.right},Zi.prototype.clone=function(){return new Zi(this.top,this.bottom,this.left,this.right)},Zi.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Jr=function(R,U,j,K,pe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=pe===void 0||pe,this._minZoom=R||0,this._maxZoom=U||22,this._minPitch=j??0,this._maxPitch=K??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Zi,this._posMatrixCache={},this._alignedPosMatrixCache={}},ti={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Jr.prototype.clone=function(){var R=new Jr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return R.tileSize=this.tileSize,R.latRange=this.latRange,R.width=this.width,R.height=this.height,R._center=this._center,R.zoom=this.zoom,R.angle=this.angle,R._fov=this._fov,R._pitch=this._pitch,R._unmodified=this._unmodified,R._edgeInsets=this._edgeInsets.clone(),R._calcMatrices(),R},ti.minZoom.get=function(){return this._minZoom},ti.minZoom.set=function(R){this._minZoom!==R&&(this._minZoom=R,this.zoom=Math.max(this.zoom,R))},ti.maxZoom.get=function(){return this._maxZoom},ti.maxZoom.set=function(R){this._maxZoom!==R&&(this._maxZoom=R,this.zoom=Math.min(this.zoom,R))},ti.minPitch.get=function(){return this._minPitch},ti.minPitch.set=function(R){this._minPitch!==R&&(this._minPitch=R,this.pitch=Math.max(this.pitch,R))},ti.maxPitch.get=function(){return this._maxPitch},ti.maxPitch.set=function(R){this._maxPitch!==R&&(this._maxPitch=R,this.pitch=Math.min(this.pitch,R))},ti.renderWorldCopies.get=function(){return this._renderWorldCopies},ti.renderWorldCopies.set=function(R){R===void 0?R=!0:R===null&&(R=!1),this._renderWorldCopies=R},ti.worldSize.get=function(){return this.tileSize*this.scale},ti.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ti.size.get=function(){return new l.Point(this.width,this.height)},ti.bearing.get=function(){return-this.angle/Math.PI*180},ti.bearing.set=function(R){var U=-l.wrap(R,-180,180)*Math.PI/180;this.angle!==U&&(this._unmodified=!1,this.angle=U,this._calcMatrices(),this.rotationMatrix=l.create$2(),l.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ti.pitch.get=function(){return this._pitch/Math.PI*180},ti.pitch.set=function(R){var U=l.clamp(R,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==U&&(this._unmodified=!1,this._pitch=U,this._calcMatrices())},ti.fov.get=function(){return this._fov/Math.PI*180},ti.fov.set=function(R){R=Math.max(.01,Math.min(60,R)),this._fov!==R&&(this._unmodified=!1,this._fov=R/180*Math.PI,this._calcMatrices())},ti.zoom.get=function(){return this._zoom},ti.zoom.set=function(R){var U=Math.min(Math.max(R,this.minZoom),this.maxZoom);this._zoom!==U&&(this._unmodified=!1,this._zoom=U,this.scale=this.zoomScale(U),this.tileZoom=Math.floor(U),this.zoomFraction=U-this.tileZoom,this._constrain(),this._calcMatrices())},ti.center.get=function(){return this._center},ti.center.set=function(R){R.lat===this._center.lat&&R.lng===this._center.lng||(this._unmodified=!1,this._center=R,this._constrain(),this._calcMatrices())},ti.padding.get=function(){return this._edgeInsets.toJSON()},ti.padding.set=function(R){this._edgeInsets.equals(R)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,R,1),this._calcMatrices())},ti.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Jr.prototype.isPaddingEqual=function(R){return this._edgeInsets.equals(R)},Jr.prototype.interpolatePadding=function(R,U,j){this._unmodified=!1,this._edgeInsets.interpolate(R,U,j),this._constrain(),this._calcMatrices()},Jr.prototype.coveringZoomLevel=function(R){var U=(R.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/R.tileSize));return Math.max(0,U)},Jr.prototype.getVisibleUnwrappedCoordinates=function(R){var U=[new l.UnwrappedTileID(0,R)];if(this._renderWorldCopies)for(var j=this.pointCoordinate(new l.Point(0,0)),K=this.pointCoordinate(new l.Point(this.width,0)),pe=this.pointCoordinate(new l.Point(this.width,this.height)),ke=this.pointCoordinate(new l.Point(0,this.height)),B=Math.floor(Math.min(j.x,K.x,pe.x,ke.x)),ee=Math.floor(Math.max(j.x,K.x,pe.x,ke.x)),ie=B-1;ie<=ee+1;ie++)ie!==0&&U.push(new l.UnwrappedTileID(ie,R));return U},Jr.prototype.coveringTiles=function(R){var U=this.coveringZoomLevel(R),j=U;if(R.minzoom!==void 0&&U<R.minzoom)return[];R.maxzoom!==void 0&&U>R.maxzoom&&(U=R.maxzoom);var K=l.MercatorCoordinate.fromLngLat(this.center),pe=Math.pow(2,U),ke=[pe*K.x,pe*K.y,0],B=Oo.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,U),ee=R.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ee=U);var ie=function(Zt){return{aabb:new vo([Zt*pe,0,0],[(Zt+1)*pe,pe,0]),zoom:0,x:0,y:0,wrap:Zt,fullyVisible:!1}},ge=[],_e=[],Ce=U,Ne=R.reparseOverscaled?j:U;if(this._renderWorldCopies)for(var Ue=1;Ue<=3;Ue++)ge.push(ie(-Ue)),ge.push(ie(Ue));for(ge.push(ie(0));ge.length>0;){var Ge=ge.pop(),Ye=Ge.x,Qe=Ge.y,ct=Ge.fullyVisible;if(!ct){var vt=Ge.aabb.intersects(B);if(vt===0)continue;ct=vt===2}var Ot=Ge.aabb.distanceX(ke),Dt=Ge.aabb.distanceY(ke),Pt=Math.max(Math.abs(Ot),Math.abs(Dt)),Vt=3+(1<<Ce-Ge.zoom)-2;if(Ge.zoom===Ce||Pt>Vt&&Ge.zoom>=ee)_e.push({tileID:new l.OverscaledTileID(Ge.zoom===Ce?Ne:Ge.zoom,Ge.wrap,Ge.zoom,Ye,Qe),distanceSq:l.sqrLen([ke[0]-.5-Ye,ke[1]-.5-Qe])});else for(var It=0;It<4;It++){var sn=(Ye<<1)+It%2,Jt=(Qe<<1)+(It>>1);ge.push({aabb:Ge.aabb.quadrant(It),zoom:Ge.zoom+1,x:sn,y:Jt,wrap:Ge.wrap,fullyVisible:ct})}}return _e.sort(function(Zt,Mn){return Zt.distanceSq-Mn.distanceSq}).map(function(Zt){return Zt.tileID})},Jr.prototype.resize=function(R,U){this.width=R,this.height=U,this.pixelsToGLUnits=[2/R,-2/U],this._constrain(),this._calcMatrices()},ti.unmodified.get=function(){return this._unmodified},Jr.prototype.zoomScale=function(R){return Math.pow(2,R)},Jr.prototype.scaleZoom=function(R){return Math.log(R)/Math.LN2},Jr.prototype.project=function(R){var U=l.clamp(R.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.Point(l.mercatorXfromLng(R.lng)*this.worldSize,l.mercatorYfromLat(U)*this.worldSize)},Jr.prototype.unproject=function(R){return new l.MercatorCoordinate(R.x/this.worldSize,R.y/this.worldSize).toLngLat()},ti.point.get=function(){return this.project(this.center)},Jr.prototype.setLocationAtPoint=function(R,U){var j=this.pointCoordinate(U),K=this.pointCoordinate(this.centerPoint),pe=this.locationCoordinate(R),ke=new l.MercatorCoordinate(pe.x-(j.x-K.x),pe.y-(j.y-K.y));this.center=this.coordinateLocation(ke),this._renderWorldCopies&&(this.center=this.center.wrap())},Jr.prototype.locationPoint=function(R){return this.coordinatePoint(this.locationCoordinate(R))},Jr.prototype.pointLocation=function(R){return this.coordinateLocation(this.pointCoordinate(R))},Jr.prototype.locationCoordinate=function(R){return l.MercatorCoordinate.fromLngLat(R)},Jr.prototype.coordinateLocation=function(R){return R.toLngLat()},Jr.prototype.pointCoordinate=function(R){var U=[R.x,R.y,0,1],j=[R.x,R.y,1,1];l.transformMat4(U,U,this.pixelMatrixInverse),l.transformMat4(j,j,this.pixelMatrixInverse);var K=U[3],pe=j[3],ke=U[0]/K,B=j[0]/pe,ee=U[1]/K,ie=j[1]/pe,ge=U[2]/K,_e=j[2]/pe,Ce=ge===_e?0:(0-ge)/(_e-ge);return new l.MercatorCoordinate(l.number(ke,B,Ce)/this.worldSize,l.number(ee,ie,Ce)/this.worldSize)},Jr.prototype.coordinatePoint=function(R){var U=[R.x*this.worldSize,R.y*this.worldSize,0,1];return l.transformMat4(U,U,this.pixelMatrix),new l.Point(U[0]/U[3],U[1]/U[3])},Jr.prototype.getBounds=function(){return new l.LngLatBounds().extend(this.pointLocation(new l.Point(0,0))).extend(this.pointLocation(new l.Point(this.width,0))).extend(this.pointLocation(new l.Point(this.width,this.height))).extend(this.pointLocation(new l.Point(0,this.height)))},Jr.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Jr.prototype.setMaxBounds=function(R){R?(this.lngRange=[R.getWest(),R.getEast()],this.latRange=[R.getSouth(),R.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Jr.prototype.calculatePosMatrix=function(R,U){U===void 0&&(U=!1);var j=R.key,K=U?this._alignedPosMatrixCache:this._posMatrixCache;if(K[j])return K[j];var pe=R.canonical,ke=this.worldSize/this.zoomScale(pe.z),B=pe.x+Math.pow(2,pe.z)*R.wrap,ee=l.identity(new Float64Array(16));return l.translate(ee,ee,[B*ke,pe.y*ke,0]),l.scale(ee,ee,[ke/l.EXTENT,ke/l.EXTENT,1]),l.multiply(ee,U?this.alignedProjMatrix:this.projMatrix,ee),K[j]=new Float32Array(ee),K[j]},Jr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Jr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var R,U,j,K,pe=-90,ke=90,B=-180,ee=180,ie=this.size,ge=this._unmodified;if(this.latRange){var _e=this.latRange;pe=l.mercatorYfromLat(_e[1])*this.worldSize,R=(ke=l.mercatorYfromLat(_e[0])*this.worldSize)-pe<ie.y?ie.y/(ke-pe):0}if(this.lngRange){var Ce=this.lngRange;B=l.mercatorXfromLng(Ce[0])*this.worldSize,U=(ee=l.mercatorXfromLng(Ce[1])*this.worldSize)-B<ie.x?ie.x/(ee-B):0}var Ne=this.point,Ue=Math.max(U||0,R||0);if(Ue)return this.center=this.unproject(new l.Point(U?(ee+B)/2:Ne.x,R?(ke+pe)/2:Ne.y)),this.zoom+=this.scaleZoom(Ue),this._unmodified=ge,void(this._constraining=!1);if(this.latRange){var Ge=Ne.y,Ye=ie.y/2;Ge-Ye<pe&&(K=pe+Ye),Ge+Ye>ke&&(K=ke-Ye)}if(this.lngRange){var Qe=Ne.x,ct=ie.x/2;Qe-ct<B&&(j=B+ct),Qe+ct>ee&&(j=ee-ct)}j===void 0&&K===void 0||(this.center=this.unproject(new l.Point(j!==void 0?j:Ne.x,K!==void 0?K:Ne.y))),this._unmodified=ge,this._constraining=!1}},Jr.prototype._calcMatrices=function(){if(this.height){var R=this._fov/2,U=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(R)*this.height;var j=Math.PI/2+this._pitch,K=this._fov*(.5+U.y/this.height),pe=Math.sin(K)*this.cameraToCenterDistance/Math.sin(l.clamp(Math.PI-j-K,.01,Math.PI-.01)),ke=this.point,B=ke.x,ee=ke.y,ie=1.01*(Math.cos(Math.PI/2-this._pitch)*pe+this.cameraToCenterDistance),ge=this.height/50,_e=new Float64Array(16);l.perspective(_e,this._fov,this.width/this.height,ge,ie),_e[8]=2*-U.x/this.width,_e[9]=2*U.y/this.height,l.scale(_e,_e,[1,-1,1]),l.translate(_e,_e,[0,0,-this.cameraToCenterDistance]),l.rotateX(_e,_e,this._pitch),l.rotateZ(_e,_e,this.angle),l.translate(_e,_e,[-B,-ee,0]),this.mercatorMatrix=l.scale([],_e,[this.worldSize,this.worldSize,this.worldSize]),l.scale(_e,_e,[1,1,l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=_e,this.invProjMatrix=l.invert([],this.projMatrix);var Ce=this.width%2/2,Ne=this.height%2/2,Ue=Math.cos(this.angle),Ge=Math.sin(this.angle),Ye=B-Math.round(B)+Ue*Ce+Ge*Ne,Qe=ee-Math.round(ee)+Ue*Ne+Ge*Ce,ct=new Float64Array(_e);if(l.translate(ct,ct,[Ye>.5?Ye-1:Ye,Qe>.5?Qe-1:Qe,0]),this.alignedProjMatrix=ct,_e=l.create(),l.scale(_e,_e,[this.width/2,-this.height/2,1]),l.translate(_e,_e,[1,-1,0]),this.labelPlaneMatrix=_e,_e=l.create(),l.scale(_e,_e,[1,-1,1]),l.translate(_e,_e,[-1,-1,0]),l.scale(_e,_e,[2/this.width,2/this.height,1]),this.glCoordMatrix=_e,this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(_e=l.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=_e,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Jr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var R=this.pointCoordinate(new l.Point(0,0)),U=[R.x*this.worldSize,R.y*this.worldSize,0,1];return l.transformMat4(U,U,this.pixelMatrix)[3]/this.cameraToCenterDistance},Jr.prototype.getCameraPoint=function(){var R=this._pitch,U=Math.tan(R)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.Point(0,U))},Jr.prototype.getCameraQueryGeometry=function(R){var U=this.getCameraPoint();if(R.length===1)return[R[0],U];for(var j=U.x,K=U.y,pe=U.x,ke=U.y,B=0,ee=R;B<ee.length;B+=1){var ie=ee[B];j=Math.min(j,ie.x),K=Math.min(K,ie.y),pe=Math.max(pe,ie.x),ke=Math.max(ke,ie.y)}return[new l.Point(j,K),new l.Point(pe,K),new l.Point(pe,ke),new l.Point(j,ke),new l.Point(j,K)]},Object.defineProperties(Jr.prototype,ti);var Io=function(R){var U,j,K,pe,ke;this._hashName=R&&encodeURIComponent(R),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(U=this._updateHashUnthrottled.bind(this),j=300,K=!1,pe=null,ke=function(){pe=null,K&&(U(),pe=setTimeout(ke,j),K=!1)},function(){return K=!0,pe||ke(),pe})};Io.prototype.addTo=function(R){return this._map=R,l.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Io.prototype.remove=function(){return l.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Io.prototype.getHashString=function(R){var U=this._map.getCenter(),j=Math.round(100*this._map.getZoom())/100,K=Math.ceil((j*Math.LN2+Math.log(512/360/.5))/Math.LN10),pe=Math.pow(10,K),ke=Math.round(U.lng*pe)/pe,B=Math.round(U.lat*pe)/pe,ee=this._map.getBearing(),ie=this._map.getPitch(),ge="";if(ge+=R?"/"+ke+"/"+B+"/"+j:j+"/"+B+"/"+ke,(ee||ie)&&(ge+="/"+Math.round(10*ee)/10),ie&&(ge+="/"+Math.round(ie)),this._hashName){var _e=this._hashName,Ce=!1,Ne=l.window.location.hash.slice(1).split("&").map(function(Ue){var Ge=Ue.split("=")[0];return Ge===_e?(Ce=!0,Ge+"="+ge):Ue}).filter(function(Ue){return Ue});return Ce||Ne.push(_e+"="+ge),"#"+Ne.join("&")}return"#"+ge},Io.prototype._getCurrentHash=function(){var R,U=this,j=l.window.location.hash.replace("#","");return this._hashName?(j.split("&").map(function(K){return K.split("=")}).forEach(function(K){K[0]===U._hashName&&(R=K)}),(R&&R[1]||"").split("/")):j.split("/")},Io.prototype._onHashChange=function(){var R=this._getCurrentHash();if(R.length>=3&&!R.some(function(j){return isNaN(j)})){var U=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(R[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+R[2],+R[1]],zoom:+R[0],bearing:U,pitch:+(R[4]||0)}),!0}return!1},Io.prototype._updateHashUnthrottled=function(){var R=this.getHashString();try{l.window.history.replaceState(l.window.history.state,"",R)}catch{}};var mo={linearity:.3,easing:l.bezier(0,0,.3,1)},nl=l.extend({deceleration:2500,maxSpeed:1400},mo),Ss=l.extend({deceleration:20,maxSpeed:1400},mo),Do=l.extend({deceleration:1e3,maxSpeed:360},mo),Es=l.extend({deceleration:1e3,maxSpeed:90},mo),yo=function(R){this._map=R,this.clear()};function $o(R,U){(!R.duration||R.duration<U.duration)&&(R.duration=U.duration,R.easing=U.easing)}function zo(R,U,j){var K=j.maxSpeed,pe=j.linearity,ke=j.deceleration,B=l.clamp(R*pe/(U/1e3),-K,K),ee=Math.abs(B)/(ke*pe);return{easing:j.easing,duration:1e3*ee,amount:B*(ee/2)}}yo.prototype.clear=function(){this._inertiaBuffer=[]},yo.prototype.record=function(R){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.browser.now(),settings:R})},yo.prototype._drainInertiaBuffer=function(){for(var R=this._inertiaBuffer,U=l.browser.now();R.length>0&&U-R[0].time>160;)R.shift()},yo.prototype._onMoveEnd=function(R){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var U={zoom:0,bearing:0,pitch:0,pan:new l.Point(0,0),pinchAround:void 0,around:void 0},j=0,K=this._inertiaBuffer;j<K.length;j+=1){var pe=K[j].settings;U.zoom+=pe.zoomDelta||0,U.bearing+=pe.bearingDelta||0,U.pitch+=pe.pitchDelta||0,pe.panDelta&&U.pan._add(pe.panDelta),pe.around&&(U.around=pe.around),pe.pinchAround&&(U.pinchAround=pe.pinchAround)}var ke=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,B={};if(U.pan.mag()){var ee=zo(U.pan.mag(),ke,l.extend({},nl,R||{}));B.offset=U.pan.mult(ee.amount/U.pan.mag()),B.center=this._map.transform.center,$o(B,ee)}if(U.zoom){var ie=zo(U.zoom,ke,Ss);B.zoom=this._map.transform.zoom+ie.amount,$o(B,ie)}if(U.bearing){var ge=zo(U.bearing,ke,Do);B.bearing=this._map.transform.bearing+l.clamp(ge.amount,-179,179),$o(B,ge)}if(U.pitch){var _e=zo(U.pitch,ke,Es);B.pitch=this._map.transform.pitch+_e.amount,$o(B,_e)}if(B.zoom||B.bearing){var Ce=U.pinchAround===void 0?U.around:U.pinchAround;B.around=Ce?this._map.unproject(Ce):this._map.getCenter()}return this.clear(),l.extend(B,{noMoveStart:!0})}};var Mi=function(R){function U(K,pe,ke,B){B===void 0&&(B={});var ee=m.mousePos(pe.getCanvasContainer(),ke),ie=pe.unproject(ee);R.call(this,K,l.extend({point:ee,lngLat:ie,originalEvent:ke},B)),this._defaultPrevented=!1,this.target=pe}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),Qo=function(R){function U(K,pe,ke){var B=K==="touchend"?ke.changedTouches:ke.touches,ee=m.touchPos(pe.getCanvasContainer(),B),ie=ee.map(function(Ce){return pe.unproject(Ce)}),ge=ee.reduce(function(Ce,Ne,Ue,Ge){return Ce.add(Ne.div(Ge.length))},new l.Point(0,0)),_e=pe.unproject(ge);R.call(this,K,{points:ee,point:ge,lngLats:ie,lngLat:_e,originalEvent:ke}),this._defaultPrevented=!1}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),es=function(R){function U(K,pe,ke){R.call(this,K,{originalEvent:ke}),this._defaultPrevented=!1}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={defaultPrevented:{configurable:!0}};return U.prototype.preventDefault=function(){this._defaultPrevented=!0},j.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(U.prototype,j),U}(l.Event),ji=function(R,U){this._map=R,this._clickTolerance=U.clickTolerance};ji.prototype.reset=function(){delete this._mousedownPos},ji.prototype.wheel=function(R){return this._firePreventable(new es(R.type,this._map,R))},ji.prototype.mousedown=function(R,U){return this._mousedownPos=U,this._firePreventable(new Mi(R.type,this._map,R))},ji.prototype.mouseup=function(R){this._map.fire(new Mi(R.type,this._map,R))},ji.prototype.click=function(R,U){this._mousedownPos&&this._mousedownPos.dist(U)>=this._clickTolerance||this._map.fire(new Mi(R.type,this._map,R))},ji.prototype.dblclick=function(R){return this._firePreventable(new Mi(R.type,this._map,R))},ji.prototype.mouseover=function(R){this._map.fire(new Mi(R.type,this._map,R))},ji.prototype.mouseout=function(R){this._map.fire(new Mi(R.type,this._map,R))},ji.prototype.touchstart=function(R){return this._firePreventable(new Qo(R.type,this._map,R))},ji.prototype.touchmove=function(R){this._map.fire(new Qo(R.type,this._map,R))},ji.prototype.touchend=function(R){this._map.fire(new Qo(R.type,this._map,R))},ji.prototype.touchcancel=function(R){this._map.fire(new Qo(R.type,this._map,R))},ji.prototype._firePreventable=function(R){if(this._map.fire(R),R.defaultPrevented)return{}},ji.prototype.isEnabled=function(){return!0},ji.prototype.isActive=function(){return!1},ji.prototype.enable=function(){},ji.prototype.disable=function(){};var aa=function(R){this._map=R};aa.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},aa.prototype.mousemove=function(R){this._map.fire(new Mi(R.type,this._map,R))},aa.prototype.mousedown=function(){this._delayContextMenu=!0},aa.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},aa.prototype.contextmenu=function(R){this._delayContextMenu?this._contextMenuEvent=R:this._map.fire(new Mi(R.type,this._map,R)),this._map.listens("contextmenu")&&R.preventDefault()},aa.prototype.isEnabled=function(){return!0},aa.prototype.isActive=function(){return!1},aa.prototype.enable=function(){},aa.prototype.disable=function(){};var ta=function(R,U){this._map=R,this._el=R.getCanvasContainer(),this._container=R.getContainer(),this._clickTolerance=U.clickTolerance||1};function Ui(R,U){for(var j={},K=0;K<R.length;K++)j[R[K].identifier]=U[K];return j}ta.prototype.isEnabled=function(){return!!this._enabled},ta.prototype.isActive=function(){return!!this._active},ta.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ta.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ta.prototype.mousedown=function(R,U){this.isEnabled()&&R.shiftKey&&R.button===0&&(m.disableDrag(),this._startPos=this._lastPos=U,this._active=!0)},ta.prototype.mousemoveWindow=function(R,U){if(this._active){var j=U;if(!(this._lastPos.equals(j)||!this._box&&j.dist(this._startPos)<this._clickTolerance)){var K=this._startPos;this._lastPos=j,this._box||(this._box=m.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",R));var pe=Math.min(K.x,j.x),ke=Math.max(K.x,j.x),B=Math.min(K.y,j.y),ee=Math.max(K.y,j.y);m.setTransform(this._box,"translate("+pe+"px,"+B+"px)"),this._box.style.width=ke-pe+"px",this._box.style.height=ee-B+"px"}}},ta.prototype.mouseupWindow=function(R,U){var j=this;if(this._active&&R.button===0){var K=this._startPos,pe=U;if(this.reset(),m.suppressClick(),K.x!==pe.x||K.y!==pe.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:R})),{cameraAnimation:function(ke){return ke.fitScreenCoordinates(K,pe,j._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",R)}},ta.prototype.keydown=function(R){this._active&&R.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",R))},ta.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(m.remove(this._box),this._box=null),m.enableDrag(),delete this._startPos,delete this._lastPos},ta.prototype._fireEvent=function(R,U){return this._map.fire(new l.Event(R,{originalEvent:U}))};var ha=function(R){this.reset(),this.numTouches=R.numTouches};ha.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ha.prototype.touchstart=function(R,U,j){(this.centroid||j.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=R.timeStamp),j.length===this.numTouches&&(this.centroid=function(K){for(var pe=new l.Point(0,0),ke=0,B=K;ke<B.length;ke+=1){var ee=B[ke];pe._add(ee)}return pe.div(K.length)}(U),this.touches=Ui(j,U)))},ha.prototype.touchmove=function(R,U,j){if(!this.aborted&&this.centroid){var K=Ui(j,U);for(var pe in this.touches){var ke=this.touches[pe],B=K[pe];(!B||B.dist(ke)>30)&&(this.aborted=!0)}}},ha.prototype.touchend=function(R,U,j){if((!this.centroid||R.timeStamp-this.startTime>500)&&(this.aborted=!0),j.length===0){var K=!this.aborted&&this.centroid;if(this.reset(),K)return K}};var Ro=function(R){this.singleTap=new ha(R),this.numTaps=R.numTaps,this.reset()};Ro.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ro.prototype.touchstart=function(R,U,j){this.singleTap.touchstart(R,U,j)},Ro.prototype.touchmove=function(R,U,j){this.singleTap.touchmove(R,U,j)},Ro.prototype.touchend=function(R,U,j){var K=this.singleTap.touchend(R,U,j);if(K){var pe=R.timeStamp-this.lastTime<500,ke=!this.lastTap||this.lastTap.dist(K)<30;if(pe&&ke||this.reset(),this.count++,this.lastTime=R.timeStamp,this.lastTap=K,this.count===this.numTaps)return this.reset(),K}};var qa=function(){this._zoomIn=new Ro({numTouches:1,numTaps:2}),this._zoomOut=new Ro({numTouches:2,numTaps:1}),this.reset()};qa.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},qa.prototype.touchstart=function(R,U,j){this._zoomIn.touchstart(R,U,j),this._zoomOut.touchstart(R,U,j)},qa.prototype.touchmove=function(R,U,j){this._zoomIn.touchmove(R,U,j),this._zoomOut.touchmove(R,U,j)},qa.prototype.touchend=function(R,U,j){var K=this,pe=this._zoomIn.touchend(R,U,j),ke=this._zoomOut.touchend(R,U,j);return pe?(this._active=!0,R.preventDefault(),setTimeout(function(){return K.reset()},0),{cameraAnimation:function(B){return B.easeTo({duration:300,zoom:B.getZoom()+1,around:B.unproject(pe)},{originalEvent:R})}}):ke?(this._active=!0,R.preventDefault(),setTimeout(function(){return K.reset()},0),{cameraAnimation:function(B){return B.easeTo({duration:300,zoom:B.getZoom()-1,around:B.unproject(ke)},{originalEvent:R})}}):void 0},qa.prototype.touchcancel=function(){this.reset()},qa.prototype.enable=function(){this._enabled=!0},qa.prototype.disable=function(){this._enabled=!1,this.reset()},qa.prototype.isEnabled=function(){return this._enabled},qa.prototype.isActive=function(){return this._active};var Xi=function(R){this.reset(),this._clickTolerance=R.clickTolerance||1};Xi.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Xi.prototype._correctButton=function(R,U){return!1},Xi.prototype._move=function(R,U){return{}},Xi.prototype.mousedown=function(R,U){if(!this._lastPoint){var j=m.mouseButton(R);this._correctButton(R,j)&&(this._lastPoint=U,this._eventButton=j)}},Xi.prototype.mousemoveWindow=function(R,U){var j=this._lastPoint;if(j&&(R.preventDefault(),this._moved||!(U.dist(j)<this._clickTolerance)))return this._moved=!0,this._lastPoint=U,this._move(j,U)},Xi.prototype.mouseupWindow=function(R){m.mouseButton(R)===this._eventButton&&(this._moved&&m.suppressClick(),this.reset())},Xi.prototype.enable=function(){this._enabled=!0},Xi.prototype.disable=function(){this._enabled=!1,this.reset()},Xi.prototype.isEnabled=function(){return this._enabled},Xi.prototype.isActive=function(){return this._active};var La=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.mousedown=function(j,K){R.prototype.mousedown.call(this,j,K),this._lastPoint&&(this._active=!0)},U.prototype._correctButton=function(j,K){return K===0&&!j.ctrlKey},U.prototype._move=function(j,K){return{around:K,panDelta:K.sub(j)}},U}(Xi),Ba=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype._correctButton=function(j,K){return K===0&&j.ctrlKey||K===2},U.prototype._move=function(j,K){var pe=.8*(K.x-j.x);if(pe)return this._active=!0,{bearingDelta:pe}},U.prototype.contextmenu=function(j){j.preventDefault()},U}(Xi),Gs=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype._correctButton=function(j,K){return K===0&&j.ctrlKey||K===2},U.prototype._move=function(j,K){var pe=-.5*(K.y-j.y);if(pe)return this._active=!0,{pitchDelta:pe}},U.prototype.contextmenu=function(j){j.preventDefault()},U}(Xi),Fa=function(R){this._minTouches=1,this._clickTolerance=R.clickTolerance||1,this.reset()};Fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new l.Point(0,0)},Fa.prototype.touchstart=function(R,U,j){return this._calculateTransform(R,U,j)},Fa.prototype.touchmove=function(R,U,j){if(this._active)return R.preventDefault(),this._calculateTransform(R,U,j)},Fa.prototype.touchend=function(R,U,j){this._calculateTransform(R,U,j),this._active&&j.length<this._minTouches&&this.reset()},Fa.prototype.touchcancel=function(){this.reset()},Fa.prototype._calculateTransform=function(R,U,j){j.length>0&&(this._active=!0);var K=Ui(j,U),pe=new l.Point(0,0),ke=new l.Point(0,0),B=0;for(var ee in K){var ie=K[ee],ge=this._touches[ee];ge&&(pe._add(ie),ke._add(ie.sub(ge)),B++,K[ee]=ie)}if(this._touches=K,!(B<this._minTouches)&&ke.mag()){var _e=ke.div(B);if(this._sum._add(_e),!(this._sum.mag()<this._clickTolerance))return{around:pe.div(B),panDelta:_e}}},Fa.prototype.enable=function(){this._enabled=!0},Fa.prototype.disable=function(){this._enabled=!1,this.reset()},Fa.prototype.isEnabled=function(){return this._enabled},Fa.prototype.isActive=function(){return this._active};var Ki=function(){this.reset()};function Sr(R,U,j){for(var K=0;K<R.length;K++)if(R[K].identifier===j)return U[K]}Ki.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ki.prototype._start=function(R){},Ki.prototype._move=function(R,U,j){return{}},Ki.prototype.touchstart=function(R,U,j){this._firstTwoTouches||j.length<2||(this._firstTwoTouches=[j[0].identifier,j[1].identifier],this._start([U[0],U[1]]))},Ki.prototype.touchmove=function(R,U,j){if(this._firstTwoTouches){R.preventDefault();var K=this._firstTwoTouches,pe=K[0],ke=K[1],B=Sr(j,U,pe),ee=Sr(j,U,ke);if(B&&ee){var ie=this._aroundCenter?null:B.add(ee).div(2);return this._move([B,ee],ie,R)}}},Ki.prototype.touchend=function(R,U,j){if(this._firstTwoTouches){var K=this._firstTwoTouches,pe=K[0],ke=K[1],B=Sr(j,U,pe),ee=Sr(j,U,ke);B&&ee||(this._active&&m.suppressClick(),this.reset())}},Ki.prototype.touchcancel=function(){this.reset()},Ki.prototype.enable=function(R){this._enabled=!0,this._aroundCenter=!!R&&R.around==="center"},Ki.prototype.disable=function(){this._enabled=!1,this.reset()},Ki.prototype.isEnabled=function(){return this._enabled},Ki.prototype.isActive=function(){return this._active};function oa(R,U){return Math.log(R/U)/Math.LN2}var Cs=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),delete this._distance,delete this._startDistance},U.prototype._start=function(j){this._startDistance=this._distance=j[0].dist(j[1])},U.prototype._move=function(j,K){var pe=this._distance;if(this._distance=j[0].dist(j[1]),this._active||!(Math.abs(oa(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:oa(this._distance,pe),pinchAround:K}},U}(Ki);function Ws(R,U){return 180*R.angleWith(U)/Math.PI}var ts=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},U.prototype._start=function(j){this._startVector=this._vector=j[0].sub(j[1]),this._minDiameter=j[0].dist(j[1])},U.prototype._move=function(j,K){var pe=this._vector;if(this._vector=j[0].sub(j[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ws(this._vector,pe),pinchAround:K}},U.prototype._isBelowThreshold=function(j){this._minDiameter=Math.min(this._minDiameter,j.mag());var K=25/(Math.PI*this._minDiameter)*360,pe=Ws(j,this._startVector);return Math.abs(pe)<K},U}(Ki);function ns(R){return Math.abs(R.y)>Math.abs(R.x)}var xo=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.reset=function(){R.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},U.prototype._start=function(j){this._lastPoints=j,ns(j[0].sub(j[1]))&&(this._valid=!1)},U.prototype._move=function(j,K,pe){var ke=j[0].sub(this._lastPoints[0]),B=j[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ke,B,pe.timeStamp),this._valid)return this._lastPoints=j,this._active=!0,{pitchDelta:(ke.y+B.y)/2*-.5}},U.prototype.gestureBeginsVertically=function(j,K,pe){if(this._valid!==void 0)return this._valid;var ke=j.mag()>=2,B=K.mag()>=2;if(ke||B){if(!ke||!B)return this._firstMove===void 0&&(this._firstMove=pe),pe-this._firstMove<100&&void 0;var ee=j.y>0==K.y>0;return ns(j)&&ns(K)&&ee}},U}(Ki),Tr={panStep:100,bearingStep:15,pitchStep:10},Ya=function(){var R=Tr;this._panStep=R.panStep,this._bearingStep=R.bearingStep,this._pitchStep=R.pitchStep};function ds(R){return R*(2-R)}Ya.prototype.reset=function(){this._active=!1},Ya.prototype.keydown=function(R){var U=this;if(!(R.altKey||R.ctrlKey||R.metaKey)){var j=0,K=0,pe=0,ke=0,B=0;switch(R.keyCode){case 61:case 107:case 171:case 187:j=1;break;case 189:case 109:case 173:j=-1;break;case 37:R.shiftKey?K=-1:(R.preventDefault(),ke=-1);break;case 39:R.shiftKey?K=1:(R.preventDefault(),ke=1);break;case 38:R.shiftKey?pe=1:(R.preventDefault(),B=-1);break;case 40:R.shiftKey?pe=-1:(R.preventDefault(),B=1);break;default:return}return{cameraAnimation:function(ee){var ie=ee.getZoom();ee.easeTo({duration:300,easeId:"keyboardHandler",easing:ds,zoom:j?Math.round(ie)+j*(R.shiftKey?2:1):ie,bearing:ee.getBearing()+K*U._bearingStep,pitch:ee.getPitch()+pe*U._pitchStep,offset:[-ke*U._panStep,-B*U._panStep],center:ee.getCenter()},{originalEvent:R})}}}},Ya.prototype.enable=function(){this._enabled=!0},Ya.prototype.disable=function(){this._enabled=!1,this.reset()},Ya.prototype.isEnabled=function(){return this._enabled},Ya.prototype.isActive=function(){return this._active};var Ls=4.000244140625,sa=function(R,U){this._map=R,this._el=R.getCanvasContainer(),this._handler=U,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};sa.prototype.setZoomRate=function(R){this._defaultZoomRate=R},sa.prototype.setWheelZoomRate=function(R){this._wheelZoomRate=R},sa.prototype.isEnabled=function(){return!!this._enabled},sa.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},sa.prototype.isZooming=function(){return!!this._zooming},sa.prototype.enable=function(R){this.isEnabled()||(this._enabled=!0,this._aroundCenter=R&&R.around==="center")},sa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sa.prototype.wheel=function(R){if(this.isEnabled()){var U=R.deltaMode===l.window.WheelEvent.DOM_DELTA_LINE?40*R.deltaY:R.deltaY,j=l.browser.now(),K=j-(this._lastWheelEventTime||0);this._lastWheelEventTime=j,U!==0&&U%Ls==0?this._type="wheel":U!==0&&Math.abs(U)<4?this._type="trackpad":K>400?(this._type=null,this._lastValue=U,this._timeout=setTimeout(this._onTimeout,40,R)):this._type||(this._type=Math.abs(K*U)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,U+=this._lastValue)),R.shiftKey&&U&&(U/=4),this._type&&(this._lastWheelEvent=R,this._delta-=U,this._active||this._start(R)),R.preventDefault()}},sa.prototype._onTimeout=function(R){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(R)},sa.prototype._start=function(R){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var U=m.mousePos(this._el,R);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(U)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sa.prototype.renderFrame=function(){return this._onScrollFrame()},sa.prototype._onScrollFrame=function(){var R=this;if(this._frameId&&(this._frameId=null,this.isActive())){var U=this._map.transform;if(this._delta!==0){var j=this._type==="wheel"&&Math.abs(this._delta)>Ls?this._wheelZoomRate:this._defaultZoomRate,K=2/(1+Math.exp(-Math.abs(this._delta*j)));this._delta<0&&K!==0&&(K=1/K);var pe=typeof this._targetZoom=="number"?U.zoomScale(this._targetZoom):U.scale;this._targetZoom=Math.min(U.maxZoom,Math.max(U.minZoom,U.scaleZoom(pe*K))),this._type==="wheel"&&(this._startZoom=U.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ke,B=typeof this._targetZoom=="number"?this._targetZoom:U.zoom,ee=this._startZoom,ie=this._easing,ge=!1;if(this._type==="wheel"&&ee&&ie){var _e=Math.min((l.browser.now()-this._lastWheelEventTime)/200,1),Ce=ie(_e);ke=l.number(ee,B,Ce),_e<1?this._frameId||(this._frameId=!0):ge=!0}else ke=B,ge=!0;return this._active=!0,ge&&(this._active=!1,this._finishTimeout=setTimeout(function(){R._zooming=!1,R._handler._triggerRenderFrame(),delete R._targetZoom,delete R._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!ge,zoomDelta:ke-U.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sa.prototype._smoothOutEasing=function(R){var U=l.ease;if(this._prevEase){var j=this._prevEase,K=(l.browser.now()-j.start)/j.duration,pe=j.easing(K+.01)-j.easing(K),ke=.27/Math.sqrt(pe*pe+1e-4)*.01,B=Math.sqrt(.0729-ke*ke);U=l.bezier(ke,B,.25,1)}return this._prevEase={start:l.browser.now(),duration:R,easing:U},U},sa.prototype.reset=function(){this._active=!1};var Za=function(R,U){this._clickZoom=R,this._tapZoom=U};Za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Na=function(){this.reset()};Na.prototype.reset=function(){this._active=!1},Na.prototype.dblclick=function(R,U){return R.preventDefault(),{cameraAnimation:function(j){j.easeTo({duration:300,zoom:j.getZoom()+(R.shiftKey?-1:1),around:j.unproject(U)},{originalEvent:R})}}},Na.prototype.enable=function(){this._enabled=!0},Na.prototype.disable=function(){this._enabled=!1,this.reset()},Na.prototype.isEnabled=function(){return this._enabled},Na.prototype.isActive=function(){return this._active};var Pa=function(){this._tap=new Ro({numTouches:1,numTaps:1}),this.reset()};Pa.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Pa.prototype.touchstart=function(R,U,j){this._swipePoint||(this._tapTime&&R.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?j.length>0&&(this._swipePoint=U[0],this._swipeTouch=j[0].identifier):this._tap.touchstart(R,U,j))},Pa.prototype.touchmove=function(R,U,j){if(this._tapTime){if(this._swipePoint){if(j[0].identifier!==this._swipeTouch)return;var K=U[0],pe=K.y-this._swipePoint.y;return this._swipePoint=K,R.preventDefault(),this._active=!0,{zoomDelta:pe/128}}}else this._tap.touchmove(R,U,j)},Pa.prototype.touchend=function(R,U,j){this._tapTime?this._swipePoint&&j.length===0&&this.reset():this._tap.touchend(R,U,j)&&(this._tapTime=R.timeStamp)},Pa.prototype.touchcancel=function(){this.reset()},Pa.prototype.enable=function(){this._enabled=!0},Pa.prototype.disable=function(){this._enabled=!1,this.reset()},Pa.prototype.isEnabled=function(){return this._enabled},Pa.prototype.isActive=function(){return this._active};var ro=function(R,U,j){this._el=R,this._mousePan=U,this._touchPan=j};ro.prototype.enable=function(R){this._inertiaOptions=R||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ro.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ro.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ro.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var bo=function(R,U,j){this._pitchWithRotate=R.pitchWithRotate,this._mouseRotate=U,this._mousePitch=j};bo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},bo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},bo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},bo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Vi=function(R,U,j,K){this._el=R,this._touchZoom=U,this._touchRotate=j,this._tapDragZoom=K,this._rotationDisabled=!1,this._enabled=!0};Vi.prototype.enable=function(R){this._touchZoom.enable(R),this._rotationDisabled||this._touchRotate.enable(R),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Vi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Vi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Vi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Vi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Vi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var rs=function(R){return R.zoom||R.drag||R.pitch||R.rotate},gs=function(R){function U(){R.apply(this,arguments)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U}(l.Event);function Ji(R){return R.panDelta&&R.panDelta.mag()||R.zoomDelta||R.bearingDelta||R.pitchDelta}var ci=function(R,U){this._map=R,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yo(R),this._bearingSnap=U.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(U),l.bindAll(["handleEvent","handleWindowEvent"],this);var j=this._el;this._listeners=[[j,"touchstart",{passive:!1}],[j,"touchmove",{passive:!1}],[j,"touchend",void 0],[j,"touchcancel",void 0],[j,"mousedown",void 0],[j,"mousemove",void 0],[j,"mouseup",void 0],[l.window.document,"mousemove",{capture:!0}],[l.window.document,"mouseup",void 0],[j,"mouseover",void 0],[j,"mouseout",void 0],[j,"dblclick",void 0],[j,"click",void 0],[j,"keydown",{capture:!1}],[j,"keyup",void 0],[j,"wheel",{passive:!1}],[j,"contextmenu",void 0],[l.window,"blur",void 0]];for(var K=0,pe=this._listeners;K<pe.length;K+=1){var ke=pe[K],B=ke[0],ee=ke[1],ie=ke[2];m.addEventListener(B,ee,B===l.window.document?this.handleWindowEvent:this.handleEvent,ie)}};ci.prototype.destroy=function(){for(var R=0,U=this._listeners;R<U.length;R+=1){var j=U[R],K=j[0],pe=j[1],ke=j[2];m.removeEventListener(K,pe,K===l.window.document?this.handleWindowEvent:this.handleEvent,ke)}},ci.prototype._addDefaultHandlers=function(R){var U=this._map,j=U.getCanvasContainer();this._add("mapEvent",new ji(U,R));var K=U.boxZoom=new ta(U,R);this._add("boxZoom",K);var pe=new qa,ke=new Na;U.doubleClickZoom=new Za(ke,pe),this._add("tapZoom",pe),this._add("clickZoom",ke);var B=new Pa;this._add("tapDragZoom",B);var ee=U.touchPitch=new xo;this._add("touchPitch",ee);var ie=new Ba(R),ge=new Gs(R);U.dragRotate=new bo(R,ie,ge),this._add("mouseRotate",ie,["mousePitch"]),this._add("mousePitch",ge,["mouseRotate"]);var _e=new La(R),Ce=new Fa(R);U.dragPan=new ro(j,_e,Ce),this._add("mousePan",_e),this._add("touchPan",Ce,["touchZoom","touchRotate"]);var Ne=new ts,Ue=new Cs;U.touchZoomRotate=new Vi(j,Ue,Ne,B),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",Ue,["touchPan","touchRotate"]);var Ge=U.scrollZoom=new sa(U,this);this._add("scrollZoom",Ge,["mousePan"]);var Ye=U.keyboard=new Ya;this._add("keyboard",Ye),this._add("blockableMapEvent",new aa(U));for(var Qe=0,ct=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Qe<ct.length;Qe+=1){var vt=ct[Qe];R.interactive&&R[vt]&&U[vt].enable(R[vt])}},ci.prototype._add=function(R,U,j){this._handlers.push({handlerName:R,handler:U,allowed:j}),this._handlersById[R]=U},ci.prototype.stop=function(){if(!this._updatingCamera){for(var R=0,U=this._handlers;R<U.length;R+=1)U[R].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},ci.prototype.isActive=function(){for(var R=0,U=this._handlers;R<U.length;R+=1)if(U[R].handler.isActive())return!0;return!1},ci.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ci.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ci.prototype.isMoving=function(){return!!rs(this._eventsInProgress)||this.isZooming()},ci.prototype._blockedByActive=function(R,U,j){for(var K in R)if(K!==j&&(!U||U.indexOf(K)<0))return!0;return!1},ci.prototype.handleWindowEvent=function(R){this.handleEvent(R,R.type+"Window")},ci.prototype._getMapTouches=function(R){for(var U=[],j=0,K=R;j<K.length;j+=1){var pe=K[j],ke=pe.target;this._el.contains(ke)&&U.push(pe)}return U},ci.prototype.handleEvent=function(R,U){if(R.type!=="blur"){this._updatingCamera=!0;for(var j=R.type==="renderFrame"?void 0:R,K={needsRenderFrame:!1},pe={},ke={},B=R.touches?this._getMapTouches(R.touches):void 0,ee=B?m.touchPos(this._el,B):m.mousePos(this._el,R),ie=0,ge=this._handlers;ie<ge.length;ie+=1){var _e=ge[ie],Ce=_e.handlerName,Ne=_e.handler,Ue=_e.allowed;if(Ne.isEnabled()){var Ge=void 0;this._blockedByActive(ke,Ue,Ce)?Ne.reset():Ne[U||R.type]&&(Ge=Ne[U||R.type](R,ee,B),this.mergeHandlerResult(K,pe,Ge,Ce,j),Ge&&Ge.needsRenderFrame&&this._triggerRenderFrame()),(Ge||Ne.isActive())&&(ke[Ce]=Ne)}}var Ye={};for(var Qe in this._previousActiveHandlers)ke[Qe]||(Ye[Qe]=j);this._previousActiveHandlers=ke,(Object.keys(Ye).length||Ji(K))&&(this._changes.push([K,pe,Ye]),this._triggerRenderFrame()),(Object.keys(ke).length||Ji(K))&&this._map._stop(!0),this._updatingCamera=!1;var ct=K.cameraAnimation;ct&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],ct(this._map))}else this.stop()},ci.prototype.mergeHandlerResult=function(R,U,j,K,pe){if(j){l.extend(R,j);var ke={handlerName:K,originalEvent:j.originalEvent||pe};j.zoomDelta!==void 0&&(U.zoom=ke),j.panDelta!==void 0&&(U.drag=ke),j.pitchDelta!==void 0&&(U.pitch=ke),j.bearingDelta!==void 0&&(U.rotate=ke)}},ci.prototype._applyChanges=function(){for(var R={},U={},j={},K=0,pe=this._changes;K<pe.length;K+=1){var ke=pe[K],B=ke[0],ee=ke[1],ie=ke[2];B.panDelta&&(R.panDelta=(R.panDelta||new l.Point(0,0))._add(B.panDelta)),B.zoomDelta&&(R.zoomDelta=(R.zoomDelta||0)+B.zoomDelta),B.bearingDelta&&(R.bearingDelta=(R.bearingDelta||0)+B.bearingDelta),B.pitchDelta&&(R.pitchDelta=(R.pitchDelta||0)+B.pitchDelta),B.around!==void 0&&(R.around=B.around),B.pinchAround!==void 0&&(R.pinchAround=B.pinchAround),B.noInertia&&(R.noInertia=B.noInertia),l.extend(U,ee),l.extend(j,ie)}this._updateMapTransform(R,U,j),this._changes=[]},ci.prototype._updateMapTransform=function(R,U,j){var K=this._map,pe=K.transform;if(!Ji(R))return this._fireEvents(U,j);var ke=R.panDelta,B=R.zoomDelta,ee=R.bearingDelta,ie=R.pitchDelta,ge=R.around,_e=R.pinchAround;_e!==void 0&&(ge=_e),K._stop(!0),ge=ge||K.transform.centerPoint;var Ce=pe.pointLocation(ke?ge.sub(ke):ge);ee&&(pe.bearing+=ee),ie&&(pe.pitch+=ie),B&&(pe.zoom+=B),pe.setLocationAtPoint(Ce,ge),this._map._update(),R.noInertia||this._inertia.record(R),this._fireEvents(U,j)},ci.prototype._fireEvents=function(R,U){var j=this,K=rs(this._eventsInProgress),pe=rs(R),ke={};for(var B in R){var ee=R[B].originalEvent;this._eventsInProgress[B]||(ke[B+"start"]=ee),this._eventsInProgress[B]=R[B]}for(var ie in!K&&pe&&this._fireEvent("movestart",pe.originalEvent),ke)this._fireEvent(ie,ke[ie]);for(var ge in R.rotate&&(this._bearingChanged=!0),pe&&this._fireEvent("move",pe.originalEvent),R){var _e=R[ge].originalEvent;this._fireEvent(ge,_e)}var Ce,Ne={};for(var Ue in this._eventsInProgress){var Ge=this._eventsInProgress[Ue],Ye=Ge.handlerName,Qe=Ge.originalEvent;this._handlersById[Ye].isActive()||(delete this._eventsInProgress[Ue],Ce=U[Ye]||Qe,Ne[Ue+"end"]=Ce)}for(var ct in Ne)this._fireEvent(ct,Ne[ct]);var vt=rs(this._eventsInProgress);if((K||pe)&&!vt){this._updatingCamera=!0;var Ot=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Dt=function(Pt){return Pt!==0&&-j._bearingSnap<Pt&&Pt<j._bearingSnap};Ot?(Dt(Ot.bearing||this._map.getBearing())&&(Ot.bearing=0),this._map.easeTo(Ot,{originalEvent:Ce})):(this._map.fire(new l.Event("moveend",{originalEvent:Ce})),Dt(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},ci.prototype._fireEvent=function(R,U){this._map.fire(new l.Event(R,U?{originalEvent:U}:{}))},ci.prototype._triggerRenderFrame=function(){var R=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(U){delete R._frameId,R.handleEvent(new gs("renderFrame",{timeStamp:U})),R._applyChanges()}))};var Ps=function(R){function U(j,K){R.call(this),this._moving=!1,this._zooming=!1,this.transform=j,this._bearingSnap=K.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.getCenter=function(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)},U.prototype.setCenter=function(j,K){return this.jumpTo({center:j},K)},U.prototype.panBy=function(j,K,pe){return j=l.Point.convert(j).mult(-1),this.panTo(this.transform.center,l.extend({offset:j},K),pe)},U.prototype.panTo=function(j,K,pe){return this.easeTo(l.extend({center:j},K),pe)},U.prototype.getZoom=function(){return this.transform.zoom},U.prototype.setZoom=function(j,K){return this.jumpTo({zoom:j},K),this},U.prototype.zoomTo=function(j,K,pe){return this.easeTo(l.extend({zoom:j},K),pe)},U.prototype.zoomIn=function(j,K){return this.zoomTo(this.getZoom()+1,j,K),this},U.prototype.zoomOut=function(j,K){return this.zoomTo(this.getZoom()-1,j,K),this},U.prototype.getBearing=function(){return this.transform.bearing},U.prototype.setBearing=function(j,K){return this.jumpTo({bearing:j},K),this},U.prototype.getPadding=function(){return this.transform.padding},U.prototype.setPadding=function(j,K){return this.jumpTo({padding:j},K),this},U.prototype.rotateTo=function(j,K,pe){return this.easeTo(l.extend({bearing:j},K),pe)},U.prototype.resetNorth=function(j,K){return this.rotateTo(0,l.extend({duration:1e3},j),K),this},U.prototype.resetNorthPitch=function(j,K){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},j),K),this},U.prototype.snapToNorth=function(j,K){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(j,K):this},U.prototype.getPitch=function(){return this.transform.pitch},U.prototype.setPitch=function(j,K){return this.jumpTo({pitch:j},K),this},U.prototype.cameraForBounds=function(j,K){return j=l.LngLatBounds.convert(j),this._cameraForBoxAndBearing(j.getNorthWest(),j.getSouthEast(),0,K)},U.prototype._cameraForBoxAndBearing=function(j,K,pe,ke){var B={top:0,bottom:0,right:0,left:0};if(typeof(ke=l.extend({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},ke)).padding=="number"){var ee=ke.padding;ke.padding={top:ee,bottom:ee,right:ee,left:ee}}ke.padding=l.extend(B,ke.padding);var ie=this.transform,ge=ie.padding,_e=ie.project(l.LngLat.convert(j)),Ce=ie.project(l.LngLat.convert(K)),Ne=_e.rotate(-pe*Math.PI/180),Ue=Ce.rotate(-pe*Math.PI/180),Ge=new l.Point(Math.max(Ne.x,Ue.x),Math.max(Ne.y,Ue.y)),Ye=new l.Point(Math.min(Ne.x,Ue.x),Math.min(Ne.y,Ue.y)),Qe=Ge.sub(Ye),ct=(ie.width-(ge.left+ge.right+ke.padding.left+ke.padding.right))/Qe.x,vt=(ie.height-(ge.top+ge.bottom+ke.padding.top+ke.padding.bottom))/Qe.y;if(!(vt<0||ct<0)){var Ot=Math.min(ie.scaleZoom(ie.scale*Math.min(ct,vt)),ke.maxZoom),Dt=l.Point.convert(ke.offset),Pt=(ke.padding.left-ke.padding.right)/2,Vt=(ke.padding.top-ke.padding.bottom)/2,It=new l.Point(Dt.x+Pt,Dt.y+Vt).mult(ie.scale/ie.zoomScale(Ot));return{center:ie.unproject(_e.add(Ce).div(2).sub(It)),zoom:Ot,bearing:pe}}l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},U.prototype.fitBounds=function(j,K,pe){return this._fitInternal(this.cameraForBounds(j,K),K,pe)},U.prototype.fitScreenCoordinates=function(j,K,pe,ke,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.Point.convert(j)),this.transform.pointLocation(l.Point.convert(K)),pe,ke),ke,B)},U.prototype._fitInternal=function(j,K,pe){return j?(delete(K=l.extend(j,K)).padding,K.linear?this.easeTo(K,pe):this.flyTo(K,pe)):this},U.prototype.jumpTo=function(j,K){this.stop();var pe=this.transform,ke=!1,B=!1,ee=!1;return"zoom"in j&&pe.zoom!==+j.zoom&&(ke=!0,pe.zoom=+j.zoom),j.center!==void 0&&(pe.center=l.LngLat.convert(j.center)),"bearing"in j&&pe.bearing!==+j.bearing&&(B=!0,pe.bearing=+j.bearing),"pitch"in j&&pe.pitch!==+j.pitch&&(ee=!0,pe.pitch=+j.pitch),j.padding==null||pe.isPaddingEqual(j.padding)||(pe.padding=j.padding),this.fire(new l.Event("movestart",K)).fire(new l.Event("move",K)),ke&&this.fire(new l.Event("zoomstart",K)).fire(new l.Event("zoom",K)).fire(new l.Event("zoomend",K)),B&&this.fire(new l.Event("rotatestart",K)).fire(new l.Event("rotate",K)).fire(new l.Event("rotateend",K)),ee&&this.fire(new l.Event("pitchstart",K)).fire(new l.Event("pitch",K)).fire(new l.Event("pitchend",K)),this.fire(new l.Event("moveend",K))},U.prototype.easeTo=function(j,K){var pe=this;this._stop(!1,j.easeId),((j=l.extend({offset:[0,0],duration:500,easing:l.ease},j)).animate===!1||!j.essential&&l.browser.prefersReducedMotion)&&(j.duration=0);var ke=this.transform,B=this.getZoom(),ee=this.getBearing(),ie=this.getPitch(),ge=this.getPadding(),_e="zoom"in j?+j.zoom:B,Ce="bearing"in j?this._normalizeBearing(j.bearing,ee):ee,Ne="pitch"in j?+j.pitch:ie,Ue="padding"in j?j.padding:ke.padding,Ge=l.Point.convert(j.offset),Ye=ke.centerPoint.add(Ge),Qe=ke.pointLocation(Ye),ct=l.LngLat.convert(j.center||Qe);this._normalizeCenter(ct);var vt,Ot,Dt=ke.project(Qe),Pt=ke.project(ct).sub(Dt),Vt=ke.zoomScale(_e-B);j.around&&(vt=l.LngLat.convert(j.around),Ot=ke.locationPoint(vt));var It={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||_e!==B,this._rotating=this._rotating||ee!==Ce,this._pitching=this._pitching||Ne!==ie,this._padding=!ke.isPaddingEqual(Ue),this._easeId=j.easeId,this._prepareEase(K,j.noMoveStart,It),clearTimeout(this._easeEndTimeoutID),this._ease(function(sn){if(pe._zooming&&(ke.zoom=l.number(B,_e,sn)),pe._rotating&&(ke.bearing=l.number(ee,Ce,sn)),pe._pitching&&(ke.pitch=l.number(ie,Ne,sn)),pe._padding&&(ke.interpolatePadding(ge,Ue,sn),Ye=ke.centerPoint.add(Ge)),vt)ke.setLocationAtPoint(vt,Ot);else{var Jt=ke.zoomScale(ke.zoom-B),Zt=_e>B?Math.min(2,Vt):Math.max(.5,Vt),Mn=Math.pow(Zt,1-sn),kn=ke.unproject(Dt.add(Pt.mult(sn*Mn)).mult(Jt));ke.setLocationAtPoint(ke.renderWorldCopies?kn.wrap():kn,Ye)}pe._fireMoveEvents(K)},function(sn){pe._afterEase(K,sn)},j),this},U.prototype._prepareEase=function(j,K,pe){pe===void 0&&(pe={}),this._moving=!0,K||pe.moving||this.fire(new l.Event("movestart",j)),this._zooming&&!pe.zooming&&this.fire(new l.Event("zoomstart",j)),this._rotating&&!pe.rotating&&this.fire(new l.Event("rotatestart",j)),this._pitching&&!pe.pitching&&this.fire(new l.Event("pitchstart",j))},U.prototype._fireMoveEvents=function(j){this.fire(new l.Event("move",j)),this._zooming&&this.fire(new l.Event("zoom",j)),this._rotating&&this.fire(new l.Event("rotate",j)),this._pitching&&this.fire(new l.Event("pitch",j))},U.prototype._afterEase=function(j,K){if(!this._easeId||!K||this._easeId!==K){delete this._easeId;var pe=this._zooming,ke=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,pe&&this.fire(new l.Event("zoomend",j)),ke&&this.fire(new l.Event("rotateend",j)),B&&this.fire(new l.Event("pitchend",j)),this.fire(new l.Event("moveend",j))}},U.prototype.flyTo=function(j,K){var pe=this;if(!j.essential&&l.browser.prefersReducedMotion){var ke=l.pick(j,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ke,K)}this.stop(),j=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},j);var B=this.transform,ee=this.getZoom(),ie=this.getBearing(),ge=this.getPitch(),_e=this.getPadding(),Ce="zoom"in j?l.clamp(+j.zoom,B.minZoom,B.maxZoom):ee,Ne="bearing"in j?this._normalizeBearing(j.bearing,ie):ie,Ue="pitch"in j?+j.pitch:ge,Ge="padding"in j?j.padding:B.padding,Ye=B.zoomScale(Ce-ee),Qe=l.Point.convert(j.offset),ct=B.centerPoint.add(Qe),vt=B.pointLocation(ct),Ot=l.LngLat.convert(j.center||vt);this._normalizeCenter(Ot);var Dt=B.project(vt),Pt=B.project(Ot).sub(Dt),Vt=j.curve,It=Math.max(B.width,B.height),sn=It/Ye,Jt=Pt.mag();if("minZoom"in j){var Zt=l.clamp(Math.min(j.minZoom,ee,Ce),B.minZoom,B.maxZoom),Mn=It/B.zoomScale(Zt-ee);Vt=Math.sqrt(Mn/Jt*2)}var kn=Vt*Vt;function Yn(Jn){var fr=(sn*sn-It*It+(Jn?-1:1)*kn*kn*Jt*Jt)/(2*(Jn?sn:It)*kn*Jt);return Math.log(Math.sqrt(fr*fr+1)-fr)}function Zn(Jn){return(Math.exp(Jn)-Math.exp(-Jn))/2}function nr(Jn){return(Math.exp(Jn)+Math.exp(-Jn))/2}var sr=Yn(0),dr=function(Jn){return nr(sr)/nr(sr+Vt*Jn)},hr=function(Jn){return It*((nr(sr)*(Zn(fr=sr+Vt*Jn)/nr(fr))-Zn(sr))/kn)/Jt;var fr},yr=(Yn(1)-sr)/Vt;if(Math.abs(Jt)<1e-6||!isFinite(yr)){if(Math.abs(It-sn)<1e-6)return this.easeTo(j,K);var Mr=sn<It?-1:1;yr=Math.abs(Math.log(sn/It))/Vt,hr=function(){return 0},dr=function(Jn){return Math.exp(Mr*Vt*Jn)}}if("duration"in j)j.duration=+j.duration;else{var Fr="screenSpeed"in j?+j.screenSpeed/Vt:+j.speed;j.duration=1e3*yr/Fr}return j.maxDuration&&j.duration>j.maxDuration&&(j.duration=0),this._zooming=!0,this._rotating=ie!==Ne,this._pitching=Ue!==ge,this._padding=!B.isPaddingEqual(Ge),this._prepareEase(K,!1),this._ease(function(Jn){var fr=Jn*yr,xr=1/dr(fr);B.zoom=Jn===1?Ce:ee+B.scaleZoom(xr),pe._rotating&&(B.bearing=l.number(ie,Ne,Jn)),pe._pitching&&(B.pitch=l.number(ge,Ue,Jn)),pe._padding&&(B.interpolatePadding(_e,Ge,Jn),ct=B.centerPoint.add(Qe));var Ar=Jn===1?Ot:B.unproject(Dt.add(Pt.mult(hr(fr))).mult(xr));B.setLocationAtPoint(B.renderWorldCopies?Ar.wrap():Ar,ct),pe._fireMoveEvents(K)},function(){return pe._afterEase(K)},j),this},U.prototype.isEasing=function(){return!!this._easeFrameId},U.prototype.stop=function(){return this._stop()},U.prototype._stop=function(j,K){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var pe=this._onEaseEnd;delete this._onEaseEnd,pe.call(this,K)}if(!j){var ke=this.handlers;ke&&ke.stop()}return this},U.prototype._ease=function(j,K,pe){pe.animate===!1||pe.duration===0?(j(1),K()):(this._easeStart=l.browser.now(),this._easeOptions=pe,this._onEaseFrame=j,this._onEaseEnd=K,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},U.prototype._renderFrameCallback=function(){var j=Math.min((l.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(j)),j<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},U.prototype._normalizeBearing=function(j,K){j=l.wrap(j,-180,180);var pe=Math.abs(j-K);return Math.abs(j-360-K)<pe&&(j-=360),Math.abs(j+360-K)<pe&&(j+=360),j},U.prototype._normalizeCenter=function(j){var K=this.transform;if(K.renderWorldCopies&&!K.lngRange){var pe=j.lng-K.center.lng;j.lng+=pe>180?-360:pe<-180?360:0}},U}(l.Evented),wa=function(R){R===void 0&&(R={}),this.options=R,l.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};wa.prototype.getDefaultPosition=function(){return"bottom-right"},wa.prototype.onAdd=function(R){var U=this.options&&this.options.compact;return this._map=R,this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=m.create("div","mapboxgl-ctrl-attrib-inner",this._container),U&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),U===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},wa.prototype.onRemove=function(){m.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},wa.prototype._updateEditLink=function(){var R=this._editLink;R||(R=this._editLink=this._container.querySelector(".mapbox-improve-map"));var U=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||l.config.ACCESS_TOKEN}];if(R){var j=U.reduce(function(K,pe,ke){return pe.value&&(K+=pe.key+"="+pe.value+(ke<U.length-1?"&":"")),K},"?");R.href=l.config.FEEDBACK_URL+"/"+j+(this._map._hash?this._map._hash.getHashString(!0):""),R.rel="noopener nofollow"}},wa.prototype._updateData=function(R){!R||R.sourceDataType!=="metadata"&&R.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},wa.prototype._updateAttributions=function(){if(this._map.style){var R=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?R=R.concat(this.options.customAttribution.map(function(ee){return typeof ee!="string"?"":ee})):typeof this.options.customAttribution=="string"&&R.push(this.options.customAttribution)),this._map.style.stylesheet){var U=this._map.style.stylesheet;this.styleOwner=U.owner,this.styleId=U.id}var j=this._map.style.sourceCaches;for(var K in j){var pe=j[K];if(pe.used){var ke=pe.getSource();ke.attribution&&R.indexOf(ke.attribution)<0&&R.push(ke.attribution)}}R.sort(function(ee,ie){return ee.length-ie.length});var B=(R=R.filter(function(ee,ie){for(var ge=ie+1;ge<R.length;ge++)if(R[ge].indexOf(ee)>=0)return!1;return!0})).join(" | ");B!==this._attribHTML&&(this._attribHTML=B,R.length?(this._innerContainer.innerHTML=B,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},wa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Hi=function(){l.bindAll(["_updateLogo"],this),l.bindAll(["_updateCompact"],this)};Hi.prototype.onAdd=function(R){this._map=R,this._container=m.create("div","mapboxgl-ctrl");var U=m.create("a","mapboxgl-ctrl-logo");return U.target="_blank",U.rel="noopener nofollow",U.href="https://www.mapbox.com/",U.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),U.setAttribute("rel","noopener nofollow"),this._container.appendChild(U),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Hi.prototype.onRemove=function(){m.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Hi.prototype.getDefaultPosition=function(){return"bottom-left"},Hi.prototype._updateLogo=function(R){R&&R.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},Hi.prototype._logoRequired=function(){if(this._map.style){var R=this._map.style.sourceCaches;for(var U in R)if(R[U].getSource().mapbox_logo)return!0;return!1}},Hi.prototype._updateCompact=function(){var R=this._container.children;if(R.length){var U=R[0];this._map.getCanvasContainer().offsetWidth<250?U.classList.add("mapboxgl-compact"):U.classList.remove("mapboxgl-compact")}};var io=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};io.prototype.add=function(R){var U=++this._id;return this._queue.push({callback:R,id:U,cancelled:!1}),U},io.prototype.remove=function(R){for(var U=this._currentlyRunning,j=0,K=U?this._queue.concat(U):this._queue;j<K.length;j+=1){var pe=K[j];if(pe.id===R)return void(pe.cancelled=!0)}},io.prototype.run=function(R){R===void 0&&(R=0);var U=this._currentlyRunning=this._queue;this._queue=[];for(var j=0,K=U;j<K.length;j+=1){var pe=K[j];if(!pe.cancelled&&(pe.callback(R),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},io.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var rl={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Li=l.window.HTMLImageElement,oi=l.window.HTMLElement,Oa=l.window.ImageBitmap,ao=60,Xa={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:ao,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qs=function(R){function U(K){var pe=this;if((K=l.extend({},Xa,K)).minZoom!=null&&K.maxZoom!=null&&K.minZoom>K.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(K.minPitch!=null&&K.maxPitch!=null&&K.minPitch>K.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(K.minPitch!=null&&K.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(K.maxPitch!=null&&K.maxPitch>ao)throw new Error("maxPitch must be less than or equal to 60");var ke=new Jr(K.minZoom,K.maxZoom,K.minPitch,K.maxPitch,K.renderWorldCopies);if(R.call(this,ke,K),this._interactive=K.interactive,this._maxTileCacheSize=K.maxTileCacheSize,this._failIfMajorPerformanceCaveat=K.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=K.preserveDrawingBuffer,this._antialias=K.antialias,this._trackResize=K.trackResize,this._bearingSnap=K.bearingSnap,this._refreshExpiredTiles=K.refreshExpiredTiles,this._fadeDuration=K.fadeDuration,this._crossSourceCollisions=K.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=K.collectResourceTiming,this._renderTaskQueue=new io,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},rl,K.locale),this._requestManager=new l.RequestManager(K.transformRequest,K.accessToken),typeof K.container=="string"){if(this._container=l.window.document.getElementById(K.container),!this._container)throw new Error("Container '"+K.container+"' not found.")}else{if(!(K.container instanceof oi))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=K.container}if(K.maxBounds&&this.setMaxBounds(K.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return pe._update(!1)}),this.on("moveend",function(){return pe._update(!1)}),this.on("zoom",function(){return pe._update(!0)}),l.window!==void 0&&(l.window.addEventListener("online",this._onWindowOnline,!1),l.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new ci(this,K);var B=typeof K.hash=="string"&&K.hash||void 0;this._hash=K.hash&&new Io(B).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:K.center,zoom:K.zoom,bearing:K.bearing,pitch:K.pitch}),K.bounds&&(this.resize(),this.fitBounds(K.bounds,l.extend({},K.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=K.localIdeographFontFamily,K.style&&this.setStyle(K.style,{localIdeographFontFamily:K.localIdeographFontFamily}),K.attributionControl&&this.addControl(new wa({customAttribution:K.customAttribution})),this.addControl(new Hi,K.logoPosition),this.on("style.load",function(){pe.transform.unmodified&&pe.jumpTo(pe.style.stylesheet)}),this.on("data",function(ee){pe._update(ee.dataType==="style"),pe.fire(new l.Event(ee.dataType+"data",ee))}),this.on("dataloading",function(ee){pe.fire(new l.Event(ee.dataType+"dataloading",ee))})}R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U;var j={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return U.prototype._getMapId=function(){return this._mapId},U.prototype.addControl=function(K,pe){if(pe===void 0&&K.getDefaultPosition&&(pe=K.getDefaultPosition()),pe===void 0&&(pe="top-right"),!K||!K.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ke=K.onAdd(this);this._controls.push(K);var B=this._controlPositions[pe];return pe.indexOf("bottom")!==-1?B.insertBefore(ke,B.firstChild):B.appendChild(ke),this},U.prototype.removeControl=function(K){if(!K||!K.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var pe=this._controls.indexOf(K);return pe>-1&&this._controls.splice(pe,1),K.onRemove(this),this},U.prototype.resize=function(K){var pe=this._containerDimensions(),ke=pe[0],B=pe[1];this._resizeCanvas(ke,B),this.transform.resize(ke,B),this.painter.resize(ke,B);var ee=!this._moving;return ee&&(this.stop(),this.fire(new l.Event("movestart",K)).fire(new l.Event("move",K))),this.fire(new l.Event("resize",K)),ee&&this.fire(new l.Event("moveend",K)),this},U.prototype.getBounds=function(){return this.transform.getBounds()},U.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},U.prototype.setMaxBounds=function(K){return this.transform.setMaxBounds(l.LngLatBounds.convert(K)),this._update()},U.prototype.setMinZoom=function(K){if((K=K??-2)>=-2&&K<=this.transform.maxZoom)return this.transform.minZoom=K,this._update(),this.getZoom()<K&&this.setZoom(K),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},U.prototype.getMinZoom=function(){return this.transform.minZoom},U.prototype.setMaxZoom=function(K){if((K=K??22)>=this.transform.minZoom)return this.transform.maxZoom=K,this._update(),this.getZoom()>K&&this.setZoom(K),this;throw new Error("maxZoom must be greater than the current minZoom")},U.prototype.getMaxZoom=function(){return this.transform.maxZoom},U.prototype.setMinPitch=function(K){if((K=K??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(K>=0&&K<=this.transform.maxPitch)return this.transform.minPitch=K,this._update(),this.getPitch()<K&&this.setPitch(K),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},U.prototype.getMinPitch=function(){return this.transform.minPitch},U.prototype.setMaxPitch=function(K){if((K=K??ao)>ao)throw new Error("maxPitch must be less than or equal to 60");if(K>=this.transform.minPitch)return this.transform.maxPitch=K,this._update(),this.getPitch()>K&&this.setPitch(K),this;throw new Error("maxPitch must be greater than the current minPitch")},U.prototype.getMaxPitch=function(){return this.transform.maxPitch},U.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},U.prototype.setRenderWorldCopies=function(K){return this.transform.renderWorldCopies=K,this._update()},U.prototype.project=function(K){return this.transform.locationPoint(l.LngLat.convert(K))},U.prototype.unproject=function(K){return this.transform.pointLocation(l.Point.convert(K))},U.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},U.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},U.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},U.prototype._createDelegatedListener=function(K,pe,ke){var B,ee=this;if(K==="mouseenter"||K==="mouseover"){var ie=!1;return{layer:pe,listener:ke,delegates:{mousemove:function(_e){var Ce=ee.getLayer(pe)?ee.queryRenderedFeatures(_e.point,{layers:[pe]}):[];Ce.length?ie||(ie=!0,ke.call(ee,new Mi(K,ee,_e.originalEvent,{features:Ce}))):ie=!1},mouseout:function(){ie=!1}}}}if(K==="mouseleave"||K==="mouseout"){var ge=!1;return{layer:pe,listener:ke,delegates:{mousemove:function(_e){(ee.getLayer(pe)?ee.queryRenderedFeatures(_e.point,{layers:[pe]}):[]).length?ge=!0:ge&&(ge=!1,ke.call(ee,new Mi(K,ee,_e.originalEvent)))},mouseout:function(_e){ge&&(ge=!1,ke.call(ee,new Mi(K,ee,_e.originalEvent)))}}}}return{layer:pe,listener:ke,delegates:(B={},B[K]=function(_e){var Ce=ee.getLayer(pe)?ee.queryRenderedFeatures(_e.point,{layers:[pe]}):[];Ce.length&&(_e.features=Ce,ke.call(ee,_e),delete _e.features)},B)}},U.prototype.on=function(K,pe,ke){if(ke===void 0)return R.prototype.on.call(this,K,pe);var B=this._createDelegatedListener(K,pe,ke);for(var ee in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[K]=this._delegatedListeners[K]||[],this._delegatedListeners[K].push(B),B.delegates)this.on(ee,B.delegates[ee]);return this},U.prototype.once=function(K,pe,ke){if(ke===void 0)return R.prototype.once.call(this,K,pe);var B=this._createDelegatedListener(K,pe,ke);for(var ee in B.delegates)this.once(ee,B.delegates[ee]);return this},U.prototype.off=function(K,pe,ke){var B=this;return ke===void 0?R.prototype.off.call(this,K,pe):(this._delegatedListeners&&this._delegatedListeners[K]&&function(ee){for(var ie=ee[K],ge=0;ge<ie.length;ge++){var _e=ie[ge];if(_e.layer===pe&&_e.listener===ke){for(var Ce in _e.delegates)B.off(Ce,_e.delegates[Ce]);return ie.splice(ge,1),B}}}(this._delegatedListeners),this)},U.prototype.queryRenderedFeatures=function(K,pe){if(!this.style)return[];var ke;if(pe!==void 0||K===void 0||K instanceof l.Point||Array.isArray(K)||(pe=K,K=void 0),pe=pe||{},(K=K||[[0,0],[this.transform.width,this.transform.height]])instanceof l.Point||typeof K[0]=="number")ke=[l.Point.convert(K)];else{var B=l.Point.convert(K[0]),ee=l.Point.convert(K[1]);ke=[B,new l.Point(ee.x,B.y),ee,new l.Point(B.x,ee.y),B]}return this.style.queryRenderedFeatures(ke,pe,this.transform)},U.prototype.querySourceFeatures=function(K,pe){return this.style.querySourceFeatures(K,pe)},U.prototype.setStyle=function(K,pe){return(pe=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},pe)).diff!==!1&&pe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&K?(this._diffStyle(K,pe),this):(this._localIdeographFontFamily=pe.localIdeographFontFamily,this._updateStyle(K,pe))},U.prototype._getUIString=function(K){var pe=this._locale[K];if(pe==null)throw new Error("Missing UI string '"+K+"'");return pe},U.prototype._updateStyle=function(K,pe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),K?(this.style=new Lt(this,pe||{}),this.style.setEventedParent(this,{style:this.style}),typeof K=="string"?this.style.loadURL(K):this.style.loadJSON(K),this):(delete this.style,this)},U.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Lt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},U.prototype._diffStyle=function(K,pe){var ke=this;if(typeof K=="string"){var B=this._requestManager.normalizeStyleURL(K),ee=this._requestManager.transformRequest(B,l.ResourceType.Style);l.getJSON(ee,function(ie,ge){ie?ke.fire(new l.ErrorEvent(ie)):ge&&ke._updateDiff(ge,pe)})}else typeof K=="object"&&this._updateDiff(K,pe)},U.prototype._updateDiff=function(K,pe){try{this.style.setState(K)&&this._update(!0)}catch(ke){l.warnOnce("Unable to perform style diff: "+(ke.message||ke.error||ke)+".  Rebuilding the style from scratch."),this._updateStyle(K,pe)}},U.prototype.getStyle=function(){if(this.style)return this.style.serialize()},U.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")},U.prototype.addSource=function(K,pe){return this._lazyInitEmptyStyle(),this.style.addSource(K,pe),this._update(!0)},U.prototype.isSourceLoaded=function(K){var pe=this.style&&this.style.sourceCaches[K];if(pe!==void 0)return pe.loaded();this.fire(new l.ErrorEvent(new Error("There is no source with ID '"+K+"'")))},U.prototype.areTilesLoaded=function(){var K=this.style&&this.style.sourceCaches;for(var pe in K){var ke=K[pe]._tiles;for(var B in ke){var ee=ke[B];if(ee.state!=="loaded"&&ee.state!=="errored")return!1}}return!0},U.prototype.addSourceType=function(K,pe,ke){return this._lazyInitEmptyStyle(),this.style.addSourceType(K,pe,ke)},U.prototype.removeSource=function(K){return this.style.removeSource(K),this._update(!0)},U.prototype.getSource=function(K){return this.style.getSource(K)},U.prototype.addImage=function(K,pe,ke){ke===void 0&&(ke={});var B=ke.pixelRatio;B===void 0&&(B=1);var ee=ke.sdf;ee===void 0&&(ee=!1);var ie=ke.stretchX,ge=ke.stretchY,_e=ke.content;if(this._lazyInitEmptyStyle(),pe instanceof Li||Oa&&pe instanceof Oa){var Ce=l.browser.getImageData(pe),Ne=Ce.width,Ue=Ce.height,Ge=Ce.data;this.style.addImage(K,{data:new l.RGBAImage({width:Ne,height:Ue},Ge),pixelRatio:B,stretchX:ie,stretchY:ge,content:_e,sdf:ee,version:0})}else{if(pe.width===void 0||pe.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ye=pe.width,Qe=pe.height,ct=pe.data,vt=pe;this.style.addImage(K,{data:new l.RGBAImage({width:Ye,height:Qe},new Uint8Array(ct)),pixelRatio:B,stretchX:ie,stretchY:ge,content:_e,sdf:ee,version:0,userImage:vt}),vt.onAdd&&vt.onAdd(this,K)}},U.prototype.updateImage=function(K,pe){var ke=this.style.getImage(K);if(!ke)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var B=pe instanceof Li||Oa&&pe instanceof Oa?l.browser.getImageData(pe):pe,ee=B.width,ie=B.height,ge=B.data;if(ee===void 0||ie===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ee!==ke.data.width||ie!==ke.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var _e=!(pe instanceof Li||Oa&&pe instanceof Oa);ke.data.replace(ge,_e),this.style.updateImage(K,ke)},U.prototype.hasImage=function(K){return K?!!this.style.getImage(K):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)},U.prototype.removeImage=function(K){this.style.removeImage(K)},U.prototype.loadImage=function(K,pe){l.getImage(this._requestManager.transformRequest(K,l.ResourceType.Image),pe)},U.prototype.listImages=function(){return this.style.listImages()},U.prototype.addLayer=function(K,pe){return this._lazyInitEmptyStyle(),this.style.addLayer(K,pe),this._update(!0)},U.prototype.moveLayer=function(K,pe){return this.style.moveLayer(K,pe),this._update(!0)},U.prototype.removeLayer=function(K){return this.style.removeLayer(K),this._update(!0)},U.prototype.getLayer=function(K){return this.style.getLayer(K)},U.prototype.setLayerZoomRange=function(K,pe,ke){return this.style.setLayerZoomRange(K,pe,ke),this._update(!0)},U.prototype.setFilter=function(K,pe,ke){return ke===void 0&&(ke={}),this.style.setFilter(K,pe,ke),this._update(!0)},U.prototype.getFilter=function(K){return this.style.getFilter(K)},U.prototype.setPaintProperty=function(K,pe,ke,B){return B===void 0&&(B={}),this.style.setPaintProperty(K,pe,ke,B),this._update(!0)},U.prototype.getPaintProperty=function(K,pe){return this.style.getPaintProperty(K,pe)},U.prototype.setLayoutProperty=function(K,pe,ke,B){return B===void 0&&(B={}),this.style.setLayoutProperty(K,pe,ke,B),this._update(!0)},U.prototype.getLayoutProperty=function(K,pe){return this.style.getLayoutProperty(K,pe)},U.prototype.setLight=function(K,pe){return pe===void 0&&(pe={}),this._lazyInitEmptyStyle(),this.style.setLight(K,pe),this._update(!0)},U.prototype.getLight=function(){return this.style.getLight()},U.prototype.setFeatureState=function(K,pe){return this.style.setFeatureState(K,pe),this._update()},U.prototype.removeFeatureState=function(K,pe){return this.style.removeFeatureState(K,pe),this._update()},U.prototype.getFeatureState=function(K){return this.style.getFeatureState(K)},U.prototype.getContainer=function(){return this._container},U.prototype.getCanvasContainer=function(){return this._canvasContainer},U.prototype.getCanvas=function(){return this._canvas},U.prototype._containerDimensions=function(){var K=0,pe=0;return this._container&&(K=this._container.clientWidth||400,pe=this._container.clientHeight||300),[K,pe]},U.prototype._detectMissingCSS=function(){l.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&l.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},U.prototype._setupContainer=function(){var K=this._container;K.classList.add("mapboxgl-map"),(this._missingCSSCanary=m.create("div","mapboxgl-canary",K)).style.visibility="hidden",this._detectMissingCSS();var pe=this._canvasContainer=m.create("div","mapboxgl-canvas-container",K);this._interactive&&pe.classList.add("mapboxgl-interactive"),this._canvas=m.create("canvas","mapboxgl-canvas",pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ke=this._containerDimensions();this._resizeCanvas(ke[0],ke[1]);var B=this._controlContainer=m.create("div","mapboxgl-control-container",K),ee=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ie){ee[ie]=m.create("div","mapboxgl-ctrl-"+ie,B)})},U.prototype._resizeCanvas=function(K,pe){var ke=l.browser.devicePixelRatio||1;this._canvas.width=ke*K,this._canvas.height=ke*pe,this._canvas.style.width=K+"px",this._canvas.style.height=pe+"px"},U.prototype._setupPainter=function(){var K=l.extend({},_.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),pe=this._canvas.getContext("webgl",K)||this._canvas.getContext("experimental-webgl",K);pe?(this.painter=new ui(pe,this.transform),l.webpSupported.testSupport(pe)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))},U.prototype._contextLost=function(K){K.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:K}))},U.prototype._contextRestored=function(K){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:K}))},U.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},U.prototype._update=function(K){return this.style?(this._styleDirty=this._styleDirty||K,this._sourcesDirty=!0,this.triggerRepaint(),this):this},U.prototype._requestRenderFrame=function(K){return this._update(),this._renderTaskQueue.add(K)},U.prototype._cancelRenderFrame=function(K){this._renderTaskQueue.remove(K)},U.prototype._render=function(K){var pe,ke=this,B=0,ee=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(pe=ee.createQueryEXT(),ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,pe),B=l.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(K),!this._removed){var ie=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var ge=this.transform.zoom,_e=l.browser.now();this.style.zoomHistory.update(ge,_e);var Ce=new l.EvaluationParameters(ge,{now:_e,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ne=Ce.crossFadingFactor();Ne===1&&Ne===this._crossFadingFactor||(ie=!0,this._crossFadingFactor=Ne),this.style.update(Ce)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||ie)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ue=l.browser.now()-B;ee.endQueryEXT(ee.TIME_ELAPSED_EXT,pe),setTimeout(function(){var Ye=ee.getQueryObjectEXT(pe,ee.QUERY_RESULT_EXT)/1e6;ee.deleteQueryEXT(pe),ke.fire(new l.Event("gpu-timing-frame",{cpuTime:Ue,gpuTime:Ye}))},50)}if(this.listens("gpu-timing-layer")){var Ge=this.painter.collectGpuTimers();setTimeout(function(){var Ye=ke.painter.queryGpuTimers(Ge);ke.fire(new l.Event("gpu-timing-layer",{layerTimes:Ye}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new l.Event("idle"))),this}},U.prototype.remove=function(){this._hash&&this._hash.remove();for(var K=0,pe=this._controls;K<pe.length;K+=1)pe[K].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),l.window!==void 0&&(l.window.removeEventListener("resize",this._onWindowResize,!1),l.window.removeEventListener("online",this._onWindowOnline,!1));var ke=this.painter.context.gl.getExtension("WEBGL_lose_context");ke&&ke.loseContext(),Bo(this._canvasContainer),Bo(this._controlContainer),Bo(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new l.Event("remove"))},U.prototype.triggerRepaint=function(){var K=this;this.style&&!this._frame&&(this._frame=l.browser.frame(function(pe){K._frame=null,K._render(pe)}))},U.prototype._onWindowOnline=function(){this._update()},U.prototype._onWindowResize=function(K){this._trackResize&&this.resize({originalEvent:K})._update()},j.showTileBoundaries.get=function(){return!!this._showTileBoundaries},j.showTileBoundaries.set=function(K){this._showTileBoundaries!==K&&(this._showTileBoundaries=K,this._update())},j.showPadding.get=function(){return!!this._showPadding},j.showPadding.set=function(K){this._showPadding!==K&&(this._showPadding=K,this._update())},j.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},j.showCollisionBoxes.set=function(K){this._showCollisionBoxes!==K&&(this._showCollisionBoxes=K,K?this.style._generateCollisionBoxes():this._update())},j.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},j.showOverdrawInspector.set=function(K){this._showOverdrawInspector!==K&&(this._showOverdrawInspector=K,this._update())},j.repaint.get=function(){return!!this._repaint},j.repaint.set=function(K){this._repaint!==K&&(this._repaint=K,this.triggerRepaint())},j.vertices.get=function(){return!!this._vertices},j.vertices.set=function(K){this._vertices=K,this._update()},U.prototype._setCacheLimits=function(K,pe){l.setCacheLimits(K,pe)},j.version.get=function(){return l.version},Object.defineProperties(U.prototype,j),U}(Ps);function Bo(R){R.parentNode&&R.parentNode.removeChild(R)}var is={showCompass:!0,showZoom:!0,visualizePitch:!1},Bi=function(R){var U=this;this.options=l.extend({},is,R),this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(j){return j.preventDefault()}),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(j){return U._map.zoomIn({},{originalEvent:j})}),m.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(j){return U._map.zoomOut({},{originalEvent:j})}),m.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(j){U.options.visualizePitch?U._map.resetNorthPitch({},{originalEvent:j}):U._map.resetNorth({},{originalEvent:j})}),this._compassIcon=m.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Bi.prototype._updateZoomButtons=function(){var R=this._map.getZoom();this._zoomInButton.disabled=R===this._map.getMaxZoom(),this._zoomOutButton.disabled=R===this._map.getMinZoom()},Bi.prototype._rotateCompassArrow=function(){var R=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=R},Bi.prototype.onAdd=function(R){return this._map=R,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new na(this._map,this._compass,this.options.visualizePitch)),this._container},Bi.prototype.onRemove=function(){m.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Bi.prototype._createButton=function(R,U){var j=m.create("button",R,this._container);return j.type="button",j.addEventListener("click",U),j},Bi.prototype._setButtonTitle=function(R,U){var j=this._map._getUIString("NavigationControl."+U);R.title=j,R.setAttribute("aria-label",j)};var na=function(R,U,j){j===void 0&&(j=!1),this._clickTolerance=10,this.element=U,this.mouseRotate=new Ba({clickTolerance:R.dragRotate._mouseRotate._clickTolerance}),this.map=R,j&&(this.mousePitch=new Gs({clickTolerance:R.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),m.addEventListener(U,"mousedown",this.mousedown),m.addEventListener(U,"touchstart",this.touchstart,{passive:!1}),m.addEventListener(U,"touchmove",this.touchmove),m.addEventListener(U,"touchend",this.touchend),m.addEventListener(U,"touchcancel",this.reset)};function Pr(R,U,j){if(R=new l.LngLat(R.lng,R.lat),U){var K=new l.LngLat(R.lng-360,R.lat),pe=new l.LngLat(R.lng+360,R.lat),ke=j.locationPoint(R).distSqr(U);j.locationPoint(K).distSqr(U)<ke?R=K:j.locationPoint(pe).distSqr(U)<ke&&(R=pe)}for(;Math.abs(R.lng-j.center.lng)>180;){var B=j.locationPoint(R);if(B.x>=0&&B.y>=0&&B.x<=j.width&&B.y<=j.height)break;R.lng>j.center.lng?R.lng-=360:R.lng+=360}return R}na.prototype.down=function(R,U){this.mouseRotate.mousedown(R,U),this.mousePitch&&this.mousePitch.mousedown(R,U),m.disableDrag()},na.prototype.move=function(R,U){var j=this.map,K=this.mouseRotate.mousemoveWindow(R,U);if(K&&K.bearingDelta&&j.setBearing(j.getBearing()+K.bearingDelta),this.mousePitch){var pe=this.mousePitch.mousemoveWindow(R,U);pe&&pe.pitchDelta&&j.setPitch(j.getPitch()+pe.pitchDelta)}},na.prototype.off=function(){var R=this.element;m.removeEventListener(R,"mousedown",this.mousedown),m.removeEventListener(R,"touchstart",this.touchstart,{passive:!1}),m.removeEventListener(R,"touchmove",this.touchmove),m.removeEventListener(R,"touchend",this.touchend),m.removeEventListener(R,"touchcancel",this.reset),this.offTemp()},na.prototype.offTemp=function(){m.enableDrag(),m.removeEventListener(l.window,"mousemove",this.mousemove),m.removeEventListener(l.window,"mouseup",this.mouseup)},na.prototype.mousedown=function(R){this.down(l.extend({},R,{ctrlKey:!0,preventDefault:function(){return R.preventDefault()}}),m.mousePos(this.element,R)),m.addEventListener(l.window,"mousemove",this.mousemove),m.addEventListener(l.window,"mouseup",this.mouseup)},na.prototype.mousemove=function(R){this.move(R,m.mousePos(this.element,R))},na.prototype.mouseup=function(R){this.mouseRotate.mouseupWindow(R),this.mousePitch&&this.mousePitch.mouseupWindow(R),this.offTemp()},na.prototype.touchstart=function(R){R.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=m.touchPos(this.element,R.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return R.preventDefault()}},this._startPos))},na.prototype.touchmove=function(R){R.targetTouches.length!==1?this.reset():(this._lastPos=m.touchPos(this.element,R.targetTouches)[0],this.move({preventDefault:function(){return R.preventDefault()}},this._lastPos))},na.prototype.touchend=function(R){R.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},na.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Dr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vs(R,U,j){var K=R.classList;for(var pe in Dr)K.remove("mapboxgl-"+j+"-anchor-"+pe);K.add("mapboxgl-"+j+"-anchor-"+U)}var pa,Fo=function(R){function U(j,K){var pe=this;if(R.call(this),(j instanceof l.window.HTMLElement||K)&&(j=l.extend({element:j},K)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=j&&j.anchor||"center",this._color=j&&j.color||"#3FB1CE",this._draggable=j&&j.draggable||!1,this._state="inactive",this._rotation=j&&j.rotation||0,this._rotationAlignment=j&&j.rotationAlignment||"auto",this._pitchAlignment=j&&j.pitchAlignment&&j.pitchAlignment!=="auto"?j.pitchAlignment:this._rotationAlignment,j&&j.element)this._element=j.element,this._offset=l.Point.convert(j&&j.offset||[0,0]);else{this._defaultMarker=!0,this._element=m.create("div"),this._element.setAttribute("aria-label","Map marker");var ke=m.createNS("http://www.w3.org/2000/svg","svg");ke.setAttributeNS(null,"display","block"),ke.setAttributeNS(null,"height","41px"),ke.setAttributeNS(null,"width","27px"),ke.setAttributeNS(null,"viewBox","0 0 27 41");var B=m.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");var ee=m.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"fill-rule","nonzero");var ie=m.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ie.setAttributeNS(null,"fill","#000000");for(var ge=0,_e=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ge<_e.length;ge+=1){var Ce=_e[ge],Ne=m.createNS("http://www.w3.org/2000/svg","ellipse");Ne.setAttributeNS(null,"opacity","0.04"),Ne.setAttributeNS(null,"cx","10.5"),Ne.setAttributeNS(null,"cy","5.80029008"),Ne.setAttributeNS(null,"rx",Ce.rx),Ne.setAttributeNS(null,"ry",Ce.ry),ie.appendChild(Ne)}var Ue=m.createNS("http://www.w3.org/2000/svg","g");Ue.setAttributeNS(null,"fill",this._color);var Ge=m.createNS("http://www.w3.org/2000/svg","path");Ge.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ue.appendChild(Ge);var Ye=m.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"opacity","0.25"),Ye.setAttributeNS(null,"fill","#000000");var Qe=m.createNS("http://www.w3.org/2000/svg","path");Qe.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ye.appendChild(Qe);var ct=m.createNS("http://www.w3.org/2000/svg","g");ct.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ct.setAttributeNS(null,"fill","#FFFFFF");var vt=m.createNS("http://www.w3.org/2000/svg","g");vt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ot=m.createNS("http://www.w3.org/2000/svg","circle");Ot.setAttributeNS(null,"fill","#000000"),Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"cx","5.5"),Ot.setAttributeNS(null,"cy","5.5"),Ot.setAttributeNS(null,"r","5.4999962");var Dt=m.createNS("http://www.w3.org/2000/svg","circle");Dt.setAttributeNS(null,"fill","#FFFFFF"),Dt.setAttributeNS(null,"cx","5.5"),Dt.setAttributeNS(null,"cy","5.5"),Dt.setAttributeNS(null,"r","5.4999962"),vt.appendChild(Ot),vt.appendChild(Dt),ee.appendChild(ie),ee.appendChild(Ue),ee.appendChild(Ye),ee.appendChild(ct),ee.appendChild(vt),ke.appendChild(ee),this._element.appendChild(ke),this._offset=l.Point.convert(j&&j.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Pt){Pt.preventDefault()}),this._element.addEventListener("mousedown",function(Pt){Pt.preventDefault()}),this._element.addEventListener("focus",function(){var Pt=pe._map.getContainer();Pt.scrollTop=0,Pt.scrollLeft=0}),vs(this._element,this._anchor,"marker"),this._popup=null}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.addTo=function(j){return this.remove(),this._map=j,j.getCanvasContainer().appendChild(this._element),j.on("move",this._update),j.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},U.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),m.remove(this._element),this._popup&&this._popup.remove(),this},U.prototype.getLngLat=function(){return this._lngLat},U.prototype.setLngLat=function(j){return this._lngLat=l.LngLat.convert(j),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},U.prototype.getElement=function(){return this._element},U.prototype.setPopup=function(j){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),j){if(!("offset"in j.options)){var K=13.5,pe=Math.sqrt(Math.pow(K,2)/2);j.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[pe,-1*(24.6+pe)],"bottom-right":[-pe,-1*(24.6+pe)],left:[K,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=j,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},U.prototype._onKeyPress=function(j){var K=j.code,pe=j.charCode||j.keyCode;K!=="Space"&&K!=="Enter"&&pe!==32&&pe!==13||this.togglePopup()},U.prototype._onMapClick=function(j){var K=j.originalEvent.target,pe=this._element;this._popup&&(K===pe||pe.contains(K))&&this.togglePopup()},U.prototype.getPopup=function(){return this._popup},U.prototype.togglePopup=function(){var j=this._popup;return j?(j.isOpen()?j.remove():j.addTo(this._map),this):this},U.prototype._update=function(j){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Pr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var K="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?K="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(K="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var pe="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?pe="rotateX(0deg)":this._pitchAlignment==="map"&&(pe="rotateX("+this._map.getPitch()+"deg)"),j&&j.type!=="moveend"||(this._pos=this._pos.round()),m.setTransform(this._element,Dr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+pe+" "+K)}},U.prototype.getOffset=function(){return this._offset},U.prototype.setOffset=function(j){return this._offset=l.Point.convert(j),this._update(),this},U.prototype._onMove=function(j){this._pos=j.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag"))},U.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"},U.prototype._addDragHandler=function(j){this._element.contains(j.originalEvent.target)&&(j.preventDefault(),this._positionDelta=j.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},U.prototype.setDraggable=function(j){return this._draggable=!!j,this._map&&(j?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},U.prototype.isDraggable=function(){return this._draggable},U.prototype.setRotation=function(j){return this._rotation=j||0,this._update(),this},U.prototype.getRotation=function(){return this._rotation},U.prototype.setRotationAlignment=function(j){return this._rotationAlignment=j||"auto",this._update(),this},U.prototype.getRotationAlignment=function(){return this._rotationAlignment},U.prototype.setPitchAlignment=function(j){return this._pitchAlignment=j&&j!=="auto"?j:this._rotationAlignment,this._update(),this},U.prototype.getPitchAlignment=function(){return this._pitchAlignment},U}(l.Evented),ra={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ms=0,ia=!1,No=function(R){function U(j){R.call(this),this.options=l.extend({},ra,j),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.onAdd=function(j){return this._map=j,this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),K=this._setupUI,pa!==void 0?K(pa):l.window.navigator.permissions!==void 0?l.window.navigator.permissions.query({name:"geolocation"}).then(function(pe){pa=pe.state!=="denied",K(pa)}):(pa=!!l.window.navigator.geolocation,K(pa)),this._container;var K},U.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),m.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ms=0,ia=!1},U.prototype._isOutOfMapMaxBounds=function(j){var K=this._map.getMaxBounds(),pe=j.coords;return K&&(pe.longitude<K.getWest()||pe.longitude>K.getEast()||pe.latitude<K.getSouth()||pe.latitude>K.getNorth())},U.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},U.prototype._onSuccess=function(j){if(this._map){if(this._isOutOfMapMaxBounds(j))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",j)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=j,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(j),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(j),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",j)),this._finish()}},U.prototype._updateCamera=function(j){var K=new l.LngLat(j.coords.longitude,j.coords.latitude),pe=j.coords.accuracy,ke=this._map.getBearing(),B=l.extend({bearing:ke},this.options.fitBoundsOptions);this._map.fitBounds(K.toBounds(pe),B,{geolocateSource:!0})},U.prototype._updateMarker=function(j){if(j){var K=new l.LngLat(j.coords.longitude,j.coords.latitude);this._accuracyCircleMarker.setLngLat(K).addTo(this._map),this._userLocationDotMarker.setLngLat(K).addTo(this._map),this._accuracy=j.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},U.prototype._updateCircleRadius=function(){var j=this._map._container.clientHeight/2,K=this._map.unproject([0,j]),pe=this._map.unproject([1,j]),ke=K.distanceTo(pe),B=Math.ceil(2*this._accuracy/ke);this._circleElement.style.width=B+"px",this._circleElement.style.height=B+"px"},U.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},U.prototype._onError=function(j){if(this._map){if(this.options.trackUserLocation)if(j.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var K=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=K,this._geolocateButton.setAttribute("aria-label",K),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(j.code===3&&ia)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",j)),this._finish()}},U.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},U.prototype._setupUI=function(j){var K=this;if(this._container.addEventListener("contextmenu",function(B){return B.preventDefault()}),this._geolocateButton=m.create("button","mapboxgl-ctrl-geolocate",this._container),m.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",j===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var pe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=pe,this._geolocateButton.setAttribute("aria-label",pe)}else{var ke=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ke,this._geolocateButton.setAttribute("aria-label",ke)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=m.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Fo(this._dotElement),this._circleElement=m.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Fo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(B){var ee=B.originalEvent&&B.originalEvent.type==="resize";B.geolocateSource||K._watchState!=="ACTIVE_LOCK"||ee||(K._watchState="BACKGROUND",K._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),K._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),K.fire(new l.Event("trackuserlocationend")))})},U.prototype.trigger=function(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ms--,ia=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var j;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ms>1?(j={maximumAge:6e5,timeout:0},ia=!0):(j=this.options.positionOptions,ia=!1),this._geolocationWatchID=l.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,j)}}else l.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},U.prototype._clearWatch=function(){l.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},U}(l.Evented),jo={maxWidth:100,unit:"metric"},jr=function(R){this.options=l.extend({},jo,R),l.bindAll(["_onMove","setUnit"],this)};function Gi(R,U,j){var K=j&&j.maxWidth||100,pe=R._container.clientHeight/2,ke=R.unproject([0,pe]),B=R.unproject([K,pe]),ee=ke.distanceTo(B);if(j&&j.unit==="imperial"){var ie=3.2808*ee;ie>5280?oo(U,K,ie/5280,R._getUIString("ScaleControl.Miles")):oo(U,K,ie,R._getUIString("ScaleControl.Feet"))}else j&&j.unit==="nautical"?oo(U,K,ee/1852,R._getUIString("ScaleControl.NauticalMiles")):ee>=1e3?oo(U,K,ee/1e3,R._getUIString("ScaleControl.Kilometers")):oo(U,K,ee,R._getUIString("ScaleControl.Meters"))}function oo(R,U,j,K){var pe,ke,B,ee=(pe=j,(ke=Math.pow(10,(""+Math.floor(pe)).length-1))*((B=pe/ke)>=10?10:B>=5?5:B>=3?3:B>=2?2:B>=1?1:function(ge){var _e=Math.pow(10,Math.ceil(-Math.log(ge)/Math.LN10));return Math.round(ge*_e)/_e}(B))),ie=ee/j;R.style.width=U*ie+"px",R.innerHTML=ee+"&nbsp;"+K}jr.prototype.getDefaultPosition=function(){return"bottom-left"},jr.prototype._onMove=function(){Gi(this._map,this._container,this.options)},jr.prototype.onAdd=function(R){return this._map=R,this._container=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",R.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},jr.prototype.onRemove=function(){m.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},jr.prototype.setUnit=function(R){this.options.unit=R,Gi(this._map,this._container,this.options)};var Ta=function(R){this._fullscreen=!1,R&&R.container&&(R.container instanceof l.window.HTMLElement?this._container=R.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in l.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in l.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in l.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in l.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ta.prototype.onAdd=function(R){return this._map=R,this._container||(this._container=this._map.getContainer()),this._controlContainer=m.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ta.prototype.onRemove=function(){m.remove(this._controlContainer),this._map=null,l.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ta.prototype._checkFullscreenSupport=function(){return!!(l.window.document.fullscreenEnabled||l.window.document.mozFullScreenEnabled||l.window.document.msFullscreenEnabled||l.window.document.webkitFullscreenEnabled)},Ta.prototype._setupUI=function(){var R=this._fullscreenButton=m.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);m.create("span","mapboxgl-ctrl-icon",R).setAttribute("aria-hidden",!0),R.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),l.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ta.prototype._updateTitle=function(){var R=this._getTitle();this._fullscreenButton.setAttribute("aria-label",R),this._fullscreenButton.title=R},Ta.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ta.prototype._isFullscreen=function(){return this._fullscreen},Ta.prototype._changeIcon=function(){(l.window.document.fullscreenElement||l.window.document.mozFullScreenElement||l.window.document.webkitFullscreenElement||l.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ta.prototype._onClickFullscreen=function(){this._isFullscreen()?l.window.document.exitFullscreen?l.window.document.exitFullscreen():l.window.document.mozCancelFullScreen?l.window.document.mozCancelFullScreen():l.window.document.msExitFullscreen?l.window.document.msExitFullscreen():l.window.document.webkitCancelFullScreen&&l.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var as={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},ys=function(R){function U(j){R.call(this),this.options=l.extend(Object.create(as),j),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return R&&(U.__proto__=R),U.prototype=Object.create(R&&R.prototype),U.prototype.constructor=U,U.prototype.addTo=function(j){return this._map&&this.remove(),this._map=j,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this},U.prototype.isOpen=function(){return!!this._map},U.prototype.remove=function(){return this._content&&m.remove(this._content),this._container&&(m.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this},U.prototype.getLngLat=function(){return this._lngLat},U.prototype.setLngLat=function(j){return this._lngLat=l.LngLat.convert(j),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},U.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},U.prototype.getElement=function(){return this._container},U.prototype.setText=function(j){return this.setDOMContent(l.window.document.createTextNode(j))},U.prototype.setHTML=function(j){var K,pe=l.window.document.createDocumentFragment(),ke=l.window.document.createElement("body");for(ke.innerHTML=j;K=ke.firstChild;)pe.appendChild(K);return this.setDOMContent(pe)},U.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},U.prototype.setMaxWidth=function(j){return this.options.maxWidth=j,this._update(),this},U.prototype.setDOMContent=function(j){return this._createContent(),this._content.appendChild(j),this._update(),this},U.prototype.addClassName=function(j){this._container&&this._container.classList.add(j)},U.prototype.removeClassName=function(j){this._container&&this._container.classList.remove(j)},U.prototype.toggleClassName=function(j){if(this._container)return this._container.classList.toggle(j)},U.prototype._createContent=function(){this._content&&m.remove(this._content),this._content=m.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=m.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},U.prototype._onMouseUp=function(j){this._update(j.point)},U.prototype._onMouseMove=function(j){this._update(j.point)},U.prototype._onDrag=function(j){this._update(j.point)},U.prototype._update=function(j){var K=this,pe=this._lngLat||this._trackPointer;if(this._map&&pe&&this._content&&(this._container||(this._container=m.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=m.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Ne){return K._container.classList.add(Ne)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||j)){var ke=this._pos=this._trackPointer&&j?j:this._map.project(this._lngLat),B=this.options.anchor,ee=os(this.options.offset);if(!B){var ie,ge=this._container.offsetWidth,_e=this._container.offsetHeight;ie=ke.y+ee.bottom.y<_e?["top"]:ke.y>this._map.transform.height-_e?["bottom"]:[],ke.x<ge/2?ie.push("left"):ke.x>this._map.transform.width-ge/2&&ie.push("right"),B=ie.length===0?"bottom":ie.join("-")}var Ce=ke.add(ee[B]).round();m.setTransform(this._container,Dr[B]+" translate("+Ce.x+"px,"+Ce.y+"px)"),vs(this._container,B,"popup")}},U.prototype._onClose=function(){this.remove()},U}(l.Evented);function os(R){if(R){if(typeof R=="number"){var U=Math.round(Math.sqrt(.5*Math.pow(R,2)));return{center:new l.Point(0,0),top:new l.Point(0,R),"top-left":new l.Point(U,U),"top-right":new l.Point(-U,U),bottom:new l.Point(0,-R),"bottom-left":new l.Point(U,-U),"bottom-right":new l.Point(-U,-U),left:new l.Point(R,0),right:new l.Point(-R,0)}}if(R instanceof l.Point||Array.isArray(R)){var j=l.Point.convert(R);return{center:j,top:j,"top-left":j,"top-right":j,bottom:j,"bottom-left":j,"bottom-right":j,left:j,right:j}}return{center:l.Point.convert(R.center||[0,0]),top:l.Point.convert(R.top||[0,0]),"top-left":l.Point.convert(R["top-left"]||[0,0]),"top-right":l.Point.convert(R["top-right"]||[0,0]),bottom:l.Point.convert(R.bottom||[0,0]),"bottom-left":l.Point.convert(R["bottom-left"]||[0,0]),"bottom-right":l.Point.convert(R["bottom-right"]||[0,0]),left:l.Point.convert(R.left||[0,0]),right:l.Point.convert(R.right||[0,0])}}return os(new l.Point(0,0))}var _o={version:l.version,supported:_,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:qs,NavigationControl:Bi,GeolocateControl:No,AttributionControl:wa,ScaleControl:jr,FullscreenControl:Ta,Popup:ys,Marker:Fo,Style:Lt,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.Point,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,config:l.config,prewarm:function(){mt().acquire(rt)},clearPrewarmedResources:function(){var R=gt;R&&(R.isPreloaded()&&R.numActive()===1?(R.release(rt),gt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return l.config.ACCESS_TOKEN},set accessToken(R){l.config.ACCESS_TOKEN=R},get baseApiUrl(){return l.config.API_URL},set baseApiUrl(R){l.config.API_URL=R},get workerCount(){return tt.workerCount},set workerCount(R){tt.workerCount=R},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(R){l.config.MAX_PARALLEL_IMAGE_REQUESTS=R},clearStorage:function(R){l.clearTileCache(R)},workerUrl:""};return _o}),A}()},27084:function($){$.exports=Math.log2||function(P){return Math.log(P)*Math.LOG2E}},16825:function($,P,t){$.exports=function(M,l){l||(l=M,M=window);var _=0,m=0,f=0,o={shift:!1,alt:!1,control:!1,meta:!1},e=!1;function i(h){var b=!1;return"altKey"in h&&(b=b||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(b=b||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(b=b||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(b=b||h.metaKey!==o.meta,o.meta=!!h.metaKey),b}function r(h,b){var v=A.x(b),y=A.y(b);"buttons"in b&&(h=0|b.buttons),(h!==_||v!==m||y!==f||i(b))&&(_=0|h,m=v||0,f=y||0,l&&l(_,m,f,o))}function n(h){r(0,h)}function s(){(_||m||f||o.shift||o.alt||o.meta||o.control)&&(m=f=0,_=0,o.shift=o.alt=o.control=o.meta=!1,l&&l(0,0,0,o))}function a(h){i(h)&&l&&l(_,m,f,o)}function u(h){A.buttons(h)===0?r(0,h):r(_,h)}function p(h){r(_|A.buttons(h),h)}function c(h){r(_&~A.buttons(h),h)}function x(){e||(e=!0,M.addEventListener("mousemove",u),M.addEventListener("mousedown",p),M.addEventListener("mouseup",c),M.addEventListener("mouseleave",n),M.addEventListener("mouseenter",n),M.addEventListener("mouseout",n),M.addEventListener("mouseover",n),M.addEventListener("blur",s),M.addEventListener("keyup",a),M.addEventListener("keydown",a),M.addEventListener("keypress",a),M!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",a),window.addEventListener("keydown",a),window.addEventListener("keypress",a)))}x();var g={element:M};return Object.defineProperties(g,{enabled:{get:function(){return e},set:function(h){h?x():e&&(e=!1,M.removeEventListener("mousemove",u),M.removeEventListener("mousedown",p),M.removeEventListener("mouseup",c),M.removeEventListener("mouseleave",n),M.removeEventListener("mouseenter",n),M.removeEventListener("mouseout",n),M.removeEventListener("mouseover",n),M.removeEventListener("blur",s),M.removeEventListener("keyup",a),M.removeEventListener("keydown",a),M.removeEventListener("keypress",a),M!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",a),window.removeEventListener("keydown",a),window.removeEventListener("keypress",a)))},enumerable:!0},buttons:{get:function(){return _},enumerable:!0},x:{get:function(){return m},enumerable:!0},y:{get:function(){return f},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),g};var A=t(74311)},48956:function($){var P={left:0,top:0};$.exports=function(t,A,M){A=A||t.currentTarget||t.srcElement,Array.isArray(M)||(M=[0,0]);var l,_=t.clientX||0,m=t.clientY||0,f=(l=A)===window||l===document||l===document.body?P:l.getBoundingClientRect();return M[0]=_-f.left,M[1]=m-f.top,M}},74311:function($,P){function t(A){return A.target||A.srcElement||window}P.buttons=function(A){if(typeof A=="object"){if("buttons"in A)return A.buttons;if("which"in A){if((M=A.which)===2)return 4;if(M===3)return 2;if(M>0)return 1<<M-1}else if("button"in A){var M;if((M=A.button)===1)return 4;if(M===2)return 2;if(M>=0)return 1<<M}}return 0},P.element=t,P.x=function(A){if(typeof A=="object"){if("offsetX"in A)return A.offsetX;var M=t(A).getBoundingClientRect();return A.clientX-M.left}return 0},P.y=function(A){if(typeof A=="object"){if("offsetY"in A)return A.offsetY;var M=t(A).getBoundingClientRect();return A.clientY-M.top}return 0}},1195:function($,P,t){var A=t(75686);$.exports=function(M,l,_){typeof M=="function"&&(_=!!l,l=M,M=window);var m=A("ex",M),f=function(o){_&&o.preventDefault();var e=o.deltaX||0,i=o.deltaY||0,r=o.deltaZ||0,n=1;switch(o.deltaMode){case 1:n=m;break;case 2:n=window.innerHeight}if(i*=n,r*=n,(e*=n)||i||r)return l(e,i,r,o)};return M.addEventListener("wheel",f),f}},7417:function($,P,t){var A;(function(M,l,_){l[M]=l[M]||function(){var m,f,o,e=Object.prototype.toString,i=typeof setImmediate<"u"?function(v){return setImmediate(v)}:setTimeout;try{Object.defineProperty({},"x",{}),m=function(v,y,w,d){return Object.defineProperty(v,y,{value:w,writable:!0,configurable:d!==!1})}}catch{m=function(y,w,d){return y[w]=d,y}}function r(v,y){o.add(v,y),f||(f=i(o.drain))}function n(v){var y,w=typeof v;return v==null||w!="object"&&w!="function"||(y=v.then),typeof y=="function"&&y}function s(){for(var v=0;v<this.chain.length;v++)a(this,this.state===1?this.chain[v].success:this.chain[v].failure,this.chain[v]);this.chain.length=0}function a(v,y,w){var d,S;try{y===!1?w.reject(v.msg):(d=y===!0?v.msg:y.call(void 0,v.msg))===w.promise?w.reject(TypeError("Promise-chain cycle")):(S=n(d))?S.call(d,w.resolve,w.reject):w.resolve(d)}catch(T){w.reject(T)}}function u(v){var y,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(y=n(v))?r(function(){var d=new x(w);try{y.call(v,function(){u.apply(d,arguments)},function(){p.apply(d,arguments)})}catch(S){p.call(d,S)}}):(w.msg=v,w.state=1,w.chain.length>0&&r(s,w))}catch(d){p.call(new x(w),d)}}}function p(v){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=v,y.state=2,y.chain.length>0&&r(s,y))}function c(v,y,w,d){for(var S=0;S<y.length;S++)(function(T){v.resolve(y[T]).then(function(E){w(T,E)},d)})(S)}function x(v){this.def=v,this.triggered=!1}function g(v){this.promise=v,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function h(v){if(typeof v!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var y=new g(this);this.then=function(w,d){var S={success:typeof w!="function"||w,failure:typeof d=="function"&&d};return S.promise=new this.constructor(function(T,E){if(typeof T!="function"||typeof E!="function")throw TypeError("Not a function");S.resolve=T,S.reject=E}),y.chain.push(S),y.state!==0&&r(s,y),S.promise},this.catch=function(w){return this.then(void 0,w)};try{v.call(void 0,function(w){u.call(y,w)},function(w){p.call(y,w)})}catch(w){p.call(y,w)}}o=function(){var v,y,w;function d(S,T){this.fn=S,this.self=T,this.next=void 0}return{add:function(S,T){w=new d(S,T),y?y.next=w:v=w,y=w,w=void 0},drain:function(){var S=v;for(v=y=f=void 0;S;)S.fn.call(S.self),S=S.next}}}();var b=m({},"constructor",h,!1);return h.prototype=b,m(b,"__NPO__",0,!1),m(h,"resolve",function(v){return v&&typeof v=="object"&&v.__NPO__===1?v:new this(function(y,w){if(typeof y!="function"||typeof w!="function")throw TypeError("Not a function");y(v)})}),m(h,"reject",function(v){return new this(function(y,w){if(typeof y!="function"||typeof w!="function")throw TypeError("Not a function");w(v)})}),m(h,"all",function(v){var y=this;return e.call(v)!="[object Array]"?y.reject(TypeError("Not an array")):v.length===0?y.resolve([]):new y(function(w,d){if(typeof w!="function"||typeof d!="function")throw TypeError("Not a function");var S=v.length,T=Array(S),E=0;c(y,v,function(C,L){T[C]=L,++E===S&&w(T)},d)})}),m(h,"race",function(v){var y=this;return e.call(v)!="[object Array]"?y.reject(TypeError("Not an array")):new y(function(w,d){if(typeof w!="function"||typeof d!="function")throw TypeError("Not a function");c(y,v,function(S,T){w(T)},d)})}),h}(),$.exports?$.exports=l[M]:(A=(function(){return l[M]}).call(P,t,P,$))===void 0||($.exports=A)})("Promise",t.g!==void 0?t.g:this)},18625:function($){var P=Math.PI,t=m(120);function A(f,o,e,i){return["C",f,o,e,i,e,i]}function M(f,o,e,i,r,n){return["C",f/3+.6666666666666666*e,o/3+.6666666666666666*i,r/3+.6666666666666666*e,n/3+.6666666666666666*i,r,n]}function l(f,o,e,i,r,n,s,a,u,p){if(p)S=p[0],T=p[1],w=p[2],d=p[3];else{var c=_(f,o,-r);f=c.x,o=c.y;var x=(f-(a=(c=_(a,u,-r)).x))/2,g=(o-(u=c.y))/2,h=x*x/(e*e)+g*g/(i*i);h>1&&(e*=h=Math.sqrt(h),i*=h);var b=e*e,v=i*i,y=(n==s?-1:1)*Math.sqrt(Math.abs((b*v-b*g*g-v*x*x)/(b*g*g+v*x*x)));y==1/0&&(y=1);var w=y*e*g/i+(f+a)/2,d=y*-i*x/e+(o+u)/2,S=Math.asin(((o-d)/i).toFixed(9)),T=Math.asin(((u-d)/i).toFixed(9));(S=f<w?P-S:S)<0&&(S=2*P+S),(T=a<w?P-T:T)<0&&(T=2*P+T),s&&S>T&&(S-=2*P),!s&&T>S&&(T-=2*P)}if(Math.abs(T-S)>t){var E=T,C=a,L=u;T=S+t*(s&&T>S?1:-1);var O=l(a=w+e*Math.cos(T),u=d+i*Math.sin(T),e,i,r,0,s,C,L,[T,E,w,d])}var z=Math.tan((T-S)/4),G=4/3*e*z,I=4/3*i*z,H=[2*f-(f+G*Math.sin(S)),2*o-(o-I*Math.cos(S)),a+G*Math.sin(T),u-I*Math.cos(T),a,u];if(p)return H;O&&(H=H.concat(O));for(var N=0;N<H.length;){var F=_(H[N],H[N+1],r);H[N++]=F.x,H[N++]=F.y}return H}function _(f,o,e){return{x:f*Math.cos(e)-o*Math.sin(e),y:f*Math.sin(e)+o*Math.cos(e)}}function m(f){return f*(P/180)}$.exports=function(f){for(var o,e=[],i=0,r=0,n=0,s=0,a=null,u=null,p=0,c=0,x=0,g=f.length;x<g;x++){var h=f[x],b=h[0];switch(b){case"M":n=h[1],s=h[2];break;case"A":(h=l(p,c,h[1],h[2],m(h[3]),h[4],h[5],h[6],h[7])).unshift("C"),h.length>7&&(e.push(h.splice(0,7)),h.unshift("C"));break;case"S":var v=p,y=c;o!="C"&&o!="S"||(v+=v-i,y+=y-r),h=["C",v,y,h[1],h[2],h[3],h[4]];break;case"T":o=="Q"||o=="T"?(a=2*p-a,u=2*c-u):(a=p,u=c),h=M(p,c,a,u,h[1],h[2]);break;case"Q":a=h[1],u=h[2],h=M(p,c,h[1],h[2],h[3],h[4]);break;case"L":h=A(p,c,h[1],h[2]);break;case"H":h=A(p,c,h[1],c);break;case"V":h=A(p,c,p,h[1]);break;case"Z":h=A(p,c,n,s)}o=b,p=h[h.length-2],c=h[h.length-1],h.length>4?(i=h[h.length-4],r=h[h.length-3]):(i=p,r=c),e.push(h)}return e}},56131:function($){var P=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;$.exports=function(){try{if(!Object.assign)return!1;var M=new String("abc");if(M[5]="de",Object.getOwnPropertyNames(M)[0]==="5")return!1;for(var l={},_=0;_<10;_++)l["_"+String.fromCharCode(_)]=_;if(Object.getOwnPropertyNames(l).map(function(f){return l[f]}).join("")!=="0123456789")return!1;var m={};return"abcdefghijklmnopqrst".split("").forEach(function(f){m[f]=f}),Object.keys(Object.assign({},m)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(M,l){for(var _,m,f=function(r){if(r==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(r)}(M),o=1;o<arguments.length;o++){for(var e in _=Object(arguments[o]))t.call(_,e)&&(f[e]=_[e]);if(P){m=P(_);for(var i=0;i<m.length;i++)A.call(_,m[i])&&(f[m[i]]=_[m[i]])}}return f}},65848:function($){var P=function(t){return t!=t};$.exports=function(t,A){return t===0&&A===0?1/t==1/A:t===A||!(!P(t)||!P(A))}},64003:function($,P,t){var A=t(17045),M=t(68222),l=t(65848),_=t(27015),m=t(55572),f=M(_(),Object);A(f,{getPolyfill:_,implementation:l,shim:m}),$.exports=f},27015:function($,P,t){var A=t(65848);$.exports=function(){return typeof Object.is=="function"?Object.is:A}},55572:function($,P,t){var A=t(27015),M=t(17045);$.exports=function(){var l=A();return M(Object,{is:l},{is:function(){return Object.is!==l}}),l}},99019:function($,P,t){var A;if(!Object.keys){var M=Object.prototype.hasOwnProperty,l=Object.prototype.toString,_=t(64178),m=Object.prototype.propertyIsEnumerable,f=!m.call({toString:null},"toString"),o=m.call(function(){},"prototype"),e=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=function(s){var a=s.constructor;return a&&a.prototype===s},r={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var s in window)try{if(!r["$"+s]&&M.call(window,s)&&window[s]!==null&&typeof window[s]=="object")try{i(window[s])}catch{return!0}}catch{return!0}return!1}();A=function(s){var a=s!==null&&typeof s=="object",u=l.call(s)==="[object Function]",p=_(s),c=a&&l.call(s)==="[object String]",x=[];if(!a&&!u&&!p)throw new TypeError("Object.keys called on a non-object");var g=o&&u;if(c&&s.length>0&&!M.call(s,0))for(var h=0;h<s.length;++h)x.push(String(h));if(p&&s.length>0)for(var b=0;b<s.length;++b)x.push(String(b));else for(var v in s)g&&v==="prototype"||!M.call(s,v)||x.push(String(v));if(f)for(var y=function(d){if(typeof window>"u"||!n)return i(d);try{return i(d)}catch{return!1}}(s),w=0;w<e.length;++w)y&&e[w]==="constructor"||!M.call(s,e[w])||x.push(e[w]);return x}}$.exports=A},8709:function($,P,t){var A=Array.prototype.slice,M=t(64178),l=Object.keys,_=l?function(f){return l(f)}:t(99019),m=Object.keys;_.shim=function(){if(Object.keys){var f=function(){var o=Object.keys(arguments);return o&&o.length===arguments.length}(1,2);f||(Object.keys=function(o){return M(o)?m(A.call(o)):m(o)})}else Object.keys=_;return Object.keys||_},$.exports=_},64178:function($){var P=Object.prototype.toString;$.exports=function(t){var A=P.call(t),M=A==="[object Arguments]";return M||(M=A!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&P.call(t.callee)==="[object Function]"),M}},88641:function($){function P(M,l){if(typeof M!="string")return[M];var _=[M];typeof l=="string"||Array.isArray(l)?l={brackets:l}:l||(l={});var m=l.brackets?Array.isArray(l.brackets)?l.brackets:[l.brackets]:["{}","[]","()"],f=l.escape||"___",o=!!l.flat;m.forEach(function(i){var r=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),n=[];function s(a,u,p){var c=_.push(a.slice(i[0].length,-i[1].length))-1;return n.push(c),f+c+f}_.forEach(function(a,u){for(var p,c=0;a!=p;)if(p=a,a=a.replace(r,s),c++>1e4)throw Error("References have circular dependency. Please, check them.");_[u]=a}),n=n.reverse(),_=_.map(function(a){return n.forEach(function(u){a=a.replace(new RegExp("(\\"+f+u+"\\"+f+")","g"),i[0]+"$1"+i[1])}),a})});var e=new RegExp("\\"+f+"([0-9]+)\\"+f);return o?_:function i(r,n,s){for(var a,u=[],p=0;a=e.exec(r);){if(p++>1e4)throw Error("Circular references in parenthesis");u.push(r.slice(0,a.index)),u.push(i(n[a[1]],n)),r=r.slice(a.index+a[0].length)}return u.push(r),u}(_[0],_)}function t(M,l){if(l&&l.flat){var _,m=l&&l.escape||"___",f=M[0];if(!f)return"";for(var o=new RegExp("\\"+m+"([0-9]+)\\"+m),e=0;f!=_;){if(e++>1e4)throw Error("Circular references in "+M);_=f,f=f.replace(o,i)}return f}return M.reduce(function r(n,s){return Array.isArray(s)&&(s=s.reduce(r,"")),n+s},"");function i(r,n){if(M[n]==null)throw Error("Reference "+n+"is undefined");return M[n]}}function A(M,l){return Array.isArray(M)?t(M,l):P(M,l)}A.parse=P,A.stringify=t,$.exports=A},18863:function($,P,t){var A=t(71299);$.exports=function(M){var l;return arguments.length>1&&(M=arguments),typeof M=="string"?M=M.split(/\s/).map(parseFloat):typeof M=="number"&&(M=[M]),M.length&&typeof M[0]=="number"?l=M.length===1?{width:M[0],height:M[0],x:0,y:0}:M.length===2?{width:M[0],height:M[1],x:0,y:0}:{x:M[0],y:M[1],width:M[2]-M[0]||0,height:M[3]-M[1]||0}:M&&(l={x:(M=A(M,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:M.top||0},M.width==null?M.right?l.width=M.right-l.x:l.width=0:l.width=M.width,M.height==null?M.bottom?l.height=M.bottom-l.y:l.height=0:l.height=M.height),l}},95616:function($){$.exports=function(M){var l=[];return M.replace(t,function(_,m,f){var o=m.toLowerCase();for(f=function(e){var i=e.match(A);return i?i.map(Number):[]}(f),o=="m"&&f.length>2&&(l.push([m].concat(f.splice(0,2))),o="l",m=m=="m"?"l":"L");;){if(f.length==P[o])return f.unshift(m),l.push(f);if(f.length<P[o])throw new Error("malformed path data");l.push([m].concat(f.splice(0,P[o])))}}),l};var P={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/gi,A=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},25677:function($){$.exports=function(P,t){t||(t=[0,""]),P=String(P);var A=parseFloat(P,10);return t[0]=A,t[1]=P.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},9748:function($,P,t){var A=t(90386);(function(){var M,l,_,m,f,o;typeof performance<"u"&&performance!==null&&performance.now?$.exports=function(){return performance.now()}:A!=null&&A.hrtime?($.exports=function(){return(M()-f)/1e6},l=A.hrtime,m=(M=function(){var e;return 1e9*(e=l())[0]+e[1]})(),o=1e9*A.uptime(),f=m-o):Date.now?($.exports=function(){return Date.now()-_},_=Date.now()):($.exports=function(){return new Date().getTime()-_},_=new Date().getTime())}).call(this)},71299:function($){$.exports=function(A,M,l){var _,m,f={};if(typeof M=="string"&&(M=t(M)),Array.isArray(M)){var o={};for(m=0;m<M.length;m++)o[M[m]]=!0;M=o}for(_ in M)M[_]=t(M[_]);var e={};for(_ in M){var i=M[_];if(Array.isArray(i))for(m=0;m<i.length;m++){var r=i[m];if(l&&(e[r]=!0),r in A){if(f[_]=A[r],l)for(var n=m;n<i.length;n++)e[i[n]]=!0;break}}else _ in A&&(M[_]&&(f[_]=A[_]),l&&(e[_]=!0))}if(l)for(_ in A)e[_]||(f[_]=A[_]);return f};var P={};function t(A){return P[A]?P[A]:(typeof A=="string"&&(A=P[A]=A.split(/\s*,\s*|\s+/)),A)}},38258:function($){$.exports=function(P,t,A,M){var l=P[0],_=P[1],m=!1;A===void 0&&(A=0),M===void 0&&(M=t.length);for(var f=M-A,o=0,e=f-1;o<f;e=o++){var i=t[o+A][0],r=t[o+A][1],n=t[e+A][0],s=t[e+A][1];r>_!=s>_&&l<(n-i)*(_-r)/(s-r)+i&&(m=!m)}return m}},52142:function($,P,t){var A,M=t(69444),l=t(29023),_=t(87263),m=t(11328),f=t(55968),o=t(10670),e=!1,i=l();function r(n,s,a){var u=A.segments(n),p=A.segments(s),c=a(A.combine(u,p));return A.polygon(c)}A={buildLog:function(n){return n===!0?e=M():n===!1&&(e=!1),e!==!1&&e.list},epsilon:function(n){return i.epsilon(n)},segments:function(n){var s=_(!0,i,e);return n.regions.forEach(s.addRegion),{segments:s.calculate(n.inverted),inverted:n.inverted}},combine:function(n,s){return{combined:_(!1,i,e).calculate(n.segments,n.inverted,s.segments,s.inverted),inverted1:n.inverted,inverted2:s.inverted}},selectUnion:function(n){return{segments:f.union(n.combined,e),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:f.intersect(n.combined,e),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:f.difference(n.combined,e),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:f.differenceRev(n.combined,e),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:f.xor(n.combined,e),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:m(n.segments,i,e),inverted:n.inverted}},polygonFromGeoJSON:function(n){return o.toPolygon(A,n)},polygonToGeoJSON:function(n){return o.fromPolygon(A,i,n)},union:function(n,s){return r(n,s,A.selectUnion)},intersect:function(n,s){return r(n,s,A.selectIntersect)},difference:function(n,s){return r(n,s,A.selectDifference)},differenceRev:function(n,s){return r(n,s,A.selectDifferenceRev)},xor:function(n,s){return r(n,s,A.selectXor)}},typeof window=="object"&&(window.PolyBool=A),$.exports=A},69444:function($){$.exports=function(){var P,t=0,A=!1;function M(l,_){return P.list.push({type:l,data:_?JSON.parse(JSON.stringify(_)):void 0}),P}return P={list:[],segmentId:function(){return t++},checkIntersection:function(l,_){return M("check",{seg1:l,seg2:_})},segmentChop:function(l,_){return M("div_seg",{seg:l,pt:_}),M("chop",{seg:l,pt:_})},statusRemove:function(l){return M("pop_seg",{seg:l})},segmentUpdate:function(l){return M("seg_update",{seg:l})},segmentNew:function(l,_){return M("new_seg",{seg:l,primary:_})},segmentRemove:function(l){return M("rem_seg",{seg:l})},tempStatus:function(l,_,m){return M("temp_status",{seg:l,above:_,below:m})},rewind:function(l){return M("rewind",{seg:l})},status:function(l,_,m){return M("status",{seg:l,above:_,below:m})},vert:function(l){return l===A?P:(A=l,M("vert",{x:l}))},log:function(l){return typeof l!="string"&&(l=JSON.stringify(l,!1,"  ")),M("log",{txt:l})},reset:function(){return M("reset")},selected:function(l){return M("selected",{segs:l})},chainStart:function(l){return M("chain_start",{seg:l})},chainRemoveHead:function(l,_){return M("chain_rem_head",{index:l,pt:_})},chainRemoveTail:function(l,_){return M("chain_rem_tail",{index:l,pt:_})},chainNew:function(l,_){return M("chain_new",{pt1:l,pt2:_})},chainMatch:function(l){return M("chain_match",{index:l})},chainClose:function(l){return M("chain_close",{index:l})},chainAddHead:function(l,_){return M("chain_add_head",{index:l,pt:_})},chainAddTail:function(l,_){return M("chain_add_tail",{index:l,pt:_})},chainConnect:function(l,_){return M("chain_con",{index1:l,index2:_})},chainReverse:function(l){return M("chain_rev",{index:l})},chainJoin:function(l,_){return M("chain_join",{index1:l,index2:_})},done:function(){return M("done")}}}},29023:function($){$.exports=function(P){typeof P!="number"&&(P=1e-10);var t={epsilon:function(A){return typeof A=="number"&&(P=A),P},pointAboveOrOnLine:function(A,M,l){var _=M[0],m=M[1],f=l[0],o=l[1],e=A[0];return(f-_)*(A[1]-m)-(o-m)*(e-_)>=-P},pointBetween:function(A,M,l){var _=A[1]-M[1],m=l[0]-M[0],f=A[0]-M[0],o=l[1]-M[1],e=f*m+_*o;return!(e<P||e-(m*m+o*o)>-P)},pointsSameX:function(A,M){return Math.abs(A[0]-M[0])<P},pointsSameY:function(A,M){return Math.abs(A[1]-M[1])<P},pointsSame:function(A,M){return t.pointsSameX(A,M)&&t.pointsSameY(A,M)},pointsCompare:function(A,M){return t.pointsSameX(A,M)?t.pointsSameY(A,M)?0:A[1]<M[1]?-1:1:A[0]<M[0]?-1:1},pointsCollinear:function(A,M,l){var _=A[0]-M[0],m=A[1]-M[1],f=M[0]-l[0],o=M[1]-l[1];return Math.abs(_*o-f*m)<P},linesIntersect:function(A,M,l,_){var m=M[0]-A[0],f=M[1]-A[1],o=_[0]-l[0],e=_[1]-l[1],i=m*e-f*o;if(Math.abs(i)<P)return!1;var r=A[0]-l[0],n=A[1]-l[1],s=(o*n-e*r)/i,a=(m*n-f*r)/i,u={alongA:0,alongB:0,pt:[A[0]+s*m,A[1]+s*f]};return u.alongA=s<=-P?-2:s<P?-1:s-1<=-P?0:s-1<P?1:2,u.alongB=a<=-P?-2:a<P?-1:a-1<=-P?0:a-1<P?1:2,u},pointInsideRegion:function(A,M){for(var l=A[0],_=A[1],m=M[M.length-1][0],f=M[M.length-1][1],o=!1,e=0;e<M.length;e++){var i=M[e][0],r=M[e][1];r-_>P!=f-_>P&&(m-i)*(_-r)/(f-r)+i-l>P&&(o=!o),m=i,f=r}return o}};return t}},10670:function($){var P={toPolygon:function(t,A){function M(m){if(m.length<=0)return t.segments({inverted:!1,regions:[]});function f(i){var r=i.slice(0,i.length-1);return t.segments({inverted:!1,regions:[r]})}for(var o=f(m[0]),e=1;e<m.length;e++)o=t.selectDifference(t.combine(o,f(m[e])));return o}if(A.type==="Polygon")return t.polygon(M(A.coordinates));if(A.type==="MultiPolygon"){for(var l=t.segments({inverted:!1,regions:[]}),_=0;_<A.coordinates.length;_++)l=t.selectUnion(t.combine(l,M(A.coordinates[_])));return t.polygon(l)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,A,M){function l(a,u){return A.pointInsideRegion([.5*(a[0][0]+a[1][0]),.5*(a[0][1]+a[1][1])],u)}function _(a){return{region:a,children:[]}}M=t.polygon(t.segments(M));var m=_(null);function f(a,u){for(var p=0;p<a.children.length;p++)if(l(u,(x=a.children[p]).region))return void f(x,u);var c=_(u);for(p=0;p<a.children.length;p++){var x;l((x=a.children[p]).region,u)&&(c.children.push(x),a.children.splice(p,1),p--)}a.children.push(c)}for(var o=0;o<M.regions.length;o++){var e=M.regions[o];e.length<3||f(m,e)}function i(a,u){for(var p=0,c=a[a.length-1][0],x=a[a.length-1][1],g=[],h=0;h<a.length;h++){var b=a[h][0],v=a[h][1];g.push([b,v]),p+=v*c-b*x,c=b,x=v}return p<0!==u&&g.reverse(),g.push([g[0][0],g[0][1]]),g}var r=[];function n(a){var u=[i(a.region,!1)];r.push(u);for(var p=0;p<a.children.length;p++)u.push(s(a.children[p]))}function s(a){for(var u=0;u<a.children.length;u++)n(a.children[u]);return i(a.region,!0)}for(o=0;o<m.children.length;o++)n(m.children[o]);return r.length<=0?{type:"Polygon",coordinates:[]}:r.length==1?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}};$.exports=P},87263:function($,P,t){var A=t(26859);$.exports=function(M,l,_){function m(n,s,a){return{id:_?_.segmentId():-1,start:n,end:s,myFill:{above:a.myFill.above,below:a.myFill.below},otherFill:null}}var f=A.create();function o(n,s){f.insertBefore(n,function(a){return u=n.isStart,p=n.pt,c=s,x=a.isStart,g=a.pt,h=a.other.pt,((b=l.pointsCompare(p,g))!==0?b:l.pointsSame(c,h)?0:u!==x?u?1:-1:l.pointAboveOrOnLine(c,x?g:h,x?h:g)?1:-1)<0;var u,p,c,x,g,h,b})}function e(n,s){var a=function(u,p){var c=A.node({isStart:!0,pt:u.start,seg:u,primary:p,other:null,status:null});return o(c,u.end),c}(n,s);return function(u,p,c){var x=A.node({isStart:!1,pt:p.end,seg:p,primary:c,other:u,status:null});u.other=x,o(x,u.pt)}(a,n,s),a}function i(n,s){var a=m(s,n.seg.end,n.seg);return function(u,p){_&&_.segmentChop(u.seg,p),u.other.remove(),u.seg.end=p,u.other.pt=p,o(u.other,u.pt)}(n,s),e(a,n.primary)}function r(n,s){var a=A.create();function u(T){return a.findTransition(function(E){var C,L,O,z,G,I;return C=T,L=E.ev,O=C.seg.start,z=C.seg.end,G=L.seg.start,I=L.seg.end,(l.pointsCollinear(O,G,I)?l.pointsCollinear(z,G,I)||l.pointAboveOrOnLine(z,G,I)?1:-1:l.pointAboveOrOnLine(O,G,I)?1:-1)>0})}function p(T,E){var C=T.seg,L=E.seg,O=C.start,z=C.end,G=L.start,I=L.end;_&&_.checkIntersection(C,L);var H=l.linesIntersect(O,z,G,I);if(H===!1){if(!l.pointsCollinear(O,z,G)||l.pointsSame(O,I)||l.pointsSame(z,G))return!1;var N=l.pointsSame(O,G),F=l.pointsSame(z,I);if(N&&F)return E;var V=!N&&l.pointBetween(O,G,I),W=!F&&l.pointBetween(z,G,I);if(N)return W?i(E,z):i(T,I),E;V&&(F||(W?i(E,z):i(T,I)),i(E,O))}else H.alongA===0&&(H.alongB===-1?i(T,G):H.alongB===0?i(T,H.pt):H.alongB===1&&i(T,I)),H.alongB===0&&(H.alongA===-1?i(E,O):H.alongA===0?i(E,H.pt):H.alongA===1&&i(E,z));return!1}for(var c=[];!f.isEmpty();){var x=f.getHead();if(_&&_.vert(x.pt[0]),x.isStart){let T=function(){if(h){var E=p(x,h);if(E)return E}return!!b&&p(x,b)};_&&_.segmentNew(x.seg,x.primary);var g=u(x),h=g.before?g.before.ev:null,b=g.after?g.after.ev:null;_&&_.tempStatus(x.seg,!!h&&h.seg,!!b&&b.seg);var v,y,w=T();if(w&&(M?(y=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below)&&(w.seg.myFill.above=!w.seg.myFill.above):w.seg.otherFill=x.seg.myFill,_&&_.segmentUpdate(w.seg),x.other.remove(),x.remove()),f.getHead()!==x){_&&_.rewind(x.seg);continue}M?(y=x.seg.myFill.below===null||x.seg.myFill.above!==x.seg.myFill.below,x.seg.myFill.below=b?b.seg.myFill.above:n,x.seg.myFill.above=y?!x.seg.myFill.below:x.seg.myFill.below):x.seg.otherFill===null&&(v=b?x.primary===b.primary?b.seg.otherFill.above:b.seg.myFill.above:x.primary?s:n,x.seg.otherFill={above:v,below:v}),_&&_.status(x.seg,!!h&&h.seg,!!b&&b.seg),x.other.status=g.insert(A.node({ev:x}))}else{var d=x.status;if(d===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(a.exists(d.prev)&&a.exists(d.next)&&p(d.prev.ev,d.next.ev),_&&_.statusRemove(d.ev.seg),d.remove(),!x.primary){var S=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=S}c.push(x.seg)}f.getHead().remove()}return _&&_.done(),c}return M?{addRegion:function(n){for(var s,a,u,p=n[n.length-1],c=0;c<n.length;c++){s=p,p=n[c];var x=l.pointsCompare(s,p);x!==0&&e((a=x<0?s:p,u=x<0?p:s,{id:_?_.segmentId():-1,start:a,end:u,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(n){return r(n,!1)}}:{calculate:function(n,s,a,u){return n.forEach(function(p){e(m(p.start,p.end,p),!0)}),a.forEach(function(p){e(m(p.start,p.end,p),!1)}),r(s,u)}}}},26859:function($){$.exports={create:function(){var P={root:{root:!0,next:null},exists:function(t){return t!==null&&t!==P.root},isEmpty:function(){return P.root.next===null},getHead:function(){return P.root.next},insertBefore:function(t,A){for(var M=P.root,l=P.root.next;l!==null;){if(A(l))return t.prev=l.prev,t.next=l,l.prev.next=t,void(l.prev=t);M=l,l=l.next}M.next=t,t.prev=M,t.next=null},findTransition:function(t){for(var A=P.root,M=P.root.next;M!==null&&!t(M);)A=M,M=M.next;return{before:A===P.root?null:A,after:M,insert:function(l){return l.prev=A,l.next=M,A.next=l,M!==null&&(M.prev=l),l}}}};return P},node:function(P){return P.prev=null,P.next=null,P.remove=function(){P.prev.next=P.next,P.next&&(P.next.prev=P.prev),P.prev=null,P.next=null},P}}},11328:function($){$.exports=function(P,t,A){var M=[],l=[];return P.forEach(function(_){var m=_.start,f=_.end;if(t.pointsSame(m,f))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{A&&A.chainStart(_);for(var o={index:0,matches_head:!1,matches_pt1:!1},e={index:0,matches_head:!1,matches_pt1:!1},i=o,r=0;r<M.length;r++){var n=(c=M[r])[0],s=(c[1],c[c.length-1]);if(c[c.length-2],t.pointsSame(n,m)){if(d(r,!0,!0))break}else if(t.pointsSame(n,f)){if(d(r,!0,!1))break}else if(t.pointsSame(s,m)){if(d(r,!1,!0))break}else if(t.pointsSame(s,f)&&d(r,!1,!1))break}if(i===o)return M.push([m,f]),void(A&&A.chainNew(m,f));if(i===e){A&&A.chainMatch(o.index);var a=o.index,u=o.matches_pt1?f:m,p=o.matches_head,c=M[a],x=p?c[0]:c[c.length-1],g=p?c[1]:c[c.length-2],h=p?c[c.length-1]:c[0],b=p?c[c.length-2]:c[1];return t.pointsCollinear(g,x,u)&&(p?(A&&A.chainRemoveHead(o.index,u),c.shift()):(A&&A.chainRemoveTail(o.index,u),c.pop()),x=g),t.pointsSame(h,u)?(M.splice(a,1),t.pointsCollinear(b,h,x)&&(p?(A&&A.chainRemoveTail(o.index,x),c.pop()):(A&&A.chainRemoveHead(o.index,x),c.shift())),A&&A.chainClose(o.index),void l.push(c)):void(p?(A&&A.chainAddHead(o.index,u),c.unshift(u)):(A&&A.chainAddTail(o.index,u),c.push(u)))}var v=o.index,y=e.index;A&&A.chainConnect(v,y);var w=M[v].length<M[y].length;o.matches_head?e.matches_head?w?(S(v),T(v,y)):(S(y),T(y,v)):T(y,v):e.matches_head?T(v,y):w?(S(v),T(y,v)):(S(y),T(v,y))}function d(E,C,L){return i.index=E,i.matches_head=C,i.matches_pt1=L,i===o?(i=e,!1):(i=null,!0)}function S(E){A&&A.chainReverse(E),M[E].reverse()}function T(E,C){var L=M[E],O=M[C],z=L[L.length-1],G=L[L.length-2],I=O[0],H=O[1];t.pointsCollinear(G,z,I)&&(A&&A.chainRemoveTail(E,z),L.pop(),z=G),t.pointsCollinear(z,I,H)&&(A&&A.chainRemoveHead(C,I),O.shift()),A&&A.chainJoin(E,C),M[E]=L.concat(O),M.splice(C,1)}}),l}},55968:function($){function P(A,M,l){var _=[];return A.forEach(function(m){var f=(m.myFill.above?8:0)+(m.myFill.below?4:0)+(m.otherFill&&m.otherFill.above?2:0)+(m.otherFill&&m.otherFill.below?1:0);M[f]!==0&&_.push({id:l?l.segmentId():-1,start:m.start,end:m.end,myFill:{above:M[f]===1,below:M[f]===2},otherFill:null})}),l&&l.selected(_),_}var t={union:function(A,M){return P(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],M)},intersect:function(A,M){return P(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],M)},difference:function(A,M){return P(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],M)},differenceRev:function(A,M){return P(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],M)},xor:function(A,M){return P(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],M)}};$.exports=t},14847:function($,P,t){var A=t(21630).Transform,M=t(90715);function l(){A.call(this,{readableObjectMode:!0})}function _(m,f,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=m,f&&(this.code=f),o&&(this.statusCode=o)}l.prototype=Object.create(A.prototype),l.prototype.constructor=l,M(l.prototype),P.OF=function(m,f,o){for(var e=f,i=0;i<o.length;)if(m[e++]!==o[i++])return!1;return!0},P.eG=function(m,f){var o=[],e=0;if(f&&f==="hex")for(;e<m.length;)o.push(parseInt(m.slice(e,e+2),16)),e+=2;else for(;e<m.length;e++)o.push(255&m.charCodeAt(e));return o},P.mP=function(m,f){return m[f]|m[f+1]<<8},P.n8=function(m,f){return m[f+1]|m[f]<<8},P.nm=function(m,f){return m[f]|m[f+1]<<8|m[f+2]<<16|16777216*m[f+3]},P.Ag=function(m,f){return m[f+3]|m[f+2]<<8|m[f+1]<<16|16777216*m[f]},_.prototype=Object.create(Error.prototype),_.prototype.constructor=_},71371:function($){function P(M,l){var _=new Error(M);return _.code=l,_}function t(M){try{return decodeURIComponent(escape(M))}catch{return M}}function A(M,l,_){this.input=M.subarray(l,_),this.start=l;var m=String.fromCharCode.apply(null,this.input.subarray(0,4));if(m!=="II*\0"&&m!=="MM\0*")throw P("invalid TIFF signature","EBADDATA");this.big_endian=m[0]==="M"}A.prototype.each=function(M){this.aborted=!1;var l=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:l}];this.ifds_to_read.length>0&&!this.aborted;){var _=this.ifds_to_read.shift();_.offset&&this.scan_ifd(_.id,_.offset,M)}},A.prototype.read_uint16=function(M){var l=this.input;if(M+2>l.length)throw P("unexpected EOF","EBADDATA");return this.big_endian?256*l[M]+l[M+1]:l[M]+256*l[M+1]},A.prototype.read_uint32=function(M){var l=this.input;if(M+4>l.length)throw P("unexpected EOF","EBADDATA");return this.big_endian?16777216*l[M]+65536*l[M+1]+256*l[M+2]+l[M+3]:l[M]+256*l[M+1]+65536*l[M+2]+16777216*l[M+3]},A.prototype.is_subifd_link=function(M,l){return M===0&&l===34665||M===0&&l===34853||M===34665&&l===40965},A.prototype.exif_format_length=function(M){switch(M){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(M,l){var _;switch(M){case 1:case 2:return this.input[l];case 6:return(_=this.input[l])|33554430*(128&_);case 3:return this.read_uint16(l);case 8:return(_=this.read_uint16(l))|131070*(32768&_);case 4:return this.read_uint32(l);case 9:return 0|this.read_uint32(l);default:return null}},A.prototype.scan_ifd=function(M,l,_){var m=this.read_uint16(l);l+=2;for(var f=0;f<m;f++){var o=this.read_uint16(l),e=this.read_uint16(l+2),i=this.read_uint32(l+4),r=this.exif_format_length(e),n=i*r,s=n<=4?l+8:this.read_uint32(l+8),a=!1;if(s+n>this.input.length)throw P("unexpected EOF","EBADDATA");for(var u=[],p=s,c=0;c<i;c++,p+=r){var x=this.exif_format_read(e,p);if(x===null){u=null;break}u.push(x)}if(Array.isArray(u)&&e===2&&(u=t(String.fromCharCode.apply(null,u)))&&u[u.length-1]==="\0"&&(u=u.slice(0,-1)),this.is_subifd_link(M,o)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:o,offset:u[0]}),a=!0),_({is_big_endian:this.big_endian,ifd:M,tag:o,format:e,count:i,entry_offset:l+this.start,data_length:n,data_offset:s+this.start,value:u,is_subifd_link:a})===!1)return void(this.aborted=!0);l+=12}M===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(l)})},$.exports.ExifParser=A,$.exports.get_orientation=function(M){var l=0;try{return new A(M,0,M.length).each(function(_){if(_.ifd===0&&_.tag===274&&Array.isArray(_.value))return l=_.value[0],!1}),l}catch{return-1}}},76767:function($,P,t){var A=t(14847).n8,M=t(14847).Ag;function l(i,r){if(i.length<4+r)return null;var n=M(i,r);return i.length<n+r||n<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(r+4,r+8)),data:i.slice(r+8,r+n),end:r+n}}function _(i,r){for(var n=0;;){var s=l(i,n);if(!s)break;switch(s.boxtype){case"ispe":r.sizes.push({width:M(s.data,4),height:M(s.data,8)});break;case"irot":r.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":r.transforms.push({type:"imir",value:1&s.data[0]})}n=s.end}}function m(i,r,n){for(var s=0,a=0;a<n;a++)s=256*s+(i[r+a]||0);return s}function f(i,r){for(var n=i[4]>>4&15,s=15&i[4],a=i[5]>>4&15,u=A(i,6),p=8,c=0;c<u;c++){var x=A(i,p),g=A(i,p+=2),h=m(i,p+=2,a),b=A(i,p+=a);if(p+=2,g===0&&b===1){var v=m(i,p,n),y=m(i,p+n,s);r.item_loc[x]={length:y,offset:v+h}}p+=b*(n+s)}}function o(i,r){for(var n=A(i,4),s=6,a=0;a<n;a++){var u=l(i,s);if(!u)break;if(u.boxtype==="infe"){for(var p=A(u.data,4),c="",x=8;x<u.data.length&&u.data[x];x++)c+=String.fromCharCode(u.data[x]);r.item_inf[c]=p}s=u.end}}function e(i,r){for(var n=0;;){var s=l(i,n);if(!s)break;s.boxtype==="ipco"&&_(s.data,r),n=s.end}}$.exports.unbox=l,$.exports.readSizeFromMeta=function(i){var r={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(x,g){for(var h=4;;){var b=l(x,h);if(!b)break;b.boxtype==="iprp"&&e(b.data,g),b.boxtype==="iloc"&&f(b.data,g),b.boxtype==="iinf"&&o(b.data,g),h=b.end}}(i,r),r.sizes.length){var n,s,a,u=(s=(n=r.sizes).reduce(function(x,g){return x.width>g.width||x.width===g.width&&x.height>g.height?x:g}),a=n.reduce(function(x,g){return x.height>g.height||x.height===g.height&&x.width>g.width?x:g}),s.width>a.height||s.width===a.height&&s.height>a.width?s:a),p=1;r.transforms.forEach(function(x){var g={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},h={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(x.type==="imir"&&(p=x.value===0?h[p]:g[p=g[p=h[p]]]),x.type==="irot")for(var b=0;b<x.value;b++)p=g[p]});var c=null;return r.item_inf.Exif&&(c=r.item_loc[r.item_inf.Exif]),{width:u.width,height:u.height,orientation:r.transforms.length?p:null,variants:r.sizes,exif_location:c}}},$.exports.getMimeType=function(i){var r=String.fromCharCode.apply(null,i.slice(0,4)),n={};n[r]=!0;for(var s=8;s<i.length;s+=4)n[String.fromCharCode.apply(null,i.slice(s,s+4))]=!0;if(n.mif1||n.msf1||n.miaf)return r==="avif"||r==="avis"||r==="avio"?{type:"avif",mime:"image/avif"}:r==="heic"||r==="heix"?{type:"heic",mime:"image/heic"}:r==="hevc"||r==="hevx"?{type:"heic",mime:"image/heic-sequence"}:n.avif||n.avis?{type:"avif",mime:"image/avif"}:n.heic||n.heix||n.hevc||n.hevx||n.heis?n.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},24461:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).Ag,_=t(76767),m=t(71371),f=A("ftyp");$.exports=function(o){if(M(o,4,f)){var e=_.unbox(o,0);if(e){var i=_.getMimeType(e.data);if(i){for(var r,n=e.end;;){var s=_.unbox(o,n);if(!s)break;if(n=s.end,s.boxtype==="mdat")return;if(s.boxtype==="meta"){r=s.data;break}}if(r){var a=_.readSizeFromMeta(r);if(a){var u={width:a.width,height:a.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(a.variants.length>1&&(u.variants=a.variants),a.orientation&&(u.orientation=a.orientation),a.exif_location&&a.exif_location.offset+a.exif_location.length<=o.length){var p=l(o,a.exif_location.offset),c=o.slice(a.exif_location.offset+p+4,a.exif_location.offset+a.exif_location.length),x=m.get_orientation(c);x>0&&(u.orientation=x)}return u}}}}}}},2504:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).mP,_=A("BM");$.exports=function(m){if(!(m.length<26)&&M(m,0,_))return{width:l(m,18),height:l(m,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},47342:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).mP,_=A("GIF87a"),m=A("GIF89a");$.exports=function(f){if(!(f.length<10)&&(M(f,0,_)||M(f,0,m)))return{width:l(f,6),height:l(f,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},31355:function($,P,t){var A=t(14847).mP;$.exports=function(M){var l=A(M,0),_=A(M,2),m=A(M,4);if(l===0&&_===1&&m){for(var f=[],o={width:0,height:0},e=0;e<m;e++){var i=M[6+16*e]||256,r=M[6+16*e+1]||256,n={width:i,height:r};f.push(n),(i>o.width||r>o.height)&&(o=n)}return{width:o.width,height:o.height,variants:f,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},54261:function($,P,t){var A=t(14847).n8,M=t(14847).eG,l=t(14847).OF,_=t(71371),m=M("Exif\0\0");$.exports=function(f){if(!(f.length<2)&&f[0]===255&&f[1]===216&&f[2]===255)for(var o=2;;){for(;;){if(f.length-o<2)return;if(f[o++]===255)break}for(var e,i,r=f[o++];r===255;)r=f[o++];if(208<=r&&r<=217||r===1)e=0;else{if(!(192<=r&&r<=254)||f.length-o<2)return;e=A(f,o)-2,o+=2}if(r===217||r===218)return;if(r===225&&e>=10&&l(f,o,m)&&(i=_.get_orientation(f.slice(o+6,o+e))),e>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(f.length-o<e)return;var n={width:A(f,o+3),height:A(f,o+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(n.orientation=i),n}o+=e}}},6303:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).Ag,_=A(`PNG\r

`),m=A("IHDR");$.exports=function(f){if(!(f.length<24)&&M(f,0,_)&&M(f,12,m))return{width:l(f,16),height:l(f,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},38689:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).Ag,_=A("8BPS\0");$.exports=function(m){if(!(m.length<22)&&M(m,0,_))return{width:l(m,18),height:l(m,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},6881:function($){function P(o){return typeof o=="number"&&isFinite(o)&&o>0}var t=/<[-_.:a-zA-Z0-9][^>]*>/,A=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,M=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,l=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,_=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,m=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(o){return m.test(o)?o.match(m)[0]:"px"}$.exports=function(o){if(function(h){var b,v=0,y=h.length;for(h[0]===239&&h[1]===187&&h[2]===191&&(v=3);v<y&&((b=h[v])===32||b===9||b===13||b===10);)v++;return v!==y&&h[v]===60}(o)){for(var e="",i=0;i<o.length;i++)e+=String.fromCharCode(o[i]);var r=(e.match(t)||[""])[0];if(A.test(r)){var n=function(h){var b=h.match(M),v=h.match(l),y=h.match(_);return{width:b&&(b[1]||b[2]),height:v&&(v[1]||v[2]),viewbox:y&&(y[1]||y[2])}}(r),s=parseFloat(n.width),a=parseFloat(n.height);if(n.width&&n.height)return!P(s)||!P(a)?void 0:{width:s,height:a,type:"svg",mime:"image/svg+xml",wUnits:f(n.width),hUnits:f(n.height)};var u=(n.viewbox||"").split(" "),p={width:u[2],height:u[3]},c=parseFloat(p.width),x=parseFloat(p.height);if(P(c)&&P(x)&&f(p.width)===f(p.height)){var g=c/x;return n.width?P(s)?{width:s,height:s/g,type:"svg",mime:"image/svg+xml",wUnits:f(n.width),hUnits:f(n.width)}:void 0:n.height?P(a)?{width:a*g,height:a,type:"svg",mime:"image/svg+xml",wUnits:f(n.height),hUnits:f(n.height)}:void 0:{width:c,height:x,type:"svg",mime:"image/svg+xml",wUnits:f(p.width),hUnits:f(p.height)}}}}}},66278:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).mP,_=t(14847).n8,m=t(14847).nm,f=t(14847).Ag,o=A("II*\0"),e=A("MM\0*");function i(s,a,u){return u?_(s,a):l(s,a)}function r(s,a,u){return u?f(s,a):m(s,a)}function n(s,a,u){var p=i(s,a+2,u);return r(s,a+4,u)!==1||p!==3&&p!==4?null:p===3?i(s,a+8,u):r(s,a+8,u)}$.exports=function(s){if(!(s.length<8)&&(M(s,0,o)||M(s,0,e))){var a=s[0]===77,u=r(s,4,a)-8;if(!(u<0)){var p=u+8;if(!(s.length-p<2)){var c=12*i(s,p+0,a);if(!(c<=0||(p+=2,s.length-p<c))){var x,g,h,b;for(x=0;x<c;x+=12)(b=i(s,p+x,a))===256?g=n(s,p+x,a):b===257&&(h=n(s,p+x,a));return g&&h?{width:g,height:h,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},90784:function($,P,t){var A=t(14847).eG,M=t(14847).OF,l=t(14847).mP,_=t(14847).nm,m=t(71371),f=A("RIFF"),o=A("WEBP");function e(n,s){if(n[s+3]===157&&n[s+4]===1&&n[s+5]===42)return{width:16383&l(n,s+6),height:16383&l(n,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(n,s){if(n[s]===47){var a=_(n,s+1);return{width:1+(16383&a),height:1+(a>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function r(n,s){return{width:1+(n[s+6]<<16|n[s+5]<<8|n[s+4]),height:1+(n[s+9]<<s|n[s+8]<<8|n[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}$.exports=function(n){if(!(n.length<16)&&(M(n,0,f)||M(n,8,o))){var s=12,a=null,u=0,p=_(n,4)+8;if(!(p>n.length)){for(;s+8<p;)if(n[s]!==0){var c=String.fromCharCode.apply(null,n.slice(s,s+4)),x=_(n,s+4);c==="VP8 "&&x>=10?a=a||e(n,s+8):c==="VP8L"&&x>=9?a=a||i(n,s+8):c==="VP8X"&&x>=10?a=a||r(n,s+8):c==="EXIF"&&(u=m.get_orientation(n.slice(s+8,s+8+x)),s=1/0),s+=8+x}else s++;if(a)return u>0&&(a.orientation=u),a}}}},91497:function($,P,t){$.exports={avif:t(24461),bmp:t(2504),gif:t(47342),ico:t(31355),jpeg:t(54261),png:t(6303),psd:t(38689),svg:t(6881),tiff:t(66278),webp:t(90784)}},33575:function($,P,t){var A=t(91497);$.exports=function(M){return function(l){for(var _=Object.keys(A),m=0;m<_.length;m++){var f=A[_[m]](l);if(f)return f}return null}(M)},$.exports.parsers=A},90386:function($){var P,t,A=$.exports={};function M(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function _(a){if(P===setTimeout)return setTimeout(a,0);if((P===M||!P)&&setTimeout)return P=setTimeout,setTimeout(a,0);try{return P(a,0)}catch{try{return P.call(null,a,0)}catch{return P.call(this,a,0)}}}(function(){try{P=typeof setTimeout=="function"?setTimeout:M}catch{P=M}try{t=typeof clearTimeout=="function"?clearTimeout:l}catch{t=l}})();var m,f=[],o=!1,e=-1;function i(){o&&m&&(o=!1,m.length?f=m.concat(f):e=-1,f.length&&r())}function r(){if(!o){var a=_(i);o=!0;for(var u=f.length;u;){for(m=f,f=[];++e<u;)m&&m[e].run();e=-1,u=f.length}m=null,o=!1,function(p){if(t===clearTimeout)return clearTimeout(p);if((t===l||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(p);try{return t(p)}catch{try{return t.call(null,p)}catch{return t.call(this,p)}}}(a)}}function n(a,u){this.fun=a,this.array=u}function s(){}A.nextTick=function(a){var u=new Array(arguments.length-1);if(arguments.length>1)for(var p=1;p<arguments.length;p++)u[p-1]=arguments[p];f.push(new n(a,u)),f.length!==1||o||_(r)},n.prototype.run=function(){this.fun.apply(null,this.array)},A.title="browser",A.browser=!0,A.env={},A.argv=[],A.version="",A.versions={},A.on=s,A.addListener=s,A.once=s,A.off=s,A.removeListener=s,A.removeAllListeners=s,A.emit=s,A.prependListener=s,A.prependOnceListener=s,A.listeners=function(a){return[]},A.binding=function(a){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(a){throw new Error("process.chdir is not supported")},A.umask=function(){return 0}},5877:function($,P,t){for(var A=t(9748),M=typeof window>"u"?t.g:window,l=["moz","webkit"],_="AnimationFrame",m=M["request"+_],f=M["cancel"+_]||M["cancelRequest"+_],o=0;!m&&o<l.length;o++)m=M[l[o]+"Request"+_],f=M[l[o]+"Cancel"+_]||M[l[o]+"CancelRequest"+_];if(!m||!f){var e=0,i=0,r=[];m=function(n){if(r.length===0){var s=A(),a=Math.max(0,16.666666666666668-(s-e));e=a+s,setTimeout(function(){var u=r.slice(0);r.length=0;for(var p=0;p<u.length;p++)if(!u[p].cancelled)try{u[p].callback(e)}catch(c){setTimeout(function(){throw c},0)}},Math.round(a))}return r.push({handle:++i,callback:n,cancelled:!1}),i},f=function(n){for(var s=0;s<r.length;s++)r[s].handle===n&&(r[s].cancelled=!0)}}$.exports=function(n){return m.call(M,n)},$.exports.cancel=function(){f.apply(M,arguments)},$.exports.polyfill=function(n){n||(n=M),n.requestAnimationFrame=m,n.cancelAnimationFrame=f}},3593:function($,P,t){var A=t(21527),M=t(25075),l=t(93447),_=t(71299),m=t(56131),f=t(30120),o=t(57060),e=o.float32,i=o.fract32;$.exports=function(n,s){if(typeof n=="function"?(s||(s={}),s.regl=n):s=n,s.length&&(s.positions=s),!(n=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var a,u,p,c,x,g,h=n._gl,b={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},v=[];return c=n.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),u=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=n.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=n.buffer({usage:"static",type:"float",data:r}),S(s),a=n({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:n.prop("range"),lineWidth:n.prop("lineWidth"),capSize:n.prop("capSize"),opacity:n.prop("opacity"),scale:n.prop("scale"),translate:n.prop("translate"),scaleFract:n.prop("scaleFract"),translateFract:n.prop("translateFract"),viewport:function(E,C){return[C.viewport.x,C.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,C){return 4*C.offset},divisor:1},position:{buffer:u,offset:function(E,C){return 8*C.offset},divisor:1},positionFract:{buffer:p,offset:function(E,C){return 8*C.offset},divisor:1},error:{buffer:x,offset:function(E,C){return 16*C.offset},divisor:1},direction:{buffer:g,stride:24,offset:0},lineOffset:{buffer:g,stride:24,offset:8},capOffset:{buffer:g,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:n.prop("viewport")},viewport:n.prop("viewport"),stencil:!1,instances:n.prop("count"),count:r.length}),m(y,{update:S,draw:w,destroy:T,regl:n,gl:h,canvas:h.canvas,groups:v}),y;function y(E){E?S(E):E===null&&T(),w()}function w(E){if(typeof E=="number")return d(E);E&&!Array.isArray(E)&&(E=[E]),n._refresh(),v.forEach(function(C,L){C&&(E&&(E[L]?C.draw=!0:C.draw=!1),C.draw?d(L):C.draw=!0)})}function d(E){typeof E=="number"&&(E=v[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],a(E),E.after&&E.after(E))}function S(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var C=0,L=0;if(y.groups=v=E.map(function(F,V){var W=v[V];return F&&(typeof F=="function"?F={after:F}:typeof F[0]=="number"&&(F={positions:F}),F=_(F,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),W||(v[V]=W={id:V,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},F=m({},b,F)),l(W,F,[{lineWidth:function(te){return .5*+te},capSize:function(te){return .5*+te},opacity:parseFloat,errors:function(te){return te=f(te),L+=te.length,te},positions:function(te,Q){return te=f(te,"float64"),Q.count=Math.floor(te.length/2),Q.bounds=A(te,2),Q.offset=C,C+=Q.count,te}},{color:function(te,Q){var X=Q.count;if(te||(te="transparent"),!Array.isArray(te)||typeof te[0]=="number"){var q=te;te=Array(X);for(var Z=0;Z<X;Z++)te[Z]=q}if(te.length<X)throw Error("Not enough colors");for(var J=new Uint8Array(4*X),ne=0;ne<X;ne++){var re=M(te[ne],"uint8");J.set(re,4*ne)}return J},range:function(te,Q,X){var q=Q.bounds;return te||(te=q),Q.scale=[1/(te[2]-te[0]),1/(te[3]-te[1])],Q.translate=[-te[0],-te[1]],Q.scaleFract=i(Q.scale),Q.translateFract=i(Q.translate),te},viewport:function(te){var Q;return Array.isArray(te)?Q={x:te[0],y:te[1],width:te[2]-te[0],height:te[3]-te[1]}:te?(Q={x:te.x||te.left||0,y:te.y||te.top||0},te.right?Q.width=te.right-Q.x:Q.width=te.w||te.width||0,te.bottom?Q.height=te.bottom-Q.y:Q.height=te.h||te.height||0):Q={x:0,y:0,width:h.drawingBufferWidth,height:h.drawingBufferHeight},Q}}])),W}),C||L){var O=v.reduce(function(F,V,W){return F+(V?V.count:0)},0),z=new Float64Array(2*O),G=new Uint8Array(4*O),I=new Float32Array(4*O);v.forEach(function(F,V){if(F){var W=F.positions,te=F.count,Q=F.offset,X=F.color,q=F.errors;te&&(G.set(X,4*Q),I.set(q,4*Q),z.set(W,2*Q))}});var H=e(z);u(H);var N=i(z,H);p(N),c(G),x(I)}}}function T(){u.destroy(),p.destroy(),c.destroy(),x.destroy(),g.destroy()}};var r=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},46075:function($,P,t){var A=t(25075),M=t(21527),l=t(56131),_=t(56068),m=t(71299),f=t(30120),o=t(11474),e=t(54),i=t(57060),r=i.float32,n=i.fract32,s=t(83522),a=t(18863),u=t(6851);function p(c,x){if(!(this instanceof p))return new p(c,x);if(typeof c=="function"?(x||(x={}),x.regl=c):x=c,x.length&&(x.positions=x),!(c=x.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=p.shaders.has(c)?p.shaders.get(c):p.shaders.set(c,p.createShaders(c)).get(c),this.update(x)}$.exports=p,p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new s,p.createShaders=function(c){var x,g=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),h={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(v,y){return y.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(v,y){return[y.viewport.x,y.viewport.y,v.viewportWidth,v.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(v,y){return!y.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},b=c(l({vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},h));try{x=c(l({cull:{enable:!0,face:"back"},vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},h))}catch{x=b}return{fill:c({primitive:"triangle",elements:function(v,y){return y.triangles},offset:0,vert:_([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:_([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(v,y){return[y.viewport.x,y.viewport.y,v.viewportWidth,v.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:h.blend,depth:{enable:!1},scissor:h.scissor,stencil:h.stencil,viewport:h.viewport}),rect:b,miter:x}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var c,x=[],g=arguments.length;g--;)x[g]=arguments[g];x.length&&(c=this).update.apply(c,x),this.draw()},p.prototype.draw=function(){for(var c=this,x=[],g=arguments.length;g--;)x[g]=arguments[g];return(x.length?x:this.passes).forEach(function(h,b){var v;if(h&&Array.isArray(h))return(v=c).draw.apply(v,h);typeof h=="number"&&(h=c.passes[h]),h&&h.count>1&&h.opacity&&(c.regl._refresh(),h.fill&&h.triangles&&h.triangles.length>2&&c.shaders.fill(h),h.thickness&&(h.scale[0]*h.viewport.width>p.precisionThreshold||h.scale[1]*h.viewport.height>p.precisionThreshold||h.join==="rect"||!h.join&&(h.thickness<=2||h.count>=p.maxPoints)?c.shaders.rect(h):c.shaders.miter(h)))}),this},p.prototype.update=function(c){var x=this;if(c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var g=this.regl,h=this.gl;if(c.forEach(function(d,S){var T=x.passes[S];if(d!==void 0)if(d!==null){if(typeof d[0]=="number"&&(d={positions:d}),d=m(d,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),T||(x.passes[S]=T={id:S,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:g.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:g.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},d=l({},p.defaults,d)),d.thickness!=null&&(T.thickness=parseFloat(d.thickness)),d.opacity!=null&&(T.opacity=parseFloat(d.opacity)),d.miterLimit!=null&&(T.miterLimit=parseFloat(d.miterLimit)),d.overlay!=null&&(T.overlay=!!d.overlay,S<p.maxLines&&(T.depth=2*(p.maxLines-1-S%p.maxLines)/p.maxLines-1)),d.join!=null&&(T.join=d.join),d.hole!=null&&(T.hole=d.hole),d.fill!=null&&(T.fill=d.fill?A(d.fill,"uint8"):null),d.viewport!=null&&(T.viewport=a(d.viewport)),T.viewport||(T.viewport=a([h.drawingBufferWidth,h.drawingBufferHeight])),d.close!=null&&(T.close=d.close),d.positions===null&&(d.positions=[]),d.positions){var E,C;if(d.positions.x&&d.positions.y){var L=d.positions.x,O=d.positions.y;C=T.count=Math.max(L.length,O.length),E=new Float64Array(2*C);for(var z=0;z<C;z++)E[2*z]=L[z],E[2*z+1]=O[z]}else E=f(d.positions,"float64"),C=T.count=Math.floor(E.length/2);var G=T.bounds=M(E,2);if(T.fill){for(var I=[],H={},N=0,F=0,V=0,W=T.count;F<W;F++){var te=E[2*F],Q=E[2*F+1];isNaN(te)||isNaN(Q)||te==null||Q==null?(te=E[2*N],Q=E[2*N+1],H[F]=N):N=F,I[V++]=te,I[V++]=Q}if(d.splitNull){T.count-1 in H||(H[T.count]=T.count-1);var X=Object.keys(H).map(Number).sort(function(xt,at){return xt-at}),q=[],Z=0,J=T.hole!=null?T.hole[0]:null;if(J!=null){var ne=u(X,function(xt){return xt>=J});(X=X.slice(0,ne)).push(J)}for(var re=function(xt){var at=I.slice(2*Z,2*X[xt]).concat(J?I.slice(2*J):[]),ot=(T.hole||[]).map(function(Ct){return Ct-J+(X[xt]-Z)}),At=o(at,ot);At=At.map(function(Ct){return Ct+Z+(Ct+Z<X[xt]?0:J-X[xt])}),q.push.apply(q,At),Z=X[xt]+1},ae=0;ae<X.length;ae++)re(ae);for(var ue=0,he=q.length;ue<he;ue++)H[q[ue]]!=null&&(q[ue]=H[q[ue]]);T.triangles=q}else{for(var de=o(I,T.hole||[]),xe=0,me=de.length;xe<me;xe++)H[de[xe]]!=null&&(de[xe]=H[de[xe]]);T.triangles=de}}var ve=new Float64Array(E);e(ve,2,G);var Le=new Float64Array(2*C+6);T.close?E[0]===E[2*C-2]&&E[1]===E[2*C-1]?(Le[0]=ve[2*C-4],Le[1]=ve[2*C-3]):(Le[0]=ve[2*C-2],Le[1]=ve[2*C-1]):(Le[0]=ve[0],Le[1]=ve[1]),Le.set(ve,2),T.close?E[0]===E[2*C-2]&&E[1]===E[2*C-1]?(Le[2*C+2]=ve[2],Le[2*C+3]=ve[3],T.count-=1):(Le[2*C+2]=ve[0],Le[2*C+3]=ve[1],Le[2*C+4]=ve[2],Le[2*C+5]=ve[3]):(Le[2*C+2]=ve[2*C-2],Le[2*C+3]=ve[2*C-1],Le[2*C+4]=ve[2*C-2],Le[2*C+5]=ve[2*C-1]);var Ae=r(Le);T.positionBuffer(Ae);var we=n(Le,Ae);T.positionFractBuffer(we)}if(d.range?T.range=d.range:T.range||(T.range=T.bounds),(d.range||d.positions)&&T.count){var se=T.bounds,oe=se[2]-se[0],fe=se[3]-se[1],Se=T.range[2]-T.range[0],Me=T.range[3]-T.range[1];T.scale=[oe/Se,fe/Me],T.translate=[-T.range[0]/Se+se[0]/Se||0,-T.range[1]/Me+se[1]/Me||0],T.scaleFract=n(T.scale),T.translateFract=n(T.translate)}if(d.dashes){var be,Ie=0;if(!d.dashes||d.dashes.length<2)Ie=1,be=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ie=0;for(var Be=0;Be<d.dashes.length;++Be)Ie+=d.dashes[Be];be=new Uint8Array(Ie*p.dashMult);for(var ce=0,Te=255,ye=0;ye<2;ye++)for(var Pe=0;Pe<d.dashes.length;++Pe){for(var Re=0,ze=d.dashes[Pe]*p.dashMult*.5;Re<ze;++Re)be[ce++]=Te;Te^=255}}T.dashLength=Ie,T.dashTexture({channels:1,data:be,width:be.length,height:1,mag:"linear",min:"linear"},0,0)}if(d.color){var He=T.count,We=d.color;We||(We="transparent");var Je=new Uint8Array(4*He+4);if(Array.isArray(We)&&typeof We[0]!="number"){for(var lt=0;lt<He;lt++){var et=A(We[lt],"uint8");Je.set(et,4*lt)}Je.set(A(We[0],"uint8"),4*He)}else for(var yt=A(We,"uint8"),_t=0;_t<He+1;_t++)Je.set(yt,4*_t);T.colorBuffer({usage:"dynamic",type:"uint8",data:Je})}}else x.passes[S]=null}),c.length<this.passes.length){for(var b=c.length;b<this.passes.length;b++){var v=this.passes[b];v&&(v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy())}this.passes.length=c.length}for(var y=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&y.push(this.passes[w]);return this.passes=y,this}},p.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},11870:function($,P,t){function A(h,b){return function(v){if(Array.isArray(v))return v}(h)||function(v,y){var w=v==null?null:typeof Symbol<"u"&&v[Symbol.iterator]||v["@@iterator"];if(w!=null){var d,S,T,E,C=[],L=!0,O=!1;try{if(T=(w=w.call(v)).next,y===0){if(Object(w)!==w)return;L=!1}else for(;!(L=(d=T.call(w)).done)&&(C.push(d.value),C.length!==y);L=!0);}catch(z){O=!0,S=z}finally{try{if(!L&&w.return!=null&&(E=w.return(),Object(E)!==E))return}finally{if(O)throw S}}return C}}(h,b)||M(h,b)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function M(h,b){if(h){if(typeof h=="string")return l(h,b);var v=Object.prototype.toString.call(h).slice(8,-1);return v==="Object"&&h.constructor&&(v=h.constructor.name),v==="Map"||v==="Set"?Array.from(h):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?l(h,b):void 0}}function l(h,b){(b==null||b>h.length)&&(b=h.length);for(var v=0,y=new Array(b);v<b;v++)y[v]=h[v];return y}var _=t(25075),m=t(21527),f=t(6475),o=t(88294),e=t(56131),i=t(56068),r=t(71299),n=t(93447),s=t(30120),a=t(62683),u=t(57060),p=t(18863),c=x;function x(h,b){var v=this;if(!(this instanceof x))return new x(h,b);typeof h=="function"?(b||(b={}),b.regl=h):(b=h,h=null),b&&b.length&&(b.positions=b);var y,w=(h=b.regl)._gl,d=[];this.tooManyColors=a,y=h.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),e(this,{regl:h,gl:w,groups:[],markerCache:[null],markerTextures:[null],palette:d,paletteIds:{},paletteTexture:y,maxColors:255,maxSize:100,canvas:w.canvas}),this.update(b);var S={uniforms:{constPointSize:!!b.constPointSize,opacity:h.prop("opacity"),paletteSize:function(C,L){return[v.tooManyColors?0:255,y.height]},pixelRatio:h.context("pixelRatio"),scale:h.prop("scale"),scaleFract:h.prop("scaleFract"),translate:h.prop("translate"),translateFract:h.prop("translateFract"),markerTexture:h.prop("markerTexture"),paletteTexture:y},attributes:{x:function(C,L){return L.xAttr||{buffer:L.positionBuffer,stride:8,offset:0}},y:function(C,L){return L.yAttr||{buffer:L.positionBuffer,stride:8,offset:4}},xFract:function(C,L){return L.xAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:0}},yFract:function(C,L){return L.yAttr?{constant:[0,0]}:{buffer:L.positionFractBuffer,stride:8,offset:4}},size:function(C,L){return L.size.length?{buffer:L.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*L.size/v.maxSize)]}},borderSize:function(C,L){return L.borderSize.length?{buffer:L.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*L.borderSize/v.maxSize)]}},colorId:function(C,L){return L.color.length?{buffer:L.colorBuffer,stride:v.tooManyColors?8:4,offset:0}:{constant:v.tooManyColors?d.slice(4*L.color,4*L.color+4):[L.color]}},borderColorId:function(C,L){return L.borderColor.length?{buffer:L.colorBuffer,stride:v.tooManyColors?8:4,offset:v.tooManyColors?4:2}:{constant:v.tooManyColors?d.slice(4*L.borderColor,4*L.borderColor+4):[L.borderColor]}},isActive:function(C,L){return L.activation===!0?{constant:[1]}:L.activation?L.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:h.prop("elements"),count:h.prop("count"),offset:h.prop("offset"),primitive:"points"},T=e({},S);T.frag=i([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),T.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=h(T);var E=e({},S);E.frag=i([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),E.vert=i([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),a&&(E.frag=E.frag.replace("smoothstep","smoothStep"),T.frag=T.frag.replace("smoothstep","smoothStep")),this.drawCircle=h(E)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var h=this,b=arguments.length,v=new Array(b),y=0;y<b;y++)v[y]=arguments[y];var w=this.groups;if(v.length===1&&Array.isArray(v[0])&&(v[0][0]===null||Array.isArray(v[0][0]))&&(v=v[0]),this.regl._refresh(),v.length)for(var d=0;d<v.length;d++)this.drawItem(d,v[d]);else w.forEach(function(S,T){h.drawItem(T)});return this},x.prototype.drawItem=function(h,b){var v,y=this.groups,w=y[h];if(typeof b=="number"&&(h=b,w=y[b],b=null),w&&w.count&&w.opacity){w.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,w,b));for(var d=[],S=1;S<w.activation.length;S++)w.activation[S]&&(w.activation[S]===!0||w.activation[S].data.length)&&d.push.apply(d,function(T){if(Array.isArray(T))return l(T)}(v=this.getMarkerDrawOptions(S,w,b))||function(T){if(typeof Symbol<"u"&&T[Symbol.iterator]!=null||T["@@iterator"]!=null)return Array.from(T)}(v)||M(v)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}());d.length&&this.drawMarker(d)}},x.prototype.getMarkerDrawOptions=function(h,b,v){var y=b.range,w=b.tree,d=b.viewport,S=b.activation,T=b.selectionBuffer,E=b.count;if(this.regl,!w)return v?[e({},b,{markerTexture:this.markerTextures[h],activation:S[h],count:v.length,elements:v,offset:0})]:[e({},b,{markerTexture:this.markerTextures[h],activation:S[h],offset:0})];var C=[],L=w.range(y,{lod:!0,px:[(y[2]-y[0])/d.width,(y[3]-y[1])/d.height]});if(v){for(var O=S[h].data,z=new Uint8Array(E),G=0;G<v.length;G++){var I=v[G];z[I]=O?O[I]:1}T.subdata(z)}for(var H=L.length;H--;){var N=A(L[H],2),F=N[0],V=N[1];C.push(e({},b,{markerTexture:this.markerTextures[h],activation:v?T:S[h],offset:F,count:V-F}))}return C},x.prototype.update=function(){for(var h=this,b=arguments.length,v=new Array(b),y=0;y<b;y++)v[y]=arguments[y];if(v.length){v.length===1&&Array.isArray(v[0])&&(v=v[0]);var w=this.groups,d=this.gl,S=this.regl,T=this.maxSize,E=this.maxColors,C=this.palette;this.groups=w=v.map(function(L,O){var z=w[O];if(L===void 0)return z;L===null?L={positions:null}:typeof L=="function"?L={ondraw:L}:typeof L[0]=="number"&&(L={positions:L}),(L=r(L,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions===null&&(L.positions=[]),L.tooManyColors!=null&&(h.tooManyColors=L.tooManyColors),z||(w[O]=z={id:O,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:S.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:S.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},L=e({},x.defaults,L)),L.positions&&!("marker"in L)&&(L.marker=z.marker,delete z.marker),L.marker&&!("positions"in L)&&(L.positions=z.positions,delete z.positions);var G=0,I=0;if(n(z,L,[{snap:!0,size:function(xe,me){return xe==null&&(xe=x.defaults.size),G+=xe&&xe.length?1:0,xe},borderSize:function(xe,me){return xe==null&&(xe=x.defaults.borderSize),G+=xe&&xe.length?1:0,xe},opacity:parseFloat,color:function(xe,me){return xe==null&&(xe=x.defaults.color),xe=h.updateColor(xe),I++,xe},borderColor:function(xe,me){return xe==null&&(xe=x.defaults.borderColor),xe=h.updateColor(xe),I++,xe},bounds:function(xe,me,ve){return"range"in ve||(ve.range=null),xe},positions:function(xe,me,ve){var Le=me.snap,Ae=me.positionBuffer,we=me.positionFractBuffer,se=me.selectionBuffer;if(xe.x||xe.y)return xe.x.length?me.xAttr={buffer:S.buffer(xe.x),offset:0,stride:4,count:xe.x.length}:me.xAttr={buffer:xe.x.buffer,offset:4*xe.x.offset||0,stride:4*(xe.x.stride||1),count:xe.x.count},xe.y.length?me.yAttr={buffer:S.buffer(xe.y),offset:0,stride:4,count:xe.y.length}:me.yAttr={buffer:xe.y.buffer,offset:4*xe.y.offset||0,stride:4*(xe.y.stride||1),count:xe.y.count},me.count=Math.max(me.xAttr.count,me.yAttr.count),xe;xe=s(xe,"float64");var oe=me.count=Math.floor(xe.length/2),fe=me.bounds=oe?m(xe,2):null;if(ve.range||me.range||(delete me.range,ve.range=fe),ve.marker||me.marker||(delete me.marker,ve.marker=null),Le&&(Le===!0||oe>Le)?me.tree=o(xe,{bounds:fe}):Le&&Le.length&&(me.tree=Le),me.tree){var Se={primitive:"points",usage:"static",data:me.tree,type:"uint32"};me.elements?me.elements(Se):me.elements=S.elements(Se)}var Me=u.float32(xe);return Ae({data:Me,usage:"dynamic"}),we({data:u.fract32(xe,Me),usage:"dynamic"}),se({data:new Uint8Array(oe),type:"uint8",usage:"stream"}),xe}},{marker:function(xe,me,ve){var Le=me.activation;if(Le.forEach(function(Me){return Me&&Me.destroy&&Me.destroy()}),Le.length=0,xe&&typeof xe[0]!="number"){for(var Ae=[],we=0,se=Math.min(xe.length,me.count);we<se;we++){var oe=h.addMarker(xe[we]);Ae[oe]||(Ae[oe]=new Uint8Array(me.count)),Ae[oe][we]=1}for(var fe=0;fe<Ae.length;fe++)if(Ae[fe]){var Se={data:Ae[fe],type:"uint8",usage:"static"};Le[fe]?Le[fe](Se):Le[fe]=S.buffer(Se),Le[fe].data=Ae[fe]}}else Le[h.addMarker(xe)]=!0;return xe},range:function(xe,me,ve){var Le=me.bounds;if(Le)return xe||(xe=Le),me.scale=[1/(xe[2]-xe[0]),1/(xe[3]-xe[1])],me.translate=[-xe[0],-xe[1]],me.scaleFract=u.fract(me.scale),me.translateFract=u.fract(me.translate),xe},viewport:function(xe){return p(xe||[d.drawingBufferWidth,d.drawingBufferHeight])}}]),G){var H=z,N=H.count,F=H.size,V=H.borderSize,W=H.sizeBuffer,te=new Uint8Array(2*N);if(F.length||V.length)for(var Q=0;Q<N;Q++)te[2*Q]=Math.round(255*(F[Q]==null?F:F[Q])/T),te[2*Q+1]=Math.round(255*(V[Q]==null?V:V[Q])/T);W({data:te,usage:"dynamic"})}if(I){var X,q=z,Z=q.count,J=q.color,ne=q.borderColor,re=q.colorBuffer;if(h.tooManyColors){if(J.length||ne.length){X=new Uint8Array(8*Z);for(var ae=0;ae<Z;ae++){var ue=J[ae];X[8*ae]=C[4*ue],X[8*ae+1]=C[4*ue+1],X[8*ae+2]=C[4*ue+2],X[8*ae+3]=C[4*ue+3];var he=ne[ae];X[8*ae+4]=C[4*he],X[8*ae+5]=C[4*he+1],X[8*ae+6]=C[4*he+2],X[8*ae+7]=C[4*he+3]}}}else if(J.length||ne.length){X=new Uint8Array(4*Z+2);for(var de=0;de<Z;de++)J[de]!=null&&(X[4*de]=J[de]%E,X[4*de+1]=Math.floor(J[de]/E)),ne[de]!=null&&(X[4*de+2]=ne[de]%E,X[4*de+3]=Math.floor(ne[de]/E))}re({data:X||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return z})}},x.prototype.addMarker=function(h){var b,v=this.markerTextures,y=this.regl,w=this.markerCache,d=h==null?0:w.indexOf(h);if(d>=0)return d;if(h instanceof Uint8Array||h instanceof Uint8ClampedArray)b=h;else{b=new Uint8Array(h.length);for(var S=0,T=h.length;S<T;S++)b[S]=255*h[S]}var E=Math.floor(Math.sqrt(b.length));return d=v.length,w.push(h),v.push(y.texture({channels:1,data:b,radius:E,mag:"linear",min:"linear"})),d},x.prototype.updateColor=function(h){var b=this.paletteIds,v=this.palette,y=this.maxColors;Array.isArray(h)||(h=[h]);var w=[];if(typeof h[0]=="number"){var d=[];if(Array.isArray(h))for(var S=0;S<h.length;S+=4)d.push(h.slice(S,S+4));else for(var T=0;T<h.length;T+=4)d.push(h.subarray(T,T+4));h=d}for(var E=0;E<h.length;E++){var C=h[E];C=_(C,"uint8");var L=f(C,!1);if(b[L]==null){var O=v.length;b[L]=Math.floor(O/4),v[O]=C[0],v[O+1]=C[1],v[O+2]=C[2],v[O+3]=C[3]}w[E]=b[L]}return!this.tooManyColors&&v.length>4*y&&(this.tooManyColors=!0),this.updatePalette(v),w.length===1?w[0]:w},x.prototype.updatePalette=function(h){if(!this.tooManyColors){var b=this.maxColors,v=this.paletteTexture,y=Math.ceil(.25*h.length/b);if(y>1)for(var w=.25*(h=h.slice()).length%b;w<y*b;w++)h.push(0,0,0,0);v.height<y&&v.resize(b,y),v.subimage({width:Math.min(.25*h.length,b),height:y,data:h},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(h){h.sizeBuffer.destroy(),h.positionBuffer.destroy(),h.positionFractBuffer.destroy(),h.colorBuffer.destroy(),h.activation.forEach(function(b){return b&&b.destroy&&b.destroy()}),h.selectionBuffer.destroy(),h.elements&&h.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(h){return h&&h.destroy&&h.destroy()}),this};var g=t(56131);$.exports=function(h,b){var v=new c(h,b),y=v.render.bind(v);return g(y,{render:y,update:v.update.bind(v),draw:v.draw.bind(v),destroy:v.destroy.bind(v),regl:v.regl,gl:v.gl,canvas:v.gl.canvas,groups:v.groups,markers:v.markerCache,palette:v.palette}),y}},60487:function($,P,t){var A=t(11870),M=t(71299),l=t(21527),_=t(5877),m=t(57471),f=t(18863),o=t(30120);function e(s,a){if(!(this instanceof e))return new e(s);this.traces=[],this.passes={},this.regl=s,this.scatter=A(s),this.canvas=this.scatter.canvas}function i(s,a,u){return(s.id!=null?s.id:s)<<16|(255&a)<<8|255&u}function r(s,a,u){var p,c,x,g,h=s[a],b=s[u];return h.length>2?(h[0],h[2],p=h[1],c=h[3]):h.length?(p=h[0],c=h[1]):(h.x,p=h.y,h.x,h.width,c=h.y+h.height),b.length>2?(x=b[0],g=b[2],b[1],b[3]):b.length?(x=b[0],g=b[1]):(x=b.x,b.y,g=b.x+b.width,b.y,b.height),[x,p,g,c]}function n(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var a=f(s);return[a.x,a.y,a.x+a.width,a.y+a.height]}$.exports=e,e.prototype.render=function(){for(var s,a=this,u=[],p=arguments.length;p--;)u[p]=arguments[p];return u.length&&(s=this).update.apply(s,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=_(function(){a.draw(),a.dirty=!0,a.planned=null})):(this.draw(),this.dirty=!0,_(function(){a.dirty=!1})),this)},e.prototype.update=function(){for(var s,a=[],u=arguments.length;u--;)a[u]=arguments[u];if(a.length){for(var p=0;p<a.length;p++)this.updateItem(p,a[p]);this.traces=this.traces.filter(Boolean);for(var c=[],x=0,g=0;g<this.traces.length;g++){for(var h=this.traces[g],b=this.traces[g].passes,v=0;v<b.length;v++)c.push(this.passes[b[v]]);h.passOffset=x,x+=h.passes.length}return(s=this.scatter).update.apply(s,c),this}},e.prototype.updateItem=function(s,a){var u=this.regl;if(a===null)return this.traces[s]=null,this;if(!a)return this;var p,c=M(a,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),x=this.traces[s]||(this.traces[s]={id:s,buffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:f([u._gl.drawingBufferWidth,u._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(x.color=c.color),c.size!=null&&(x.size=c.size),c.marker!=null&&(x.marker=c.marker),c.borderColor!=null&&(x.borderColor=c.borderColor),c.borderSize!=null&&(x.borderSize=c.borderSize),c.opacity!=null&&(x.opacity=c.opacity),c.viewport&&(x.viewport=f(c.viewport)),c.diagonal!=null&&(x.diagonal=c.diagonal),c.upper!=null&&(x.upper=c.upper),c.lower!=null&&(x.lower=c.lower),c.data){x.buffer(o(c.data)),x.columns=c.data.length,x.count=c.data[0].length,x.bounds=[];for(var g=0;g<x.columns;g++)x.bounds[g]=l(c.data[g],1)}c.range&&(x.range=c.range,p=x.range&&typeof x.range[0]!="number"),c.domain&&(x.domain=c.domain);var h=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===x.columns&&typeof c.padding[c.padding.length-1]=="number"?(x.padding=c.padding.map(n),h=!0):x.padding=n(c.padding));var b=x.columns,v=x.count,y=x.viewport.width,w=x.viewport.height,d=x.viewport.x,S=x.viewport.y,T=y/b,E=w/b;x.passes=[];for(var C=0;C<b;C++)for(var L=0;L<b;L++)if((x.diagonal||L!==C)&&(x.upper||!(C>L))&&(x.lower||!(C<L))){var O=i(x.id,C,L),z=this.passes[O]||(this.passes[O]={});if(c.data&&(c.transpose?z.positions={x:{buffer:x.buffer,offset:L,count:v,stride:b},y:{buffer:x.buffer,offset:C,count:v,stride:b}}:z.positions={x:{buffer:x.buffer,offset:L*v,count:v},y:{buffer:x.buffer,offset:C*v,count:v}},z.bounds=r(x.bounds,C,L)),c.domain||c.viewport||c.data){var G=h?r(x.padding,C,L):x.padding;if(x.domain){var I=r(x.domain,C,L),H=I[0],N=I[1],F=I[2],V=I[3];z.viewport=[d+H*y+G[0],S+N*w+G[1],d+F*y-G[2],S+V*w-G[3]]}else z.viewport=[d+L*T+T*G[0],S+C*E+E*G[1],d+(L+1)*T-T*G[2],S+(C+1)*E-E*G[3]]}c.color&&(z.color=x.color),c.size&&(z.size=x.size),c.marker&&(z.marker=x.marker),c.borderSize&&(z.borderSize=x.borderSize),c.borderColor&&(z.borderColor=x.borderColor),c.opacity&&(z.opacity=x.opacity),c.range&&(z.range=p?r(x.range,C,L):x.range||z.bounds),x.passes.push(O)}return this},e.prototype.draw=function(){for(var s,a=[],u=arguments.length;u--;)a[u]=arguments[u];if(a.length){for(var p=[],c=0;c<a.length;c++)if(typeof a[c]=="number"){var x=this.traces[a[c]],g=x.passes,h=x.passOffset;p.push.apply(p,m(h,h+g.length))}else if(a[c].length){var b=a[c],v=this.traces[c],y=v.passes,w=v.passOffset;y=y.map(function(d,S){p[w+S]=b})}(s=this.scatter).draw.apply(s,p)}else this.scatter.draw();return this},e.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},98580:function($){$.exports=function(){function P(Ve,Ze){this.id=ne++,this.type=Ve,this.data=Ze}function t(Ve){if(Ve.length===0)return[];var Ze=Ve.charAt(0),st=Ve.charAt(Ve.length-1);if(1<Ve.length&&Ze===st&&(Ze==='"'||Ze==="'"))return['"'+Ve.substr(1,Ve.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ze=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ve))return t(Ve.substr(0,Ze.index)).concat(t(Ze[1])).concat(t(Ve.substr(Ze.index+Ze[0].length)));if((Ze=Ve.split(".")).length===1)return['"'+Ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ve=[],st=0;st<Ze.length;++st)Ve=Ve.concat(t(Ze[st]));return Ve}function A(Ve){return"["+t(Ve).join("][")+"]"}function M(Ve){return typeof Ve=="string"?Ve.split():Ve}function l(Ve){return typeof Ve=="string"?document.querySelector(Ve):Ve}function _(Ve){var Ze,st,nt,De,Fe=Ve||{};Ve={};var rt=[],tt=[],gt=typeof window>"u"?1:window.devicePixelRatio,dt=!1,mt={},ft=function(ht){},kt=function(){};if(typeof Fe=="string"?Ze=document.querySelector(Fe):typeof Fe=="object"&&(typeof Fe.nodeName=="string"&&typeof Fe.appendChild=="function"&&typeof Fe.getBoundingClientRect=="function"?Ze=Fe:typeof Fe.drawArrays=="function"||typeof Fe.drawElements=="function"?nt=(De=Fe).canvas:("gl"in Fe?De=Fe.gl:"canvas"in Fe?nt=l(Fe.canvas):"container"in Fe&&(st=l(Fe.container)),"attributes"in Fe&&(Ve=Fe.attributes),"extensions"in Fe&&(rt=M(Fe.extensions)),"optionalExtensions"in Fe&&(tt=M(Fe.optionalExtensions)),"onDone"in Fe&&(ft=Fe.onDone),"profile"in Fe&&(dt=!!Fe.profile),"pixelRatio"in Fe&&(gt=+Fe.pixelRatio),"cachedCode"in Fe&&(mt=Fe.cachedCode))),Ze&&(Ze.nodeName.toLowerCase()==="canvas"?nt=Ze:st=Ze),!De){if(!nt){if(!(Ze=function(ht,pt,wt){function Ft(){var an=window.innerWidth,Wt=window.innerHeight;ht!==document.body&&(an=(Wt=Gt.getBoundingClientRect()).right-Wt.left,Wt=Wt.bottom-Wt.top),Gt.width=wt*an,Gt.height=wt*Wt}var Nt,Gt=document.createElement("canvas");return J(Gt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ht.appendChild(Gt),ht===document.body&&(Gt.style.position="absolute",J(ht.style,{margin:0,padding:0})),ht!==document.body&&typeof ResizeObserver=="function"?(Nt=new ResizeObserver(function(){setTimeout(Ft)})).observe(ht):window.addEventListener("resize",Ft,!1),Ft(),{canvas:Gt,onDestroy:function(){Nt?Nt.disconnect():window.removeEventListener("resize",Ft),ht.removeChild(Gt)}}}(st||document.body,0,gt)))return null;nt=Ze.canvas,kt=Ze.onDestroy}Ve.premultipliedAlpha===void 0&&(Ve.premultipliedAlpha=!0),De=function(ht,pt){function wt(Ft){try{return ht.getContext(Ft,pt)}catch{return null}}return wt("webgl")||wt("experimental-webgl")||wt("webgl-experimental")}(nt,Ve)}return De?{gl:De,canvas:nt,container:st,extensions:rt,optionalExtensions:tt,pixelRatio:gt,profile:dt,cachedCode:mt,onDone:ft,onDestroy:kt}:(kt(),ft("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function m(Ve,Ze){for(var st=Array(Ve),nt=0;nt<Ve;++nt)st[nt]=Ze(nt);return st}function f(Ve){var Ze,st;return Ze=(65535<Ve)<<4,Ze|=st=(255<(Ve>>>=Ze))<<3,(Ze|=st=(15<(Ve>>>=st))<<2)|(st=(3<(Ve>>>=st))<<1)|Ve>>>st>>1}function o(){function Ve(nt){e:{for(var De=16;268435456>=De;De*=16)if(nt<=De){nt=De;break e}nt=0}return 0<(De=st[f(nt)>>2]).length?De.pop():new ArrayBuffer(nt)}function Ze(nt){st[f(nt.byteLength)>>2].push(nt)}var st=m(8,function(){return[]});return{alloc:Ve,free:Ze,allocType:function(nt,De){var Fe=null;switch(nt){case 5120:Fe=new Int8Array(Ve(De),0,De);break;case 5121:Fe=new Uint8Array(Ve(De),0,De);break;case 5122:Fe=new Int16Array(Ve(2*De),0,De);break;case 5123:Fe=new Uint16Array(Ve(2*De),0,De);break;case 5124:Fe=new Int32Array(Ve(4*De),0,De);break;case 5125:Fe=new Uint32Array(Ve(4*De),0,De);break;case 5126:Fe=new Float32Array(Ve(4*De),0,De);break;default:return null}return Fe.length!==De?Fe.subarray(0,De):Fe},freeType:function(nt){Ze(nt.buffer)}}}function e(Ve){return!!Ve&&typeof Ve=="object"&&Array.isArray(Ve.shape)&&Array.isArray(Ve.stride)&&typeof Ve.offset=="number"&&Ve.shape.length===Ve.stride.length&&(Array.isArray(Ve.data)||xe(Ve.data))}function i(Ve,Ze,st,nt,De,Fe){for(var rt=0;rt<Ze;++rt)for(var tt=Ve[rt],gt=0;gt<st;++gt)for(var dt=tt[gt],mt=0;mt<nt;++mt)De[Fe++]=dt[mt]}function r(Ve,Ze,st,nt,De){for(var Fe=1,rt=st+1;rt<Ze.length;++rt)Fe*=Ze[rt];var tt=Ze[st];if(Ze.length-st==4){var gt=Ze[st+1],dt=Ze[st+2];for(Ze=Ze[st+3],rt=0;rt<tt;++rt)i(Ve[rt],gt,dt,Ze,nt,De),De+=Fe}else for(rt=0;rt<tt;++rt)r(Ve[rt],Ze,st+1,nt,De),De+=Fe}function n(Ve){return 0|Le[Object.prototype.toString.call(Ve)]}function s(Ve,Ze){for(var st=0;st<Ze.length;++st)Ve[st]=Ze[st]}function a(Ve,Ze,st,nt,De,Fe,rt){for(var tt=0,gt=0;gt<st;++gt)for(var dt=0;dt<nt;++dt)Ve[tt++]=Ze[De*gt+Fe*dt+rt]}function u(Ve,Ze,st,nt){function De(ft){this.id=gt++,this.buffer=Ve.createBuffer(),this.type=ft,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,st.profile&&(this.stats={size:0})}function Fe(ft,kt,ht){ft.byteLength=kt.byteLength,Ve.bufferData(ft.type,kt,ht)}function rt(ft,kt,ht,pt,wt,Ft){if(ft.usage=ht,Array.isArray(kt)){if(ft.dtype=pt||5126,0<kt.length)if(Array.isArray(kt[0])){wt=oe(kt);for(var Nt=pt=1;Nt<wt.length;++Nt)pt*=wt[Nt];ft.dimension=pt,Fe(ft,kt=se(kt,wt,ft.dtype),ht),Ft?ft.persistentData=kt:he.freeType(kt)}else typeof kt[0]=="number"?(ft.dimension=wt,s(wt=he.allocType(ft.dtype,kt.length),kt),Fe(ft,wt,ht),Ft?ft.persistentData=wt:he.freeType(wt)):xe(kt[0])&&(ft.dimension=kt[0].length,ft.dtype=pt||n(kt[0])||5126,Fe(ft,kt=se(kt,[kt.length,kt[0].length],ft.dtype),ht),Ft?ft.persistentData=kt:he.freeType(kt))}else if(xe(kt))ft.dtype=pt||n(kt),ft.dimension=wt,Fe(ft,kt,ht),Ft&&(ft.persistentData=new Uint8Array(new Uint8Array(kt.buffer)));else if(e(kt)){wt=kt.shape;var Gt=kt.stride,an=(Nt=kt.offset,0),Wt=0,Yt=0,en=0;wt.length===1?(an=wt[0],Wt=1,Yt=Gt[0],en=0):wt.length===2&&(an=wt[0],Wt=wt[1],Yt=Gt[0],en=Gt[1]),ft.dtype=pt||n(kt.data)||5126,ft.dimension=Wt,a(wt=he.allocType(ft.dtype,an*Wt),kt.data,an,Wt,Yt,en,Nt),Fe(ft,wt,ht),Ft?ft.persistentData=wt:he.freeType(wt)}else kt instanceof ArrayBuffer&&(ft.dtype=5121,ft.dimension=wt,Fe(ft,kt,ht),Ft&&(ft.persistentData=new Uint8Array(new Uint8Array(kt))))}function tt(ft){Ze.bufferCount--,nt(ft),Ve.deleteBuffer(ft.buffer),ft.buffer=null,delete dt[ft.id]}var gt=0,dt={};De.prototype.bind=function(){Ve.bindBuffer(this.type,this.buffer)},De.prototype.destroy=function(){tt(this)};var mt=[];return st.profile&&(Ze.getTotalBufferSize=function(){var ft=0;return Object.keys(dt).forEach(function(kt){ft+=dt[kt].stats.size}),ft}),{create:function(ft,kt,ht,pt){function wt(Nt){var Gt=35044,an=null,Wt=0,Yt=0,en=1;return Array.isArray(Nt)||xe(Nt)||e(Nt)||Nt instanceof ArrayBuffer?an=Nt:typeof Nt=="number"?Wt=0|Nt:Nt&&("data"in Nt&&(an=Nt.data),"usage"in Nt&&(Gt=we[Nt.usage]),"type"in Nt&&(Yt=Ae[Nt.type]),"dimension"in Nt&&(en=0|Nt.dimension),"length"in Nt&&(Wt=0|Nt.length)),Ft.bind(),an?rt(Ft,an,Gt,Yt,en,pt):(Wt&&Ve.bufferData(Ft.type,Wt,Gt),Ft.dtype=Yt||5121,Ft.usage=Gt,Ft.dimension=en,Ft.byteLength=Wt),st.profile&&(Ft.stats.size=Ft.byteLength*fe[Ft.dtype]),wt}Ze.bufferCount++;var Ft=new De(kt);return dt[Ft.id]=Ft,ht||wt(ft),wt._reglType="buffer",wt._buffer=Ft,wt.subdata=function(Nt,Gt){var an,Wt=0|(Gt||0);if(Ft.bind(),xe(Nt)||Nt instanceof ArrayBuffer)Ve.bufferSubData(Ft.type,Wt,Nt);else if(Array.isArray(Nt)){if(0<Nt.length)if(typeof Nt[0]=="number"){var Yt=he.allocType(Ft.dtype,Nt.length);s(Yt,Nt),Ve.bufferSubData(Ft.type,Wt,Yt),he.freeType(Yt)}else(Array.isArray(Nt[0])||xe(Nt[0]))&&(an=oe(Nt),Yt=se(Nt,an,Ft.dtype),Ve.bufferSubData(Ft.type,Wt,Yt),he.freeType(Yt))}else if(e(Nt)){an=Nt.shape;var en=Nt.stride,Tn=Yt=0,Bn=0,mn=0;an.length===1?(Yt=an[0],Tn=1,Bn=en[0],mn=0):an.length===2&&(Yt=an[0],Tn=an[1],Bn=en[0],mn=en[1]),an=Array.isArray(Nt.data)?Ft.dtype:n(Nt.data),a(an=he.allocType(an,Yt*Tn),Nt.data,Yt,Tn,Bn,mn,Nt.offset),Ve.bufferSubData(Ft.type,Wt,an),he.freeType(an)}return wt},st.profile&&(wt.stats=Ft.stats),wt.destroy=function(){tt(Ft)},wt},createStream:function(ft,kt){var ht=mt.pop();return ht||(ht=new De(ft)),ht.bind(),rt(ht,kt,35040,0,1,!1),ht},destroyStream:function(ft){mt.push(ft)},clear:function(){me(dt).forEach(tt),mt.forEach(tt)},getBuffer:function(ft){return ft&&ft._buffer instanceof De?ft._buffer:null},restore:function(){me(dt).forEach(function(ft){ft.buffer=Ve.createBuffer(),Ve.bindBuffer(ft.type,ft.buffer),Ve.bufferData(ft.type,ft.persistentData||ft.byteLength,ft.usage)})},_initBuffer:rt}}function p(Ve,Ze,st,nt){function De(ft){this.id=gt++,tt[this.id]=this,this.buffer=ft,this.primType=4,this.type=this.vertCount=0}function Fe(ft,kt,ht,pt,wt,Ft,Nt){var Gt;if(ft.buffer.bind(),kt?((Gt=Nt)||xe(kt)&&(!e(kt)||xe(kt.data))||(Gt=Ze.oes_element_index_uint?5125:5123),st._initBuffer(ft.buffer,kt,ht,Gt,3)):(Ve.bufferData(34963,Ft,ht),ft.buffer.dtype=Gt||5121,ft.buffer.usage=ht,ft.buffer.dimension=3,ft.buffer.byteLength=Ft),Gt=Nt,!Nt){switch(ft.buffer.dtype){case 5121:case 5120:Gt=5121;break;case 5123:case 5122:Gt=5123;break;case 5125:case 5124:Gt=5125}ft.buffer.dtype=Gt}ft.type=Gt,0>(kt=wt)&&(kt=ft.buffer.byteLength,Gt===5123?kt>>=1:Gt===5125&&(kt>>=2)),ft.vertCount=kt,kt=pt,0>pt&&(kt=4,(pt=ft.buffer.dimension)===1&&(kt=0),pt===2&&(kt=1),pt===3&&(kt=4)),ft.primType=kt}function rt(ft){nt.elementsCount--,delete tt[ft.id],ft.buffer.destroy(),ft.buffer=null}var tt={},gt=0,dt={uint8:5121,uint16:5123};Ze.oes_element_index_uint&&(dt.uint32=5125),De.prototype.bind=function(){this.buffer.bind()};var mt=[];return{create:function(ft,kt){function ht(Ft){if(Ft)if(typeof Ft=="number")pt(Ft),wt.primType=4,wt.vertCount=0|Ft,wt.type=5121;else{var Nt=null,Gt=35044,an=-1,Wt=-1,Yt=0,en=0;Array.isArray(Ft)||xe(Ft)||e(Ft)?Nt=Ft:("data"in Ft&&(Nt=Ft.data),"usage"in Ft&&(Gt=we[Ft.usage]),"primitive"in Ft&&(an=Se[Ft.primitive]),"count"in Ft&&(Wt=0|Ft.count),"type"in Ft&&(en=dt[Ft.type]),"length"in Ft?Yt=0|Ft.length:(Yt=Wt,en===5123||en===5122?Yt*=2:en!==5125&&en!==5124||(Yt*=4))),Fe(wt,Nt,Gt,an,Wt,Yt,en)}else pt(),wt.primType=4,wt.vertCount=0,wt.type=5121;return ht}var pt=st.create(null,34963,!0),wt=new De(pt._buffer);return nt.elementsCount++,ht(ft),ht._reglType="elements",ht._elements=wt,ht.subdata=function(Ft,Nt){return pt.subdata(Ft,Nt),ht},ht.destroy=function(){rt(wt)},ht},createStream:function(ft){var kt=mt.pop();return kt||(kt=new De(st.create(null,34963,!0,!1)._buffer)),Fe(kt,ft,35040,-1,-1,0,0),kt},destroyStream:function(ft){mt.push(ft)},getElements:function(ft){return typeof ft=="function"&&ft._elements instanceof De?ft._elements:null},clear:function(){me(tt).forEach(rt)}}}function c(Ve){for(var Ze=he.allocType(5123,Ve.length),st=0;st<Ve.length;++st)if(isNaN(Ve[st]))Ze[st]=65535;else if(Ve[st]===1/0)Ze[st]=31744;else if(Ve[st]===-1/0)Ze[st]=64512;else{Me[0]=Ve[st];var nt=(Fe=be[0])>>>31<<15,De=(Fe<<1>>>24)-127,Fe=Fe>>13&1023;Ze[st]=-24>De?nt:-14>De?nt+(Fe+1024>>-14-De):15<De?nt+31744:nt+(De+15<<10)+Fe}return Ze}function x(Ve){return Array.isArray(Ve)||xe(Ve)}function g(Ve){return"[object "+Ve+"]"}function h(Ve){return Array.isArray(Ve)&&(Ve.length===0||typeof Ve[0]=="number")}function b(Ve){return!(!Array.isArray(Ve)||Ve.length===0||!x(Ve[0]))}function v(Ve){return Object.prototype.toString.call(Ve)}function y(Ve){if(!Ve)return!1;var Ze=v(Ve);return 0<=We.indexOf(Ze)||h(Ve)||b(Ve)||e(Ve)}function w(Ve,Ze){Ve.type===36193?(Ve.data=c(Ze),he.freeType(Ze)):Ve.data=Ze}function d(Ve,Ze,st,nt,De,Fe){if(Ve=lt[Ve]!==void 0?lt[Ve]:ce[Ve]*Je[Ze],Fe&&(Ve*=6),De){for(nt=0;1<=st;)nt+=Ve*st*st,st/=2;return nt}return Ve*st*nt}function S(Ve,Ze,st,nt,De,Fe,rt){function tt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function gt(qt,On){qt.internalformat=On.internalformat,qt.format=On.format,qt.type=On.type,qt.compressed=On.compressed,qt.premultiplyAlpha=On.premultiplyAlpha,qt.flipY=On.flipY,qt.unpackAlignment=On.unpackAlignment,qt.colorSpace=On.colorSpace,qt.width=On.width,qt.height=On.height,qt.channels=On.channels}function dt(qt,On){if(typeof On=="object"&&On){"premultiplyAlpha"in On&&(qt.premultiplyAlpha=On.premultiplyAlpha),"flipY"in On&&(qt.flipY=On.flipY),"alignment"in On&&(qt.unpackAlignment=On.alignment),"colorSpace"in On&&(qt.colorSpace=Nn[On.colorSpace]),"type"in On&&(qt.type=_n[On.type]);var Et=qt.width,Xt=qt.height,nn=qt.channels,An=!1;"shape"in On?(Et=On.shape[0],Xt=On.shape[1],On.shape.length===3&&(nn=On.shape[2],An=!0)):("radius"in On&&(Et=Xt=On.radius),"width"in On&&(Et=On.width),"height"in On&&(Xt=On.height),"channels"in On&&(nn=On.channels,An=!0)),qt.width=0|Et,qt.height=0|Xt,qt.channels=0|nn,Et=!1,"format"in On&&(Et=On.format,Xt=qt.internalformat=Pn[Et],qt.format=fn[Xt],Et in _n&&!("type"in On)&&(qt.type=_n[Et]),Et in tr&&(qt.compressed=!0),Et=!0),!An&&Et?qt.channels=ce[qt.format]:An&&!Et&&qt.channels!==Be[qt.format]&&(qt.format=qt.internalformat=Be[qt.channels])}}function mt(qt){Ve.pixelStorei(37440,qt.flipY),Ve.pixelStorei(37441,qt.premultiplyAlpha),Ve.pixelStorei(37443,qt.colorSpace),Ve.pixelStorei(3317,qt.unpackAlignment)}function ft(){tt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function kt(qt,On){var Et=null;if(y(On)?Et=On:On&&(dt(qt,On),"x"in On&&(qt.xOffset=0|On.x),"y"in On&&(qt.yOffset=0|On.y),y(On.data)&&(Et=On.data)),On.copy){var Xt=De.viewportWidth,nn=De.viewportHeight;qt.width=qt.width||Xt-qt.xOffset,qt.height=qt.height||nn-qt.yOffset,qt.needsCopy=!0}else if(Et){if(xe(Et))qt.channels=qt.channels||4,qt.data=Et,"type"in On||qt.type!==5121||(qt.type=0|Le[Object.prototype.toString.call(Et)]);else if(h(Et)){switch(qt.channels=qt.channels||4,nn=(Xt=Et).length,qt.type){case 5121:case 5123:case 5125:case 5126:(nn=he.allocType(qt.type,nn)).set(Xt),qt.data=nn;break;case 36193:qt.data=c(Xt)}qt.alignment=1,qt.needsFree=!0}else if(e(Et)){Xt=Et.data,Array.isArray(Xt)||qt.type!==5121||(qt.type=0|Le[Object.prototype.toString.call(Xt)]),nn=Et.shape;var An,Cn,Rn,gn,$t=Et.stride;nn.length===3?(Rn=nn[2],gn=$t[2]):gn=Rn=1,An=nn[0],Cn=nn[1],nn=$t[0],$t=$t[1],qt.alignment=1,qt.width=An,qt.height=Cn,qt.channels=Rn,qt.format=qt.internalformat=Be[Rn],qt.needsFree=!0,An=gn,Et=Et.offset,Rn=qt.width,gn=qt.height,Cn=qt.channels;for(var Qt=he.allocType(qt.type===36193?5126:qt.type,Rn*gn*Cn),hn=0,vn=0;vn<gn;++vn)for(var Fn=0;Fn<Rn;++Fn)for(var In=0;In<Cn;++In)Qt[hn++]=Xt[nn*Fn+$t*vn+An*In+Et];w(qt,Qt)}else if(v(Et)===Te||v(Et)===ye||v(Et)===Pe)v(Et)===Te||v(Et)===ye?qt.element=Et:qt.element=Et.canvas,qt.width=qt.element.width,qt.height=qt.element.height,qt.channels=4;else if(v(Et)===Re)qt.element=Et,qt.width=Et.width,qt.height=Et.height,qt.channels=4;else if(v(Et)===ze)qt.element=Et,qt.width=Et.naturalWidth,qt.height=Et.naturalHeight,qt.channels=4;else if(v(Et)===He)qt.element=Et,qt.width=Et.videoWidth,qt.height=Et.videoHeight,qt.channels=4;else if(b(Et)){for(Xt=qt.width||Et[0].length,nn=qt.height||Et.length,$t=qt.channels,$t=x(Et[0][0])?$t||Et[0][0].length:$t||1,An=ve.shape(Et),Rn=1,gn=0;gn<An.length;++gn)Rn*=An[gn];Rn=he.allocType(qt.type===36193?5126:qt.type,Rn),ve.flatten(Et,An,"",Rn),w(qt,Rn),qt.alignment=1,qt.width=Xt,qt.height=nn,qt.channels=$t,qt.format=qt.internalformat=Be[$t],qt.needsFree=!0}}else qt.width=qt.width||1,qt.height=qt.height||1,qt.channels=qt.channels||4}function ht(qt,On,Et,Xt,nn){var An=qt.element,Cn=qt.data,Rn=qt.internalformat,gn=qt.format,$t=qt.type,Qt=qt.width,hn=qt.height;mt(qt),An?Ve.texSubImage2D(On,nn,Et,Xt,gn,$t,An):qt.compressed?Ve.compressedTexSubImage2D(On,nn,Et,Xt,Rn,Qt,hn,Cn):qt.needsCopy?(nt(),Ve.copyTexSubImage2D(On,nn,Et,Xt,qt.xOffset,qt.yOffset,Qt,hn)):Ve.texSubImage2D(On,nn,Et,Xt,Qt,hn,gn,$t,Cn)}function pt(){return xn.pop()||new ft}function wt(qt){qt.needsFree&&he.freeType(qt.data),ft.call(qt),xn.push(qt)}function Ft(){tt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Nt(qt,On,Et){var Xt=qt.images[0]=pt();qt.mipmask=1,Xt.width=qt.width=On,Xt.height=qt.height=Et,Xt.channels=qt.channels=4}function Gt(qt,On){var Et=null;if(y(On))gt(Et=qt.images[0]=pt(),qt),kt(Et,On),qt.mipmask=1;else if(dt(qt,On),Array.isArray(On.mipmap))for(var Xt=On.mipmap,nn=0;nn<Xt.length;++nn)gt(Et=qt.images[nn]=pt(),qt),Et.width>>=nn,Et.height>>=nn,kt(Et,Xt[nn]),qt.mipmask|=1<<nn;else gt(Et=qt.images[0]=pt(),qt),kt(Et,On),qt.mipmask=1;gt(qt,qt.images[0])}function an(qt,On){for(var Et=qt.images,Xt=0;Xt<Et.length&&Et[Xt];++Xt){var nn=Et[Xt],An=On,Cn=Xt,Rn=nn.element,gn=nn.data,$t=nn.internalformat,Qt=nn.format,hn=nn.type,vn=nn.width,Fn=nn.height;mt(nn),Rn?Ve.texImage2D(An,Cn,Qt,Qt,hn,Rn):nn.compressed?Ve.compressedTexImage2D(An,Cn,$t,vn,Fn,0,gn):nn.needsCopy?(nt(),Ve.copyTexImage2D(An,Cn,Qt,nn.xOffset,nn.yOffset,vn,Fn,0)):Ve.texImage2D(An,Cn,Qt,vn,Fn,0,Qt,hn,gn||null)}}function Wt(){var qt=Ln.pop()||new Ft;tt.call(qt);for(var On=qt.mipmask=0;16>On;++On)qt.images[On]=null;return qt}function Yt(qt){for(var On=qt.images,Et=0;Et<On.length;++Et)On[Et]&&wt(On[Et]),On[Et]=null;Ln.push(qt)}function en(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Tn(qt,On){"min"in On&&(qt.minFilter=Sn[On.min],0<=Ie.indexOf(qt.minFilter)&&!("faces"in On)&&(qt.genMipmaps=!0)),"mag"in On&&(qt.magFilter=En[On.mag]);var Et=qt.wrapS,Xt=qt.wrapT;if("wrap"in On){var nn=On.wrap;typeof nn=="string"?Et=Xt=yn[nn]:Array.isArray(nn)&&(Et=yn[nn[0]],Xt=yn[nn[1]])}else"wrapS"in On&&(Et=yn[On.wrapS]),"wrapT"in On&&(Xt=yn[On.wrapT]);if(qt.wrapS=Et,qt.wrapT=Xt,"anisotropic"in On&&(qt.anisotropic=On.anisotropic),"mipmap"in On){switch(Et=!1,typeof On.mipmap){case"string":qt.mipmapHint=un[On.mipmap],Et=qt.genMipmaps=!0;break;case"boolean":Et=qt.genMipmaps=On.mipmap;break;case"object":qt.genMipmaps=!1,Et=!0}!Et||"min"in On||(qt.minFilter=9984)}}function Bn(qt,On){Ve.texParameteri(On,10241,qt.minFilter),Ve.texParameteri(On,10240,qt.magFilter),Ve.texParameteri(On,10242,qt.wrapS),Ve.texParameteri(On,10243,qt.wrapT),Ze.ext_texture_filter_anisotropic&&Ve.texParameteri(On,34046,qt.anisotropic),qt.genMipmaps&&(Ve.hint(33170,qt.mipmapHint),Ve.generateMipmap(On))}function mn(qt){tt.call(this),this.mipmask=0,this.internalformat=6408,this.id=Xn++,this.refCount=1,this.target=qt,this.texture=Ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new en,rt.profile&&(this.stats={size:0})}function Kt(qt){Ve.activeTexture(33984),Ve.bindTexture(qt.target,qt.texture)}function cn(){var qt=Kn[0];qt?Ve.bindTexture(qt.target,qt.texture):Ve.bindTexture(3553,null)}function tn(qt){var On=qt.texture,Et=qt.unit,Xt=qt.target;0<=Et&&(Ve.activeTexture(33984+Et),Ve.bindTexture(Xt,null),Kn[Et]=null),Ve.deleteTexture(On),qt.texture=null,qt.params=null,qt.pixels=null,qt.refCount=0,delete Un[qt.id],Fe.textureCount--}var un={"don't care":4352,"dont care":4352,nice:4354,fast:4353},yn={repeat:10497,clamp:33071,mirror:33648},En={nearest:9728,linear:9729},Sn=J({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},En),Nn={none:0,browser:37444},_n={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Pn={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},tr={};Ze.ext_srgb&&(Pn.srgb=35904,Pn.srgba=35906),Ze.oes_texture_float&&(_n.float32=_n.float=5126),Ze.oes_texture_half_float&&(_n.float16=_n["half float"]=36193),Ze.webgl_depth_texture&&(J(Pn,{depth:6402,"depth stencil":34041}),J(_n,{uint16:5123,uint32:5125,"depth stencil":34042})),Ze.webgl_compressed_texture_s3tc&&J(tr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ze.webgl_compressed_texture_atc&&J(tr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ze.webgl_compressed_texture_pvrtc&&J(tr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ze.webgl_compressed_texture_etc1&&(tr["rgb etc1"]=36196);var ur=Array.prototype.slice.call(Ve.getParameter(34467));Object.keys(tr).forEach(function(qt){var On=tr[qt];0<=ur.indexOf(On)&&(Pn[qt]=On)});var lr=Object.keys(Pn);st.textureFormats=lr;var ir=[];Object.keys(Pn).forEach(function(qt){ir[Pn[qt]]=qt});var $n=[];Object.keys(_n).forEach(function(qt){$n[_n[qt]]=qt});var vr=[];Object.keys(En).forEach(function(qt){vr[En[qt]]=qt});var jt=[];Object.keys(Sn).forEach(function(qt){jt[Sn[qt]]=qt});var rn=[];Object.keys(yn).forEach(function(qt){rn[yn[qt]]=qt});var fn=lr.reduce(function(qt,On){var Et=Pn[On];return Et===6409||Et===6406||Et===6409||Et===6410||Et===6402||Et===34041||Ze.ext_srgb&&(Et===35904||Et===35906)?qt[Et]=Et:Et===32855||0<=On.indexOf("rgba")?qt[Et]=6408:qt[Et]=6407,qt},{}),xn=[],Ln=[],Xn=0,Un={},Hn=st.maxTextureUnits,Kn=Array(Hn).map(function(){return null});return J(mn.prototype,{bind:function(){this.bindCount+=1;var qt=this.unit;if(0>qt){for(var On=0;On<Hn;++On){var Et=Kn[On];if(Et){if(0<Et.bindCount)continue;Et.unit=-1}Kn[On]=this,qt=On;break}rt.profile&&Fe.maxTextureUnits<qt+1&&(Fe.maxTextureUnits=qt+1),this.unit=qt,Ve.activeTexture(33984+qt),Ve.bindTexture(this.target,this.texture)}return qt},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&tn(this)}}),rt.profile&&(Fe.getTotalTextureSize=function(){var qt=0;return Object.keys(Un).forEach(function(On){qt+=Un[On].stats.size}),qt}),{create2D:function(qt,On){function Et(nn,An){var Cn=Xt.texInfo;en.call(Cn);var Rn=Wt();return typeof nn=="number"?Nt(Rn,0|nn,typeof An=="number"?0|An:0|nn):nn?(Tn(Cn,nn),Gt(Rn,nn)):Nt(Rn,1,1),Cn.genMipmaps&&(Rn.mipmask=(Rn.width<<1)-1),Xt.mipmask=Rn.mipmask,gt(Xt,Rn),Xt.internalformat=Rn.internalformat,Et.width=Rn.width,Et.height=Rn.height,Kt(Xt),an(Rn,3553),Bn(Cn,3553),cn(),Yt(Rn),rt.profile&&(Xt.stats.size=d(Xt.internalformat,Xt.type,Rn.width,Rn.height,Cn.genMipmaps,!1)),Et.format=ir[Xt.internalformat],Et.type=$n[Xt.type],Et.mag=vr[Cn.magFilter],Et.min=jt[Cn.minFilter],Et.wrapS=rn[Cn.wrapS],Et.wrapT=rn[Cn.wrapT],Et}var Xt=new mn(3553);return Un[Xt.id]=Xt,Fe.textureCount++,Et(qt,On),Et.subimage=function(nn,An,Cn,Rn){An|=0,Cn|=0,Rn|=0;var gn=pt();return gt(gn,Xt),gn.width=0,gn.height=0,kt(gn,nn),gn.width=gn.width||(Xt.width>>Rn)-An,gn.height=gn.height||(Xt.height>>Rn)-Cn,Kt(Xt),ht(gn,3553,An,Cn,Rn),cn(),wt(gn),Et},Et.resize=function(nn,An){var Cn=0|nn,Rn=0|An||Cn;if(Cn===Xt.width&&Rn===Xt.height)return Et;Et.width=Xt.width=Cn,Et.height=Xt.height=Rn,Kt(Xt);for(var gn=0;Xt.mipmask>>gn;++gn){var $t=Cn>>gn,Qt=Rn>>gn;if(!$t||!Qt)break;Ve.texImage2D(3553,gn,Xt.format,$t,Qt,0,Xt.format,Xt.type,null)}return cn(),rt.profile&&(Xt.stats.size=d(Xt.internalformat,Xt.type,Cn,Rn,!1,!1)),Et},Et._reglType="texture2d",Et._texture=Xt,rt.profile&&(Et.stats=Xt.stats),Et.destroy=function(){Xt.decRef()},Et},createCube:function(qt,On,Et,Xt,nn,An){function Cn($t,Qt,hn,vn,Fn,In){var Qn,Wn=Rn.texInfo;for(en.call(Wn),Qn=0;6>Qn;++Qn)gn[Qn]=Wt();if(typeof $t!="number"&&$t){if(typeof $t=="object")if(Qt)Gt(gn[0],$t),Gt(gn[1],Qt),Gt(gn[2],hn),Gt(gn[3],vn),Gt(gn[4],Fn),Gt(gn[5],In);else if(Tn(Wn,$t),dt(Rn,$t),"faces"in $t)for($t=$t.faces,Qn=0;6>Qn;++Qn)gt(gn[Qn],Rn),Gt(gn[Qn],$t[Qn]);else for(Qn=0;6>Qn;++Qn)Gt(gn[Qn],$t)}else for($t=0|$t||1,Qn=0;6>Qn;++Qn)Nt(gn[Qn],$t,$t);for(gt(Rn,gn[0]),Rn.mipmask=Wn.genMipmaps?(gn[0].width<<1)-1:gn[0].mipmask,Rn.internalformat=gn[0].internalformat,Cn.width=gn[0].width,Cn.height=gn[0].height,Kt(Rn),Qn=0;6>Qn;++Qn)an(gn[Qn],34069+Qn);for(Bn(Wn,34067),cn(),rt.profile&&(Rn.stats.size=d(Rn.internalformat,Rn.type,Cn.width,Cn.height,Wn.genMipmaps,!0)),Cn.format=ir[Rn.internalformat],Cn.type=$n[Rn.type],Cn.mag=vr[Wn.magFilter],Cn.min=jt[Wn.minFilter],Cn.wrapS=rn[Wn.wrapS],Cn.wrapT=rn[Wn.wrapT],Qn=0;6>Qn;++Qn)Yt(gn[Qn]);return Cn}var Rn=new mn(34067);Un[Rn.id]=Rn,Fe.cubeCount++;var gn=Array(6);return Cn(qt,On,Et,Xt,nn,An),Cn.subimage=function($t,Qt,hn,vn,Fn){hn|=0,vn|=0,Fn|=0;var In=pt();return gt(In,Rn),In.width=0,In.height=0,kt(In,Qt),In.width=In.width||(Rn.width>>Fn)-hn,In.height=In.height||(Rn.height>>Fn)-vn,Kt(Rn),ht(In,34069+$t,hn,vn,Fn),cn(),wt(In),Cn},Cn.resize=function($t){if(($t|=0)!==Rn.width){Cn.width=Rn.width=$t,Cn.height=Rn.height=$t,Kt(Rn);for(var Qt=0;6>Qt;++Qt)for(var hn=0;Rn.mipmask>>hn;++hn)Ve.texImage2D(34069+Qt,hn,Rn.format,$t>>hn,$t>>hn,0,Rn.format,Rn.type,null);return cn(),rt.profile&&(Rn.stats.size=d(Rn.internalformat,Rn.type,Cn.width,Cn.height,!1,!0)),Cn}},Cn._reglType="textureCube",Cn._texture=Rn,rt.profile&&(Cn.stats=Rn.stats),Cn.destroy=function(){Rn.decRef()},Cn},clear:function(){for(var qt=0;qt<Hn;++qt)Ve.activeTexture(33984+qt),Ve.bindTexture(3553,null),Kn[qt]=null;me(Un).forEach(tn),Fe.cubeCount=0,Fe.textureCount=0},getTexture:function(qt){return null},restore:function(){for(var qt=0;qt<Hn;++qt){var On=Kn[qt];On&&(On.bindCount=0,On.unit=-1,Kn[qt]=null)}me(Un).forEach(function(Et){Et.texture=Ve.createTexture(),Ve.bindTexture(Et.target,Et.texture);for(var Xt=0;32>Xt;++Xt)if(Et.mipmask&1<<Xt)if(Et.target===3553)Ve.texImage2D(3553,Xt,Et.internalformat,Et.width>>Xt,Et.height>>Xt,0,Et.internalformat,Et.type,null);else for(var nn=0;6>nn;++nn)Ve.texImage2D(34069+nn,Xt,Et.internalformat,Et.width>>Xt,Et.height>>Xt,0,Et.internalformat,Et.type,null);Bn(Et.texInfo,Et.target)})},refresh:function(){for(var qt=0;qt<Hn;++qt){var On=Kn[qt];On&&(On.bindCount=0,On.unit=-1,Kn[qt]=null),Ve.activeTexture(33984+qt),Ve.bindTexture(3553,null),Ve.bindTexture(34067,null)}}}}function T(Ve,Ze,st,nt,De,Fe){function rt(mn,Kt,cn){this.target=mn,this.texture=Kt,this.renderbuffer=cn;var tn=mn=0;Kt?(mn=Kt.width,tn=Kt.height):cn&&(mn=cn.width,tn=cn.height),this.width=mn,this.height=tn}function tt(mn){mn&&(mn.texture&&mn.texture._texture.decRef(),mn.renderbuffer&&mn.renderbuffer._renderbuffer.decRef())}function gt(mn,Kt,cn){mn&&(mn.texture?mn.texture._texture.refCount+=1:mn.renderbuffer._renderbuffer.refCount+=1)}function dt(mn,Kt){Kt&&(Kt.texture?Ve.framebufferTexture2D(36160,mn,Kt.target,Kt.texture._texture.texture,0):Ve.framebufferRenderbuffer(36160,mn,36161,Kt.renderbuffer._renderbuffer.renderbuffer))}function mt(mn){var Kt=3553,cn=null,tn=null,un=mn;return typeof mn=="object"&&(un=mn.data,"target"in mn&&(Kt=0|mn.target)),(mn=un._reglType)==="texture2d"||mn==="textureCube"?cn=un:mn==="renderbuffer"&&(tn=un,Kt=36161),new rt(Kt,cn,tn)}function ft(mn,Kt,cn,tn,un){return cn?((mn=nt.create2D({width:mn,height:Kt,format:tn,type:un}))._texture.refCount=0,new rt(3553,mn,null)):((mn=De.create({width:mn,height:Kt,format:tn}))._renderbuffer.refCount=0,new rt(36161,null,mn))}function kt(mn){return mn&&(mn.texture||mn.renderbuffer)}function ht(mn,Kt,cn){mn&&(mn.texture?mn.texture.resize(Kt,cn):mn.renderbuffer&&mn.renderbuffer.resize(Kt,cn),mn.width=Kt,mn.height=cn)}function pt(){this.id=Tn++,Bn[this.id]=this,this.framebuffer=Ve.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function wt(mn){mn.colorAttachments.forEach(tt),tt(mn.depthAttachment),tt(mn.stencilAttachment),tt(mn.depthStencilAttachment)}function Ft(mn){Ve.deleteFramebuffer(mn.framebuffer),mn.framebuffer=null,Fe.framebufferCount--,delete Bn[mn.id]}function Nt(mn){var Kt;Ve.bindFramebuffer(36160,mn.framebuffer);var cn=mn.colorAttachments;for(Kt=0;Kt<cn.length;++Kt)dt(36064+Kt,cn[Kt]);for(Kt=cn.length;Kt<st.maxColorAttachments;++Kt)Ve.framebufferTexture2D(36160,36064+Kt,3553,null,0);Ve.framebufferTexture2D(36160,33306,3553,null,0),Ve.framebufferTexture2D(36160,36096,3553,null,0),Ve.framebufferTexture2D(36160,36128,3553,null,0),dt(36096,mn.depthAttachment),dt(36128,mn.stencilAttachment),dt(33306,mn.depthStencilAttachment),Ve.checkFramebufferStatus(36160),Ve.isContextLost(),Ve.bindFramebuffer(36160,an.next?an.next.framebuffer:null),an.cur=an.next,Ve.getError()}function Gt(mn,Kt){function cn(un,yn){var En,Sn=0,Nn=0,_n=!0,Pn=!0;En=null;var tr=!0,ur="rgba",lr="uint8",ir=1,$n=null,vr=null,jt=null,rn=!1;typeof un=="number"?(Sn=0|un,Nn=0|yn||Sn):un?("shape"in un?(Sn=(Nn=un.shape)[0],Nn=Nn[1]):("radius"in un&&(Sn=Nn=un.radius),"width"in un&&(Sn=un.width),"height"in un&&(Nn=un.height)),("color"in un||"colors"in un)&&(En=un.color||un.colors,Array.isArray(En)),En||("colorCount"in un&&(ir=0|un.colorCount),"colorTexture"in un&&(tr=!!un.colorTexture,ur="rgba4"),"colorType"in un&&(lr=un.colorType,!tr)&&(lr==="half float"||lr==="float16"?ur="rgba16f":lr!=="float"&&lr!=="float32"||(ur="rgba32f")),"colorFormat"in un&&(ur=un.colorFormat,0<=Wt.indexOf(ur)?tr=!0:0<=Yt.indexOf(ur)&&(tr=!1))),("depthTexture"in un||"depthStencilTexture"in un)&&(rn=!(!un.depthTexture&&!un.depthStencilTexture)),"depth"in un&&(typeof un.depth=="boolean"?_n=un.depth:($n=un.depth,Pn=!1)),"stencil"in un&&(typeof un.stencil=="boolean"?Pn=un.stencil:(vr=un.stencil,_n=!1)),"depthStencil"in un&&(typeof un.depthStencil=="boolean"?_n=Pn=un.depthStencil:(jt=un.depthStencil,Pn=_n=!1))):Sn=Nn=1;var fn=null,xn=null,Ln=null,Xn=null;if(Array.isArray(En))fn=En.map(mt);else if(En)fn=[mt(En)];else for(fn=Array(ir),En=0;En<ir;++En)fn[En]=ft(Sn,Nn,tr,ur,lr);for(Sn=Sn||fn[0].width,Nn=Nn||fn[0].height,$n?xn=mt($n):_n&&!Pn&&(xn=ft(Sn,Nn,rn,"depth","uint32")),vr?Ln=mt(vr):Pn&&!_n&&(Ln=ft(Sn,Nn,!1,"stencil","uint8")),jt?Xn=mt(jt):!$n&&!vr&&Pn&&_n&&(Xn=ft(Sn,Nn,rn,"depth stencil","depth stencil")),_n=null,En=0;En<fn.length;++En)gt(fn[En]),fn[En]&&fn[En].texture&&(Pn=_t[fn[En].texture._texture.format]*xt[fn[En].texture._texture.type],_n===null&&(_n=Pn));return gt(xn),gt(Ln),gt(Xn),wt(tn),tn.width=Sn,tn.height=Nn,tn.colorAttachments=fn,tn.depthAttachment=xn,tn.stencilAttachment=Ln,tn.depthStencilAttachment=Xn,cn.color=fn.map(kt),cn.depth=kt(xn),cn.stencil=kt(Ln),cn.depthStencil=kt(Xn),cn.width=tn.width,cn.height=tn.height,Nt(tn),cn}var tn=new pt;return Fe.framebufferCount++,cn(mn,Kt),J(cn,{resize:function(un,yn){var En=Math.max(0|un,1),Sn=Math.max(0|yn||En,1);if(En===tn.width&&Sn===tn.height)return cn;for(var Nn=tn.colorAttachments,_n=0;_n<Nn.length;++_n)ht(Nn[_n],En,Sn);return ht(tn.depthAttachment,En,Sn),ht(tn.stencilAttachment,En,Sn),ht(tn.depthStencilAttachment,En,Sn),tn.width=cn.width=En,tn.height=cn.height=Sn,Nt(tn),cn},_reglType:"framebuffer",_framebuffer:tn,destroy:function(){Ft(tn),wt(tn)},use:function(un){an.setFBO({framebuffer:cn},un)}})}var an={cur:null,next:null,dirty:!1,setFBO:null},Wt=["rgba"],Yt=["rgba4","rgb565","rgb5 a1"];Ze.ext_srgb&&Yt.push("srgba"),Ze.ext_color_buffer_half_float&&Yt.push("rgba16f","rgb16f"),Ze.webgl_color_buffer_float&&Yt.push("rgba32f");var en=["uint8"];Ze.oes_texture_half_float&&en.push("half float","float16"),Ze.oes_texture_float&&en.push("float","float32");var Tn=0,Bn={};return J(an,{getFramebuffer:function(mn){return typeof mn=="function"&&mn._reglType==="framebuffer"&&(mn=mn._framebuffer)instanceof pt?mn:null},create:Gt,createCube:function(mn){function Kt(tn){var un,yn={color:null},En=0,Sn=null;un="rgba";var Nn="uint8",_n=1;if(typeof tn=="number"?En=0|tn:tn?("shape"in tn?En=tn.shape[0]:("radius"in tn&&(En=0|tn.radius),"width"in tn?En=0|tn.width:"height"in tn&&(En=0|tn.height)),("color"in tn||"colors"in tn)&&(Sn=tn.color||tn.colors,Array.isArray(Sn)),Sn||("colorCount"in tn&&(_n=0|tn.colorCount),"colorType"in tn&&(Nn=tn.colorType),"colorFormat"in tn&&(un=tn.colorFormat)),"depth"in tn&&(yn.depth=tn.depth),"stencil"in tn&&(yn.stencil=tn.stencil),"depthStencil"in tn&&(yn.depthStencil=tn.depthStencil)):En=1,Sn)if(Array.isArray(Sn))for(tn=[],un=0;un<Sn.length;++un)tn[un]=Sn[un];else tn=[Sn];else for(tn=Array(_n),Sn={radius:En,format:un,type:Nn},un=0;un<_n;++un)tn[un]=nt.createCube(Sn);for(yn.color=Array(tn.length),un=0;un<tn.length;++un)_n=tn[un],En=En||_n.width,yn.color[un]={target:34069,data:tn[un]};for(un=0;6>un;++un){for(_n=0;_n<tn.length;++_n)yn.color[_n].target=34069+un;0<un&&(yn.depth=cn[0].depth,yn.stencil=cn[0].stencil,yn.depthStencil=cn[0].depthStencil),cn[un]?cn[un](yn):cn[un]=Gt(yn)}return J(Kt,{width:En,height:En,color:tn})}var cn=Array(6);return Kt(mn),J(Kt,{faces:cn,resize:function(tn){var un=0|tn;if(un===Kt.width)return Kt;var yn=Kt.color;for(tn=0;tn<yn.length;++tn)yn[tn].resize(un);for(tn=0;6>tn;++tn)cn[tn].resize(un);return Kt.width=Kt.height=un,Kt},_reglType:"framebufferCube",destroy:function(){cn.forEach(function(tn){tn.destroy()})}})},clear:function(){me(Bn).forEach(Ft)},restore:function(){an.cur=null,an.next=null,an.dirty=!0,me(Bn).forEach(function(mn){mn.framebuffer=Ve.createFramebuffer(),Nt(mn)})}})}function E(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function C(Ve,Ze,st,nt,De,Fe,rt){function tt(){this.id=++mt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ht=Ze.oes_vertex_array_object;this.vao=ht?ht.createVertexArrayOES():null,ft[this.id]=this,this.buffers=[]}var gt=st.maxAttributes,dt=Array(gt);for(st=0;st<gt;++st)dt[st]=new E;var mt=0,ft={},kt={Record:E,scope:{},state:dt,currentVAO:null,targetVAO:null,restore:Ze.oes_vertex_array_object?function(){Ze.oes_vertex_array_object&&me(ft).forEach(function(ht){ht.refresh()})}:function(){},createVAO:function(ht){function pt(Ft){var Nt;Array.isArray(Ft)?(Nt=Ft,wt.elements&&wt.ownsElements&&wt.elements.destroy(),wt.elements=null,wt.ownsElements=!1,wt.offset=0,wt.count=0,wt.instances=-1,wt.primitive=4):(Ft.elements?(Nt=Ft.elements,wt.ownsElements?(typeof Nt=="function"&&Nt._reglType==="elements"?wt.elements.destroy():wt.elements(Nt),wt.ownsElements=!1):Fe.getElements(Ft.elements)?(wt.elements=Ft.elements,wt.ownsElements=!1):(wt.elements=Fe.create(Ft.elements),wt.ownsElements=!0)):(wt.elements=null,wt.ownsElements=!1),Nt=Ft.attributes,wt.offset=0,wt.count=-1,wt.instances=-1,wt.primitive=4,wt.elements&&(wt.count=wt.elements._elements.vertCount,wt.primitive=wt.elements._elements.primType),"offset"in Ft&&(wt.offset=0|Ft.offset),"count"in Ft&&(wt.count=0|Ft.count),"instances"in Ft&&(wt.instances=0|Ft.instances),"primitive"in Ft&&(wt.primitive=Se[Ft.primitive])),Ft={};var Gt=wt.attributes;Gt.length=Nt.length;for(var an=0;an<Nt.length;++an){var Wt,Yt=Nt[an],en=Gt[an]=new E,Tn=Yt.data||Yt;Array.isArray(Tn)||xe(Tn)||e(Tn)?(wt.buffers[an]&&(Wt=wt.buffers[an],xe(Tn)&&Wt._buffer.byteLength>=Tn.byteLength?Wt.subdata(Tn):(Wt.destroy(),wt.buffers[an]=null)),wt.buffers[an]||(Wt=wt.buffers[an]=De.create(Yt,34962,!1,!0)),en.buffer=De.getBuffer(Wt),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1,Ft[an]=1):De.getBuffer(Yt)?(en.buffer=De.getBuffer(Yt),en.size=0|en.buffer.dimension,en.normalized=!1,en.type=en.buffer.dtype,en.offset=0,en.stride=0,en.divisor=0,en.state=1):De.getBuffer(Yt.buffer)?(en.buffer=De.getBuffer(Yt.buffer),en.size=0|(+Yt.size||en.buffer.dimension),en.normalized=!!Yt.normalized||!1,en.type="type"in Yt?Ae[Yt.type]:en.buffer.dtype,en.offset=0|(Yt.offset||0),en.stride=0|(Yt.stride||0),en.divisor=0|(Yt.divisor||0),en.state=1):"x"in Yt&&(en.x=+Yt.x||0,en.y=+Yt.y||0,en.z=+Yt.z||0,en.w=+Yt.w||0,en.state=2)}for(Wt=0;Wt<wt.buffers.length;++Wt)!Ft[Wt]&&wt.buffers[Wt]&&(wt.buffers[Wt].destroy(),wt.buffers[Wt]=null);return wt.refresh(),pt}var wt=new tt;return nt.vaoCount+=1,pt.destroy=function(){for(var Ft=0;Ft<wt.buffers.length;++Ft)wt.buffers[Ft]&&wt.buffers[Ft].destroy();wt.buffers.length=0,wt.ownsElements&&(wt.elements.destroy(),wt.elements=null,wt.ownsElements=!1),wt.destroy()},pt._vao=wt,pt._reglType="vao",pt(ht)},getVAO:function(ht){return typeof ht=="function"&&ht._vao?ht._vao:null},destroyBuffer:function(ht){for(var pt=0;pt<dt.length;++pt){var wt=dt[pt];wt.buffer===ht&&(Ve.disableVertexAttribArray(pt),wt.buffer=null)}},setVAO:Ze.oes_vertex_array_object?function(ht){if(ht!==kt.currentVAO){var pt=Ze.oes_vertex_array_object;ht?pt.bindVertexArrayOES(ht.vao):pt.bindVertexArrayOES(null),kt.currentVAO=ht}}:function(ht){if(ht!==kt.currentVAO){if(ht)ht.bindAttrs();else{for(var pt=Ze.angle_instanced_arrays,wt=0;wt<dt.length;++wt){var Ft=dt[wt];Ft.buffer?(Ve.enableVertexAttribArray(wt),Ft.buffer.bind(),Ve.vertexAttribPointer(wt,Ft.size,Ft.type,Ft.normalized,Ft.stride,Ft.offfset),pt&&Ft.divisor&&pt.vertexAttribDivisorANGLE(wt,Ft.divisor)):(Ve.disableVertexAttribArray(wt),Ve.vertexAttrib4f(wt,Ft.x,Ft.y,Ft.z,Ft.w))}rt.elements?Ve.bindBuffer(34963,rt.elements.buffer.buffer):Ve.bindBuffer(34963,null)}kt.currentVAO=ht}},clear:Ze.oes_vertex_array_object?function(){me(ft).forEach(function(ht){ht.destroy()})}:function(){}};return tt.prototype.bindAttrs=function(){for(var ht=Ze.angle_instanced_arrays,pt=this.attributes,wt=0;wt<pt.length;++wt){var Ft=pt[wt];Ft.buffer?(Ve.enableVertexAttribArray(wt),Ve.bindBuffer(34962,Ft.buffer.buffer),Ve.vertexAttribPointer(wt,Ft.size,Ft.type,Ft.normalized,Ft.stride,Ft.offset),ht&&Ft.divisor&&ht.vertexAttribDivisorANGLE(wt,Ft.divisor)):(Ve.disableVertexAttribArray(wt),Ve.vertexAttrib4f(wt,Ft.x,Ft.y,Ft.z,Ft.w))}for(ht=pt.length;ht<gt;++ht)Ve.disableVertexAttribArray(ht);(ht=Fe.getElements(this.elements))?Ve.bindBuffer(34963,ht.buffer.buffer):Ve.bindBuffer(34963,null)},tt.prototype.refresh=function(){var ht=Ze.oes_vertex_array_object;ht&&(ht.bindVertexArrayOES(this.vao),this.bindAttrs(),kt.currentVAO=null,ht.bindVertexArrayOES(null))},tt.prototype.destroy=function(){if(this.vao){var ht=Ze.oes_vertex_array_object;this===kt.currentVAO&&(kt.currentVAO=null,ht.bindVertexArrayOES(null)),ht.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),ft[this.id]&&(delete ft[this.id],--nt.vaoCount)},kt}function L(Ve,Ze,st,nt){function De(pt,wt,Ft,Nt){this.name=pt,this.id=wt,this.location=Ft,this.info=Nt}function Fe(pt,wt){for(var Ft=0;Ft<pt.length;++Ft)if(pt[Ft].id===wt.id)return void(pt[Ft].location=wt.location);pt.push(wt)}function rt(pt,wt,Ft){if(!(Gt=(Ft=pt===35632?dt:mt)[wt])){var Nt=Ze.str(wt),Gt=Ve.createShader(pt);Ve.shaderSource(Gt,Nt),Ve.compileShader(Gt),Ft[wt]=Gt}return Gt}function tt(pt,wt){this.id=ht++,this.fragId=pt,this.vertId=wt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,nt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function gt(pt,wt,Ft){var Nt;Nt=rt(35632,pt.fragId);var Gt=rt(35633,pt.vertId);if(wt=pt.program=Ve.createProgram(),Ve.attachShader(wt,Nt),Ve.attachShader(wt,Gt),Ft)for(Nt=0;Nt<Ft.length;++Nt)Gt=Ft[Nt],Ve.bindAttribLocation(wt,Gt[0],Gt[1]);Ve.linkProgram(wt),Gt=Ve.getProgramParameter(wt,35718),nt.profile&&(pt.stats.uniformsCount=Gt);var an=pt.uniforms;for(Nt=0;Nt<Gt;++Nt)if(Ft=Ve.getActiveUniform(wt,Nt))if(1<Ft.size)for(var Wt=0;Wt<Ft.size;++Wt){var Yt=Ft.name.replace("[0]","["+Wt+"]");Fe(an,new De(Yt,Ze.id(Yt),Ve.getUniformLocation(wt,Yt),Ft))}else Fe(an,new De(Ft.name,Ze.id(Ft.name),Ve.getUniformLocation(wt,Ft.name),Ft));for(Gt=Ve.getProgramParameter(wt,35721),nt.profile&&(pt.stats.attributesCount=Gt),pt=pt.attributes,Nt=0;Nt<Gt;++Nt)(Ft=Ve.getActiveAttrib(wt,Nt))&&Fe(pt,new De(Ft.name,Ze.id(Ft.name),Ve.getAttribLocation(wt,Ft.name),Ft))}var dt={},mt={},ft={},kt=[],ht=0;return nt.profile&&(st.getMaxUniformsCount=function(){var pt=0;return kt.forEach(function(wt){wt.stats.uniformsCount>pt&&(pt=wt.stats.uniformsCount)}),pt},st.getMaxAttributesCount=function(){var pt=0;return kt.forEach(function(wt){wt.stats.attributesCount>pt&&(pt=wt.stats.attributesCount)}),pt}),{clear:function(){var pt=Ve.deleteShader.bind(Ve);me(dt).forEach(pt),dt={},me(mt).forEach(pt),mt={},kt.forEach(function(wt){Ve.deleteProgram(wt.program)}),kt.length=0,ft={},st.shaderCount=0},program:function(pt,wt,Ft,Nt){var Gt=ft[wt];Gt||(Gt=ft[wt]={});var an=Gt[pt];if(an&&(an.refCount++,!Nt))return an;var Wt=new tt(wt,pt);return st.shaderCount++,gt(Wt,Ft,Nt),an||(Gt[pt]=Wt),kt.push(Wt),J(Wt,{destroy:function(){if(Wt.refCount--,0>=Wt.refCount){Ve.deleteProgram(Wt.program);var Yt=kt.indexOf(Wt);kt.splice(Yt,1),st.shaderCount--}0>=Gt[Wt.vertId].refCount&&(Ve.deleteShader(mt[Wt.vertId]),delete mt[Wt.vertId],delete ft[Wt.fragId][Wt.vertId]),Object.keys(ft[Wt.fragId]).length||(Ve.deleteShader(dt[Wt.fragId]),delete dt[Wt.fragId],delete ft[Wt.fragId])}})},restore:function(){dt={},mt={};for(var pt=0;pt<kt.length;++pt)gt(kt[pt],null,kt[pt].attributes.map(function(wt){return[wt.location,wt.name]}))},shader:rt,frag:-1,vert:-1}}function O(Ve,Ze,st,nt,De,Fe,rt){function tt(gt){var dt;dt=Ze.next===null?5121:Ze.next.colorAttachments[0].texture._texture.type;var mt=0,ft=0,kt=nt.framebufferWidth,ht=nt.framebufferHeight,pt=null;return xe(gt)?pt=gt:gt&&(mt=0|gt.x,ft=0|gt.y,kt=0|(gt.width||nt.framebufferWidth-mt),ht=0|(gt.height||nt.framebufferHeight-ft),pt=gt.data||null),st(),gt=kt*ht*4,pt||(dt===5121?pt=new Uint8Array(gt):dt===5126&&(pt=pt||new Float32Array(gt))),Ve.pixelStorei(3333,4),Ve.readPixels(mt,ft,kt,ht,6408,dt,pt),pt}return function(gt){return gt&&"framebuffer"in gt?function(dt){var mt;return Ze.setFBO({framebuffer:dt.framebuffer},function(){mt=tt(dt)}),mt}(gt):tt(gt)}}function z(Ve,Ze){return Ve>>>Ze|Ve<<32-Ze}function G(Ve,Ze){var st=(65535&Ve)+(65535&Ze);return(Ve>>16)+(Ze>>16)+(st>>16)<<16|65535&st}function I(Ve){return Array.prototype.slice.call(Ve)}function H(Ve){return I(Ve).join("")}function N(Ve){function Ze(){var mt=[],ft=[];return J(function(){mt.push.apply(mt,I(arguments))},{def:function(){var kt="v"+De++;return ft.push(kt),0<arguments.length&&(mt.push(kt,"="),mt.push.apply(mt,I(arguments)),mt.push(";")),kt},toString:function(){return H([0<ft.length?"var "+ft.join(",")+";":"",H(mt)])}})}function st(){function mt(wt,Ft){kt(wt,Ft,"=",ft.def(wt,Ft),";")}var ft=Ze(),kt=Ze(),ht=ft.toString,pt=kt.toString;return J(function(){ft.apply(ft,I(arguments))},{def:ft.def,entry:ft,exit:kt,save:mt,set:function(wt,Ft,Nt){mt(wt,Ft),ft(wt,Ft,"=",Nt,";")},toString:function(){return ht()+pt()}})}var nt=Ve&&Ve.cache,De=0,Fe=[],rt=[],tt=[],gt=Ze(),dt={};return{global:gt,link:function(mt,ft){var kt=ft&&ft.stable;if(!kt){for(var ht=0;ht<rt.length;++ht)if(rt[ht]===mt&&!tt[ht])return Fe[ht]}return ht="g"+De++,Fe.push(ht),rt.push(mt),tt.push(kt),ht},block:Ze,proc:function(mt,ft){function kt(){var Ft="a"+ht.length;return ht.push(Ft),Ft}var ht=[];ft=ft||0;for(var pt=0;pt<ft;++pt)kt();var wt=(pt=st()).toString;return dt[mt]=J(pt,{arg:kt,toString:function(){return H(["function(",ht.join(),"){",wt(),"}"])}})},scope:st,cond:function(){var mt=H(arguments),ft=st(),kt=st(),ht=ft.toString,pt=kt.toString;return J(ft,{then:function(){return ft.apply(ft,I(arguments)),this},else:function(){return kt.apply(kt,I(arguments)),this},toString:function(){var wt=pt();return wt&&(wt="else{"+wt+"}"),H(["if(",mt,"){",ht(),"}",wt])}})},compile:function(){var mt=['"use strict";',gt,"return {"];Object.keys(dt).forEach(function(ht){mt.push('"',ht,'":',dt[ht].toString(),",")}),mt.push("}");var ft,kt=H(mt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return nt&&(ft=function(ht){for(var pt,wt="",Ft=0;Ft<ht.length;Ft++)pt=ht.charCodeAt(Ft),wt+="0123456789abcdef".charAt(pt>>>4&15)+"0123456789abcdef".charAt(15&pt);return wt}(function(ht){for(var pt=Array(ht.length>>2),wt=0;wt<pt.length;wt++)pt[wt]=0;for(wt=0;wt<8*ht.length;wt+=8)pt[wt>>5]|=(255&ht.charCodeAt(wt/8))<<24-wt%32;var Ft,Nt,Gt,an,Wt,Yt,en,Tn,Bn,mn,Kt,cn=8*ht.length;for(ht=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],wt=Array(64),pt[cn>>5]|=128<<24-cn%32,pt[15+(cn+64>>9<<4)]=cn,Tn=0;Tn<pt.length;Tn+=16){for(cn=ht[0],Ft=ht[1],Nt=ht[2],Gt=ht[3],an=ht[4],Wt=ht[5],Yt=ht[6],en=ht[7],Bn=0;64>Bn;Bn++){var tn;16>Bn?wt[Bn]=pt[Bn+Tn]:(mn=Bn,Kt=G(Kt=z(Kt=wt[Bn-2],17)^z(Kt,19)^Kt>>>10,wt[Bn-7]),tn=z(tn=wt[Bn-15],7)^z(tn,18)^tn>>>3,wt[mn]=G(G(Kt,tn),wt[Bn-16])),mn=G(G(G(G(en,mn=z(mn=an,6)^z(mn,11)^z(mn,25)),an&Wt^~an&Yt),at[Bn]),wt[Bn]),Kt=G(en=z(en=cn,2)^z(en,13)^z(en,22),cn&Ft^cn&Nt^Ft&Nt),en=Yt,Yt=Wt,Wt=an,an=G(Gt,mn),Gt=Nt,Nt=Ft,Ft=cn,cn=G(mn,Kt)}ht[0]=G(cn,ht[0]),ht[1]=G(Ft,ht[1]),ht[2]=G(Nt,ht[2]),ht[3]=G(Gt,ht[3]),ht[4]=G(an,ht[4]),ht[5]=G(Wt,ht[5]),ht[6]=G(Yt,ht[6]),ht[7]=G(en,ht[7])}for(pt="",wt=0;wt<32*ht.length;wt+=8)pt+=String.fromCharCode(ht[wt>>5]>>>24-wt%32&255);return pt}(function(ht){for(var pt,wt,Ft="",Nt=-1;++Nt<ht.length;)pt=ht.charCodeAt(Nt),wt=Nt+1<ht.length?ht.charCodeAt(Nt+1):0,55296<=pt&&56319>=pt&&56320<=wt&&57343>=wt&&(pt=65536+((1023&pt)<<10)+(1023&wt),Nt++),127>=pt?Ft+=String.fromCharCode(pt):2047>=pt?Ft+=String.fromCharCode(192|pt>>>6&31,128|63&pt):65535>=pt?Ft+=String.fromCharCode(224|pt>>>12&15,128|pt>>>6&63,128|63&pt):2097151>=pt&&(Ft+=String.fromCharCode(240|pt>>>18&7,128|pt>>>12&63,128|pt>>>6&63,128|63&pt));return Ft}(kt))),nt[ft])?nt[ft].apply(null,rt):(kt=Function.apply(null,Fe.concat(kt)),nt&&(nt[ft]=kt),kt.apply(null,rt))}}}function F(Ve){return Array.isArray(Ve)||xe(Ve)||e(Ve)}function V(Ve){return Ve.sort(function(Ze,st){return Ze==="viewport"?-1:st==="viewport"?1:Ze<st?-1:1})}function W(Ve,Ze,st,nt){this.thisDep=Ve,this.contextDep=Ze,this.propDep=st,this.append=nt}function te(Ve){return Ve&&!(Ve.thisDep||Ve.contextDep||Ve.propDep)}function Q(Ve){return new W(!1,!1,!1,Ve)}function X(Ve,Ze){var st=Ve.type;if(st===0)return new W(!0,1<=(st=Ve.data.length),2<=st,Ze);if(st===4)return new W((st=Ve.data).thisDep,st.contextDep,st.propDep,Ze);if(st===5)return new W(!1,!1,!1,Ze);if(st===6){for(var nt=st=!1,De=!1,Fe=0;Fe<Ve.data.length;++Fe){var rt=Ve.data[Fe];rt.type===1?De=!0:rt.type===2?nt=!0:rt.type===3?st=!0:rt.type===0?(st=!0,1<=(rt=rt.data)&&(nt=!0),2<=rt&&(De=!0)):rt.type===4&&(st=st||rt.data.thisDep,nt=nt||rt.data.contextDep,De=De||rt.data.propDep)}return new W(st,nt,De,Ze)}return new W(st===3,st===2,st===1,Ze)}function q(Ve,Ze,st,nt,De,Fe,rt,tt,gt,dt,mt,ft,kt,ht,pt,wt){function Ft(Et){return Et.replace(".","_")}function Nt(Et,Xt,nn){var An=Ft(Et);Xn.push(Et),Ln[An]=xn[An]=!!nn,Un[An]=Xt}function Gt(Et,Xt,nn){var An=Ft(Et);Xn.push(Et),Array.isArray(nn)?(xn[An]=nn.slice(),Ln[An]=nn.slice()):xn[An]=Ln[An]=nn,Hn[An]=Xt}function an(){var Et=N({cache:pt}),Xt=Et.link,nn=Et.global;Et.id=On++,Et.batchId="0";var An=Xt(Kn),Cn=Et.shared={props:"a0"};Object.keys(Kn).forEach(function(hn){Cn[hn]=nn.def(An,".",hn)});var Rn=Et.next={},gn=Et.current={};Object.keys(Hn).forEach(function(hn){Array.isArray(xn[hn])&&(Rn[hn]=nn.def(Cn.next,".",hn),gn[hn]=nn.def(Cn.current,".",hn))});var $t=Et.constants={};Object.keys(qt).forEach(function(hn){$t[hn]=nn.def(JSON.stringify(qt[hn]))}),Et.invoke=function(hn,vn){switch(vn.type){case 0:var Fn=["this",Cn.context,Cn.props,Et.batchId];return hn.def(Xt(vn.data),".call(",Fn.slice(0,Math.max(vn.data.length+1,4)),")");case 1:return hn.def(Cn.props,vn.data);case 2:return hn.def(Cn.context,vn.data);case 3:return hn.def("this",vn.data);case 4:return vn.data.append(Et,hn),vn.data.ref;case 5:return vn.data.toString();case 6:return vn.data.map(function(In){return Et.invoke(hn,In)})}},Et.attribCache={};var Qt={};return Et.scopeAttrib=function(hn){if((hn=Ze.id(hn))in Qt)return Qt[hn];var vn=dt.scope[hn];return vn||(vn=dt.scope[hn]=new $n),Qt[hn]=Xt(vn)},Et}function Wt(Et,Xt){var nn=Et.static,An=Et.dynamic;if("framebuffer"in nn){var Cn=nn.framebuffer;return Cn?(Cn=tt.getFramebuffer(Cn),Q(function(gn,$t){var Qt=gn.link(Cn),hn=gn.shared;return $t.set(hn.framebuffer,".next",Qt),hn=hn.context,$t.set(hn,".framebufferWidth",Qt+".width"),$t.set(hn,".framebufferHeight",Qt+".height"),Qt})):Q(function(gn,$t){var Qt=gn.shared;return $t.set(Qt.framebuffer,".next","null"),Qt=Qt.context,$t.set(Qt,".framebufferWidth",Qt+".drawingBufferWidth"),$t.set(Qt,".framebufferHeight",Qt+".drawingBufferHeight"),"null"})}if("framebuffer"in An){var Rn=An.framebuffer;return X(Rn,function(gn,$t){var Qt=gn.invoke($t,Rn),hn=gn.shared,vn=hn.framebuffer;return Qt=$t.def(vn,".getFramebuffer(",Qt,")"),$t.set(vn,".next",Qt),hn=hn.context,$t.set(hn,".framebufferWidth",Qt+"?"+Qt+".width:"+hn+".drawingBufferWidth"),$t.set(hn,".framebufferHeight",Qt+"?"+Qt+".height:"+hn+".drawingBufferHeight"),Qt})}return null}function Yt(Et,Xt,nn){function An(hn){if(hn in Cn){var vn=Ze.id(Cn[hn]);return(hn=Q(function(){return vn})).id=vn,hn}if(hn in Rn){var Fn=Rn[hn];return X(Fn,function(In,Qn){var Wn=In.invoke(Qn,Fn);return Qn.def(In.shared.strings,".id(",Wn,")")})}return null}var Cn=Et.static,Rn=Et.dynamic,gn=An("frag"),$t=An("vert"),Qt=null;return te(gn)&&te($t)?(Qt=mt.program($t.id,gn.id,null,nn),Et=Q(function(hn,vn){return hn.link(Qt)})):Et=new W(gn&&gn.thisDep||$t&&$t.thisDep,gn&&gn.contextDep||$t&&$t.contextDep,gn&&gn.propDep||$t&&$t.propDep,function(hn,vn){var Fn,In,Qn=hn.shared.shader;return Fn=gn?gn.append(hn,vn):vn.def(Qn,".","frag"),In=$t?$t.append(hn,vn):vn.def(Qn,".","vert"),vn.def(Qn+".program("+In+","+Fn+")")}),{frag:gn,vert:$t,progVar:Et,program:Qt}}function en(Et,Xt){function nn(Wn,Ke){if(Wn in An){var it=0|An[Wn];return Ke?Rn.offset=it:Rn.instances=it,Q(function(Lt,Bt){return Ke&&(Lt.OFFSET=it),it})}if(Wn in Cn){var Mt=Cn[Wn];return X(Mt,function(Lt,Bt){var ln=Lt.invoke(Bt,Mt);return Ke&&(Lt.OFFSET=ln),ln})}if(Ke){if(Qt)return Q(function(Lt,Bt){return Lt.OFFSET=0});if(gn)return new W($t.thisDep,$t.contextDep,$t.propDep,function(Lt,Bt){return Bt.def(Lt.shared.vao+".currentVAO?"+Lt.shared.vao+".currentVAO.offset:0")})}else if(gn)return new W($t.thisDep,$t.contextDep,$t.propDep,function(Lt,Bt){return Bt.def(Lt.shared.vao+".currentVAO?"+Lt.shared.vao+".currentVAO.instances:-1")});return null}var An=Et.static,Cn=Et.dynamic,Rn={},gn=!1,$t=function(){if("vao"in An){var Wn=An.vao;return Wn!==null&&dt.getVAO(Wn)===null&&(Wn=dt.createVAO(Wn)),gn=!0,Rn.vao=Wn,Q(function(it){var Mt=dt.getVAO(Wn);return Mt?it.link(Mt):"null"})}if("vao"in Cn){gn=!0;var Ke=Cn.vao;return X(Ke,function(it,Mt){var Lt=it.invoke(Mt,Ke);return Mt.def(it.shared.vao+".getVAO("+Lt+")")})}return null}(),Qt=!1,hn=function(){if("elements"in An){var Wn=An.elements;if(Rn.elements=Wn,F(Wn)){var Ke=Rn.elements=Fe.create(Wn,!0);Wn=Fe.getElements(Ke),Qt=!0}else Wn&&(Wn=Fe.getElements(Wn),Qt=!0);return Ke=Q(function(Mt,Lt){if(Wn){var Bt=Mt.link(Wn);return Mt.ELEMENTS=Bt}return Mt.ELEMENTS=null}),Ke.value=Wn,Ke}if("elements"in Cn){Qt=!0;var it=Cn.elements;return X(it,function(Mt,Lt){var Bt=(ln=Mt.shared).isBufferArgs,ln=ln.elements,wn=Mt.invoke(Lt,it),jn=Lt.def("null");return Bt=Lt.def(Bt,"(",wn,")"),wn=Mt.cond(Bt).then(jn,"=",ln,".createStream(",wn,");").else(jn,"=",ln,".getElements(",wn,");"),Lt.entry(wn),Lt.exit(Mt.cond(Bt).then(ln,".destroyStream(",jn,");")),Mt.ELEMENTS=jn})}return gn?new W($t.thisDep,$t.contextDep,$t.propDep,function(Mt,Lt){return Lt.def(Mt.shared.vao+".currentVAO?"+Mt.shared.elements+".getElements("+Mt.shared.vao+".currentVAO.elements):null")}):null}(),vn=nn("offset",!0),Fn=function(){if("primitive"in An){var Wn=An.primitive;return Rn.primitive=Wn,Q(function(it,Mt){return Se[Wn]})}if("primitive"in Cn){var Ke=Cn.primitive;return X(Ke,function(it,Mt){var Lt=it.constants.primTypes,Bt=it.invoke(Mt,Ke);return Mt.def(Lt,"[",Bt,"]")})}return Qt?te(hn)?hn.value?Q(function(it,Mt){return Mt.def(it.ELEMENTS,".primType")}):Q(function(){return 4}):new W(hn.thisDep,hn.contextDep,hn.propDep,function(it,Mt){var Lt=it.ELEMENTS;return Mt.def(Lt,"?",Lt,".primType:",4)}):gn?new W($t.thisDep,$t.contextDep,$t.propDep,function(it,Mt){return Mt.def(it.shared.vao+".currentVAO?"+it.shared.vao+".currentVAO.primitive:4")}):null}(),In=function(){if("count"in An){var Wn=0|An.count;return Rn.count=Wn,Q(function(){return Wn})}if("count"in Cn){var Ke=Cn.count;return X(Ke,function(it,Mt){return it.invoke(Mt,Ke)})}return Qt?te(hn)?hn?vn?new W(vn.thisDep,vn.contextDep,vn.propDep,function(it,Mt){return Mt.def(it.ELEMENTS,".vertCount-",it.OFFSET)}):Q(function(it,Mt){return Mt.def(it.ELEMENTS,".vertCount")}):Q(function(){return-1}):new W(hn.thisDep||vn.thisDep,hn.contextDep||vn.contextDep,hn.propDep||vn.propDep,function(it,Mt){var Lt=it.ELEMENTS;return it.OFFSET?Mt.def(Lt,"?",Lt,".vertCount-",it.OFFSET,":-1"):Mt.def(Lt,"?",Lt,".vertCount:-1")}):gn?new W($t.thisDep,$t.contextDep,$t.propDep,function(it,Mt){return Mt.def(it.shared.vao,".currentVAO?",it.shared.vao,".currentVAO.count:-1")}):null}(),Qn=nn("instances",!1);return{elements:hn,primitive:Fn,count:In,instances:Qn,offset:vn,vao:$t,vaoActive:gn,elementsActive:Qt,static:Rn}}function Tn(Et,Xt){var nn=Et.static,An=Et.dynamic,Cn={};return Object.keys(nn).forEach(function(Rn){var gn=nn[Rn],$t=Ze.id(Rn),Qt=new $n;if(F(gn))Qt.state=1,Qt.buffer=De.getBuffer(De.create(gn,34962,!1,!0)),Qt.type=0;else if(vn=De.getBuffer(gn))Qt.state=1,Qt.buffer=vn,Qt.type=0;else if("constant"in gn){var hn=gn.constant;Qt.buffer="null",Qt.state=2,typeof hn=="number"?Qt.x=hn:ot.forEach(function(it,Mt){Mt<hn.length&&(Qt[it]=hn[Mt])})}else{var vn=F(gn.buffer)?De.getBuffer(De.create(gn.buffer,34962,!1,!0)):De.getBuffer(gn.buffer),Fn=0|gn.offset,In=0|gn.stride,Qn=0|gn.size,Wn=!!gn.normalized,Ke=0;"type"in gn&&(Ke=Ae[gn.type]),gn=0|gn.divisor,Qt.buffer=vn,Qt.state=1,Qt.size=Qn,Qt.normalized=Wn,Qt.type=Ke||vn.dtype,Qt.offset=Fn,Qt.stride=In,Qt.divisor=gn}Cn[Rn]=Q(function(it,Mt){var Lt=it.attribCache;if($t in Lt)return Lt[$t];var Bt={isStream:!1};return Object.keys(Qt).forEach(function(ln){Bt[ln]=Qt[ln]}),Qt.buffer&&(Bt.buffer=it.link(Qt.buffer),Bt.type=Bt.type||Bt.buffer+".dtype"),Lt[$t]=Bt})}),Object.keys(An).forEach(function(Rn){var gn=An[Rn];Cn[Rn]=X(gn,function($t,Qt){function hn(Lt){Qt(Wn[Lt],"=",vn,".",Lt,"|0;")}var vn=$t.invoke(Qt,gn),Fn=$t.shared,In=$t.constants,Qn=Fn.isBufferArgs,Wn=(Fn=Fn.buffer,{isStream:Qt.def(!1)}),Ke=new $n;Ke.state=1,Object.keys(Ke).forEach(function(Lt){Wn[Lt]=Qt.def(""+Ke[Lt])});var it=Wn.buffer,Mt=Wn.type;return Qt("if(",Qn,"(",vn,")){",Wn.isStream,"=true;",it,"=",Fn,".createStream(",34962,",",vn,");",Mt,"=",it,".dtype;","}else{",it,"=",Fn,".getBuffer(",vn,");","if(",it,"){",Mt,"=",it,".dtype;",'}else if("constant" in ',vn,"){",Wn.state,"=",2,";","if(typeof "+vn+'.constant === "number"){',Wn[ot[0]],"=",vn,".constant;",ot.slice(1).map(function(Lt){return Wn[Lt]}).join("="),"=0;","}else{",ot.map(function(Lt,Bt){return Wn[Lt]+"="+vn+".constant.length>"+Bt+"?"+vn+".constant["+Bt+"]:0;"}).join(""),"}}else{","if(",Qn,"(",vn,".buffer)){",it,"=",Fn,".createStream(",34962,",",vn,".buffer);","}else{",it,"=",Fn,".getBuffer(",vn,".buffer);","}",Mt,'="type" in ',vn,"?",In.glTypes,"[",vn,".type]:",it,".dtype;",Wn.normalized,"=!!",vn,".normalized;"),hn("size"),hn("offset"),hn("stride"),hn("divisor"),Qt("}}"),Qt.exit("if(",Wn.isStream,"){",Fn,".destroyStream(",it,");","}"),Wn})}),Cn}function Bn(Et,Xt,nn,An,Cn){function Rn(Ke){var it=$t[Ke];it&&(hn[Ke]=it)}var gn=function(Ke,it){if(typeof(Mt=Ke.static).frag=="string"&&typeof Mt.vert=="string"){if(0<Object.keys(it.dynamic).length)return null;var Mt=it.static,Lt=Object.keys(Mt);if(0<Lt.length&&typeof Mt[Lt[0]]=="number"){for(var Bt=[],ln=0;ln<Lt.length;++ln)Bt.push([0|Mt[Lt[ln]],Lt[ln]]);return Bt}}return null}(Et,Xt),$t=function(Ke,it,Mt){function Lt(jn){if(jn in Bt){var bn=Bt[jn];jn=!0;var qn,or,ar=0|bn.x,mr=0|bn.y;return"width"in bn?qn=0|bn.width:jn=!1,"height"in bn?or=0|bn.height:jn=!1,new W(!jn&&it&&it.thisDep,!jn&&it&&it.contextDep,!jn&&it&&it.propDep,function(Cr,Br){var Wr=Cr.shared.context,fi=qn;"width"in bn||(fi=Br.def(Wr,".","framebufferWidth","-",ar));var pi=or;return"height"in bn||(pi=Br.def(Wr,".","framebufferHeight","-",mr)),[ar,mr,fi,pi]})}if(jn in ln){var kr=ln[jn];return jn=X(kr,function(Cr,Br){var Wr=Cr.invoke(Br,kr),fi=Cr.shared.context,pi=Br.def(Wr,".x|0"),bi=Br.def(Wr,".y|0");return[pi,bi,Br.def('"width" in ',Wr,"?",Wr,".width|0:","(",fi,".","framebufferWidth","-",pi,")"),Wr=Br.def('"height" in ',Wr,"?",Wr,".height|0:","(",fi,".","framebufferHeight","-",bi,")")]}),it&&(jn.thisDep=jn.thisDep||it.thisDep,jn.contextDep=jn.contextDep||it.contextDep,jn.propDep=jn.propDep||it.propDep),jn}return it?new W(it.thisDep,it.contextDep,it.propDep,function(Cr,Br){var Wr=Cr.shared.context;return[0,0,Br.def(Wr,".","framebufferWidth"),Br.def(Wr,".","framebufferHeight")]}):null}var Bt=Ke.static,ln=Ke.dynamic;if(Ke=Lt("viewport")){var wn=Ke;Ke=new W(Ke.thisDep,Ke.contextDep,Ke.propDep,function(jn,bn){var qn=wn.append(jn,bn),or=jn.shared.context;return bn.set(or,".viewportWidth",qn[2]),bn.set(or,".viewportHeight",qn[3]),qn})}return{viewport:Ke,scissor_box:Lt("scissor.box")}}(Et,Fn=Wt(Et)),Qt=en(Et),hn=function(Ke,it){var Mt=Ke.static,Lt=Ke.dynamic,Bt={};return Xn.forEach(function(ln){function wn(bn,qn){if(ln in Mt){var or=bn(Mt[ln]);Bt[jn]=Q(function(){return or})}else if(ln in Lt){var ar=Lt[ln];Bt[jn]=X(ar,function(mr,kr){return qn(mr,kr,mr.invoke(kr,ar))})}}var jn=Ft(ln);switch(ln){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return wn(function(bn){return bn},function(bn,qn,or){return or});case"depth.func":return wn(function(bn){return zt[bn]},function(bn,qn,or){return qn.def(bn.constants.compareFuncs,"[",or,"]")});case"depth.range":return wn(function(bn){return bn},function(bn,qn,or){return[qn.def("+",or,"[0]"),qn=qn.def("+",or,"[1]")]});case"blend.func":return wn(function(bn){return[Ct["srcRGB"in bn?bn.srcRGB:bn.src],Ct["dstRGB"in bn?bn.dstRGB:bn.dst],Ct["srcAlpha"in bn?bn.srcAlpha:bn.src],Ct["dstAlpha"in bn?bn.dstAlpha:bn.dst]]},function(bn,qn,or){function ar(Br,Wr){return qn.def('"',Br,Wr,'" in ',or,"?",or,".",Br,Wr,":",or,".",Br)}bn=bn.constants.blendFuncs;var mr=ar("src","RGB"),kr=ar("dst","RGB"),Cr=(mr=qn.def(bn,"[",mr,"]"),qn.def(bn,"[",ar("src","Alpha"),"]"));return[mr,kr=qn.def(bn,"[",kr,"]"),Cr,bn=qn.def(bn,"[",ar("dst","Alpha"),"]")]});case"blend.equation":return wn(function(bn){return typeof bn=="string"?[vr[bn],vr[bn]]:typeof bn=="object"?[vr[bn.rgb],vr[bn.alpha]]:void 0},function(bn,qn,or){var ar=bn.constants.blendEquations,mr=qn.def(),kr=qn.def();return(bn=bn.cond("typeof ",or,'==="string"')).then(mr,"=",kr,"=",ar,"[",or,"];"),bn.else(mr,"=",ar,"[",or,".rgb];",kr,"=",ar,"[",or,".alpha];"),qn(bn),[mr,kr]});case"blend.color":return wn(function(bn){return m(4,function(qn){return+bn[qn]})},function(bn,qn,or){return m(4,function(ar){return qn.def("+",or,"[",ar,"]")})});case"stencil.mask":return wn(function(bn){return 0|bn},function(bn,qn,or){return qn.def(or,"|0")});case"stencil.func":return wn(function(bn){return[zt[bn.cmp||"keep"],bn.ref||0,"mask"in bn?bn.mask:-1]},function(bn,qn,or){return[bn=qn.def('"cmp" in ',or,"?",bn.constants.compareFuncs,"[",or,".cmp]",":",7680),qn.def(or,".ref|0"),qn=qn.def('"mask" in ',or,"?",or,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return wn(function(bn){return[ln==="stencil.opBack"?1029:1028,St[bn.fail||"keep"],St[bn.zfail||"keep"],St[bn.zpass||"keep"]]},function(bn,qn,or){function ar(kr){return qn.def('"',kr,'" in ',or,"?",mr,"[",or,".",kr,"]:",7680)}var mr=bn.constants.stencilOps;return[ln==="stencil.opBack"?1029:1028,ar("fail"),ar("zfail"),ar("zpass")]});case"polygonOffset.offset":return wn(function(bn){return[0|bn.factor,0|bn.units]},function(bn,qn,or){return[qn.def(or,".factor|0"),qn=qn.def(or,".units|0")]});case"cull.face":return wn(function(bn){var qn=0;return bn==="front"?qn=1028:bn==="back"&&(qn=1029),qn},function(bn,qn,or){return qn.def(or,'==="front"?',1028,":",1029)});case"frontFace":return wn(function(bn){return qe[bn]},function(bn,qn,or){return qn.def(or+'==="cw"?2304:2305')});case"colorMask":return wn(function(bn){return bn.map(function(qn){return!!qn})},function(bn,qn,or){return m(4,function(ar){return"!!"+or+"["+ar+"]"})});case"sample.coverage":return wn(function(bn){return["value"in bn?bn.value:1,!!bn.invert]},function(bn,qn,or){return[qn.def('"value" in ',or,"?+",or,".value:1"),qn=qn.def("!!",or,".invert")]})}}),Bt}(Et),vn=Yt(Et,0,gn);Rn("viewport"),Rn(Ft("scissor.box"));var Fn,In=0<Object.keys(hn).length;if((Fn={framebuffer:Fn,draw:Qt,shader:vn,state:hn,dirty:In,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(Ke){var it,Mt=Ke.static;if(Ke=Ke.dynamic,"profile"in Mt){var Lt=!!Mt.profile;(it=Q(function(ln,wn){return Lt})).enable=Lt}else if("profile"in Ke){var Bt=Ke.profile;it=X(Bt,function(ln,wn){return ln.invoke(wn,Bt)})}return it}(Et),Fn.uniforms=function(Ke,it){var Mt=Ke.static,Lt=Ke.dynamic,Bt={};return Object.keys(Mt).forEach(function(ln){var wn,jn=Mt[ln];if(typeof jn=="number"||typeof jn=="boolean")wn=Q(function(){return jn});else if(typeof jn=="function"){var bn=jn._reglType;bn==="texture2d"||bn==="textureCube"?wn=Q(function(qn){return qn.link(jn)}):bn!=="framebuffer"&&bn!=="framebufferCube"||(wn=Q(function(qn){return qn.link(jn.color[0])}))}else x(jn)&&(wn=Q(function(qn){return qn.global.def("[",m(jn.length,function(or){return jn[or]}),"]")}));wn.value=jn,Bt[ln]=wn}),Object.keys(Lt).forEach(function(ln){var wn=Lt[ln];Bt[ln]=X(wn,function(jn,bn){return jn.invoke(bn,wn)})}),Bt}(nn),Fn.drawVAO=Fn.scopeVAO=Qt.vao,!Fn.drawVAO&&vn.program&&!gn&&st.angle_instanced_arrays&&Qt.static.elements){var Qn=!0;if(Et=vn.program.attributes.map(function(Ke){return Ke=Xt.static[Ke],Qn=Qn&&!!Ke,Ke}),Qn&&0<Et.length){var Wn=dt.getVAO(dt.createVAO({attributes:Et,elements:Qt.static.elements}));Fn.drawVAO=new W(null,null,null,function(Ke,it){return Ke.link(Wn)}),Fn.useVAO=!0}}return gn?Fn.useVAO=!0:Fn.attributes=Tn(Xt),Fn.context=function(Ke){var it=Ke.static,Mt=Ke.dynamic,Lt={};return Object.keys(it).forEach(function(Bt){var ln=it[Bt];Lt[Bt]=Q(function(wn,jn){return typeof ln=="number"||typeof ln=="boolean"?""+ln:wn.link(ln)})}),Object.keys(Mt).forEach(function(Bt){var ln=Mt[Bt];Lt[Bt]=X(ln,function(wn,jn){return wn.invoke(jn,ln)})}),Lt}(An),Fn}function mn(Et,Xt,nn){var An=Et.shared.context,Cn=Et.scope();Object.keys(nn).forEach(function(Rn){Xt.save(An,"."+Rn);var gn=nn[Rn].append(Et,Xt);Array.isArray(gn)?Cn(An,".",Rn,"=[",gn.join(),"];"):Cn(An,".",Rn,"=",gn,";")}),Xt(Cn)}function Kt(Et,Xt,nn,An){var Cn,Rn=($t=Et.shared).gl,gn=$t.framebuffer;rn&&(Cn=Xt.def($t.extensions,".webgl_draw_buffers"));var $t=(Qt=Et.constants).drawBuffer,Qt=Qt.backBuffer;Et=nn?nn.append(Et,Xt):Xt.def(gn,".next"),An||Xt("if(",Et,"!==",gn,".cur){"),Xt("if(",Et,"){",Rn,".bindFramebuffer(",36160,",",Et,".framebuffer);"),rn&&Xt(Cn,".drawBuffersWEBGL(",$t,"[",Et,".colorAttachments.length]);"),Xt("}else{",Rn,".bindFramebuffer(",36160,",null);"),rn&&Xt(Cn,".drawBuffersWEBGL(",Qt,");"),Xt("}",gn,".cur=",Et,";"),An||Xt("}")}function cn(Et,Xt,nn){var An=Et.shared,Cn=An.gl,Rn=Et.current,gn=Et.next,$t=An.current,Qt=An.next,hn=Et.cond($t,".dirty");Xn.forEach(function(vn){var Fn,In;if(!((vn=Ft(vn))in nn.state))if(vn in gn){Fn=gn[vn],In=Rn[vn];var Qn=m(xn[vn].length,function(Wn){return hn.def(Fn,"[",Wn,"]")});hn(Et.cond(Qn.map(function(Wn,Ke){return Wn+"!=="+In+"["+Ke+"]"}).join("||")).then(Cn,".",Hn[vn],"(",Qn,");",Qn.map(function(Wn,Ke){return In+"["+Ke+"]="+Wn}).join(";"),";"))}else Fn=hn.def(Qt,".",vn),Qn=Et.cond(Fn,"!==",$t,".",vn),hn(Qn),vn in Un?Qn(Et.cond(Fn).then(Cn,".enable(",Un[vn],");").else(Cn,".disable(",Un[vn],");"),$t,".",vn,"=",Fn,";"):Qn(Cn,".",Hn[vn],"(",Fn,");",$t,".",vn,"=",Fn,";")}),Object.keys(nn.state).length===0&&hn($t,".dirty=false;"),Xt(hn)}function tn(Et,Xt,nn,An){var Cn,Rn=Et.shared,gn=Et.current,$t=Rn.current,Qt=Rn.gl;V(Object.keys(nn)).forEach(function(hn){var vn=nn[hn];if(!An||An(vn)){var Fn=vn.append(Et,Xt);if(Un[hn]){var In=Un[hn];te(vn)?(Cn=Et.link(Fn,{stable:!0}),Xt(Et.cond(Cn).then(Qt,".enable(",In,");").else(Qt,".disable(",In,");")),Xt($t,".",hn,"=",Cn,";")):(Xt(Et.cond(Fn).then(Qt,".enable(",In,");").else(Qt,".disable(",In,");")),Xt($t,".",hn,"=",Fn,";"))}else if(x(Fn)){var Qn=gn[hn];Xt(Qt,".",Hn[hn],"(",Fn,");",Fn.map(function(Wn,Ke){return Qn+"["+Ke+"]="+Wn}).join(";"),";")}else te(vn)?(Cn=Et.link(Fn,{stable:!0}),Xt(Qt,".",Hn[hn],"(",Cn,");",$t,".",hn,"=",Cn,";")):Xt(Qt,".",Hn[hn],"(",Fn,");",$t,".",hn,"=",Fn,";")}})}function un(Et,Xt){jt&&(Et.instancing=Xt.def(Et.shared.extensions,".angle_instanced_arrays"))}function yn(Et,Xt,nn,An,Cn){function Rn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function gn(Ke){Ke(hn=Xt.def(),"=",Rn(),";"),typeof Cn=="string"?Ke(In,".count+=",Cn,";"):Ke(In,".count++;"),ht&&(An?Ke(vn=Xt.def(),"=",Wn,".getNumPendingQueries();"):Ke(Wn,".beginQuery(",In,");"))}function $t(Ke){Ke(In,".cpuTime+=",Rn(),"-",hn,";"),ht&&(An?Ke(Wn,".pushScopeStats(",vn,",",Wn,".getNumPendingQueries(),",In,");"):Ke(Wn,".endQuery();"))}function Qt(Ke){var it=Xt.def(Qn,".profile");Xt(Qn,".profile=",Ke,";"),Xt.exit(Qn,".profile=",it,";")}var hn,vn,Fn=Et.shared,In=Et.stats,Qn=Fn.current,Wn=Fn.timer;if(nn=nn.profile){if(te(nn))return void(nn.enable?(gn(Xt),$t(Xt.exit),Qt("true")):Qt("false"));Qt(nn=nn.append(Et,Xt))}else nn=Xt.def(Qn,".profile");gn(Fn=Et.block()),Xt("if(",nn,"){",Fn,"}"),$t(Et=Et.block()),Xt.exit("if(",nn,"){",Et,"}")}function En(Et,Xt,nn,An,Cn){function Rn($t,Qt,hn){function vn(){Xt("if(!",Wn,".buffer){",In,".enableVertexAttribArray(",Qn,");}");var Lt,Bt=hn.type;Lt=hn.size?Xt.def(hn.size,"||",Qt):Qt,Xt("if(",Wn,".type!==",Bt,"||",Wn,".size!==",Lt,"||",Mt.map(function(ln){return Wn+"."+ln+"!=="+hn[ln]}).join("||"),"){",In,".bindBuffer(",34962,",",Ke,".buffer);",In,".vertexAttribPointer(",[Qn,Lt,Bt,hn.normalized,hn.stride,hn.offset],");",Wn,".type=",Bt,";",Wn,".size=",Lt,";",Mt.map(function(ln){return Wn+"."+ln+"="+hn[ln]+";"}).join(""),"}"),jt&&(Bt=hn.divisor,Xt("if(",Wn,".divisor!==",Bt,"){",Et.instancing,".vertexAttribDivisorANGLE(",[Qn,Bt],");",Wn,".divisor=",Bt,";}"))}function Fn(){Xt("if(",Wn,".buffer){",In,".disableVertexAttribArray(",Qn,");",Wn,".buffer=null;","}if(",ot.map(function(Lt,Bt){return Wn+"."+Lt+"!=="+it[Bt]}).join("||"),"){",In,".vertexAttrib4f(",Qn,",",it,");",ot.map(function(Lt,Bt){return Wn+"."+Lt+"="+it[Bt]+";"}).join(""),"}")}var In=gn.gl,Qn=Xt.def($t,".location"),Wn=Xt.def(gn.attributes,"[",Qn,"]");$t=hn.state;var Ke=hn.buffer,it=[hn.x,hn.y,hn.z,hn.w],Mt=["buffer","normalized","offset","stride"];$t===1?vn():$t===2?Fn():(Xt("if(",$t,"===",1,"){"),vn(),Xt("}else{"),Fn(),Xt("}"))}var gn=Et.shared;An.forEach(function($t){var Qt,hn=$t.name,vn=nn.attributes[hn];if(vn){if(!Cn(vn))return;Qt=vn.append(Et,Xt)}else{if(!Cn(Xe))return;var Fn=Et.scopeAttrib(hn);Qt={},Object.keys(new $n).forEach(function(In){Qt[In]=Xt.def(Fn,".",In)})}Rn(Et.link($t),function(In){switch(In){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}($t.info.type),Qt)})}function Sn(Et,Xt,nn,An,Cn,Rn){for(var gn,$t=Et.shared,Qt=$t.gl,hn=0;hn<An.length;++hn){var vn,Fn=(Wn=An[hn]).name,In=Wn.info.type,Qn=nn.uniforms[Fn],Wn=Et.link(Wn)+".location";if(Qn){if(!Cn(Qn))continue;if(te(Qn)){if(Fn=Qn.value,In===35678||In===35680)Xt(Qt,".uniform1i(",Wn,",",(In=Et.link(Fn._texture||Fn.color[0]._texture))+".bind());"),Xt.exit(In,".unbind();");else if(In===35674||In===35675||In===35676)Qn=2,In===35675?Qn=3:In===35676&&(Qn=4),Xt(Qt,".uniformMatrix",Qn,"fv(",Wn,",false,",Fn=Et.global.def("new Float32Array(["+Array.prototype.slice.call(Fn)+"])"),");");else{switch(In){case 5126:gn="1f";break;case 35664:gn="2f";break;case 35665:gn="3f";break;case 35666:gn="4f";break;case 35670:case 5124:gn="1i";break;case 35671:case 35667:gn="2i";break;case 35672:case 35668:gn="3i";break;case 35673:case 35669:gn="4i"}Xt(Qt,".uniform",gn,"(",Wn,",",x(Fn)?Array.prototype.slice.call(Fn):Fn,");")}continue}vn=Qn.append(Et,Xt)}else{if(!Cn(Xe))continue;vn=Xt.def($t.uniforms,"[",Ze.id(Fn),"]")}switch(In===35678?Xt("if(",vn,"&&",vn,'._reglType==="framebuffer"){',vn,"=",vn,".color[0];","}"):In===35680&&Xt("if(",vn,"&&",vn,'._reglType==="framebufferCube"){',vn,"=",vn,".color[0];","}"),Fn=1,In){case 35678:case 35680:In=Xt.def(vn,"._texture"),Xt(Qt,".uniform1i(",Wn,",",In,".bind());"),Xt.exit(In,".unbind();");continue;case 5124:case 35670:gn="1i";break;case 35667:case 35671:gn="2i",Fn=2;break;case 35668:case 35672:gn="3i",Fn=3;break;case 35669:case 35673:gn="4i",Fn=4;break;case 5126:gn="1f";break;case 35664:gn="2f",Fn=2;break;case 35665:gn="3f",Fn=3;break;case 35666:gn="4f",Fn=4;break;case 35674:gn="Matrix2fv";break;case 35675:gn="Matrix3fv";break;case 35676:gn="Matrix4fv"}if(gn.charAt(0)==="M"){Xt(Qt,".uniform",gn,"(",Wn,","),Wn=Math.pow(In-35674+2,2);var Ke=Et.global.def("new Float32Array(",Wn,")");Array.isArray(vn)?Xt("false,(",m(Wn,function(Mt){return Ke+"["+Mt+"]="+vn[Mt]}),",",Ke,")"):Xt("false,(Array.isArray(",vn,")||",vn," instanceof Float32Array)?",vn,":(",m(Wn,function(Mt){return Ke+"["+Mt+"]="+vn+"["+Mt+"]"}),",",Ke,")"),Xt(");")}else{if(1<Fn){In=[];var it=[];for(Qn=0;Qn<Fn;++Qn)Array.isArray(vn)?it.push(vn[Qn]):it.push(Xt.def(vn+"["+Qn+"]")),Rn&&In.push(Xt.def());Rn&&Xt("if(!",Et.batchId,"||",In.map(function(Mt,Lt){return Mt+"!=="+it[Lt]}).join("||"),"){",In.map(function(Mt,Lt){return Mt+"="+it[Lt]+";"}).join("")),Xt(Qt,".uniform",gn,"(",Wn,",",it.join(","),");")}else Rn&&(In=Xt.def(),Xt("if(!",Et.batchId,"||",In,"!==",vn,"){",In,"=",vn,";")),Xt(Qt,".uniform",gn,"(",Wn,",",vn,");");Rn&&Xt("}")}}}function Nn(Et,Xt,nn,An){function Cn(Bt){var ln=In[Bt];return ln?ln.contextDep&&An.contextDynamic||ln.propDep?ln.append(Et,nn):ln.append(Et,Xt):Xt.def(Fn,".",Bt)}function Rn(){function Bt(){nn(Qt,".drawElementsInstancedANGLE(",[Wn,it,Mt,Ke+"<<(("+Mt+"-5121)>>1)",$t],");")}function ln(){nn(Qt,".drawArraysInstancedANGLE(",[Wn,Ke,it,$t],");")}Qn&&Qn!=="null"?Lt?Bt():(nn("if(",Qn,"){"),Bt(),nn("}else{"),ln(),nn("}")):ln()}function gn(){function Bt(){nn(vn+".drawElements("+[Wn,it,Mt,Ke+"<<(("+Mt+"-5121)>>1)"]+");")}function ln(){nn(vn+".drawArrays("+[Wn,Ke,it]+");")}Qn&&Qn!=="null"?Lt?Bt():(nn("if(",Qn,"){"),Bt(),nn("}else{"),ln(),nn("}")):ln()}var $t,Qt,hn=Et.shared,vn=hn.gl,Fn=hn.draw,In=An.draw,Qn=function(){var Bt=In.elements,ln=Xt;return Bt?((Bt.contextDep&&An.contextDynamic||Bt.propDep)&&(ln=nn),Bt=Bt.append(Et,ln),In.elementsActive&&ln("if("+Bt+")"+vn+".bindBuffer(34963,"+Bt+".buffer.buffer);")):(Bt=ln.def(),ln(Bt,"=",Fn,".","elements",";","if(",Bt,"){",vn,".bindBuffer(",34963,",",Bt,".buffer.buffer);}","else if(",hn.vao,".currentVAO){",Bt,"=",Et.shared.elements+".getElements("+hn.vao,".currentVAO.elements);",fn?"":"if("+Bt+")"+vn+".bindBuffer(34963,"+Bt+".buffer.buffer);","}")),Bt}(),Wn=Cn("primitive"),Ke=Cn("offset"),it=function(){var Bt=In.count,ln=Xt;return Bt?((Bt.contextDep&&An.contextDynamic||Bt.propDep)&&(ln=nn),Bt=Bt.append(Et,ln)):Bt=ln.def(Fn,".","count"),Bt}();if(typeof it=="number"){if(it===0)return}else nn("if(",it,"){"),nn.exit("}");jt&&($t=Cn("instances"),Qt=Et.instancing);var Mt=Qn+".type",Lt=In.elements&&te(In.elements)&&!In.vaoActive;jt&&(typeof $t!="number"||0<=$t)?typeof $t=="string"?(nn("if(",$t,">0){"),Rn(),nn("}else if(",$t,"<0){"),gn(),nn("}")):Rn():gn()}function _n(Et,Xt,nn,An,Cn){return Cn=(Xt=an()).proc("body",Cn),jt&&(Xt.instancing=Cn.def(Xt.shared.extensions,".angle_instanced_arrays")),Et(Xt,Cn,nn,An),Xt.compile().body}function Pn(Et,Xt,nn,An){un(Et,Xt),nn.useVAO?nn.drawVAO?Xt(Et.shared.vao,".setVAO(",nn.drawVAO.append(Et,Xt),");"):Xt(Et.shared.vao,".setVAO(",Et.shared.vao,".targetVAO);"):(Xt(Et.shared.vao,".setVAO(null);"),En(Et,Xt,nn,An.attributes,function(){return!0})),Sn(Et,Xt,nn,An.uniforms,function(){return!0},!1),Nn(Et,Xt,Xt,nn)}function tr(Et,Xt,nn,An){function Cn(){return!0}Et.batchId="a1",un(Et,Xt),En(Et,Xt,nn,An.attributes,Cn),Sn(Et,Xt,nn,An.uniforms,Cn,!1),Nn(Et,Xt,Xt,nn)}function ur(Et,Xt,nn,An){function Cn(Fn){return Fn.contextDep&&gn||Fn.propDep}function Rn(Fn){return!Cn(Fn)}un(Et,Xt);var gn=nn.contextDep,$t=Xt.def(),Qt=Xt.def();Et.shared.props=Qt,Et.batchId=$t;var hn=Et.scope(),vn=Et.scope();Xt(hn.entry,"for(",$t,"=0;",$t,"<","a1",";++",$t,"){",Qt,"=","a0","[",$t,"];",vn,"}",hn.exit),nn.needsContext&&mn(Et,vn,nn.context),nn.needsFramebuffer&&Kt(Et,vn,nn.framebuffer),tn(Et,vn,nn.state,Cn),nn.profile&&Cn(nn.profile)&&yn(Et,vn,nn,!1,!0),An?(nn.useVAO?nn.drawVAO?Cn(nn.drawVAO)?vn(Et.shared.vao,".setVAO(",nn.drawVAO.append(Et,vn),");"):hn(Et.shared.vao,".setVAO(",nn.drawVAO.append(Et,hn),");"):hn(Et.shared.vao,".setVAO(",Et.shared.vao,".targetVAO);"):(hn(Et.shared.vao,".setVAO(null);"),En(Et,hn,nn,An.attributes,Rn),En(Et,vn,nn,An.attributes,Cn)),Sn(Et,hn,nn,An.uniforms,Rn,!1),Sn(Et,vn,nn,An.uniforms,Cn,!0),Nn(Et,hn,vn,nn)):(Xt=Et.global.def("{}"),An=nn.shader.progVar.append(Et,vn),Qt=vn.def(An,".id"),hn=vn.def(Xt,"[",Qt,"]"),vn(Et.shared.gl,".useProgram(",An,".program);","if(!",hn,"){",hn,"=",Xt,"[",Qt,"]=",Et.link(function(Fn){return _n(tr,Et,nn,Fn,2)}),"(",An,");}",hn,".call(this,a0[",$t,"],",$t,");"))}function lr(Et,Xt){function nn($t){var Qt=Xt.shader[$t];Qt&&(Qt=Qt.append(Et,An),isNaN(Qt)?An.set(Cn.shader,"."+$t,Qt):An.set(Cn.shader,"."+$t,Et.link(Qt,{stable:!0})))}var An=Et.proc("scope",3);Et.batchId="a2";var Cn=Et.shared,Rn=Cn.current;if(mn(Et,An,Xt.context),Xt.framebuffer&&Xt.framebuffer.append(Et,An),V(Object.keys(Xt.state)).forEach(function($t){var Qt=Xt.state[$t],hn=Qt.append(Et,An);x(hn)?hn.forEach(function(vn,Fn){isNaN(vn)?An.set(Et.next[$t],"["+Fn+"]",vn):An.set(Et.next[$t],"["+Fn+"]",Et.link(vn,{stable:!0}))}):te(Qt)?An.set(Cn.next,"."+$t,Et.link(hn,{stable:!0})):An.set(Cn.next,"."+$t,hn)}),yn(Et,An,Xt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function($t){var Qt=Xt.draw[$t];Qt&&(Qt=Qt.append(Et,An),isNaN(Qt)?An.set(Cn.draw,"."+$t,Qt):An.set(Cn.draw,"."+$t,Et.link(Qt),{stable:!0}))}),Object.keys(Xt.uniforms).forEach(function($t){var Qt=Xt.uniforms[$t].append(Et,An);Array.isArray(Qt)&&(Qt="["+Qt.map(function(hn){return isNaN(hn)?hn:Et.link(hn,{stable:!0})})+"]"),An.set(Cn.uniforms,"["+Et.link(Ze.id($t),{stable:!0})+"]",Qt)}),Object.keys(Xt.attributes).forEach(function($t){var Qt=Xt.attributes[$t].append(Et,An),hn=Et.scopeAttrib($t);Object.keys(new $n).forEach(function(vn){An.set(hn,"."+vn,Qt[vn])})}),Xt.scopeVAO){var gn=Xt.scopeVAO.append(Et,An);isNaN(gn)?An.set(Cn.vao,".targetVAO",gn):An.set(Cn.vao,".targetVAO",Et.link(gn,{stable:!0}))}nn("vert"),nn("frag"),0<Object.keys(Xt.state).length&&(An(Rn,".dirty=true;"),An.exit(Rn,".dirty=true;")),An("a1(",Et.shared.context,",a0,",Et.batchId,");")}function ir(Et,Xt,nn){var An=Xt.static[nn];if(An&&function(vn){if(typeof vn=="object"&&!x(vn)){for(var Fn=Object.keys(vn),In=0;In<Fn.length;++In)if(re.isDynamic(vn[Fn[In]]))return!0;return!1}}(An)){var Cn=Et.global,Rn=Object.keys(An),gn=!1,$t=!1,Qt=!1,hn=Et.global.def("{}");Rn.forEach(function(vn){var Fn=An[vn];if(re.isDynamic(Fn))typeof Fn=="function"&&(Fn=An[vn]=re.unbox(Fn)),vn=X(Fn,null),gn=gn||vn.thisDep,Qt=Qt||vn.propDep,$t=$t||vn.contextDep;else{switch(Cn(hn,".",vn,"="),typeof Fn){case"number":Cn(Fn);break;case"string":Cn('"',Fn,'"');break;case"object":Array.isArray(Fn)&&Cn("[",Fn.join(),"]");break;default:Cn(Et.link(Fn))}Cn(";")}}),Xt.dynamic[nn]=new re.DynamicVariable(4,{thisDep:gn,contextDep:$t,propDep:Qt,ref:hn,append:function(vn,Fn){Rn.forEach(function(In){var Qn=An[In];re.isDynamic(Qn)&&(Qn=vn.invoke(Fn,Qn),Fn(hn,".",In,"=",Qn,";"))})}}),delete Xt.static[nn]}}var $n=dt.Record,vr={add:32774,subtract:32778,"reverse subtract":32779};st.ext_blend_minmax&&(vr.min=32775,vr.max=32776);var jt=st.angle_instanced_arrays,rn=st.webgl_draw_buffers,fn=st.oes_vertex_array_object,xn={dirty:!0,profile:wt.profile},Ln={},Xn=[],Un={},Hn={};Nt("dither",3024),Nt("blend.enable",3042),Gt("blend.color","blendColor",[0,0,0,0]),Gt("blend.equation","blendEquationSeparate",[32774,32774]),Gt("blend.func","blendFuncSeparate",[1,0,1,0]),Nt("depth.enable",2929,!0),Gt("depth.func","depthFunc",513),Gt("depth.range","depthRange",[0,1]),Gt("depth.mask","depthMask",!0),Gt("colorMask","colorMask",[!0,!0,!0,!0]),Nt("cull.enable",2884),Gt("cull.face","cullFace",1029),Gt("frontFace","frontFace",2305),Gt("lineWidth","lineWidth",1),Nt("polygonOffset.enable",32823),Gt("polygonOffset.offset","polygonOffset",[0,0]),Nt("sample.alpha",32926),Nt("sample.enable",32928),Gt("sample.coverage","sampleCoverage",[1,!1]),Nt("stencil.enable",2960),Gt("stencil.mask","stencilMask",-1),Gt("stencil.func","stencilFunc",[519,0,-1]),Gt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Gt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Nt("scissor.enable",3089),Gt("scissor.box","scissor",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]),Gt("viewport","viewport",[0,0,Ve.drawingBufferWidth,Ve.drawingBufferHeight]);var Kn={gl:Ve,context:kt,strings:Ze,next:Ln,current:xn,draw:ft,elements:Fe,buffer:De,shader:mt,attributes:dt.state,vao:dt,uniforms:gt,framebuffer:tt,extensions:st,timer:ht,isBufferArgs:F},qt={primTypes:Se,compareFuncs:zt,blendFuncs:Ct,blendEquations:vr,stencilOps:St,glTypes:Ae,orientationType:qe};rn&&(qt.backBuffer=[1029],qt.drawBuffer=m(nt.maxDrawbuffers,function(Et){return Et===0?[0]:m(Et,function(Xt){return 36064+Xt})}));var On=0;return{next:Ln,current:xn,procs:function(){var Et=an(),Xt=Et.proc("poll"),nn=Et.proc("refresh"),An=Et.block();Xt(An),nn(An);var Cn,Rn=(Qt=Et.shared).gl,gn=Qt.next,$t=Qt.current;An($t,".dirty=false;"),Kt(Et,Xt),Kt(Et,nn,null,!0),jt&&(Cn=Et.link(jt)),st.oes_vertex_array_object&&nn(Et.link(st.oes_vertex_array_object),".bindVertexArrayOES(null);");var Qt=nn.def(Qt.attributes),hn=nn.def(0),vn=Et.cond(hn,".buffer");vn.then(Rn,".enableVertexAttribArray(i);",Rn,".bindBuffer(",34962,",",hn,".buffer.buffer);",Rn,".vertexAttribPointer(i,",hn,".size,",hn,".type,",hn,".normalized,",hn,".stride,",hn,".offset);").else(Rn,".disableVertexAttribArray(i);",Rn,".vertexAttrib4f(i,",hn,".x,",hn,".y,",hn,".z,",hn,".w);",hn,".buffer=null;");var Fn=Et.link(nt.maxAttributes,{stable:!0});return nn("for(var i=0;i<",Fn,";++i){",hn,"=",Qt,"[i];",vn,"}"),jt&&nn("for(var i=0;i<",Fn,";++i){",Cn,".vertexAttribDivisorANGLE(i,",Qt,"[i].divisor);","}"),nn(Et.shared.vao,".currentVAO=null;",Et.shared.vao,".setVAO(",Et.shared.vao,".targetVAO);"),Object.keys(Un).forEach(function(In){var Qn=Un[In],Wn=An.def(gn,".",In),Ke=Et.block();Ke("if(",Wn,"){",Rn,".enable(",Qn,")}else{",Rn,".disable(",Qn,")}",$t,".",In,"=",Wn,";"),nn(Ke),Xt("if(",Wn,"!==",$t,".",In,"){",Ke,"}")}),Object.keys(Hn).forEach(function(In){var Qn,Wn,Ke=Hn[In],it=xn[In],Mt=Et.block();Mt(Rn,".",Ke,"("),x(it)?(Ke=it.length,Qn=Et.global.def(gn,".",In),Wn=Et.global.def($t,".",In),Mt(m(Ke,function(Lt){return Qn+"["+Lt+"]"}),");",m(Ke,function(Lt){return Wn+"["+Lt+"]="+Qn+"["+Lt+"];"}).join("")),Xt("if(",m(Ke,function(Lt){return Qn+"["+Lt+"]!=="+Wn+"["+Lt+"]"}).join("||"),"){",Mt,"}")):(Qn=An.def(gn,".",In),Wn=An.def($t,".",In),Mt(Qn,");",$t,".",In,"=",Qn,";"),Xt("if(",Qn,"!==",Wn,"){",Mt,"}")),nn(Mt)}),Et.compile()}(),compile:function(Et,Xt,nn,An,Cn){var Rn=an();Rn.stats=Rn.link(Cn),Object.keys(Xt.static).forEach(function($t){ir(Rn,Xt,$t)}),At.forEach(function($t){ir(Rn,Et,$t)});var gn=Bn(Et,Xt,nn,An);return gn.shader.program&&(gn.shader.program.attributes.sort(function($t,Qt){return $t.name<Qt.name?-1:1}),gn.shader.program.uniforms.sort(function($t,Qt){return $t.name<Qt.name?-1:1})),function($t,Qt){var hn=$t.proc("draw",1);un($t,hn),mn($t,hn,Qt.context),Kt($t,hn,Qt.framebuffer),cn($t,hn,Qt),tn($t,hn,Qt.state),yn($t,hn,Qt,!1,!0);var vn=Qt.shader.progVar.append($t,hn);if(hn($t.shared.gl,".useProgram(",vn,".program);"),Qt.shader.program)Pn($t,hn,Qt,Qt.shader.program);else{hn($t.shared.vao,".setVAO(null);");var Fn=$t.global.def("{}"),In=hn.def(vn,".id"),Qn=hn.def(Fn,"[",In,"]");hn($t.cond(Qn).then(Qn,".call(this,a0);").else(Qn,"=",Fn,"[",In,"]=",$t.link(function(Wn){return _n(Pn,$t,Qt,Wn,1)}),"(",vn,");",Qn,".call(this,a0);"))}0<Object.keys(Qt.state).length&&hn($t.shared.current,".dirty=true;"),$t.shared.vao&&hn($t.shared.vao,".setVAO(null);")}(Rn,gn),lr(Rn,gn),function($t,Qt){function hn(it){return it.contextDep&&Fn||it.propDep}var vn=$t.proc("batch",2);$t.batchId="0",un($t,vn);var Fn=!1,In=!0;Object.keys(Qt.context).forEach(function(it){Fn=Fn||Qt.context[it].propDep}),Fn||(mn($t,vn,Qt.context),In=!1);var Qn=!1;if((Wn=Qt.framebuffer)?(Wn.propDep?Fn=Qn=!0:Wn.contextDep&&Fn&&(Qn=!0),Qn||Kt($t,vn,Wn)):Kt($t,vn,null),Qt.state.viewport&&Qt.state.viewport.propDep&&(Fn=!0),cn($t,vn,Qt),tn($t,vn,Qt.state,function(it){return!hn(it)}),Qt.profile&&hn(Qt.profile)||yn($t,vn,Qt,!1,"a1"),Qt.contextDep=Fn,Qt.needsContext=In,Qt.needsFramebuffer=Qn,(In=Qt.shader.progVar).contextDep&&Fn||In.propDep)ur($t,vn,Qt,null);else if(In=In.append($t,vn),vn($t.shared.gl,".useProgram(",In,".program);"),Qt.shader.program)ur($t,vn,Qt,Qt.shader.program);else{vn($t.shared.vao,".setVAO(null);");var Wn=$t.global.def("{}"),Ke=(Qn=vn.def(In,".id"),vn.def(Wn,"[",Qn,"]"));vn($t.cond(Ke).then(Ke,".call(this,a0,a1);").else(Ke,"=",Wn,"[",Qn,"]=",$t.link(function(it){return _n(ur,$t,Qt,it,2)}),"(",In,");",Ke,".call(this,a0,a1);"))}0<Object.keys(Qt.state).length&&vn($t.shared.current,".dirty=true;"),$t.shared.vao&&vn($t.shared.vao,".setVAO(null);")}(Rn,gn),J(Rn.compile(),{destroy:function(){gn.shader.program.destroy()}})}}}function Z(Ve,Ze){for(var st=0;st<Ve.length;++st)if(Ve[st]===Ze)return st;return-1}var J=function(Ve,Ze){for(var st=Object.keys(Ze),nt=0;nt<st.length;++nt)Ve[st[nt]]=Ze[st[nt]];return Ve},ne=0,re={DynamicVariable:P,define:function(Ve,Ze){return new P(Ve,A(Ze+""))},isDynamic:function(Ve){return typeof Ve=="function"&&!Ve._reglType||Ve instanceof P},unbox:function Ve(Ze,st){return typeof Ze=="function"?new P(0,Ze):typeof Ze=="number"||typeof Ze=="boolean"?new P(5,Ze):Array.isArray(Ze)?new P(6,Ze.map(function(nt,De){return Ve(nt)})):Ze instanceof P?Ze:void 0},accessor:A},ae={next:typeof requestAnimationFrame=="function"?function(Ve){return requestAnimationFrame(Ve)}:function(Ve){return setTimeout(Ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(Ve){return cancelAnimationFrame(Ve)}:clearTimeout},ue=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},he=o();he.zero=o();var de=function(Ve,Ze){var st=1;Ze.ext_texture_filter_anisotropic&&(st=Ve.getParameter(34047));var nt=1,De=1;Ze.webgl_draw_buffers&&(nt=Ve.getParameter(34852),De=Ve.getParameter(36063));var Fe=!!Ze.oes_texture_float;if(Fe){Fe=Ve.createTexture(),Ve.bindTexture(3553,Fe),Ve.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var rt=Ve.createFramebuffer();if(Ve.bindFramebuffer(36160,rt),Ve.framebufferTexture2D(36160,36064,3553,Fe,0),Ve.bindTexture(3553,null),Ve.checkFramebufferStatus(36160)!==36053)Fe=!1;else{Ve.viewport(0,0,1,1),Ve.clearColor(1,0,0,1),Ve.clear(16384);var tt=he.allocType(5126,4);Ve.readPixels(0,0,1,1,6408,5126,tt),Ve.getError()?Fe=!1:(Ve.deleteFramebuffer(rt),Ve.deleteTexture(Fe),Fe=tt[0]===1),he.freeType(tt)}}return tt=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(tt=Ve.createTexture(),rt=he.allocType(5121,36),Ve.activeTexture(33984),Ve.bindTexture(34067,tt),Ve.texImage2D(34069,0,6408,3,3,0,6408,5121,rt),he.freeType(rt),Ve.bindTexture(34067,null),Ve.deleteTexture(tt),tt=!Ve.getError()),{colorBits:[Ve.getParameter(3410),Ve.getParameter(3411),Ve.getParameter(3412),Ve.getParameter(3413)],depthBits:Ve.getParameter(3414),stencilBits:Ve.getParameter(3415),subpixelBits:Ve.getParameter(3408),extensions:Object.keys(Ze).filter(function(gt){return!!Ze[gt]}),maxAnisotropic:st,maxDrawbuffers:nt,maxColorAttachments:De,pointSizeDims:Ve.getParameter(33901),lineWidthDims:Ve.getParameter(33902),maxViewportDims:Ve.getParameter(3386),maxCombinedTextureUnits:Ve.getParameter(35661),maxCubeMapSize:Ve.getParameter(34076),maxRenderbufferSize:Ve.getParameter(34024),maxTextureUnits:Ve.getParameter(34930),maxTextureSize:Ve.getParameter(3379),maxAttributes:Ve.getParameter(34921),maxVertexUniforms:Ve.getParameter(36347),maxVertexTextureUnits:Ve.getParameter(35660),maxVaryingVectors:Ve.getParameter(36348),maxFragmentUniforms:Ve.getParameter(36349),glsl:Ve.getParameter(35724),renderer:Ve.getParameter(7937),vendor:Ve.getParameter(7936),version:Ve.getParameter(7938),readFloat:Fe,npotTextureCube:tt}},xe=function(Ve){return Ve instanceof Uint8Array||Ve instanceof Uint16Array||Ve instanceof Uint32Array||Ve instanceof Int8Array||Ve instanceof Int16Array||Ve instanceof Int32Array||Ve instanceof Float32Array||Ve instanceof Float64Array||Ve instanceof Uint8ClampedArray},me=function(Ve){return Object.keys(Ve).map(function(Ze){return Ve[Ze]})},ve={shape:function(Ve){for(var Ze=[];Ve.length;Ve=Ve[0])Ze.push(Ve.length);return Ze},flatten:function(Ve,Ze,st,nt){var De=1;if(Ze.length)for(var Fe=0;Fe<Ze.length;++Fe)De*=Ze[Fe];else De=0;switch(st=nt||he.allocType(st,De),Ze.length){case 0:break;case 1:for(nt=Ze[0],Ze=0;Ze<nt;++Ze)st[Ze]=Ve[Ze];break;case 2:for(nt=Ze[0],Ze=Ze[1],Fe=De=0;Fe<nt;++Fe)for(var rt=Ve[Fe],tt=0;tt<Ze;++tt)st[De++]=rt[tt];break;case 3:i(Ve,Ze[0],Ze[1],Ze[2],st,0);break;default:r(Ve,Ze,0,st,0)}return st}},Le={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},we={dynamic:35048,stream:35040,static:35044},se=ve.flatten,oe=ve.shape,fe=[];fe[5120]=1,fe[5122]=2,fe[5124]=4,fe[5121]=1,fe[5123]=2,fe[5125]=4,fe[5126]=4;var Se={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Me=new Float32Array(1),be=new Uint32Array(Me.buffer),Ie=[9984,9986,9985,9987],Be=[0,6409,6410,6407,6408],ce={};ce[6409]=ce[6406]=ce[6402]=1,ce[34041]=ce[6410]=2,ce[6407]=ce[35904]=3,ce[6408]=ce[35906]=4;var Te=g("HTMLCanvasElement"),ye=g("OffscreenCanvas"),Pe=g("CanvasRenderingContext2D"),Re=g("ImageBitmap"),ze=g("HTMLImageElement"),He=g("HTMLVideoElement"),We=Object.keys(Le).concat([Te,ye,Pe,Re,ze,He]),Je=[];Je[5121]=1,Je[5126]=4,Je[36193]=2,Je[5123]=2,Je[5125]=4;var lt=[];lt[32854]=2,lt[32855]=2,lt[36194]=2,lt[34041]=4,lt[33776]=.5,lt[33777]=.5,lt[33778]=1,lt[33779]=1,lt[35986]=.5,lt[35987]=1,lt[34798]=1,lt[35840]=.5,lt[35841]=.25,lt[35842]=.5,lt[35843]=.25,lt[36196]=.5;var et=[];et[32854]=2,et[32855]=2,et[36194]=2,et[33189]=2,et[36168]=1,et[34041]=4,et[35907]=4,et[34836]=16,et[34842]=8,et[34843]=6;var yt=function(Ve,Ze,st,nt,De){function Fe(ft){this.id=dt++,this.refCount=1,this.renderbuffer=ft,this.format=32854,this.height=this.width=0,De.profile&&(this.stats={size:0})}function rt(ft){var kt=ft.renderbuffer;Ve.bindRenderbuffer(36161,null),Ve.deleteRenderbuffer(kt),ft.renderbuffer=null,ft.refCount=0,delete mt[ft.id],nt.renderbufferCount--}var tt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ze.ext_srgb&&(tt.srgba=35907),Ze.ext_color_buffer_half_float&&(tt.rgba16f=34842,tt.rgb16f=34843),Ze.webgl_color_buffer_float&&(tt.rgba32f=34836);var gt=[];Object.keys(tt).forEach(function(ft){gt[tt[ft]]=ft});var dt=0,mt={};return Fe.prototype.decRef=function(){0>=--this.refCount&&rt(this)},De.profile&&(nt.getTotalRenderbufferSize=function(){var ft=0;return Object.keys(mt).forEach(function(kt){ft+=mt[kt].stats.size}),ft}),{create:function(ft,kt){function ht(wt,Ft){var Nt=0,Gt=0,an=32854;if(typeof wt=="object"&&wt?("shape"in wt?(Nt=0|(Gt=wt.shape)[0],Gt=0|Gt[1]):("radius"in wt&&(Nt=Gt=0|wt.radius),"width"in wt&&(Nt=0|wt.width),"height"in wt&&(Gt=0|wt.height)),"format"in wt&&(an=tt[wt.format])):typeof wt=="number"?(Nt=0|wt,Gt=typeof Ft=="number"?0|Ft:Nt):wt||(Nt=Gt=1),Nt!==pt.width||Gt!==pt.height||an!==pt.format)return ht.width=pt.width=Nt,ht.height=pt.height=Gt,pt.format=an,Ve.bindRenderbuffer(36161,pt.renderbuffer),Ve.renderbufferStorage(36161,an,Nt,Gt),De.profile&&(pt.stats.size=et[pt.format]*pt.width*pt.height),ht.format=gt[pt.format],ht}var pt=new Fe(Ve.createRenderbuffer());return mt[pt.id]=pt,nt.renderbufferCount++,ht(ft,kt),ht.resize=function(wt,Ft){var Nt=0|wt,Gt=0|Ft||Nt;return Nt===pt.width&&Gt===pt.height||(ht.width=pt.width=Nt,ht.height=pt.height=Gt,Ve.bindRenderbuffer(36161,pt.renderbuffer),Ve.renderbufferStorage(36161,pt.format,Nt,Gt),De.profile&&(pt.stats.size=et[pt.format]*pt.width*pt.height)),ht},ht._reglType="renderbuffer",ht._renderbuffer=pt,De.profile&&(ht.stats=pt.stats),ht.destroy=function(){pt.decRef()},ht},clear:function(){me(mt).forEach(rt)},restore:function(){me(mt).forEach(function(ft){ft.renderbuffer=Ve.createRenderbuffer(),Ve.bindRenderbuffer(36161,ft.renderbuffer),Ve.renderbufferStorage(36161,ft.format,ft.width,ft.height)}),Ve.bindRenderbuffer(36161,null)}}},_t=[];_t[6408]=4,_t[6407]=3;var xt=[];xt[5121]=1,xt[5126]=4,xt[36193]=2;var at=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ot=["x","y","z","w"],At="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ct={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},zt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},St={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},qe={cw:2304,ccw:2305},Xe=new W(!1,!1,!1,function(){});return function(Ve){function Ze(){if(tr.length===0)Wt&&Wt.update(),$n=null;else{$n=ae.next(Ze),mt();for(var jt=tr.length-1;0<=jt;--jt){var rn=tr[jt];rn&&rn(Bn,null,0)}ht.flush(),Wt&&Wt.update()}}function st(){!$n&&0<tr.length&&($n=ae.next(Ze))}function nt(){$n&&(ae.cancel(Ze),$n=null)}function De(jt){jt.preventDefault(),nt(),ur.forEach(function(rn){rn()})}function Fe(jt){ht.getError(),wt.restore(),un.restore(),Kt.restore(),yn.restore(),En.restore(),Sn.restore(),tn.restore(),Wt&&Wt.restore(),Nn.procs.refresh(),st(),lr.forEach(function(rn){rn()})}function rt(jt){function rn(Et,Xt){var nn={},An={};return Object.keys(Et).forEach(function(Cn){var Rn=Et[Cn];if(re.isDynamic(Rn))An[Cn]=re.unbox(Rn,Cn);else{if(Xt&&Array.isArray(Rn)){for(var gn=0;gn<Rn.length;++gn)if(re.isDynamic(Rn[gn]))return void(An[Cn]=re.unbox(Rn,Cn))}nn[Cn]=Rn}}),{dynamic:An,static:nn}}var fn=rn(jt.context||{},!0),xn=rn(jt.uniforms||{},!0),Ln=rn(jt.attributes||{},!1);jt=rn(function(Et){function Xt(An){if(An in nn){var Cn=nn[An];delete nn[An],Object.keys(Cn).forEach(function(Rn){nn[An+"."+Rn]=Cn[Rn]})}}var nn=J({},Et);return delete nn.uniforms,delete nn.attributes,delete nn.context,delete nn.vao,"stencil"in nn&&nn.stencil.op&&(nn.stencil.opBack=nn.stencil.opFront=nn.stencil.op,delete nn.stencil.op),Xt("blend"),Xt("depth"),Xt("cull"),Xt("stencil"),Xt("polygonOffset"),Xt("scissor"),Xt("sample"),"vao"in Et&&(nn.vao=Et.vao),nn}(jt),!1);var Xn={gpuTime:0,cpuTime:0,count:0},Un=Nn.compile(jt,Ln,xn,fn,Xn),Hn=Un.draw,Kn=Un.batch,qt=Un.scope,On=[];return J(function(Et,Xt){var nn;if(typeof Et=="function")return qt.call(this,null,Et,0);if(typeof Xt=="function")if(typeof Et=="number")for(nn=0;nn<Et;++nn)qt.call(this,null,Xt,nn);else{if(!Array.isArray(Et))return qt.call(this,Et,Xt,0);for(nn=0;nn<Et.length;++nn)qt.call(this,Et[nn],Xt,nn)}else if(typeof Et=="number"){if(0<Et)return Kn.call(this,function(An){for(;On.length<An;)On.push(null);return On}(0|Et),0|Et)}else{if(!Array.isArray(Et))return Hn.call(this,Et);if(Et.length)return Kn.call(this,Et,Et.length)}},{stats:Xn,destroy:function(){Un.destroy()}})}function tt(jt,rn){var fn=0;Nn.procs.poll();var xn=rn.color;xn&&(ht.clearColor(+xn[0]||0,+xn[1]||0,+xn[2]||0,+xn[3]||0),fn|=16384),"depth"in rn&&(ht.clearDepth(+rn.depth),fn|=256),"stencil"in rn&&(ht.clearStencil(0|rn.stencil),fn|=1024),ht.clear(fn)}function gt(jt){return tr.push(jt),st(),{cancel:function(){var rn=Z(tr,jt);tr[rn]=function fn(){var xn=Z(tr,fn);tr[xn]=tr[tr.length-1],--tr.length,0>=tr.length&&nt()}}}}function dt(){var jt=_n.viewport,rn=_n.scissor_box;jt[0]=jt[1]=rn[0]=rn[1]=0,Bn.viewportWidth=Bn.framebufferWidth=Bn.drawingBufferWidth=jt[2]=rn[2]=ht.drawingBufferWidth,Bn.viewportHeight=Bn.framebufferHeight=Bn.drawingBufferHeight=jt[3]=rn[3]=ht.drawingBufferHeight}function mt(){Bn.tick+=1,Bn.time=kt(),dt(),Nn.procs.poll()}function ft(){yn.refresh(),dt(),Nn.procs.refresh(),Wt&&Wt.update()}function kt(){return(ue()-Yt)/1e3}if(!(Ve=_(Ve)))return null;var ht=Ve.gl,pt=ht.getContextAttributes();ht.isContextLost();var wt=function(jt,rn){function fn(Un){var Hn;Un=Un.toLowerCase();try{Hn=xn[Un]=jt.getExtension(Un)}catch{}return!!Hn}for(var xn={},Ln=0;Ln<rn.extensions.length;++Ln){var Xn=rn.extensions[Ln];if(!fn(Xn))return rn.onDestroy(),rn.onDone('"'+Xn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return rn.optionalExtensions.forEach(fn),{extensions:xn,restore:function(){Object.keys(xn).forEach(function(Un){if(xn[Un]&&!fn(Un))throw Error("(regl): error restoring extension "+Un)})}}}(ht,Ve);if(!wt)return null;var Ft=function(){var jt={"":0},rn=[""];return{id:function(fn){var xn=jt[fn];return xn||(xn=jt[fn]=rn.length,rn.push(fn),xn)},str:function(fn){return rn[fn]}}}(),Nt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Gt=Ve.cachedCode||{},an=wt.extensions,Wt=function(jt,rn){function fn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function xn(On,Et,Xt){var nn=Un.pop()||new fn;nn.startQueryIndex=On,nn.endQueryIndex=Et,nn.sum=0,nn.stats=Xt,Hn.push(nn)}if(!rn.ext_disjoint_timer_query)return null;var Ln=[],Xn=[],Un=[],Hn=[],Kn=[],qt=[];return{beginQuery:function(On){var Et=Ln.pop()||rn.ext_disjoint_timer_query.createQueryEXT();rn.ext_disjoint_timer_query.beginQueryEXT(35007,Et),Xn.push(Et),xn(Xn.length-1,Xn.length,On)},endQuery:function(){rn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:xn,update:function(){var On,Et;if((On=Xn.length)!==0){qt.length=Math.max(qt.length,On+1),Kn.length=Math.max(Kn.length,On+1),Kn[0]=0;var Xt=qt[0]=0;for(Et=On=0;Et<Xn.length;++Et){var nn=Xn[Et];rn.ext_disjoint_timer_query.getQueryObjectEXT(nn,34919)?(Xt+=rn.ext_disjoint_timer_query.getQueryObjectEXT(nn,34918),Ln.push(nn)):Xn[On++]=nn,Kn[Et+1]=Xt,qt[Et+1]=On}for(Xn.length=On,Et=On=0;Et<Hn.length;++Et){var An=(Xt=Hn[Et]).startQueryIndex;nn=Xt.endQueryIndex,Xt.sum+=Kn[nn]-Kn[An],An=qt[An],(nn=qt[nn])===An?(Xt.stats.gpuTime+=Xt.sum/1e6,Un.push(Xt)):(Xt.startQueryIndex=An,Xt.endQueryIndex=nn,Hn[On++]=Xt)}Hn.length=On}},getNumPendingQueries:function(){return Xn.length},clear:function(){Ln.push.apply(Ln,Xn);for(var On=0;On<Ln.length;On++)rn.ext_disjoint_timer_query.deleteQueryEXT(Ln[On]);Xn.length=0,Ln.length=0},restore:function(){Xn.length=0,Ln.length=0}}}(0,an),Yt=ue(),en=ht.drawingBufferWidth,Tn=ht.drawingBufferHeight,Bn={tick:0,time:0,viewportWidth:en,viewportHeight:Tn,framebufferWidth:en,framebufferHeight:Tn,drawingBufferWidth:en,drawingBufferHeight:Tn,pixelRatio:Ve.pixelRatio},mn=(en={elements:null,primitive:4,count:-1,offset:0,instances:-1},de(ht,an)),Kt=u(ht,Nt,Ve,function(jt){return tn.destroyBuffer(jt)}),cn=p(ht,an,Kt,Nt),tn=C(ht,an,mn,Nt,Kt,cn,en),un=L(ht,Ft,Nt,Ve),yn=S(ht,an,mn,function(){Nn.procs.poll()},Bn,Nt,Ve),En=yt(ht,an,0,Nt,Ve),Sn=T(ht,an,mn,yn,En,Nt),Nn=q(ht,Ft,an,mn,Kt,cn,0,Sn,{},tn,un,en,Bn,Wt,Gt,Ve),_n=(Ft=O(ht,Sn,Nn.procs.poll,Bn),Nn.next),Pn=ht.canvas,tr=[],ur=[],lr=[],ir=[Ve.onDestroy],$n=null;Pn&&(Pn.addEventListener("webglcontextlost",De,!1),Pn.addEventListener("webglcontextrestored",Fe,!1));var vr=Sn.setFBO=rt({framebuffer:re.define.call(null,1,"framebuffer")});return ft(),pt=J(rt,{clear:function(jt){if("framebuffer"in jt)if(jt.framebuffer&&jt.framebuffer_reglType==="framebufferCube")for(var rn=0;6>rn;++rn)vr(J({framebuffer:jt.framebuffer.faces[rn]},jt),tt);else vr(jt,tt);else tt(0,jt)},prop:re.define.bind(null,1),context:re.define.bind(null,2),this:re.define.bind(null,3),draw:rt({}),buffer:function(jt){return Kt.create(jt,34962,!1,!1)},elements:function(jt){return cn.create(jt,!1)},texture:yn.create2D,cube:yn.createCube,renderbuffer:En.create,framebuffer:Sn.create,framebufferCube:Sn.createCube,vao:tn.createVAO,attributes:pt,frame:gt,on:function(jt,rn){var fn;switch(jt){case"frame":return gt(rn);case"lost":fn=ur;break;case"restore":fn=lr;break;case"destroy":fn=ir}return fn.push(rn),{cancel:function(){for(var xn=0;xn<fn.length;++xn)if(fn[xn]===rn){fn[xn]=fn[fn.length-1],fn.pop();break}}}},limits:mn,hasExtension:function(jt){return 0<=mn.extensions.indexOf(jt.toLowerCase())},read:Ft,destroy:function(){tr.length=0,nt(),Pn&&(Pn.removeEventListener("webglcontextlost",De),Pn.removeEventListener("webglcontextrestored",Fe)),un.clear(),Sn.clear(),En.clear(),tn.clear(),yn.clear(),cn.clear(),Kt.clear(),Wt&&Wt.clear(),ir.forEach(function(jt){jt()})},_gl:ht,_refresh:ft,poll:function(){mt(),Wt&&Wt.update()},now:kt,stats:Nt,getCachedCode:function(){return Gt},preloadCachedCode:function(jt){Object.entries(jt).forEach(function(rn){Gt[rn[0]]=rn[1]})}}),Ve.onDone(null,pt),pt}}()},71665:function($,P,t){var A=t(12856),M=A.Buffer;function l(m,f){for(var o in m)f[o]=m[o]}function _(m,f,o){return M(m,f,o)}M.from&&M.alloc&&M.allocUnsafe&&M.allocUnsafeSlow?$.exports=A:(l(A,P),P.Buffer=_),_.prototype=Object.create(M.prototype),l(M,_),_.from=function(m,f,o){if(typeof m=="number")throw new TypeError("Argument must not be a number");return M(m,f,o)},_.alloc=function(m,f,o){if(typeof m!="number")throw new TypeError("Argument must be a number");var e=M(m);return f!==void 0?typeof o=="string"?e.fill(f,o):e.fill(f):e.fill(0),e},_.allocUnsafe=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return M(m)},_.allocUnsafeSlow=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return A.SlowBuffer(m)}},21630:function($,P,t){$.exports=M;var A=t(15398).EventEmitter;function M(){A.call(this)}t(42018)(M,A),M.Readable=t(40410),M.Writable=t(37493),M.Duplex=t(37865),M.Transform=t(74308),M.PassThrough=t(66897),M.finished=t(12726),M.pipeline=t(10168),M.Stream=M,M.prototype.pipe=function(l,_){var m=this;function f(a){l.writable&&l.write(a)===!1&&m.pause&&m.pause()}function o(){m.readable&&m.resume&&m.resume()}m.on("data",f),l.on("drain",o),l._isStdio||_&&_.end===!1||(m.on("end",i),m.on("close",r));var e=!1;function i(){e||(e=!0,l.end())}function r(){e||(e=!0,typeof l.destroy=="function"&&l.destroy())}function n(a){if(s(),A.listenerCount(this,"error")===0)throw a}function s(){m.removeListener("data",f),l.removeListener("drain",o),m.removeListener("end",i),m.removeListener("close",r),m.removeListener("error",n),l.removeListener("error",n),m.removeListener("end",s),m.removeListener("close",s),l.removeListener("close",s)}return m.on("error",n),l.on("error",n),m.on("end",s),m.on("close",s),l.on("close",s),l.emit("pipe",m),l}},74322:function($){var P={};function t(M,l,_){_||(_=Error);var m=function(f){var o,e;function i(r,n,s){return f.call(this,function(a,u,p){return typeof l=="string"?l:l(a,u,p)}(r,n,s))||this}return e=f,(o=i).prototype=Object.create(e.prototype),o.prototype.constructor=o,o.__proto__=e,i}(_);m.prototype.name=_.name,m.prototype.code=M,P[M]=m}function A(M,l){if(Array.isArray(M)){var _=M.length;return M=M.map(function(m){return String(m)}),_>2?"one of ".concat(l," ").concat(M.slice(0,_-1).join(", "),", or ")+M[_-1]:_===2?"one of ".concat(l," ").concat(M[0]," or ").concat(M[1]):"of ".concat(l," ").concat(M[0])}return"of ".concat(l," ").concat(String(M))}t("ERR_INVALID_OPT_VALUE",function(M,l){return'The value "'+l+'" is invalid for option "'+M+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(M,l,_){var m,f,o,e,i;if(typeof l=="string"&&(f="not ",l.substr(0,4)===f)?(m="must not be",l=l.replace(/^not /,"")):m="must be",function(n,s,a){return(a===void 0||a>n.length)&&(a=n.length),n.substring(a-9,a)===s}(M," argument"))o="The ".concat(M," ").concat(m," ").concat(A(l,"type"));else{var r=(typeof i!="number"&&(i=0),i+1>(e=M).length||e.indexOf(".",i)===-1?"argument":"property");o='The "'.concat(M,'" ').concat(r," ").concat(m," ").concat(A(l,"type"))}return o+". Received type ".concat(typeof _)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(M){return"The "+M+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(M){return"Cannot call "+M+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(M){return"Unknown encoding: "+M},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),$.exports.q=P},37865:function($,P,t){var A=t(90386),M=Object.keys||function(n){var s=[];for(var a in n)s.push(a);return s};$.exports=e;var l=t(40410),_=t(37493);t(42018)(e,l);for(var m=M(_.prototype),f=0;f<m.length;f++){var o=m[f];e.prototype[o]||(e.prototype[o]=_.prototype[o])}function e(n){if(!(this instanceof e))return new e(n);l.call(this,n),_.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||A.nextTick(r,this)}function r(n){n.end()}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(n){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=n,this._writableState.destroyed=n)}})},66897:function($,P,t){$.exports=M;var A=t(74308);function M(l){if(!(this instanceof M))return new M(l);A.call(this,l)}t(42018)(M,A),M.prototype._transform=function(l,_,m){m(null,l)}},40410:function($,P,t){var A,M=t(90386);$.exports=w,w.ReadableState=y,t(15398).EventEmitter;var l,_=function(Q,X){return Q.listeners(X).length},m=t(71405),f=t(12856).Buffer,o=t.g.Uint8Array||function(){},e=t(40964);l=e&&e.debuglog?e.debuglog("stream"):function(){};var i,r,n,s=t(31125),a=t(65756),u=t(56306).getHighWaterMark,p=t(74322).q,c=p.ERR_INVALID_ARG_TYPE,x=p.ERR_STREAM_PUSH_AFTER_EOF,g=p.ERR_METHOD_NOT_IMPLEMENTED,h=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(42018)(w,m);var b=a.errorOrDestroy,v=["error","close","destroy","pause","resume"];function y(Q,X,q){A=A||t(37865),Q=Q||{},typeof q!="boolean"&&(q=X instanceof A),this.objectMode=!!Q.objectMode,q&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=u(this,Q,"readableHighWaterMark",q),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(i||(i=t(68019).s),this.decoder=new i(Q.encoding),this.encoding=Q.encoding)}function w(Q){if(A=A||t(37865),!(this instanceof w))return new w(Q);var X=this instanceof A;this._readableState=new y(Q,this,X),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),m.call(this)}function d(Q,X,q,Z,J){l("readableAddChunk",X);var ne,re=Q._readableState;if(X===null)re.reading=!1,function(ae,ue){if(l("onEofChunk"),!ue.ended){if(ue.decoder){var he=ue.decoder.end();he&&he.length&&(ue.buffer.push(he),ue.length+=ue.objectMode?1:he.length)}ue.ended=!0,ue.sync?C(ae):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,L(ae)))}}(Q,re);else if(J||(ne=function(ae,ue){var he,de;return de=ue,f.isBuffer(de)||de instanceof o||typeof ue=="string"||ue===void 0||ae.objectMode||(he=new c("chunk",["string","Buffer","Uint8Array"],ue)),he}(re,X)),ne)b(Q,ne);else if(re.objectMode||X&&X.length>0)if(typeof X=="string"||re.objectMode||Object.getPrototypeOf(X)===f.prototype||(X=function(ae){return f.from(ae)}(X)),Z)re.endEmitted?b(Q,new h):S(Q,re,X,!0);else if(re.ended)b(Q,new x);else{if(re.destroyed)return!1;re.reading=!1,re.decoder&&!q?(X=re.decoder.write(X),re.objectMode||X.length!==0?S(Q,re,X,!1):O(Q,re)):S(Q,re,X,!1)}else Z||(re.reading=!1,O(Q,re));return!re.ended&&(re.length<re.highWaterMark||re.length===0)}function S(Q,X,q,Z){X.flowing&&X.length===0&&!X.sync?(X.awaitDrain=0,Q.emit("data",q)):(X.length+=X.objectMode?1:q.length,Z?X.buffer.unshift(q):X.buffer.push(q),X.needReadable&&C(Q)),O(Q,X)}Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Q){this._readableState&&(this._readableState.destroyed=Q)}}),w.prototype.destroy=a.destroy,w.prototype._undestroy=a.undestroy,w.prototype._destroy=function(Q,X){X(Q)},w.prototype.push=function(Q,X){var q,Z=this._readableState;return Z.objectMode?q=!0:typeof Q=="string"&&((X=X||Z.defaultEncoding)!==Z.encoding&&(Q=f.from(Q,X),X=""),q=!0),d(this,Q,X,!1,q)},w.prototype.unshift=function(Q){return d(this,Q,null,!0,!1)},w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(Q){i||(i=t(68019).s);var X=new i(Q);this._readableState.decoder=X,this._readableState.encoding=this._readableState.decoder.encoding;for(var q=this._readableState.buffer.head,Z="";q!==null;)Z+=X.write(q.data),q=q.next;return this._readableState.buffer.clear(),Z!==""&&this._readableState.buffer.push(Z),this._readableState.length=Z.length,this};var T=1073741824;function E(Q,X){return Q<=0||X.length===0&&X.ended?0:X.objectMode?1:Q!=Q?X.flowing&&X.length?X.buffer.head.data.length:X.length:(Q>X.highWaterMark&&(X.highWaterMark=function(q){return q>=T?q=T:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q}(Q)),Q<=X.length?Q:X.ended?X.length:(X.needReadable=!0,0))}function C(Q){var X=Q._readableState;l("emitReadable",X.needReadable,X.emittedReadable),X.needReadable=!1,X.emittedReadable||(l("emitReadable",X.flowing),X.emittedReadable=!0,M.nextTick(L,Q))}function L(Q){var X=Q._readableState;l("emitReadable_",X.destroyed,X.length,X.ended),X.destroyed||!X.length&&!X.ended||(Q.emit("readable"),X.emittedReadable=!1),X.needReadable=!X.flowing&&!X.ended&&X.length<=X.highWaterMark,N(Q)}function O(Q,X){X.readingMore||(X.readingMore=!0,M.nextTick(z,Q,X))}function z(Q,X){for(;!X.reading&&!X.ended&&(X.length<X.highWaterMark||X.flowing&&X.length===0);){var q=X.length;if(l("maybeReadMore read 0"),Q.read(0),q===X.length)break}X.readingMore=!1}function G(Q){var X=Q._readableState;X.readableListening=Q.listenerCount("readable")>0,X.resumeScheduled&&!X.paused?X.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function I(Q){l("readable nexttick read 0"),Q.read(0)}function H(Q,X){l("resume",X.reading),X.reading||Q.read(0),X.resumeScheduled=!1,Q.emit("resume"),N(Q),X.flowing&&!X.reading&&Q.read(0)}function N(Q){var X=Q._readableState;for(l("flow",X.flowing);X.flowing&&Q.read()!==null;);}function F(Q,X){return X.length===0?null:(X.objectMode?q=X.buffer.shift():!Q||Q>=X.length?(q=X.decoder?X.buffer.join(""):X.buffer.length===1?X.buffer.first():X.buffer.concat(X.length),X.buffer.clear()):q=X.buffer.consume(Q,X.decoder),q);var q}function V(Q){var X=Q._readableState;l("endReadable",X.endEmitted),X.endEmitted||(X.ended=!0,M.nextTick(W,X,Q))}function W(Q,X){if(l("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,X.readable=!1,X.emit("end"),Q.autoDestroy)){var q=X._writableState;(!q||q.autoDestroy&&q.finished)&&X.destroy()}}function te(Q,X){for(var q=0,Z=Q.length;q<Z;q++)if(Q[q]===X)return q;return-1}w.prototype.read=function(Q){l("read",Q),Q=parseInt(Q,10);var X=this._readableState,q=Q;if(Q!==0&&(X.emittedReadable=!1),Q===0&&X.needReadable&&((X.highWaterMark!==0?X.length>=X.highWaterMark:X.length>0)||X.ended))return l("read: emitReadable",X.length,X.ended),X.length===0&&X.ended?V(this):C(this),null;if((Q=E(Q,X))===0&&X.ended)return X.length===0&&V(this),null;var Z,J=X.needReadable;return l("need readable",J),(X.length===0||X.length-Q<X.highWaterMark)&&l("length less than watermark",J=!0),X.ended||X.reading?l("reading or ended",J=!1):J&&(l("do read"),X.reading=!0,X.sync=!0,X.length===0&&(X.needReadable=!0),this._read(X.highWaterMark),X.sync=!1,X.reading||(Q=E(q,X))),(Z=Q>0?F(Q,X):null)===null?(X.needReadable=X.length<=X.highWaterMark,Q=0):(X.length-=Q,X.awaitDrain=0),X.length===0&&(X.ended||(X.needReadable=!0),q!==Q&&X.ended&&V(this)),Z!==null&&this.emit("data",Z),Z},w.prototype._read=function(Q){b(this,new g("_read()"))},w.prototype.pipe=function(Q,X){var q=this,Z=this._readableState;switch(Z.pipesCount){case 0:Z.pipes=Q;break;case 1:Z.pipes=[Z.pipes,Q];break;default:Z.pipes.push(Q)}Z.pipesCount+=1,l("pipe count=%d opts=%j",Z.pipesCount,X);var J=X&&X.end===!1||Q===M.stdout||Q===M.stderr?me:ne;function ne(){l("onend"),Q.end()}Z.endEmitted?M.nextTick(J):q.once("end",J),Q.on("unpipe",function ve(Le,Ae){l("onunpipe"),Le===q&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,l("cleanup"),Q.removeListener("close",de),Q.removeListener("finish",xe),Q.removeListener("drain",re),Q.removeListener("error",he),Q.removeListener("unpipe",ve),q.removeListener("end",ne),q.removeListener("end",me),q.removeListener("data",ue),ae=!0,!Z.awaitDrain||Q._writableState&&!Q._writableState.needDrain||re())});var re=function(ve){return function(){var Le=ve._readableState;l("pipeOnDrain",Le.awaitDrain),Le.awaitDrain&&Le.awaitDrain--,Le.awaitDrain===0&&_(ve,"data")&&(Le.flowing=!0,N(ve))}}(q);Q.on("drain",re);var ae=!1;function ue(ve){l("ondata");var Le=Q.write(ve);l("dest.write",Le),Le===!1&&((Z.pipesCount===1&&Z.pipes===Q||Z.pipesCount>1&&te(Z.pipes,Q)!==-1)&&!ae&&(l("false write response, pause",Z.awaitDrain),Z.awaitDrain++),q.pause())}function he(ve){l("onerror",ve),me(),Q.removeListener("error",he),_(Q,"error")===0&&b(Q,ve)}function de(){Q.removeListener("finish",xe),me()}function xe(){l("onfinish"),Q.removeListener("close",de),me()}function me(){l("unpipe"),q.unpipe(Q)}return q.on("data",ue),function(ve,Le,Ae){if(typeof ve.prependListener=="function")return ve.prependListener(Le,Ae);ve._events&&ve._events[Le]?Array.isArray(ve._events[Le])?ve._events[Le].unshift(Ae):ve._events[Le]=[Ae,ve._events[Le]]:ve.on(Le,Ae)}(Q,"error",he),Q.once("close",de),Q.once("finish",xe),Q.emit("pipe",q),Z.flowing||(l("pipe resume"),q.resume()),Q},w.prototype.unpipe=function(Q){var X=this._readableState,q={hasUnpiped:!1};if(X.pipesCount===0)return this;if(X.pipesCount===1)return Q&&Q!==X.pipes||(Q||(Q=X.pipes),X.pipes=null,X.pipesCount=0,X.flowing=!1,Q&&Q.emit("unpipe",this,q)),this;if(!Q){var Z=X.pipes,J=X.pipesCount;X.pipes=null,X.pipesCount=0,X.flowing=!1;for(var ne=0;ne<J;ne++)Z[ne].emit("unpipe",this,{hasUnpiped:!1});return this}var re=te(X.pipes,Q);return re===-1||(X.pipes.splice(re,1),X.pipesCount-=1,X.pipesCount===1&&(X.pipes=X.pipes[0]),Q.emit("unpipe",this,q)),this},w.prototype.on=function(Q,X){var q=m.prototype.on.call(this,Q,X),Z=this._readableState;return Q==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):Q==="readable"&&(Z.endEmitted||Z.readableListening||(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,l("on readable",Z.length,Z.reading),Z.length?C(this):Z.reading||M.nextTick(I,this))),q},w.prototype.addListener=w.prototype.on,w.prototype.removeListener=function(Q,X){var q=m.prototype.removeListener.call(this,Q,X);return Q==="readable"&&M.nextTick(G,this),q},w.prototype.removeAllListeners=function(Q){var X=m.prototype.removeAllListeners.apply(this,arguments);return Q!=="readable"&&Q!==void 0||M.nextTick(G,this),X},w.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(l("resume"),Q.flowing=!Q.readableListening,function(X,q){q.resumeScheduled||(q.resumeScheduled=!0,M.nextTick(H,X,q))}(this,Q)),Q.paused=!1,this},w.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},w.prototype.wrap=function(Q){var X=this,q=this._readableState,Z=!1;for(var J in Q.on("end",function(){if(l("wrapped end"),q.decoder&&!q.ended){var re=q.decoder.end();re&&re.length&&X.push(re)}X.push(null)}),Q.on("data",function(re){l("wrapped data"),q.decoder&&(re=q.decoder.write(re)),q.objectMode&&re==null||(q.objectMode||re&&re.length)&&(X.push(re)||(Z=!0,Q.pause()))}),Q)this[J]===void 0&&typeof Q[J]=="function"&&(this[J]=function(re){return function(){return Q[re].apply(Q,arguments)}}(J));for(var ne=0;ne<v.length;ne++)Q.on(v[ne],this.emit.bind(this,v[ne]));return this._read=function(re){l("wrapped _read",re),Z&&(Z=!1,Q.resume())},this},typeof Symbol=="function"&&(w.prototype[Symbol.asyncIterator]=function(){return r===void 0&&(r=t(68221)),r(this)}),Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(w.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(w.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Q){this._readableState&&(this._readableState.flowing=Q)}}),w._fromList=F,Object.defineProperty(w.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(w.from=function(Q,X){return n===void 0&&(n=t(31748)),n(w,Q,X)})},74308:function($,P,t){$.exports=e;var A=t(74322).q,M=A.ERR_METHOD_NOT_IMPLEMENTED,l=A.ERR_MULTIPLE_CALLBACK,_=A.ERR_TRANSFORM_ALREADY_TRANSFORMING,m=A.ERR_TRANSFORM_WITH_LENGTH_0,f=t(37865);function o(n,s){var a=this._transformState;a.transforming=!1;var u=a.writecb;if(u===null)return this.emit("error",new l);a.writechunk=null,a.writecb=null,s!=null&&this.push(s),u(n);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function e(n){if(!(this instanceof e))return new e(n);f.call(this,n),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",i)}function i(){var n=this;typeof this._flush!="function"||this._readableState.destroyed?r(this,null,null):this._flush(function(s,a){r(n,s,a)})}function r(n,s,a){if(s)return n.emit("error",s);if(a!=null&&n.push(a),n._writableState.length)throw new m;if(n._transformState.transforming)throw new _;return n.push(null)}t(42018)(e,f),e.prototype.push=function(n,s){return this._transformState.needTransform=!1,f.prototype.push.call(this,n,s)},e.prototype._transform=function(n,s,a){a(new M("_transform()"))},e.prototype._write=function(n,s,a){var u=this._transformState;if(u.writecb=a,u.writechunk=n,u.writeencoding=s,!u.transforming){var p=this._readableState;(u.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},e.prototype._read=function(n){var s=this._transformState;s.writechunk===null||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},e.prototype._destroy=function(n,s){f.prototype._destroy.call(this,n,function(a){s(a)})}},37493:function($,P,t){var A,M=t(90386);function l(O){var z=this;this.next=null,this.entry=null,this.finish=function(){(function(G,I,H){var N=G.entry;for(G.entry=null;N;){var F=N.callback;I.pendingcb--,F(void 0),N=N.next}I.corkedRequestsFree.next=G})(z,O)}}$.exports=w,w.WritableState=y;var _,m={deprecate:t(20588)},f=t(71405),o=t(12856).Buffer,e=t.g.Uint8Array||function(){},i=t(65756),r=t(56306).getHighWaterMark,n=t(74322).q,s=n.ERR_INVALID_ARG_TYPE,a=n.ERR_METHOD_NOT_IMPLEMENTED,u=n.ERR_MULTIPLE_CALLBACK,p=n.ERR_STREAM_CANNOT_PIPE,c=n.ERR_STREAM_DESTROYED,x=n.ERR_STREAM_NULL_VALUES,g=n.ERR_STREAM_WRITE_AFTER_END,h=n.ERR_UNKNOWN_ENCODING,b=i.errorOrDestroy;function v(){}function y(O,z,G){A=A||t(37865),O=O||{},typeof G!="boolean"&&(G=z instanceof A),this.objectMode=!!O.objectMode,G&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=r(this,O,"writableHighWaterMark",G),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=O.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(H){(function(N,F){var V=N._writableState,W=V.sync,te=V.writecb;if(typeof te!="function")throw new u;if(function(X){X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0}(V),F)(function(X,q,Z,J,ne){--q.pendingcb,Z?(M.nextTick(ne,J),M.nextTick(L,X,q),X._writableState.errorEmitted=!0,b(X,J)):(ne(J),X._writableState.errorEmitted=!0,b(X,J),L(X,q))})(N,V,W,F,te);else{var Q=E(V)||N.destroyed;Q||V.corked||V.bufferProcessing||!V.bufferedRequest||T(N,V),W?M.nextTick(S,N,V,Q,te):S(N,V,Q,te)}})(z,H)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function w(O){var z=this instanceof(A=A||t(37865));if(!z&&!_.call(w,this))return new w(O);this._writableState=new y(O,this,z),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),f.call(this)}function d(O,z,G,I,H,N,F){z.writelen=I,z.writecb=F,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new c("write")):G?O._writev(H,z.onwrite):O._write(H,N,z.onwrite),z.sync=!1}function S(O,z,G,I){G||function(H,N){N.length===0&&N.needDrain&&(N.needDrain=!1,H.emit("drain"))}(O,z),z.pendingcb--,I(),L(O,z)}function T(O,z){z.bufferProcessing=!0;var G=z.bufferedRequest;if(O._writev&&G&&G.next){var I=z.bufferedRequestCount,H=new Array(I),N=z.corkedRequestsFree;N.entry=G;for(var F=0,V=!0;G;)H[F]=G,G.isBuf||(V=!1),G=G.next,F+=1;H.allBuffers=V,d(O,z,!0,z.length,H,"",N.finish),z.pendingcb++,z.lastBufferedRequest=null,N.next?(z.corkedRequestsFree=N.next,N.next=null):z.corkedRequestsFree=new l(z),z.bufferedRequestCount=0}else{for(;G;){var W=G.chunk,te=G.encoding,Q=G.callback;if(d(O,z,!1,z.objectMode?1:W.length,W,te,Q),G=G.next,z.bufferedRequestCount--,z.writing)break}G===null&&(z.lastBufferedRequest=null)}z.bufferedRequest=G,z.bufferProcessing=!1}function E(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function C(O,z){O._final(function(G){z.pendingcb--,G&&b(O,G),z.prefinished=!0,O.emit("prefinish"),L(O,z)})}function L(O,z){var G=E(z);if(G&&(function(H,N){N.prefinished||N.finalCalled||(typeof H._final!="function"||N.destroyed?(N.prefinished=!0,H.emit("prefinish")):(N.pendingcb++,N.finalCalled=!0,M.nextTick(C,H,N)))}(O,z),z.pendingcb===0&&(z.finished=!0,O.emit("finish"),z.autoDestroy))){var I=O._readableState;(!I||I.autoDestroy&&I.endEmitted)&&O.destroy()}return G}t(42018)(w,f),y.prototype.getBuffer=function(){for(var O=this.bufferedRequest,z=[];O;)z.push(O),O=O.next;return z},function(){try{Object.defineProperty(y.prototype,"buffer",{get:m.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(O){return!!_.call(this,O)||this===w&&O&&O._writableState instanceof y}})):_=function(O){return O instanceof this},w.prototype.pipe=function(){b(this,new p)},w.prototype.write=function(O,z,G){var I,H=this._writableState,N=!1,F=!H.objectMode&&(I=O,o.isBuffer(I)||I instanceof e);return F&&!o.isBuffer(O)&&(O=function(V){return o.from(V)}(O)),typeof z=="function"&&(G=z,z=null),F?z="buffer":z||(z=H.defaultEncoding),typeof G!="function"&&(G=v),H.ending?function(V,W){var te=new g;b(V,te),M.nextTick(W,te)}(this,G):(F||function(V,W,te,Q){var X;return te===null?X=new x:typeof te=="string"||W.objectMode||(X=new s("chunk",["string","Buffer"],te)),!X||(b(V,X),M.nextTick(Q,X),!1)}(this,H,O,G))&&(H.pendingcb++,N=function(V,W,te,Q,X,q){if(!te){var Z=function(ae,ue,he){return ae.objectMode||ae.decodeStrings===!1||typeof ue!="string"||(ue=o.from(ue,he)),ue}(W,Q,X);Q!==Z&&(te=!0,X="buffer",Q=Z)}var J=W.objectMode?1:Q.length;W.length+=J;var ne=W.length<W.highWaterMark;if(ne||(W.needDrain=!0),W.writing||W.corked){var re=W.lastBufferedRequest;W.lastBufferedRequest={chunk:Q,encoding:X,isBuf:te,callback:q,next:null},re?re.next=W.lastBufferedRequest:W.bufferedRequest=W.lastBufferedRequest,W.bufferedRequestCount+=1}else d(V,W,!1,J,Q,X,q);return ne}(this,H,F,O,z,G)),N},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,O.writing||O.corked||O.bufferProcessing||!O.bufferedRequest||T(this,O))},w.prototype.setDefaultEncoding=function(O){if(typeof O=="string"&&(O=O.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((O+"").toLowerCase())>-1))throw new h(O);return this._writableState.defaultEncoding=O,this},Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(O,z,G){G(new a("_write()"))},w.prototype._writev=null,w.prototype.end=function(O,z,G){var I=this._writableState;return typeof O=="function"?(G=O,O=null,z=null):typeof z=="function"&&(G=z,z=null),O!=null&&this.write(O,z),I.corked&&(I.corked=1,this.uncork()),I.ending||function(H,N,F){N.ending=!0,L(H,N),F&&(N.finished?M.nextTick(F):H.once("finish",F)),N.ended=!0,H.writable=!1}(this,I,G),this},Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(O){this._writableState&&(this._writableState.destroyed=O)}}),w.prototype.destroy=i.destroy,w.prototype._undestroy=i.undestroy,w.prototype._destroy=function(O,z){z(O)}},68221:function($,P,t){var A,M=t(90386);function l(x,g,h){return g in x?Object.defineProperty(x,g,{value:h,enumerable:!0,configurable:!0,writable:!0}):x[g]=h,x}var _=t(12726),m=Symbol("lastResolve"),f=Symbol("lastReject"),o=Symbol("error"),e=Symbol("ended"),i=Symbol("lastPromise"),r=Symbol("handlePromise"),n=Symbol("stream");function s(x,g){return{value:x,done:g}}function a(x){var g=x[m];if(g!==null){var h=x[n].read();h!==null&&(x[i]=null,x[m]=null,x[f]=null,g(s(h,!1)))}}function u(x){M.nextTick(a,x)}var p=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((l(A={get stream(){return this[n]},next:function(){var x=this,g=this[o];if(g!==null)return Promise.reject(g);if(this[e])return Promise.resolve(s(void 0,!0));if(this[n].destroyed)return new Promise(function(y,w){M.nextTick(function(){x[o]?w(x[o]):y(s(void 0,!0))})});var h,b=this[i];if(b)h=new Promise(function(y,w){return function(d,S){y.then(function(){w[e]?d(s(void 0,!0)):w[r](d,S)},S)}}(b,this));else{var v=this[n].read();if(v!==null)return Promise.resolve(s(v,!1));h=new Promise(this[r])}return this[i]=h,h}},Symbol.asyncIterator,function(){return this}),l(A,"return",function(){var x=this;return new Promise(function(g,h){x[n].destroy(null,function(b){b?h(b):g(s(void 0,!0))})})}),A),p);$.exports=function(x){var g,h=Object.create(c,(l(g={},n,{value:x,writable:!0}),l(g,m,{value:null,writable:!0}),l(g,f,{value:null,writable:!0}),l(g,o,{value:null,writable:!0}),l(g,e,{value:x._readableState.endEmitted,writable:!0}),l(g,r,{value:function(b,v){var y=h[n].read();y?(h[i]=null,h[m]=null,h[f]=null,b(s(y,!1))):(h[m]=b,h[f]=v)},writable:!0}),g));return h[i]=null,_(x,function(b){if(b&&b.code!=="ERR_STREAM_PREMATURE_CLOSE"){var v=h[f];return v!==null&&(h[i]=null,h[m]=null,h[f]=null,v(b)),void(h[o]=b)}var y=h[m];y!==null&&(h[i]=null,h[m]=null,h[f]=null,y(s(void 0,!0))),h[e]=!0}),x.on("readable",u.bind(null,h)),h}},31125:function($,P,t){function A(o,e){var i=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(o,n).enumerable})),i.push.apply(i,r)}return i}function M(o,e,i){return e in o?Object.defineProperty(o,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[e]=i,o}function l(o,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}var _=t(12856).Buffer,m=t(69862).inspect,f=m&&m.custom||"inspect";$.exports=function(){function o(){(function(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")})(this,o),this.head=null,this.tail=null,this.length=0}var e,i;return e=o,i=[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,s=""+n.data;n=n.next;)s+=r+n.data;return s}},{key:"concat",value:function(r){if(this.length===0)return _.alloc(0);for(var n,s,a,u=_.allocUnsafe(r>>>0),p=this.head,c=0;p;)n=p.data,s=u,a=c,_.prototype.copy.call(n,s,a),c+=p.data.length,p=p.next;return u}},{key:"consume",value:function(r,n){var s;return r<this.head.data.length?(s=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):s=r===this.head.data.length?this.shift():n?this._getString(r):this._getBuffer(r),s}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,s=1,a=n.data;for(r-=a.length;n=n.next;){var u=n.data,p=r>u.length?u.length:r;if(p===u.length?a+=u:a+=u.slice(0,r),(r-=p)==0){p===u.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=u.slice(p));break}++s}return this.length-=s,a}},{key:"_getBuffer",value:function(r){var n=_.allocUnsafe(r),s=this.head,a=1;for(s.data.copy(n),r-=s.data.length;s=s.next;){var u=s.data,p=r>u.length?u.length:r;if(u.copy(n,n.length-r,0,p),(r-=p)==0){p===u.length?(++a,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=u.slice(p));break}++a}return this.length-=a,n}},{key:f,value:function(r,n){return m(this,function(s){for(var a=1;a<arguments.length;a++){var u=arguments[a]!=null?arguments[a]:{};a%2?A(Object(u),!0).forEach(function(p){M(s,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):A(Object(u)).forEach(function(p){Object.defineProperty(s,p,Object.getOwnPropertyDescriptor(u,p))})}return s}({},n,{depth:0,customInspect:!1}))}}],i&&l(e.prototype,i),o}()},65756:function($,P,t){var A=t(90386);function M(m,f){_(m,f),l(m)}function l(m){m._writableState&&!m._writableState.emitClose||m._readableState&&!m._readableState.emitClose||m.emit("close")}function _(m,f){m.emit("error",f)}$.exports={destroy:function(m,f){var o=this,e=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return e||i?(f?f(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,A.nextTick(_,this,m)):A.nextTick(_,this,m)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(m||null,function(r){!f&&r?o._writableState?o._writableState.errorEmitted?A.nextTick(l,o):(o._writableState.errorEmitted=!0,A.nextTick(M,o,r)):A.nextTick(M,o,r):f?(A.nextTick(l,o),f(r)):A.nextTick(l,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(m,f){var o=m._readableState,e=m._writableState;o&&o.autoDestroy||e&&e.autoDestroy?m.destroy(f):m.emit("error",f)}}},12726:function($,P,t){var A=t(74322).q.ERR_STREAM_PREMATURE_CLOSE;function M(){}$.exports=function l(_,m,f){if(typeof m=="function")return l(_,null,m);m||(m={}),f=function(x){var g=!1;return function(){if(!g){g=!0;for(var h=arguments.length,b=new Array(h),v=0;v<h;v++)b[v]=arguments[v];x.apply(this,b)}}}(f||M);var o=m.readable||m.readable!==!1&&_.readable,e=m.writable||m.writable!==!1&&_.writable,i=function(){_.writable||n()},r=_._writableState&&_._writableState.finished,n=function(){e=!1,r=!0,o||f.call(_)},s=_._readableState&&_._readableState.endEmitted,a=function(){o=!1,s=!0,e||f.call(_)},u=function(x){f.call(_,x)},p=function(){var x;return o&&!s?(_._readableState&&_._readableState.ended||(x=new A),f.call(_,x)):e&&!r?(_._writableState&&_._writableState.ended||(x=new A),f.call(_,x)):void 0},c=function(){_.req.on("finish",n)};return function(x){return x.setHeader&&typeof x.abort=="function"}(_)?(_.on("complete",n),_.on("abort",p),_.req?c():_.on("request",c)):e&&!_._writableState&&(_.on("end",i),_.on("close",i)),_.on("end",a),_.on("finish",n),m.error!==!1&&_.on("error",u),_.on("close",p),function(){_.removeListener("complete",n),_.removeListener("abort",p),_.removeListener("request",c),_.req&&_.req.removeListener("finish",n),_.removeListener("end",i),_.removeListener("close",i),_.removeListener("finish",n),_.removeListener("end",a),_.removeListener("error",u),_.removeListener("close",p)}}},31748:function($){$.exports=function(){throw new Error("Readable.from is not available in the browser")}},10168:function($,P,t){var A,M=t(74322).q,l=M.ERR_MISSING_ARGS,_=M.ERR_STREAM_DESTROYED;function m(e){if(e)throw e}function f(e){e()}function o(e,i){return e.pipe(i)}$.exports=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];var n,s=function(u){return u.length?typeof u[u.length-1]!="function"?m:u.pop():m}(i);if(Array.isArray(i[0])&&(i=i[0]),i.length<2)throw new l("streams");var a=i.map(function(u,p){var c=p<i.length-1;return function(x,g,h,b){b=function(w){var d=!1;return function(){d||(d=!0,w.apply(void 0,arguments))}}(b);var v=!1;x.on("close",function(){v=!0}),A===void 0&&(A=t(12726)),A(x,{readable:g,writable:h},function(w){if(w)return b(w);v=!0,b()});var y=!1;return function(w){if(!v&&!y)return y=!0,function(d){return d.setHeader&&typeof d.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void b(w||new _("pipe"))}}(u,c,p>0,function(x){n||(n=x),x&&a.forEach(f),c||(a.forEach(f),s(n))})});return i.reduce(o)}},56306:function($,P,t){var A=t(74322).q.ERR_INVALID_OPT_VALUE;$.exports={getHighWaterMark:function(M,l,_,m){var f=function(o,e,i){return o.highWaterMark!=null?o.highWaterMark:e?o[i]:null}(l,m,_);if(f!=null){if(!isFinite(f)||Math.floor(f)!==f||f<0)throw new A(m?_:"highWaterMark",f);return Math.floor(f)}return M.objectMode?16:16384}}},71405:function($,P,t){$.exports=t(15398).EventEmitter},68019:function($,P,t){var A=t(71665).Buffer,M=A.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function l(s){var a;switch(this.encoding=function(u){var p=function(c){if(!c)return"utf8";for(var x;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(x)return;c=(""+c).toLowerCase(),x=!0}}(u);if(typeof p!="string"&&(A.isEncoding===M||!M(u)))throw new Error("Unknown encoding: "+u);return p||u}(s),this.encoding){case"utf16le":this.text=f,this.end=o,a=4;break;case"utf8":this.fillLast=m,a=4;break;case"base64":this.text=e,this.end=i,a=3;break;default:return this.write=r,void(this.end=n)}this.lastNeed=0,this.lastTotal=0,this.lastChar=A.allocUnsafe(a)}function _(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function m(s){var a=this.lastTotal-this.lastNeed,u=function(p,c,x){if((192&c[0])!=128)return p.lastNeed=0,"";if(p.lastNeed>1&&c.length>1){if((192&c[1])!=128)return p.lastNeed=1,"";if(p.lastNeed>2&&c.length>2&&(192&c[2])!=128)return p.lastNeed=2,""}}(this,s);return u!==void 0?u:this.lastNeed<=s.length?(s.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,a,0,s.length),void(this.lastNeed-=s.length))}function f(s,a){if((s.length-a)%2==0){var u=s.toString("utf16le",a);if(u){var p=u.charCodeAt(u.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",a,s.length-1)}function o(s){var a=s&&s.length?this.write(s):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,u)}return a}function e(s,a){var u=(s.length-a)%3;return u===0?s.toString("base64",a):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",a,s.length-u))}function i(s){var a=s&&s.length?this.write(s):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function r(s){return s.toString(this.encoding)}function n(s){return s&&s.length?this.write(s):""}P.s=l,l.prototype.write=function(s){if(s.length===0)return"";var a,u;if(this.lastNeed){if((a=this.fillLast(s))===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<s.length?a?a+this.text(s,u):this.text(s,u):a||""},l.prototype.end=function(s){var a=s&&s.length?this.write(s):"";return this.lastNeed?a+"":a},l.prototype.text=function(s,a){var u=function(c,x,g){var h=x.length-1;if(h<g)return 0;var b=_(x[h]);return b>=0?(b>0&&(c.lastNeed=b-1),b):--h<g||b===-2?0:(b=_(x[h]))>=0?(b>0&&(c.lastNeed=b-2),b):--h<g||b===-2?0:(b=_(x[h]))>=0?(b>0&&(b===2?b=0:c.lastNeed=b-3),b):0}(this,s,a);if(!this.lastNeed)return s.toString("utf8",a);this.lastTotal=u;var p=s.length-(u-this.lastNeed);return s.copy(this.lastChar,0,p),s.toString("utf8",a,p)},l.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},90715:function($,P,t){var A=t(32791),M=t(41633)("stream-parser");$.exports=function(c){var x=c&&typeof c._transform=="function",g=c&&typeof c._write=="function";if(!x&&!g)throw new Error("must pass a Writable or Transform stream in");M("extending Parser into stream"),c._bytes=e,c._skipBytes=i,x&&(c._passthrough=r),x?c._transform=s:c._write=n};var l=-1,_=0,m=1,f=2;function o(c){M("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=l,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function e(c,x){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||o(this),M("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=_}function i(c,x){A(!this._parserCallback,'there is already a "callback" set!'),A(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||o(this),M("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=m}function r(c,x){A(!this._parserCallback,'There is already a "callback" set!'),A(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||o(this),M("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=x,this._parserState=f}function n(c,x,g){this._parserInit||o(this),M("write(%o bytes)",c.length),typeof x=="function"&&(g=x),u(this,c,null,g)}function s(c,x,g){this._parserInit||o(this),M("transform(%o bytes)",c.length),typeof x!="function"&&(x=this._parserOutput),u(this,c,x,g)}function a(c,x,g,h){if(c._parserBytesLeft-=x.length,M("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===_?(c._parserBuffers.push(x),c._parserBuffered+=x.length):c._parserState===f&&g(x),c._parserBytesLeft!==0)return h;var b=c._parserCallback;if(b&&c._parserState===_&&c._parserBuffers.length>1&&(x=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==_&&(x=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=l,c._parserBuffers.splice(0),b){var v=[];x&&v.push(x),g&&v.push(g);var y=b.length>v.length;y&&v.push(p(h));var w=b.apply(c,v);if(!y||h===w)return h}}var u=p(function c(x,g,h,b){return x._parserBytesLeft<=0?b(new Error("got data but not currently parsing anything")):g.length<=x._parserBytesLeft?function(){return a(x,g,h,b)}:function(){var v=g.slice(0,x._parserBytesLeft);return a(x,v,h,function(y){return y?b(y):g.length>v.length?function(){return c(x,g.slice(v.length),h,b)}:void 0})}});function p(c){return function(){for(var x=c.apply(this,arguments);typeof x=="function";)x=x();return x}}},41633:function($,P,t){var A=t(90386);function M(){var l;try{l=P.storage.debug}catch{}return!l&&A!==void 0&&"env"in A&&(l=A.env.DEBUG),l}(P=$.exports=t(74469)).log=function(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},P.formatArgs=function(l){var _=this.useColors;if(l[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+l[0]+(_?"%c ":" ")+"+"+P.humanize(this.diff),_){var m="color: "+this.color;l.splice(1,0,m,"color: inherit");var f=0,o=0;l[0].replace(/%[a-zA-Z%]/g,function(e){e!=="%%"&&(f++,e==="%c"&&(o=f))}),l.splice(o,0,m)}},P.save=function(l){try{l==null?P.storage.removeItem("debug"):P.storage.debug=l}catch{}},P.load=M,P.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer")||typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},P.storage=typeof chrome<"u"&&chrome.storage!==void 0?chrome.storage.local:function(){try{return window.localStorage}catch{}}(),P.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],P.formatters.j=function(l){try{return JSON.stringify(l)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},P.enable(M())},74469:function($,P,t){var A;function M(l){function _(){if(_.enabled){var m=_,f=+new Date,o=f-(A||f);m.diff=o,m.prev=A,m.curr=f,A=f;for(var e=new Array(arguments.length),i=0;i<e.length;i++)e[i]=arguments[i];e[0]=P.coerce(e[0]),typeof e[0]!="string"&&e.unshift("%O");var r=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(n,s){if(n==="%%")return n;r++;var a=P.formatters[s];if(typeof a=="function"){var u=e[r];n=a.call(m,u),e.splice(r,1),r--}return n}),P.formatArgs.call(m,e),(_.log||P.log||console.log.bind(console)).apply(m,e)}}return _.namespace=l,_.enabled=P.enabled(l),_.useColors=P.useColors(),_.color=function(m){var f,o=0;for(f in m)o=(o<<5)-o+m.charCodeAt(f),o|=0;return P.colors[Math.abs(o)%P.colors.length]}(l),typeof P.init=="function"&&P.init(_),_}(P=$.exports=M.debug=M.default=M).coerce=function(l){return l instanceof Error?l.stack||l.message:l},P.disable=function(){P.enable("")},P.enable=function(l){P.save(l),P.names=[],P.skips=[];for(var _=(typeof l=="string"?l:"").split(/[\s,]+/),m=_.length,f=0;f<m;f++)_[f]&&((l=_[f].replace(/\*/g,".*?"))[0]==="-"?P.skips.push(new RegExp("^"+l.substr(1)+"$")):P.names.push(new RegExp("^"+l+"$")))},P.enabled=function(l){var _,m;for(_=0,m=P.skips.length;_<m;_++)if(P.skips[_].test(l))return!1;for(_=0,m=P.names.length;_<m;_++)if(P.names[_].test(l))return!0;return!1},P.humanize=t(11375),P.names=[],P.skips=[],P.formatters={}},11375:function($){var P=1e3,t=60*P,A=60*t,M=24*A;function l(_,m,f){if(!(_<m))return _<1.5*m?Math.floor(_/m)+" "+f:Math.ceil(_/m)+" "+f+"s"}$.exports=function(_,m){m=m||{};var f,o=typeof _;if(o==="string"&&_.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(i){var r=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*M;case"hours":case"hour":case"hrs":case"hr":case"h":return r*A;case"minutes":case"minute":case"mins":case"min":case"m":return r*t;case"seconds":case"second":case"secs":case"sec":case"s":return r*P;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(_);if(o==="number"&&isNaN(_)===!1)return m.long?l(f=_,M,"day")||l(f,A,"hour")||l(f,t,"minute")||l(f,P,"second")||f+" ms":function(e){return e>=M?Math.round(e/M)+"d":e>=A?Math.round(e/A)+"h":e>=t?Math.round(e/t)+"m":e>=P?Math.round(e/P)+"s":e+"ms"}(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))}},99011:function($,P,t){var A=t(88641);$.exports=function(M,l,_){if(M==null)throw Error("First argument should be a string");if(l==null)throw Error("Separator should be a string or a RegExp");_?(typeof _=="string"||Array.isArray(_))&&(_={ignore:_}):_={},_.escape==null&&(_.escape=!0),_.ignore==null?_.ignore=["[]","()","{}","<>",'""',"''","``","",""]:(typeof _.ignore=="string"&&(_.ignore=[_.ignore]),_.ignore=_.ignore.map(function(n){return n.length===1&&(n+=n),n}));var m=A.parse(M,{flat:!0,brackets:_.ignore}),f=m[0].split(l);if(_.escape){for(var o=[],e=0;e<f.length;e++){var i=f[e],r=f[e+1];i[i.length-1]==="\\"&&i[i.length-2]!=="\\"?(o.push(i+l+r),e++):o.push(i)}f=o}for(e=0;e<f.length;e++)m[0]=f[e],f[e]=A.stringify(m,{flat:!0});return f}},68664:function($){$.exports=function(P){for(var t=P.length,A=new Array(t),M=new Array(t),l=new Array(t),_=new Array(t),m=new Array(t),f=new Array(t),o=0;o<t;++o)A[o]=-1,M[o]=0,l[o]=!1,_[o]=0,m[o]=-1,f[o]=[];var e,i=0,r=[],n=[];function s(p){var c=[p],x=[p];for(A[p]=M[p]=i,l[p]=!0,i+=1;x.length>0;){p=x[x.length-1];var g=P[p];if(_[p]<g.length){for(var h=_[p];h<g.length;++h){var b=g[h];if(A[b]<0){A[b]=M[b]=i,l[b]=!0,i+=1,c.push(b),x.push(b);break}l[b]&&(M[p]=0|Math.min(M[p],M[b])),m[b]>=0&&f[p].push(m[b])}_[p]=h}else{if(M[p]===A[p]){var v=[],y=[],w=0;for(h=c.length-1;h>=0;--h){var d=c[h];if(l[d]=!1,v.push(d),y.push(f[d]),w+=f[d].length,m[d]=r.length,d===p){c.length=h;break}}r.push(v);var S=new Array(w);for(h=0;h<y.length;h++)for(var T=0;T<y[h].length;T++)S[--w]=y[h][T];n.push(S)}x.pop()}}}for(o=0;o<t;++o)A[o]<0&&s(o);for(o=0;o<n.length;o++){var a=n[o];if(a.length!==0){a.sort(function(p,c){return p-c}),e=[a[0]];for(var u=1;u<a.length;u++)a[u]!==a[u-1]&&e.push(a[u]);n[o]=e}}return{components:r,adjacencyList:n}}},7095:function($,P,t){t.r(P);var A=2*Math.PI,M=function(m,f,o,e,i,r,n){var s=m.x,a=m.y;return{x:e*(s*=f)-i*(a*=o)+r,y:i*s+e*a+n}},l=function(m,f){var o=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(f/4),e=Math.cos(m),i=Math.sin(m),r=Math.cos(m+f),n=Math.sin(m+f);return[{x:e-i*o,y:i+e*o},{x:r+n*o,y:n-r*o},{x:r,y:n}]},_=function(m,f,o,e){var i=m*o+f*e;return i>1&&(i=1),i<-1&&(i=-1),(m*e-f*o<0?-1:1)*Math.acos(i)};P.default=function(m){var f=m.px,o=m.py,e=m.cx,i=m.cy,r=m.rx,n=m.ry,s=m.xAxisRotation,a=s===void 0?0:s,u=m.largeArcFlag,p=u===void 0?0:u,c=m.sweepFlag,x=c===void 0?0:c,g=[];if(r===0||n===0)return[];var h=Math.sin(a*A/360),b=Math.cos(a*A/360),v=b*(f-e)/2+h*(o-i)/2,y=-h*(f-e)/2+b*(o-i)/2;if(v===0&&y===0)return[];r=Math.abs(r),n=Math.abs(n);var w=Math.pow(v,2)/Math.pow(r,2)+Math.pow(y,2)/Math.pow(n,2);w>1&&(r*=Math.sqrt(w),n*=Math.sqrt(w));var d=function(I,H,N,F,V,W,te,Q,X,q,Z,J){var ne=Math.pow(V,2),re=Math.pow(W,2),ae=Math.pow(Z,2),ue=Math.pow(J,2),he=ne*re-ne*ue-re*ae;he<0&&(he=0),he/=ne*ue+re*ae;var de=(he=Math.sqrt(he)*(te===Q?-1:1))*V/W*J,xe=he*-W/V*Z,me=q*de-X*xe+(I+N)/2,ve=X*de+q*xe+(H+F)/2,Le=(Z-de)/V,Ae=(J-xe)/W,we=(-Z-de)/V,se=(-J-xe)/W,oe=_(1,0,Le,Ae),fe=_(Le,Ae,we,se);return Q===0&&fe>0&&(fe-=A),Q===1&&fe<0&&(fe+=A),[me,ve,oe,fe]}(f,o,e,i,r,n,p,x,h,b,v,y),S=function(I,H){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(N,F){var V=[],W=!0,te=!1,Q=void 0;try{for(var X,q=N[Symbol.iterator]();!(W=(X=q.next()).done)&&(V.push(X.value),!F||V.length!==F);W=!0);}catch(Z){te=!0,Q=Z}finally{try{!W&&q.return&&q.return()}finally{if(te)throw Q}}return V}(I,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(d,4),T=S[0],E=S[1],C=S[2],L=S[3],O=Math.abs(L)/(A/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);L/=z;for(var G=0;G<z;G++)g.push(l(C,L)),C+=L;return g.map(function(I){var H=M(I[0],r,n,b,h,T,E),N=H.x,F=H.y,V=M(I[1],r,n,b,h,T,E),W=V.x,te=V.y,Q=M(I[2],r,n,b,h,T,E);return{x1:N,y1:F,x2:W,y2:te,x:Q.x,y:Q.y}})}},1750:function($,P,t){var A=t(95616),M=t(65185),l=t(29988),_=t(89546),m=t(32791);$.exports=function(f){if(Array.isArray(f)&&f.length===1&&typeof f[0]=="string"&&(f=f[0]),typeof f=="string"&&(m(_(f),"String is not an SVG path."),f=A(f)),m(Array.isArray(f),"Argument should be a string or an array of path segments."),f=M(f),!(f=l(f)).length)return[0,0,0,0];for(var o=[1/0,1/0,-1/0,-1/0],e=0,i=f.length;e<i;e++)for(var r=f[e].slice(1),n=0;n<r.length;n+=2)r[n+0]<o[0]&&(o[0]=r[n+0]),r[n+1]<o[1]&&(o[1]=r[n+1]),r[n+0]>o[2]&&(o[2]=r[n+0]),r[n+1]>o[3]&&(o[3]=r[n+1]);return o}},29988:function($,P,t){$.exports=function(_){for(var m,f=[],o=0,e=0,i=0,r=0,n=null,s=null,a=0,u=0,p=0,c=_.length;p<c;p++){var x=_[p],g=x[0];switch(g){case"M":i=x[1],r=x[2];break;case"A":var h=A({px:a,py:u,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!h.length)continue;for(var b,v=0;v<h.length;v++)x=["C",(b=h[v]).x1,b.y1,b.x2,b.y2,b.x,b.y],v<h.length-1&&f.push(x);break;case"S":var y=a,w=u;m!="C"&&m!="S"||(y+=y-o,w+=w-e),x=["C",y,w,x[1],x[2],x[3],x[4]];break;case"T":m=="Q"||m=="T"?(n=2*a-n,s=2*u-s):(n=a,s=u),x=l(a,u,n,s,x[1],x[2]);break;case"Q":n=x[1],s=x[2],x=l(a,u,x[1],x[2],x[3],x[4]);break;case"L":x=M(a,u,x[1],x[2]);break;case"H":x=M(a,u,x[1],u);break;case"V":x=M(a,u,a,x[1]);break;case"Z":x=M(a,u,i,r)}m=g,a=x[x.length-2],u=x[x.length-1],x.length>4?(o=x[x.length-4],e=x[x.length-3]):(o=a,e=u),f.push(x)}return f};var A=t(7095);function M(_,m,f,o){return["C",_,m,f,o,f,o]}function l(_,m,f,o,e,i){return["C",_/3+.6666666666666666*f,m/3+.6666666666666666*o,e/3+.6666666666666666*f,i/3+.6666666666666666*o,e,i]}},82019:function($,P,t){var A,M=t(1750),l=t(95616),_=t(31457),m=t(89546),f=t(44781),o=document.createElement("canvas"),e=o.getContext("2d");$.exports=function(i,r){if(!m(i))throw Error("Argument should be valid svg path string");var n,s;r||(r={}),r.shape?(n=r.shape[0],s=r.shape[1]):(n=o.width=r.w||r.width||200,s=o.height=r.h||r.height||200);var a=Math.min(n,s),u=r.stroke||0,p=r.viewbox||r.viewBox||M(i),c=[n/(p[2]-p[0]),s/(p[3]-p[1])],x=Math.min(c[0]||0,c[1]||0)/2;if(e.fillStyle="black",e.fillRect(0,0,n,s),e.fillStyle="white",u&&(typeof u!="number"&&(u=1),e.strokeStyle=u>0?"white":"black",e.lineWidth=Math.abs(u)),e.translate(.5*n,.5*s),e.scale(x,x),function(){if(A!=null)return A;var b=document.createElement("canvas").getContext("2d");if(b.canvas.width=b.canvas.height=1,!window.Path2D)return A=!1;var v=new Path2D("M0,0h1v1h-1v-1Z");b.fillStyle="black",b.fill(v);var y=b.getImageData(0,0,1,1);return A=y&&y.data&&y.data[3]===255}()){var g=new Path2D(i);e.fill(g),u&&e.stroke(g)}else{var h=l(i);_(e,h),e.fill(),u&&e.stroke()}return e.setTransform(1,0,0,1,0,0),f(e,{cutoff:r.cutoff!=null?r.cutoff:.5,radius:r.radius!=null?r.radius:.5*a})}},84267:function($,P,t){var A;(function(M){var l=/^\s+/,_=/\s+$/,m=0,f=M.round,o=M.min,e=M.max,i=M.random;function r(Z,J){if(J=J||{},(Z=Z||"")instanceof r)return Z;if(!(this instanceof r))return new r(Z,J);var ne=function(re){var ae,ue,he,de={r:0,g:0,b:0},xe=1,me=null,ve=null,Le=null,Ae=!1,we=!1;return typeof re=="string"&&(re=function(se){se=se.replace(l,"").replace(_,"").toLowerCase();var oe,fe=!1;if(C[se])se=C[se],fe=!0;else if(se=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(oe=X.rgb.exec(se))?{r:oe[1],g:oe[2],b:oe[3]}:(oe=X.rgba.exec(se))?{r:oe[1],g:oe[2],b:oe[3],a:oe[4]}:(oe=X.hsl.exec(se))?{h:oe[1],s:oe[2],l:oe[3]}:(oe=X.hsla.exec(se))?{h:oe[1],s:oe[2],l:oe[3],a:oe[4]}:(oe=X.hsv.exec(se))?{h:oe[1],s:oe[2],v:oe[3]}:(oe=X.hsva.exec(se))?{h:oe[1],s:oe[2],v:oe[3],a:oe[4]}:(oe=X.hex8.exec(se))?{r:I(oe[1]),g:I(oe[2]),b:I(oe[3]),a:V(oe[4]),format:fe?"name":"hex8"}:(oe=X.hex6.exec(se))?{r:I(oe[1]),g:I(oe[2]),b:I(oe[3]),format:fe?"name":"hex"}:(oe=X.hex4.exec(se))?{r:I(oe[1]+""+oe[1]),g:I(oe[2]+""+oe[2]),b:I(oe[3]+""+oe[3]),a:V(oe[4]+""+oe[4]),format:fe?"name":"hex8"}:!!(oe=X.hex3.exec(se))&&{r:I(oe[1]+""+oe[1]),g:I(oe[2]+""+oe[2]),b:I(oe[3]+""+oe[3]),format:fe?"name":"hex"}}(re)),typeof re=="object"&&(q(re.r)&&q(re.g)&&q(re.b)?(ae=re.r,ue=re.g,he=re.b,de={r:255*z(ae,255),g:255*z(ue,255),b:255*z(he,255)},Ae=!0,we=String(re.r).substr(-1)==="%"?"prgb":"rgb"):q(re.h)&&q(re.s)&&q(re.v)?(me=N(re.s),ve=N(re.v),de=function(se,oe,fe){se=6*z(se,360),oe=z(oe,100),fe=z(fe,100);var Se=M.floor(se),Me=se-Se,be=fe*(1-oe),Ie=fe*(1-Me*oe),Be=fe*(1-(1-Me)*oe),ce=Se%6;return{r:255*[fe,Ie,be,be,Be,fe][ce],g:255*[Be,fe,fe,Ie,be,be][ce],b:255*[be,be,Be,fe,fe,Ie][ce]}}(re.h,me,ve),Ae=!0,we="hsv"):q(re.h)&&q(re.s)&&q(re.l)&&(me=N(re.s),Le=N(re.l),de=function(se,oe,fe){var Se,Me,be;function Ie(Te,ye,Pe){return Pe<0&&(Pe+=1),Pe>1&&(Pe-=1),Pe<1/6?Te+6*(ye-Te)*Pe:Pe<.5?ye:Pe<2/3?Te+(ye-Te)*(2/3-Pe)*6:Te}if(se=z(se,360),oe=z(oe,100),fe=z(fe,100),oe===0)Se=Me=be=fe;else{var Be=fe<.5?fe*(1+oe):fe+oe-fe*oe,ce=2*fe-Be;Se=Ie(ce,Be,se+1/3),Me=Ie(ce,Be,se),be=Ie(ce,Be,se-1/3)}return{r:255*Se,g:255*Me,b:255*be}}(re.h,me,Le),Ae=!0,we="hsl"),re.hasOwnProperty("a")&&(xe=re.a)),xe=O(xe),{ok:Ae,format:re.format||we,r:o(255,e(de.r,0)),g:o(255,e(de.g,0)),b:o(255,e(de.b,0)),a:xe}}(Z);this._originalInput=Z,this._r=ne.r,this._g=ne.g,this._b=ne.b,this._a=ne.a,this._roundA=f(100*this._a)/100,this._format=J.format||ne.format,this._gradientType=J.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=ne.ok,this._tc_id=m++}function n(Z,J,ne){Z=z(Z,255),J=z(J,255),ne=z(ne,255);var re,ae,ue=e(Z,J,ne),he=o(Z,J,ne),de=(ue+he)/2;if(ue==he)re=ae=0;else{var xe=ue-he;switch(ae=de>.5?xe/(2-ue-he):xe/(ue+he),ue){case Z:re=(J-ne)/xe+(J<ne?6:0);break;case J:re=(ne-Z)/xe+2;break;case ne:re=(Z-J)/xe+4}re/=6}return{h:re,s:ae,l:de}}function s(Z,J,ne){Z=z(Z,255),J=z(J,255),ne=z(ne,255);var re,ae,ue=e(Z,J,ne),he=o(Z,J,ne),de=ue,xe=ue-he;if(ae=ue===0?0:xe/ue,ue==he)re=0;else{switch(ue){case Z:re=(J-ne)/xe+(J<ne?6:0);break;case J:re=(ne-Z)/xe+2;break;case ne:re=(Z-J)/xe+4}re/=6}return{h:re,s:ae,v:de}}function a(Z,J,ne,re){var ae=[H(f(Z).toString(16)),H(f(J).toString(16)),H(f(ne).toString(16))];return re&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function u(Z,J,ne,re){return[H(F(re)),H(f(Z).toString(16)),H(f(J).toString(16)),H(f(ne).toString(16))].join("")}function p(Z,J){J=J===0?0:J||10;var ne=r(Z).toHsl();return ne.s-=J/100,ne.s=G(ne.s),r(ne)}function c(Z,J){J=J===0?0:J||10;var ne=r(Z).toHsl();return ne.s+=J/100,ne.s=G(ne.s),r(ne)}function x(Z){return r(Z).desaturate(100)}function g(Z,J){J=J===0?0:J||10;var ne=r(Z).toHsl();return ne.l+=J/100,ne.l=G(ne.l),r(ne)}function h(Z,J){J=J===0?0:J||10;var ne=r(Z).toRgb();return ne.r=e(0,o(255,ne.r-f(-J/100*255))),ne.g=e(0,o(255,ne.g-f(-J/100*255))),ne.b=e(0,o(255,ne.b-f(-J/100*255))),r(ne)}function b(Z,J){J=J===0?0:J||10;var ne=r(Z).toHsl();return ne.l-=J/100,ne.l=G(ne.l),r(ne)}function v(Z,J){var ne=r(Z).toHsl(),re=(ne.h+J)%360;return ne.h=re<0?360+re:re,r(ne)}function y(Z){var J=r(Z).toHsl();return J.h=(J.h+180)%360,r(J)}function w(Z){var J=r(Z).toHsl(),ne=J.h;return[r(Z),r({h:(ne+120)%360,s:J.s,l:J.l}),r({h:(ne+240)%360,s:J.s,l:J.l})]}function d(Z){var J=r(Z).toHsl(),ne=J.h;return[r(Z),r({h:(ne+90)%360,s:J.s,l:J.l}),r({h:(ne+180)%360,s:J.s,l:J.l}),r({h:(ne+270)%360,s:J.s,l:J.l})]}function S(Z){var J=r(Z).toHsl(),ne=J.h;return[r(Z),r({h:(ne+72)%360,s:J.s,l:J.l}),r({h:(ne+216)%360,s:J.s,l:J.l})]}function T(Z,J,ne){J=J||6,ne=ne||30;var re=r(Z).toHsl(),ae=360/ne,ue=[r(Z)];for(re.h=(re.h-(ae*J>>1)+720)%360;--J;)re.h=(re.h+ae)%360,ue.push(r(re));return ue}function E(Z,J){J=J||6;for(var ne=r(Z).toHsv(),re=ne.h,ae=ne.s,ue=ne.v,he=[],de=1/J;J--;)he.push(r({h:re,s:ae,v:ue})),ue=(ue+de)%1;return he}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(299*Z.r+587*Z.g+114*Z.b)/1e3},getLuminance:function(){var Z,J,ne,re=this.toRgb();return Z=re.r/255,J=re.g/255,ne=re.b/255,.2126*(Z<=.03928?Z/12.92:M.pow((Z+.055)/1.055,2.4))+.7152*(J<=.03928?J/12.92:M.pow((J+.055)/1.055,2.4))+.0722*(ne<=.03928?ne/12.92:M.pow((ne+.055)/1.055,2.4))},setAlpha:function(Z){return this._a=O(Z),this._roundA=f(100*this._a)/100,this},toHsv:function(){var Z=s(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=s(this._r,this._g,this._b),J=f(360*Z.h),ne=f(100*Z.s),re=f(100*Z.v);return this._a==1?"hsv("+J+", "+ne+"%, "+re+"%)":"hsva("+J+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHsl:function(){var Z=n(this._r,this._g,this._b);return{h:360*Z.h,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=n(this._r,this._g,this._b),J=f(360*Z.h),ne=f(100*Z.s),re=f(100*Z.l);return this._a==1?"hsl("+J+", "+ne+"%, "+re+"%)":"hsla("+J+", "+ne+"%, "+re+"%, "+this._roundA+")"},toHex:function(Z){return a(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return function(J,ne,re,ae,ue){var he=[H(f(J).toString(16)),H(f(ne).toString(16)),H(f(re).toString(16)),H(F(ae))];return ue&&he[0].charAt(0)==he[0].charAt(1)&&he[1].charAt(0)==he[1].charAt(1)&&he[2].charAt(0)==he[2].charAt(1)&&he[3].charAt(0)==he[3].charAt(1)?he[0].charAt(0)+he[1].charAt(0)+he[2].charAt(0)+he[3].charAt(0):he.join("")}(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+f(this._r)+", "+f(this._g)+", "+f(this._b)+")":"rgba("+f(this._r)+", "+f(this._g)+", "+f(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:f(100*z(this._r,255))+"%",g:f(100*z(this._g,255))+"%",b:f(100*z(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+f(100*z(this._r,255))+"%, "+f(100*z(this._g,255))+"%, "+f(100*z(this._b,255))+"%)":"rgba("+f(100*z(this._r,255))+"%, "+f(100*z(this._g,255))+"%, "+f(100*z(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(L[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(Z){var J="#"+u(this._r,this._g,this._b,this._a),ne=J,re=this._gradientType?"GradientType = 1, ":"";if(Z){var ae=r(Z);ne="#"+u(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+re+"startColorstr="+J+",endColorstr="+ne+")"},toString:function(Z){var J=!!Z;Z=Z||this._format;var ne=!1,re=this._a<1&&this._a>=0;return J||!re||Z!=="hex"&&Z!=="hex6"&&Z!=="hex3"&&Z!=="hex4"&&Z!=="hex8"&&Z!=="name"?(Z==="rgb"&&(ne=this.toRgbString()),Z==="prgb"&&(ne=this.toPercentageRgbString()),Z!=="hex"&&Z!=="hex6"||(ne=this.toHexString()),Z==="hex3"&&(ne=this.toHexString(!0)),Z==="hex4"&&(ne=this.toHex8String(!0)),Z==="hex8"&&(ne=this.toHex8String()),Z==="name"&&(ne=this.toName()),Z==="hsl"&&(ne=this.toHslString()),Z==="hsv"&&(ne=this.toHsvString()),ne||this.toHexString()):Z==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return r(this.toString())},_applyModification:function(Z,J){var ne=Z.apply(null,[this].concat([].slice.call(J)));return this._r=ne._r,this._g=ne._g,this._b=ne._b,this.setAlpha(ne._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(Z,J){return Z.apply(null,[this].concat([].slice.call(J)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(E,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(d,arguments)}},r.fromRatio=function(Z,J){if(typeof Z=="object"){var ne={};for(var re in Z)Z.hasOwnProperty(re)&&(ne[re]=re==="a"?Z[re]:N(Z[re]));Z=ne}return r(Z,J)},r.equals=function(Z,J){return!(!Z||!J)&&r(Z).toRgbString()==r(J).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})},r.mix=function(Z,J,ne){ne=ne===0?0:ne||50;var re=r(Z).toRgb(),ae=r(J).toRgb(),ue=ne/100;return r({r:(ae.r-re.r)*ue+re.r,g:(ae.g-re.g)*ue+re.g,b:(ae.b-re.b)*ue+re.b,a:(ae.a-re.a)*ue+re.a})},r.readability=function(Z,J){var ne=r(Z),re=r(J);return(M.max(ne.getLuminance(),re.getLuminance())+.05)/(M.min(ne.getLuminance(),re.getLuminance())+.05)},r.isReadable=function(Z,J,ne){var re,ae,ue,he,de,xe=r.readability(Z,J);switch(ae=!1,(ue=ne,(he=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&he!=="AAA"&&(he="AA"),(de=(ue.size||"small").toLowerCase())!=="small"&&de!=="large"&&(de="small"),re={level:he,size:de}).level+re.size){case"AAsmall":case"AAAlarge":ae=xe>=4.5;break;case"AAlarge":ae=xe>=3;break;case"AAAsmall":ae=xe>=7}return ae},r.mostReadable=function(Z,J,ne){var re,ae,ue,he,de=null,xe=0;ae=(ne=ne||{}).includeFallbackColors,ue=ne.level,he=ne.size;for(var me=0;me<J.length;me++)(re=r.readability(Z,J[me]))>xe&&(xe=re,de=r(J[me]));return r.isReadable(Z,de,{level:ue,size:he})||!ae?de:(ne.includeFallbackColors=!1,r.mostReadable(Z,["#fff","#000"],ne))};var C=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=r.hexNames=function(Z){var J={};for(var ne in Z)Z.hasOwnProperty(ne)&&(J[Z[ne]]=ne);return J}(C);function O(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function z(Z,J){(function(re){return typeof re=="string"&&re.indexOf(".")!=-1&&parseFloat(re)===1})(Z)&&(Z="100%");var ne=function(re){return typeof re=="string"&&re.indexOf("%")!=-1}(Z);return Z=o(J,e(0,parseFloat(Z))),ne&&(Z=parseInt(Z*J,10)/100),M.abs(Z-J)<1e-6?1:Z%J/parseFloat(J)}function G(Z){return o(1,e(0,Z))}function I(Z){return parseInt(Z,16)}function H(Z){return Z.length==1?"0"+Z:""+Z}function N(Z){return Z<=1&&(Z=100*Z+"%"),Z}function F(Z){return M.round(255*parseFloat(Z)).toString(16)}function V(Z){return I(Z)/255}var W,te,Q,X=(te="[\\s|\\(]+("+(W="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",Q="[\\s|\\(]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")[,|\\s]+("+W+")\\s*\\)?",{CSS_UNIT:new RegExp(W),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+Q),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+Q),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+Q),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function q(Z){return!!X.CSS_UNIT.exec(Z)}$.exports?$.exports=r:(A=(function(){return r}).call(P,t,P,$))===void 0||($.exports=A)})(Math)},57060:function($){$.exports=t,$.exports.float32=$.exports.float=t,$.exports.fract32=$.exports.fract=function(A,M){if(A.length){if(A instanceof Float32Array)return new Float32Array(A.length);M instanceof Float32Array||(M=t(A));for(var l=0,_=M.length;l<_;l++)M[l]=A[l]-M[l];return M}return t(A-t(A))};var P=new Float32Array(1);function t(A){return A.length?A instanceof Float32Array?A:new Float32Array(A):(P[0]=A,P[0])}},75686:function($,P,t){var A=t(25677);$.exports=_;var M=96;function l(m,f){var o=A(getComputedStyle(m).getPropertyValue(f));return o[0]*_(o[1],m)}function _(m,f){switch(f=f||document.body,m=(m||"px").trim().toLowerCase(),f!==window&&f!==document||(f=document.body),m){case"%":return f.clientHeight/100;case"ch":case"ex":return function(o,e){var i=document.createElement("div");i.style["font-size"]="128"+o,e.appendChild(i);var r=l(i,"font-size")/128;return e.removeChild(i),r}(m,f);case"em":return l(f,"font-size");case"rem":return l(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return M;case"cm":return M/2.54;case"mm":return M/25.4;case"pt":return M/72;case"pc":return M/6}return 1}},96892:function($,P,t){function A(_){return _}function M(_,m){return typeof m=="string"&&(m=_.objects[m]),m.type==="GeometryCollection"?{type:"FeatureCollection",features:m.geometries.map(function(f){return l(_,f)})}:l(_,m)}function l(_,m){var f=m.id,o=m.bbox,e=m.properties==null?{}:m.properties,i=function(r,n){var s=function(h){if(h==null)return A;var b,v,y=h.scale[0],w=h.scale[1],d=h.translate[0],S=h.translate[1];return function(T,E){E||(b=v=0);var C=2,L=T.length,O=new Array(L);for(O[0]=(b+=T[0])*y+d,O[1]=(v+=T[1])*w+S;C<L;)O[C]=T[C],++C;return O}}(r.transform),a=r.arcs;function u(h,b){b.length&&b.pop();for(var v=a[h<0?~h:h],y=0,w=v.length;y<w;++y)b.push(s(v[y],y));h<0&&function(d,S){for(var T,E=d.length,C=E-S;C<--E;)T=d[C],d[C++]=d[E],d[E]=T}(b,w)}function p(h){return s(h)}function c(h){for(var b=[],v=0,y=h.length;v<y;++v)u(h[v],b);return b.length<2&&b.push(b[0]),b}function x(h){for(var b=c(h);b.length<4;)b.push(b[0]);return b}function g(h){return h.map(x)}return function h(b){var v,y=b.type;switch(y){case"GeometryCollection":return{type:y,geometries:b.geometries.map(h)};case"Point":v=p(b.coordinates);break;case"MultiPoint":v=b.coordinates.map(p);break;case"LineString":v=c(b.arcs);break;case"MultiLineString":v=b.arcs.map(c);break;case"Polygon":v=g(b.arcs);break;case"MultiPolygon":v=b.arcs.map(g);break;default:return null}return{type:y,coordinates:v}}(n)}(_,m);return f==null&&o==null?{type:"Feature",properties:e,geometry:i}:o==null?{type:"Feature",id:f,properties:e,geometry:i}:{type:"Feature",id:f,bbox:o,properties:e,geometry:i}}t.d(P,{zL:function(){return M}})},73116:function($,P,t){var A=t(24511);$.exports=function(M){if(typeof M!="function"||!hasOwnProperty.call(M,"length"))return!1;try{if(typeof M.length!="number"||typeof M.call!="function"||typeof M.apply!="function")return!1}catch{return!1}return!A(M)}},69190:function($,P,t){var A=t(24582),M=t(47403),l=t(9234),_=t(6048),m=function(f,o){return f.replace("%v",_(o))};$.exports=function(f,o,e){if(!M(e))throw new TypeError(m(o,f));if(!A(f)){if("default"in e)return e.default;if(e.isOptional)return null}var i=l(e.errorMessage);throw A(i)||(i=o),new TypeError(m(i,f))}},18497:function($){$.exports=function(P){try{return P.toString()}catch{try{return String(P)}catch{return null}}}},6048:function($,P,t){var A=t(18497),M=/[\n\r\u2028\u2029]/g;$.exports=function(l){var _=A(l);return _===null?"<Non-coercible to string value>":(_.length>100&&(_=_.slice(0,99)+""),_=_.replace(M,function(m){switch(m){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},47403:function($,P,t){var A=t(24582),M={object:!0,function:!0,undefined:!0};$.exports=function(l){return!!A(l)&&hasOwnProperty.call(M,typeof l)}},82527:function($,P,t){var A=t(69190),M=t(84985);$.exports=function(l){return M(l)?l:A(l,"%v is not a plain function",arguments[1])}},84985:function($,P,t){var A=t(73116),M=/^\s*class[\s{/}]/,l=Function.prototype.toString;$.exports=function(_){return!!A(_)&&!M.test(l.call(_))}},24511:function($,P,t){var A=t(47403);$.exports=function(M){if(!A(M))return!1;try{return!!M.constructor&&M.constructor.prototype===M}catch{return!1}}},9234:function($,P,t){var A=t(24582),M=t(47403),l=Object.prototype.toString;$.exports=function(_){if(!A(_))return null;if(M(_)){var m=_.toString;if(typeof m!="function"||m===l)return null}try{return""+_}catch{return null}}},10424:function($,P,t){var A=t(69190),M=t(24582);$.exports=function(l){return M(l)?l:A(l,"Cannot use %v",arguments[1])}},24582:function($){$.exports=function(P){return P!=null}},58404:function($,P,t){var A=t(13547),M=t(12129),l=t(12856).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var _=typeof Uint8ClampedArray<"u",m=typeof BigUint64Array<"u",f=typeof BigInt64Array<"u",o=t.g.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=M([32,0])),o.BIGUINT64||(o.BIGUINT64=M([32,0])),o.BIGINT64||(o.BIGINT64=M([32,0])),o.BUFFER||(o.BUFFER=M([32,0]));var e=o.DATA,i=o.BUFFER;function r(S){if(S){var T=S.length||S.byteLength,E=A.log2(T);e[E].push(S)}}function n(S){S=A.nextPow2(S);var T=A.log2(S),E=e[T];return E.length>0?E.pop():new ArrayBuffer(S)}function s(S){return new Uint8Array(n(S),0,S)}function a(S){return new Uint16Array(n(2*S),0,S)}function u(S){return new Uint32Array(n(4*S),0,S)}function p(S){return new Int8Array(n(S),0,S)}function c(S){return new Int16Array(n(2*S),0,S)}function x(S){return new Int32Array(n(4*S),0,S)}function g(S){return new Float32Array(n(4*S),0,S)}function h(S){return new Float64Array(n(8*S),0,S)}function b(S){return _?new Uint8ClampedArray(n(S),0,S):s(S)}function v(S){return m?new BigUint64Array(n(8*S),0,S):null}function y(S){return f?new BigInt64Array(n(8*S),0,S):null}function w(S){return new DataView(n(S),0,S)}function d(S){S=A.nextPow2(S);var T=A.log2(S),E=i[T];return E.length>0?E.pop():new l(S)}P.free=function(S){if(l.isBuffer(S))i[A.log2(S.length)].push(S);else{if(Object.prototype.toString.call(S)!=="[object ArrayBuffer]"&&(S=S.buffer),!S)return;var T=S.length||S.byteLength,E=0|A.log2(T);e[E].push(S)}},P.freeUint8=P.freeUint16=P.freeUint32=P.freeBigUint64=P.freeInt8=P.freeInt16=P.freeInt32=P.freeBigInt64=P.freeFloat32=P.freeFloat=P.freeFloat64=P.freeDouble=P.freeUint8Clamped=P.freeDataView=function(S){r(S.buffer)},P.freeArrayBuffer=r,P.freeBuffer=function(S){i[A.log2(S.length)].push(S)},P.malloc=function(S,T){if(T===void 0||T==="arraybuffer")return n(S);switch(T){case"uint8":return s(S);case"uint16":return a(S);case"uint32":return u(S);case"int8":return p(S);case"int16":return c(S);case"int32":return x(S);case"float":case"float32":return g(S);case"double":case"float64":return h(S);case"uint8_clamped":return b(S);case"bigint64":return y(S);case"biguint64":return v(S);case"buffer":return d(S);case"data":case"dataview":return w(S);default:return null}return null},P.mallocArrayBuffer=n,P.mallocUint8=s,P.mallocUint16=a,P.mallocUint32=u,P.mallocInt8=p,P.mallocInt16=c,P.mallocInt32=x,P.mallocFloat32=P.mallocFloat=g,P.mallocFloat64=P.mallocDouble=h,P.mallocUint8Clamped=b,P.mallocBigUint64=v,P.mallocBigInt64=y,P.mallocDataView=w,P.mallocBuffer=d,P.clearCache=function(){for(var S=0;S<32;++S)o.UINT8[S].length=0,o.UINT16[S].length=0,o.UINT32[S].length=0,o.INT8[S].length=0,o.INT16[S].length=0,o.INT32[S].length=0,o.FLOAT[S].length=0,o.DOUBLE[S].length=0,o.BIGUINT64[S].length=0,o.BIGINT64[S].length=0,o.UINT8C[S].length=0,e[S].length=0,i[S].length=0}},90448:function($){var P=/[\'\"]/;$.exports=function(t){return t?(P.test(t.charAt(0))&&(t=t.substr(1)),P.test(t.charAt(t.length-1))&&(t=t.substr(0,t.length-1)),t):""}},93447:function($){$.exports=function(P,t,A){Array.isArray(A)||(A=[].slice.call(arguments,2));for(var M=0,l=A.length;M<l;M++){var _=A[M];for(var m in _)if((t[m]===void 0||Array.isArray(t[m])||P[m]!==t[m])&&m in t){var f;if(_[m]===!0)f=t[m];else if(_[m]===!1||typeof _[m]=="function"&&(f=_[m](t[m],P,t))===void 0)continue;P[m]=f}}return P}},20588:function($,P,t){function A(M){try{if(!t.g.localStorage)return!1}catch{return!1}var l=t.g.localStorage[M];return l!=null&&String(l).toLowerCase()==="true"}$.exports=function(M,l){if(A("noDeprecation"))return M;var _=!1;return function(){if(!_){if(A("throwDeprecation"))throw new Error(l);A("traceDeprecation")?console.trace(l):console.warn(l),_=!0}return M.apply(this,arguments)}}},45920:function($){$.exports=function(P){return P&&typeof P=="object"&&typeof P.copy=="function"&&typeof P.fill=="function"&&typeof P.readUInt8=="function"}},4936:function($,P,t){var A=t(47216),M=t(65481),l=t(21099),_=t(9187);function m(z){return z.call.bind(z)}var f=typeof BigInt<"u",o=typeof Symbol<"u",e=m(Object.prototype.toString),i=m(Number.prototype.valueOf),r=m(String.prototype.valueOf),n=m(Boolean.prototype.valueOf);if(f)var s=m(BigInt.prototype.valueOf);if(o)var a=m(Symbol.prototype.valueOf);function u(z,G){if(typeof z!="object")return!1;try{return G(z),!0}catch{return!1}}function p(z){return e(z)==="[object Map]"}function c(z){return e(z)==="[object Set]"}function x(z){return e(z)==="[object WeakMap]"}function g(z){return e(z)==="[object WeakSet]"}function h(z){return e(z)==="[object ArrayBuffer]"}function b(z){return typeof ArrayBuffer<"u"&&(h.working?h(z):z instanceof ArrayBuffer)}function v(z){return e(z)==="[object DataView]"}function y(z){return typeof DataView<"u"&&(v.working?v(z):z instanceof DataView)}P.isArgumentsObject=A,P.isGeneratorFunction=M,P.isTypedArray=_,P.isPromise=function(z){return typeof Promise<"u"&&z instanceof Promise||z!==null&&typeof z=="object"&&typeof z.then=="function"&&typeof z.catch=="function"},P.isArrayBufferView=function(z){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(z):_(z)||y(z)},P.isUint8Array=function(z){return l(z)==="Uint8Array"},P.isUint8ClampedArray=function(z){return l(z)==="Uint8ClampedArray"},P.isUint16Array=function(z){return l(z)==="Uint16Array"},P.isUint32Array=function(z){return l(z)==="Uint32Array"},P.isInt8Array=function(z){return l(z)==="Int8Array"},P.isInt16Array=function(z){return l(z)==="Int16Array"},P.isInt32Array=function(z){return l(z)==="Int32Array"},P.isFloat32Array=function(z){return l(z)==="Float32Array"},P.isFloat64Array=function(z){return l(z)==="Float64Array"},P.isBigInt64Array=function(z){return l(z)==="BigInt64Array"},P.isBigUint64Array=function(z){return l(z)==="BigUint64Array"},p.working=typeof Map<"u"&&p(new Map),P.isMap=function(z){return typeof Map<"u"&&(p.working?p(z):z instanceof Map)},c.working=typeof Set<"u"&&c(new Set),P.isSet=function(z){return typeof Set<"u"&&(c.working?c(z):z instanceof Set)},x.working=typeof WeakMap<"u"&&x(new WeakMap),P.isWeakMap=function(z){return typeof WeakMap<"u"&&(x.working?x(z):z instanceof WeakMap)},g.working=typeof WeakSet<"u"&&g(new WeakSet),P.isWeakSet=function(z){return g(z)},h.working=typeof ArrayBuffer<"u"&&h(new ArrayBuffer),P.isArrayBuffer=b,v.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&v(new DataView(new ArrayBuffer(1),0,1)),P.isDataView=y;var w=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function d(z){return e(z)==="[object SharedArrayBuffer]"}function S(z){return w!==void 0&&(d.working===void 0&&(d.working=d(new w)),d.working?d(z):z instanceof w)}function T(z){return u(z,i)}function E(z){return u(z,r)}function C(z){return u(z,n)}function L(z){return f&&u(z,s)}function O(z){return o&&u(z,a)}P.isSharedArrayBuffer=S,P.isAsyncFunction=function(z){return e(z)==="[object AsyncFunction]"},P.isMapIterator=function(z){return e(z)==="[object Map Iterator]"},P.isSetIterator=function(z){return e(z)==="[object Set Iterator]"},P.isGeneratorObject=function(z){return e(z)==="[object Generator]"},P.isWebAssemblyCompiledModule=function(z){return e(z)==="[object WebAssembly.Module]"},P.isNumberObject=T,P.isStringObject=E,P.isBooleanObject=C,P.isBigIntObject=L,P.isSymbolObject=O,P.isBoxedPrimitive=function(z){return T(z)||E(z)||C(z)||L(z)||O(z)},P.isAnyArrayBuffer=function(z){return typeof Uint8Array<"u"&&(b(z)||S(z))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(z){Object.defineProperty(P,z,{enumerable:!1,value:function(){throw new Error(z+" is not supported in userland")}})})},43827:function($,P,t){var A=t(90386),M=Object.getOwnPropertyDescriptors||function(O){for(var z=Object.keys(O),G={},I=0;I<z.length;I++)G[z[I]]=Object.getOwnPropertyDescriptor(O,z[I]);return G},l=/%[sdj%]/g;P.format=function(O){if(!x(O)){for(var z=[],G=0;G<arguments.length;G++)z.push(o(arguments[G]));return z.join(" ")}G=1;for(var I=arguments,H=I.length,N=String(O).replace(l,function(V){if(V==="%%")return"%";if(G>=H)return V;switch(V){case"%s":return String(I[G++]);case"%d":return Number(I[G++]);case"%j":try{return JSON.stringify(I[G++])}catch{return"[Circular]"}default:return V}}),F=I[G];G<H;F=I[++G])p(F)||!b(F)?N+=" "+F:N+=" "+o(F);return N},P.deprecate=function(O,z){if(A!==void 0&&A.noDeprecation===!0)return O;if(A===void 0)return function(){return P.deprecate(O,z).apply(this,arguments)};var G=!1;return function(){if(!G){if(A.throwDeprecation)throw new Error(z);A.traceDeprecation?console.trace(z):console.error(z),G=!0}return O.apply(this,arguments)}};var _={},m=/^$/;if(A.env.NODE_DEBUG){var f=A.env.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),m=new RegExp("^"+f+"$","i")}function o(O,z){var G={seen:[],stylize:i};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),u(z)?G.showHidden=z:z&&P._extend(G,z),g(G.showHidden)&&(G.showHidden=!1),g(G.depth)&&(G.depth=2),g(G.colors)&&(G.colors=!1),g(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=e),r(G,O,G.depth)}function e(O,z){var G=o.styles[z];return G?"\x1B["+o.colors[G][0]+"m"+O+"\x1B["+o.colors[G][1]+"m":O}function i(O,z){return O}function r(O,z,G){if(O.customInspect&&z&&w(z.inspect)&&z.inspect!==P.inspect&&(!z.constructor||z.constructor.prototype!==z)){var I=z.inspect(G,O);return x(I)||(I=r(O,I,G)),I}var H=function(q,Z){if(g(Z))return q.stylize("undefined","undefined");if(x(Z)){var J="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(J,"string")}return c(Z)?q.stylize(""+Z,"number"):u(Z)?q.stylize(""+Z,"boolean"):p(Z)?q.stylize("null","null"):void 0}(O,z);if(H)return H;var N=Object.keys(z),F=function(q){var Z={};return q.forEach(function(J,ne){Z[J]=!0}),Z}(N);if(O.showHidden&&(N=Object.getOwnPropertyNames(z)),y(z)&&(N.indexOf("message")>=0||N.indexOf("description")>=0))return n(z);if(N.length===0){if(w(z)){var V=z.name?": "+z.name:"";return O.stylize("[Function"+V+"]","special")}if(h(z))return O.stylize(RegExp.prototype.toString.call(z),"regexp");if(v(z))return O.stylize(Date.prototype.toString.call(z),"date");if(y(z))return n(z)}var W,te="",Q=!1,X=["{","}"];return a(z)&&(Q=!0,X=["[","]"]),w(z)&&(te=" [Function"+(z.name?": "+z.name:"")+"]"),h(z)&&(te=" "+RegExp.prototype.toString.call(z)),v(z)&&(te=" "+Date.prototype.toUTCString.call(z)),y(z)&&(te=" "+n(z)),N.length!==0||Q&&z.length!=0?G<0?h(z)?O.stylize(RegExp.prototype.toString.call(z),"regexp"):O.stylize("[Object]","special"):(O.seen.push(z),W=Q?function(q,Z,J,ne,re){for(var ae=[],ue=0,he=Z.length;ue<he;++ue)E(Z,String(ue))?ae.push(s(q,Z,J,ne,String(ue),!0)):ae.push("");return re.forEach(function(de){de.match(/^\d+$/)||ae.push(s(q,Z,J,ne,de,!0))}),ae}(O,z,G,F,N):N.map(function(q){return s(O,z,G,F,q,Q)}),O.seen.pop(),function(q,Z,J){return q.reduce(function(ne,re){return re.indexOf(`
`),ne+re.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?J[0]+(Z===""?"":Z+`
 `)+" "+q.join(`,
  `)+" "+J[1]:J[0]+Z+" "+q.join(", ")+" "+J[1]}(W,te,X)):X[0]+te+X[1]}function n(O){return"["+Error.prototype.toString.call(O)+"]"}function s(O,z,G,I,H,N){var F,V,W;if((W=Object.getOwnPropertyDescriptor(z,H)||{value:z[H]}).get?V=W.set?O.stylize("[Getter/Setter]","special"):O.stylize("[Getter]","special"):W.set&&(V=O.stylize("[Setter]","special")),E(I,H)||(F="["+H+"]"),V||(O.seen.indexOf(W.value)<0?(V=p(G)?r(O,W.value,null):r(O,W.value,G-1)).indexOf(`
`)>-1&&(V=N?V.split(`
`).map(function(te){return"  "+te}).join(`
`).slice(2):`
`+V.split(`
`).map(function(te){return"   "+te}).join(`
`)):V=O.stylize("[Circular]","special")),g(F)){if(N&&H.match(/^\d+$/))return V;(F=JSON.stringify(""+H)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.slice(1,-1),F=O.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=O.stylize(F,"string"))}return F+": "+V}function a(O){return Array.isArray(O)}function u(O){return typeof O=="boolean"}function p(O){return O===null}function c(O){return typeof O=="number"}function x(O){return typeof O=="string"}function g(O){return O===void 0}function h(O){return b(O)&&d(O)==="[object RegExp]"}function b(O){return typeof O=="object"&&O!==null}function v(O){return b(O)&&d(O)==="[object Date]"}function y(O){return b(O)&&(d(O)==="[object Error]"||O instanceof Error)}function w(O){return typeof O=="function"}function d(O){return Object.prototype.toString.call(O)}function S(O){return O<10?"0"+O.toString(10):O.toString(10)}P.debuglog=function(O){if(O=O.toUpperCase(),!_[O])if(m.test(O)){var z=A.pid;_[O]=function(){var G=P.format.apply(P,arguments);console.error("%s %d: %s",O,z,G)}}else _[O]=function(){};return _[O]},P.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},P.types=t(4936),P.isArray=a,P.isBoolean=u,P.isNull=p,P.isNullOrUndefined=function(O){return O==null},P.isNumber=c,P.isString=x,P.isSymbol=function(O){return typeof O=="symbol"},P.isUndefined=g,P.isRegExp=h,P.types.isRegExp=h,P.isObject=b,P.isDate=v,P.types.isDate=v,P.isError=y,P.types.isNativeError=y,P.isFunction=w,P.isPrimitive=function(O){return O===null||typeof O=="boolean"||typeof O=="number"||typeof O=="string"||typeof O=="symbol"||O===void 0},P.isBuffer=t(45920);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(O,z){return Object.prototype.hasOwnProperty.call(O,z)}P.log=function(){var O,z;console.log("%s - %s",(z=[S((O=new Date).getHours()),S(O.getMinutes()),S(O.getSeconds())].join(":"),[O.getDate(),T[O.getMonth()],z].join(" ")),P.format.apply(P,arguments))},P.inherits=t(42018),P._extend=function(O,z){if(!z||!b(z))return O;for(var G=Object.keys(z),I=G.length;I--;)O[G[I]]=z[G[I]];return O};var C=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function L(O,z){if(!O){var G=new Error("Promise was rejected with a falsy value");G.reason=O,O=G}return z(O)}P.promisify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');if(C&&O[C]){var z;if(typeof(z=O[C])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(z,C,{value:z,enumerable:!1,writable:!1,configurable:!0}),z}function z(){for(var G,I,H=new Promise(function(V,W){G=V,I=W}),N=[],F=0;F<arguments.length;F++)N.push(arguments[F]);N.push(function(V,W){V?I(V):G(W)});try{O.apply(this,N)}catch(V){I(V)}return H}return Object.setPrototypeOf(z,Object.getPrototypeOf(O)),C&&Object.defineProperty(z,C,{value:z,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(z,M(O))},P.promisify.custom=C,P.callbackify=function(O){if(typeof O!="function")throw new TypeError('The "original" argument must be of type Function');function z(){for(var G=[],I=0;I<arguments.length;I++)G.push(arguments[I]);var H=G.pop();if(typeof H!="function")throw new TypeError("The last argument must be of type Function");var N=this,F=function(){return H.apply(N,arguments)};O.apply(this,G).then(function(V){A.nextTick(F.bind(null,null,V))},function(V){A.nextTick(L.bind(null,V,F))})}return Object.setPrototypeOf(z,Object.getPrototypeOf(O)),Object.defineProperties(z,M(O)),z}},40372:function($,P,t){var A=t(86249);$.exports=function(M){return A("webgl",M)}},21099:function($,P,t){var A=t(31353),M=t(72077),l=t(6614),_=t(40383),m=l("Object.prototype.toString"),f=t(84543)(),o=typeof globalThis>"u"?t.g:globalThis,e=M(),i=l("String.prototype.slice"),r={},n=Object.getPrototypeOf;f&&_&&n&&A(e,function(a){if(typeof o[a]=="function"){var u=new o[a];if(Symbol.toStringTag in u){var p=n(u),c=_(p,Symbol.toStringTag);if(!c){var x=n(p);c=_(x,Symbol.toStringTag)}r[a]=c.get}}});var s=t(9187);$.exports=function(a){return!!s(a)&&(f&&Symbol.toStringTag in a?function(u){var p=!1;return A(r,function(c,x){if(!p)try{var g=c.call(u);g===x&&(p=g)}catch{}}),p}(a):i(m(a),8,-1))}},3961:function($,P,t){var A=t(63489),M=t(56131),l=A.instance();function _(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}_.prototype=new A.baseCalendar,M(_.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(n,s){if(typeof n=="string"){var a=n.match(f);return a?a[0]:""}var u=this._validateYear(n),p=n.month(),c=""+this.toChineseMonth(u,p);return s&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(u,p)&&(c+="i"),c},monthNames:function(n){if(typeof n=="string"){var s=n.match(o);return s?s[0]:""}var a=this._validateYear(n),u=n.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(a,u)-1];return this.isIntercalaryMonth(a,u)&&(p=""+p),p},monthNamesShort:function(n){if(typeof n=="string"){var s=n.match(e);return s?s[0]:""}var a=this._validateYear(n),u=n.month(),p=["","","","","","","","","","","",""][this.toChineseMonth(a,u)-1];return this.isIntercalaryMonth(a,u)&&(p=""+p),p},parseMonth:function(n,s){n=this._validateYear(n);var a,u=parseInt(s);if(isNaN(u))s[0]===""&&(a=!0,s=s.substring(1)),s[s.length-1]===""&&(s=s.substring(0,s.length-1)),u=1+["","","","","","","","","","","",""].indexOf(s);else{var p=s[s.length-1];a=p==="i"||p==="I"}return this.toMonthIndex(n,u,a)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(n,s){if(n.year&&(n=n.year()),typeof n!="number"||n<1888||n>2111)throw s.replace(/\{0\}/,this.local.name);return n},toMonthIndex:function(n,s,a){var u=this.intercalaryMonth(n);if(a&&s!==u||s<1||s>12)throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return u?!a&&s<=u?s-1:s:s-1},toChineseMonth:function(n,s){n.year&&(s=(n=n.year()).month());var a=this.intercalaryMonth(n);if(s<0||s>(a?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return a?s<a?s+1:s:s+1},intercalaryMonth:function(n){return n=this._validateYear(n),i[n-i[0]]>>13},isIntercalaryMonth:function(n,s){n.year&&(s=(n=n.year()).month());var a=this.intercalaryMonth(n);return!!a&&a===s},leapYear:function(n){return this.intercalaryMonth(n)!==0},weekOfYear:function(n,s,a){var u,p=this._validateYear(n,A.local.invalidyear),c=r[p-r[0]],x=c>>9&4095,g=c>>5&15,h=31&c;(u=l.newDate(x,g,h)).add(4-(u.dayOfWeek()||7),"d");var b=this.toJD(n,s,a)-u.toJD();return 1+Math.floor(b/7)},monthsInYear:function(n){return this.leapYear(n)?13:12},daysInMonth:function(n,s){n.year&&(s=n.month(),n=n.year()),n=this._validateYear(n);var a=i[n-i[0]];if(s>(a>>13?12:11))throw A.local.invalidMonth.replace(/\{0\}/,this.local.name);return a&1<<12-s?30:29},weekDay:function(n,s,a){return(this.dayOfWeek(n,s,a)||7)<6},toJD:function(n,s,a){var u=this._validate(n,c,a,A.local.invalidDate);n=this._validateYear(u.year()),s=u.month(),a=u.day();var p=this.isIntercalaryMonth(n,s),c=this.toChineseMonth(n,s),x=function(g,h,b,v,y){var w,d,S;if(typeof g=="object")d=g,w=h||{};else{var T;if(!(typeof g=="number"&&g>=1888&&g<=2111))throw new Error("Lunar year outside range 1888-2111");if(!(typeof h=="number"&&h>=1&&h<=12))throw new Error("Lunar month outside range 1 - 12");if(!(typeof b=="number"&&b>=1&&b<=30))throw new Error("Lunar day outside range 1 - 30");typeof v=="object"?(T=!1,w=v):(T=!!v,w={}),d={year:g,month:h,day:b,isIntercalary:T}}S=d.day-1;var E,C=i[d.year-i[0]],L=C>>13;E=L&&(d.month>L||d.isIntercalary)?d.month:d.month-1;for(var O=0;O<E;O++)S+=C&1<<12-O?30:29;var z=r[d.year-r[0]],G=new Date(z>>9&4095,(z>>5&15)-1,(31&z)+S);return w.year=G.getFullYear(),w.month=1+G.getMonth(),w.day=G.getDate(),w}(n,c,a,p);return l.toJD(x.year,x.month,x.day)},fromJD:function(n){var s=l.fromJD(n),a=function(p,c,x,g){var h,b;if(typeof p=="object")h=p,b=c||{};else{if(!(typeof p=="number"&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!(typeof c=="number"&&c>=1&&c<=12))throw new Error("Solar month outside range 1 - 12");if(!(typeof x=="number"&&x>=1&&x<=31))throw new Error("Solar day outside range 1 - 31");h={year:p,month:c,day:x},b={}}var v=r[h.year-r[0]],y=h.year<<9|h.month<<5|h.day;b.year=y>=v?h.year:h.year-1,v=r[b.year-r[0]];var w,d=new Date(v>>9&4095,(v>>5&15)-1,31&v),S=new Date(h.year,h.month-1,h.day);w=Math.round((S-d)/864e5);var T,E=i[b.year-i[0]];for(T=0;T<13;T++){var C=E&1<<12-T?30:29;if(w<C)break;w-=C}var L=E>>13;return!L||T<L?(b.isIntercalary=!1,b.month=1+T):T===L?(b.isIntercalary=!0,b.month=T):(b.isIntercalary=!1,b.month=T),b.day=1+w,b}(s.year(),s.month(),s.day()),u=this.toMonthIndex(a.year,a.month,a.isIntercalary);return this.newDate(a.year,u,a.day)},fromString:function(n){var s=n.match(m),a=this._validateYear(+s[1]),u=+s[2],p=!!s[3],c=this.toMonthIndex(a,u,p),x=+s[4];return this.newDate(a,c,x)},add:function(n,s,a){var u=n.year(),p=n.month(),c=this.isIntercalaryMonth(u,p),x=this.toChineseMonth(u,p),g=Object.getPrototypeOf(_.prototype).add.call(this,n,s,a);if(a==="y"){var h=g.year(),b=g.month(),v=this.isIntercalaryMonth(h,x),y=c&&v?this.toMonthIndex(h,x,!0):this.toMonthIndex(h,x,!1);y!==b&&g.month(y)}return g}});var m=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,f=/^\d?\d[iI]?/m,o=/^??[]?/m,e=/^??[]?/m;A.calendars.chinese=_;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],r=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},38751:function($,P,t){var A=t(63489),M=t(56131);function l(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var m=this._validate(_,this.minMonth,this.minDay,A.local.invalidYear);return(_=m.year()+(m.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(_,m,f){var o=this.newDate(_,m,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(_,m){var f=this._validate(_,m,this.minDay,A.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(_,m,f){return(this.dayOfWeek(_,m,f)||7)<6},toJD:function(_,m,f){var o=this._validate(_,m,f,A.local.invalidDate);return(_=o.year())<0&&_++,o.day()+30*(o.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var m=Math.floor(_)+.5-this.jdEpoch,f=Math.floor((m-Math.floor((m+366)/1461))/365)+1;f<=0&&f--,m=Math.floor(_)+.5-this.newDate(f,1,1).toJD();var o=Math.floor(m/30)+1,e=m-30*(o-1)+1;return this.newDate(f,o,e)}}),A.calendars.coptic=l},86825:function($,P,t){var A=t(63489),M=t(56131);function l(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(m){return this._validate(m,this.minMonth,this.minDay,A.local.invalidYear),!1},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,A.local.invalidYear),13},daysInYear:function(m){return this._validate(m,this.minMonth,this.minDay,A.local.invalidYear),400},weekOfYear:function(m,f,o){var e=this.newDate(m,f,o);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/8)+1},daysInMonth:function(m,f){var o=this._validate(m,f,this.minDay,A.local.invalidMonth);return this.daysPerMonth[o.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(m,f,o){return(this._validate(m,f,o,A.local.invalidDate).day()+1)%8},weekDay:function(m,f,o){var e=this.dayOfWeek(m,f,o);return e>=2&&e<=6},extraInfo:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);return{century:_[Math.floor((e.year()-1)/100)+1]||""}},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);return m=e.year()+(e.year()<0?1:0),f=e.month(),(o=e.day())+(f>1?16:0)+(f>2?32*(f-2):0)+400*(m-1)+this.jdEpoch-1},fromJD:function(m){m=Math.floor(m+.5)-Math.floor(this.jdEpoch)-1;var f=Math.floor(m/400)+1;m-=400*(f-1),m+=m>15?16:0;var o=Math.floor(m/32)+1,e=m-32*(o-1)+1;return this.newDate(f<=0?f-1:f,o,e)}});var _={20:"Fruitbat",21:"Anchovy"};A.calendars.discworld=l},37715:function($,P,t){var A=t(63489),M=t(56131);function l(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var m=this._validate(_,this.minMonth,this.minDay,A.local.invalidYear);return(_=m.year()+(m.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear),13},weekOfYear:function(_,m,f){var o=this.newDate(_,m,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(_,m){var f=this._validate(_,m,this.minDay,A.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===13&&this.leapYear(f.year())?1:0)},weekDay:function(_,m,f){return(this.dayOfWeek(_,m,f)||7)<6},toJD:function(_,m,f){var o=this._validate(_,m,f,A.local.invalidDate);return(_=o.year())<0&&_++,o.day()+30*(o.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var m=Math.floor(_)+.5-this.jdEpoch,f=Math.floor((m-Math.floor((m+366)/1461))/365)+1;f<=0&&f--,m=Math.floor(_)+.5-this.newDate(f,1,1).toJD();var o=Math.floor(m/30)+1,e=m-30*(o-1)+1;return this.newDate(f,o,e)}}),A.calendars.ethiopian=l},99384:function($,P,t){var A=t(63489),M=t(56131);function l(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function _(m,f){return m-f*Math.floor(m/f)}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var f=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return this._leapYear(f.year())},_leapYear:function(m){return _(7*(m=m<0?m+1:m)+1,19)<7},monthsInYear:function(m){return this._validate(m,this.minMonth,this.minDay,A.local.invalidYear),this._leapYear(m.year?m.year():m)?13:12},weekOfYear:function(m,f,o){var e=this.newDate(m,f,o);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(m){return m=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear).year(),this.toJD(m===-1?1:m+1,7,1)-this.toJD(m,7,1)},daysInMonth:function(m,f){return m.year&&(f=m.month(),m=m.year()),this._validate(m,f,this.minDay,A.local.invalidMonth),f===12&&this.leapYear(m)||f===8&&_(this.daysInYear(m),10)===5?30:f===9&&_(this.daysInYear(m),10)===3?29:this.daysPerMonth[f-1]},weekDay:function(m,f,o){return this.dayOfWeek(m,f,o)!==6},extraInfo:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);return{yearType:(this.leapYear(e)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(e)%10-3]}},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);m=e.year(),f=e.month(),o=e.day();var i=m<=0?m+1:m,r=this.jdEpoch+this._delay1(i)+this._delay2(i)+o+1;if(f<7){for(var n=7;n<=this.monthsInYear(m);n++)r+=this.daysInMonth(m,n);for(n=1;n<f;n++)r+=this.daysInMonth(m,n)}else for(n=7;n<f;n++)r+=this.daysInMonth(m,n);return r},_delay1:function(m){var f=Math.floor((235*m-234)/19),o=12084+13753*f,e=29*f+Math.floor(o/25920);return _(3*(e+1),7)<3&&e++,e},_delay2:function(m){var f=this._delay1(m-1),o=this._delay1(m);return this._delay1(m+1)-o==356?2:o-f==382?1:0},fromJD:function(m){m=Math.floor(m)+.5;for(var f=Math.floor(98496*(m-this.jdEpoch)/35975351)-1;m>=this.toJD(f===-1?1:f+1,7,1);)f++;for(var o=m<this.toJD(f,1,1)?7:1;m>this.toJD(f,o,this.daysInMonth(f,o));)o++;var e=m-this.toJD(f,o,1)+1;return this.newDate(f,o,e)}}),A.calendars.hebrew=l},43805:function($,P,t){var A=t(63489),M=t(56131);function l(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khams","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){return(11*this._validate(_,this.minMonth,this.minDay,A.local.invalidYear).year()+14)%30<11},weekOfYear:function(_,m,f){var o=this.newDate(_,m,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(_){return this.leapYear(_)?355:354},daysInMonth:function(_,m){var f=this._validate(_,m,this.minDay,A.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===12&&this.leapYear(f.year())?1:0)},weekDay:function(_,m,f){return this.dayOfWeek(_,m,f)!==5},toJD:function(_,m,f){var o=this._validate(_,m,f,A.local.invalidDate);return _=o.year(),m=o.month(),_=_<=0?_+1:_,(f=o.day())+Math.ceil(29.5*(m-1))+354*(_-1)+Math.floor((3+11*_)/30)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_)+.5;var m=Math.floor((30*(_-this.jdEpoch)+10646)/10631);m=m<=0?m-1:m;var f=Math.min(12,Math.ceil((_-29-this.toJD(m,1,1))/29.5)+1),o=_-this.toJD(m,f,1)+1;return this.newDate(m,f,o)}}),A.calendars.islamic=l},88874:function($,P,t){var A=t(63489),M=t(56131);function l(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var m=this._validate(_,this.minMonth,this.minDay,A.local.invalidYear);return(_=m.year()<0?m.year()+1:m.year())%4==0},weekOfYear:function(_,m,f){var o=this.newDate(_,m,f);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(_,m){var f=this._validate(_,m,this.minDay,A.local.invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(_,m,f){return(this.dayOfWeek(_,m,f)||7)<6},toJD:function(_,m,f){var o=this._validate(_,m,f,A.local.invalidDate);return _=o.year(),m=o.month(),f=o.day(),_<0&&_++,m<=2&&(_--,m+=12),Math.floor(365.25*(_+4716))+Math.floor(30.6001*(m+1))+f-1524.5},fromJD:function(_){var m=Math.floor(_+.5)+1524,f=Math.floor((m-122.1)/365.25),o=Math.floor(365.25*f),e=Math.floor((m-o)/30.6001),i=e-Math.floor(e<14?1:13),r=f-Math.floor(i>2?4716:4715),n=m-o-Math.floor(30.6001*e);return r<=0&&r--,this.newDate(r,i,n)}}),A.calendars.julian=l},83290:function($,P,t){var A=t(63489),M=t(56131);function l(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}function _(f,o){return f-o*Math.floor(f/o)}function m(f,o){return _(f-1,o)+1}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(f){return this._validate(f,this.minMonth,this.minDay,A.local.invalidYear),!1},formatYear:function(f){f=this._validate(f,this.minMonth,this.minDay,A.local.invalidYear).year();var o=Math.floor(f/400);return f%=400,f+=f<0?400:0,o+"."+Math.floor(f/20)+"."+f%20},forYear:function(f){if((f=f.split(".")).length<3)throw"Invalid Mayan year";for(var o=0,e=0;e<f.length;e++){var i=parseInt(f[e],10);if(Math.abs(i)>19||e>0&&i<0)throw"Invalid Mayan year";o=20*o+i}return o},monthsInYear:function(f){return this._validate(f,this.minMonth,this.minDay,A.local.invalidYear),18},weekOfYear:function(f,o,e){return this._validate(f,o,e,A.local.invalidDate),0},daysInYear:function(f){return this._validate(f,this.minMonth,this.minDay,A.local.invalidYear),360},daysInMonth:function(f,o){return this._validate(f,o,this.minDay,A.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(f,o,e){return this._validate(f,o,e,A.local.invalidDate).day()},weekDay:function(f,o,e){return this._validate(f,o,e,A.local.invalidDate),!0},extraInfo:function(f,o,e){var i=this._validate(f,o,e,A.local.invalidDate).toJD(),r=this._toHaab(i),n=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[r[0]-1],haabMonth:r[0],haabDay:r[1],tzolkinDayName:this.local.tzolkinMonths[n[0]-1],tzolkinDay:n[0],tzolkinTrecena:n[1]}},_toHaab:function(f){var o=_(8+(f-=this.jdEpoch)+340,365);return[Math.floor(o/20)+1,_(o,20)]},_toTzolkin:function(f){return[m(20+(f-=this.jdEpoch),20),m(f+4,13)]},toJD:function(f,o,e){var i=this._validate(f,o,e,A.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(f){f=Math.floor(f)+.5-this.jdEpoch;var o=Math.floor(f/360);f%=360,f+=f<0?360:0;var e=Math.floor(f/20),i=f%20;return this.newDate(o,e,i)}}),A.calendars.mayan=l},29108:function($,P,t){var A=t(63489),M=t(56131);function l(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar;var _=A.instance("gregorian");M(l.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var f=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear||A.regionalOptions[""].invalidYear);return _.leapYear(f.year()+(f.year()<1?1:0)+1469)},weekOfYear:function(m,f,o){var e=this.newDate(m,f,o);return e.add(1-(e.dayOfWeek()||7),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(m,f){var o=this._validate(m,f,this.minDay,A.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(m,f,o){return(this.dayOfWeek(m,f,o)||7)<6},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidMonth);(m=e.year())<0&&m++;for(var i=e.day(),r=1;r<e.month();r++)i+=this.daysPerMonth[r-1];return i+_.toJD(m+1468,3,13)},fromJD:function(m){m=Math.floor(m+.5);for(var f=Math.floor((m-(this.jdEpoch-1))/366);m>=this.toJD(f+1,1,1);)f++;for(var o=m-Math.floor(this.toJD(f,1,1)+.5)+1,e=1;o>this.daysInMonth(f,e);)o-=this.daysInMonth(f,e),e++;return this.newDate(f,e,o)}}),A.calendars.nanakshahi=l},55422:function($,P,t){var A=t(63489),M=t(56131);function l(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(_){return this.daysInYear(_)!==this.daysPerYear},weekOfYear:function(_,m,f){var o=this.newDate(_,m,f);return o.add(-o.dayOfWeek(),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInYear:function(_){if(_=this._validate(_,this.minMonth,this.minDay,A.local.invalidYear).year(),this.NEPALI_CALENDAR_DATA[_]===void 0)return this.daysPerYear;for(var m=0,f=this.minMonth;f<=12;f++)m+=this.NEPALI_CALENDAR_DATA[_][f];return m},daysInMonth:function(_,m){return _.year&&(m=_.month(),_=_.year()),this._validate(_,m,this.minDay,A.local.invalidMonth),this.NEPALI_CALENDAR_DATA[_]===void 0?this.daysPerMonth[m-1]:this.NEPALI_CALENDAR_DATA[_][m]},weekDay:function(_,m,f){return this.dayOfWeek(_,m,f)!==6},toJD:function(_,m,f){var o=this._validate(_,m,f,A.local.invalidDate);_=o.year(),m=o.month(),f=o.day();var e=A.instance(),i=0,r=m,n=_;this._createMissingCalendarData(_);var s=_-(r>9||r===9&&f>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(m!==9&&(i=f,r--);r!==9;)r<=0&&(r=12,n--),i+=this.NEPALI_CALENDAR_DATA[n][r],r--;return m===9?(i+=f-this.NEPALI_CALENDAR_DATA[n][0])<0&&(i+=e.daysInYear(s)):i+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],e.newDate(s,1,1).add(i,"d").toJD()},fromJD:function(_){var m=A.instance().fromJD(_),f=m.year(),o=m.dayOfYear(),e=f+56;this._createMissingCalendarData(e);for(var i=9,r=this.NEPALI_CALENDAR_DATA[e][0],n=this.NEPALI_CALENDAR_DATA[e][i]-r+1;o>n;)++i>12&&(i=1,e++),n+=this.NEPALI_CALENDAR_DATA[e][i];var s=this.NEPALI_CALENDAR_DATA[e][i]-(n-o);return this.newDate(e,i,s)},_createMissingCalendarData:function(_){var m=this.daysPerMonth.slice(0);m.unshift(17);for(var f=_-1;f<_+2;f++)this.NEPALI_CALENDAR_DATA[f]===void 0&&(this.NEPALI_CALENDAR_DATA[f]=m)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),A.calendars.nepali=l},94320:function($,P,t){var A=t(63489),M=t(56131);function l(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}function _(m,f){return m-f*Math.floor(m/f)}l.prototype=new A.baseCalendar,M(l.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(m){var f=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return 682*((f.year()-(f.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(m,f,o){var e=this.newDate(m,f,o);return e.add(-(e.dayOfWeek()+1)%7,"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInMonth:function(m,f){var o=this._validate(m,f,this.minDay,A.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===12&&this.leapYear(o.year())?1:0)},weekDay:function(m,f,o){return this.dayOfWeek(m,f,o)!==5},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);m=e.year(),f=e.month(),o=e.day();var i=m-(m>=0?474:473),r=474+_(i,2820);return o+(f<=7?31*(f-1):30*(f-1)+6)+Math.floor((682*r-110)/2816)+365*(r-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(m){var f=(m=Math.floor(m)+.5)-this.toJD(475,1,1),o=Math.floor(f/1029983),e=_(f,1029983),i=2820;if(e!==1029982){var r=Math.floor(e/366),n=_(e,366);i=Math.floor((2134*r+2816*n+2815)/1028522)+r+1}var s=i+2820*o+474;s=s<=0?s-1:s;var a=m-this.toJD(s,1,1)+1,u=a<=186?Math.ceil(a/31):Math.ceil((a-6)/30),p=m-this.toJD(s,u,1)+1;return this.newDate(s,u,p)}}),A.calendars.persian=l,A.calendars.jalali=l},31320:function($,P,t){var A=t(63489),M=t(56131),l=A.instance();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}_.prototype=new A.baseCalendar,M(_.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(m){var f=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return m=this._t2gYear(f.year()),l.leapYear(m)},weekOfYear:function(m,f,o){var e=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return m=this._t2gYear(e.year()),l.weekOfYear(m,e.month(),e.day())},daysInMonth:function(m,f){var o=this._validate(m,f,this.minDay,A.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(m,f,o){return(this.dayOfWeek(m,f,o)||7)<6},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);return m=this._t2gYear(e.year()),l.toJD(m,e.month(),e.day())},fromJD:function(m){var f=l.fromJD(m),o=this._g2tYear(f.year());return this.newDate(o,f.month(),f.day())},_t2gYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&m<=-1?1:0)},_g2tYear:function(m){return m-this.yearsOffset-(m>=1&&m<=this.yearsOffset?1:0)}}),A.calendars.taiwan=_},51367:function($,P,t){var A=t(63489),M=t(56131),l=A.instance();function _(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}_.prototype=new A.baseCalendar,M(_.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(m){var f=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return m=this._t2gYear(f.year()),l.leapYear(m)},weekOfYear:function(m,f,o){var e=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return m=this._t2gYear(e.year()),l.weekOfYear(m,e.month(),e.day())},daysInMonth:function(m,f){var o=this._validate(m,f,this.minDay,A.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(o.month()===2&&this.leapYear(o.year())?1:0)},weekDay:function(m,f,o){return(this.dayOfWeek(m,f,o)||7)<6},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate);return m=this._t2gYear(e.year()),l.toJD(m,e.month(),e.day())},fromJD:function(m){var f=l.fromJD(m),o=this._g2tYear(f.year());return this.newDate(o,f.month(),f.day())},_t2gYear:function(m){return m-this.yearsOffset-(m>=1&&m<=this.yearsOffset?1:0)},_g2tYear:function(m){return m+this.yearsOffset+(m>=-this.yearsOffset&&m<=-1?1:0)}}),A.calendars.thai=_},21457:function($,P,t){var A=t(63489),M=t(56131);function l(m){this.local=this.regionalOptions[m||""]||this.regionalOptions[""]}l.prototype=new A.baseCalendar,M(l.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalth","Yawm al-Arba","Yawm al-Khams","Yawm al-Juma","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(m){var f=this._validate(m,this.minMonth,this.minDay,A.local.invalidYear);return this.daysInYear(f.year())===355},weekOfYear:function(m,f,o){var e=this.newDate(m,f,o);return e.add(-e.dayOfWeek(),"d"),Math.floor((e.dayOfYear()-1)/7)+1},daysInYear:function(m){for(var f=0,o=1;o<=12;o++)f+=this.daysInMonth(m,o);return f},daysInMonth:function(m,f){for(var o=this._validate(m,f,this.minDay,A.local.invalidMonth).toJD()-24e5+.5,e=0,i=0;i<_.length;i++){if(_[i]>o)return _[e]-_[e-1];e++}return 30},weekDay:function(m,f,o){return this.dayOfWeek(m,f,o)!==5},toJD:function(m,f,o){var e=this._validate(m,f,o,A.local.invalidDate),i=12*(e.year()-1)+e.month()-15292;return e.day()+_[i-1]-1+24e5-.5},fromJD:function(m){for(var f=m-24e5+.5,o=0,e=0;e<_.length&&!(_[e]>f);e++)o++;var i=o+15292,r=Math.floor((i-1)/12),n=r+1,s=i-12*r,a=f-_[o-1]+1;return this.newDate(n,s,a)},isValid:function(m,f,o){var e=A.baseCalendar.prototype.isValid.apply(this,arguments);return e&&(e=(m=m.year!=null?m.year:m)>=1276&&m<=1500),e},_validate:function(m,f,o,e){var i=A.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw e.replace(/\{0\}/,this.local.name);return i}}),A.calendars.ummalqura=l;var _=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},63489:function($,P,t){var A=t(56131);function M(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function l(e,i,r,n){if(this._calendar=e,this._year=i,this._month=r,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _(e,i){return"000000".substring(0,i-(e=""+e).length)+e}function m(){this.shortYearCutoff="+10"}function f(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}A(M.prototype,{instance:function(e,i){e=(e||"gregorian").toLowerCase(),i=i||"";var r=this._localCals[e+"-"+i];if(!r&&this.calendars[e]&&(r=new this.calendars[e](i),this._localCals[e+"-"+i]=r),!r)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return r},newDate:function(e,i,r,n,s){return(n=(e!=null&&e.year?e.calendar():typeof n=="string"?this.instance(n,s):n)||this.instance()).newDate(e,i,r)},substituteDigits:function(e){return function(i){return(i+"").replace(/[0-9]/g,function(r){return e[r]})}},substituteChineseDigits:function(e,i){return function(r){for(var n="",s=0;r>0;){var a=r%10;n=(a===0?"":e[a]+i[s])+n,s++,r=Math.floor(r/10)}return n.indexOf(e[1]+i[1])===0&&(n=n.substr(1)),n||e[0]}}}),A(l.prototype,{newDate:function(e,i,r){return this._calendar.newDate(e??this,i,r)},year:function(e){return arguments.length===0?this._year:this.set(e,"y")},month:function(e){return arguments.length===0?this._month:this.set(e,"m")},day:function(e){return arguments.length===0?this._day:this.set(e,"d")},date:function(e,i,r){if(!this._calendar.isValid(e,i,r))throw(o.local.invalidDate||o.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=i,this._day=r,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,i){return this._calendar.add(this,e,i)},set:function(e,i){return this._calendar.set(this,e,i)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var i=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return i===0?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+_(Math.abs(this.year()),4)+"-"+_(this.month(),2)+"-"+_(this.day(),2)}}),A(m.prototype,{_validateLevel:0,newDate:function(e,i,r){return e==null?this.today():(e.year&&(this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate),r=e.day(),i=e.month(),e=e.year()),new l(this,e,i,r))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+_(Math.abs(i.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear),12},monthOfYear:function(e,i){var r=this._validate(e,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return(r.month()+this.monthsInYear(r)-this.firstMonth)%this.monthsInYear(r)+this.minMonth},fromMonthOfYear:function(e,i){var r=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,r,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth),r},daysInYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(e,i,r){var n=this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,i,r){var n=this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(e,i,r){return this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate),{}},add:function(e,i,r){return this._validate(e,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,i,r),i,r)},_add:function(e,i,r){if(this._validateLevel++,r==="d"||r==="w"){var n=e.toJD()+i*(r==="w"?this.daysInWeek():1),s=e.calendar().fromJD(n);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var a=e.year()+(r==="y"?i:0),u=e.monthOfYear()+(r==="m"?i:0);s=e.day(),r==="y"?(e.month()!==this.fromMonthOfYear(a,u)&&(u=this.newDate(a,e.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(a)),s=Math.min(s,this.daysInMonth(a,this.fromMonthOfYear(a,u)))):r==="m"&&(function(c){for(;u<c.minMonth;)a--,u+=c.monthsInYear(a);for(var x=c.monthsInYear(a);u>x-1+c.minMonth;)a++,u-=x,x=c.monthsInYear(a)}(this),s=Math.min(s,this.daysInMonth(a,this.fromMonthOfYear(a,u))));var p=[a,this.fromMonthOfYear(a,u),s];return this._validateLevel--,p}catch(c){throw this._validateLevel--,c}},_correctAdd:function(e,i,r,n){if(!(this.hasYearZero||n!=="y"&&n!=="m"||i[0]!==0&&e.year()>0==i[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],a=r<0?-1:1;i=this._add(e,r*s[0]+a*s[1],s[2])}return e.date(i[0],i[1],i[2])},set:function(e,i,r){this._validate(e,this.minMonth,this.minDay,o.local.invalidDate||o.regionalOptions[""].invalidDate);var n=r==="y"?i:e.year(),s=r==="m"?i:e.month(),a=r==="d"?i:e.day();return r!=="y"&&r!=="m"||(a=Math.min(a,this.daysInMonth(n,s))),e.date(n,s,a)},isValid:function(e,i,r){this._validateLevel++;var n=this.hasYearZero||e!==0;if(n){var s=this.newDate(e,i,this.minDay);n=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(s)&&r>=this.minDay&&r-this.minDay<this.daysInMonth(s)}return this._validateLevel--,n},toJSDate:function(e,i,r){var n=this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate);return o.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(e){return this.fromJD(o.instance().fromJSDate(e).toJD())},_validate:function(e,i,r,n){if(e.year){if(this._validateLevel===0&&this.name!==e.calendar().name)throw(o.local.differentCalendars||o.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(e,i,r))throw n.replace(/\{0\}/,this.local.name);var s=this.newDate(e,i,r);return this._validateLevel--,s}catch(a){throw this._validateLevel--,a}}}),f.prototype=new m,A(f.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var i=this._validate(e,this.minMonth,this.minDay,o.local.invalidYear||o.regionalOptions[""].invalidYear);return(e=i.year()+(i.year()<0?1:0))%4==0&&(e%100!=0||e%400==0)},weekOfYear:function(e,i,r){var n=this.newDate(e,i,r);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,i){var r=this._validate(e,i,this.minDay,o.local.invalidMonth||o.regionalOptions[""].invalidMonth);return this.daysPerMonth[r.month()-1]+(r.month()===2&&this.leapYear(r.year())?1:0)},weekDay:function(e,i,r){return(this.dayOfWeek(e,i,r)||7)<6},toJD:function(e,i,r){var n=this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate);e=n.year(),i=n.month(),r=n.day(),e<0&&e++,i<3&&(i+=12,e--);var s=Math.floor(e/100),a=2-s+Math.floor(s/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(i+1))+r+a-1524.5},fromJD:function(e){var i=Math.floor(e+.5),r=Math.floor((i-186721625e-2)/36524.25),n=1524+(r=i+1+r-Math.floor(r/4)),s=Math.floor((n-122.1)/365.25),a=Math.floor(365.25*s),u=Math.floor((n-a)/30.6001),p=n-a-Math.floor(30.6001*u),c=u-(u>13.5?13:1),x=s-(c>2.5?4716:4715);return x<=0&&x--,this.newDate(x,c,p)},toJSDate:function(e,i,r){var n=this._validate(e,i,r,o.local.invalidDate||o.regionalOptions[""].invalidDate),s=new Date(n.year(),n.month()-1,n.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var o=$.exports=new M;o.cdate=l,o.baseCalendar=m,o.calendars.gregorian=f},94338:function($,P,t){var A=t(56131),M=t(63489);A(M.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),M.local=M.regionalOptions[""],A(M.cdate.prototype,{formatDate:function(l,_){return typeof l!="string"&&(_=l,l=""),this._calendar.formatDate(l||"",this,_)}}),A(M.baseCalendar.prototype,{UNIX_EPOCH:M.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:M.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(l,_,m){if(typeof l!="string"&&(m=_,_=l,l=""),!_)return"";if(_.calendar()!==this)throw M.local.invalidFormat||M.regionalOptions[""].invalidFormat;l=l||this.local.dateFormat;for(var f,o,e,i=(m=m||{}).dayNamesShort||this.local.dayNamesShort,r=m.dayNames||this.local.dayNames,n=m.monthNumbers||this.local.monthNumbers,s=m.monthNamesShort||this.local.monthNamesShort,a=m.monthNames||this.local.monthNames,u=(m.calculateWeek||this.local.calculateWeek,function(d,S){for(var T=1;w+T<l.length&&l.charAt(w+T)===d;)T++;return w+=T-1,Math.floor(T/(S||1))>1}),p=function(d,S,T,E){var C=""+S;if(u(d,E))for(;C.length<T;)C="0"+C;return C},c=this,x=function(d){return typeof n=="function"?n.call(c,d,u("m")):b(p("m",d.month(),2))},g=function(d,S){return S?typeof a=="function"?a.call(c,d):a[d.month()-c.minMonth]:typeof s=="function"?s.call(c,d):s[d.month()-c.minMonth]},h=this.local.digits,b=function(d){return m.localNumbers&&h?h(d):d},v="",y=!1,w=0;w<l.length;w++)if(y)l.charAt(w)!=="'"||u("'")?v+=l.charAt(w):y=!1;else switch(l.charAt(w)){case"d":v+=b(p("d",_.day(),2));break;case"D":v+=(f=_.dayOfWeek(),o=i,e=r,u("D")?e[f]:o[f]);break;case"o":v+=p("o",_.dayOfYear(),3);break;case"w":v+=p("w",_.weekOfYear(),2);break;case"m":v+=x(_);break;case"M":v+=g(_,u("M"));break;case"y":v+=u("y",2)?_.year():(_.year()%100<10?"0":"")+_.year()%100;break;case"Y":u("Y",2),v+=_.formatYear();break;case"J":v+=_.toJD();break;case"@":v+=(_.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":v+=(_.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?v+="'":y=!0;break;default:v+=l.charAt(w)}return v},parseDate:function(l,_,m){if(_==null)throw M.local.invalidArguments||M.regionalOptions[""].invalidArguments;if((_=typeof _=="object"?_.toString():_+"")==="")return null;l=l||this.local.dateFormat;var f=(m=m||{}).shortYearCutoff||this.shortYearCutoff;f=typeof f!="string"?f:this.today().year()%100+parseInt(f,10);for(var o=m.dayNamesShort||this.local.dayNamesShort,e=m.dayNames||this.local.dayNames,i=m.parseMonth||this.local.parseMonth,r=m.monthNumbers||this.local.monthNumbers,n=m.monthNamesShort||this.local.monthNamesShort,s=m.monthNames||this.local.monthNames,a=-1,u=-1,p=-1,c=-1,x=-1,g=!1,h=!1,b=function(z,G){for(var I=1;C+I<l.length&&l.charAt(C+I)===z;)I++;return C+=I-1,Math.floor(I/(G||1))>1},v=function(z,G){var I=b(z,G),H=[2,3,I?4:2,I?4:2,10,11,20]["oyYJ@!".indexOf(z)+1],N=new RegExp("^-?\\d{1,"+H+"}"),F=_.substring(E).match(N);if(!F)throw(M.local.missingNumberAt||M.regionalOptions[""].missingNumberAt).replace(/\{0\}/,E);return E+=F[0].length,parseInt(F[0],10)},y=this,w=function(){if(typeof r=="function"){b("m");var z=r.call(y,_.substring(E));return E+=z.length,z}return v("m")},d=function(z,G,I,H){for(var N=b(z,H)?I:G,F=0;F<N.length;F++)if(_.substr(E,N[F].length).toLowerCase()===N[F].toLowerCase())return E+=N[F].length,F+y.minMonth;throw(M.local.unknownNameAt||M.regionalOptions[""].unknownNameAt).replace(/\{0\}/,E)},S=function(){if(typeof s=="function"){var z=b("M")?s.call(y,_.substring(E)):n.call(y,_.substring(E));return E+=z.length,z}return d("M",n,s)},T=function(){if(_.charAt(E)!==l.charAt(C))throw(M.local.unexpectedLiteralAt||M.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,E);E++},E=0,C=0;C<l.length;C++)if(h)l.charAt(C)!=="'"||b("'")?T():h=!1;else switch(l.charAt(C)){case"d":c=v("d");break;case"D":d("D",o,e);break;case"o":x=v("o");break;case"w":v("w");break;case"m":p=w();break;case"M":p=S();break;case"y":var L=C;g=!b("y",2),C=L,u=v("y",2);break;case"Y":u=v("Y",2);break;case"J":a=v("J")+.5,_.charAt(E)==="."&&(E++,v("J"));break;case"@":a=v("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":a=v("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":E=_.length;break;case"'":b("'")?T():h=!0;break;default:T()}if(E<_.length)throw M.local.unexpectedText||M.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&g&&(u+=f===-1?1900:this.today().year()-this.today().year()%100-(u<=f?0:100)),typeof p=="string"&&(p=i.call(this,u,p)),x>-1){p=1,c=x;for(var O=this.daysInMonth(u,p);c>O;O=this.daysInMonth(u,p))p++,c-=O}return a>-1?this.fromJD(a):this.newDate(u,p,c)},determineDate:function(l,_,m,f,o){m&&typeof m!="object"&&(o=f,f=m,m=null),typeof f!="string"&&(o=f,f="");var e=this;return _=_?_.newDate():null,l==null?_:typeof l=="string"?function(i){try{return e.parseDate(f,i,o)}catch{}for(var r=((i=i.toLowerCase()).match(/^c/)&&m?m.newDate():null)||e.today(),n=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=n.exec(i);s;)r.add(parseInt(s[1],10),s[2]||"d"),s=n.exec(i);return r}(l):typeof l=="number"?isNaN(l)||l===1/0||l===-1/0?_:e.today().add(l,"d"):e.newDate(l)}})},69862:function(){},40964:function(){},72077:function($,P,t){var A=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],M=typeof globalThis>"u"?t.g:globalThis;$.exports=function(){for(var l=[],_=0;_<A.length;_++)typeof M[A[_]]=="function"&&(l[l.length]=A[_]);return l}},81684:function($,P,t){function A(he,de,xe){he.prototype=de.prototype=xe,xe.constructor=he}function M(he,de){var xe=Object.create(he.prototype);for(var me in de)xe[me]=de[me];return xe}function l(){}t.d(P,{sX:function(){return ue},k4:function(){return Q}});var _=.7,m=1/_,f="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",i=/^#([0-9a-f]{3,8})$/,r=new RegExp("^rgb\\(".concat(f,",").concat(f,",").concat(f,"\\)$")),n=new RegExp("^rgb\\(".concat(e,",").concat(e,",").concat(e,"\\)$")),s=new RegExp("^rgba\\(".concat(f,",").concat(f,",").concat(f,",").concat(o,"\\)$")),a=new RegExp("^rgba\\(".concat(e,",").concat(e,",").concat(e,",").concat(o,"\\)$")),u=new RegExp("^hsl\\(".concat(o,",").concat(e,",").concat(e,"\\)$")),p=new RegExp("^hsla\\(".concat(o,",").concat(e,",").concat(e,",").concat(o,"\\)$")),c={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function h(he){var de,xe;return he=(he+"").trim().toLowerCase(),(de=i.exec(he))?(xe=de[1].length,de=parseInt(de[1],16),xe===6?b(de):xe===3?new w(de>>8&15|de>>4&240,de>>4&15|240&de,(15&de)<<4|15&de,1):xe===8?v(de>>24&255,de>>16&255,de>>8&255,(255&de)/255):xe===4?v(de>>12&15|de>>8&240,de>>8&15|de>>4&240,de>>4&15|240&de,((15&de)<<4|15&de)/255):null):(de=r.exec(he))?new w(de[1],de[2],de[3],1):(de=n.exec(he))?new w(255*de[1]/100,255*de[2]/100,255*de[3]/100,1):(de=s.exec(he))?v(de[1],de[2],de[3],de[4]):(de=a.exec(he))?v(255*de[1]/100,255*de[2]/100,255*de[3]/100,de[4]):(de=u.exec(he))?L(de[1],de[2]/100,de[3]/100,1):(de=p.exec(he))?L(de[1],de[2]/100,de[3]/100,de[4]):c.hasOwnProperty(he)?b(c[he]):he==="transparent"?new w(NaN,NaN,NaN,0):null}function b(he){return new w(he>>16&255,he>>8&255,255&he,1)}function v(he,de,xe,me){return me<=0&&(he=de=xe=NaN),new w(he,de,xe,me)}function y(he,de,xe,me){return arguments.length===1?((ve=he)instanceof l||(ve=h(ve)),ve?new w((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new w):new w(he,de,xe,me??1);var ve}function w(he,de,xe,me){this.r=+he,this.g=+de,this.b=+xe,this.opacity=+me}function d(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b))}function S(){var he=T(this.opacity);return"".concat(he===1?"rgb(":"rgba(").concat(E(this.r),", ").concat(E(this.g),", ").concat(E(this.b)).concat(he===1?")":", ".concat(he,")"))}function T(he){return isNaN(he)?1:Math.max(0,Math.min(1,he))}function E(he){return Math.max(0,Math.min(255,Math.round(he)||0))}function C(he){return((he=E(he))<16?"0":"")+he.toString(16)}function L(he,de,xe,me){return me<=0?he=de=xe=NaN:xe<=0||xe>=1?he=de=NaN:de<=0&&(he=NaN),new z(he,de,xe,me)}function O(he){if(he instanceof z)return new z(he.h,he.s,he.l,he.opacity);if(he instanceof l||(he=h(he)),!he)return new z;if(he instanceof z)return he;var de=(he=he.rgb()).r/255,xe=he.g/255,me=he.b/255,ve=Math.min(de,xe,me),Le=Math.max(de,xe,me),Ae=NaN,we=Le-ve,se=(Le+ve)/2;return we?(Ae=de===Le?(xe-me)/we+6*(xe<me):xe===Le?(me-de)/we+2:(de-xe)/we+4,we/=se<.5?Le+ve:2-Le-ve,Ae*=60):we=se>0&&se<1?0:Ae,new z(Ae,we,se,he.opacity)}function z(he,de,xe,me){this.h=+he,this.s=+de,this.l=+xe,this.opacity=+me}function G(he){return(he=(he||0)%360)<0?he+360:he}function I(he){return Math.max(0,Math.min(1,he||0))}function H(he,de,xe){return 255*(he<60?de+(xe-de)*he/60:he<180?xe:he<240?de+(xe-de)*(240-he)/60:de)}A(l,h,{copy:function(he){return Object.assign(new this.constructor,this,he)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return O(this).formatHsl()},formatRgb:g,toString:g}),A(w,y,M(l,{brighter:function(he){return he=he==null?m:Math.pow(m,he),new w(this.r*he,this.g*he,this.b*he,this.opacity)},darker:function(he){return he=he==null?_:Math.pow(_,he),new w(this.r*he,this.g*he,this.b*he,this.opacity)},rgb:function(){return this},clamp:function(){return new w(E(this.r),E(this.g),E(this.b),T(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:d,formatHex:d,formatHex8:function(){return"#".concat(C(this.r)).concat(C(this.g)).concat(C(this.b)).concat(C(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:S,toString:S})),A(z,function(he,de,xe,me){return arguments.length===1?O(he):new z(he,de,xe,me??1)},M(l,{brighter:function(he){return he=he==null?m:Math.pow(m,he),new z(this.h,this.s,this.l*he,this.opacity)},darker:function(he){return he=he==null?_:Math.pow(_,he),new z(this.h,this.s,this.l*he,this.opacity)},rgb:function(){var he=this.h%360+360*(this.h<0),de=isNaN(he)||isNaN(this.s)?0:this.s,xe=this.l,me=xe+(xe<.5?xe:1-xe)*de,ve=2*xe-me;return new w(H(he>=240?he-240:he+120,ve,me),H(he,ve,me),H(he<120?he+240:he-120,ve,me),this.opacity)},clamp:function(){return new z(G(this.h),I(this.s),I(this.l),T(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var he=T(this.opacity);return"".concat(he===1?"hsl(":"hsla(").concat(G(this.h),", ").concat(100*I(this.s),"%, ").concat(100*I(this.l),"%").concat(he===1?")":", ".concat(he,")"))}}));var N=function(he){return function(){return he}};function F(he,de){var xe=de-he;return xe?function(me,ve){return function(Le){return me+Le*ve}}(he,xe):N(isNaN(he)?de:he)}var V=function he(de){var xe=function(ve){return(ve=+ve)==1?F:function(Le,Ae){return Ae-Le?function(we,se,oe){return we=Math.pow(we,oe),se=Math.pow(se,oe)-we,oe=1/oe,function(fe){return Math.pow(we+fe*se,oe)}}(Le,Ae,ve):N(isNaN(Le)?Ae:Le)}}(de);function me(ve,Le){var Ae=xe((ve=y(ve)).r,(Le=y(Le)).r),we=xe(ve.g,Le.g),se=xe(ve.b,Le.b),oe=F(ve.opacity,Le.opacity);return function(fe){return ve.r=Ae(fe),ve.g=we(fe),ve.b=se(fe),ve.opacity=oe(fe),ve+""}}return me.gamma=he,me}(1);function W(he,de){var xe,me=de?de.length:0,ve=he?Math.min(me,he.length):0,Le=new Array(ve),Ae=new Array(me);for(xe=0;xe<ve;++xe)Le[xe]=ue(he[xe],de[xe]);for(;xe<me;++xe)Ae[xe]=de[xe];return function(we){for(xe=0;xe<ve;++xe)Ae[xe]=Le[xe](we);return Ae}}function te(he,de){var xe=new Date;return he=+he,de=+de,function(me){return xe.setTime(he*(1-me)+de*me),xe}}function Q(he,de){return he=+he,de=+de,function(xe){return he*(1-xe)+de*xe}}function X(he){return X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},X(he)}function q(he,de){var xe,me={},ve={};for(xe in he!==null&&X(he)==="object"||(he={}),de!==null&&X(de)==="object"||(de={}),de)xe in he?me[xe]=ue(he[xe],de[xe]):ve[xe]=de[xe];return function(Le){for(xe in me)ve[xe]=me[xe](Le);return ve}}var Z=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J=new RegExp(Z.source,"g");function ne(he,de){var xe,me,ve,Le=Z.lastIndex=J.lastIndex=0,Ae=-1,we=[],se=[];for(he+="",de+="";(xe=Z.exec(he))&&(me=J.exec(de));)(ve=me.index)>Le&&(ve=de.slice(Le,ve),we[Ae]?we[Ae]+=ve:we[++Ae]=ve),(xe=xe[0])===(me=me[0])?we[Ae]?we[Ae]+=me:we[++Ae]=me:(we[++Ae]=null,se.push({i:Ae,x:Q(xe,me)})),Le=J.lastIndex;return Le<de.length&&(ve=de.slice(Le),we[Ae]?we[Ae]+=ve:we[++Ae]=ve),we.length<2?se[0]?function(oe){return function(fe){return oe(fe)+""}}(se[0].x):function(oe){return function(){return oe}}(de):(de=se.length,function(oe){for(var fe,Se=0;Se<de;++Se)we[(fe=se[Se]).i]=fe.x(oe);return we.join("")})}function re(he,de){de||(de=[]);var xe,me=he?Math.min(de.length,he.length):0,ve=de.slice();return function(Le){for(xe=0;xe<me;++xe)ve[xe]=he[xe]*(1-Le)+de[xe]*Le;return ve}}function ae(he){return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},ae(he)}function ue(he,de){var xe,me,ve=ae(de);return de==null||ve==="boolean"?N(de):(ve==="number"?Q:ve==="string"?(xe=h(de))?(de=xe,V):ne:de instanceof h?V:de instanceof Date?te:(me=de,!ArrayBuffer.isView(me)||me instanceof DataView?Array.isArray(de)?W:typeof de.valueOf!="function"&&typeof de.toString!="function"||isNaN(de)?q:Q:re))(he,de)}},40402:function($){$.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},83794:function($){$.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},96209:function($){$.exports=JSON.parse('["normal","italic","oblique"]')},15659:function($){$.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},38732:function($){$.exports=JSON.parse('["inherit","initial","unset"]')},41901:function($){$.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Ir={};function Nr($){var P=Ir[$];if(P!==void 0)return P.exports;var t=Ir[$]={exports:{}};return _r[$].call(t.exports,t,t.exports,Nr),t.exports}return Nr.n=function($){var P=$&&$.__esModule?function(){return $.default}:function(){return $};return Nr.d(P,{a:P}),P},Nr.d=function($,P){for(var t in P)Nr.o(P,t)&&!Nr.o($,t)&&Object.defineProperty($,t,{enumerable:!0,get:P[t]})},Nr.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Nr.o=function($,P){return Object.prototype.hasOwnProperty.call($,P)},Nr.r=function($){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty($,Symbol.toStringTag,{value:"Module"}),Object.defineProperty($,"__esModule",{value:!0})},Nr(27909)}()})}(_f)),_f.exports}var wf={exports:{}};/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */var hp;function d0(){return hp||(hp=1,function(dn){window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var Ir=[void 0],Nr="zero-timeout-message",$=function(t){var A=Ir.length;return Ir.push(t),window.postMessage(Nr+A.toString(36),"*"),A};return window.addEventListener("message",function(t){if(!(typeof t.data!="string"||t.data.substr(0,Nr.length)!==Nr)){t.stopImmediatePropagation();var A=parseInt(t.data.substr(Nr.length),36);Ir[A]&&(Ir[A](),Ir[A]=void 0)}},!0),window.clearImmediate=function(t){Ir[t]&&(Ir[t]=void 0)},$}()||function(Ir){window.setTimeout(Ir,0)}}()),window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(Ir){window.clearTimeout(Ir)}}()),function(pr){var _r=function(){var M=document.createElement("canvas");if(!M||!M.getContext)return!1;var l=M.getContext("2d");return!(!l||!l.getImageData||!l.fillText||!Array.prototype.some||!Array.prototype.push)}(),Ir=function(){if(_r){for(var M=document.createElement("canvas").getContext("2d"),l=20,_,m;l;){if(M.font=l.toString(10)+"px sans-serif",M.measureText("").width===_&&M.measureText("m").width===m)return l+1;_=M.measureText("").width,m=M.measureText("m").width,l--}return 0}}(),Nr=function(A){if(Array.isArray(A)){var M=A.slice();return M.splice(0,2),M}else return[]},$=function(M){for(var l,_,m=M.length;m;)l=Math.floor(Math.random()*m),_=M[--m],M[m]=M[l],M[l]=_;return M},P={},t=function(M,l){if(!_r)return;var _=Math.floor(Math.random()*Date.now());Array.isArray(M)||(M=[M]),M.forEach(function(X,q){if(typeof X=="string"){if(M[q]=document.getElementById(X),!M[q])throw new Error("The element id specified is not found.")}else if(!X.tagName&&!X.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var m={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationSteps:0,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(l)for(var f in l)f in m&&(m[f]=l[f]);if(typeof m.weightFactor!="function"){var o=m.weightFactor;m.weightFactor=function(q){return q*o}}if(typeof m.shape!="function")switch(m.shape){case"circle":default:m.shape="circle";break;case"cardioid":m.shape=function(q){return 1-Math.sin(q)};break;case"diamond":m.shape=function(q){var Z=q%(2*Math.PI/4);return 1/(Math.cos(Z)+Math.sin(Z))};break;case"square":m.shape=function(q){return Math.min(1/Math.abs(Math.cos(q)),1/Math.abs(Math.sin(q)))};break;case"triangle-forward":m.shape=function(q){var Z=q%(2*Math.PI/3);return 1/(Math.cos(Z)+Math.sqrt(3)*Math.sin(Z))};break;case"triangle":case"triangle-upright":m.shape=function(q){var Z=(q+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(Z)+Math.sqrt(3)*Math.sin(Z))};break;case"pentagon":m.shape=function(q){var Z=(q+.955)%(2*Math.PI/5);return 1/(Math.cos(Z)+.726543*Math.sin(Z))};break;case"star":m.shape=function(q){var Z=(q+.955)%(2*Math.PI/10);return(q+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-Z)+3.07768*Math.sin(2*Math.PI/10-Z)):1/(Math.cos(Z)+3.07768*Math.sin(Z))};break}m.gridSize=Math.max(Math.floor(m.gridSize),4);var e=m.gridSize,i=e-m.maskGapWidth,r=Math.abs(m.maxRotation-m.minRotation),n=Math.abs(Math.floor(m.rotationSteps)),s=Math.min(m.maxRotation,m.minRotation),a,u,p,c,x,g,h;function b(X,q){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(q-X)+X).toFixed()+"%)"}switch(m.color){case"random-dark":h=function(){return b(10,50)};break;case"random-light":h=function(){return b(50,90)};break;default:typeof m.color=="function"&&(h=m.color);break}var v;typeof m.fontWeight=="function"&&(v=m.fontWeight);var y=null;typeof m.classes=="function"&&(y=m.classes);var w=!1,d=[],S,T=function(q){var Z=q.currentTarget,J=Z.getBoundingClientRect(),ne,re;q.touches?(ne=q.touches[0].clientX,re=q.touches[0].clientY):(ne=q.clientX,re=q.clientY);var ae=ne-J.left,ue=re-J.top,he=Math.floor(ae*(Z.width/J.width||1)/e),de=Math.floor(ue*(Z.height/J.height||1)/e);return d[he][de]},E=function(q){var Z=T(q);if(S!==Z){if(S=Z,!Z){m.hover(void 0,void 0,q);return}m.hover(Z.item,Z.dimension,q)}},C=function(q){var Z=T(q);Z&&(m.click(Z.item,Z.dimension,q),q.preventDefault())},L=[],O=function(q){if(L[q])return L[q];var Z=q*8,J=Z,ne=[];for(q===0&&ne.push([c[0],c[1],0]);J--;){var re=1;m.shape!=="circle"&&(re=m.shape(J/Z*2*Math.PI)),ne.push([c[0]+q*re*Math.cos(-J/Z*2*Math.PI),c[1]+q*re*Math.sin(-J/Z*2*Math.PI)*m.ellipticity,J/Z*2*Math.PI])}return L[q]=ne,ne},z=function(){return m.abortThreshold>0&&new Date().getTime()-g>m.abortThreshold},G=function(){return m.rotateRatio===0||Math.random()>m.rotateRatio?0:r===0?s:n>0?s+Math.floor(Math.random()*n)*r/(n-1):s+Math.random()*r},I=function(q,Z,J,ne){var re=m.weightFactor(Z);if(re<=m.minSize)return!1;var ae=1;re<Ir&&(ae=function(){for(var He=2;He*re<Ir;)He+=2;return He}());var ue;v?ue=v(q,Z,re,ne):ue=m.fontWeight;var he=document.createElement("canvas"),de=he.getContext("2d",{willReadFrequently:!0});de.font=ue+" "+(re*ae).toString(10)+"px "+m.fontFamily;var xe=de.measureText(q).width/ae,me=Math.max(re*ae,de.measureText("m").width,de.measureText("").width)/ae,ve=xe+me*2,Le=me*3,Ae=Math.ceil(ve/e),we=Math.ceil(Le/e);ve=Ae*e,Le=we*e;var se=-xe/2,oe=-me*.4,fe=Math.ceil((ve*Math.abs(Math.sin(J))+Le*Math.abs(Math.cos(J)))/e),Se=Math.ceil((ve*Math.abs(Math.cos(J))+Le*Math.abs(Math.sin(J)))/e),Me=Se*e,be=fe*e;he.setAttribute("width",Me),he.setAttribute("height",be),de.scale(1/ae,1/ae),de.translate(Me*ae/2,be*ae/2),de.rotate(-J),de.font=ue+" "+(re*ae).toString(10)+"px "+m.fontFamily,de.fillStyle="#000",de.textBaseline="middle",de.fillText(q,se*ae,(oe+re*.5)*ae);var Ie=de.getImageData(0,0,Me,be).data;if(z())return!1;for(var Be=[],ce=Se,Te,ye,Pe,Re=[fe/2,Se/2,fe/2,Se/2];ce--;)for(Te=fe;Te--;){Pe=e;e:for(;Pe--;)for(ye=e;ye--;)if(Ie[((Te*e+Pe)*Me+(ce*e+ye))*4+3]){Be.push([ce,Te]),ce<Re[3]&&(Re[3]=ce),ce>Re[1]&&(Re[1]=ce),Te<Re[0]&&(Re[0]=Te),Te>Re[2]&&(Re[2]=Te);break e}}return{mu:ae,occupied:Be,bounds:Re,gw:Se,gh:fe,fillTextOffsetX:se,fillTextOffsetY:oe,fillTextWidth:xe,fillTextHeight:me,fontSize:re}},H=function(q,Z,J,ne,re){for(var ae=re.length;ae--;){var ue=q+re[ae][0],he=Z+re[ae][1];if(ue>=u||he>=p||ue<0||he<0){if(!m.drawOutOfBound)return!1;continue}if(!a[ue][he])return!1}return!0},N=function(q,Z,J,ne,re,ae,ue,he,de,xe){var me=J.fontSize,ve;h?ve=h(ne,re,me,ae,ue,xe):ve=m.color;var Le;v?Le=v(ne,re,me,xe):Le=m.fontWeight;var Ae;y?Ae=y(ne,re,me,xe):Ae=m.classes,M.forEach(function(we){if(we.getContext){var se=we.getContext("2d"),oe=J.mu;se.save(),se.scale(1/oe,1/oe),se.font=Le+" "+(me*oe).toString(10)+"px "+m.fontFamily,se.fillStyle=ve,se.translate((q+J.gw/2)*e*oe,(Z+J.gh/2)*e*oe),he!==0&&se.rotate(-he),se.textBaseline="middle",se.fillText(ne,J.fillTextOffsetX*oe,(J.fillTextOffsetY+me*.5)*oe),se.restore()}else{var fe=document.createElement("span"),Se="";Se="rotate("+-he/Math.PI*180+"deg) ",J.mu!==1&&(Se+="translateX(-"+J.fillTextWidth/4+"px) scale("+1/J.mu+")");var Me={position:"absolute",display:"block",font:Le+" "+me*J.mu+"px "+m.fontFamily,left:(q+J.gw/2)*e+J.fillTextOffsetX+"px",top:(Z+J.gh/2)*e+J.fillTextOffsetY+"px",width:J.fillTextWidth+"px",height:J.fillTextHeight+"px",lineHeight:me+"px",whiteSpace:"nowrap",transform:Se,webkitTransform:Se,msTransform:Se,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};ve&&(Me.color=ve),fe.textContent=ne;for(var be in Me)fe.style[be]=Me[be];if(de)for(var Ie in de)fe.setAttribute(Ie,de[Ie]);Ae&&(fe.className+=Ae),we.appendChild(fe)}})},F=function(q,Z,J,ne,re){if(!(q>=u||Z>=p||q<0||Z<0)){if(a[q][Z]=!1,J){var ae=M[0].getContext("2d");ae.fillRect(q*e,Z*e,i,i)}w&&(d[q][Z]={item:re,dimension:ne})}},V=function(q,Z,J,ne,re,ae){var ue=re.occupied,he=m.drawMask,de;he&&(de=M[0].getContext("2d"),de.save(),de.fillStyle=m.maskColor);var xe;if(w){var me=re.bounds;xe={x:(q+me[3])*e,y:(Z+me[0])*e,w:(me[1]-me[3]+1)*e,h:(me[2]-me[0]+1)*e}}for(var ve=ue.length;ve--;){var Le=q+ue[ve][0],Ae=Z+ue[ve][1];Le>=u||Ae>=p||Le<0||Ae<0||F(Le,Ae,he,xe,ae)}he&&de.restore()},W=function X(q){var Z,J,ne;Array.isArray(q)?(Z=q[0],J=q[1]):(Z=q.word,J=q.weight,ne=q.attributes);var re=G(),ae=Nr(q),ue=I(Z,J,re,ae);if(!ue||z())return!1;if(!m.drawOutOfBound&&!m.shrinkToFit){var he=ue.bounds;if(he[1]-he[3]+1>u||he[2]-he[0]+1>p)return!1}for(var de=x+1,xe=function(Le){var Ae=Math.floor(Le[0]-ue.gw/2),we=Math.floor(Le[1]-ue.gh/2),se=ue.gw,oe=ue.gh;return H(Ae,we,se,oe,ue.occupied)?(N(Ae,we,ue,Z,J,x-de,Le[2],re,ne,ae),V(Ae,we,se,oe,ue,q),!0):!1};de--;){var me=O(x-de);m.shuffle&&(me=[].concat(me),$(me));var ve=me.some(xe);if(ve)return!0}return m.shrinkToFit?(Array.isArray(q)?q[1]=q[1]*3/4:q.weight=q.weight*3/4,X(q)):!1},te=function(q,Z,J){if(Z)return!M.some(function(ne){var re=new CustomEvent(q,{detail:J||{}});return!ne.dispatchEvent(re)},this);M.forEach(function(ne){var re=new CustomEvent(q,{detail:J||{}});ne.dispatchEvent(re)},this)},Q=function(){var q=M[0];if(q.getContext)u=Math.ceil(q.width/e),p=Math.ceil(q.height/e);else{var Z=q.getBoundingClientRect();u=Math.ceil(Z.width/e),p=Math.ceil(Z.height/e)}if(te("wordcloudstart",!0)){c=m.origin?[m.origin[0]/e,m.origin[1]/e]:[u/2,p/2],x=Math.floor(Math.sqrt(u*u+p*p)),a=[];var J,ne,re;if(!q.getContext||m.clearCanvas)for(M.forEach(function(se){if(se.getContext){var oe=se.getContext("2d");oe.fillStyle=m.backgroundColor,oe.clearRect(0,0,u*(e+1),p*(e+1)),oe.fillRect(0,0,u*(e+1),p*(e+1))}else se.textContent="",se.style.backgroundColor=m.backgroundColor,se.style.position="relative"}),J=u;J--;)for(a[J]=[],ne=p;ne--;)a[J][ne]=!0;else{var ae=document.createElement("canvas").getContext("2d");ae.fillStyle=m.backgroundColor,ae.fillRect(0,0,1,1);var ue=ae.getImageData(0,0,1,1).data,he=q.getContext("2d").getImageData(0,0,u*e,p*e).data;J=u;for(var de,xe;J--;)for(a[J]=[],ne=p;ne--;){xe=e;e:for(;xe--;)for(de=e;de--;)for(re=4;re--;)if(he[((ne*e+xe)*u*e+(J*e+de))*4+re]!==ue[re]){a[J][ne]=!1;break e}a[J][ne]!==!1&&(a[J][ne]=!0)}he=ae=ue=void 0}if(m.hover||m.click){for(w=!0,J=u+1;J--;)d[J]=[];m.hover&&q.addEventListener("mousemove",E),m.click&&(q.addEventListener("click",C),q.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),q.addEventListener("wordcloudstart",function se(){q.removeEventListener("wordcloudstart",se),q.removeEventListener("mousemove",E),q.removeEventListener("click",C),S=void 0})}re=0;var me,ve;m.wait!==0?(me=window.setTimeout,ve=window.clearTimeout):(me=window.setImmediate,ve=window.clearImmediate);var Le=function(oe,fe){M.forEach(function(Se){Se.addEventListener(oe,fe)},this)},Ae=function(oe,fe){M.forEach(function(Se){Se.removeEventListener(oe,fe)},this)},we=function se(){Ae("wordcloudstart",se),ve(P[_])};Le("wordcloudstart",we),P[_]=me(function se(){if(re>=m.list.length){ve(P[_]),te("wordcloudstop",!1),Ae("wordcloudstart",we),delete P[_];return}g=new Date().getTime();var oe=W(m.list[re]),fe=!te("wordclouddrawn",!0,{item:m.list[re],drawn:oe});if(z()||fe){ve(P[_]),m.abort(),te("wordcloudabort",!1),te("wordcloudstop",!1),Ae("wordcloudstart",we),delete P[_];return}re++,P[_]=me(se,m.wait)},m.wait)}};Q()};t.isSupported=_r,t.minFontSize=Ir,t.stop=function(){if(P)for(var M in P)window.clearImmediate(P[M])},dn.exports?dn.exports=t:pr.WordCloud=t}(_a)}(wf)),wf.exports}/*!
 * surveyjs - SurveyJS Dashboard library v1.9.113
 * Copyright (c) 2015-2023 Devsoft Baltic O  - http://surveyjs.io/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */(function(dn,pr){(function(Ir,Nr){dn.exports=Nr(p0(),i0(),d0())})(window,function(_r,Ir,Nr){return function($){var P={};function t(A){if(P[A])return P[A].exports;var M=P[A]={i:A,l:!1,exports:{}};return $[A].call(M.exports,M,M.exports,t),M.l=!0,M.exports}return t.m=$,t.c=P,t.d=function(A,M,l){t.o(A,M)||Object.defineProperty(A,M,{enumerable:!0,get:l})},t.r=function(A){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},t.t=function(A,M){if(M&1&&(A=t(A)),M&8||M&4&&typeof A=="object"&&A&&A.__esModule)return A;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:A}),M&2&&typeof A!="string")for(var _ in A)t.d(l,_,(function(m){return A[m]}).bind(null,_));return l},t.n=function(A){var M=A&&A.__esModule?function(){return A.default}:function(){return A};return t.d(M,"a",M),M},t.o=function(A,M){return Object.prototype.hasOwnProperty.call(A,M)},t.p="",t(t.s="./src/entries/summary.ts")}({"./node_modules/html-loader/index.js?interpolate!./node_modules/val-loader/index.js!./src/svgbundle.html":function($,P){$.exports='<svg style="display:none;"><symbol viewBox="0 0 16 16" id="sa-svg-detail"><circle cx="1.5" cy="8.5" r="1.5"></circle><circle cx="7.5" cy="8.5" r="1.5"></circle><circle cx="13.5" cy="8.5" r="1.5"></circle></symbol><symbol viewBox="0 0 16 16" id="sa-svg-drag"><path d="M13 5l-1 1 1 1H9V3l1 1 1-1-3-3-3 3 1 1 1-1v4H3l1-1-1-1-3 3 3 3 1-1-1-1h4v4l-1-1-1 1 3 3 3-3-1-1-1 1V9h4l-1 1 1 1 3-3z"></path></symbol><symbol viewBox="0 0 16 16" id="sa-svg-hide"><path d="M12.79 4.2L16 1l-1-1-3.32 3.32C10.57 2.55 9.32 2 8 2 3.63 2 0 7.97 0 7.97s1.27 2.1 3.21 3.82l-3.23 3.23.98.98 3.35-3.34C5.41 13.44 6.67 14 8 14c4.37 0 8-6 8-6s-1.27-2.09-3.21-3.8zM2 7.97c1.07-1.47 3.61-4 6-4 .8 0 1.6.27 2.35.68l-.78.78c-.46-.29-.99-.46-1.57-.46-1.66 0-3 1.34-3 3 0 .58.17 1.11.46 1.57l-.97.97A13.38 13.38 0 0 1 2 7.97zm6 4c-.8 0-1.59-.27-2.33-.67l.78-.77c.45.27.98.44 1.55.44 1.66 0 3-1.34 3-3 0-.57-.17-1.09-.44-1.55l.98-.98c1.11.87 2.01 1.91 2.46 2.52-1.07 1.48-3.61 4.01-6 4.01z"></path></symbol><symbol viewBox="0 0 16 16" id="sa-svg-makeprivate"><circle cx="8" cy="4" r="3"></circle><path d="M8 8c-3.31 0-6 2.73-6 4.67S5.27 15 8 15s6-.4 6-2.33S11.31 8 8 8z"></path></symbol><symbol viewBox="0 0 16 16" id="sa-svg-makepublic"><circle cx="6" cy="5" r="3"></circle><path d="M10 5c0 .34-.06.67-.14.99.05 0 .09.01.14.01 1.66 0 3-1.34 3-3s-1.34-3-3-3C8.97 0 8.07.52 7.53 1.3 8.98 1.91 10 3.33 10 5zM6 9c-3.31 0-6 2.73-6 4.67S3.27 16 6 16s6-.4 6-2.33S9.31 9 6 9zM10 7c-.19 0-.38.01-.57.03a4.14 4.14 0 0 1-1.37 1.39c3 .83 5.23 3.31 5.42 5.28 1.44-.31 2.52-.92 2.52-2.03C16 9.74 13.31 7 10 7z"></path></symbol><symbol viewBox="0 0 16 16" id="sa-svg-movetodetails"><circle cx="1.5" cy="14.5" r="1.5"></circle><circle cx="7.5" cy="14.5" r="1.5"></circle><circle cx="13.5" cy="14.5" r="1.5"></circle><path d="M12 1h3v9h-3zM2.02 7.02L1 6 0 7l3 3 3-3-1-1-.94.94C4.33 4.73 6.21 3 8.5 3c.17 0 .33.03.5.05V1.03C8.83 1.01 8.67 1 8.5 1 5.08 1 2.27 3.66 2.02 7.02z"></path></symbol><symbol viewBox="0 0 16 16" id="sa-svg-noncommercial"><path d="M8 0L0 15h16L8 0zm1 13H7v-2h2v2zm-2-3V5h2v5H7z"></path></symbol><symbol viewBox="0 0 16 16" id="sa-svg-sorting"><path d="M8 3l2 2 1-1-3-3-3 3 1 1zM8 13l-2-2-1 1 3 3 3-3-1-1z"></path></symbol></svg>'},"./node_modules/muuri/dist/muuri.js":function($,P,t){/**
* Muuri v0.8.0
* https://github.com/haltu/muuri
* Copyright (c) 2015-present, Haltu Oy
* Released under the MIT license
* https://github.com/haltu/muuri/blob/master/LICENSE.md
* @license MIT
*
* Muuri Packer
* Copyright (c) 2016-present, Niklas Rm <inramo@gmail.com>
* @license MIT
*
* Muuri Ticker / Muuri Emitter / Muuri Queue
* Copyright (c) 2018-present, Niklas Rm <inramo@gmail.com>
* @license MIT
*/(function(A,M){$.exports=M()})(this,function(){var A="Muuri",M={},l="swap",_="move",m="synchronize",f="layoutStart",o="layoutEnd",e="add",i="remove",r="showStart",n="showEnd",s="hideStart",a="hideEnd",u="filter",p="sort",c="move",x="send",g="beforeSend",h="receive",b="beforeReceive",v="dragInit",y="dragStart",w="dragMove",d="dragScroll",S="dragEnd",T="dragReleaseStart",E="dragReleaseEnd",C="destroy";function L(){this._events={},this._queue=[],this._counter=0,this._isDestroyed=!1}L.prototype.on=function(Ke,it){if(this._isDestroyed)return this;var Mt=this._events[Ke];return Mt||(Mt=this._events[Ke]=[]),Mt.push(it),this},L.prototype.off=function(Ke,it){if(this._isDestroyed)return this;var Mt=this._events[Ke];if(!Mt||!Mt.length)return this;if(!it)return Mt.length=0,this;for(var Lt=Mt.length;Lt--;)it===Mt[Lt]&&Mt.splice(Lt,1);return this},L.prototype.emit=function(Ke,it,Mt,Lt){if(this._isDestroyed)return this;var Bt=this._events[Ke];if(!Bt||!Bt.length)return this;var ln=this._queue,wn=ln.length,jn=arguments.length-1,bn;for(bn=0;bn<Bt.length;bn++)ln.push(Bt[bn]);for(++this._counter,bn=wn,wn=ln.length;bn<wn;bn++)if(jn===0?ln[bn]():jn===1?ln[bn](it):jn===2?ln[bn](it,Mt):ln[bn](it,Mt,Lt),this._isDestroyed)return this;return--this._counter,this._counter||(ln.length=0),this},L.prototype.destroy=function(){if(this._isDestroyed)return this;var Ke=this._events,it;this._isDestroyed=!0,this._queue.length=this._counter=0;for(it in Ke)Ke[it]&&(Ke[it].length=0,Ke[it]=void 0);return this};var O="transform",z="transform",G=window.document.documentElement.style,I="transform",H="Transform",N=!1;["","Webkit","Moz","O","ms"].forEach(function(Ke){if(!N){var it=Ke?Ke+H:I;G[it]!==void 0&&(Ke=Ke.toLowerCase(),O=Ke?"-"+Ke+"-"+I:I,z=it,N=!0)}});var F=typeof WeakMap=="function"?new WeakMap:null;function V(Ke,it){var Mt=F&&F.get(Ke);return Mt||(Mt=window.getComputedStyle(Ke,null),F&&F.set(Ke,Mt)),Mt.getPropertyValue(it==="transform"?O:it)}var W=/([A-Z])/g;function te(Ke){return Ke.replace(W,"-$1").toLowerCase()}var Q="function";function X(Ke){return typeof Ke===Q}var q="transform";function Z(Ke,it){for(var Mt in it)Ke.style[Mt===q?z:Mt]=it[Mt]}function J(Ke){this._element=Ke,this._animation=null,this._callback=null,this._props=[],this._values=[],this._keyframes=[],this._options={},this._isDestroyed=!1,this._onFinish=this._onFinish.bind(this)}J.prototype.start=function(Ke,it,Mt){if(!this._isDestroyed){var Lt=this._animation,Bt=this._props,ln=this._values,wn=Mt||0,jn=!1;if(Lt){var bn=0,qn;for(var or in it)if(++bn,qn=Bt.indexOf(or),qn===-1||it[or]!==ln[qn]){jn=!0;break}!jn&&bn!==Bt.length&&(jn=!0)}if(jn&&Lt.cancel(),this._callback=X(wn.onFinish)?wn.onFinish:null,!(Lt&&!jn)){Bt.length=ln.length=0;for(or in it)Bt.push(or),ln.push(it[or]);var ar=this._keyframes;ar[0]=Ke,ar[1]=it;var mr=this._options;mr.duration=wn.duration||300,mr.easing=wn.easing||"ease";var kr=this._element;Lt=kr.animate(ar,mr),Lt.onfinish=this._onFinish,this._animation=Lt,Z(kr,it)}}},J.prototype.stop=function(Ke){if(!(this._isDestroyed||!this._animation)){var it=this._element,Mt=this._props,Lt=this._values,Bt,ln,wn;if(Ke)Z(it,Ke);else for(wn=0;wn<Mt.length;wn++)Bt=Mt[wn],ln=V(it,te(Bt)),it.style[Bt==="transform"?z:Bt]=ln;this._animation.cancel(),this._animation=this._callback=null,Mt.length=Lt.length=0}},J.prototype.isAnimating=function(){return!!this._animation},J.prototype.destroy=function(){this._isDestroyed||(this.stop(),this._element=this._options=this._keyframes=null,this._isDestroyed=!0)},J.prototype._onFinish=function(){var Ke=this._callback;this._animation=this._callback=null,this._props.length=this._values.length=0,Ke&&Ke()};var ne=["","webkit","moz","ms","o","Webkit","Moz","MS","O"];function re(Ke,it){for(var Mt=it[0].toUpperCase()+it.slice(1),Lt=0,Bt,ln;Lt<ne.length;){if(Bt=ne[Lt],ln=Bt?Bt+Mt:it,ln in Ke)return ln;++Lt}return null}var ae=1e3/60,ue=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Ke){return this.setTimeout(function(){Ke(ae)},ae)}).bind(window),he=!1;try{var de=Object.defineProperty({},"passive",{get:function(){he=!0}});window.addEventListener("testPassive",null,de),window.removeEventListener("testPassive",null,de)}catch{}var xe={start:"start",move:"move",end:"end",cancel:"cancel"},me=!!("ontouchstart"in window||window.TouchEvent),ve=!!window.PointerEvent,Le=!!window.navigator.msPointerEnabled,Ae=/(android)/i.test(window.navigator.userAgent),we=he?{passive:!0}:!1,se="touchAction",oe=re(window.document.documentElement.style,se),fe="auto";function Se(Ke,it){this._element=Ke,this._emitter=new L,this._isDestroyed=!1,this._cssProps={},this._touchAction="",this._startEvent=null,this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._preStartCheck=this._preStartCheck.bind(this),this._abortNonCancelable=this._abortNonCancelable.bind(this),this._onStart=this._onStart.bind(this),this._onMove=this._onMove.bind(this),this._onCancel=this._onCancel.bind(this),this._onEnd=this._onEnd.bind(this),this.setCssProps(it),this._touchAction||this.setTouchAction(fe),Ke.addEventListener("dragstart",Se._preventDefault,!1),Ke.addEventListener(Se._events.start,this._preStartCheck,we),me&&!ve&&!Le&&Ke.addEventListener(Se._mouseEvents.start,this._preStartCheck,we)}Se._pointerEvents={start:"pointerdown",move:"pointermove",cancel:"pointercancel",end:"pointerup"},Se._msPointerEvents={start:"MSPointerDown",move:"MSPointerMove",cancel:"MSPointerCancel",end:"MSPointerUp"},Se._touchEvents={start:"touchstart",move:"touchmove",cancel:"touchcancel",end:"touchend"},Se._mouseEvents={start:"mousedown",move:"mousemove",cancel:"",end:"mouseup"},Se._events=function(){return ve?Se._pointerEvents:Le?Se._msPointerEvents:me?Se._touchEvents:Se._mouseEvents}(),Se._emitter=new L,Se._activeInstances=[],Se._preventDefault=function(Ke){Ke.preventDefault&&Ke.cancelable!==!1&&Ke.preventDefault()},Se._activateInstance=function(Ke){var it=Se._activeInstances.indexOf(Ke);it>-1||(Se._activeInstances.push(Ke),Se._emitter.on(xe.move,Ke._onMove),Se._emitter.on(xe.cancel,Ke._onCancel),Se._emitter.on(xe.end,Ke._onEnd),Se._activeInstances.length===1&&Se._bindListeners())},Se._deactivateInstance=function(Ke){var it=Se._activeInstances.indexOf(Ke);it!==-1&&(Se._activeInstances.splice(it,1),Se._emitter.off(xe.move,Ke._onMove),Se._emitter.off(xe.cancel,Ke._onCancel),Se._emitter.off(xe.end,Ke._onEnd),Se._activeInstances.length||Se._unbindListeners())},Se._bindListeners=function(){var Ke=Se._events;window.addEventListener(Ke.move,Se._onMove,we),window.addEventListener(Ke.end,Se._onEnd,we),Ke.cancel&&window.addEventListener(Ke.cancel,Se._onCancel,we)},Se._unbindListeners=function(){var Ke=Se._events;window.removeEventListener(Ke.move,Se._onMove,we),window.removeEventListener(Ke.end,Se._onEnd,we),Ke.cancel&&window.removeEventListener(Ke.cancel,Se._onCancel,we)},Se._getEventPointerId=function(Ke){return typeof Ke.pointerId=="number"?Ke.pointerId:Ke.changedTouches?Ke.changedTouches[0]?Ke.changedTouches[0].identifier:null:1},Se._getTouchById=function(Ke,it){if(typeof Ke.pointerId=="number")return Ke.pointerId===it?Ke:null;if(Ke.changedTouches){for(var Mt=0;Mt<Ke.changedTouches.length;Mt++)if(Ke.changedTouches[Mt].identifier===it)return Ke.changedTouches[Mt];return null}return Ke},Se._onMove=function(Ke){Se._emitter.emit(xe.move,Ke)},Se._onCancel=function(Ke){Se._emitter.emit(xe.cancel,Ke)},Se._onEnd=function(Ke){Se._emitter.emit(xe.end,Ke)},Se.prototype._reset=function(){this._isDestroyed||(this._pointerId=null,this._startTime=0,this._startX=0,this._startY=0,this._currentX=0,this._currentY=0,this._startEvent=null,this._element.removeEventListener(Se._touchEvents.start,this._abortNonCancelable,we),Se._deactivateInstance(this))},Se.prototype._createEvent=function(Ke,it){var Mt=this._getTrackedTouch(it);return{type:Ke,srcEvent:it,distance:this.getDistance(),deltaX:this.getDeltaX(),deltaY:this.getDeltaY(),deltaTime:Ke===xe.start?0:this.getDeltaTime(),isFirst:Ke===xe.start,isFinal:Ke===xe.end||Ke===xe.cancel,identifier:this._pointerId,screenX:Mt.screenX,screenY:Mt.screenY,clientX:Mt.clientX,clientY:Mt.clientY,pageX:Mt.pageX,pageY:Mt.pageY,target:Mt.target}},Se.prototype._emit=function(Ke,it){this._emitter.emit(Ke,this._createEvent(Ke,it))},Se.prototype._getTrackedTouch=function(Ke){return this._pointerId===null?null:Se._getTouchById(Ke,this._pointerId)},Se.prototype._preStartCheck=function(Ke){this._isDestroyed||this.isDragging()||Ae&&Ke.cancelable===!1||Ke.button||(this._pointerId=Se._getEventPointerId(Ke),this._pointerId!==null&&(this._startEvent=Ke,me&&(ve||Le)?(Ae&&this._element.addEventListener(Se._touchEvents.start,this._abortNonCancelable,we),ue(this._onStart)):this._onStart()))},Se.prototype._abortNonCancelable=function(Ke){this._element.removeEventListener(Se._touchEvents.start,this._abortNonCancelable,we),this._startEvent&&Ke.cancelable===!1&&(this._pointerId=null,this._startEvent=null)},Se.prototype._onStart=function(){var Ke=this._startEvent;if(Ke){this._startEvent=null;var it=this._getTrackedTouch(Ke);it&&(this._startX=this._currentX=it.clientX,this._startY=this._currentY=it.clientY,this._startTime=Date.now(),this._emit(xe.start,Ke),Se._activateInstance(this))}},Se.prototype._onMove=function(Ke){var it=this._getTrackedTouch(Ke);it&&(this._currentX=it.clientX,this._currentY=it.clientY,this._emit(xe.move,Ke))},Se.prototype._onCancel=function(Ke){this._getTrackedTouch(Ke)&&(this._emit(xe.cancel,Ke),this._reset())},Se.prototype._onEnd=function(Ke){this._getTrackedTouch(Ke)&&(this._emit(xe.end,Ke),this._reset())},Se.prototype.isDragging=function(){return this._pointerId!==null},Se.prototype.setTouchAction=function(Ke){this._touchAction=Ke,oe&&(this._cssProps[oe]="",this._element.style[oe]=Ke),me&&(this._element.removeEventListener(Se._touchEvents.start,Se._preventDefault,!1),this._element.style[oe]!==Ke&&this._element.addEventListener(Se._touchEvents.start,Se._preventDefault,!1))},Se.prototype.setCssProps=function(Ke){if(Ke){var it=this._cssProps,Mt=this._element,Lt,Bt;for(Lt in it)Mt.style[Lt]=it[Lt],delete it[Lt];for(Lt in Ke)if(Ke[Lt]){if(Lt===se){this.setTouchAction(Ke[Lt]);continue}Bt=re(Mt.style,Lt),Bt&&(it[Bt]="",Mt.style[Bt]=Ke[Lt])}}},Se.prototype.getDeltaX=function(){return this._currentX-this._startX},Se.prototype.getDeltaY=function(){return this._currentY-this._startY},Se.prototype.getDistance=function(){var Ke=this.getDeltaX(),it=this.getDeltaY();return Math.sqrt(Ke*Ke+it*it)},Se.prototype.getDeltaTime=function(){return this._startTime?Date.now()-this._startTime:0},Se.prototype.on=function(Ke,it){this._emitter.on(Ke,it)},Se.prototype.off=function(Ke,it){this._emitter.off(eventName,it)},Se.prototype.destroy=function(){if(!this._isDestroyed){var Ke=this._element,it=Se._events;this._reset(),this._emitter.destroy(),Ke.removeEventListener(it.start,this._preStartCheck,we),Ke.removeEventListener(Se._mouseEvents.start,this._preStartCheck,we),Ke.removeEventListener("dragstart",Se._preventDefault,!1),Ke.removeEventListener(Se._touchEvents.start,Se._preventDefault,!1);for(var Mt in this._cssProps)Ke.style[Mt]=this._cssProps[Mt],delete this._cssProps[Mt];this._element=null,this._isDestroyed=!0}};function Me(){this._nextStep=null,this._queue=[],this._reads={},this._writes={},this._batch=[],this._batchReads={},this._batchWrites={},this._step=this._step.bind(this)}Me.prototype.add=function(Ke,it,Mt,Lt){var Bt=this._queue.indexOf(Ke);Bt>-1&&(this._queue[Bt]=void 0),Lt?this._queue.unshift(Ke):this._queue.push(Ke),this._reads[Ke]=it,this._writes[Ke]=Mt,this._nextStep||(this._nextStep=ue(this._step))},Me.prototype.cancel=function(Ke){var it=this._queue.indexOf(Ke);it>-1&&(this._queue[it]=void 0,delete this._reads[Ke],delete this._writes[Ke])},Me.prototype._step=function(){var Ke=this._queue,it=this._reads,Mt=this._writes,Lt=this._batch,Bt=this._batchReads,ln=this._batchWrites,wn=Ke.length,jn,bn;for(this._nextStep=null,bn=0;bn<wn;bn++)jn=Ke[bn],jn&&(Lt.push(jn),Bt[jn]=it[jn],delete it[jn],ln[jn]=Mt[jn],delete Mt[jn]);for(Ke.length=0,bn=0;bn<wn;bn++)jn=Lt[bn],Bt[jn]&&(Bt[jn](),delete Bt[jn]);for(bn=0;bn<wn;bn++)jn=Lt[bn],ln[jn]&&(ln[jn](),delete ln[jn]);Lt.length=0,!this._nextStep&&Ke.length&&(this._nextStep=ue(this._step))};var be=new Me,Ie="layout",Be="visibility",ce="move",Te="scroll",ye="placeholder";function Pe(Ke,it,Mt){return be.add(Ke+Ie,it,Mt)}function Re(Ke){return be.cancel(Ke+Ie)}function ze(Ke,it,Mt){return be.add(Ke+Be,it,Mt)}function He(Ke){return be.cancel(Ke+Be)}function We(Ke,it,Mt){return be.add(Ke+ce,it,Mt,!0)}function Je(Ke){return be.cancel(Ke+ce)}function lt(Ke,it,Mt){return be.add(Ke+Te,it,Mt,!0)}function et(Ke){return be.cancel(Ke+Te)}function yt(Ke,it,Mt){return be.add(Ke+ye,it,Mt)}function _t(Ke){return be.cancel(Ke+ye)}var xt=window.Element.prototype,at=xt.matches||xt.matchesSelector||xt.webkitMatchesSelector||xt.mozMatchesSelector||xt.msMatchesSelector||xt.oMatchesSelector||function(){return!1};function ot(Ke,it){return at.call(Ke,it)}function At(Ke,it){Ke.classList?Ke.classList.add(it):ot(Ke,"."+it)||(Ke.className+=" "+it)}var Ct=[],zt="number";function St(Ke,it,Mt){var Lt=typeof Mt===zt?Mt:-1;Lt<0&&(Lt=Ke.length-Lt+1),Ke.splice.apply(Ke,Ct.concat(Lt,0,it)),Ct.length=0}function qe(Ke,it,Mt){var Lt=Ke.length,Bt=Math.max(0,Mt?Lt:Lt-1);return it>Bt?Bt:it<0?Math.max(Bt+it+1,0):it}function Xe(Ke,it,Mt){if(!(Ke.length<2)){var Lt=qe(Ke,it),Bt=qe(Ke,Mt);Lt!==Bt&&Ke.splice(Bt,0,Ke.splice(Lt,1)[0])}}function Ve(Ke,it,Mt){if(!(Ke.length<2)){var Lt=qe(Ke,it),Bt=qe(Ke,Mt),ln;Lt!==Bt&&(ln=Ke[Lt],Ke[Lt]=Ke[Bt],Ke[Bt]=ln)}}var Ze="cancel",st="finish",nt="debounce",De=0;function Fe(Ke,it){var Mt,Lt=++De+nt;return it>0?function(Bt){Mt!==void 0&&(Mt=window.clearTimeout(Mt),be.cancel(Lt),Bt===st&&Ke()),Bt!==Ze&&Bt!==st&&(Mt=window.setTimeout(function(){Mt=void 0,be.add(Lt,Ke,null,!0)},it))}:function(Bt){Bt!==Ze&&Ke()}}function rt(Ke){var it=V(Ke,"transform");if(!it||it==="none")return!1;var Mt=V(Ke,"display");return!(Mt==="inline"||Mt==="none")}function tt(Ke,it){for(var Mt=window.document,Lt=(it?Ke:Ke.parentElement)||Mt;Lt&&Lt!==Mt&&V(Lt,"position")==="static"&&!rt(Lt);)Lt=Lt.parentElement||Mt;return Lt}function gt(Ke,it){return parseFloat(V(Ke,it))||0}var dt={},mt={},ft={};function kt(Ke,it){var Mt=it||{},Lt;return Mt.left=0,Mt.top=0,Ke===document||(Mt.left=window.pageXOffset||0,Mt.top=window.pageYOffset||0,Ke.self===window.self)||(Lt=Ke.getBoundingClientRect(),Mt.left+=Lt.left,Mt.top+=Lt.top,Mt.left+=gt(Ke,"border-left-width"),Mt.top+=gt(Ke,"border-top-width")),Mt}function ht(Ke,it,Mt){return ft.left=0,ft.top=0,Ke===it||Mt&&(Ke=tt(Ke,!0),it=tt(it,!0),Ke===it)||(kt(Ke,dt),kt(it,mt),ft.left=mt.left-dt.left,ft.top=mt.top-dt.top),ft}var pt="overflow",wt="overflow-x",Ft="overflow-y",Nt="auto",Gt="scroll";function an(Ke){var it=V(Ke,pt);return it===Nt||it===Gt||(it=V(Ke,wt),it===Nt||it===Gt)||(it=V(Ke,Ft),it===Nt||it===Gt)}function Wt(Ke,it,Mt){for(var Lt=Mt||[],Bt=it?Ke:Ke.parentNode;Bt&&Bt!==document;){if(Bt.getRootNode&&Bt instanceof DocumentFragment){Bt=Bt.getRootNode().host;continue}an(Bt)&&Lt.push(Bt),Bt=Bt.parentNode}return Lt.push(window),Lt}var Yt={},en="transform",Tn="none",Bn=/^matrix3d/,mn=/([^,]*,){4}/,Kt=/([^,]*,){12}/,cn=/[^,]*,/;function tn(Ke){Yt.x=0,Yt.y=0;var it=V(Ke,en);if(!it||it===Tn)return Yt;var Mt=Bn.test(it),Lt=it.replace(Mt?Kt:mn,""),Bt=Lt.replace(cn,"");return Yt.x=parseFloat(Lt)||0,Yt.y=parseFloat(Bt)||0,Yt}function un(Ke,it){return"translateX("+Ke+"px) translateY("+it+"px)"}function yn(Ke,it){Ke.classList?Ke.classList.remove(it):ot(Ke,"."+it)&&(Ke.className=(" "+Ke.className+" ").replace(" "+it+" "," ").trim())}var En=0,Sn=1,Nn=2,_n=3;function Pn(Ke){var it=Ke._element,Mt=Ke.getGrid(),Lt=Mt._settings;this._item=Ke,this._gridId=Mt._id,this._isDestroyed=!1,this._isMigrating=!1,this._startPredicate=X(Lt.dragStartPredicate)?Lt.dragStartPredicate:Pn.defaultStartPredicate,this._startPredicateState=En,this._startPredicateResult=void 0,this._hBlockedIndex=null,this._hX1=0,this._hX2=0,this._hY1=0,this._hY2=0,this._reset(),this._preStartCheck=this._preStartCheck.bind(this),this._preEndCheck=this._preEndCheck.bind(this),this._onScroll=this._onScroll.bind(this),this._prepareMove=this._prepareMove.bind(this),this._applyMove=this._applyMove.bind(this),this._prepareScroll=this._prepareScroll.bind(this),this._applyScroll=this._applyScroll.bind(this),this._checkOverlap=this._checkOverlap.bind(this);var Bt=Lt.dragSortHeuristics.sortInterval;this._checkOverlapDebounce=Fe(this._checkOverlap,Bt),this._dragger=new Se(it,Lt.dragCssProps),this._dragger.on("start",this._preStartCheck),this._dragger.on("move",this._preStartCheck),this._dragger.on("cancel",this._preEndCheck),this._dragger.on("end",this._preEndCheck)}Pn.defaultStartPredicate=function(Ke,it,Mt){var Lt=Ke._drag,Bt=Lt._startPredicateData||Lt._setupStartPredicate(Mt);if(it.isFinal){Lt._finishStartPredicate(it);return}return!Bt.handleElement&&(Bt.handleElement=Lt._getStartPredicateHandle(it),!Bt.handleElement)?!1:(Bt.delay&&(Bt.event=it,Bt.delayTimer||(Bt.delayTimer=window.setTimeout(function(){Bt.delay=0,Lt._resolveStartPredicate(Bt.event)&&(Lt._forceResolveStartPredicate(Bt.event),Lt._resetStartPredicate())},Bt.delay))),Lt._resolveStartPredicate(it))},Pn.defaultSortPredicate=function(){var Ke={},it={},Mt={},Lt=[];function Bt(ln,wn,jn){var bn=null,qn=wn._settings.dragSort,or=-1,ar,mr,kr,Cr;if(qn===!0?(Lt[0]=wn,mr=Lt):mr=qn.call(wn,ln),!Array.isArray(mr))return bn;for(Cr=0;Cr<mr.length;Cr++)kr=mr[Cr],!kr._isDestroyed&&(kr._updateBoundingRect(),it.width=kr._width,it.height=kr._height,it.left=kr._left,it.top=kr._top,ar=tr(Ke,it),ar>jn&&ar>or&&(or=ar,bn=kr));return Lt.length=0,bn}return function(ln,wn){var jn=ln._drag,bn=jn._getGrid(),qn=wn&&typeof wn.threshold=="number"?wn.threshold:50,or=wn&&wn.action===l?l:_;Ke.width=ln._width,Ke.height=ln._height,Ke.left=jn._elementClientX,Ke.top=jn._elementClientY;var ar=Bt(ln,bn,qn);if(!ar)return!1;var mr=0,kr=0,Cr=-1,Br,Wr,fi,pi,bi;for(ar===bn?(Ke.left=jn._gridX+ln._marginLeft,Ke.top=jn._gridY+ln._marginTop):(ar._updateBorders(1,0,1,0),mr=ar._left+ar._borderLeft,kr=ar._top+ar._borderTop),bi=0;bi<ar._items.length;bi++)fi=ar._items[bi],!(!fi._isActive||fi===ln)&&(Wr=!0,it.width=fi._width,it.height=fi._height,it.left=fi._left+fi._marginLeft+mr,it.top=fi._top+fi._marginTop+kr,pi=tr(Ke,it),pi>Cr&&(Br=bi,Cr=pi));return Cr<qn&&ln.getGrid()!==ar&&(Br=Wr?-1:0,Cr=1/0),Cr>=qn?(Mt.grid=ar,Mt.index=Br,Mt.action=or,Mt):!1}}(),Pn.prototype.stop=function(){var Ke=this._item,it=Ke._element,Mt=this._getGrid();return this._isActive?this._isMigrating?(this._finishMigration(),this):(Je(Ke._id),et(Ke._id),this._unbindScrollListeners(),this._checkOverlapDebounce("cancel"),it.parentNode!==Mt._element&&(Mt._element.appendChild(it),it.style[z]=un(this._gridX,this._gridY)),yn(it,Mt._settings.itemDraggingClass),this._reset(),this):this},Pn.prototype.destroy=function(){return this._isDestroyed?this:(this.stop(),this._dragger.destroy(),this._isDestroyed=!0,this)},Pn.prototype._getGrid=function(){return M[this._gridId]||null},Pn.prototype._reset=function(){this._isActive=!1,this._container=null,this._containingBlock=null,this._dragEvent=null,this._scrollEvent=null,this._scrollers=[],this._left=0,this._top=0,this._gridX=0,this._gridY=0,this._elementClientX=0,this._elementClientY=0,this._containerDiffX=0,this._containerDiffY=0},Pn.prototype._bindScrollListeners=function(){var Ke=this._getGrid()._element,it=this._container,Mt=this._scrollers,Lt,Bt;if(Mt.length=0,Wt(this._item._element,!1,Mt),it!==Ke)for(Lt=[],Wt(Ke,!0,Lt),Bt=0;Bt<Lt.length;Bt++)Mt.indexOf(Lt[Bt])<0&&Mt.push(Lt[Bt]);for(Bt=0;Bt<Mt.length;Bt++)Mt[Bt].addEventListener("scroll",this._onScroll)},Pn.prototype._unbindScrollListeners=function(){var Ke=this._scrollers,it;for(it=0;it<Ke.length;it++)Ke[it].removeEventListener("scroll",this._onScroll);Ke.length=0},Pn.prototype._setupStartPredicate=function(Ke){var it=Ke||this._getGrid()._settings.dragStartPredicate||0;return this._startPredicateData={distance:Math.abs(it.distance)||0,delay:Math.max(it.delay,0)||0,handle:typeof it.handle=="string"?it.handle:!1}},Pn.prototype._getStartPredicateHandle=function(Ke){var it=this._startPredicateData,Mt=this._item._element,Lt=Mt;if(!it.handle)return Lt;for(Lt=Ke.target;Lt&&!ot(Lt,it.handle);)Lt=Lt!==Mt?Lt.parentElement:null;return Lt||null},Pn.prototype._resolveStartPredicate=function(Ke){var it=this._startPredicateData;if(!(Ke.distance<it.distance||it.delay)){var Mt=it.handleElement.getBoundingClientRect(),Lt=Mt.left+(window.pageXOffset||0),Bt=Mt.top+(window.pageYOffset||0),ln=Mt.width,wn=Mt.height;return this._resetStartPredicate(),ln&&wn&&Ke.pageX>=Lt&&Ke.pageX<Lt+ln&&Ke.pageY>=Bt&&Ke.pageY<Bt+wn}},Pn.prototype._forceResolveStartPredicate=function(Ke){!this._isDestroyed&&this._startPredicateState===Sn&&(this._startPredicateState=Nn,this._onStart(Ke))},Pn.prototype._finishStartPredicate=function(Ke){var it=this._item._element,Mt=Math.abs(Ke.deltaX)<2&&Math.abs(Ke.deltaY)<2&&Ke.deltaTime<200;this._resetStartPredicate(),Mt&&ur(it)},Pn.prototype._resetHeuristics=function(Ke){this._hBlockedIndex=null,this._hX1=this._hX2=Ke.clientX,this._hY1=this._hY2=Ke.clientY},Pn.prototype._checkHeuristics=function(Ke){var it=this._getGrid()._settings.dragSortHeuristics,Mt=it.minDragDistance;if(Mt<=0)return this._hBlockedIndex=null,!0;var Lt=Ke.clientX,Bt=Ke.clientY,ln=Lt-this._hX2,wn=Bt-this._hY2,jn=Mt>3&&it.minBounceBackAngle>0;if(jn||(this._hBlockedIndex=null),Math.abs(ln)>Mt||Math.abs(wn)>Mt){if(jn){var bn=Math.atan2(ln,wn),qn=Math.atan2(this._hX2-this._hX1,this._hY2-this._hY1),or=Math.atan2(Math.sin(bn-qn),Math.cos(bn-qn));Math.abs(or)>it.minBounceBackAngle&&(this._hBlockedIndex=null)}return this._hX1=this._hX2,this._hY1=this._hY2,this._hX2=Lt,this._hY2=Bt,!0}return!1},Pn.prototype._resetStartPredicate=function(){var Ke=this._startPredicateData;Ke&&(Ke.delayTimer&&(Ke.delayTimer=window.clearTimeout(Ke.delayTimer)),this._startPredicateData=null)},Pn.prototype._checkOverlap=function(){if(this._isActive){var Ke=this._item,it=this._getGrid()._settings,Mt,Lt,Bt,ln,wn,jn,bn;X(it.dragSortPredicate)?Mt=it.dragSortPredicate(Ke,this._dragEvent):Mt=Pn.defaultSortPredicate(Ke,it.dragSortPredicate),!(!Mt||typeof Mt.index!="number")&&(Lt=Ke.getGrid(),ln=Mt.grid||Lt,bn=Lt!==ln,Bt=Lt._items.indexOf(Ke),wn=qe(ln._items,Mt.index,bn),jn=Mt.action===l?l:_,!(!bn&&wn===this._hBlockedIndex)&&(bn?(this._hBlockedIndex=null,Lt._hasListeners(g)&&Lt._emit(g,{item:Ke,fromGrid:Lt,fromIndex:Bt,toGrid:ln,toIndex:wn}),ln._hasListeners(b)&&ln._emit(b,{item:Ke,fromGrid:Lt,fromIndex:Bt,toGrid:ln,toIndex:wn}),Ke._gridId=ln._id,this._isMigrating=Ke._gridId!==this._gridId,Lt._items.splice(Bt,1),St(ln._items,Ke,wn),Ke._sortData=null,Lt._hasListeners(x)&&Lt._emit(x,{item:Ke,fromGrid:Lt,fromIndex:Bt,toGrid:ln,toIndex:wn}),ln._hasListeners(h)&&ln._emit(h,{item:Ke,fromGrid:Lt,fromIndex:Bt,toGrid:ln,toIndex:wn}),Lt.layout(),ln.layout()):Bt!==wn&&(this._hBlockedIndex=Bt,(jn===l?Ve:Xe)(Lt._items,Bt,wn),Lt._hasListeners(c)&&Lt._emit(c,{item:Ke,fromIndex:Bt,toIndex:wn,action:jn}),Lt.layout())))}},Pn.prototype._finishMigration=function(){var Ke=this._item,it=Ke._release,Mt=Ke._element,Lt=Ke._isActive,Bt=Ke.getGrid(),ln=Bt._element,wn=Bt._settings,jn=wn.dragContainer||ln,bn=this._getGrid()._settings,qn=Mt.parentNode,or,ar;this._isMigrating=!1,this.destroy(),yn(Mt,bn.itemClass),yn(Mt,bn.itemVisibleClass),yn(Mt,bn.itemHiddenClass),At(Mt,wn.itemClass),At(Mt,Lt?wn.itemVisibleClass:wn.itemHiddenClass),jn!==qn&&(jn.appendChild(Mt),ar=ht(qn,jn,!0),or=tn(Mt),or.x-=ar.left,or.y-=ar.top),Ke._refreshDimensions(),Ke._refreshSortData(),ar=ht(jn,ln,!0),it._containerDiffX=ar.left,it._containerDiffY=ar.top,Ke._drag=wn.dragEnabled?new Pn(Ke):null,jn!==qn&&(Mt.style[z]=un(or.x,or.y)),Ke._child.removeAttribute("style"),Z(Ke._child,Lt?wn.visibleStyles:wn.hiddenStyles),it.start()},Pn.prototype._preStartCheck=function(Ke){this._startPredicateState===En&&(this._startPredicateState=Sn),this._startPredicateState===Sn?(this._startPredicateResult=this._startPredicate(this._item,Ke),this._startPredicateResult===!0?(this._startPredicateState=Nn,this._onStart(Ke)):this._startPredicateResult===!1&&(this._startPredicateState=_n)):this._startPredicateState===Nn&&this._isActive&&this._onMove(Ke)},Pn.prototype._preEndCheck=function(Ke){var it=this._startPredicateState===Nn;this._startPredicate(this._item,Ke),this._startPredicateState=En,it&&this._isActive&&this._onEnd(Ke)},Pn.prototype._onStart=function(Ke){var it=this._item;if(it._isActive){var Mt=it._element,Lt=this._getGrid(),Bt=Lt._settings,ln=it._release,wn=it._migrate,jn=Lt._element,bn=Bt.dragContainer||jn,qn=tt(bn,!0),or=tn(Mt),ar=or.x,mr=or.y,kr=Mt.getBoundingClientRect(),Cr=bn!==jn,Br;this._resetHeuristics(Ke),Cr&&(Br=ht(qn,jn)),it.isPositioning()&&it._layout.stop(!0,{transform:un(ar,mr)}),wn._isActive&&(ar-=wn._containerDiffX,mr-=wn._containerDiffY,wn.stop(!0,{transform:un(ar,mr)})),it.isReleasing()&&ln._reset(),this._isActive=!0,this._dragEvent=Ke,this._container=bn,this._containingBlock=qn,this._elementClientX=kr.left,this._elementClientY=kr.top,this._left=this._gridX=ar,this._top=this._gridY=mr,Bt.dragPlaceholder.enabled&&it._dragPlaceholder.create(),Lt._emit(v,it,Ke),Cr&&(this._containerDiffX=Br.left,this._containerDiffY=Br.top,Mt.parentNode===bn?(this._gridX=ar-this._containerDiffX,this._gridY=mr-this._containerDiffY):(this._left=ar+this._containerDiffX,this._top=mr+this._containerDiffY,bn.appendChild(Mt),Mt.style[z]=un(this._left,this._top))),At(Mt,Bt.itemDraggingClass),this._bindScrollListeners(),Lt._emit(y,it,Ke)}},Pn.prototype._onMove=function(Ke){var it=this._item;if(!it._isActive){this.stop();return}var Mt=this._getGrid()._settings,Lt=Mt.dragAxis;if(Lt!=="y"){var Bt=Ke.clientX-this._dragEvent.clientX;this._left+=Bt,this._gridX+=Bt,this._elementClientX+=Bt}if(Lt!=="x"){var ln=Ke.clientY-this._dragEvent.clientY;this._top+=ln,this._gridY+=ln,this._elementClientY+=ln}this._dragEvent=Ke,We(it._id,this._prepareMove,this._applyMove)},Pn.prototype._prepareMove=function(){this._item._isActive&&this._getGrid()._settings.dragSort&&this._checkHeuristics(this._dragEvent)&&this._checkOverlapDebounce()},Pn.prototype._applyMove=function(){var Ke=this._item;Ke._isActive&&(Ke._element.style[z]=un(this._left,this._top),this._getGrid()._emit(w,Ke,this._dragEvent))},Pn.prototype._onScroll=function(Ke){var it=this._item;if(!it._isActive){this.stop();return}this._scrollEvent=Ke,lt(it._id,this._prepareScroll,this._applyScroll)},Pn.prototype._prepareScroll=function(){var Ke=this._item;if(Ke._isActive){var it=Ke._element,Mt=this._getGrid(),Lt=Mt._settings,Bt=Lt.dragAxis,ln=Mt._element,wn,jn=it.getBoundingClientRect(),bn=this._elementClientX-jn.left,qn=this._elementClientY-jn.top;this._container!==ln&&(wn=ht(this._containingBlock,ln),this._containerDiffX=wn.left,this._containerDiffY=wn.top),Bt!=="y"&&(this._left+=bn,this._gridX=this._left-this._containerDiffX),Bt!=="x"&&(this._top+=qn,this._gridY=this._top-this._containerDiffY),Lt.dragSort&&this._checkOverlapDebounce()}},Pn.prototype._applyScroll=function(){var Ke=this._item;Ke._isActive&&(Ke._element.style[z]=un(this._left,this._top),this._getGrid()._emit(d,Ke,this._scrollEvent))},Pn.prototype._onEnd=function(Ke){var it=this._item,Mt=it._element,Lt=this._getGrid(),Bt=Lt._settings,ln=it._release;if(!it._isActive){this.stop();return}Je(it._id),et(it._id),Bt.dragSort&&this._checkOverlapDebounce("finish"),this._unbindScrollListeners(),ln._containerDiffX=this._containerDiffX,ln._containerDiffY=this._containerDiffY,this._reset(),yn(Mt,Bt.itemDraggingClass),Lt._emit(S,it,Ke),this._isMigrating?this._finishMigration():ln.start()};function tr(Ke,it){if(Ke.left+Ke.width<=it.left||it.left+it.width<=Ke.left||Ke.top+Ke.height<=it.top||it.top+it.height<=Ke.top)return 0;var Mt=Math.min(Ke.left+Ke.width,it.left+it.width)-Math.max(Ke.left,it.left),Lt=Math.min(Ke.top+Ke.height,it.top+it.height)-Math.max(Ke.top,it.top),Bt=Math.min(Ke.width,it.width),ln=Math.min(Ke.height,it.height);return Mt*Lt/(Bt*ln)*100}function ur(Ke){if(Ke.tagName.toLowerCase()==="a"){var it=Ke.getAttribute("href");if(it){var Mt=Ke.getAttribute("target");Mt&&Mt!=="_self"?window.open(it,Mt):window.location.href=it}}}function lr(Ke){this._item=Ke,this._animate=new J,this._element=null,this._className="",this._didMigrate=!1,this._resetAfterLayout=!1,this._currentLeft=0,this._currentTop=0,this._nextLeft=0,this._nextTop=0,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this),this._onLayoutStart=this._onLayoutStart.bind(this),this._onLayoutEnd=this._onLayoutEnd.bind(this),this._onReleaseEnd=this._onReleaseEnd.bind(this),this._onMigrate=this._onMigrate.bind(this)}lr.prototype._onLayoutStart=function(){var Ke=this._item,it=Ke.getGrid(),Mt=it._items.indexOf(Ke),Lt=it._layout.slots[Mt*2],Bt=it._layout.slots[Mt*2+1];if(!(!this._didMigrate&&Ke._left===Lt&&Ke._top===Bt)){Lt+=Ke._marginLeft,Bt+=Ke._marginTop;var ln=it._settings.dragPlaceholder.duration>0;if(!ln||this._didMigrate){_t(Ke._id);var wn={transform:un(Lt,Bt)};this._animate.isAnimating()?this._animate.stop(wn):Z(this._element,wn),this._didMigrate&&(it.getElement().appendChild(this._element),this._didMigrate=!1);return}this._nextLeft=Lt,this._nextTop=Bt,yt(Ke._id,this._setupAnimation,this._startAnimation)}},lr.prototype._setupAnimation=function(){if(this.isActive()){var Ke=tn(this._element);this._currentLeft=Ke.x,this._currentTop=Ke.y}},lr.prototype._startAnimation=function(){if(this.isActive()){var Ke=this._animate,it=this._currentLeft,Mt=this._currentTop,Lt=this._nextLeft,Bt=this._nextTop,ln={transform:un(Lt,Bt)};if(it===Lt&&Mt===Bt){Ke.isAnimating()&&Ke.stop(ln);return}var wn=this._item.getGrid()._settings.dragPlaceholder,jn={transform:un(it,Mt)};Ke.start(jn,ln,{duration:wn.duration,easing:wn.easing,onFinish:this._onLayoutEnd})}},lr.prototype._onLayoutEnd=function(){this._resetAfterLayout&&this.reset()},lr.prototype._onReleaseEnd=function(Ke){if(Ke._id===this._item._id){if(!this._animate.isAnimating()){this.reset();return}this._resetAfterLayout=!0}},lr.prototype._onMigrate=function(Ke){if(Ke.item===this._item){var it=this._item.getGrid(),Mt=Ke.toGrid;it.off(E,this._onReleaseEnd),it.off(f,this._onLayoutStart),it.off(g,this._onMigrate),Mt.on(E,this._onReleaseEnd),Mt.on(f,this._onLayoutStart),Mt.on(g,this._onMigrate),this._didMigrate=!0}},lr.prototype.create=function(){if(this.isActive()){this._resetAfterLayout=!1;return}var Ke=this._item,it=Ke.getGrid(),Mt=it._settings,Lt=this._animate,Bt;X(Mt.dragPlaceholder.createElement)?Bt=Mt.dragPlaceholder.createElement(Ke):Bt=window.document.createElement("div"),this._element=Bt,Lt._element=Bt,this._className=Mt.itemPlaceholderClass||"",this._className&&At(Bt,this._className);var ln=Ke._left+Ke._marginLeft,wn=Ke._top+Ke._marginTop;Z(Bt,{display:"block",position:"absolute",left:"0",top:"0",width:Ke._width+"px",height:Ke._height+"px",transform:un(ln,wn)}),it.on(f,this._onLayoutStart),it.on(E,this._onReleaseEnd),it.on(g,this._onMigrate),X(Mt.dragPlaceholder.onCreate)&&Mt.dragPlaceholder.onCreate(Ke,Bt),it.getElement().appendChild(Bt)},lr.prototype.reset=function(){if(this.isActive()){var Ke=this._element,it=this._item,Mt=it.getGrid(),Lt=Mt._settings,Bt=this._animate;this._resetAfterLayout=!1,_t(it._id),Bt.stop(),Bt._element=null,Mt.off(E,this._onReleaseEnd),Mt.off(f,this._onLayoutStart),Mt.off(g,this._onMigrate),this._className&&(yn(Ke,this._className),this._className=""),Ke.parentNode.removeChild(Ke),this._element=null,X(Lt.dragPlaceholder.onRemove)&&Lt.dragPlaceholder.onRemove(it,Ke)}},lr.prototype.updateDimensions=function(Ke,it){this.isActive()&&Z(this._element,{width:Ke+"px",height:it+"px"})},lr.prototype.isActive=function(){return!!this._element},lr.prototype.destroy=function(){this.reset(),this._animate.destroy(),this._item=this._animate=null};function ir(){this._queue=[],this._isDestroyed=!1}ir.prototype.add=function(Ke){return this._isDestroyed?this:(this._queue.push(Ke),this)},ir.prototype.flush=function(Ke,it){if(this._isDestroyed)return this;var Mt=this._queue,Lt=Mt.length,Bt;if(!Lt)return this;var ln=Lt===1,wn=ln?Mt[0]:Mt.slice(0);if(Mt.length=0,ln)return wn(Ke,it),this;for(Bt=0;Bt<Lt&&(wn[Bt](Ke,it),!this._isDestroyed);Bt++);return this},ir.prototype.destroy=function(){return this._isDestroyed?this:(this._isDestroyed=!0,this._queue.length=0,this)};function $n(Ke){this._item=Ke,this._isActive=!1,this._isDestroyed=!1,this._isInterrupted=!1,this._currentStyles={},this._targetStyles={},this._currentLeft=0,this._currentTop=0,this._offsetLeft=0,this._offsetTop=0,this._skipNextAnimation=!1,this._animateOptions={onFinish:this._finish.bind(this)},this._queue=new ir,this._setupAnimation=this._setupAnimation.bind(this),this._startAnimation=this._startAnimation.bind(this)}$n.prototype.start=function(Ke,it){if(!this._isDestroyed){var Mt=this._item,Lt=Mt._element,Bt=Mt._release,ln=Mt.getGrid()._settings,wn=this._isActive,jn=Bt._isActive&&Bt._isPositioningStarted===!1,bn=jn?ln.dragReleaseDuration:ln.layoutDuration,qn=jn?ln.dragReleaseEasing:ln.layoutEasing,or=!Ke&&!this._skipNextAnimation&&bn>0,ar;return wn&&this._queue.flush(!0,Mt),jn&&(Bt._isPositioningStarted=!0),X(it)&&this._queue.add(it),or?(this._isActive=!0,this._animateOptions.easing=qn,this._animateOptions.duration=bn,this._isInterrupted=wn,Pe(Mt._id,this._setupAnimation,this._startAnimation),this):(this._updateOffsets(),this._updateTargetStyles(),ar=Mt._animate.isAnimating(),this.stop(!1,this._targetStyles),!ar&&Z(Lt,this._targetStyles),this._skipNextAnimation=!1,this._finish())}},$n.prototype.stop=function(Ke,it){if(this._isDestroyed||!this._isActive)return this;var Mt=this._item;return Re(Mt._id),Mt._animate.stop(it),yn(Mt._element,Mt.getGrid()._settings.itemPositioningClass),this._isActive=!1,Ke&&this._queue.flush(!0,Mt),this},$n.prototype.destroy=function(){return this._isDestroyed?this:(this.stop(!0,{}),this._queue.destroy(),this._item=this._currentStyles=this._targetStyles=this._animateOptions=null,this._isDestroyed=!0,this)},$n.prototype._updateOffsets=function(){if(!this._isDestroyed){var Ke=this._item,it=Ke._migrate,Mt=Ke._release;this._offsetLeft=Mt._isActive?Mt._containerDiffX:it._isActive?it._containerDiffX:0,this._offsetTop=Mt._isActive?Mt._containerDiffY:it._isActive?it._containerDiffY:0}},$n.prototype._updateTargetStyles=function(){this._isDestroyed||(this._targetStyles.transform=un(this._item._left+this._offsetLeft,this._item._top+this._offsetTop))},$n.prototype._finish=function(){if(!this._isDestroyed){var Ke=this._item,it=Ke._migrate,Mt=Ke._release;this._isActive&&(this._isActive=!1,yn(Ke._element,Ke.getGrid()._settings.itemPositioningClass)),Mt._isActive&&Mt.stop(),it._isActive&&it.stop(),this._queue.flush(!1,Ke)}},$n.prototype._setupAnimation=function(){var Ke=tn(this._item._element);this._currentLeft=Ke.x,this._currentTop=Ke.y},$n.prototype._startAnimation=function(){var Ke=this._item,it=Ke.getGrid()._settings;if(this._updateOffsets(),this._updateTargetStyles(),Ke._left===this._currentLeft-this._offsetLeft&&Ke._top===this._currentTop-this._offsetTop){this._isInterrupted&&this.stop(!1,this._targetStyles),this._isActive=!1,this._finish();return}this._isInterrupted||At(Ke._element,it.itemPositioningClass),this._currentStyles.transform=un(this._currentLeft,this._currentTop),Ke._animate.start(this._currentStyles,this._targetStyles,this._animateOptions)};var vr={};function jt(Ke){this._item=Ke,this._isActive=!1,this._isDestroyed=!1,this._container=!1,this._containerDiffX=0,this._containerDiffY=0}jt.prototype.start=function(Ke,it,Mt){if(this._isDestroyed)return this;var Lt=this._item,Bt=Lt._element,ln=Lt.isVisible(),wn=Lt.getGrid(),jn=wn._settings,bn=Ke._settings,qn=Ke._element,or=Ke._items,ar=wn._items.indexOf(Lt),mr=Mt||window.document.body,kr,Cr,Br,Wr,fi,pi,bi,Da;if(typeof it=="number")kr=qe(or,it,!0);else{if(Cr=Ke._getItem(it),!Cr)return this;kr=or.indexOf(Cr)}return(Lt.isPositioning()||this._isActive||Lt.isReleasing())&&(pi=tn(Bt),bi=pi.x,Da=pi.y),Lt.isPositioning()&&Lt._layout.stop(!0,{transform:un(bi,Da)}),this._isActive&&(bi-=this._containerDiffX,Da-=this._containerDiffY,this.stop(!0,{transform:un(bi,Da)})),Lt.isReleasing()&&(bi-=Lt._release._containerDiffX,Da-=Lt._release._containerDiffY,Lt._release.stop(!0,{transform:un(bi,Da)})),Lt._visibility._stopAnimation(),Lt._drag&&Lt._drag.destroy(),Lt._visibility._queue.flush(!0,Lt),wn._hasListeners(g)&&wn._emit(g,{item:Lt,fromGrid:wn,fromIndex:ar,toGrid:Ke,toIndex:kr}),Ke._hasListeners(b)&&Ke._emit(b,{item:Lt,fromGrid:wn,fromIndex:ar,toGrid:Ke,toIndex:kr}),yn(Bt,jn.itemClass),yn(Bt,jn.itemVisibleClass),yn(Bt,jn.itemHiddenClass),At(Bt,bn.itemClass),At(Bt,ln?bn.itemVisibleClass:bn.itemHiddenClass),wn._items.splice(ar,1),St(or,Lt,kr),Lt._gridId=Ke._id,Br=Bt.parentNode,mr!==Br&&(mr.appendChild(Bt),Wr=ht(mr,Br,!0),pi||(pi=tn(Bt),bi=pi.x,Da=pi.y),Bt.style[z]=un(bi+Wr.left,Da+Wr.top)),Lt._child.removeAttribute("style"),Z(Lt._child,ln?bn.visibleStyles:bn.hiddenStyles),Bt.style.display=ln?"block":"hidden",fi=ht(mr,qn,!0),Lt._refreshDimensions(),Lt._refreshSortData(),Lt._drag=bn.dragEnabled?new Pn(Lt):null,this._isActive=!0,this._container=mr,this._containerDiffX=fi.left,this._containerDiffY=fi.top,wn._hasListeners(x)&&wn._emit(x,{item:Lt,fromGrid:wn,fromIndex:ar,toGrid:Ke,toIndex:kr}),Ke._hasListeners(h)&&Ke._emit(h,{item:Lt,fromGrid:wn,fromIndex:ar,toGrid:Ke,toIndex:kr}),this},jt.prototype.stop=function(Ke,it){if(this._isDestroyed||!this._isActive)return this;var Mt=this._item,Lt=Mt._element,Bt=Mt.getGrid(),ln=Bt._element,wn;return this._container!==ln&&(it||(Ke?(wn=tn(Lt),vr.transform=un(wn.x-this._containerDiffX,wn.y-this._containerDiffY)):vr.transform=un(Mt._left,Mt._top),it=vr),ln.appendChild(Lt),Z(Lt,it)),this._isActive=!1,this._container=null,this._containerDiffX=0,this._containerDiffY=0,this},jt.prototype.destroy=function(){return this._isDestroyed?this:(this.stop(!0),this._item=null,this._isDestroyed=!0,this)};var rn={};function fn(Ke){this._item=Ke,this._isActive=!1,this._isDestroyed=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0}fn.prototype.start=function(){if(this._isDestroyed||this._isActive)return this;var Ke=this._item,it=Ke.getGrid();return this._isActive=!0,At(Ke._element,it._settings.itemReleasingClass),it._emit(T,Ke),Ke._layout.start(!1),this},fn.prototype.stop=function(Ke,it){if(this._isDestroyed||!this._isActive)return this;var Mt=this._item,Lt=Mt._element,Bt=Mt.getGrid(),ln=Bt._element,wn;return this._reset(),Lt.parentNode!==ln&&(it||(Ke?(wn=tn(Lt),rn.transform=un(wn.x-this._containerDiffX,wn.y-this._containerDiffY)):rn.transform=un(Mt._left,Mt._top),it=rn),ln.appendChild(Lt),Z(Lt,it)),Ke||Bt._emit(E,Mt),this},fn.prototype.destroy=function(){return this._isDestroyed?this:(this.stop(!0),this._item=null,this._isDestroyed=!0,this)},fn.prototype._reset=function(){if(!this._isDestroyed){var Ke=this._item;this._isActive=!1,this._isPositioningStarted=!1,this._containerDiffX=0,this._containerDiffY=0,yn(Ke._element,Ke.getGrid()._settings.itemReleasingClass)}};function xn(Ke,it){var Mt={};for(var Lt in it)Mt[Lt]=V(Ke,te(Lt));return Mt}function Ln(Ke){var it=Ke._isActive,Mt=Ke._element,Lt=Ke.getGrid()._settings;this._item=Ke,this._isDestroyed=!1,this._isHidden=!it,this._isHiding=!1,this._isShowing=!1,this._queue=new ir,this._finishShow=this._finishShow.bind(this),this._finishHide=this._finishHide.bind(this),Mt.style.display=it?"block":"none",At(Mt,it?Lt.itemVisibleClass:Lt.itemHiddenClass),Z(Ke._child,it?Lt.visibleStyles:Lt.hiddenStyles)}Ln.prototype.show=function(Ke,it){if(this._isDestroyed)return this;var Mt=this._item,Lt=Mt._element,Bt=this._queue,ln=X(it)?it:null,wn=Mt.getGrid(),jn=wn._settings;return!this._isShowing&&!this._isHidden?(ln&&ln(!1,Mt),this):this._isShowing&&!Ke?(ln&&Bt.add(ln),this):(this._isShowing||(Bt.flush(!0,Mt),yn(Lt,jn.itemHiddenClass),At(Lt,jn.itemVisibleClass),this._isHiding||(Lt.style.display="block")),ln&&Bt.add(ln),Mt._isActive=this._isShowing=!0,this._isHiding=this._isHidden=!1,this._startAnimation(!0,Ke,this._finishShow),this)},Ln.prototype.hide=function(Ke,it){if(this._isDestroyed)return this;var Mt=this._item,Lt=Mt._element,Bt=this._queue,ln=X(it)?it:null,wn=Mt.getGrid(),jn=wn._settings;return!this._isHiding&&this._isHidden?(ln&&ln(!1,Mt),this):this._isHiding&&!Ke?(ln&&Bt.add(ln),this):(this._isHiding||(Bt.flush(!0,Mt),At(Lt,jn.itemHiddenClass),yn(Lt,jn.itemVisibleClass)),ln&&Bt.add(ln),this._isHidden=this._isHiding=!0,Mt._isActive=this._isShowing=!1,this._startAnimation(!1,Ke,this._finishHide),this)},Ln.prototype.destroy=function(){if(this._isDestroyed)return this;var Ke=this._item,it=Ke._element,Mt=Ke.getGrid(),Lt=this._queue,Bt=Mt._settings;return this._stopAnimation({}),Lt.flush(!0,Ke).destroy(),yn(it,Bt.itemVisibleClass),yn(it,Bt.itemHiddenClass),this._item=null,this._isHiding=this._isShowing=!1,this._isDestroyed=this._isHidden=!0,this},Ln.prototype._startAnimation=function(Ke,it,Mt){if(!this._isDestroyed){var Lt=this._item,Bt=Lt.getGrid()._settings,ln=Ke?Bt.visibleStyles:Bt.hiddenStyles,wn=parseInt(Ke?Bt.showDuration:Bt.hideDuration)||0,jn=(Ke?Bt.showEasing:Bt.hideEasing)||"ease",bn=it||wn<=0,qn;if(!ln){Mt&&Mt();return}if(He(Lt._id),bn){Lt._animateChild.isAnimating()?Lt._animateChild.stop(ln):Z(Lt._child,ln),Mt&&Mt();return}ze(Lt._id,function(){qn=xn(Lt._child,ln)},function(){Lt._animateChild.start(qn,ln,{duration:wn,easing:jn,onFinish:Mt})})}},Ln.prototype._stopAnimation=function(Ke){if(!this._isDestroyed){var it=this._item;He(it._id),it._animateChild.stop(Ke)}},Ln.prototype._finishShow=function(){this._isHidden||(this._isShowing=!1,this._queue.flush(!1,this._item))};var Xn={};Ln.prototype._finishHide=function(){if(this._isHidden){var Ke=this._item;this._isHiding=!1,Xn.transform=un(0,0),Ke._layout.stop(!0,Xn),Ke._element.style.display="none",this._queue.flush(!1,Ke)}};var Un=0;function Hn(){return++Un}function Kn(Ke,it,Mt){var Lt=Ke._settings;this._id=Hn(),this._gridId=Ke._id,this._isDestroyed=!1,this._left=0,this._top=0,this._element=it,this._child=it.children[0],it.parentNode!==Ke._element&&Ke._element.appendChild(it),At(it,Lt.itemClass),typeof Mt!="boolean"&&(Mt=V(it,"display")!=="none"),this._isActive=Mt,it.style.left="0",it.style.top="0",it.style[z]=un(0,0),this._animate=new J(it),this._animateChild=new J(this._child),this._visibility=new Ln(this),this._layout=new $n(this),this._migrate=new jt(this),this._release=new fn(this),this._dragPlaceholder=new lr(this),this._drag=Lt.dragEnabled?new Pn(this):null,this._refreshDimensions(),this._refreshSortData()}Kn.prototype.getGrid=function(){return M[this._gridId]},Kn.prototype.getElement=function(){return this._element},Kn.prototype.getWidth=function(){return this._width},Kn.prototype.getHeight=function(){return this._height},Kn.prototype.getMargin=function(){return{left:this._marginLeft,right:this._marginRight,top:this._marginTop,bottom:this._marginBottom}},Kn.prototype.getPosition=function(){return{left:this._left,top:this._top}},Kn.prototype.isActive=function(){return this._isActive},Kn.prototype.isVisible=function(){return!!this._visibility&&!this._visibility._isHidden},Kn.prototype.isShowing=function(){return!!(this._visibility&&this._visibility._isShowing)},Kn.prototype.isHiding=function(){return!!(this._visibility&&this._visibility._isHiding)},Kn.prototype.isPositioning=function(){return!!(this._layout&&this._layout._isActive)},Kn.prototype.isDragging=function(){return!!(this._drag&&this._drag._isActive)},Kn.prototype.isReleasing=function(){return!!(this._release&&this._release._isActive)},Kn.prototype.isDestroyed=function(){return this._isDestroyed},Kn.prototype._refreshDimensions=function(){if(!(this._isDestroyed||this._visibility._isHidden)){var Ke=this._element,it=this._dragPlaceholder,Mt=Ke.getBoundingClientRect();this._width=Mt.width,this._height=Mt.height,this._marginLeft=Math.max(0,gt(Ke,"margin-left")),this._marginRight=Math.max(0,gt(Ke,"margin-right")),this._marginTop=Math.max(0,gt(Ke,"margin-top")),this._marginBottom=Math.max(0,gt(Ke,"margin-bottom")),it&&it.updateDimensions(this._width,this._height)}},Kn.prototype._refreshSortData=function(){if(!this._isDestroyed){var Ke=this._sortData={},it=this.getGrid()._settings.sortData,Mt;for(Mt in it)Ke[Mt]=it[Mt](this,this._element)}},Kn.prototype._destroy=function(Ke){if(!this._isDestroyed){var it=this._element,Mt=this.getGrid(),Lt=Mt._settings,Bt=Mt._items.indexOf(this);this._release.destroy(),this._migrate.destroy(),this._layout.destroy(),this._visibility.destroy(),this._animate.destroy(),this._animateChild.destroy(),this._dragPlaceholder.destroy(),this._drag&&this._drag.destroy(),it.removeAttribute("style"),this._child.removeAttribute("style"),yn(it,Lt.itemClass),Bt>-1&&Mt._items.splice(Bt,1),Ke&&it.parentNode.removeChild(it),this._isActive=!1,this._isDestroyed=!0}};function qt(){this._slots=[],this._slotSizes=[],this._freeSlots=[],this._newSlots=[],this._rectItem={},this._rectStore=[],this._rectId=0,this._layout={slots:null,setWidth:!1,setHeight:!1,width:!1,height:!1},this._sortRectsLeftTop=this._sortRectsLeftTop.bind(this),this._sortRectsTopLeft=this._sortRectsTopLeft.bind(this)}qt.prototype.getLayout=function(Ke,it,Mt,Lt,Bt){var ln=this._layout,wn=!!(Bt&&Bt.fillGaps),jn=!!(Bt&&Bt.horizontal),bn=!!(Bt&&Bt.alignRight),qn=!!(Bt&&Bt.alignBottom),or=!!(Bt&&Bt.rounding),ar=this._slotSizes,mr;if(ln.slots=Lt||this._slots,ln.width=jn?0:or?Math.round(it):it,ln.height=jn?or?Math.round(Mt):Mt:0,ln.setWidth=jn,ln.setHeight=!jn,ln.slots.length=0,ar.length=0,!Ke.length)return ln;for(mr=0;mr<Ke.length;mr++)this._addSlot(Ke[mr],jn,wn,or,bn||qn);if(bn)for(mr=0;mr<ln.slots.length;mr=mr+2)ln.slots[mr]=ln.width-(ln.slots[mr]+ar[mr]);if(qn)for(mr=1;mr<ln.slots.length;mr=mr+2)ln.slots[mr]=ln.height-(ln.slots[mr]+ar[mr]);return ar.length=0,this._freeSlots.length=0,this._newSlots.length=0,this._rectId=0,ln},qt.prototype._addSlot=function(){var Ke=.001,it={};return function(Mt,Lt,Bt,ln,wn){var jn=this._layout,bn=this._freeSlots,qn=this._newSlots,or,ar,mr,kr,Cr,Br;for(qn.length=0,it.left=null,it.top=null,it.width=Mt._width+Mt._marginLeft+Mt._marginRight,it.height=Mt._height+Mt._marginTop+Mt._marginBottom,ln&&(it.width=Math.round(it.width),it.height=Math.round(it.height)),Cr=0;Cr<bn.length;Cr++)if(ar=bn[Cr],!!ar&&(or=this._getRect(ar),it.width<=or.width+Ke&&it.height<=or.height+Ke)){it.left=or.left,it.top=or.top;break}for(it.left===null&&(it.left=Lt?jn.width:0,it.top=Lt?0:jn.height,Bt||(kr=!0)),!Lt&&it.top+it.height>jn.height&&(it.left>0&&qn.push(this._addRect(0,jn.height,it.left,1/0)),it.left+it.width<jn.width&&qn.push(this._addRect(it.left+it.width,jn.height,jn.width-it.left-it.width,1/0)),jn.height=it.top+it.height),Lt&&it.left+it.width>jn.width&&(it.top>0&&qn.push(this._addRect(jn.width,0,1/0,it.top)),it.top+it.height<jn.height&&qn.push(this._addRect(jn.width,it.top+it.height,1/0,jn.height-it.top-it.height)),jn.width=it.left+it.width),Cr=Bt?0:kr?bn.length:Cr;Cr<bn.length;Cr++)if(ar=bn[Cr],!!ar)for(or=this._getRect(ar),mr=this._splitRect(or,it),Br=0;Br<mr.length;Br++)ar=mr[Br],or=this._getRect(ar),or.width>.49&&or.height>.49&&(!Lt&&or.top<jn.height||Lt&&or.left<jn.width)&&qn.push(ar);qn.length&&this._purgeRects(qn).sort(Lt?this._sortRectsLeftTop:this._sortRectsTopLeft),Lt?jn.width=Math.max(jn.width,it.left+it.width):jn.height=Math.max(jn.height,it.top+it.height),jn.slots.push(it.left,it.top),wn&&this._slotSizes.push(it.width,it.height),this._freeSlots=qn,this._newSlots=bn}}(),qt.prototype._addRect=function(Ke,it,Mt,Lt){var Bt=++this._rectId,ln=this._rectStore;return ln[Bt]=Ke||0,ln[++this._rectId]=it||0,ln[++this._rectId]=Mt||0,ln[++this._rectId]=Lt||0,Bt},qt.prototype._getRect=function(Ke,it){var Mt=it||this._rectItem,Lt=this._rectStore;return Mt.left=Lt[Ke]||0,Mt.top=Lt[++Ke]||0,Mt.width=Lt[++Ke]||0,Mt.height=Lt[++Ke]||0,Mt},qt.prototype._splitRect=function(){var Ke=[];return function(it,Mt){return Ke.length=0,this._doRectsOverlap(it,Mt)?(it.left<Mt.left&&Ke.push(this._addRect(it.left,it.top,Mt.left-it.left,it.height)),it.left+it.width>Mt.left+Mt.width&&Ke.push(this._addRect(Mt.left+Mt.width,it.top,it.left+it.width-(Mt.left+Mt.width),it.height)),it.top<Mt.top&&Ke.push(this._addRect(it.left,it.top,it.width,Mt.top-it.top)),it.top+it.height>Mt.top+Mt.height&&Ke.push(this._addRect(it.left,Mt.top+Mt.height,it.width,it.top+it.height-(Mt.top+Mt.height))),Ke):(Ke.push(this._addRect(it.left,it.top,it.width,it.height)),Ke)}}(),qt.prototype._doRectsOverlap=function(Ke,it){return!(Ke.left+Ke.width<=it.left||it.left+it.width<=Ke.left||Ke.top+Ke.height<=it.top||it.top+it.height<=Ke.top)},qt.prototype._isRectWithinRect=function(Ke,it){return Ke.left>=it.left&&Ke.top>=it.top&&Ke.left+Ke.width<=it.left+it.width&&Ke.top+Ke.height<=it.top+it.height},qt.prototype._purgeRects=function(){var Ke={},it={};return function(Mt){for(var Lt=Mt.length,Bt;Lt--;)if(Bt=Mt.length,!!Mt[Lt]){for(this._getRect(Mt[Lt],Ke);Bt--;)if(!(!Mt[Bt]||Lt===Bt)&&this._isRectWithinRect(Ke,this._getRect(Mt[Bt],it))){Mt[Lt]=0;break}}return Mt}}(),qt.prototype._sortRectsTopLeft=function(){var Ke={},it={};return function(Mt,Lt){return this._getRect(Mt,Ke),this._getRect(Lt,it),Ke.top<it.top?-1:Ke.top>it.top?1:Ke.left<it.left?-1:Ke.left>it.left?1:0}}(),qt.prototype._sortRectsLeftTop=function(){var Ke={},it={};return function(Mt,Lt){return this._getRect(Mt,Ke),this._getRect(Lt,it),Ke.left<it.left?-1:Ke.left>it.left?1:Ke.top<it.top?-1:Ke.top>it.top?1:0}}();var On="[object HTMLCollection]",Et="[object NodeList]";function Xt(Ke){var it=Object.prototype.toString.call(Ke);return it===On||it===Et}var nn="object",An="[object Object]",Cn=Object.prototype.toString;function Rn(Ke){return typeof Ke===nn&&Cn.call(Ke)===An}function gn(Ke){return Xt(Ke)?Array.prototype.slice.call(Ke):Array.prototype.concat(Ke)}var $t=new qt,Qt=function(){},hn="number",vn="string",Fn="instant";function In(Ke,it){var Mt=this,Lt,Bt,ln;Ke=this._element=typeof Ke===vn?window.document.querySelector(Ke):Ke;var wn=Ke.getRootNode?Ke.getRootNode({composed:!0})===document:window.document.body.contains(Ke);if(!wn||Ke===window.document.documentElement)throw new Error("Container element must be an existing DOM element");Lt=this._settings=Qn(In.defaultOptions,it),X(Lt.dragSort)||(Lt.dragSort=!!Lt.dragSort),this._id=Hn(),M[this._id]=Mt,this._isDestroyed=!1,this._layout={id:0,items:[],slots:[],setWidth:!1,setHeight:!1,width:0,height:0},this._emitter=new L,At(Ke,Lt.containerClass),this._items=[],Bt=Lt.items,typeof Bt===vn?gn(Ke.children).forEach(function(jn){(Bt==="*"||ot(jn,Bt))&&Mt._items.push(new Kn(Mt,jn))}):(Array.isArray(Bt)||Xt(Bt))&&(this._items=gn(Bt).map(function(jn){return new Kn(Mt,jn)})),ln=Lt.layoutOnResize,typeof ln!==hn&&(ln=ln===!0?0:-1),ln>=0&&window.addEventListener("resize",Mt._resizeHandler=Fe(function(){Mt.refreshItems().layout()},ln)),Lt.layoutOnInit&&this.layout(!0)}In.Item=Kn,In.ItemLayout=$n,In.ItemVisibility=Ln,In.ItemMigrate=jt,In.ItemAnimate=J,In.ItemDrag=Pn,In.ItemRelease=fn,In.ItemDragPlaceholder=lr,In.Emitter=L,In.Dragger=Se,In.Packer=qt,In.defaultOptions={items:"*",showDuration:300,showEasing:"ease",hideDuration:300,hideEasing:"ease",visibleStyles:{opacity:"1",transform:"scale(1)"},hiddenStyles:{opacity:"0",transform:"scale(0.5)"},layout:{fillGaps:!1,horizontal:!1,alignRight:!1,alignBottom:!1,rounding:!0},layoutOnResize:100,layoutOnInit:!0,layoutDuration:300,layoutEasing:"ease",sortData:null,dragEnabled:!1,dragContainer:null,dragStartPredicate:{distance:0,delay:0,handle:!1},dragAxis:null,dragSort:!0,dragSortHeuristics:{sortInterval:100,minDragDistance:10,minBounceBackAngle:1},dragSortPredicate:{threshold:50,action:_},dragReleaseDuration:300,dragReleaseEasing:"ease",dragCssProps:{touchAction:"none",userSelect:"none",userDrag:"none",tapHighlightColor:"rgba(0, 0, 0, 0)",touchCallout:"none",contentZooming:"none"},dragPlaceholder:{enabled:!1,duration:300,easing:"ease",createElement:null,onCreate:null,onRemove:null},containerClass:"muuri",itemClass:"muuri-item",itemVisibleClass:"muuri-item-shown",itemHiddenClass:"muuri-item-hidden",itemPositioningClass:"muuri-item-positioning",itemDraggingClass:"muuri-item-dragging",itemReleasingClass:"muuri-item-releasing",itemPlaceholderClass:"muuri-item-placeholder"},In.prototype.on=function(Ke,it){return this._emitter.on(Ke,it),this},In.prototype.off=function(Ke,it){return this._emitter.off(Ke,it),this},In.prototype.getElement=function(){return this._element},In.prototype.getItems=function(Ke){if(this._isDestroyed||!Ke&&Ke!==0)return this._items.slice(0);var it=[],Mt=gn(Ke),Lt,Bt;for(Bt=0;Bt<Mt.length;Bt++)Lt=this._getItem(Mt[Bt]),Lt&&it.push(Lt);return it},In.prototype.refreshItems=function(Ke){if(this._isDestroyed)return this;var it=this.getItems(Ke),Mt;for(Mt=0;Mt<it.length;Mt++)it[Mt]._refreshDimensions();return this},In.prototype.refreshSortData=function(Ke){if(this._isDestroyed)return this;var it=this.getItems(Ke),Mt;for(Mt=0;Mt<it.length;Mt++)it[Mt]._refreshSortData();return this},In.prototype.synchronize=function(){if(this._isDestroyed)return this;var Ke=this._element,it=this._items,Mt,Lt,Bt;if(it.length){for(Bt=0;Bt<it.length;Bt++)Lt=it[Bt]._element,Lt.parentNode===Ke&&(Mt=Mt||window.document.createDocumentFragment(),Mt.appendChild(Lt));Mt&&Ke.appendChild(Mt)}return this._emit(m),this},In.prototype.layout=function(Ke,it){if(this._isDestroyed)return this;var Mt=this,Lt=this._element,Bt=this._updateLayout(),ln=Bt.id,wn=Bt.items.length,jn=wn,bn,qn,or;function ar(){if(!(--jn>0)){var mr=Mt._layout.id!==ln,kr=X(Ke)?Ke:it;X(kr)&&kr(mr,Bt.items.slice(0)),!mr&&Mt._hasListeners(o)&&Mt._emit(o,Bt.items.slice(0))}}if((Bt.setHeight&&typeof Bt.height===hn||Bt.setWidth&&typeof Bt.width===hn)&&(bn=V(Lt,"box-sizing")==="border-box"),Bt.setHeight&&(typeof Bt.height===hn?Lt.style.height=(bn?Bt.height+this._borderTop+this._borderBottom:Bt.height)+"px":Lt.style.height=Bt.height),Bt.setWidth&&(typeof Bt.width===hn?Lt.style.width=(bn?Bt.width+this._borderLeft+this._borderRight:Bt.width)+"px":Lt.style.width=Bt.width),this._hasListeners(f)&&this._emit(f,Bt.items.slice(0)),!wn)return ar(),this;for(or=0;or<wn;or++)qn=Bt.items[or],qn&&(qn._left=Bt.slots[or*2],qn._top=Bt.slots[or*2+1],qn.isDragging()?ar():qn._layout.start(Ke===!0,ar));return this},In.prototype.add=function(Ke,it){if(this._isDestroyed||!Ke)return[];var Mt=gn(Ke);if(!Mt.length)return Mt;var Lt=it||0,Bt=Lt.layout?Lt.layout:Lt.layout===void 0,ln=this._items,wn=!1,jn,bn;for(bn=0;bn<Mt.length;bn++)jn=new Kn(this,Mt[bn],Lt.isActive),Mt[bn]=jn,jn._isActive&&(wn=!0,jn._layout._skipNextAnimation=!0);return St(ln,Mt,Lt.index),this._hasListeners(e)&&this._emit(e,Mt.slice(0)),wn&&Bt&&this.layout(Bt===Fn,X(Bt)?Bt:void 0),Mt},In.prototype.remove=function(Ke,it){if(this._isDestroyed)return this;var Mt=it||0,Lt=Mt.layout?Mt.layout:Mt.layout===void 0,Bt=!1,ln=this.getItems(),wn=this.getItems(Ke),jn=[],bn,qn;for(qn=0;qn<wn.length;qn++)bn=wn[qn],jn.push(ln.indexOf(bn)),bn._isActive&&(Bt=!0),bn._destroy(Mt.removeElements);return this._hasListeners(i)&&this._emit(i,wn.slice(0),jn),Bt&&Lt&&this.layout(Lt===Fn,X(Lt)?Lt:void 0),wn},In.prototype.show=function(Ke,it){return this._isDestroyed?this:(this._setItemsVisibility(Ke,!0,it),this)},In.prototype.hide=function(Ke,it){return this._isDestroyed?this:(this._setItemsVisibility(Ke,!1,it),this)},In.prototype.filter=function(Ke,it){if(this._isDestroyed||!this._items.length)return this;var Mt=[],Lt=[],Bt=typeof Ke===vn,ln=X(Ke),wn=it||0,jn=wn.instant===!0,bn=wn.layout?wn.layout:wn.layout===void 0,qn=X(wn.onFinish)?wn.onFinish:null,or=-1,ar=Qt,mr,kr;if(qn&&(ar=function(){++or&&qn(Mt.slice(0),Lt.slice(0))}),ln||Bt)for(kr=0;kr<this._items.length;kr++)mr=this._items[kr],(ln?Ke(mr):ot(mr._element,Ke))?Mt.push(mr):Lt.push(mr);return Mt.length?this.show(Mt,{instant:jn,onFinish:ar,layout:!1}):ar(),Lt.length?this.hide(Lt,{instant:jn,onFinish:ar,layout:!1}):ar(),(Mt.length||Lt.length)&&(this._hasListeners(u)&&this._emit(u,Mt.slice(0),Lt.slice(0)),bn&&this.layout(bn===Fn,X(bn)?bn:void 0)),this},In.prototype.sort=function(){var Ke,it,Mt,Lt;function Bt(qn){return qn.trim().split(" ").map(function(or){return or.split(":")})}function ln(qn){for(var or={},ar=0;ar<qn.length;ar++)or[qn[ar]._id]=ar;return or}function wn(qn,or){var ar=Lt[qn._id],mr=Lt[or._id];return it?mr-ar:ar-mr}function jn(qn,or){for(var ar=0,mr,kr,Cr,Br,Wr=0;Wr<Ke.length;Wr++)if(mr=Ke[Wr][0],kr=Ke[Wr][1],Cr=(qn._sortData?qn:qn._refreshSortData())._sortData[mr],Br=(or._sortData?or:or._refreshSortData())._sortData[mr],kr==="desc"||!kr&&it?ar=Br<Cr?-1:Br>Cr?1:0:ar=Cr<Br?-1:Cr>Br?1:0,ar)return ar;return ar||(Lt||(Lt=ln(Mt)),ar=wn(qn,or)),ar}function bn(qn,or){var ar=Ke(qn,or);return it&&ar&&(ar=-ar),ar||(Lt||(Lt=ln(Mt)),wn(qn,or))}return function(qn,or){if(this._isDestroyed||this._items.length<2)return this;var ar=this._items,mr=or||0,kr=mr.layout?mr.layout:mr.layout===void 0,Cr;if(Ke=qn,it=!!mr.descending,Mt=ar.slice(0),Lt=null,X(Ke))ar.sort(bn);else if(typeof Ke===vn)Ke=Bt(qn),ar.sort(jn);else if(Array.isArray(Ke)){if(Ke.length!==ar.length)throw new Error("["+A+"] sort reference items do not match with grid items.");for(Cr=0;Cr<ar.length;Cr++){if(Ke.indexOf(ar[Cr])<0)throw new Error("["+A+"] sort reference items do not match with grid items.");ar[Cr]=Ke[Cr]}it&&ar.reverse()}else return this;return this._hasListeners(p)&&this._emit(p,ar.slice(0),Mt),kr&&this.layout(kr===Fn,X(kr)?kr:void 0),this}}(),In.prototype.move=function(Ke,it,Mt){if(this._isDestroyed||this._items.length<2)return this;var Lt=this._items,Bt=Mt||0,ln=Bt.layout?Bt.layout:Bt.layout===void 0,wn=Bt.action===l,jn=wn?l:_,bn=this._getItem(Ke),qn=this._getItem(it),or,ar;return bn&&qn&&bn!==qn&&(or=Lt.indexOf(bn),ar=Lt.indexOf(qn),wn?Ve(Lt,or,ar):Xe(Lt,or,ar),this._hasListeners(c)&&this._emit(c,{item:bn,fromIndex:or,toIndex:ar,action:jn}),ln&&this.layout(ln===Fn,X(ln)?ln:void 0)),this},In.prototype.send=function(Ke,it,Mt,Lt){if(this._isDestroyed||it._isDestroyed||this===it)return this;if(Ke=this._getItem(Ke),!Ke)return this;var Bt=Lt||0,ln=Bt.appendTo||window.document.body,wn=Bt.layoutSender?Bt.layoutSender:Bt.layoutSender===void 0,jn=Bt.layoutReceiver?Bt.layoutReceiver:Bt.layoutReceiver===void 0;return Ke._migrate.start(it,Mt,ln),Ke._migrate._isActive&&Ke._isActive&&(wn&&this.layout(wn===Fn,X(wn)?wn:void 0),jn&&it.layout(jn===Fn,X(jn)?jn:void 0)),this},In.prototype.destroy=function(Ke){if(this._isDestroyed)return this;var it=this._element,Mt=this._items.slice(0),Lt;for(this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler),Lt=0;Lt<Mt.length;Lt++)Mt[Lt]._destroy(Ke);return yn(it,this._settings.containerClass),it.style.height="",it.style.width="",this._emit(C),this._emitter.destroy(),M[this._id]=void 0,this._isDestroyed=!0,this},In.prototype._getItem=function(Ke){if(this._isDestroyed||!Ke&&Ke!==0)return null;if(typeof Ke===hn)return this._items[Ke>-1?Ke:this._items.length+Ke]||null;if(Ke instanceof Kn)return Ke._gridId===this._id?Ke:null;for(var it=0;it<this._items.length;it++)if(this._items[it]._element===Ke)return this._items[it];return null},In.prototype._updateLayout=function(){var Ke=this._layout,it=this._settings.layout,Mt,Lt,Bt,ln;for(++Ke.id,Ke.items.length=0,ln=0;ln<this._items.length;ln++)this._items[ln]._isActive&&Ke.items.push(this._items[ln]);return this._refreshDimensions(),Mt=this._width-this._borderLeft-this._borderRight,Lt=this._height-this._borderTop-this._borderBottom,X(it)?Bt=it(Ke.items,Mt,Lt):Bt=$t.getLayout(Ke.items,Mt,Lt,Ke.slots,it),Ke.slots=Bt.slots,Ke.setWidth=!!Bt.setWidth,Ke.setHeight=!!Bt.setHeight,Ke.width=Bt.width,Ke.height=Bt.height,Ke},In.prototype._emit=function(){this._isDestroyed||this._emitter.emit.apply(this._emitter,arguments)},In.prototype._hasListeners=function(Ke){var it=this._emitter._events[Ke];return!!(it&&it.length)},In.prototype._updateBoundingRect=function(){var Ke=this._element,it=Ke.getBoundingClientRect();this._width=it.width,this._height=it.height,this._left=it.left,this._top=it.top},In.prototype._updateBorders=function(Ke,it,Mt,Lt){var Bt=this._element;Ke&&(this._borderLeft=gt(Bt,"border-left-width")),it&&(this._borderRight=gt(Bt,"border-right-width")),Mt&&(this._borderTop=gt(Bt,"border-top-width")),Lt&&(this._borderBottom=gt(Bt,"border-bottom-width"))},In.prototype._refreshDimensions=function(){this._updateBoundingRect(),this._updateBorders(1,1,1,1)},In.prototype._setItemsVisibility=function(Ke,it,Mt){var Lt=this,Bt=this.getItems(Ke),ln=Mt||0,wn=ln.instant===!0,jn=ln.onFinish,bn=ln.layout?ln.layout:ln.layout===void 0,qn=Bt.length,or=it?r:s,ar=it?n:a,mr=it?"show":"hide",kr=!1,Cr=[],Br=[],Wr,fi;if(!qn){X(jn)&&jn(Bt);return}for(this._hasListeners(or)&&this._emit(or,Bt.slice(0)),fi=0;fi<Bt.length;fi++)Wr=Bt[fi],(it&&!Wr._isActive||!it&&Wr._isActive)&&(kr=!0),it&&!Wr._isActive&&(Wr._layout._skipNextAnimation=!0),it&&Wr._visibility._isHidden&&Br.push(Wr),Wr._visibility[mr](wn,function(pi,bi){pi||Cr.push(bi),--qn<1&&(X(jn)&&jn(Cr.slice(0)),Lt._hasListeners(ar)&&Lt._emit(ar,Cr.slice(0)))});Br.length&&this.refreshItems(Br),kr&&bn&&this.layout(bn===Fn,X(bn)?bn:void 0)};function Qn(Ke,it){var Mt=Wn({},Ke);return it&&(Mt=Wn(Mt,it)),Mt.visibleStyles=(it||0).visibleStyles||(Ke||0).visibleStyles,Mt.hiddenStyles=(it||0).hiddenStyles||(Ke||0).hiddenStyles,Mt}function Wn(Ke,it){var Mt=Object.keys(it),Lt=Mt.length,Bt,ln,wn;for(wn=0;wn<Lt;wn++){if(ln=Mt[wn],Bt=Rn(it[ln]),Rn(Ke[ln])&&Bt){Ke[ln]=Wn(Wn({},Ke[ln]),it[ln]);continue}if(Bt){Ke[ln]=Wn({},it[ln]);continue}if(Array.isArray(it[ln])){Ke[ln]=it[ln].slice(0);continue}Ke[ln]=it[ln]}return Ke}return In})},"./src/alternativeVizualizersWrapper.ts":function($,P,t){t.r(P),t.d(P,"AlternativeVisualizersWrapper",function(){return o});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizerBase.ts"),l=t("./src/localizationManager.ts"),_=t("./src/utils/index.ts"),m=t("./src/visualizationManager.ts"),f=t("survey-core"),o=function(e){Object(A.__extends)(i,e);function i(r,n,s,a){var u=e.call(this,n,s,a)||this;if(u.visualizers=r,u.visualizersWithSelection=[],u.onAfterVisualizerRenderCallback=function(){u.afterRender(u.contentContainer)},u.onVisualizerChanged=new f.Event,!r||r.length<2)throw new Error("VisualizerArrayWrapper works with visualizers collection only.");return u.visualizers.forEach(function(p){p.onUpdate=function(){return u.invokeOnUpdate()},p.supportSelection&&(u._supportSelection=!0,u.visualizersWithSelection.push(p))}),u.registerToolbarItem("changeVisualizer",function(){return u.visualizerSelector=_.DocumentHelper.createSelector(u.visualizers.map(function(p){return{value:p.type,text:l.localization.getString("visualizer_"+p.type)}}),function(p){return u.visualizer.type===p.value},function(p){return u.setVisualizer(p.target.value)})}),u.visualizer=r[0],u.visualizer.onAfterRender.add(u.onAfterVisualizerRenderCallback),u}return i.prototype.updateVisualizerSelector=function(){this.visualizerSelector&&(this.visualizerSelector.getElementsByTagName("select")[0].value=this.visualizer.type)},Object.defineProperty(i.prototype,"hasFooter",{get:function(){return!1},enumerable:!1,configurable:!0}),i.prototype.getVisualizers=function(){return this.visualizers},i.prototype.setVisualizer=function(r,n){n===void 0&&(n=!1);var s=this.visualizers.filter(function(a){return a.type===r})[0];s&&s!==this.visualizer&&(this.visualizer&&(this.visualizer.onAfterRender.remove(this.onAfterVisualizerRenderCallback),this.visualizer.destroy()),this.visualizer=s,this.refresh(),this.visualizer.onAfterRender.add(this.onAfterVisualizerRenderCallback),n||this.onVisualizerChanged.fire(this,{visualizer:this.visualizer}),this.updateVisualizerSelector())},i.prototype.updateData=function(r){e.prototype.updateData.call(this,r),this.visualizers.forEach(function(n){n.updateData(r)})},Object.defineProperty(i.prototype,"onDataItemSelected",{set:function(r){this.visualizersWithSelection.forEach(function(n){n.onDataItemSelected=r})},enumerable:!1,configurable:!0}),i.prototype.setSelection=function(r){this.visualizersWithSelection.forEach(function(n){n.setSelection(r)})},Object.defineProperty(i.prototype,"selection",{get:function(){return this.visualizer.selection||this.selectedItem},enumerable:!1,configurable:!0}),i.prototype.renderContent=function(r){this.visualizerContainer=r,this.visualizer.render(this.visualizerContainer)},i.prototype.setBackgroundColorCore=function(r){e.prototype.setBackgroundColorCore.call(this,r),this.visualizers.forEach(function(n){return n.backgroundColor=r})},i.prototype.getState=function(){var r=this.visualizer.getState(),n={visualizer:this.visualizer.type};return Object.keys(r).length>0&&(n.state=r),n},i.prototype.setState=function(r){r.visualizer&&this.setVisualizer(r.visualizer,!0),r.state&&this.visualizer.setState(r.state)},i.prototype.destroy=function(){var r=this;this.visualizers.forEach(function(n){n.onAfterRender.remove(r.onAfterVisualizerRenderCallback),n.onUpdate=void 0}),this.visualizer.destroy(),e.prototype.destroy.call(this)},i}(M.VisualizerBase);m.VisualizationManager.registerAltVisualizerSelector(o)},"./src/analytics-localization/arabic.ts":function($,P,t){t.r(P),t.d(P,"arabicStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:" ",ungroupButton:"   ",selectButton:"",hideColumn:" ",showColumn:"",makePrivateColumn:"  ",makePublicColumn:"  ",moveToDetail:"  ",showAsColumn:" ",filterPlaceholder:"...",removeRows:"",showLabel:"",entriesLabel:"",visualizer_text:"",visualizer_wordcloud:"",visualizer_histogram:" ",visualizer_number:"",visualizer_choices:"",visualizer_selectBase:" ",chartType_bar:"",chartType_vbar:" ",chartType_stackedbar:" ",chartType_doughnut:"Doughnut",chartType_pie:"Pie",chartType_scatter:"Scatter",chartType_gauge:"Gauge",chartType_bullet:"Bullet",hideButton:"",makePrivateButton:" ",makePublicButton:" ",showButton:"",filter:"",resetFilter:" ",changeLocale:" ",en:" ",fr:" ",ru:" ",de:" ",clearButton:"",addElement:"   ...",defaultOrder:" ",ascOrder:"",descOrder:"",showMinorColumns:"  ",otherCommentTitle:"  ",showPercentages:"  ",hidePercentages:" ",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"  png",hideEmptyAnswers:"  ",showEmptyAnswers:"  ",hideMissingAnswers:"  ",showMissingAnswers:"  ",missingAnswersLabel:" ",noVisualizerForQuestion:"   ",noResults:"   ",showPerValues:" ",showPerColumns:" ",answer:"",correctAnswer:" : ",percent:" ",responses:""};A.localization.locales.ar=M,A.localization.localeNames.ar="Arabic"},"./src/analytics-localization/dutch.ts":function($,P,t){t.r(P),t.d(P,"dutchStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Groep door mij",ungroupButton:"Degroeperen bij mij",selectButton:"Selecteer mij",hideColumn:"Kolom verbergen",showColumn:"Toon kolom",makePrivateColumn:"Kolom priv maken",makePublicColumn:"Maak de kolom openbaar",moveToDetail:"Ga naar Detail",showAsColumn:"Weergeven als kolom",filterPlaceholder:"Zoeken...",removeRows:"Verwijder rijen",showLabel:"Tonen",entriesLabel:"inzendingen",visualizer_text:"Teksten in tabel",visualizer_wordcloud:"Wordcloud",chartType_bar:"Bar",chartType_stackedbar:"Gestapelde Bar",chartType_doughnut:"Donut",chartType_pie:"Taart",chartType_scatter:"Verstrooien",chartType_gauge:"Meter",chartType_bullet:"Kogel",hideButton:"Verbergen",makePrivateButton:"Maak prive",makePublicButton:"Openbaar maken",showButton:"Tonen",resetFilter:"Filter resetten",changeLocale:"Wijzig de landinstelling",clearButton:"Doorzichtig",addElement:"Kies een vraag om weer te geven ...",defaultOrder:"Standaardvolgorde",ascOrder:"Oplopend",descOrder:"Aflopend",showMinorColumns:"Toon kleine kolommen",otherCommentTitle:"Andere items en opmerkingen",showPercentages:"Percentages weergeven",hidePercentages:"Verberg percentages",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"Download plot als een png",hideEmptyAnswers:"Verberg lege antwoorden",showEmptyAnswers:"Toon lege antwoorden","topNValueText-1":"Alle antwoorden",topNValueText5:"Top 5 antwoorden",topNValueText10:"Top 10 antwoorden",topNValueText20:"Top 20 antwoorden"};A.localization.locales.nl=M,A.localization.localeNames.nl="Dutch"},"./src/analytics-localization/english.ts":function($,P,t){t.r(P),t.d(P,"englishStrings",function(){return A});var A={groupButton:"Group By Me",ungroupButton:"Ungroup By Me",selectButton:"Select Me",hideColumn:"Hide column",showColumn:"Show column",makePrivateColumn:"Make column private",makePublicColumn:"Make column public",moveToDetail:"Move to Detail",showAsColumn:"Show as Column",filterPlaceholder:"Search...",removeRows:"Remove rows",showLabel:"Show",entriesLabel:"entries",visualizer_text:"Texts in table",visualizer_wordcloud:"Wordcloud",visualizer_histogram:"Histogram",visualizer_number:"Average",visualizer_choices:"Table",visualizer_selectBase:"Chart",chartType_bar:"Bar",chartType_vbar:"Vertical Bar",chartType_stackedbar:"Stacked Bar",chartType_doughnut:"Doughnut",chartType_pie:"Pie",chartType_scatter:"Scatter",chartType_gauge:"Gauge",chartType_bullet:"Bullet",hideButton:"Hide",makePrivateButton:"Make private",makePublicButton:"Make public",showButton:"Show",filter:"Filter",resetFilter:"Reset Filter",changeLocale:"Change Locale",en:"English",fr:"Franais",ru:"",de:"Deutsch",clearButton:"Clear",addElement:"Choose question to show...",defaultOrder:"Default Order",ascOrder:"Ascending",descOrder:"Descending",showMinorColumns:"Show minor columns",otherCommentTitle:"Other items and comments",showPercentages:"Show percentages",hidePercentages:"Hide percentages",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"Download plot as a png",hideEmptyAnswers:"Hide empty answers",showEmptyAnswers:"Show empty answers","topNValueText-1":"All answers",topNValueText5:"Top 5 answers",topNValueText10:"Top 10 answers",topNValueText20:"Top 20 answers",hideMissingAnswers:"Hide missing answers",showMissingAnswers:"Show missing answers",missingAnswersLabel:"Missing answers",noVisualizerForQuestion:"This question type is not visualized yet",noResults:"There are no results yet",showPerValues:"Per Values",showPerColumns:"Per Columns",answer:"Answer",correctAnswer:"Correct answer: ",percent:"Percent",responses:"Responses"}},"./src/analytics-localization/farsi.ts":function($,P,t){t.r(P),t.d(P,"farsiStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"  ",ungroupButton:" ",selectButton:"",hideColumn:"  ",showColumn:" ",moveToDetail:"  ",showAsColumn:"   ",visualizer_text:"  ",visualizer_wordcloud:" ",chartType_bar:" ",chartType_pie:" (pie)",chartType_scatter:"(Scatter)",chartType_gauge:" ",chartType_bullet:"Bullet",hideButton:"",resetFilter:" ",clearButton:" ",addElement:"   ..."};A.localization.locales.fa=M,A.localization.localeNames.fa="Farsi(Persian)"},"./src/analytics-localization/french.ts":function($,P,t){t.r(P),t.d(P,"frenchStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Grouper",ungroupButton:"Dissocier",selectButton:"Slectionner",hideColumn:"Masquer colonne",showColumn:"Afficher colonne",makePrivateColumn:"Rendre la colonne priv",makePublicColumn:"Rendre la colonne public",moveToDetail:"Dplacer vers dtails",showAsColumn:"Afficher en colonne",filterPlaceholder:"Rechercher...",removeRows:"Supprimer colonne",showLabel:"Afficher",entriesLabel:"entres",visualizer_text:"Textes en table",visualizer_wordcloud:"Nuages de mots",chartType_bar:"Barres",chartType_stackedbar:"Barres empiles",chartType_doughnut:"Anneau",chartType_pie:"Secteurs",chartType_scatter:"Nuages de points",chartType_gauge:"Gauge",chartType_bullet:"Bulles",filter:"Filtre",hideButton:"Masquer",saveDiagramAsPNG:"Sauver en png",makePrivateButton:"Rendre priv",makePublicButton:"Rendre publique",showButton:"Afficher",resetFilter:"Rafraichir Filtres",clearButton:"Rafraichir",addElement:"Choisir la question  afficher...",defaultOrder:"Defaut",ascOrder:"Ascendant",descOrder:"Descendant",showMinorColumns:"Afficher les colonnes mineures",otherCommentTitle:"Autre lment et commentaires",noVisualizerForQuestion:"Ce type de question n'est pas encore visualis",noResults:"Il n'y a pas encore de rsultats",showPerValues:"Par valeur",showPerColumns:"Par colonne",answer:"Rponse",correctAnswer:"Rponse correcte: ",percent:"Pourcentage",responses:"Rponses"};A.localization.locales.fr=M,A.localization.localeNames.fr="French"},"./src/analytics-localization/german.ts":function($,P,t){t.r(P),t.d(P,"germanStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Gruppieren",ungroupButton:"Gruppierung aufheben",selectButton:"Mich auswhlen",hideColumn:"Spalte ausblenden",showColumn:"Spalte einblenden",makePrivateColumn:"Spalte privat machen",makePublicColumn:"Spalte verffentlichen",moveToDetail:"in Details verschieben",showAsColumn:"Als Spalte anzeigen",filterPlaceholder:"Suche...",removeRows:"Zeilen entfernen",showLabel:"anzeigen",entriesLabel:"Eintrge",visualizer_text:"Texte in Tabellenform",visualizer_wordcloud:"Wordcloud",chartType_bar:"Balkendiagramm",chartType_stackedbar:"Gestapeltes Balkendiagramm",chartType_doughnut:"Donut-Diagramm",chartType_pie:"Kreisdiagramm",chartType_scatter:"Punktediagramm",chartType_gauge:"Pegeldiagramm",chartType_bullet:"Aufzhlungsdiagramm",hideButton:"Ausblenden",makePrivateButton:"Privat machen",makePublicButton:"ffentlich machen",showButton:"Anzeigen",filter:"Filter",resetFilter:"Filter zurcksetzen",changeLocale:"Lokalisierung ndern",clearButton:"Einstellungen lschen",addElement:"Whlen Sie eine Frage, um zu zeigen...",defaultOrder:"Standardreihenfolge",ascOrder:"Aufsteigend",descOrder:"Absteigend",showMinorColumns:"Kleinere Spalten anzeigen",otherCommentTitle:"Andere Punkte und Kommentare",showPercentages:"Prozentstze anzeigen",hidePercentages:"Prozentstze ausblenden",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"Diagramm als png herunterladen",hideEmptyAnswers:"Leere Antworten ausblenden",showEmptyAnswers:"Leere Antworten anzeigen","topNValueText-1":"Alle Antworten",topNValueText5:"Top 5 Antworten",topNValueText10:"Top 10 Antworten",topNValueText20:"Top 20 Antworten",noVisualizerForQuestion:"Fr diesen Fragetyp gibt es noch keine Visualisierung.",noResults:"Es liegen noch keine Ergebnisse vor"};A.localization.locales.de=M,A.localization.localeNames.de="German"},"./src/analytics-localization/italian.ts":function($,P,t){t.r(P),t.d(P,"italianStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Raggruppa",ungroupButton:"Dividi",selectButton:"Selezionami",hideColumn:"Nascondi colonna",showColumn:"Mostra colonna",makePrivateColumn:"Rendi la colonna privata",makePublicColumn:"Rendi la colonna pubblica",moveToDetail:"Sposta in Dettaglio",showAsColumn:"Mostra come Colonna",filterPlaceholder:"Cerca...",removeRows:"Rimuovi righe",showLabel:"Mostra",entriesLabel:"voci",visualizer_text:"Parole in tabella",visualizer_wordcloud:"Nuvola di parole",visualizer_histogram:"Istogramma",visualizer_number:"Media",visualizer_choices:"Tabella",visualizer_selectBase:"Grafico",chartType_bar:"Grafico a barre",chartType_vbar:"Grafico a barre verticali",chartType_stackedbar:"Grafico a barre sovrapposte",chartType_doughnut:"Grafico a ciambella",chartType_pie:"Grafico a torta",chartType_scatter:"Grafico a dispersione",chartType_gauge:"Grafico Gauge",chartType_bullet:"Punto",hideButton:"Nascondi",makePrivateButton:"Rendi privato",makePublicButton:"Rendi pubblico",showButton:"Mostra",filter:"Filtro",resetFilter:"Cancella filtro",changeLocale:"Cambia lingua",en:"Inglese",fr:"Francese",ru:"Russo",de:"Tedesco",clearButton:"Cancella",addElement:"Scegli la domanda da mostrare...",defaultOrder:"Ordine di Default",ascOrder:"Ascendente",descOrder:"Discendente",showMinorColumns:"Mostra colonne secondarie",otherCommentTitle:"Altri punti e commenti",showPercentages:"Mostra percentuali",hidePercentages:"Nascondi percentuali",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"Scarica il grafico in formato png",hideEmptyAnswers:"Nascondi risposte vuote",showEmptyAnswers:"Mostra risposte vuote","topNValueText-1":"Tutte le risposte",topNValueText5:"Top 5 risposte",topNValueText10:"Top 10 risposte",topNValueText20:"Top 20 risposte",hideMissingAnswers:"Nascondi le risposte mancanti",showMissingAnswers:"Mostra le risposte mancanti",missingAnswersLabel:"Risposte mancanti",noVisualizerForQuestion:"Questo tipo di domanda non  ancora stato visualizzato",noResults:"Non ci sono ancora risultati",showPerValues:"Per Valori",showPerColumns:"Per Colonne",answer:"Risposta",percent:"Percentuale",responses:"Risposte"};A.localization.locales.it=M,A.localization.localeNames.it="Italian"},"./src/analytics-localization/norwegian.ts":function($,P,t){t.r(P),t.d(P,"norwegianStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Grupper",ungroupButton:"Opphev gruppering",selectButton:"Velg",hideColumn:"Skjul kolonne",showColumn:"Vis kolonne",makePrivateColumn:"Gjr kolonne privat",makePublicColumn:"Gjr kolonne offentlig",moveToDetail:"Flytt til detaljert visning",showAsColumn:"Vis som kolonne",filterPlaceholder:"Sk...",removeRows:"Fjern rader",showLabel:"Vis",entriesLabel:"oppfringer",visualizer_text:"Tabellvisning",visualizer_wordcloud:"Ordsky",chartType_bar:"Stolpediagram",chartType_stackedbar:"Stablet stolpediagram",chartType_doughnut:"Hjuldiagram",chartType_pie:"Sektordiagram",chartType_scatter:"Punktdiagram",chartType_gauge:"Mlediagram",chartType_bullet:"Kulediagram",hideButton:"Skjul",makePrivateButton:"Gjr privat",makePublicButton:"Gjr offentlig",showButton:"Vis",resetFilter:"Nullstill filter",changeLocale:"Bytt sprk",clearButton:"Tm",addElement:"Velg sprsml...",defaultOrder:"Standard",ascOrder:"Stigende",descOrder:"Synkende",showMinorColumns:"Vis mindre kolonner",otherCommentTitle:"Annet og kommentarer",showPercentages:"Vis prosenter",hidePercentages:"Skjul prosenter"};A.localization.locales.no=M,A.localization.localeNames.no="Norwegian"},"./src/analytics-localization/portuguese.ts":function($,P,t){t.r(P),t.d(P,"portugueseStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Agrupar Por Mim",ungroupButton:"Desagrupar Por Mim",selectButton:"Selecionar",hideColumn:"Esconder coluna",showColumn:"Mostrar coluna",makePrivateColumn:"Tornar coluna privada",makePublicColumn:"Tornar coluna pblica",moveToDetail:"Mover para Detalhes",showAsColumn:"Mostrar como Coluna",filterPlaceholder:"Pesquisar...",removeRows:"Remover linhas",showLabel:"Mostrar",entriesLabel:"entradas",visualizer_text:"Textos em tabela",visualizer_wordcloud:"Nuvem de palavras",visualizer_histogram:"Histograma",visualizer_number:"Mdia",visualizer_choices:"Tabela",visualizer_selectBase:"Grfico",chartType_bar:"Barra",chartType_vbar:"Barra vertical",chartType_stackedbar:"Barra Empilhada",chartType_doughnut:"Rosca",chartType_pie:"Tarte",chartType_scatter:"Lastro",chartType_gauge:"Escala",chartType_bullet:"Bala",hideButton:"Esconder",makePrivateButton:"Tornar privado",makePublicButton:"Tornar pblico",showButton:"Mostrar",filter:"Filtrar",resetFilter:"Restaurar Filtro",changeLocale:"Mudar Localizao",en:"Ingls",fr:"Francs",ru:"Russo",de:"Alemo",clearButton:"Limpar",addElement:"Escolher questo para mostrar...",defaultOrder:"Ordenao Padro",ascOrder:"Ascendente",descOrder:"Descendente",showMinorColumns:"Mostrar colunas menores",otherCommentTitle:"Outros itens e comentrios",showPercentages:"Mostrar percentuais",hidePercentages:"Esconder percentuais",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"Baixar diagrama como PNG",hideEmptyAnswers:"Esconder perguntas vazias",showEmptyAnswers:"Mostrar perguntas vazias","topNValueText-1":"Todas as respostas",topNValueText5:"Primeiras 5 respostas",topNValueText10:"Primeiras 10 respostas",topNValueText20:"Primeiras 20 respostas",hideMissingAnswers:"Ocultar perguntas no respondidas",showMissingAnswers:"Mostrar perguntas no respondidas",missingAnswersLabel:"Perguntas no respondidas",noVisualizerForQuestion:"Este tipo de pergunta ainda no foi visualizada",noResults:"Ainda no possui resultados",showPerValues:"Por valores",showPerColumns:"Por colunas",answer:"Resposta",correctAnswer:"Resposta correta: ",percent:"Percentagem",responses:"Respostas"};A.localization.locales.pt=M,A.localization.localeNames.pt="Portugus"},"./src/analytics-localization/russian.ts":function($,P,t){t.r(P),t.d(P,"russianStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={groupButton:"Group By Me",ungroupButton:"Ungroup By Me",selectButton:"Select Me",hideColumn:"Hide column",showColumn:"Show column",makePrivateColumn:"Make column private",makePublicColumn:"Make column public",moveToDetail:"Move to Detail",filter:"",showAsColumn:"Show as Column",visualizer_text:"Texts in table",visualizer_wordcloud:"Wordcloud",chartType_bar:"Bar",chartType_stackedbar:"Stacked Bar",chartType_doughnut:"Doughnut",chartType_pie:"Pie",chartType_scatter:"Scatter",chartType_gauge:"Gauge",chartType_bullet:"Bullet",hideButton:"",showButton:"",resetFilter:" ",changeLocale:" ",clearButton:"Clear",addElement:"Choose question to show...",defaultOrder:"Default",ascOrder:"Ascending",descOrder:"Descending",showMinorColumns:"Show minor columns",otherCommentTitle:"  ",noVisualizerForQuestion:"      ",noResults:" "};A.localization.locales.ru=M,A.localization.localeNames.ru="Russian"},"./src/analytics-localization/spanish.ts":function($,P,t){t.r(P),t.d(P,"spanishStrings",function(){return M});var A=t("./src/localizationManager.ts"),M={ungroupButton:"Desagrupar por m",selectButton:"Seleccionarme",hideColumn:"Ocultar columna",showColumn:"Mostrar columna",makePrivateColumn:"Hacer que la columna sea privada",makePublicColumn:"Hacer pblica la columna",moveToDetail:"Mover al detalle",showAsColumn:"Mostrar como columna",filterPlaceholder:"Buscar ...",removeRows:"Eliminar filas",showLabel:"Mostrar",entryLabel:"entradas",visualizer_text:"Textos en tabla",visualizer_wordcloud:"Wordcloud",chartType_bar:"Bar",chartType_stackedbar:"Barra apilada",chartType_doughnut:"Donut",chartType_pie:"Pie",chartType_scatter:"Dispersin",chartType_gauge:"Gauge",chartType_bullet:"Bullet",hideButton:"Ocultar",makePrivateButton:"Hacer privado",makePublicButton:"Hacer pblico",showButton:"Mostrar",filter:"Filtro",resetFilter:"Restablecer filtro",changeLocale:"Cambiar configuracin regional",clearButton:"Borrar",addElement:"Elija la pregunta para mostrar ...",defaultOrder:"Orden predeterminado",ascOrder:"Ascendente",descOrder:"Descendente",showMinorColumns:"Mostrar columnas secundarias",otherCommentTitle:"Otros elementos y comentarios",showPercentages:"Mostrar porcentajes",hidePercentages:"Ocultar porcentajes",pdfDownloadCaption:"PDF",xlsxDownloadCaption:"Excel",csvDownloadCaption:"CSV",saveDiagramAsPNG:"Descargar el grfico como png",hideEmptyAnswers:"Ocultar respuestas vacas",showEmptyAnswers:"Mostrar respuestas vacas","topNValueText-1":"Todas las respuestas",topNValueText5:"Las 5 respuestas principales",topNValueText10:"Las 10 respuestas principales",topNValueText20:"20 respuestas principales",noVisualizerForQuestion:"Este tipo de pregunta an no se visualiza",noResults:"An no hay resultados"};A.localization.locales.es=M,A.localization.localeNames.es="Spanish"},"./src/boolean.ts":function($,P,t){t.r(P),t.d(P,"BooleanModel",function(){return m});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/selectBase.ts"),_=t("./src/localizationManager.ts"),m=function(f){Object(A.__extends)(o,f);function o(e,i,r,n){return f.call(this,e,i,r,n||"boolean")||this}return o.prototype.getCorrectAnswerText=function(){var e=this.booleanQuestion.correctAnswer;return this.booleanQuestion.valueTrue!==void 0&&this.booleanQuestion.valueTrue===e||e?this.booleanQuestion.locLabelTrue.textOrHtml:this.booleanQuestion.valueFalse!==void 0&&this.booleanQuestion.valueFalse===e||!e?this.booleanQuestion.locLabelFalse.textOrHtml:e},Object.defineProperty(o.prototype,"booleanQuestion",{get:function(){return this.question},enumerable:!1,configurable:!0}),o.prototype.getSelectedItemByText=function(e){var i=this.getLabels(),r=this.getValues();return new M.ItemValue(r[i.indexOf(e)],e)},o.prototype.getValues=function(){var e=[this.booleanQuestion.valueTrue!==void 0?this.booleanQuestion.valueTrue:!0,this.booleanQuestion.valueFalse!==void 0?this.booleanQuestion.valueFalse:!1];return this.showMissingAnswers&&e.push(void 0),e},o.prototype.getLabels=function(){var e=[].concat(this.getValues());return this.booleanQuestion.labelTrue!==void 0&&(e[0]=this.booleanQuestion.locLabelTrue.textOrHtml),this.booleanQuestion.labelFalse!==void 0&&(e[1]=this.booleanQuestion.locLabelFalse.textOrHtml),this.showMissingAnswers&&(e[2]=_.localization.getString("missingAnswersLabel")),e},o.trueColor="",o.falseColor="",o}(l.SelectBase)},"./src/choices-table.scss":function($,P,t){},"./src/choices-table.ts":function($,P,t){t.r(P),t.d(P,"ChoicesTableAdapter",function(){return m}),t.d(P,"ChoicesTable",function(){return f});var A=t("./src/utils/helpers.ts"),M=t("./src/selectBase.ts"),l=t("./src/localizationManager.ts"),_=t("./src/utils/index.ts");t("./src/choices-table.scss");var m=function(){function o(e){this.model=e}return o.prototype.create=function(e){var i=this,r=this.model.getAnswersData(),n=r.datasets,s=r.labels;r.colors;var a=r.texts,u=r.seriesLabels;u.length>1;var p=_.DocumentHelper.createElement("p","",{innerText:l.localization.getString("noResults")});if(n.length===0||n[0].length===0){e.appendChild(p);return}n.forEach(function(c,x){var g=_.DocumentHelper.createElement("table","sa-choices-table");g.style.backgroundColor=i.model.backgroundColor,e.appendChild(g);var h=_.DocumentHelper.createElement("tr"),b=_.DocumentHelper.createElement("th","sa-choices-table__cell-header",{textContent:l.localization.getString("answer")});h.appendChild(b);var v=_.DocumentHelper.createElement("th","sa-choices-table__cell-header",{textContent:""});h.appendChild(v);var y=_.DocumentHelper.createElement("th","sa-choices-table__cell-header",{textContent:l.localization.getString("percent")});h.appendChild(y);var w=_.DocumentHelper.createElement("th","sa-choices-table__cell-header",{textContent:l.localization.getString("responses")});h.appendChild(w),g.appendChild(h),c.forEach(function(d,S){var T=_.DocumentHelper.createElement("tr"),E=_.DocumentHelper.createElement("td","sa-choices-table__cell",{textContent:s[S]});T.appendChild(E);var C=_.DocumentHelper.createElement("td","sa-choices-table__cell"),L=_.DocumentHelper.createElement("div","sa-choices-sparkline"),O=_.DocumentHelper.createElement("div","sa-choices-sparkline-value");O.style.width=a[x][S]+"%",L.appendChild(O),C.appendChild(L),T.appendChild(C);var z=_.DocumentHelper.createElement("td","sa-choices-table__cell sa-choices-table__cell-value",{textContent:""+a[x][S]+"%"});T.appendChild(z);var G=_.DocumentHelper.createElement("td","sa-choices-table__cell sa-choices-table__cell-value",{textContent:d});T.appendChild(G),g.appendChild(T)}),e.className="sa-choices-table__container",e.appendChild(g)})},o.prototype.destroy=function(e){e.innerHTML=""},o}(),f=function(o){Object(A.__extends)(e,o);function e(i,r,n,s){var a=o.call(this,i,r,n,s||"choices")||this;return a._choicesTableAdapter=new m(a),a.answersOrder="asc",a.showPercentages=!0,a}return e.prototype.destroyContent=function(i){this._choicesTableAdapter.destroy(i),o.prototype.destroyContent.call(this,i)},e.prototype.renderContent=function(i){this._choicesTableAdapter.create(i),this.afterRender(this.contentContainer)},e.prototype.destroy=function(){this._choicesTableAdapter.destroy(this.contentContainer),o.prototype.destroy.call(this)},e}(M.SelectBase)},"./src/dataProvider.ts":function($,P,t){t.r(P),t.d(P,"DataProvider",function(){return M});var A=t("survey-core"),M=function(){function _(m,f){m===void 0&&(m=[]),f===void 0&&(f=void 0),this._data=m,this._getDataCore=f,this.filterValues={},this.onDataChanged=new A.Event}return _.prototype.getStatisticsCacheKey=function(m){return Array.isArray(m.name)?m.name.join("-"):m.name},_.prototype.reset=function(m){if(m){if(this._statisticsCache!==void 0){var f=this.getStatisticsCacheKey(m);delete this._statisticsCache[f]}return}(this._statisticsCache!==void 0||this._filteredData!==void 0)&&(this._statisticsCache=void 0,this._filteredData=void 0,this.raiseDataChanged())},Object.defineProperty(_.prototype,"data",{get:function(){return this._data},set:function(m){this._data=[].concat(m),this.reset()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"filteredData",{get:function(){var m=this;if(this._filteredData===void 0){var f=Object.keys(this.filterValues);f.length>0?this._filteredData=this.data.filter(function(o){return!Object.keys(m.filterValues).some(function(e){var i=m.filterValues[e],r=typeof i,n=o[e];if(Array.isArray(n)&&r!=="object")return n.indexOf(i)==-1;if(typeof n=="object")return r!=="object"?!0:!l(n,i);var s=o[_.seriesMarkerKey];if(s&&r==="object")return n!==i[s];if(r==="object"&&i.start!==void 0&&i.end!==void 0){var a=typeof n=="number"?n:Date.parse(n);return isNaN(a)&&(a=parseFloat(n),isNaN(a))?!0:a<i.start||a>=i.end}return o[e]!==m.filterValues[e]})}):this._filteredData=this.data}return this._filteredData},enumerable:!1,configurable:!0}),_.prototype.setFilter=function(m,f){var o=!0;f!==void 0?(o=this.filterValues[m]!==f,this.filterValues[m]=f):(o=this.filterValues[m]!==void 0,delete this.filterValues[m]),o&&this.reset()},_.prototype.getDataCore=function(m){if(this._getDataCore)return this._getDataCore(m);var f=Array.isArray(m.name)?m.name:[m.name],o=[],e=m.getValues(),i={};e.forEach(function(x,g){i[x]=g});var r=e.indexOf(void 0)!==-1,n=m.getSeriesValues(),s={};n.forEach(function(x,g){s[x]=g});for(var a=n.length||1,u=0;u<f.length;++u){for(var p=new Array,c=0;c<a;++c)p.push(new Array(e.length).fill(0));o.push(p)}return this.filteredData.forEach(function(x){f.forEach(function(g,h){var b=x[g];if(b!==void 0||r){var v=Array.isArray(b)?b:[b];if(n.length>0)if(x[_.seriesMarkerKey]!==void 0){var y=s[x[_.seriesMarkerKey]]||0;v.forEach(function(w){o[h][y][i[w]]++})}else v.forEach(function(w){n.forEach(function(d){if(w[d]!==void 0){var S=s[d]||0;o[h][S][i[w[d]]]++}})});else v.forEach(function(w){return o[0][0][i[w]]++})}})}),Array.isArray(m.name)?o:o[0]},_.prototype.getData=function(m){var f=this.getStatisticsCacheKey(m);return(this._statisticsCache===void 0||this._statisticsCache[f]===void 0)&&(this._statisticsCache===void 0&&(this._statisticsCache={}),this._statisticsCache[f]=this.getDataCore(m)),[].concat(this._statisticsCache[f])},_.prototype.raiseDataChanged=function(){this.onDataChanged.isEmpty||this.onDataChanged.fire(this,{})},_.seriesMarkerKey="__sa_series_name",_}();function l(_,m){var f=Object.keys(_),o=Object.keys(m);if(o.length>f.length)return!1;for(var e=0,i=o;e<i.length;e++){var r=i[e];if(m[r]!=_[r])return!1}return!0}},"./src/entries/summary.ts":function($,P,t){t.r(P);var A=t("./src/localizationManager.ts");t.d(P,"localization",function(){return A.localization}),t.d(P,"surveyStrings",function(){return A.surveyStrings}),t("./src/analytics-localization/farsi.ts"),t("./src/analytics-localization/french.ts"),t("./src/analytics-localization/german.ts"),t("./src/analytics-localization/norwegian.ts"),t("./src/analytics-localization/portuguese.ts"),t("./src/analytics-localization/russian.ts"),t("./src/analytics-localization/dutch.ts"),t("./src/analytics-localization/spanish.ts"),t("./src/analytics-localization/italian.ts"),t("./src/analytics-localization/arabic.ts");var M=t("./src/dataProvider.ts");t.d(P,"DataProvider",function(){return M.DataProvider});var l=t("./src/visualizerFactory.ts");t.d(P,"VisualizerFactory",function(){return l.VisualizerFactory});var _=t("./src/number.ts");t.d(P,"NumberModel",function(){return _.NumberModel});var m=t("./src/selectBase.ts");t.d(P,"SelectBase",function(){return m.SelectBase});var f=t("./src/matrix.ts");t.d(P,"Matrix",function(){return f.Matrix});var o=t("./src/boolean.ts");t.d(P,"BooleanModel",function(){return o.BooleanModel});var e=t("./src/histogram.ts");t.d(P,"HistogramModel",function(){return e.HistogramModel});var i=t("./src/visualizerBase.ts");t.d(P,"VisualizerBase",function(){return i.VisualizerBase});var r=t("./src/visualizationManager.ts");t.d(P,"VisualizationManager",function(){return r.VisualizationManager});var n=t("./src/visualizationPanel.ts");t.d(P,"VisualizationPanel",function(){return n.VisualizationPanel});var s=t("./src/visualizationPanelDynamic.ts");t.d(P,"VisualizationPanelDynamic",function(){return s.VisualizationPanelDynamic});var a=t("./src/visualizationMatrixDynamic.ts");t.d(P,"VisualizationMatrixDynamic",function(){return a.VisualizationMatrixDynamic});var u=t("./src/visualizationMatrixDropdown.ts");t.d(P,"VisualizationMatrixDropdown",function(){return u.VisualizationMatrixDropdown});var p=t("./src/alternativeVizualizersWrapper.ts");t.d(P,"AlternativeVisualizersWrapper",function(){return p.AlternativeVisualizersWrapper});var c=t("./src/plotly/index.ts");t.d(P,"PlotlySetup",function(){return c.PlotlySetup}),t.d(P,"PlotlyChartAdapter",function(){return c.PlotlyChartAdapter}),t.d(P,"SelectBasePlotly",function(){return c.SelectBasePlotly}),t.d(P,"MatrixPlotly",function(){return c.MatrixPlotly}),t.d(P,"PlotlyBoolChartAdapter",function(){return c.PlotlyBoolChartAdapter}),t.d(P,"BooleanPlotly",function(){return c.BooleanPlotly}),t.d(P,"RankingPlotly",function(){return c.RankingPlotly}),t.d(P,"MatrixDropdownGroupedPlotly",function(){return c.MatrixDropdownGroupedPlotly}),t.d(P,"HistogramPlotly",function(){return c.HistogramPlotly}),t.d(P,"PlotlyGaugeAdapter",function(){return c.PlotlyGaugeAdapter}),t.d(P,"GaugePlotly",function(){return c.GaugePlotly});var x=t("./src/wordcloud/wordcloud.ts");t.d(P,"WordCloudAdapter",function(){return x.WordCloudAdapter}),t.d(P,"WordCloud",function(){return x.WordCloud});var g=t("./src/wordcloud/stopwords/index.ts");t.d(P,"textHelper",function(){return g.textHelper});var h=t("./src/text.ts");t.d(P,"TextTableAdapter",function(){return h.TextTableAdapter}),t.d(P,"Text",function(){return h.Text});var b=t("./src/choices-table.ts");t.d(P,"ChoicesTableAdapter",function(){return b.ChoicesTableAdapter}),t.d(P,"ChoicesTable",function(){return b.ChoicesTable});var v=t("./src/utils/index.ts");t.d(P,"DocumentHelper",function(){return v.DocumentHelper})},"./src/filterInfo.ts":function($,P,t){t.r(P),t.d(P,"FilterInfo",function(){return l});var A=t("./src/utils/index.ts"),M=t("./src/localizationManager.ts"),l=function(){function _(m){this._htmlElement=void 0,this.text=void 0,this._htmlElement=A.DocumentHelper.createElement("div","sa-question__filter"),this.text=A.DocumentHelper.createElement("span","sa-question__filter-text"),this._htmlElement.appendChild(this.text);var f=A.DocumentHelper.createButton(function(){m.setSelection(void 0)},M.localization.getString("clearButton"));this._htmlElement.appendChild(f)}return Object.defineProperty(_.prototype,"htmlElement",{get:function(){return this._htmlElement},enumerable:!1,configurable:!0}),_.prototype.update=function(m){m!==void 0&&m.value!==void 0?(this._htmlElement.style.display="inline-block",this.text.innerText=M.localization.getString("filter")+": ["+m.text+"]"):(this._htmlElement.style.display="none",this.text.innerText="")},_}()},"./src/histogram.ts":function($,P,t){t.r(P),t.d(P,"HistogramModel",function(){return m});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/dataProvider.ts"),_=t("./src/selectBase.ts"),m=function(f){Object(A.__extends)(o,f);function o(e,i,r,n){var s=f.call(this,e,i,r,n||"histogram")||this;s.valueType="number",s._cachedValues=void 0,s._continiousData=void 0,s._cachedIntervals=void 0,s._intervalPrecision=2,s.options.intervalPrecision!==void 0&&(s._intervalPrecision=s.options.intervalPrecision);var a=e.getType();return a==="text"&&(e.inputType==="date"||e.inputType==="datetime")?s.valueType="date":s.valueType="number",s}return o.prototype.reset=function(){this._continiousData=void 0,this._cachedValues=void 0,this._cachedIntervals=void 0},o.prototype.getContiniousValue=function(e){return this.valueType==="date"?Date.parse(e):parseFloat(e)},o.prototype.getString=function(e){return this.valueType==="date"?new Date(e).toLocaleDateString():""+e},o.prototype.toPrecision=function(e){var i=Math.pow(10,this._intervalPrecision);return Math.round(i*e)/i},o.prototype.getSelectedItemByText=function(e){if(this.hasCustomIntervals||this.getContiniousValues().length>o.UseIntervalsFrom){var i=this.intervals.filter(function(s){return s.label===e})[0];return new M.ItemValue(i,i!==void 0?i.label:"")}var r=this.getLabels(),n=r.indexOf(e);return new M.ItemValue(this.getValues()[n],r[n])},o.prototype.updateData=function(e){this.reset(),f.prototype.updateData.call(this,e)},o.prototype.onDataChanged=function(){this.reset(),f.prototype.onDataChanged.call(this)},o.prototype.getContiniousValues=function(){var e=this;if(this._cachedValues===void 0){var i=this.getSeriesValues();i.length===0&&i.push(""),this._continiousData={},i.forEach(function(n){return e._continiousData[n]=[]});var r={};this.data.forEach(function(n){var s=n[e.name];if(s!==void 0){var a=n[l.DataProvider.seriesMarkerKey]||"";e._continiousData[a].push(e.getContiniousValue(s)),r[s]=s}}),this._cachedValues=Object.keys(r).map(function(n){return{original:r[n],continious:e.getContiniousValue(n)}}),this._cachedValues.sort(function(n,s){return n.continious-s.continious})}return this._cachedValues},o.prototype.isSupportMissingAnswers=function(){return!1},Object.defineProperty(o.prototype,"needUseRateValues",{get:function(){return this.question.getType()=="rating"&&Array.isArray(this.question.rateValues)&&this.question.rateValues.length>0},enumerable:!1,configurable:!0}),o.prototype.getValues=function(){var e=this.getContiniousValues();return this.hasCustomIntervals||e.length>o.UseIntervalsFrom||this.needUseRateValues?this.intervals.map(function(i){return i.start}):e.map(function(i){return i.original})},o.prototype.getLabels=function(){var e=this.getContiniousValues();return this.hasCustomIntervals||e.length>o.UseIntervalsFrom||this.needUseRateValues?this.intervals.map(function(i){return i.label}):e.map(function(i){return""+i.original})},Object.defineProperty(o.prototype,"hasCustomIntervals",{get:function(){return!!this.questionOptions&&Array.isArray(this.questionOptions.intervals)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"intervals",{get:function(){if(this.hasCustomIntervals)return this.questionOptions.intervals.reverse();if(this.needUseRateValues){var e=this.question.rateValues;return e.map(function(g,h){return{start:g.value,end:h<e.length-1?e[h+1].value:g.value+1,label:g.text}}).reverse()}if(this._cachedIntervals===void 0){var i=this.getContiniousValues();if(this._cachedIntervals=[],i.length)for(var r=i[0].continious,n=i[i.length-1].continious,s=o.IntervalsCount,a=(n-r)/s,u=0;u<s;++u){var p=r+a,c=this.toPrecision(r),x=this.toPrecision(p);this._cachedIntervals.push({start:c,end:x,label:""+this.getString(c)+"-"+this.getString(x)}),r=p}}return this._cachedIntervals},enumerable:!1,configurable:!0}),o.prototype.getData=function(){var e=this.getContiniousValues();if(!this.hasCustomIntervals&&e.length<=o.UseIntervalsFrom)return f.prototype.getData.call(this);var i=this.intervals,r=[],n=this.getSeriesValues();n.length===0&&n.push("");for(var s=0;s<n.length;++s)r.push(i.map(function(a){return 0})),this._continiousData[n[s]].forEach(function(a){for(var u=0;u<i.length;++u)if(i[u].start<=a&&(a<i[u].end||u==i.length-1)){r[s][u]++;break}});return r},o.IntervalsCount=10,o.UseIntervalsFrom=10,o}(_.SelectBase)},"./src/layoutEngine.ts":function($,P,t){t.r(P),t.d(P,"LayoutEngine",function(){return l}),t.d(P,"MuuriLayoutEngine",function(){return _});var A=t("./src/utils/helpers.ts"),M=t("./node_modules/muuri/dist/muuri.js"),l=function(){function m(f){this._allowed=f}return m.prototype.startCore=function(f){},m.prototype.stopCore=function(){},m.prototype.updateCore=function(){},Object.defineProperty(m.prototype,"allowed",{get:function(){return this._allowed},enumerable:!1,configurable:!0}),m.prototype.start=function(f){this._allowed&&this.startCore(f)},m.prototype.stop=function(){this._allowed&&this.stopCore()},m.prototype.update=function(){this._allowed&&this.updateCore()},m.prototype.add=function(f,o){},m.prototype.remove=function(f,o){},m.prototype.destroy=function(){this.stop()},m}(),_=function(m){Object(A.__extends)(f,m);function f(o,e){var i=m.call(this,o)||this;return i._selector=e,i._muuri=void 0,i._layoutingTimer=void 0,i}return f.prototype.startCore=function(o){var e=this;this._muuri=new M(o,{dragStartPredicate:{handle:".sa-question__title--draggable"},items:this._selector,dragEnabled:!0}),this._muuri.on("dragReleaseEnd",function(i){return e.onMoveCallback&&e.onMoveCallback(i.fromIndex,i.toIndex)})},f.prototype.stopCore=function(){this._muuri.off("dragReleaseEnd"),this._muuri.destroy(),this._muuri=void 0},f.prototype.updateCore=function(){var o=this;this._layoutingTimer!==void 0&&clearTimeout(this._layoutingTimer),this._layoutingTimer=setTimeout(function(){o._layoutingTimer=void 0,o._muuri.refreshItems(),o._muuri.layout()},10)},f.prototype.add=function(o,e){this._allowed&&this._muuri.add(o,e)},f.prototype.remove=function(o,e){this._allowed&&this._muuri.remove(o,e)},f}(l)},"./src/localizationManager.ts":function($,P,t){t.r(P),t.d(P,"localization",function(){return M}),t.d(P,"surveyStrings",function(){return l});var A=t("./src/analytics-localization/english.ts"),M={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},supportedLocales:[],get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(_){this.currentLocaleValue=_},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(_){this.defaultLocaleValue=_},getString:function(_){var m=this.currentLocale?this.locales[this.currentLocale]:this.locales[this.defaultLocale];(!m||!m[_])&&(m=this.locales[this.defaultLocale]);var f=m[_];return f===void 0&&(f=this.locales.en[_]||_),f},getLocales:function(){var _=[];if(_.push(""),this.supportedLocales&&this.supportedLocales.length>0)for(var m=0;m<this.supportedLocales.length;m++)_.push(this.supportedLocales[m]);else for(var f in this.locales)_.push(f);return _.sort(),_}},l=A.englishStrings;M.locales.en=A.englishStrings,M.localeNames.en="english"},"./src/matrix.ts":function($,P,t){t.r(P),t.d(P,"Matrix",function(){return _});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/selectBase.ts"),_=function(m){Object(A.__extends)(f,m);function f(o,e,i,r){var n=m.call(this,o,e,i,r||"matrix")||this;return n.getAnswersData(),n}return Object.defineProperty(f.prototype,"matrixQuestion",{get:function(){return this.question},enumerable:!1,configurable:!0}),f.prototype.isSupportMissingAnswers=function(){return!1},f.prototype.getSeriesValues=function(){return this.matrixQuestion.rows.map(function(o){return""+o.value})},f.prototype.getSeriesLabels=function(){var o=this;return this.matrixQuestion.rows.map(function(e){return M.ItemValue.getTextOrHtmlByValue(o.matrixQuestion.rows,e.value)})},f.prototype.getSelectedItemByText=function(o){return this.matrixQuestion.columns.filter(function(e){return e.text===o})[0]},f.prototype.valuesSource=function(){return this.matrixQuestion.columns},f.prototype.getHasAnswersInAllSeriesArray=function(o){for(var e=Array(),i=0;i<o[0].length;i++)for(var r=0;r<o.length;r++)o[r][i]!=0&&(e[i]=!0);return e},f.prototype.getHasAnswersInSeries=function(o){for(var e=0;e<o.length;e++)if(o[e]!=0)return!0;return!1},f.prototype.hideEmptyAnswersInData=function(o){for(var e={datasets:[],labels:[],colors:[],texts:[],seriesLabels:[]},i=this.getHasAnswersInAllSeriesArray(o.datasets),r=0;r<o.datasets.length;r++){var n=this.getHasAnswersInSeries(o.datasets[r]);if(n)e.labels.push(o.labels[r]),e.colors.push(o.colors[r]);else continue;for(var s=[],a=[],u=0;u<o.datasets[0].length;u++)i[u]&&(s.push(o.datasets[r][u]),a.push(o.texts[r][u]));e.datasets.push(s),e.texts.push(a)}for(var r=0;r<o.datasets[0].length;r++)i[r]&&e.seriesLabels.push(o.seriesLabels[r]);return e},f.prototype.getData=function(){var o=m.prototype.getData.call(this),e=this.getSeriesValues(),i=this.getValues();if(e.length>1){var r=[];return i.forEach(function(n,s){var a=e.map(function(u,p){return o[p][s]});r.push(a)}),r}return o},f}(l.SelectBase)},"./src/matrixDropdownGrouped.ts":function($,P,t){t.r(P),t.d(P,"MatrixDropdownGrouped",function(){return l});var A=t("./src/utils/helpers.ts"),M=t("./src/selectBase.ts"),l=function(_){Object(A.__extends)(m,_);function m(f,o,e,i){var r=_.call(this,f,o,e,i||"matrixDropdownGrouped")||this;return r.getAnswersData(),r}return Object.defineProperty(m.prototype,"matrixQuestion",{get:function(){return this.question},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"name",{get:function(){return this.matrixQuestion.columns.map(function(f){return f.name})},enumerable:!1,configurable:!0}),m.prototype.getSeriesValues=function(){return this.matrixQuestion.columns.map(function(f){return f.name})},m.prototype.getSeriesLabels=function(){return this.matrixQuestion.columns.map(function(f){return f.title})},m.prototype.valuesSource=function(){return this.matrixQuestion.choices},m.prototype.isSupportMissingAnswers=function(){return!1},m.prototype.getData=function(){var f=this.getValues(),o=this.getSeriesValues(),e=this.matrixQuestion.rows.map(function(n){return n.value}),i=this.dataProvider.getData({name:o,getValues:function(){return f},getLabels:function(){return f},getSeriesValues:function(){return e},getSeriesLabels:function(){return e}}),r=[];return f.forEach(function(n,s){var a=o.map(function(u,p){return i[p][0][s]});r.push(a)}),r},m}(M.SelectBase)},"./src/number.ts":function($,P,t){t.r(P),t.d(P,"NumberModel",function(){return m});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizerBase.ts"),l=t("./src/localizationManager.ts"),_=t("./src/utils/index.ts"),m=function(f){Object(A.__extends)(o,f);function o(e,i,r,n){r===void 0&&(r={});var s=f.call(this,e,i,r,n||"number")||this;return s.registerToolbarItem("changeChartType",function(){return s.chartTypes.length>1?_.DocumentHelper.createSelector(s.chartTypes.map(function(a){return{value:a,text:l.localization.getString("chartType_"+a)}}),function(a){return s.chartType===a.value},function(a){s.setChartType(a.target.value)}):null}),s}return o.prototype.onDataChanged=function(){this._resultAverage=void 0,this._resultMin=void 0,this._resultMax=void 0,f.prototype.onDataChanged.call(this)},o.prototype.onChartTypeChanged=function(){},o.prototype.setChartType=function(e){this.chartTypes.indexOf(e)!==-1&&this.chartType!==e&&(this.chartType=e,this.onChartTypeChanged(),this.contentContainer&&(this.destroyContent(this.contentContainer),this.renderContent(this.contentContainer)),this.invokeOnUpdate())},o.prototype.destroy=function(){this._resultAverage=void 0,this._resultMin=void 0,this._resultMax=void 0,f.prototype.destroy.call(this)},o.prototype.generateText=function(e,i,r){var n=[];if(r===5)n=["very high ("+e+")","high","medium","low","very low ("+i+")"];else{n.push(e);for(var s=0;s<r-2;s++)n.push("");n.push(i)}return o.generateTextsCallback?o.generateTextsCallback(this.question,e,i,r,n):n},o.prototype.generateValues=function(e,i){for(var r=[],n=0;n<i;n++)r.push(e/i);return r.push(e),r},o.prototype.generateColors=function(e,i,r){for(var n=this.getColors(),s=[],a=0;a<r;a++)s.push(n[a]);return s.push("rgba(255, 255, 255, 0)"),s},o.prototype.getData=function(){var e=this;if(this._resultAverage===void 0||this._resultMin===void 0||this._resultMax===void 0){this._resultMin=Number.MAX_VALUE,this._resultMax=-Number.MAX_VALUE,this._resultAverage=0;var i=0;this.data.forEach(function(r){if(r[e.question.name]!==void 0){var n=+r[e.question.name];i++,e._resultAverage+=n,e._resultMin>n&&(e._resultMin=n),e._resultMax<n&&(e._resultMax=n)}}),i>0&&(this._resultAverage=this._resultAverage/i),this._resultAverage=Math.ceil(this._resultAverage*100)/100}return[this._resultAverage,this._resultMin,this._resultMax]},o.stepsCount=5,o.showAsPercentage=!1,o}(M.VisualizerBase)},"./src/plotly/boolean.ts":function($,P,t){t.r(P),t.d(P,"PlotlyBoolChartAdapter",function(){return f}),t.d(P,"BooleanPlotly",function(){return o});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizationManager.ts"),l=t("./src/boolean.ts"),_=t("./src/plotly/selectBase.ts"),m=t("./src/utils/index.ts"),f=function(e){Object(A.__extends)(i,e);function i(r){return e.call(this,r)||this}return i.prototype.patchConfigParameters=function(r,n,s,a){var u=this.model.getColors(),p=[o.trueColor||u[0],o.falseColor||u[1]];this.model.showMissingAnswers&&p.push(u[2]),this.model.chartType==="pie"||this.model.chartType==="doughnut"?n.forEach(function(c){c.marker.colors=p}):this.model.chartType==="bar"&&n.forEach(function(c){c.marker.color=p})},i}(_.PlotlyChartAdapter),o=function(e){Object(A.__extends)(i,e);function i(r,n,s,a){var u=e.call(this,r,n,s,a)||this;return u.chartTypes=i.types,u._chartType=u.chartTypes[0],u._chartAdapter=new f(u),u}return i.prototype.destroyContent=function(r){this._chartAdapter.destroy(r.children[0]),e.prototype.destroyContent.call(this,r)},i.prototype.renderContent=function(r){var n=this,s=m.DocumentHelper.createElement("div");r.appendChild(s),this._chartAdapter.create(s).then(function(){n.afterRender(n.contentContainer)})},i.types=["pie","bar","doughnut"],i}(l.BooleanModel);M.VisualizationManager.registerVisualizer("boolean",o)},"./src/plotly/histogram.ts":function($,P,t){t.r(P),t.d(P,"HistogramPlotly",function(){return f});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizationManager.ts"),l=t("./src/histogram.ts"),_=t("./src/plotly/selectBase.ts"),m=t("./src/utils/index.ts"),f=function(o){Object(A.__extends)(e,o);function e(i,r,n,s){var a=o.call(this,i,r,n,s)||this;return a.chartTypes=e.types,a._chartType=a.chartTypes[0],a._chartAdapter=new _.PlotlyChartAdapter(a),a}return e.prototype.destroyContent=function(i){this._chartAdapter.destroy(i.children[0]),o.prototype.destroyContent.call(this,i)},e.prototype.renderContent=function(i){var r=this,n=m.DocumentHelper.createElement("div");i.appendChild(n),this._chartAdapter.create(n).then(function(){r.afterRender(r.contentContainer)})},e.prototype.getData=function(){var i=o.prototype.getData.call(this),r=this.getSeriesValues(),n=this.getValues();if(r.length>1){var s=[];return n.forEach(function(a,u){var p=r.map(function(c,x){return i[x][u]});s.push(p)}),s}return i},e.types=["vbar","bar","scatter"],e}(l.HistogramModel);M.VisualizationManager.registerVisualizer("date",f),M.VisualizationManager.registerVisualizer("number",f),M.VisualizationManager.registerVisualizer("rating",f)},"./src/plotly/index.ts":function($,P,t){t.r(P);var A=t("./src/plotly/setup.ts");t.d(P,"PlotlySetup",function(){return A.PlotlySetup});var M=t("./src/plotly/selectBase.ts");t.d(P,"PlotlyChartAdapter",function(){return M.PlotlyChartAdapter}),t.d(P,"SelectBasePlotly",function(){return M.SelectBasePlotly});var l=t("./src/plotly/matrix.ts");t.d(P,"MatrixPlotly",function(){return l.MatrixPlotly});var _=t("./src/plotly/boolean.ts");t.d(P,"PlotlyBoolChartAdapter",function(){return _.PlotlyBoolChartAdapter}),t.d(P,"BooleanPlotly",function(){return _.BooleanPlotly});var m=t("./src/plotly/ranking.ts");t.d(P,"RankingPlotly",function(){return m.RankingPlotly});var f=t("./src/plotly/matrixdropdown-grouped.ts");t.d(P,"MatrixDropdownGroupedPlotly",function(){return f.MatrixDropdownGroupedPlotly});var o=t("./src/plotly/histogram.ts");t.d(P,"HistogramPlotly",function(){return o.HistogramPlotly});var e=t("./src/plotly/rating.ts");t.d(P,"PlotlyGaugeAdapter",function(){return e.PlotlyGaugeAdapter}),t.d(P,"GaugePlotly",function(){return e.GaugePlotly})},"./src/plotly/matrix.ts":function($,P,t){t.r(P),t.d(P,"MatrixPlotly",function(){return f});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizationManager.ts"),l=t("./src/matrix.ts"),_=t("./src/plotly/selectBase.ts"),m=t("./src/utils/index.ts"),f=function(o){Object(A.__extends)(e,o);function e(i,r,n,s){var a=o.call(this,i,r,n,s)||this;return a.chartTypes=e.types,a._chartType=a.chartTypes[0],a._chartAdapter=new _.PlotlyChartAdapter(a),a}return e.prototype.destroyContent=function(i){this._chartAdapter.destroy(i.children[0]),o.prototype.destroyContent.call(this,i)},e.prototype.renderContent=function(i){var r=this,n=m.DocumentHelper.createElement("div");i.appendChild(n),this._chartAdapter.create(n).then(function(){r.afterRender(r.contentContainer)})},e.types=["bar","stackedbar","pie","doughnut"],e}(l.Matrix);M.VisualizationManager.registerVisualizer("matrix",f)},"./src/plotly/matrixdropdown-grouped.ts":function($,P,t){t.r(P),t.d(P,"MatrixDropdownGroupedPlotly",function(){return f});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizationManager.ts"),l=t("./src/matrixDropdownGrouped.ts"),_=t("./src/plotly/selectBase.ts"),m=t("./src/utils/index.ts"),f=function(o){Object(A.__extends)(e,o);function e(i,r,n,s){var a=o.call(this,i,r,n,s)||this;return a.chartTypes=e.types,a._chartType=a.chartTypes[0],a._chartAdapter=new _.PlotlyChartAdapter(a),a}return e.prototype.destroyContent=function(i){this._chartAdapter.destroy(i.children[0]),o.prototype.destroyContent.call(this,i)},e.prototype.renderContent=function(i){var r=this,n=m.DocumentHelper.createElement("div");i.appendChild(n),this._chartAdapter.create(n).then(function(){r.afterRender(r.contentContainer)})},e.types=["stackedbar","bar","pie","doughnut"],e}(l.MatrixDropdownGrouped);M.VisualizationManager.registerVisualizer("matrixdropdown-grouped",f)},"./src/plotly/ranking.ts":function($,P,t){t.r(P),t.d(P,"RankingPlotly",function(){return _});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizationManager.ts"),l=t("./src/plotly/selectBase.ts"),_=function(m){Object(A.__extends)(f,m);function f(){return m!==null&&m.apply(this,arguments)||this}return f.prototype.getQuestionResults=function(){var o=this.question.name;return this.data.map(function(e){return e[o]})},f.prototype.getEmptyData=function(){var o=this.getValues(),e=[];return e.length=o.length,e.fill(0),e},f.prototype.getData=function(){var o=this,e=this.getQuestionResults(),i=this.getValues(),r=this.getEmptyData();return e.forEach(function(n){o.applyResultToPlotlyData(n,r,i)}),[r]},f.prototype.applyResultToPlotlyData=function(o,e,i){!o||!e||!i||o.forEach(function(r,n,s){var a=i.indexOf(r);e[a]=+e[a]+(s.length-n)})},f}(l.SelectBasePlotly);M.VisualizationManager.registerVisualizer("ranking",_)},"./src/plotly/rating.ts":function($,P,t){t.r(P),t.d(P,"PlotlyGaugeAdapter",function(){return i}),t.d(P,"GaugePlotly",function(){return r});var A=t("./src/utils/helpers.ts"),M=t("./src/number.ts"),l=t("./src/visualizationManager.ts"),_=t("./src/utils/index.ts"),m=t("./src/localizationManager.ts"),f=t("./src/plotly/setup.ts"),o=t("plotly.js-dist-min"),e=t.n(o),i=function(){function n(s){this.model=s,this._chart=void 0}return Object.defineProperty(n.prototype,"chart",{get:function(){return this._chart},enumerable:!1,configurable:!0}),n.prototype.create=function(s){var a=this,u=this.model.question,p=this.model.getData(),c=p[0],x=p[1],g=p[2];if(u.getType()==="rating"){var h=u.visibleRateValues;g=h[h.length-1].value,x=h[0].value}var b=this.model.generateColors(g,x,r.stepsCount);r.showAsPercentage&&(c=_.DataHelper.toPercentage(c,g),x=_.DataHelper.toPercentage(x,g),g=_.DataHelper.toPercentage(g,g));var v=[{type:"indicator",mode:"gauge+number",gauge:{axis:{range:[x,g]},shape:this.model.chartType,bgcolor:"white",bar:{color:b[0]}},value:c,text:u.name,domain:{x:[0,1],y:[0,1]}}],y={plot_bgcolor:this.model.backgroundColor,paper_bgcolor:this.model.backgroundColor};this.model.chartType==="bullet"&&(y.height=250,y.width=600);var w={displayModeBar:!0,locale:m.localization.currentLocale,responsive:!0,displaylogo:!1,modeBarButtonsToRemove:["toImage"],modeBarButtonsToAdd:[{name:"toImageSjs",title:m.localization.getString("saveDiagramAsPNG"),icon:e.a.Icons.camera,click:function(S){var T={format:f.PlotlySetup.imageExportFormat,filename:a.model.question.name};f.PlotlySetup.onImageSaving.fire(a.model,T),e.a.downloadImage(S,T)}}]};r.displayModeBar!==void 0&&(w.displayModeBar=r.displayModeBar);var d={data:v,layout:y,config:w};return f.PlotlySetup.onPlotCreating.fire(this.model,d),e.a.newPlot(s,d.data,d.layout,d.config)},n.prototype.destroy=function(s){e.a.purge(s),this._chart=void 0},n}(),r=function(n){Object(A.__extends)(s,n);function s(a,u,p,c){var x=n.call(this,a,u,p,c)||this;return x.chartTypes=s.types,x.chartType=x.chartTypes[0],x._chartAdapter=new i(x),x}return s.prototype.destroyContent=function(a){this._chartAdapter.destroy(a.children[0]),n.prototype.destroyContent.call(this,a)},s.prototype.renderContent=function(a){var u=this,p=_.DocumentHelper.createElement("div");a.appendChild(p),this._chartAdapter.create(p).then(function(){u.afterRender(u.contentContainer)})},s.displayModeBar=void 0,s.types=["gauge","bullet"],s}(M.NumberModel);l.VisualizationManager.registerVisualizer("number",r),l.VisualizationManager.registerVisualizer("rating",r),l.VisualizationManager.registerVisualizer("expression",r)},"./src/plotly/selectBase.ts":function($,P,t){t.r(P),t.d(P,"PlotlyChartAdapter",function(){return r}),t.d(P,"SelectBasePlotly",function(){return n});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/selectBase.ts"),_=t("./src/visualizationManager.ts"),m=t("./src/utils/index.ts"),f=t("./src/localizationManager.ts"),o=t("plotly.js-dist-min"),e=t.n(o),i=t("./src/plotly/setup.ts"),r=function(){function s(a){this.model=a,this._chart=void 0}return s.prototype.patchConfigParameters=function(a,u,p,c){},Object.defineProperty(s.prototype,"chart",{get:function(){return this._chart},enumerable:!1,configurable:!0}),s.prototype.create=function(a){var u=this,p=i.PlotlySetup.setup(this.model.chartType,this.model),c={displaylogo:!1,responsive:!0,locale:f.localization.currentLocale,modeBarButtonsToRemove:["toImage"],modeBarButtonsToAdd:[{name:"toImageSjs",title:f.localization.getString("saveDiagramAsPNG"),icon:e.a.Icons.camera,click:function(b){var v={format:i.PlotlySetup.imageExportFormat,filename:u.model.question.name};i.PlotlySetup.onImageSaving.fire(u.model,v),e.a.downloadImage(b,v)}}]};n.displayModeBar!==void 0&&(c.displayModeBar=n.displayModeBar),this.patchConfigParameters(a,p.traces,p.layout,c);var x={traces:p.traces,layout:p.layout,config:c};i.PlotlySetup.onPlotCreating.fire(this.model,x);var g=e.a.newPlot(a,x.traces,x.layout,x.config);a.on("plotly_click",function(b){var v;if(b.points.length>0){var y="";if(p.hasSeries){y=b.points[0].data.name;var d=b.points[0].label,S=u.model.getSeriesValues(),T=u.model.getSeriesLabels(),E=S[T.indexOf(d)],C=u.model.getSelectedItemByText(y),w=new M.ItemValue((v={},v[E]=C.value,v),d+": "+C.text);u.model.setSelection(w)}else{y=Array.isArray(b.points[0].customdata)?b.points[0].customdata[0]:b.points[0].customdata;var w=u.model.getSelectedItemByText(y);u.model.setSelection(w)}}});var h=function(){return a.getElementsByClassName("nsewdrag")[0]};return a.on("plotly_hover",function(){var b=h();b&&(b.style.cursor="pointer")}),a.on("plotly_unhover",function(){var b=h();b&&(b.style.cursor="")}),this._chart=g,g},s.prototype.destroy=function(a){e.a.purge(a),this._chart=void 0},s}(),n=function(s){Object(A.__extends)(a,s);function a(u,p,c,x){c===void 0&&(c={});var g=s.call(this,u,p,c,x)||this;return g.chartTypes=[].concat(a.types),g.getSeriesValues().length>0&&g.chartTypes.indexOf("stackedbar")===-1&&g.chartTypes.push("stackedbar"),c.allowExperimentalFeatures&&g.chartTypes.splice(1,0,"vbar"),g._chartType=g.chartTypes[0],g.chartTypes.indexOf(c.defaultChartType)!==-1&&(g._chartType=c.defaultChartType),g._chartAdapter=new r(g),g}return a.prototype.destroyContent=function(u){this._chartAdapter.destroy(u.children[0]),s.prototype.destroyContent.call(this,u)},a.prototype.renderContent=function(u){var p=this,c=m.DocumentHelper.createElement("div");u.appendChild(c),this._chartAdapter.create(c).then(function(){p.afterRender(p.contentContainer)})},a.prototype.getData=function(){var u=s.prototype.getData.call(this),p=this.getSeriesValues(),c=this.getValues();if(p.length>1){var x=[];return c.forEach(function(g,h){var b=p.map(function(v,y){return u[y][h]});x.push(b)}),x}return u},a.types=["bar","pie","doughnut","scatter"],a.displayModeBar=void 0,a}(l.SelectBase);_.VisualizationManager.registerVisualizer("checkbox",n),_.VisualizationManager.registerVisualizer("radiogroup",n),_.VisualizationManager.registerVisualizer("dropdown",n),_.VisualizationManager.registerVisualizer("imagepicker",n),_.VisualizationManager.registerVisualizer("tagbox",n)},"./src/plotly/setup.ts":function($,P,t){t.r(P),t.d(P,"PlotlySetup",function(){return M});var A=t("survey-core"),M=function(){function l(){}return l.setup=function(_,m){return this.setups[_](m)},l.setupPie=function(_){var m=_.getAnswersData(),f=m.datasets,o=m.labels,e=m.colors;m.texts;var i=m.seriesLabels,r=[],n=i.length>1,s={type:_.chartType,y:n?i:o,text:(n?i:o).map(function(c){return l.getTruncatedLabel(c,_.labelTruncateLength)}),hoverinfo:"x+y",mode:"markers",marker:{}};s.hoverinfo="label+value+percent",s.marker.colors=e,s.textposition="inside",_.chartType==="doughnut"&&(s.type="pie",s.hole=.4),n||(s.marker.symbol="circle",s.marker.size=16),f.forEach(function(c,x){r.push(Object.assign({},s,{values:c,labels:n?i:o,customdata:n?i:o}))});var a=o.length<10?o.length*50+100:550,u=a*Math.round(r.length/2)+25,p={font:{family:"Segoe UI, sans-serif",size:14,weight:"normal",color:"#404040"},height:u,margin:{l:0,t:25,b:0,r:10},colorway:e,hovermode:"closest",plot_bgcolor:_.backgroundColor,paper_bgcolor:_.backgroundColor,showlegend:!1};return n&&(p.grid={rows:Math.round(r.length/2),columns:2},p.annotations=[],o.forEach(function(c,x){r[x].domain={column:x%2,row:Math.floor(x/2)},r[x].title={position:"bottom center",text:c}})),{traces:r,layout:p,hasSeries:n}},l.setupBar=function(_){var m=30,f=30,o=30,e=_.getAnswersData(),i=e.datasets,r=e.labels,n=e.colors,s=e.texts,a=e.seriesLabels,u=[],p=a.length>1,c=p?a:r,x={type:_.chartType,y:c,text:c,customdata:p?a:r,hoverinfo:"text",orientation:"h",mode:"markers",textposition:"none",width:.5,bargap:.5,marker:{}};x.marker.color=n,i.forEach(function(b,v){var y=Object.assign({},x,{x:b,text:s[v],hovertext:c.map(function(d,S){return"".concat(s[v][S],", ").concat(d)})});if(_.showPercentages){var w=_.showOnlyPercentages?"%{text}%":"%{value} (%{text}%)";y.textposition="inside",y.texttemplate=w,y.bargap=.1}u.push(y)});var g=(r.length+1)*m+f+o,h={font:{family:"Segoe UI, sans-serif",size:14,weight:"normal",color:"#404040"},height:g,margin:{t:f,b:o,r:10},colorway:n,hovermode:"closest",yaxis:{automargin:!0,type:"category",orientation:"h",tickmode:"array",tickvals:c,ticktext:c.map(function(b){return l.getTruncatedLabel(b,_.labelTruncateLength)+"  "})},xaxis:{rangemode:"nonnegative",automargin:!0},plot_bgcolor:_.backgroundColor,paper_bgcolor:_.backgroundColor,showlegend:!1};return p&&(h.showlegend=!0,_.chartType=="stackedbar"?h.barmode="stack":h.height=(r.length+1)*m*a.length+f+o,r.forEach(function(b,v){u[v].marker.color=void 0,u[v].name=b,_.chartType==="stackedbar"?(u[v].type="bar",u[v].width=.5):u[v].width=(_.showPercentages?.7:.5)/u.length}),u.forEach(function(b,v){var y=_.showPercentages?"%":"";u[v].hovertext=[],c.forEach(function(w,d){u[v].hovertext.push("".concat(b.y[d]," : ").concat(b.name,", ").concat(b.text[d]).concat(y))})})),{traces:u,layout:h,hasSeries:p}},l.setupVBar=function(_){var m=30,f=30,o=_.getAnswersData(),e=o.datasets,i=o.labels,r=o.colors,n=o.texts,s=o.seriesLabels,a=[],u=s.length>1,p={font:{family:"Segoe UI, sans-serif",size:14,weight:"normal",color:"#404040"},margin:{t:m,b:f,r:10},colorway:r,hovermode:"closest",plot_bgcolor:_.backgroundColor,paper_bgcolor:_.backgroundColor,showlegend:!1},c={type:"bar",customdata:u?s:i,hoverinfo:"x+y",mode:"markers",textposition:"none",width:.5,bargap:.5,marker:{}};return c.marker.color=r,e.forEach(function(x,g){var h=Object.assign({},c,{x:i,y:_.showPercentages?n[g].map(function(v){return v/100}):x,text:n[g]});if(_.showPercentages){var b=_.showOnlyPercentages?"%{text}%":"%{value} (%{text}%)";h.textposition="inside",h.texttemplate=b,h.width=.9,h.bargap=.1}a.push(h)}),_.showPercentages&&_.showOnlyPercentages&&(p.yaxis={automargin:!0,tickformat:".0%",range:[0,1],ticklen:_.showOnlyPercentages?25:5,tickcolor:"transparent"}),{traces:a,layout:p,hasSeries:u}},l.setupScatter=function(_){var m=30,f=30,o=30,e=_.getAnswersData(),i=e.datasets,r=e.labels,n=e.colors;e.texts;var s=e.seriesLabels,a=s.length>1,u=[],p={type:"scatter",y:(a?s:r).map(function(g){return l.getTruncatedLabel(g,_.labelTruncateLength)}),customdata:a?s:r,text:a?s:r,hoverinfo:"x+y",orientation:"h",mode:"markers",width:.5,marker:{}};a||(p.marker.symbol="circle",p.marker.size=16),i.forEach(function(g){{var h=Object.assign({},p,{x:g});u.push(h)}});var c=(r.length+1)*m+f+o,x={font:{family:"Segoe UI, sans-serif",size:14,weight:"normal",color:"#404040"},height:c,margin:{t:f,b:o,r:10},colorway:n,hovermode:"closest",yaxis:{automargin:!0,type:"category",ticklen:5,tickcolor:"transparent"},xaxis:{rangemode:"nonnegative",automargin:!0},plot_bgcolor:_.backgroundColor,paper_bgcolor:_.backgroundColor,showlegend:!1};return a&&(x.showlegend=!0,x.height=void 0,r.forEach(function(g,h){u[h].hoverinfo="x+name",u[h].marker.color=void 0,u[h].name=g})),{traces:u,layout:x,hasSeries:a}},l.imageExportFormat="png",l.onImageSaving=new A.Event,l.onPlotCreating=new A.Event,l.setups={bar:l.setupBar,vbar:l.setupVBar,stackedbar:l.setupBar,doughnut:l.setupPie,pie:l.setupPie,scatter:l.setupScatter},l.getTruncatedLabel=function(_,m){var f="...",o=f.length;return!m||m===-1||_.length<=m+o?_:_.substring(0,m)+f},l}()},"./src/selectBase.ts":function($,P,t){t.r(P),t.d(P,"SelectBase",function(){return f});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/visualizerBase.ts"),_=t("./src/localizationManager.ts"),m=t("./src/utils/index.ts"),f=function(o){Object(A.__extends)(e,o);function e(i,r,n,s){var a=o.call(this,i,r,n,s||"selectBase")||this;return a.selectedItem=void 0,a.choicesOrderSelector=void 0,a.showPercentageBtn=void 0,a.emptyAnswersBtn=void 0,a.transposeDataBtn=void 0,a.topNSelector=void 0,a._showPercentages=!1,a._showOnlyPercentages=!1,a._percentagePrecision=0,a._answersOrder="default",a._supportSelection=!0,a._hideEmptyAnswers=!1,a._topN=-1,a.topNValues=[].concat(e.topNValuesDefaults),a._transposeData=!1,a._showMissingAnswers=!1,a.missingAnswersBtn=void 0,a.chartTypes=[],a._chartType="bar",a.onAnswersDataReady=new M.Event,i.visibleChoicesChangedCallback=function(){a.dataProvider.reset()},a._showPercentages=a.options.showPercentages===!0,a._showOnlyPercentages=a.options.showOnlyPercentages===!0,a.options.percentagePrecision&&(a._percentagePrecision=a.options.percentagePrecision),a._hideEmptyAnswers=a.options.hideEmptyAnswers===!0,a._answersOrder=a.options.answersOrder||"default",a._showMissingAnswers=a.isSupportMissingAnswers()&&a.options.showMissingAnswers===!0,a.registerToolbarItem("changeChartType",function(){return a.chartTypes.length>1?m.DocumentHelper.createSelector(a.chartTypes.map(function(u){return{value:u,text:_.localization.getString("chartType_"+u)}}),function(u){return a.chartType===u.value},function(u){a.setChartType(u.target.value)}):null}),a.registerToolbarItem("changeAnswersOrder",function(){return(a.options.allowChangeAnswersOrder===void 0||a.options.allowChangeAnswersOrder)&&a.getSeriesValues().length===0&&(a.choicesOrderSelector=m.DocumentHelper.createSelector([{text:_.localization.getString("defaultOrder"),value:"default"},{text:_.localization.getString("ascOrder"),value:"asc"},{text:_.localization.getString("descOrder"),value:"desc"}],function(u){return!1},function(u){a.answersOrder=u.target.value}),a.updateOrderSelector()),a.choicesOrderSelector}),a.registerToolbarItem("showPercentages",function(){if(a.options.allowShowPercentages&&(a.chartTypes.indexOf("bar")!==-1||a.chartTypes.indexOf("stackedbar")!==-1))return a.showPercentageBtn=m.DocumentHelper.createButton(function(){a.showPercentages=!a.showPercentages}),a.updateShowPercentageBtn(),a.showPercentageBtn}),a.registerToolbarItem("hideEmptyAnswers",function(){return a.options.allowHideEmptyAnswers&&(a.emptyAnswersBtn=m.DocumentHelper.createButton(function(){a.hideEmptyAnswers=!a._hideEmptyAnswers}),a.updateEmptyAnswersBtn()),a.emptyAnswersBtn}),a.registerToolbarItem("topNAnswers",function(){return a.options.allowTopNAnswers&&a.getSeriesValues().length===0&&(a.topNSelector=m.DocumentHelper.createSelector(a.topNValues.map(function(u){return{text:_.localization.getString("topNValueText"+u),value:u}}),function(u){return!1},function(u){a.topN=parseInt(u.target.value)}),a.updateTopNSelector()),a.topNSelector}),a.registerToolbarItem("transposeData",function(){return a.options.allowTransposeData&&(a.transposeDataBtn=m.DocumentHelper.createButton(function(){a.transposeData=!a.transposeData}),a.updateTransposeDataBtn()),a.transposeDataBtn}),a.registerToolbarItem("showMissingAnswers",function(){return a.isSupportMissingAnswers()&&a.options.allowShowMissingAnswers&&(a.missingAnswersBtn=m.DocumentHelper.createButton(function(){a.showMissingAnswers=!a._showMissingAnswers}),a.updateMissingAnswersBtn()),a.missingAnswersBtn}),a}return Object.defineProperty(e.prototype,"chartType",{get:function(){return this._chartType},set:function(i){this.setChartType(i)},enumerable:!1,configurable:!0}),e.prototype.updateEmptyAnswersBtn=function(){this.emptyAnswersBtn&&(this.emptyAnswersBtn.innerText=this._hideEmptyAnswers?_.localization.getString("showEmptyAnswers"):_.localization.getString("hideEmptyAnswers"),this.chartType=="bar"||this.chartType=="vbar"||this.chartType=="scatter"?this.emptyAnswersBtn.style.display="inline":this.emptyAnswersBtn.style.display="none")},e.prototype.updateTransposeDataBtn=function(){this.transposeDataBtn&&(this.transposeDataBtn.innerText=this.transposeData?_.localization.getString("showPerColumns"):_.localization.getString("showPerValues"),this.getSeriesValues().length>0?this.transposeDataBtn.style.display="inline":this.transposeDataBtn.style.display="none")},e.prototype.updateOrderSelector=function(){this.choicesOrderSelector&&(this.chartType=="bar"||this.chartType=="vbar"||this.chartType=="scatter"||(this.chartType=="pie"||this.chartType=="doughnut")&&this.topN>0?this.choicesOrderSelector.style.display="inline-block":this.choicesOrderSelector.style.display="none",this.choicesOrderSelector.getElementsByTagName("select")[0].value=this.answersOrder)},e.prototype.updateShowPercentageBtn=function(){this.showPercentageBtn&&(this.showPercentageBtn.innerText=this._showPercentages?_.localization.getString("hidePercentages"):_.localization.getString("showPercentages"),this.chartType=="bar"||this.chartType=="vbar"||this.chartType=="stackedbar"?this.showPercentageBtn.style.display="inline":this.showPercentageBtn.style.display="none")},e.prototype.updateTopNSelector=function(){this.topNSelector&&(this.topNSelector.getElementsByTagName("select")[0].value=this._topN)},e.prototype.updateMissingAnswersBtn=function(){this.missingAnswersBtn&&(this.missingAnswersBtn.innerText=this._showMissingAnswers?_.localization.getString("hideMissingAnswers"):_.localization.getString("showMissingAnswers"))},e.prototype.onChartTypeChanged=function(){this.updateOrderSelector(),this.updateShowPercentageBtn(),this.updateEmptyAnswersBtn(),this.updateTopNSelector()},e.prototype.setChartType=function(i){this.chartTypes.indexOf(i)!==-1&&this._chartType!==i&&(this._chartType=i,this.onChartTypeChanged(),this.refreshContent())},e.prototype.getCorrectAnswerText=function(){var i=o.prototype.getCorrectAnswerText.call(this),r=Array.isArray(i)?i:[i],n=this.question;return r.map(function(s){return M.ItemValue.getTextOrHtmlByValue(n.choices,s)}).join(", ")},e.prototype.getSelectedItemByText=function(i){var r=this.question;return this.question.hasOther&&i==r.otherText?r.otherItem:r.choices.filter(function(n){return n.text===i})[0]},e.prototype.setSelection=function(i){this.selectedItem!==i&&(this.selectedItem=i,this.onDataItemSelected!==void 0&&this.onDataItemSelected(i!==void 0?i.value:void 0,i!==void 0?i.text:""))},Object.defineProperty(e.prototype,"selection",{get:function(){return this.selectedItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showOnlyPercentages",{get:function(){return this._showOnlyPercentages},set:function(i){this._showOnlyPercentages=i,this.refreshContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showPercentages",{get:function(){return this._showPercentages},set:function(i){this._showPercentages=i,this.updateShowPercentageBtn(),this.refreshContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"answersOrder",{get:function(){return this._answersOrder},set:function(i){this._answersOrder=i,this.updateOrderSelector(),this.refreshContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hideEmptyAnswers",{get:function(){return this._hideEmptyAnswers},set:function(i){this._hideEmptyAnswers=i,this.updateEmptyAnswersBtn(),this.refreshContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transposeData",{get:function(){return this._transposeData},set:function(i){this._transposeData=i,this.updateTransposeDataBtn(),this.refreshContent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topN",{get:function(){return this._topN},set:function(i){this._topN=i,this.updateTopNSelector(),this.updateOrderSelector(),this.refreshContent()},enumerable:!1,configurable:!0}),e.prototype.isSupportMissingAnswers=function(){return!0},Object.defineProperty(e.prototype,"showMissingAnswers",{get:function(){return this._showMissingAnswers},set:function(i){this._showMissingAnswers=this.isSupportMissingAnswers()&&i,this.updateMissingAnswersBtn(),this.dataProvider.reset(this),this.refreshContent()},enumerable:!1,configurable:!0}),e.prototype.refreshContent=function(){this.contentContainer&&(this.destroyContent(this.contentContainer),this.renderContent(this.contentContainer)),this.invokeOnUpdate()},Object.defineProperty(e.prototype,"showValuesInOriginalOrder",{get:function(){return this.options.showValuesInOriginalOrder!==!1},enumerable:!1,configurable:!0}),e.prototype.valuesSource=function(){var i=this.question;return i.choicesFromQuestion&&i.survey&&(i=i.survey.getQuestionByName(i.choicesFromQuestion)),i.activeChoices},e.prototype.getValues=function(){var i=this.valuesSource().map(function(r){return r.value});return this.question.hasNone&&i.push(this.question.noneItem.value),this.question.hasOther&&i.push("other"),this.showMissingAnswers&&i.unshift(void 0),this.showValuesInOriginalOrder?i.reverse():i},e.prototype.getLabels=function(){var i=this;if(this.options.useValuesAsLabels)return this.getValues();var r=this.valuesSource().map(function(s){return M.ItemValue.getTextOrHtmlByValue(i.valuesSource(),s.value)}),n=this.question;return n.hasNone&&r.push(n.noneText),n.hasOther&&r.push(n.otherText),this.showMissingAnswers&&r.unshift(_.localization.getString("missingAnswersLabel")),this.showValuesInOriginalOrder?r.reverse():r},e.prototype.getPercentages=function(){var i=this.getData(),r=[],n=this._percentagePrecision;if(i.length<2)i.forEach(function(c,x){var g=c.reduce(function(h,b){return h+b},0);r[x]=c.map(function(h){var b=n?+(h/g).toFixed(n):Math.round(h/g*1e4);return g&&b/100})});else for(var s=0;s<i[0].length;s++){for(var a=0,u=0;u<i.length;u++)a+=i[u][s];for(var u=0;u<i.length;u++){Array.isArray(r[u])||(r[u]=[]);var p=n?+(i[u][s]/a*100).toFixed(n):Math.round(i[u][s]/a*100);r[u][s]=a&&p}}return r},e.prototype.hideEmptyAnswersInData=function(i){for(var r={datasets:[[]],labels:[],colors:[],texts:[[]],seriesLabels:i.seriesLabels},n=0;n<i.datasets[0].length;n++)i.datasets[0][n]!=0&&(r.datasets[0].push(i.datasets[0][n]),r.labels.push(i.labels[n]),r.colors.push(i.colors[n]),r.texts[0].push(i.texts[0][n]));return r},e.prototype.answersDataReady=function(i){var r={};return this.hideEmptyAnswers?r=this.hideEmptyAnswersInData(i):r=i,this.topN>0&&(r.datasets[0]=r.datasets[0].slice(-this.topN),r.labels=r.labels.slice(-this.topN),r.colors=r.colors.slice(-this.topN),r.texts[0]=r.texts[0].slice(-this.topN)),r},e.prototype.getAnswersData=function(){var i=this.getSeriesLabels(),r=this.getData(),n=this.getLabels(),s=this.getColors(),a=this.showPercentages?this.getPercentages():r;if(this.transposeData){r=this.transpose(r),a=this.transpose(a);var u=i;i=n,n=u}if(this.answersOrder=="asc"||this.answersOrder=="desc"){var p=this.showPercentages?m.DataHelper.zipArrays(n,s,a[0]):m.DataHelper.zipArrays(n,s),c=m.DataHelper.sortDictionary(p,r[0],this.answersOrder=="desc"),x=m.DataHelper.unzipArrays(c.keys);n=x[0],s=x[1],this.showPercentages&&(a[0]=x[2]),r[0]=c.values}var g={datasets:r,labels:n,colors:s,texts:a,seriesLabels:i};return g=this.answersDataReady(g),this.onAnswersDataReady.fire(this,g),g},e.prototype.transpose=function(i){for(var r=i[0].length,n=new Array(r),s=0;s<r;++s)n[s]=new Array(i.length);for(var s=0;s<i.length;++s)for(var a=0;a<r;++a)n[a][s]=i[s][a];return n},e.prototype.getState=function(){var i=this,r={};return e._stateProperties.forEach(function(n){r[n]=i[n]}),this.selectedItem&&(r.filter=this.selectedItem.value),r},e.prototype.setState=function(i){var r=this;e._stateProperties.forEach(function(s){i[s]!==void 0&&(r[s]=i[s])});var n=M.ItemValue.getItemByValue(this.question.visibleChoices,i.filter);this.setSelection(n??void 0)},e.topNValuesDefaults=[-1,5,10,20],e._stateProperties=["chartType","answersOrder","hideEmptyAnswers","topN"],e}(l.VisualizerBase)},"./src/text.scss":function($,P,t){},"./src/text.ts":function($,P,t){t.r(P),t.d(P,"TextTableAdapter",function(){return f}),t.d(P,"Text",function(){return o});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizerBase.ts"),l=t("./src/visualizationManager.ts"),_=t("./src/localizationManager.ts"),m=t("./src/utils/index.ts");t("./src/text.scss");var f=function(){function e(i){this.model=i}return e.prototype.create=function(i){var r=this.model.getData(),n=r.columnsCount,s=r.data,a=m.DocumentHelper.createElement("p","",{innerText:_.localization.getString("noResults")});if(s.length===0){i.appendChild(a);return}var u=m.DocumentHelper.createElement("table","sa-text-table");u.style.backgroundColor=this.model.backgroundColor,i.appendChild(u),s.forEach(function(p){for(var c=m.DocumentHelper.createElement("tr"),x=0;x<n;x++){var g=m.DocumentHelper.createElement("td","sa-text-table__cell",{textContent:p[x]});c.appendChild(g)}u.appendChild(c)}),i.className="sa-text-table__container",i.appendChild(u)},e.prototype.destroy=function(i){i.innerHTML=""},e}(),o=function(e){Object(A.__extends)(i,e);function i(r,n,s,a){var u=e.call(this,r,n,s,a||"text")||this;return u._textTableAdapter=new f(u),u}return i.prototype.getData=function(){var r=this,n=[],s=0;return this.data.forEach(function(a){var u=a[r.question.name],p=[];u&&(Array.isArray(u)?p.concat(u):typeof u=="object"?Object.keys(u).forEach(function(c){return p.push(u[c])}):p.push(u),n.push(p),p.length>s&&(s=p.length))}),{columnsCount:s,data:n}},i.prototype.destroyContent=function(r){this._textTableAdapter.destroy(r),e.prototype.destroyContent.call(this,r)},i.prototype.renderContent=function(r){this._textTableAdapter.create(r),this.afterRender(this.contentContainer)},i.prototype.destroy=function(){this._textTableAdapter.destroy(this.contentContainer),e.prototype.destroy.call(this)},i}(M.VisualizerBase);l.VisualizationManager.registerVisualizer("text",o),l.VisualizationManager.registerVisualizer("comment",o),l.VisualizationManager.registerVisualizer("multipletext",o)},"./src/utils/helpers.ts":function($,P,t){t.r(P),t.d(P,"__assign",function(){return A}),t.d(P,"__extends",function(){return M}),t.d(P,"__rest",function(){return l}),t.d(P,"__decorate",function(){return _});var A=Object.assign||function(m){for(var f,o=1,e=arguments.length;o<e;o++){f=arguments[o];for(var i in f)Object.prototype.hasOwnProperty.call(f,i)&&(m[i]=f[i])}return m};function M(m,f){for(var o in f)f.hasOwnProperty(o)&&(m[o]=f[o]);function e(){this.constructor=m}m.prototype=f===null?Object.create(f):(e.prototype=f.prototype,new e)}var l=function(m,f){var o={};for(var e in m)Object.prototype.hasOwnProperty.call(m,e)&&f.indexOf(e)<0&&(o[e]=m[e]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(m);i<r.length;i++)f.indexOf(r[i])<0&&(o[r[i]]=m[r[i]]);return o},_=function(m,f,o,e){var i=arguments.length,r=i<3?f:e===null?e=Object.getOwnPropertyDescriptor(f,o):e,n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(m,f,o,e);else for(var s=m.length-1;s>=0;s--)(n=m[s])&&(r=(i<3?n(r):i>3?n(f,o,r):n(f,o))||r);return i>3&&r&&Object.defineProperty(f,o,r),r}},"./src/utils/index.ts":function($,P,t){t.r(P),t.d(P,"DocumentHelper",function(){return A}),t.d(P,"options",function(){return M}),t.d(P,"allowDomRendering",function(){return l}),t.d(P,"createCommercialLicenseLink",function(){return _}),t.d(P,"DataHelper",function(){return m}),t.d(P,"createLinksContainer",function(){return f}),t.d(P,"createImagesContainer",function(){return o});var A=function(){function e(){}return e.createSelector=function(i,r,n){var s=document.createElement("div");s.className="sa-question__select-wrapper";var a=document.createElement("select");return a.className="sa-question__select",i.forEach(function(u){var p=e.createElement("option","",{value:u.value,text:u.text,selected:r(u)});a.appendChild(p)}),a.onchange=n,s.appendChild(a),s},e.createButton=function(i,r,n){r===void 0&&(r=""),n===void 0&&(n="sa-toolbar__button");var s=e.createElement("span",n,{innerText:r,onclick:i});return s},e.createElement=function(i,r,n){r===void 0&&(r="");var s=document.createElement(i);return s.className=r,n&&Object.keys(n).forEach(function(a){s[a]=n[a]}),s},e.createSvgElement=function(i){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href","#sa-svg-"+i),r.appendChild(n),r},e.createSvgButton=function(i){var r=e.createElement("button","sa-table__svg-button");return r.appendChild(e.createSvgElement(i)),r},e.createSvgToggleButton=function(i,r,n,s,a,u,p,c){p===void 0&&(p="first"),c===void 0&&(c="sa-toolbar__button sa-toolbar__svg-button");var x=e.createSvgElement(i),g=e.createSvgElement(r),h=e.createElement("button",c),b=function(v){p==="first"?(p="second",h.title=s,h.removeChild(x),h.appendChild(g),u(v)):p==="second"&&(p="first",h.title=n,h.removeChild(g),h.appendChild(x),a(v))};return p==="first"?(h.title=n,h.appendChild(x)):(p="second")&&(h.title=s,h.appendChild(g)),h.onclick=b,h},e.createInput=function(i,r,n){r===void 0&&(r=""),n===void 0&&(n="");var s=e.createElement("input",i,{placeholder:r,defaultValue:n});return s},e}(),M={runningInBrowser:typeof window.URL.createObjectURL=="function"};function l(){return M.runningInBrowser}function _(){var e=A.createElement("div","sa-commercial"),i=A.createElement("a","sa-commercial__text",{href:"https://www.surveyjs.io/Buy",target:"_blank"}),r=A.createElement("span",""),n=A.createSvgElement("noncommercial"),s=A.createElement("span","sa-commercial__product",{innerText:"Please purchase a SurveyJS Analytics developer license to use it in your app."});return e.appendChild(i).appendChild(r),r.appendChild(n),r.appendChild(s),e}var m=function(){function e(){}return e.zipArrays=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];for(var n=[],s=function(u){n[u]=[],i.forEach(function(p){n[u].push(p[u])})},a=0;a<i[0].length;a++)s(a);return n},e.unzipArrays=function(i){var r=[];return i.forEach(function(n,s){n.forEach(function(a,u){r[u]||(r[u]=[]),r[u][s]=a})}),r},e.sortDictionary=function(i,r,n){var s=this.zipArrays(i,r),a=function(p,c,x){x===void 0&&(x=!0);var g=p[1]<c[1]?1:p[1]==c[1]?0:-1;return x?g:g*-1};s.sort(function(p,c){return n?a(p,c,!1):a(p,c)});var u=this.unzipArrays(s);return{keys:u[0],values:u[1]}},e.toPercentage=function(i,r){return i/r*100},e}();function f(e){var i=A.createElement("div");return e.forEach(function(r){i.appendChild(A.createElement("a","",{innerText:r.name,download:r.name,href:r.content}))}),i}function o(e){var i=A.createElement("div");return e.forEach(function(r){i.appendChild(A.createElement("img","",{alt:r.name,src:r.content}))}),i}},"./src/visualizationManager.ts":function($,P,t){t.r(P),t.d(P,"VisualizationManager",function(){return M});var A=t("./src/visualizerBase.ts"),M=function(){function l(){}return l.registerVisualizer=function(_,m){var f=l.vizualizers[_];f||(f=[],l.vizualizers[_]=f),f.push(m)},l.unregisterVisualizer=function(_,m){var f=[_];_||(f=Object.keys(l.vizualizers)),f.forEach(function(o){var e=l.vizualizers[o];if(e){var i=e.indexOf(m);i!==-1&&e.splice(i,1)}})},l.unregisterVisualizerForAll=function(_){l.unregisterVisualizer(void 0,_)},l.getVisualizersByType=function(_){var m=l.vizualizers[_];return m||[A.VisualizerBase]},l.getAltVisualizerSelector=function(){return l.alternativesVisualizer||A.VisualizerBase},l.registerAltVisualizerSelector=function(_){l.alternativesVisualizer=_},l.alternativesVisualizer=void 0,l.vizualizers={},l}()},"./src/visualizationMatrixDropdown.ts":function($,P,t){t.r(P),t.d(P,"VisualizationMatrixDropdown",function(){return o});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/visualizerBase.ts"),_=t("./src/visualizationManager.ts"),m=t("./src/visualizationPanel.ts"),f=t("./src/dataProvider.ts"),o=function(e){Object(A.__extends)(i,e);function i(r,n,s,a){s===void 0&&(s={});var u=e.call(this,r,n,s,a||"matrixDropdown")||this;u._matrixDropdownVisualizer=void 0,u.onPanelAfterRenderCallback=function(){u.afterRender(u.contentContainer)},u._childOptions=Object.assign({},s),u._childOptions.disableLocaleSwitch=!0,u._childOptions.dataProvider=void 0,u._childOptions.allowDynamicLayout=!1,u._childOptions.seriesValues=r.rows.map(function(g){return g.value}),u._childOptions.seriesLabels=r.rows.map(function(g){return g.text});var p=u.getQuestions(),c=u._childOptions.seriesValues.length==1&&p.every(function(g){return M.Helpers.isArraysEqual(g.choices,u.question.choices)});if(c){var x=_.VisualizationManager.getVisualizersByType("matrixdropdown-grouped");u._matrixDropdownVisualizer=new x[0](u.question,[],u._childOptions)}else u._matrixDropdownVisualizer=new m.VisualizationPanel(p,[],u._childOptions);return u._matrixDropdownVisualizer.onAfterRender.add(u.onPanelAfterRenderCallback),u.updateData(n),u}return i.prototype.setLocale=function(r){e.prototype.setLocale.call(this,r),this._childOptions.seriesLabels=this.question.rows.map(function(n){return n.text}),this._matrixDropdownVisualizer.locale=r},Object.defineProperty(i.prototype,"matrixDropdownVisualizer",{get:function(){return this._matrixDropdownVisualizer},enumerable:!1,configurable:!0}),i.prototype.updateDropdownVisualizerData=function(){var r=this,n=[];this.data.forEach(function(s){var a=s[r.question.name];a&&Object.keys(a).forEach(function(u){var p=Object.assign({},a[u]);p[f.DataProvider.seriesMarkerKey]=u,n.push(p)})}),this._matrixDropdownVisualizer.updateData(n)},i.prototype.updateData=function(r){e.prototype.updateData.call(this,r),this.updateDropdownVisualizerData()},i.prototype.onDataChanged=function(){this.updateDropdownVisualizerData(),e.prototype.onDataChanged.call(this)},i.prototype.getQuestions=function(){var r=this.question;return r.columns.map(function(n){var s=n.templateQuestion;return Array.isArray(s.choices)&&s.choices.length===0&&(s.choices=r.choices),s})},i.prototype.destroyContent=function(r){this._matrixDropdownVisualizer.clear(),e.prototype.destroyContent.call(this,this.contentContainer)},i.prototype.renderContent=function(r){this._matrixDropdownVisualizer.render(r)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this._matrixDropdownVisualizer.onAfterRender.remove(this.onPanelAfterRenderCallback)},i}(l.VisualizerBase);_.VisualizationManager.registerVisualizer("matrixdropdown",o)},"./src/visualizationMatrixDynamic.ts":function($,P,t){t.r(P),t.d(P,"VisualizationMatrixDynamic",function(){return _});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizationManager.ts"),l=t("./src/visualizationPanelDynamic.ts"),_=function(m){Object(A.__extends)(f,m);function f(o,e,i){return m.call(this,o,e,i)||this}return Object.defineProperty(f.prototype,"type",{get:function(){return"matrixDynamic"},enumerable:!1,configurable:!0}),f.prototype.getQuestions=function(){var o=this.question,e=o.visibleRows;return e.length===0?[]:e[0].cells.map(function(i){return i.question})},f}(l.VisualizationPanelDynamic);M.VisualizationManager.registerVisualizer("matrixdynamic",_)},"./src/visualizationPanel.scss":function($,P,t){},"./src/visualizationPanel.ts":function($,P,t){t.r(P),t.d(P,"VisualizationPanel",function(){return u});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/visualizerBase.ts"),_=t("./src/selectBase.ts"),m=t("./src/alternativeVizualizersWrapper.ts"),f=t("./src/utils/index.ts"),o=t("./src/localizationManager.ts"),e=t("./src/filterInfo.ts"),i=t("./src/layoutEngine.ts");t("./src/visualizationPanel.scss");var r="sa-question",n="sa-question-layouted";if(document){var s=t("./node_modules/html-loader/index.js?interpolate!./node_modules/val-loader/index.js!./src/svgbundle.html"),a=document.createElement("div");a.style.display="none",a.innerHTML=s,document.head.appendChild(a)}var u=function(p){Object(A.__extends)(c,p);function c(x,g,h,b){h===void 0&&(h={}),b===void 0&&(b=void 0);var v=p.call(this,null,g,h,"panel")||this;v.questions=x,v._elements=b,v.visualizers=[],v.haveCommercialLicense=!1,v.renderedQuestionsCount=0,v.onAfterRenderQuestionCallback=function(d,S){v.renderedQuestionsCount++,v.renderedQuestionsCount==v.questions.length&&(v.renderedQuestionsCount=0,v.afterRender(v.contentContainer))},v.onAlternativeVisualizerChanged=new M.Event,v.onAlternativeVisualizerChangedCallback=function(d,S){v.onAlternativeVisualizerChanged.fire(d,S)},v.onVisibleElementsChanged=new M.Event,v.onElementShown=new M.Event,v.onElementHidden=new M.Event,v.onElementMoved=new M.Event,v.onStateChanged=new M.Event,v._layoutEngine=h.layoutEngine||new i.MuuriLayoutEngine(v.allowDynamicLayout,"."+n),v._layoutEngine.onMoveCallback=function(d,S){return v.moveVisibleElement(d,S)},v.showToolbar=!0,v.options.survey&&(o.localization.currentLocale=v.options.survey.locale),b===void 0&&(v._elements=v.buildElements(x));var y=M.hasLicense;if(v.haveCommercialLicense=!!y&&y(4)||c.haveCommercialLicense||(typeof h.haveCommercialLicense<"u"?h.haveCommercialLicense:!1),v.buildVisualizers(x),v.haveCommercialLicense||v.registerToolbarItem("commercialLicense",function(){return Object(f.createCommercialLicenseLink)()}),v.registerToolbarItem("resetFilter",function(){return f.DocumentHelper.createButton(function(){v.visualizers.forEach(function(d){(d instanceof _.SelectBase||d instanceof m.AlternativeVisualizersWrapper)&&d.setSelection(void 0)})},o.localization.getString("resetFilter"))}),v.registerToolbarItem("addElement",function(d){if(v.allowHideQuestions){var S=void 0,T=function(E,C){var L=v.hiddenElements;if(L.length>0){var O=f.DocumentHelper.createSelector([{name:void 0,displayName:o.localization.getString("addElement")}].concat(L).map(function(z){return{value:z.name,text:z.displayName}}),function(z){return!1},function(z){v.showElement(z.target.value)});S&&d.replaceChild(O,S)||d.appendChild(O),S=O}else S&&d.removeChild(S),S=void 0};T(v,{}),v.onVisibleElementsChanged.add(T)}}),!v.options.disableLocaleSwitch&&v.locales.length>1){var w=v.locales.map(function(d){return{value:d,text:o.localization.getString(d)}});v.registerToolbarItem("changeLocale",function(){return f.DocumentHelper.createSelector(w,function(d){return!!d.value&&v.locale===d.value},function(d){var S=d.target.value;v.locale=S})})}return v}return c.prototype.showElementCore=function(x,g){g===void 0&&(g=-1),x.isVisible=!0;var h=this.renderPanelElement(x,this.contentContainer),b=void 0;g>=0&&(b={index:g}),this.layoutEngine.add([h],b)},c.prototype.showElement=function(x){var g=this.getElement(x),h=this._elements.indexOf(g);this.showElementCore(g,h),this.visibleElementsChanged(g,"ADDED")},c.prototype.hideElementCore=function(x){x.isVisible=!1,x.renderedElement&&(this.layoutEngine.remove([x.renderedElement]),this.contentContainer.removeChild(x.renderedElement),x.renderedElement=void 0)},c.prototype.hideElement=function(x){var g=this.getElement(x);this.hideElementCore(g),this.visibleElementsChanged(g,"REMOVED")},c.prototype.hideAllElements=function(){var x=this;this._elements.forEach(function(g){g.isVisible&&x.hideElementCore(g)}),this.visibleElementsChanged(void 0,"REMOVEDALL")},c.prototype.showAllElements=function(){var x=this;this._elements.forEach(function(g){g.isVisible||x.showElementCore(g)}),this.visibleElementsChanged(void 0,"ADDEDDALL")},c.prototype.makeElementPrivate=function(x){x.isPublic=!1,this.onStateChanged.fire(this,this.state),this.onPermissionsChangedCallback&&this.onPermissionsChangedCallback(this)},c.prototype.makeElementPublic=function(x){x.isPublic=!0,this.onStateChanged.fire(this,this.state),this.onPermissionsChangedCallback&&this.onPermissionsChangedCallback(this)},c.prototype.moveVisibleElement=function(x,g){var h,b,v=this.visibleElements[x],y=this.visibleElements[g];h=this._elements.indexOf(v),b=this._elements.indexOf(y),this.moveElement(h,b)},c.prototype.moveElement=function(x,g){var h=this._elements.splice(x,1);this._elements.splice(g,0,h[0]),this.visibleElementsChanged(h[0],"MOVED")},c.prototype.setBackgroundColorCore=function(x){p.prototype.setBackgroundColorCore.call(this,x),this.visualizers.forEach(function(g){return g.backgroundColor=x})},c.prototype.buildVisualizers=function(x){var g=this;x.forEach(function(h){var b=g.createVisualizer(h);if(g.allowHideQuestions&&b.registerToolbarItem("removeQuestion",function(){return f.DocumentHelper.createButton(function(){setTimeout(function(){return g.hideElement(h.name)},0)},o.localization.getString("hideButton"))}),g.allowMakeQuestionsPrivate&&b.registerToolbarItem("makePrivatePublic",function(){var w=g.getElement(h.name),d=w.isPublic?"first":"second",S="makeprivate",T="makepublic",E=o.localization.getString("makePrivateButton"),C=o.localization.getString("makePublicButton"),L=function(z){setTimeout(function(){return g.makeElementPrivate(w)},0)},O=function(z){setTimeout(function(){return g.makeElementPublic(w)},0)};return f.DocumentHelper.createSvgToggleButton(T,S,E,C,O,L,d)}),b.supportSelection){var v=b,y=new e.FilterInfo(v);b.registerToolbarItem("questionFilterInfo",function(){return y.update(v.selection),y.htmlElement}),v.onDataItemSelected=function(w,d){y.update({value:w,text:d}),g.setFilter(h.name,w)}}b.onUpdate=function(){return g.layout()},b.onAfterRender.add(g.onAfterRenderQuestionCallback),b instanceof m.AlternativeVisualizersWrapper&&b.onVisualizerChanged.add(g.onAlternativeVisualizerChangedCallback),g.visualizers.push(b)})},c.prototype.destroyVisualizers=function(){var x=this;this.visualizers.forEach(function(g){g.onUpdate=void 0,g instanceof _.SelectBase&&(g.onDataItemSelected=void 0),g instanceof m.AlternativeVisualizersWrapper&&g.onVisualizerChanged.remove(x.onAlternativeVisualizerChangedCallback),g.onAfterRender.remove(x.onAfterRenderQuestionCallback),g.destroy()}),this.visualizers=[]},c.prototype.setLocale=function(x){var g=this;p.prototype.setLocale.call(this,x),(this.questions||[]).forEach(function(h){var b=g.getElement(h.name);b&&(b.displayName=g.processText(h.title))}),this.visualizers.forEach(function(h){h.options.seriesLabels=g.options.seriesLabels,h.locale=x}),this.onStateChanged.fire(this,this.state)},Object.defineProperty(c.prototype,"allowDynamicLayout",{get:function(){return this.options.allowDynamicLayout===void 0||this.options.allowDynamicLayout===!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"allowDragDrop",{get:function(){return this.options.allowDragDrop===void 0||this.options.allowDragDrop===!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"allowHideQuestions",{get:function(){return this.options.allowHideQuestions===void 0||this.options.allowHideQuestions===!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"allowMakeQuestionsPrivate",{get:function(){return this.options.allowMakeQuestionsPrivate===!0},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"layoutEngine",{get:function(){return this._layoutEngine},enumerable:!1,configurable:!0}),c.prototype.buildElements=function(x){var g=this;return(x||[]).map(function(h){return{name:h.name,displayName:g.processText(h.title),isVisible:!0,isPublic:!0}})},c.prototype.getElements=function(x){var g=[];return(this._elements||[]).forEach(function(h){(!x||x.indexOf(h.name)!==-1)&&g.push({name:h.name,displayName:h.displayName,isVisible:h.isVisible,isPublic:h.isPublic})}),g},Object.defineProperty(c.prototype,"visibleElements",{get:function(){return this._elements.filter(function(x){return x.isVisible})},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"hiddenElements",{get:function(){return this._elements.filter(function(x){return!x.isVisible})},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"publicElements",{get:function(){return this._elements.filter(function(x){return x.isPublic})},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"privateElements",{get:function(){return this._elements.filter(function(x){return!x.isPublic})},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"locales",{get:function(){return this.options.survey?this.options.survey.getUsedLocales():[]},enumerable:!1,configurable:!0}),c.prototype.getElement=function(x){return this._elements.filter(function(g){return g.name===x})[0]},c.prototype.getVisualizer=function(x){return this.visualizers.filter(function(g){return g.question.name===x})[0]},c.prototype.visibleElementsChanged=function(x,g){g==="SHOWN"&&!this.onElementShown.isEmpty&&this.onElementShown.fire(this,{elements:this._elements,element:x}),g==="REMOVED"&&!this.onElementHidden.isEmpty&&this.onElementHidden.fire(this,{elements:this._elements,element:x}),g==="MOVED"&&!this.onElementMoved.isEmpty&&this.onElementMoved.fire(this,{elements:this._elements,element:x}),this.onVisibleElementsChanged.isEmpty||this.onVisibleElementsChanged.fire(this,{elements:this._elements,changed:x,reason:g}),this.onStateChanged.fire(this,this.state),this.layout()},c.prototype.renderPanelElement=function(x,g){var h=this.getVisualizer(x.name),b=f.DocumentHelper.createElement("div");g&&g.appendChild(b);var v=f.DocumentHelper.createElement("div"),y=f.DocumentHelper.createElement("h3"),w=f.DocumentHelper.createElement("div");return y.innerText=x.displayName,b.className=this.allowDynamicLayout?r+" "+n:r,y.className=r+"__title",this.allowDynamicLayout&&this.allowDragDrop&&(y.className=y.className+" "+r+"__title--draggable"),v.className=r+"__content",v.style.backgroundColor=this.backgroundColor,v.appendChild(y),v.appendChild(w),b.appendChild(v),h.render(w),x.renderedElement=b,b},c.prototype.renderToolbar=function(x){x.className+=" sa-panel__header",p.prototype.renderToolbar.call(this,x)},c.prototype.renderContent=function(x){var g=this;x.className+=" sa-panel__content sa-grid",this.visibleElements.forEach(function(h){g.renderPanelElement(h,x)}),this.layoutEngine.start(x)},c.prototype.destroyContent=function(x){this.layoutEngine.stop(),p.prototype.destroyContent.call(this,x)},c.prototype.refresh=function(){this.toolbarContainer&&(this.destroyToolbar(this.toolbarContainer),this.renderToolbar(this.toolbarContainer)),p.prototype.refresh.call(this)},c.prototype.layout=function(){this.layoutEngine.update()},c.prototype.setFilter=function(x,g){this.dataProvider.setFilter(x,g)},Object.defineProperty(c.prototype,"state",{get:function(){var x=this;return{locale:this.locale,elements:[].concat(this._elements.map(function(g){var h=x.getVisualizer(g.name),b=Object(A.__assign)(Object(A.__assign)({},g),h==null?void 0:h.getState());return b.renderedElement!==void 0&&delete b.renderedElement,b}))}},set:function(x){var g=this;if(x){if(Array.isArray(x.elements)){var h=this.questions.map(function(b){return b.name});this._elements=[].concat(x.elements.filter(function(b){return h.indexOf(b.name)!==-1}))}typeof x.locale<"u"&&this.setLocale(x.locale),this._elements.forEach(function(b){var v=g.getVisualizer(b.name);v!==void 0&&v.setState(b)}),this.refresh()}},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"permissions",{get:function(){return this._elements.map(function(x){return{name:x.name,isPublic:x.isPublic}})},set:function(x){var g=this._elements.map(function(h){return x.forEach(function(b){b.name===h.name&&(h.isPublic=b.isPublic)}),Object(A.__assign)({},h)});this._elements=[].concat(g),this.refresh(),this.onPermissionsChangedCallback&&this.onPermissionsChangedCallback(this)},enumerable:!1,configurable:!0}),c.prototype.destroy=function(){p.prototype.destroy.call(this),this.destroyVisualizers()},c.haveCommercialLicense=!1,c}(l.VisualizerBase)},"./src/visualizationPanelDynamic.ts":function($,P,t){t.r(P),t.d(P,"VisualizationPanelDynamic",function(){return m});var A=t("./src/utils/helpers.ts"),M=t("./src/visualizerBase.ts"),l=t("./src/visualizationManager.ts"),_=t("./src/visualizationPanel.ts"),m=function(f){Object(A.__extends)(o,f);function o(e,i,a,n){a===void 0&&(a={});var s=f.call(this,e,i,a,n||"panelDynamic")||this;s._panelVisualizer=void 0,s.onAfterRenderPanelCallback=function(){s.afterRender(s.contentContainer)};var a=Object.assign({},a);return a.allowDynamicLayout=!1,a.dataProvider=void 0,s._panelVisualizer=new _.VisualizationPanel(s.getQuestions(),[],a),s._panelVisualizer.onAfterRender.add(s.onAfterRenderPanelCallback),s.updateData(i),s}return o.prototype.setLocale=function(e){f.prototype.setLocale.call(this,e),this._panelVisualizer.locale=e},Object.defineProperty(o.prototype,"type",{get:function(){return"panelDynamic"},enumerable:!1,configurable:!0}),o.prototype.updatePanelVisualizerData=function(){var e=this,i=[];this.data.forEach(function(r){r[e.question.name]!==void 0&&(i=i.concat(r[e.question.name]))}),this._panelVisualizer.updateData(i)},o.prototype.updateData=function(e){f.prototype.updateData.call(this,e),this.updatePanelVisualizerData()},o.prototype.onDataChanged=function(){this.updatePanelVisualizerData(),f.prototype.onDataChanged.call(this)},o.prototype.getQuestions=function(){var e=this.question;return e.template.questions},o.prototype.destroyContent=function(e){this._panelVisualizer.clear(),f.prototype.destroyContent.call(this,this.contentContainer)},o.prototype.renderContent=function(e){this._panelVisualizer.render(e)},o.prototype.destroy=function(){f.prototype.destroy.call(this),this._panelVisualizer.onAfterRender.remove(this.onAfterRenderPanelCallback)},o}(M.VisualizerBase);l.VisualizationManager.registerVisualizer("paneldynamic",m)},"./src/visualizerBase.scss":function($,P,t){},"./src/visualizerBase.ts":function($,P,t){t.r(P),t.d(P,"VisualizerBase",function(){return f});var A=t("survey-core"),M=t("./src/dataProvider.ts"),l=t("./src/visualizerFactory.ts"),_=t("./src/utils/index.ts"),m=t("./src/localizationManager.ts");t("./src/visualizerBase.scss");var f=function(){function o(e,i,r,n){r===void 0&&(r={});var s=this;this.question=e,this.options=r,this._type=n,this._showToolbar=!0,this._footerVisualizer=void 0,this._dataProvider=void 0,this.labelTruncateLength=27,this.renderResult=void 0,this.toolbarContainer=void 0,this.headerContainer=void 0,this.contentContainer=void 0,this.footerContainer=void 0,this._supportSelection=!1,this.onAfterRender=new A.Event,this.onLocaleChanged=new A.Event,this.toolbarItemCreators={},this._backgroundColor="#f7f7f7",this._dataProvider=r.dataProvider||new M.DataProvider(i),this._dataProvider.onDataChanged.add(function(){return s.onDataChanged()}),typeof r.labelTruncateLength<"u"&&(this.labelTruncateLength=r.labelTruncateLength)}return o.prototype.afterRender=function(e){this.onAfterRender.fire(this,{htmlElement:e})},Object.defineProperty(o.prototype,"questionOptions",{get:function(){return this.options[this.question.name]},enumerable:!1,configurable:!0}),o.prototype.onDataChanged=function(){this.refresh()},Object.defineProperty(o.prototype,"name",{get:function(){return this.question.valueName||this.question.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasHeader",{get:function(){return!this.options||!this.options.showCorrectAnswers?!1:!!this.question&&!!this.question.correctAnswer},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hasFooter",{get:function(){return!!this.question&&(this.question.hasComment||this.question.hasOther)},enumerable:!1,configurable:!0}),o.prototype.createVisualizer=function(e){var i=Object.assign({},this.options);return i.dataProvider===void 0&&(i.dataProvider=this.dataProvider),l.VisualizerFactory.createVisualizer(e,this.data,i)},Object.defineProperty(o.prototype,"footerVisualizer",{get:function(){var e=this;if(this.hasFooter){if(!this._footerVisualizer){var i=new A.QuestionCommentModel(this.question.name+(A.settings||{}).commentPrefix);i.title=this.processText(this.question.title),this._footerVisualizer=this.createVisualizer(i),this._footerVisualizer.onUpdate=function(){return e.invokeOnUpdate()}}return this._footerVisualizer}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"supportSelection",{get:function(){return(this.options.allowSelection===void 0||this.options.allowSelection)&&this._supportSelection},enumerable:!1,configurable:!0}),o.prototype.getSeriesValues=function(){return this.options.seriesValues||[]},o.prototype.getSeriesLabels=function(){return this.options.seriesLabels||this.getSeriesValues()},o.prototype.getValues=function(){throw new Error("Method not implemented.")},o.prototype.getLabels=function(){return this.getValues()},o.prototype.registerToolbarItem=function(e,i){this.toolbarItemCreators[e]=i},o.prototype.unregisterToolbarItem=function(e){if(this.toolbarItemCreators[e]!==void 0){var i=this.toolbarItemCreators[e];return delete this.toolbarItemCreators[e],i}},Object.defineProperty(o.prototype,"type",{get:function(){return this._type||"visualizer"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"data",{get:function(){return this.dataProvider.filteredData},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"surveyData",{get:function(){return this.dataProvider.filteredData},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dataProvider",{get:function(){return this._dataProvider},enumerable:!1,configurable:!0}),o.prototype.updateData=function(e){this.options.dataProvider||(this.dataProvider.data=e),this.hasFooter&&this.footerVisualizer.updateData(e)},o.prototype.invokeOnUpdate=function(){this.onUpdate&&this.onUpdate()},o.prototype.destroy=function(){this.renderResult&&(this.clear(),this.toolbarContainer=void 0,this.headerContainer=void 0,this.contentContainer=void 0,this.footerContainer=void 0,this.renderResult.innerHTML="",this.renderResult=void 0),this._footerVisualizer&&(this._footerVisualizer.destroy(),this._footerVisualizer.onUpdate=void 0,this._footerVisualizer=void 0)},o.prototype.clear=function(){this.toolbarContainer&&this.destroyToolbar(this.toolbarContainer),this.headerContainer&&this.destroyHeader(this.headerContainer),this.contentContainer&&this.destroyContent(this.contentContainer),this.footerContainer&&this.destroyFooter(this.footerContainer)},o.prototype.createToolbarItems=function(e){var i=this;Object.keys(this.toolbarItemCreators||{}).forEach(function(r){var n=i.toolbarItemCreators[r](e);n&&e.appendChild(n)})},o.prototype.getCorrectAnswerText=function(){return this.question?this.question.correctAnswer:""},o.prototype.destroyToolbar=function(e){e.innerHTML=""},o.prototype.renderToolbar=function(e){if(this.showToolbar){var i=_.DocumentHelper.createElement("div","sa-toolbar");this.createToolbarItems(i),e.appendChild(i)}},o.prototype.destroyHeader=function(e){this.options&&typeof this.options.destroyHeader=="function"?this.options.destroyHeader(e,this):e.innerHTML=""},o.prototype.destroyContent=function(e){this.options&&typeof this.options.destroyContent=="function"?this.options.destroyContent(e,this):e.innerHTML=""},o.prototype.renderHeader=function(e){if(this.options&&typeof this.options.renderHeader=="function")this.options.renderHeader(e,this);else{var i=_.DocumentHelper.createElement("div","sa-visualizer__correct-answer");i.innerText=m.localization.getString("correctAnswer")+this.getCorrectAnswerText(),e.appendChild(i)}},o.prototype.renderContent=function(e){this.options&&typeof this.options.renderContent=="function"?this.options.renderContent(e,this):e.innerText=m.localization.getString("noVisualizerForQuestion"),this.afterRender(e)},o.prototype.destroyFooter=function(e){e.innerHTML=""},o.prototype.renderFooter=function(e){var i=this;if(e.innerHTML="",this.hasFooter){var r=_.DocumentHelper.createElement("h4","sa-visualizer__footer-title",{innerText:m.localization.getString("otherCommentTitle")});e.appendChild(r);var n=_.DocumentHelper.createElement("div","sa-visualizer__footer-content");n.style.display=o.otherCommentCollapsed?"none":"block";var s=_.DocumentHelper.createButton(function(){n.style.display==="none"?(n.style.display="block",s.innerText=m.localization.getString("hideButton")):(n.style.display="none",s.innerText=m.localization.getString(o.otherCommentCollapsed?"showButton":"hideButton")),i.footerVisualizer.invokeOnUpdate()},m.localization.getString("showButton"));e.appendChild(s),e.appendChild(n),this.footerVisualizer.render(n)}},o.prototype.render=function(e){typeof e=="string"&&(e=document.getElementById(e)),this.renderResult=e,this.toolbarContainer=_.DocumentHelper.createElement("div","sa-visualizer__toolbar"),e.appendChild(this.toolbarContainer),this.renderToolbar(this.toolbarContainer),this.hasHeader&&(this.headerContainer=_.DocumentHelper.createElement("div","sa-visualizer__header"),e.appendChild(this.headerContainer),this.renderHeader(this.headerContainer)),this.contentContainer=_.DocumentHelper.createElement("div","sa-visualizer__content"),e.appendChild(this.contentContainer),this.renderContent(this.contentContainer),this.footerContainer=_.DocumentHelper.createElement("div","sa-visualizer__footer"),e.appendChild(this.footerContainer),this.renderFooter(this.footerContainer)},o.prototype.refresh=function(){var e=this;this.headerContainer&&setTimeout(function(){e.destroyHeader(e.headerContainer),e.renderHeader(e.headerContainer),e.invokeOnUpdate()}),this.contentContainer&&setTimeout(function(){e.destroyContent(e.contentContainer),e.renderContent(e.contentContainer),e.invokeOnUpdate()}),this.footerContainer&&setTimeout(function(){e.destroyFooter(e.footerContainer),e.renderFooter(e.footerContainer),e.invokeOnUpdate()})},o.prototype.processText=function(e){if(this.options.stripHtmlFromTitles!==!1){var i=e||"",r=i.replace(/(<([^>]+)>)/gi,"");return r}return e},o.prototype.getRandomColor=function(){var e=this.getColors();return e[Math.floor(Math.random()*e.length)]},Object.defineProperty(o.prototype,"backgroundColor",{get:function(){return this.getBackgroundColorCore()},set:function(e){this.setBackgroundColorCore(e)},enumerable:!1,configurable:!0}),o.prototype.getBackgroundColorCore=function(){return this._backgroundColor},o.prototype.setBackgroundColorCore=function(e){this._backgroundColor=e,this.footerVisualizer&&(this.footerVisualizer.backgroundColor=e)},o.prototype.getColors=function(e){e===void 0&&(e=10);for(var i=Array.isArray(o.customColors)&&o.customColors.length>0?o.customColors:o.colors,r=[],n=0;n<e;n++)r=r.concat(i);return r},Object.defineProperty(o.prototype,"showToolbar",{get:function(){return this._showToolbar},set:function(e){e!=this._showToolbar&&(this._showToolbar=e,this.toolbarContainer&&(this.destroyToolbar(this.toolbarContainer),this.renderToolbar(this.toolbarContainer)))},enumerable:!1,configurable:!0}),o.prototype.getData=function(){return this.dataProvider.getData(this)},o.prototype.getCalculatedValues=function(){return this.dataProvider.getData(this)},o.prototype.getState=function(){return{}},o.prototype.setState=function(e){},Object.defineProperty(o.prototype,"locale",{get:function(){var e=this.options.survey;return e?e.locale:m.localization.currentLocale},set:function(e){this.setLocale(e),this.onLocaleChanged.fire(this,{locale:e}),this.refresh()},enumerable:!1,configurable:!0}),o.prototype.setLocale=function(e){m.localization.currentLocale=e;var i=this.options.survey;i&&i.locale!==e&&(i.locale=e)},o.otherCommentCollapsed=!0,o.customColors=[],o.colors=["#86e1fb","#3999fb","#ff6771","#1eb496","#ffc152","#aba1ff","#7d8da5","#4ec46c","#cf37a6","#4e6198"],o}()},"./src/visualizerFactory.ts":function($,P,t){t.r(P),t.d(P,"VisualizerFactory",function(){return M});var A=t("./src/visualizationManager.ts"),M=function(){function l(){}return l.createVisualizer=function(_,m,f){var o;_.getType()==="text"&&_.inputType?o=_.inputType:o=_.getType();var e=A.VisualizationManager.getVisualizersByType(o),i=e.map(function(s){return new s(_,m,f)});if(i.length>1){var r=A.VisualizationManager.getAltVisualizerSelector(),n=new r(i,_,m,f);return n}return i[0]},l}()},"./src/wordcloud/stopwords/dutch.ts":function($,P,t){t.r(P),t.d(P,"stopWords",function(){return A});var A=["de","en","van","ik","te","dat","die","in","een","hij","het","niet","zijn","is","was","op","aan","met","als","voor","had","er","maar","om","hem","dan","zou","of","wat","mijn","men","dit","zo","door","over","ze","zich","bij","ook","tot","je","mij","uit","der","daar","haar","naar","heb","hoe","heeft","hebben","deze","u","want","nog","zal","me","zij","nu","ge","geen","omdat","iets","worden","toch","al","waren","veel","meer","doen","toen","moet","ben","zonder","kan","hun","dus","alles","onder","ja","eens","hier","wie","werd","altijd","doch","wordt","wezen","kunnen","ons","zelf","tegen","na","reeds","wil","kon","niets","uw","iemand","geweest","andere"]},"./src/wordcloud/stopwords/english.ts":function($,P,t){t.r(P),t.d(P,"stopWords",function(){return A});var A=["...","a","about","above","across","after","again","against","all","almost","alone","along","already","also","although","always","among","an","and","another","any","anybody","anyone","anything","anywhere","are","area","areas","around","as","ask","asked","asking","asks","at","away","b","back","backed","backing","backs","be","became","because","become","becomes","been","before","began","behind","being","beings","best","better","between","big","both","but","by","c","came","can","cannot","case","cases","certain","certainly","clear","clearly","come","could","d","did","differ","different","differently","do","does","done","down","down","downed","downing","downs","during","e","each","early","either","end","ended","ending","ends","enough","even","evenly","ever","every","everybody","everyone","everything","everywhere","f","face","faces","fact","facts","far","felt","few","find","finds","first","for","four","from","full","fully","further","furthered","furthering","furthers","g","gave","general","generally","get","gets","give","given","gives","go","going","good","goods","got","great","greater","greatest","group","grouped","grouping","groups","h","had","has","have","having","he","her","here","herself","high","high","high","higher","highest","him","himself","his","how","however","i","if","important","in","interest","interested","interesting","interests","into","is","it","its","itself","j","just","k","keep","keeps","kind","knew","know","known","knows","l","large","largely","last","later","latest","least","less","let","lets","like","likely","long","longer","longest","m","made","make","making","man","many","may","me","member","members","men","might","more","most","mostly","mr","mrs","much","must","my","myself","n","necessary","need","needed","needing","needs","never","new","new","newer","newest","next","no","nobody","non","noone","not","nothing","now","nowhere","number","numbers","o","of","off","often","old","older","oldest","on","once","one","only","open","opened","opening","opens","or","order","ordered","ordering","orders","other","others","our","out","over","p","part","parted","parting","parts","per","perhaps","place","places","point","pointed","pointing","points","possible","present","presented","presenting","presents","problem","problems","put","puts","q","quite","r","rather","really","right","right","room","rooms","s","said","same","saw","say","says","second","seconds","see","seem","seemed","seeming","seems","sees","several","shall","she","should","show","showed","showing","shows","side","sides","since","small","smaller","smallest","so","some","somebody","someone","something","somewhere","state","states","still","still","such","sure","t","take","taken","than","that","the","their","them","then","there","therefore","these","they","thing","things","think","thinks","this","those","though","thought","thoughts","three","through","thus","to","today","together","too","took","toward","turn","turned","turning","turns","two","u","under","until","up","upon","us","use","used","uses","v","very","w","want","wanted","wanting","wants","was","way","ways","we","well","wells","went","were","what","when","where","whether","which","while","who","whole","whose","why","will","with","within","without","work","worked","working","works","would","x","y","year","years","yet","you","young","younger","youngest","your","yours","z"]},"./src/wordcloud/stopwords/index.ts":function($,P,t){t.r(P),t.d(P,"textHelper",function(){return f});var A=t("./src/wordcloud/stopwords/english.ts"),M=t("./src/wordcloud/stopwords/norwegian.ts"),l=t("./src/wordcloud/stopwords/dutch.ts"),_=t("./src/wordcloud/stopwords/spanish.ts"),m={};m.en=A.stopWords,m.no=M.stopWords,m.nl=l.stopWords,m.es=_.stopWords;var f={getStopWords:function(o){return o===void 0&&(o=""),m[o||"en"]||[]}}},"./src/wordcloud/stopwords/norwegian.ts":function($,P,t){t.r(P),t.d(P,"stopWords",function(){return A});var A=["...","alle","andre","arbeid","at","av","bare","begge","ble","blei","bli","blir","blitt","bort","bruke","bde","be","da","de","deg","dei","deim","deira","deires","dem","den","denne","der","dere","deres","det","dette","di","din","disse","ditt","du","dykk","dykkar","d","eg","ein","eit","eitt","eller","elles","en","ene","eneste","enhver","enn","er","et","ett","etter","folk","for","fordi","forske","fra","f","fr","fr","frst","gjorde","gjre","god","g","ha","hadde","han","hans","har","hennar","henne","hennes","her","hj","ho","hoe","honom","hoss","hossen","hun","hva","hvem","hver","hvilke","hvilken","hvis","hvor","hvordan","hvorfor","i","ikke","ikkje","ingen","ingi","inkje","inn","innen","inni","ja","jeg","kan","kom","korleis","korso","kun","kunne","kva","kvar","kvarhelst","kven","kvi","kvifor","lage","lang","lik","like","makt","man","mange","me","med","medan","meg","meget","mellom","men","mens","mer","mest","mi","min","mine","mitt","mot","mye","mykje","m","mte","navn","ned","nei","no","noe","noen","noka","noko","nokon","nokor","nokre","ny","n","nr","og","ogs","om","opp","oss","over","part","punkt","p","samme","seg","selv","si","sia","sidan","siden","sin","sine","sist","sitt","sjl","skal","skulle","slik","slutt","so","som","somme","somt","start","stille","s","snn","tid","til","tilbake","tilstand","um","under","upp","ut","uten","var","vart","varte","ved","verdi","vere","verte","vi","vil","ville","vite","vore","vors","vort","vr","vre","vrt","vre","vrt","",""]},"./src/wordcloud/stopwords/spanish.ts":function($,P,t){t.r(P),t.d(P,"stopWords",function(){return A});var A=["...","a","actualmente","adelante","adems","afirm","agreg","ahora","ah","al","algo","alguna","algunas","alguno","algunos","algn","alrededor","ambos","ampleamos","ante","anterior","antes","apenas","aproximadamente","aquel","aquellas","aquellos","aqui","aqu","arriba","asegur","as","atras","aunque","ayer","aadi","an","bajo","bastante","bien","buen","buena","buenas","bueno","buenos","cada","casi","cerca","cierta","ciertas","cierto","ciertos","cinco","coment","como","con","conocer","conseguimos","conseguir","considera","consider","consigo","consigue","consiguen","consigues","contra","cosas","creo","cual","cuales","cualquier","cuando","cuanto","cuatro","cuenta","cmo","da","dado","dan","dar","de","debe","deben","debido","decir","dej","del","dems","dentro","desde","despus","dice","dicen","dicho","dieron","diferente","diferentes","dijeron","dijo","dio","donde","dos","durante","e","ejemplo","el","ella","ellas","ello","ellos","embargo","empleais","emplean","emplear","empleas","empleo","en","encima","encuentra","entonces","entre","era","erais","eramos","eran","eras","eres","es","esa","esas","ese","eso","esos","esta","estaba","estabais","estaban","estabas","estad","estada","estadas","estado","estados","estais","estamos","estan","estando","estar","estaremos","estar","estarn","estars","estar","estaris","estara","estarais","estaramos","estaran","estaras","estas","este","estemos","esto","estos","estoy","estuve","estuviera","estuvierais","estuvieran","estuvieras","estuvieron","estuviese","estuvieseis","estuviesen","estuvieses","estuvimos","estuviste","estuvisteis","estuviramos","estuvisemos","estuvo","est","estbamos","estis","estn","ests","est","estis","estn","ests","ex","existe","existen","explic","expres","fin","fue","fuera","fuerais","fueran","fueras","fueron","fuese","fueseis","fuesen","fueses","fui","fuimos","fuiste","fuisteis","furamos","fusemos","gran","grandes","gueno","ha","haber","habida","habidas","habido","habidos","habiendo","habremos","habr","habrn","habrs","habr","habris","habra","habrais","habramos","habran","habras","habis","haba","habais","habamos","haban","habas","hace","haceis","hacemos","hacen","hacer","hacerlo","haces","hacia","haciendo","hago","han","has","hasta","hay","haya","hayamos","hayan","hayas","hayis","he","hecho","hemos","hicieron","hizo","hoy","hube","hubiera","hubierais","hubieran","hubieras","hubieron","hubiese","hubieseis","hubiesen","hubieses","hubimos","hubiste","hubisteis","hubiramos","hubisemos","hubo","igual","incluso","indic","inform","intenta","intentais","intentamos","intentan","intentar","intentas","intento","ir","junto","la","lado","largo","las","le","les","lleg","lleva","llevar","lo","los","luego","lugar","manera","manifest","mayor","me","mediante","mejor","mencion","menos","mi","mientras","mio","mis","misma","mismas","mismo","mismos","modo","momento","mucha","muchas","mucho","muchos","muy","ms","m","ma","mas","mo","mos","nada","nadie","ni","ninguna","ningunas","ninguno","ningunos","ningn","no","nos","nosotras","nosotros","nuestra","nuestras","nuestro","nuestros","nueva","nuevas","nuevo","nuevos","nunca","o","ocho","os","otra","otras","otro","otros","para","parece","parte","partir","pasada","pasado","pero","pesar","poca","pocas","poco","pocos","podeis","podemos","poder","podria","podriais","podriamos","podrian","podrias","podr","podrn","podra","podran","poner","por","por qu","porque","posible","primer","primera","primero","primeros","principalmente","propia","propias","propio","propios","prximo","prximos","pudo","pueda","puede","pueden","puedo","pues","que","qued","queremos","quien","quienes","quiere","quin","qu","realizado","realizar","realiz","respecto","sabe","sabeis","sabemos","saben","saber","sabes","se","sea","seamos","sean","seas","segunda","segundo","segn","seis","ser","seremos","ser","sern","sers","ser","seris","sera","serais","seramos","seran","seras","seis","seal","si","sido","siempre","siendo","siete","sigue","siguiente","sin","sino","sobre","sois","sola","solamente","solas","solo","solos","somos","son","soy","su","sus","suya","suyas","suyo","suyos","s","slo","tal","tambin","tampoco","tan","tanto","te","tendremos","tendr","tendrn","tendrs","tendr","tendris","tendra","tendrais","tendramos","tendran","tendras","tened","teneis","tenemos","tener","tenga","tengamos","tengan","tengas","tengo","tengis","tenida","tenidas","tenido","tenidos","teniendo","tenis","tena","tenais","tenamos","tenan","tenas","tercera","ti","tiempo","tiene","tienen","tienes","toda","todas","todava","todo","todos","total","trabaja","trabajais","trabajamos","trabajan","trabajar","trabajas","trabajo","tras","trata","travs","tres","tu","tus","tuve","tuviera","tuvierais","tuvieran","tuvieras","tuvieron","tuviese","tuvieseis","tuviesen","tuvieses","tuvimos","tuviste","tuvisteis","tuviramos","tuvisemos","tuvo","tuya","tuyas","tuyo","tuyos","t","ultimo","un","una","unas","uno","unos","usa","usais","usamos","usan","usar","usas","uso","usted","va","vais","valor","vamos","van","varias","varios","vaya","veces","ver","verdad","verdadera","verdadero","vez","vosotras","vosotros","voy","vuestra","vuestras","vuestro","vuestros","y","ya","yo","l","ramos","sta","stas","ste","stos","ltima","ltimas","ltimo","ltimos"]},"./src/wordcloud/wordcloud.ts":function($,P,t){t.r(P),t.d(P,"WordCloudAdapter",function(){return r}),t.d(P,"WordCloud",function(){return n});var A=t("./src/utils/helpers.ts"),M=t("survey-core"),l=t("./src/visualizerBase.ts"),_=t("./src/visualizationManager.ts"),m=t("./src/wordcloud/stopwords/index.ts"),f=t("wordcloud"),o=t.n(f),e=t("./src/utils/index.ts"),i=t("./src/localizationManager.ts"),r=function(){function s(a){this.model=a}return Object.defineProperty(s.prototype,"wordcloud",{get:function(){return this._wordcloud},enumerable:!1,configurable:!0}),s.prototype.create=function(a){var u=this,p=this.model.getData();this.model.getColors();var c=e.DocumentHelper.createElement("canvas",""),x=e.DocumentHelper.createElement("p","",{innerText:i.localization.getString("noResults")});if(p.length===0){a.appendChild(x);return}a.appendChild(c);var g={list:p,weightFactor:s.weightFactor,abortThreshold:s.abortThreshold,drawOutOfBound:s.drawOutOfBound,shrinkToFit:s.shrinkToFit,fontFamily:"Segoe UI Bold, sans-serif",color:function(b,v){return u.model.getRandomColor()},rotateRatio:.5,rotationSteps:2,backgroundColor:this.model.backgroundColor,click:function(b){console.log(b[0]+": "+b[1])}},h={canvas:c,config:g};return s.onWordcloudCreating.fire(this.model,h),this._wordcloud=o()(h.canvas,h.config),this._wordcloud},s.prototype.destroy=function(a){this._wordcloud=void 0},s.drawOutOfBound=!1,s.shrinkToFit=!0,s.abortThreshold=void 0,s.weightFactor=20,s.onWordcloudCreating=new M.Event,s}(),n=function(s){Object(A.__extends)(a,s);function a(u,p,c,x){var g=s.call(this,u,p,c,x||"wordcloud")||this;return g._wordcloudAdapter=new r(g),g}return a.prototype.getData=function(){var u=this,p={},c=[],x=i.localization.currentLocale;x?c=m.textHelper.getStopWords(x):c=m.textHelper.getStopWords();var g=function(b){return c.indexOf(b)!==-1?"":b},h=function(b){b=""+b,b.length>15&&(b=b.substring(0,14)+"..."),b&&b.split(" ").forEach(function(v){v=g(v.toLowerCase()||""),v&&(p[v]?p[v]++:p[v]=1)})};return this.data.forEach(function(b){var v=b[u.question.name];v&&(Array.isArray(v)?v.forEach(h):typeof v=="object"?Object.keys(v).forEach(function(y){return h(v[y])}):h(v))}),Object.keys(p).map(function(b){return[b,p[b]]})},a.prototype.destroyContent=function(u){this._wordcloudAdapter.destroy(u),s.prototype.destroyContent.call(this,u)},a.prototype.renderContent=function(u){this._wordcloudAdapter.create(u),this.afterRender(this.contentContainer)},a.prototype.destroy=function(){this._wordcloudAdapter.destroy(this.contentContainer),s.prototype.destroy.call(this)},a}(l.VisualizerBase);_.VisualizationManager.registerVisualizer("text",n),_.VisualizationManager.registerVisualizer("comment",n),_.VisualizationManager.registerVisualizer("multipletext",n)},"plotly.js-dist-min":function($,P){$.exports=_r},"survey-core":function($,P){$.exports=Ir},wordcloud:function($,P){$.exports=Nr}})})})(dp);var g0=dp.exports,Wu={},ls={};Object.defineProperty(ls,"__esModule",{value:!0});ls.excelBOM=ls.defaultCsv2JsonOptions=ls.defaultJson2CsvOptions=ls.errors=void 0;ls.errors={optionsRequired:"Options were not passed and are required.",json2csv:{cannotCallOn:"Cannot call json2csv on",dataCheckFailure:"Data provided was not an array of documents.",notSameSchema:"Not all documents have the same schema."},csv2json:{cannotCallOn:"Cannot call csv2json on",dataCheckFailure:"CSV is not a string."}};ls.defaultJson2CsvOptions={checkSchemaDifferences:!1,delimiter:{field:",",wrap:'"',eol:`
`},emptyFieldValue:void 0,excelBOM:!1,excludeKeys:[],expandNestedObjects:!0,expandArrayObjects:!1,prependHeader:!0,preventCsvInjection:!1,sortHeader:!1,trimFieldValues:!1,trimHeaderFields:!1,unwindArrays:!1,useDateIso8601Format:!1,useLocaleFormat:!1,wrapBooleans:!1};ls.defaultCsv2JsonOptions={delimiter:{field:",",wrap:'"',eol:`
`},excelBOM:!1,preventCsvInjection:!1,trimFieldValues:!1,trimHeaderFields:!1,wrapBooleans:!1};ls.excelBOM="\uFEFF";var Oc={},El={};/**
 * @license MIT
 * doc-path <https://github.com/mrodrig/doc-path>
 * Copyright (c) 2015-present, Michael Rodrigues.
 */Object.defineProperty(El,"__esModule",{value:!0});El.setPath=El.evaluatePath=void 0;function Gu(dn,pr){if(!dn)return null;const{dotIndex:_r,key:Ir,remaining:Nr}=gp(pr),$=typeof dn=="object"&&pr in dn?dn[pr]:void 0,P=typeof dn=="object"&&Ir in dn?dn[Ir]:void 0;return _r>=0&&typeof dn=="object"&&!(pr in dn)?Array.isArray(P)?P.map(t=>Gu(t,Nr)):Gu(P,Nr):Array.isArray(dn)?dn.map(t=>Gu(t,pr)):_r>=0&&pr!==Ir&&typeof dn=="object"&&Ir in dn?Gu(P,Nr):_r===-1&&typeof dn=="object"&&Ir in dn&&!(pr in dn)?P:$}El.evaluatePath=Gu;function v0(dn,pr,_r){if(dn){if(!pr)throw new Error("No keyPath was provided.")}else throw new Error("No object was provided.");return Pc(dn,pr,_r)}El.setPath=v0;function Pc(dn,pr,_r){const{dotIndex:Ir,key:Nr,remaining:$}=gp(pr);if(pr.startsWith("__proto__")||pr.startsWith("constructor")||pr.startsWith("prototype"))return dn;if(Ir>=0){if(typeof dn=="object"&&dn!==null&&!(Nr in dn)&&Array.isArray(dn))return dn.forEach(P=>Pc(P,pr,_r)),dn;typeof dn=="object"&&dn!==null&&!(Nr in dn)&&!Array.isArray(dn)&&(dn[Nr]={}),Pc(dn[Nr],$,_r)}else{if(Array.isArray(dn))return dn.forEach(P=>Pc(P,$,_r)),dn;dn[Nr]=_r}return dn}function gp(dn){const pr=m0(dn);return{dotIndex:pr,key:dn.slice(0,pr>=0?pr:void 0).replace(/\\./g,"."),remaining:dn.slice(pr+1)}}function m0(dn){for(let pr=0;pr<dn.length;pr++){const _r=pr>0?dn[pr-1]:"";if(dn[pr]==="."&&_r!=="\\")return pr}return-1}var vp={},Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.isDocumentToRecurOn=Sl.flatten=Sl.unique=void 0;function y0(dn){return[...new Set(dn)]}Sl.unique=y0;function x0(dn){return[].concat(...dn)}Sl.flatten=x0;function b0(dn){return typeof dn=="object"&&dn!==null&&!Array.isArray(dn)&&Object.keys(dn).length}Sl.isDocumentToRecurOn=b0;var mp={};Object.defineProperty(mp,"__esModule",{value:!0});(function(dn){var pr=_a&&_a.__createBinding||(Object.create?function(f,o,e,i){i===void 0&&(i=e);var r=Object.getOwnPropertyDescriptor(o,e);(!r||("get"in r?!o.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return o[e]}}),Object.defineProperty(f,i,r)}:function(f,o,e,i){i===void 0&&(i=e),f[i]=o[e]}),_r=_a&&_a.__setModuleDefault||(Object.create?function(f,o){Object.defineProperty(f,"default",{enumerable:!0,value:o})}:function(f,o){f.default=o}),Ir=_a&&_a.__importStar||function(f){if(f&&f.__esModule)return f;var o={};if(f!=null)for(var e in f)e!=="default"&&Object.prototype.hasOwnProperty.call(f,e)&&pr(o,f,e);return _r(o,f),o},Nr=_a&&_a.__exportStar||function(f,o){for(var e in f)e!=="default"&&!Object.prototype.hasOwnProperty.call(o,e)&&pr(o,f,e)};Object.defineProperty(dn,"__esModule",{value:!0}),dn.deepKeysFromList=dn.deepKeys=void 0;const $=Ir(Sl);Nr(mp,dn);function P(f,o){const e=m(o);return typeof f=="object"&&f!==null?A("",f,e):[]}dn.deepKeys=P;function t(f,o){const e=m(o);return f.map(i=>typeof i=="object"&&i!==null?P(i,e):[])}dn.deepKeysFromList=t;function A(f,o,e){const i=Object.keys(o).map(r=>{const n=_(f,l(r,e));return e.expandNestedObjects&&$.isDocumentToRecurOn(o[r])?A(n,o[r],e):e.expandArrayObjects&&Array.isArray(o[r])?M(o[r],n,e):e.ignoreEmptyArrays&&Array.isArray(o[r])&&!o[r].length?[]:n});return $.flatten(i)}function M(f,o,e){let i=t(f,e);return f.length?f.length&&$.flatten(i).length===0?[o]:(i=i.map(r=>Array.isArray(r)&&r.length===0?[o]:r.map(n=>_(o,l(n,e)))),$.unique($.flatten(i))):e.ignoreEmptyArraysWhenExpanding?[]:[o]}function l(f,o){return o.escapeNestedDots?f.replace(/\./g,"\\."):f}function _(f,o){return f?f+"."+o:o}function m(f){return{expandNestedObjects:!0,expandArrayObjects:!1,ignoreEmptyArraysWhenExpanding:!1,escapeNestedDots:!1,ignoreEmptyArrays:!1,...f??{}}}})(vp);var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.isInvalid=Zr.flatten=Zr.unique=Zr.arrayDifference=Zr.isError=Zr.isUndefined=Zr.isNull=Zr.isObject=Zr.isString=Zr.isNumber=Zr.unwind=Zr.getNCharacters=Zr.removeEmptyFields=Zr.isEmptyField=Zr.computeSchemaDifferences=Zr.isDateRepresentation=Zr.isStringRepresentation=Zr.deepCopy=Zr.validate=Zr.buildC2JOptions=Zr.buildJ2COptions=void 0;const Tf=El,kl=ls,_0=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,Mf=1e5;function w0(dn){var pr,_r,Ir;return{...kl.defaultJson2CsvOptions,...dn,delimiter:{field:((pr=dn==null?void 0:dn.delimiter)==null?void 0:pr.field)??kl.defaultJson2CsvOptions.delimiter.field,wrap:((_r=dn==null?void 0:dn.delimiter)==null?void 0:_r.wrap)||kl.defaultJson2CsvOptions.delimiter.wrap,eol:((Ir=dn==null?void 0:dn.delimiter)==null?void 0:Ir.eol)||kl.defaultJson2CsvOptions.delimiter.eol},fieldTitleMap:Object.create({})}}Zr.buildJ2COptions=w0;function T0(dn){var pr,_r,Ir;return{...kl.defaultCsv2JsonOptions,...dn,delimiter:{field:((pr=dn==null?void 0:dn.delimiter)==null?void 0:pr.field)??kl.defaultCsv2JsonOptions.delimiter.field,wrap:((_r=dn==null?void 0:dn.delimiter)==null?void 0:_r.wrap)||kl.defaultCsv2JsonOptions.delimiter.wrap,eol:((Ir=dn==null?void 0:dn.delimiter)==null?void 0:Ir.eol)||kl.defaultCsv2JsonOptions.delimiter.eol}}}Zr.buildC2JOptions=T0;function M0(dn,pr,_r){if(!dn)throw new Error(`${_r.cannotCallOn} ${dn}.`);if(!pr(dn))throw new Error(_r.dataCheckFailure);return!0}Zr.validate=M0;function Af(dn){return JSON.parse(JSON.stringify(dn))}Zr.deepCopy=Af;function A0(dn,pr){const _r=dn[0],Ir=dn.length-1,Nr=dn[Ir];return _r===pr.delimiter.wrap&&Nr===pr.delimiter.wrap}Zr.isStringRepresentation=A0;function k0(dn){return _0.test(dn)}Zr.isDateRepresentation=k0;function S0(dn,pr){return kf(dn,pr).concat(kf(pr,dn))}Zr.computeSchemaDifferences=S0;function yp(dn){return bp(dn)||xp(dn)||dn===""}Zr.isEmptyField=yp;function E0(dn){return dn.filter(pr=>!yp(pr))}Zr.removeEmptyFields=E0;function C0(dn,pr,_r){return dn.substring(pr,pr+_r)}Zr.getNCharacters=C0;function L0(dn,pr,_r){const Ir=(0,Tf.evaluatePath)(pr,_r);let Nr=Af(pr);Array.isArray(Ir)&&Ir.length?Ir.forEach($=>{Nr=Af(pr),dn.push((0,Tf.setPath)(Nr,_r,$))}):(Array.isArray(Ir)&&Ir.length===0&&(0,Tf.setPath)(Nr,_r,""),dn.push(Nr))}function P0(dn,pr){const _r=[];return dn.forEach(Ir=>{L0(_r,Ir,pr)}),_r}Zr.unwind=P0;function O0(dn){return!isNaN(Number(dn))}Zr.isNumber=O0;function I0(dn){return typeof dn=="string"}Zr.isString=I0;function D0(dn){return typeof dn=="object"}Zr.isObject=D0;function xp(dn){return dn===null}Zr.isNull=xp;function bp(dn){return typeof dn>"u"}Zr.isUndefined=bp;function z0(dn){return Object.prototype.toString.call(dn)==="[object Error]"}Zr.isError=z0;function kf(dn,pr){return dn.filter(_r=>!pr.includes(_r))}Zr.arrayDifference=kf;function R0(dn){return[...new Set(dn)]}Zr.unique=R0;function B0(dn){if(dn.flat)return dn.flat();if(dn.length>Mf){let pr=[];for(let _r=0;_r<dn.length;_r+=Mf)pr=pr.concat(...dn.slice(_r,_r+Mf));return pr}return dn.reduce((pr,_r)=>pr.concat(_r),[])}Zr.flatten=B0;function F0(dn){return dn===1/0||dn===-1/0}Zr.isInvalid=F0;var N0=_a&&_a.__createBinding||(Object.create?function(dn,pr,_r,Ir){Ir===void 0&&(Ir=_r);var Nr=Object.getOwnPropertyDescriptor(pr,_r);(!Nr||("get"in Nr?!pr.__esModule:Nr.writable||Nr.configurable))&&(Nr={enumerable:!0,get:function(){return pr[_r]}}),Object.defineProperty(dn,Ir,Nr)}:function(dn,pr,_r,Ir){Ir===void 0&&(Ir=_r),dn[Ir]=pr[_r]}),j0=_a&&_a.__setModuleDefault||(Object.create?function(dn,pr){Object.defineProperty(dn,"default",{enumerable:!0,value:pr})}:function(dn,pr){dn.default=pr}),U0=_a&&_a.__importStar||function(dn){if(dn&&dn.__esModule)return dn;var pr={};if(dn!=null)for(var _r in dn)_r!=="default"&&Object.prototype.hasOwnProperty.call(dn,_r)&&N0(pr,dn,_r);return j0(pr,dn),pr};Object.defineProperty(Oc,"__esModule",{value:!0});Oc.Json2Csv=void 0;const V0=El,H0=vp,pp=ls,ul=U0(Zr),G0=function(dn){const pr=new RegExp(dn.delimiter.wrap,"g"),_r=/\r?\n|\r/,Ir=dn.parseValue&&typeof dn.parseValue=="function"?dn.parseValue:null,Nr=dn.expandArrayObjects&&!dn.unwindArrays,$={expandNestedObjects:dn.expandNestedObjects,expandArrayObjects:Nr,ignoreEmptyArraysWhenExpanding:Nr,escapeNestedDots:!0};async function P(v){return(0,H0.deepKeysFromList)(v,$)}function t(v){return dn.checkSchemaDifferences?A(v):ul.unique(ul.flatten(v))}function A(v){const y=v[0],w=v.slice(1);if(M(y,w))throw new Error(pp.errors.json2csv.notSameSchema);return y}function M(v,y){return y.reduce((w,d)=>ul.computeSchemaDifferences(v,d).length>0?w+1:w,0)}function l(v){return dn.excludeKeys?v.filter(y=>!dn.excludeKeys.includes(y)):v}function _(v){return dn.sortHeader&&typeof dn.sortHeader=="function"?v.sort(dn.sortHeader):dn.sortHeader?v.sort():v}function m(v){return dn.trimHeaderFields&&(v.headerFields=v.headerFields.map(y=>y.split(".").map(w=>w.trim()).join("."))),v}function f(v){return dn.prependHeader&&(v.headerFields=v.headerFields.map(function(y){return x(y)})),v}function o(v){const y=Object.keys(dn.fieldTitleMap);return v.header=v.headerFields.map(function(w){const d=y.includes(w)?dn.fieldTitleMap[w]:w;return x(d)}).join(dn.delimiter.field),v}function e(){return dn.keys?dn.keys.map(v=>typeof v=="object"&&"field"in v?(dn.fieldTitleMap[v.field]=v.title??v.field,v.field):v):[]}function i(v){const y=e();return dn.keys&&(dn.keys=y,!dn.unwindArrays)?Promise.resolve(y).then(l).then(_):P(v).then(t).then(l).then(_)}async function r(v,y=!1){if(dn.unwindArrays){const w=v.records.length;return v.headerFields.forEach(d=>{v.records=ul.unwind(v.records,d)}),i(v.records).then(d=>{if(v.headerFields=d,w!==v.records.length)return r(v);if(!y)return r(v,!0);if(dn.keys){const S=e();v.headerFields=l(S)}return v})}return v}function n(v){return v.recordString=v.records.map(y=>{const w=a(y,v.headerFields),d=w.map(S=>{S=p(S),S=c(S);let T=Ir?Ir(S,u):u(S);return T=x(T),T});return g(d)}).join(dn.delimiter.eol),v}function s(v){const y=ul.removeEmptyFields(v);return!v.length||!y.length?dn.emptyFieldValue||"":y.length===1?y[0]:v}function a(v,y){const w=[];return y.forEach(d=>{let S=(0,V0.evaluatePath)(v,d);!ul.isUndefined(dn.emptyFieldValue)&&ul.isEmptyField(S)?S=dn.emptyFieldValue:dn.expandArrayObjects&&Array.isArray(S)&&(S=s(S)),w.push(S)}),w}function u(v){const y=v instanceof Date;return v===null||Array.isArray(v)||typeof v=="object"&&!y?JSON.stringify(v):typeof v>"u"?"undefined":y&&dn.useDateIso8601Format?v.toISOString():dn.useLocaleFormat?v.toLocaleString():v.toString()}function p(v){return dn.trimFieldValues?Array.isArray(v)?v.map(p):typeof v=="string"?v.trim():v:v}function c(v){return dn.preventCsvInjection?Array.isArray(v)?v.map(c):typeof v=="string"&&!ul.isNumber(v)?v.replace(/^[=+\-@\t\r]+/g,""):v:v}function x(v){const y=dn.delimiter.wrap;return v.includes(dn.delimiter.wrap)&&(v=v.replace(pr,y+y)),(v.includes(dn.delimiter.field)||v.includes(dn.delimiter.wrap)||v.match(_r)||dn.wrapBooleans&&(v==="true"||v==="false"))&&(v=y+v+y),v}function g(v){return v.join(dn.delimiter.field)}function h(v){const y=v.header,w=v.recordString;return(dn.excelBOM?pp.excelBOM:"")+(dn.prependHeader?y+dn.delimiter.eol:"")+w}async function b(v){return ul.isObject(v)&&!v.length&&(v=[v]),i(v).then(y=>({headerFields:y,records:v,header:"",recordString:""})).then(r).then(n).then(f).then(m).then(o).then(h)}return{convert:b}};Oc.Json2Csv=G0;var Ic={},W0=_a&&_a.__createBinding||(Object.create?function(dn,pr,_r,Ir){Ir===void 0&&(Ir=_r);var Nr=Object.getOwnPropertyDescriptor(pr,_r);(!Nr||("get"in Nr?!pr.__esModule:Nr.writable||Nr.configurable))&&(Nr={enumerable:!0,get:function(){return pr[_r]}}),Object.defineProperty(dn,Ir,Nr)}:function(dn,pr,_r,Ir){Ir===void 0&&(Ir=_r),dn[Ir]=pr[_r]}),q0=_a&&_a.__setModuleDefault||(Object.create?function(dn,pr){Object.defineProperty(dn,"default",{enumerable:!0,value:pr})}:function(dn,pr){dn.default=pr}),Y0=_a&&_a.__importStar||function(dn){if(dn&&dn.__esModule)return dn;var pr={};if(dn!=null)for(var _r in dn)_r!=="default"&&Object.prototype.hasOwnProperty.call(dn,_r)&&W0(pr,dn,_r);return q0(pr,dn),pr};Object.defineProperty(Ic,"__esModule",{value:!0});Ic.Csv2Json=void 0;const Z0=El,X0=ls,Ul=Y0(Zr),K0=function(dn){const pr=new RegExp(dn.delimiter.wrap+dn.delimiter.wrap,"g"),_r=new RegExp("^"+X0.excelBOM),Ir=dn.parseValue&&typeof dn.parseValue=="function"?dn.parseValue:JSON.parse;function Nr(n){return n=f(n),dn.trimHeaderFields?n.split(".").map(s=>s.trim()).join("."):n}function $(n){let s=[];if(dn.headerFields)s=dn.headerFields.map((a,u)=>({value:Nr(a),index:u}));else if(s=n[0].map((u,p)=>({value:Nr(u),index:p})),dn.keys){const u=dn.keys;s=s.filter(p=>u.includes(p.value))}return{lines:n,headerFields:s,recordLines:[]}}async function P(n){return dn.excelBOM?n.replace(_r,""):n}function t(n){const s=[],a=n.length-1,u=dn.delimiter.eol.length,p={insideWrapDelimiter:!1,parsingValue:!0,justParsedDoubleQuote:!1,startIndex:0};let c=[],x,g,h,b,v=0;for(;v<n.length;){if(x=n[v],g=v?n[v-1]:"",h=v<a?n[v+1]:"",b=Ul.getNCharacters(n,v,u),(b===dn.delimiter.eol&&!p.insideWrapDelimiter||v===a)&&g===dn.delimiter.field)b===dn.delimiter.eol&&p.startIndex===v||x===dn.delimiter.field?c.push(""):c.push(n.substr(p.startIndex)),c.push(""),s.push(c),c=[],p.startIndex=v+u,p.parsingValue=!0,p.insideWrapDelimiter=h===dn.delimiter.wrap;else if(v===a&&x===dn.delimiter.field){const y=n.substring(p.startIndex,v);c.push(y),c.push(""),s.push(c)}else if(v===a||b===dn.delimiter.eol&&(!p.insideWrapDelimiter||p.insideWrapDelimiter&&g===dn.delimiter.wrap&&!p.justParsedDoubleQuote)){const y=v!==a||g===dn.delimiter.wrap?v:void 0;c.push(n.substring(p.startIndex,y)),s.push(c),c=[],p.startIndex=v+u,p.parsingValue=!0,p.insideWrapDelimiter=h===dn.delimiter.wrap}else if((g!==dn.delimiter.wrap||p.justParsedDoubleQuote&&g===dn.delimiter.wrap)&&x===dn.delimiter.wrap&&Ul.getNCharacters(n,v+1,u)===dn.delimiter.eol)p.insideWrapDelimiter=!1,p.parsingValue=!1;else if(x===dn.delimiter.wrap&&(v===0||Ul.getNCharacters(n,v-u,u)===dn.delimiter.eol&&!p.insideWrapDelimiter))p.insideWrapDelimiter=!0,p.parsingValue=!0,p.startIndex=v;else if(x===dn.delimiter.wrap&&h===dn.delimiter.field)c.push(n.substring(p.startIndex,v+1)),p.startIndex=v+2,p.insideWrapDelimiter=!1,p.parsingValue=!1;else if(x===dn.delimiter.wrap&&g===dn.delimiter.field&&!p.insideWrapDelimiter&&!p.parsingValue)p.startIndex=v,p.insideWrapDelimiter=!0,p.parsingValue=!0;else if(x===dn.delimiter.wrap&&g===dn.delimiter.field&&!p.insideWrapDelimiter&&p.parsingValue)c.push(n.substring(p.startIndex,v-1)),p.insideWrapDelimiter=!0,p.parsingValue=!0,p.startIndex=v;else if(x===dn.delimiter.wrap&&h===dn.delimiter.wrap&&v!==p.startIndex){v+=2,p.justParsedDoubleQuote=!0;continue}else x===dn.delimiter.field&&g!==dn.delimiter.wrap&&h!==dn.delimiter.wrap&&!p.insideWrapDelimiter&&p.parsingValue?(c.push(n.substring(p.startIndex,v)),p.startIndex=v+1):x===dn.delimiter.field&&g===dn.delimiter.wrap&&h!==dn.delimiter.wrap&&!p.parsingValue&&(p.insideWrapDelimiter=!1,p.parsingValue=!0,p.startIndex=v+1);v++,p.justParsedDoubleQuote=!1}return s}function A(n){return dn.headerFields?n.recordLines=n.lines:n.recordLines=n.lines.splice(1),n}function M(n,s){const a=s[n.index];return l(a)}function l(n){const s=i(n);return!Ul.isError(s)&&!Ul.isInvalid(s)?s:n==="undefined"?void 0:n}function _(n){return dn.trimFieldValues&&n!==null?n.trim():n}function m(n,s){return n.reduce((a,u)=>{const p=M(u,s);try{return(0,Z0.setPath)(a,u.value,p)}catch{return a}},{})}function f(n){const s=n[0],a=n.length-1,u=n[a];return s===dn.delimiter.wrap&&u===dn.delimiter.wrap?n.substr(1,a-1):n}function o(n){return n.replace(pr,dn.delimiter.wrap)}function e(n){return n.recordLines.reduce((s,a)=>{a=a.map(p=>(p=f(p),p=o(p),p=_(p),p));const u=m(n.headerFields,a);return s.concat(u)},[])}function i(n){try{if(Ul.isStringRepresentation(n,dn)&&!Ul.isDateRepresentation(n))return n;const s=Ir(n);return Array.isArray(s)?s.map(_):s}catch(s){return s}}async function r(n){return P(n).then(t).then($).then(A).then(e)}return{convert:r}};Ic.Csv2Json=K0;Object.defineProperty(Wu,"__esModule",{value:!0});Wu.csv2json=wp=Wu.json2csv=void 0;const _p=ls,J0=Oc,$0=Ic,pu=Zr;async function Q0(dn,pr){const _r=(0,pu.buildJ2COptions)(pr??{});return(0,pu.validate)(dn,pu.isObject,_p.errors.json2csv),(0,J0.Json2Csv)(_r).convert(dn)}var wp=Wu.json2csv=Q0;async function eg(dn,pr){const _r=(0,pu.buildC2JOptions)(pr??{});return(0,pu.validate)(dn,pu.isString,_p.errors.csv2json),(0,$0.Csv2Json)(_r).convert(dn)}Wu.csv2json=eg;const tg={allowHideQuestions:!0,haveCommercialLicense:!0},ng={props:["results","structure","surveyid","name"],name:"survey-analytics",components:{Head:a0,AuthenticatedLayout:f0},mounted(){const dn=JSON.parse(this.results),pr=new o0.Model(this.structure),_r=new g0.VisualizationPanel(pr.getAllQuestions(),dn,tg);_r.showHeader=!0,_r.render(document.getElementById("surveyVizPanel"))},methods:{jsonToCsv(){let dn={expandArrayObjects:!0};wp(JSON.parse(this.results),dn).then(pr=>{console.log(pr);let _r=document.createElement("a");_r.href="data:text/csv;charset=utf-8,"+encodeURI(pr),_r.click()}).catch(pr=>{console.error(pr)})}}},rg={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},ig={class:"py-12"},ag={class:"max-w-8xl mx-auto sm:px-6 lg:px-8 space-y-6"},og=hu("div",{class:"max-w-8xl mx-auto sm:px-6 lg:px-8 space-y-6"},[hu("div",{id:"surveyVizPanel"})],-1);function sg(dn,pr,_r,Ir,Nr,$){const P=lp("Head"),t=lp("AuthenticatedLayout");return s0(),l0(u0,null,[up(P,{title:"Survey Results - "+this.name},null,8,["title"]),up(t,null,{header:cp(()=>[hu("h2",rg,"Survey Results - "+c0(this.name),1)]),default:cp(()=>[hu("div",ig,[hu("div",ag,[hu("button",{onClick:pr[0]||(pr[0]=A=>$.jsonToCsv()),type:"button",class:"text-white bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-green-300 dark:focus:ring-green-800 shadow-lg shadow-green-500/50 dark:shadow-lg dark:shadow-green-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"Export as CSV")]),og])]),_:1})],64)}const fg=h0(ng,[["render",sg]]);export{fg as default};
